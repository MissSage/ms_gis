import{fU as $,$ as M,am as g,ao as j,fM as R,fV as U,fW as C,fX as k,fY as v,fZ as w,f_ as x,f$ as b,g0 as S,g1 as Y,bu as Z,W as A}from"./vendor.faf54504.js";import{i as E,o as l,r as F}from"./automaticLengthMeasurementUtils.30bc15bc.js";import{x as G}from"./earcut.afc1d357.js";import{S as J}from"./triangle.d6c0a6a7.js";function L(t,n=m()){return q(t,n)}function V(t,n=m()){return q(t,n,!1)}function q(t,n,o=t.hasZ){const a=E(t.spatialReference),u=$(a);if(M(u))return null;const W=(f,s)=>!(s.length<2)&&(j(f,s[0],s[1],o&&s[2]||0),!0);let h=0;for(const f of t.rings){const s=f.length;if(s<3)continue;const{positionsWorldCoords:e}=n;for(;e.length<s;)e.push(g());const p=X,c=j(_,0,0,0),y=1/s;for(let r=0;r<s;r++){if(!W(p,f[r])||!R(p,t.spatialReference,e[r],a))return null;U(c,c,e[r],y)}const d=C(e[0],e[1],c,k());if(v(w(d))===0)continue;for(let r=0;r<s;r++)x(d,c,e[r],e[r]);const i=z(e);for(let r=0;r<i.length;r+=3)h+=J(e[i[r]],e[i[r+1]],e[i[r+2]])}return l(h,u)}const X=g(),_=g();function m(){return{positionsWorldCoords:[]}}function z(t){return G(B(t),[],2)}function B(t){const n=new Float64Array(2*t.length);for(let o=0;o<t.length;++o){const a=t[o],u=2*o;n[u+0]=a[0],n[u+1]=a[1]}return n}function D(t){const{spatialReference:n}=t;return F(n,H,I,K,t)}function H(t){return l(Math.abs(b([t],"square-meters")[0]),"square-meters")}function I(t){try{return l(Math.abs(S(t,"square-meters")),"square-meters")}catch{return null}}function K(t){const n=[];return Y(t,n)?l(Math.abs(b([{type:"polygon",rings:n,spatialReference:Z.WGS84}],"square-meters")[0]),"square-meters"):null}function N(t,n,o=m()){if(n==="on-the-ground"){const a=D(t);return A(a)?a:V(t,o)}return L(t,o)}function tt(t,n=m()){return N(t,"on-the-ground",n)}export{N as i,tt as u};
