var gee=Object.defineProperty,mee=Object.defineProperties;var vee=Object.getOwnPropertyDescriptors;var Tb=Object.getOwnPropertySymbols;var NC=Object.prototype.hasOwnProperty,jC=Object.prototype.propertyIsEnumerable;var DC=(e,t,i)=>t in e?gee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,te=(e,t)=>{for(var i in t||(t={}))NC.call(t,i)&&DC(e,i,t[i]);if(Tb)for(var i of Tb(t))jC.call(t,i)&&DC(e,i,t[i]);return e},je=(e,t)=>mee(e,vee(t));var VC=(e,t)=>{var i={};for(var r in e)NC.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&Tb)for(var r of Tb(e))t.indexOf(r)<0&&jC.call(e,r)&&(i[r]=e[r]);return i};function Y9(e,t){const i=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)i[r[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const bee="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wee=Y9(bee);function zC(e){return!!e||e===""}function X9(e){if(Ut(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=cn(r)?See(r):X9(r);if(s)for(const l in s)t[l]=s[l]}return t}else{if(cn(e))return e;if(Fr(e))return e}}const _ee=/;(?![^(]*\))/g,xee=/:(.+)/;function See(e){const t={};return e.split(_ee).forEach(i=>{if(i){const r=i.split(xee);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Q9(e){let t="";if(cn(e))t=e;else if(Ut(e))for(let i=0;i<e.length;i++){const r=Q9(e[i]);r&&(t+=r+" ")}else if(Fr(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Q8e=e=>e==null?"":Ut(e)||Fr(e)&&(e.toString===HC||!Kt(e.toString))?JSON.stringify(e,GC,2):String(e),GC=(e,t)=>t&&t.__v_isRef?GC(e,t.value):xf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s])=>(i[`${r} =>`]=s,i),{})}:UC(t)?{[`Set(${t.size})`]:[...t.values()]}:Fr(t)&&!Ut(t)&&!WC(t)?String(t):t,Di={},_f=[],ta=()=>{},Mee=()=>!1,$ee=/^on[^a-z]/,Eb=e=>$ee.test(e),e5=e=>e.startsWith("onUpdate:"),$n=Object.assign,qC=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Iee=Object.prototype.hasOwnProperty,Si=(e,t)=>Iee.call(e,t),Ut=Array.isArray,xf=e=>Cb(e)==="[object Map]",UC=e=>Cb(e)==="[object Set]",Kt=e=>typeof e=="function",cn=e=>typeof e=="string",t5=e=>typeof e=="symbol",Fr=e=>e!==null&&typeof e=="object",BC=e=>Fr(e)&&Kt(e.then)&&Kt(e.catch),HC=Object.prototype.toString,Cb=e=>HC.call(e),Tee=e=>Cb(e).slice(8,-1),WC=e=>Cb(e)==="[object Object]",i5=e=>cn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ab=Y9(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pb=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Eee=/-(\w)/g,Ba=Pb(e=>e.replace(Eee,(t,i)=>i?i.toUpperCase():"")),Cee=/\B([A-Z])/g,Sf=Pb(e=>e.replace(Cee,"-$1").toLowerCase()),Ob=Pb(e=>e.charAt(0).toUpperCase()+e.slice(1)),r5=Pb(e=>e?`on${Ob(e)}`:""),xy=(e,t)=>!Object.is(e,t),n5=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},kb=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},JC=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ZC;const Aee=()=>ZC||(ZC=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let rp;const Rb=[];class Pee{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&rp&&(this.parent=rp,this.index=(rp.scopes||(rp.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(Rb.push(this),rp=this)}off(){this.active&&(Rb.pop(),rp=Rb[Rb.length-1])}stop(t){if(this.active){if(this.effects.forEach(i=>i.stop()),this.cleanups.forEach(i=>i()),this.scopes&&this.scopes.forEach(i=>i.stop(!0)),this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function Oee(e,t){t=t||rp,t&&t.active&&t.effects.push(e)}const s5=e=>{const t=new Set(e);return t.w=0,t.n=0,t},KC=e=>(e.w&gc)>0,YC=e=>(e.n&gc)>0,kee=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=gc},Ree=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const s=t[r];KC(s)&&!YC(s)?s.delete(e):t[i++]=s,s.w&=~gc,s.n&=~gc}t.length=i}},o5=new WeakMap;let Sy=0,gc=1;const a5=30,My=[];let np;const sp=Symbol(""),l5=Symbol("");class u5{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],Oee(this,r)}run(){if(!this.active)return this.fn();if(!My.includes(this))try{return My.push(np=this),Fee(),gc=1<<++Sy,Sy<=a5?kee(this):XC(this),this.fn()}finally{Sy<=a5&&Ree(this),gc=1<<--Sy,op(),My.pop();const t=My.length;np=t>0?My[t-1]:void 0}}stop(){this.active&&(XC(this),this.onStop&&this.onStop(),this.active=!1)}}function XC(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let Mf=!0;const c5=[];function $f(){c5.push(Mf),Mf=!1}function Fee(){c5.push(Mf),Mf=!0}function op(){const e=c5.pop();Mf=e===void 0?!0:e}function Ws(e,t,i){if(!QC())return;let r=o5.get(e);r||o5.set(e,r=new Map);let s=r.get(i);s||r.set(i,s=s5()),eA(s)}function QC(){return Mf&&np!==void 0}function eA(e,t){let i=!1;Sy<=a5?YC(e)||(e.n|=gc,i=!KC(e)):i=!e.has(np),i&&(e.add(np),np.deps.push(e))}function Hl(e,t,i,r,s,l){const f=o5.get(e);if(!f)return;let d=[];if(t==="clear")d=[...f.values()];else if(i==="length"&&Ut(e))f.forEach((v,_)=>{(_==="length"||_>=r)&&d.push(v)});else switch(i!==void 0&&d.push(f.get(i)),t){case"add":Ut(e)?i5(i)&&d.push(f.get("length")):(d.push(f.get(sp)),xf(e)&&d.push(f.get(l5)));break;case"delete":Ut(e)||(d.push(f.get(sp)),xf(e)&&d.push(f.get(l5)));break;case"set":xf(e)&&d.push(f.get(sp));break}if(d.length===1)d[0]&&h5(d[0]);else{const v=[];for(const _ of d)_&&v.push(..._);h5(s5(v))}}function h5(e,t){for(const i of Ut(e)?e:[...e])(i!==np||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const Lee=Y9("__proto__,__v_isRef,__isVue"),tA=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(t5)),Nee=p5(),jee=p5(!1,!0),Dee=p5(!0),iA=Vee();function Vee(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=Ti(this);for(let l=0,f=this.length;l<f;l++)Ws(r,"get",l+"");const s=r[t](...i);return s===-1||s===!1?r[t](...i.map(Ti)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){$f();const r=Ti(this)[t].apply(this,i);return op(),r}}),e}function p5(e=!1,t=!1){return function(r,s,l){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&l===(e?t?ite:hA:t?cA:uA).get(r))return r;const f=Ut(r);if(!e&&f&&Si(iA,s))return Reflect.get(iA,s,l);const d=Reflect.get(r,s,l);return(t5(s)?tA.has(s):Lee(s))||(e||Ws(r,"get",s),t)?d:ts(d)?!f||!i5(s)?d.value:d:Fr(d)?e?pA(d):$y(d):d}}const zee=rA(),Gee=rA(!0);function rA(e=!1){return function(i,r,s,l){let f=i[r];if(!e&&!g5(s)&&(s=Ti(s),f=Ti(f),!Ut(i)&&ts(f)&&!ts(s)))return f.value=s,!0;const d=Ut(i)&&i5(r)?Number(r)<i.length:Si(i,r),v=Reflect.set(i,r,s,l);return i===Ti(l)&&(d?xy(s,f)&&Hl(i,"set",r,s):Hl(i,"add",r,s)),v}}function qee(e,t){const i=Si(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&Hl(e,"delete",t,void 0),r}function Uee(e,t){const i=Reflect.has(e,t);return(!t5(t)||!tA.has(t))&&Ws(e,"has",t),i}function Bee(e){return Ws(e,"iterate",Ut(e)?"length":sp),Reflect.ownKeys(e)}const nA={get:Nee,set:zee,deleteProperty:qee,has:Uee,ownKeys:Bee},Hee={get:Dee,set(e,t){return!0},deleteProperty(e,t){return!0}},Wee=$n({},nA,{get:jee,set:Gee}),d5=e=>e,Fb=e=>Reflect.getPrototypeOf(e);function Lb(e,t,i=!1,r=!1){e=e.__v_raw;const s=Ti(e),l=Ti(t);t!==l&&!i&&Ws(s,"get",t),!i&&Ws(s,"get",l);const{has:f}=Fb(s),d=r?d5:i?m5:Iy;if(f.call(s,t))return d(e.get(t));if(f.call(s,l))return d(e.get(l));e!==s&&e.get(t)}function Nb(e,t=!1){const i=this.__v_raw,r=Ti(i),s=Ti(e);return e!==s&&!t&&Ws(r,"has",e),!t&&Ws(r,"has",s),e===s?i.has(e):i.has(e)||i.has(s)}function jb(e,t=!1){return e=e.__v_raw,!t&&Ws(Ti(e),"iterate",sp),Reflect.get(e,"size",e)}function sA(e){e=Ti(e);const t=Ti(this);return Fb(t).has.call(t,e)||(t.add(e),Hl(t,"add",e,e)),this}function oA(e,t){t=Ti(t);const i=Ti(this),{has:r,get:s}=Fb(i);let l=r.call(i,e);l||(e=Ti(e),l=r.call(i,e));const f=s.call(i,e);return i.set(e,t),l?xy(t,f)&&Hl(i,"set",e,t):Hl(i,"add",e,t),this}function aA(e){const t=Ti(this),{has:i,get:r}=Fb(t);let s=i.call(t,e);s||(e=Ti(e),s=i.call(t,e)),r&&r.call(t,e);const l=t.delete(e);return s&&Hl(t,"delete",e,void 0),l}function lA(){const e=Ti(this),t=e.size!==0,i=e.clear();return t&&Hl(e,"clear",void 0,void 0),i}function Db(e,t){return function(r,s){const l=this,f=l.__v_raw,d=Ti(f),v=t?d5:e?m5:Iy;return!e&&Ws(d,"iterate",sp),f.forEach((_,M)=>r.call(s,v(_),v(M),l))}}function Vb(e,t,i){return function(...r){const s=this.__v_raw,l=Ti(s),f=xf(l),d=e==="entries"||e===Symbol.iterator&&f,v=e==="keys"&&f,_=s[e](...r),M=i?d5:t?m5:Iy;return!t&&Ws(l,"iterate",v?l5:sp),{next(){const{value:T,done:A}=_.next();return A?{value:T,done:A}:{value:d?[M(T[0]),M(T[1])]:M(T),done:A}},[Symbol.iterator](){return this}}}}function mc(e){return function(...t){return e==="delete"?!1:this}}function Jee(){const e={get(l){return Lb(this,l)},get size(){return jb(this)},has:Nb,add:sA,set:oA,delete:aA,clear:lA,forEach:Db(!1,!1)},t={get(l){return Lb(this,l,!1,!0)},get size(){return jb(this)},has:Nb,add:sA,set:oA,delete:aA,clear:lA,forEach:Db(!1,!0)},i={get(l){return Lb(this,l,!0)},get size(){return jb(this,!0)},has(l){return Nb.call(this,l,!0)},add:mc("add"),set:mc("set"),delete:mc("delete"),clear:mc("clear"),forEach:Db(!0,!1)},r={get(l){return Lb(this,l,!0,!0)},get size(){return jb(this,!0)},has(l){return Nb.call(this,l,!0)},add:mc("add"),set:mc("set"),delete:mc("delete"),clear:mc("clear"),forEach:Db(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{e[l]=Vb(l,!1,!1),i[l]=Vb(l,!0,!1),t[l]=Vb(l,!1,!0),r[l]=Vb(l,!0,!0)}),[e,i,t,r]}const[Zee,Kee,Yee,Xee]=Jee();function f5(e,t){const i=t?e?Xee:Yee:e?Kee:Zee;return(r,s,l)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Si(i,s)&&s in r?i:r,s,l)}const Qee={get:f5(!1,!1)},ete={get:f5(!1,!0)},tte={get:f5(!0,!1)},uA=new WeakMap,cA=new WeakMap,hA=new WeakMap,ite=new WeakMap;function rte(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nte(e){return e.__v_skip||!Object.isExtensible(e)?0:rte(Tee(e))}function $y(e){return e&&e.__v_isReadonly?e:y5(e,!1,nA,Qee,uA)}function ste(e){return y5(e,!1,Wee,ete,cA)}function pA(e){return y5(e,!0,Hee,tte,hA)}function y5(e,t,i,r,s){if(!Fr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=s.get(e);if(l)return l;const f=nte(e);if(f===0)return e;const d=new Proxy(e,f===2?r:i);return s.set(e,d),d}function If(e){return g5(e)?If(e.__v_raw):!!(e&&e.__v_isReactive)}function g5(e){return!!(e&&e.__v_isReadonly)}function dA(e){return If(e)||g5(e)}function Ti(e){const t=e&&e.__v_raw;return t?Ti(t):e}function fA(e){return kb(e,"__v_skip",!0),e}const Iy=e=>Fr(e)?$y(e):e,m5=e=>Fr(e)?pA(e):e;function yA(e){QC()&&(e=Ti(e),e.dep||(e.dep=s5()),eA(e.dep))}function gA(e,t){e=Ti(e),e.dep&&h5(e.dep)}function ts(e){return Boolean(e&&e.__v_isRef===!0)}function ote(e){return mA(e,!1)}function ate(e){return mA(e,!0)}function mA(e,t){return ts(e)?e:new lte(e,t)}class lte{constructor(t,i){this._shallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Ti(t),this._value=i?t:Iy(t)}get value(){return yA(this),this._value}set value(t){t=this._shallow?t:Ti(t),xy(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:Iy(t),gA(this))}}function Ty(e){return ts(e)?e.value:e}const ute={get:(e,t,i)=>Ty(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return ts(s)&&!ts(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function vA(e){return If(e)?e:new Proxy(e,ute)}function eTe(e){const t=Ut(e)?new Array(e.length):{};for(const i in e)t[i]=hte(e,i);return t}class cte{constructor(t,i){this._object=t,this._key=i,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function hte(e,t){const i=e[t];return ts(i)?i:new cte(e,t)}class pte{constructor(t,i,r){this._setter=i,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new u5(t,()=>{this._dirty||(this._dirty=!0,gA(this))}),this.__v_isReadonly=r}get value(){const t=Ti(this);return yA(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Ha(e,t){let i,r;const s=Kt(e);return s?(i=e,r=ta):(i=e.get,r=e.set),new pte(i,r,s||!r)}Promise.resolve();function dte(e,t,...i){const r=e.vnode.props||Di;let s=i;const l=t.startsWith("update:"),f=l&&t.slice(7);if(f&&f in r){const M=`${f==="modelValue"?"model":f}Modifiers`,{number:T,trim:A}=r[M]||Di;A?s=i.map(k=>k.trim()):T&&(s=i.map(JC))}let d,v=r[d=r5(t)]||r[d=r5(Ba(t))];!v&&l&&(v=r[d=r5(Sf(t))]),v&&$o(v,e,6,s);const _=r[d+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,$o(_,e,6,s)}}function bA(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const l=e.emits;let f={},d=!1;if(!Kt(e)){const v=_=>{const M=bA(_,t,!0);M&&(d=!0,$n(f,M))};!i&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!l&&!d?(r.set(e,null),null):(Ut(l)?l.forEach(v=>f[v]=null):$n(f,l),r.set(e,f),f)}function v5(e,t){return!e||!Eb(t)?!1:(t=t.slice(2).replace(/Once$/,""),Si(e,t[0].toLowerCase()+t.slice(1))||Si(e,Sf(t))||Si(e,t))}let Js=null,wA=null;function zb(e){const t=Js;return Js=e,wA=e&&e.type.__scopeId||null,t}function fte(e,t=Js,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&JA(-1);const l=zb(t),f=e(...s);return zb(l),r._d&&JA(1),f};return r._n=!0,r._c=!0,r._d=!0,r}function b5(e){const{type:t,vnode:i,proxy:r,withProxy:s,props:l,propsOptions:[f],slots:d,attrs:v,emit:_,render:M,renderCache:T,data:A,setupState:k,ctx:F,inheritAttrs:D}=e;let z,H;const J=zb(e);try{if(i.shapeFlag&4){const ie=s||r;z=Ja(M.call(ie,ie,T,l,k,A,F)),H=v}else{const ie=t;z=Ja(ie.length>1?ie(l,{attrs:v,slots:d,emit:_}):ie(l,null)),H=t.props?v:yte(v)}}catch(ie){Cy.length=0,ew(ie,e,1),z=ns(ia)}let Y=z;if(H&&D!==!1){const ie=Object.keys(H),{shapeFlag:re}=Y;ie.length&&re&(1|6)&&(f&&ie.some(e5)&&(H=gte(H,f)),Y=Tf(Y,H))}return i.dirs&&(Y.dirs=Y.dirs?Y.dirs.concat(i.dirs):i.dirs),i.transition&&(Y.transition=i.transition),z=Y,zb(J),z}const yte=e=>{let t;for(const i in e)(i==="class"||i==="style"||Eb(i))&&((t||(t={}))[i]=e[i]);return t},gte=(e,t)=>{const i={};for(const r in e)(!e5(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function mte(e,t,i){const{props:r,children:s,component:l}=e,{props:f,children:d,patchFlag:v}=t,_=l.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&v>=0){if(v&1024)return!0;if(v&16)return r?_A(r,f,_):!!f;if(v&8){const M=t.dynamicProps;for(let T=0;T<M.length;T++){const A=M[T];if(f[A]!==r[A]&&!v5(_,A))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:r===f?!1:r?f?_A(r,f,_):!0:!!f;return!1}function _A(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const l=r[s];if(t[l]!==e[l]&&!v5(i,l))return!0}return!1}function vte({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const bte=e=>e.__isSuspense;function wte(e,t){t&&t.pendingBranch?Ut(e)?t.effects.push(...e):t.effects.push(e):bie(e)}function Gb(e,t){if(hn){let i=hn.provides;const r=hn.parent&&hn.parent.provides;r===i&&(i=hn.provides=Object.create(r)),i[e]=t}}function vc(e,t,i=!1){const r=hn||Js;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Kt(t)?t.call(r.proxy):t}}function _te(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return TA(()=>{e.isMounted=!0}),EA(()=>{e.isUnmounting=!0}),e}const So=[Function,Array],xte={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:So,onEnter:So,onAfterEnter:So,onEnterCancelled:So,onBeforeLeave:So,onLeave:So,onAfterLeave:So,onLeaveCancelled:So,onBeforeAppear:So,onAppear:So,onAfterAppear:So,onAppearCancelled:So},setup(e,{slots:t}){const i=lie(),r=_te();let s;return()=>{const l=t.default&&$A(t.default(),!0);if(!l||!l.length)return;const f=Ti(e),{mode:d}=f,v=l[0];if(r.isLeaving)return _5(v);const _=MA(v);if(!_)return _5(v);const M=w5(_,f,r,i);x5(_,M);const T=i.subTree,A=T&&MA(T);let k=!1;const{getTransitionKey:F}=_.type;if(F){const D=F();s===void 0?s=D:D!==s&&(s=D,k=!0)}if(A&&A.type!==ia&&(!cp(_,A)||k)){const D=w5(A,f,r,i);if(x5(A,D),d==="out-in")return r.isLeaving=!0,D.afterLeave=()=>{r.isLeaving=!1,i.update()},_5(v);d==="in-out"&&_.type!==ia&&(D.delayLeave=(z,H,J)=>{const Y=SA(r,A);Y[String(A.key)]=A,z._leaveCb=()=>{H(),z._leaveCb=void 0,delete M.delayedLeave},M.delayedLeave=J})}return v}}},xA=xte;function SA(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function w5(e,t,i,r){const{appear:s,mode:l,persisted:f=!1,onBeforeEnter:d,onEnter:v,onAfterEnter:_,onEnterCancelled:M,onBeforeLeave:T,onLeave:A,onAfterLeave:k,onLeaveCancelled:F,onBeforeAppear:D,onAppear:z,onAfterAppear:H,onAppearCancelled:J}=t,Y=String(e.key),ie=SA(i,e),re=(le,me)=>{le&&$o(le,r,9,me)},ee={mode:l,persisted:f,beforeEnter(le){let me=d;if(!i.isMounted)if(s)me=D||d;else return;le._leaveCb&&le._leaveCb(!0);const we=ie[Y];we&&cp(e,we)&&we.el._leaveCb&&we.el._leaveCb(),re(me,[le])},enter(le){let me=v,we=_,_e=M;if(!i.isMounted)if(s)me=z||v,we=H||_,_e=J||M;else return;let Me=!1;const Se=le._enterCb=He=>{Me||(Me=!0,He?re(_e,[le]):re(we,[le]),ee.delayedLeave&&ee.delayedLeave(),le._enterCb=void 0)};me?(me(le,Se),me.length<=1&&Se()):Se()},leave(le,me){const we=String(e.key);if(le._enterCb&&le._enterCb(!0),i.isUnmounting)return me();re(T,[le]);let _e=!1;const Me=le._leaveCb=Se=>{_e||(_e=!0,me(),Se?re(F,[le]):re(k,[le]),le._leaveCb=void 0,ie[we]===e&&delete ie[we])};ie[we]=e,A?(A(le,Me),A.length<=1&&Me()):Me()},clone(le){return w5(le,t,i,r)}};return ee}function _5(e){if(qb(e))return e=Tf(e),e.children=null,e}function MA(e){return qb(e)?e.children?e.children[0]:void 0:e}function x5(e,t){e.shapeFlag&6&&e.component?x5(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function $A(e,t=!1){let i=[],r=0;for(let s=0;s<e.length;s++){const l=e[s];l.type===Mo?(l.patchFlag&128&&r++,i=i.concat($A(l.children,t))):(t||l.type!==ia)&&i.push(l)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function S5(e){return Kt(e)?{setup:e,name:e.name}:e}const M5=e=>!!e.type.__asyncLoader,qb=e=>e.type.__isKeepAlive;function Ste(e,t){IA(e,"a",t)}function Mte(e,t){IA(e,"da",t)}function IA(e,t,i=hn){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ub(t,r,i),i){let s=i.parent;for(;s&&s.parent;)qb(s.parent.vnode)&&$te(r,t,i,s),s=s.parent}}function $te(e,t,i,r){const s=Ub(t,e,r,!0);CA(()=>{qC(r[t],s)},i)}function Ub(e,t,i=hn,r=!1){if(i){const s=i[e]||(i[e]=[]),l=t.__weh||(t.__weh=(...f)=>{if(i.isUnmounted)return;$f(),Ef(i);const d=$o(t,i,e,f);return hp(),op(),d});return r?s.unshift(l):s.push(l),l}}const Wl=e=>(t,i=hn)=>(!Qb||e==="sp")&&Ub(e,t,i),Ite=Wl("bm"),TA=Wl("m"),Tte=Wl("bu"),Ete=Wl("u"),EA=Wl("bum"),CA=Wl("um"),Cte=Wl("sp"),Ate=Wl("rtg"),Pte=Wl("rtc");function Ote(e,t=hn){Ub("ec",e,t)}let $5=!0;function kte(e){const t=OA(e),i=e.proxy,r=e.ctx;$5=!1,t.beforeCreate&&AA(t.beforeCreate,e,"bc");const{data:s,computed:l,methods:f,watch:d,provide:v,inject:_,created:M,beforeMount:T,mounted:A,beforeUpdate:k,updated:F,activated:D,deactivated:z,beforeDestroy:H,beforeUnmount:J,destroyed:Y,unmounted:ie,render:re,renderTracked:ee,renderTriggered:le,errorCaptured:me,serverPrefetch:we,expose:_e,inheritAttrs:Me,components:Se,directives:He,filters:We}=t;if(_&&Rte(_,r,null,e.appContext.config.unwrapInjectedRef),f)for(const ft in f){const Ye=f[ft];Kt(Ye)&&(r[ft]=Ye.bind(i))}if(s){const ft=s.call(i,i);Fr(ft)&&(e.data=$y(ft))}if($5=!0,l)for(const ft in l){const Ye=l[ft],Ct=Kt(Ye)?Ye.bind(i,i):Kt(Ye.get)?Ye.get.bind(i,i):ta,Oi=!Kt(Ye)&&Kt(Ye.set)?Ye.set.bind(i):ta,Ui=Ha({get:Ct,set:Oi});Object.defineProperty(r,ft,{enumerable:!0,configurable:!0,get:()=>Ui.value,set:_i=>Ui.value=_i})}if(d)for(const ft in d)PA(d[ft],r,i,ft);if(v){const ft=Kt(v)?v.call(i):v;Reflect.ownKeys(ft).forEach(Ye=>{Gb(Ye,ft[Ye])})}M&&AA(M,e,"c");function kt(ft,Ye){Ut(Ye)?Ye.forEach(Ct=>ft(Ct.bind(i))):Ye&&ft(Ye.bind(i))}if(kt(Ite,T),kt(TA,A),kt(Tte,k),kt(Ete,F),kt(Ste,D),kt(Mte,z),kt(Ote,me),kt(Pte,ee),kt(Ate,le),kt(EA,J),kt(CA,ie),kt(Cte,we),Ut(_e))if(_e.length){const ft=e.exposed||(e.exposed={});_e.forEach(Ye=>{Object.defineProperty(ft,Ye,{get:()=>i[Ye],set:Ct=>i[Ye]=Ct})})}else e.exposed||(e.exposed={});re&&e.render===ta&&(e.render=re),Me!=null&&(e.inheritAttrs=Me),Se&&(e.components=Se),He&&(e.directives=He)}function Rte(e,t,i=ta,r=!1){Ut(e)&&(e=I5(e));for(const s in e){const l=e[s];let f;Fr(l)?"default"in l?f=vc(l.from||s,l.default,!0):f=vc(l.from||s):f=vc(l),ts(f)&&r?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>f.value,set:d=>f.value=d}):t[s]=f}}function AA(e,t,i){$o(Ut(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function PA(e,t,i,r){const s=r.includes(".")?dP(i,r):()=>i[r];if(cn(e)){const l=t[e];Kt(l)&&iw(s,l)}else if(Kt(e))iw(s,e.bind(i));else if(Fr(e))if(Ut(e))e.forEach(l=>PA(l,t,i,r));else{const l=Kt(e.handler)?e.handler.bind(i):t[e.handler];Kt(l)&&iw(s,l,e)}}function OA(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:l,config:{optionMergeStrategies:f}}=e.appContext,d=l.get(t);let v;return d?v=d:!s.length&&!i&&!r?v=t:(v={},s.length&&s.forEach(_=>Bb(v,_,f,!0)),Bb(v,t,f)),l.set(t,v),v}function Bb(e,t,i,r=!1){const{mixins:s,extends:l}=t;l&&Bb(e,l,i,!0),s&&s.forEach(f=>Bb(e,f,i,!0));for(const f in t)if(!(r&&f==="expose")){const d=Fte[f]||i&&i[f];e[f]=d?d(e[f],t[f]):t[f]}return e}const Fte={data:kA,props:ap,emits:ap,methods:ap,computed:ap,beforeCreate:is,created:is,beforeMount:is,mounted:is,beforeUpdate:is,updated:is,beforeDestroy:is,beforeUnmount:is,destroyed:is,unmounted:is,activated:is,deactivated:is,errorCaptured:is,serverPrefetch:is,components:ap,directives:ap,watch:Nte,provide:kA,inject:Lte};function kA(e,t){return t?e?function(){return $n(Kt(e)?e.call(this,this):e,Kt(t)?t.call(this,this):t)}:t:e}function Lte(e,t){return ap(I5(e),I5(t))}function I5(e){if(Ut(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function is(e,t){return e?[...new Set([].concat(e,t))]:t}function ap(e,t){return e?$n($n(Object.create(null),e),t):t}function Nte(e,t){if(!e)return t;if(!t)return e;const i=$n(Object.create(null),e);for(const r in t)i[r]=is(e[r],t[r]);return i}function jte(e,t,i,r=!1){const s={},l={};kb(l,Kb,1),e.propsDefaults=Object.create(null),RA(e,t,s,l);for(const f in e.propsOptions[0])f in s||(s[f]=void 0);i?e.props=r?s:ste(s):e.type.props?e.props=s:e.props=l,e.attrs=l}function Dte(e,t,i,r){const{props:s,attrs:l,vnode:{patchFlag:f}}=e,d=Ti(s),[v]=e.propsOptions;let _=!1;if((r||f>0)&&!(f&16)){if(f&8){const M=e.vnode.dynamicProps;for(let T=0;T<M.length;T++){let A=M[T];const k=t[A];if(v)if(Si(l,A))k!==l[A]&&(l[A]=k,_=!0);else{const F=Ba(A);s[F]=T5(v,d,F,k,e,!1)}else k!==l[A]&&(l[A]=k,_=!0)}}}else{RA(e,t,s,l)&&(_=!0);let M;for(const T in d)(!t||!Si(t,T)&&((M=Sf(T))===T||!Si(t,M)))&&(v?i&&(i[T]!==void 0||i[M]!==void 0)&&(s[T]=T5(v,d,T,void 0,e,!0)):delete s[T]);if(l!==d)for(const T in l)(!t||!Si(t,T))&&(delete l[T],_=!0)}_&&Hl(e,"set","$attrs")}function RA(e,t,i,r){const[s,l]=e.propsOptions;let f=!1,d;if(t)for(let v in t){if(Ab(v))continue;const _=t[v];let M;s&&Si(s,M=Ba(v))?!l||!l.includes(M)?i[M]=_:(d||(d={}))[M]=_:v5(e.emitsOptions,v)||(!(v in r)||_!==r[v])&&(r[v]=_,f=!0)}if(l){const v=Ti(i),_=d||Di;for(let M=0;M<l.length;M++){const T=l[M];i[T]=T5(s,v,T,_[T],e,!Si(_,T))}}return f}function T5(e,t,i,r,s,l){const f=e[i];if(f!=null){const d=Si(f,"default");if(d&&r===void 0){const v=f.default;if(f.type!==Function&&Kt(v)){const{propsDefaults:_}=s;i in _?r=_[i]:(Ef(s),r=_[i]=v.call(null,t),hp())}else r=v}f[0]&&(l&&!d?r=!1:f[1]&&(r===""||r===Sf(i))&&(r=!0))}return r}function FA(e,t,i=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const l=e.props,f={},d=[];let v=!1;if(!Kt(e)){const M=T=>{v=!0;const[A,k]=FA(T,t,!0);$n(f,A),k&&d.push(...k)};!i&&t.mixins.length&&t.mixins.forEach(M),e.extends&&M(e.extends),e.mixins&&e.mixins.forEach(M)}if(!l&&!v)return r.set(e,_f),_f;if(Ut(l))for(let M=0;M<l.length;M++){const T=Ba(l[M]);LA(T)&&(f[T]=Di)}else if(l)for(const M in l){const T=Ba(M);if(LA(T)){const A=l[M],k=f[T]=Ut(A)||Kt(A)?{type:A}:A;if(k){const F=DA(Boolean,k.type),D=DA(String,k.type);k[0]=F>-1,k[1]=D<0||F<D,(F>-1||Si(k,"default"))&&d.push(T)}}}const _=[f,d];return r.set(e,_),_}function LA(e){return e[0]!=="$"}function NA(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function jA(e,t){return NA(e)===NA(t)}function DA(e,t){return Ut(t)?t.findIndex(i=>jA(i,e)):Kt(t)&&jA(t,e)?0:-1}const VA=e=>e[0]==="_"||e==="$stable",E5=e=>Ut(e)?e.map(Ja):[Ja(e)],Vte=(e,t,i)=>{const r=fte((...s)=>E5(t(...s)),i);return r._c=!1,r},zA=(e,t,i)=>{const r=e._ctx;for(const s in e){if(VA(s))continue;const l=e[s];if(Kt(l))t[s]=Vte(s,l,r);else if(l!=null){const f=E5(l);t[s]=()=>f}}},GA=(e,t)=>{const i=E5(t);e.slots.default=()=>i},zte=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Ti(t),kb(t,"_",i)):zA(t,e.slots={})}else e.slots={},t&&GA(e,t);kb(e.slots,Kb,1)},Gte=(e,t,i)=>{const{vnode:r,slots:s}=e;let l=!0,f=Di;if(r.shapeFlag&32){const d=t._;d?i&&d===1?l=!1:($n(s,t),!i&&d===1&&delete s._):(l=!t.$stable,zA(t,s)),f=t}else t&&(GA(e,t),f={default:1});if(l)for(const d in s)!VA(d)&&!(d in f)&&delete s[d]};function tTe(e,t){const i=Js;if(i===null)return e;const r=i.proxy,s=e.dirs||(e.dirs=[]);for(let l=0;l<t.length;l++){let[f,d,v,_=Di]=t[l];Kt(f)&&(f={mounted:f,updated:f}),f.deep&&pp(d),s.push({dir:f,instance:r,value:d,oldValue:void 0,arg:v,modifiers:_})}return e}function lp(e,t,i,r){const s=e.dirs,l=t&&t.dirs;for(let f=0;f<s.length;f++){const d=s[f];l&&(d.oldValue=l[f].value);let v=d.dir[r];v&&($f(),$o(v,i,8,[e.el,d,e,t]),op())}}function qA(){return{app:null,config:{isNativeTag:Mee,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qte=0;function Ute(e,t){return function(r,s=null){s!=null&&!Fr(s)&&(s=null);const l=qA(),f=new Set;let d=!1;const v=l.app={_uid:qte++,_component:r,_props:s,_container:null,_context:l,_instance:null,version:_ie,get config(){return l.config},set config(_){},use(_,...M){return f.has(_)||(_&&Kt(_.install)?(f.add(_),_.install(v,...M)):Kt(_)&&(f.add(_),_(v,...M))),v},mixin(_){return l.mixins.includes(_)||l.mixins.push(_),v},component(_,M){return M?(l.components[_]=M,v):l.components[_]},directive(_,M){return M?(l.directives[_]=M,v):l.directives[_]},mount(_,M,T){if(!d){const A=ns(r,s);return A.appContext=l,M&&t?t(A,_):e(A,_,T),d=!0,v._container=_,_.__vue_app__=v,F5(A.component)||A.component.proxy}},unmount(){d&&(e(null,v._container),delete v._container.__vue_app__)},provide(_,M){return l.provides[_]=M,v}};return v}}const rs=wte;function Bte(e){return Hte(e)}function Hte(e,t){const i=Aee();i.__VUE__=!0;const{insert:r,remove:s,patchProp:l,createElement:f,createText:d,createComment:v,setText:_,setElementText:M,parentNode:T,nextSibling:A,setScopeId:k=ta,cloneNode:F,insertStaticContent:D}=e,z=(ce,ye,Te,Ge=null,Re=null,B=null,Ke=!1,Je=null,Fe=!!ye.dynamicChildren)=>{if(ce===ye)return;ce&&!cp(ce,ye)&&(Ge=yt(ce),pr(ce,Re,B,!0),ce=null),ye.patchFlag===-2&&(Fe=!1,ye.dynamicChildren=null);const{type:Ne,ref:ht,shapeFlag:ut}=ye;switch(Ne){case O5:H(ce,ye,Te,Ge);break;case ia:J(ce,ye,Te,Ge);break;case Wb:ce==null&&Y(ye,Te,Ge,Ke);break;case Mo:He(ce,ye,Te,Ge,Re,B,Ke,Je,Fe);break;default:ut&1?ee(ce,ye,Te,Ge,Re,B,Ke,Je,Fe):ut&6?We(ce,ye,Te,Ge,Re,B,Ke,Je,Fe):(ut&64||ut&128)&&Ne.process(ce,ye,Te,Ge,Re,B,Ke,Je,Fe,si)}ht!=null&&Re&&C5(ht,ce&&ce.ref,B,ye||ce,!ye)},H=(ce,ye,Te,Ge)=>{if(ce==null)r(ye.el=d(ye.children),Te,Ge);else{const Re=ye.el=ce.el;ye.children!==ce.children&&_(Re,ye.children)}},J=(ce,ye,Te,Ge)=>{ce==null?r(ye.el=v(ye.children||""),Te,Ge):ye.el=ce.el},Y=(ce,ye,Te,Ge)=>{[ce.el,ce.anchor]=D(ce.children,ye,Te,Ge)},ie=({el:ce,anchor:ye},Te,Ge)=>{let Re;for(;ce&&ce!==ye;)Re=A(ce),r(ce,Te,Ge),ce=Re;r(ye,Te,Ge)},re=({el:ce,anchor:ye})=>{let Te;for(;ce&&ce!==ye;)Te=A(ce),s(ce),ce=Te;s(ye)},ee=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe)=>{Ke=Ke||ye.type==="svg",ce==null?le(ye,Te,Ge,Re,B,Ke,Je,Fe):_e(ce,ye,Re,B,Ke,Je,Fe)},le=(ce,ye,Te,Ge,Re,B,Ke,Je)=>{let Fe,Ne;const{type:ht,props:ut,shapeFlag:pt,transition:St,patchFlag:jt,dirs:$i}=ce;if(ce.el&&F!==void 0&&jt===-1)Fe=ce.el=F(ce.el);else{if(Fe=ce.el=f(ce.type,B,ut&&ut.is,ut),pt&8?M(Fe,ce.children):pt&16&&we(ce.children,Fe,null,Ge,Re,B&&ht!=="foreignObject",Ke,Je),$i&&lp(ce,null,Ge,"created"),ut){for(const Le in ut)Le!=="value"&&!Ab(Le)&&l(Fe,Le,null,ut[Le],B,ce.children,Ge,Re,Ze);"value"in ut&&l(Fe,"value",null,ut.value),(Ne=ut.onVnodeBeforeMount)&&Wa(Ne,Ge,ce)}me(Fe,ce,ce.scopeId,Ke,Ge)}$i&&lp(ce,null,Ge,"beforeMount");const Xt=(!Re||Re&&!Re.pendingBranch)&&St&&!St.persisted;Xt&&St.beforeEnter(Fe),r(Fe,ye,Te),((Ne=ut&&ut.onVnodeMounted)||Xt||$i)&&rs(()=>{Ne&&Wa(Ne,Ge,ce),Xt&&St.enter(Fe),$i&&lp(ce,null,Ge,"mounted")},Re)},me=(ce,ye,Te,Ge,Re)=>{if(Te&&k(ce,Te),Ge)for(let B=0;B<Ge.length;B++)k(ce,Ge[B]);if(Re){let B=Re.subTree;if(ye===B){const Ke=Re.vnode;me(ce,Ke,Ke.scopeId,Ke.slotScopeIds,Re.parent)}}},we=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe=0)=>{for(let Ne=Fe;Ne<ce.length;Ne++){const ht=ce[Ne]=Je?bc(ce[Ne]):Ja(ce[Ne]);z(null,ht,ye,Te,Ge,Re,B,Ke,Je)}},_e=(ce,ye,Te,Ge,Re,B,Ke)=>{const Je=ye.el=ce.el;let{patchFlag:Fe,dynamicChildren:Ne,dirs:ht}=ye;Fe|=ce.patchFlag&16;const ut=ce.props||Di,pt=ye.props||Di;let St;(St=pt.onVnodeBeforeUpdate)&&Wa(St,Te,ye,ce),ht&&lp(ye,ce,Te,"beforeUpdate");const jt=Re&&ye.type!=="foreignObject";if(Ne?Me(ce.dynamicChildren,Ne,Je,Te,Ge,jt,B):Ke||Ct(ce,ye,Je,null,Te,Ge,jt,B,!1),Fe>0){if(Fe&16)Se(Je,ye,ut,pt,Te,Ge,Re);else if(Fe&2&&ut.class!==pt.class&&l(Je,"class",null,pt.class,Re),Fe&4&&l(Je,"style",ut.style,pt.style,Re),Fe&8){const $i=ye.dynamicProps;for(let Xt=0;Xt<$i.length;Xt++){const Le=$i[Xt],xr=ut[Le],h=pt[Le];(h!==xr||Le==="value")&&l(Je,Le,xr,h,Re,ce.children,Te,Ge,Ze)}}Fe&1&&ce.children!==ye.children&&M(Je,ye.children)}else!Ke&&Ne==null&&Se(Je,ye,ut,pt,Te,Ge,Re);((St=pt.onVnodeUpdated)||ht)&&rs(()=>{St&&Wa(St,Te,ye,ce),ht&&lp(ye,ce,Te,"updated")},Ge)},Me=(ce,ye,Te,Ge,Re,B,Ke)=>{for(let Je=0;Je<ye.length;Je++){const Fe=ce[Je],Ne=ye[Je],ht=Fe.el&&(Fe.type===Mo||!cp(Fe,Ne)||Fe.shapeFlag&(6|64))?T(Fe.el):Te;z(Fe,Ne,ht,null,Ge,Re,B,Ke,!0)}},Se=(ce,ye,Te,Ge,Re,B,Ke)=>{if(Te!==Ge){for(const Je in Ge){if(Ab(Je))continue;const Fe=Ge[Je],Ne=Te[Je];Fe!==Ne&&Je!=="value"&&l(ce,Je,Ne,Fe,Ke,ye.children,Re,B,Ze)}if(Te!==Di)for(const Je in Te)!Ab(Je)&&!(Je in Ge)&&l(ce,Je,Te[Je],null,Ke,ye.children,Re,B,Ze);"value"in Ge&&l(ce,"value",Te.value,Ge.value)}},He=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe)=>{const Ne=ye.el=ce?ce.el:d(""),ht=ye.anchor=ce?ce.anchor:d("");let{patchFlag:ut,dynamicChildren:pt,slotScopeIds:St}=ye;St&&(Je=Je?Je.concat(St):St),ce==null?(r(Ne,Te,Ge),r(ht,Te,Ge),we(ye.children,Te,ht,Re,B,Ke,Je,Fe)):ut>0&&ut&64&&pt&&ce.dynamicChildren?(Me(ce.dynamicChildren,pt,Te,Re,B,Ke,Je),(ye.key!=null||Re&&ye===Re.subTree)&&A5(ce,ye,!0)):Ct(ce,ye,Te,ht,Re,B,Ke,Je,Fe)},We=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe)=>{ye.slotScopeIds=Je,ce==null?ye.shapeFlag&512?Re.ctx.activate(ye,Te,Ge,Ke,Fe):Ot(ye,Te,Ge,Re,B,Ke,Fe):kt(ce,ye,Fe)},Ot=(ce,ye,Te,Ge,Re,B,Ke)=>{const Je=ce.component=aie(ce,Ge,Re);if(qb(ce)&&(Je.ctx.renderer=si),uie(Je),Je.asyncDep){if(Re&&Re.registerDep(Je,ft),!ce.el){const Fe=Je.subTree=ns(ia);J(null,Fe,ye,Te)}return}ft(Je,ce,ye,Te,Re,B,Ke)},kt=(ce,ye,Te)=>{const Ge=ye.component=ce.component;if(mte(ce,ye,Te))if(Ge.asyncDep&&!Ge.asyncResolved){Ye(Ge,ye,Te);return}else Ge.next=ye,mie(Ge.update),Ge.update();else ye.component=ce.component,ye.el=ce.el,Ge.vnode=ye},ft=(ce,ye,Te,Ge,Re,B,Ke)=>{const Je=()=>{if(ce.isMounted){let{next:ht,bu:ut,u:pt,parent:St,vnode:jt}=ce,$i=ht,Xt;Fe.allowRecurse=!1,ht?(ht.el=jt.el,Ye(ce,ht,Ke)):ht=jt,ut&&n5(ut),(Xt=ht.props&&ht.props.onVnodeBeforeUpdate)&&Wa(Xt,St,ht,jt),Fe.allowRecurse=!0;const Le=b5(ce),xr=ce.subTree;ce.subTree=Le,z(xr,Le,T(xr.el),yt(xr),ce,Re,B),ht.el=Le.el,$i===null&&vte(ce,Le.el),pt&&rs(pt,Re),(Xt=ht.props&&ht.props.onVnodeUpdated)&&rs(()=>Wa(Xt,St,ht,jt),Re)}else{let ht;const{el:ut,props:pt}=ye,{bm:St,m:jt,parent:$i}=ce,Xt=M5(ye);if(Fe.allowRecurse=!1,St&&n5(St),!Xt&&(ht=pt&&pt.onVnodeBeforeMount)&&Wa(ht,$i,ye),Fe.allowRecurse=!0,ut&&Nt){const Le=()=>{ce.subTree=b5(ce),Nt(ut,ce.subTree,ce,Re,null)};Xt?ye.type.__asyncLoader().then(()=>!ce.isUnmounted&&Le()):Le()}else{const Le=ce.subTree=b5(ce);z(null,Le,Te,Ge,ce,Re,B),ye.el=Le.el}if(jt&&rs(jt,Re),!Xt&&(ht=pt&&pt.onVnodeMounted)){const Le=ye;rs(()=>Wa(ht,$i,Le),Re)}ye.shapeFlag&256&&ce.a&&rs(ce.a,Re),ce.isMounted=!0,ye=Te=Ge=null}},Fe=new u5(Je,()=>oP(ce.update),ce.scope),Ne=ce.update=Fe.run.bind(Fe);Ne.id=ce.uid,Fe.allowRecurse=Ne.allowRecurse=!0,Ne()},Ye=(ce,ye,Te)=>{ye.component=ce;const Ge=ce.vnode.props;ce.vnode=ye,ce.next=null,Dte(ce,ye.props,Ge,Te),Gte(ce,ye.children,Te),$f(),D5(void 0,ce.update),op()},Ct=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe=!1)=>{const Ne=ce&&ce.children,ht=ce?ce.shapeFlag:0,ut=ye.children,{patchFlag:pt,shapeFlag:St}=ye;if(pt>0){if(pt&128){Ui(Ne,ut,Te,Ge,Re,B,Ke,Je,Fe);return}else if(pt&256){Oi(Ne,ut,Te,Ge,Re,B,Ke,Je,Fe);return}}St&8?(ht&16&&Ze(Ne,Re,B),ut!==Ne&&M(Te,ut)):ht&16?St&16?Ui(Ne,ut,Te,Ge,Re,B,Ke,Je,Fe):Ze(Ne,Re,B,!0):(ht&8&&M(Te,""),St&16&&we(ut,Te,Ge,Re,B,Ke,Je,Fe))},Oi=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe)=>{ce=ce||_f,ye=ye||_f;const Ne=ce.length,ht=ye.length,ut=Math.min(Ne,ht);let pt;for(pt=0;pt<ut;pt++){const St=ye[pt]=Fe?bc(ye[pt]):Ja(ye[pt]);z(ce[pt],St,Te,null,Re,B,Ke,Je,Fe)}Ne>ht?Ze(ce,Re,B,!0,!1,ut):we(ye,Te,Ge,Re,B,Ke,Je,Fe,ut)},Ui=(ce,ye,Te,Ge,Re,B,Ke,Je,Fe)=>{let Ne=0;const ht=ye.length;let ut=ce.length-1,pt=ht-1;for(;Ne<=ut&&Ne<=pt;){const St=ce[Ne],jt=ye[Ne]=Fe?bc(ye[Ne]):Ja(ye[Ne]);if(cp(St,jt))z(St,jt,Te,null,Re,B,Ke,Je,Fe);else break;Ne++}for(;Ne<=ut&&Ne<=pt;){const St=ce[ut],jt=ye[pt]=Fe?bc(ye[pt]):Ja(ye[pt]);if(cp(St,jt))z(St,jt,Te,null,Re,B,Ke,Je,Fe);else break;ut--,pt--}if(Ne>ut){if(Ne<=pt){const St=pt+1,jt=St<ht?ye[St].el:Ge;for(;Ne<=pt;)z(null,ye[Ne]=Fe?bc(ye[Ne]):Ja(ye[Ne]),Te,jt,Re,B,Ke,Je,Fe),Ne++}}else if(Ne>pt)for(;Ne<=ut;)pr(ce[Ne],Re,B,!0),Ne++;else{const St=Ne,jt=Ne,$i=new Map;for(Ne=jt;Ne<=pt;Ne++){const a=ye[Ne]=Fe?bc(ye[Ne]):Ja(ye[Ne]);a.key!=null&&$i.set(a.key,Ne)}let Xt,Le=0;const xr=pt-jt+1;let h=!1,O=0;const w=new Array(xr);for(Ne=0;Ne<xr;Ne++)w[Ne]=0;for(Ne=St;Ne<=ut;Ne++){const a=ce[Ne];if(Le>=xr){pr(a,Re,B,!0);continue}let n;if(a.key!=null)n=$i.get(a.key);else for(Xt=jt;Xt<=pt;Xt++)if(w[Xt-jt]===0&&cp(a,ye[Xt])){n=Xt;break}n===void 0?pr(a,Re,B,!0):(w[n-jt]=Ne+1,n>=O?O=n:h=!0,z(a,ye[n],Te,null,Re,B,Ke,Je,Fe),Le++)}const c=h?Wte(w):_f;for(Xt=c.length-1,Ne=xr-1;Ne>=0;Ne--){const a=jt+Ne,n=ye[a],o=a+1<ht?ye[a+1].el:Ge;w[Ne]===0?z(null,n,Te,o,Re,B,Ke,Je,Fe):h&&(Xt<0||Ne!==c[Xt]?_i(n,Te,o,2):Xt--)}}},_i=(ce,ye,Te,Ge,Re=null)=>{const{el:B,type:Ke,transition:Je,children:Fe,shapeFlag:Ne}=ce;if(Ne&6){_i(ce.component.subTree,ye,Te,Ge);return}if(Ne&128){ce.suspense.move(ye,Te,Ge);return}if(Ne&64){Ke.move(ce,ye,Te,si);return}if(Ke===Mo){r(B,ye,Te);for(let ut=0;ut<Fe.length;ut++)_i(Fe[ut],ye,Te,Ge);r(ce.anchor,ye,Te);return}if(Ke===Wb){ie(ce,ye,Te);return}if(Ge!==2&&Ne&1&&Je)if(Ge===0)Je.beforeEnter(B),r(B,ye,Te),rs(()=>Je.enter(B),Re);else{const{leave:ut,delayLeave:pt,afterLeave:St}=Je,jt=()=>r(B,ye,Te),$i=()=>{ut(B,()=>{jt(),St&&St()})};pt?pt(B,jt,$i):$i()}else r(B,ye,Te)},pr=(ce,ye,Te,Ge=!1,Re=!1)=>{const{type:B,props:Ke,ref:Je,children:Fe,dynamicChildren:Ne,shapeFlag:ht,patchFlag:ut,dirs:pt}=ce;if(Je!=null&&C5(Je,null,Te,ce,!0),ht&256){ye.ctx.deactivate(ce);return}const St=ht&1&&pt,jt=!M5(ce);let $i;if(jt&&($i=Ke&&Ke.onVnodeBeforeUnmount)&&Wa($i,ye,ce),ht&6)ct(ce.component,Te,Ge);else{if(ht&128){ce.suspense.unmount(Te,Ge);return}St&&lp(ce,null,ye,"beforeUnmount"),ht&64?ce.type.remove(ce,ye,Te,Re,si,Ge):Ne&&(B!==Mo||ut>0&&ut&64)?Ze(Ne,ye,Te,!1,!0):(B===Mo&&ut&(128|256)||!Re&&ht&16)&&Ze(Fe,ye,Te),Ge&&Rr(ce)}(jt&&($i=Ke&&Ke.onVnodeUnmounted)||St)&&rs(()=>{$i&&Wa($i,ye,ce),St&&lp(ce,null,ye,"unmounted")},Te)},Rr=ce=>{const{type:ye,el:Te,anchor:Ge,transition:Re}=ce;if(ye===Mo){De(Te,Ge);return}if(ye===Wb){re(ce);return}const B=()=>{s(Te),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(ce.shapeFlag&1&&Re&&!Re.persisted){const{leave:Ke,delayLeave:Je}=Re,Fe=()=>Ke(Te,B);Je?Je(ce.el,B,Fe):Fe()}else B()},De=(ce,ye)=>{let Te;for(;ce!==ye;)Te=A(ce),s(ce),ce=Te;s(ye)},ct=(ce,ye,Te)=>{const{bum:Ge,scope:Re,update:B,subTree:Ke,um:Je}=ce;Ge&&n5(Ge),Re.stop(),B&&(B.active=!1,pr(Ke,ce,ye,Te)),Je&&rs(Je,ye),rs(()=>{ce.isUnmounted=!0},ye),ye&&ye.pendingBranch&&!ye.isUnmounted&&ce.asyncDep&&!ce.asyncResolved&&ce.suspenseId===ye.pendingId&&(ye.deps--,ye.deps===0&&ye.resolve())},Ze=(ce,ye,Te,Ge=!1,Re=!1,B=0)=>{for(let Ke=B;Ke<ce.length;Ke++)pr(ce[Ke],ye,Te,Ge,Re)},yt=ce=>ce.shapeFlag&6?yt(ce.component.subTree):ce.shapeFlag&128?ce.suspense.next():A(ce.anchor||ce.el),ni=(ce,ye,Te)=>{ce==null?ye._vnode&&pr(ye._vnode,null,null,!0):z(ye._vnode||null,ce,ye,null,null,null,Te),uP(),ye._vnode=ce},si={p:z,um:pr,m:_i,r:Rr,mt:Ot,mc:we,pc:Ct,pbc:Me,n:yt,o:e};let Lt,Nt;return t&&([Lt,Nt]=t(si)),{render:ni,hydrate:Lt,createApp:Ute(ni,Lt)}}function C5(e,t,i,r,s=!1){if(Ut(e)){e.forEach((A,k)=>C5(A,t&&(Ut(t)?t[k]:t),i,r,s));return}if(M5(r)&&!s)return;const l=r.shapeFlag&4?F5(r.component)||r.component.proxy:r.el,f=s?null:l,{i:d,r:v}=e,_=t&&t.r,M=d.refs===Di?d.refs={}:d.refs,T=d.setupState;if(_!=null&&_!==v&&(cn(_)?(M[_]=null,Si(T,_)&&(T[_]=null)):ts(_)&&(_.value=null)),cn(v)){const A=()=>{M[v]=f,Si(T,v)&&(T[v]=f)};f?(A.id=-1,rs(A,i)):A()}else if(ts(v)){const A=()=>{v.value=f};f?(A.id=-1,rs(A,i)):A()}else Kt(v)&&wc(v,d,12,[f,M])}function Wa(e,t,i,r=null){$o(e,t,7,[i,r])}function A5(e,t,i=!1){const r=e.children,s=t.children;if(Ut(r)&&Ut(s))for(let l=0;l<r.length;l++){const f=r[l];let d=s[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[l]=bc(s[l]),d.el=f.el),i||A5(f,d))}}function Wte(e){const t=e.slice(),i=[0];let r,s,l,f,d;const v=e.length;for(r=0;r<v;r++){const _=e[r];if(_!==0){if(s=i[i.length-1],e[s]<_){t[r]=s,i.push(r);continue}for(l=0,f=i.length-1;l<f;)d=l+f>>1,e[i[d]]<_?l=d+1:f=d;_<e[i[l]]&&(l>0&&(t[r]=i[l-1]),i[l]=r)}}for(l=i.length,f=i[l-1];l-- >0;)i[l]=f,f=t[f];return i}const Jte=e=>e.__isTeleport,Ey=e=>e&&(e.disabled||e.disabled===""),UA=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,P5=(e,t)=>{const i=e&&e.to;return cn(i)?t?t(i):null:i},Zte={__isTeleport:!0,process(e,t,i,r,s,l,f,d,v,_){const{mc:M,pc:T,pbc:A,o:{insert:k,querySelector:F,createText:D,createComment:z}}=_,H=Ey(t.props);let{shapeFlag:J,children:Y,dynamicChildren:ie}=t;if(e==null){const re=t.el=D(""),ee=t.anchor=D("");k(re,i,r),k(ee,i,r);const le=t.target=P5(t.props,F),me=t.targetAnchor=D("");le&&(k(me,le),f=f||UA(le));const we=(_e,Me)=>{J&16&&M(Y,_e,Me,s,l,f,d,v)};H?we(i,ee):le&&we(le,me)}else{t.el=e.el;const re=t.anchor=e.anchor,ee=t.target=e.target,le=t.targetAnchor=e.targetAnchor,me=Ey(e.props),we=me?i:ee,_e=me?re:le;if(f=f||UA(ee),ie?(A(e.dynamicChildren,ie,we,s,l,f,d),A5(e,t,!0)):v||T(e,t,we,_e,s,l,f,d,!1),H)me||Hb(t,i,re,_,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Me=t.target=P5(t.props,F);Me&&Hb(t,Me,null,_,0)}else me&&Hb(t,ee,le,_,1)}},remove(e,t,i,r,{um:s,o:{remove:l}},f){const{shapeFlag:d,children:v,anchor:_,targetAnchor:M,target:T,props:A}=e;if(T&&l(M),(f||!Ey(A))&&(l(_),d&16))for(let k=0;k<v.length;k++){const F=v[k];s(F,t,i,!0,!!F.dynamicChildren)}},move:Hb,hydrate:Kte};function Hb(e,t,i,{o:{insert:r},m:s},l=2){l===0&&r(e.targetAnchor,t,i);const{el:f,anchor:d,shapeFlag:v,children:_,props:M}=e,T=l===2;if(T&&r(f,t,i),(!T||Ey(M))&&v&16)for(let A=0;A<_.length;A++)s(_[A],t,i,2);T&&r(d,t,i)}function Kte(e,t,i,r,s,l,{o:{nextSibling:f,parentNode:d,querySelector:v}},_){const M=t.target=P5(t.props,v);if(M){const T=M._lpa||M.firstChild;t.shapeFlag&16&&(Ey(t.props)?(t.anchor=_(f(e),t,d(e),i,r,s,l),t.targetAnchor=T):(t.anchor=f(e),t.targetAnchor=_(T,t,M,i,r,s,l)),M._lpa=t.targetAnchor&&f(t.targetAnchor))}return t.anchor&&f(t.anchor)}const iTe=Zte,BA="components";function rTe(e,t){return Xte(BA,e,!0,t)||e}const Yte=Symbol();function Xte(e,t,i=!0,r=!1){const s=Js||hn;if(s){const l=s.type;if(e===BA){const d=die(l);if(d&&(d===t||d===Ba(t)||d===Ob(Ba(t))))return l}const f=HA(s[e]||l[e],t)||HA(s.appContext[e],t);return!f&&r?l:f}}function HA(e,t){return e&&(e[t]||e[Ba(t)]||e[Ob(Ba(t))])}const Mo=Symbol(void 0),O5=Symbol(void 0),ia=Symbol(void 0),Wb=Symbol(void 0),Cy=[];let up=null;function WA(e=!1){Cy.push(up=e?null:[])}function Qte(){Cy.pop(),up=Cy[Cy.length-1]||null}let Jb=1;function JA(e){Jb+=e}function ZA(e){return e.dynamicChildren=Jb>0?up||_f:null,Qte(),Jb>0&&up&&up.push(e),e}function nTe(e,t,i,r,s,l){return ZA(XA(e,t,i,r,s,l,!0))}function KA(e,t,i,r,s){return ZA(ns(e,t,i,r,s,!0))}function Zb(e){return e?e.__v_isVNode===!0:!1}function cp(e,t){return e.type===t.type&&e.key===t.key}const Kb="__vInternal",YA=({key:e})=>e!=null?e:null,Yb=({ref:e})=>e!=null?cn(e)||ts(e)||Kt(e)?{i:Js,r:e}:e:null;function XA(e,t=null,i=null,r=0,s=null,l=e===Mo?0:1,f=!1,d=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&YA(t),ref:t&&Yb(t),scopeId:wA,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return d?(k5(v,i),l&128&&e.normalize(v)):i&&(v.shapeFlag|=cn(i)?8:16),Jb>0&&!f&&up&&(v.patchFlag>0||l&6)&&v.patchFlag!==32&&up.push(v),v}const ns=eie;function eie(e,t=null,i=null,r=0,s=null,l=!1){if((!e||e===Yte)&&(e=ia),Zb(e)){const d=Tf(e,t,!0);return i&&k5(d,i),d}if(fie(e)&&(e=e.__vccOpts),t){t=tie(t);let{class:d,style:v}=t;d&&!cn(d)&&(t.class=Q9(d)),Fr(v)&&(dA(v)&&!Ut(v)&&(v=$n({},v)),t.style=X9(v))}const f=cn(e)?1:bte(e)?128:Jte(e)?64:Fr(e)?4:Kt(e)?2:0;return XA(e,t,i,r,s,f,l,!0)}function tie(e){return e?dA(e)||Kb in e?$n({},e):e:null}function Tf(e,t,i=!1){const{props:r,ref:s,patchFlag:l,children:f}=e,d=t?rie(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&YA(d),ref:t&&t.ref?i&&s?Ut(s)?s.concat(Yb(t)):[s,Yb(t)]:Yb(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Mo?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Tf(e.ssContent),ssFallback:e.ssFallback&&Tf(e.ssFallback),el:e.el,anchor:e.anchor}}function iie(e=" ",t=0){return ns(O5,null,e,t)}function sTe(e,t){const i=ns(Wb,null,e);return i.staticCount=t,i}function oTe(e="",t=!1){return t?(WA(),KA(ia,null,e)):ns(ia,null,e)}function Ja(e){return e==null||typeof e=="boolean"?ns(ia):Ut(e)?ns(Mo,null,e.slice()):typeof e=="object"?bc(e):ns(O5,null,String(e))}function bc(e){return e.el===null||e.memo?e:Tf(e)}function k5(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ut(t))i=16;else if(typeof t=="object")if(r&(1|64)){const s=t.default;s&&(s._c&&(s._d=!1),k5(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(Kb in t)?t._ctx=Js:s===3&&Js&&(Js.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Kt(t)?(t={default:t,_ctx:Js},i=32):(t=String(t),r&64?(i=16,t=[iie(t)]):i=8);e.children=t,e.shapeFlag|=i}function rie(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Q9([t.class,r.class]));else if(s==="style")t.style=X9([t.style,r.style]);else if(Eb(s)){const l=t[s],f=r[s];l!==f&&!(Ut(l)&&l.includes(f))&&(t[s]=l?[].concat(l,f):f)}else s!==""&&(t[s]=r[s])}return t}function aTe(e,t,i,r){let s;const l=i&&i[r];if(Ut(e)||cn(e)){s=new Array(e.length);for(let f=0,d=e.length;f<d;f++)s[f]=t(e[f],f,void 0,l&&l[f])}else if(typeof e=="number"){s=new Array(e);for(let f=0;f<e;f++)s[f]=t(f+1,f,void 0,l&&l[f])}else if(Fr(e))if(e[Symbol.iterator])s=Array.from(e,(f,d)=>t(f,d,void 0,l&&l[d]));else{const f=Object.keys(e);s=new Array(f.length);for(let d=0,v=f.length;d<v;d++){const _=f[d];s[d]=t(e[_],_,d,l&&l[d])}}else s=[];return i&&(i[r]=s),s}function lTe(e,t,i={},r,s){if(Js.isCE)return ns("slot",t==="default"?null:{name:t},r&&r());let l=e[t];l&&l._c&&(l._d=!1),WA();const f=l&&QA(l(i)),d=KA(Mo,{key:i.key||`_${t}`},f||(r?r():[]),f&&e._===1?64:-2);return!s&&d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),l&&l._c&&(l._d=!0),d}function QA(e){return e.some(t=>Zb(t)?!(t.type===ia||t.type===Mo&&!QA(t.children)):!0)?e:null}const R5=e=>e?eP(e)?F5(e)||e.proxy:R5(e.parent):null,Xb=$n(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>R5(e.parent),$root:e=>R5(e.root),$emit:e=>e.emit,$options:e=>OA(e),$forceUpdate:e=>()=>oP(e.update),$nextTick:e=>sP.bind(e.proxy),$watch:e=>wie.bind(e)}),nie={get({_:e},t){const{ctx:i,setupState:r,data:s,props:l,accessCache:f,type:d,appContext:v}=e;let _;if(t[0]!=="$"){const k=f[t];if(k!==void 0)switch(k){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return l[t]}else{if(r!==Di&&Si(r,t))return f[t]=1,r[t];if(s!==Di&&Si(s,t))return f[t]=2,s[t];if((_=e.propsOptions[0])&&Si(_,t))return f[t]=3,l[t];if(i!==Di&&Si(i,t))return f[t]=4,i[t];$5&&(f[t]=0)}}const M=Xb[t];let T,A;if(M)return t==="$attrs"&&Ws(e,"get",t),M(e);if((T=d.__cssModules)&&(T=T[t]))return T;if(i!==Di&&Si(i,t))return f[t]=4,i[t];if(A=v.config.globalProperties,Si(A,t))return A[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:l}=e;if(s!==Di&&Si(s,t))s[t]=i;else if(r!==Di&&Si(r,t))r[t]=i;else if(Si(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(l[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:l}},f){let d;return!!i[f]||e!==Di&&Si(e,f)||t!==Di&&Si(t,f)||(d=l[0])&&Si(d,f)||Si(r,f)||Si(Xb,f)||Si(s.config.globalProperties,f)}},sie=qA();let oie=0;function aie(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||sie,l={uid:oie++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,update:null,scope:new Pee(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:FA(r,s),emitsOptions:bA(r,s),emit:null,emitted:null,propsDefaults:Di,inheritAttrs:r.inheritAttrs,ctx:Di,data:Di,props:Di,attrs:Di,slots:Di,refs:Di,setupState:Di,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=dte.bind(null,l),e.ce&&e.ce(l),l}let hn=null;const lie=()=>hn||Js,Ef=e=>{hn=e,e.scope.on()},hp=()=>{hn&&hn.scope.off(),hn=null};function eP(e){return e.vnode.shapeFlag&4}let Qb=!1;function uie(e,t=!1){Qb=t;const{props:i,children:r}=e.vnode,s=eP(e);jte(e,i,s,t),zte(e,r);const l=s?cie(e,t):void 0;return Qb=!1,l}function cie(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=fA(new Proxy(e.ctx,nie));const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?pie(e):null;Ef(e),$f();const l=wc(r,e,0,[e.props,s]);if(op(),hp(),BC(l)){if(l.then(hp,hp),t)return l.then(f=>{tP(e,f,t)}).catch(f=>{ew(f,e,0)});e.asyncDep=l}else tP(e,l,t)}else rP(e,t)}function tP(e,t,i){Kt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Fr(t)&&(e.setupState=vA(t)),rP(e,i)}let iP;function rP(e,t,i){const r=e.type;if(!e.render){if(!t&&iP&&!r.render){const s=r.template;if(s){const{isCustomElement:l,compilerOptions:f}=e.appContext.config,{delimiters:d,compilerOptions:v}=r,_=$n($n({isCustomElement:l,delimiters:d},f),v);r.render=iP(s,_)}}e.render=r.render||ta}Ef(e),$f(),kte(e),op(),hp()}function hie(e){return new Proxy(e.attrs,{get(t,i){return Ws(e,"get","$attrs"),t[i]}})}function pie(e){const t=r=>{e.exposed=r||{}};let i;return{get attrs(){return i||(i=hie(e))},slots:e.slots,emit:e.emit,expose:t}}function F5(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(vA(fA(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Xb)return Xb[i](e)}}))}function die(e){return Kt(e)&&e.displayName||e.name}function fie(e){return Kt(e)&&"__vccOpts"in e}function wc(e,t,i,r){let s;try{s=r?e(...r):e()}catch(l){ew(l,t,i)}return s}function $o(e,t,i,r){if(Kt(e)){const l=wc(e,t,i,r);return l&&BC(l)&&l.catch(f=>{ew(f,t,i)}),l}const s=[];for(let l=0;l<e.length;l++)s.push($o(e[l],t,i,r));return s}function ew(e,t,i,r=!0){const s=t?t.vnode:null;if(t){let l=t.parent;const f=t.proxy,d=i;for(;l;){const _=l.ec;if(_){for(let M=0;M<_.length;M++)if(_[M](e,f,d)===!1)return}l=l.parent}const v=t.appContext.config.errorHandler;if(v){wc(v,null,10,[e,f,d]);return}}yie(e,i,s,r)}function yie(e,t,i,r=!0){console.error(e)}let tw=!1,L5=!1;const Zs=[];let Jl=0;const Ay=[];let Py=null,Cf=0;const Oy=[];let _c=null,Af=0;const nP=Promise.resolve();let N5=null,j5=null;function sP(e){const t=N5||nP;return e?t.then(this?e.bind(this):e):t}function gie(e){let t=Jl+1,i=Zs.length;for(;t<i;){const r=t+i>>>1;ky(Zs[r])<e?t=r+1:i=r}return t}function oP(e){(!Zs.length||!Zs.includes(e,tw&&e.allowRecurse?Jl+1:Jl))&&e!==j5&&(e.id==null?Zs.push(e):Zs.splice(gie(e.id),0,e),aP())}function aP(){!tw&&!L5&&(L5=!0,N5=nP.then(cP))}function mie(e){const t=Zs.indexOf(e);t>Jl&&Zs.splice(t,1)}function lP(e,t,i,r){Ut(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&i.push(e),aP()}function vie(e){lP(e,Py,Ay,Cf)}function bie(e){lP(e,_c,Oy,Af)}function D5(e,t=null){if(Ay.length){for(j5=t,Py=[...new Set(Ay)],Ay.length=0,Cf=0;Cf<Py.length;Cf++)Py[Cf]();Py=null,Cf=0,j5=null,D5(e,t)}}function uP(e){if(Oy.length){const t=[...new Set(Oy)];if(Oy.length=0,_c){_c.push(...t);return}for(_c=t,_c.sort((i,r)=>ky(i)-ky(r)),Af=0;Af<_c.length;Af++)_c[Af]();_c=null,Af=0}}const ky=e=>e.id==null?1/0:e.id;function cP(e){L5=!1,tw=!0,D5(e),Zs.sort((i,r)=>ky(i)-ky(r));const t=ta;try{for(Jl=0;Jl<Zs.length;Jl++){const i=Zs[Jl];i&&i.active!==!1&&wc(i,null,14)}}finally{Jl=0,Zs.length=0,uP(),tw=!1,N5=null,(Zs.length||Ay.length||Oy.length)&&cP(e)}}const hP={};function iw(e,t,i){return pP(e,t,i)}function pP(e,t,{immediate:i,deep:r,flush:s,onTrack:l,onTrigger:f}=Di){const d=hn;let v,_=!1,M=!1;if(ts(e)?(v=()=>e.value,_=!!e._shallow):If(e)?(v=()=>e,r=!0):Ut(e)?(M=!0,_=e.some(If),v=()=>e.map(H=>{if(ts(H))return H.value;if(If(H))return pp(H);if(Kt(H))return wc(H,d,2)})):Kt(e)?t?v=()=>wc(e,d,2):v=()=>{if(!(d&&d.isUnmounted))return T&&T(),$o(e,d,3,[A])}:v=ta,t&&r){const H=v;v=()=>pp(H())}let T,A=H=>{T=z.onStop=()=>{wc(H,d,4)}};if(Qb)return A=ta,t?i&&$o(t,d,3,[v(),M?[]:void 0,A]):v(),ta;let k=M?[]:hP;const F=()=>{if(!!z.active)if(t){const H=z.run();(r||_||(M?H.some((J,Y)=>xy(J,k[Y])):xy(H,k)))&&(T&&T(),$o(t,d,3,[H,k===hP?void 0:k,A]),k=H)}else z.run()};F.allowRecurse=!!t;let D;s==="sync"?D=F:s==="post"?D=()=>rs(F,d&&d.suspense):D=()=>{!d||d.isMounted?vie(F):F()};const z=new u5(v,D);return t?i?F():k=z.run():s==="post"?rs(z.run.bind(z),d&&d.suspense):z.run(),()=>{z.stop(),d&&d.scope&&qC(d.scope.effects,z)}}function wie(e,t,i){const r=this.proxy,s=cn(e)?e.includes(".")?dP(r,e):()=>r[e]:e.bind(r,r);let l;Kt(t)?l=t:(l=t.handler,i=t);const f=hn;Ef(this);const d=pP(s,l.bind(r),i);return f?Ef(f):hp(),d}function dP(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function pp(e,t){if(!Fr(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ts(e))pp(e.value,t);else if(Ut(e))for(let i=0;i<e.length;i++)pp(e[i],t);else if(UC(e)||xf(e))e.forEach(i=>{pp(i,t)});else if(WC(e))for(const i in e)pp(e[i],t);return e}function Ry(e,t,i){const r=arguments.length;return r===2?Fr(t)&&!Ut(t)?Zb(t)?ns(e,null,[t]):ns(e,t):ns(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Zb(i)&&(i=[i]),ns(e,t,i))}const _ie="3.2.24",xie="http://www.w3.org/2000/svg",Pf=typeof document!="undefined"?document:null,fP=new Map,Sie={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t?Pf.createElementNS(xie,e):Pf.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Pf.createTextNode(e),createComment:e=>Pf.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pf.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,r){const s=i?i.previousSibling:t.lastChild;let l=fP.get(e);if(!l){const f=Pf.createElement("template");if(f.innerHTML=r?`<svg>${e}</svg>`:e,l=f.content,r){const d=l.firstChild;for(;d.firstChild;)l.appendChild(d.firstChild);l.removeChild(d)}fP.set(e,l)}return t.insertBefore(l.cloneNode(!0),i),[s?s.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Mie(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function $ie(e,t,i){const r=e.style,s=cn(i);if(i&&!s){for(const l in i)V5(r,l,i[l]);if(t&&!cn(t))for(const l in t)i[l]==null&&V5(r,l,"")}else{const l=r.display;s?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=l)}}const yP=/\s*!important$/;function V5(e,t,i){if(Ut(i))i.forEach(r=>V5(e,t,r));else if(t.startsWith("--"))e.setProperty(t,i);else{const r=Iie(e,t);yP.test(i)?e.setProperty(Sf(r),i.replace(yP,""),"important"):e[r]=i}}const gP=["Webkit","Moz","ms"],z5={};function Iie(e,t){const i=z5[t];if(i)return i;let r=Ba(t);if(r!=="filter"&&r in e)return z5[t]=r;r=Ob(r);for(let s=0;s<gP.length;s++){const l=gP[s]+r;if(l in e)return z5[t]=l}return t}const mP="http://www.w3.org/1999/xlink";function Tie(e,t,i,r,s){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(mP,t.slice(6,t.length)):e.setAttributeNS(mP,t,i);else{const l=wee(t);i==null||l&&!zC(i)?e.removeAttribute(t):e.setAttribute(t,l?"":i)}}function Eie(e,t,i,r,s,l,f){if(t==="innerHTML"||t==="textContent"){r&&f(r,s,l),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const d=i==null?"":i;(e.value!==d||e.tagName==="OPTION")&&(e.value=d),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const d=typeof e[t];if(d==="boolean"){e[t]=zC(i);return}else if(i==null&&d==="string"){e[t]="",e.removeAttribute(t);return}else if(d==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let rw=Date.now,vP=!1;if(typeof window!="undefined"){rw()>document.createEvent("Event").timeStamp&&(rw=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);vP=!!(e&&Number(e[1])<=53)}let G5=0;const Cie=Promise.resolve(),Aie=()=>{G5=0},Pie=()=>G5||(Cie.then(Aie),G5=rw());function Oie(e,t,i,r){e.addEventListener(t,i,r)}function kie(e,t,i,r){e.removeEventListener(t,i,r)}function Rie(e,t,i,r,s=null){const l=e._vei||(e._vei={}),f=l[t];if(r&&f)f.value=r;else{const[d,v]=Fie(t);if(r){const _=l[t]=Lie(r,s);Oie(e,d,_,v)}else f&&(kie(e,d,f,v),l[t]=void 0)}}const bP=/(?:Once|Passive|Capture)$/;function Fie(e){let t;if(bP.test(e)){t={};let i;for(;i=e.match(bP);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[Sf(e.slice(2)),t]}function Lie(e,t){const i=r=>{const s=r.timeStamp||rw();(vP||s>=i.attached-1)&&$o(Nie(r,i.value),t,5,[r])};return i.value=e,i.attached=Pie(),i}function Nie(e,t){if(Ut(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r(s))}else return t}const wP=/^on[a-z]/,jie=(e,t,i,r,s=!1,l,f,d,v)=>{t==="class"?Mie(e,r,s):t==="style"?$ie(e,i,r):Eb(t)?e5(t)||Rie(e,t,i,r,f):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Die(e,t,r,s))?Eie(e,t,r,l,f,d,v):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Tie(e,t,r,s))};function Die(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&wP.test(t)&&Kt(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||wP.test(t)&&cn(i)?!1:t in e}const xc="transition",Fy="animation",_P=(e,{slots:t})=>Ry(xA,Vie(e),t);_P.displayName="Transition";const xP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};_P.props=$n({},xA.props,xP);const dp=(e,t=[])=>{Ut(e)?e.forEach(i=>i(...t)):e&&e(...t)},SP=e=>e?Ut(e)?e.some(t=>t.length>1):e.length>1:!1;function Vie(e){const t={};for(const Se in e)Se in xP||(t[Se]=e[Se]);if(e.css===!1)return t;const{name:i="v",type:r,duration:s,enterFromClass:l=`${i}-enter-from`,enterActiveClass:f=`${i}-enter-active`,enterToClass:d=`${i}-enter-to`,appearFromClass:v=l,appearActiveClass:_=f,appearToClass:M=d,leaveFromClass:T=`${i}-leave-from`,leaveActiveClass:A=`${i}-leave-active`,leaveToClass:k=`${i}-leave-to`}=e,F=zie(s),D=F&&F[0],z=F&&F[1],{onBeforeEnter:H,onEnter:J,onEnterCancelled:Y,onLeave:ie,onLeaveCancelled:re,onBeforeAppear:ee=H,onAppear:le=J,onAppearCancelled:me=Y}=t,we=(Se,He,We)=>{Of(Se,He?M:d),Of(Se,He?_:f),We&&We()},_e=(Se,He)=>{Of(Se,k),Of(Se,A),He&&He()},Me=Se=>(He,We)=>{const Ot=Se?le:J,kt=()=>we(He,Se,We);dp(Ot,[He,kt]),MP(()=>{Of(He,Se?v:l),Sc(He,Se?M:d),SP(Ot)||$P(He,r,D,kt)})};return $n(t,{onBeforeEnter(Se){dp(H,[Se]),Sc(Se,l),Sc(Se,f)},onBeforeAppear(Se){dp(ee,[Se]),Sc(Se,v),Sc(Se,_)},onEnter:Me(!1),onAppear:Me(!0),onLeave(Se,He){const We=()=>_e(Se,He);Sc(Se,T),Uie(),Sc(Se,A),MP(()=>{Of(Se,T),Sc(Se,k),SP(ie)||$P(Se,r,z,We)}),dp(ie,[Se,We])},onEnterCancelled(Se){we(Se,!1),dp(Y,[Se])},onAppearCancelled(Se){we(Se,!0),dp(me,[Se])},onLeaveCancelled(Se){_e(Se),dp(re,[Se])}})}function zie(e){if(e==null)return null;if(Fr(e))return[q5(e.enter),q5(e.leave)];{const t=q5(e);return[t,t]}}function q5(e){return JC(e)}function Sc(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function Of(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function MP(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Gie=0;function $P(e,t,i,r){const s=e._endId=++Gie,l=()=>{s===e._endId&&r()};if(i)return setTimeout(l,i);const{type:f,timeout:d,propCount:v}=qie(e,t);if(!f)return r();const _=f+"end";let M=0;const T=()=>{e.removeEventListener(_,A),l()},A=k=>{k.target===e&&++M>=v&&T()};setTimeout(()=>{M<v&&T()},d+1),e.addEventListener(_,A)}function qie(e,t){const i=window.getComputedStyle(e),r=F=>(i[F]||"").split(", "),s=r(xc+"Delay"),l=r(xc+"Duration"),f=IP(s,l),d=r(Fy+"Delay"),v=r(Fy+"Duration"),_=IP(d,v);let M=null,T=0,A=0;t===xc?f>0&&(M=xc,T=f,A=l.length):t===Fy?_>0&&(M=Fy,T=_,A=v.length):(T=Math.max(f,_),M=T>0?f>_?xc:Fy:null,A=M?M===xc?l.length:v.length:0);const k=M===xc&&/\b(transform|all)(,|$)/.test(i[xc+"Property"]);return{type:M,timeout:T,propCount:A,hasTransform:k}}function IP(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>TP(i)+TP(e[r])))}function TP(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Uie(){return document.body.offsetHeight}const uTe={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Ly(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),Ly(e,!0),r.enter(e)):r.leave(e,()=>{Ly(e,!1)}):Ly(e,t))},beforeUnmount(e,{value:t}){Ly(e,t)}};function Ly(e,t){e.style.display=t?e._vod:"none"}const Bie=$n({patchProp:jie},Sie);let EP;function Hie(){return EP||(EP=Bte(Bie))}const cTe=(...e)=>{const t=Hie().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=Wie(r);if(!s)return;const l=t._component;!Kt(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.innerHTML="";const f=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),f},t};function Wie(e){return cn(e)?document.querySelector(e):e}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const CP=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",kf=e=>CP?Symbol(e):"_vr_"+e,Jie=kf("rvlm"),AP=kf("rvd"),U5=kf("r"),PP=kf("rl"),B5=kf("rvl"),Rf=typeof window!="undefined";function Zie(e){return e.__esModule||CP&&e[Symbol.toStringTag]==="Module"}const Vi=Object.assign;function H5(e,t){const i={};for(const r in t){const s=t[r];i[r]=Array.isArray(s)?s.map(e):e(s)}return i}const Ny=()=>{},Kie=/\/$/,Yie=e=>e.replace(Kie,"");function W5(e,t,i="/"){let r,s={},l="",f="";const d=t.indexOf("?"),v=t.indexOf("#",d>-1?d:0);return d>-1&&(r=t.slice(0,d),l=t.slice(d+1,v>-1?v:t.length),s=e(l)),v>-1&&(r=r||t.slice(0,v),f=t.slice(v,t.length)),r=tre(r!=null?r:t,i),{fullPath:r+(l&&"?")+l+f,path:r,query:s,hash:f}}function Xie(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function OP(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Qie(e,t,i){const r=t.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&Ff(t.matched[r],i.matched[s])&&kP(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Ff(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function kP(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!ere(e[i],t[i]))return!1;return!0}function ere(e,t){return Array.isArray(e)?RP(e,t):Array.isArray(t)?RP(t,e):e===t}function RP(e,t){return Array.isArray(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function tre(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/");let s=i.length-1,l,f;for(l=0;l<r.length;l++)if(f=r[l],!(s===1||f==="."))if(f==="..")s--;else break;return i.slice(0,s).join("/")+"/"+r.slice(l-(l===r.length?1:0)).join("/")}var jy;(function(e){e.pop="pop",e.push="push"})(jy||(jy={}));var Dy;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Dy||(Dy={}));function ire(e){if(!e)if(Rf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Yie(e)}const rre=/^[^#]+#/;function nre(e,t){return e.replace(rre,"#")+t}function sre(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const nw=()=>({left:window.pageXOffset,top:window.pageYOffset});function ore(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;t=sre(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function FP(e,t){return(history.state?history.state.position-t:-1)+e}const J5=new Map;function are(e,t){J5.set(e,t)}function lre(e){const t=J5.get(e);return J5.delete(e),t}let ure=()=>location.protocol+"//"+location.host;function LP(e,t){const{pathname:i,search:r,hash:s}=t,l=e.indexOf("#");if(l>-1){let d=s.includes(e.slice(l))?e.slice(l).length:1,v=s.slice(d);return v[0]!=="/"&&(v="/"+v),OP(v,"")}return OP(i,e)+r+s}function cre(e,t,i,r){let s=[],l=[],f=null;const d=({state:A})=>{const k=LP(e,location),F=i.value,D=t.value;let z=0;if(A){if(i.value=k,t.value=A,f&&f===F){f=null;return}z=D?A.position-D.position:0}else r(k);s.forEach(H=>{H(i.value,F,{delta:z,type:jy.pop,direction:z?z>0?Dy.forward:Dy.back:Dy.unknown})})};function v(){f=i.value}function _(A){s.push(A);const k=()=>{const F=s.indexOf(A);F>-1&&s.splice(F,1)};return l.push(k),k}function M(){const{history:A}=window;!A.state||A.replaceState(Vi({},A.state,{scroll:nw()}),"")}function T(){for(const A of l)A();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",M),{pauseListeners:v,listen:_,destroy:T}}function NP(e,t,i,r=!1,s=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:s?nw():null}}function hre(e){const{history:t,location:i}=window,r={value:LP(e,i)},s={value:t.state};s.value||l(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(v,_,M){const T=e.indexOf("#"),A=T>-1?(i.host&&document.querySelector("base")?e:e.slice(T))+v:ure()+e+v;try{t[M?"replaceState":"pushState"](_,"",A),s.value=_}catch(k){console.error(k),i[M?"replace":"assign"](A)}}function f(v,_){const M=Vi({},t.state,NP(s.value.back,v,s.value.forward,!0),_,{position:s.value.position});l(v,M,!0),r.value=v}function d(v,_){const M=Vi({},s.value,t.state,{forward:v,scroll:nw()});l(M.current,M,!0);const T=Vi({},NP(r.value,v,null),{position:M.position+1},_);l(v,T,!1),r.value=v}return{location:r,state:s,push:d,replace:f}}function pre(e){e=ire(e);const t=hre(e),i=cre(e,t.state,t.location,t.replace);function r(l,f=!0){f||i.pauseListeners(),history.go(l)}const s=Vi({location:"",base:e,go:r,createHref:nre.bind(null,e)},t,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function hTe(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),pre(e)}function dre(e){return typeof e=="string"||e&&typeof e=="object"}function jP(e){return typeof e=="string"||typeof e=="symbol"}const Mc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},DP=kf("nf");var VP;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(VP||(VP={}));function Lf(e,t){return Vi(new Error,{type:e,[DP]:!0},t)}function fp(e,t){return e instanceof Error&&DP in e&&(t==null||!!(e.type&t))}const zP="[^/]+?",fre={sensitive:!1,strict:!1,start:!0,end:!0},yre=/[.+*?^${}()[\]/\\]/g;function gre(e,t){const i=Vi({},fre,t),r=[];let s=i.start?"^":"";const l=[];for(const _ of e){const M=_.length?[]:[90];i.strict&&!_.length&&(s+="/");for(let T=0;T<_.length;T++){const A=_[T];let k=40+(i.sensitive?.25:0);if(A.type===0)T||(s+="/"),s+=A.value.replace(yre,"\\$&"),k+=40;else if(A.type===1){const{value:F,repeatable:D,optional:z,regexp:H}=A;l.push({name:F,repeatable:D,optional:z});const J=H||zP;if(J!==zP){k+=10;try{new RegExp(`(${J})`)}catch(ie){throw new Error(`Invalid custom RegExp for param "${F}" (${J}): `+ie.message)}}let Y=D?`((?:${J})(?:/(?:${J}))*)`:`(${J})`;T||(Y=z&&_.length<2?`(?:/${Y})`:"/"+Y),z&&(Y+="?"),s+=Y,k+=20,z&&(k+=-8),D&&(k+=-20),J===".*"&&(k+=-50)}M.push(k)}r.push(M)}if(i.strict&&i.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&(s+="(?:/|$)");const f=new RegExp(s,i.sensitive?"":"i");function d(_){const M=_.match(f),T={};if(!M)return null;for(let A=1;A<M.length;A++){const k=M[A]||"",F=l[A-1];T[F.name]=k&&F.repeatable?k.split("/"):k}return T}function v(_){let M="",T=!1;for(const A of e){(!T||!M.endsWith("/"))&&(M+="/"),T=!1;for(const k of A)if(k.type===0)M+=k.value;else if(k.type===1){const{value:F,repeatable:D,optional:z}=k,H=F in _?_[F]:"";if(Array.isArray(H)&&!D)throw new Error(`Provided param "${F}" is an array but it is not repeatable (* or + modifiers)`);const J=Array.isArray(H)?H.join("/"):H;if(!J)if(z)A.length<2&&(M.endsWith("/")?M=M.slice(0,-1):T=!0);else throw new Error(`Missing required param "${F}"`);M+=J}}return M}return{re:f,score:r,keys:l,parse:d,stringify:v}}function mre(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function vre(e,t){let i=0;const r=e.score,s=t.score;for(;i<r.length&&i<s.length;){const l=mre(r[i],s[i]);if(l)return l;i++}return s.length-r.length}const bre={type:0,value:""},wre=/[a-zA-Z0-9_]/;function _re(e){if(!e)return[[]];if(e==="/")return[[bre]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(k){throw new Error(`ERR (${i})/"${_}": ${k}`)}let i=0,r=i;const s=[];let l;function f(){l&&s.push(l),l=[]}let d=0,v,_="",M="";function T(){!_||(i===0?l.push({type:0,value:_}):i===1||i===2||i===3?(l.length>1&&(v==="*"||v==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:_,regexp:M,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):t("Invalid state to consume buffer"),_="")}function A(){_+=v}for(;d<e.length;){if(v=e[d++],v==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:v==="/"?(_&&T(),f()):v===":"?(T(),i=1):A();break;case 4:A(),i=r;break;case 1:v==="("?i=2:wre.test(v)?A():(T(),i=0,v!=="*"&&v!=="?"&&v!=="+"&&d--);break;case 2:v===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+v:i=3:M+=v;break;case 3:T(),i=0,v!=="*"&&v!=="?"&&v!=="+"&&d--,M="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${_}"`),T(),f(),s}function xre(e,t,i){const r=gre(_re(e.path),i),s=Vi(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Sre(e,t){const i=[],r=new Map;t=qP({strict:!1,end:!0,sensitive:!1},t);function s(M){return r.get(M)}function l(M,T,A){const k=!A,F=$re(M);F.aliasOf=A&&A.record;const D=qP(t,M),z=[F];if("alias"in M){const Y=typeof M.alias=="string"?[M.alias]:M.alias;for(const ie of Y)z.push(Vi({},F,{components:A?A.record.components:F.components,path:ie,aliasOf:A?A.record:F}))}let H,J;for(const Y of z){const{path:ie}=Y;if(T&&ie[0]!=="/"){const re=T.record.path,ee=re[re.length-1]==="/"?"":"/";Y.path=T.record.path+(ie&&ee+ie)}if(H=xre(Y,T,D),A?A.alias.push(H):(J=J||H,J!==H&&J.alias.push(H),k&&M.name&&!GP(H)&&f(M.name)),"children"in F){const re=F.children;for(let ee=0;ee<re.length;ee++)l(re[ee],H,A&&A.children[ee])}A=A||H,v(H)}return J?()=>{f(J)}:Ny}function f(M){if(jP(M)){const T=r.get(M);T&&(r.delete(M),i.splice(i.indexOf(T),1),T.children.forEach(f),T.alias.forEach(f))}else{const T=i.indexOf(M);T>-1&&(i.splice(T,1),M.record.name&&r.delete(M.record.name),M.children.forEach(f),M.alias.forEach(f))}}function d(){return i}function v(M){let T=0;for(;T<i.length&&vre(M,i[T])>=0;)T++;i.splice(T,0,M),M.record.name&&!GP(M)&&r.set(M.record.name,M)}function _(M,T){let A,k={},F,D;if("name"in M&&M.name){if(A=r.get(M.name),!A)throw Lf(1,{location:M});D=A.record.name,k=Vi(Mre(T.params,A.keys.filter(J=>!J.optional).map(J=>J.name)),M.params),F=A.stringify(k)}else if("path"in M)F=M.path,A=i.find(J=>J.re.test(F)),A&&(k=A.parse(F),D=A.record.name);else{if(A=T.name?r.get(T.name):i.find(J=>J.re.test(T.path)),!A)throw Lf(1,{location:M,currentLocation:T});D=A.record.name,k=Vi({},T.params,M.params),F=A.stringify(k)}const z=[];let H=A;for(;H;)z.unshift(H.record),H=H.parent;return{name:D,path:F,params:k,matched:z,meta:Tre(z)}}return e.forEach(M=>l(M)),{addRoute:l,resolve:_,removeRoute:f,getRoutes:d,getRecordMatcher:s}}function Mre(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function $re(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Ire(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Ire(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="boolean"?i:i[r];return t}function GP(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Tre(e){return e.reduce((t,i)=>Vi(t,i.meta),{})}function qP(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}const UP=/#/g,Ere=/&/g,Cre=/\//g,Are=/=/g,Pre=/\?/g,BP=/\+/g,Ore=/%5B/g,kre=/%5D/g,HP=/%5E/g,Rre=/%60/g,WP=/%7B/g,Fre=/%7C/g,JP=/%7D/g,Lre=/%20/g;function Z5(e){return encodeURI(""+e).replace(Fre,"|").replace(Ore,"[").replace(kre,"]")}function Nre(e){return Z5(e).replace(WP,"{").replace(JP,"}").replace(HP,"^")}function K5(e){return Z5(e).replace(BP,"%2B").replace(Lre,"+").replace(UP,"%23").replace(Ere,"%26").replace(Rre,"`").replace(WP,"{").replace(JP,"}").replace(HP,"^")}function jre(e){return K5(e).replace(Are,"%3D")}function Dre(e){return Z5(e).replace(UP,"%23").replace(Pre,"%3F")}function Vre(e){return e==null?"":Dre(e).replace(Cre,"%2F")}function sw(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function zre(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const l=r[s].replace(BP," "),f=l.indexOf("="),d=sw(f<0?l:l.slice(0,f)),v=f<0?null:sw(l.slice(f+1));if(d in t){let _=t[d];Array.isArray(_)||(_=t[d]=[_]),_.push(v)}else t[d]=v}return t}function ZP(e){let t="";for(let i in e){const r=e[i];if(i=jre(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(Array.isArray(r)?r.map(l=>l&&K5(l)):[r&&K5(r)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+i,l!=null&&(t+="="+l))})}return t}function Gre(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=Array.isArray(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}function Vy(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:t,list:()=>e,reset:i}}function $c(e,t,i,r,s){const l=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((f,d)=>{const v=T=>{T===!1?d(Lf(4,{from:i,to:t})):T instanceof Error?d(T):dre(T)?d(Lf(2,{from:t,to:T})):(l&&r.enterCallbacks[s]===l&&typeof T=="function"&&l.push(T),f())},_=e.call(r&&r.instances[s],t,i,v);let M=Promise.resolve(_);e.length<3&&(M=M.then(v)),M.catch(T=>d(T))})}function Y5(e,t,i,r){const s=[];for(const l of e)for(const f in l.components){let d=l.components[f];if(!(t!=="beforeRouteEnter"&&!l.instances[f]))if(qre(d)){const _=(d.__vccOpts||d)[t];_&&s.push($c(_,i,r,l,f))}else{let v=d();s.push(()=>v.then(_=>{if(!_)return Promise.reject(new Error(`Couldn't resolve component "${f}" at "${l.path}"`));const M=Zie(_)?_.default:_;l.components[f]=M;const A=(M.__vccOpts||M)[t];return A&&$c(A,i,r,l,f)()}))}}return s}function qre(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function KP(e){const t=vc(U5),i=vc(PP),r=Ha(()=>t.resolve(Ty(e.to))),s=Ha(()=>{const{matched:v}=r.value,{length:_}=v,M=v[_-1],T=i.matched;if(!M||!T.length)return-1;const A=T.findIndex(Ff.bind(null,M));if(A>-1)return A;const k=YP(v[_-2]);return _>1&&YP(M)===k&&T[T.length-1].path!==k?T.findIndex(Ff.bind(null,v[_-2])):A}),l=Ha(()=>s.value>-1&&Wre(i.params,r.value.params)),f=Ha(()=>s.value>-1&&s.value===i.matched.length-1&&kP(i.params,r.value.params));function d(v={}){return Hre(v)?t[Ty(e.replace)?"replace":"push"](Ty(e.to)).catch(Ny):Promise.resolve()}return{route:r,href:Ha(()=>r.value.href),isActive:l,isExactActive:f,navigate:d}}const Ure=S5({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:KP,setup(e,{slots:t}){const i=$y(KP(e)),{options:r}=vc(U5),s=Ha(()=>({[XP(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[XP(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const l=t.default&&t.default(i);return e.custom?l:Ry("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},l)}}}),Bre=Ure;function Hre(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Wre(e,t){for(const i in t){const r=t[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some((l,f)=>l!==s[f]))return!1}return!0}function YP(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const XP=(e,t,i)=>e!=null?e:t!=null?t:i,Jre=S5({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:i}){const r=vc(B5),s=Ha(()=>e.route||r.value),l=vc(AP,0),f=Ha(()=>s.value.matched[l]);Gb(AP,l+1),Gb(Jie,f),Gb(B5,s);const d=ote();return iw(()=>[d.value,f.value,e.name],([v,_,M],[T,A,k])=>{_&&(_.instances[M]=v,A&&A!==_&&v&&v===T&&(_.leaveGuards.size||(_.leaveGuards=A.leaveGuards),_.updateGuards.size||(_.updateGuards=A.updateGuards))),v&&_&&(!A||!Ff(_,A)||!T)&&(_.enterCallbacks[M]||[]).forEach(F=>F(v))},{flush:"post"}),()=>{const v=s.value,_=f.value,M=_&&_.components[e.name],T=e.name;if(!M)return QP(i.default,{Component:M,route:v});const A=_.props[e.name],k=A?A===!0?v.params:typeof A=="function"?A(v):A:null,D=Ry(M,Vi({},k,t,{onVnodeUnmounted:z=>{z.component.isUnmounted&&(_.instances[T]=null)},ref:d}));return QP(i.default,{Component:D,route:v})||D}}});function QP(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const Zre=Jre;function pTe(e){const t=Sre(e.routes,e),i=e.parseQuery||zre,r=e.stringifyQuery||ZP,s=e.history,l=Vy(),f=Vy(),d=Vy(),v=ate(Mc);let _=Mc;Rf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=H5.bind(null,De=>""+De),T=H5.bind(null,Vre),A=H5.bind(null,sw);function k(De,ct){let Ze,yt;return jP(De)?(Ze=t.getRecordMatcher(De),yt=ct):yt=De,t.addRoute(yt,Ze)}function F(De){const ct=t.getRecordMatcher(De);ct&&t.removeRoute(ct)}function D(){return t.getRoutes().map(De=>De.record)}function z(De){return!!t.getRecordMatcher(De)}function H(De,ct){if(ct=Vi({},ct||v.value),typeof De=="string"){const Nt=W5(i,De,ct.path),ce=t.resolve({path:Nt.path},ct),ye=s.createHref(Nt.fullPath);return Vi(Nt,ce,{params:A(ce.params),hash:sw(Nt.hash),redirectedFrom:void 0,href:ye})}let Ze;if("path"in De)Ze=Vi({},De,{path:W5(i,De.path,ct.path).path});else{const Nt=Vi({},De.params);for(const ce in Nt)Nt[ce]==null&&delete Nt[ce];Ze=Vi({},De,{params:T(De.params)}),ct.params=T(ct.params)}const yt=t.resolve(Ze,ct),ni=De.hash||"";yt.params=M(A(yt.params));const si=Xie(r,Vi({},De,{hash:Nre(ni),path:yt.path})),Lt=s.createHref(si);return Vi({fullPath:si,hash:ni,query:r===ZP?Gre(De.query):De.query||{}},yt,{redirectedFrom:void 0,href:Lt})}function J(De){return typeof De=="string"?W5(i,De,v.value.path):Vi({},De)}function Y(De,ct){if(_!==De)return Lf(8,{from:ct,to:De})}function ie(De){return le(De)}function re(De){return ie(Vi(J(De),{replace:!0}))}function ee(De){const ct=De.matched[De.matched.length-1];if(ct&&ct.redirect){const{redirect:Ze}=ct;let yt=typeof Ze=="function"?Ze(De):Ze;return typeof yt=="string"&&(yt=yt.includes("?")||yt.includes("#")?yt=J(yt):{path:yt},yt.params={}),Vi({query:De.query,hash:De.hash,params:De.params},yt)}}function le(De,ct){const Ze=_=H(De),yt=v.value,ni=De.state,si=De.force,Lt=De.replace===!0,Nt=ee(Ze);if(Nt)return le(Vi(J(Nt),{state:ni,force:si,replace:Lt}),ct||Ze);const ce=Ze;ce.redirectedFrom=ct;let ye;return!si&&Qie(r,yt,Ze)&&(ye=Lf(16,{to:ce,from:yt}),Oi(yt,yt,!0,!1)),(ye?Promise.resolve(ye):we(ce,yt)).catch(Te=>fp(Te)?Te:ft(Te,ce,yt)).then(Te=>{if(Te){if(fp(Te,2))return le(Vi(J(Te.to),{state:ni,force:si,replace:Lt}),ct||ce)}else Te=Me(ce,yt,!0,Lt,ni);return _e(ce,yt,Te),Te})}function me(De,ct){const Ze=Y(De,ct);return Ze?Promise.reject(Ze):Promise.resolve()}function we(De,ct){let Ze;const[yt,ni,si]=Kre(De,ct);Ze=Y5(yt.reverse(),"beforeRouteLeave",De,ct);for(const Nt of yt)Nt.leaveGuards.forEach(ce=>{Ze.push($c(ce,De,ct))});const Lt=me.bind(null,De,ct);return Ze.push(Lt),Nf(Ze).then(()=>{Ze=[];for(const Nt of l.list())Ze.push($c(Nt,De,ct));return Ze.push(Lt),Nf(Ze)}).then(()=>{Ze=Y5(ni,"beforeRouteUpdate",De,ct);for(const Nt of ni)Nt.updateGuards.forEach(ce=>{Ze.push($c(ce,De,ct))});return Ze.push(Lt),Nf(Ze)}).then(()=>{Ze=[];for(const Nt of De.matched)if(Nt.beforeEnter&&!ct.matched.includes(Nt))if(Array.isArray(Nt.beforeEnter))for(const ce of Nt.beforeEnter)Ze.push($c(ce,De,ct));else Ze.push($c(Nt.beforeEnter,De,ct));return Ze.push(Lt),Nf(Ze)}).then(()=>(De.matched.forEach(Nt=>Nt.enterCallbacks={}),Ze=Y5(si,"beforeRouteEnter",De,ct),Ze.push(Lt),Nf(Ze))).then(()=>{Ze=[];for(const Nt of f.list())Ze.push($c(Nt,De,ct));return Ze.push(Lt),Nf(Ze)}).catch(Nt=>fp(Nt,8)?Nt:Promise.reject(Nt))}function _e(De,ct,Ze){for(const yt of d.list())yt(De,ct,Ze)}function Me(De,ct,Ze,yt,ni){const si=Y(De,ct);if(si)return si;const Lt=ct===Mc,Nt=Rf?history.state:{};Ze&&(yt||Lt?s.replace(De.fullPath,Vi({scroll:Lt&&Nt&&Nt.scroll},ni)):s.push(De.fullPath,ni)),v.value=De,Oi(De,ct,Ze,Lt),Ct()}let Se;function He(){Se=s.listen((De,ct,Ze)=>{const yt=H(De),ni=ee(yt);if(ni){le(Vi(ni,{replace:!0}),yt).catch(Ny);return}_=yt;const si=v.value;Rf&&are(FP(si.fullPath,Ze.delta),nw()),we(yt,si).catch(Lt=>fp(Lt,4|8)?Lt:fp(Lt,2)?(le(Lt.to,yt).then(Nt=>{fp(Nt,4|16)&&!Ze.delta&&Ze.type===jy.pop&&s.go(-1,!1)}).catch(Ny),Promise.reject()):(Ze.delta&&s.go(-Ze.delta,!1),ft(Lt,yt,si))).then(Lt=>{Lt=Lt||Me(yt,si,!1),Lt&&(Ze.delta?s.go(-Ze.delta,!1):Ze.type===jy.pop&&fp(Lt,4|16)&&s.go(-1,!1)),_e(yt,si,Lt)}).catch(Ny)})}let We=Vy(),Ot=Vy(),kt;function ft(De,ct,Ze){Ct(De);const yt=Ot.list();return yt.length?yt.forEach(ni=>ni(De,ct,Ze)):console.error(De),Promise.reject(De)}function Ye(){return kt&&v.value!==Mc?Promise.resolve():new Promise((De,ct)=>{We.add([De,ct])})}function Ct(De){kt||(kt=!0,He(),We.list().forEach(([ct,Ze])=>De?Ze(De):ct()),We.reset())}function Oi(De,ct,Ze,yt){const{scrollBehavior:ni}=e;if(!Rf||!ni)return Promise.resolve();const si=!Ze&&lre(FP(De.fullPath,0))||(yt||!Ze)&&history.state&&history.state.scroll||null;return sP().then(()=>ni(De,ct,si)).then(Lt=>Lt&&ore(Lt)).catch(Lt=>ft(Lt,De,ct))}const Ui=De=>s.go(De);let _i;const pr=new Set;return{currentRoute:v,addRoute:k,removeRoute:F,hasRoute:z,getRoutes:D,resolve:H,options:e,push:ie,replace:re,go:Ui,back:()=>Ui(-1),forward:()=>Ui(1),beforeEach:l.add,beforeResolve:f.add,afterEach:d.add,onError:Ot.add,isReady:Ye,install(De){const ct=this;De.component("RouterLink",Bre),De.component("RouterView",Zre),De.config.globalProperties.$router=ct,Object.defineProperty(De.config.globalProperties,"$route",{enumerable:!0,get:()=>Ty(v)}),Rf&&!_i&&v.value===Mc&&(_i=!0,ie(s.location).catch(ni=>{}));const Ze={};for(const ni in Mc)Ze[ni]=Ha(()=>v.value[ni]);De.provide(U5,ct),De.provide(PP,$y(Ze)),De.provide(B5,v);const yt=De.unmount;pr.add(De),De.unmount=function(){pr.delete(De),pr.size<1&&(_=Mc,Se&&Se(),v.value=Mc,_i=!1,kt=!1),yt()}}}}function Nf(e){return e.reduce((t,i)=>t.then(()=>i()),Promise.resolve())}function Kre(e,t){const i=[],r=[],s=[],l=Math.max(t.matched.length,e.matched.length);for(let f=0;f<l;f++){const d=t.matched[f];d&&(e.matched.find(_=>Ff(_,d))?r.push(d):i.push(d));const v=e.matched[f];v&&(t.matched.find(_=>Ff(_,v))||s.push(v))}return[i,r,s]}function m(e,t,i,r){var s,l=arguments.length,f=l<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(e,t,i,r);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(f=(l<3?s(f):l>3?s(t,i,f):s(t,i))||f);return l>3&&f&&Object.defineProperty(t,i,f),f}let Ic;function Ie(e){return typeof Ic[e]=="function"?Ic[e]=Ic[e](globalThis):Ic[e]}var YK,XK,QK,eY;Ic=((YK=globalThis.dojoConfig)==null?void 0:YK.has)||((XK=globalThis.esriConfig)==null?void 0:XK.has)?te(te({},(QK=globalThis.dojoConfig)==null?void 0:QK.has),(eY=globalThis.esriConfig)==null?void 0:eY.has):{},Ie.add=(e,t,i,r)=>((r||Ic[e]===void 0)&&(Ic[e]=t),i&&Ie(e)),Ie.cache=Ic,Ie.add("esri-deprecation-warnings",!0),(()=>{var t;Ie.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(Ie.add("host-browser",e),Ie.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),Ie.add("dom",e),Ie("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,l=parseFloat(s);if(Ie.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),Ie.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),Ie.add("khtml",s.includes("Konqueror")?l:void 0),Ie.add("edge",parseFloat(r.split("Edge/")[1])||void 0),Ie.add("opr",parseFloat(r.split("OPR/")[1])||void 0),Ie.add("webkit",!Ie("wp")&&!Ie("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),Ie.add("chrome",!Ie("edge")&&!Ie("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),Ie.add("android",!Ie("wp")&&parseFloat(r.split("Android ")[1])||void 0),Ie.add("safari",!s.includes("Safari")||Ie("wp")||Ie("chrome")||Ie("android")||Ie("edge")||Ie("opr")?void 0:parseFloat(s.split("Version/")[1])),Ie.add("mac",s.includes("Macintosh")),!Ie("wp")&&r.match(/(iPhone|iPod|iPad)/)){const f=RegExp.$1.replace(/P/,"p"),d=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",v=parseFloat(d.replace(/_/,".").replace(/_/g,""));Ie.add(f,v),Ie.add("ios",v)}Ie.add("trident",parseFloat(s.split("Trident/")[1])||void 0),Ie("webkit")||(!r.includes("Gecko")||Ie("wp")||Ie("khtml")||Ie("trident")||Ie("edge")||Ie.add("mozilla",l),Ie("mozilla")&&Ie.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&Ie.add("esri-mobile",t),i&&Ie.add("esri-iPhone",i),Ie.add("esri-geolocation",!!navigator.geolocation)}Ie.add("esri-canvas-svg-support",!Ie("trident")),Ie.add("esri-wasm","WebAssembly"in globalThis),Ie.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),Ie.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),Ie.add("esri-atomics","Atomics"in globalThis),Ie.add("esri-workers","Worker"in globalThis),Ie.add("web-feat:cache","caches"in globalThis),Ie.add("esri-workers-arraybuffer-transfer",!Ie("safari")||Number(Ie("safari"))>=12),Ie.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Ie.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Ie.add("featurelayer-snapshot-enabled",!0),Ie.add("featurelayer-snapshot-point-min-threshold",8e4),Ie.add("featurelayer-snapshot-point-max-threshold",4e5),Ie.add("featurelayer-snapshot-point-coverage",.1),Ie.add("featurelayer-advanced-symbols",!1),Ie.add("featurelayer-pbf",!0),Ie.add("featurelayer-pbf-statistics",!1),Ie.add("feature-layers-workers",!0),Ie.add("feature-polyline-generalization-factor",1),Ie.add("mapview-transitions-duration",200),Ie.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Ie.add("mapserver-pbf-enabled",!1),Ie.add("mapimagelayer-popup-identify-max-tolerance",20),Ie.add("heatmap-allow-raster-fallback",!0),Ie.add("heatmap-force-raster",!1),Ie("host-webworker")||Ie("host-browser")&&(Ie.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Ie.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{Ie.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Ie.add("esri-image-decode",!1,!0,!0)})}return!1}),Ie.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const Yre=null;function q(e){return e!=null}function ae(e){return e==null}function Zl(e,t){return q(e)?t(e):Yre}function Jt(e){return e}function ss(e,t){return X5(e,t),e}function X5(e,t){if(ae(e))throw new Error(t!=null?t:"value is None")}function pn(e,t){return q(e)?e:typeof t=="function"?t():t}function dTe(e,t){return q(e)?e:t}function oi(e){return q(e)&&e.destroy(),null}function fTe(e){return q(e)&&e.dispose(),null}function Er(e){return q(e)&&e.remove(),null}function Za(e){return q(e)&&e.abort(),null}function yTe(e){return q(e)&&e.release(),null}function eO(e,t,i){return q(e)&&q(t)?q(i)?i(e,t):e.equals(t):e===t}function Xre(e){return null}function gTe(e,t){const i=new Array;for(const r of e)i.push(zy(r,null,t));return i}function mTe(e,t){for(const i of e)Zl(i,t)}function zy(e,t,i){return q(e)?i(e):t}function Qre(e){return e.filter(t=>q(t))}function ow(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function Lr(e){return e}class ra{constructor(t=1){this._seed=t}set seed(t){this._seed=t!=null?t:Math.random()*ra._m}getInt(){return this._seed=(ra._a*this._seed+ra._c)%ra._m,this._seed}getFloat(){return this.getInt()/(ra._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/ra._m*r}}ra._m=2147483647,ra._a=48271,ra._c=0;function ene(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):e.filter((i,r,s)=>s.indexOf(i)===r)}function Tc(e,t,i){if(ae(e)&&ae(t))return!0;if(ae(e)||ae(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function vTe(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function bTe(e,t,i){let r,s;return i?(r=t.filter(l=>!e.some(f=>i(f,l))),s=e.filter(l=>!t.some(f=>i(f,l)))):(r=t.filter(l=>!e.includes(l)),s=e.filter(l=>!t.includes(l))),{added:r,removed:s}}function wTe(e){return e&&typeof e.length=="number"}const tne=!!Array.prototype.fill;function _Te(e,t){if(tne)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function xTe(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class tO{constructor(){this.last=0}}const iO=new tO;function Q5(e,t,i,r){r=r||iO;const s=Math.max(0,r.last-10);for(let f=s;f<i;++f)if(e[f]===t)return r.last=f,f;const l=Math.min(s,i);for(let f=0;f<l;++f)if(e[f]===t)return r.last=f,f;return-1}function ine(e,t,i,r){const s=i!=null?i:e.length,l=Q5(e,t,s,r);if(l!==-1)return e[l]=e[s-1],i==null&&e.pop(),t}const na=new Set;function rne(e,t,i=e.length,r=t.length,s,l){if(r===0||i===0)return i;na.clear();for(let d=0;d<r;++d)na.add(t[d]);s=s||iO;const f=Math.max(0,s.last-10);for(let d=f;d<i;++d)if(na.has(e[d])&&(l&&l.push(e[d]),na.delete(e[d]),e[d]=e[i-1],--i,--d,na.size===0||i===0))return na.clear(),i;for(let d=0;d<f;++d)if(na.has(e[d])&&(l&&l.push(e[d]),na.delete(e[d]),e[d]=e[i-1],--i,--d,na.size===0||i===0))return na.clear(),i;return na.clear(),i}new ra;function rO(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function STe(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function nne(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),s=new e.constructor(r);for(let l=0;l<r;l++)s[l]=e[t+l];return s}function MTe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function sne(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function one(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function ane(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function lne(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function une(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function cne(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function hne(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function nO(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function sO(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function pne(e){const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e[i];return t}function oO(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&oO(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function ve(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=hO(e);if(q(t))return t;if(aO(e))return e.clone();if(lO(e))return e.map(ve);if(uO(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=ve(e[r]);return i}function e4(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=hO(e);if(q(t))return t;if(lO(e)){let i=!0;const r=e.map(s=>{const l=e4(s);return s!=null&&l==null&&(i=!1),l});return i?r:null}if(aO(e))return e.clone();if(!uO(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],l=e4(s);if(s!=null&&l==null)return null;i[r]=l}return i}return null}function aO(e){return typeof e.clone=="function"}function lO(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function uO(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function cO(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function hO(e){if(sne(e)||one(e)||ane(e)||lne(e)||une(e)||cne(e)||hne(e)||nO(e)||sO(e))return nne(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,ve(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(ve(i));return t}return null}function t4(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function dne(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Tc(e,t):e instanceof Set?t instanceof Set&&yne(e,t):e instanceof Map?t instanceof Map&&gne(e,t):!!cO(e)&&cO(t)&&fne(e,t))}function fne(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function yne(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function gne(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function pO(e,t,i=!1){return fO(e,t,i)}function jf(e,t){if(t!=null)return t[e]||dO(e.split("."),!1,t)}function jn(e,t,i){const r=e.split("."),s=r.pop(),l=dO(r,!0,i);l&&s&&(l[s]=t)}function dO(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function fO(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let l=r[s],f=t[s];return l===f?r:l===void 0?(r[s]=ve(f),r):(Array.isArray(f)||Array.isArray(r)?(l=l?Array.isArray(l)?r[s]=l.concat():r[s]=[l]:r[s]=[],f&&(Array.isArray(f)||(f=[f]),i?f.forEach(d=>{l.includes(d)||l.push(d)}):r[s]=f.concat())):f&&typeof f=="object"?r[s]=fO(l,f,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=f),r)},e||{}):e}var tY;const gi={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:(tY=globalThis.location)==null?void 0:tY.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(pO(gi,globalThis.esriConfig,!0),delete gi.has),!gi.assetsPath){{const e="4.25.5";gi.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}gi.defaultAssetsPath=gi.assetsPath}const mne=/\{([^\}]+)\}/g;function yO(e){return e!=null?e:""}function Ka(e,t){return e.replace(mne,typeof t=="object"?(i,r)=>yO(jf(r,t)):(i,r)=>yO(t(r)))}function vne(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function i4(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function $Te(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const gO={info:0,warn:1,error:2,none:3};class Pe{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Pe._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Pe.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Pe._loggers;return Pe._loggers=t,i},set throttlingDisabled(t){Pe._throttlingDisabled=t}}}static getLogger(t){let i=Pe._loggers[t];return i||(i=new Pe({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!Pe._throttlingDisabled){const s=this._argsToKey(r),l=this._loggedMessages[t].get(s);if(i==="once"&&l!=null||i==="oncePerTick"&&l&&l>=Pe._tickCounter)return;this._loggedMessages[t].set(s,Pe._tickCounter),Pe._scheduleTickCounterIncrement()}for(const s of gi.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;q(r);){const s=r[t];if(q(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=gi.log.level?gi.log.level:"warn";return gO[this._parentWithMember("level",i)]<=gO[t]}_argsToKey(...t){const i=(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return i4(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Pe._tickCounterScheduled||(Pe._tickCounterScheduled=!0,Promise.resolve().then(()=>{Pe._tickCounter++,Pe._tickCounterScheduled=!1}))}}Pe._loggers={},Pe._tickCounter=0,Pe._tickCounterScheduled=!1,Pe._throttlingDisabled=!1;function Gy(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function ITe(e,t){for(const[i,r]of e)if(t(r,i))return r;return null}function mO(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}const Df=Pe.getLogger("esri.core.accessorSupport.ensureTypes");function bne(e){return e==null?e:new Date(e)}function wne(e){return e==null?e:!!e}function qy(e){return e==null?e:e.toString()}function Io(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function aw(e){return e==null?e:Math.round(parseFloat(e))}function vO(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function lw(e,t){return t!=null&&e&&!(t instanceof e)}function bO(e){return e&&"isCollection"in e}function wO(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function _ne(e,t){if(!t||!t.constructor||!bO(t.constructor))return r4(e,t)?t:new e(t);const i=wO(e.prototype.itemType),r=wO(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(r4(e,t),t):new e(t):t}function r4(e,t){return!!vO(t)&&(Df.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+uw(e)+"'"),!0)}function Vf(e,t){return t==null?t:bO(e)?_ne(e,t):lw(e,t)?r4(e,t)?t:new e(t):t}function uw(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const xne=new WeakMap;function Sne(e){switch(e){case Number:return Io;case hi:return aw;case Boolean:return wne;case String:return qy;case Date:return bne;default:return mO(xne,e,()=>Vf.bind(null,e))}}function Ai(e,t){const i=Sne(e);return arguments.length===1?i:i(t)}function Uy(e,t,i){return arguments.length===1?Uy.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Mne(e,t){return arguments.length===1?Uy(Ai.bind(null,e)):Uy(Ai.bind(null,e),t)}function _O(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>_O(e,t-1,r)):e(i)}function cw(e,t,i){if(arguments.length===2)return cw.bind(null,e,t);if(!i)return i;let r=t,s=i=_O(e,t,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let l=0;l<r;l++)i=[i];return i}function $ne(e,t,i){return arguments.length===2?cw(Ai.bind(null,e),t):cw(Ai.bind(null,e),t,i)}function xO(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function n4(e,t){if(arguments.length===2)return n4(e).call(null,t);const i=new Set,r=e.filter(d=>typeof d!="function"),s=e.filter(d=>typeof d=="function");for(const d of e)typeof d!="string"&&typeof d!="number"||i.add(d);let l=null,f=null;return(d,v)=>{if(d==null)return d;const _=typeof d,M=_==="string"||_==="number";return M&&(i.has(d)||s.some(T=>_==="string"&&T===String||_==="number"&&T===Number))||_==="object"&&s.some(T=>!lw(d,T))?d:(M&&r.length?(l||(l=r.map(T=>typeof T=="string"?`'${T}'`:`${T}`).join(", ")),Df.error("Accessor#set",`'${d}' is not a valid value for this property, only the following values are valid: ${l}`)):typeof d=="object"&&s.length?(f||(f=s.map(T=>uw(T)).join(", ")),Df.error("Accessor#set",`'${d}' is not a valid value for this property, value must be one of ${f}`)):Df.error("Accessor#set",`'${d}' is not a valid value for this property`),v&&(v.valid=!1),null)}}function Ya(e,t){if(arguments.length===2)return Ya(e).call(null,t);const i={},r=[],s=[];for(const v in e.typeMap){const _=e.typeMap[v];i[v]=Ai(_),r.push(uw(_)),s.push(v)}const l=()=>`'${r.join("', '")}'`,f=()=>`'${s.join("', '")}'`,d=typeof e.key=="string"?v=>v[e.key]:e.key;return v=>{if(e.base&&!lw(e.base,v)||v==null)return v;const _=d(v)||e.defaultKeyValue,M=i[_];if(!M)return Df.error("Accessor#set",`Invalid property value, value needs to be one of ${l()}, or a plain object that can autocast (having .type = ${f()})`),null;if(!lw(e.typeMap[_],v))return v;if(typeof e.key=="string"&&!vO(v)){const T={};for(const A in v)A!==e.key&&(T[A]=v[A]);return M(T)}return M(v)}}class hi{}const TTe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Ine(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function SO(e){switch(e.type){case"native":return Ai(e.value);case"array":return Uy(SO(e.value));case"one-of":return Tne(e);default:return null}}function Tne(e){let t=null;return(i,r)=>o4(i,e)?i:(t==null&&(t=s4(e)),Df.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function s4(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case hi:return"integer";case Date:return"date";default:return uw(e.value)}case"array":return`array of ${s4(e.value)}`;case"one-of":{const t=e.values.map(i=>s4(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function o4(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case hi:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!o4(i,t.value));case"one-of":return t.values.some(i=>o4(e,i))}}function By(e){return Kl(()=>e.forEach(t=>q(t)&&t.remove()))}function Kl(e){return{remove:()=>{e&&(e(),e=void 0)}}}function ETe(e){return Kl(()=>{const t=e();q(t)&&t.remove()})}function CTe(e){return Kl(q(e)?()=>e.destroy():void 0)}function Nr(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function Ene(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function hw(e,t,i){return i?pw(e,t,{policy:i,path:""}):pw(e,t,null)}function pw(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let l=null,f="merge";if(i&&(l=i.path?`${i.path}.${s}`:s,f=i.policy(l)),f==="replace")return r[s]=t[s],r;if(r[s]===void 0)return r[s]=ve(t[s]),r;let d=r[s],v=t[s];if(d===v)return r;if(Array.isArray(v)||Array.isArray(r))d=d?Array.isArray(d)?r[s]=d.concat():r[s]=[d]:r[s]=[],v&&(Array.isArray(v)||(v=[v]),v.forEach(_=>{d.includes(_)||d.push(_)}));else if(v&&typeof v=="object")if(i){const _=i.path;i.path=Lr(l),r[s]=pw(d,v,i),i.path=_}else r[s]=pw(d,v,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=v);return r},e||{}):e}function MO(e){return Array.isArray(e)?e:e.split(".")}function $O(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Cne(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...$O(i));return t}return $O(e)}function IO(e,t,i,r){const s=Cne(t);if(s.length!==1){const l=s.map(f=>r(e,f,i));return By(l)}return r(e,s[0],i)}function TO(e){let t=!1;return()=>{t||(t=!0,e())}}function EO(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const r=Nr(t);return Ene(r,i)?r.get(i):t[i]}function CO(e,t,i){if(e==null)return e;const r=EO(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:CO(r,t,i+1)}function Hy(e,t,i=0){return typeof t!="string"||t.includes(".")?CO(e,MO(t),i):EO(t,e)}function dw(e,t){return Hy(e,t)}function AO(e,t){return Hy(t,e)!==void 0}class PO{constructor(t){this.autoDestroy=!1,this.properties=t}}function Wy(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),s=t.autoDestroy;for(const l in r)r[l]=ve(r[l]);t=new PO(r),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new PO({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Lr(e.constructor.__accessorMetadata__)}function Ane(e){return Wy(e).properties}function fw(e,t){const i=Ane(e);let r=i[t];return r||(r=i[t]={}),r}function Pne(e,t){return hw(e,t,kne)}const One=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function kne(e){return One.test(e)?"replace":"merge"}function Rne(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=jf(r,t),l=s!=null?s:"";if(l===void 0)throw new Error(`could not find key "${r}" in template`);return l.toString()})}class yw{constructor(t,i,r){var s;this.name=t,this.details=r,this instanceof yw&&(this.message=(s=i&&Rne(i,r))!=null?s:"")}toString(){return"["+this.name+"]: "+this.message}}class fe extends yw{constructor(t,i,r){if(super(t,i,r),!(this instanceof fe))return new fe(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ve(i)}catch{return"[object]"}}))}}catch(t){throw Pe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new fe(t.name,t.message,t.details)}}fe.prototype.type="error";function gw(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))gw(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),l=s.splice(s.length-1,1)[0];return void gw(dw(e,s),l,i)}const r=e.__accessor__;r!=null&&Fne(t,r),e[t]=i}}function Fne(e,t){if(Ie("esri-unknown-property-errors")&&!Lne(e,t))throw new fe("set:unknown-property",Nne(e,t))}function Lne(e,t){return t.metadatas[e]!=null}function Nne(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function x(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=fw(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&Pe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const l=e.aliasOf;if(l){const v=typeof l=="string"?l:l.source,_=typeof l=="string"?null:l.overridable===!0;let M;s.dependsOn=[v],s.get=function(){let T=dw(this,v);if(typeof T=="function"){M||(M=v.split(".").slice(0,-1).join("."));const A=dw(this,M);A&&(T=T.bind(A))}return T},s.readOnly||(s.set=_?function(T){this._override(i,T)}:function(T){gw(this,v,T)})}const f=e.type,d=e.types;s.cast||(f?s.cast=jne(f):d&&(Array.isArray(d)?s.cast=Uy(Ya(d[0])):s.cast=Ya(d))),Pne(s,e),e.range&&(s.cast=Dne(s.cast,e.range))}}function OO(e,t,i){const r=fw(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function jne(e){let t=0,i=e;if(Ine(e))return SO(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(xO(r))return t===0?n4(r):cw(n4(r),t);if(t===1)return Mne(r);if(t>1)return $ne(r,t);const s=e;return s.from?s.from:Ai(s)}function Dne(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}var Yl;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Yl||(Yl={}));var Ei;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ei||(Ei={}));const mw={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Jy=[];let Zy=mw;function Vt(e){Zy.onObservableAccessed(e)}let vw=!1,bw=!1;function Xl(e,t,i){if(vw)return a4(e,t,i);kO(e);const r=t.call(i);return RO(),r}function Vne(e,t){return Xl(mw,e,t)}function a4(e,t,i){const r=vw;vw=!0,kO(e);let s=null;try{s=t.call(i)}catch(l){bw&&Pe.getLogger("esri.core.accessorSupport.tracking").error(l)}return RO(),vw=r,s}function kO(e){Zy=e,Jy.push(e)}function RO(){const e=Jy.length;if(e>1){const t=Jy.pop();Zy=Jy[e-2],t.onTrackingEnd()}else if(e===1){const t=Jy.pop();Zy=mw,t.onTrackingEnd()}else Zy=mw}function FO(e,t){if(t.flags&Ei.DepTrackingInitialized)return;const i=bw;bw=!1,t.flags&Ei.AutoTracked?a4(t,t.metadata.get,e):LO(e,t),bw=i}const zne=[];function LO(e,t){t.flags&Ei.ExplicitlyTracking||(t.flags|=Ei.ExplicitlyTracking,a4(t,()=>{const i=t.metadata.dependsOn||zne;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=MO(r);for(let l=0,f=e;l<s.length&&f!=null&&typeof f=="object";++l)f=NO(f,s[l],l!==s.length-1)}else NO(e,r,!1)}),t.flags&=~Ei.ExplicitlyTracking)}function NO(e,t,i){var l;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const f=parseInt(r,10);if(!isNaN(f))return Array.isArray(e)?e[f]:e.getItemAt(f)}const s=(l=Nr(e))==null?void 0:l.properties.get(r);return s&&(Vt(s),FO(e,s)),i?e[r]:void 0}function Gne(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(l=>{t[l]=s}),delete t[r]}}}class os extends yw{constructor(t,i,r){if(super(t,i,r),!(this instanceof os))return new os(t,i,r)}}os.prototype.type="warning";function jO(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const l4=Pe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function DO(e,t,i){var r,s;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((s=t.read)==null?void 0:s.enabled)===!1||Bne(e)&&jn("read.reader",Ec(e),t))}function Ec(e){var i,r,s;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return Une(e);if(t===1)return zO(e);if("type"in e&&GO(e.type)){const l=(s=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:s.Type,f=zO(typeof l=="function"?{type:l}:{types:l});return(d,v,_)=>{const M=f(d,v,_);return M&&new e.type(M)}}return u4(e)}function u4(e){return"type"in e?qne(e.type):Hne(e.types)}function qne(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void l4.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const l=new e;return l.read(t,r),l}:e.fromJSON}function VO(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>VO(e,s,i,r-1)):e(t,void 0,i)}function Une(e){var s;const t=u4(e),i=VO.bind(null,t),r=(s=e.ndimArray)!=null?s:0;return(l,f,d)=>{if(l==null)return l;l=i(l,d,r);let v=r,_=l;for(;v>0&&Array.isArray(_);)v--,_=_[0];if(_!==void 0)for(let M=0;M<v;M++)l=[l];return l}}function zO(e){const t=u4(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const f=[];for(const d of i){const v=t(d,void 0,s);v!==void 0&&f.push(v)}return f}const l=t(i,void 0,s);return l!==void 0?[l]:void 0}}function GO(e){if(!jO(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?c4(t.Type):qO(t.Type))}function Bne(e){return"types"in e?qO(e.types):c4(e.type)}function c4(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||GO(e))}function qO(e){for(const t in e.typeMap)if(!c4(e.typeMap[t]))return!1;return!0}function Hne(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(s,l,f)=>{if(s==null)return s;const d=typeof s;if(d!=="object")return void l4.error(`Expected JSON value of type 'object' to deserialize, but got '${d}'`);t||(t=Wne(e));const v=e.key;if(typeof v!="string")return;const _=s[v],M=_?t[_]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!M){const A=`Type '${_||"unknown"}' is not supported`;return f&&f.messages&&s&&f.messages.push(new os(`${i}:unsupported`,A,{definition:s,context:f})),void l4.error(A)}const T=new M;return T.read(s,f),T}}function Wne(e){var i,r;const t={};for(const s in e.typeMap){const l=e.typeMap[s],f=Wy(l.prototype);if(typeof e.key=="function")continue;const d=f.properties[e.key];if(!d)continue;((i=d.json)==null?void 0:i.type)&&Array.isArray(d.json.type)&&d.json.type.length===1&&typeof d.json.type[0]=="string"&&(t[d.json.type[0]]=l);const v=(r=d.json)==null?void 0:r.write;if(!v||!v.writer){t[s]=l;continue}const _=v.target,M=typeof _=="string"?_:e.key,T={};v.writer(s,T,M),T[M]&&(t[T[M]]=l)}return t}function Jne(e){if(e.json||(e.json={}),BO(e.json),HO(e.json),UO(e.json),e.json.origins)for(const t in e.json.origins)BO(e.json.origins[t]),HO(e.json.origins[t]),UO(e.json.origins[t]);return!0}function UO(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function BO(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function HO(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function WO(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&jO(e.type))?t.write.writer=Yne:i>1?t.write.writer=Xne(i):t.types?Array.isArray(t.types)?t.write.writer=Kne(t.types[0]):t.write.writer=Zne(t.types):t.write.writer=Ky}function Zne(e){return(t,i,r,s)=>t?JO(t,e,s)?Ky(t,i,r,s):void 0:Ky(t,i,r,s)}function JO(e,t,i){var r,s;for(const l in t.typeMap)if(e instanceof t.typeMap[l])return!0;if(i==null?void 0:i.messages){const l=(r=t.errorContext)!=null?r:"type",f=`Values of type '${(s=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?s:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new fe(`${l}:unsupported`,f,{definition:e,context:i})),Pe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(f)}return!1}function Kne(e){return(t,i,r,s)=>!t||!Array.isArray(t)?Ky(t,i,r,s):Ky(t.filter(l=>JO(l,e,s)),i,r,s)}function Ky(e,t,i,r){jn(i,ww(e,r),t)}function ww(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?_w(e):e}function _w(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Yne(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(l=>ww(l,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[ww(e,r)],jn(i,s,t)}function ZO(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>ZO(r,t,i-1)):ww(e,t)}function Xne(e){return(t,i,r,s)=>{let l;if(t===null)l=null;else{l=ZO(t,s,e);let f=e,d=l;for(;f>0&&Array.isArray(d);)f--,d=d[0];if(d!==void 0)for(let v=0;v<f;v++)l=[l]}jn(r,l,i)}}function h4(e,t){return p4(e,"read",t)}function KO(e,t){return p4(e,"write",t)}function p4(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const s=i.origin&&e.json.origins[i.origin];s&&(t==="any"||t in s)&&(r=s)}return r}function Qne(e){const t=ese(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?tse(r):t;DO(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write=te({},e.json.write)),WO(s,r)}DO(t,e.json,!0),WO(t,e.json)}function ese(e){return e.json.types?d4(e.json):e.type?YO(e):d4(e)}function tse(e){return e.type?YO(e):d4(e)}function YO(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!xO(i);)i=i[0],t++;return{type:i,ndimArray:t}}function d4(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function ise(e){Jne(e)&&(Gne(e),Qne(e))}const f4=new Set,y4=new Set;function X(e){return t=>{t.prototype.declaredClass=e,nse(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!f4.has(s.initialize)&&(f4.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!y4.has(s.destroy)&&(y4.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);f4.clear(),y4.clear();class l extends t{constructor(...d){if(super(...d),this.constructor===l&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let v=i.length-1;v>=0;v--)i[v].call(this)}}),r.length){let v=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!v){v=!0;for(let _=0;_<r.length;_++)r[_].call(this)}}})}this.postscript(...d)}}}return l.__accessorMetadata__=Wy(t.prototype),l.prototype.declaredClass=e,l}}function rse(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;Vt(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function nse(e){const t=e.prototype,i=Wy(t).properties,r={};for(const s of Object.getOwnPropertyNames(i)){const l=i[s];ise(l),r[s]={enumerable:!0,configurable:!0,get:rse(s,l),set(f){const d=this.__accessor__;if(d!==void 0){if(!Object.isFrozen(this)){if(d.initialized&&l.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(d.lifecycle===Yl.CONSTRUCTED&&l.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);d.set(s,f)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:f})}}}Object.defineProperties(e.prototype,r)}function ATe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function sse(e,t){for(const i of e)if(i!=null&&t(i))return i}function xw(e){return e!=null&&typeof e[Symbol.iterator]=="function"}class Jr{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(xw(t)){const r=this._getOrCreateGroup(i);for(const s of t)this._isHandle(s)&&r.push(s)}else this._isHandle(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&xw(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&!!t.remove}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(this._ensureGroupKey(t),i),i}_getGroup(t){return Lr(this._groups.get(this._ensureGroupKey(t)))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){t.forEach(i=>i.remove())}}function ose(e){return e&&e.release&&typeof e.release=="function"}function ase(e){return e&&e.acquire&&typeof e.acquire=="function"}class sa{constructor(t,i,r,s=1,l=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(l),this._initialSize=l,this._ctor)for(let f=0;f<l;f++)this._pool[f]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(sa.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):ase(i)&&i.acquire(...t),i}release(t){t&&!sa.test.disabled&&(this._releaseFunction?this._releaseFunction(t):ose(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}sa.test={disabled:!1};var nt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(nt||(nt={}));const g4=nt.USER+1;function Ss(e){switch(e){case"defaults":return nt.DEFAULTS;case"service":return nt.SERVICE;case"portal-item":return nt.PORTAL_ITEM;case"web-scene":return nt.WEB_SCENE;case"web-map":return nt.WEB_MAP;case"user":return nt.USER;default:return null}}function Yy(e){switch(e){case nt.DEFAULTS:return"defaults";case nt.SERVICE:return"service";case nt.PORTAL_ITEM:return"portal-item";case nt.WEB_SCENE:return"web-scene";case nt.WEB_MAP:return"web-map";case nt.USER:return"user"}return Lr(void 0)}function lse(e){return Yy(e)}class XO{constructor(t,i){this._observers=t,this._observer=i}remove(){rO(this._observers,this._observer)}}class QO{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=Ei.Dirty|(r.nonNullable?Ei.NonNullable:0)|(r.hasOwnProperty("value")?Ei.HasDefaultValue:0)|(r.get===void 0?Ei.DepTrackingInitialized:0)|(r.dependsOn===void 0?Ei.AutoTracked:0)}destroy(){if(this.flags&Ei.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Vt(this);const t=this.properties.store,i=this.propertyName,r=this.flags,s=t.get(i);if(r&Ei.Computing||~r&Ei.Dirty&&t.has(i))return s;this.flags|=Ei.Computing;const l=this.properties.host;let f;r&Ei.AutoTracked?f=Xl(this,this.metadata.get,l):(LO(l,this),f=this.metadata.get.call(l)),t.set(i,f,nt.COMPUTED);const d=t.get(i);return d===s?this.flags&=~Ei.Dirty:Vne(this.commit,this),this.flags&=~Ei.Computing,d}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ei.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new XO(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Ei.Overriden&&(this.flags|=Ei.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Ei.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class m4{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new m4;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,ve(r))}),i}get(t){return this._values.get(t)}originOf(){return nt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function Sw(e,t,i){return e!==void 0}function ek(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Ei.NonNullable)||(r.lifecycle,Yl.INITIALIZING,!1))}function use(e){return e&&typeof e.destroy=="function"}Pe.getLogger("esri.core.accessorSupport.Properties");class cse{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Yl.INITIALIZING,this.store=new m4,this._origin=nt.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const s in r){const l=new QO(this,s,r[s]);this.properties.set(s,l)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=Yl.CONSTRUCTING}constructed(){this.lifecycle=Yl.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&use(r)&&(r.destroy(),~i.flags&Ei.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==Yl.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();Vt(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&Ei.HasDefaultValue)return"defaults"}return Yy(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(Sw(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);Sw(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.properties.get(i);if(!Sw(s))return"";const l=new Set,f=Xl({onObservableAccessed:v=>l.add(v),onTrackingEnd:()=>{}},()=>{var v;return(v=s.metadata.get)==null?void 0:v.call(t)});let d=`${r}${t.declaredClass.split(".").pop()}.${i}: ${f}
`;if(l.size===0)return d;r+="  ";for(const v of l){if(!(v instanceof QO))continue;const _=v.properties.host,M=v.propertyName,T=Nr(_);d+=T?T.getDependsInfo(_,M,r):`${r}${M}: undefined
`}return d}setAtOrigin(t,i,r){const s=this.properties.get(t);if(Sw(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Ei.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Ei.Overriden&&(i.flags&=~Ei.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!ek(r,t,i,this))return;const s=r.metadata.cast;if(s){const l=this._cast(s,i),{valid:f,value:d}=l;if(v4.release(l),!f)return;i=d}r.flags|=Ei.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!ek(r,t,i,this))return;const s=r.metadata.cast;if(s){const f=this._cast(s,i),{valid:d,value:v}=f;if(v4.release(f),!d)return;i=v}const l=r.metadata.set;l?l.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Ss(t)}getDefaultOrigin(){return Yy(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Yl.INITIALIZING?this._origin:nt.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,l=t.propertyName;s.has(l,r)&&t4(i,s.get(l))&&~t.flags&Ei.Overriden&&r===s.originOf(l)||(t.invalidate(),s.set(l,i,r),t.commit(),FO(this.host,t))}_cast(t,i){const r=v4.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class hse{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const v4=new sa(hse);function pse(e){e.length=0}class as{constructor(t=50,i=50){this._pool=new sa(Array,void 0,pse,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return b4.acquire()}static release(t){return b4.release(t)}static prune(){b4.prune()}}const b4=new as(100);class tk extends sa{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Xre(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const Mw=[];function zf(e){Mw.push(e),Mw.length===1&&queueMicrotask(()=>{const t=Mw.slice();Mw.length=0;for(const i of t)i()})}class Xy{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){q(t)&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}var w4;(function(e){const t=(l,f,d,v)=>{let _=f,M=f;const T=d>>>1,A=l[_-1];for(;M<=T;){M=_<<1,M<d&&v(l[M-1],l[M])<0&&++M;const k=l[M-1];if(v(k,A)<=0)break;l[_-1]=k,_=M}l[_-1]=A},i=(l,f)=>l<f?-1:l>f?1:0;function r(l,f,d,v){f===void 0&&(f=0),d===void 0&&(d=l.length),v===void 0&&(v=i);for(let M=d>>>1;M>f;M--)t(l,M,d,v);const _=f+1;for(let M=d-1;M>f;M--){const T=l[f];l[f]=l[M],l[M]=T,t(l,_,M,v)}}function*s(l,f,d,v){f===void 0&&(f=0),d===void 0&&(d=l.length),v===void 0&&(v=i);for(let M=d>>>1;M>f;M--)t(l,M,d,v),yield;const _=f+1;for(let M=d-1;M>f;M--){const T=l[f];l[f]=l[M],l[M]=T,t(l,_,M,v),yield}}e.sort=r,e.iterableSort=s})(w4||(w4={}));const ik=w4,dse=1.5,fse=1.1;class yp{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new tO,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>rk(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,rk(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=Q5(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Q5(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=rne(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){ik.sort(this.data,0,this.length,t)}iterableSort(t){return ik.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const l=this.data[s];t.call(i,l,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=l,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,s=this.data;for(let l=0;l<r;++l)t.call(i,s[l],l,s)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}}function rk(e){e.data.length>dse*e.length&&(e.data.length=Math.floor(e.length*fse))}function yse(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const Qy=yse(globalThis),nk=new Set;function gse(e,t,i=!1){i&&nk.has(t)||(i&&nk.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function mse(e,t,i={}){if(Ie("esri-deprecation-warnings")){const{moduleName:r}=i;sk(e,`Property: ${(r?r+"::":"")+t}`,i)}}function sk(e,t,i={}){if(Ie("esri-deprecation-warnings")){const{replacement:r,version:s,see:l,warnOnce:f}=i;let d=t;r&&(d+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),s&&(d+=`
	\u2699\uFE0F Version: ${s}`),l&&(d+=`
	\u{1F517} See ${l} for more details.`),gse(e,d,f)}}function $w(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Iw(e,t,i){if(!$w(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const s of r)e.addEventListener(s,i);return{remove(){for(const s of r)e.removeEventListener(s,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function ok(e,t,i){if(!$w(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=Iw(e,t,s=>{r.remove(),i.call(e,s)});return{remove(){r.remove()}}}const vse={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function gp({key:e}){return vse[e]||e}function zi(e="Aborted"){return new fe("AbortError",e)}function fr(e,t="Aborted"){if(To(e))throw zi(t)}function Tw(e){return q(e)?"aborted"in e?e:e.signal:e}function To(e){const t=Tw(e);return q(t)&&t.aborted}function Gf(e){if(Ks(e))throw e}function _4(e){if(!Ks(e))throw e}function Eo(e,t){const i=Tw(e);if(!ae(i)){if(!i.aborted)return ok(i,"abort",()=>t());t()}}function x4(e,t){const i=Tw(e);if(!ae(i))return fr(i),ok(i,"abort",()=>t(zi()))}function ak(e,t){const i=Tw(t);return ae(i)?e:new Promise((r,s)=>{let l=Eo(t,()=>s(zi()));const f=()=>l=Er(l);e.then(f,f),e.then(r,s)})}function Ks(e){return(e==null?void 0:e.name)==="AbortError"}async function Ql(e){try{return await e}catch(t){if(!Ks(t))throw t;return}}function eu(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function Ms(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(f=>e[f]),s=await Ms(r),l={};return i.map((f,d)=>l[f]=s[d]),l}const t=e;return new Promise(i=>{const r=[];let s=t.length;s===0&&i(r),t.forEach(l=>{const f={promise:l||Promise.resolve(l)};r.push(f),f.promise.then(d=>{f.value=d}).catch(d=>{f.error=d}).then(()=>{--s,s===0&&i(r)})})})}async function lk(e){return(await Ms(e)).filter(t=>!!t.value).map(t=>t.value)}function Ew(e,t,i){const r=new AbortController;return Eo(i,()=>r.abort()),new Promise((s,l)=>{let f=setTimeout(()=>{f=0,s(t)},e);Eo(r,()=>{f&&(clearTimeout(f),l(zi()))})})}function tu(e){return e&&typeof e.then=="function"}function S4(e){return tu(e)?e:Promise.resolve(e)}function Cw(e,t=-1){let i,r,s,l,f=null;const d=(...v)=>{if(i){r=v,l&&l.reject(zi()),l=eu();const A=Lr(l.promise);if(f){const k=f;f=null,k.abort()}return A}if(s=l||eu(),l=null,t>0){const A=new AbortController;i=S4(e(...v,A.signal));const k=i;Ew(t).then(()=>{i===k&&(l?A.abort():f=A)})}else i=1,i=S4(e(...v));const _=()=>{const A=r;r=s=i=f=null,A!=null&&d(...A)},M=i,T=s;return M.then(_,_),M.then(T.resolve,T.reject),Lr(T.promise)};return d}function uk(){let e,t;const i=new Promise((s,l)=>{e=s,t=l}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,l)=>Qy.setTimeout(()=>r.reject(l),s),r.promise=i,r}async function ck(e){await Promise.resolve(),fr(e)}function Sr(e){return e}function bse(e){return e}function PTe(e){return bse(.001*e)}class wse{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class _se{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let M4=0;const eg={time:Sr(0),deltaTime:Sr(0),elapsedFrameTime:Sr(0),frameDuration:Sr(0)},$4=["prepare","preRender","render","postRender","update","finish"],I4=[],mp=new yp;class xse{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const Aw={frameTasks:mp,willDispatch:!1,clearFrameTasks:Sse,dispatch:dk,executeFrameTasks:Mse};function qf(e){const t=new _se(e);return I4.push(t),Aw.willDispatch||(Aw.willDispatch=!0,zf(dk)),t}function Uf(e){const t=new wse(e);return mp.push(t),Pw==null&&(M4=performance.now(),Pw=requestAnimationFrame(hk)),new xse(t)}let Pw=null;function Sse(e=!1){mp.forAll(t=>{t.removed=!0}),e&&pk()}function hk(){const e=performance.now();Pw=null,Pw=mp.length>0?requestAnimationFrame(hk):null,Aw.executeFrameTasks(e)}function Mse(e){const t=Sr(e-M4);M4=e;const i=1e3/60,r=Math.max(0,t-i);for(let s=0;s<$4.length;s++){const l=performance.now(),f=$4[s];mp.forAll(d=>{var v;d.paused||d.removed||(s===0&&d.ticks++,d.phases[f]&&(eg.time=e,eg.deltaTime=d.ticks===0?Sr(0):t,eg.elapsedFrameTime=Sr(performance.now()-e),eg.frameDuration=Sr(i-r),(v=d.phases[f])==null||v.call(d,eg)))}),$se[s].record(performance.now()-l)}pk(),Ise.record(performance.now()-e)}const Ow=new yp;function pk(){mp.forAll(e=>{e.removed&&Ow.push(e)}),mp.removeUnorderedMany(Ow.data,Ow.length),Ow.clear()}function dk(){for(;I4.length;){const e=Lr(I4.shift());e.isActive&&e.callback()}Aw.willDispatch=!1}function OTe(e=1,t){const i=uk(),r=()=>{To(t)?i.reject(zi()):e===0?i():(--e,zf(()=>r()))};return r(),i.promise}const $se=$4.map(e=>new Xy(e)),Ise=new Xy("total");function Tse(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Ese=0;function tg(){return++Ese}class kw{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let Bf=!1;const Rw=[];function fk(e,t){let i=new kw(l),r=null,s=!1;function l(){if(!i||s)return;if(Bf)return void mk(l);const d=r;i.clear(),Bf=!0,s=!0,r=Xl(i,e),s=!1,Bf=!1,t(r,d),vk()}function f(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Xl(i,e),s=!1,{remove:f}}function yk(e,t){let i=new kw(s),r=null;function s(){t(r,f)}function l(){i&&(i.destroy(),i=null),r=null}function f(){return i?(i.clear(),r=Xl(i,e),r):null}return f(),{remove:l}}function gk(e){let t=new kw(r),i=!1;function r(){t&&!i&&(Bf?mk(r):(t.clear(),Bf=!0,i=!0,Xl(t,e),i=!1,Bf=!1,vk()))}function s(){t&&(t.destroy(),t=null)}return i=!0,Xl(t,e),i=!1,{remove:s}}function mk(e){Rw.includes(e)||Rw.unshift(e)}function vk(){for(;Rw.length;)Rw.pop()()}var ig;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(ig||(ig={}));class rg{constructor(){this.uid=tg(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,l){return this.pool.acquire(ig.Untracked,t,i,r,s,l,t4)}static acquireTracked(t,i,r,s){return this.pool.acquire(ig.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===ig.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,s,l,f,d){this.uid=tg(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=l,this.path=f,this.equals=d}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=tg(),this.removed=!0}}rg.pool=new tk(rg);const Fw=new as,iu=new Set;let Lw;function Nw(e){iu.delete(e),iu.add(e),Lw||(Lw=qf(Pse))}function Cse(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Ase(e){for(const t of iu.values())t.target===e&&(t.removed=!0)}function Pse(){let e=10;for(;Lw&&e--;){Lw=null;const t=Ose(),i=Fw.acquire();for(const r of t){const s=r.uid;Cse(r),s===r.uid&&r.removed&&i.push(r)}for(const r of iu)r.removed&&(i.push(r),iu.delete(r));for(const r of i)rg.pool.release(r);Fw.release(i),Fw.release(t),T4.forEach(r=>r())}}function Ose(){const e=Fw.acquire();e.length=iu.size;let t=0;for(const i of iu)e[t]=i,++t;return iu.clear(),e}const T4=new Set;function kse(e){return T4.add(e),{remove(){T4.delete(e)}}}function Rse(e,t,i){let r=IO(e,t,i,(s,l,f)=>{let d,v,_=yk(()=>Hy(s,l),(M,T)=>{s.__accessor__.destroyed||d&&d.uid!==v?r.remove():(d||(d=rg.acquireUntracked(M,f,T,s,l),v=d.uid),Nw(d))});return{remove:TO(()=>{_.remove(),d&&(d.uid!==v||d.removed||(d.removed=!0,Nw(d)),d=null),r=_=null})}});return r}function Fse(e,t,i){const r=IO(e,t,i,(s,l,f)=>{let d=!1;return fk(()=>Hy(s,l),(v,_)=>{s.__accessor__.destroyed?r.remove():d||(d=!0,t4(_,v)||f.call(s,v,_,l,s),d=!1)})});return r}function Lse(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?Fse(e,t,i):Rse(e,t,i)}function Nse(e,t,i){let r,s,l=yk(e,(f,d)=>{r&&r.uid!==s?l.remove():(r||(r=rg.acquireTracked(f,t,d,i),s=r.uid),Nw(r))});return{remove:TO(()=>{l.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,Nw(r)),r=null),l=null})}}function jse(e,t,i){let r=!1;return fk(e,(s,l)=>{r||(r=!0,i(l,s)||t(s,l),r=!1)})}function Dse(e,t,i=!1,r=dne){return i?jse(e,t,r):Nse(e,t,r)}function bk(e){return Tse(iu,t=>t.oldValue===e)}var wk,_k;function Vse(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const vp=Symbol("Accessor-Handles"),E4=Symbol("Accessor-Initialized");class ot{constructor(...t){if(this[wk]=null,this[_k]=!1,this.constructor===ot)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new cse(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const l=this;class f extends l{constructor(...v){super(...v),this.inherited=null,s&&s.apply(this,v)}}Wy(f.prototype);for(const d in t){const v=t[d];f.prototype[d]=typeof v=="function"?function(..._){const M=this.inherited;let T;this.inherited=function(...A){if(l.prototype[d])return l.prototype[d].apply(this,A)};try{T=v.apply(this,_)}catch(A){throw this.inherited=M,A}return this.inherited=M,T}:t[d]}for(const d in i){const v=Vse(i[d]);x(v)(f.prototype,d)}return X(r)(f)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[E4]=!0}initialize(){}destroy(){this.destroyed||(this[vp]=oi(this[vp]),Ase(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[E4]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return dw(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return gw(this,t,i),this}watch(t,i,r){return Lse(this,t,i,r)}own(t){this.addHandles(t)}addHandles(t,i){let r=this[vp];ae(r)&&(r=this[vp]=new Jr),r.add(t,i)}removeHandles(t){const i=this[vp];ae(i)||i.remove(t)}hasHandles(t){const i=this[vp];return!!q(i)&&i.has(t)}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}wk=vp,_k=E4;class C4{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new C4;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,ve(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:nt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===nt.DEFAULTS){const s=this._values.get(t);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(t,new zse(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===nt.DEFAULTS?t:nt.USER}}class zse{constructor(t,i){this.value=t,this.origin=i}}function xk(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),nt.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),nt.DEFAULTS)})}function Gse(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&AO(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&AO(s,i))return!0;return!1}function qse(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Use(e,t,i,r,s){let l=h4(t[i],s);qse(l)&&(e[i]=!0);for(const f of Object.getOwnPropertyNames(t))l=h4(t[f],s),Gse(l,i,r)&&(e[f]=!0)}function Bse(e,t,i,r){const s=i.metadatas,l=p4(s[t],"any",r),f=l&&l.default;if(f===void 0)return;const d=typeof f=="function"?f.call(e,t,r):f;d!==void 0&&i.set(t,d)}const Sk={origin:"service"};function Mk(e,t,i=Sk){if(!t||typeof t!="object")return;const r=Nr(e),s=r.metadatas,l={};for(const f of Object.getOwnPropertyNames(t))Use(l,s,f,t,i);r.setDefaultOrigin(i.origin);for(const f of Object.getOwnPropertyNames(l)){const d=h4(s[f],i).read,v=d&&d.source;let _;_=v&&typeof v=="string"?Hy(t,v):t[f],d&&d.reader&&(_=d.reader.call(e,_,t,i)),_!==void 0&&r.set(f,_)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const f of Object.getOwnPropertyNames(s))l[f]||Bse(e,f,r,i)}r.setDefaultOrigin("user")}function Hse(e,t,i,r=Sk){var l;const s=je(te({},r),{messages:[]});i(s),(l=s.messages)==null||l.forEach(f=>{f.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(f):e.loadWarnings.push(f)})}function Wse(e,t,i,r,s){var f,d;const l={};return(d=(f=t.write)==null?void 0:f.writer)==null||d.call(e,r,l,i,s),l}function $k(e,t,i,r,s,l){if(!r||!r.write)return!1;const f=e.get(i);if(!s&&r.write.overridePolicy){const d=r.write.overridePolicy.call(e,f,i,l);d!==void 0&&(s=d)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((f===null&&!s.allowNull&&!s.writerEnsuresNonNull||f===void 0)&&s.isRequired){const d=new fe("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return d&&l&&l.messages?l.messages.push(d):d&&!l&&Pe.getLogger("esri.core.accessorSupport.write").error(d.name,d.message),!1}return!(f===void 0||f===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===nt.DEFAULTS)&&Jse(e,i,l,r,f)||!s.ignoreOrigin&&l&&l.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Ss(l.origin))}function Jse(e,t,i,r,s){const l=r.default;if(l===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof l=="function"){if(Array.isArray(s)){const f=l.call(e,t,i);return Tc(f,s)}return!1}return l===s}function Zse(e,t,i,r){const s=Nr(e),l=s.metadatas,f=KO(l[t],r);return!!f&&$k(e,s,t,f,i,r)}function Ik(e,t,i){var l,f;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return hw(t,e.toJSON(i));const r=Nr(e),s=r.metadatas;for(const d in s){const v=KO(s[d],i);if(!$k(e,r,d,v,void 0,i))continue;const _=e.get(d),M=Wse(e,v,v.write&&typeof v.write.target=="string"?v.write.target:d,_,i);Object.keys(M).length>0&&(t=hw(t,M),((f=(l=i==null?void 0:i.resources)==null?void 0:l.pendingOperations)==null?void 0:f.length)&&Promise.all(i.resources.pendingOperations).then(()=>hw(t,M)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:d,oldOrigin:lse(r.store.originOf(d)),newOrigin:i.origin}))}return t}const ng=e=>{let t=class extends e{constructor(...i){super(...i);const r=Lr(Nr(this)),s=r.store,l=new C4;r.store=l,xk(r,s,l)}read(i,r){Mk(this,i,r)}write(i={},r){return Ik(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Kse.call(this,i,r)}};return t=m([X("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Kse(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let Ee=class extends ng(ot){};Ee=m([X("esri.core.JSONSupport")],Ee);function Be(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(l,f)=>{const d=l.constructor.prototype;r.forEach(v=>{const _=OO(l,v,s);_.read&&typeof _.read=="object"||(_.read={}),_.read.reader=d[f],i&&(_.read.source=(_.read.source||[]).concat(i))})}}function Xe(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(l,f)=>{const d=l.constructor.prototype;for(const v of r){const _=OO(l,v,s);_.write&&typeof _.write=="object"||(_.write={}),i&&(_.write.target=i),_.write.writer=d[f]}}}var bp;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(bp||(bp={}));let E;const Q={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(E=2e3;E<=2045;E++)Q[E]=0;for(E=2056;E<=2065;E++)Q[E]=0;for(E=2067;E<=2135;E++)Q[E]=0;for(E=2137;E<=2154;E++)Q[E]=0;for(E=2161;E<=2170;E++)Q[E]=0;for(E=2172;E<=2193;E++)Q[E]=0;for(E=2195;E<=2198;E++)Q[E]=0;for(E=2200;E<=2203;E++)Q[E]=0;for(E=2205;E<=2217;E++)Q[E]=0;for(E=2222;E<=2224;E++)Q[E]=1;for(E=2225;E<=2250;E++)Q[E]=2;for(E=2251;E<=2253;E++)Q[E]=1;for(E=2257;E<=2264;E++)Q[E]=2;for(E=2274;E<=2279;E++)Q[E]=2;for(E=2280;E<=2282;E++)Q[E]=1;for(E=2283;E<=2289;E++)Q[E]=2;for(E=2290;E<=2292;E++)Q[E]=0;for(E=2308;E<=2313;E++)Q[E]=0;for(E=2315;E<=2491;E++)Q[E]=0;for(E=2494;E<=2866;E++)Q[E]=0;for(E=2867;E<=2869;E++)Q[E]=1;for(E=2870;E<=2888;E++)Q[E]=2;for(E=2891;E<=2895;E++)Q[E]=2;for(E=2896;E<=2898;E++)Q[E]=1;for(E=2902;E<=2908;E++)Q[E]=2;for(E=2915;E<=2920;E++)Q[E]=2;for(E=2921;E<=2923;E++)Q[E]=1;for(E=2924;E<=2930;E++)Q[E]=2;for(E=2931;E<=2962;E++)Q[E]=0;for(E=2964;E<=2968;E++)Q[E]=2;for(E=2969;E<=2973;E++)Q[E]=0;for(E=2975;E<=2991;E++)Q[E]=0;for(E=2995;E<=3051;E++)Q[E]=0;for(E=3054;E<=3079;E++)Q[E]=0;for(E=3081;E<=3088;E++)Q[E]=0;for(E=3092;E<=3101;E++)Q[E]=0;for(E=3106;E<=3138;E++)Q[E]=0;for(E=3146;E<=3151;E++)Q[E]=0;for(E=3153;E<=3166;E++)Q[E]=0;for(E=3168;E<=3172;E++)Q[E]=0;for(E=3174;E<=3203;E++)Q[E]=0;for(E=3294;E<=3358;E++)Q[E]=0;for(E=3367;E<=3403;E++)Q[E]=0;for(E=3408;E<=3416;E++)Q[E]=0;for(E=3417;E<=3438;E++)Q[E]=2;for(E=3441;E<=3446;E++)Q[E]=2;for(E=3447;E<=3450;E++)Q[E]=0;for(E=3451;E<=3459;E++)Q[E]=2;for(E=3460;E<=3478;E++)Q[E]=0;for(E=3554;E<=3559;E++)Q[E]=0;for(E=3560;E<=3570;E++)Q[E]=2;for(E=3571;E<=3581;E++)Q[E]=0;for(E=3594;E<=3597;E++)Q[E]=0;for(E=3601;E<=3604;E++)Q[E]=0;for(E=3637;E<=3639;E++)Q[E]=0;for(E=3665;E<=3667;E++)Q[E]=0;for(E=3693;E<=3695;E++)Q[E]=0;for(E=3701;E<=3727;E++)Q[E]=0;for(E=3728;E<=3739;E++)Q[E]=2;for(E=3740;E<=3751;E++)Q[E]=0;for(E=3753;E<=3760;E++)Q[E]=2;for(E=3761;E<=3773;E++)Q[E]=0;for(E=3775;E<=3777;E++)Q[E]=0;for(E=3779;E<=3781;E++)Q[E]=0;for(E=3783;E<=3785;E++)Q[E]=0;for(E=3788;E<=3791;E++)Q[E]=0;for(E=3797;E<=3802;E++)Q[E]=0;for(E=3814;E<=3816;E++)Q[E]=0;for(E=3825;E<=3829;E++)Q[E]=0;for(E=3832;E<=3841;E++)Q[E]=0;for(E=3844;E<=3852;E++)Q[E]=0;for(E=3873;E<=3885;E++)Q[E]=0;for(E=3890;E<=3893;E++)Q[E]=0;for(E=3907;E<=3912;E++)Q[E]=0;for(E=3942;E<=3950;E++)Q[E]=0;for(E=3968;E<=3970;E++)Q[E]=0;for(E=3973;E<=3976;E++)Q[E]=0;for(E=3986;E<=3989;E++)Q[E]=0;for(E=3994;E<=3997;E++)Q[E]=0;for(E=4048;E<=4051;E++)Q[E]=0;for(E=4056;E<=4063;E++)Q[E]=0;for(E=4093;E<=4096;E++)Q[E]=0;for(E=4390;E<=4398;E++)Q[E]=0;for(E=4399;E<=4413;E++)Q[E]=2;for(E=4418;E<=4433;E++)Q[E]=2;for(E=4455;E<=4457;E++)Q[E]=2;for(E=4484;E<=4489;E++)Q[E]=0;for(E=4491;E<=4554;E++)Q[E]=0;for(E=4568;E<=4589;E++)Q[E]=0;for(E=4652;E<=4656;E++)Q[E]=0;for(E=4766;E<=4800;E++)Q[E]=0;for(E=5014;E<=5016;E++)Q[E]=0;for(E=5069;E<=5072;E++)Q[E]=0;for(E=5105;E<=5130;E++)Q[E]=0;for(E=5173;E<=5188;E++)Q[E]=0;for(E=5253;E<=5259;E++)Q[E]=0;for(E=5269;E<=5275;E++)Q[E]=0;for(E=5292;E<=5311;E++)Q[E]=0;for(E=5329;E<=5331;E++)Q[E]=0;for(E=5343;E<=5349;E++)Q[E]=0;for(E=5355;E<=5357;E++)Q[E]=0;for(E=5387;E<=5389;E++)Q[E]=0;for(E=5459;E<=5463;E++)Q[E]=0;for(E=5479;E<=5482;E++)Q[E]=0;for(E=5518;E<=5520;E++)Q[E]=0;for(E=5530;E<=5539;E++)Q[E]=0;for(E=5550;E<=5552;E++)Q[E]=0;for(E=5562;E<=5583;E++)Q[E]=0;for(E=5623;E<=5625;E++)Q[E]=2;for(E=5631;E<=5639;E++)Q[E]=0;for(E=5649;E<=5653;E++)Q[E]=0;for(E=5663;E<=5680;E++)Q[E]=0;for(E=5682;E<=5685;E++)Q[E]=0;for(E=5875;E<=5877;E++)Q[E]=0;for(E=5896;E<=5899;E++)Q[E]=0;for(E=5921;E<=5940;E++)Q[E]=0;for(E=6050;E<=6125;E++)Q[E]=0;for(E=6244;E<=6275;E++)Q[E]=0;for(E=6328;E<=6348;E++)Q[E]=0;for(E=6350;E<=6356;E++)Q[E]=0;for(E=6366;E<=6372;E++)Q[E]=0;for(E=6381;E<=6387;E++)Q[E]=0;for(E=6393;E<=6404;E++)Q[E]=0;for(E=6480;E<=6483;E++)Q[E]=0;for(E=6511;E<=6514;E++)Q[E]=0;for(E=6579;E<=6581;E++)Q[E]=0;for(E=6619;E<=6624;E++)Q[E]=0;for(E=6625;E<=6627;E++)Q[E]=2;for(E=6628;E<=6632;E++)Q[E]=0;for(E=6634;E<=6637;E++)Q[E]=0;for(E=6669;E<=6692;E++)Q[E]=0;for(E=6707;E<=6709;E++)Q[E]=0;for(E=6720;E<=6723;E++)Q[E]=0;for(E=6732;E<=6738;E++)Q[E]=0;for(E=6931;E<=6933;E++)Q[E]=0;for(E=6956;E<=6959;E++)Q[E]=0;for(E=7005;E<=7007;E++)Q[E]=0;for(E=7057;E<=7070;E++)Q[E]=2;for(E=7074;E<=7082;E++)Q[E]=0;for(E=7109;E<=7118;E++)Q[E]=0;for(E=7119;E<=7127;E++)Q[E]=1;for(E=7374;E<=7376;E++)Q[E]=0;for(E=7528;E<=7586;E++)Q[E]=0;for(E=7587;E<=7645;E++)Q[E]=2;for(E=7692;E<=7696;E++)Q[E]=0;for(E=7755;E<=7787;E++)Q[E]=0;for(E=7791;E<=7795;E++)Q[E]=0;for(E=7799;E<=7801;E++)Q[E]=0;for(E=7803;E<=7805;E++)Q[E]=0;for(E=7825;E<=7831;E++)Q[E]=0;for(E=7845;E<=7859;E++)Q[E]=0;for(E=8013;E<=8032;E++)Q[E]=0;for(E=8065;E<=8068;E++)Q[E]=1;for(E=8518;E<=8529;E++)Q[E]=2;for(E=8533;E<=8536;E++)Q[E]=2;for(E=8538;E<=8540;E++)Q[E]=2;for(E=8677;E<=8679;E++)Q[E]=0;for(E=8836;E<=8840;E++)Q[E]=0;for(E=8857;E<=8859;E++)Q[E]=0;for(E=8908;E<=8910;E++)Q[E]=0;for(E=9154;E<=9159;E++)Q[E]=0;for(E=9205;E<=9218;E++)Q[E]=0;for(E=9271;E<=9273;E++)Q[E]=0;for(E=9295;E<=9297;E++)Q[E]=0;for(E=9356;E<=9360;E++)Q[E]=0;for(E=9404;E<=9407;E++)Q[E]=0;for(E=9476;E<=9482;E++)Q[E]=0;for(E=9487;E<=9494;E++)Q[E]=0;for(E=9697;E<=9699;E++)Q[E]=0;for(E=20002;E<=20032;E++)Q[E]=0;for(E=20062;E<=20092;E++)Q[E]=0;for(E=20135;E<=20138;E++)Q[E]=0;for(E=20248;E<=20258;E++)Q[E]=0;for(E=20348;E<=20358;E++)Q[E]=0;for(E=20436;E<=20440;E++)Q[E]=0;for(E=20822;E<=20824;E++)Q[E]=0;for(E=20904;E<=20932;E++)Q[E]=0;for(E=20934;E<=20936;E++)Q[E]=0;for(E=21004;E<=21032;E++)Q[E]=0;for(E=21035;E<=21037;E++)Q[E]=0;for(E=21095;E<=21097;E++)Q[E]=0;for(E=21148;E<=21150;E++)Q[E]=0;for(E=21207;E<=21264;E++)Q[E]=0;for(E=21307;E<=21364;E++)Q[E]=0;for(E=21413;E<=21423;E++)Q[E]=0;for(E=21453;E<=21463;E++)Q[E]=0;for(E=21473;E<=21483;E++)Q[E]=0;for(E=21780;E<=21782;E++)Q[E]=0;for(E=21891;E<=21894;E++)Q[E]=0;for(E=21896;E<=21899;E++)Q[E]=0;for(E=22171;E<=22177;E++)Q[E]=0;for(E=22181;E<=22187;E++)Q[E]=0;for(E=22191;E<=22197;E++)Q[E]=0;for(E=22234;E<=22236;E++)Q[E]=0;for(E=22521;E<=22525;E++)Q[E]=0;for(E=22991;E<=22994;E++)Q[E]=0;for(E=23028;E<=23038;E++)Q[E]=0;for(E=23830;E<=23853;E++)Q[E]=0;for(E=23866;E<=23872;E++)Q[E]=0;for(E=23877;E<=23884;E++)Q[E]=0;for(E=23886;E<=23894;E++)Q[E]=0;for(E=23946;E<=23948;E++)Q[E]=0;for(E=24311;E<=24313;E++)Q[E]=0;for(E=24342;E<=24347;E++)Q[E]=0;for(E=24370;E<=24374;E++)Q[E]=10;for(E=24375;E<=24381;E++)Q[E]=0;for(E=24718;E<=24721;E++)Q[E]=0;for(E=24817;E<=24821;E++)Q[E]=0;for(E=24877;E<=24882;E++)Q[E]=0;for(E=24891;E<=24893;E++)Q[E]=0;for(E=25391;E<=25395;E++)Q[E]=0;for(E=25828;E<=25838;E++)Q[E]=0;for(E=26191;E<=26195;E++)Q[E]=0;for(E=26391;E<=26393;E++)Q[E]=0;for(E=26701;E<=26722;E++)Q[E]=0;for(E=26729;E<=26799;E++)Q[E]=2;for(E=26801;E<=26803;E++)Q[E]=2;for(E=26811;E<=26813;E++)Q[E]=2;for(E=26847;E<=26870;E++)Q[E]=2;for(E=26891;E<=26899;E++)Q[E]=0;for(E=26901;E<=26923;E++)Q[E]=0;for(E=26929;E<=26946;E++)Q[E]=0;for(E=26948;E<=26998;E++)Q[E]=0;for(E=27037;E<=27040;E++)Q[E]=0;for(E=27205;E<=27232;E++)Q[E]=0;for(E=27258;E<=27260;E++)Q[E]=0;for(E=27391;E<=27398;E++)Q[E]=0;for(E=27561;E<=27564;E++)Q[E]=0;for(E=27571;E<=27574;E++)Q[E]=0;for(E=27581;E<=27584;E++)Q[E]=0;for(E=27591;E<=27594;E++)Q[E]=0;for(E=28191;E<=28193;E++)Q[E]=0;for(E=28348;E<=28358;E++)Q[E]=0;for(E=28402;E<=28432;E++)Q[E]=0;for(E=28462;E<=28492;E++)Q[E]=0;for(E=29118;E<=29122;E++)Q[E]=0;for(E=29168;E<=29172;E++)Q[E]=0;for(E=29177;E<=29185;E++)Q[E]=0;for(E=29187;E<=29195;E++)Q[E]=0;for(E=29900;E<=29903;E++)Q[E]=0;for(E=30161;E<=30179;E++)Q[E]=0;for(E=30491;E<=30494;E++)Q[E]=0;for(E=30729;E<=30732;E++)Q[E]=0;for(E=31251;E<=31259;E++)Q[E]=0;for(E=31265;E<=31268;E++)Q[E]=0;for(E=31275;E<=31279;E++)Q[E]=0;for(E=31281;E<=31297;E++)Q[E]=0;for(E=31461;E<=31469;E++)Q[E]=0;for(E=31491;E<=31495;E++)Q[E]=0;for(E=31917;E<=31922;E++)Q[E]=0;for(E=31965;E<=32e3;E++)Q[E]=0;for(E=32001;E<=32003;E++)Q[E]=2;for(E=32005;E<=32031;E++)Q[E]=2;for(E=32033;E<=32060;E++)Q[E]=2;for(E=32064;E<=32067;E++)Q[E]=2;for(E=32074;E<=32077;E++)Q[E]=2;for(E=32081;E<=32086;E++)Q[E]=0;for(E=32107;E<=32130;E++)Q[E]=0;for(E=32133;E<=32158;E++)Q[E]=0;for(E=32164;E<=32167;E++)Q[E]=2;for(E=32180;E<=32199;E++)Q[E]=0;for(E=32201;E<=32260;E++)Q[E]=0;for(E=32301;E<=32360;E++)Q[E]=0;for(E=32601;E<=32662;E++)Q[E]=0;for(E=32664;E<=32667;E++)Q[E]=2;for(E=32701;E<=32761;E++)Q[E]=0;for(E=53001;E<=53004;E++)Q[E]=0;for(E=53008;E<=53019;E++)Q[E]=0;for(E=53021;E<=53032;E++)Q[E]=0;for(E=53034;E<=53037;E++)Q[E]=0;for(E=53042;E<=53046;E++)Q[E]=0;for(E=53074;E<=53080;E++)Q[E]=0;for(E=54001;E<=54004;E++)Q[E]=0;for(E=54008;E<=54019;E++)Q[E]=0;for(E=54021;E<=54032;E++)Q[E]=0;for(E=54034;E<=54037;E++)Q[E]=0;for(E=54042;E<=54046;E++)Q[E]=0;for(E=54048;E<=54053;E++)Q[E]=0;for(E=54074;E<=54080;E++)Q[E]=0;for(E=54098;E<=54101;E++)Q[E]=0;for(E=102001;E<=102040;E++)Q[E]=0;for(E=102042;E<=102063;E++)Q[E]=0;for(E=102065;E<=102067;E++)Q[E]=0;for(E=102070;E<=102117;E++)Q[E]=0;for(E=102122;E<=102216;E++)Q[E]=0;for(E=102221;E<=102377;E++)Q[E]=0;for(E=102382;E<=102388;E++)Q[E]=0;for(E=102389;E<=102398;E++)Q[E]=2;for(E=102399;E<=102444;E++)Q[E]=0;for(E=102445;E<=102447;E++)Q[E]=2;for(E=102448;E<=102458;E++)Q[E]=0;for(E=102459;E<=102468;E++)Q[E]=2;for(E=102469;E<=102499;E++)Q[E]=0;for(E=102500;E<=102519;E++)Q[E]=1;for(E=102520;E<=102524;E++)Q[E]=0;for(E=102525;E<=102529;E++)Q[E]=2;for(E=102530;E<=102588;E++)Q[E]=0;for(E=102590;E<=102598;E++)Q[E]=0;for(E=102601;E<=102603;E++)Q[E]=0;for(E=102605;E<=102628;E++)Q[E]=0;for(E=102629;E<=102646;E++)Q[E]=2;for(E=102648;E<=102700;E++)Q[E]=2;for(E=102701;E<=102703;E++)Q[E]=0;for(E=102707;E<=102730;E++)Q[E]=2;for(E=102733;E<=102758;E++)Q[E]=2;for(E=102767;E<=102900;E++)Q[E]=0;for(E=102901;E<=102933;E++)Q[E]=2;for(E=102934;E<=102950;E++)Q[E]=13;for(E=102951;E<=102955;E++)Q[E]=0;for(E=102961;E<=102963;E++)Q[E]=0;for(E=102965;E<=102969;E++)Q[E]=0;for(E=102971;E<=102973;E++)Q[E]=0;for(E=102975;E<=102989;E++)Q[E]=0;for(E=102990;E<=102992;E++)Q[E]=1;for(E=102997;E<=103002;E++)Q[E]=0;for(E=103003;E<=103008;E++)Q[E]=2;for(E=103009;E<=103011;E++)Q[E]=0;for(E=103012;E<=103014;E++)Q[E]=2;for(E=103019;E<=103021;E++)Q[E]=0;for(E=103022;E<=103024;E++)Q[E]=2;for(E=103029;E<=103031;E++)Q[E]=0;for(E=103032;E<=103034;E++)Q[E]=2;for(E=103065;E<=103068;E++)Q[E]=0;for(E=103074;E<=103076;E++)Q[E]=0;for(E=103077;E<=103079;E++)Q[E]=1;for(E=103080;E<=103082;E++)Q[E]=0;for(E=103083;E<=103085;E++)Q[E]=2;for(E=103090;E<=103093;E++)Q[E]=0;for(E=103097;E<=103099;E++)Q[E]=0;for(E=103100;E<=103102;E++)Q[E]=2;for(E=103107;E<=103109;E++)Q[E]=0;for(E=103110;E<=103112;E++)Q[E]=2;for(E=103113;E<=103116;E++)Q[E]=0;for(E=103117;E<=103120;E++)Q[E]=2;for(E=103153;E<=103157;E++)Q[E]=0;for(E=103158;E<=103162;E++)Q[E]=2;for(E=103163;E<=103165;E++)Q[E]=0;for(E=103166;E<=103168;E++)Q[E]=1;for(E=103169;E<=103171;E++)Q[E]=2;for(E=103186;E<=103188;E++)Q[E]=0;for(E=103189;E<=103191;E++)Q[E]=2;for(E=103192;E<=103195;E++)Q[E]=0;for(E=103196;E<=103199;E++)Q[E]=2;for(E=103200;E<=103224;E++)Q[E]=0;for(E=103225;E<=103227;E++)Q[E]=1;for(E=103232;E<=103237;E++)Q[E]=0;for(E=103238;E<=103243;E++)Q[E]=2;for(E=103244;E<=103246;E++)Q[E]=0;for(E=103247;E<=103249;E++)Q[E]=2;for(E=103254;E<=103256;E++)Q[E]=0;for(E=103257;E<=103259;E++)Q[E]=2;for(E=103264;E<=103266;E++)Q[E]=0;for(E=103267;E<=103269;E++)Q[E]=2;for(E=103300;E<=103375;E++)Q[E]=0;for(E=103381;E<=103383;E++)Q[E]=0;for(E=103384;E<=103386;E++)Q[E]=1;for(E=103387;E<=103389;E++)Q[E]=0;for(E=103390;E<=103392;E++)Q[E]=2;for(E=103397;E<=103399;E++)Q[E]=0;for(E=103400;E<=103471;E++)Q[E]=2;for(E=103476;E<=103478;E++)Q[E]=0;for(E=103479;E<=103481;E++)Q[E]=2;for(E=103486;E<=103488;E++)Q[E]=0;for(E=103489;E<=103491;E++)Q[E]=2;for(E=103492;E<=103495;E++)Q[E]=0;for(E=103496;E<=103499;E++)Q[E]=2;for(E=103528;E<=103543;E++)Q[E]=0;for(E=103544;E<=103548;E++)Q[E]=2;for(E=103549;E<=103551;E++)Q[E]=0;for(E=103552;E<=103554;E++)Q[E]=1;for(E=103555;E<=103557;E++)Q[E]=2;for(E=103558;E<=103560;E++)Q[E]=0;for(E=103571;E<=103573;E++)Q[E]=0;for(E=103574;E<=103576;E++)Q[E]=2;for(E=103577;E<=103580;E++)Q[E]=0;for(E=103581;E<=103583;E++)Q[E]=2;for(E=103595;E<=103694;E++)Q[E]=0;for(E=103696;E<=103699;E++)Q[E]=0;for(E=103700;E<=103793;E++)Q[E]=2;for(E=103794;E<=103887;E++)Q[E]=0;for(E=103900;E<=103971;E++)Q[E]=2;const Yse={102113:!0,102100:!0,3857:!0,3785:!0},Xse={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},Tk='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',jw=[-20037508342788905e-9,20037508342788905e-9],Dw=[-20037508342787e-6,20037508342787e-6],Ek={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:jw,origin:Dw,dx:1e-5},102100:{wkTemplate:Tk,valid:jw,origin:Dw,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:jw,origin:Dw,dx:1e-5},3857:{wkTemplate:Tk,valid:jw,origin:Dw,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Xi(e,t){return e===t||!ae(e)&&!ae(t)&&(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Xa(e)&&Xa(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase())}function Ys(e){return Cr(e)&&e.wkid&&Ek[e.wkid]||null}function Vw(e){return!!Cr(e)&&(e.wkid?Q[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function Qse(e){return!(zw(e)||Gw(e))}function sg(e){return Cr(e)&&e.wkid===4326}function kTe(e){return Cr(e)&&e.wkid===bp.CGCS2000}function Xa(e){return Cr(e)&&e.wkid!=null&&Yse[e.wkid]===!0}function eoe(e){return Cr(e)&&e.wkid===32662}function A4(e){return e===bp.GCSMARS2000||e===bp.GCSMARS2000_SPHERE}function zw(e){return Cr(e)&&e.wkid!=null&&A4(e.wkid)}function P4(e){return e===bp.GCSMOON2000}function Gw(e){return Cr(e)&&e.wkid!=null&&P4(e.wkid)}function toe(e){return Cr(e)&&e.wkid!=null&&Xse[e.wkid]===!0}function Cr(e){return q(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const O4={wkid:4326,wkt:Ka(Ek[4326].wkTemplate,{Central_Meridian:"0.0"})},ioe={wkid:102100,latestWkid:3857},roe={wkid:32662};var Qa;let Pi=Qa=class extends Ee{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Qa.WebMercator;if(e.wkid===4326)return Qa.WGS84}const t=new Qa;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return sg(this)}get isWebMercator(){return Xa(this)}get isGeographic(){return Vw(this)}get isWrappable(){return toe(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Qa.WGS84)return Qa.WGS84;if(this===Qa.WebMercator)return Qa.WebMercator;const e=new Qa;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ve(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return Xi(this,e)}toJSON(e){return this.write(void 0,e)}};Pi.GCS_NAD_1927=null,Pi.WGS84=null,Pi.WebMercator=null,Pi.PlateCarree=null,m([x({readOnly:!0})],Pi.prototype,"isWGS84",null),m([x({readOnly:!0})],Pi.prototype,"isWebMercator",null),m([x({readOnly:!0})],Pi.prototype,"isGeographic",null),m([x({readOnly:!0})],Pi.prototype,"isWrappable",null),m([x({type:hi,json:{write:!0}})],Pi.prototype,"latestWkid",void 0),m([x({type:hi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Pi.prototype,"wkid",void 0),m([x({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Pi.prototype,"wkt",void 0),m([Xe("wkt"),Xe("web-scene","wkt")],Pi.prototype,"writeWkt",null),m([x({type:hi,json:{write:!0}})],Pi.prototype,"vcsWkid",void 0),m([x({type:hi,json:{write:!0}})],Pi.prototype,"latestVcsWkid",void 0),m([x()],Pi.prototype,"imageCoordinateSystem",void 0),Pi=Qa=m([X("esri.geometry.SpatialReference")],Pi),Pi.prototype.toJSON.isDefaultToJSON=!0,Pi.GCS_NAD_1927=new Pi({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Pi.WGS84=new Pi(O4),Pi.WebMercator=new Pi(ioe),Pi.PlateCarree=new Pi(roe),Object.freeze&&(Object.freeze(Pi.GCS_NAD_1927),Object.freeze(Pi.WGS84),Object.freeze(Pi.WebMercator));const At=Pi;let el=class extends Ee{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=At.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof At)return e;if(e!=null){const i=new At;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};m([x()],el.prototype,"type",void 0),m([x({readOnly:!0})],el.prototype,"cache",null),m([x({readOnly:!0})],el.prototype,"extent",null),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],el.prototype,"hasM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],el.prototype,"hasZ",void 0),m([x({type:At,json:{write:!0}})],el.prototype,"spatialReference",void 0),m([Be("spatialReference")],el.prototype,"readSpatialReference",null),el=m([X("esri.geometry.Geometry")],el);const Cc=el,noe=Object.prototype.toString;function soe(e){const t="__accessorMetadata__"in e?Ai(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return ooe.apply(this,i)}}function ooe(e,t,i,r){fw(e,t).cast=r}function aoe(e){return(t,i)=>{fw(t,e).cast=t[i]}}function ri(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&noe.call(e[0])==="[object Function]"?soe(e[0]):e.length===1&&typeof e[0]=="string"?aoe(e[0]):void 0}function loe(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}class k4{constructor(t,i,r,s){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Bi=new k4(6378137,1/298.257223563,3e5,.006694379990137799),ru=new k4(3396190,1/169.8944472236118,23e4),Ac=new k4(1737400,0,0),uoe=57.29577951308232,coe=.017453292519943;function Ck(e){return e*uoe}function Ak(e){return e*coe}function RTe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Bi.radius))}function R4(e){return e.wkid!=null||e.wkt!=null}const F4=[0,0];function qw(e,t,i,r,s){const l=e,f=s;if(f.spatialReference=i,"x"in l&&"x"in f)[f.x,f.y]=t(l.x,l.y,F4,r);else if("xmin"in l&&"xmin"in f)[f.xmin,f.ymin]=t(l.xmin,l.ymin,F4,r),[f.xmax,f.ymax]=t(l.xmax,l.ymax,F4,r);else if("paths"in l&&"paths"in f||"rings"in l&&"rings"in f){const d="paths"in l?l.paths:l.rings,v=[];let _;for(let M=0;M<d.length;M++){const T=d[M];_=[],v.push(_);for(let A=0;A<T.length;A++)_.push(t(T[A][0],T[A][1],[0,0],r)),T[A].length>2&&_[A].push(T[A][2]),T[A].length>3&&_[A].push(T[A][3])}"paths"in f?f.paths=v:f.rings=v}else if("points"in l&&"points"in f){const d=l.points,v=[];for(let _=0;_<d.length;_++)v[_]=t(d[_][0],d[_][1],[0,0],r),d[_].length>2&&v[_].push(d[_][2]),d[_].length>3&&v[_].push(d[_][3]);f.points=v}return s}function Hf(e,t){const i=e&&(R4(e)?e:e.spatialReference),r=t&&(R4(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Xi(r,i)||Xa(r)&&sg(i)||Xa(i)&&sg(r))}function Uw(e,t){if(ae(e))return null;const i=e.spatialReference,r=t&&(R4(t)?t:t.spatialReference);return Hf(i,r)?Xi(i,r)?ve(e):Xa(r)?qw(e,wp,At.WebMercator,!1,ve(e)):sg(r)?qw(e,Wf,At.WGS84,!1,ve(e)):null:null}function wp(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=Ak(t);return i[0]=Ak(e)*Bi.radius,i[1]=Bi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Wf(e,t,i=[0,0],r=!1){const s=Ck(e/Bi.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=Ck(Math.PI/2-2*Math.atan(Math.exp(-t/Bi.radius))),i}function nu(e,t=!1,i=ve(e)){return qw(e,wp,At.WebMercator,t,i)}function Jf(e,t=!1,i=ve(e)){return qw(e,Wf,At.WGS84,t,i)}var Bw;const og=[0,0];function Pk(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let ls=Bw=class extends Cc{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,s){let l;if(Array.isArray(e))l=e,s=t,e=l[0],t=l[1],i=l[2],r=l[3];else if(e&&typeof e=="object"){if(l=e,e=l.x!=null?l.x:l.longitude,t=l.y!=null?l.y:l.latitude,i=l.z,r=l.m,(s=l.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new At(s)),l.longitude!=null||l.latitude!=null){if(l.longitude==null)Pe.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(l.latitude==null)Pe.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!l.declaredClass&&s&&s.isWebMercator){const d=wp(l.longitude,l.latitude,og);e=d[0],t=d[1]}}}else Pk(i)?(s=i,i=null):Pk(r)&&(s=r,r=null);const f={x:e,y:t};return f.x==null&&f.y!=null?Pe.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):f.y==null&&f.x!=null&&Pe.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(f.spatialReference=s),i!=null&&(f.z=i),r!=null&&(f.m=r),f}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return Wf(t,i,og)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",wp(i,e,og)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return Wf(e,t,og)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",wp(e,t,og)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Bw;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Bw.copy(e,this),this}equals(e){if(ae(e))return!1;const{x:t,y:i,z:r,m:s,spatialReference:l}=this,{z:f,m:d}=e;let{x:v,y:_,spatialReference:M}=e;if(!l.equals(M))if(l.isWebMercator&&M.isWGS84)[v,_]=wp(v,_),M=l;else{if(!l.isWGS84||!M.isWebMercator)return!1;[v,_]=Wf(v,_),M=l}return t===v&&i===_&&r===f&&s===d&&l.wkid===M.wkid}offset(e,t,i){var r;return this.x+=e,this.y+=t,i!=null&&(this.z=((r=this.z)!=null?r:0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Ys(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let l;return t>r?(l=Math.ceil(Math.abs(t-r)/s),t-=l*s):t<i&&(l=Math.ceil(Math.abs(t-i)/s),t+=l*s),this._set("x",t),this}distance(e){return loe(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};m([x({readOnly:!0})],ls.prototype,"cache",null),m([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ls.prototype,"hasM",null),m([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ls.prototype,"hasZ",null),m([x({type:Number})],ls.prototype,"latitude",null),m([x({type:Number})],ls.prototype,"longitude",null),m([x({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ri(e=>isNaN(e)?e:Io(e))],ls.prototype,"x",void 0),m([Xe("x")],ls.prototype,"writeX",null),m([Be("x")],ls.prototype,"readX",null),m([x({type:Number,json:{write:!0}})],ls.prototype,"y",void 0),m([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ls.prototype,"z",void 0),m([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ls.prototype,"m",void 0),ls=Bw=m([X("esri.geometry.Point")],ls),ls.prototype.toJSON.isDefaultToJSON=!0;const dt=ls,L4=[0,0];function Hw(e,t){return!!q(t)&&us(e,t.x,t.y,t.z)}function FTe(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!Zf(e,i))return!1;return!0}function hoe(e,t){const{xmin:i,ymin:r,zmin:s,xmax:l,ymax:f,zmax:d}=t;return e.hasZ&&t.hasZ?us(e,i,r,s)&&us(e,i,f,s)&&us(e,l,f,s)&&us(e,l,r,s)&&us(e,i,r,d)&&us(e,i,f,d)&&us(e,l,f,d)&&us(e,l,r,d):us(e,i,r)&&us(e,i,f)&&us(e,l,f)&&us(e,l,r)}function Zf(e,t){return us(e,t[0],t[1])}function poe(e,t){return us(e,t[0],t[1],t[2])}function us(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function Ok(e,t){return L4[1]=t.y,L4[0]=t.x,doe(e,L4)}function doe(e,t){return kk(e.rings,t)}function kk(e,t){if(!e)return!1;if(foe(e))return Rk(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=Rk(i,e[r],t);return i}function foe(e){return!Array.isArray(e[0][0])}function Rk(e,t,i){const[r,s]=i;let l=e,f=0;for(let d=0,v=t.length;d<v;d++){f++,f===v&&(f=0);const[_,M]=t[d],[T,A]=t[f];(M<s&&A>=s||A<s&&M>=s)&&_+(s-M)/(A-M)*(T-_)<r&&(l=!l)}return l}function yoe(e,t){return Hw(e,t)}function goe(e,t){const i=e.hasZ&&t.hasZ;let r,s,l;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(l=t.zmin,e.zmax<l)return!1}else if(l=e.zmin,t.zmax<l)return!1}return!0}function moe(e,t){const{points:i,hasZ:r}=t,s=r?poe:Zf;for(const l of i)if(s(e,l))return!0;return!1}const _p=[0,0],xp=[0,0],Sp=[0,0],Mp=[0,0],voe=[_p,xp,Sp,Mp],Fk=[[Sp,_p],[_p,xp],[xp,Mp],[Mp,Sp]];function boe(e,t){return woe(e,t.rings)}function woe(e,t){_p[0]=e.xmin,_p[1]=e.ymax,xp[0]=e.xmax,xp[1]=e.ymax,Sp[0]=e.xmin,Sp[1]=e.ymin,Mp[0]=e.xmax,Mp[1]=e.ymin;for(const i of voe)if(kk(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Zf(e,r))return!0;for(let s=1;s<i.length;s++){const l=i[s];if(Zf(e,l)||Lk(r,l,Fk))return!0;r=l}}return!1}function _oe(e,t){_p[0]=e.xmin,_p[1]=e.ymax,xp[0]=e.xmax,xp[1]=e.ymax,Sp[0]=e.xmin,Sp[1]=e.ymin,Mp[0]=e.xmax,Mp[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(Zf(e,s))return!0;for(let l=1;l<r.length;l++){const f=r[l];if(Zf(e,f)||Lk(s,f,Fk))return!0;s=f}}return!1}const dn=[0,0];function xoe(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const l=i[s],f=i[s+1];for(let d=t+1;d<e.length;d++)for(let v=0;v<e[d].length-1;v++){const _=e[d][v],M=e[d][v+1];if(N4(l,f,_,M,dn)&&!(dn[0]===l[0]&&dn[1]===l[1]||dn[0]===_[0]&&dn[1]===_[1]||dn[0]===f[0]&&dn[1]===f[1]||dn[0]===M[0]&&dn[1]===M[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let l=r-1;s===0&&(l=r-2);const f=i[s],d=i[s+1];for(let v=s+2;v<l;v++){const _=i[v],M=i[v+1];if(N4(f,d,_,M,dn)&&!(dn[0]===f[0]&&dn[1]===f[1]||dn[0]===_[0]&&dn[1]===_[1]||dn[0]===d[0]&&dn[1]===d[1]||dn[0]===M[0]&&dn[1]===M[1]))return!0}}}return!1}function Lk(e,t,i){for(let r=0;r<i.length;r++)if(N4(e,t,i[r][0],i[r][1]))return!0;return!1}function N4(e,t,i,r,s){const[l,f]=e,[d,v]=t,[_,M]=i,[T,A]=r,k=T-_,F=l-_,D=d-l,z=A-M,H=f-M,J=v-f,Y=z*D-k*J;if(Y===0)return!1;const ie=(k*H-z*F)/Y,re=(D*H-J*F)/Y;return ie>=0&&ie<=1&&re>=0&&re<=1&&(s&&(s[0]=l+ie*(d-l),s[1]=f+ie*(v-f)),!0)}function Soe(e){switch(e){case"esriGeometryEnvelope":case"extent":return goe;case"esriGeometryMultipoint":case"multipoint":return moe;case"esriGeometryPoint":case"point":return yoe;case"esriGeometryPolygon":case"polygon":return boe;case"esriGeometryPolyline":case"polyline":return _oe}}var Co;function Moe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Pc(e,t,i){return t==null?i:i==null?t:e(t,i)}let Zr=Co=class extends Cc{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return Moe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?At.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s!=null?s:At.WGS84}}static fromBounds(e,t){return new Co({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Co({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new dt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Co;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Hf(t,i)&&(e=t.isWebMercator?nu(e):Jf(e,!0)),e.type==="point"?Hw(this,e):e.type==="extent"&&hoe(this,e)}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Hf(t,i)&&(e=t.isWebMercator?nu(e):Jf(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(ae(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!Xi(t,i)&&Hf(t,i)&&(e=t.isWebMercator?nu(e):Jf(e,!0)),Soe(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Pc(Math.min,this.zmin,e.zmin),this.zmax=Pc(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Pc(Math.min,this.mmin,e.mmin),this.mmax=Pc(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ae(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Pc(Math.max,this.zmin,e.zmin),this.zmax=Pc(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Pc(Math.max,this.mmin,e.mmin),this.mmax=Pc(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Ys(this.spatialReference)){var r;if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?Jf(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new At(Ka((r=t.isWGS84?e.altTemplate:null)!=null?r:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,l=this.xmax;return s>=i&&s<=r&&l>=i&&l<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const s=i!=null?i:Ys(r);if(s==null)return this;const l=this._getParts(s).map(v=>v.extent);if(l.length<2)return l[0]||this;if(l.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return l;let f=!0,d=!0;return l.forEach(v=>{v.hasZ||(f=!1),v.hasM||(d=!1)}),{rings:l.map(v=>{const _=[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]];if(f){const M=(v.zmax-v.zmin)/2;for(let T=0;T<_.length;T++)_[T].push(M)}if(d){const M=(v.mmax-v.mmin)/2;for(let T=0;T<_.length;T++)_[T].push(M)}return _}),hasZ:f,hasM:d,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:l,spatialReference:f}=this,d=this.width,v=this.xmin,_=this.xmax;let M;e=e||Ys(f);const[T,A]=e.valid;M=this._normalizeX(this.xmin,e);const k=M.x,F=M.frameId;M=this._normalizeX(this.xmax,e);const D=M.x,z=M.frameId,H=k===D&&d>0;if(d>2*A){const J=new Co(v<_?k:D,s,A,l,f),Y=new Co(T,s,v<_?D:k,l,f),ie=new Co(0,s,A,l,f),re=new Co(T,s,0,l,f),ee=[],le=[];J.contains(ie)&&ee.push(F),J.contains(re)&&le.push(F),Y.contains(ie)&&ee.push(z),Y.contains(re)&&le.push(z);for(let me=F+1;me<z;me++)ee.push(me),le.push(me);t.push({extent:J,frameIds:[F]},{extent:Y,frameIds:[z]},{extent:ie,frameIds:ee},{extent:re,frameIds:le})}else k>D||H?t.push({extent:new Co(k,s,A,l,f),frameIds:[F]},{extent:new Co(T,s,D,l,f),frameIds:[z]}):t.push({extent:new Co(k,s,D,l,f),frameIds:[F]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let l=0;l<t.length;l++)t[l].extent.set(s)}return t}_normalizeX(e,t){const[i,r]=t.valid,s=2*r;let l,f=0;return e>r?(l=Math.ceil(Math.abs(e-r)/s),e-=l*s,f=l):e<i&&(l=Math.ceil(Math.abs(e-i)/s),e+=l*s,f=-l),{x:e,frameId:f}}};m([x({readOnly:!0})],Zr.prototype,"cache",null),m([x({readOnly:!0})],Zr.prototype,"center",null),m([x({readOnly:!0})],Zr.prototype,"extent",null),m([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zr.prototype,"hasM",null),m([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zr.prototype,"hasZ",null),m([x({readOnly:!0})],Zr.prototype,"height",null),m([x({readOnly:!0})],Zr.prototype,"width",null),m([x({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Zr.prototype,"xmin",void 0),m([x({type:Number,json:{write:!0}})],Zr.prototype,"ymin",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zr.prototype,"mmin",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zr.prototype,"zmin",void 0),m([x({type:Number,json:{write:!0}})],Zr.prototype,"xmax",void 0),m([x({type:Number,json:{write:!0}})],Zr.prototype,"ymax",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zr.prototype,"mmax",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zr.prototype,"zmax",void 0),Zr=Co=m([X("esri.geometry.Extent")],Zr),Zr.prototype.toJSON.isDefaultToJSON=!0;const ai=Zr;function Kf(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var j4;function Nk(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function $oe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Oc=j4=class extends Cc{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):$oe(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new ai,i=this.hasZ,r=this.hasM,s=i?3:2,l=e[0],f=Nk(Math.min),d=Nk(Math.max);let v,_,M,T,[A,k]=l,[F,D]=l;for(let z=0,H=e.length;z<H;z++){const J=e[z],[Y,ie]=J;if(A=f(A,Y),k=f(k,ie),F=d(F,Y),D=d(D,ie),i&&J.length>2){const re=J[2];v=f(v,re),M=d(M,re)}if(r&&J.length>s){const re=J[s];_=f(_,re),T=d(T,re)}}return t.xmin=A,t.ymin=k,t.xmax=F,t.ymax=D,t.spatialReference=this.spatialReference,i?(t.zmin=v,t.zmax=M):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=_,t.mmax=T):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=ve(this.points)}addPoint(e){return Kf(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:ve(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new j4(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new dt(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new dt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Kf(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};m([x({readOnly:!0})],Oc.prototype,"cache",null),m([x()],Oc.prototype,"extent",null),m([x({type:[[Number]],json:{write:{isRequired:!0}}})],Oc.prototype,"points",void 0),m([Xe("points")],Oc.prototype,"writePoints",null),Oc=j4=m([X("esri.geometry.Multipoint")],Oc),Oc.prototype.toJSON.isDefaultToJSON=!0;const ag=Oc;function Yf(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice(0);if(e.type==="polyline")return e.paths.slice(0);if(e.type==="multipoint")return e.points.slice(0);if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,l=!1;return r.forEach(f=>{f.hasZ&&(s=!0),f.hasM&&(l=!0)}),r.map(f=>{const d=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(s&&f.hasZ){const v=.5*(f.zmax-f.zmin);for(let _=0;_<d.length;_++)d[_].push(v)}if(l&&f.hasM){const v=.5*(f.mmax-f.mmin);for(let _=0;_<d.length;_++)d[_].push(v)}return d})}return null}function D4(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function jk(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function Ioe(e,t,i,r){const[s,l]=t,[f,d]=i[r],[v,_]=i[r+1],M=v-f,T=_-d,A=M*M+T*T,k=(s-f)*M+(l-d)*T,F=Math.min(1,Math.max(0,k/A));return e[0]=f+M*F,e[1]=d+T*F,e}function LTe(e,t,i){const r=i.rings;let s,l,f=!1,d=1/0;for(let v=0;v<r.length;v++){const _=r[v];for(let M=0,T=_.length-1;M<_.length;T=M++)s=_[M],l=_[T],s[1]>t!=l[1]>t&&e<(l[0]-s[0])*(t-s[1])/(l[1]-s[1])+s[0]&&(f=!f),d=Math.min(d,Toe(e,t,s,l))}return d===0?0:(f?1:-1)*Math.sqrt(d)}function Toe(e,t,i,r){let s=i[0],l=i[1],f=r[0]-s,d=r[1]-l;if(f!==0||d!==0){const v=((e-s)*f+(t-l)*d)/(f*f+d*d);v>1?(s=r[0],l=r[1]):v>0&&(s+=f*v,l+=d*v)}return f=e-s,d=t-l,f*f+d*d}function Eoe(e,t){return jk(e,t,.5)}function NTe(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=D4(e[r],e[r+1]);return i}function jTe(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let s=0;s<i-1;++s){const l=D4(e[s],e[s+1]);if(t-r<l){const f=(t-r)/l;return jk(e[s],e[s+1],f)}r+=l}return e[i-1]}function Dk(e,t,i){const r=e.length;let s=0,l=0,f=0;for(let d=0;d<r;d++){const v=e[d],_=e[(d+1)%r];let M=2;s+=v[0]*_[1]-_[0]*v[1],v.length>2&&_.length>2&&i&&(l+=v[0]*_[2]-_[0]*v[2],M=3),v.length>M&&_.length>M&&t&&(f+=v[0]*_[M]-_[0]*v[M])}return s<=0&&l<=0&&f<=0}function Coe(e){const t=e.length;return t>2&&Tc(e[0],e[t-1])}function DTe(e){var t,i;if("rings"in e&&(Aoe(e),e.rings.length>0&&!Dk(e.rings[0],(t=e.hasM)!=null?t:!1,(i=e.hasZ)!=null?i:!1)))for(const r of e.rings)r.reverse()}function Aoe(e){if("rings"in e)for(const t of e.rings)Coe(t)||t.push(t[0].slice())}function VTe(e){return e.type!=="polygon"&&e.type!=="polyline"||Poe(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Poe(e,t){const i=Ys(t);if(!i)return;const r=i.valid[0],s=i.valid[1],l=s-r;for(const f of e){let d=1/0,v=-1/0;for(const M of f){const T=Ooe(M[0],r,s);d=Math.min(d,T),v=Math.max(v,T),M[0]=T}const _=v-d;l-_<_&&f.forEach(M=>{M[0]<0&&(M[0]+=l)})}}function Ooe(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function Vk(e){if(!e||e.length<3)return 0;let t=0;const i=e.length-1;for(let r=0;r<i;r++)t+=(e[r][0]-e[r+1][0])*(e[r][1]+e[r+1][1]);return t+=(e[i][0]-e[0][0])*(e[i][1]+e[0][1]),-.5*t}function koe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function zk(e){var t;return e?Gk(e.rings,(t=e.hasZ)!=null?t:!1):null}function Gk(e,t){if(!e||!e.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let l=0,f=e.length;l<f;l++){const d=Roe(e[l],t,s);d&&r.push(d)}if(r.sort((l,f)=>{let d=l[2]-f[2];return d===0&&t&&(d=l[4]-f[4]),d}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const l=e[0]&&e[0].length?Foe(e[0],t):null;if(!l)return null;i[0]=l[0],i[1]=l[1],t&&l.length>2&&(i[2]=l[2])}return i}function Roe(e,t,i){let r=0,s=0,l=0,f=0,d=0;const v=e.length?e[0][0]:0,_=e.length?e[0][1]:0,M=e.length&&t?e[0][2]:0;for(let A=0;A<e.length;A++){const k=e[A],F=e[(A+1)%e.length],[D,z,H]=k,J=D-v,Y=z-_,[ie,re,ee]=F,le=ie-v,me=re-_,we=J*me-le*Y;if(f+=we,r+=(J+le)*we,s+=(Y+me)*we,t&&k.length>2&&F.length>2){const _e=H-M,Me=ee-M,Se=J*Me-le*_e;l+=(_e+Me)*Se,d+=Se}D<i[0]&&(i[0]=D),D>i[1]&&(i[1]=D),z<i[2]&&(i[2]=z),z>i[3]&&(i[3]=z),t&&(H<i[4]&&(i[4]=H),H>i[5]&&(i[5]=H))}if(f>0&&(f*=-1),d>0&&(d*=-1),!f)return null;f*=.5,d*=.5;const T=[r/(6*f)+v,s/(6*f)+_,f];return t&&(i[4]===i[5]||d===0?(T[3]=(i[4]+i[5])/2,T[4]=0):(T[3]=l/(6*d)+M,T[4]=d)),T}function Foe(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,l=0,f=0,d=0;for(let v=0,_=e.length;v<_-1;v++){const M=e[v],T=e[v+1];if(M&&T){i[0]=M[0],i[1]=M[1],r[0]=T[0],r[1]=T[1],t&&M.length>2&&T.length>2&&(i[2]=M[2],r[2]=T[2]);const A=D4(i,r);if(A){s+=A;const k=Eoe(M,T);l+=A*k[0],f+=A*k[1],t&&k.length>2&&(d+=A*k[2])}}}return s>0?t?[l/s,f/s,d/s]:[l/s,f/s]:e.length?e[0]:null}const Loe=1e-6;function zTe(e){if(!e||!e.rings)return null;const{rings:t}=e;let i=0;for(let l=0;l<t.length;l++)i+=Vk(t[l]);if(i<Loe)return Gk(t,!1);const r=[0,0],s=t[0][0];for(let l=0;l<t.length;l++)joe(r,s,t[l]);return r[0]*=1/i,r[1]*=1/i,r[0]+=s[0],r[1]+=s[1],r}const Noe=1/3;function joe(e,t,i){if(!e||!i||i.length<3)return null;const r=i[0],s=[0,0],l=[i[1][0]-r[0],i[1][1]-r[1]];let f;for(let _=2;_<i.length;_++)s[0]=i[_][0]-r[0],s[1]=i[_][1]-r[1],f=.5*Noe*(s[0]*l[1]-s[1]*l[0]),e[0]+=f*(l[0]+s[0]),e[1]+=f*(l[1]+s[1]),l[0]=s[0],l[1]=s[1];const d=Vk(i),v=[r[0],r[1]];return v[0]-=t[0],v[1]-=t[1],v[0]*=d,v[1]*=d,e[0]+=v[0],e[1]+=v[1],e}function qk(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Uk(e){return e.points!==void 0}function Bk(e){return e.x!==void 0&&e.y!==void 0}function Hk(e){return e.paths!==void 0}function Wk(e){return e.rings!==void 0}function Jk(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const kc=Jk(Math.min),Rc=Jk(Math.max);function GTe(e,t){return Hk(t)?Fc(e,t.paths,!1,!1):Wk(t)?Fc(e,t.rings,!1,!1):Uk(t)?V4(e,t.points,!1,!1,!1,!1):qk(t)?Zk(e,t):(Bk(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function qTe(e,t){return Hk(t)?Fc(e,t.paths,!0,!1):Wk(t)?Fc(e,t.rings,!0,!1):Uk(t)?V4(e,t.points,!0,!1,!0,!1):qk(t)?Zk(e,t,!0,!1,!0,!1):(Bk(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Fc(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let l,f,d,v,[_,M]=t[0][0],[T,A]=t[0][0];for(let k=0;k<t.length;k++){const F=t[k];for(let D=0;D<F.length;D++){const z=F[D],[H,J]=z;if(_=kc(_,H),M=kc(M,J),T=Rc(T,H),A=Rc(A,J),i&&z.length>2){const Y=z[2];l=kc(l,Y),f=Rc(f,Y)}if(r&&z.length>s){const Y=z[s];d=kc(l,Y),v=Rc(f,Y)}}}return i?r?(e[0]=_,e[1]=M,e[2]=l,e[3]=d,e[4]=T,e[5]=A,e[6]=f,e[7]=v,e.length=8,e):(e[0]=_,e[1]=M,e[2]=l,e[3]=T,e[4]=A,e[5]=f,e.length=6,e):r?(e[0]=_,e[1]=M,e[2]=d,e[3]=T,e[4]=A,e[5]=v,e.length=6,e):(e[0]=_,e[1]=M,e[2]=T,e[3]=A,e.length=4,e)}function Zk(e,t,i,r,s,l){const f=t.xmin,d=t.xmax,v=t.ymin,_=t.ymax;let M=t.zmin,T=t.zmax,A=t.mmin,k=t.mmax;return s?(M=M||0,T=T||0,l?(A=A||0,k=k||0,e[0]=f,e[1]=v,e[2]=M,e[3]=A,e[4]=d,e[5]=_,e[6]=T,e[7]=k,e):(e[0]=f,e[1]=v,e[2]=M,e[3]=d,e[4]=_,e[5]=T,e)):l?(A=A||0,k=k||0,e[0]=f,e[1]=v,e[2]=A,e[3]=d,e[4]=_,e[5]=k,e):(e[0]=f,e[1]=v,e[2]=d,e[3]=_,e)}function V4(e,t,i,r,s,l){const f=i?3:2,d=r&&l,v=i&&s;if(!t.length||!t[0].length)return null;let _,M,T,A,[k,F]=t[0],[D,z]=t[0];for(let H=0;H<t.length;H++){const J=t[H],[Y,ie]=J;if(k=kc(k,Y),F=kc(F,ie),D=Rc(D,Y),z=Rc(z,ie),v&&J.length>2){const re=J[2];_=kc(_,re),M=Rc(M,re)}if(d&&J.length>f){const re=J[f];T=kc(_,re),A=Rc(M,re)}}return s?(_=_||0,M=M||0,l?(T=T||0,A=A||0,e[0]=k,e[1]=F,e[2]=_,e[3]=T,e[4]=D,e[5]=z,e[6]=M,e[7]=A,e):(e[0]=k,e[1]=F,e[2]=_,e[3]=D,e[4]=z,e[5]=M,e)):l?(T=T||0,A=A||0,e[0]=k,e[1]=F,e[2]=T,e[3]=D,e[4]=z,e[5]=A,e):(e[0]=k,e[1]=F,e[2]=D,e[3]=z,e)}function Doe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Voe(e){return e.points!==void 0}function zoe(e){return e.x!==void 0&&e.y!==void 0}function Goe(e){return e.paths!==void 0}function qoe(e){return e.rings!==void 0}const z4=[];function Kk(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function Yk(e,t,i,r,s,l){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:l}}function Xk(e,t,i,r,s,l){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:l}}function Qk(e,t,i,r,s,l,f,d){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:l,zmax:f,mmax:d}}function G4(e,t=!1,i=!1){return t?i?Qk(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Yk(e[0],e[1],e[2],e[3],e[4],e[5]):i?Xk(e[0],e[1],e[2],e[3],e[4],e[5]):Kk(e[0],e[1],e[2],e[3])}function q4(e){return e?Doe(e)?e:zoe(e)?Boe(e):qoe(e)?U4(e):Goe(e)?eR(e):Voe(e)?Uoe(e):null:null}function Uoe(e){const{hasZ:t,hasM:i,points:r}=e;return G4(V4(z4,r,t!=null?t:!1,i!=null?i:!1),t,i)}function Boe(e){const{x:t,y:i,z:r,m:s}=e,l=s!=null;return r!=null?l?Qk(t,i,r,s,t,i,r,s):Yk(t,i,r,t,i,r):l?Xk(t,i,s,t,i,s):Kk(t,i,t,i)}function U4(e){const{hasZ:t,hasM:i,rings:r}=e,s=Fc(z4,r,t!=null?t:!1,i!=null?i:!1);return s?G4(s,t,i):null}function eR(e){const{hasZ:t,hasM:i,paths:r}=e,s=Fc(z4,r,t!=null?t:!1,i!=null?i:!1);return s?G4(s,t,i):null}var Ww;function tR(e){return!Array.isArray(e[0])}let tl=Ww=class extends Cc{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,s=!1;for(const f of t)f.hasZ&&(r=!0),f.hasM&&(s=!0);const l={rings:t.map(f=>{const d=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(r&&f.hasZ){const v=f.zmin+.5*(f.zmax-f.zmin);for(let _=0;_<d.length;_++)d[_].push(v)}if(s&&f.hasM){const v=f.mmin+.5*(f.mmax-f.mmin);for(let _=0;_<d.length;_++)d[_].push(v)}return d}),spatialReference:i};return r&&(l.hasZ=!0),s&&(l.hasM=!0),new Ww(l)}normalizeCtorArgs(e,t){let i,r,s=null,l=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||At.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),l=s[0]&&s[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=l.length>3):i===void 0?i=r?l.length>3:l.length>2:r===void 0&&(r=i?l.length>3:l.length>2)),{rings:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=zk(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new dt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=U4(this);if(!t)return null;const i=new ai(t);return i.spatialReference=e,i}get isSelfIntersecting(){return xoe(this.rings)}writeRings(e,t){t.rings=ve(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(tR(e)){const r=[];for(let s=0,l=e.length;s<l;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Ww;return e.spatialReference=this.spatialReference,e.rings=ve(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(q(t)!==q(i)||q(t)&&q(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,l,f,d],[v,_,M,T])=>s===v&&l===_&&(f==null&&M==null||f===M)&&(d==null&&T==null||d===T);for(let s=0;s<this.rings.length;s++){const l=this.rings[s],f=e.rings[s];if(!Tc(l,f,r))return!1}return!0}contains(e){if(!e)return!1;const t=Uw(e,this.spatialReference);return Ok(this,q(t)?t:e)}isClockwise(e){let t;return t=tR(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,Dk(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new dt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new dt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new dt(i[0],i[1],i[2],i[3],this.spatialReference):new dt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Kf(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new dt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new dt(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Kf(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([x({readOnly:!0})],tl.prototype,"cache",null),m([x({readOnly:!0})],tl.prototype,"centroid",null),m([x({readOnly:!0})],tl.prototype,"extent",null),m([x({readOnly:!0})],tl.prototype,"isSelfIntersecting",null),m([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],tl.prototype,"rings",void 0),m([Xe("rings")],tl.prototype,"writeRings",null),tl=Ww=m([X("esri.geometry.Polygon")],tl),tl.prototype.toJSON.isDefaultToJSON=!0;const Dn=tl;var B4;function Hoe(e){return!Array.isArray(e[0])}let Lc=B4=class extends Cc{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,s=null,l=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||At.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),l=s[0]&&s[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=!1):i===void 0?i=!r&&l.length>3:r===void 0&&(r=!i&&l.length>3)),{paths:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=eR(this);if(!t)return null;const i=new ai(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=ve(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Hoe(e)){const r=[];for(let s=0,l=e.length;s<l;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new B4;return e.spatialReference=this.spatialReference,e.paths=ve(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new dt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new dt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new dt(i[0],i[1],i[2],i[3],this.spatialReference):new dt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Kf(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new dt(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new dt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Kf(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([x({readOnly:!0})],Lc.prototype,"cache",null),m([x({readOnly:!0})],Lc.prototype,"extent",null),m([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],Lc.prototype,"paths",void 0),m([Xe("paths")],Lc.prototype,"writePaths",null),Lc=B4=m([X("esri.geometry.Polyline")],Lc),Lc.prototype.toJSON.isDefaultToJSON=!0;const Kr=Lc;class bt{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,l)=>{const f=this.toJSON(r);f!==void 0&&jn(l,f,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function In(){return function(e,t){return new bt(e,te({ignoreUnknown:!0},t))}}const Jw=In()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Zw=In()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function lg(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Kw(e){return e.points!==void 0}function Yw(e){return e.x!==void 0&&e.y!==void 0}function ug(e){return e.paths!==void 0}function su(e){return e.rings!==void 0}function fn(e){return ae(e)?null:e instanceof Cc?e:Yw(e)?dt.fromJSON(e):ug(e)?Kr.fromJSON(e):su(e)?Dn.fromJSON(e):Kw(e)?ag.fromJSON(e):lg(e)?ai.fromJSON(e):null}function ou(e){return e?Yw(e)?"esriGeometryPoint":ug(e)?"esriGeometryPolyline":su(e)?"esriGeometryPolygon":lg(e)?"esriGeometryEnvelope":Kw(e)?"esriGeometryMultipoint":null:null}const Woe={esriGeometryPoint:dt,esriGeometryPolyline:Kr,esriGeometryPolygon:Dn,esriGeometryEnvelope:ai,esriGeometryMultipoint:ag};function Joe(e){return e&&Woe[e]||null}const au={base:Cc,key:"type",typeMap:{extent:ai,multipoint:ag,point:dt,polyline:Kr,polygon:Dn}};Ya(au);const yr=e=>{let t=class extends e{clone(){var v;const i=ss(Nr(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,l={},f=new Map;for(const _ in r){const M=r[_],T=s==null?void 0:s.originOf(_),A=M.clonable;if(M.readOnly||A===!1||T!==nt.USER&&T!==nt.DEFAULTS&&T!==nt.WEB_MAP&&T!==nt.WEB_SCENE)continue;const k=this[_];let F=null;F=typeof A=="function"?A(k):A==="reference"?k:e4(k),k!=null&&F==null||(T===nt.DEFAULTS?f.set(_,F):l[_]=F)}const d=new(Object.getPrototypeOf(this)).constructor(l);if(f.size){const _=(v=Nr(d))==null?void 0:v.store;if(_)for(const[M,T]of f)_.set(M,T,nt.DEFAULTS)}return d}};return t=m([X("esri.core.Clonable")],t),t};let iR=class extends yr(ot){};iR=m([X("esri.core.Clonable")],iR);class Xf{constructor(){this._emitter=new Xf.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,l){const f=this._listenersMap&&this._listenersMap.get(s);if(!f)return!1;const d=this._target||this;return[...f].forEach(v=>{v.call(d,l)}),f.length>0}on(s,l){if(Array.isArray(s)){const d=s.map(v=>this.on(v,l));return By(d)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const f=this._listenersMap.get(s)||[];return f.push(l),this._listenersMap.set(s,f),{remove:()=>{const d=this._listenersMap&&this._listenersMap.get(s)||[],v=d.indexOf(l);v>=0&&d.splice(v,1)}}}once(s,l){const f=this.on(s,d=>{f.remove(),l.call(null,d)});return f}hasEventListener(s){const l=this._listenersMap&&this._listenersMap.get(s);return l!=null&&l.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(l,f){return this._emitter.emit(l,f)}on(l,f){return this._emitter.on(l,f)}once(l,f){return this._emitter.once(l,f)}hasEventListener(l){return this._emitter.hasEventListener(l)}};return s=m([X("esri.core.Evented")],s),s};let i=class extends ot{constructor(){super(...arguments),this._emitter=new Xf.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=m([X("esri.core.Evented")],i),e.EventedAccessor=i})(Xf||(Xf={}));const yn=Xf;var Mi;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Mi||(Mi={}));function H4(e){return(t,i)=>{t[i]=e}}class W4{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new XO(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var lu;class Zoe{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Ao=new sa(Zoe,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Koe=()=>{};function J4(e){return e?e instanceof $p?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Z4(e){if(e&&e.length)return e[0]}function Yoe(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let l=0;for(;l<s&&e[i+l]===t[r+l];)l++;return l}function rR(e,t,i,r){t&&t.forEach((s,l,f)=>{e.push(s),rR(e,i.call(r,s,l,f),i,r)})}const Nc=new Set,jc=new Set,Dc=new Set,K4=new Map;let Xoe=0,$p=lu=class extends yn.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new W4,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Xoe++})}static isCollection(e){return e!=null&&e instanceof lu}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof lu?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Vt(this._observable),this._items}set items(e){this._emitBeforeChanges(Mi.ADD)||(this._splice(0,this.length,J4(e)),this._emitAfterChanges(Mi.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Koe,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Vt(this._observable),this._emitBeforeChanges(Mi.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Mi.ADD),this}addMany(e,t=this._items.length){if(Vt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Mi.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,J4(e)),this._emitAfterChanges(Mi.ADD),this}at(e){if(Vt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Mi.REMOVE),e}clone(){return Vt(this._observable),this._createNewInstance({items:this._items.map(ve)})}concat(...e){Vt(this._observable);const t=e.map(J4);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return;const i=Lr(this._splice(0,this.length)),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(Mi.REMOVE)}every(e,t){return Vt(this._observable),this._items.every(e,t)}filter(e,t){let i;return Vt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Vt(this._observable),this._items.find(e,t)}findIndex(e,t){return Vt(this._observable),this._items.findIndex(e,t)}flatten(e,t){Vt(this._observable);const i=[];return rR(i,this,e,t),new lu(i)}forEach(e,t){return Vt(this._observable),this._items.forEach(e,t)}getItemAt(e){return Vt(this._observable),this._items[e]}getNextIndex(e){Vt(this._observable);const t=this.length;return(e=e!=null?e:t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Vt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Vt(this._observable),this._items.indexOf(e,t)}join(e=","){return Vt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Vt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Vt(this._observable);const i=this._items.map(e,t);return new lu({items:i})}reorder(e,t=this.length-1){Vt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Mi.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Mi.MOVE)}return e}}pop(){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return;const e=Z4(this._splice(this.length-1,1));return this._emitAfterChanges(Mi.REMOVE),e}push(...e){return Vt(this._observable),this._emitBeforeChanges(Mi.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Mi.ADD)),this.length}reduce(e,t){Vt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Vt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Vt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Vt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Mi.REMOVE))return;const t=Z4(this._splice(e,1));return this._emitAfterChanges(Mi.REMOVE),t}removeMany(e){if(Vt(this._observable),!e||!e.length||this._emitBeforeChanges(Mi.REMOVE))return[];const t=e instanceof lu?e.toArray():e,i=this._items,r=[],s=t.length;for(let l=0;l<s;l++){const f=t[l],d=i.indexOf(f);if(d>-1){const v=1+Yoe(t,i,l+1,d+1),_=this._splice(d,v);_&&_.length>0&&r.push.apply(r,_),l+=v-1}}return this._emitAfterChanges(Mi.REMOVE),r}reverse(){if(Vt(this._observable),this._emitBeforeChanges(Mi.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Mi.MOVE),this}shift(){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return;const e=Z4(this._splice(0,1));return this._emitAfterChanges(Mi.REMOVE),e}slice(e=0,t=this.length){return Vt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Vt(this._observable),this._items.some(e,t)}sort(e){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.MOVE))return this;const t=Lr(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Mi.MOVE),this}splice(e,t,...i){Vt(this._observable);const r=(t?Mi.REMOVE:0)|(i.length?Mi.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return Vt(this._observable),this._items.slice()}toJSON(){return Vt(this._observable),this.toArray()}toLocaleString(){return Vt(this._observable),this._items.toLocaleString()}toString(){return Vt(this._observable),this._items.toString()}unshift(...e){return Vt(this._observable),!e.length||this._emitBeforeChanges(Mi.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Mi.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let l,f;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=qf(()=>this._dispatchChange())),t){if(f=r.splice(e,t),this.hasEventListener("before-remove")){const d=Ao.acquire();d.target=this,d.cancellable=!0;for(let v=0,_=f.length;v<_;v++)l=f[v],d.reset(l),this.emit("before-remove",d),d.defaultPrevented&&(f.splice(v,1),r.splice(e,0,l),e+=1,v-=1,_-=1);Ao.release(d)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const d=Ao.acquire();d.target=this,d.cancellable=!1;const v=f.length;for(let _=0;_<v;_++)d.reset(f[_]),this.emit("after-remove",d);Ao.release(d)}}if(i&&i.length){if(s){const M=[];for(const T of i){const A=s.ensureType(T);A==null&&T!=null||M.push(A)}i=M}const d=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),_=e===this.length;if(d||v){const M=Ao.acquire();M.target=this,M.cancellable=!0;const T=Ao.acquire();T.target=this,T.cancellable=!1;for(const A of i)d?(M.reset(A),this.emit("before-add",M),M.defaultPrevented||(_?r.push(A):r.splice(e++,0,A),this._set("length",r.length),v&&(T.reset(A),this.emit("after-add",T)))):(_?r.push(A):r.splice(e++,0,A),this._set("length",r.length),T.reset(A),this.emit("after-add",T));Ao.release(T),Ao.release(M)}else{if(_)for(const M of i)r.push(M);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||f&&f.length)&&this._notifyChangeEvent(i,f),f}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Ao.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Ao.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Ao.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Ao.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Nc.clear(),jc.clear(),Dc.clear();for(const{added:v,removed:_}of i){if(v)if(Dc.size===0&&jc.size===0)for(const M of v)Nc.add(M);else for(const M of v)jc.has(M)?(Dc.add(M),jc.delete(M)):Dc.has(M)||Nc.add(M);if(_)if(Dc.size===0&&Nc.size===0)for(const M of _)jc.add(M);else for(const M of _)Nc.has(M)?Nc.delete(M):(Dc.delete(M),jc.add(M))}const r=as.acquire();Nc.forEach(v=>{r.push(v)});const s=as.acquire();jc.forEach(v=>{s.push(v)});const l=this._items,f=t.items,d=as.acquire();if(Dc.forEach(v=>{f.indexOf(v)!==l.indexOf(v)&&d.push(v)}),t.listeners&&(r.length||s.length||d.length)){const v={target:this,added:r,removed:s,moved:d},_=t.listeners.length;for(let M=0;M<_;M++){const T=t.listeners[M];T.removed||T.callback.call(this,v)}}as.release(r),as.release(s),as.release(d)}Nc.clear(),jc.clear(),Dc.clear()}};$p.ofType=e=>{if(!e)return lu;if(K4.has(e))return K4.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends lu{};return m([H4({Type:e,ensureType:typeof e=="function"?Ai(e):Ya(e)})],i.prototype,"itemType",void 0),i=m([X(`esri.core.Collection<${t}>`)],i),K4.set(e,i),i},m([x()],$p.prototype,"length",void 0),m([x()],$p.prototype,"items",null),$p=lu=m([X("esri.core.Collection")],$p);const gt=$p;var Qf;function Qoe(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(i!=null&&+t<i||r!=null&&+t>r)return Qf.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Qf.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Qf||(Qf={}));const eae=Pe.getLogger("esri.support.arcadeOnDemand");let Y4;function il(){return Y4||(Y4=(async()=>{const e=await import("./arcadeUtils.a5768f78.js").then(function(t){return t.ay});return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Y4}const UTe=(e,t,i)=>cg.create(e,t,i,null,["$feature"]),BTe=(e,t,i)=>cg.create(e,t,i,null,["$feature","$view"]),tae=(e,t,i,r)=>cg.create(e,t,i,r,["$feature","$view"]);class cg{constructor(t,i,r,s,l,f,d,v){this.script=t,this.evaluate=l;const _=Array.isArray(d)?d:d.fields;this.fields=_,this._syntaxTree=s,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=f,this._spatialReference=v,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,l,f){const{arcade:d,Feature:v,Dictionary:_}=await il(),M=At.fromJSON(i);let T=null;try{T=d.parseScript(t,f)}catch(me){return eae.error(new fe("arcade-bad-expression","Failed to parse arcade script",{script:t,error:me})),null}const A=l.reduce((me,we)=>je(te({},me),{[we]:null}),{});let k=null;q(s)&&(k=new _(s),k.immutable=!0,A.$config=null);const F=d.scriptUsesGeometryEngine(T),D=F&&d.enableGeometrySupport(),z=d.scriptUsesFeatureSet(T)&&d.enableFeatureSetSupport(),H=d.scriptIsAsync(T),J=H&&d.enableAsyncSupport(),Y={vars:A,spatialReference:M,useAsync:!!J};await Promise.all([D,z,J]);const ie=new Set;await d.loadDependentModules(ie,T,null,H,F);const re=new _;re.immutable=!1,re.setField("scale",0);const ee=d.compileScript(T,Y),le=me=>("$view"in me&&me.$view&&(re.setField("scale",me.$view.scale),me.$view=re),k&&(me.$config=k),ee({vars:me,spatialReference:M}));return new cg(t,d,_,T,le,new v,r,M)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const iae=/^([0-9])/,rae=/[^A-Za-z0-9_\u0080-\uffff]/g,nae=/_{2,}/g,sae=/^_/,oae=/_$/;function aae(e){return e?e.trim().replace(rae,"_").replace(nae,"_").replace(sae,"").replace(oae,"").replace(iae,"F$1"):null}const lae=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],uae=["field","normalizationField"];function nR(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(sR(lae,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)sR(uae,r,t)}}function sR(e,t,i){if(e)for(const r of e){const s=jf(r,t),l=s&&typeof s!="function"&&i.get(s);l&&jn(r,l.name,t)}}function oR(e,t){var i,r,s,l,f;if(e!=null&&((i=t==null?void 0:t.fields)==null?void 0:i.length))if("startField"in e){const d=t.get(e.startField),v=t.get(e.endField);e.startField=(r=d==null?void 0:d.name)!=null?r:null,e.endField=(s=v==null?void 0:v.name)!=null?s:null}else{const d=t.get(e.startTimeField),v=t.get(e.endTimeField);e.startTimeField=(l=d==null?void 0:d.name)!=null?l:null,e.endTimeField=(f=v==null?void 0:v.name)!=null?f:null}}const X4=new Set;function aR(e,t){return e&&t?(X4.clear(),hg(X4,e,t),Array.from(X4).sort()):[]}function hg(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)==null?void 0:r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)Xs(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function Xs(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function HTe(e,t){var i;return ae(t)||ae(e)?[]:t.includes("*")?((i=e.fields)!=null?i:[]).map(r=>r.name):t}async function cs(e,t,i){var l;if(!i)return;const{arcadeUtils:r}=await il(),s=r.extractFieldNames(i,(l=t==null?void 0:t.fields)==null?void 0:l.map(f=>f.name));for(const f of s)Xs(e,t,f)}async function lR(e,t,i){if(i&&i!=="1=1"){const r=(await Promise.resolve().then(function(){return MZ})).WhereClause.create(i,t);if(!r.isStandardized)throw new fe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});hg(e,t,r.fieldNames)}}function cae({displayField:e,fields:t}){return e||(t&&t.length?Q4(t,"name-or-title")||Q4(t,"unique-identifier")||Q4(t,"type-or-category")||hae(t):null)}function hae(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function Q4(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function WTe(e,t){if(!t)return;const i=jf("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function pae(e,t,i){i.onStatisticExpression?cs(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function JTe(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(dae(e,t,s)),i.fields&&r.push(...i.fields.map(async l=>pae(e,t.fieldsIndex,l))),await Promise.all(r)}async function dae(e,t,i){const r=[];(i==null?void 0:i.expressionInfos)&&r.push(...i.expressionInfos.map(l=>cs(e,t.fieldsIndex,l.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const l of s)l.type==="expression"&&l.expressionInfo&&r.push(cs(e,t.fieldsIndex,l.expressionInfo.expression));await Promise.all(r)}async function ZTe(e,t,i){t&&(t.timeInfo&&q(i)&&i.timeExtent&&hg(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&hg(e,t.fieldsIndex,[t.floorInfo.floorField]),q(i)&&q(i.where)&&await lR(e,t.fieldsIndex,i.where))}async function KTe(e,t,i){t&&i&&await Promise.all(i.map(r=>fae(e,t,r)))}async function fae(e,t,i){t&&i&&(i.valueExpression?await cs(e,t.fieldsIndex,i.valueExpression):i.field&&Xs(e,t.fieldsIndex,i.field))}function YTe(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?aR(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function XTe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(s=>yae(e,r,s)))}async function yae(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await cs(e,t,r.expression);else{const l=r.expression.match(/{[^}]*}/g);l&&l.forEach(f=>{Xs(e,t,f.slice(1,-1))})}await lR(e,t,s)}function gae(e){const t=e.defaultValue;return t!==void 0&&hR(e,t)?t:e.nullable?null:void 0}function uR(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function mae(e){return e===null||uR(e)}const eS="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function vae(e){return e===null||eS(e)}function cR(e){return e!=null&&typeof e=="string"}function bae(e){return e===null||cR(e)}function wae(){return!0}function hR(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?vae:eS;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?mae:uR;break;case"string":case"esriFieldTypeString":i=e.nullable?bae:cR;break;default:i=wae}return arguments.length===1?i:i(t)}const _ae=["integer","small-integer","single","double"],xae=new Set([..._ae,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function tS(e){return e!=null&&xae.has(e.type)}function pR(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var Xw,Qw;function QTe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function eEe(e,t){return e.nullable&&t===null?null:tS(e)&&!Sae(e.type,Number(t))?Xw.OUT_OF_RANGE:hR(e,t)?e.domain?Qoe(e.domain,t):null:Qw.INVALID_TYPE}function Sae(e,t){const i=typeof e=="string"?dR(e):e;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?eS(t)&&t>=r&&t<=s:t>=r&&t<=s}function dR(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Mae;case"esriFieldTypeInteger":case"integer":return $ae;case"esriFieldTypeSingle":case"single":return Iae;case"esriFieldTypeDouble":case"double":return Tae}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Xw||(Xw={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Qw||(Qw={}));const Mae={min:-32768,max:32767,isInteger:!0},$ae={min:-2147483648,max:2147483647,isInteger:!0},Iae={min:-34e37,max:12e37,isInteger:!1},Tae={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function tEe(e,t,i){switch(e){case Qf.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Qf.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Qw.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Xw.OUT_OF_RANGE:{const{min:r,max:s}=dR(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function Eae(e,t){return!Cae(e,t,null)}function Cae(e,t,i){if(!t||!t.attributes||!e){if(q(i))for(const l of e!=null?e:[])i.add(l);return!0}const r=t.attributes;let s=!1;for(const l of e)if(!(l in r)){if(s=!0,!q(i))break;i.add(l)}return s}function fR(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let e2=class extends Ee{constructor(e){super(e),this.type=null}};m([x({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],e2.prototype,"type",void 0),e2=m([X("esri.popup.content.Content")],e2);const Vc=e2;var iS;let Ip=iS=class extends Vc{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new iS({description:this.description,displayType:this.displayType,title:this.title})}};m([x({type:String,json:{write:!0}})],Ip.prototype,"description",void 0),m([x({type:["auto","preview","list"],json:{write:!0}})],Ip.prototype,"displayType",void 0),m([x({type:String,json:{write:!0}})],Ip.prototype,"title",void 0),m([x({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Ip.prototype,"type",void 0),Ip=iS=m([X("esri.popup.content.AttachmentsContent")],Ip);const pg=Ip;var rS;let Tp=rS=class extends Vc{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new rS({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ve(this.outFields):null})}};m([x()],Tp.prototype,"creator",void 0),m([x()],Tp.prototype,"destroyer",void 0),m([x()],Tp.prototype,"outFields",void 0),m([x({type:["custom"],readOnly:!0})],Tp.prototype,"type",void 0),Tp=rS=m([X("esri.popup.content.CustomContent")],Tp);const Aae=Tp;var nS;let e0=nS=class extends Ee{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new nS({title:this.title,expression:this.expression})}};m([x({type:String,json:{write:!0}})],e0.prototype,"title",void 0),m([x({type:String,json:{write:!0}})],e0.prototype,"expression",void 0),m([x({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],e0.prototype,"returnType",void 0),e0=nS=m([X("esri.popup.ElementExpressionInfo")],e0);const yR=e0;var sS;let dg=sS=class extends Vc{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new sS({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};m([x({type:yR,json:{write:!0}})],dg.prototype,"expressionInfo",void 0),m([x({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],dg.prototype,"type",void 0),dg=sS=m([X("esri.popup.content.ExpressionContent")],dg);const oS=dg;function wt(e,t={}){var s;const i=e instanceof bt?e:new bt(e,t),r={type:((s=t==null?void 0:t.ignoreUnknown)!=null?s:1)?i.apiValues:String,json:{type:i.jsonValues,read:!(t==null?void 0:t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),x(r)}const fg=In()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});fg.toJSON.bind(fg);fg.fromJSON.bind(fg);let yg;var iY,rY,nY;const aS=(nY=(iY=globalThis.esriConfig)==null?void 0:iY.locale)!=null?nY:(rY=globalThis.dojoConfig)==null?void 0:rY.locale;function gR(){var e,t;return(t=aS!=null?aS:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function oa(){return yg===void 0&&(yg=gR()),yg}const gg=[];function Pae(e){return gg.push(e),{remove(){gg.splice(gg.indexOf(e),1)}}}const lS=[];function uS(e){return lS.push(e),{remove(){gg.splice(lS.indexOf(e),1)}}}function Oae(){const e=gR();yg!==e&&(yg=e,[...lS].forEach(t=>{t.call(null,e)}),[...gg].forEach(t=>{t.call(null,e)}))}var sY;(sY=globalThis.addEventListener)==null||sY.call(globalThis,"languagechange",Oae);const rl={year:"numeric",month:"numeric",day:"numeric"},mg={year:"numeric",month:"long",day:"numeric"},vg={year:"numeric",month:"short",day:"numeric"},bg={year:"numeric",month:"long",weekday:"long",day:"numeric"},Po={hour:"numeric",minute:"numeric"},aa=je(te({},Po),{second:"numeric"}),cS={"short-date":rl,"short-date-short-time":te(te({},rl),Po),"short-date-short-time-24":je(te(te({},rl),Po),{hour12:!1}),"short-date-long-time":te(te({},rl),aa),"short-date-long-time-24":je(te(te({},rl),aa),{hour12:!1}),"short-date-le":rl,"short-date-le-short-time":te(te({},rl),Po),"short-date-le-short-time-24":je(te(te({},rl),Po),{hour12:!1}),"short-date-le-long-time":te(te({},rl),aa),"short-date-le-long-time-24":je(te(te({},rl),aa),{hour12:!1}),"long-month-day-year":mg,"long-month-day-year-short-time":te(te({},mg),Po),"long-month-day-year-short-time-24":je(te(te({},mg),Po),{hour12:!1}),"long-month-day-year-long-time":te(te({},mg),aa),"long-month-day-year-long-time-24":je(te(te({},mg),aa),{hour12:!1}),"day-short-month-year":vg,"day-short-month-year-short-time":te(te({},vg),Po),"day-short-month-year-short-time-24":je(te(te({},vg),Po),{hour12:!1}),"day-short-month-year-long-time":te(te({},vg),aa),"day-short-month-year-long-time-24":je(te(te({},vg),aa),{hour12:!1}),"long-date":bg,"long-date-short-time":te(te({},bg),Po),"long-date-short-time-24":je(te(te({},bg),Po),{hour12:!1}),"long-date-long-time":te(te({},bg),aa),"long-date-long-time-24":je(te(te({},bg),aa),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Po,"long-time":aa},wg=In()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});wg.apiValues;wg.toJSON.bind(wg);wg.fromJSON.bind(wg);const kae={ar:"ar-u-nu-latn-ca-gregory"};let hS=new WeakMap,mR=cS["short-date-short-time"];function Rae(e){const t=e||mR;let i=hS.get(t);if(!i){const r=oa(),s=kae[oa()]||r;i=new Intl.DateTimeFormat(s,t),hS.set(t,i)}return i}function pS(e){return e?cS[e]:null}function uu(e,t){return Rae(t).format(e)}uS(()=>{hS=new WeakMap,mR=cS["short-date-short-time"]});const Fae={ar:"ar-u-nu-latn"};let t2=new WeakMap,vR={};function Lae(e){const t=e||vR;if(!t2.has(t)){const i=oa(),r=Fae[oa()]||i;t2.set(t,new Intl.NumberFormat(r,e))}return Lr(t2.get(t))}function bR(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Oo(e,t){return e===-0&&(e=0),Lae(t).format(e)}uS(()=>{t2=new WeakMap,vR={}});var dS;let Ep=dS=class extends Ee{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new dS({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?uu(e,te(te({},pS(this.dateFormat)),this.dateTimeFormatOptions)):Oo(e,bR(this))}formatRasterPixelValue(e){if(e.includes("-"))return e;let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(s=>this.format(Number(s))).join(i):e}};m([wt(fg)],Ep.prototype,"dateFormat",void 0),m([x({type:Object,json:{read:!1}})],Ep.prototype,"dateTimeFormatOptions",void 0),m([x({type:Boolean,json:{write:!0}})],Ep.prototype,"digitSeparator",void 0),m([x({type:hi,json:{write:!0}})],Ep.prototype,"places",void 0),Ep=dS=m([X("esri.popup.support.FieldInfoFormat")],Ep);const t0=Ep;var fS;let la=fS=class extends Ee{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new fS({fieldName:this.fieldName,format:this.format?ve(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};m([x({type:String,json:{write:!0}})],la.prototype,"fieldName",void 0),m([x({type:t0,json:{write:!0}})],la.prototype,"format",void 0),m([x({type:Boolean,json:{write:!0,default:!1}})],la.prototype,"isEditable",void 0),m([x({type:String,json:{write:!0}})],la.prototype,"label",void 0),m([wt(new bt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],la.prototype,"stringFieldOption",void 0),m([x({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],la.prototype,"statisticType",void 0),m([x({type:String,json:{write:!0}})],la.prototype,"tooltip",void 0),m([x({type:Boolean,json:{write:!0}})],la.prototype,"visible",void 0),la=fS=m([X("esri.popup.FieldInfo")],la);const _g=la;var yS;let cu=yS=class extends Vc{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new yS(ve({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};m([x({type:Object,json:{write:!0}})],cu.prototype,"attributes",void 0),m([x({type:String,json:{write:!0}})],cu.prototype,"description",void 0),m([x({type:[_g]})],cu.prototype,"fieldInfos",void 0),m([Xe("fieldInfos")],cu.prototype,"writeFieldInfos",null),m([x({type:String,json:{write:!0}})],cu.prototype,"title",void 0),m([x({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],cu.prototype,"type",void 0),cu=yS=m([X("esri.popup.content.FieldsContent")],cu);const i0=cu;let Cp=class extends Ee{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};m([x({type:String,json:{write:!0}})],Cp.prototype,"altText",void 0),m([x({type:String,json:{write:!0}})],Cp.prototype,"caption",void 0),m([x({type:String,json:{write:!0}})],Cp.prototype,"title",void 0),m([x({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Cp.prototype,"type",void 0),Cp=m([X("esri.popup.content.mixins.MediaInfo")],Cp);const gS=Cp;var mS;let r0=mS=class extends ot{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new mS({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};m([x()],r0.prototype,"fieldName",void 0),m([x()],r0.prototype,"tooltip",void 0),m([x()],r0.prototype,"value",void 0),r0=mS=m([X("esri.popup.content.support.ChartMediaInfoValueSeries")],r0);const wR=r0;var vS;let Ap=vS=class extends Ee{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new vS({fields:ve(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};m([x({type:[String],json:{write:!0}})],Ap.prototype,"fields",void 0),m([x({type:String,json:{write:!0}})],Ap.prototype,"normalizeField",void 0),m([x({type:[wR],json:{read:!1}})],Ap.prototype,"series",void 0),m([x({type:String,json:{write:!0}})],Ap.prototype,"tooltipField",void 0),Ap=vS=m([X("esri.popup.content.support.ChartMediaInfoValue")],Ap);const Nae=Ap;let xg=class extends gS{constructor(e){super(e),this.type=null,this.value=null}};m([x({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],xg.prototype,"type",void 0),m([x({type:Nae,json:{write:!0}})],xg.prototype,"value",void 0),xg=m([X("esri.popup.content.mixins.ChartMediaInfo")],xg);const i2=xg,r2=In()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var bS;let n2=bS=class extends i2{constructor(e){super(e),this.type="bar-chart"}clone(){return new bS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:r2.write}})],n2.prototype,"type",void 0),n2=bS=m([X("esri.popup.content.BarChartMediaInfo")],n2);const _R=n2;var wS;let s2=wS=class extends i2{constructor(e){super(e),this.type="column-chart"}clone(){return new wS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:r2.write}})],s2.prototype,"type",void 0),s2=wS=m([X("esri.popup.content.ColumnChartMediaInfo")],s2);const xR=s2;var _S;let Sg=_S=class extends Ee{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new _S({linkURL:this.linkURL,sourceURL:this.sourceURL})}};m([x({type:String,json:{write:!0}})],Sg.prototype,"linkURL",void 0),m([x({type:String,json:{write:!0}})],Sg.prototype,"sourceURL",void 0),Sg=_S=m([X("esri.popup.content.support.ImageMediaInfoValue")],Sg);const jae=Sg;var xS;let n0=xS=class extends gS{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new xS({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};m([x({type:Number,json:{write:!0}})],n0.prototype,"refreshInterval",void 0),m([x({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],n0.prototype,"type",void 0),m([x({type:jae,json:{write:!0}})],n0.prototype,"value",void 0),n0=xS=m([X("esri.popup.content.ImageMediaInfo")],n0);const SR=n0;var SS;let o2=SS=class extends i2{constructor(e){super(e),this.type="line-chart"}clone(){return new SS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:r2.write}})],o2.prototype,"type",void 0),o2=SS=m([X("esri.popup.content.LineChartMediaInfo")],o2);const MR=o2;var MS;let a2=MS=class extends i2{constructor(e){super(e),this.type="pie-chart"}clone(){return new MS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:r2.write}})],a2.prototype,"type",void 0),a2=MS=m([X("esri.popup.content.PieChartMediaInfo")],a2);const $R=a2,IR={base:gS,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":_R,"column-chart":xR,"line-chart":MR,"pie-chart":$R,image:SR}};var $S;let ua=$S=class extends Vc{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?SR.fromJSON(t):t.type==="barchart"?_R.fromJSON(t):t.type==="columnchart"?xR.fromJSON(t):t.type==="linechart"?MR.fromJSON(t):t.type==="piechart"?$R.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new $S(ve({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};m([x()],ua.prototype,"activeMediaInfoIndex",void 0),m([x({type:Object,json:{write:!0}})],ua.prototype,"attributes",void 0),m([x({type:String,json:{write:!0}})],ua.prototype,"description",void 0),m([x({types:[IR]})],ua.prototype,"mediaInfos",void 0),m([Be("mediaInfos")],ua.prototype,"readMediaInfos",null),m([Xe("mediaInfos")],ua.prototype,"writeMediaInfos",null),m([x({type:String,json:{write:!0}})],ua.prototype,"title",void 0),m([x({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ua.prototype,"type",void 0),ua=$S=m([X("esri.popup.content.MediaContent")],ua);const Mg=ua;var IS;let $g=IS=class extends Ee{constructor(e){super(e),this.field=null,this.order=null}clone(){return new IS({field:this.field,order:this.order})}};m([x({type:String,json:{write:!0}})],$g.prototype,"field",void 0),m([x({type:["asc","desc"],json:{write:!0}})],$g.prototype,"order",void 0),$g=IS=m([X("esri.popup.support.RelatedRecordsInfoFieldOrder")],$g);const TS=$g;let nl=class extends yr(Vc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};m([x({type:String,json:{write:!0}})],nl.prototype,"description",void 0),m([x({type:Number,json:{type:hi,write:!0}})],nl.prototype,"displayCount",void 0),m([x({type:["list"],json:{write:!0}})],nl.prototype,"displayType",void 0),m([x({type:[TS],json:{write:!0}})],nl.prototype,"orderByFields",void 0),m([x({type:Number,json:{type:hi,write:!0}})],nl.prototype,"relationshipId",void 0),m([x({type:String,json:{write:!0}})],nl.prototype,"title",void 0),m([x({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],nl.prototype,"type",void 0),nl=m([X("esri.popup.content.RelationshipContent")],nl);const l2=nl;var ES;let Ig=ES=class extends Vc{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new ES({text:this.text})}};m([x({type:String,json:{write:!0}})],Ig.prototype,"text",void 0),m([x({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Ig.prototype,"type",void 0),Ig=ES=m([X("esri.popup.content.TextContent")],Ig);const s0=Ig,Dae={base:null,key:"type",typeMap:{attachment:pg,media:Mg,text:s0,expression:oS,field:i0,relationship:l2}};var CS;let Pp=CS=class extends Ee{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new CS({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([x({type:String,json:{write:!0}})],Pp.prototype,"name",void 0),m([x({type:String,json:{write:!0}})],Pp.prototype,"title",void 0),m([x({type:String,json:{write:!0}})],Pp.prototype,"expression",void 0),m([x({type:["string","number"],json:{write:!0}})],Pp.prototype,"returnType",void 0),Pp=CS=m([X("esri.popup.ExpressionInfo")],Pp);const TR=Pp;var AS;let Tg=AS=class extends Ee{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new AS({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};m([x({type:Boolean,json:{write:!0}})],Tg.prototype,"returnTopmostRaster",void 0),m([x({type:Boolean,json:{write:!0}})],Tg.prototype,"showNoDataRecords",void 0),Tg=AS=m([X("esri.popup.LayerOptions")],Tg);const Vae=Tg;var PS;let Eg=PS=class extends Ee{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new PS({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ve(this.orderByFields):null})}};m([x({type:Boolean,json:{write:!0}})],Eg.prototype,"showRelatedRecords",void 0),m([x({type:[TS],json:{write:!0}})],Eg.prototype,"orderByFields",void 0),Eg=PS=m([X("esri.popup.RelatedRecordsInfo")],Eg);const zae=Eg;let ER=0;const o0=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+ER++})}};return t=m([X("esri.core.Identifiable")],t),t},OS=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:ER++})}};return t=m([X("esri.core.NumericIdentifiable")],t),t};let CR=class extends o0(class{}){};CR=m([X("esri.core.Identifiable")],CR);var kS;let ca=kS=class extends o0(ot){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new kS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};m([x()],ca.prototype,"active",void 0),m([x()],ca.prototype,"className",void 0),m([x()],ca.prototype,"disabled",void 0),m([x()],ca.prototype,"id",void 0),m([x()],ca.prototype,"indicator",void 0),m([x()],ca.prototype,"title",void 0),m([x()],ca.prototype,"type",void 0),m([x()],ca.prototype,"visible",void 0),ca=kS=m([X("esri.support.actions.ActionBase")],ca);const u2=ca;var RS;let c2=RS=class extends u2{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new RS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};m([x()],c2.prototype,"image",void 0),c2=RS=m([X("esri.support.Action.ActionButton")],c2);const a0=c2;var FS;let Cg=FS=class extends u2{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new FS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};m([x()],Cg.prototype,"image",void 0),m([x()],Cg.prototype,"value",void 0),Cg=FS=m([X("esri.support.Action.ActionToggle")],Cg);const AR=Cg,Gae="esri.PopupTemplate",qae=Pe.getLogger(Gae),Ag="relationships/",PR="expression/",Uae=gt.ofType({key:"type",defaultKeyValue:"button",base:u2,typeMap:{button:a0,toggle:AR}}),Bae={base:Vc,key:"type",typeMap:{media:Mg,custom:Aae,text:s0,attachments:pg,fields:i0,expression:oS,relationship:l2}},Hae=["attachments","fields","media","text","expression","relationship"];let Yr=class extends yr(Ee){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>Ya(Bae,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||tu(e)?e:(qae.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>Hae.includes(s.type)).map(s=>s&&s.toJSON(r)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"?this._writeTextContent(s,t):s.type==="relationship"&&this._writeRelationshipContent(s,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:s}=this,l=Array.isArray(s)?s:null;if(e){const f=l?l.filter(v=>v.type==="fields"):[],d=f.length&&f.every(v=>{var _;return(_=v.fieldInfos)==null?void 0:_.length});t.fieldInfos=e.filter(Boolean).map(v=>{const _=v.toJSON(r);return d&&(_.visible=!1),_})}if(l)for(const f of l)f.type==="fields"&&this._writeFieldsContent(f,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),hg(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=ve(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const s=t.fieldInfos.find(l=>l.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){var s,l;const i=((s=e.orderByFields)==null?void 0:s.map(f=>this._toFieldOrderJSON(f,e.relationshipId)))||[],r=[...((l=t.relatedRecordsInfo)==null?void 0:l.orderByFields)||[],...i];t.relatedRecordsInfo=te({showRelatedRecords:!0},(r==null?void 0:r.length)&&{orderByFields:r})}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=ve(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const r={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!t||r.mediaInfos||(s.mediaInfos=t,r.mediaInfos=!0),Mg.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),s0.fromJSON(s)):s.type==="attachments"?pg.fromJSON(s):s.type==="fields"?i0.fromJSON(s):s.type==="expression"?oS.fromJSON(s):s.type==="relationship"?l2.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!(t==null?void 0:t.startsWith(Ag)))return null;const r=t.replace(Ag,"").split("/");if(r.length!==2)return null;const s=parseInt(r[0],10),l=r[1];return typeof s=="number"&&l?l2.fromJSON({relationshipId:s,orderByFields:[{field:l,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:r}=e;return{field:`${Ag}${t}/${r}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:r={showRelatedRecords:!1}}){const s=[];e?s.push(new s0({text:e})):s.push(new i0),Array.isArray(t)&&t.length&&s.push(Mg.fromJSON({mediaInfos:t})),i&&s.push(pg.fromJSON({displayType:"auto"}));const{showRelatedRecords:l,orderByFields:f}=r;return l&&(f==null?void 0:f.length)&&f.forEach(d=>{const v=this._toRelationshipContent(d);v&&s.push(v)}),s.length?s:e}_getContentElementFields(e){var i;const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields((i=e.fieldInfos)!=null?i:this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,l)=>[...s,...this._getMediaInfoFields(l)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,s=r||{},{fields:l,normalizeField:f,tooltipField:d,sourceURL:v,linkURL:_}=s,M=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(v),...this._extractFieldNames(_),...l!=null?l:[]];return f&&M.push(f),d&&M.push(d),M}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>cs(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.startsWith(Ag)&&!t.startsWith(PR)):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,s=i.filter(l=>!(l.indexOf(`{${Ag}`)===0||l.indexOf(`{${PR}`)===0)).map(l=>l.replace(r,"{$1}"));return s?s.map(l=>l.slice(1,-1)):[]}};m([x({type:Uae})],Yr.prototype,"actions",void 0),m([x()],Yr.prototype,"content",void 0),m([ri("content")],Yr.prototype,"castContent",null),m([Be("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Yr.prototype,"readContent",null),m([Xe("content",{popupElements:{type:gt.ofType(Dae)},showAttachments:{type:Boolean},mediaInfos:{type:gt.ofType(IR)},description:{type:String},relatedRecordsInfo:{type:zae}})],Yr.prototype,"writeContent",null),m([x({type:[TR],json:{write:!0}})],Yr.prototype,"expressionInfos",void 0),m([x({type:[_g]})],Yr.prototype,"fieldInfos",void 0),m([Xe("fieldInfos")],Yr.prototype,"writeFieldInfos",null),m([x({type:Vae})],Yr.prototype,"layerOptions",void 0),m([Xe("layerOptions")],Yr.prototype,"writeLayerOptions",null),m([x({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Yr.prototype,"lastEditInfoEnabled",void 0),m([x()],Yr.prototype,"outFields",void 0),m([x()],Yr.prototype,"overwriteActions",void 0),m([x()],Yr.prototype,"returnGeometry",void 0),m([x({json:{type:String}})],Yr.prototype,"title",void 0),m([Xe("title")],Yr.prototype,"writeTitle",null),Yr=m([X("esri.PopupTemplate")],Yr);const l0=Yr,h2={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function OR(e){return h2[e]||h2[e.toLowerCase()]}function LS(e){var t;return(t=h2[e])!=null?t:h2[e.toLowerCase()]}function Wae(e){return[...LS(e)]}function NS(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function kR(e,t,i,r=1){const s=(e%360+360)%360/360,l=i<=.5?i*(t+1):i+t-i*t,f=2*i-l;return[Math.round(255*NS(f,l,s+1/3)),Math.round(255*NS(f,l,s)),Math.round(255*NS(f,l,s-1/3)),r]}function Jae(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,l=t?e.length===9:e.length===5;let f=Number("0x"+e.substr(1));if(isNaN(f))return null;const d=[0,0,0,1];let v;return l&&(v=f&r,f>>=i,d[3]=s*v/255),v=f&r,f>>=i,d[2]=s*v,v=f&r,f>>=i,d[1]=s*v,v=f&r,f>>=i,d[0]=s*v,d}function et(){return[0,0,0]}function zc(e){return[e[0],e[1],e[2]]}function Ar(e,t,i){return[e,t,i]}function RR(e){const t=et(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function FR(e,t){return new Float64Array(e,t,3)}function LR(){return et()}function NR(){return Ar(1,1,1)}function jR(){return Ar(1,0,0)}function DR(){return Ar(0,1,0)}function VR(){return Ar(0,0,1)}const Zae=LR(),zR=NR(),Kae=jR(),Yae=DR(),Xae=VR();Object.freeze(Object.defineProperty({__proto__:null,create:et,clone:zc,fromValues:Ar,fromArray:RR,createView:FR,zeros:LR,ones:NR,unitX:jR,unitY:DR,unitZ:VR,ZEROS:Zae,ONES:zR,UNIT_X:Kae,UNIT_Y:Yae,UNIT_Z:Xae},Symbol.toStringTag,{value:"Module"}));let jS=1e-6;function $s(){return jS}function Qae(e){jS=e}const Pg=Math.random,ele=Math.PI/180,tle=180/Math.PI;function DS(e){return e*ele}function ile(e){return e*tle}function rle(e,t){return Math.abs(e-t)<=jS*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,getEpsilon:$s,setEpsilon:Qae,RANDOM:Pg,toRadian:DS,toDegree:ile,equals:rle},Symbol.toStringTag,{value:"Module"}));function ko(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function Is(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function jr(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function Qs(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Xr(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function GR(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function qR(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function nle(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function sle(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ole(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function ale(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function lle(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function ule(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function cle(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function eo(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Op(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function u0(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function Gc(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function VS(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function zS(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function hle(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Tn(e,t){const i=t[0],r=t[1],s=t[2];let l=i*i+r*r+s*s;return l>0&&(l=1/Math.sqrt(l),e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l),e}function pi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qr(e,t,i){const r=t[0],s=t[1],l=t[2],f=i[0],d=i[1],v=i[2];return e[0]=s*v-l*d,e[1]=l*f-r*v,e[2]=r*d-s*f,e}function UR(e,t,i,r){const s=t[0],l=t[1],f=t[2];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e[2]=f+r*(i[2]-f),e}function ple(e,t,i,r,s,l){const f=l*l,d=f*(2*l-3)+1,v=f*(l-2)+l,_=f*(l-1),M=f*(3-2*l);return e[0]=t[0]*d+i[0]*v+r[0]*_+s[0]*M,e[1]=t[1]*d+i[1]*v+r[1]*_+s[1]*M,e[2]=t[2]*d+i[2]*v+r[2]*_+s[2]*M,e}function dle(e,t,i,r,s,l){const f=1-l,d=f*f,v=l*l,_=d*f,M=3*l*d,T=3*v*f,A=v*l;return e[0]=t[0]*_+i[0]*M+r[0]*T+s[0]*A,e[1]=t[1]*_+i[1]*M+r[1]*T+s[1]*A,e[2]=t[2]*_+i[2]*M+r[2]*T+s[2]*A,e}function fle(e,t){t=t||1;const i=Pg,r=2*i()*Math.PI,s=2*i()-1,l=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*l,e[1]=Math.sin(r)*l,e[2]=s*t,e}function BR(e,t,i){const r=t[0],s=t[1],l=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*l+i[12],e[1]=i[1]*r+i[5]*s+i[9]*l+i[13],e[2]=i[2]*r+i[6]*s+i[10]*l+i[14],e}function yle(e,t,i){const r=t[0],s=t[1],l=t[2];return e[0]=r*i[0]+s*i[3]+l*i[6],e[1]=r*i[1]+s*i[4]+l*i[7],e[2]=r*i[2]+s*i[5]+l*i[8],e}function GS(e,t,i){const r=i[0],s=i[1],l=i[2],f=i[3],d=t[0],v=t[1],_=t[2];let M=s*_-l*v,T=l*d-r*_,A=r*v-s*d,k=s*A-l*T,F=l*M-r*A,D=r*T-s*M;const z=2*f;return M*=z,T*=z,A*=z,k*=2,F*=2,D*=2,e[0]=d+M+k,e[1]=v+T+F,e[2]=_+A+D,e}function gle(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[0],l[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),l[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function mle(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),l[1]=s[1],l[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function vle(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),l[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),l[2]=s[2],e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function ble(e,t){Is(p2,e),Is(d2,t),Tn(p2,p2),Tn(d2,d2);const i=pi(p2,d2);return i>1?0:i<-1?Math.PI:Math.acos(i)}const p2=et(),d2=et();function wle(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function f2(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function y2(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],l=t[0],f=t[1],d=t[2],v=$s();return Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-f)<=v*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-d)<=v*Math.max(1,Math.abs(s),Math.abs(d))}function qS(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],l=i[2]-t[2];let f=r*r+s*s+l*l;return f>0?(f=1/Math.sqrt(f),e[0]=r*f,e[1]=s*f,e[2]=l*f,e):(e[0]=0,e[1]=0,e[2]=0,e)}const En=Xr,_le=GR,xle=qR,Sle=u0,Mle=Gc,g2=ko,m2=VS;Object.freeze(Object.defineProperty({__proto__:null,length:ko,copy:Is,set:jr,add:Qs,subtract:Xr,multiply:GR,divide:qR,ceil:nle,floor:sle,abs:ole,sign:ale,min:lle,max:ule,round:cle,scale:eo,scaleAndAdd:Op,distance:u0,squaredDistance:Gc,squaredLength:VS,negate:zS,inverse:hle,normalize:Tn,dot:pi,cross:Qr,lerp:UR,hermite:ple,bezier:dle,random:fle,transformMat4:BR,transformMat3:yle,transformQuat:GS,rotateX:gle,rotateY:mle,rotateZ:vle,angle:ble,str:wle,exactEquals:f2,equals:y2,direction:qS,sub:En,mul:_le,div:xle,dist:Sle,sqrDist:Mle,len:g2,sqrLen:m2},Symbol.toStringTag,{value:"Module"}));function v2(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function HR(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function WR(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function JR(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function ZR(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function KR(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function $le(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Ile(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Tle(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function Ele(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Cle(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function YR(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Ale(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function XR(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],l=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+l*l)}function QR(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],l=t[3]-e[3];return i*i+r*r+s*s+l*l}function US(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function BS(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function Ple(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Ole(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function eF(e,t){const i=t[0],r=t[1],s=t[2],l=t[3];let f=i*i+r*r+s*s+l*l;return f>0&&(f=1/Math.sqrt(f),e[0]=i*f,e[1]=r*f,e[2]=s*f,e[3]=l*f),e}function tF(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function b2(e,t,i,r){const s=t[0],l=t[1],f=t[2],d=t[3];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e[2]=f+r*(i[2]-f),e[3]=d+r*(i[3]-d),e}function kle(e,t){const i=Pg;let r,s,l,f,d,v;t=t||1;do r=2*i()-1,s=2*i()-1,d=r*r+s*s;while(d>=1);do l=2*i()-1,f=2*i()-1,v=l*l+f*f;while(v>=1);const _=Math.sqrt((1-d)/v);return e[0]=t*r,e[1]=t*s,e[2]=t*l*_,e[3]=t*f*_,e}function Rle(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*l+i[12]*f,e[1]=i[1]*r+i[5]*s+i[9]*l+i[13]*f,e[2]=i[2]*r+i[6]*s+i[10]*l+i[14]*f,e[3]=i[3]*r+i[7]*s+i[11]*l+i[15]*f,e}function Fle(e,t,i){const r=t[0],s=t[1],l=t[2],f=i[0],d=i[1],v=i[2],_=i[3],M=_*r+d*l-v*s,T=_*s+v*r-f*l,A=_*l+f*s-d*r,k=-f*r-d*s-v*l;return e[0]=M*_+k*-f+T*-v-A*-d,e[1]=T*_+k*-d+A*-f-M*-v,e[2]=A*_+k*-v+M*-d-T*-f,e[3]=t[3],e}function Lle(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function iF(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function HS(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],f=t[0],d=t[1],v=t[2],_=t[3],M=$s();return Math.abs(i-f)<=M*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-d)<=M*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-v)<=M*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-_)<=M*Math.max(1,Math.abs(l),Math.abs(_))}const Nle=JR,jle=ZR,Dle=KR,Vle=XR,zle=QR,Gle=US,qle=BS;Object.freeze(Object.defineProperty({__proto__:null,copy:v2,set:HR,add:WR,subtract:JR,multiply:ZR,divide:KR,ceil:$le,floor:Ile,min:Tle,max:Ele,round:Cle,scale:YR,scaleAndAdd:Ale,distance:XR,squaredDistance:QR,length:US,squaredLength:BS,negate:Ple,inverse:Ole,normalize:eF,dot:tF,lerp:b2,random:kle,transformMat4:Rle,transformQuat:Fle,str:Lle,exactEquals:iF,equals:HS,sub:Nle,mul:jle,div:Dle,dist:Vle,sqrDist:zle,len:Gle,sqrLen:qle},Symbol.toStringTag,{value:"Module"}));const rF=new Float32Array(1);function iEe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Cn(e,t,i){return Math.min(Math.max(e,t),i)}function rEe(e){return(e&e-1)==0}function nEe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function sEe(e,t,i){return e+(t-e)*i}function nF(e){return e*Math.PI/180}function WS(e){return 180*e/Math.PI}function oEe(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function JS(e){return Math.acos(Cn(e,-1,1))}function sF(e){return Math.asin(Cn(e,-1,1))}function sl(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const w2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Ule(e){return w2.setFloat64(0,e),w2.getBigInt64(0)}function Ble(e){return w2.setBigInt64(0,e),w2.getFloat64(0)}const ZS=BigInt("1000000");Hle(1);function Hle(e){const t=Ule(e=Math.abs(e)),i=Ble(t<=ZS?ZS:t-ZS);return Math.abs(e-i)}function aEe(e){return oF(Math.max(-lF,Math.min(e,lF)))}function oF(e){return rF[0]=e,rF[0]}function aF(e,t){const i=ko(e),r=sF(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return jr(t,i,r,s),t}function lEe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(sl(t,1)&&sl(i,1)&&sl(r,1))}const lF=oF(34028234663852886e22);function _2(e){return Cn(aw(e),0,255)}function x2(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Pr{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,s=new Pr){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),l=r[1];if(l==="rgb"&&s.length===3||l==="rgba"&&s.length===4){const f=s[0];if(f.charAt(f.length-1)==="%"){const d=s.map(v=>2.56*parseFloat(v));return s.length===4&&(d[3]=parseFloat(s[3])),Pr.fromArray(d,i)}return Pr.fromArray(s.map(d=>parseFloat(d)),i)}if(l==="hsl"&&s.length===3||l==="hsla"&&s.length===4)return Pr.fromArray(kR(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new Pr){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,s=(1<<r)-1;let l=Number("0x"+t.substr(1));return isNaN(l)?null:(["b","g","r"].forEach(f=>{const d=l&s;l>>=r,i[f]=r===4?17*d:d}),i.a=1,i)}static fromArray(t,i=new Pr){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=OR(t)?LS(t):null;return r&&Pr.fromArray(r,i)||Pr.fromRgb(t,i)||Pr.fromHex(t,i)}static fromJSON(t){return t&&new Pr([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return q(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return q(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,s,l;return typeof t=="string"?Pr.fromString(t,this):Array.isArray(t)?Pr.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(s=t.b)!=null?s:0,(l=t.a)!=null?l:1),t instanceof Pr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Pr.AlphaMode.ALWAYS){const i=_2(this.r),r=_2(this.g),s=_2(this.b);return t===Pr.AlphaMode.ALWAYS||this.a!==1?[i,r,s,_2(255*this.a)]:[i,r,s]}clone(){return new Pr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return q(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(x2(this.r,0,255)),this.g=Math.round(x2(this.g,0,255)),this.b=Math.round(x2(this.b,0,255)),this.a=x2(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}}Pr.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Pr||(Pr={}));const mt=Pr,uF=new bt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Wle=0,c0=class extends Ee{constructor(e){super(e),this.id="sym"+Wle++,this.type=null,this.color=new mt([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};m([x({type:uF.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:uF.write}}})],c0.prototype,"type",void 0),m([x({type:mt,json:{write:{allowNull:!0}}})],c0.prototype,"color",void 0),m([Be("color")],c0.prototype,"readColor",null),c0=m([X("esri.symbols.Symbol")],c0);const hs=c0;var KS;let qc=KS=class extends hs{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(l=>{const f=l.valueExpressionInfo;return cs(e,t,f.expression)});await Promise.all(s)}}}clone(){return new KS({data:ve(this.data)})}hash(){return i4(JSON.stringify(this.data)).toString()}};m([x({json:{write:!1}})],qc.prototype,"color",void 0),m([x({json:{write:!0}})],qc.prototype,"data",void 0),m([Be("data",["symbol"])],qc.prototype,"readData",null),m([Xe("data",{})],qc.prototype,"writeData",null),m([wt({CIMSymbolReference:"cim"},{readOnly:!0})],qc.prototype,"type",void 0),qc=KS=m([X("esri.symbols.CIMSymbol")],qc);const Uc=qc;let h0=class extends Ee{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};m([x({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],h0.prototype,"enabled",void 0),m([Xe("enabled")],h0.prototype,"writeEnabled",null),m([x({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],h0.prototype,"type",void 0),h0=m([X("esri.symbols.Symbol3DLayer")],h0);const ol=h0,Jle=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Zle="screenUtils.toPt: input not recognized!",cF=96;function hF(e){return e?e/72*cF:0}function Ro(e){return e?72*e/cF:0}function di(e){if(typeof e=="string"){const t=e.match(Jle);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",l=r==="px"?Ro(i):i;return s?-l:l}return console.warn(Zle),null}return e}function An(e=0,t=0){return{x:e,y:t}}function Og(e=0,t=0){return[e,t]}function uEe(e=0,t=0,i=0){return Kle([e,t,i])}function cEe(e){return e}function Kle(e){return e}function hEe(e){return e}function pEe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function S2(e){const t=aw(100*(1-e));return Math.max(0,Math.min(t,100))}function kg(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function Yle(e,t){const i=t.transparency!=null?kg(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new mt([r[0]||0,r[1]||0,r[2]||0,i]):null}function Xle(e,t){t.color=e.toJSON().slice(0,3);const i=S2(e.a);i!==0&&(t.transparency=i)}const Bc={type:mt,json:{type:[hi],default:null,read:{source:["color","transparency"],reader:Yle},write:{target:{color:{type:[hi]},transparency:{type:hi}},writer:Xle}}},al={type:Number,cast:di,json:{write:!0}};let kp=class extends Ee{constructor(e){super(e),this.color=new mt([0,0,0,1]),this.extensionLength=0,this.size=Ro(1)}clone(){}cloneProperties(){return{color:ve(this.color),size:this.size,extensionLength:this.extensionLength}}};m([x({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],kp.prototype,"type",void 0),m([x(Bc)],kp.prototype,"color",void 0),m([x(je(te({},al),{json:{write:{overridePolicy:e=>({enabled:!!e})}}}))],kp.prototype,"extensionLength",void 0),m([x(al)],kp.prototype,"size",void 0),kp=m([X("esri.symbols.edges.Edges3D")],kp);const YS=kp;var XS;let M2=XS=class extends YS{constructor(e){super(e),this.type="sketch"}clone(){return new XS(this.cloneProperties())}};m([wt({sketch:"sketch"},{readOnly:!0})],M2.prototype,"type",void 0),M2=XS=m([X("esri.symbols.edges.SketchEdges3D")],M2);const Qle=M2;var QS;let $2=QS=class extends YS{constructor(e){super(e),this.type="solid"}clone(){return new QS(this.cloneProperties())}};m([wt({solid:"solid"},{readOnly:!0})],$2.prototype,"type",void 0),$2=QS=m([X("esri.symbols.support.SolidEdges3D")],$2);const eue=$2,pF={types:{key:"type",base:YS,typeMap:{solid:eue,sketch:Qle}},json:{write:!0}};var e6;let to=e6=class extends Ee{constructor(e){super(e),this.color=null}clone(){const e={color:q(this.color)?this.color.clone():null};return new e6(e)}};m([x(Bc)],to.prototype,"color",void 0),to=e6=m([X("esri.symbols.support.Symbol3DMaterial")],to);var t6;let Hc=t6=class extends ol{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new t6({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:q(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};m([wt({Extrude:"extrude"},{readOnly:!0})],Hc.prototype,"type",void 0),m([x({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Hc.prototype,"size",void 0),m([x({type:to,json:{write:!0}})],Hc.prototype,"material",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hc.prototype,"castShadows",void 0),m([x(pF)],Hc.prototype,"edges",void 0),Hc=t6=m([X("esri.symbols.ExtrudeSymbol3DLayer")],Hc);const dF=Hc;let Rg=class extends hs{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};m([wt({esriSLS:"simple-line"},{readOnly:!0})],Rg.prototype,"type",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Rg.prototype,"width",void 0),Rg=m([X("esri.symbols.LineSymbol")],Rg);const tue=Rg,iue=["begin","end","begin-end"],fF=["arrow","circle","square","diamond","cross","x"];var i6;let ll=i6=class extends Ee{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new i6({color:ve(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};m([x({type:["begin","end","begin-end"],json:{write:!0}})],ll.prototype,"placement",void 0),m([wt({"line-marker":"line-marker"},{readOnly:!0}),x({json:{origins:{"web-map":{write:!1}}}})],ll.prototype,"type",void 0),m([x({type:fF})],ll.prototype,"style",void 0),m([Xe("style")],ll.prototype,"writeStyle",null),m([x({type:mt,value:null,json:{write:{allowNull:!0}}})],ll.prototype,"color",null),m([Be("color")],ll.prototype,"readColor",null),m([Xe("color")],ll.prototype,"writeColor",null),ll=i6=m([X("esri.symbols.LineSymbolMarker")],ll);const rue=ll;var r6;const n6=new bt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let hu=r6=class extends tue{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,l){if(e&&typeof e!="string")return e;const f={};return e!=null&&(f.style=e),t!=null&&(f.color=t),i!=null&&(f.width=di(i)),r!=null&&(f.cap=r),s!=null&&(f.join=s),l!=null&&(f.miterLimit=di(l)),f}clone(){var e;return new r6({color:ve(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};m([wt({esriSLS:"simple-line"},{readOnly:!0})],hu.prototype,"type",void 0),m([x({type:n6.apiValues,json:{read:n6.read,write:n6.write}})],hu.prototype,"style",void 0),m([x({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],hu.prototype,"cap",void 0),m([x({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],hu.prototype,"join",void 0),m([x({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":rue}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],hu.prototype,"marker",void 0),m([x({type:Number,json:{read:!1,write:!1}})],hu.prototype,"miterLimit",void 0),hu=r6=m([X("esri.symbols.SimpleLineSymbol")],hu);const ps=hu;let Fg=class extends hs{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};m([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ps}},json:{default:null,write:!0}})],Fg.prototype,"outline",void 0),m([x({type:["simple-fill","picture-fill"],readOnly:!0})],Fg.prototype,"type",void 0),Fg=m([X("esri.symbols.FillSymbol")],Fg);const yF=Fg;let I2=class extends Ee{constructor(e){super(e)}clone(){}};m([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],I2.prototype,"type",void 0),I2=m([X("esri.symbols.patterns.LinePattern3D")],I2);const gF=I2,nue=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var s6;const sue=In()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Lg=s6=class extends gF{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new s6(e)}};m([x({type:["style"]})],Lg.prototype,"type",void 0),m([wt(sue),x({type:nue})],Lg.prototype,"style",void 0),Lg=s6=m([X("esri.symbols.patterns.LineStylePattern3D")],Lg);const o6=Lg;let T2=class extends Ee{constructor(e){super(e)}clone(){}};m([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],T2.prototype,"type",void 0),T2=m([X("esri.symbols.patterns.Pattern3D")],T2);const mF=T2,oue=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var a6;let Ng=a6=class extends mF{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new a6(e)}};m([x({type:["style"]})],Ng.prototype,"type",void 0),m([x({type:oue,json:{read:!0,write:!0}})],Ng.prototype,"style",void 0),Ng=a6=m([X("esri.symbols.patterns.StylePattern3D")],Ng);const vF=Ng,aue={types:{key:"type",base:mF,typeMap:{style:vF}},json:{write:!0}},bF={types:{key:"type",base:gF,typeMap:{style:o6}},json:{write:!0}},jg=new mt("white");new mt("black");const lue=new mt([255,255,255,0]);function uue(e){return e.r===0&&e.g===0&&e.b===0}var l6;let Dg=l6=class extends to{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:q(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new l6(e)}};m([wt({multiply:"multiply",replace:"replace",tint:"tint"})],Dg.prototype,"colorMixMode",void 0),Dg=l6=m([X("esri.symbols.support.Symbol3DFillMaterial")],Dg);function E2(e){return e}function Fo(e=fue){return E2([e[0],e[1],e[2],e[3]])}function dEe(e){return E2([e[0],e[1],e[2],e[3]])}function u6(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function fEe(e,t,i,r,s=Fo()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function yEe(e,t=Fo()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function gEe(e,t){return new ai({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function mEe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function vEe(e,t,i){if(ae(t))u6(i,e);else if("length"in t)h6(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}}function c6(e,t,i=e){const r=t.length;let s=e[0],l=e[1],f=e[2],d=e[3];for(let v=0;v<r;v++){const _=t[v];s=Math.min(s,_[0]),l=Math.min(l,_[1]),f=Math.max(f,_[0]),d=Math.max(d,_[1])}return i[0]=s,i[1]=l,i[2]=f,i[3]=d,i}function bEe(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function cue(e){return ae(e)||e[0]>=e[2]?0:e[2]-e[0]}function hue(e){return e[1]>=e[3]?0:e[3]-e[1]}function wEe(e){return cue(e)*hue(e)}function _Ee(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function xEe(e,t){return wF(e,t[0],t[1])}function SEe(e,t){return wF(e,t.x,t.y)}function wF(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function MEe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function $Ee(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function pue(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function IEe(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function due(e){return e?u6(e,_F):Fo(_F)}function h6(e){return e!=null&&e.length===4}function TEe(e,t){return h6(e)&&h6(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const _F=E2([1/0,1/0,-1/0,-1/0]),fue=E2([0,0,0,0]);function p6(e){return e}function C2(e=vue){return p6([e[0],e[1],e[2],e[3],e[4],e[5]])}function d6(e,t,i,r,s,l,f=C2()){return f[0]=e,f[1]=t,f[2]=i,f[3]=r,f[4]=s,f[5]=l,f}function EEe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new ai(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function CEe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function AEe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function PEe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function OEe(e,t,i=0,r=t.length/3){let s=e[0],l=e[1],f=e[2],d=e[3],v=e[4],_=e[5];for(let M=0;M<r;M++)s=Math.min(s,t[i+3*M]),l=Math.min(l,t[i+3*M+1]),f=Math.min(f,t[i+3*M+2]),d=Math.max(d,t[i+3*M]),v=Math.max(v,t[i+3*M+1]),_=Math.max(_,t[i+3*M+2]);e[0]=s,e[1]=l,e[2]=f,e[3]=d,e[4]=v,e[5]=_}function f6(e,t,i){const r=t.length;let s=e[0],l=e[1],f=e[2],d=e[3],v=e[4],_=e[5];if(i)for(let M=0;M<r;M++){const T=t[M];s=Math.min(s,T[0]),l=Math.min(l,T[1]),f=Math.min(f,T[2]),d=Math.max(d,T[0]),v=Math.max(v,T[1]),_=Math.max(_,T[2])}else for(let M=0;M<r;M++){const T=t[M];s=Math.min(s,T[0]),l=Math.min(l,T[1]),d=Math.max(d,T[0]),v=Math.max(v,T[1])}e[0]=s,e[1]=l,e[2]=f,e[3]=d,e[4]=v,e[5]=_}function kEe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Vg(e){return e[0]>=e[3]?0:e[3]-e[0]}function zg(e){return e[1]>=e[4]?0:e[4]-e[1]}function Gg(e){return e[2]>=e[5]?0:e[5]-e[2]}function REe(e){const t=Vg(e),i=Gg(e),r=zg(e);return Math.sqrt(t*t+i*i+r*r)}function FEe(e,t=[0,0,0]){return t[0]=e[0]+Vg(e)/2,t[1]=e[1]+zg(e)/2,t[2]=e[2]+Gg(e)/2,t}function LEe(e,t=[0,0,0]){return t[0]=Vg(e),t[1]=zg(e),t[2]=Gg(e),t}function NEe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function yue(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function jEe(e,t){return!!ae(t)||yue(e,t)}function DEe(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s}function VEe(e,t,i=e){const r=e[0]+Vg(e)/2,s=e[1]+zg(e)/2,l=e[2]+Gg(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=l+(e[2]-l)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=l+(e[5]-l)*t,i}function zEe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function GEe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function qEe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function gue(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function mue(e){return e?gue(e,SF):C2(SF)}function UEe(e,t){return t||(t=Fo()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function BEe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function xF(e){return e.length===6}function HEe(e){return Vg(e)===0&&zg(e)===0&&Gg(e)===0}function WEe(e,t,i){if(ae(e)||ae(t))return e===t;if(!xF(e)||!xF(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const SF=p6([1/0,1/0,1/0,-1/0,-1/0,-1/0]),vue=p6([0,0,0,0,0,0]);C2();function JEe(e,{isPrimitive:t,width:i,depth:r,height:s}){const l=t?10:1;if(i==null&&s==null&&r==null)return[l*e[0],l*e[1],l*e[2]];const f=Ar(i,r,s);let d;for(let v=0;v<3;v++){const _=f[v];if(_!=null){d=_/e[v];break}}for(let v=0;v<3;v++)f[v]==null&&(f[v]=e[v]*d);return f}const bue=d6(-.5,-.5,-.5,.5,.5,.5),wue=d6(-.5,-.5,0,.5,.5,1),_ue=d6(-.5,-.5,0,.5,.5,.5);function ZEe(e){switch(e){case"sphere":case"cube":case"diamond":return bue;case"cylinder":case"cone":case"inverted-cone":return wue;case"tetrahedron":return _ue;default:return}}const y6=["butt","square","round"],xue=[...y6,"none"],MF=["miter","bevel","round"];var g6;let Rp=g6=class extends Ee{constructor(e){super(e),this.color=new mt([0,0,0,1]),this.size=Ro(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:q(this.color)?this.color.clone():null,size:this.size,pattern:q(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new g6(e)}};m([x(Bc)],Rp.prototype,"color",void 0),m([x(al)],Rp.prototype,"size",void 0),m([x(bF)],Rp.prototype,"pattern",void 0),m([x({type:y6,json:{default:"butt",write:{overridePolicy(){return{enabled:q(this.pattern)}}}}})],Rp.prototype,"patternCap",void 0),Rp=g6=m([X("esri.symbols.support.Symbol3DOutline")],Rp);var A2;let pu=A2=class extends ol{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:q(this.edges)?this.edges.clone():null,enabled:this.enabled,material:q(this.material)?this.material.clone():null,pattern:q(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:q(this.outline)?this.outline.clone():null};return new A2(e)}static fromSimpleFillSymbol(e){var r,s,l,f,d,v;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new o6({style:e.outline.style}):null,i={size:(s=(r=e.outline)==null?void 0:r.width)!=null?s:0,color:((f=(l=e.outline)==null?void 0:l.color)!=null?f:jg).clone(),pattern:t};return t&&((d=e.outline)==null?void 0:d.cap)&&(i.patternCap=e.outline.cap),new A2({material:new Dg({color:((v=e.color)!=null?v:lue).clone()}),pattern:e.style&&e.style!=="solid"?new vF({style:e.style}):null,outline:i})}};m([wt({Fill:"fill"},{readOnly:!0})],pu.prototype,"type",void 0),m([x({type:Dg,json:{write:!0}})],pu.prototype,"material",void 0),m([x(aue)],pu.prototype,"pattern",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],pu.prototype,"castShadows",void 0),m([x({type:Rp,json:{write:!0}})],pu.prototype,"outline",void 0),m([x(pF)],pu.prototype,"edges",void 0),pu=A2=m([X("esri.symbols.FillSymbol3DLayer")],pu);const qg=pu,Sue=["none","underline","line-through"],Mue=["normal","italic","oblique"],$ue=["normal","lighter","bold","bolder"],$F={type:Number,cast:e=>{const t=Io(e);return t===0?1:Cn(t,.1,4)},nonNullable:!0},Iue=["left","right","center"],Tue=["baseline","top","middle","bottom"],IF={type:Iue,nonNullable:!0},TF={type:Tue,nonNullable:!0};var m6;let du=m6=class extends Ee{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return di(e)}clone(){return new m6({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};m([x({type:Sue,json:{default:"none",write:!0}})],du.prototype,"decoration",void 0),m([x({type:String,json:{write:!0}})],du.prototype,"family",void 0),m([x({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],du.prototype,"size",void 0),m([ri("size")],du.prototype,"castSize",null),m([x({type:Mue,json:{default:"normal",write:!0}})],du.prototype,"style",void 0),m([x({type:$ue,json:{default:"normal",write:!0}})],du.prototype,"weight",void 0),du=m6=m([X("esri.symbols.Font")],du);const P2=du,Eue=Pe.getLogger("esri.core.urlUtils"),p0=gi.request,EF="esri/config: esriConfig.request.proxyUrl is not set.",CF=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,AF=/^\s*http:/i,Cue=/^\s*https:/i,Aue=/^\s*file:/i,Pue=/:\d+$/,Oue=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,kue=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Rue=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class d0{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=Lr(this.uri.match(kue));this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=Lr(this.authority.match(Rue)),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const O2={},Fue=new d0(gi.applicationUrl);let Vn=Fue;const Lue=Nue();let v6=Lue;const b6=()=>Vn,KEe=()=>v6;function Nue(){const e=Lr(Vn.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Vn.scheme}://${Vn.host}${Vn.port!=null?`:${Vn.port}`:""}`}${t}`}function gn(e){if(!e)return null;const t={path:null,query:null},i=new d0(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=PF(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function PF(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let l,f;s<0?(l=decodeURIComponent(r),f=""):(l=decodeURIComponent(r.slice(0,s)),f=decodeURIComponent(r.slice(s+1)));let d=i[l];typeof d=="string"&&(d=i[l]=[d]),Array.isArray(d)?d.push(f):i[l]=f}return i}function OF(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function f0(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",l=t&&t[i];return l?s+encodeURIComponent(l(r)):Array.isArray(r)?r.map(f=>OF(f)?s+encodeURIComponent(JSON.stringify(f)):s+encodeURIComponent(f)).join("&"):OF(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function jue(e=!1){let t,i=p0.proxyUrl;if(typeof e=="string"){t=Bue(e);const r=k2(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Eue.warn(EF),new fe("urlutils:proxy-not-set",EF);return t&&$6()&&(i=M6(i)),gn(i)}function Due(e){const t=k2(e);let i,r;if(t){const s=w6(t.proxyUrl);i=s.path,r=s.query?PF(s.query):null}if(i){const s=gn(e);e=i+"?"+s.path;const l=f0(te(te({},r),s.query));l&&(e=`${e}?${l}`)}return e}const Ug={path:"",query:""};function w6(e){const t=e.indexOf("?");return t!==-1?(Ug.path=e.slice(0,t),Ug.query=e.slice(t+1)):(Ug.path=e,Ug.query=null),Ug}function kF(e){return e=(e=F2(e=Yue(e=w6(e).path),!0)).toLowerCase()}function Vue(e){const t={proxyUrl:e.proxyUrl,urlPrefix:kF(e.urlPrefix)},i=p0.proxyRules,r=t.urlPrefix;let s=i.length;for(let l=0;l<i.length;l++){const f=i[l].urlPrefix;if(r.indexOf(f)===0){if(r.length===f.length)return-1;s=l;break}f.indexOf(r)===0&&(s=l+1)}return i.splice(s,0,t),s}function k2(e){const t=p0.proxyRules,i=kF(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function RF(e,t){return e=FF(e),t=FF(t),F2(e)===F2(t)}function FF(e){const t=(e=ha(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function LF(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=p0.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function Bg(e,t,i=!1){if(!e||!t)return!1;const r=T6(e),s=T6(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function _6(e){if(typeof e=="string"){if(!io(e))return!0;e=T6(e)}if(Bg(e,Vn))return!0;const t=p0.trustedServers||[];for(let i=0;i<t.length;i++){const r=zue(t[i]);for(let s=0;s<r.length;s++)if(Bg(e,r[s]))return!0}return!1}function zue(e){return O2[e]||(S6(e)||ul(e)?O2[e]=[new d0(Lo(e))]:O2[e]=[new d0(`http://${e}`),new d0(`https://${e}`)]),O2[e]}function Lo(e,t=v6,i){return ul(e)?i&&i.preserveProtocolRelative?e:Vn.scheme==="http"&&Vn.authority===pa(e).slice(2)?`http:${e}`:`https:${e}`:S6(e)?e:Lr(Wc(e[0]==="/"?Zue(t):t,e))}function x6(e,t=v6,i){if(e==null||!io(e))return e;const r=ha(e),s=r.toLowerCase(),l=ha(t).toLowerCase().replace(/\/+$/,""),f=i?ha(i).toLowerCase().replace(/\/+$/,""):null;if(f&&l.indexOf(f)!==0)return e;const d=(T,A,k)=>(k=T.indexOf(A,k))===-1?T.length:k;let v=d(s,"/",s.indexOf("//")+2),_=-1;for(;s.slice(0,v+1)===l.slice(0,v)+"/"&&(_=v+1,v!==s.length);)v=d(s,"/",v+1);if(_===-1||f&&_<f.length)return e;e=r.slice(_);const M=l.slice(_-1).replace(/[^/]+/g,"").length;if(M>0)for(let T=0;T<M;T++)e=`../${e}`;else e=`./${e}`;return e}function ha(e){return e=ece(e=Que(e=Xue(e=Lo(e=e.trim()))))}function Wc(...e){const t=e.filter(q);if(!t||!t.length)return;const i=[];if(io(t[0])){const s=t[0],l=s.indexOf("//");l!==-1&&(i.push(s.slice(0,l+1)),Wue(t[0])&&(i[0]+="/"),t[0]=s.slice(l+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,l)=>l?s.concat(l.split("/")):s,[]);for(let s=0;s<r.length;s++){const l=r[s];l===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!l&&s===r.length-1||l&&(l!=="."||i.length===0))&&i.push(l)}return i.join("/")}function pa(e,t=!1){if(e==null||R2(e)||Fp(e))return null;let i=e.indexOf("://");if(i===-1&&ul(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=F2(e,!0)),e}function io(e){return ul(e)||S6(e)}function R2(e){return e!=null&&e.slice(0,5)==="blob:"}function Fp(e){return e!=null&&e.slice(0,5)==="data:"}function YEe(e){const t=NF(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function XEe(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Gue=/^data:(.*?)(;base64)?,(.*)$/;function NF(e){const t=e.match(Gue);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function jF(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function QEe(e,t){que(e,t)||Uue(e,t)}function que(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function Uue(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function ul(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function S6(e){return e!=null&&CF.test(e)}function Bue(e){return e!=null&&Cue.test(e)||Vn.scheme==="https"&&ul(e)}function Hue(e){return e!=null&&AF.test(e)||Vn.scheme==="http"&&ul(e)}function Wue(e){return e!=null&&Aue.test(e)}function M6(e){return ul(e)?`https:${e}`:e.replace(AF,"https:")}function Jue(){return Vn.scheme==="http"}function $6(){return Vn.scheme==="https"}function F2(e,t=!1){return ul(e)?e.slice(2):(e=e.replace(CF,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Zue(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function Kue(e){let t=0;if(io(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function eCe(e,t){if(!e)return"";const i=gn(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t==null?void 0:t.length))return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function Yue(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function DF(e){return e.replace(/\/+$/,"")}function Xue(e){if(/^https?:\/\//i.test(e)){const t=w6(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Que(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function ece(e){const t=p0.httpsDomains;if(!Hue(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Pue.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return Jue()&&r===Vn.authority&&!Oue.test(e)||($6()&&r===Vn.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||$6()&&!k2(e))&&(e=M6(e)),e}function I6(e,t,i){if(!(t&&i&&e&&io(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),l=e.indexOf(":",r+2),f=Math.min(s<0?e.length:s,l<0?e.length:l);return e.slice(r+2,f).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(f)}`}function T6(e){return typeof e=="string"?new d0(Lo(e)):(e.scheme||(e.scheme=Vn.scheme),e)}function tCe(e){return tce.test(e)}function VF(e,t){const i=gn(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function zF(e,t,i){const r=gn(e),s=r.query||{};return s[t]=String(i),`${r.path}?${f0(s)}`}function E6(e,t){const i=gn(e),r=i.query||{};for(const l in t)r[l]=t[l];const s=f0(r);return s?`${i.path}?${s}`:i.path}function iCe(e){if(ae(e))return null;const t=e.match(qF);return t?t[2]:null}function GF(e){if(ae(e))return null;const t=e.match(qF);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}const qF=/([^.]*)\.([^\/]*)$/,tce=/(^data:image\/svg|\.svg$)/i;function y0(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=Lo(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=x6(e,t.portalItem.itemUrl);r!=null&&ice.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return A6(e,t&&t.portal)}function Hg(e,t,i=Wg.YES){if(e==null)return e;!io(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=Lo(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const l=A6(s,t.portal);r=x6(A6(r,t.portal),l,l),r!=null&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=BF(r,t==null?void 0:t.portal),io(r)&&(r=ha(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!io(r)&&!Fp(r)&&i===Wg.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function C6(e,t,i){return y0(e,i)}function Lp(e,t,i,r){const s=Hg(e,r);s!==void 0&&(t[i]=s)}const UF=/\/items\/([^\/]+)\/resources\/(.*)/,ice=/^\.\/resources\//;function rce(e){var t,i,r;return(r=(i=(t=e==null?void 0:e.match(UF))!=null?t:null)==null?void 0:i[1])!=null?r:null}function nce(e){var f;const t=(f=e==null?void 0:e.match(UF))!=null?f:null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:d,extension:v}=GF(i);return{prefix:null,filename:d,extension:Jt(v)}}const{path:s,extension:l}=GF(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:Jt(l)}}function BF(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?I6(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function A6(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=b6();return Bg(r,`${r.scheme}://${i}`)?I6(e,t.portalHostname,i):I6(e,i,t.portalHostname)}var Wg;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Wg||(Wg={}));const rCe=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:y0,toJSON:Hg,read:C6,write:Lp,itemIdFromResourceUrl:rce,prefixAndFilenameFromResourceUrl:nce,ensureMainOnlineDomain:BF,get MarkKeep(){return Wg}},Symbol.toStringTag,{value:"Module"}));var P6;const sce=In()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Np=P6=class extends Ee{constructor(e){super(e)}readHref(e,t,i){return e?y0(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Fp(e)?t.dataURI=e:(t.href=Hg(e,r),io(t.href)&&(t.href=ha(t.href))))}clone(){return new P6({href:this.href,primitive:this.primitive})}};m([x({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Np.prototype,"href",void 0),m([Be("href")],Np.prototype,"readHref",null),m([Xe("href",{href:{type:String},dataURI:{type:String}})],Np.prototype,"writeHref",null),m([wt(sce)],Np.prototype,"primitive",void 0),Np=P6=m([X("esri.symbols.support.IconSymbol3DLayerResource")],Np);const nCe="circle";var O6;let g0=O6=class extends ot{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new O6({x:this.x,y:this.y})}};m([x({type:Number})],g0.prototype,"x",void 0),m([x({type:Number})],g0.prototype,"y",void 0),g0=O6=m([X("esri.symbols.support.Symbol3DAnchorPosition2D")],g0);var k6;let Jg=k6=class extends Ee{constructor(e){super(e),this.color=new mt([0,0,0,1]),this.size=Ro(1)}clone(){const e={color:q(this.color)?this.color.clone():null,size:this.size};return new k6(e)}};m([x(Bc)],Jg.prototype,"color",void 0),m([x(al)],Jg.prototype,"size",void 0),Jg=k6=m([X("esri.symbols.support.Symbol3DIconOutline")],Jg);var m0;const HF="esri.symbols.IconSymbol3DLayer";let cl=m0=class extends ol{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new m0({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:q(this.material)?this.material.clone():null,outline:q(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||jg,i=WF(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||jg).clone()}:null;return new m0({size:e.size,resource:{primitive:ace(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||uue(e.color)?jg:e.color,i=WF(e);return new m0({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new m0({resource:{href:jF({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function WF(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=JF(e.xoffset),s=JF(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function JF(e){return isFinite(e)?e:0}m([x({type:to,json:{write:!0}})],cl.prototype,"material",void 0),m([x({type:Np,json:{write:!0}})],cl.prototype,"resource",void 0),m([wt({Icon:"icon"},{readOnly:!0})],cl.prototype,"type",void 0),m([x(al)],cl.prototype,"size",void 0),m([wt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),x({json:{default:"center"}})],cl.prototype,"anchor",void 0),m([x({type:g0,json:{type:[Number],read:{reader:e=>new g0({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],cl.prototype,"anchorPosition",void 0),m([x({type:Jg,json:{write:!0}})],cl.prototype,"outline",void 0),cl=m0=m([X(HF)],cl);const oce={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function ace(e){return oce[e]||(Pe.getLogger(HF).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const jp=cl;function Dp(e,t,i=gt){return t||(t=new i),t===e||(t.removeAll(),lce(e)?t.addMany(e):e&&t.add(e)),t}function ZF(e){return e}function lce(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const KF="20221121",YF="f520630575ed53cf8b49e5f1492799065ee366e5",XF="4.25",uce={async request(e,t){var d,v;const{default:i}=await Promise.resolve().then(function(){return Ace}),r=e.options,s=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((d=LF(e.url))==null?void 0:d.after)?s:"array-buffer";const l=await i(e.url,r),f={data:l.data,ssl:l.ssl};switch((v=l.requestOptions)==null?void 0:v.responseType){case"native-request-init":return delete f.data.signal,f;case"blob":f.data=await f.data.arrayBuffer();break;case"json":f.data=new TextEncoder().encode(JSON.stringify(f.data)).buffer;break;case"text":f.data=new TextEncoder().encode(f.data).buffer}return{result:f,transferList:[f.data]}}};let gr;function sCe(e){gr=e}function cce(e){const t=gr&&gr.findCredential(e);return t&&t.token?zF(e,"token",t.token):e}Ie("host-webworker");const hce=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,pce={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function oCe(e){const t=e==null?void 0:e.match(hce);if(!t)return null;const[,i,r,s]=t;if(!i)return null;let l=null,f=null,d=null;const{devext:v,qaext:_,www:M}=pce;if(r)if(l=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:d}=v);break;case"qa":({customBaseUrl:f,portalHostname:d}=_);break;default:return null}else({customBaseUrl:f,portalHostname:d}=M);else switch(i.toLowerCase()){case"devext":({customBaseUrl:f,portalHostname:d}=v);break;case"qaext":({customBaseUrl:f,portalHostname:d}=_);break;case"www":({customBaseUrl:f,portalHostname:d}=M);break;default:return null}return{customBaseUrl:f,isPortal:!1,portalHostname:d,urlKey:l}}function dce(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}const fce=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function QF(e){const t=pa(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!fce.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function yce(e,t,i=!1,r){return new Promise((s,l)=>{if(To(r))return void l(eL());let f=()=>{_(),l(new Error(`Unable to load ${t}`))},d=()=>{const M=e;_(),s(M)},v=()=>{if(!e)return;const M=e;_(),M.src="",l(eL())};const _=()=>{Ie("esri-image-decode")||(e.removeEventListener("error",f),e.removeEventListener("load",d)),f=null,d=null,e=null,q(r)&&r.removeEventListener("abort",v),v=null,i&&URL.revokeObjectURL(t)};q(r)&&r.addEventListener("abort",v),Ie("esri-image-decode")?e.decode().then(d,f):(e.addEventListener("error",f),e.addEventListener("load",d))})}function eL(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function gce(e){var i,r,s;gi.request.crossOriginNoCorsDomains||(gi.request.crossOriginNoCorsDomains={});const t=gi.request.crossOriginNoCorsDomains;for(let l of e)l=l.toLowerCase(),/^https?:\/\//.test(l)?t[(i=pa(l))!=null?i:""]=0:(t[(r=pa("http://"+l))!=null?r:""]=0,t[(s=pa("https://"+l))!=null?s:""]=0)}function mce(e){const t=gi.request.crossOriginNoCorsDomains;if(t){let i=pa(e);if(i)return i=i.toLowerCase(),!Bg(i,b6())&&t[i]<Date.now()-36e5}return!1}async function vce(e){var s;const t=gi.request.crossOriginNoCorsDomains,i=pa(e);t&&i&&(t[i.toLowerCase()]=Date.now());const r=gn(e);e=r.path,((s=r.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function li(e,t){var _;const i=Fp(e),r=R2(e);r||i||(e=ha(e));const s={url:e,requestOptions:te({},Jt(t))};let l=LF(e);if(l){const M=await Ice(l,s);if(M!=null)return{data:M,getHeader:R6,requestOptions:s.requestOptions,url:s.url};l.after||l.error||(l=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"){if(Ie("host-webworker")||Ie("host-node"))throw fa("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw fa("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),s);if(t.method==="head"){if(t.body)throw fa("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw fa("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Sce(),L2)return L2.execute(e,t);const f=new AbortController;Eo(t,()=>f.abort());const d={controller:f,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:da.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=await Ece(d);return(_=l==null?void 0:l.after)==null||_.call(l,v),v}let L2;const da=gi.request,tL="FormData"in globalThis,bce=[499,498,403,401],wce=["COM_0056","COM_0057","SB_0008"],_ce=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],R6=()=>null,N2=Symbol();function xce(e){const t=pa(e);t&&!li._corsServers.includes(t)&&li._corsServers.push(t)}function iL(e){const t=pa(e);return!t||t.endsWith(".arcgis.com")||li._corsServers.includes(t)||_6(t)}function fa(e,t,i,r){let s="Error";const l={url:i.url,requestOptions:i.requestOptions,getHeader:R6,ssl:!1};if(t instanceof fe)return t.details?(t.details=ve(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=l,t;if(t){const f=r&&(_=>r.headers.get(_)),d=r&&r.status,v=t.message;v&&(s=v),f&&(l.getHeader=f),l.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||d||0,l.subCode=t.subcode,l.messageCode=t.messageCode,typeof t.details=="string"?l.messages=[t.details]:l.messages=t.details,l.raw=N2 in t?t[N2]:t}return Ks(t)?zi():new fe(e,s,l)}async function Sce(){Ie("host-webworker")?L2||(L2=await import("./request.9e766f18.js")):li._abortableFetch||(li._abortableFetch=globalThis.fetch.bind(globalThis))}async function F6(){gr||await import("./IdentityManager.720d2f71.js")}async function Mce(e){var d;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let l=null,f=null;if(tL&&"HTMLFormElement"in globalThis&&(s instanceof FormData?l=s:s instanceof HTMLFormElement&&(l=new FormData(s))),typeof s=="string"&&(f=s),e.fetchOptions={cache:i.cacheBust&&!li._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:da.priority,redirect:"follow",signal:r},(l||f)&&(e.fetchOptions.body=l||f),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((d=i.query)==null?void 0:d.token)||(l==null?void 0:l.get("token"))),!e.hasToken&&gi.apiKey&&QF(t)&&(i.query||(i.query={}),i.query.token=gi.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!rL(t)&&!To(r)){let v;i.authMode==="immediate"?(await F6(),v=await gr.getCredential(t,{signal:r}),e.credential=v):i.authMode==="no-prompt"?(await F6(),v=await gr.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=v):gr&&(v=gr.findCredential(t)),v&&(e.credentialToken=v.token,e.useSSL=!!v.ssl)}}function rL(e){return _ce.some(t=>t.test(e))}async function $ce(e){var A,k;let t=e.params.url;const i=e.params.requestOptions,r=(A=e.fetchOptions)!=null?A:{},s=R2(t)||Fp(t),l=i.responseType||"json",f=s?0:i.timeout!=null?i.timeout:da.timeout;let d=!1;if(!s){e.useSSL&&(t=M6(t)),i.cacheBust&&r.cache==="default"&&(t=zF(t,"request.preventCache",Date.now()));let F=te({},i.query);e.credentialToken&&(F.token=e.credentialToken);let D=f0(F);Ie("esri-url-encodes-apostrophe")&&(D=D.replace(/'/g,"%27"));const z=t.length+1+D.length;let H;d=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||z>da.maxUrlLength;const J=i.useProxy||!!k2(t);if(J){const Y=jue(t);H=Y.path,!d&&H.length+1+z>da.maxUrlLength&&(d=!0),Y.query&&(F=te(te({},Y.query),F))}if(r.method==="HEAD"&&(d||J)){if(d)throw z>da.maxUrlLength?fa("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):fa("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(J)throw fa("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(d?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=E6(t,F):(r.body=f0(F),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=E6(t,F),J&&(e.useProxy=!0,t=`${H}?${t}`),F.token&&tL&&r.body instanceof FormData&&!dce(t)&&r.body.set("token",F.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!Bg(t,b6())){if(_6(t))e.withCredentials=!0;else if(gr){const Y=gr.findServerInfo(t);Y&&Y.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",mce(t)&&await vce(d?E6(t,F):t))}let v,_,M=0,T=!1;f>0&&(M=setTimeout(()=>{T=!0,e.controller.abort()},f));try{if(i.responseType==="native-request-init")_=r,_.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||d||Tce(i.headers)||!s&&!e.useProxy&&da.proxyUrl&&!iL(t)){if(v=await li._abortableFetch(t,r),e.useProxy||xce(t),i.responseType==="native")_=v;else if(r.method!=="HEAD")if(v.ok){switch(l){case"array-buffer":_=await v.arrayBuffer();break;case"blob":case"image":_=await v.blob();break;default:_=await v.text()}if(M&&(clearTimeout(M),M=0),l==="json"||l==="xml"||l==="document")if(_)switch(l){case"json":_=JSON.parse(_);break;case"xml":_=nL(_,"application/xml");break;case"document":_=nL(_,"text/html")}else _=null;if(_){if(l==="array-buffer"||l==="blob"){const F=v.headers.get("Content-Type");if(F&&/application\/json|text\/plain/i.test(F)&&_[l==="blob"?"size":"byteLength"]<=750)try{const D=await new Response(_).json();D.error&&(_=D)}catch{}}l==="image"&&_ instanceof Blob&&(_=await sL(URL.createObjectURL(_),e,!0))}}else _=await v.text()}else _=await sL(t,e)}catch(F){if(F.name==="AbortError")throw T?new Error("Timeout exceeded"):zi("Request canceled");if(!(!v&&F instanceof TypeError&&da.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||iL(t))throw F;e.redoRequest=!0,Vue({proxyUrl:da.proxyUrl,urlPrefix:(k=pa(t))!=null?k:""})}finally{M&&clearTimeout(M)}return[v,_]}async function Ice(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers=te(te({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=te(te({},t.requestOptions.query),e.query)),e.before){let i,r;try{r=await e.before(t)}catch(s){i=fa("request:interceptor",s,t)}if((r instanceof Error||r instanceof fe)&&(i=fa("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function Tce(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function nL(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function Ece(e){var l;let t,i;await Mce(e);try{do[t,i]=await $ce(e);while(!await Cce(e,t,i))}catch(f){const d=fa("request:server",f,e.params,t);throw d.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(d),d}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((l=i.user)==null?void 0:l.username)&&!_6(r)){const f=pa(r,!0);f&&da.trustedServers.push(f)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&gce(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&gr){const f=gr.findServerInfo(s.server);let d=f&&f.owningSystemUrl;if(d){d=d.replace(/\/?$/,"/sharing");const v=gr.findCredential(d,s.userId);v&&gr._getIdenticalSvcIdx(d,v)===-1&&v.resources.unshift(d)}}return{data:i,getHeader:t?f=>t==null?void 0:t.headers.get(f):R6,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Cce(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,l;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[N2]=i,s;i&&(i.error?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s=te({},i),s[N2]=i,s.details=i.messages));let f,d=null;s&&(l=Number(s.code),d=s.hasOwnProperty("subcode")?Number(s.subcode):null,f=s.messageCode,f=f&&f.toUpperCase());const v=r.authMode;if(l===403&&(d===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(v!=="no-prompt"||l===498)&&l!==void 0&&bce.includes(l)&&!rL(e.params.url)&&(l!==403||f&&!wce.includes(f)&&(d==null||d===2&&e.credentialToken))){await F6();try{const _=await gr.getCredential(e.params.url,{error:fa("request:server",s,e.params),prompt:v!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=_,e.credentialToken=_.token,e.useSSL=e.useSSL||_.ssl,!1}catch(_){if(v==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=_}}if(s)throw s;return!0}function sL(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=da.priority,s.src=e,yce(s,e,i,r)}li._abortableFetch=null,li._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var Ace=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:li}),Jc;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Jc||(Jc={}));class Pce{constructor(t){this.instance=t,this._resolver=eu(),this._status=Jc.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Jc.RESOLVED,this._cleanUp()},()=>{this._status=Jc.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Jc.RESOLVED}isRejected(){return this._status===Jc.REJECTED}isFulfilled(){return this._status!==Jc.PENDING}abort(){this._resolver.reject(zi())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=eu(),i=[...this._resolvingPromises,Lr(t.promise)],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||Ks(s)||this._resolver.reject(s)}),t.resolve()}}const j2=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new Pce(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,l)=>{this._promiseProps.when(s,l)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=m([X("esri.core.Promise")],t),t};let D2=class extends j2(ot){};D2=m([X("esri.core.Promise")],D2);const Oce="not-loaded",kce="loading",Rce="failed",oL="loaded",aL=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=l=>{const f=new Promise((d,v)=>{const _=x4(l,v);this.destroyed&&v(new fe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(d,v).finally(()=>{_&&_.remove()})});if(this.loadStatus===Oce){this._set("loadStatus",kce);const d=this._loadController=new AbortController;s({signal:d.signal}),Eo(d.signal,()=>{this._promiseProps.abort()})}return r(),f}})),this.when(()=>{this._set("loadStatus",oL),this._loadController=null},r=>{this._set("loadStatus",Rce),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===oL}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new fe("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return m([x({readOnly:!0})],t.prototype,"loaded",null),m([x({readOnly:!0})],t.prototype,"loadError",void 0),m([x({clonable:!1})],t.prototype,"loadStatus",void 0),m([x({type:[os],readOnly:!0})],t.prototype,"loadWarnings",null),t=m([X("esri.core.Loadable")],t),t};let Zg=class extends aL(D2){};Zg=m([X("esri.core.Loadable")],Zg),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=aL,e.isLoadable=t}(Zg||(Zg={}));const hl=Zg;var L6;const Fce=new bt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let No=L6=class extends ot{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new L6({categories:this.categories?ve(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(f=>Array.isArray(f)?JSON.stringify(f):f)),this.extent){const f=Uw(this.extent,At.WGS84);q(f)&&(r=`${f.xmin},${f.ymin},${f.xmax},${f.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const l={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(l.sortField=this.sortField.split(",").map(f=>Fce.toJSON(f.trim())).join(","),l.sortOrder=this.sortOrder),{query:te(te({},t),l)}}};m([x()],No.prototype,"categories",void 0),m([x()],No.prototype,"disableExtraQuery",void 0),m([x({type:ai})],No.prototype,"extent",void 0),m([x()],No.prototype,"filter",void 0),m([x()],No.prototype,"num",void 0),m([x()],No.prototype,"query",void 0),m([x()],No.prototype,"sortField",void 0),m([x()],No.prototype,"sortOrder",null),m([x()],No.prototype,"start",void 0),No=L6=m([X("esri.portal.PortalQueryParams")],No);const fu=No;let Vp=class extends ot{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};m([x()],Vp.prototype,"nextQueryParams",void 0),m([x()],Vp.prototype,"queryParams",void 0),m([x()],Vp.prototype,"results",void 0),m([x()],Vp.prototype,"total",void 0),Vp=m([X("esri.portal.PortalQueryResult")],Vp);const Lce=Vp;let yu=class extends Ee{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new fe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};m([x({type:Date})],yu.prototype,"created",void 0),m([x()],yu.prototype,"id",void 0),m([x()],yu.prototype,"portal",void 0),m([x()],yu.prototype,"title",void 0),m([x({readOnly:!0})],yu.prototype,"url",null),m([x()],yu.prototype,"username",void 0),yu=m([X("esri.portal.PortalFolder")],yu);const Nce=yu;let en=class extends Ee{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return ss(this.portal)._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return ss(this.portal)._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new fe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=Ai(fu,e);const r=ss(this.portal);return parseFloat(r.currentVersion)>5?(i=i||new fu,r._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new fu,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=ss(this.portal);return i._fetchSelf(i.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const l=new fu;return l.disableExtraQuery=!0,l.num=1,l.query=s,i.queryGroups(l,t)}throw new fe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],l=new fu;return l.num=1,l.query=`typekeywords:"${e}"`,s.queryItems(l,t)}throw new fe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const l=s&&s.categorySchema;return l&&l.length?l:[]}):[])}};m([x()],en.prototype,"access",void 0),m([x({type:Date})],en.prototype,"created",void 0),m([x()],en.prototype,"description",void 0),m([x()],en.prototype,"id",void 0),m([x()],en.prototype,"isInvitationOnly",void 0),m([x({type:Date})],en.prototype,"modified",void 0),m([x()],en.prototype,"owner",void 0),m([x()],en.prototype,"portal",void 0),m([x()],en.prototype,"snippet",void 0),m([x()],en.prototype,"sortField",void 0),m([x()],en.prototype,"sortOrder",void 0),m([x()],en.prototype,"tags",void 0),m([x()],en.prototype,"thumbnail",void 0),m([x({readOnly:!0})],en.prototype,"thumbnailUrl",null),m([x()],en.prototype,"title",void 0),m([x({readOnly:!0})],en.prototype,"url",null),en=m([X("esri.portal.PortalGroup")],en);const N6=en;var jce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:N6}),j6;let Hi=j6=class extends Ee{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let l=this.userContentUrl;return r&&(l+="/"+(typeof r=="string"?r:r.id)),this.portal._request(l+"/addItem",s).then(f=>(t.id=f.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){var t;const e={query:{num:1}};return this.portal._request((t=this.userContentUrl)!=null?t:"",e).then(i=>{let r;return r=i&&i.folders?i.folders.map(s=>{const l=Nce.fromJSON(s);return l.portal=this.portal,l}):[],r})}fetchGroups(){var e;return this.portal._request((e=this.url)!=null?e:"").then(t=>{let i;return i=t&&t.groups?t.groups.map(r=>{const s=N6.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchItems(e){var s;const t=e!=null?e:{};let i,r=(s=this.userContentUrl)!=null?s:"";return t.folder&&(r+="/"+t.folder.id),Promise.resolve().then(function(){return CL}).then(({default:l})=>{i=l;const f={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal._request(r,{query:f})}).then(l=>{let f;return l&&l.items?(f=l.items.map(d=>{const v=i.fromJSON(d);return v.portal=this.portal,v}),Promise.all(f.map(d=>d.load())).catch(d=>d).then(()=>({items:f,nextStart:l.nextStart,total:l.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new N6({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new fe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new fe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new j6;return t.sourceJSON=e,t.read(e),t}};m([x()],Hi.prototype,"access",void 0),m([x({type:Date})],Hi.prototype,"created",void 0),m([x()],Hi.prototype,"culture",void 0),m([x()],Hi.prototype,"description",void 0),m([x()],Hi.prototype,"email",void 0),m([x()],Hi.prototype,"favGroupId",void 0),m([x()],Hi.prototype,"fullName",void 0),m([x({type:Date})],Hi.prototype,"modified",void 0),m([x()],Hi.prototype,"orgId",void 0),m([x()],Hi.prototype,"portal",void 0),m([x()],Hi.prototype,"preferredView",void 0),m([x()],Hi.prototype,"privileges",void 0),m([x()],Hi.prototype,"region",void 0),m([x()],Hi.prototype,"role",void 0),m([x()],Hi.prototype,"roleId",void 0),m([x()],Hi.prototype,"sourceJSON",void 0),m([x()],Hi.prototype,"thumbnail",void 0),m([x({readOnly:!0})],Hi.prototype,"thumbnailUrl",null),m([x()],Hi.prototype,"units",void 0),m([x({readOnly:!0})],Hi.prototype,"userContentUrl",null),m([x({readOnly:!0})],Hi.prototype,"url",null),m([x()],Hi.prototype,"username",void 0),m([x()],Hi.prototype,"userType",void 0),Hi=j6=m([X("esri.portal.PortalUser")],Hi);const D6=Hi;var Dce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:D6}),ro;let V6;const lL={PortalGroup:()=>Promise.resolve().then(function(){return jce}),PortalItem:()=>Promise.resolve().then(function(){return CL}),PortalUser:()=>Promise.resolve().then(function(){return Dce})};let Qe=ro=class extends ng(hl){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=gi.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriIdCredentialCreateHandle=Er(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)gi.request.trustedServers.includes(t)||gi.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=D6.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(function(){return Mhe}).then(({default:i})=>{fr(e),V6=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(gr){const r=gr;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==ro.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn().catch(()=>{})}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import("./ElevationLayer.e7a7683d.js")).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new fu;return i.query=e||(gi.apiKey&&QF(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,t)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(l=>l.type==="Web Map").map(l=>new V6({portalItem:l})):[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):To(e)?Promise.reject(zi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new fu;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return To(e)?Promise.reject(zi()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||oa();return this._request(this.restUrl+"/portals/regions",je(te({},e),{query:{culture:t}}))}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||oa();return this._request(this.restUrl+"/portals/self/settings",je(te({},e),{query:{culture:t}}))}static getDefault(){return ro._default&&!ro._default.destroyed||(ro._default=new ro),ro._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new fe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ro({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new fe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!(t==null?void 0:t.url))throw new fe("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s=te({authMode:e,query:{culture:oa().toLowerCase()}},i);return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(r,s)}_queryPortal(e,t,i,r){const s=Ai(fu,t),l=f=>this._request(this.restUrl+e,te(te({},s.toRequestOptions(this)),r)).then(d=>{const v=s.clone();return v.start=d.nextStart,new Lce({nextQueryParams:v,queryParams:s,total:d.total,results:ro._resultsToTypedArray(f,{portal:this},d,r)})}).then(d=>Promise.all(d.results.map(v=>typeof v.when=="function"?v.when():d)).then(()=>d,v=>(Gf(v),d)));return i&&lL[i]?lL[i]().then(({default:f})=>(fr(r),l(f))):l()}_signIn(){if(this.authMode===ro.AUTH_MODE_ANONYMOUS)return Promise.reject(new fe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return gr?gr.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const s=ro._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(l=>typeof l.when=="function"?l.when():r)).then(()=>s,()=>s)})}_readBasemap(e){if(e){const t=V6.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i=te({f:"json"},t.query),{authMode:r=this.authMode===ro.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:l=!1,method:f="auto",responseType:d="json",signal:v}=t,_={authMode:r,body:s,cacheBust:l,method:f,query:i,responseType:d,timeout:0,signal:v};return li(this._normalizeSSL(e),_).then(M=>M.data)}static _resultsToTypedArray(e,t,i,r){let s;if(i){const l=q(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(f=>{const d=Object.assign(e?e.fromJSON(f):f,t);return typeof d.load=="function"&&d.load(l),d}))}else s=[];return s}};Qe.AUTH_MODE_ANONYMOUS="anonymous",Qe.AUTH_MODE_AUTO="auto",Qe.AUTH_MODE_IMMEDIATE="immediate",m([x()],Qe.prototype,"access",void 0),m([x()],Qe.prototype,"allSSL",void 0),m([x()],Qe.prototype,"authMode",void 0),m([x()],Qe.prototype,"authorizedCrossOriginDomains",void 0),m([Be("authorizedCrossOriginDomains")],Qe.prototype,"readAuthorizedCrossOriginDomains",null),m([x()],Qe.prototype,"basemapGalleryGroupQuery",void 0),m([x()],Qe.prototype,"bingKey",void 0),m([x()],Qe.prototype,"canListApps",void 0),m([x()],Qe.prototype,"canListData",void 0),m([x()],Qe.prototype,"canListPreProvisionedItems",void 0),m([x()],Qe.prototype,"canProvisionDirectPurchase",void 0),m([x()],Qe.prototype,"canSearchPublic",void 0),m([x()],Qe.prototype,"canShareBingPublic",void 0),m([x()],Qe.prototype,"canSharePublic",void 0),m([x()],Qe.prototype,"canSignInArcGIS",void 0),m([x()],Qe.prototype,"canSignInIDP",void 0),m([x()],Qe.prototype,"colorSetsGroupQuery",void 0),m([x()],Qe.prototype,"commentsEnabled",void 0),m([x({type:Date})],Qe.prototype,"created",void 0),m([x()],Qe.prototype,"credential",void 0),m([x()],Qe.prototype,"culture",void 0),m([x()],Qe.prototype,"currentVersion",void 0),m([x()],Qe.prototype,"customBaseUrl",void 0),m([x()],Qe.prototype,"defaultBasemap",void 0),m([Be("defaultBasemap")],Qe.prototype,"readDefaultBasemap",null),m([x()],Qe.prototype,"defaultDevBasemap",void 0),m([Be("defaultDevBasemap")],Qe.prototype,"readDefaultDevBasemap",null),m([x({type:ai})],Qe.prototype,"defaultExtent",void 0),m([x()],Qe.prototype,"defaultVectorBasemap",void 0),m([Be("defaultVectorBasemap")],Qe.prototype,"readDefaultVectorBasemap",null),m([x()],Qe.prototype,"description",void 0),m([x()],Qe.prototype,"devBasemapGalleryGroupQuery",void 0),m([x()],Qe.prototype,"eueiEnabled",void 0),m([x({readOnly:!0})],Qe.prototype,"extraQuery",null),m([x()],Qe.prototype,"featuredGroups",void 0),m([x()],Qe.prototype,"featuredItemsGroupQuery",void 0),m([x()],Qe.prototype,"galleryTemplatesGroupQuery",void 0),m([x()],Qe.prototype,"livingAtlasGroupQuery",void 0),m([x()],Qe.prototype,"hasCategorySchema",void 0),m([x()],Qe.prototype,"helpBase",void 0),m([x()],Qe.prototype,"helperServices",void 0),m([x()],Qe.prototype,"helpMap",void 0),m([x()],Qe.prototype,"homePageFeaturedContent",void 0),m([x()],Qe.prototype,"homePageFeaturedContentCount",void 0),m([x()],Qe.prototype,"httpPort",void 0),m([x()],Qe.prototype,"httpsPort",void 0),m([x()],Qe.prototype,"id",void 0),m([x()],Qe.prototype,"ipCntryCode",void 0),m([x({readOnly:!0})],Qe.prototype,"isOrganization",null),m([x()],Qe.prototype,"isPortal",void 0),m([x()],Qe.prototype,"isReadOnly",void 0),m([x({readOnly:!0})],Qe.prototype,"itemPageUrl",null),m([x()],Qe.prototype,"layerTemplatesGroupQuery",void 0),m([x()],Qe.prototype,"maxTokenExpirationMinutes",void 0),m([x({type:Date})],Qe.prototype,"modified",void 0),m([x()],Qe.prototype,"name",void 0),m([x()],Qe.prototype,"portalHostname",void 0),m([x()],Qe.prototype,"portalMode",void 0),m([x()],Qe.prototype,"portalProperties",void 0),m([x()],Qe.prototype,"region",void 0),m([x({readOnly:!0})],Qe.prototype,"restUrl",null),m([x()],Qe.prototype,"rotatorPanels",void 0),m([x()],Qe.prototype,"showHomePageDescription",void 0),m([x()],Qe.prototype,"sourceJSON",void 0),m([x()],Qe.prototype,"staticImagesUrl",void 0),m([x({json:{name:"2DStylesGroupQuery"}})],Qe.prototype,"stylesGroupQuery2d",void 0),m([x({json:{name:"stylesGroupQuery"}})],Qe.prototype,"stylesGroupQuery3d",void 0),m([x()],Qe.prototype,"supportsHostedServices",void 0),m([x()],Qe.prototype,"symbolSetsGroupQuery",void 0),m([x()],Qe.prototype,"templatesGroupQuery",void 0),m([x()],Qe.prototype,"thumbnail",void 0),m([x({readOnly:!0})],Qe.prototype,"thumbnailUrl",null),m([x()],Qe.prototype,"units",void 0),m([x()],Qe.prototype,"url",void 0),m([x()],Qe.prototype,"urlKey",void 0),m([Be("urlKey")],Qe.prototype,"readUrlKey",null),m([x()],Qe.prototype,"user",void 0),m([Be("user")],Qe.prototype,"readUser",null),m([x()],Qe.prototype,"useStandardizedQuery",void 0),m([x()],Qe.prototype,"useVectorBasemaps",void 0),m([x()],Qe.prototype,"vectorBasemapGalleryGroupQuery",void 0),Qe=ro=m([X("esri.portal.Portal")],Qe);const Ts=Qe;let zp=class extends yr(Ee){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return q(e)&&e.placement===this.placement&&e.style===this.style&&(ae(this.color)&&ae(e.color)||q(this.color)&&q(e.color)&&this.color.toJSON()===e.color.toJSON())}};m([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],zp.prototype,"type",void 0),m([x({type:iue,json:{default:"begin-end",write:!0}})],zp.prototype,"placement",void 0),m([x({type:fF,json:{default:"arrow",write:!0}})],zp.prototype,"style",void 0),m([x({type:mt,json:{type:[hi],default:null,write:!0}})],zp.prototype,"color",void 0),zp=m([X("esri.symbols.LineStyleMarker3D")],zp);const z6=zp;var V2;let pl=V2=class extends ol{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ro(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:q(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:q(this.pattern)?this.pattern.clone():null,marker:q(this.marker)?this.marker.clone():null};return new V2(e)}static fromSimpleLineSymbol(e){var i,r,s;const t={enabled:!0,size:(i=e.width)!=null?i:Ro(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new o6({style:e.style}):null,material:new to({color:(e.color||jg).clone()}),marker:e.marker?new z6({placement:e.marker.placement,style:e.marker.style,color:(s=(r=e.marker.color)==null?void 0:r.clone())!=null?s:null}):null};return new V2(t)}};m([x({type:to,json:{write:!0}})],pl.prototype,"material",void 0),m([wt({Line:"line"},{readOnly:!0})],pl.prototype,"type",void 0),m([x({type:MF,json:{write:!0,default:"miter"}})],pl.prototype,"join",void 0),m([x({type:y6,json:{write:!0,default:"butt"}})],pl.prototype,"cap",void 0),m([x(al)],pl.prototype,"size",void 0),m([x(bF)],pl.prototype,"pattern",void 0),m([x({types:{key:"type",base:z6,typeMap:{style:z6}},json:{write:!0}})],pl.prototype,"marker",void 0),pl=V2=m([X("esri.symbols.LineSymbol3DLayer")],pl);const Kg=pl;var G6;const Vce=In()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Yg=G6=class extends Ee{clone(){return new G6({href:this.href,primitive:this.primitive})}};m([x({type:String,json:{read:C6,write:Lp}})],Yg.prototype,"href",void 0),m([wt(Vce)],Yg.prototype,"primitive",void 0),Yg=G6=m([X("esri.symbols.support.ObjectSymbol3DLayerResource")],Yg);const aCe="sphere";var q6;let Gp=q6=class extends ot{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new q6({x:this.x,y:this.y,z:this.z})}};m([x({type:Number})],Gp.prototype,"x",void 0),m([x({type:Number})],Gp.prototype,"y",void 0),m([x({type:Number})],Gp.prototype,"z",void 0),Gp=q6=m([X("esri.symbols.support.Symbol3DAnchorPosition3D")],Gp);var U6;let zn=U6=class extends ol{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new U6({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:q(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};m([x({type:to,json:{write:!0}})],zn.prototype,"material",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zn.prototype,"castShadows",void 0),m([x({type:Yg,json:{write:!0}})],zn.prototype,"resource",void 0),m([wt({Object:"object"},{readOnly:!0})],zn.prototype,"type",void 0),m([x({type:Number,json:{write:!0}})],zn.prototype,"width",void 0),m([x({type:Number,json:{write:!0}})],zn.prototype,"height",void 0),m([x({type:Number,json:{write:!0}})],zn.prototype,"depth",void 0),m([wt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),x({json:{default:"origin"}})],zn.prototype,"anchor",void 0),m([x({type:Gp,json:{type:[Number],read:{reader:e=>new Gp({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],zn.prototype,"anchorPosition",void 0),m([x({type:Number,json:{write:!0}})],zn.prototype,"heading",void 0),m([x({type:Number,json:{write:!0}})],zn.prototype,"tilt",void 0),m([x({type:Number,json:{write:!0}})],zn.prototype,"roll",void 0),m([x({readOnly:!0})],zn.prototype,"isPrimitive",null),zn=U6=m([X("esri.symbols.ObjectSymbol3DLayer")],zn);const B6=zn;var H6;let ds=H6=class extends ol{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new H6({enabled:this.enabled,material:q(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};m([x({type:to,json:{write:!0}})],ds.prototype,"material",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ds.prototype,"castShadows",void 0),m([wt({Path:"path"},{readOnly:!0})],ds.prototype,"type",void 0),m([x({type:["circle","quad"],json:{write:!0,default:"circle"}})],ds.prototype,"profile",void 0),m([x({type:MF,json:{write:!0,default:"miter"}})],ds.prototype,"join",void 0),m([x({type:xue,json:{write:!0,default:"butt"}})],ds.prototype,"cap",void 0),m([x({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ds.prototype,"width",void 0),m([Be("width",["width","size","height"])],ds.prototype,"readWidth",null),m([x({type:Number,json:{write:!0}})],ds.prototype,"height",void 0),m([Be("height",["height","size","width"])],ds.prototype,"readHeight",null),m([x({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ds.prototype,"anchor",void 0),m([x({type:["heading","all"],json:{write:!0,default:"all"}})],ds.prototype,"profileRotation",void 0),ds=H6=m([X("esri.symbols.PathSymbol3DLayer")],ds);const W6=ds;var J6;let v0=J6=class extends Ee{constructor(){super(...arguments),this.color=new mt([0,0,0,1]),this.size=0}clone(){const e={color:ve(this.color),size:this.size};return new J6(e)}};m([x(Bc)],v0.prototype,"color",void 0),m([x(al)],v0.prototype,"size",void 0),v0=J6=m([X("esri.symbols.support.Symbol3DHalo")],v0);let Xg=class extends yr(Ee){constructor(e){super(e),this.color=null}};m([x(Bc)],Xg.prototype,"color",void 0),Xg=m([X("esri.symbols.support.Symbol3DTextBackground")],Xg);var z2;let Es=z2=class extends ol{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){q(e)&&q(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s=je(te({},r),{textSymbol3D:!0});t.font=e.write({},s),delete t.font.size}get size(){return q(this._userSize)?this._userSize:q(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,q(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new z2({enabled:this.enabled,font:this.font&&ve(this.font),halo:this.halo&&ve(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:q(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ve(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new z2({font:q(e.font)?e.font.clone():new P2,halo:zce(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new to({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Xg({color:e.backgroundColor.clone()}):null})}};function zce(e,t){return e&&t!=null&&t>0?new v0({color:ve(e),size:t}):null}m([x({type:P2,json:{write:!0}})],Es.prototype,"font",null),m([Xe("font")],Es.prototype,"writeFont",null),m([x({type:v0,json:{write:!0}})],Es.prototype,"halo",void 0),m([x(je(te({},IF),{json:{default:"center",write:!0}}))],Es.prototype,"horizontalAlignment",void 0),m([x(je(te({},$F),{json:{default:1,write:!0}}))],Es.prototype,"lineHeight",void 0),m([x({type:to,json:{write:!0}})],Es.prototype,"material",void 0),m([x({type:Xg,json:{write:!0}})],Es.prototype,"background",void 0),m([x(al)],Es.prototype,"size",null),m([x({type:String,json:{write:!0}})],Es.prototype,"text",void 0),m([wt({Text:"text"},{readOnly:!0})],Es.prototype,"type",void 0),m([x(je(te({},TF),{json:{default:"baseline",write:!0}}))],Es.prototype,"verticalAlignment",void 0),Es=z2=m([X("esri.symbols.TextSymbol3DLayer")],Es);const b0=Es;var Z6;let Zc=Z6=class extends ol{constructor(e){super(e),this.color=K6.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Z6({color:ve(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};m([x({type:mt,nonNullable:!0,json:{type:[hi],write:(e,t,i)=>t[i]=e.toArray(mt.AlphaMode.UNLESS_OPAQUE),default:()=>K6.clone(),defaultEquals:e=>e.toCss(!0)===K6.toCss(!0)}})],Zc.prototype,"color",void 0),m([wt({Water:"water"},{readOnly:!0})],Zc.prototype,"type",void 0),m([x({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Zc.prototype,"waterbodySize",void 0),m([x({type:Number,json:{write:!0,default:null}})],Zc.prototype,"waveDirection",void 0),m([x({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Zc.prototype,"waveStrength",void 0),Zc=Z6=m([X("esri.symbols.WaterSymbol3DLayer")],Zc);const K6=new mt([0,119,190]),uL=Zc;var Y6;let qp=Y6=class extends ot{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Y6({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};m([x({type:String})],qp.prototype,"name",void 0),m([x({type:String})],qp.prototype,"styleUrl",void 0),m([x({type:String})],qp.prototype,"styleName",void 0),m([x({type:Ts})],qp.prototype,"portal",void 0),qp=Y6=m([X("esri.symbols.support.StyleOrigin")],qp);const X6=qp;var Q6;let Qg=Q6=class extends ot{constructor(){super(...arguments),this.url=""}clone(){return new Q6({url:this.url})}};m([x({type:String})],Qg.prototype,"url",void 0),Qg=Q6=m([X("esri.symbols.support.Thumbnail")],Qg);const cL={icon:jp,object:B6,line:Kg,path:W6,fill:qg,extrude:dF,text:b0,water:uL},Gce=gt.ofType({base:ol,key:"type",typeMap:cL,errorContext:"symbol-layer"});let dl=class extends hs{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||gt;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&Pe.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Dp(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=y0(e.styleUrl,i);return new X6({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new X6({portal:i&&i.portal||Ts.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new os("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let s=Hg(e.styleUrl,r);io(s)&&(s=ha(s)),t.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!RF(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new os("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof ol||e&&cL[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};m([x({json:{read:!1,write:!1}})],dl.prototype,"color",null),m([x({type:Gce,nonNullable:!0,json:{write:!0}}),ri(ZF)],dl.prototype,"symbolLayers",null),m([x({type:X6})],dl.prototype,"styleOrigin",void 0),m([Be("styleOrigin")],dl.prototype,"readStyleOrigin",null),m([Xe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],dl.prototype,"writeStyleOrigin",null),m([x({type:Qg,json:{read:!1}})],dl.prototype,"thumbnail",void 0),m([x({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],dl.prototype,"type",void 0),dl=m([X("esri.symbols.Symbol3D")],dl);const w0=dl;let em=class extends Ee{constructor(e){super(e),this.visible=!0}clone(){}};m([x({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],em.prototype,"type",void 0),m([x({readOnly:!0})],em.prototype,"visible",void 0),em=m([X("esri.symbols.callouts.Callout3D")],em);const hL=em;var eM;let G2=eM=class extends Ee{constructor(){super(...arguments),this.color=new mt("white")}clone(){return new eM({color:ve(this.color)})}};m([x(Bc)],G2.prototype,"color",void 0),G2=eM=m([X("esri.symbols.callouts.LineCallout3DBorder")],G2);const pL=G2;Object.freeze(Object.defineProperty({__proto__:null,default:pL},Symbol.toStringTag,{value:"Module"}));var tM;let Kc=tM=class extends hL{constructor(e){super(e),this.type="line",this.color=new mt([0,0,0,1]),this.size=Ro(1),this.border=null}get visible(){return this.size>0&&q(this.color)&&this.color.a>0}clone(){return new tM({color:ve(this.color),size:this.size,border:ve(this.border)})}};m([wt({line:"line"},{readOnly:!0})],Kc.prototype,"type",void 0),m([x(Bc)],Kc.prototype,"color",void 0),m([x(al)],Kc.prototype,"size",void 0),m([x({type:pL,json:{write:!0}})],Kc.prototype,"border",void 0),m([x({readOnly:!0})],Kc.prototype,"visible",null),Kc=tM=m([X("esri.symbols.callouts.LineCallout3D")],Kc);const qce=Kc;function iM(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||q(t.maxWorldLength)&&t.maxWorldLength<=0)}function dL(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!iM(e)}function lCe(e){return e.type==="point-3d"||e.type==="label-3d"}function uCe(e){return e.horizontalAlignment==="center"}const fL={types:{key:"type",base:hL,typeMap:{line:qce}},json:{write:!0}};var rM;let _0=rM=class extends Ee{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new rM({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};m([x(al)],_0.prototype,"screenLength",void 0),m([x({type:Number,nonNullable:!0,json:{write:!0,default:0}})],_0.prototype,"minWorldLength",void 0),m([x({type:Number,json:{write:!0}})],_0.prototype,"maxWorldLength",void 0),_0=rM=m([X("esri.symbols.support.Symbol3DVerticalOffset")],_0);const yL=_0;var q2;const gL=gt.ofType({base:null,key:"type",typeMap:{text:b0}});let Yc=q2=class extends w0{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new gL,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return dL(this)}hasVisibleVerticalOffset(){return iM(this)}clone(){return new q2({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail),callout:ve(this.callout),verticalOffset:ve(this.verticalOffset)})}static fromTextSymbol(e){return new q2({symbolLayers:[b0.fromTextSymbol(e)]})}};m([x({type:yL,json:{write:!0}})],Yc.prototype,"verticalOffset",void 0),m([x(fL)],Yc.prototype,"callout",void 0),m([x({json:{read:!1,write:!1}})],Yc.prototype,"styleOrigin",void 0),m([x({type:gL})],Yc.prototype,"symbolLayers",void 0),m([wt({LabelSymbol3D:"label-3d"},{readOnly:!0})],Yc.prototype,"type",void 0),Yc=q2=m([X("esri.symbols.LabelSymbol3D")],Yc);const U2=Yc;var B2;const mL=gt.ofType({base:null,key:"type",typeMap:{line:Kg,path:W6}}),Uce=gt.ofType({base:null,key:"type",typeMap:{line:Kg,path:W6}});let tm=B2=class extends w0{constructor(e){super(e),this.symbolLayers=new mL,this.type="line-3d"}clone(){return new B2({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromSimpleLineSymbol(e){return new B2({symbolLayers:[Kg.fromSimpleLineSymbol(e)]})}};m([x({type:mL,json:{type:Uce}})],tm.prototype,"symbolLayers",void 0),m([wt({LineSymbol3D:"line-3d"},{readOnly:!0})],tm.prototype,"type",void 0),tm=B2=m([X("esri.symbols.LineSymbol3D")],tm);const H2=tm;let Xc=class extends hs{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};m([x({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Xc.prototype,"angle",void 0),m([x({type:["simple-marker","picture-marker"],readOnly:!0})],Xc.prototype,"type",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Xc.prototype,"xoffset",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Xc.prototype,"yoffset",void 0),m([x({type:Number,cast:e=>e==="auto"?e:di(e),json:{write:!0}})],Xc.prototype,"size",void 0),Xc=m([X("esri.symbols.MarkerSymbol")],Xc);const vL=Xc;var W2;const bL=gt.ofType({base:null,key:"type",typeMap:{fill:qg}});let im=W2=class extends w0{constructor(e){super(e),this.symbolLayers=new bL,this.type="mesh-3d"}clone(){return new W2({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromSimpleFillSymbol(e){return new W2({symbolLayers:[qg.fromSimpleFillSymbol(e)]})}};m([x({type:bL})],im.prototype,"symbolLayers",void 0),m([wt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],im.prototype,"type",void 0),im=W2=m([X("esri.symbols.MeshSymbol3D")],im);const J2=im;function Bce(e,t,i){return t.imageData?jF({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):wL(t.url,i)}function wL(e,t){var i;return Wce(t)&&!io(e)&&((i=t==null?void 0:t.layer)==null?void 0:i.parsedUrl)?Wc(t.layer.parsedUrl.path,"images",e):y0(e,t)}function Hce(e,t,i,r){if(Fp(e)){const s=NF(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&Lp(i.url,t,"url",r)}else Lp(e,t,"url",r)}const _L={json:{read:{source:["imageData","url"],reader:Bce},write:{writer(e,t,i,r){Hce(e,t,this.source,r)}}}},xL={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=wL(t.url,i)),r}}}};function Wce(e){var t,i;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((i=e.layer)==null?void 0:i.type)!=="stream")}var nM;let jo=nM=class extends yF{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=di(i)),r!=null&&(s.height=di(r)),s}clone(){const e=new nM({color:ve(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",ve(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};m([wt({esriPFS:"picture-fill"},{readOnly:!0})],jo.prototype,"type",void 0),m([x(_L)],jo.prototype,"url",void 0),m([x({type:Number,json:{write:!0}})],jo.prototype,"xscale",void 0),m([x({type:Number,json:{write:!0}})],jo.prototype,"yscale",void 0),m([x({type:Number,cast:di,json:{write:!0}})],jo.prototype,"width",void 0),m([x({type:Number,cast:di,json:{write:!0}})],jo.prototype,"height",void 0),m([x({type:Number,cast:di,json:{write:!0}})],jo.prototype,"xoffset",void 0),m([x({type:Number,cast:di,json:{write:!0}})],jo.prototype,"yoffset",void 0),m([x(xL)],jo.prototype,"source",void 0),jo=nM=m([X("esri.symbols.PictureFillSymbol")],jo);const SL=jo;var sM;let ya=sM=class extends vL{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=di(t)),i!=null&&(r.height=di(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new sM({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",ve(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};m([x({json:{write:!1}})],ya.prototype,"color",void 0),m([wt({esriPMS:"picture-marker"},{readOnly:!0})],ya.prototype,"type",void 0),m([x(_L)],ya.prototype,"url",void 0),m([x(xL)],ya.prototype,"source",void 0),m([x({type:Number,cast:di,json:{write:!0}})],ya.prototype,"height",void 0),m([Be("height",["height","size"])],ya.prototype,"readHeight",null),m([x({type:Number,cast:di,json:{write:!0}})],ya.prototype,"width",void 0),m([x({json:{write:!1}})],ya.prototype,"size",void 0),ya=sM=m([X("esri.symbols.PictureMarkerSymbol")],ya);const Z2=ya;var Up;const ML=gt.ofType({base:null,key:"type",typeMap:{icon:jp,object:B6,text:b0}});let Bp=Up=class extends w0{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new ML,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return dL(this)}hasVisibleVerticalOffset(){return iM(this)}clone(){return new Up({verticalOffset:ve(this.verticalOffset),callout:ve(this.callout),styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Up({symbolLayers:[jp.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Up({symbolLayers:[jp.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var r,s;if(((s=(r=e.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Up((i==null?void 0:i.callout)?{symbolLayers:[jp.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[jp.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Up({symbolLayers:[b0.fromTextSymbol(e)]})}};m([x({type:yL,json:{write:!0}})],Bp.prototype,"verticalOffset",void 0),m([x(fL)],Bp.prototype,"callout",void 0),m([x({type:ML,json:{origins:{"web-scene":{write:!0}}}})],Bp.prototype,"symbolLayers",void 0),m([wt({PointSymbol3D:"point-3d"},{readOnly:!0})],Bp.prototype,"type",void 0),Bp=Up=m([X("esri.symbols.PointSymbol3D")],Bp);const Hp=Bp;var rm;const $L=gt.ofType({base:null,key:"type",typeMap:{extrude:dF,fill:qg,icon:jp,line:Kg,object:B6,text:b0,water:uL}});let nm=rm=class extends w0{constructor(e){super(e),this.symbolLayers=new $L,this.type="polygon-3d"}clone(){return new rm({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromJSON(e){const t=new rm;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:q(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new rm({symbolLayers:[qg.fromSimpleFillSymbol(e)]})}};m([x({type:$L,json:{write:!0}})],nm.prototype,"symbolLayers",void 0),m([wt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],nm.prototype,"type",void 0),nm=rm=m([X("esri.symbols.PolygonSymbol3D")],nm);const sm=nm;var oM;const aM=new bt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Wp=oM=class extends yF{constructor(...e){super(...e),this.color=new mt([0,0,0,.25]),this.outline=new ps,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new oM({color:ve(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};m([x()],Wp.prototype,"color",void 0),m([x()],Wp.prototype,"outline",void 0),m([wt({esriSFS:"simple-fill"},{readOnly:!0})],Wp.prototype,"type",void 0),m([x({type:aM.apiValues,json:{read:aM.read,write:aM.write}})],Wp.prototype,"style",void 0),Wp=oM=m([X("esri.symbols.SimpleFillSymbol")],Wp);const fl=Wp;var lM;const uM=new bt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let yl=lM=class extends vL{constructor(...e){super(...e),this.color=new mt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ps}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=di(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new lM({angle:this.angle,color:ve(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};m([x()],yl.prototype,"color",void 0),m([Xe("color")],yl.prototype,"writeColor",null),m([wt({esriSMS:"simple-marker"},{readOnly:!0})],yl.prototype,"type",void 0),m([x()],yl.prototype,"size",void 0),m([x({type:uM.apiValues,json:{read:uM.read,write:uM.write}})],yl.prototype,"style",void 0),m([x({type:String,json:{write:!0}})],yl.prototype,"path",null),m([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ps}},json:{default:null,write:!0}})],yl.prototype,"outline",void 0),yl=lM=m([X("esri.symbols.SimpleMarkerSymbol")],yl);const no=yl;var cM;let Qi=cM=class extends hs{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new P2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return di(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new cM({angle:this.angle,backgroundColor:ve(this.backgroundColor),borderLineColor:ve(this.borderLineColor),borderLineSize:this.borderLineSize,color:ve(this.color),font:this.font&&this.font.clone(),haloColor:ve(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};m([x({type:mt,json:{write:!0}})],Qi.prototype,"backgroundColor",void 0),m([x({type:mt,json:{write:!0}})],Qi.prototype,"borderLineColor",void 0),m([x({type:Number,json:{write:!0}})],Qi.prototype,"borderLineSize",void 0),m([x({type:P2,json:{write:!0}})],Qi.prototype,"font",void 0),m([x(je(te({},IF),{json:{write:!0}}))],Qi.prototype,"horizontalAlignment",void 0),m([x({type:Boolean,json:{write:!0}})],Qi.prototype,"kerning",void 0),m([x({type:mt,json:{write:!0}})],Qi.prototype,"haloColor",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Qi.prototype,"haloSize",void 0),m([x({type:Boolean,json:{write:!0}})],Qi.prototype,"rightToLeft",void 0),m([x({type:Boolean,json:{write:!0}})],Qi.prototype,"rotated",void 0),m([x({type:String,json:{write:!0}})],Qi.prototype,"text",void 0),m([wt({esriTS:"text"},{readOnly:!0})],Qi.prototype,"type",void 0),m([x(je(te({},TF),{json:{write:!0}}))],Qi.prototype,"verticalAlignment",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Qi.prototype,"xoffset",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Qi.prototype,"yoffset",void 0),m([x({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Qi.prototype,"angle",void 0),m([x({type:Number,json:{write:!0}})],Qi.prototype,"width",void 0),m([x({type:Number})],Qi.prototype,"lineWidth",void 0),m([Xe("lineWidth")],Qi.prototype,"writeLineWidth",null),m([ri("lineWidth")],Qi.prototype,"castLineWidth",null),m([x($F)],Qi.prototype,"lineHeight",void 0),m([Xe("lineHeight")],Qi.prototype,"writeLineHeight",null),Qi=cM=m([X("esri.symbols.TextSymbol")],Qi);const x0=Qi;var hM;let ga=hM=class extends hs{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=q(this.portal)?this.portal:Ts.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new hM({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=q(t)?t.cache:null,r=i?this._fetchCacheKey:null;if(q(i)){const d=r&&i.get(r);if(d)return d.clone()}const s=await Jce();fr(t);const l=s.resolveWebStyleSymbol(this,{portal:this.portal},e,t);l.catch(d=>{Pe.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",d)});const f=await l;return e==="webRef"&&f.type==="point-3d"||e==="cimRef"&&f.type==="cim"?(q(i)&&i.set(r,f.clone()),f):null}};function Jce(){return import("./webStyleSymbolUtils.3830b14b.js")}m([x({json:{write:!1}})],ga.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],ga.prototype,"styleName",void 0),m([x({type:Ts,json:{write:!1}})],ga.prototype,"portal",void 0),m([x({type:String,json:{read:C6,write:Lp}})],ga.prototype,"styleUrl",void 0),m([x({type:Qg,json:{read:!1}})],ga.prototype,"thumbnail",void 0),m([x({type:String,json:{write:!0}})],ga.prototype,"name",void 0),m([wt({styleSymbolReference:"web-style"},{readOnly:!0})],ga.prototype,"type",void 0),m([x()],ga.prototype,"_fetchCacheKey",null),ga=hM=m([X("esri.symbols.WebStyleSymbol")],ga);const Jp=ga;function K2(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Zp(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Cs={base:hs,key:"type",typeMap:{"simple-fill":fl,"picture-fill":SL,"picture-marker":Z2,"simple-line":ps,"simple-marker":no,text:x0,"label-3d":U2,"line-3d":H2,"mesh-3d":J2,"point-3d":Hp,"polygon-3d":sm,"web-style":Jp,cim:Uc},errorContext:"symbol"},Zce={base:hs,key:"type",typeMap:{"picture-marker":Z2,"simple-marker":no,text:x0,"web-style":Jp,cim:Uc},errorContext:"symbol"},Kce=Ec({types:Cs}),Y2={base:hs,key:"type",typeMap:{"simple-fill":fl,"picture-fill":SL,"picture-marker":Z2,"simple-line":ps,"simple-marker":no,text:x0,"line-3d":H2,"mesh-3d":J2,"point-3d":Hp,"polygon-3d":sm,"web-style":Jp,cim:Uc},errorContext:"symbol"},Yce={base:hs,key:"type",typeMap:{text:x0,"label-3d":U2},errorContext:"symbol"},IL={base:hs,key:"type",typeMap:{"line-3d":H2,"mesh-3d":J2,"point-3d":Hp,"polygon-3d":sm,"web-style":Jp,cim:Uc},errorContext:"symbol"},Xce={base:hs,key:"type",typeMap:{"label-3d":U2},errorContext:"symbol"},TL=Ya(Cs);function Qce(e){if(!e)return null;const t={};for(const i in e){const r=fn(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function ehe(e){if(!q(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let As=class extends yr(Ee){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:tg(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&q(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:ehe(this.aggregateGeometries),geometry:q(this.geometry)?this.geometry.toJSON():null,symbol:q(this.symbol)?this.symbol.toJSON():null,attributes:te({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){q(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};m([x({value:null,json:{read:Qce}})],As.prototype,"aggregateGeometries",null),m([x({value:null})],As.prototype,"attributes",null),m([x({value:null,types:au,json:{read:fn}})],As.prototype,"geometry",null),m([x({type:Boolean})],As.prototype,"isAggregate",void 0),m([x({clonable:"reference"})],As.prototype,"layer",void 0),m([x({type:l0})],As.prototype,"popupTemplate",void 0),m([x({clonable:"reference"})],As.prototype,"sourceLayer",void 0),m([x({value:null,types:Cs})],As.prototype,"symbol",null),m([x({type:Boolean,value:!0})],As.prototype,"visible",null),As=m([X("esri.Graphic")],As),function(e){e.generateUID=tg}(As||(As={}));const Dr=As;function the(e,t,i){return Ms(e.map((r,s)=>t.apply(i,[r,s])))}async function ihe(e,t,i){return(await Ms(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}function pM(e){return{ok:!0,value:e}}function dM(e){return{ok:!1,error:e}}function rhe(e){return q(e)&&e.ok===!0?e.value:null}function nhe(e){return q(e)&&e.ok===!1?e.error:null}async function X2(e){if(ae(e))return{ok:!1,error:new Error("no promise provided")};try{return pM(await e)}catch(t){return dM(t)}}async function cCe(e){try{return pM(await e)}catch(t){return Gf(t),dM(t)}}function EL(e,t){return new Qc(e,t)}let Qc=class extends ot{constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Za(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(r=>{this._result=pM(r),this._cleanup()},r=>{this._result=dM(r),this._cleanup()}),this._abortHandle=Eo(t,this.abort)}get value(){return rhe(this._result)}get error(){return nhe(this._result)}get finished(){return q(this._result)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Er(this._abortHandle),this._abortController=null}};m([x()],Qc.prototype,"value",null),m([x()],Qc.prototype,"error",null),m([x()],Qc.prototype,"finished",null),m([x()],Qc.prototype,"promise",void 0),m([x()],Qc.prototype,"_result",void 0),Qc=m([X("esri.core.asyncUtils.ReactiveTask")],Qc);async function fM(e,t){return await e.load(),she(e,t)}async function she(e,t){const i=[],r=(...l)=>{for(const f of l)ae(f)||(Array.isArray(f)?r(...f):gt.isCollection(f)?f.forEach(d=>r(d)):hl.isLoadable(f)&&i.push(f))};t(r);let s=null;if(await ihe(i,async l=>{(await X2(ohe(l)?l.loadAll():l.load())).ok!==!1||s||(s=l)}),s)throw s.loadError;return e}function ohe(e){return"loadAll"in e&&typeof e.loadAll=="function"}const ahe=Pe.getLogger("esri.assets");function mi(e){if(!gi.assetsPath)throw ahe.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new fe("assets:path-not-set","config.assetsPath is not set");return Wc(gi.assetsPath,e)}let eh=class extends ot{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?je(te({},e),{path:this._normalizePath(e.path,e.portalItem)}):e}set path(e){q(e)&&io(e)?Pe.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(ae(i))throw new fe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:ow(t,"signal")})}async update(e,t){return(await import("./resourceUtils.2fc35fa5.js")).addOrUpdateResource(this,"update",e,t)}hasPath(){return q(this.path)}_normalizePath(e,t){return ae(e)?e:(e=e.replace(/^\/+/,""),q(t)&&io(e)&&(e=x6(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};m([x()],eh.prototype,"portalItem",void 0),m([x({type:String,value:null})],eh.prototype,"path",null),m([ri("path")],eh.prototype,"_castPath",null),m([x({type:String,readOnly:!0})],eh.prototype,"url",null),m([x({type:String,readOnly:!0})],eh.prototype,"itemRelativeUrl",null),eh=m([X("esri.portal.PortalItemResource")],eh);const lhe=eh;let om=class extends ot{constructor(e){super(e),this.created=null,this.rating=null}};m([x()],om.prototype,"created",void 0),m([x()],om.prototype,"rating",void 0),om=m([X("esri.portal.PortalRating")],om);const yM=om;var S0;const uhe=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),che=new Set(["KML","GeoJson","CSV"]);let Gt=S0=class extends ng(hl){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Vf(S0,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new ai(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,l=!1,f=!1,d=!1,v=!1,_=!1,M=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(l=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(f=t.includes("Table"),d=t.includes("Route Layer"),v=t.includes("Markup"),_=t.includes("Spatiotemporal"),M=t.includes("UtilityNetwork"),s=_&&f?"spatiotemporaltable":f?"table":d?"routelayer":v?"markup":_?"spatiotemporal":l?"featureshosted":M?"utilitynetwork":"features"):s=e==="map service"||e==="wms"||e==="wmts"?l||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):s=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="pro report template"?"proreporttemplate":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":e==="discussion"?"discussion":"maps",s?mi(i+s+r+".png"):null}get isLayer(){return this.type!=null&&uhe.has(this.type)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i,r;const e=this.itemUrl,t=this.thumbnail;return e&&t&&(r=(i=this.portal)==null?void 0:i._normalizeUrl(`${e}/info/${t}?f=json`))!=null?r:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){var r;const t=(r=this.portal)!=null?r:this.portal=Ts.getDefault(),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t._request(this.itemUrl,{signal:q(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof yM&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal._request(this.itemUrl+"/addRating",t),new yM({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:ve(this.applicationProxies),avgRating:this.avgRating,categories:ve(this.categories),created:ve(this.created),culture:this.culture,description:this.description,extent:ve(this.extent),groupCategories:ve(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ve(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ve(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:ve(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ve(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new S0({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await ss(this.portal)._request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return ss(this.portal)._request(this.itemUrl+"/data",je(te({responseType:e},t),{query:{token:this.apiKey}}))}async fetchRating(e){const t=await ss(this.portal)._request(this.itemUrl+"/rating",te({query:{token:this.apiKey}},e));return t.rating!=null?(t.created=new Date(t.created),new yM(t)):null}fetchRelatedItems(e,t){return ss(this.portal)._requestToTypedArray(this.itemUrl+"/relatedItems",te({query:je(te({},e),{token:this.apiKey})},t),S0)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){var e;return ss(this.portal)._request((e=this.itemUrl)!=null?e:"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(e){return this.id?this.load().then(()=>ss(this.portal)._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new fe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Fp(t)?r.query={data:t}:r.query={url:Lo(t)},q(i)&&(r.query.filename=i);else{const s=new FormData;q(i)?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new fe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await import("./resourceUtils.2fc35fa5.js")).fetchResources(this,e,t)}async addResource(e,t,i){const r=await import("./resourceUtils.2fc35fa5.js");return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await import("./resourceUtils.2fc35fa5.js");if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new fe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await import("./resourceUtils.2fc35fa5.js")).removeAllResources(this,e)}resourceFromPath(e){return new lhe({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:ve(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:ve(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ve(this.typeKeywords),url:this.url};return oO(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new S0({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};m([x({type:["private","shared","org","public"]})],Gt.prototype,"access",void 0),m([x()],Gt.prototype,"accessInformation",void 0),m([x({type:String})],Gt.prototype,"apiKey",void 0),m([x({json:{read:{source:"appProxies"}}})],Gt.prototype,"applicationProxies",void 0),m([x()],Gt.prototype,"avgRating",void 0),m([x()],Gt.prototype,"categories",void 0),m([x({type:Date})],Gt.prototype,"created",void 0),m([x()],Gt.prototype,"culture",void 0),m([x()],Gt.prototype,"description",void 0),m([x({readOnly:!0})],Gt.prototype,"displayName",null),m([x({type:ai})],Gt.prototype,"extent",void 0),m([Be("extent")],Gt.prototype,"readExtent",null),m([x()],Gt.prototype,"groupCategories",void 0),m([x({readOnly:!0})],Gt.prototype,"iconUrl",null),m([x()],Gt.prototype,"id",void 0),m([x({readOnly:!0})],Gt.prototype,"isLayer",null),m([x()],Gt.prototype,"itemControl",void 0),m([x({readOnly:!0})],Gt.prototype,"itemPageUrl",null),m([x({readOnly:!0})],Gt.prototype,"itemUrl",null),m([x()],Gt.prototype,"licenseInfo",void 0),m([x({type:Date})],Gt.prototype,"modified",void 0),m([x()],Gt.prototype,"name",void 0),m([x()],Gt.prototype,"numComments",void 0),m([x()],Gt.prototype,"numRatings",void 0),m([x()],Gt.prototype,"numViews",void 0),m([x()],Gt.prototype,"owner",void 0),m([x()],Gt.prototype,"ownerFolder",void 0),m([x({type:Ts})],Gt.prototype,"portal",void 0),m([x()],Gt.prototype,"screenshots",void 0),m([x()],Gt.prototype,"size",void 0),m([x()],Gt.prototype,"snippet",void 0),m([x()],Gt.prototype,"sourceJSON",void 0),m([x({type:String})],Gt.prototype,"spatialReference",void 0),m([x()],Gt.prototype,"tags",void 0),m([x()],Gt.prototype,"thumbnail",void 0),m([x({readOnly:!0})],Gt.prototype,"thumbnailUrl",null),m([x()],Gt.prototype,"title",void 0),m([x()],Gt.prototype,"type",void 0),m([x()],Gt.prototype,"typeKeywords",void 0),m([x({type:String,json:{read(e,t){var i;if(che.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Gt.prototype,"url",void 0),m([x({readOnly:!0})],Gt.prototype,"userItemUrl",null),Gt=S0=m([X("esri.portal.PortalItem")],Gt);const am=Gt;var CL=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:am});const AL=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,hhe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function PL(e){var t;return(t=hhe[e])!=null?t:!1}const lm=[],M0=new Map;function OL(e){for(const t of M0.keys())RL(e.pattern,t)&&M0.delete(t)}function phe(e){return lm.includes(e)||(OL(e),lm.unshift(e)),{remove(){const t=lm.indexOf(e);t>-1&&(lm.splice(t,1),OL(e))}}}async function kL(e){const t=oa();M0.has(e)||M0.set(e,fhe(e,t));const i=M0.get(e);return i&&await yhe.add(i),i}function dhe(e){if(!AL.test(e))return null;const t=AL.exec(e);if(t===null)return null;const[,i,r]=t,s=i+(r?"-"+r.toUpperCase():"");return PL(s)?s:PL(i)?i:null}async function fhe(e,t){const i=[];for(const r of lm)if(RL(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new fe("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new fe("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function RL(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}uS(()=>{M0.clear()});const yhe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=eu())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function ghe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await kL("esri/t9n/basemaps");return i[e]||i[t]}const gM={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return mi("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return mi("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return mi("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return mi("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return mi("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return mi("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return mi("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return mi("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return mi("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return mi("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function mM(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function hCe(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}const mhe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),vhe=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function bhe(e){return e.layerContainerType==="basemap"?mhe:e.layerContainerType==="operational-layers"?vhe:null}function whe(e,t){if(t.restrictedWebMapWriting){const i=bhe(t);return!q(i)||i.has(e.type)&&!mM(e)}return!0}function _he(e,t){if(mM(e)){const i=jf("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&vM(e,r)}else e.type==="stream"?vM(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&vM(e,t)}function vM(e,t){"maxScale"in e&&(t.maxScale=_w(e.maxScale)),"minScale"in e&&(t.minScale=_w(e.minScale))}function xhe(e,t){if(_he(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=_w(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(mM(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function FL(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new fe("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(whe(e,i)){const r={};return e.write(r,i)?r:null}return q(t)&&xhe(e,t=ve(t)),t}var Q2;let She=0;const LL="esri.Basemap";let Do=Q2=class extends ng(hl){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+She++,this.baseLayers=new gt,this.referenceLayers=new gt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Pe.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Pe.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=te({},e)).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Dp(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i=je(te({},i),{layerContainerType:"basemap"}),this.baseLayers.forEach(s=>{const l=FL(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);q(l)&&r.push(l)}),this.referenceLayers.forEach(s=>{const l=FL(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);q(l)&&(l.isReference=!0,r.push(l))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Dp(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return fM(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Q2({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t=te({origin:"web-map"},t)),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=ve(i);return r.url&&ul(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&ul(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;fr(e);const r=[];if(t){const s=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const l=t.data.id;r.push(ghe(l).then(f=>{f&&this.read({title:f},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,l=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:f}=await import("./layersCreator.98bbbf1c.js"),d=[];if(fr(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const v={context:{origin:l,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},_=f(this.baseLayers,e.baseMapLayers.filter(T=>!T.isReference),v);d.push(_);const M=f(this.referenceLayers,e.baseMapLayers.filter(T=>T.isReference),v);d.push(M)}await Ms(d)}async _loadFromItem(e,t){var l,f;const i=await e.load(t),r=await i.fetchData("json",t),s=gn((l=e.itemUrl)!=null?l:"");return this._set("resourceInfo",{data:(f=r.baseMap)!=null?f:{},context:{origin:"web-map",portal:e.portal||Ts.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ts.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=gM[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),sk(Pe.getLogger(LL),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Q2.fromJSON(t)}return null}};m([x({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:gt}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Do.prototype,"baseLayers",null),m([x({type:String,json:{origins:{"web-scene":{write:!0}}}})],Do.prototype,"id",void 0),m([x({type:am})],Do.prototype,"portalItem",void 0),m([x()],Do.prototype,"referenceLayers",null),m([x({readOnly:!0})],Do.prototype,"resourceInfo",void 0),m([x({type:At})],Do.prototype,"spatialReference",void 0),m([x()],Do.prototype,"thumbnailUrl",void 0),m([x({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Do.prototype,"title",void 0),m([Xe("title")],Do.prototype,"writeTitle",null),Do=Q2=m([X(LL)],Do);const e3=Do;var Mhe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:e3});function NL(e){}function $he(e){return()=>e}var bM;let t3=bM=class extends Ee{constructor(e){super(e),this.type="none"}clone(){return new bM({type:this.type})}};m([wt({none:"none",stayAbove:"stay-above"})],t3.prototype,"type",void 0),t3=bM=m([X("esri.ground.NavigationConstraint")],t3);let Wi=class extends ot{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};m([x()],Wi.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),m([x()],Wi.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),m([x()],Wi.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),m([x()],Wi.prototype,"DECONFLICTOR_SHOW_GRID",void 0),m([x()],Wi.prototype,"LABELS_SHOW_BORDER",void 0),m([x()],Wi.prototype,"TEXT_SHOW_BASELINE",void 0),m([x()],Wi.prototype,"TEXT_SHOW_BORDER",void 0),m([x()],Wi.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),m([x()],Wi.prototype,"OVERLAY_SHOW_CENTER",void 0),m([x()],Wi.prototype,"SHOW_POI",void 0),m([x()],Wi.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),m([x()],Wi.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),m([x()],Wi.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),m([x()],Wi.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),m([x()],Wi.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),m([x()],Wi.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),m([x()],Wi.prototype,"I3S_TREE_SHOW_TILES",void 0),m([x()],Wi.prototype,"I3S_SHOW_MODIFICATIONS",void 0),m([x()],Wi.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),m([x()],Wi.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),m([x()],Wi.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),m([x()],Wi.prototype,"LINE_WIREFRAMES",void 0),m([x()],Wi.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),Wi=m([X("esri.views.3d.support.DebugFlags")],Wi);const Ihe=new Wi;var wM;let gl=wM=class extends ng(hl){constructor(e){super(e),this.opacity=1,this.shading=!Ihe.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new gt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Pe.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Pe.getLogger(this.declaredClass).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=te({},e)).resourceInfo),e}set layers(e){this._set("layers",Dp(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r=je(te({},r),{layerContainerType:"ground"}),e.forEach(l=>{if("write"in l){const f={};$he(l)().write(f,r)&&s.push(f)}else r&&r.messages&&r.messages.push(new fe("layer:unsupported",`Layers (${l.title}, ${l.id}) of type '${l.declaredClass}' cannot be persisted in the ground`,{layer:l}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return fM(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await import("./ElevationQuery.6c03f61d.js");fr(t);const r=new i,s=this.layers.filter(jL).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await import("./ElevationQuery.6c03f61d.js");fr(t);const r=new i,s=this.layers.filter(jL).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:ve(this.surfaceColor),navigationConstraint:ve(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new wM({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",s=t&&t.portal||null,l=t&&t.url||null;return import("./layersCreator.98bbbf1c.js").then(({populateOperationalLayers:f})=>{fr(i);const d=[];if(e.layers&&Array.isArray(e.layers)){const v={context:{origin:r,url:l,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};d.push(f(this.layers,e.layers,v))}return Ms(d)}).then(()=>{})}};function The(e){return e&&"createElevationSampler"in e}function jL(e){return e.type==="elevation"||The(e)}m([x({json:{read:!1}})],gl.prototype,"layers",null),m([Xe("layers")],gl.prototype,"writeLayers",null),m([x({readOnly:!0})],gl.prototype,"resourceInfo",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:hi,read:{reader:kg,source:"transparency"},write:{writer:(e,t)=>{t.transparency=S2(e)},target:"transparency"}}})],gl.prototype,"opacity",void 0),m([x({type:Boolean,nonNullable:!0,json:{read:!1}})],gl.prototype,"shading",void 0),m([x({type:mt,json:{type:[hi],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],gl.prototype,"surfaceColor",void 0),m([x({type:t3,json:{write:!0}})],gl.prototype,"navigationConstraint",void 0),gl=wM=m([X("esri.Ground")],gl);const i3=gl;let $0=class extends gt{constructor(e){super(e),this.getCollections=null}initialize(){this.own(gk(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=q(this.getCollections)?this.getCollections():null;if(ae(e))return void this.removeAll();let t=0;for(const i of e)q(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new gt(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const l of s)e=this._processCollection(e,l);else e=this._processCollection(e,s)}}return e}};m([x()],$0.prototype,"getCollections",void 0),m([x()],$0.prototype,"getChildrenFunction",void 0),m([x()],$0.prototype,"itemFilterFunction",void 0),$0=m([X("esri.core.CollectionFlattener")],$0);const I0=$0;function Ehe(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const DL=Pe.getLogger("esri.support.basemapUtils");function Che(){return{}}function Ahe(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function Phe(e,t){let i;if(typeof e=="string"){if(!(e in gM)){const r=Object.entries(gM).filter(([s,l])=>gi.apiKey&&!l.classic||!gi.apiKey&&l.classic&&!l.deprecated).map(([s])=>`"${s}"`).join(", ");return DL.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=e3.fromId(e),t&&(t[e]=i))}else i=Ai(e3,e);return(i==null?void 0:i.destroyed)&&(DL.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function Ohe(e){return new I0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const VL={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function khe(e){let t=null;if(typeof e=="string")if(e in VL){const i=VL[e];t=new i3({resourceInfo:{data:{layers:[i]}}})}else Pe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Ai(i3,e);return t}async function Rhe(e){const t="portalItem"in e?e:{portalItem:e},i=await import("./portalLayers.092f76d1.js");try{return await i.fromItem(t)}catch(r){const s=t&&t.portalItem,l=s&&s.id||"unset",f=s&&s.portal&&s.portal.url||gi.portalUrl;throw Pe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+f+"', id: '"+l+"')",r),r}}let Fhe=0,tn=class extends yn.EventedMixin(o0(hl)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ai(-180,-90,180,90,At.WGS84),this.id=Date.now().toString(16)+"-layer-"+Fhe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=At.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await import("./arcgisLayers.a0a7898b.js")).fromUrl(t)}static fromPortalItem(e){return Rhe(e)}initialize(){this.when().catch(e=>{var t,i;Ks(e)||Pe.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return gn(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await li(e,{query:{f:"json"},responseType:"json"})).data;throw new fe("layer:no-attribution-data","Layer does not have attribution data")}};m([x({type:String})],tn.prototype,"attributionDataUrl",void 0),m([x({type:ai})],tn.prototype,"fullExtent",void 0),m([x({readOnly:!0})],tn.prototype,"hasAttributionData",null),m([x({type:String,clonable:!1})],tn.prototype,"id",void 0),m([x({type:Boolean,nonNullable:!0})],tn.prototype,"legendEnabled",void 0),m([x({type:["show","hide","hide-children"]})],tn.prototype,"listMode",void 0),m([x({type:Number,range:{min:0,max:1},nonNullable:!0})],tn.prototype,"opacity",void 0),m([x({clonable:!1})],tn.prototype,"parent",void 0),m([x({readOnly:!0})],tn.prototype,"parsedUrl",null),m([x({type:Boolean})],tn.prototype,"popupEnabled",void 0),m([x({type:Boolean})],tn.prototype,"attributionVisible",void 0),m([x({type:At})],tn.prototype,"spatialReference",void 0),m([x({type:String})],tn.prototype,"title",void 0),m([x({readOnly:!0,json:{read:!1}})],tn.prototype,"type",void 0),m([x()],tn.prototype,"url",void 0),m([x({type:Boolean,nonNullable:!0})],tn.prototype,"visible",void 0),tn=m([X("esri.layers.Layer")],tn);const T0=tn;function _M(e,t,i){let r,s;if(e)for(let l=0,f=e.length;l<f;l++){if(r=e.getItemAt(l),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(s=_M(r.layers,t,i),s))return s}}const Lhe=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new gt;const r=f=>{f.parent&&"remove"in f.parent&&f.parent.remove(f)},s=f=>{f.parent=this,this.layerAdded(f),f.type!=="elevation"&&f.type!=="base-elevation"||Pe.getLogger(this.declaredClass).error(`Layer 'title:${f.title}, id:${f.id}' of type '${f.type}' is not supported as an operational layer and will therefore be ignored.`)},l=f=>{f.parent=null,this.layerRemoved(f)};this.layers.on("before-add",f=>r(f.item)),this.layers.on("after-add",f=>s(f.item)),this.layers.on("after-remove",f=>l(f.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Dp(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof T0){const l=i;l.parent===this?this.reorder(l,r):s.add(l,r)}else tu(i)?i.then(l=>{this.destroyed||this.add(l,r)}):Pe.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;r=s.getNextIndex(r),i.slice().forEach(l=>{l.parent!==this?(s.add(l,r),r+=1):this.reorder(l,r)})}findLayerById(i){return _M(this.layers,"id",i)}findLayerByUid(i){return _M(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return m([x()],t.prototype,"layers",null),t=m([X("esri.support.LayersMixin")],t),t};function xM(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const l=e.getItemAt(r);if(l[t]===i)return l;if((l==null?void 0:l.type)==="group"){const f=xM(l.tables,t,i);if(f)return f}}}const Nhe=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new gt,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&Pe.getLogger(this.declaredClass).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Dp(i,this._get("tables")))}findTableById(i){return xM(this.tables,"id",i)}findTableByUid(i){return xM(this.tables,"uid",i)}};return m([x()],t.prototype,"tables",null),t=m([X("esri.support.TablesMixin")],t),t};let ml=class extends Nhe(Lhe(yn.EventedMixin(ot))){constructor(e){super(e),this.allLayers=new I0({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Ohe(this),this.basemap=null,this.editableLayers=new I0({getCollections:()=>[this.allLayers],itemFilterFunction:Ehe}),this.ground=new i3,this._basemapCache=Che()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),Ahe(this._basemapCache),this._basemapCache=null}castBasemap(e){return Phe(e,this._basemapCache)}castGround(e){const t=khe(e);return ae(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};m([x({readOnly:!0,dependsOn:[]})],ml.prototype,"allLayers",void 0),m([x({readOnly:!0})],ml.prototype,"allTables",void 0),m([x({type:e3})],ml.prototype,"basemap",void 0),m([ri("basemap")],ml.prototype,"castBasemap",null),m([x({readOnly:!0})],ml.prototype,"editableLayers",void 0),m([x({type:i3,nonNullable:!0})],ml.prototype,"ground",void 0),m([ri("ground")],ml.prototype,"castGround",null),ml=m([X("esri.Map")],ml);const jhe=ml;class SM{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,s=0,l=!1){return(r-=s)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),l&&r===i&&(r=t),r+s}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return Cn(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function MM(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}MM(new SM(0,2*Math.PI));const pCe=MM(new SM(-Math.PI,Math.PI)),zL=MM(new SM(0,360));let gu=class extends yr(Ee){constructor(...e){super(...e),this.position=new dt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return t!=null&&(s.heading=t),i!=null&&(s.tilt=i),r!=null&&(s.fov=r),s}return e}writePosition(e,t,i,r){const s=e.clone();s.x=Io(e.x||0),s.y=Io(e.y||0),s.z=e.hasZ?Io(e.z||0):e.z,t[i]=s.write({},r)}readPosition(e,t){const i=new dt;return i.read(e,t),i.x=Io(i.x||0),i.y=Io(i.y||0),i.z=i.hasZ?Io(i.z||0):i.z,i}equals(e){return!ae(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};m([x({type:dt,json:{write:{isRequired:!0}}})],gu.prototype,"position",void 0),m([Xe("position")],gu.prototype,"writePosition",null),m([Be("position")],gu.prototype,"readPosition",null),m([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ri(e=>zL.normalize(Io(e)))],gu.prototype,"heading",void 0),m([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ri(e=>Cn(Io(e),-180,180))],gu.prototype,"tilt",void 0),m([x({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],gu.prototype,"fov",void 0),gu=m([X("esri.Camera")],gu);const Dhe=gu;var $M;let th=$M=class extends Ee{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new $M({rotation:this.rotation,scale:this.scale,targetGeometry:q(this.targetGeometry)?this.targetGeometry.clone():null,camera:q(this.camera)?this.camera.clone():null})}};function IM(){return{enabled:!this.camera}}m([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:IM}}}}})],th.prototype,"rotation",void 0),m([ri("rotation")],th.prototype,"castRotation",null),m([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:IM}}}}})],th.prototype,"scale",void 0),m([x({types:au,json:{read:fn,write:!0,origins:{"web-scene":{read:fn,write:{overridePolicy:IM}}}}})],th.prototype,"targetGeometry",void 0),m([x({type:Dhe,json:{write:!0}})],th.prototype,"camera",void 0),th=$M=m([X("esri.Viewpoint")],th);const vl=th;function Ve(e,t,i={}){return TM(e,t,i,GL)}function so(e,t,i={}){return TM(e,t,i,qL)}function TM(e,t,i={},r){let s=null;const l=i.once?(f,d)=>{r(f)&&(Er(s),t(f,d))}:(f,d)=>{r(f)&&t(f,d)};if(s=Dse(e,l,i.sync,i.equals),i.initial){const f=e();l(f,f)}return s}function fs(e,t,i,r={}){let s=null,l=null,f=null;function d(){var M;s&&l&&(l.remove(),(M=r.onListenerRemove)==null||M.call(r,s),s=null,l=null)}function v(M){r.once&&r.once&&Er(f),i(M)}const _=Ve(e,(M,T)=>{var A;d(),$w(M)&&(s=M,l=Iw(M,t,v),(A=r.onListenerAdd)==null||A.call(r,M))},{sync:r.sync,initial:!0});return f=Kl(()=>{_.remove(),d()}),f}function um(e,t){return Vhe(e,qL,t)}function Vhe(e,t,i){if(To(i))return Promise.reject(zi());const r=e();if(t==null?void 0:t(r))return Promise.resolve(r);let s=null;function l(){s=Er(s)}return new Promise((f,d)=>{s=By([Eo(i,()=>{l(),d(zi())}),TM(e,v=>{l(),f(v)},{sync:!1,once:!0},t!=null?t:GL)])})}function GL(e){return!0}function qL(e){return!!e}function dCe(e,t,i={}){let r=!1;const s=Ve(e,(l,f)=>{r||t(l,f)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const bl={sync:!0},fi={initial:!0},Ps={sync:!0,initial:!0};class r3{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(Lr(t)),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(Lr(t)),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var mn;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(mn||(mn={}));let zhe=0;function UL(){return zhe++}function Ghe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function cm(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function EM(e,t,i,r){if(t.type===mn.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==mn.INVOKE&&t.type!==mn.RESPONSE)return void e.postMessage(t);let s;if(Ghe(i)?(s=BL(i.transferList),t.data=i.result):(s=BL(r),t.data=i),s){if(Ie("ff")){for(const l of s)if("byteLength"in l&&l.byteLength>267386880){const f="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case mn.INVOKE:throw f;case mn.RESPONSE:return void EM(e,{type:mn.RESPONSE,jobId:t.jobId,error:cm(f)})}}}e.postMessage(t,s)}else e.postMessage(t)}function hm(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function BL(e){if(!e||!e.length)return null;if(Ie("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!qhe(i));return t.length?t:null}function qhe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const Uhe={statsWorker:()=>import("./statsWorker.31c69406.js"),geometryEngineWorker:()=>import("./geometryEngineWorker.1fabcef0.js"),CSVSourceWorker:()=>import("./CSVSourceWorker.422cb383.js"),EdgeProcessingWorker:()=>import("./EdgeProcessingWorker.b4139fd6.js"),ElevationSamplerWorker:()=>import("./ElevationSamplerWorker.c89397fd.js"),FeatureServiceSnappingSourceWorker:()=>import("./FeatureServiceSnappingSourceWorker.0005ae00.js"),GeoJSONSourceWorker:()=>import("./GeoJSONSourceWorker.61ab27ab.js"),LercWorker:()=>import("./LercWorker.95a37ec2.js"),MemorySourceWorker:()=>import("./MemorySourceWorker.c04bf907.js"),PBFDecoderWorker:()=>import("./PBFDecoderWorker.b5469d57.js"),Pipeline:()=>import("./Pipeline.498e22d4.js"),PointCloudWorker:()=>import("./PointCloudWorker.cb5c9b8a.js"),RasterWorker:()=>import("./RasterWorker.4fa9598b.js"),SceneLayerSnappingSourceWorker:()=>import("./SceneLayerSnappingSourceWorker.c861558f.js"),SceneLayerWorker:()=>import("./SceneLayerWorker.3152a453.js"),WFSSourceWorker:()=>import("./WFSSourceWorker.2845e596.js"),WorkerTileHandler:()=>import("./WorkerTileHandler.4e3afe40.js")},{CLOSE:HL,ABORT:WL,INVOKE:JL,RESPONSE:pm,OPEN_PORT:ZL,ON:Bhe}=mn,Hhe=2;class Whe{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===mn.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Os{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Whe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Os(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),Os.clients.set(s,r),i.port2}static loadWorker(t){const i=Uhe[t];return i?i():Promise.resolve(null)}close(){this._post({type:HL}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const s=r&&r.signal,l=r&&r.transferList;if(!this._port)return Promise.reject(new fe("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const f=UL();return new Promise((d,v)=>{if(To(s))return this._processWork(),void v(zi());const _=Eo(s,()=>{const T=this._outJobs.get(f);T&&(this._outJobs.delete(f),this._processWork(),Er(T.abortHandle),this._post({type:WL,jobId:f}),v(zi()))}),M={resolve:d,reject:v,abortHandle:_,debugInfo:t};this._outJobs.set(f,M),this._post({type:JL,jobId:f,methodName:t,abortable:s!=null},i,l)})}on(t,i){const r=new MessageChannel;function s(l){i(l.data)}return this._port.postMessage({type:mn.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:mn.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:ZL,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=Hhe)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:s,deferred:l}=t;this.invoke(i,r,s).then(f=>l.resolve(f)).catch(f=>l.reject(f))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Er(t.abortHandle),t.reject(zi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){q(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=hm(t);if(i)switch(i.type){case pm:this._onResponseMessage(i);break;case JL:this._invokeQueue.push(i);break;case WL:this._onAbortMessage(i);break;case HL:this._onCloseMessage();break;case ZL:this._onOpenPortMessage(i);break;case Bhe:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Os.clients.get(this)===t&&t.destroy(),Os.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:l}=t,f=l?new AbortController:null,d=this._inJobs;let v,_=this._client,M=_[i];try{if(!M&&i&&i.includes(".")){const T=i.split(".");for(let A=0;A<T.length-1;A++)_=_[T[A]],M=_[T[A+1]]}if(typeof M!="function")throw new TypeError(`${i} is not a function`);v=M.call(_,s,{client:this,signal:f?f.signal:null})}catch(T){return void this._post({type:pm,jobId:r,error:cm(T)})}tu(v)?(d.set(r,{controller:f,promise:v}),v.then(T=>{d.has(r)&&(d.delete(r),this._post({type:pm,jobId:r},T))},T=>{d.has(r)&&(d.delete(r),Ks(T)||this._post({type:pm,jobId:r,error:cm(T||{message:`Error encountered at method ${i}`})}))})):this._post({type:pm,jobId:r},v)}_onOpenPortMessage(t){new Os(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,l=>{i.postMessage(l)}),s=Iw(t.port,"message",l=>{var f;((f=hm(l))==null?void 0:f.type)===mn.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,l=this._outJobs;if(!l.has(i))return;const f=l.get(i);l.delete(i),this._processWork(),Er(f.abortHandle),r?f.reject(fe.fromJSON(JSON.parse(r))):f.resolve(s)}_post(t,i,r){return EM(this._port,t,i,r)}}Os.kernelInfo={revision:YF,version:XF,buildDate:KF},Os.clients=new Map;class Jhe{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new r3}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,s)=>{let l=!0;const f=d=>{fr(i.signal),l&&(l=!1,d())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let d=0;d<t.length;++d){const v=t[d];tu(v)?this._clientPromises[d]=v.then(_=>(this._clients[d]=new Os(_,i,()=>{var M;return(M=this._ongoingJobsQueue.pop())!=null?M:null}),f(r),this._clients[d]),()=>(f(s),null)):(this._clients[d]=new Os(v,i,()=>{var _;return(_=this._ongoingJobsQueue.pop())!=null?_:null}),this._clientPromises[d]=Promise.resolve(this._clients[d]),f(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let l=0;l<this._clientPromises.length;++l){const f=this._clientPromises[l];s[l]=f.then(d=>d==null?void 0:d.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(zi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let s;Array.isArray(r)?(Pe.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const l=eu();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:s,deferred:l});for(let f=0;f<this._clientPromises.length;f++){const d=this._clients[f];d?d.jobAdded():this._clientPromises[f].then(v=>v==null?void 0:v.jobAdded())}return l.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>By(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(l=>{l&&(i[s]=l.openPort()),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const KL=Pe.getLogger("esri.intl.substitute");function wl(e,t,i={}){const{format:r={}}=i;return Ka(e,s=>Zhe(s,t,r))}function Zhe(e,t,i){var v;let r,s;const l=e.indexOf(":");if(l===-1?r=e.trim():(r=e.slice(0,l).trim(),s=e.slice(l+1).trim()),!r)return"";const f=jf(r,t);if(f==null)return"";const d=(v=s?i==null?void 0:i[s]:null)!=null?v:i==null?void 0:i[r];return d?Khe(f,d):s?Yhe(f,s):CM(f)}function Khe(e,t){switch(t.type){case"date":return uu(e,t.intlOptions);case"number":return Oo(e,t.intlOptions);default:return KL.warn("missing format descriptor for key {key}"),CM(e)}}function Yhe(e,t){switch(t.toLowerCase()){case"dateformat":return uu(e);case"numberformat":return Oo(e);default:return KL.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?uu(e):/^numberformat/i.test(t)?Oo(e):CM(e)}}function CM(e){switch(typeof e){case"string":return e;case"number":return Oo(e);case"boolean":return""+e;default:return e instanceof Date?uu(e):""}}async function Xhe(e,t,i,r){const s=t.exec(i);if(!s)throw new fe("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const l=s[1]?`${s[1]}/`:"",f=s[2],d=dhe(r),v=`${l}${f}.json`,_=d?`${l}${f}_${d}.json`:v;let M;try{M=await YL(e(_))}catch(T){if(_===v)throw new fe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:T});try{M=await YL(e(v))}catch(A){throw new fe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A})}}return M}async function YL(e){if(q(XL.fetchBundleAsset))return XL.fetchBundleAsset(e);const t=await li(e,{responseType:"text"});return JSON.parse(t.data)}class Qhe{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?l=>new URL(l,new URL(r,window.location.href)).href:r instanceof URL?l=>new URL(l,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return Xhe(this.getAssetUrl,this.matcher,t,i)}}function epe(e){return new Qhe(e)}const XL={};phe(epe({pattern:"esri/",location:mi}));const QL={};function tpe(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function ipe(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:te({},e.has),map:te({},e.map),packages:e.packages&&e.packages.concat()||[],paths:te({},e.paths)};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=QL.baseUrl),(i=QL.packages)==null||i.forEach(r=>{var s;tpe((s=t.packages)!=null?s:[],r)}),t}class rpe{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class n3{constructor(){this._dispatcher=new rpe,this._workerPostMessage({type:mn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){zf(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){zf(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=hm(t);if(i&&i.type===mn.OPEN){const{modulePath:r,jobId:s}=i;let l=await Os.loadWorker(r);l||(l=await import(r));const f=Os.connect(l);this._workerPostMessage({type:mn.OPENED,jobId:s,data:f})}}}const AM=Pe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:npe}=mn,spe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let s3,o3;const eN="Failed to create Worker. Fallback to execute module in main thread";async function ope(){if(!Ie("esri-workers")||(Ie("mozilla"),0))return tN(new n3);if(!s3&&!o3)try{const t=spe.split('"{CONFIGURATION}"').join(`'${ape()}'`);s3=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){o3=t||{}}let e;if(s3)try{e=new Worker(s3,{name:"esri-worker-"+lpe++})}catch{AM.warn(eN,o3),e=new n3}else AM.warn(eN,o3),e=new n3;return tN(e)}async function tN(e){return new Promise(t=>{function i(s){const l=hm(s);l&&l.type===npe&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),AM.warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new n3).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function ape(){let e;if(gi.default!=null){const s=te({},gi);delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(gi));e.assetsPath=Lo(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Lo(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=oa(),e.has={"esri-csp-restrictions":Ie("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Ie("esri-2d-update-debug"),"featurelayer-pbf":Ie("featurelayer-pbf"),"featurelayer-simplify-thresholds":Ie("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Ie("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Ie("featurelayer-simplify-mobile-factor"),"esri-atomics":Ie("esri-atomics"),"esri-shared-array-buffer":Ie("esri-shared-array-buffer"),"esri-tiles-debug":Ie("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Ie("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Ie("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":Ie("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=Lo(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Lo(e.workers.workerPath):e.workers.workerPath=Lo(mi("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=gi.workers.loaderConfig,i=ipe({baseUrl:t==null?void 0:t.baseUrl,locale:oa(),has:te({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},t==null?void 0:t.has),map:te({},t==null?void 0:t.map),paths:te({},t==null?void 0:t.paths),packages:(t==null?void 0:t.packages)||[]}),r={version:XF,buildDate:KF,revision:YF};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let lpe=0;const{ABORT:iN,INVOKE:upe,OPEN:cpe,OPENED:hpe,RESPONSE:dm}=mn;class PM{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),Pe.getLogger("esri.core.workers.WorkerOwner").error(r)})}static async create(t){const i=await ope();return new PM(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=UL();return new Promise((l,f)=>{const d={resolve:l,reject:f,abortHandle:x4(r,()=>{this._outJobs.delete(s),this._post({type:iN,jobId:s})})};this._outJobs.set(s,d),this._post({type:cpe,jobId:s,modulePath:t})})}_onMessage(t){const i=hm(t);if(i)switch(i.type){case hpe:this._onOpenedMessage(i);break;case dm:this._onResponseMessage(i);break;case iN:this._onAbortMessage(i);break;case upe:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:l}=t,f=l?new AbortController:null,d=this._inJobs,v=uce[i];let _;try{if(typeof v!="function")throw new TypeError(`${i} is not a function`);_=v.call(null,s,{signal:f?f.signal:null})}catch(M){return void this._post({type:dm,jobId:r,error:cm(M)})}tu(_)?(d.set(r,{controller:f,promise:_}),_.then(M=>{d.has(r)&&(d.delete(r),this._post({type:dm,jobId:r},M))},M=>{d.has(r)&&(d.delete(r),M||(M={message:"Error encountered at method"+i}),Ks(M)||this._post({type:dm,jobId:r,error:cm(M||{message:`Error encountered at method ${i}`})}))})):this._post({type:dm,jobId:r},_)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Er(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),Er(l.abortHandle),r?l.reject(fe.fromJSON(JSON.parse(r))):l.resolve(s))}_post(t,i,r){return EM(this.worker,t,i,r)}}let Kp=Ie("esri-workers-debug")?1:Ie("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):Ie("host-browser")?navigator.hardwareConcurrency-1:0;Kp||(Kp=Ie("safari")&&Ie("mac")||Ie("trident")?7:2);let rN=0;const a3=[];function ppe(){nN()}async function l3(e,t){const i=new Jhe;return await i.open(e,t),i}async function dpe(e,t={}){if(typeof e!="string")throw new fe("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(Ie("host-webworker")&&!Ie("esri-workers")&&(i="local"),i==="local"){let r=await Os.loadWorker(e);r||(r=await import(e)),fr(t.signal);const s=t.client||r;return l3([Os.connect(r)],je(te({},t),{client:s}))}if(await nN(),fr(t.signal),i==="dedicated"){const r=rN++%Kp;return l3([await a3[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Kp);if(r<Kp){const s=new Array(r);for(let l=0;l<r;++l){const f=rN++%Kp;s[l]=a3[f].open(e,t)}return l3(s,t)}}return l3(a3.map(r=>r.open(e,t)),t)}let u3=null;async function nN(){if(u3)return u3;new AbortController;const e=[];for(let t=0;t<Kp;t++){const i=PM.create(t).then(r=>(a3[t]=r,r));e.push(i)}return u3=Promise.all(e),u3}function OM(e){return new At({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const sN=OM(Bi),c3=OM(ru),h3=OM(Ac),fpe=new At({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Bi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function fCe(e){return e&&(zw(e)||e===c3)?c3:e&&(Gw(e)||e===h3)?h3:sN}function kM(e){return q(e)&&(zw(e)||e===c3)?ru:q(e)&&(Gw(e)||e===h3)?Ac:Bi}function yCe(e){return A4(e)?ru:P4(e)?Ac:Bi}const oN=39.37,ype=Bi.radius*Math.PI/200,aN=/UNIT\[([^\]]+)\]\]$/i,Yp=Q,lN=/UNIT\[([^\]]+)\]/i,gpe=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),mpe=In()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),_l=e=>e*e,ih=e=>e*e*e,fm={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:_l(.001)},"square-centimeters":{inBaseUnits:_l(.01)},"square-decimeters":{inBaseUnits:_l(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:_l(1e3)},"square-inches":{inBaseUnits:_l(.0254)},"square-feet":{inBaseUnits:_l(.3048)},"square-yards":{inBaseUnits:_l(.9144)},"square-miles":{inBaseUnits:_l(1609.344)},"square-us-feet":{inBaseUnits:_l(1200/3937)},acres:{inBaseUnits:.0015625*_l(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ih(.001)},"cubic-centimeters":{inBaseUnits:1e3*ih(.01)},"cubic-decimeters":{inBaseUnits:1e3*ih(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ih(1e3)},"cubic-inches":{inBaseUnits:1e3*ih(.0254)},"cubic-feet":{inBaseUnits:1e3*ih(.3048)},"cubic-yards":{inBaseUnits:1e3*ih(.9144)},"cubic-miles":{inBaseUnits:1e3*ih(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},vpe=(()=>{const e={};for(const t in fm)for(const i in fm[t].units)e[i]=t;return e})();function bpe(e,t,i){return e*fm[i].units[t].inBaseUnits}function wpe(e,t,i){return e/fm[i].units[t].inBaseUnits}const uN=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],_pe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function RM(e){const t=vpe[e];if(!t)throw new Error("unknown type");return t}function cN(e,t=null){return t=t||RM(e),fm[t].baseUnit===e}function vi(e,t,i){if(t===i)return e;const r=RM(t);if(r!==RM(i))throw new Error("incompatible units");const s=cN(t,r)?e:bpe(e,t,r);return cN(i,r)?s:wpe(s,i,r)}function hN(e,t){const i=vi(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function pN(e,t){const i=vi(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function dN(e,t){const i=vi(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function fN(e,t){const i=vi(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function xpe(e,t){const i=vi(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Spe(e,t){const i=vi(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function yN(e,t,i){return vi(e,t,"meters")/(i*Math.PI/180)}function gN(e){return mpe.fromJSON(e.toLowerCase())||null}function E0(e){if(q(e)&&!Qse(e))return 1;const t=Xp(e);return t>1e5?1:t}function mN(e){return Xp(e)>=kM(e).metersPerDegree?"meters":ym(e)}function Xp(e,t=Bi.metersPerDegree){return pn(Mpe(e,!0),t)}function Mpe(e,t=!1){const i=q(e)?e.wkid:null,r=q(e)?e.wkt:null;let s=null;if(i){if(A4(i))return ru.metersPerDegree;if(P4(i))return Ac.metersPerDegree;s=Yp.values[Yp[i]],!s&&t&&gpe.has(i)&&(s=ype)}else r&&(_N(r)?s=vN(aN.exec(r),s):wN(r)&&(s=vN(lN.exec(r),s)));return s}function vN(e,t){return e&&e[1]?bN(e[1]):t}function bN(e){return parseFloat(e.split(",")[1])}function ym(e){const t=q(e)?e.wkid:null,i=q(e)?e.wkt:null;let r=null;if(t)r=Yp.units[Yp[t]];else if(i){const s=_N(i)?aN:wN(i)?lN:null;if(s){const l=s.exec(i);l&&l[1]&&(r=Ipe(l[1]))}}return q(r)?gN(r):null}function gCe(e){const t=ym(e);return ae(t)||!uN.includes(t)?null:t}function mCe(e){const t=mN(e);return ae(t)||!uN.includes(t)?null:t}function vCe(e){const t=ym(e);return ae(t)?null:_pe.get(t)}function wN(e){return/^GEOCCS/i.test(e)}function _N(e){return/^PROJCS/i.test(e)}const $pe=1e-7;function Ipe(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!Yp.units.includes(i)){const r=bN(e);i=null;const s=Yp.values;for(let l=0;l<s.length;++l)if(Math.abs(r-s[l])<$pe){i=Yp.units[l];break}}return i}function Tpe(e){const t=ym(e);if(ae(t))return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}function bCe(e){var s,l,f;const t="metric";if(ae(e))return t;const i=e.map,r=i&&"portalItem"in i?(s=i.portalItem)==null?void 0:s.portal:null;if(r)switch((f=(l=r==null?void 0:r.user)==null?void 0:l.units)!=null?f:r.units){case t:return t;case"english":return"imperial"}return pn(Tpe(e.spatialReference),t)}const xN={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},SN={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Epe=In()(xN),Cpe=In()(SN);In()(te(te({},xN),SN));function Ape(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rh(e,t,i,r,s,l,f,d,v,_,M,T,A,k,F,D,z){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=f,e[6]=d,e[7]=v,e[8]=_,e[9]=M,e[10]=T,e[11]=A,e[12]=k,e[13]=F,e[14]=D,e[15]=z,e}function p3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mu(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],l=t[6],f=t[7],d=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=l,e[11]=t[14],e[12]=s,e[13]=f,e[14]=d}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Ppe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=t[9],A=t[10],k=t[11],F=t[12],D=t[13],z=t[14],H=t[15],J=i*d-r*f,Y=i*v-s*f,ie=i*_-l*f,re=r*v-s*d,ee=r*_-l*d,le=s*_-l*v,me=M*D-T*F,we=M*z-A*F,_e=M*H-k*F,Me=T*z-A*D,Se=T*H-k*D,He=A*H-k*z;let We=J*He-Y*Se+ie*Me+re*_e-ee*we+le*me;return We?(We=1/We,e[0]=(d*He-v*Se+_*Me)*We,e[1]=(s*Se-r*He-l*Me)*We,e[2]=(D*le-z*ee+H*re)*We,e[3]=(A*ee-T*le-k*re)*We,e[4]=(v*_e-f*He-_*we)*We,e[5]=(i*He-s*_e+l*we)*We,e[6]=(z*ie-F*le-H*Y)*We,e[7]=(M*le-A*ie+k*Y)*We,e[8]=(f*Se-d*_e+_*me)*We,e[9]=(r*_e-i*Se-l*me)*We,e[10]=(F*ee-D*ie+H*J)*We,e[11]=(T*ie-M*ee-k*J)*We,e[12]=(d*we-f*Me-v*me)*We,e[13]=(i*Me-r*we+s*me)*We,e[14]=(D*Y-F*re-z*J)*We,e[15]=(M*re-T*Y+A*J)*We,e):null}function Ope(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=t[9],A=t[10],k=t[11],F=t[12],D=t[13],z=t[14],H=t[15];return e[0]=d*(A*H-k*z)-T*(v*H-_*z)+D*(v*k-_*A),e[1]=-(r*(A*H-k*z)-T*(s*H-l*z)+D*(s*k-l*A)),e[2]=r*(v*H-_*z)-d*(s*H-l*z)+D*(s*_-l*v),e[3]=-(r*(v*k-_*A)-d*(s*k-l*A)+T*(s*_-l*v)),e[4]=-(f*(A*H-k*z)-M*(v*H-_*z)+F*(v*k-_*A)),e[5]=i*(A*H-k*z)-M*(s*H-l*z)+F*(s*k-l*A),e[6]=-(i*(v*H-_*z)-f*(s*H-l*z)+F*(s*_-l*v)),e[7]=i*(v*k-_*A)-f*(s*k-l*A)+M*(s*_-l*v),e[8]=f*(T*H-k*D)-M*(d*H-_*D)+F*(d*k-_*T),e[9]=-(i*(T*H-k*D)-M*(r*H-l*D)+F*(r*k-l*T)),e[10]=i*(d*H-_*D)-f*(r*H-l*D)+F*(r*_-l*d),e[11]=-(i*(d*k-_*T)-f*(r*k-l*T)+M*(r*_-l*d)),e[12]=-(f*(T*z-A*D)-M*(d*z-v*D)+F*(d*A-v*T)),e[13]=i*(T*z-A*D)-M*(r*z-s*D)+F*(r*A-s*T),e[14]=-(i*(d*z-v*D)-f*(r*z-s*D)+F*(r*v-s*d)),e[15]=i*(d*A-v*T)-f*(r*A-s*T)+M*(r*v-s*d),e}function kpe(e){const t=e[0],i=e[1],r=e[2],s=e[3],l=e[4],f=e[5],d=e[6],v=e[7],_=e[8],M=e[9],T=e[10],A=e[11],k=e[12],F=e[13],D=e[14],z=e[15];return(t*f-i*l)*(T*z-A*D)-(t*d-r*l)*(M*z-A*F)+(t*v-s*l)*(M*D-T*F)+(i*d-r*f)*(_*z-A*k)-(i*v-s*f)*(_*D-T*k)+(r*v-s*d)*(_*F-M*k)}function MN(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=t[9],k=t[10],F=t[11],D=t[12],z=t[13],H=t[14],J=t[15];let Y=i[0],ie=i[1],re=i[2],ee=i[3];return e[0]=Y*r+ie*d+re*T+ee*D,e[1]=Y*s+ie*v+re*A+ee*z,e[2]=Y*l+ie*_+re*k+ee*H,e[3]=Y*f+ie*M+re*F+ee*J,Y=i[4],ie=i[5],re=i[6],ee=i[7],e[4]=Y*r+ie*d+re*T+ee*D,e[5]=Y*s+ie*v+re*A+ee*z,e[6]=Y*l+ie*_+re*k+ee*H,e[7]=Y*f+ie*M+re*F+ee*J,Y=i[8],ie=i[9],re=i[10],ee=i[11],e[8]=Y*r+ie*d+re*T+ee*D,e[9]=Y*s+ie*v+re*A+ee*z,e[10]=Y*l+ie*_+re*k+ee*H,e[11]=Y*f+ie*M+re*F+ee*J,Y=i[12],ie=i[13],re=i[14],ee=i[15],e[12]=Y*r+ie*d+re*T+ee*D,e[13]=Y*s+ie*v+re*A+ee*z,e[14]=Y*l+ie*_+re*k+ee*H,e[15]=Y*f+ie*M+re*F+ee*J,e}function Rpe(e,t,i){const r=i[0],s=i[1],l=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*l+t[12],e[13]=t[1]*r+t[5]*s+t[9]*l+t[13],e[14]=t[2]*r+t[6]*s+t[10]*l+t[14],e[15]=t[3]*r+t[7]*s+t[11]*l+t[15];else{const f=t[0],d=t[1],v=t[2],_=t[3],M=t[4],T=t[5],A=t[6],k=t[7],F=t[8],D=t[9],z=t[10],H=t[11];e[0]=f,e[1]=d,e[2]=v,e[3]=_,e[4]=M,e[5]=T,e[6]=A,e[7]=k,e[8]=F,e[9]=D,e[10]=z,e[11]=H,e[12]=f*r+M*s+F*l+t[12],e[13]=d*r+T*s+D*l+t[13],e[14]=v*r+A*s+z*l+t[14],e[15]=_*r+k*s+H*l+t[15]}return e}function Fpe(e,t,i){const r=i[0],s=i[1],l=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*l,e[9]=t[9]*l,e[10]=t[10]*l,e[11]=t[11]*l,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Lpe(e,t,i,r){let s,l,f,d,v,_,M,T,A,k,F,D,z,H,J,Y,ie,re,ee,le,me,we,_e,Me,Se=r[0],He=r[1],We=r[2],Ot=Math.sqrt(Se*Se+He*He+We*We);return Ot<$s()?null:(Ot=1/Ot,Se*=Ot,He*=Ot,We*=Ot,s=Math.sin(i),l=Math.cos(i),f=1-l,d=t[0],v=t[1],_=t[2],M=t[3],T=t[4],A=t[5],k=t[6],F=t[7],D=t[8],z=t[9],H=t[10],J=t[11],Y=Se*Se*f+l,ie=He*Se*f+We*s,re=We*Se*f-He*s,ee=Se*He*f-We*s,le=He*He*f+l,me=We*He*f+Se*s,we=Se*We*f+He*s,_e=He*We*f-Se*s,Me=We*We*f+l,e[0]=d*Y+T*ie+D*re,e[1]=v*Y+A*ie+z*re,e[2]=_*Y+k*ie+H*re,e[3]=M*Y+F*ie+J*re,e[4]=d*ee+T*le+D*me,e[5]=v*ee+A*le+z*me,e[6]=_*ee+k*le+H*me,e[7]=M*ee+F*le+J*me,e[8]=d*we+T*_e+D*Me,e[9]=v*we+A*_e+z*Me,e[10]=_*we+k*_e+H*Me,e[11]=M*we+F*_e+J*Me,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Npe(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[4],f=t[5],d=t[6],v=t[7],_=t[8],M=t[9],T=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=l*s+_*r,e[5]=f*s+M*r,e[6]=d*s+T*r,e[7]=v*s+A*r,e[8]=_*s-l*r,e[9]=M*s-f*r,e[10]=T*s-d*r,e[11]=A*s-v*r,e}function jpe(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[0],f=t[1],d=t[2],v=t[3],_=t[8],M=t[9],T=t[10],A=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s-_*r,e[1]=f*s-M*r,e[2]=d*s-T*r,e[3]=v*s-A*r,e[8]=l*r+_*s,e[9]=f*r+M*s,e[10]=d*r+T*s,e[11]=v*r+A*s,e}function Dpe(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[0],f=t[1],d=t[2],v=t[3],_=t[4],M=t[5],T=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s+_*r,e[1]=f*s+M*r,e[2]=d*s+T*r,e[3]=v*s+A*r,e[4]=_*s-l*r,e[5]=M*s-f*r,e[6]=T*s-d*r,e[7]=A*s-v*r,e}function $N(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Vpe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function IN(e,t,i){if(t===0)return p3(e);let r,s,l,f=i[0],d=i[1],v=i[2],_=Math.sqrt(f*f+d*d+v*v);return _<$s()?null:(_=1/_,f*=_,d*=_,v*=_,r=Math.sin(t),s=Math.cos(t),l=1-s,e[0]=f*f*l+s,e[1]=d*f*l+v*r,e[2]=v*f*l-d*r,e[3]=0,e[4]=f*d*l-v*r,e[5]=d*d*l+s,e[6]=v*d*l+f*r,e[7]=0,e[8]=f*v*l+d*r,e[9]=d*v*l-f*r,e[10]=v*v*l+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function zpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Gpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function TN(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=r+r,v=s+s,_=l+l,M=r*d,T=r*v,A=r*_,k=s*v,F=s*_,D=l*_,z=f*d,H=f*v,J=f*_;return e[0]=1-(k+D),e[1]=T+J,e[2]=A-H,e[3]=0,e[4]=T-J,e[5]=1-(M+D),e[6]=F+z,e[7]=0,e[8]=A+H,e[9]=F-z,e[10]=1-(M+k),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Upe(e,t){const i=Bpe,r=-t[0],s=-t[1],l=-t[2],f=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=r*r+s*s+l*l+f*f;return T>0?(i[0]=2*(d*f+M*r+v*l-_*s)/T,i[1]=2*(v*f+M*s+_*r-d*l)/T,i[2]=2*(_*f+M*l+d*s-v*r)/T):(i[0]=2*(d*f+M*r+v*l-_*s),i[1]=2*(v*f+M*s+_*r-d*l),i[2]=2*(_*f+M*l+d*s-v*r)),TN(e,t,i),e}const Bpe=et();function Hpe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Wpe(e,t){const i=t[0],r=t[1],s=t[2],l=t[4],f=t[5],d=t[6],v=t[8],_=t[9],M=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(l*l+f*f+d*d),e[2]=Math.sqrt(v*v+_*_+M*M),e}function Jpe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function Zpe(e,t,i,r){const s=t[0],l=t[1],f=t[2],d=t[3],v=s+s,_=l+l,M=f+f,T=s*v,A=s*_,k=s*M,F=l*_,D=l*M,z=f*M,H=d*v,J=d*_,Y=d*M,ie=r[0],re=r[1],ee=r[2];return e[0]=(1-(F+z))*ie,e[1]=(A+Y)*ie,e[2]=(k-J)*ie,e[3]=0,e[4]=(A-Y)*re,e[5]=(1-(T+z))*re,e[6]=(D+H)*re,e[7]=0,e[8]=(k+J)*ee,e[9]=(D-H)*ee,e[10]=(1-(T+F))*ee,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Kpe(e,t,i,r,s){const l=t[0],f=t[1],d=t[2],v=t[3],_=l+l,M=f+f,T=d+d,A=l*_,k=l*M,F=l*T,D=f*M,z=f*T,H=d*T,J=v*_,Y=v*M,ie=v*T,re=r[0],ee=r[1],le=r[2],me=s[0],we=s[1],_e=s[2],Me=(1-(D+H))*re,Se=(k+ie)*re,He=(F-Y)*re,We=(k-ie)*ee,Ot=(1-(A+H))*ee,kt=(z+J)*ee,ft=(F+Y)*le,Ye=(z-J)*le,Ct=(1-(A+D))*le;return e[0]=Me,e[1]=Se,e[2]=He,e[3]=0,e[4]=We,e[5]=Ot,e[6]=kt,e[7]=0,e[8]=ft,e[9]=Ye,e[10]=Ct,e[11]=0,e[12]=i[0]+me-(Me*me+We*we+ft*_e),e[13]=i[1]+we-(Se*me+Ot*we+Ye*_e),e[14]=i[2]+_e-(He*me+kt*we+Ct*_e),e[15]=1,e}function Ype(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=i+i,d=r+r,v=s+s,_=i*f,M=r*f,T=r*d,A=s*f,k=s*d,F=s*v,D=l*f,z=l*d,H=l*v;return e[0]=1-T-F,e[1]=M+H,e[2]=A-z,e[3]=0,e[4]=M-H,e[5]=1-_-F,e[6]=k+D,e[7]=0,e[8]=A+z,e[9]=k-D,e[10]=1-_-T,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xpe(e,t,i,r,s,l,f){const d=1/(i-t),v=1/(s-r),_=1/(l-f);return e[0]=2*l*d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*l*v,e[6]=0,e[7]=0,e[8]=(i+t)*d,e[9]=(s+r)*v,e[10]=(f+l)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=f*l*2*_,e[15]=0,e}function Qpe(e,t,i,r,s){const l=1/Math.tan(t/2);let f;return e[0]=l/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(f=1/(r-s),e[10]=(s+r)*f,e[14]=2*s*r*f):(e[10]=-1,e[14]=-2*r),e}function ede(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),l=Math.tan(t.downDegrees*Math.PI/180),f=Math.tan(t.leftDegrees*Math.PI/180),d=Math.tan(t.rightDegrees*Math.PI/180),v=2/(f+d),_=2/(s+l);return e[0]=v,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=_,e[6]=0,e[7]=0,e[8]=-(f-d)*v*.5,e[9]=(s-l)*_*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function tde(e,t,i,r,s,l,f){const d=1/(t-i),v=1/(r-s),_=1/(l-f);return e[0]=-2*d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(t+i)*d,e[13]=(s+r)*v,e[14]=(f+l)*_,e[15]=1,e}function ide(e,t,i,r){let s,l,f,d,v,_,M,T,A,k;const F=t[0],D=t[1],z=t[2],H=r[0],J=r[1],Y=r[2],ie=i[0],re=i[1],ee=i[2],le=$s();return Math.abs(F-ie)<le&&Math.abs(D-re)<le&&Math.abs(z-ee)<le?p3(e):(M=F-ie,T=D-re,A=z-ee,k=1/Math.sqrt(M*M+T*T+A*A),M*=k,T*=k,A*=k,s=J*A-Y*T,l=Y*M-H*A,f=H*T-J*M,k=Math.sqrt(s*s+l*l+f*f),k?(k=1/k,s*=k,l*=k,f*=k):(s=0,l=0,f=0),d=T*f-A*l,v=A*s-M*f,_=M*l-T*s,k=Math.sqrt(d*d+v*v+_*_),k?(k=1/k,d*=k,v*=k,_*=k):(d=0,v=0,_=0),e[0]=s,e[1]=d,e[2]=M,e[3]=0,e[4]=l,e[5]=v,e[6]=T,e[7]=0,e[8]=f,e[9]=_,e[10]=A,e[11]=0,e[12]=-(s*F+l*D+f*z),e[13]=-(d*F+v*D+_*z),e[14]=-(M*F+T*D+A*z),e[15]=1,e)}function rde(e,t,i,r){const s=t[0],l=t[1],f=t[2],d=r[0],v=r[1],_=r[2];let M=s-i[0],T=l-i[1],A=f-i[2],k=M*M+T*T+A*A;k>0&&(k=1/Math.sqrt(k),M*=k,T*=k,A*=k);let F=v*A-_*T,D=_*M-d*A,z=d*T-v*M;return k=F*F+D*D+z*z,k>0&&(k=1/Math.sqrt(k),F*=k,D*=k,z*=k),e[0]=F,e[1]=D,e[2]=z,e[3]=0,e[4]=T*z-A*D,e[5]=A*F-M*z,e[6]=M*D-T*F,e[7]=0,e[8]=M,e[9]=T,e[10]=A,e[11]=0,e[12]=s,e[13]=l,e[14]=f,e[15]=1,e}function nde(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function sde(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function ode(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function EN(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function ade(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function lde(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function ude(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function cde(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],l=e[3],f=e[4],d=e[5],v=e[6],_=e[7],M=e[8],T=e[9],A=e[10],k=e[11],F=e[12],D=e[13],z=e[14],H=e[15],J=t[0],Y=t[1],ie=t[2],re=t[3],ee=t[4],le=t[5],me=t[6],we=t[7],_e=t[8],Me=t[9],Se=t[10],He=t[11],We=t[12],Ot=t[13],kt=t[14],ft=t[15],Ye=$s();return Math.abs(i-J)<=Ye*Math.max(1,Math.abs(i),Math.abs(J))&&Math.abs(r-Y)<=Ye*Math.max(1,Math.abs(r),Math.abs(Y))&&Math.abs(s-ie)<=Ye*Math.max(1,Math.abs(s),Math.abs(ie))&&Math.abs(l-re)<=Ye*Math.max(1,Math.abs(l),Math.abs(re))&&Math.abs(f-ee)<=Ye*Math.max(1,Math.abs(f),Math.abs(ee))&&Math.abs(d-le)<=Ye*Math.max(1,Math.abs(d),Math.abs(le))&&Math.abs(v-me)<=Ye*Math.max(1,Math.abs(v),Math.abs(me))&&Math.abs(_-we)<=Ye*Math.max(1,Math.abs(_),Math.abs(we))&&Math.abs(M-_e)<=Ye*Math.max(1,Math.abs(M),Math.abs(_e))&&Math.abs(T-Me)<=Ye*Math.max(1,Math.abs(T),Math.abs(Me))&&Math.abs(A-Se)<=Ye*Math.max(1,Math.abs(A),Math.abs(Se))&&Math.abs(k-He)<=Ye*Math.max(1,Math.abs(k),Math.abs(He))&&Math.abs(F-We)<=Ye*Math.max(1,Math.abs(F),Math.abs(We))&&Math.abs(D-Ot)<=Ye*Math.max(1,Math.abs(D),Math.abs(Ot))&&Math.abs(z-kt)<=Ye*Math.max(1,Math.abs(z),Math.abs(kt))&&Math.abs(H-ft)<=Ye*Math.max(1,Math.abs(H),Math.abs(ft))}function hde(e){const t=$s(),i=e[0],r=e[1],s=e[2],l=e[4],f=e[5],d=e[6],v=e[8],_=e[9],M=e[10];return Math.abs(1-(i*i+l*l+v*v))<=t&&Math.abs(1-(r*r+f*f+_*_))<=t&&Math.abs(1-(s*s+d*d+M*M))<=t}const pde=MN,dde=EN;Object.freeze(Object.defineProperty({__proto__:null,copy:Ape,set:rh,identity:p3,transpose:mu,invert:Ppe,adjoint:Ope,determinant:kpe,multiply:MN,translate:Rpe,scale:Fpe,rotate:Lpe,rotateX:Npe,rotateY:jpe,rotateZ:Dpe,fromTranslation:$N,fromScaling:Vpe,fromRotation:IN,fromXRotation:zpe,fromYRotation:Gpe,fromZRotation:qpe,fromRotationTranslation:TN,fromQuat2:Upe,getTranslation:Hpe,getScaling:Wpe,getRotation:Jpe,fromRotationTranslationScale:Zpe,fromRotationTranslationScaleOrigin:Kpe,fromQuat:Ype,frustum:Xpe,perspective:Qpe,perspectiveFromFieldOfView:ede,ortho:tde,lookAt:ide,targetTo:rde,str:nde,frob:sde,add:ode,subtract:EN,multiplyScalar:ade,multiplyScalarAndAdd:lde,exactEquals:ude,equals:cde,isOrthoNormal:hde,mul:pde,sub:dde},Symbol.toStringTag,{value:"Module"}));let FM,be=null;function CN(){return!!be}function fde(){return!!Ie("esri-wasm")}function AN(){return FM||(FM=import("./pe-wasm.031781a0.js").then(e=>e.p).then(({default:e})=>e({locateFile:t=>mi(`esri/geometry/support/${t}`)})).then(e=>{ON(e)}),FM)}var LM,er,NM;(function(e){function t(l,f,d){be.ensureCache.prepare();const v=Qp(d),_=d===v,M=be.ensureFloat64(v),T=be._pe_geog_to_proj(be.getPointer(l),f,M);return T&&nh(d,f,M,_),T}function i(l,f,d,v){switch(v){case er.PE_TRANSFORM_P_TO_G:return r(l,f,d);case er.PE_TRANSFORM_G_TO_P:return t(l,f,d)}return 0}function r(l,f,d){return s(l,f,d,0)}function s(l,f,d,v){be.ensureCache.prepare();const _=Qp(d),M=d===_,T=be.ensureFloat64(_),A=be._pe_proj_to_geog_center(be.getPointer(l),f,T,v);return A&&nh(d,f,T,M),A}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(LM||(LM={})),function(e){function t(){e.PE_BUFFER_MAX=be.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=be.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=be.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=be.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=be.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=be.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=be.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=be.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=be.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=be.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=be.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=be.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=be.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=be.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=be.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=be.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=be.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=be.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=be.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=be.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=be.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=be.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=be.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=be.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=be.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=be.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=be.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=be.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=be.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=be.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(er||(er={})),function(e){const t={},i={},r=k=>{if(k){const F=k.getType();switch(F){case er.PE_TYPE_GEOGCS:k=be.castObject(k,be.PeGeogcs);break;case er.PE_TYPE_PROJCS:k=be.castObject(k,be.PeProjcs);break;case er.PE_TYPE_GEOGTRAN:k=be.castObject(k,be.PeGeogtran);break;default:F&er.PE_TYPE_UNIT&&(k=be.castObject(k,be.PeUnit))}}return k};function s(){be.PeFactory.prototype.initialize(null)}function l(k){return f(er.PE_TYPE_COORDSYS,k)}function f(k,F){let D=null,z=t[k];if(z||(z={},t[k]=z),z.hasOwnProperty(String(F)))D=z[F];else{const H=be.PeFactory.prototype.factoryByType(k,F);be.compare(H,be.NULL)||(D=H,z[F]=D)}return D=r(D),D}function d(k,F){let D=null,z=i[k];if(z||(z={},i[k]=z),z.hasOwnProperty(F))D=z[F];else{const H=be.PeFactory.prototype.fromString(k,F);be.compare(H,be.NULL)||(D=H,z[F]=D)}return D=r(D),D}function v(k){return f(er.PE_TYPE_GEOGCS,k)}function _(k){return f(er.PE_TYPE_GEOGTRAN,k)}function M(k){return be.PeFactory.prototype.getCode(k)}function T(k){return f(er.PE_TYPE_PROJCS,k)}function A(k){return f(er.PE_TYPE_UNIT,k)}e.initialize=s,e.coordsys=l,e.factoryByType=f,e.fromString=d,e.geogcs=v,e.geogtran=_,e.getCode=M,e.projcs=T,e.unit=A}(NM||(NM={}));let PN=null;var d3,jM,DM,VM,f3,zM,y3,g3,GM;function ON(e){function t(l,f,d){l[f]=d(l[f])}be=e,er.init(),d3.init(),f3.init(),y3.init(),g3.init(),PN=class extends be.PeGCSExtent{destroy(){be.destroy(this)}};const i=[be.PeDatum,be.PeGeogcs,be.PeGeogtran,be.PeObject,be.PeParameter,be.PePrimem,be.PeProjcs,be.PeSpheroid,be.PeUnit];for(const l of i)t(l.prototype,"getName",f=>function(){return f.call(this,new Array(er.PE_NAME_MAX))});for(const l of[be.PeGeogtran,be.PeProjcs])t(l.prototype,"getParameters",f=>function(){const d=new Array(er.PE_PARM_MAX);let v=f.call(this);for(let _=0;_<d.length;_++){const M=be.getValue(v,"*");d[_]=M?be.wrapPointer(M,be.PeParameter):null,v+=Int32Array.BYTES_PER_ELEMENT}return d});t(be.PeHorizon.prototype,"getCoord",l=>function(){const f=this.getSize();if(!f)return null;const d=[];return nh(d,f,l.call(this)),d}),t(be.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const f=be._pe_getPeGTlistExtendedGTsSize();return function(){let d=null;const v=l.call(this);if(!be.compare(v,be.NULL)){d=[v];const _=this.getSteps();if(_>1){const M=be.getPointer(v);for(let T=1;T<_;T++)d.push(be.wrapPointer(M+f*T,be.PeGTlistExtendedGTs))}}return d}});const r=be._pe_getPeHorizonSize(),s=l=>function(){let f=this._cache;if(f||(f=new Map,this._cache=f),f.has(l))return f.get(l);let d=null;const v=l.call(this);if(!be.compare(v,be.NULL)){d=[v];const _=v.getNump();if(_>1){const M=be.getPointer(v);for(let T=1;T<_;T++)d.push(be.wrapPointer(M+r*T,be.PeHorizon))}}return f.set(l,d),d};t(be.PeProjcs.prototype,"horizonGcsGenerate",s),t(be.PeProjcs.prototype,"horizonPcsGenerate",s),be.PeObject.prototype.toString=function(l=er.PE_STR_OPTS_NONE){be.ensureCache.prepare();const f=be.getPointer(this),d=be.ensureInt8(new Array(er.PE_BUFFER_MAX));return be.UTF8ToString(be._pe_object_to_string_ext(f,l,d))}}function vu(e){if(!e)return;const t=be.getClass(e);if(!t)return;const i=be.getCache(t);if(!i)return;const r=be.getPointer(e);r&&delete i[r]}function m3(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(be.ensureInt8(r));return i}function Qp(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function nh(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=be.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let l=0;l<t;l++)s&&(e[l]=new Array(2)),e[l][0]=be.getValue(i,"double"),e[l][1]=be.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=be.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=be._pe_getPeGTlistExtendedEntrySize()}function r(s,l,f,d,v,_){let M=null;const T=new be.PeInteger(_);try{const A=be.PeGTlistExtended.prototype.getGTlist(s,l,f,d,v,T);if((_=T.val)&&(M=[A],_>1)){const k=be.getPointer(A);for(let F=1;F<_;F++)M.push(be.wrapPointer(k+t*F,be.PeGTlistExtendedEntry))}}finally{be.destroy(T)}return M}e.init=i,e.getGTlist=r})(d3||(d3={})),function(e){function t(i){if(i&&i.length){for(const r of i)vu(r),r.getEntries().forEach(s=>{vu(s);const l=s.getGeogtran();vu(l),l.getParameters().forEach(vu),[l.getGeogcs1(),l.getGeogcs2()].forEach(f=>{vu(f);const d=f.getDatum();vu(d),vu(d.getSpheroid()),vu(f.getPrimem()),vu(f.getUnit())})});be.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(jM||(jM={})),function(e){function t(i,r,s,l,f){be.ensureCache.prepare();const d=Qp(s),v=s===d,_=be.ensureFloat64(d);let M=0;l&&(M=be.ensureFloat64(l));const T=be._pe_geog_to_geog(be.getPointer(i),r,_,M,f);return T&&nh(s,r,_,v),T}e.geogToGeog=t}(DM||(DM={})),function(e){const t=(_,M,T,A,k,F)=>{let D,z;switch(be.ensureCache.prepare(),_){case"dd":D=be._pe_geog_to_dd,z=er.PE_DD_MAX;break;case"ddm":D=be._pe_geog_to_ddm,z=er.PE_DDM_MAX;break;case"dms":D=be._pe_geog_to_dms,z=er.PE_DMS_MAX}let H=0;M&&(H=be.getPointer(M));const J=Qp(A),Y=be.ensureFloat64(J),ie=m3(T,z),re=D(H,T,Y,k,be.ensureInt32(ie));if(re)for(let ee=0;ee<T;ee++)F[ee]=be.UTF8ToString(ie[ee]);return re},i=(_,M,T,A,k)=>{let F;switch(be.ensureCache.prepare(),_){case"dd":F=be._pe_dd_to_geog;break;case"ddm":F=be._pe_ddm_to_geog;break;case"dms":F=be._pe_dms_to_geog}let D=0;M&&(D=be.getPointer(M));const z=A.map(ie=>be.ensureString(ie)),H=be.ensureInt32(z),J=be.ensureFloat64(new Array(2*T)),Y=F(D,T,H,J);return Y&&nh(k,T,J),Y};function r(_,M,T,A,k){return t("dms",_,M,T,A,k)}function s(_,M,T,A){return i("dms",_,M,T,A)}function l(_,M,T,A,k){return t("ddm",_,M,T,A,k)}function f(_,M,T,A){return i("ddm",_,M,T,A)}function d(_,M,T,A,k){return t("dd",_,M,T,A,k)}function v(_,M,T,A){return i("dd",_,M,T,A)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=l,e.ddmToGeog=f,e.geogToDd=d,e.ddToGeog=v}(VM||(VM={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=be.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=be.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=be.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=be.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=be.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,l,f,d,v,_,M){be.ensureCache.prepare();let T=0;s&&(T=be.getPointer(s));const A=Qp(f),k=be.ensureFloat64(A),F=m3(l,er.PE_MGRS_MAX),D=be.ensureInt32(F),z=be._pe_geog_to_mgrs_extended(T,l,k,d,v,_,D);if(z)for(let H=0;H<l;H++)M[H]=be.UTF8ToString(F[H]);return z}function r(s,l,f,d,v){be.ensureCache.prepare();let _=0;s&&(_=be.getPointer(s));const M=f.map(F=>be.ensureString(F)),T=be.ensureInt32(M),A=be.ensureFloat64(new Array(2*l)),k=be._pe_mgrs_to_geog_extended(_,l,T,d,A);return k&&nh(v,l,A),k}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(f3||(f3={})),function(e){function t(r,s,l,f,d,v,_){be.ensureCache.prepare();let M=0;r&&(M=be.getPointer(r));const T=Qp(l),A=be.ensureFloat64(T),k=m3(s,er.PE_MGRS_MAX),F=be.ensureInt32(k),D=be._pe_geog_to_usng(M,s,A,f,d,v,F);if(D)for(let z=0;z<s;z++)_[z]=be.UTF8ToString(k[z]);return D}function i(r,s,l,f){be.ensureCache.prepare();let d=0;r&&(d=be.getPointer(r));const v=l.map(A=>be.ensureString(A)),_=be.ensureInt32(v),M=be.ensureFloat64(new Array(2*s)),T=be._pe_usng_to_geog(d,s,_,M);return T&&nh(f,s,M),T}e.geogToUsng=t,e.usngToGeog=i}(zM||(zM={})),function(e){function t(){e.PE_UTM_OPTS_NONE=be.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=be.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=be.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,l,f,d,v){be.ensureCache.prepare();let _=0;s&&(_=be.getPointer(s));const M=Qp(f),T=be.ensureFloat64(M),A=m3(l,er.PE_UTM_MAX),k=be.ensureInt32(A),F=be._pe_geog_to_utm(_,l,T,d,k);if(F)for(let D=0;D<l;D++)v[D]=be.UTF8ToString(A[D]);return F}function r(s,l,f,d,v){be.ensureCache.prepare();let _=0;s&&(_=be.getPointer(s));const M=f.map(F=>be.ensureString(F)),T=be.ensureInt32(M),A=be.ensureFloat64(new Array(2*l)),k=be._pe_utm_to_geog(_,l,T,d,A);return k&&nh(v,l,A),k}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(y3||(y3={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=be.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=be.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=be.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=be.PePCSInfo.prototype.PE_POLE_POINT}function r(s,l=e.PE_PCSINFO_OPTION_DOMAIN){let f=null,d=null;return t.has(s)&&(d=t.get(s),d[l]&&(f=d[l])),f||(f=be.PePCSInfo.prototype.generate(s,l),d||(d=[],t.set(s,d)),d[l]=f),f}e.init=i,e.generate=r}(g3||(g3={})),function(e){function t(){return be.PeVersion.prototype.version_string()}e.versionString=t}(GM||(GM={}));const yde=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return be},isLoaded:CN,isSupported:fde,load:AN,get PeCSTransformations(){return LM},get PeDefs(){return er},get PeFactory(){return NM},get PeGCSExtent(){return PN},get PeGTlistExtended(){return d3},get PeGTlistExtendedEntry(){return jM},get PeGTTransformations(){return DM},get PeNotationDms(){return VM},get PeNotationMgrs(){return f3},get PeNotationUsng(){return zM},get PeNotationUtm(){return y3},get PePCSInfo(){return g3},get PeVersion(){return GM},_init:ON},Symbol.toStringTag,{value:"Module"})),ks=Math.PI/180,gde=/SPHEROID\[([^\]]+)]/i,sh=Bi.radius,ma=Bi.eccentricitySquared,mde={a1:sh*ma,a2:sh*ma*sh*ma,a3:sh*ma*ma/2,a4:sh*ma*sh*ma*2.5,a5:sh*ma+sh*ma*ma/2,a6:1-ma},vde={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Bi.radius,f:Bi.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Ac.radius,f:Ac.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:ru.radius,f:ru.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:ru.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let v3=0;class C0{constructor(t){this.uid=v3++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new C0;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=v3++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=v3++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=v3++}getInverse(){const t=new C0;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class oh{constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof C0?this.steps.push(i):this.steps.push(new C0({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new oh;let r="";for(const s of t.steps){const l=C0.fromGE(s);i.steps.push(l),r+=l.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new oh;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[oh.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const l of this.steps)r+=l.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[oh.cacheKey(t,i)];return s===void 0?null:s}}function qM(e,t,i){if(ae(t)||ae(i)||i.vcsWkid||Xi(t,i))return null;const r=E0(t)/E0(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>bde(s,r);case"polyline":case"esriGeometryPolyline":return s=>_de(s,r);case"polygon":case"esriGeometryPolygon":return s=>wde(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>xde(s,r);case"extent":case"esriGeometryExtent":return s=>Sde(s,r);default:return null}}function bde(e,t){e&&e.z!=null&&(e.z*=t)}function wde(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function _de(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function xde(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function Sde(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ah=null,gm=null,UM=null,BM={};const kN=new W4;function lh(){return!!ah&&CN()}function uh(e){return ae(UM)&&(UM=Promise.all([AN(),Promise.resolve().then(function(){return RMe}).then(t=>t.g),Promise.resolve().then(function(){return zMe})])),UM.then(([,t,{hydratedAdapter:i}])=>{fr(e),gm=i,ah=t.default,ah._enableProjection(yde),kN.notify()})}function Vo(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:b3(gm,e,e[0].spatialReference,t,i,r):b3(gm,[e],e.spatialReference,t,i,r)[0]}function b3(e,t,i,r,s=null,l=null){if(ae(i)||ae(r))return t;if(xl(i,r,s))return t.map(f=>Jt(Tde(f,i,r)));if(ae(s)){const f=oh.cacheKey(i,r);BM[f]!==void 0?s=BM[f]:(s=$de(i,r,void 0),ae(s)&&(s=new oh),BM[f]=s)}if(ae(ah)||ae(e))throw new HM;return q(l)?ah._project(e,t,i,r,s,l):ah._project(e,t,i,r,s)}function wCe(e,t){const i=Mde([e],t);return q(i.pending)?{pending:i.pending,geometry:null}:q(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Mde(e,t){if(!lh()){for(const i of e)if(q(i)&&!Xi(i.spatialReference,t)&&Cr(i.spatialReference)&&Cr(t)&&!xl(i.spatialReference,t))return Vt(kN),{pending:uh(),geometries:null}}return{pending:null,geometries:e.map(i=>ae(i)?null:Xi(i.spatialReference,t)?i:Cr(i.spatialReference)&&Cr(t)?Ide(i,t):null)}}function $de(e,t,i=null){if(ae(e)||ae(t))return null;if(ae(ah)||ae(gm))throw new HM;const r=ah._getTransformation(gm,e,t,i,i==null?void 0:i.spatialReference);return r!==null?oh.fromGE(r):null}class HM extends fe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var de;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(de||(de={}));function Ide(e,t){try{const i=Vo(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=qM(i.type,e.spatialReference,t);return q(r)&&r(i),i}catch(i){if(!(i instanceof HM))throw i;return null}}function xl(e,t,i){return!i&&(!!Xi(e,t)||Cr(e)&&Cr(t)&&!!WN(e,t,JN))}async function RN(e,t,i,r){if(lh())return ck(r);if(Array.isArray(e)){for(const{source:s,dest:l,geographicTransformation:f}of e)if(!xl(s,l,f))return uh(r)}else if(!xl(e,t,i))return uh(r);return ck(r)}function Tde(e,t,i){return e?"x"in e?FN(e,t,new dt,i,0):"xmin"in e?Ade(e,t,new ai,i,0):"rings"in e?LN(e,t,new Dn,i,0):"paths"in e?Cde(e,t,new Kr,i,0):"points"in e?Ede(e,t,new ag,i,0):null:null}function _Ce(e,t,i=t.spatialReference,r=0){return q(i)&&q(e.spatialReference)&&q(FN(e,e.spatialReference,t,i,r))}function FN(e,t,i,r,s){Ji[0]=e.x,Ji[1]=e.y;const l=e.z;return Ji[2]=l!==void 0?l:s,bu(Ji,t,0,Ji,r,0,1)?(i.x=Ji[0],i.y=Ji[1],i.spatialReference=r,l===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Ji[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function Ede(e,t,i,r,s){const{points:l,hasZ:f,hasM:d}=e,v=[],_=l.length,M=[];for(const T of l)M.push(T[0],T[1],f?T[2]:s);if(!bu(M,t,0,M,r,0,_))return null;for(let T=0;T<_;++T){const A=3*T,k=M[A],F=M[A+1];f&&d?v.push([k,F,M[A+2],l[T][3]]):f?v.push([k,F,M[A+2]]):d?v.push([k,F,l[T][2]]):v.push([k,F])}return i.points=v,i.spatialReference=r,i.hasZ=f,i.hasM=d,i}function Cde(e,t,i,r,s){const{paths:l,hasZ:f,hasM:d}=e,v=[];return jN(l,f!=null?f:!1,d!=null?d:!1,t,v,r,s)?(i.paths=v,i.spatialReference=r,i.hasZ=f,i.hasM=d,i):null}function xCe({hasZ:e,spatialReference:t,paths:i},r,s=0){const l=ed(t,w3),f=ch[l][de.WGS84_COMPARABLE_LON_LAT];if(ae(f))return!1;const d=e?v=>v:v=>jr(Ji,v[0],v[1],s);for(const v of i){const _=[];for(const M of v){const T=[0,0,s];f(d(M),0,T,0),_.push(T)}r.push(_)}return!0}function SCe({hasZ:e,spatialReference:t,rings:i},r,s=0){const l=ed(t,w3),f=ch[l][de.WGS84_COMPARABLE_LON_LAT];if(ae(f))return!1;const d=e?v=>v:v=>jr(Ji,v[0],v[1],s);for(const v of i){const _=[];for(const M of v){const T=[0,0,s];f(d(M),0,T,0),_.push(T)}r.push(_)}return!0}function MCe(e,t,i=t.spatialReference,r=0){return q(e.spatialReference)&&q(i)&&q(LN(e,e.spatialReference,t,i,r))}function LN(e,t,i,r,s){const{rings:l,hasZ:f,hasM:d}=e,v=[];return jN(l,f!=null?f:!1,d!=null?d:!1,t,v,r,s)?(i.rings=v,i.spatialReference=r,i.hasZ=f,i.hasM=d,i):null}function Ade(e,t,i,r,s){const{xmin:l,ymin:f,xmax:d,ymax:v,hasZ:_,hasM:M}=e;return NN(l,f,_?e.zmin:s,t,Ji,r)?(i.xmin=Ji[0],i.ymin=Ji[1],_&&(i.zmin=Ji[2]),NN(d,v,_?e.zmax:s,t,Ji,r)?(i.xmax=Ji[0],i.ymax=Ji[1],_&&(i.zmax=Ji[2]),M&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function $Ce(e,t,i){return bu(e,t,0,Ji,i.spatialReference,0,1)?(i.x=Ji[0],i.y=Ji[1],i.z=Ji[2],i):null}function ICe(e,t,i,r=0){Ji[0]=e.x,Ji[1]=e.y;const s=e.z;return Ji[2]=s!==void 0?s:r,bu(Ji,e.spatialReference,0,t,i,0,1)}function NN(e,t,i,r,s,l){return Gi[0]=e,Gi[1]=t,Gi[2]=i,bu(Gi,r,0,s,l,0,1)}function TCe(e,t,i,r){return!(ae(t)||ae(r)||e.length<2)&&(e.length===2&&(Gi[0]=e[0],Gi[1]=e[1],Gi[2]=0,e=Gi),bu(e,t,0,i,r,0,1))}function ECe(e,t,i){return Pde(e,t,i)}function Pde(e,t,i){if(ae(t))return!1;const r=ed(t,w3),s=ch[r][de.WGS84_COMPARABLE_LON_LAT];return!ae(s)&&(s(e,0,Gi,0),i!==Gi&&(i[0]=Gi[0],i[1]=Gi[1],i.length>2&&(i[2]=Gi[2])),!0)}function bu(e,t,i,r,s,l,f=1){const d=WN(t,s,JN);if(ae(d))return!1;if(d===Ri){if(e===r&&i===l)return!0;const _=i+3*f;for(let M=i,T=l;M<_;M++,T++)r[T]=e[M];return!0}const v=i+3*f;for(let _=i,M=l;_<v;_+=3,M+=3)d(e,_,r,M);return!0}function jN(e,t,i,r,s,l,f=0){const d=new Array;for(const _ of e)for(const M of _)d.push(M[0],M[1],t?M[2]:f);if(!bu(d,r,0,d,l,0,d.length/3))return!1;let v=0;s.length=0;for(const _ of e){const M=new Array;for(const T of _)t&&i?M.push([d[v++],d[v++],d[v++],T[3]]):t?M.push([d[v++],d[v++],d[v++]]):i?(M.push([d[v++],d[v++],T[2]]),v++):(M.push([d[v++],d[v++]]),v++);s.push(M)}return!0}function CCe(e,t,i,r){return e!=null&&(Xi(t,r)?(u6(i,e),!0):(Gi[0]=e[0],Gi[1]=e[1],Gi[2]=0,!!bu(Gi,t,0,Gi,r,0,1)&&(i[0]=Gi[0],i[1]=Gi[1],Gi[0]=e[2],Gi[1]=e[3],Gi[2]=0,!!bu(Gi,t,0,Gi,r,0,1)&&(i[2]=Gi[0],i[3]=Gi[1],!0))))}function ACe(e,t,i,r){if(ae(e)||ae(r))return!1;const s=ed(e,w3),l=ed(r,Jde);if(s===l&&!DN(l)&&(s!==de.UNKNOWN||Xi(e,r)))return $N(i,t),!0;if(DN(l)){const f=ch[s][de.LON_LAT],d=ch[de.LON_LAT][l];return!ae(f)&&!ae(d)&&(f(t,0,hh,0),d(hh,0,ph,0),VN(Sl*hh[0],Sl*hh[1],i),i[12]=ph[0],i[13]=ph[1],i[14]=ph[2],!0)}if((l===de.WEB_MERCATOR||l===de.PLATE_CARREE)&&(s===de.WGS84||s===de.CGCS2000&&l===de.PLATE_CARREE||s===de.SPHERICAL_ECEF||s===de.WEB_MERCATOR)){const f=ch[s][de.LON_LAT],d=ch[de.LON_LAT][l];return!ae(f)&&!ae(d)&&(f(t,0,hh,0),d(hh,0,ph,0),s===de.SPHERICAL_ECEF?Ode(Sl*hh[0],Sl*hh[1],i):p3(i),i[12]=ph[0],i[13]=ph[1],i[14]=ph[2],!0)}return!1}function DN(e){return e===de.SPHERICAL_ECEF||e===de.SPHERICAL_MARS_PCPF||e===de.SPHERICAL_MOON_PCPF}function VN(e,t,i){const r=Math.sin(e),s=Math.cos(e),l=Math.sin(t),f=Math.cos(t),d=i;return d[0]=-r,d[4]=-l*s,d[8]=f*s,d[12]=0,d[1]=s,d[5]=-l*r,d[9]=f*r,d[13]=0,d[2]=0,d[6]=f,d[10]=l,d[14]=0,d[3]=0,d[7]=0,d[11]=0,d[15]=1,d}function Ode(e,t,i){return VN(e,t,i),mu(i,i),i}function ed(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Xp(e,1)),e.wkt===sN.wkt?t.spatialReferenceId=de.SPHERICAL_ECEF:sg(e)?t.spatialReferenceId=de.WGS84:Xa(e)?t.spatialReferenceId=de.WEB_MERCATOR:eoe(e)?t.spatialReferenceId=de.PLATE_CARREE:e.wkt===fpe.wkt?t.spatialReferenceId=de.WGS84_ECEF:e.wkid===bp.CGCS2000?t.spatialReferenceId=de.CGCS2000:e.wkt===c3.wkt?t.spatialReferenceId=de.SPHERICAL_MARS_PCPF:e.wkt===h3.wkt?t.spatialReferenceId=de.SPHERICAL_MOON_PCPF:zw(e)?t.spatialReferenceId=de.GCSMARS2000:Gw(e)?t.spatialReferenceId=de.GCSMOON2000:t.spatialReferenceId=de.UNKNOWN):de.UNKNOWN}function Ri(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function A0(e,t,i,r){i[r++]=P0*(e[t++]/Bi.radius),i[r++]=P0*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Bi.radius))),i[r]=e[t]}function kde(e,t,i,r){A0(e,t,i,r),rd(i,r,i,r)}function Rde(e,t,i,r){A0(e,t,i,r),sd(i,r,i,r)}function Fde(e,t,i,r,s){const l=.4999999*Math.PI,f=Cn(Sl*e[t+1],-l,l),d=Math.sin(f);i[r++]=Sl*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+d)/(1-d)),i[r]=e[t+2]}function mm(e,t,i,r){Fde(e,t,i,r,Bi)}const zN=Bi.radius*Math.PI/180,GN=180/(Bi.radius*Math.PI);function td(e,t,i,r){i[r]=e[t]*zN,i[r+1]=e[t+1]*zN,i[r+2]=e[t+2]}function id(e,t,i,r){i[r]=e[t]*GN,i[r+1]=e[t+1]*GN,i[r+2]=e[t+2]}function Lde(e,t,i,r){A0(e,t,i,r),td(i,r,i,r)}function Nde(e,t,i,r){od(e,t,i,r),td(i,r,i,r)}function jde(e,t,i,r){nd(e,t,i,r),td(i,r,i,r)}function Dde(e,t,i,r){id(e,t,i,r),rd(i,r,i,r)}function Vde(e,t,i,r){id(e,t,i,r),mm(i,r,i,r)}function zde(e,t,i,r){id(e,t,i,r),sd(i,r,i,r)}function WM(e,t,i,r,s){const l=s+e[t+2],f=Sl*e[t+1],d=Sl*e[t],v=Math.cos(f);i[r++]=Math.cos(d)*v*l,i[r++]=Math.sin(d)*v*l,i[r]=Math.sin(f)*l}function qN(e,t,i,r){WM(e,t,i,r,Ac.radius)}function UN(e,t,i,r){WM(e,t,i,r,ru.radius)}function rd(e,t,i,r){WM(e,t,i,r,Bi.radius)}function JM(e,t,i,r,s){const l=e[t],f=e[t+1],d=e[t+2],v=Math.sqrt(l*l+f*f+d*d),_=sF(d/(v===0?1:v)),M=Math.atan2(f,l);i[r++]=P0*M,i[r++]=P0*_,i[r]=v-s}function BN(e,t,i,r){JM(e,t,i,r,Ac.radius)}function HN(e,t,i,r){JM(e,t,i,r,ru.radius)}function nd(e,t,i,r){JM(e,t,i,r,Bi.radius)}function Gde(e,t,i,r){nd(e,t,i,r),mm(i,r,i,r)}function qde(e,t,i,r){nd(e,t,i,r),sd(i,r,i,r)}function Ude(e,t,i,r,s){const l=Sl*e[t],f=Sl*e[t+1],d=e[t+2],v=Math.sin(f),_=Math.cos(f),M=s.radius/Math.sqrt(1-s.eccentricitySquared*v*v);i[r++]=(M+d)*_*Math.cos(l),i[r++]=(M+d)*_*Math.sin(l),i[r++]=(M*(1-s.eccentricitySquared)+d)*v}function sd(e,t,i,r){Ude(e,t,i,r,Bi)}function od(e,t,i,r){const s=mde,l=e[t],f=e[t+1],d=e[t+2];let v,_,M,T,A,k,F,D,z,H,J,Y,ie,re,ee,le,me,we,_e,Me,Se;v=Math.abs(d),_=l*l+f*f,M=Math.sqrt(_),T=_+d*d,A=Math.sqrt(T),Me=Math.atan2(f,l),k=d*d/T,F=_/T,re=s.a2/A,ee=s.a3-s.a4/A,F>.3?(D=v/A*(1+F*(s.a1+re+k*ee)/A),_e=Math.asin(D),H=D*D,z=Math.sqrt(1-H)):(z=M/A*(1-k*(s.a5-re-F*ee)/A),_e=Math.acos(z),H=1-z*z,D=Math.sqrt(H)),J=1-Bi.eccentricitySquared*H,Y=Bi.radius/Math.sqrt(J),ie=s.a6*Y,re=M-Y*z,ee=v-ie*D,me=z*re+D*ee,le=z*ee-D*re,we=le/(ie/J+me),_e+=we,Se=me+le*we/2,d<0&&(_e=-_e),i[r++]=P0*Me,i[r++]=P0*_e,i[r]=Se}function Bde(e,t,i,r){od(e,t,i,r),rd(i,r,i,r)}function Hde(e,t,i,r){od(e,t,i,r),mm(i,r,i,r)}const ch={[de.WGS84]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:rd,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:mm,[de.PLATE_CARREE]:td,[de.WGS84]:Ri,[de.WGS84_ECEF]:sd},[de.CGCS2000]:{[de.CGCS2000]:Ri,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:rd,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:td,[de.WGS84]:null,[de.WGS84_ECEF]:sd},[de.GCSMARS2000]:{[de.CGCS2000]:null,[de.GCSMARS2000]:Ri,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:UN,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.GCSMOON2000]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:Ri,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:qN,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.WEB_MERCATOR]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:A0,[de.WGS84_COMPARABLE_LON_LAT]:A0,[de.SPHERICAL_ECEF]:kde,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:Ri,[de.PLATE_CARREE]:Lde,[de.WGS84]:A0,[de.WGS84_ECEF]:Rde},[de.WGS84_ECEF]:{[de.CGCS2000]:od,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:od,[de.WGS84_COMPARABLE_LON_LAT]:od,[de.SPHERICAL_ECEF]:Bde,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:Hde,[de.PLATE_CARREE]:Nde,[de.WGS84]:od,[de.WGS84_ECEF]:Ri},[de.SPHERICAL_ECEF]:{[de.CGCS2000]:nd,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:nd,[de.WGS84_COMPARABLE_LON_LAT]:nd,[de.SPHERICAL_ECEF]:Ri,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:Gde,[de.PLATE_CARREE]:jde,[de.WGS84]:nd,[de.WGS84_ECEF]:qde},[de.SPHERICAL_MARS_PCPF]:{[de.CGCS2000]:null,[de.GCSMARS2000]:HN,[de.GCSMOON2000]:null,[de.LON_LAT]:HN,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:Ri,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.SPHERICAL_MOON_PCPF]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:BN,[de.LON_LAT]:BN,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:Ri,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.UNKNOWN]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:null,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:Ri,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.LON_LAT]:{[de.CGCS2000]:Ri,[de.GCSMARS2000]:Ri,[de.GCSMOON2000]:Ri,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:rd,[de.SPHERICAL_MARS_PCPF]:UN,[de.SPHERICAL_MOON_PCPF]:qN,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:mm,[de.PLATE_CARREE]:td,[de.WGS84]:Ri,[de.WGS84_ECEF]:sd},[de.WGS84_COMPARABLE_LON_LAT]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:rd,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:td,[de.WGS84]:Ri,[de.WGS84_ECEF]:sd},[de.PLATE_CARREE]:{[de.CGCS2000]:id,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:id,[de.WGS84_COMPARABLE_LON_LAT]:id,[de.SPHERICAL_ECEF]:Dde,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:Vde,[de.PLATE_CARREE]:Ri,[de.WGS84]:id,[de.WGS84_ECEF]:zde}};function WN(e,t,i=ZM()){return ae(e)||ae(t)?null:Wde(e,t,i).projector}function Wde(e,t,i){if(ae(e)||ae(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=ed(e,i.source),s=ed(t,i.dest);return r===de.UNKNOWN&&s===de.UNKNOWN?Xi(e,t)?i.projector=Ri:i.projector=null:i.projector=ch[r][s],i}function ZM(){return{source:{spatialReference:null,spatialReferenceId:de.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:de.UNKNOWN,metersPerUnit:1},projector:Ri}}const w3={spatialReference:null,spatialReferenceId:de.UNKNOWN},Jde={spatialReference:null,spatialReferenceId:de.UNKNOWN},JN=ZM();ZM();const Sl=nF(1),P0=WS(1),Gi=et(),hh=et(),ph=et(),Ji=et();var KM;let Ml=KM=class extends Ee{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new KM({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};m([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ml.prototype,"cols",void 0),m([x({type:hi,json:{write:!0}})],Ml.prototype,"level",void 0),m([x({type:String,json:{write:!0}})],Ml.prototype,"levelValue",void 0),m([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ml.prototype,"origin",void 0),m([x({type:Number,json:{write:!0}})],Ml.prototype,"resolution",void 0),m([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ml.prototype,"rows",void 0),m([x({type:Number,json:{write:!0}})],Ml.prototype,"scale",void 0),Ml=KM=m([X("esri.layers.support.LOD")],Ml);const YM=Ml;class Zde{constructor(t,i,r,s,l){this.id=t,this.level=i,this.row=r,this.col=s,this.extent=l}}var dh;const ZN=new bt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let rn=dh=class extends Ee{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=At.WebMercator,numLODs:l=24}=e;if(!Cr(s)){const T=[];if(i)for(let A=0;A<i.length;A++){const k=i[A];T.push({level:A,scale:k,resolution:k})}else{let A=5e-4;for(let k=l-1;k>=0;k--)T.unshift({level:k,scale:A,resolution:A}),A*=2}return new dh({dpi:96,lods:T,origin:new dt(0,0,s),size:[r,r],spatialReference:s})}const f=Ys(s),d=e.origin?new dt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new dt(f?{x:f.origin[0],y:f.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),v=96,_=1/(Xp(s)*39.37*v),M=[];if(i)for(let T=0;T<i.length;T++){const A=i[T],k=A*_;M.push({level:T,scale:A,resolution:k})}else{let T=Vw(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const A=Math.ceil(l/t);M.push({level:0,scale:T,resolution:T*_});for(let k=1;k<A;k++){const F=T/2**t,D=F*_;M.push({level:k,scale:F,resolution:D}),T=F}}return new dh({dpi:v,lods:M,origin:d,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Ys(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return dt.fromJSON(te({spatialReference:t.spatialReference},e))}set lods(e){let t=0,i=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(l=>{r.push(l.scale),t=l.scale>t?l.scale:t,i=l.scale<i?l.scale:i,s[l.level]=l})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],l=t[r+1];if(s<=e)return r;if(l===e)return r+1;if(s>e&&l<e)return r+Math.log(s/e)/Math.log(s/l)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let l,f;if(typeof t=="number")l=t,f=i;else if(Xi(t.spatialReference,this.spatialReference))l=t.x,f=t.y,r=i;else{const _=Uw(t,this.spatialReference);if(ae(_))return null;l=_.x,f=_.y,r=i}const d=s.resolution*this.size[0],v=s.resolution*this.size[1];return r||(r=new Zde(null,0,0,0,Fo())),r.level=e,r.row=Math.floor((this.origin.y-f)/v+.001),r.col=Math.floor((l-this.origin.x)/d+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=dh.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===dh.ExtrapolateOptions.POWER_OF_TWO){const f=this.lods[this.lods.length-1];f.level<e.level&&(i=f)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,l=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Fo()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*l,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+l}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],l=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*l,e[2]=e[0]+s,e[3]=e[1]+l,e}lodAt(e){var t,i;return(i=(t=this._levelToLOD)==null?void 0:t[e])!=null?i:null}clone(){return dh.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const l=this.lods[s],f=l.resolution*t;i.push(new YM({level:l.level,scale:l.scale,resolution:f}))}return new dh({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};m([x({type:Number,json:{write:!0}})],rn.prototype,"compressionQuality",void 0),m([x({type:Number,json:{write:!0}})],rn.prototype,"dpi",void 0),m([x({type:String,json:{read:ZN.read,write:ZN.write,origins:{"web-scene":{read:!1,write:!1}}}})],rn.prototype,"format",void 0),m([x({readOnly:!0})],rn.prototype,"isWrappable",null),m([x({type:dt,json:{write:!0}})],rn.prototype,"origin",void 0),m([Be("origin")],rn.prototype,"readOrigin",null),m([x({type:[YM],value:null,json:{write:!0}})],rn.prototype,"lods",null),m([x({readOnly:!0})],rn.prototype,"minScale",void 0),m([x({readOnly:!0})],rn.prototype,"maxScale",void 0),m([x({readOnly:!0})],rn.prototype,"scales",void 0),m([x({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],rn.prototype,"size",void 0),m([Be("size",["rows","cols"])],rn.prototype,"readSize",null),m([Xe("size",{cols:{type:hi},rows:{type:hi}})],rn.prototype,"writeSize",null),m([x({type:At,json:{write:!0}})],rn.prototype,"spatialReference",void 0),rn=dh=m([X("esri.layers.support.TileInfo")],rn),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(rn||(rn={}));const Kde=rn,_3={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},XM={xsmall:544,small:768,medium:992,large:1200};function Yde(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function QM(e,t){return t?_3[e].valueToClassName[t].split(" "):[]}const Xde=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Jr,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=XM}initialize(){this._breakpointsHandles.add(Ve(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),fi))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=oi(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=Yde(i);if(!r){const s=JSON.stringify(XM,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:XM,this._set("breakpoints",te({},i))}_updateClassNames(){if(!this.container)return;const i=as.acquire(),r=as.acquire();let s,l=!1;for(s in _3){const f=this[s],d=_3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});f!==d&&(l=!0,this[s]=d,QM(s,f).forEach(v=>r.push(v)),QM(s,d).forEach(v=>i.push(v)))}l&&(this._applyClassNameChanges(i,r),as.release(i),as.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(l=>s.classList.remove(l)),i.forEach(l=>s.classList.add(l)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in _3)QM(r,this[r]).forEach(s=>i.classList.remove(s))}};return m([x()],t.prototype,"breakpoints",null),m([x()],t.prototype,"orientation",void 0),m([x()],t.prototype,"widthBreakpoint",void 0),m([x()],t.prototype,"heightBreakpoint",void 0),t=m([X("esri.views.BreakpointsOwner")],t),t};function e$(e){return typeof e=="string"?document.getElementById(e):e!=null?e:null}function KN(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function YN(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function XN(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let O0=class extends ot{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Jr,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,Ve)}addWhen(e,t,i={}){return this._installWatch(e,t,i,so)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const s=++this._handleId;return this._handles.add([fs(e,"after-changes",this._createSyncUpdatingCallback(),bl),fs(e,"change",t,{onListenerAdd:i?l=>t({added:l.toArray(),removed:[]}):void 0,onListenerRemove:r?l=>t({added:[],removed:l.toArray()}):void 0})],s),{remove:()=>this._handles.remove(s)}}addPromise(e){if(ae(e))return e;const t=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(x3)||this._set("updating",!1))}},t),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this._handles.remove(t);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,s);const l=r(e,t,i);return this._handles.add(l,s),{remove:()=>this._handles.remove(s)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=Ve(e,i,{sync:!0,equals:()=>!1});return this._handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this._handles.remove(x3),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(qf(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(x3))}),x3)}}};m([x({readOnly:!0})],O0.prototype,"updating",void 0),O0=m([X("esri.core.support.WatchUpdatingTracking")],O0);const x3=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var Qde=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},ad={exports:{}},mr={},vm={exports:{}},ld={};function QN(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function efe(e,t,i){}function tfe(e,t,i){}var ife=/javascript\s*\:/img;function rfe(e,t){return ife.test(t)?"":t}ld.whiteList=QN();ld.getDefaultWhiteList=QN;ld.onAttr=efe;ld.onIgnoreAttr=tfe;ld.safeAttrValue=rfe;var nfe={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},bm=nfe;function sfe(e,t){e=bm.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,l=0,f="";function d(){if(!r){var M=bm.trim(e.slice(s,l)),T=M.indexOf(":");if(T!==-1){var A=bm.trim(M.slice(0,T)),k=bm.trim(M.slice(T+1));if(A){var F=t(s,f.length,A,k,M);F&&(f+=F+"; ")}}}s=l+1}for(;l<i;l++){var v=e[l];if(v==="/"&&e[l+1]==="*"){var _=e.indexOf("*/",l+2);if(_===-1)break;l=_+1,s=l+1,r=!1}else v==="("?r=!0:v===")"?r=!1:v===";"?r||d():v===`
`&&d()}return bm.trim(f)}var ofe=sfe,S3=ld,afe=ofe;function ej(e){return e==null}function lfe(e){var t={};for(var i in e)t[i]=e[i];return t}function tj(e){e=lfe(e||{}),e.whiteList=e.whiteList||S3.whiteList,e.onAttr=e.onAttr||S3.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||S3.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||S3.safeAttrValue,this.options=e}tj.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,l=i.onIgnoreAttr,f=i.safeAttrValue,d=afe(e,function(v,_,M,T,A){var k=r[M],F=!1;if(k===!0?F=k:typeof k=="function"?F=k(T):k instanceof RegExp&&(F=k.test(T)),F!==!0&&(F=!1),T=f(M,T),!!T){var D={position:_,sourcePosition:v,source:A,isWhite:F};if(F){var z=s(M,T,D);return ej(z)?M+":"+T:z}else{var z=l(M,T,D);if(!ej(z))return z}}});return d};var ufe=tj;(function(e,t){var i=ld,r=ufe;function s(f,d){var v=new r(d);return v.process(f)}t=e.exports=s,t.FilterCSS=r;for(var l in i)t[l]=i[l]})(vm,vm.exports);var t$={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},cfe=vm.exports.FilterCSS,hfe=vm.exports.getDefaultWhiteList,M3=t$;function ij(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var rj=new cfe;function pfe(e,t,i){}function dfe(e,t,i){}function ffe(e,t,i){}function yfe(e,t,i){}function nj(e){return e.replace(mfe,"&lt;").replace(vfe,"&gt;")}function gfe(e,t,i,r){if(i=pj(i),t==="href"||t==="src"){if(i=M3.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if($3.lastIndex=0,$3.test(i))return""}else if(t==="style"){if(sj.lastIndex=0,sj.test(i)||(oj.lastIndex=0,oj.test(i)&&($3.lastIndex=0,$3.test(i))))return"";r!==!1&&(r=r||rj,i=r.process(i))}return i=dj(i),i}var mfe=/</g,vfe=/>/g,bfe=/"/g,wfe=/&quot;/g,_fe=/&#([a-zA-Z0-9]*);?/gim,xfe=/&colon;?/gim,Sfe=/&newline;?/gim,$3=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,sj=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,oj=/u\s*r\s*l\s*\(.*/gi;function aj(e){return e.replace(bfe,"&quot;")}function lj(e){return e.replace(wfe,'"')}function uj(e){return e.replace(_fe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function cj(e){return e.replace(xfe,":").replace(Sfe," ")}function hj(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return M3.trim(t)}function pj(e){return e=lj(e),e=uj(e),e=cj(e),e=hj(e),e}function dj(e){return e=aj(e),e=nj(e),e}function Mfe(){return""}function $fe(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(f){return i?!0:M3.indexOf(e,f)!==-1}var s=[],l=!1;return{onIgnoreTag:function(f,d,v){if(r(f))if(v.isClosing){var _="[/removed]",M=v.position+_.length;return s.push([l!==!1?l:v.position,M]),l=!1,_}else return l||(l=v.position),"[removed]";else return t(f,d,v)},remove:function(f){var d="",v=0;return M3.forEach(s,function(_){d+=f.slice(v,_[0]),v=_[1]}),d+=f.slice(v),d}}}function Ife(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function Tfe(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}mr.whiteList=ij();mr.getDefaultWhiteList=ij;mr.onTag=pfe;mr.onIgnoreTag=dfe;mr.onTagAttr=ffe;mr.onIgnoreTagAttr=yfe;mr.safeAttrValue=gfe;mr.escapeHtml=nj;mr.escapeQuote=aj;mr.unescapeQuote=lj;mr.escapeHtmlEntities=uj;mr.escapeDangerHtml5Entities=cj;mr.clearNonPrintableCharacter=hj;mr.friendlyAttrValue=pj;mr.escapeAttrValue=dj;mr.onIgnoreTagStripAll=Mfe;mr.StripTagBody=$fe;mr.stripCommentTag=Ife;mr.stripBlankChar=Tfe;mr.cssFilter=rj;mr.getDefaultCSSWhiteList=hfe;var I3={},fh=t$;function Efe(e){var t=fh.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=fh.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Cfe(e){return e.slice(0,2)==="</"}function Afe(e,t,i){var r="",s=0,l=!1,f=!1,d=0,v=e.length,_="",M="";e:for(d=0;d<v;d++){var T=e.charAt(d);if(l===!1){if(T==="<"){l=d;continue}}else if(f===!1){if(T==="<"){r+=i(e.slice(s,d)),l=d,s=d;continue}if(T===">"){r+=i(e.slice(s,l)),M=e.slice(l,d+1),_=Efe(M),r+=t(l,r.length,_,M,Cfe(M)),s=d+1,l=!1;continue}if(T==='"'||T==="'")for(var A=1,k=e.charAt(d-A);k.trim()===""||k==="=";){if(k==="="){f=T;continue e}k=e.charAt(d-++A)}}else if(T===f){f=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var Pfe=/[^a-zA-Z0-9\\_:.-]/gim;function Ofe(e,t){var i=0,r=0,s=[],l=!1,f=e.length;function d(A,k){if(A=fh.trim(A),A=A.replace(Pfe,"").toLowerCase(),!(A.length<1)){var F=t(A,k||"");F&&s.push(F)}}for(var v=0;v<f;v++){var _=e.charAt(v),M,T;if(l===!1&&_==="="){l=e.slice(i,v),i=v+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:Rfe(e,v+1);continue}if(l!==!1&&v===r){if(T=e.indexOf(_,v+1),T===-1)break;M=fh.trim(e.slice(r+1,T)),d(l,M),l=!1,v=T,i=v+1;continue}if(/\s|\n|\t/.test(_))if(e=e.replace(/\s|\n|\t/g," "),l===!1)if(T=kfe(e,v),T===-1){M=fh.trim(e.slice(i,v)),d(M),l=!1,i=v+1;continue}else{v=T-1;continue}else if(T=Ffe(e,v-1),T===-1){M=fh.trim(e.slice(i,v)),M=fj(M),d(l,M),l=!1,i=v+1;continue}else continue}return i<e.length&&(l===!1?d(e.slice(i)):d(l,fj(fh.trim(e.slice(i))))),fh.trim(s.join(" "))}function kfe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Rfe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function Ffe(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Lfe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function fj(e){return Lfe(e)?e.substr(1,e.length-2):e}I3.parseTag=Afe;I3.parseAttr=Ofe;var Nfe=vm.exports.FilterCSS,va=mr,yj=I3,jfe=yj.parseTag,Dfe=yj.parseAttr,T3=t$;function E3(e){return e==null}function Vfe(e){var t=T3.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=T3.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=T3.trim(e.slice(0,-1))),{html:e,closing:i}}function zfe(e){var t={};for(var i in e)t[i]=e[i];return t}function Gfe(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function gj(e){e=zfe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=va.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Gfe(e.whiteList||e.allowList):e.whiteList=va.whiteList,e.onTag=e.onTag||va.onTag,e.onTagAttr=e.onTagAttr||va.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||va.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||va.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||va.safeAttrValue,e.escapeHtml=e.escapeHtml||va.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Nfe(e.css))}gj.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,l=i.onIgnoreTag,f=i.onTagAttr,d=i.onIgnoreTagAttr,v=i.safeAttrValue,_=i.escapeHtml,M=t.cssFilter;i.stripBlankChar&&(e=va.stripBlankChar(e)),i.allowCommentTag||(e=va.stripCommentTag(e));var T=!1;i.stripIgnoreTagBody&&(T=va.StripTagBody(i.stripIgnoreTagBody,l),l=T.onIgnoreTag);var A=jfe(e,function(k,F,D,z,H){var J={sourcePosition:k,position:F,isClosing:H,isWhite:Object.prototype.hasOwnProperty.call(r,D)},Y=s(D,z,J);if(!E3(Y))return Y;if(J.isWhite){if(J.isClosing)return"</"+D+">";var ie=Vfe(z),re=r[D],ee=Dfe(ie.html,function(le,me){var we=T3.indexOf(re,le)!==-1,_e=f(D,le,me,we);return E3(_e)?we?(me=v(D,le,me,M),me?le+'="'+me+'"':le):(_e=d(D,le,me,we),E3(_e)?void 0:_e):_e});return z="<"+D,ee&&(z+=" "+ee),ie.closing&&(z+=" /"),z+=">",z}else return Y=l(D,z,J),E3(Y)?_(z):Y},_);return T&&(A=T.remove(A)),A};var qfe=gj;(function(e,t){var i=mr,r=I3,s=qfe;function l(d,v){var _=new s(v);return _.process(d)}t=e.exports=l,t.filterXSS=l,t.FilterXSS=s,function(){for(var d in i)t[d]=i[d];for(var v in r)t[v]=r[v]}();function f(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}f()&&(self.filterXSS=e.exports)})(ad,ad.exports);var Ufe=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(l,f,d,v){return l==="a"&&f==="href"||(l==="img"||l==="source")&&f==="src"?r.sanitizeUrl(d):ad.exports.safeAttrValue(l,f,d,v)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(l){l==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):s[l]=t[l]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new ad.exports.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,s=r===void 0?!0:r,l=this._trim(t.substring(0,t.indexOf(":"))),f=t==="/",d=/^#/.test(t),v=l&&this.allowedProtocols.indexOf(l.toLowerCase())>-1;return f||d||v?ad.exports.escapeAttrValue(t):!l&&!s?ad.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):ad.exports.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,l=void 0;if(Array.isArray(t))l=t.reduce(function(d,v){var _=r.validate(v,i);return _.isValid?d.concat([v]):(s=!0,d.concat([_.sanitized]))},[]);else if(Qde(t)){var f=Object.keys(t);l=f.reduce(function(d,v){var _=t[v],M=r.validate(_,i);return M.isValid?d[v]=_:(s=!0,d[v]=M.sanitized),d},{})}else return i.allowUndefined&&typeof t=="undefined"?void 0:null;return s?l:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const C3=new Map;function mj(){C3.clear()}function Bfe(e){return C3.get(e)}function Hfe(e,t){C3.set(e,t)}function i$(e){C3.delete(e)}var ud,k0,Wfe=function(e){if("WebkitTransition"in e.style)ud="webkitTransitionEnd",k0="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");ud="transitionend",k0="animationend"}},vj=function(e){ud||Wfe(e)},Jfe=function(e,t){return t===void 0&&(t=e+"-active"),function(i){vj(i);var r=!1,s=function(l){r||(r=!0,i.removeEventListener(ud,s),i.removeEventListener(k0,s),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(ud,s),i.addEventListener(k0,s),requestAnimationFrame(function(){i.classList.add(t)})}},Zfe=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){vj(i);var s=!1,l=function(f){s||(s=!0,i.removeEventListener(ud,l),i.removeEventListener(k0,l),r())};i.classList.add(e),i.addEventListener(ud,l),i.addEventListener(k0,l),requestAnimationFrame(function(){i.classList.add(t)})}};const Kfe=Pe.getLogger("esri.widgets.support.widgetUtils");function bj(e){const t=as.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],l=typeof s;if(l==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(l==="object")for(const f in s)s[f]&&t.push(f)}const i=t.join(" ");return as.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{var r;mj();for(const s of i)(r=e.get(s.target))==null||r(s)});return(i,r,s)=>(e.has(i)&&Kfe.error("Already observing element",i),e.set(i,r),t.observe(i,s),Kl(()=>{t.unobserve(i),e.delete(i)}))})();function $l(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function wj(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function A3(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function Yfe(e,t){return(e==="enter"?Jfe:Zfe)(t)}const Xfe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Qfe=Xfe.reduce((e,t)=>(e[t]=[],e),{}),e0e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],_j=new Ufe({whiteList:Qfe,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(e0e.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function t0e(e){return e==="Enter"||e===" "}const xj="http://www.w3.org/",P3=`${xj}2000/svg`,Sj=`${xj}1999/xlink`;let O3,Mj=[],r$=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},n$=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),$j=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},i0e=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(n$(e[r],t))return r}return-1},s$=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let l=s.properties;if(!(l?l.key===void 0?l.bind:l.key:void 0)){for(let f=0;f<e.length;f++)if(f!==t){let d=e[f];if(n$(d,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},r0e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},o$=[],a$=!1,Ij=e=>{(e.children||[]).forEach(Ij),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},Tj=()=>{a$=!1,o$.forEach(Ij),o$.length=0},Ej=e=>{o$.push(e),a$||(a$=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(Tj,{timeout:16}):setTimeout(Tj,16))},Cj=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),Ej(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),Ej(e))},n0e=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),l=s.length;for(let f=0;f<l;f++){let d=s[f],v=t[d];if(d==="className")throw new Error('Property "className" is not supported, use "class".');if(d==="class")l$(e,v,!0);else if(d==="classes"){let _=Object.keys(v),M=_.length;for(let T=0;T<M;T++){let A=_[T];v[A]&&e.classList.add(A)}}else if(d==="styles"){let _=Object.keys(v),M=_.length;for(let T=0;T<M;T++){let A=_[T],k=v[A];k&&($j(k),i.styleApplyer(e,A,k))}}else if(d!=="key"&&v!=null){let _=typeof v;_==="function"?(d.lastIndexOf("on",0)===0&&(r&&(v=r(d,v,e,t)),d==="oninput"&&function(){let M=v;v=function(T){M.apply(this,[T]),T.target["oninput-value"]=T.target.value}}()),e[d]=v):i.namespace===P3?d==="href"?e.setAttributeNS(Sj,d,v):e.setAttribute(d,v):_==="string"&&d!=="value"?d==="innerHTML"?e[d]=_j.sanitize(v):e.setAttribute(d,v):e[d]=v}}},s0e=(e,t,i)=>{if(t)for(let r of t)R0(r,e,void 0,i)},Aj=(e,t,i)=>{s0e(e,t.children,i),t.text&&(e.textContent=t.text),n0e(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},R0=(e,t,i,r)=>{let s,l=0,f=e.vnodeSelector,d=t.ownerDocument;if(f==="")s=e.domNode=d.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let v=0;v<=f.length;++v){let _=f.charAt(v);if(v===f.length||_==="."||_==="#"){let M=f.charAt(l-1),T=f.slice(l,v);M==="."?s.classList.add(T):M==="#"?s.id=T:(T==="svg"&&(r=r$(r,{namespace:P3})),r.namespace!==void 0?s=e.domNode=d.createElementNS(r.namespace,T):(s=e.domNode=e.domNode||d.createElement(T),T==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),l=v+1}}Aj(s,e,r)}},l$=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},o0e=(e,t,i,r)=>{if(!i)return;let s=!1,l=Object.keys(i),f=l.length;for(let d=0;d<f;d++){let v=l[d],_=i[v],M=t[v];if(v==="class")M!==_&&(l$(e,M,!1),l$(e,_,!0));else if(v==="classes"){let T=e.classList,A=Object.keys(_),k=A.length;for(let F=0;F<k;F++){let D=A[F],z=!!_[D];z!==!!M[D]&&(s=!0,z?T.add(D):T.remove(D))}}else if(v==="styles"){let T=Object.keys(_),A=T.length;for(let k=0;k<A;k++){let F=T[k],D=_[F];D!==M[F]&&(s=!0,D?($j(D),r.styleApplyer(e,F,D)):r.styleApplyer(e,F,""))}}else if(_||typeof M!="string"||(_=""),v==="value"){let T=e[v];T!==_&&(e["oninput-value"]?T===e["oninput-value"]:_!==M)&&(e[v]=_,e["oninput-value"]=void 0),_!==M&&(s=!0)}else if(_!==M){let T=typeof _;T==="function"&&r.eventHandlerInterceptor||(r.namespace===P3?v==="href"?e.setAttributeNS(Sj,v,_):e.setAttribute(v,_):T==="string"?v==="innerHTML"?e[v]=_j.sanitize(_):v==="role"&&_===""?e.removeAttribute(v):e.setAttribute(v,_):e[v]!==_&&(e[v]=_),s=!0)}}return s},a0e=(e,t,i,r,s)=>{if(i===r)return!1;r=r||Mj;let l,f=(i=i||Mj).length,d=r.length,v=0,_=0,M=!1;for(;_<d;){let T=v<f?i[v]:void 0,A=r[_];if(T!==void 0&&n$(T,A))M=O3(T,A,s)||M,v++;else{let k=i0e(i,A,v+1);if(k>=0){for(l=v;l<k;l++)Cj(i[l]),s$(i,l,e,"removed");M=O3(i[k],A,s)||M,v=k+1}else R0(A,t,v<f?i[v].domNode:void 0,s),r0e(A),s$(r,_,e,"added")}_++}if(f>v)for(l=v;l<f;l++)Cj(i[l]),s$(i,l,e,"removed");return M};O3=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let l=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let f=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(f,r),t.domNode=f,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=r$(i,{namespace:P3})),e.text!==t.text&&(l=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,l=a0e(t,r,e.children,t.children,i)||l,l=o0e(r,e.properties,t.properties,i)||l,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return l&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let wm=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,O3(r,i,t)},domNode:e.domNode});const l0e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let F0=e=>r$(l0e,e),yh={create:(e,t)=>(t=F0(t),R0(e,document.createElement("div"),void 0,t),wm(e,t)),append:(e,t,i)=>(i=F0(i),R0(t,e,void 0,i),wm(t,i)),insertBefore:(e,t,i)=>(i=F0(i),R0(t,e.parentNode,e,i),wm(t,i)),merge:(e,t,i)=>(i=F0(i),t.domNode=e,Aj(e,t,i),wm(t,i)),replace:(e,t,i)=>(i=F0(i),R0(t,e.parentNode,e,i),e.parentNode.removeChild(e),wm(t,i))},Pj,u0e=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};Pj=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let c0e=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?Pj(i.children,s=>s.domNode===r):void 0}),i},h0e=(e,t,i)=>{let r=function(s){i("domEvent",s);let l=t(),f=u0e(s.currentTarget,l.domNode);f.reverse();let d,v=c0e(l.getLastRender(),f);return e.scheduleRender(),v&&(d=v.properties[`on${s.type}`].apply(v.properties.bind||this,arguments)),i("domEventProcessed",s),d};return(s,l,f,d)=>r},u$=e=>{let t,i,r=F0(e),s=r.performanceLogger,l=!0,f=!1,d=[],v=[],_=(T,A,k)=>{let F,D=()=>F;r.eventHandlerInterceptor=h0e(t,D,s),F=T(A,k(),r),d.push(F),v.push(k)},M=()=>{if(i=void 0,l){l=!1,s("renderStart",void 0);for(let T=0;T<d.length;T++){let A=v[T]();s("rendered",void 0),d[T].update(A),s("patched",void 0)}s("renderDone",void 0),l=!0}};return t={renderNow:M,scheduleRender:()=>{i||f||(i=requestAnimationFrame(M))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),f=!0},resume:()=>{f=!1,l=!0,t.scheduleRender()},append:(T,A)=>{_(yh.append,T,A)},insertBefore:(T,A)=>{_(yh.insertBefore,T,A)},merge:(T,A)=>{_(yh.merge,T,A)},replace:(T,A)=>{_(yh.replace,T,A)},detach:T=>{for(let A=0;A<v.length;A++)if(v[A]===T)return v.splice(A,1),d.splice(A,1)[0];throw new Error("renderFunction was not found")}},t},gh=class extends ot{constructor(){super(...arguments),this.items=new gt,this._watchUpdatingTracking=new O0,this._callbacks=new Map,this._projector=u$(),this._hiddenProjector=u$()}get needsRender(){return this.items.length>0}get updating(){var e,t;return(t=(e=this._watchUpdatingTracking)==null?void 0:e.updating)!=null?t:!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const s=()=>(r=e.render(),r);i.append(t,s),i.renderNow();const l={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const f=r.domNode.getBoundingClientRect();l.left=f.left,l.top=f.top,l.right=f.right,l.bottom=f.bottom}for(i.detach(s);t.firstChild;)t.removeChild(t.firstChild);return l}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};m([x({readOnly:!0})],gh.prototype,"surface",void 0),m([x({readOnly:!0})],gh.prototype,"items",void 0),m([x({readOnly:!0})],gh.prototype,"needsRender",null),m([x({readOnly:!0})],gh.prototype,"_watchUpdatingTracking",void 0),m([x({readOnly:!0})],gh.prototype,"updating",null),gh=m([X("esri.views.overlay.ViewOverlay")],gh);const Oj=gh;function L0(e,t,i,r){let s=null,l=1e3;typeof t=="number"?(l=t,r=i):(s=t!=null?t:null,l=i);let f,d=0;const v=()=>{d=0,e.apply(r,f)},_=(...M)=>{s&&s.apply(r,M),f=M,l?d||(d=setTimeout(v,l)):v()};return _.remove=()=>{d&&(clearTimeout(d),d=0)},_.forceUpdate=()=>{d&&(clearTimeout(d),v())},_.hasPendingUpdates=()=>!!d,_}const p0e="randomUUID"in crypto;function d0e(){if(p0e)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const f0e={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},y0e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},g0e=e=>te(te({},y0e),e),m0e=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},v0e=(e,t)=>e.find(t),kj=(e,t,i=!1)=>{let r=e;return t.forEach((s,l)=>{const f=(r==null?void 0:r.children)?v0e(r.children,d=>d.domNode===s):void 0;i&&!f&&l!==t.length-1||(r=f)}),r},b0e=e=>{let t;const i=te(te({},f0e),e),r=g0e(i),s=r.performanceLogger;let l,f=!0,d=!1;const v=[],_=[],M=(A,k,F)=>{var H;let D;r.eventHandlerInterceptor=(J,Y,ie,re)=>function(ee){let le;s("domEvent",ee);const me=m0e(ee.currentTarget,D.domNode),we=me.some(Me=>{var Se;return customElements.get((Se=Me==null?void 0:Me.tagName)==null?void 0:Se.toLowerCase())});if(ee.eventPhase===Event.CAPTURING_PHASE||!we)me.reverse(),le=kj(D.getLastRender(),me);else{const Me=ee.composedPath(),Se=Me.slice(Me.indexOf(ee.currentTarget),Me.indexOf(D.domNode)).filter(He=>He.getRootNode()===He.ownerDocument).reverse();le=kj(D.getLastRender(),Se,!0)}let _e;return le&&(_e=i.handleInterceptedEvent(t,le,this,ee)),s("domEventProcessed",ee),_e},(H=i.postProcessProjectionOptions)==null||H.call(i,r);const z=F();D=A(k,z,r),v.push(D),_.push(F),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(D,z)};let T=()=>{if(l=void 0,f){f=!1,s("renderStart",void 0);for(let A=0;A<v.length;A++){const k=_[A]();s("rendered",void 0),v[A].update(k),s("patched",void 0)}s("renderDone",void 0),f=!0}};return i.modifyDoRenderImplementation&&(T=i.modifyDoRenderImplementation(T,v,_)),t={renderNow:T,scheduleRender:()=>{l||d||(l=requestAnimationFrame(T))},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),d=!0},resume:()=>{d=!1,f=!0,t.scheduleRender()},append:(A,k)=>{M(yh.append,A,k)},insertBefore:(A,k)=>{M(yh.insertBefore,A,k)},merge:(A,k)=>{M(yh.merge,A,k)},replace:(A,k)=>{M(yh.replace,A,k)},detach:A=>{for(let k=0;k<_.length;k++)if(_[k]===A)return _.splice(k,1),v.splice(k,1)[0];throw new Error("renderFunction was not found")}},t},Ht={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let N0,Rj,k3,Fj=!1,R3=!1,c$=!1,oo=!1,Lj=null,h$=!1;const PCe={isDev:!!Ht.isDev,isBrowser:!0,isServer:!1,isTesting:!!Ht.isTesting},OCe=e=>{const t=new URL(e,Pn.$resourcesUrl$);return t.origin!==z0.location.origin?t.href:t.pathname},w0e=e=>Pn.$resourcesUrl$=e,cd=(e,t="")=>()=>{},Nj="http://www.w3.org/1999/xlink",jj={},_0e="http://www.w3.org/2000/svg",x0e="http://www.w3.org/1999/xhtml",S0e=e=>e!=null,p$=e=>(e=typeof e,e==="object"||e==="function"),Dj=(e,t,...i)=>{let r=null,s=null,l=null,f=!1,d=!1;const v=[],_=T=>{for(let A=0;A<T.length;A++)r=T[A],Array.isArray(r)?_(r):r!=null&&typeof r!="boolean"&&((f=typeof e!="function"&&!p$(r))&&(r=String(r)),f&&d?v[v.length-1].$text$+=r:v.push(f?F3(null,r):r),d=f)};if(_(i),t&&(Ht.isDev&&e==="input"&&T0e(t),Ht.vdomKey&&t.key&&(s=t.key),Ht.slotRelocation&&t.name&&(l=t.name),Ht.vdomClass)){const T=t.className||t.class;T&&(t.class=typeof T!="object"?T:Object.keys(T).filter(A=>T[A]).join(" "))}if(Ht.isDev&&v.some(Vj)&&t1e(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),Ht.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,v,$0e);const M=F3(e,null);return M.$attrs$=t,v.length>0&&(M.$children$=v),Ht.vdomKey&&(M.$key$=s),Ht.slotRelocation&&(M.$name$=l),M},F3=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Ht.vdomAttribute&&(i.$attrs$=null),Ht.vdomKey&&(i.$key$=null),Ht.slotRelocation&&(i.$name$=null),i},M0e={},Vj=e=>e&&e.$tag$===M0e,$0e={forEach:(e,t)=>e.map(zj).forEach(t),map:(e,t)=>e.map(zj).map(t).map(I0e)},zj=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),I0e=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),Dj(e.vtag,i,...e.vchildren||[])}const t=F3(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},T0e=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),s=t.indexOf("min"),l=t.indexOf("max"),f=t.indexOf("step");(i<r||i<s||i<l||i<f)&&sD('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},E0e=e=>i1e.map(t=>t(e)).find(t=>!!t),C0e=(e,t)=>e!=null&&!p$(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,A0e=e=>Ht.lazyLoad?V0(e).$hostElement$:e,kCe=(e,t,i)=>{const r=A0e(e);return{emit:s=>(Ht.isDev&&!r.isConnected&&sD(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),P0e(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s}))}},P0e=(e,t,i)=>{const r=Pn.ce(t,i);return e.dispatchEvent(r),r},Gj=new WeakMap,O0e=(e,t,i)=>{let r=j3.get(e);s1e&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,j3.set(e,r)},k0e=(e,t,i,r)=>{let s=qj(t,i);const l=j3.get(s);if(e=e.nodeType===11?e:wa,l)if(typeof l=="string"){e=e.head||e;let f=Gj.get(e),d;f||Gj.set(e,f=new Set),f.has(s)||(d=wa.createElement("style"),d.innerHTML=l,e.insertBefore(d,e.querySelector("link")),f&&f.add(s))}else e.adoptedStyleSheets.includes(l)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,l]);return s},R0e=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=cd("attachStyles",t.$tagName$),l=k0e(D3&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=l,i.classList.add(l+"-h"),r&2&&i.classList.add(l+"-s")),s()},qj=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),Uj=(e,t,i,r,s,l)=>{if(i!==r){let f=rD(e,t),d=t.toLowerCase();if(t==="class"){const v=e.classList,_=Bj(i),M=Bj(r);v.remove(..._.filter(T=>T&&!M.includes(T))),v.add(...M.filter(T=>T&&!_.includes(T)))}else if(t==="style"){for(const v in i)(!r||r[v]==null)&&(v.includes("-")?e.style.removeProperty(v):e.style[v]="");for(const v in r)(!i||r[v]!==i[v])&&(v.includes("-")?e.style.setProperty(v,r[v]):e.style[v]=r[v])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):rD(z0,d)?t=d.slice(2):t=d[2]+t.slice(3),i&&Pn.rel(e,t,i,!1),r&&Pn.ael(e,t,r,!1);else{const v=p$(r);if((f||v&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const M=r==null?"":r;t==="list"?f=!1:(i==null||e[t]!=M)&&(e[t]=M)}}catch{}let _=!1;d!==(d=d.replace(/^xlink\:?/,""))&&(t=d,_=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(_?e.removeAttributeNS(Nj,t):e.removeAttribute(t)):(!f||l&4||s)&&!v&&(r=r===!0?"":r,_?e.setAttributeNS(Nj,t,r):e.setAttribute(t,r))}}},F0e=/\s/,Bj=e=>e?e.split(F0e):[],Hj=(e,t,i,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,l=e&&e.$attrs$||jj,f=t.$attrs$||jj;for(r in l)r in f||Uj(s,r,l[r],void 0,i,t.$flags$);for(r in f)Uj(s,r,l[r],f[r],i,t.$flags$)},L3=(e,t,i,r)=>{const s=t.$children$[i];let l=0,f,d,v;if(Fj||(c$=!0,s.$tag$==="slot"&&(N0&&r.classList.add(N0+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)f=s.$elm$=wa.createTextNode(s.$text$);else if(s.$flags$&1)f=s.$elm$=wa.createTextNode("");else{if(oo||(oo=s.$tag$==="svg"),f=s.$elm$=wa.createElementNS(oo?_0e:x0e,s.$flags$&2?"slot-fb":s.$tag$),oo&&s.$tag$==="foreignObject"&&(oo=!1),Hj(null,s,oo),S0e(N0)&&f["s-si"]!==N0&&f.classList.add(f["s-si"]=N0),s.$children$)for(l=0;l<s.$children$.length;++l)d=L3(e,s,l,f),d&&f.appendChild(d);s.$tag$==="svg"?oo=!1:f.tagName==="foreignObject"&&(oo=!0)}return f["s-hn"]=k3,s.$flags$&(2|1)&&(f["s-sr"]=!0,f["s-cr"]=Rj,f["s-sn"]=s.$name$||"",v=e&&e.$children$&&e.$children$[i],v&&v.$tag$===s.$tag$&&e.$elm$&&_m(e.$elm$,!1)),f},_m=(e,t)=>{Pn.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==k3&&s["s-ol"]&&(Zj(s).insertBefore(s,d$(s)),s["s-ol"].remove(),s["s-ol"]=void 0,c$=!0),t&&_m(s,t)}Pn.$flags$&=~1},Wj=(e,t,i,r,s,l)=>{let f=e["s-cr"]&&e["s-cr"].parentNode||e,d;for(f.shadowRoot&&f.tagName===k3&&(f=f.shadowRoot);s<=l;++s)r[s]&&(d=L3(null,i,s,e),d&&(r[s].$elm$=d,f.insertBefore(d,d$(t))))},Jj=(e,t,i,r,s)=>{for(;t<=i;++t)(r=e[t])&&(s=r.$elm$,Qj(r),R3=!0,s["s-ol"]?s["s-ol"].remove():_m(s,!0),s.remove())},L0e=(e,t,i,r)=>{let s=0,l=0,f=0,d=0,v=t.length-1,_=t[0],M=t[v],T=r.length-1,A=r[0],k=r[T],F,D;for(;s<=v&&l<=T;)if(_==null)_=t[++s];else if(M==null)M=t[--v];else if(A==null)A=r[++l];else if(k==null)k=r[--T];else if(N3(_,A))j0(_,A),_=t[++s],A=r[++l];else if(N3(M,k))j0(M,k),M=t[--v],k=r[--T];else if(N3(_,k))(_.$tag$==="slot"||k.$tag$==="slot")&&_m(_.$elm$.parentNode,!1),j0(_,k),e.insertBefore(_.$elm$,M.$elm$.nextSibling),_=t[++s],k=r[--T];else if(N3(M,A))(_.$tag$==="slot"||k.$tag$==="slot")&&_m(M.$elm$.parentNode,!1),j0(M,A),e.insertBefore(M.$elm$,_.$elm$),M=t[--v],A=r[++l];else{for(f=-1,d=s;d<=v;++d)if(t[d]&&t[d].$key$!==null&&t[d].$key$===A.$key$){f=d;break}f>=0?(D=t[f],D.$tag$!==A.$tag$?F=L3(t&&t[l],i,f,e):(j0(D,A),t[f]=void 0,F=D.$elm$),A=r[++l]):(F=L3(t&&t[l],i,l,e),A=r[++l]),F&&Zj(_.$elm$).insertBefore(F,d$(_.$elm$))}s>v?Wj(e,r[T+1]==null?null:r[T+1].$elm$,i,r,l,T):l>T&&Jj(t,s,v)},N3=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,d$=e=>e&&e["s-ol"]||e,Zj=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,j0=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,l=t.$tag$,f=t.$text$;let d;f===null?(oo=l==="svg"?!0:l==="foreignObject"?!1:oo,l==="slot"||Hj(e,t,oo),r!==null&&s!==null?L0e(i,r,t,s):s!==null?(e.$text$!==null&&(i.textContent=""),Wj(i,null,t,s,0,s.length-1)):r!==null&&Jj(r,0,r.length-1),oo&&l==="svg"&&(oo=!1)):(d=i["s-cr"])?d.parentNode.textContent=f:e.$text$!==f&&(i.data=f)},Kj=e=>{const t=e.childNodes;let i,r,s,l,f,d;for(r=0,s=t.length;r<s;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(f=i["s-sn"],i.hidden=!1,l=0;l<s;l++)if(d=t[l].nodeType,t[l]["s-hn"]!==i["s-hn"]||f!==""){if(d===1&&f===t[l].getAttribute("slot")){i.hidden=!0;break}}else if(d===1||d===3&&t[l].textContent.trim()!==""){i.hidden=!0;break}}Kj(i)}},ba=[],Yj=e=>{let t,i,r,s,l,f,d=0;const v=e.childNodes,_=v.length;for(;d<_;d++){if(t=v[d],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=t["s-sn"],f=r.length-1;f>=0;f--)i=r[f],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(Xj(i,s)?(l=ba.find(M=>M.$nodeToRelocate$===i),R3=!0,i["s-sn"]=i["s-sn"]||s,l?l.$slotRefNode$=t:ba.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&ba.map(M=>{Xj(M.$nodeToRelocate$,i["s-sn"])&&(l=ba.find(T=>T.$nodeToRelocate$===i),l&&!M.$slotRefNode$&&(M.$slotRefNode$=l.$slotRefNode$))})):ba.some(M=>M.$nodeToRelocate$===i)||ba.push({$nodeToRelocate$:i}));t.nodeType===1&&Yj(t)}},Xj=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Qj=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Qj)},N0e=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,s=e.$vnode$||F3(null,null),l=Vj(t)?t:Dj(null,null,t);k3=i.tagName,r.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},r.$attrsToReflect$.map(([f,d])=>l.$attrs$[d]=i[f])),l.$tag$=null,l.$flags$|=4,e.$vnode$=l,l.$elm$=s.$elm$=i.shadowRoot||i,N0=i["s-sc"],Rj=i["s-cr"],Fj=D3&&(r.$flags$&1)!=0,R3=!1,j0(s,l);{if(Pn.$flags$|=1,c$){Yj(l.$elm$);let f,d,v,_,M,T,A=0;for(;A<ba.length;A++)f=ba[A],d=f.$nodeToRelocate$,d["s-ol"]||(v=wa.createTextNode(""),v["s-nr"]=d,d.parentNode.insertBefore(d["s-ol"]=v,d));for(A=0;A<ba.length;A++)if(f=ba[A],d=f.$nodeToRelocate$,f.$slotRefNode$){for(_=f.$slotRefNode$.parentNode,M=f.$slotRefNode$.nextSibling,v=d["s-ol"];v=v.previousSibling;)if(T=v["s-nr"],T&&T["s-sn"]===d["s-sn"]&&_===T.parentNode&&(T=T.nextSibling,!T||!T["s-nr"])){M=T;break}(!M&&_!==d.parentNode||d.nextSibling!==M)&&d!==M&&(!d["s-hn"]&&d["s-ol"]&&(d["s-hn"]=d["s-ol"].parentNode.nodeName),_.insertBefore(d,M))}else d.nodeType===1&&(d.hidden=!0)}R3&&Kj(l.$elm$),Pn.$flags$&=~1,ba.length=0}},j0e=(e,t)=>{},f$=(e,t)=>{Ht.taskQueue&&Ht.updatable&&(e.$flags$|=16),j0e(e,e.$ancestorComponent$);const i=()=>D0e(e,t);return Ht.taskQueue?l1e(i):i()},D0e=(e,t)=>{const i=e.$hostElement$,r=cd("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;let l;return t?l=D0(s,"componentWillLoad"):l=D0(s,"componentWillUpdate"),l=eD(l,()=>D0(s,"componentWillRender")),r(),eD(l,()=>V0e(e,s,t))},V0e=async(e,t,i)=>{const r=e.$hostElement$,s=cd("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&R0e(e);const l=cd("render",e.$cmpMeta$.$tagName$);z0e(e,t,r),l(),s(),G0e(e)},z0e=(e,t,i)=>{const r=!1,s=!1,l=!0,f=!0;try{Lj=t,t=(r||t.render)&&t.render(),f&&l&&(e.$flags$&=~16),(f||s)&&(e.$flags$|=2),(Ht.hasRenderFn||Ht.reflect)&&(Ht.vdomRender||Ht.reflect)&&(Ht.hydrateServerSide||N0e(e,t))}catch(d){xm(d,e.$hostElement$)}return Lj=null,null},G0e=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=cd("postUpdate",t),s=i;e.$ancestorComponent$,D0(s,"componentDidRender"),e.$flags$&64?(D0(s,"componentDidUpdate"),r()):(e.$flags$|=64,D0(s,"componentDidLoad"),r())},RCe=e=>{if(Ht.updatable){const t=V0(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&(2|16))==2&&f$(t,!1),i}return!1},D0=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){xm(r)}},eD=(e,t)=>e&&e.then?e.then(t):t(),q0e=(e,t)=>V0(e).$instanceValues$.get(t),U0e=(e,t,i,r)=>{const s=V0(e),l=e,f=s.$instanceValues$.get(t),d=s.$flags$,v=l;i=C0e(i,r.$members$[t][0]);const _=Number.isNaN(f)&&Number.isNaN(i);if(i!==f&&!_){s.$instanceValues$.set(t,i);{if(r.$watchers$&&d&128){const T=r.$watchers$[t];T&&T.map(A=>{try{v[A](i,f,t)}catch(k){xm(k,l)}})}if((d&(2|16))==2){if(v.componentShouldUpdate&&v.componentShouldUpdate(i,f,t)===!1)return;f$(s,!1)}}}},B0e=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),s=e.prototype;r.map(([l,[f]])=>{(f&31||f&32)&&Object.defineProperty(s,l,{get(){return q0e(this,l)},set(d){U0e(this,l,d,t)},configurable:!0,enumerable:!0})});{const l=new Map;s.attributeChangedCallback=function(f,d,v){Pn.jmp(()=>{const _=l.get(f);if(this.hasOwnProperty(_))v=this[_],delete this[_];else if(s.hasOwnProperty(_)&&typeof this[_]=="number"&&this[_]==v)return;this[_]=v===null&&typeof this[_]=="boolean"?!1:v})},e.observedAttributes=r.filter(([f,d])=>d[0]&15).map(([f,d])=>{const v=d[1]||f;return l.set(v,f),d[0]&512&&t.$attrsToReflect$.push([f,v]),v})}}return e},H0e=async(e,t,i,r,s)=>{if((t.$flags$&32)==0&&(s=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),s.style)){let f=s.style;typeof f!="string"&&(f=f[t.$modeName$=E0e(e)]);const d=qj(i,t.$modeName$);if(!j3.has(d)){const v=cd("registerStyles",i.$tagName$);O0e(d,f,!!(i.$flags$&1)),v()}}t.$ancestorComponent$,(()=>f$(t,!0))()},W0e=e=>{},J0e=e=>{if((Pn.$flags$&1)==0){const t=V0(e),i=t.$cmpMeta$,r=cd("connectedCallback",i.$tagName$);t.$flags$&1?(tD(e,t,i.$listeners$),W0e(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&(4|8)&&Z0e(e),i.$members$&&Object.entries(i.$members$).map(([s,[l]])=>{if(l&31&&e.hasOwnProperty(s)){const f=e[s];delete e[s],e[s]=f}}),H0e(e,t,i)),r()}},Z0e=e=>{const t=e["s-cr"]=wa.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},K0e=e=>{if((Pn.$flags$&1)==0){const t=V0(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},FCe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};Ht.member&&(i.$members$=t[2]),Ht.hostListener&&(i.$listeners$=t[3]),Ht.watchCallback&&(i.$watchers$=e.$watchers$),Ht.reflect&&(i.$attrsToReflect$=[]),Ht.shadowDom&&!D3&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){e1e(this,i)},connectedCallback(){J0e(this),Ht.connectedCallback&&r&&r.call(this)},disconnectedCallback(){K0e(this),Ht.disconnectedCallback&&s&&s.call(this)},__attachShadow(){D3?Ht.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,B0e(e,i)},LCe=(e,t)=>t,tD=(e,t,i,r)=>{i&&i.map(([s,l,f])=>{const d=X0e(e,s),v=Y0e(t,f),_=Q0e(s);Pn.ael(d,l,v,_),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Pn.rel(d,l,v,_))})},Y0e=(e,t)=>i=>{try{Ht.lazyLoad||e.$hostElement$[t](i)}catch(r){xm(r)}},X0e=(e,t)=>t&4?wa:t&8?z0:t&16?wa.body:e,Q0e=e=>r1e?{passive:(e&1)!=0,capture:(e&2)!=0}:(e&2)!=0,iD=new WeakMap,V0=e=>iD.get(e),e1e=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Ht.isDev&&(i.$renderCount$=0),Ht.method&&Ht.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),Ht.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),tD(e,i,t.$listeners$),iD.set(e,i)},rD=(e,t)=>t in e,xm=(e,t)=>(0,console.error)(e,t),nD=Ht.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],t1e=(...e)=>console.error(...nD,...e),sD=(...e)=>console.warn(...nD,...e),j3=new Map,i1e=[],z0=typeof window!="undefined"?window:{};Ht.cssVarShim&&z0.CSS;const wa=z0.document||{head:{}},NCe=z0.HTMLElement||class{},Pn={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},D3=Ht.shadowDomShim&&Ht.shadowDom?(()=>(wa.head.attachShadow+"").indexOf("[native")>-1)():!0,r1e=(()=>{let e=!1;try{wa.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),n1e=e=>Promise.resolve(e),s1e=Ht.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})():!1,oD=[],aD=[],o1e=(e,t)=>i=>{e.push(i),h$||(h$=!0,t&&Pn.$flags$&4?a1e(y$):Pn.raf(y$))},lD=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){xm(i)}e.length=0},y$=()=>{lD(oD),lD(aD),(h$=oD.length>0)&&Pn.raf(y$)},a1e=e=>n1e().then(e),l1e=o1e(aD,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function u1e(e){return e.map(t=>{let i="";for(let r=0;r<t;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const jCe=()=>u1e([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */const c1e="calcite-theme-auto",h1e="calcite-theme-dark";function DCe(e){const t="dir",i=`[${t}]`,r=p1e(e,i);return r?r.getAttribute(t):"ltr"}function uD(e){return e.getRootNode()}function cD(e){return e.host||null}function VCe(e,{selector:t,id:i}){function r(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);const l=uD(s),f=i?"getElementById"in l?l.getElementById(i):null:t?l.querySelector(t):null,d=cD(l);return f||(d?r(d):null)}return r(e)}function p1e(e,t){function i(r){return r?r.closest(t)||i(cD(uD(r))):null}return i(e)}function d1e(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function zCe(e){if(!!e)return d1e(e)?e.setFocus():e.focus()}const Sm=":not([slot])";function GCe(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(s=>`[slot="${s}"]`).join(","):`[slot="${t}"]`:Sm;return(i==null?void 0:i.all)?f1e(e,r,i):y1e(e,r,i)}function hD(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function f1e(e,t,i){let r=t===Sm?hD(e,Sm):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(l=>l.parentElement===e),r=(i==null?void 0:i.matches)?r.filter(l=>l==null?void 0:l.matches(i.matches)):r;const s=i==null?void 0:i.selector;return s?r.map(l=>Array.from(l.querySelectorAll(s))).reduce((l,f)=>[...l,...f],[]).filter(l=>!!l):r}function y1e(e,t,i){let r=t===Sm?hD(e,Sm)[0]||null:e.querySelector(t);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===e?r:null,r=(i==null?void 0:i.matches)?(r==null?void 0:r.matches(i.matches))?r:null:r;const s=i==null?void 0:i.selector;return s?r==null?void 0:r.querySelector(s):r}function qCe(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function UCe(e){return Boolean(e).toString()}function BCe(e){return!!(e.isPrimary&&e.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function pD(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(h1e)||e.contains(c1e)&&t?"dark":"light",r=f=>document.body.dispatchEvent(new CustomEvent("calciteThemeChange",{bubbles:!0,detail:{theme:f}})),s=f=>{l!==f&&r(f),l=f};let l=i();r(l),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f=>s(f.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function g1e(){typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?pD():document.addEventListener("DOMContentLoaded",()=>pD(),{once:!0}))}const m1e=g1e;m1e();let dD;function v1e(){w0e(Lo(mi(dD)))}dD="components/assets";const fD=Symbol("widget"),b1e=[],w1e={},V3=new WeakMap;function yD(e,t){let i=t.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=yD(e,i[s]);else i=b1e;const r=t.vnodeSelector;if(g$(r)){const s=t.properties||w1e,l=s.key||r;return{vnodeSelector:"div",properties:{key:l,afterCreate:_1e,afterUpdate:x1e,afterRemoved:gD,parentWidget:e,widgetConstructor:r,widgetProperties:je(te({},s),{key:l,children:i})},children:void 0,text:void 0,domNode:null}}return t}function _1e(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:l}){var d;const f=new s(l);f.container=e,V3.set(e,f),(d=f.afterCreate)==null||d.call(f,f,e),r._internalHandles.add(Kl(()=>gD(e)))}function x1e(e,t,i,{widgetProperties:r}){var l;const s=V3.get(e);s&&(s.set(r),(l=s.afterUpdate)==null||l.call(s,s,e))}function gD(e){const t=V3.get(e);t&&(t.destroy(),V3.delete(e))}function g$(e){return typeof e=="function"&&e[fD]}const mD=new Set;function S1e(e){mD.add(e),e.finally(()=>mD.delete(e))}const M1e="esri.widgets.Widget";let $1e=0;const I1e={widgetIcon:"esri-icon-checkbox-unchecked"};function vD(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?vD(e[i],t==null?void 0:t[i]):e[i]=t[i]);return e}const T1e=b0e({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,l,f)=>{const d=t==null?void 0:t(r,s,l,f),v=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in l)||v){const _=r[2].toLowerCase()+r.slice(3),M=k=>d==null?void 0:d.call(l,k);l.addEventListener(_,M,v);const T=()=>l.removeEventListener(_,M,v),A=f.afterRemoved;f.afterRemoved=k=>{A==null||A(k),T()}}return d}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:l}=r,f=s===Event.CAPTURING_PHASE;let d=`on${l}${f?"capture":""}`;const v=t.properties;(v&&d in v||(d=`on${l[0].toUpperCase()}${l.slice(1)}${f?"Capture":""}`,v&&d in v))&&(mj(),e.scheduleRender(),v[d].call(v.bind||i,r))}});let m$=!1,Vr=class extends j2(yn.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Jr,this._projector=T1e,this._readyForTrueRender=!1,this.iconClass=I1e.widgetIcon,this.key=this,this._loadLocale=Cw(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const l=await Ms(this._messageBundleProps.map(async({bundlePath:f,propertyName:d})=>{let v=await kL(f);this.uiStrings&&Object.keys(this.uiStrings)&&(v=vD(ve(v),this.uiStrings)),this[d]=v}));for(const f of l)f.error&&Pe.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,f.error)}await this.loadLocale()}),v1e();const i="esri-widget-uid-"+d0e(),r=this.render.bind(this);this._trackingTarget=new kw(()=>this.scheduleRender());const s=()=>{var M;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const l=r();let{properties:f}=l;f||(l.properties=f={});let{key:d,styles:v}=f;d||(f.key=i),v||(f.styles=v={}),v.display||(v.display="");let _=0;return(M=l.children)==null||M.forEach(T=>{if(g$(T.vnodeSelector))return;let{properties:A}=T;A||(T.properties=A={}),A.key||(A.key=`${this.id}--${_++}`)}),yD(this,l)};this.render=()=>{var f;if(m$)return s();let l=(f=Bfe(this))!=null?f:null;if(l)return l;this._trackingTarget.clear(),m$=!0;try{l=Xl(this._trackingTarget,s)}catch(d){throw console.error(d),d}finally{m$=!1}return l&&Hfe(this,l),l},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),S1e(this._resourcesFetch)}normalizeCtorArgs(e,t){const i=te({},e);return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(_4)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(oi(this._trackingTarget),oi(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,i$(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return e$(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+$1e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(i$(this),this._projector.scheduleRender())}classes(...e){return bj.apply(this,e)}renderNow(){i$(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),((t=this._delegatedEventNames)==null?void 0:t.length)&&this._internalHandles.add(Ve(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&$w(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>Iw(i,s,l=>{this.emit(s,l)})),"delegated-events")},fi)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(_4),this.scheduleRender()};this._internalHandles.add([Pae(e),Ve(()=>this.uiStrings,e),so(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),(t=e==null?void 0:e.parentNode)==null||t.removeChild(e)}};Vr[fD]=!0,m([x()],Vr.prototype,"_readyForTrueRender",void 0),m([x({value:null})],Vr.prototype,"container",null),m([ri("container")],Vr.prototype,"castContainer",null),m([x()],Vr.prototype,"domNode",null),m([x()],Vr.prototype,"iconClass",void 0),m([x()],Vr.prototype,"id",null),m([x()],Vr.prototype,"label",null),m([x()],Vr.prototype,"renderable",null),m([x()],Vr.prototype,"uiStrings",void 0),m([x()],Vr.prototype,"viewModel",void 0),m([x({value:!0})],Vr.prototype,"visible",null),m([x()],Vr.prototype,"key",void 0),m([x()],Vr.prototype,"children",void 0),m([x()],Vr.prototype,"afterCreate",void 0),m([x()],Vr.prototype,"afterUpdate",void 0),m([x()],Vr.prototype,"afterRemoved",void 0),Vr=m([X(M1e)],Vr);const Gn=Vr;function bD(e){return 32+e.length}function wD(e){return 16}function HCe(e){if(!e)return 0;let t=xD;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=bD(r);break;case"number":t+=wD();break;case"boolean":t+=4}}return t}function E1e(e){if(!e)return 0;if(Array.isArray(e))return C1e(e);let t=xD;for(const i in e)e.hasOwnProperty(i)&&(t+=_D(e[i]));return t}function C1e(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=SD;for(let r=0;r<t;r++)i+=_D(e[r]);return i}function _D(e){switch(typeof e){case"object":return E1e(e);case"string":return bD(e);case"number":return wD();case"boolean":return 4;default:return 8}}function WCe(e,t){return SD+e.length*t}const xD=32,SD=32;var Mm;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(Mm||(Mm={}));function MD(e,t,i){return e.units[t][i]}function G0(e,t,i,r=2,s="abbr"){return`${Oo(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${MD(e,i,s)}`}function z3(e,t,i,r=2,s="abbr"){return`${Oo(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${MD(e,i,s)}`}function JCe(e,t,i,r=2,s="abbr"){const l=hN(t,i);return G0(e,vi(t,i,l),l,r,s)}function ZCe(e,t,i,r=2,s="abbr"){const l=hN(t,i);return z3(e,vi(t,i,l),l,r,s)}function KCe(e,t,i,r=2,s="abbr"){const l=pN(t,i);return G0(e,vi(t,i,l),l,r,s)}function YCe(e,t,i,r=2,s="abbr"){const l=pN(t,i);return z3(e,vi(t,i,l),l,r,s)}function XCe(e,t,i,r=2,s="abbr"){const l=dN(t,i);return G0(e,vi(t,i,l),l,r,s)}function QCe(e,t,i,r=2,s="abbr"){const l=dN(t,i);return z3(e,vi(t,i,l),l,r,s)}function eAe(e,t,i,r=2,s="abbr"){const l=fN(t,i);return G0(e,vi(t,i,l),l,r,s)}function tAe(e,t,i,r=2,s="abbr"){const l=fN(t,i);return z3(e,vi(t,i,l),l,r,s)}function iAe(e,t,i,r=2,s="abbr"){const l=xpe(t,i);return G0(e,vi(t,i,l),l,r,s)}function rAe(e,t,i,r=2,s="abbr"){const l=Spe(t,i);return G0(e,vi(t,i,l),l,r,s)}function nAe(e,t,i,r,s){s=pn(s,2);let l=zL.normalize(A1e(vi(e,t,"degrees"),i,r),0,!0);const f={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s,signDisplay:l>0?"never":"exceptZero"};return l=ID(l,f),Oo(l,f)}function sAe(e,t,i,r,s){i!==r&&(e=-e);const l={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s=pn(s,2),minimumFractionDigits:s,signDisplay:"exceptZero"};let f=vi(e,t,"degrees")%360;return f=ID(f,l),Oo(f,l)}const $D=new Map;function ID(e,t){const i=JSON.stringify(t);let r=$D.get(i);return r||(r=new Intl.NumberFormat("en-US",t),$D.set(i,r)),/\-?\+?360/.test(r.format(e))?0:e}function A1e(e,t,i){if(t===i)return e;switch(i){case"arithmetic":return P1e(e);case"geographic":return O1e(e)}}function P1e(e){return 90-e}function O1e(e){return-e-90}const TD=["B","kB","MB","GB","TB"];function k1e(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(Mm.KILOBYTES));i=Cn(i,0,TD.length-1);const r=Oo(t/Mm.KILOBYTES**i,{maximumFractionDigits:2});return Ka(e.units.bytes[TD[i]],{fileSize:r})}function R1e(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(l=>l.name===i);return s?F1e({tagName:r,tags:s.tags}):null}function F1e(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(s=>s.name===t);return r&&r.value||null}var v$;const L1e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Rs=v$=class extends Ee{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=R1e({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return L1e[t]||null}clone(){return new v$({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};m([x({type:String})],Rs.prototype,"contentType",void 0),m([x()],Rs.prototype,"exifInfo",void 0),m([x({readOnly:!0})],Rs.prototype,"orientationInfo",null),m([x({type:hi})],Rs.prototype,"id",void 0),m([x({type:String})],Rs.prototype,"globalId",void 0),m([x({type:String})],Rs.prototype,"keywords",void 0),m([x({type:String})],Rs.prototype,"name",void 0),m([x({json:{read:!1}})],Rs.prototype,"parentGlobalId",void 0),m([x({json:{read:!1}})],Rs.prototype,"parentObjectId",void 0),m([x({type:hi})],Rs.prototype,"size",void 0),m([x({json:{read:!1}})],Rs.prototype,"url",void 0),Rs=v$=m([X("esri.layers.support.AttachmentInfo")],Rs);const ED=Rs;var b$;let vn=b$=class extends Ee{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new b$(ve({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};m([x({type:[String],json:{write:!0}})],vn.prototype,"attachmentTypes",void 0),m([x({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],vn.prototype,"attachmentsWhere",void 0),m([x({type:Boolean,json:{write:!0}})],vn.prototype,"cacheHint",void 0),m([x({type:[String],json:{write:!0}})],vn.prototype,"keywords",void 0),m([x({type:[Number],json:{write:!0}})],vn.prototype,"globalIds",void 0),m([x({json:{write:!0}})],vn.prototype,"name",void 0),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],vn.prototype,"num",void 0),m([x({type:[Number],json:{write:!0}})],vn.prototype,"objectIds",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],vn.prototype,"returnMetadata",void 0),m([x({type:[Number],json:{write:!0}})],vn.prototype,"size",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],vn.prototype,"start",void 0),m([Xe("start"),Xe("num")],vn.prototype,"writeStart",null),m([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],vn.prototype,"where",void 0),vn=b$=m([X("esri.rest.support.AttachmentQuery")],vn),vn.from=Ai(vn);const G3=vn,N1e="esri.widgets.Feature.support.featureUtils",CD=Pe.getLogger(N1e),j1e=/href=(""|'')/gi,D1e=/(\{([^\{\r\n]+)\})/g,V1e=/\'/g,AD=/^\s*expression\//i,z1e=/(\n)/gi,G1e=/[\u00A0-\u9999<>\&]/gim,q1e=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,U1e=/^(?:mailto:|tel:)/,PD="relationships/",w$=pS("short-date-short-time");function OD(e){if(!ae(e))return e.get("sourceLayer")||e.get("layer")}async function q3(e,t){return typeof e=="function"?e.call(null,t):e}function kD(e=""){if(e)return!U1e.test(e.trim().toLowerCase())}function _$(e){return!!e&&AD.test(e)}function B1e(e,t){if(!_$(t)||!e)return null;const i=t.replace(AD,"").toLowerCase();let r;return e.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function RD(e,t){const i=B1e(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function H1e(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function W1e(e){return e.replace(j1e,"")}function $m(e,t){const i=x$(t,e);return i?i.name:e}function J1e(e,t){return e&&e.map(i=>$m(i,t))}function x$(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function FD(e){return`${e}`.trim()}function hd({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:l}){return r?S$({formattedAttributes:t,template:X1e(r,te(te(te({},t),s),e),i),fieldInfoMap:l}):""}function S$({formattedAttributes:e,template:t,fieldInfoMap:i}){return FD(W1e(Ka(Ka(t,r=>H1e(r,i)),e)))}function Z1e(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",l=(i?encodeURIComponent(r):r).replace(V1e,s);t[e]=l}}function K1e(e,t=!1){const i=te({},e);return Object.keys(i).forEach(r=>Z1e(r,i,t)),i}function Y1e(e,t,i){const r=(t=FD(t))&&t[0]!=="{";return Ka(e,K1e(i,r))}function M$(e,t){return e.replace(D1e,(i,r,s)=>{const l=x$(t,s);return l?`{${l.name}}`:r})}function X1e(e,t,i){const r=M$(e,i);return r&&r.replace(q1e,(s,l,f)=>Y1e(s,l||f,t))}function Q1e(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function eye(e){return(e==null?void 0:e.type)==="feature"}function LD(e){return!!(e==null?void 0:e.layer)}function tye(e){return(e==null?void 0:e.type)==="map-image"}function iye(e,t){var _;const i=t.fieldInfos,r=t.fieldName,s=(_=ND(i,r))==null?void 0:_.clone(),l=t.preventPlacesFormatting,f=t.layer,d=x$(f,r);if(s&&(d==null?void 0:d.type)==="date"){const M=s.format||new t0;M.dateFormat=M.dateFormat||"short-date-short-time",M.dateTimeFormatOptions=!LD(f)&&eye(f)&&f.datesInUnknownTimezone||LD(f)&&tye(f.layer)&&f.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=M}const v=s&&s.format;return typeof e=="string"&&fR(r)&&v?v.formatRasterPixelValue(e):typeof(e=Q1e(e,v))=="string"||e==null||v==null?Im(e):l?Oo(e,je(te({},bR(v)),{minimumFractionDigits:0,maximumFractionDigits:20})):v.format(e)}function ND(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function rye({fieldName:e,graphic:t,layer:i}){if(wu(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function nye({fieldName:e,value:t,graphic:i,layer:r}){if(wu(e)||!r||typeof r.getFieldDomain!="function")return null;const s=r.getFieldDomain(e,{feature:i});return s&&s.type==="coded-value"?s.getName(t):null}function sye(e,t){const{creatorField:i,creationDateField:r,editorField:s,editDateField:l}=e;if(!t)return;const f=t[l];if(typeof f=="number"){const v=t[s];return{type:"edit",date:uu(f,w$),user:v}}const d=t[r];if(typeof d=="number"){const v=t[i];return{type:"create",date:uu(d,w$),user:v}}return null}function oye(e,t){const i=new Map;return e&&e.forEach(r=>{const s=$m(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function jD(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const l=s&&s.fieldInfos;l&&t.push(...l)}}),t}function $$(e){return e.replace(G1e,t=>`&#${t.charCodeAt(0)};`)}function Im(e){return typeof e=="string"?e.replace(z1e,'<br class="esri-text-new-line" />'):e}function DD(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:l,graphic:f}=e;if(t==null)return"";const d=nye({fieldName:i,value:t,graphic:f,layer:l});if(d)return d;const v=rye({fieldName:i,graphic:f,layer:l});if(v)return v;if(s.get(i.toLowerCase()))return iye(t,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:l});const _=l&&l.fieldsIndex;return _&&_.isDateField(i)?uu(t,w$):Im(t)}function I$({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:l}){const f={};return l==null||l.forEach(d=>hye({attributes:f,relatedInfo:d,fieldInfoMap:s,fieldInfos:e,layer:i})),Object.keys(t).forEach(d=>{const v=t[d];f[d]=DD({fieldName:d,fieldInfos:e,fieldInfoMap:s,layer:i,value:v,graphic:r})}),f}async function aye(e,t){var M,T;const{layer:i,graphic:r,outFields:s,objectIds:l,returnGeometry:f,spatialReference:d}=e,v=l[0];if(typeof v!="number"&&typeof v!="string"){const A="Could not query required fields for the specified feature. The feature's ID is invalid.",k={layer:i,graphic:r,objectId:v,requiredFields:s};return CD.warn(A,k),null}if(!((T=(M=i.capabilities)==null?void 0:M.operations)==null?void 0:T.supportsQuery)){const A="The specified layer cannot be queried. The following fields will not be available.",k={layer:i,graphic:r,requiredFields:s,returnGeometry:f};return CD.warn(A,k),null}const _=i.createQuery();return _.objectIds=l,_.outFields=(s==null?void 0:s.length)?s:[i.objectIdField],_.returnGeometry=!!f,_.returnZ=!!f,_.returnM=!!f,_.outSpatialReference=d,(await i.queryFeatures(_,t)).features[0]}async function lye(e){var r;if(!((r=e.expressionInfos)==null?void 0:r.length))return!1;const t=await il(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function uye({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const l=e.attributes[i.objectIdField];if(l==null)return;const f=[l],d=await t.getRequiredFields(i.fieldsIndex),v=Eae(d,e),_=v?[]:d,M=t.returnGeometry||await lye(t);if(v&&!M)return;const T=await aye({layer:i,graphic:e,outFields:_,objectIds:f,returnGeometry:M,spatialReference:r},s);T&&(T.geometry&&(e.geometry=T.geometry),T.attributes&&(e.attributes=te(te({},e.attributes),T.attributes)))}function wu(e=""){return!!e&&e.includes(PD)}function cye(e){return e?`${PD}${e.layerId}/${e.fieldName}`:""}function VD({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:l}){e&&t&&i&&Object.keys(t.attributes).forEach(f=>{const d=cye({layerId:i.relation.id.toString(),fieldName:f}),v=t.attributes[f];e[d]=DD({fieldName:d,fieldInfos:r,fieldInfoMap:s,layer:l,value:v,graphic:t})})}function hye({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(l=>VD({attributes:e,graphic:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(l=>VD({attributes:e,graphic:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})))}const zD=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},GD=({layer:e,method:t,query:i,definitionExpression:r})=>{var f,d;if(!((d=(f=e.capabilities)==null?void 0:f.query)==null?void 0:d.supportsCacheHint)||t==="attachments")return;const s=q(i.where)&&i.where,l=q(i.geometry)&&i.geometry;zD(r)||zD(s)||(l==null?void 0:l.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},pye=({query:e,layer:t,method:i})=>{GD({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},dye=({queryPayload:e,layer:t,method:i})=>{GD({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})};function fye(e,t,i){return e&&t&&i?qD(e.allLayers,t,i)||qD(e.allTables,t,i):null}function qD(e,t,i){return e.find(r=>r!==t&&r.type==="feature"&&r.url===t.url&&r.layerId===i.relatedTableId)}const UD={editing:!1,operations:{add:!0,update:!0,delete:!0}},BD=gt.ofType(ED);let Fs=class extends ot{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=te({},UD),this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new BD,this.fileInfos=new gt,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(Ve(()=>this.graphic,()=>this._graphicChanged(),fi))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return te(te({},UD),e)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new fe("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getObjectId(),r=new G3({objectIds:[i],returnMetadata:!0}),s=[],l=e.queryAttachments(r).then(d=>d[i]||s).catch(()=>s);this._getAttachmentsPromise=l,this.notifyChange("state");const f=await l;return t.removeAll(),f.length&&t.addMany(f),this._getAttachmentsPromise=null,this.notifyChange("state"),f}async addAttachment(e,t=this.graphic){const{_attachmentLayer:i,attachmentInfos:r,abilities:s}=this;if(!t)throw new fe("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new fe("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!s.operations.add)throw new fe("invalid-abilities","addAttachment(): add abilities are required.");if(!i||typeof i.addAttachment!="function")throw new fe("invalid-layer","addAttachment(): A valid layer is required.");const l=i.addAttachment(t,e).then(d=>this._queryAttachment(d.objectId,t)),f=await l;return r.add(f),f}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new fe("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.delete)throw new fe("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new fe("invalid-layer","deleteAttachment(): A valid layer is required.");const l=t.deleteAttachments(r,[e.id]).then(()=>e),f=await l;return i.remove(f),f}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:l}=this;if(!e)throw new fe("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new fe("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!l.operations.update)throw new fe("invalid-abilities","updateAttachment(): Update abilities are required.");const f=r.findIndex(_=>_===t);if(!i||typeof i.updateAttachment!="function")throw new fe("invalid-layer","updateAttachment(): A valid layer is required.");const d=i.updateAttachment(s,t.id,e).then(_=>this._queryAttachment(_.objectId)),v=await d;return r.splice(f,1,v),v}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const i={file:e,form:t};return this.fileInfos.add(i),i}updateFile(e,t,i=this.activeFileInfo){if(!e||!t||!i)return null;const r=this.fileInfos.findIndex(s=>i===s);return r>-1&&this.fileInfos.splice(r,1,{file:e,form:t}),this.fileInfos.items[r]}deleteFile(e){var i;const t=this.fileInfos.find(r=>r.file===e);return(i=this.fileInfos.remove(t))!=null?i:null}async _queryAttachment(e,t){if(!e)throw new fe("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:i}=this,r=this._getObjectId(t),s=new G3({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return i.queryAttachments(s).then(l=>l[r][0])}_getObjectId(e=this.graphic){var t;return(t=e==null?void 0:e.getObjectId())!=null?t:null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=OD(e);this._attachmentLayer=t?t.type==="scene"&&q(t.associatedLayer)?t.associatedLayer:t:null}};m([x()],Fs.prototype,"abilities",void 0),m([ri("abilities")],Fs.prototype,"castAbilities",null),m([x()],Fs.prototype,"activeAttachmentInfo",void 0),m([x()],Fs.prototype,"activeFileInfo",void 0),m([x({readOnly:!0,type:BD})],Fs.prototype,"attachmentInfos",void 0),m([x()],Fs.prototype,"fileInfos",void 0),m([x({type:Dr})],Fs.prototype,"graphic",void 0),m([x()],Fs.prototype,"mode",void 0),m([x({readOnly:!0})],Fs.prototype,"state",null),m([x()],Fs.prototype,"filesEnabled",void 0),m([x({readOnly:!0})],Fs.prototype,"supportsResizeAttachments",null),Fs=m([X("esri.widgets.Attachments.AttachmentsViewModel")],Fs);const T$=Fs;function HD(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function yye(e){const t=mi("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function qn(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var gye=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},WD=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?WD(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=gye(s)),t.push(s))}},mye=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return WD(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function ge(e,t,...i){return typeof e!="function"||g$(e)?mye(e,t,...i):e(t,...i)}const JD={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},it={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},E$=window.CSS;let Un=class extends Gn{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new T$,this.visibleElements=te({},JD),this._supportsImageOrientation=E$&&E$.supports&&E$.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.addHandles([fs(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),fs(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),fi)])}loadDependencies(){return Promise.all([import("./calcite-icon.33b58de2.js")])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return te(te({},JD),e)}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new fe("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new fe("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new fe("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){const t=this.viewModel.deleteFile(e||this.viewModel.activeFileInfo.file);return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return ge("div",{class:this.classes(it.base,it.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?ge("div",{key:"error-message",class:it.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:i}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(i||e):this.renderAttachmentContainer()}renderLoading(){return ge("div",{class:it.loaderContainer,key:"loader"},ge("div",{class:it.loader}))}renderProgressBar(){return this.visibleElements.progressBar?ge("div",{class:it.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?ge("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(it.esriButton,it.esriButtonTertiary,it.esriButtonSmall,it.esriButtonHalf,e&&it.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?ge("button",{type:"submit",disabled:i,class:this.classes(it.esriButton,it.esriButtonSecondary,it.esriButtonSmall,it.esriButtonHalf,{[it.buttonDisabled]:i})},this.messages.add):null,l=t?ge("span",{key:"file-name",class:it.fileName},t.name):null,f=ge("form",{bind:this,afterCreate:A3,afterRemoved:wj,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},ge("fieldset",{class:it.fileFieldset},l,ge("label",{class:this.classes(it.fileLabel,it.esriButton,it.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,ge("input",{class:it.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return ge("div",{key:"add-form-container",class:it.formNode},f)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:s}=this,{abilities:l}=i,f=s||!r;let d,v,_,M;r?(d=r.type,v=r.name,_=r.size):"file"in e?(d=e.file.type,v=e.file.name,_=e.file.size):(d=e.contentType,v=e.name,_=e.size,M=e.url);const T=l.editing&&l.operations.delete&&t.deleteButton?ge("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:Y=>this._submitDeleteAttachment(Y,e),class:this.classes(it.esriButton,it.esriButtonSmall,it.esriButtonTertiary,it.deleteButton,{[it.buttonDisabled]:s})},this.messages.delete):void 0,A=l.editing&&l.operations.update&&t.updateButton?ge("button",{disabled:f,key:"update-button",type:"submit",class:this.classes(it.esriButton,it.esriButtonSmall,it.esriButtonThird,{[it.buttonDisabled]:f})},this.messages.update):void 0,k=this.visibleElements.cancelUpdateButton?ge("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(it.esriButton,it.esriButtonSmall,it.esriButtonTertiary,it.esriButtonThird,{[it.buttonDisabled]:s})},this.messages.cancel):void 0,F=l.editing&&l.operations.update?ge("fieldset",{key:"file",class:it.fileFieldset},ge("span",{key:"file-name",class:it.fileName},v),ge("label",{class:this.classes(it.fileLabel,it.esriButton,it.esriButtonSecondary)},this.messages.changeFile,ge("input",{class:it.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,D=ge("fieldset",{key:"size",class:it.metadataFieldset},ge("label",null,k1e(this.messagesUnits,_))),z=ge("fieldset",{key:"content-type",class:it.metadataFieldset},ge("label",null,d)),H=q(M)?ge("a",{class:it.itemLink,href:M,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),ge("div",{class:it.itemLinkOverlay},ge("span",{class:it.itemLinkOverlayIcon},ge("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),J=ge("form",{bind:this,afterCreate:A3,afterRemoved:wj,"data-node-ref":"_updateAttachmentForm",onsubmit:Y=>this._submitUpdateAttachment(Y,e)},ge("div",{class:it.metadata},D,z),F,ge("div",{class:it.actions},T,k,A));return ge("div",{key:"edit-form-container",class:it.formNode},H,J)}renderImageMask(e,t){return"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t)}renderGenericImageMask(e,t){const{supportsResizeAttachments:i}=this.viewModel,r=yye(t),s={[it.itemImageResizable]:i};return ge("div",{class:this.classes(it.itemMaskIcon,it.itemMask)},ge("img",{title:e,alt:e,src:r,class:this.classes(s,it.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:s,url:l}=e;if(!i||!HD(r))return this.renderGenericImageMask(s,r);const f=this._getCSSTransform(e),d=f?{transform:f,"image-orientation":"none"}:{},v=`${l}${l.includes("?")?"&":"?"}w=${t}`,_={[it.itemImageResizable]:i};return ge("div",{class:this.classes(it.itemMask)},ge("img",{styles:d,alt:s,title:s,src:v,class:this.classes(_,it.itemImage)}))}renderFile(e){const{file:t}=e;return ge("li",{class:it.item,key:t},ge("button",{key:"details-button",bind:this,class:it.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),ge("label",{class:it.itemLabel},ge("span",{class:it.itemFilename},t.name||this.messages.noTitle),ge("span",{"aria-hidden":"true",class:this.classes(it.itemChevronIcon,$l(this.container)?it.iconLeft:it.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i,effectiveDisplayType:r}=this,{abilities:s,supportsResizeAttachments:l}=i,{contentType:f,name:d,url:v}=e,_=this.renderImageMask(e,t==="list"?48:400),M=s.editing?ge("span",{"aria-hidden":"true",class:this.classes(it.itemChevronIcon,$l(this.container)?it.iconLeft:it.iconRight)}):null,T=[_,r==="preview"&&l&&HD(f)?null:ge("label",{class:it.itemLabel},ge("span",{class:it.itemFilename},d||this.messages.noTitle),M)],A=s.editing?ge("button",{key:"details-button",bind:this,class:it.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},T):ge("a",{key:"details-link",class:it.itemButton,href:v,target:"_blank"},T);return ge("li",{class:it.item,key:e},A)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:s,fileInfos:l}=t,f=!!(r==null?void 0:r.length),d=!!(l==null?void 0:l.length),v={[it.containerList]:e!=="preview",[it.containerPreview]:e==="preview"},_=s.editing&&s.operations.add&&i.addButton?ge("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(it.esriButton,it.esriButtonTertiary,it.addAttachmentButton),type:"button"},ge("span",{"aria-hidden":"true",class:this.classes(it.itemAddIcon,it.iconPlus)}),this.messages.add):void 0,M=f?ge("ul",{key:"attachments-list",class:it.items},r.toArray().map(k=>this.renderAttachmentInfo({attachmentInfo:k,displayType:e}))):void 0,T=d?ge("ul",{key:"file-list",class:it.items},l.toArray().map(k=>this.renderFile(k))):void 0,A=d||f?void 0:ge("div",{class:it.empty},this.messages.noAttachments);return ge("div",{key:"attachments-container",class:this.classes(it.container,v)},M,T,A,_)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),"file"in t?this.deleteFile(t.file):this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};m([x()],Un.prototype,"abilities",null),m([x()],Un.prototype,"displayType",void 0),m([x({readOnly:!0})],Un.prototype,"effectiveDisplayType",null),m([x()],Un.prototype,"graphic",null),m([x()],Un.prototype,"label",null),m([x(),qn("esri/widgets/Attachments/t9n/Attachments")],Un.prototype,"messages",void 0),m([x(),qn("esri/core/t9n/Units")],Un.prototype,"messagesUnits",void 0),m([x({readOnly:!0})],Un.prototype,"selectedFile",void 0),m([x({readOnly:!0})],Un.prototype,"submitting",void 0),m([x({readOnly:!0})],Un.prototype,"error",void 0),m([x({type:T$})],Un.prototype,"viewModel",void 0),m([x()],Un.prototype,"visibleElements",void 0),m([ri("visibleElements")],Un.prototype,"castVisibleElements",null),Un=m([X("esri.widgets.Attachments")],Un);const vye=Un;let Tm=class extends T${constructor(e){super(e),this.description=null,this.title=null}};m([x()],Tm.prototype,"description",void 0),m([x()],Tm.prototype,"title",void 0),Tm=m([X("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Tm);const C$=Tm,bye={heading:"esri-widget__heading"};function A$(e,t){const i=wye(e.level),r=`h${i}`;return delete e.level,ge(r,je(te({},e),{class:bj(bye.heading,e.class),role:"heading","aria-level":String(i)}),t)}function wye(e){return Cn(Math.ceil(e),1,6)}const P$={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let q0=class extends Gn{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return ge("div",{class:P$.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?ge(A$,{level:this.headingLevel,class:P$.title},e):null}renderDescription(){const{description:e}=this;return e?ge("div",{key:"description",class:P$.description},e):null}};m([x()],q0.prototype,"description",void 0),m([x()],q0.prototype,"headingLevel",void 0),m([x()],q0.prototype,"title",void 0),q0=m([X("esri.widgets.Feature.support.FeatureElementInfo")],q0);const U3=q0,_ye={base:"esri-feature-attachments"};let Il=class extends Gn{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new vye,this.headingLevel=2,this.viewModel=new C$}initialize(){this._featureElementInfo=new U3,this.addHandles([Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),fi),Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,fi)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return ge("div",{class:_ye.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};m([x({readOnly:!0})],Il.prototype,"attachmentsWidget",void 0),m([x()],Il.prototype,"description",null),m([x()],Il.prototype,"displayType",null),m([x()],Il.prototype,"graphic",null),m([x()],Il.prototype,"headingLevel",void 0),m([x()],Il.prototype,"title",null),m([x({type:C$})],Il.prototype,"viewModel",void 0),Il=m([X("esri.widgets.Feature.FeatureAttachments")],Il);const xye=Il,_a=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new Jr}get updatingHandles(){return this._get("updatingHandles")||new O0}};return m([x({readOnly:!0})],t.prototype,"handles",null),m([x({readOnly:!0})],t.prototype,"updatingHandles",null),t=m([X("esri.core.HandleOwner")],t),t};let pd=class extends _a(ot){};pd=m([X("esri.core.HandleOwner")],pd);let mh=class extends _a(ot){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Ve(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},fi))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(q3(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=q3(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};m([x({readOnly:!0})],mh.prototype,"created",void 0),m([x()],mh.prototype,"creator",void 0),m([x()],mh.prototype,"destroyer",void 0),m([x({type:Dr})],mh.prototype,"graphic",void 0),m([x({readOnly:!0})],mh.prototype,"state",null),mh=m([X("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],mh);const B3=mh;function zo(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:Mye(e[t])}}}function Sye(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Mye(e){return function(t,...i){Sye(t)?t0e(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function $ye(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:Iye(e);i.push(...r)}}function Iye(e){return e.split(",").map(t=>t.trim())}const ZD="calcite-theme-";function Tye(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function H3(){return Tye().startsWith("dark")}function Eye(){return`${ZD}${H3()?"dark":"light"}`}function Cye(e){Aye(e),e.classList.add(Eye())}function Aye(e){Array.from(e.classList).forEach(t=>{t.startsWith(ZD)&&e.classList.remove(t)})}function KD(e){return e&&typeof e.render=="function"}function Pye(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const O$={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let U0=class extends Gn{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{kD(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}get creator(){return this.viewModel.creator}set creator(e){this.viewModel.creator=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}renderLoading(){return ge("div",{class:O$.loaderContainer,key:"loader"},ge("div",{class:O$.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?ge("div",{key:e,bind:e,afterCreate:this._attachToNode}):KD(e)?ge("div",{key:e},!e.destroyed&&e.render()):ge("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return ge("div",{class:O$.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};m([x()],U0.prototype,"creator",null),m([x()],U0.prototype,"graphic",null),m([x({type:B3})],U0.prototype,"viewModel",void 0),U0=m([X("esri.widgets.Feature.FeatureContent")],U0);const W3=U0;let _u=class extends ot{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=RD(s,e),i.push(s)}),i}};m([x()],_u.prototype,"attributes",void 0),m([x({type:[TR]})],_u.prototype,"expressionInfos",void 0),m([x()],_u.prototype,"description",void 0),m([x({type:[_g]})],_u.prototype,"fieldInfos",void 0),m([x({readOnly:!0})],_u.prototype,"formattedFieldInfos",null),m([x()],_u.prototype,"title",void 0),_u=m([X("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],_u);const J3=_u,Oye=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function kye(e){let t=null;return Oye.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function Rye(e,t){if(typeof t!="string"||!t)return t;const i=kye(t);if(!i)return t;const r=t.match(i.pattern),s=r&&r[2],l=Ka(Ka(i.label,{messages:e,hierPart:s}),{appName:i.appName}),f=i.target?` target="${i.target}"`:"",d=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${f} href="$1"${d}>${l}</a>`)}const Em={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let xa=class extends Gn{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new J3,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new U3,this.addHandles(Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),fi))}destroy(){this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,s=e.label||r,l=i?i[r]==null?"":i[r]:"",f=!(!e.format||!e.format.dateFormat),d=typeof l=="number"&&!f?this._forceLTR(l):Rye(this.messagesURIUtils,l),v={[Em.fieldDataDate]:f};return ge("tr",{key:`fields-element-info-row-${r}-${t}`},ge("th",{key:`fields-element-info-row-header-${r}-${t}`,class:Em.fieldHeader,innerHTML:s}),ge("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(Em.fieldData,v),innerHTML:d}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return(e==null?void 0:e.length)?ge("table",{class:Em.esriTable,summary:this.messages.fieldsSummary},ge("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return ge("div",{class:Em.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};m([x()],xa.prototype,"attributes",null),m([x()],xa.prototype,"description",null),m([x()],xa.prototype,"expressionInfos",null),m([x()],xa.prototype,"fieldInfos",null),m([x()],xa.prototype,"title",null),m([x({type:J3,nonNullable:!0})],xa.prototype,"viewModel",void 0),m([x(),qn("esri/widgets/Feature/t9n/Feature")],xa.prototype,"messages",void 0),m([x(),qn("esri/widgets/support/t9n/uriUtils")],xa.prototype,"messagesURIUtils",void 0),xa=m([X("esri.widgets.Feature.FeatureFields")],xa);const YD=xa,Fye={maximumFractionDigits:20};function Lye(e){return Oo(e,Fye)}var k$;let dd=k$=class extends Ee{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e!=null?e:0}clone(){return new k$({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};m([x({type:mt,json:{type:[hi],write:!0}})],dd.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],dd.prototype,"label",void 0),m([x({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],dd.prototype,"value",void 0),m([Xe("value")],dd.prototype,"writeValue",null),dd=k$=m([X("esri.renderers.visualVariables.support.ColorStop")],dd);const Nye=dd;function Z3(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function jye(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Dye(e,t,i,r,s,l,f,d,v,_,M,T,A,k,F,D){const z=new Float32Array(16);return z[0]=e,z[1]=t,z[2]=i,z[3]=r,z[4]=s,z[5]=l,z[6]=f,z[7]=d,z[8]=v,z[9]=_,z[10]=M,z[11]=T,z[12]=A,z[13]=k,z[14]=F,z[15]=D,z}function Vye(e,t){return new Float32Array(e,t,16)}const zye=Z3();Object.freeze(Object.defineProperty({__proto__:null,create:Z3,clone:jye,fromValues:Dye,createView:Vye,IDENTITY:zye},Symbol.toStringTag,{value:"Module"}));const Gye=(e,t)=>{const i=rh(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return mu(i,i)},qye=(e,t)=>{const i=rh(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return mu(i,i)},Uye=(e,t)=>{const i=1-t,r=rh(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return mu(r,r)},Bye=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=rh(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return mu(s,s)},Hye=(e,t)=>{const i=1-2*t,r=rh(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return mu(r,r)},Wye=(e,t)=>{const i=rh(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return mu(i,i)},Jye=(e,t)=>{const i=1-t,r=rh(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return mu(r,r)};class K3{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Ls(t.strength,i.strength,r),this.radius=Ls(t.radius,i.radius,r),this.threshold=Ls(t.threshold,i.threshold,r)}clone(){return new K3(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Am(this.radius),strength:this.strength,threshold:this.threshold}}}class Y3{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Ls(t.radius,i.radius,r))}clone(){return new Y3(this.radius)}toJSON(){return{type:"blur",radius:Am(this.radius)}}}class Cm{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Ls(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Cm(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Z3();switch(this.type){case"brightness":this._colorMatrix=Gye(t,this.amount);break;case"contrast":this._colorMatrix=qye(t,this.amount);break;case"grayscale":this._colorMatrix=Uye(t,this.amount);break;case"invert":this._colorMatrix=Hye(t,this.amount);break;case"saturate":this._colorMatrix=Wye(t,this.amount);break;case"sepia":this._colorMatrix=Jye(t,this.amount)}}}class X3{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Ls(t.offsetX,i.offsetX,r),this.offsetY=Ls(t.offsetY,i.offsetY,r),this.blurRadius=Ls(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Ls(t.color[0],i.color[0],r)),this.color[1]=Math.round(Ls(t.color[1],i.color[1],r)),this.color[2]=Math.round(Ls(t.color[2],i.color[2],r)),this.color[3]=Ls(t.color[3],i.color[3],r)}clone(){return new X3(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Am(this.offsetX),yoffset:Am(this.offsetY),blurRadius:Am(this.blurRadius),color:t}}}class Q3{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Ls(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Q3(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Z3();this._colorMatrix=Bye(t,this.angle)}}class e_{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Ls(t.amount,i.amount,r)}clone(){return new e_(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Ls(e,t,i){return e+(t-e)*i}function Am(e){return Math.round(1e3*Ro(e))/1e3}function Zye(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Cm(e.type,0);case"saturate":case"brightness":case"contrast":return new Cm(e.type,1);case"opacity":return new e_(1);case"hue-rotate":return new Q3(0);case"blur":return new Y3(0);case"drop-shadow":return new X3(0,0,0,[...LS("transparent")]);case"bloom":return new K3(0,0,1)}}var oAe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function aAe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lAe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Kye(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function Yye(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(Zye(i[s]))}function Xye(e){const t=e[0];return!!t&&"type"in t}var XD,QD,eV={exports:{}};function tV(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=iV(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new fe("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:iV(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Kye(t[i].effects,t[i+1].effects))throw new fe("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});Yye(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function iV(e){let t;if(!e)return[];try{t=eV.exports.parse(e)}catch(i){throw new fe("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Qye(i))}function Qye(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return ege(e);case"opacity":return tge(e);case"hue-rotate":return ige(e);case"blur":return rge(e);case"drop-shadow":return nge(e);case"bloom":return sge(e)}}catch(t){throw t.details.filter=e,t}throw new fe("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function ege(e){let t=1;return B0(e.parameters,1),e.parameters.length===1&&(t=Sa(e.parameters[0])),new Cm(e.name,t)}function tge(e){let t=1;return B0(e.parameters,1),e.parameters.length===1&&(t=Sa(e.parameters[0])),new e_(t)}function ige(e){let t=0;return B0(e.parameters,1),e.parameters.length===1&&(t=hge(e.parameters[0])),new Q3(t)}function rge(e){let t=0;return B0(e.parameters,1),e.parameters.length===1&&(t=L$(e.parameters[0]),Pm(t,e.parameters[0])),new Y3(t)}function nge(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new fe("effect:type-error","Accepts only one color",{});i=pge(r)}else{const s=L$(r);if(Object.isFrozen(t))throw new fe("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&Pm(s,r)}if(t.length<2||t.length>3)throw new fe("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new X3(t[0],t[1],t[2]||0,i||rV("black"))}function sge(e){let t=1,i=0,r=0;return B0(e.parameters,3),e.parameters[0]&&(t=Sa(e.parameters[0])),e.parameters[1]&&(i=L$(e.parameters[1]),Pm(i,e.parameters[1])),e.parameters[2]&&(r=Sa(e.parameters[2])),new K3(t,i,r)}function B0(e,t){if(e.length>t)throw new fe("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function t_(e){if(e.type==="color")return"<color>";if(e.unit){if(F$[e.unit])return"<length>";if(R$[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Pm(e,t){if(e<0)throw new fe("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function oge(e){if(e.type!=="quantity"||e.unit!==null)throw new fe("effect:type-error",`Expected <double>, Actual: ${t_(e)}`,{term:e})}function age(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new fe("effect:type-error",`Expected <double> or <percentage>, Actual: ${t_(e)}`,{term:e})}QD=function(){function e(s,l){function f(){this.constructor=s}f.prototype=l.prototype,s.prototype=new f}function t(s,l,f,d){var v=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(v,t.prototype),v.expected=l,v.found=f,v.location=d,v.name="SyntaxError",v}function i(s,l,f){return f=f||" ",s.length>l?s:(l-=s.length,s+(f+=f.repeat(l)).slice(0,l))}function r(s,l){var f,d={},v=(l=l!==void 0?l:{}).grammarSource,_={start:nr},M=nr,T="none",A=")",k=",",F="(",D="%",z="px",H="cm",J="mm",Y="in",ie="pt",re="pc",ee="deg",le="rad",me="grad",we="turn",_e="#",Me=".",Se="e",He=/^[ \t\n\r]/,We=/^[a-z\-]/,Ot=/^[0-9a-fA-F]/,kt=/^[+\-]/,ft=/^[0-9]/,Ye=qe("none"),Ct=ke("none",!1),Oi=ke(")",!1),Ui=ke(",",!1),_i=qe("whitespace"),pr=Ae([" ","	",`
`,"\r"],!1,!1),Rr=qe("function"),De=ke("(",!1),ct=qe("identifier"),Ze=Ae([["a","z"],"-"],!1,!1),yt=qe("percentage"),ni=ke("%",!1),si=qe("length"),Lt=ke("px",!1),Nt=ke("cm",!1),ce=ke("mm",!1),ye=ke("in",!1),Te=ke("pt",!1),Ge=ke("pc",!1),Re=qe("angle"),B=ke("deg",!1),Ke=ke("rad",!1),Je=ke("grad",!1),Fe=ke("turn",!1),Ne=qe("number"),ht=qe("color"),ut=ke("#",!1),pt=Ae([["0","9"],["a","f"],["A","F"]],!1,!1),St=Ae(["+","-"],!1,!1),jt=Ae([["0","9"]],!1,!1),$i=ke(".",!1),Xt=ke("e",!1),Le=function(){return[]},xr=function(ue,Oe){return{type:"function",name:ue,parameters:Oe||[]}},h=function(ue,Oe){return Oe.length>0?V9(ue,Oe,3):[ue]},O=function(ue){return{type:"quantity",value:ue.value,unit:ue.unit}},w=function(ue){return{type:"color",colorType:ue.type,value:ue.value}},c=function(ue){return ue},a=function(){return xe()},n=function(ue){return{value:ue,unit:"%"}},o=function(ue){return{value:ue,unit:"px"}},u=function(ue){return{value:ue,unit:"cm"}},p=function(ue){return{value:ue,unit:"mm"}},y=function(ue){return{value:ue,unit:"in"}},g=function(ue){return{value:ue,unit:"pt"}},b=function(ue){return{value:ue,unit:"pc"}},S=function(ue){return{value:ue,unit:"deg"}},$=function(ue){return{value:ue,unit:"rad"}},I=function(ue){return{value:ue,unit:"grad"}},C=function(ue){return{value:ue,unit:"turn"}},R=function(ue){return{value:ue,unit:null}},L=function(){return{type:"hex",value:xe()}},N=function(ue){return{type:"function",value:ue}},U=function(){return{type:"named",value:xe()}},W=function(){return parseFloat(xe())},j=0,K=0,se=[{line:1,column:1}],ne=0,pe=[],he=0;if("startRule"in l){if(!(l.startRule in _))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');M=_[l.startRule]}function xe(){return s.substring(K,j)}function ke(ue,Oe){return{type:"literal",text:ue,ignoreCase:Oe}}function Ae(ue,Oe,Ue){return{type:"class",parts:ue,inverted:Oe,ignoreCase:Ue}}function st(){return{type:"end"}}function qe(ue){return{type:"other",description:ue}}function It(ue){var Oe,Ue=se[ue];if(Ue)return Ue;for(Oe=ue-1;!se[Oe];)Oe--;for(Ue={line:(Ue=se[Oe]).line,column:Ue.column};Oe<ue;)s.charCodeAt(Oe)===10?(Ue.line++,Ue.column=1):Ue.column++,Oe++;return se[ue]=Ue,Ue}function xt(ue,Oe){var Ue=It(ue),qt=It(Oe);return{source:v,start:{offset:ue,line:Ue.line,column:Ue.column},end:{offset:Oe,line:qt.line,column:qt.column}}}function tt(ue){j<ne||(j>ne&&(ne=j,pe=[]),pe.push(ue))}function xi(ue,Oe,Ue){return new t(t.buildMessage(ue,Oe),ue,Oe,Ue)}function nr(){var ue;return(ue=Ii())===d&&(ue=ei()),ue}function Ii(){var ue,Oe;return he++,ue=j,Dt(),s.substr(j,4)===T?(Oe=T,j+=4):(Oe=d,he===0&&tt(Ct)),Oe!==d?(Dt(),K=ue,ue=Le()):(j=ue,ue=d),he--,ue===d&&he===0&&tt(Ye),ue}function ei(){var ue,Oe;if(ue=[],(Oe=ti())!==d)for(;Oe!==d;)ue.push(Oe),Oe=ti();else ue=d;return ue}function ti(){var ue,Oe,Ue,qt;return ue=j,Dt(),(Oe=dr())!==d?(Dt(),(Ue=zt())===d&&(Ue=null),Dt(),s.charCodeAt(j)===41?(qt=A,j++):(qt=d,he===0&&tt(Oi)),qt!==d?(Dt(),K=ue,ue=xr(Oe,Ue)):(j=ue,ue=d)):(j=ue,ue=d),ue}function zt(){var ue,Oe,Ue,qt,Wr,Yi,xs,vf;if(ue=j,(Oe=ki())!==d){for(Ue=[],qt=j,Wr=Dt(),s.charCodeAt(j)===44?(Yi=k,j++):(Yi=d,he===0&&tt(Ui)),Yi===d&&(Yi=null),xs=Dt(),(vf=ki())!==d?qt=Wr=[Wr,Yi,xs,vf]:(j=qt,qt=d);qt!==d;)Ue.push(qt),qt=j,Wr=Dt(),s.charCodeAt(j)===44?(Yi=k,j++):(Yi=d,he===0&&tt(Ui)),Yi===d&&(Yi=null),xs=Dt(),(vf=ki())!==d?qt=Wr=[Wr,Yi,xs,vf]:(j=qt,qt=d);K=ue,ue=h(Oe,Ue)}else j=ue,ue=d;return ue}function ki(){var ue,Oe;return ue=j,(Oe=Hr())===d&&(Oe=ui())===d&&(Oe=dc())===d&&(Oe=fc()),Oe!==d&&(K=ue,Oe=O(Oe)),(ue=Oe)===d&&(ue=j,(Oe=yc())!==d&&(K=ue,Oe=w(Oe)),ue=Oe),ue}function Dt(){var ue,Oe;for(he++,ue=[],He.test(s.charAt(j))?(Oe=s.charAt(j),j++):(Oe=d,he===0&&tt(pr));Oe!==d;)ue.push(Oe),He.test(s.charAt(j))?(Oe=s.charAt(j),j++):(Oe=d,he===0&&tt(pr));return he--,Oe=d,he===0&&tt(_i),ue}function dr(){var ue,Oe,Ue;return he++,ue=j,(Oe=Bt())!==d?(s.charCodeAt(j)===40?(Ue=F,j++):(Ue=d,he===0&&tt(De)),Ue!==d?(K=ue,ue=c(Oe)):(j=ue,ue=d)):(j=ue,ue=d),he--,ue===d&&(Oe=d,he===0&&tt(Rr)),ue}function Bt(){var ue,Oe,Ue;if(he++,ue=j,Oe=[],We.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,he===0&&tt(Ze)),Ue!==d)for(;Ue!==d;)Oe.push(Ue),We.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,he===0&&tt(Ze));else Oe=d;return Oe!==d&&(K=ue,Oe=a()),he--,(ue=Oe)===d&&(Oe=d,he===0&&tt(ct)),ue}function Hr(){var ue,Oe,Ue;return he++,ue=j,Dt(),(Oe=un())!==d?(s.charCodeAt(j)===37?(Ue=D,j++):(Ue=d,he===0&&tt(ni)),Ue!==d?(K=ue,ue=n(Oe)):(j=ue,ue=d)):(j=ue,ue=d),he--,ue===d&&he===0&&tt(yt),ue}function ui(){var ue,Oe,Ue;return he++,ue=j,Dt(),(Oe=un())!==d?(s.substr(j,2)===z?(Ue=z,j+=2):(Ue=d,he===0&&tt(Lt)),Ue!==d?(K=ue,ue=o(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,Dt(),(Oe=un())!==d?(s.substr(j,2)===H?(Ue=H,j+=2):(Ue=d,he===0&&tt(Nt)),Ue!==d?(K=ue,ue=u(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,Dt(),(Oe=un())!==d?(s.substr(j,2)===J?(Ue=J,j+=2):(Ue=d,he===0&&tt(ce)),Ue!==d?(K=ue,ue=p(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,Dt(),(Oe=un())!==d?(s.substr(j,2)===Y?(Ue=Y,j+=2):(Ue=d,he===0&&tt(ye)),Ue!==d?(K=ue,ue=y(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,Dt(),(Oe=un())!==d?(s.substr(j,2)===ie?(Ue=ie,j+=2):(Ue=d,he===0&&tt(Te)),Ue!==d?(K=ue,ue=g(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,Dt(),(Oe=un())!==d?(s.substr(j,2)===re?(Ue=re,j+=2):(Ue=d,he===0&&tt(Ge)),Ue!==d?(K=ue,ue=b(Oe)):(j=ue,ue=d)):(j=ue,ue=d)))))),he--,ue===d&&he===0&&tt(si),ue}function dc(){var ue,Oe,Ue;return he++,ue=j,(Oe=un())!==d?(s.substr(j,3)===ee?(Ue=ee,j+=3):(Ue=d,he===0&&tt(B)),Ue!==d?(K=ue,ue=S(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,(Oe=un())!==d?(s.substr(j,3)===le?(Ue=le,j+=3):(Ue=d,he===0&&tt(Ke)),Ue!==d?(K=ue,ue=$(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,(Oe=un())!==d?(s.substr(j,4)===me?(Ue=me,j+=4):(Ue=d,he===0&&tt(Je)),Ue!==d?(K=ue,ue=I(Oe)):(j=ue,ue=d)):(j=ue,ue=d),ue===d&&(ue=j,(Oe=un())!==d?(s.substr(j,4)===we?(Ue=we,j+=4):(Ue=d,he===0&&tt(Fe)),Ue!==d?(K=ue,ue=C(Oe)):(j=ue,ue=d)):(j=ue,ue=d)))),he--,ue===d&&(Oe=d,he===0&&tt(Re)),ue}function fc(){var ue,Oe;return he++,ue=j,Dt(),(Oe=un())!==d?(K=ue,ue=R(Oe)):(j=ue,ue=d),he--,ue===d&&he===0&&tt(Ne),ue}function yc(){var ue,Oe,Ue,qt;if(he++,ue=j,s.charCodeAt(j)===35?(Oe=_e,j++):(Oe=d,he===0&&tt(ut)),Oe!==d){if(Ue=[],Ot.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,he===0&&tt(pt)),qt!==d)for(;qt!==d;)Ue.push(qt),Ot.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,he===0&&tt(pt));else Ue=d;Ue!==d?(K=ue,ue=L()):(j=ue,ue=d)}else j=ue,ue=d;return ue===d&&(ue=j,(Oe=ti())!==d&&(K=ue,Oe=N(Oe)),(ue=Oe)===d&&(ue=j,(Oe=Bt())!==d&&(K=ue,Oe=U()),ue=Oe)),he--,ue===d&&(Oe=d,he===0&&tt(ht)),ue}function un(){var ue,Oe,Ue,qt,Wr,Yi,xs;for(ue=j,kt.test(s.charAt(j))?(s.charAt(j),j++):he===0&&tt(St),Oe=j,Ue=[],ft.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,he===0&&tt(jt));qt!==d;)Ue.push(qt),ft.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,he===0&&tt(jt));if(s.charCodeAt(j)===46?(qt=Me,j++):(qt=d,he===0&&tt($i)),qt!==d){if(Wr=[],ft.test(s.charAt(j))?(Yi=s.charAt(j),j++):(Yi=d,he===0&&tt(jt)),Yi!==d)for(;Yi!==d;)Wr.push(Yi),ft.test(s.charAt(j))?(Yi=s.charAt(j),j++):(Yi=d,he===0&&tt(jt));else Wr=d;Wr!==d?Oe=Ue=[Ue,qt,Wr]:(j=Oe,Oe=d)}else j=Oe,Oe=d;if(Oe===d)if(Oe=[],ft.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,he===0&&tt(jt)),Ue!==d)for(;Ue!==d;)Oe.push(Ue),ft.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,he===0&&tt(jt));else Oe=d;if(Oe!==d){if(Ue=j,s.charCodeAt(j)===101?(qt=Se,j++):(qt=d,he===0&&tt(Xt)),qt!==d){if(kt.test(s.charAt(j))?(Wr=s.charAt(j),j++):(Wr=d,he===0&&tt(St)),Wr===d&&(Wr=null),Yi=[],ft.test(s.charAt(j))?(xs=s.charAt(j),j++):(xs=d,he===0&&tt(jt)),xs!==d)for(;xs!==d;)Yi.push(xs),ft.test(s.charAt(j))?(xs=s.charAt(j),j++):(xs=d,he===0&&tt(jt));else Yi=d;Yi!==d?Ue=qt=[qt,Wr,Yi]:(j=Ue,Ue=d)}else j=Ue,Ue=d;Ue===d&&(Ue=null),K=ue,ue=W()}else j=ue,ue=d;return ue}function D9(ue,Oe){return ue.map(function(Ue){return Ue[Oe]})}function V9(ue,Oe,Ue){return[ue].concat(D9(Oe,Ue))}if((f=M())!==d&&j===s.length)return f;throw f!==d&&j<s.length&&tt(st()),xi(pe,ne<s.length?s.charAt(ne):null,ne<s.length?xt(ne,ne+1):xt(ne,ne))}return e(t,Error),t.prototype.format=function(s){var l="Error: "+this.message;if(this.location){var f,d=null;for(f=0;f<s.length;f++)if(s[f].source===this.location.source){d=s[f].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,_=this.location.source+":"+v.line+":"+v.column;if(d){var M=this.location.end,T=i("",v.line.toString().length," "),A=d[v.line-1],k=(v.line===M.line?M.column:A.length+1)-v.column||1;l+=`
 --> `+_+`
`+T+` |
`+v.line+" | "+A+`
`+T+" | "+i("",v.column-1," ")+i("",k,"^")}else l+=`
 at `+_}return l},t.buildMessage=function(s,l){var f={literal:function(k){return'"'+v(k.text)+'"'},class:function(k){var F=k.parts.map(function(D){return Array.isArray(D)?_(D[0])+"-"+_(D[1]):_(D)});return"["+(k.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(k){return k.description}};function d(k){return k.charCodeAt(0).toString(16).toUpperCase()}function v(k){return k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function _(k){return k.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function M(k){return f[k.type](k)}function T(k){var F,D,z=k.map(M);if(z.sort(),z.length>0){for(F=1,D=1;F<z.length;F++)z[F-1]!==z[F]&&(z[D]=z[F],D++);z.length=D}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function A(k){return k?'"'+v(k)+'"':"end of input"}return"Expected "+T(s)+" but "+A(l)+" found."},{SyntaxError:t,parse:r}},(XD=eV).exports&&(XD.exports=QD());const R$={deg:1,grad:.9,rad:180/Math.PI,turn:360};function lge(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&R$[e.unit]!=null))throw new fe("effect:type-error",`Expected <angle>, Actual: ${t_(e)}`,{term:e})}const F$={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function uge(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&F$[e.unit]!=null))throw new fe("effect:type-error",`Expected <length>, Actual: ${t_(e)}`,{term:e})}function Sa(e){age(e);const t=e.value;return Pm(t,e),e.unit==="%"?.01*t:t}function cge(e){return oge(e),Pm(e.value,e),e.value}function hge(e){return lge(e),e.value*R$[e.unit]||0}function L$(e){return uge(e),e.value*F$[e.unit]||0}function pge(e){switch(e.colorType){case"hex":return Jae(e.value);case"named":return rV(e.value);case"function":return yge(e.value)}}function rV(e){if(!OR(e))throw new fe("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Wae(e)}const dge=/^rgba?/i,fge=/^hsla?/i;function yge(e){if(B0(e.parameters,4),dge.test(e.name))return[Sa(e.parameters[0]),Sa(e.parameters[1]),Sa(e.parameters[2]),e.parameters[3]?Sa(e.parameters[3]):1];if(fge.test(e.name))return kR(cge(e.parameters[0]),Sa(e.parameters[1]),Sa(e.parameters[2]),e.parameters[3]?Sa(e.parameters[3]):1);throw new fe("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function N$(e,t,i){var r;try{return mge(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function j$(e,t,i,r){try{const s=gge(e);jn(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function gge(e){const t=tV(e);return t?Xye(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function mge(e){if(!e||e.length===0)return null;if(vge(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:nV(i.value)});return t}return nV(e)}function vge(e){const t=e[0];return!!t&&"scale"in t}function nV(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[xu(i,"amount")];break;case"blur":r=[xu(i,"radius","pt")];break;case"hue-rotate":r=[xu(i,"angle","deg")];break;case"drop-shadow":r=[xu(i,"xoffset","pt"),xu(i,"yoffset","pt"),xu(i,"blurRadius","pt"),bge(i,"color")];break;case"bloom":r=[xu(i,"strength"),xu(i,"radius","pt"),xu(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;tV(s),t.push(s)}return t.join(" ")}function xu(e,t,i){if(e[t]==null)throw new fe("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function bge(e,t){if(e[t]==null)throw new fe("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const D$=-3;var vh;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(vh||(vh={}));class uAe{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,s=0){this._storage.put(this._namespace+t,i,r,s)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class sV{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new yp,this._users=new yp}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,s){const l=this._db.get(t);if(l&&(this._size-=l.size,this._db.delete(t),l.entry!==i&&this._notifyRemove(t,l.entry,vh.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,vh.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const f=1+Math.max(s,D$)-D$;this._db.set(t,{entry:i,size:r,lifetime:f,lives:f}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const l=this._notifyRemove(t,i,vh.SOME);if(!(q(l)&&l>0))return void this._db.delete(t);r=l}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((f,d)=>{const v=f.lifetime;r[v]=(r[v]||0)+f.size,this._users.forAll(_=>{const M=_.namespace;if(d.startsWith(M)){const T=i[M]||0;i[M]=T+f.size}})});const s={};this._users.forAll(f=>{const d=f.namespace;if(!isNaN(f.hitRate)&&f.hitRate>0){const v=i[d]||0;i[d]=v,s[d]=Math.round(100*f.hitRate)+"%"}else s[d]="0%"});const l=Object.keys(i);l.sort((f,d)=>i[d]-i[f]),l.forEach(f=>t[f]=Math.round(i[f]/2**20)+"MB / "+s[f]);for(let f=r.length-1;f>=0;--f){const d=r[f];d&&(t["Priority "+(f+D$-1)]=Math.round(d/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,vh.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,vh.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let s;return this._removeFuncs.some(l=>{if(t.startsWith(l[0])){const f=l[1](i,r);return typeof f=="number"&&(s=f),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,vh.SOME);q(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class V${constructor(t,i){this._storage=new sV,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function wge(e){return typeof e=="function"}function cAe(e,t,i,r){return wge(e)?e(t,i,r):e}function hAe(e){return[e.r,e.g,e.b,e.a]}const _ge=` /-,
`;function oV(e){let t=e.length;for(;t--;)if(!_ge.includes(e.charAt(t)))return!1;return!0}function xge(e,t){const i=[];let r=0,s=-1;do if(s=e.indexOf("[",r),s>=r){if(s>r){const l=e.substr(r,s-r);i.push([l,null,oV(l)])}if(r=s+1,s=e.indexOf("]",r),s>=r){if(s>r){const l=t[e.substr(r,s-r)];l&&i.push([null,l,!1])}r=s+1}}while(s!==-1);if(r<e.length-1){const l=e.substr(r);i.push([l,null,oV(l)])}return i}function Sge(e,t,i){let r="",s=null;for(const l of t){const[f,d,v]=l;if(f)v?s=f:(s&&(r+=s,s=null),r+=f);else{const _=e.attributes[d];_&&(s&&(r+=s,s=null),r+=_)}}return Mge(r,i)}function pAe(e,t,i){const r=xge(t,e);return s=>Sge(s,r,i)}function Mge(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function dAe(e,t,i,r,s,l,f=!0){const d=t/s,v=i/l,_=Math.ceil(d/2),M=Math.ceil(v/2);for(let T=0;T<l;T++)for(let A=0;A<s;A++){const k=4*(A+(f?l-T-1:T)*s);let F=0,D=0,z=0,H=0,J=0,Y=0,ie=0;const re=(T+.5)*v;for(let ee=Math.floor(T*v);ee<(T+1)*v;ee++){const le=Math.abs(re-(ee+.5))/M,me=(A+.5)*d,we=le*le;for(let _e=Math.floor(A*d);_e<(A+1)*d;_e++){let Me=Math.abs(me-(_e+.5))/_;const Se=Math.sqrt(we+Me*Me);Se>=-1&&Se<=1&&(F=2*Se*Se*Se-3*Se*Se+1,F>0&&(Me=4*(_e+ee*t),ie+=F*e[Me+3],z+=F,e[Me+3]<255&&(F=F*e[Me+3]/250),H+=F*e[Me],J+=F*e[Me+1],Y+=F*e[Me+2],D+=F))}}r[k]=H/D,r[k+1]=J/D,r[k+2]=Y/D,r[k+3]=ie/z}}function fAe(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function $ge(e){return e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices"}const yAe=(e,t=0)=>isNaN(e)||e==null?t:e,gAe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function mAe(){return import("./geometryEngineJSON.d6a1f595.js")}function vAe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function bAe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function wAe(e){let t="",i="";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function _Ae(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function aV(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=aV(t);if(i!=null)return i}break;case"CIMTextSymbol":return aV(e.symbol);case"CIMSolidFill":return e.color}}function lV(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=lV(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return lV(e.symbol);case"CIMSolidStroke":case"CIMSolidFill":return e.color}}function uV(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=uV(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return uV(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function xAe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function SAe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function MAe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const $Ae=e=>e.includes("data:image/svg+xml");function IAe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function cV(e,t,i,r){if(e)if(e.type!=="CIMTextSymbol"){if(i&&e.effects)for(const s of e.effects)Ege(s,t);if(e.symbolLayers)for(const s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":Ige(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r==null?void 0:r.preserveOutlineWidth)&&s.width&&(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":cV(s.lineSymbol,t,!0,je(te({},r),{preserveOutlineWidth:!1})),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}}else e.height!=null&&(e.height*=t)}function Ige(e,t,i){if(e&&(e.markerPlacement&&Tge(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||cV(r.symbol,t,!0,i)}function Tge(e,t){switch($ge(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function Ege(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}new V$(1e3);new mt([128,128,128]);const hV=/\/resource\/(.*?)\.svg$/,Cge=new mt("white");function TAe(e){if(ae(e)||!("symbolLayers"in e)||ae(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function EAe(e,t){const i=ss(t.resource).href;return!Ie("esri-canvas-svg-support")&&e.styleOrigin&&hV.test(i)?i.replace(hV,"/resource/png/$1.png"):i}function H0(e,t){if(!e)return null;let i=null;return Zp(e)?i=Age(e):K2(e)&&(i=e.color?new mt(e.color):null),i?Om(i,t):null}function Age(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var s;r.type==="object"&&((s=r.resource)==null?void 0:s.href)!=null||(i=r.type==="water"?Jt(r.color):q(r.material)?Jt(r.material.color):null)}),i?new mt(i):null}function Om(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new mt(i)}function Pge(e,t,i){const r=e.symbolLayers;if(!r)return;const s=l=>{var d;const f=q(l)?l:null;return Om(t=(d=t!=null?t:f)!=null?d:i!=null?Cge:null,i)};r.forEach(l=>{var f;if(l.type!=="object"||((f=l.resource)==null?void 0:f.href)==null||t)if(l.type==="water")l.color=s(l.color);else{const d=q(l.material)?l.material.color:null,v=s(d);ae(l.material)?l.material=new to({color:v}):l.material.color=v,i!=null&&"outline"in l&&q(l.outline)&&q(l.outline.color)&&(l.outline.color=Om(l.outline.color,i))}})}function Oge(e,t,i){(t=t!=null?t:e.color)&&(e.color=Om(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=Om(e.outline.color,i))}function z$(e,t,i){e&&(t||i!=null)&&(t&&(t=new mt(t)),Zp(e)?Pge(e,t,i):K2(e)&&Oge(e,t,i))}async function kge(e,t){const i=e.symbolLayers;i&&await the(i,async r=>Rge(r,t))}async function Rge(e,t){switch(e.type){case"extrude":Lge(e,t);break;case"icon":case"line":case"text":Fge(e,t);break;case"path":jge(e,t);break;case"object":await Nge(e,t)}}function Fge(e,t){const i=pV(t);q(i)&&(e.size=i)}function pV(e){for(const t of e)if(typeof t=="number")return t;return null}function Lge(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function Nge(e,t){const{resourceSize:i,symbolSize:r}=await Dge(e),s=dV(t,i,r);e.width=km(t[0],r[0],i[0],s),e.depth=km(t[1],r[1],i[1],s),e.height=km(t[2],r[2],i[2],s)}function jge(e,t){const i=dV(t,zR,[e.width,void 0,e.height]);e.width=km(t[0],e.width,1,i),e.height=km(t[2],e.height,1,i)}function dV(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":{const l=i[r];return l!=null?l/t[r]:1}case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function Dge(e){const t=await import("./symbolLayerUtils.96142519.js"),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:s,depth:l}=e,f=[r,l,s];let d=1;for(let v=0;v<3;v++){const _=f[v];if(_!=null){d=_/i[v];break}}for(let v=0;v<3;v++)f[v]==null&&(f[v]=i[v]*d);return{resourceSize:i,symbolSize:f}}function km(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function Vge(e,t){const i=pV(t);if(!ae(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function zge(e,t){if(e&&t)return Zp(e)?kge(e,t):void(K2(e)&&Vge(e,t))}function Gge(e,t,i){if(e&&t!=null)if(Zp(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=t;break;case"roll":s.roll=t;break;default:s.heading=t}})}else K2(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function CAe(e){return q(e)&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}const qge="<",Uge=">",Bge=pS("short-date");function Hge(e,t,i,r){let s="";t===0?s=`${qge} `:t===i&&(s=`${Uge} `);let l=null;return l=r?uu(e,Bge):Lye(e),s+l}const Wge=new mt([64,64,64]);function Jge(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,l)=>i.includes(l)?Hge(s,l,r,t):null)}async function Zge(e,t,i){let r=!1,s=[],l=[];if(e.stops){const _=e.stops;s=_.map(M=>M.value),r=_.some(M=>!!M.label),r&&(l=_.map(M=>M.label))}const f=s[0],d=s[s.length-1];if(f==null&&d==null)return null;const v=r?null:Jge(s,i);return(await Promise.all(s.map(async(_,M)=>({value:_,color:e.type==="opacity"?await Kge(_,e,t):(await Promise.resolve().then(function(){return X7})).getColor(e,_),label:r?l[M]:v[M]})))).reverse()}async function Kge(e,t,i=Wge){const r=new mt(i),s=(await Promise.resolve().then(function(){return X7})).getOpacity(t,e);return s!=null&&(r.a=s),r}var G$;let Rm=G$=class extends Ee{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new G$({color:this.color,ratio:this.ratio})}};m([x({type:mt,json:{type:[hi],default:null,write:!0}})],Rm.prototype,"color",void 0),m([x({type:Number,json:{write:!0}})],Rm.prototype,"ratio",void 0),Rm=G$=m([X("esri.renderers.support.HeatmapColorStop")],Rm);const Fm=Rm;function Yge(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Fm({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var f,d;let l="";return s===0?l=((f=e.legendOptions)==null?void 0:f.minLabel)||"low":s===i&&(l=((d=e.legendOptions)==null?void 0:d.maxLabel)||"high"),{color:r.color,label:l,ratio:r.ratio}}).reverse()}Pe.getLogger("esri.renderers.support.utils");async function ao(e,t,i){mO(e,t,()=>[]).push(...i)}async function Xge(e){var i,r,s,l;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const f=e.visualVariables.filter(d=>d.type==="color");for(const d of f){const v=(await Zge(d)).map(_=>_.color);await ao(t,d.field||d.valueExpression,v)}}if(e.type==="heatmap"){const f=Yge(e).map(d=>d.color);await ao(t,e.field||e.valueExpression,f)}else if(e.type==="pie-chart"){for(const f of e.attributes)await ao(t,f.field||f.valueExpression,[f.color]);await ao(t,"default",[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,H0(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const f of e.attributes)await ao(t,f.field||f.valueExpression,[f.color]);await ao(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const f of(s=e.uniqueValueInfos)!=null?s:[])await ao(t,f.value.toString(),[H0(f.symbol,null)]);else{const f=((l=e.uniqueValueInfos)!=null?l:[]).map(T=>H0(T.symbol,null)),{field:d,field2:v,field3:_,valueExpression:M}=e;(d||M)&&await ao(t,d||M,f),v&&await ao(t,v,f),_&&await ao(t,_,f)}else if(e.type==="class-breaks"){const f=e.classBreakInfos.map(_=>H0(_.symbol,null)),{field:d,valueExpression:v}=e;await ao(t,d!=null?d:v,f)}else e.type==="simple"&&await ao(t,"default",[H0(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await ao(t,"default",[H0(e.defaultSymbol,null)]),t.forEach((f,d)=>{const v=ene(f.filter(Boolean),(_,M)=>JSON.stringify(_)===JSON.stringify(M));t.set(d,v)}),t}var q$;let Lm=q$=class extends Ee{constructor(e){super(e),this.name=null,this.code=null}clone(){return new q$({name:this.name,code:this.code})}};m([x({type:String,json:{write:!0}})],Lm.prototype,"name",void 0),m([x({type:[String,Number],json:{write:!0}})],Lm.prototype,"code",void 0),Lm=q$=m([X("esri.layers.support.CodedValue")],Lm);const Qge=new bt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Nm=class extends Ee{constructor(e){super(e),this.name=null,this.type=null}};m([x({type:String,json:{write:!0}})],Nm.prototype,"name",void 0),m([wt(Qge)],Nm.prototype,"type",void 0),Nm=m([X("esri.layers.support.Domain")],Nm);const i_=Nm;var U$;let jm=U$=class extends i_{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new U$({codedValues:ve(this.codedValues),name:this.name})}};m([x({type:[Lm],json:{write:!0}})],jm.prototype,"codedValues",void 0),m([wt({codedValue:"coded-value"})],jm.prototype,"type",void 0),jm=U$=m([X("esri.layers.support.CodedValueDomain")],jm);const fV=jm;var B$;let r_=B$=class extends i_{constructor(e){super(e),this.type="inherited"}clone(){return new B$}};m([wt({inherited:"inherited"})],r_.prototype,"type",void 0),r_=B$=m([X("esri.layers.support.InheritedDomain")],r_);const yV=r_;var H$;let W0=H$=class extends i_{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new H$({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};m([x({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],W0.prototype,"maxValue",void 0),m([x({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],W0.prototype,"minValue",void 0),m([wt({range:"range"})],W0.prototype,"type",void 0),W0=H$=m([X("esri.layers.support.RangeDomain")],W0);const gV=W0,mV={key:"type",base:i_,typeMap:{range:gV,"coded-value":fV,inherited:yV}};function W$(e){if(!e||!e.type)return null;switch(e.type){case"range":return gV.fromJSON(e);case"codedValue":return fV.fromJSON(e);case"inherited":return yV.fromJSON(e)}return null}const eme=new bt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var J$;const tme=new bt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Bn=J$=class extends Ee{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){var r;let i=null;try{i=t?JSON.parse(t):null}catch{}return(r=i==null?void 0:i.value)!=null?r:null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?tme.fromJSON(i.fieldValueType):null}clone(){return new J$({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};m([x({type:String,json:{write:!0}})],Bn.prototype,"alias",void 0),m([x({type:[String,Number],json:{write:{allowNull:!0}}})],Bn.prototype,"defaultValue",void 0),m([x()],Bn.prototype,"description",void 0),m([Be("description")],Bn.prototype,"readDescription",null),m([x({types:mV,json:{read:{reader:W$},write:!0}})],Bn.prototype,"domain",void 0),m([x({type:Boolean,json:{write:!0}})],Bn.prototype,"editable",void 0),m([x({type:hi,json:{write:!0}})],Bn.prototype,"length",void 0),m([x({type:String,json:{write:!0}})],Bn.prototype,"name",void 0),m([x({type:Boolean,json:{write:!0}})],Bn.prototype,"nullable",void 0),m([wt(eme)],Bn.prototype,"type",void 0),m([x()],Bn.prototype,"valueType",void 0),m([Be("valueType",["description"])],Bn.prototype,"readValueType",null),m([x({type:Boolean,json:{read:!1}})],Bn.prototype,"visible",void 0),Bn=J$=m([X("esri.layers.support.Field")],Bn);const J0=Bn;var Z$;let Su=Z$=class extends Ee{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Z$({mapLayerId:e,gdbVersion:t})}};m([wt({mapLayer:"map-layer"})],Su.prototype,"type",void 0),m([x({type:hi,json:{write:!0}})],Su.prototype,"mapLayerId",void 0),m([x({type:String,json:{write:!0}})],Su.prototype,"gdbVersion",void 0),Su=Z$=m([X("esri.layers.support.source.MapLayerSource")],Su);var K$;let Mu=K$=class extends Ee{constructor(e){super(e),this.type="query-table"}clone(){var f;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,l={workspaceId:e,query:t,oidFields:i,spatialReference:(f=r==null?void 0:r.clone())!=null?f:void 0,geometryType:s};return new K$(l)}};m([wt({queryTable:"query-table"})],Mu.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Mu.prototype,"workspaceId",void 0),m([x({type:String,json:{write:!0}})],Mu.prototype,"query",void 0),m([x({type:String,json:{write:!0}})],Mu.prototype,"oidFields",void 0),m([x({type:At,json:{write:!0}})],Mu.prototype,"spatialReference",void 0),m([wt(Jw)],Mu.prototype,"geometryType",void 0),Mu=K$=m([X("esri.layers.support.source.QueryTableDataSource")],Mu);var Y$;let Z0=Y$=class extends Ee{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new Y$({workspaceId:e,dataSourceName:t})}};m([wt({raster:"raster"})],Z0.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Z0.prototype,"dataSourceName",void 0),m([x({type:String,json:{write:!0}})],Z0.prototype,"workspaceId",void 0),Z0=Y$=m([X("esri.layers.support.source.RasterDataSource")],Z0);var X$;let fd=X$=class extends Ee{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new X$({workspaceId:e,gdbVersion:t,dataSourceName:i})}};m([wt({table:"table"})],fd.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],fd.prototype,"workspaceId",void 0),m([x({type:String,json:{write:!0}})],fd.prototype,"gdbVersion",void 0),m([x({type:String,json:{write:!0}})],fd.prototype,"dataSourceName",void 0),fd=X$=m([X("esri.layers.support.source.TableDataSource")],fd);var Q$,e7;const ime=In()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let lo=Q$=class extends Ee{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return vV()(e,t,i)}castLeftTableSource(e){return Ya(r7(),e)}readRightTableSource(e,t,i){return vV()(e,t,i)}castRightTableSource(e){return Ya(r7(),e)}clone(){var f,d;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,l={leftTableKey:e,rightTableKey:t,leftTableSource:(f=i==null?void 0:i.clone())!=null?f:void 0,rightTableSource:(d=r==null?void 0:r.clone())!=null?d:void 0,joinType:s};return new Q$(l)}};m([wt({joinTable:"join-table"})],lo.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],lo.prototype,"leftTableKey",void 0),m([x({type:String,json:{write:!0}})],lo.prototype,"rightTableKey",void 0),m([x({json:{write:!0}})],lo.prototype,"leftTableSource",void 0),m([Be("leftTableSource")],lo.prototype,"readLeftTableSource",null),m([ri("leftTableSource")],lo.prototype,"castLeftTableSource",null),m([x({json:{write:!0}})],lo.prototype,"rightTableSource",void 0),m([Be("rightTableSource")],lo.prototype,"readRightTableSource",null),m([ri("rightTableSource")],lo.prototype,"castRightTableSource",null),m([wt(ime)],lo.prototype,"joinType",void 0),lo=Q$=m([X("esri.layers.support.source.JoinTableDataSource")],lo);let t7=null;function vV(){return t7||(t7=Ec({types:r7()})),t7}let i7=null;function r7(){return i7||(i7={key:"type",base:null,typeMap:{"data-layer":uo,"map-layer":Su}}),i7}const rme={key:"type",base:null,typeMap:{"join-table":lo,"query-table":Mu,raster:Z0,table:fd}};let uo=e7=class extends Ee{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new e7({fields:e,dataSource:t})}};m([wt({dataLayer:"data-layer"})],uo.prototype,"type",void 0),m([x({type:[J0],json:{write:!0}})],uo.prototype,"fields",void 0),m([x({types:rme,json:{write:!0}})],uo.prototype,"dataSource",void 0),uo=e7=m([X("esri.layers.support.source.DataLayerSource")],uo),uo.from=Ai(uo);function bV(e,t){return t?je(te({},t),{query:te(te({},e),t.query)}):{query:e}}function zr(e){return typeof e=="string"?gn(e):ve(e)}function n7(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const l=e[s];if(l!=null&&typeof l!="function")if(Array.isArray(l)){r[s]=[];for(let f=0;f<l.length;f++)r[s][f]=n7(l[f])}else if(typeof l=="object")if(l.toJSON){const f=l.toJSON(i&&i[s]);r[s]=t?f:JSON.stringify(f)}else r[s]=t?l:JSON.stringify(l);else r[s]=l}return r}const n_={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Kr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:At.WebMercator}),minus180Line:new Kr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:At.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Kr({paths:[[[180,-180],[180,180]]],spatialReference:At.WGS84}),minus180Line:new Kr({paths:[[[-180,-180],[-180,180]]],spatialReference:At.WGS84})}};function yd(e,t){return Math.ceil((e-t)/(2*t))}function wV(e,t){const i=Dm(e);for(const r of i)for(const s of r)s[0]+=t;return e}function Dm(e){return su(e)?e.rings:e.paths}async function nme(e,t,i,r){const s=zr(e),l=t[0].spatialReference,f=je(te({},r),{query:je(te({},s.query),{f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:ou(t[0]),geometries:t}),cutter:JSON.stringify(i)})}),d=await li(s.path+"/cut",f),{cutIndexes:v,geometries:_=[]}=d.data;return{cutIndexes:v,geometries:_.map(M=>{const T=fn(M);return T.spatialReference=l,T})}}function sme(e){return{geometryType:ou(e[0]),geometries:e.map(t=>t.toJSON())}}function _V(e,t,i){const r=Joe(t);return e.map(s=>{const l=r.fromJSON(s);return l.spatialReference=i,l})}async function ome(e,t,i){const r=typeof e=="string"?gn(e):e,s=t[0].spatialReference,l=ou(t[0]),f=je(te({},i),{query:je(te({},r.query),{f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(sme(t))})}),{data:d}=await li(r.path+"/simplify",f);return _V(d.geometries,l,s)}const xV=Pe.getLogger("esri.geometry.support.normalizeUtils");function ame(e){return e.type==="polygon"}function lme(e){return e[0].type==="polygon"}function ume(e){return e[0].type==="polyline"}function cme(e,t){if(!(e instanceof Kr||e instanceof Dn)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw xV.error(s),new fe(s)}const i=Dm(e),r=[];for(const s of i){const l=[];r.push(l),l.push([s[0][0],s[0][1]]);for(let f=0;f<s.length-1;f++){const d=s[f][0],v=s[f][1],_=s[f+1][0],M=s[f+1][1],T=Math.sqrt((_-d)*(_-d)+(M-v)*(M-v)),A=(M-v)/T,k=(_-d)/T,F=T/t;if(F>1){for(let J=1;J<=F-1;J++){const Y=J*t,ie=k*Y+d,re=A*Y+v;l.push([ie,re])}const D=(T+Math.floor(F-1)*t)/2,z=k*D+d,H=A*D+v;l.push([z,H])}l.push([_,M])}}return ame(e)?new Dn({rings:r,spatialReference:e.spatialReference}):new Kr({paths:r,spatialReference:e.spatialReference})}function SV(e,t,i){if(t){const r=cme(e,1e6);e=Jf(r,!0)}return i&&(e=wV(e,i)),e}function MV(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=yd(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=yd(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=yd(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=yd(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function hme(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],l=t.geometries[r],f=Dm(l);for(let d=0;d<f.length;d++){const v=f[d];v.some(_=>{if(_[0]<180)return!0;{let M=0;for(let A=0;A<v.length;A++){const k=v[A][0];M=k>M?k:M}M=Number(M.toFixed(9));const T=-360*yd(M,180);for(let A=0;A<v.length;A++){const k=l.getPoint(d,A);l.setPoint(d,A,k.clone().offset(T,0))}return!0}})}if(s===i){if(lme(e))for(const d of Dm(l))e[s]=e[s].addRing(d);else if(ume(e))for(const d of Dm(l))e[s]=e[s].addPath(d)}else i=s,e[s]=l}return e}async function Vm(e,t,i){var ie;if(!Array.isArray(e))return Vm([e],t);t&&typeof t!="string"&&xV.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(ie=t==null?void 0:t.url)!=null?ie:gi.geometryServiceUrl;let s,l,f,d,v,_,M,T,A=0;const k=[],F=[];for(const re of e)if(ae(re))F.push(re);else if(s||(s=re.spatialReference,l=Ys(s),f=s.isWebMercator,_=f?102100:4326,d=n_[_].maxX,v=n_[_].minX,M=n_[_].plus180Line,T=n_[_].minus180Line),l)if(re.type==="mesh")F.push(re);else if(re.type==="point")F.push(MV(re.clone(),d,v));else if(re.type==="multipoint"){const ee=re.clone();ee.points=ee.points.map(le=>MV(le,d,v)),F.push(ee)}else if(re.type==="extent"){const ee=re.clone()._normalize(!1,!1,l);F.push(ee.rings?new Dn(ee):ee)}else if(re.extent){const ee=re.extent,le=yd(ee.xmin,v)*(2*d);let me=le===0?re.clone():wV(re.clone(),le);ee.offset(le,0),ee.intersects(M)&&ee.xmax!==d?(A=ee.xmax>A?ee.xmax:A,me=SV(me,f),k.push(me),F.push("cut")):ee.intersects(T)&&ee.xmin!==v?(A=ee.xmax*(2*d)>A?ee.xmax*(2*d):A,me=SV(me,f,360),k.push(me),F.push("cut")):F.push(me)}else F.push(re.clone());else F.push(re);let D=yd(A,d),z=-90;const H=D,J=new Kr;for(;D>0;){const re=360*D-180;J.addPath([[re,z],[re,-1*z]]),z*=-1,D--}if(k.length>0&&H>0){const re=hme(k,await nme(r,k,J,i)),ee=[],le=[];for(let _e=0;_e<F.length;_e++){const Me=F[_e];if(Me!=="cut")le.push(Me);else{const Se=re.shift(),He=e[_e];q(He)&&He.type==="polygon"&&He.rings&&He.rings.length>1&&Se.rings.length>=He.rings.length?(ee.push(Se),le.push("simplify")):le.push(f?nu(Se):Se)}}if(!ee.length)return le;const me=await ome(r,ee,i),we=[];for(let _e=0;_e<le.length;_e++){const Me=le[_e];Me!=="simplify"?we.push(Me):we.push(f?nu(me.shift()):me.shift())}return we}const Y=[];for(let re=0;re<F.length;re++){const ee=F[re];if(ee!=="cut")Y.push(ee);else{const le=k.shift();Y.push(f===!0?nu(le):le)}}return Y}function AAe(e,t){const i=Ys(t);if(i){const[r,s]=i.valid,l=s-r;if(e<r)for(;e<r;)e+=l;if(e>s)for(;e>s;)e-=l}return e}function zm(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=zm(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var bh;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(bh||(bh={}));const $V=4294967296,pme=new TextDecoder("utf-8"),dme=Ie("safari")||Ie("ios")?6:Ie("ff")?12:32;class gd{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=bh.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}asUnsafe(){return this}clone(){return new gd(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(t!==void 0)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*$V;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*$V;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const l=this.getMessage(),f=t(l,i,r,s);return l.release(),f}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=gd.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){gd.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case bh.varint:this._decodeVarint();break;case bh.fixed64:this._skip(8);break;case bh.delimited:this._skip(this._getLength());break;case bh.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=t[i++],r|=127&s,(128&s)==0||(s=t[i++],r|=(127&s)<<7,(128&s)==0)||(s=t[i++],r|=(127&s)<<14,(128&s)==0)||(s=t[i++],r|=(127&s)<<21,(128&s)==0)||(s=t[i++],r+=268435456*(127&s),(128&s)==0)||(s=t[i++],r+=34359738368*(127&s),(128&s)==0)||(s=t[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=t[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=t[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=t[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let l=1;for(;i!==this._end&&(s=t[i],(128&s)!=0);)++i,r+=(127&s)*l,l*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*l}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i=this._pos,r=0,s=0;const l=1&t[i];if(this._end-i>=10)do{if(s=t[i++],r|=127&s,(128&s)==0||(s=t[i++],r|=(127&s)<<7,(128&s)==0)||(s=t[i++],r|=(127&s)<<14,(128&s)==0)||(s=t[i++],r|=(127&s)<<21,(128&s)==0)||(s=t[i++],r+=268435456*(127&s),(128&s)==0)||(s=t[i++],r+=34359738368*(127&s),(128&s)==0)||(s=t[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=t[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=t[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=t[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let f=1;for(;i!==this._end&&(s=t[i],(128&s)!=0);)++i,r+=(127&s)*f,f*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*f}return this._pos=i,l?-(r+1)/2:r/2}_getLength(){if(this._dataType!==bh.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>dme){const f=t.subarray(i,r);return pme.decode(f)}let s="",l="";for(let f=i;f<r;++f){const d=t[f];128&d?l+="%"+d.toString(16):(s+=decodeURIComponent(l)+String.fromCharCode(d),l="")}return l.length&&(s+=decodeURIComponent(l)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}gd.pool=new sa(gd,void 0,e=>{e._data=null,e._dataView=null});class bn{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,s,l]=t,f=s-i,d=l-r;return new bn([5],[i,r,f,0,0,d,-f,0,0,-d])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let l=0;l<s;l++)t(this.coords[2*(l+i)],this.coords[2*(l+i)+1]);i+=s}}clone(t){return t?(t.set(this.coords),new bn(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new bn(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Tl{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new Tl(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function fme(e){return!(ae(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class PAe extends Tl{}class s_{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new s_;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const IV=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class OAe{constructor(t){this._options=t,this.geometryTypes=IV,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new s_}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||Xi(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=E0(this._options.sourceSpatialReference)/E0(t.spatialReference);if(i!==1)for(const r of t.features){if(!fme(r))continue;const s=r.geometry.coords;for(let l=2;l<s.length;l+=3)s[l]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new Tl}createSpatialReference(){return{wkid:0}}createGeometry(){return new bn}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new bn}}const TV=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],EV=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],CV=["upperLeft","lowerLeft"];function AV(e){return e>=TV.length?null:TV[e]}function yme(e){return e>=EV.length?null:EV[e]}function PV(e){return e>=CV.length?null:CV[e]}function OV(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function gme(e,t,i){const r=3,s=e.asUnsafe(),l=t.createPointGeometry(i);for(;s.next();)switch(s.tag()){case r:{const f=s.getUInt32(),d=s.pos()+f;let v=0;for(;s.pos()<d;)t.addCoordinatePoint(l,s.getSInt64(),v++);break}default:s.skip()}return l}function mme(e,t,i){const r=2,s=3,l=e.asUnsafe(),f=t.createGeometry(i),d=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;l.next();)switch(l.tag()){case r:{const v=l.getUInt32(),_=l.pos()+v;let M=0;for(;l.pos()<_;)t.addLength(f,l.getUInt32(),M++);break}case s:{const v=l.getUInt32(),_=l.pos()+v;let M=0;for(t.allocateCoordinates(f);l.pos()<_;)t.addCoordinate(f,l.getSInt64(),M),M++,M===d&&(M=0);break}default:l.skip()}return f}function vme(e){const t=1,i=2,r=3,s=e.asUnsafe(),l=new bn;let f="esriGeometryPoint";for(;s.next();)switch(s.tag()){case i:{const d=s.getUInt32(),v=s.pos()+d;for(;s.pos()<v;)l.lengths.push(s.getUInt32());break}case r:{const d=s.getUInt32(),v=s.pos()+d;for(;s.pos()<v;)l.coords.push(s.getSInt64());break}case t:f=IV[s.getEnum()];break;default:s.skip()}return{queryGeometry:l,queryGeometryType:f}}function bme(e){const t=1,i=2,r=3,s=4,l=5,f=6,d=7,v=8,_=9,M=e.asUnsafe();for(;M.next();)switch(M.tag()){case t:return M.getString();case i:return M.getFloat();case r:return M.getDouble();case s:return M.getSInt32();case l:return M.getUInt32();case f:return M.getInt64();case d:return M.getUInt64();case v:return M.getSInt64();case _:return M.getBool();default:return M.skip(),null}return null}function wme(e){const t=1,i=2,r=3,s=4,l=5,f=6,d=e.asUnsafe(),v={type:AV(0)};for(;d.next();)switch(d.tag()){case t:v.name=d.getString();break;case i:v.type=AV(d.getEnum());break;case r:v.alias=d.getString();break;case s:v.sqlType=yme(d.getEnum());break;case l:d.skip();break;case f:v.defaultValue=d.getString();break;default:d.skip()}return v}function _me(e){const t=1,i=2,r={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case t:r.name=s.getString();break;case i:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function xme(e,t,i,r){const s=1,l=2,f=4,d=t.createFeature(i);let v=0;for(;e.next();)switch(e.tag()){case s:{const _=r[v++].name;d.attributes[_]=e.processMessage(bme);break}case l:d.geometry=e.processMessageWithArgs(mme,t,i);break;case f:d.centroid=e.processMessageWithArgs(gme,t,i);break;default:e.skip()}return d}function Sme(e){const t=1,i=2,r=3,s=4,l=[1,1,1,1],f=e.asUnsafe();for(;f.next();)switch(f.tag()){case t:l[0]=f.getDouble();break;case i:l[1]=f.getDouble();break;case s:l[2]=f.getDouble();break;case r:l[3]=f.getDouble();break;default:f.skip()}return l}function Mme(e){const t=1,i=2,r=3,s=4,l=[0,0,0,0],f=e.asUnsafe();for(;f.next();)switch(f.tag()){case t:l[0]=f.getDouble();break;case i:l[1]=f.getDouble();break;case s:l[2]=f.getDouble();break;case r:l[3]=f.getDouble();break;default:f.skip()}return l}function $me(e){const t=1,i=2,r=3,s={originPosition:PV(0)},l=e.asUnsafe();for(;l.next();)switch(l.tag()){case t:s.originPosition=PV(l.getEnum());break;case i:s.scale=l.processMessage(Sme);break;case r:s.translate=l.processMessage(Mme);break;default:l.skip()}return s}function Ime(e){const t=1,i=2,r=3,s={},l=e.asUnsafe();for(;l.next();)switch(l.tag()){case t:s.shapeAreaFieldName=l.getString();break;case i:s.shapeLengthFieldName=l.getString();break;case r:s.units=l.getString();break;default:l.skip()}return s}function Tme(e,t){const i=1,r=2,s=3,l=4,f=5,d=t.createSpatialReference();for(;e.next();)switch(e.tag()){case i:d.wkid=e.getUInt32();break;case f:d.wkt=e.getString();break;case r:d.latestWkid=e.getUInt32();break;case s:d.vcsWkid=e.getUInt32();break;case l:d.latestVcsWkid=e.getUInt32();break;default:e.skip()}return d}function Eme(e,t){const i=1,r=2,s=3,l=4,f=5,d=7,v=8,_=9,M=10,T=11,A=12,k=13,F=15,D=t.createFeatureResult(),z=e.asUnsafe();D.geometryType=OV(t,0);let H=!1;for(;z.next();)switch(z.tag()){case i:D.objectIdFieldName=z.getString();break;case s:D.globalIdFieldName=z.getString();break;case l:D.geohashFieldName=z.getString();break;case f:D.geometryProperties=z.processMessage(Ime);break;case d:D.geometryType=OV(t,z.getEnum());break;case v:D.spatialReference=z.processMessageWithArgs(Tme,t);break;case M:D.hasZ=z.getBool();break;case T:D.hasM=z.getBool();break;case A:D.transform=z.processMessage($me);break;case _:{const J=z.getBool();D.exceededTransferLimit=J;break}case k:t.addField(D,z.processMessage(wme));break;case F:H||(t.prepareFeatures(D),H=!0),t.addFeature(D,z.processMessageWithArgs(xme,t,D,D.fields));break;case r:D.uniqueIdField=z.processMessage(_me);break;default:z.skip()}return t.finishFeatureResult(D),D}function Cme(e,t){const i=1,r=4,s={};let l=null;for(;e.next();)switch(e.tag()){case r:l=e.processMessageWithArgs(vme);break;case i:s.featureResult=e.processMessageWithArgs(Eme,t);break;default:e.skip()}return q(l)&&s.featureResult&&t.addQueryGeometry(s,l),s}function Ame(e,t){try{const i=2,r=new gd(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===i?s.queryResult=r.processMessageWithArgs(Cme,t):r.skip();return s}catch(i){throw new fe("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Pme(e,t){const i=Ame(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,l=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const f=r.objectIdFieldName;for(const d of r.features)d.attributes&&(d.objectId=d.attributes[f])}return r&&(r.queryGeometry=s,r.queryGeometryType=l),r}function o_(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=qM(i.geometryType,t,e.outSpatialReference);if(!ae(r))for(const s of i.features)r(s.geometry)}const kV="Layer does not support extent calculation.";function RV(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function FV(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let l,f,d;if(q(i)&&(f=i.spatialReference,d=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=ou(i),s.geometry=RV(i,e.compactGeometryEnabled),s.inSR=d),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),l=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,l=f),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&q(f)&&q(e.quantizationParameters)&&q(e.quantizationParameters.extent)&&f.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const v=r.timeExtent,{start:_,end:M}=v;_==null&&M==null||(s.time=_===M?_:`${_!=null?_:"null"},${M!=null?M:"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&q(f)&&q(l)&&f.equals(l)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function LV(e,t,i,r){const s=q(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await K0(e,t,"json",r);return o_(t,i,s.data),s}async function NV(e,t,i,r){if(q(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await jV(e,t,r),l=s;return l.data=Pme(s.data,i),l}function jV(e,t,i){return K0(e,t,"pbf",i)}function DV(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):K0(e,t,"json",i,{returnIdsOnly:!0})}function VV(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):K0(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function zV(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):K0(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(kV);if(s.hasOwnProperty("count"))throw new Error(kV);return r})}function K0(e,t,i,r={},s={}){const l=typeof e=="string"?gn(e):e,f=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",Vm(f,null,r).then(d=>{const v=d&&d[0];q(v)&&((t=t.clone()).geometry=v);const _=zm(te(te(je(te({},l.query),{f:i}),s),FV(t,s)));return li(Wc(l.path,"query"),je(te({},r),{query:te(te({},_),r.query)}))})}var Ome=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",encodeGeometry:RV,executeQuery:LV,executeQueryForCount:VV,executeQueryForExtent:zV,executeQueryForIds:DV,executeQueryPBF:NV,executeQueryPBFBuffer:jV,queryToQueryStringParameters:FV,runQuery:K0}),s7;const o7=new bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let wn=s7=class extends Ee{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var s;const i=At.fromJSON(t.spatialReference),r=[];for(let l=0;l<e.length;l++){const f=e[l],d=Dr.fromJSON(f),v=f.geometry&&f.geometry.spatialReference;q(d.geometry)&&!v&&(d.geometry.spatialReference=i);const _=f.aggregateGeometries,M=d.aggregateGeometries;if(_&&q(M))for(const T in M){const A=M[T],k=(s=_[T])==null?void 0:s.spatialReference;q(A)&&!k&&(A.spatialReference=i)}r.push(d)}return r}writeGeometryType(e,t,i,r){if(e)return void o7.write(e,t,i,r);const{features:s}=this;if(s){for(const l of s)if(l&&q(l.geometry))return void o7.write(l.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=fn(e);return r&&!i&&t.spatialReference&&(r.spatialReference=At.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&q(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new s7(this.cloneProperties())}cloneProperties(){return ve({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e&&e[i];r.geometry=s&&s.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,l=_=>Math.round((_-r)/t),f=_=>Math.round((s-_)/i),d=this.features,v=this._getQuantizationFunction(this.geometryType,l,f);for(let _=0,M=d.length;_<M;_++)(v==null?void 0:v(Jt(d[_].geometry)))||(d.splice(_,1),_--,M--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[l,f]}=i,d=M=>M*l+r,v=M=>s-M*f,_=this._getHydrationFunction(e,d,v);for(const{geometry:M}of t)q(M)&&_&&_(M);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const l=[];for(let f=0,d=e.length;f<d;f++){const v=e[f];if(f>0){const _=t(v[0]),M=i(v[1]);_===r&&M===s||(l.push([_-r,M-s]),r=_,s=M)}else r=t(v[0]),s=i(v[1]),l.push([r,s])}return l.length>0?l:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=su(r)?r.rings:r.paths,l=[];for(let f=0,d=s.length;f<d;f++){const v=s[f],_=this._quantizePoints(v,t,i);_&&l.push(_)}return l.length>0?(su(r)?r.rings=l:r.paths=l,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s&&s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const s=su(r)?r.rings:r.paths;let l,f;for(let d=0,v=s.length;d<v;d++){const _=s[d];for(let M=0,T=_.length;M<T;M++){const A=_[M];M>0?(l+=A[0],f+=A[1]):(l=A[0],f=A[1]),A[0]=t(l),A[1]=i(f)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const s=r.points;let l,f;for(let d=0,v=s.length;d<v;d++){const _=s[d];d>0?(l+=_[0],f+=_[1]):(l=_[0],f=_[1]),_[0]=t(l),_[1]=i(f)}}:null}};m([x({type:String,json:{write:!0}})],wn.prototype,"displayFieldName",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wn.prototype,"exceededTransferLimit",void 0),m([x({type:[Dr],json:{write:!0}})],wn.prototype,"features",void 0),m([Be("features")],wn.prototype,"readFeatures",null),m([x({type:[J0],json:{write:!0}})],wn.prototype,"fields",void 0),m([x({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:o7.read}}})],wn.prototype,"geometryType",void 0),m([Xe("geometryType")],wn.prototype,"writeGeometryType",null),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wn.prototype,"hasM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wn.prototype,"hasZ",void 0),m([x({types:au,json:{write:!0}})],wn.prototype,"queryGeometry",void 0),m([Be("queryGeometry")],wn.prototype,"readQueryGeometry",null),m([x({type:At,json:{write:!0}})],wn.prototype,"spatialReference",void 0),m([Xe("spatialReference")],wn.prototype,"writeSpatialReference",null),m([x({json:{write:!0}})],wn.prototype,"transform",void 0),wn=s7=m([X("esri.rest.support.FeatureSet")],wn),wn.prototype.toJSON.isDefaultToJSON=!0;const wh=wn;var kme=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wh});const GV={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Rme={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Fme(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function md(e,t,i){const r=new Date(e.getTime());if(t&&i){const s=Rme[i],{getter:l,setter:f,multiplier:d}=s;if(i==="months"){const v=Fme(r.getFullYear(),r.getMonth()+t);r.getDate()>v&&r.setDate(v)}r[f](r[l]()+t*d)}return r}function qV(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Lme(e,t,i){return e===0?0:e*GV[t]/GV[i]}var Ma;let co=Ma=class extends Ee{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return UV}static get empty(){return Nme}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Ma.allTime)}get isEmpty(){return this.equals(Ma.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Ma({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=q(this.start)?this.start.getTime():this.start,i=q(this.end)?this.end.getTime():this.end,r=q(e.start)?e.start.getTime():e.start,s=q(e.end)?e.end.getTime():e.end;return t===r&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Zl(this.start,r=>qV(r,e)),i=Zl(this.end,r=>{const s=qV(r,e);return r.getTime()===s.getTime()?s:md(s,1,e)});return new Ma({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Ma.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=zy(this.start,-1/0,d=>d.getTime()),i=zy(this.end,1/0,d=>d.getTime()),r=zy(e.start,-1/0,d=>d.getTime()),s=zy(e.end,1/0,d=>d.getTime());let l,f;if(r>=t&&r<=i?l=r:t>=r&&t<=s&&(l=t),i>=r&&i<=s?f=i:s>=t&&s<=i&&(f=s),l!=null&&f!=null&&!isNaN(l)&&!isNaN(f)){const d=new Ma;return d.start=l===-1/0?null:new Date(l),d.end=f===1/0?null:new Date(f),d}return Ma.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Ma,{start:r,end:s}=this;return q(r)&&(i.start=md(r,e,t)),q(s)&&(i.end=md(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return UV.clone();const t=q(this.start)&&q(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=q(this.end)&&q(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Ma({start:t,end:i})}};m([x({type:Date,json:{write:{allowNull:!0}}})],co.prototype,"end",void 0),m([Be("end")],co.prototype,"readEnd",null),m([Xe("end")],co.prototype,"writeEnd",null),m([x({readOnly:!0,json:{read:!1}})],co.prototype,"isAllTime",null),m([x({readOnly:!0,json:{read:!1}})],co.prototype,"isEmpty",null),m([x({type:Date,json:{write:{allowNull:!0}}})],co.prototype,"start",void 0),m([Be("start")],co.prototype,"readStart",null),m([Xe("start")],co.prototype,"writeStart",null),co=Ma=m([X("esri.TimeExtent")],co);const UV=new co,Nme=new co({start:void 0,end:void 0}),Go=co;let vd=class extends yr(Ee){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};m([x({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:q(this.onFields)&&this.onFields.length>0}}}}})],vd.prototype,"onFields",void 0),m([x({type:String,json:{write:!0}})],vd.prototype,"operator",void 0),m([x({type:String,json:{write:!0}})],vd.prototype,"searchTerm",void 0),m([x({type:String,json:{write:!0}})],vd.prototype,"searchType",void 0),vd=m([X("esri.rest.support.FullTextSearch")],vd);const jme=vd;var a7;const BV=new bt({upperLeft:"upper-left",lowerLeft:"lower-left"});let bd=a7=class extends Ee{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new a7(ve({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};m([x({type:ai,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],bd.prototype,"extent",void 0),m([x({type:["view","edit"],json:{write:!0}})],bd.prototype,"mode",void 0),m([x({type:String,json:{read:BV.read,write:BV.write}})],bd.prototype,"originPosition",void 0),m([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],bd.prototype,"tolerance",void 0),bd=a7=m([X("esri.rest.support.QuantizationParameters")],bd);const HV=bd;var l7;const WV=new bt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let $a=l7=class extends Ee{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=ve(e))}clone(){return new l7({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ve(this.statisticParameters)})}};m([x({type:Number,json:{write:!0}})],$a.prototype,"maxPointCount",void 0),m([x({type:Number,json:{write:!0}})],$a.prototype,"maxRecordCount",void 0),m([x({type:Number,json:{write:!0}})],$a.prototype,"maxVertexCount",void 0),m([x({type:String,json:{write:!0}})],$a.prototype,"onStatisticField",void 0),m([x({type:String,json:{write:!0}})],$a.prototype,"outStatisticFieldName",void 0),m([x({type:String,json:{read:{source:"statisticType",reader:WV.read},write:{target:"statisticType",writer:WV.write}}})],$a.prototype,"statisticType",void 0),m([x({type:Object})],$a.prototype,"statisticParameters",void 0),m([Xe("statisticParameters")],$a.prototype,"writeStatisticParameters",null),$a=l7=m([X("esri.rest.support.StatisticDefinition")],$a);const JV=$a;var Y0;const Dme=new bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Vme=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let $t=Y0=class extends Ee{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Vf(Y0,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(l=>l instanceof Date?l.getTime():l):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Y0(ve({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:q(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};$t.MAX_MAX_RECORD_COUNT_FACTOR=5,m([x({json:{write:!0}})],$t.prototype,"aggregateIds",void 0),m([x({type:Boolean,json:{write:!0}})],$t.prototype,"cacheHint",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"compactGeometryEnabled",void 0),m([x({json:{write:!0}})],$t.prototype,"datumTransformation",void 0),m([ri("datumTransformation")],$t.prototype,"castDatumTransformation",null),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"defaultSpatialReferenceEnabled",void 0),m([x({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],$t.prototype,"distance",void 0),m([x({type:uo,json:{write:!0}})],$t.prototype,"dynamicDataSource",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"formatOf3DObjects",void 0),m([x({type:[jme],json:{write:{enabled:!0,overridePolicy(){return{enabled:q(this.fullText)&&this.fullText.length>0}}}}})],$t.prototype,"fullText",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"gdbVersion",void 0),m([x({types:au,json:{read:fn,write:!0}})],$t.prototype,"geometry",void 0),m([x({type:Number,json:{write:!0}})],$t.prototype,"geometryPrecision",void 0),m([x({type:[String],json:{write:!0}})],$t.prototype,"groupByFieldsForStatistics",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"having",void 0),m([x({type:Date})],$t.prototype,"historicMoment",void 0),m([Xe("historicMoment")],$t.prototype,"writeHistoricMoment",null),m([x({type:Number,json:{write:!0}})],$t.prototype,"maxAllowableOffset",void 0),m([x({type:Number,cast:e=>e<1?1:e>Y0.MAX_MAX_RECORD_COUNT_FACTOR?Y0.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],$t.prototype,"maxRecordCountFactor",void 0),m([x({type:["xyFootprint"],json:{write:!0}})],$t.prototype,"multipatchOption",void 0),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],$t.prototype,"num",void 0),m([x({json:{write:!0}})],$t.prototype,"objectIds",void 0),m([x({type:[String],json:{write:!0}})],$t.prototype,"orderByFields",void 0),m([x({type:[String],json:{write:!0}})],$t.prototype,"outFields",void 0),m([x({type:At,json:{name:"outSR",write:!0}})],$t.prototype,"outSpatialReference",void 0),m([x({type:[JV],json:{write:{enabled:!0,overridePolicy(){return{enabled:q(this.outStatistics)&&this.outStatistics.length>0}}}}})],$t.prototype,"outStatistics",void 0),m([x({json:{write:!0}})],$t.prototype,"parameterValues",void 0),m([Xe("parameterValues")],$t.prototype,"writeParameterValues",null),m([x({type:dt,json:{write:!0}})],$t.prototype,"pixelSize",void 0),m([x({type:HV,json:{write:!0}})],$t.prototype,"quantizationParameters",void 0),m([x({type:[Object],json:{write:!0}})],$t.prototype,"rangeValues",void 0),m([x({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],$t.prototype,"relationParameter",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"resultType",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnCentroid",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnDistinctValues",void 0),m([x({type:Boolean,json:{default:!0,write:!0}})],$t.prototype,"returnExceededLimitFeatures",void 0),m([x({type:Boolean,json:{write:!0}})],$t.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnQueryGeometry",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],$t.prototype,"returnZ",void 0),m([x({type:At,json:{write:!0}})],$t.prototype,"sourceSpatialReference",void 0),m([wt(Dme,{ignoreUnknown:!1,name:"spatialRel"})],$t.prototype,"spatialRelationship",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],$t.prototype,"start",void 0),m([Xe("start"),Xe("num")],$t.prototype,"writeStart",null),m([x({type:String,json:{write:!0}})],$t.prototype,"sqlFormat",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"text",void 0),m([x({type:Go,json:{write:!0}})],$t.prototype,"timeExtent",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"timeReferenceUnknownClient",void 0),m([wt(Vme,{ignoreUnknown:!1}),x({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],$t.prototype,"units",void 0),m([x({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],$t.prototype,"where",void 0),m([Xe("where")],$t.prototype,"writeWhere",null),$t=Y0=m([X("esri.rest.support.Query")],$t);const Hn=$t;async function u7(e,t,i){const r=await zme(e,t,i);return wh.fromJSON(r)}async function zme(e,t,i){const r=zr(e),s=te({},i),l=Hn.from(t),{data:f}=await LV(r,l,l.sourceSpatialReference,s);return f}function On(e,t){return e?t?4:3:t?3:2}const X0=Pe.getLogger("esri.layers.graphics.featureConversionUtils"),ZV={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Gme=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l},KV=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+2]},qme=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+3]},Ume=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+2],e[i+3]=t[r+3]};function c7(e,t,i,r){if(e){if(i)return t&&r?Ume:KV;if(t&&r)return qme}else if(t&&r)return KV;return Gme}function h7({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function p7({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function d7({scale:e,translate:t},i,r){return i*e[r]+t[r]}function f7(e,t,i){return e?t?i?m7(e):y7(e):i?g7(e):a_(e):null}function a_(e){const t=e.coords;return{x:t[0],y:t[1]}}function YV(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function y7(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Bme(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function g7(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Hme(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function m7(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Wme(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Jme(e,t,i,r){let s=a_;i&&r?s=m7:i?s=y7:r&&(s=g7);for(const l of t){const{geometry:f,attributes:d}=l,v=q(f)?s(f):null;e.push({attributes:d,geometry:v})}return e}function v7(e,t){return e&&t?Wme:e?Bme:t?Hme:YV}function XV(e,t,i,r,s){const l=v7(i,r);for(const{geometry:f,attributes:d}of t){const v=q(f)?l(new bn,f):null;e.push(new Tl(v,d,null,s?d[s]:void 0))}return e}function kAe(e,t,i=v7(t.z!=null,t.m!=null)){return i(e,t)}function Zme(e,t,i,r){for(const{geometry:s,attributes:l}of t)e.push({attributes:l,geometry:q(s)?b7(s,i,r):null});return e}function b7(e,t,i){if(ae(e))return null;const r=On(t,i),s=[];for(let l=0;l<e.coords.length;l+=r){const f=[];for(let d=0;d<r;d++)f.push(e.coords[l+d]);s.push(f)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function QV(e,t,i,r,s){const l=On(i,r);for(const{geometry:f,attributes:d}of t){const v=q(f)?ez(new bn,f,l):null;e.push(new Tl(v,d,null,s?d[s]:void 0))}return e}function ez(e,t,i=On(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const l of t.points)for(let f=0;f<i;f++)r[s++]=l[f];return e}function Kme(e,t,i,r){for(const{geometry:s,attributes:l}of t)e.push({attributes:l,geometry:q(s)?w7(s,i,r):null});return e}function w7(e,t,i){if(!e)return null;const r=On(t,i),{coords:s,lengths:l}=e,f=[];let d=0;for(const v of l){const _=[];for(let M=0;M<v;M++){const T=[];for(let A=0;A<r;A++)T.push(s[d++]);_.push(T)}f.push(_)}return t?i?{paths:f,hasZ:t,hasM:i}:{paths:f,hasZ:t}:i?{paths:f,hasM:i}:{paths:f}}function tz(e,t,i,r,s){const l=On(i,r);for(const{geometry:f,attributes:d}of t){const v=q(f)?iz(new bn,f,l):null;e.push(new Tl(v,d,null,s?d[s]:void 0))}return e}function iz(e,t,i=On(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let l=0;for(const f of t.paths){for(const d of f)for(let v=0;v<i;v++)s[l++]=d[v];r.push(f.length)}return e}function Yme(e,t,i,r){for(const{geometry:s,attributes:l,centroid:f}of t){const d=q(s)?_7(s,i,r):null;if(q(f)){const v=a_(f);e.push({attributes:l,centroid:v,geometry:d})}else e.push({attributes:l,geometry:d})}return e}function _7(e,t,i){if(!e)return null;const r=On(t,i),{coords:s,lengths:l}=e,f=[];let d=0;for(const v of l){const _=[];for(let M=0;M<v;M++){const T=[];for(let A=0;A<r;A++)T.push(s[d++]);_.push(T)}f.push(_)}return t?i?{rings:f,hasZ:t,hasM:i}:{rings:f,hasZ:t}:i?{rings:f,hasM:i}:{rings:f}}function rz(e,t,i,r,s){for(const{geometry:l,centroid:f,attributes:d}of t){const v=q(l)?nz(new bn,l,i,r):null,_=s?d[s]:void 0;q(f)?e.push(new Tl(v,d,YV(new bn,f),_)):e.push(new Tl(v,d,null,_))}return e}function nz(e,t,i=t.hasZ,r=t.hasM){return Xme(e,t.rings,i,r),e}function Xme(e,t,i,r){const s=On(i,r),{lengths:l,coords:f}=e;let d=0;$u(e);for(const v of t){for(const _ of v)for(let M=0;M<s;M++)f[d++]=_[M];l.push(v.length)}return e}const Q0=[],Gm=[];function RAe(e,t,i,r,s){Q0[0]=e;const[l]=sz(Gm,Q0,t,i,r,s);return Ia(Q0),Ia(Gm),l}function sz(e,t,i,r,s,l){if(Ia(e),!i){for(const f of t){const d=l?f.attributes[l]:void 0;e.push(new Tl(null,f.attributes,null,d))}return e}switch(i){case"esriGeometryPoint":return XV(e,t,r,s,l);case"esriGeometryMultipoint":return QV(e,t,r,s,l);case"esriGeometryPolyline":return tz(e,t,r,s,l);case"esriGeometryPolygon":return rz(e,t,r,s,l);default:X0.error("convertToFeatureSet:unknown-geometry",new fe(`Unable to parse unknown geometry type '${i}'`)),Ia(e)}return e}function FAe(e,t,i,r,s,l){const f=e.length;switch(i){case"esriGeometryPoint":XV(e,t,r,s,l);break;case"esriGeometryMultipoint":QV(e,t,r,s,l);break;case"esriGeometryPolyline":tz(e,t,r,s,l);break;case"esriGeometryPolygon":rz(e,t,r,s,l);break;default:X0.error("convertToFeatureSet:unknown-geometry",new fe(`Unable to parse unknown geometry type '${i}'`))}for(let d=0;d<t.length;d++)e[d+f].geometryType=i,e[d+f].insertAfter=t[d].insertAfter,e[d+f].groupId=t[d].groupId;return e}function LAe(e,t,i,r){Gm[0]=e,az(Q0,Gm,t,i,r);const s=Q0[0];return Ia(Q0),Ia(Gm),s}function NAe(e,t,i){if(ae(e))return null;const r=new bn;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),Yw(e)?v7(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):su(e)?nz(r,e,t,i):ug(e)?iz(r,e,On(t,i)):Kw(e)?ez(r,e,On(t,i)):void X0.error("convertFromGeometry:unknown-geometry",new fe(`Unable to parse unknown geometry type '${e}'`))}function oz(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(ae(s))return null;switch(t){case"esriGeometryPoint":{let l=a_;return i&&r?l=m7:i?l=y7:r&&(l=g7),l(s)}case"esriGeometryMultipoint":return b7(s,i,r);case"esriGeometryPolyline":return w7(s,i,r);case"esriGeometryPolygon":return _7(s,i,r);default:return X0.error("convertToGeometry:unknown-geometry",new fe(`Unable to parse unknown geometry type '${t}'`)),null}}function Qme(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function az(e,t,i,r,s){if(Ia(e),ae(i))return Qme(e,t);switch(i){case"esriGeometryPoint":return Jme(e,t,r,s);case"esriGeometryMultipoint":return Zme(e,t,r,s);case"esriGeometryPolyline":return Kme(e,t,r,s);case"esriGeometryPolygon":return Yme(e,t,r,s);default:X0.error("convertToFeatureSet:unknown-geometry",new fe(`Unable to parse unknown geometry type '${i}'`))}return e}function jAe(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:l,hasZ:f,features:d,geometryType:v,exceededTransferLimit:_,uniqueIdField:M,queryGeometry:T,queryGeometryType:A}=e,k={features:az([],d,v,f,l),fields:s,geometryType:v,objectIdFieldName:t,spatialReference:i,uniqueIdField:M,queryGeometry:oz(T,A,!1,!1)};return r&&(k.transform=r),_&&(k.exceededTransferLimit=_),l&&(k.hasM=l),f&&(k.hasZ=f),k}function DAe(e,t){var A;const i=new s_,{hasM:r,hasZ:s,features:l,objectIdFieldName:f,spatialReference:d,geometryType:v,exceededTransferLimit:_,transform:M,fields:T}=e;return T&&(i.fields=T),i.geometryType=v!=null?v:null,i.objectIdFieldName=(A=f!=null?f:t)!=null?A:null,i.spatialReference=d!=null?d:null,i.objectIdFieldName?(l&&sz(i.features,l,v,s,r,i.objectIdFieldName),_&&(i.exceededTransferLimit=_),r&&(i.hasM=r),s&&(i.hasZ=s),M&&(i.transform=M),i):(X0.error(new fe("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function VAe(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const l of i)q(l.geometry)&&S7(l.geometry,l.geometry,r,s,t),q(l.centroid)&&S7(l.centroid,l.centroid,r,s,t);return e.transform=null,e}function zAe(e,t){const{geometryType:i,features:r,hasM:s,hasZ:l}=t;if(!e)return t;for(let f=0;f<r.length;f++){const d=r[f],v=d.weakClone();v.geometry=new bn,qm(v.geometry,d.geometry,s,l,i,e),d.centroid&&(v.centroid=new bn,qm(v.centroid,d.centroid,s,l,"esriGeometryPoint",e)),r[f]=v}return t.transform=e,t}function qm(e,t,i,r,s,l,f=i,d=r){if($u(e),ae(t)||!t.coords.length)return null;const v=ZV[s],{coords:_,lengths:M}=t,T=On(i,r),A=On(i&&f,r&&d),k=c7(i,r,f,d);if(!M.length)return k(e.coords,_,0,0,h7(l,_[0]),p7(l,_[1])),$u(e,T,0),e;let F,D,z,H,J=0,Y=0,ie=Y;for(const re of M){if(re<v)continue;let ee=0;Y=ie,z=F=h7(l,_[J]),H=D=p7(l,_[J+1]),k(e.coords,_,Y,J,z,H),ee++,J+=T,Y+=A;for(let le=1;le<re;le++,J+=T)z=h7(l,_[J]),H=p7(l,_[J+1]),z===F&&H===D||(k(e.coords,_,Y,J,z-F,H-D),Y+=A,ee++,F=z,D=H);ee>=v&&(e.lengths.push(ee),ie=Y)}return Ia(e.coords,ie),e.coords.length?e:null}function eve(e,t,i,r,s,l,f=i,d=r){if($u(e),!t||!t.coords.length)return null;const v=ZV[s],{coords:_,lengths:M}=t,T=On(i,r),A=On(i&&f,r&&d),k=c7(i,r,f,d);if(!M.length)return k(e.coords,_,0,0,_[0],_[1]),$u(e,T,0),e;let F=0;const D=l*l;for(const z of M){if(z<v){F+=z*T;continue}const H=e.coords.length/A,J=F,Y=F+(z-1)*T;k(e.coords,_,e.coords.length,J,_[J],_[J+1]),x7(e.coords,_,T,D,k,J,Y),k(e.coords,_,e.coords.length,Y,_[Y],_[Y+1]);const ie=e.coords.length/A-H;ie>=v?e.lengths.push(ie):Ia(e.coords,H*A),F+=z*T}return e.coords.length?e:null}function tve(e,t,i,r){const s=e[t],l=e[t+1],f=e[i],d=e[i+1],v=e[r],_=e[r+1];let M=f,T=d,A=v-M,k=_-T;if(A!==0||k!==0){const F=((s-M)*A+(l-T)*k)/(A*A+k*k);F>1?(M=v,T=_):F>0&&(M+=A*F,T+=k*F)}return A=s-M,k=l-T,A*A+k*k}function x7(e,t,i,r,s,l,f){let d,v=r,_=0;for(let M=l+i;M<f;M+=i)d=tve(t,M,l,f),d>v&&(_=M,v=d);v>r&&(_-l>i&&x7(e,t,i,r,s,l,_),s(e,t,e.length,_,t[_],t[_+1]),f-_>i&&x7(e,t,i,r,s,_,f))}function GAe(e,t,i,r){if(ae(t)||!t.coords||!t.coords.length)return null;const s=On(i,r);let l=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;if(t&&t.coords){const _=t.coords;for(let M=0;M<_.length;M+=s){const T=_[M],A=_[M+1];l=Math.min(l,T),d=Math.max(d,T),f=Math.min(f,A),v=Math.max(v,A)}}return e[0]=l,e[1]=f,e[2]=d,e[3]=v,e}function S7(e,t,i,r,s){var D,z,H,J,Y,ie,re,ee;const{coords:l,lengths:f}=t,d=On(i,r);if(!l.length)return e!==t&&$u(e),e;X5(s);const{originPosition:v,scale:_,translate:M}=s,T=nve;T.originPosition=v;const A=T.scale;A[0]=(D=_[0])!=null?D:1,A[1]=-((z=_[1])!=null?z:1),A[2]=(H=_[2])!=null?H:1,A[3]=(J=_[3])!=null?J:1;const k=T.translate;if(k[0]=(Y=M[0])!=null?Y:0,k[1]=(ie=M[1])!=null?ie:0,k[2]=(re=M[2])!=null?re:0,k[3]=(ee=M[3])!=null?ee:0,!f.length){for(let le=0;le<d;++le)e.coords[le]=d7(T,l[le],le);return e!==t&&$u(e,d,0),e}let F=0;for(let le=0;le<f.length;le++){const me=f[le];e.lengths[le]=me;for(let Me=0;Me<d;++Me)e.coords[F+Me]=d7(T,l[F+Me],Me);let we=e.coords[F],_e=e.coords[F+1];F+=d;for(let Me=1;Me<me;Me++,F+=d){we+=l[F]*A[0],_e+=l[F+1]*A[1],e.coords[F]=we,e.coords[F+1]=_e;for(let Se=2;Se<d;++Se)e.coords[F+Se]=d7(T,l[F+Se],Se)}}return e!==t&&$u(e,l.length,f.length),e}function ive(e,t,i,r,s,l){if($u(e),e.lengths.push(...t.lengths),i===s&&r===l)for(let f=0;f<t.coords.length;f++)e.coords.push(t.coords[f]);else{const f=On(i,r),d=c7(i,r,s,l),v=t.coords;for(let _=0;_<v.length;_+=f)d(e.coords,v,e.coords.length,_,v[_],v[_+1])}return e}function rve(e,t,i,r){let s=0,l=e[r*t],f=e[r*(t+1)];for(let d=1;d<i;d++){const v=l+e[r*(t+d)],_=f+e[r*(t+d)+1],M=(v-l)*(_+f);l=v,f=_,s+=M}return .5*s}function qAe(e,t){const{coords:i,lengths:r}=e;let s=0,l=0;for(let f=0;f<r.length;f++){const d=r[f];l+=rve(i,s,d,t),s+=d}return Math.abs(l)}function UAe(e,t){if(ae(e))return null;const i=e.clone(),r=e.coords,s=e.lengths;let l=0;for(let f=0;f<s.length;f++){const d=s[f];let v=r[t*l],_=r[t*l+1];for(let M=1;M<d;M++){const T=v+r[t*(l+M)],A=_+r[t*(l+M)+1];i.coords[t*(l+M)]=T,i.coords[t*(l+M)+1]=A,v=T,_=A}l+=d}return i}function $u(e,t=0,i=0){Ia(e.lengths,i),Ia(e.coords,t)}function Ia(e,t=0){e.length!==t&&(e.length=t)}const nve={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var M7;let or=M7=class extends Ee{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new M7(ve({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};m([x({type:Boolean,json:{write:!0}})],or.prototype,"cacheHint",void 0),m([x({type:uo,json:{write:!0}})],or.prototype,"dynamicDataSource",void 0),m([x({type:String,json:{write:!0}})],or.prototype,"gdbVersion",void 0),m([x({type:Number,json:{write:!0}})],or.prototype,"geometryPrecision",void 0),m([x({type:Date})],or.prototype,"historicMoment",void 0),m([Xe("historicMoment")],or.prototype,"_writeHistoricMoment",null),m([x({type:Number,json:{write:!0}})],or.prototype,"maxAllowableOffset",void 0),m([x({type:[Number],json:{write:!0}})],or.prototype,"objectIds",void 0),m([x({type:[String],json:{write:!0}})],or.prototype,"orderByFields",void 0),m([x({type:[String],json:{write:!0}})],or.prototype,"outFields",void 0),m([x({type:At,json:{read:{source:"outSR"},write:{target:"outSR"}}})],or.prototype,"outSpatialReference",void 0),m([x({json:{write:!0}})],or.prototype,"relationshipId",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],or.prototype,"start",void 0),m([Xe("start"),Xe("num")],or.prototype,"writeStart",null),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],or.prototype,"num",void 0),m([x({json:{write:!0}})],or.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],or.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],or.prototype,"returnZ",void 0),m([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],or.prototype,"where",void 0),or=M7=m([X("esri.rest.support.RelationshipQuery")],or),or.from=Ai(or);const wd=or;var $7;let e1=$7=class extends Ee{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new $7({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};m([x({type:[String],json:{write:!0}})],e1.prototype,"groupByFields",void 0),m([x({type:Number,json:{write:!0}})],e1.prototype,"topCount",void 0),m([x({type:[String],json:{write:!0}})],e1.prototype,"orderByFields",void 0),e1=$7=m([X("esri.rest.support.TopFilter")],e1);const sve=e1;var I7;const lz=new bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),uz=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Zi=I7=class extends Ee{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new I7(ve({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};m([x({type:Boolean,json:{write:!0}})],Zi.prototype,"cacheHint",void 0),m([x({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Zi.prototype,"distance",void 0),m([x({types:au,json:{read:fn,write:!0}})],Zi.prototype,"geometry",void 0),m([x({type:Number,json:{write:!0}})],Zi.prototype,"geometryPrecision",void 0),m([x({type:Number,json:{write:!0}})],Zi.prototype,"maxAllowableOffset",void 0),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],Zi.prototype,"num",void 0),m([x({json:{write:!0}})],Zi.prototype,"objectIds",void 0),m([x({type:[String],json:{write:!0}})],Zi.prototype,"orderByFields",void 0),m([x({type:[String],json:{write:!0}})],Zi.prototype,"outFields",void 0),m([x({type:At,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Zi.prototype,"outSpatialReference",void 0),m([x({type:String,json:{write:!0}})],Zi.prototype,"resultType",void 0),m([x({json:{write:!0}})],Zi.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Zi.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Zi.prototype,"returnZ",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],Zi.prototype,"start",void 0),m([Xe("start"),Xe("num")],Zi.prototype,"writeStart",null),m([x({type:String,json:{read:{source:"spatialRel",reader:lz.read},write:{target:"spatialRel",writer:lz.write}}})],Zi.prototype,"spatialRelationship",void 0),m([x({type:Go,json:{write:!0}})],Zi.prototype,"timeExtent",void 0),m([x({type:sve,json:{write:!0}})],Zi.prototype,"topFilter",void 0),m([x({type:String,json:{read:uz.read,write:{writer:uz.write,overridePolicy(e){return{enabled:q(e)&&q(this.distance)&&this.distance>0}}}}})],Zi.prototype,"units",void 0),m([x({type:String,json:{write:!0}})],Zi.prototype,"where",void 0),Zi=I7=m([X("esri.rest.support.TopFeaturesQuery")],Zi),Zi.from=Ai(Zi);const _h=Zi,ove="esri.widgets.Feature.support.relatedFeatureUtils",cz=Pe.getLogger(ove),hz=new Map;function T7(e){if(!wu(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function ave(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function lve({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(s=>(`${s.relatedTableId}`===i&&s.id===e.id&&(r=s),!!r)),r}function uve(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function cve(e,t){const i=ave(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function hve(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i&&i.value;t.relatedFeatures=s?s.features:[];const l=r&&r.value;t.relatedStatsFeatures=l?l.features:[]}function pve(e,t,i,r){const s=new wd;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(s,r)}function dve(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function fve(e,t,i,r){const s=i.layerId.toString(),{layerInfo:l,relation:f,relatedFields:d,outStatistics:v,url:_,sourceSpatialReference:M}=t,T=lve({originRelationship:f,relationships:l.relationships,layerId:s});if(T.relationshipTableId&&T.keyFieldInRelationshipTable){const k=(await pve(e,T,i,r))[e.attributes[i.objectIdField]];if(!k)return null;const F=k.features.map(D=>D.attributes[l.objectIdField]);if((v==null?void 0:v.length)>0&&l.supportsStatistics){const D=new Hn;D.where=dve(l.objectIdField,F,1e3),D.outFields=d,D.outStatistics=v,D.sourceSpatialReference=M;const z={features:Promise.resolve(k),statsFeatures:u7(_,D)};return Ms(z)}}const A=T==null?void 0:T.keyField;if(A){const k=tS(bve(l.fields,A)),F=uve(e.attributes,f.keyField),D=k?`${A}=${F}`:`${A}='${F}'`,z=u7(_,new Hn({where:D,outFields:t.relatedFields,sourceSpatialReference:M}),r),H=t.outStatistics&&t.outStatistics.length>0&&l.supportsStatistics?u7(_,new Hn({where:D,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:M}),r):null,J={features:z};return H&&(J.statsFeatures=H),Ms(J)}return null}function yve(e,t){return li(e,{query:{f:"json"},signal:t&&t.signal})}function gve({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,l)=>{const{relation:f}=s;if(!f){const T=new fe("relation-required","A relation is required on a layer to retrieve related records.");throw cz.error(T),T}const{relatedTableId:d}=f;if(typeof d!="number"){const T=new fe("A related table ID is required on a layer to retrieve related records.");throw cz.error(T),T}const v=`${t.url}/${d}`,_=hz.get(v),M=_||yve(v,i);_||hz.set(v,M),r[l]=M}),Ms(r)}function mve({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((l,f)=>{l.layerInfo&&(s[f]=fve(e,l,i,r))}),Ms(s)}function vve({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new JV({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function bve(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const pz={chartAnimation:!0};let nn=class extends ot{constructor(e){super(e),this.abilities=te({},pz),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return te(te({},pz),e)}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:s,layer:l}=this;return t==null?void 0:t.map(f=>{const d=f==null?void 0:f.clone();if(!d)return null;if(d.title=hd({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:d.title}),d.caption=hd({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:d.caption}),d.altText=hd({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:d.altText}),d.type==="image"){const{value:v}=d;return this._setImageValue({value:v,formattedAttributes:i,layer:l}),d.value.sourceURL?d:void 0}if(d.type==="pie-chart"||d.type==="line-chart"||d.type==="column-chart"||d.type==="bar-chart"){const{value:v}=d;return this._setChartValue({value:v,chartType:d.type,attributes:e,formattedAttributes:i,layer:l,expressionAttributes:r}),d}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:s}=e,{linkURL:l,sourceURL:f}=i;if(f){const d=M$(f,s);i.sourceURL=S$({formattedAttributes:r,template:d,fieldInfoMap:t})}if(l){const d=M$(l,s);i.linkURL=S$({formattedAttributes:r,template:d,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:s,layer:l,expressionAttributes:f}=e,{popupTemplate:d,relatedInfos:v}=this,{fields:_,normalizeField:M}=t;if(t.fields=J1e(_,l),M&&(t.normalizeField=$m(M,l)),!_.some(A=>!!(r[A]!=null||wu(A)&&v.size)))return;const T=d==null?void 0:d.fieldInfos;_.forEach(A=>{if(wu(A))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:T,fieldName:A,formattedAttributes:r,chartType:s,value:t})]);const k=this._getChartOption({value:t,attributes:i,chartType:s,formattedAttributes:r,expressionAttributes:f,fieldName:A,fieldInfos:T});t.series.push(k)})}_getRelatedChartInfos(e){var F;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:s,value:l}=e,f=[],d=T7(i),{layerId:v,fieldName:_}=d,M=(F=this.relatedInfos)==null?void 0:F.get(v.toString());if(!M)return f;const{relatedFeatures:T,relation:A}=M;if(!A||!T)return f;const{cardinality:k}=A;return T.forEach(D=>{const{attributes:z}=D;z&&Object.keys(z).forEach(H=>{H===_&&f.push(this._getChartOption({value:l,attributes:z,formattedAttributes:r,fieldName:i,chartType:s,relatedFieldName:H,fieldInfos:t}))})}),k==="one-to-many"||k==="many-to-many"?f:[f[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var ie,re,ee,le,me,we;const{value:t,attributes:i,formattedAttributes:r,expressionAttributes:s,fieldName:l,relatedFieldName:f,fieldInfos:d,chartType:v}=e,{layer:_,fieldInfoMap:M}=this,{normalizeField:T,tooltipField:A}=t,k=T?wu(T)?i[T7(T).fieldName]:i[T]:null,F=_$(l)&&s&&s[l]!==void 0?s[l]:f&&i[f]!==void 0?i[f]:i[l]!==void 0?i[l]:r[l],D=new wR({fieldName:l,value:F===void 0?null:F&&k?F/k:F});if(wu(l)){const _e=M.get(l.toLowerCase()),Me=M.get(A.toLowerCase()),Se=(ie=_e==null?void 0:_e.fieldName)!=null?ie:l,He=(me=(le=(ee=r[(re=Me==null?void 0:Me.fieldName)!=null?re:A])!=null?ee:_e==null?void 0:_e.label)!=null?le:_e==null?void 0:_e.fieldName)!=null?me:f,We=r[Se];return D.tooltip=this._getTooltip({label:He,value:We,chartType:v}),D}const z=ND(d,l),H=$m(l,_),J=A&&r[A]!==void 0?r[A]:RD(z||new _g({fieldName:H}),(we=this.popupTemplate)==null?void 0:we.expressionInfos),Y=r[H];return D.tooltip=this._getTooltip({label:J,value:Y,chartType:v}),D}};m([x()],nn.prototype,"abilities",void 0),m([ri("abilities")],nn.prototype,"castAbilities",null),m([x()],nn.prototype,"activeMediaInfoIndex",void 0),m([x({readOnly:!0})],nn.prototype,"activeMediaInfo",null),m([x()],nn.prototype,"attributes",void 0),m([x()],nn.prototype,"description",void 0),m([x()],nn.prototype,"fieldInfoMap",void 0),m([x()],nn.prototype,"formattedAttributes",void 0),m([x()],nn.prototype,"expressionAttributes",void 0),m([x({readOnly:!0})],nn.prototype,"formattedMediaInfos",null),m([x()],nn.prototype,"layer",void 0),m([x({readOnly:!0})],nn.prototype,"formattedMediaInfoCount",null),m([x()],nn.prototype,"mediaInfos",void 0),m([x()],nn.prototype,"popupTemplate",void 0),m([x()],nn.prototype,"relatedInfos",void 0),m([x()],nn.prototype,"title",void 0),nn=m([X("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],nn);const _d=nn;var dz=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],wve=[].concat(dz.slice(30,39),dz.slice(28,30).reverse()),_ve=[{name:"default",colors:wve},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const fz="en-us",E7=new Map([["ar",()=>import("./ar.a99a7f2c.js").then(e=>e.a)],["bg-bg",()=>import("./bg_BG.254109a1.js").then(e=>e.b)],["bs-ba",()=>import("./bs_BA.0dbd1022.js").then(e=>e.b)],["ca-es",()=>import("./ca_ES.a23f7bed.js").then(e=>e.c)],["cs-cz",()=>import("./cs_CZ.2163258e.js").then(e=>e.c)],["da-dk",()=>import("./da_DK.85e7aef2.js").then(e=>e.d)],["de-de",()=>import("./de_DE.5e588163.js").then(e=>e.d)],["de-ch",()=>import("./de_CH.a426d3a2.js").then(e=>e.d)],["el-gr",()=>import("./el_GR.04beb188.js").then(e=>e.e)],["en-us",()=>import("./en_US.0149536e.js").then(e=>e.e)],["en-ca",()=>import("./en_CA.e2cf0988.js").then(e=>e.e)],["es-es",()=>import("./es_ES.c4b41fe0.js").then(e=>e.e)],["et-ee",()=>import("./et_EE.5c34385c.js").then(e=>e.e)],["fi-fi",()=>import("./fi_FI.6a2cd0e0.js").then(e=>e.f)],["fr-fr",()=>import("./fr_FR.224ceb99.js").then(e=>e.f)],["he-il",()=>import("./he_IL.eb1bc21e.js").then(e=>e.h)],["hr-hr",()=>import("./hr_HR.47aacad7.js").then(e=>e.h)],["hu-hu",()=>import("./hu_HU.495f802f.js").then(e=>e.h)],["id-id",()=>import("./id_ID.f639e177.js").then(e=>e.i)],["it-it",()=>import("./it_IT.8618f452.js").then(e=>e.i)],["ja-jp",()=>import("./ja_JP.a5c48a74.js").then(e=>e.j)],["ko-kr",()=>import("./ko_KR.49618556.js").then(e=>e.k)],["lt-lt",()=>import("./lt_LT.395e82a5.js").then(e=>e.l)],["lv-lv",()=>import("./lv_LV.93c386f7.js").then(e=>e.l)],["nb-no",()=>import("./nb_NO.9e407cce.js").then(e=>e.n)],["nl-nl",()=>import("./nl_NL.521d314e.js").then(e=>e.n)],["pl-pl",()=>import("./pl_PL.9ebc8dd3.js").then(e=>e.p)],["pt-br",()=>import("./pt_BR.008da1cf.js").then(e=>e.p)],["pt-pt",()=>import("./pt_PT.6ce9d123.js").then(e=>e.p)],["ro-ro",()=>import("./ro_RO.26574a4d.js").then(e=>e.r)],["ru-ru",()=>import("./ru_RU.2ea93f38.js").then(e=>e.r)],["sk-sk",()=>import("./sk_SK.487e0c2b.js").then(e=>e.s)],["sl-sl",()=>import("./sl_SL.dac5adea.js").then(e=>e.s)],["sr-rs",()=>import("./sr_RS.6d93e274.js").then(e=>e.s)],["sv-se",()=>import("./sv_SE.d95fe632.js").then(e=>e.s)],["th-th",()=>import("./th_TH.09a49d38.js").then(e=>e.t)],["tr-tr",()=>import("./tr_TR.684edd46.js").then(e=>e.t)],["uk-ua",()=>import("./uk_UA.9ef11d9a.js").then(e=>e.u)],["vi-vn",()=>import("./vi_VN.8324d9dd.js").then(e=>e.v)],["zh-cn",()=>import("./zh_Hans.ba65a325.js").then(e=>e.z)],["zh-hk",()=>import("./zh_Hant.71023e0c.js").then(e=>e.z)],["zh-tw",()=>import("./zh_Hant.71023e0c.js").then(e=>e.z)]]);function xve(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of E7.keys())if(r.startsWith(t)){i=r;break}return i}function Sve(e){return e?E7.has(e.toLowerCase())?e.toLowerCase():xve(e)||fz:fz}let t1,Um;async function Mve(e=oa()){if(e=Sve(e),t1&&e===Um)return t1;t1=import("./index.fc0235cc.js").then(t=>t.i),Um=e;try{const[t,i]=await Promise.all([t1,E7.get(Um)()]);Um===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return t1=null,Um=null,null}return t1}function $ve(e,t="default"){const i=_ve.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const vr={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},C7=.05,A7=.95,P7=15,Iu="color",xh="tooltip",Bm="value",yz="default-line-value";let Ns=class extends Gn{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new _d,this.messages=null,this._getChartDependencies=async i=>{const r=await Mve(),{destroyed:s,viewModel:l}=this;if(s||!l||!i)return;const{activeMediaInfo:f}=l,d=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:f,chartsModule:r,colorMap:d})}}initialize(){this._featureElementInfo=new U3,this.addHandles([Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),fi),Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),fi)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return ge("div",{bind:this,class:vr.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?ge("div",{key:"media-element-container",class:vr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:l,altText:f,title:d,type:v}=e,{sourceURL:_,linkURL:M}=s,T=kD(M)?"_blank":"_self",A=T==="_blank"?"noreferrer":"",k=l?t:null,F=k?k.timestamp:0,D=k?k.sourceURL:_,z=ge("img",{alt:f||d,key:`media-${v}-${i}-${r}-${F}`,src:D});return(M?ge("a",{title:d,href:M,rel:A,target:T},z):null)||z}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return ge("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:vr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?ge("div",{key:"media-title",class:vr.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?ge("div",{key:"media-caption",class:vr.mediaItemCaption,innerHTML:e.caption}):null;return ge("div",{key:"media-container",class:vr.mediaItemContainer},ge("div",{key:"media-item-container",class:vr.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(vr.mediaButton,vr.mediaPrevious):this.classes(vr.mediaButton,vr.mediaNext),s=t?this.classes(vr.mediaIcon,vr.mediaPreviousIconLTR,vr.iconLeftTriangleArrow):this.classes(vr.mediaIcon,vr.mediaNextIconLTR,vr.iconRightTriangleArrow),l=t?this.classes(vr.mediaIcon,vr.mediaPreviousIconRTL,vr.iconRightTriangleArrow):this.classes(vr.mediaIcon,vr.mediaNextIconRTL,vr.iconLeftTriangleArrow),f=t?"media-previous":"media-next",d=t?this._previous:this._next;return ge("button",{type:"button",key:f,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:d},ge("span",{"aria-hidden":"true",class:s}),ge("span",{"aria-hidden":"true",class:l}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var f,d;const{am4core:t}=e,i=new Map,r=(d=(f=this.viewModel)==null?void 0:f.layer)==null?void 0:d.renderer,s="default";if(!r)return i;const l=await Xge(r);return l.delete(s),Array.from(l.values()).every(v=>(v==null?void 0:v.length)===1)&&(i.set(yz,t.color({r:50,g:50,b:50,a:1})),Array.from(l.keys()).forEach(v=>{v&&i.set(v,t.color(l.get(v)[0].toCss(!0)))})),i}_handleMediaKeyup(e){const t=gp(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:l}=e,{value:f,type:d}=s,{am4core:v}=i,_=$ve(v);function M(k){k instanceof v.ColorSet&&_&&(k.list=_)}H3()&&v.useTheme(i.am4themes_dark);const T=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!T.matches?v.useTheme(i.am4themes_animated):v.unuseTheme(i.am4themes_animated),v.useTheme(M);const A=d==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),A.data=f.series.map(k=>({[xh]:k.tooltip,[Bm]:k.value,[Iu]:l.get(k.fieldName)})).filter(k=>d!=="pie-chart"||k.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,l=r.create(t,s.PieChart);l.rtl=$l(this.container);const f=l.series.push(new s.PieSeries);return f.labels.template.disabled=!0,f.ticks.template.disabled=!0,f.dataFields.value=Bm,f.dataFields.category=xh,this._customizeChartTooltip(f.tooltip,r),f.slices.template.propertyFields.fill=Iu,f.slices.template.propertyFields.stroke=Iu,l}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:l,am4charts:f}=i,d=e.xAxes.push(new f.CategoryAxis);d.dataFields.category=xh,d.renderer.labels.template.disabled=!0,this._customizeChartTooltip(d.tooltip,l),d.tooltip.events.on("sizechanged",()=>{d.tooltip.dy=-d.tooltip.contentHeight});const v=e.yAxes.push(new f.ValueAxis),_=v.renderer.labels.template;v.renderer.minLabelPosition=C7,v.renderer.maxLabelPosition=A7,v.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(v.tooltip,l),_.wrap=!0;const M=e.series.push(new f.ColumnSeries);M.dataFields.valueY=Bm,M.dataFields.categoryX=xh,M.columns.template.propertyFields.fill=Iu,M.columns.template.propertyFields.stroke=Iu,e.cursor=new f.XYCursor,s.series.length>P7&&(e.scrollbarX=new l.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:l,am4charts:f}=i,d=e.yAxes.push(new f.CategoryAxis);d.dataFields.category=xh,d.renderer.inversed=!0,d.renderer.labels.template.disabled=!0,this._customizeChartTooltip(d.tooltip,l),d.tooltip.events.on("sizechanged",()=>{d.tooltip.dx=d.tooltip.contentWidth});const v=e.xAxes.push(new f.ValueAxis),_=v.renderer.labels.template;v.renderer.minLabelPosition=C7,v.renderer.maxLabelPosition=A7,v.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(v.tooltip,l),_.wrap=!0;const M=e.series.push(new f.ColumnSeries);M.dataFields.valueX=Bm,M.dataFields.categoryY=xh,M.columns.template.propertyFields.fill=Iu,M.columns.template.propertyFields.stroke=Iu,e.cursor=new f.XYCursor,s.series.length>P7&&(e.scrollbarY=new l.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:l}=r,{am4core:f,am4charts:d}=i,v=e.xAxes.push(new d.CategoryAxis);v.dataFields.category=xh,v.renderer.labels.template.disabled=!0,this._customizeChartTooltip(v.tooltip,f),v.tooltip.events.on("sizechanged",()=>{v.tooltip.dy=-v.tooltip.contentHeight});const _=e.yAxes.push(new d.ValueAxis),M=_.renderer.labels.template;_.renderer.minLabelPosition=C7,_.renderer.maxLabelPosition=A7,_.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(_.tooltip,f),M.wrap=!0;const T=e.series.push(new d.LineSeries);T.dataFields.categoryX=xh,T.dataFields.valueY=Bm,T.strokeWidth=1;const A=s.get(yz);A&&(T.stroke=A);const k=T.bullets.push(new d.CircleBullet);k.propertyFields.fill=Iu,k.propertyFields.stroke=Iu,e.cursor=new d.XYCursor,l.series.length>P7&&(e.scrollbarX=new f.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:l,am4charts:f}=i,d=l.create(t,f.XYChart);return d.rtl=$l(this.container),s==="column-chart"&&this._createColumnChart(d,e),s==="bar-chart"&&this._createBarChart(d,e),s==="line-chart"&&this._createLineChart(d,e),d}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,s=""]=e.split("#");return`${r}${i}timestamp=${t}${s?"#":""}${s}`}};m([x()],Ns.prototype,"attributes",null),m([x()],Ns.prototype,"activeMediaInfoIndex",null),m([x()],Ns.prototype,"description",null),m([x()],Ns.prototype,"fieldInfoMap",null),m([x()],Ns.prototype,"layer",null),m([x()],Ns.prototype,"mediaInfos",null),m([x()],Ns.prototype,"popupTemplate",null),m([x()],Ns.prototype,"relatedInfos",null),m([x()],Ns.prototype,"title",null),m([x({type:_d})],Ns.prototype,"viewModel",void 0),m([x(),qn("esri/widgets/Feature/t9n/Feature")],Ns.prototype,"messages",void 0),Ns=m([X("esri.widgets.Feature.FeatureMedia")],Ns);const gz=Ns;var O7;let Hm=O7=class extends Ee{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new O7({minValue:this.minValue,maxValue:this.maxValue})}};m([x({type:Number,json:{write:!0}})],Hm.prototype,"minValue",void 0),m([x({type:Number,json:{write:!0}})],Hm.prototype,"maxValue",void 0),Hm=O7=m([X("esri.renderer.support.AuthoringInfoClassBreakInfo")],Hm);var k7;let Sh=k7=class extends Ee{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new k7({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ve(this.classBreakInfos)})}};m([x({type:String,json:{write:!0}})],Sh.prototype,"field",void 0),m([x({type:String,json:{write:!0}})],Sh.prototype,"normalizationField",void 0),m([x({type:String,json:{write:!0}})],Sh.prototype,"label",void 0),m([x({type:[Hm],json:{write:!0}})],Sh.prototype,"classBreakInfos",void 0),Sh=k7=m([X("esri.renderers.support.AuthoringInfoFieldInfo")],Sh);var R7;const l_=new bt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),u_=new bt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),mz={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},vz=["high-to-low","above-and-below","centered-on","extremes"],bz=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],wz=["seconds","minutes","hours","days","months","years"];let js=R7=class extends Ee{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new R7({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};m([x({types:mz,json:{write:!0}})],js.prototype,"endTime",void 0),m([ri("endTime")],js.prototype,"castEndTime",null),m([x({type:String,json:{write:!0}})],js.prototype,"field",void 0),m([x({type:Number,json:{write:!0}})],js.prototype,"maxSliderValue",void 0),m([x({type:Number,json:{write:!0}})],js.prototype,"minSliderValue",void 0),m([x({types:mz,json:{write:!0}})],js.prototype,"startTime",void 0),m([ri("startTime")],js.prototype,"castStartTime",null),m([x({type:l_.apiValues,value:null,json:{type:l_.jsonValues,read:l_.read,write:l_.write}})],js.prototype,"style",null),m([x({type:bz,value:null,json:{type:bz,origins:{"web-scene":{type:vz,write:{writer:(e,t)=>{vz.includes(e)&&(t.theme=e)}}}},write:!0}})],js.prototype,"theme",null),m([x({type:u_.apiValues,json:{type:u_.jsonValues,read:u_.read,write:u_.write}})],js.prototype,"type",void 0),m([x({type:wz,json:{type:wz,write:!0}})],js.prototype,"units",void 0),js=R7=m([X("esri.renderers.support.AuthoringInfoVisualVariable")],js);const Ive=js;let c_=class extends Ee{constructor(e){super(e),this.type=null}};m([x({readOnly:!0,json:{read:!1,write:!0}})],c_.prototype,"type",void 0),c_=m([X("esri.rest.support.ColorRamp")],c_);const F7=c_;var L7;let xd=L7=class extends F7{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new L7({fromColor:ve(this.fromColor),toColor:ve(this.toColor),algorithm:this.algorithm})}};m([wt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],xd.prototype,"algorithm",void 0),m([x({type:mt,json:{type:[hi],write:!0}})],xd.prototype,"fromColor",void 0),m([x({type:mt,json:{type:[hi],write:!0}})],xd.prototype,"toColor",void 0),m([x({type:["algorithmic"]})],xd.prototype,"type",void 0),xd=L7=m([X("esri.rest.support.AlgorithmicColorRamp")],xd);const N7=xd;var j7;let Wm=j7=class extends F7{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new j7({colorRamps:ve(this.colorRamps)})}};m([x({type:[N7],json:{write:!0}})],Wm.prototype,"colorRamps",void 0),m([x({type:["multipart"]})],Wm.prototype,"type",void 0),Wm=j7=m([X("esri.rest.support.MultipartColorRamp")],Wm);const _z=Wm,xz={key:"type",base:F7,typeMap:{algorithmic:N7,multipart:_z}};function Sz(e){return e&&e.type?e.type==="algorithmic"?N7.fromJSON(e):e.type==="multipart"?_z.fromJSON(e):null:null}var D7;const Sd=new bt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),h_=new bt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Mz=new bt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),$z=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Tve=["high-to-low","above-and-below","above","below","90-10"],Eve=["flow-line","wave-front"],Cve=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let br=D7=class extends Ee{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Sz(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new D7({classificationMethod:this.classificationMethod,colorRamp:ve(this.colorRamp),fadeRatio:ve(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:ve(this.field1),field2:ve(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};m([x({type:Sd.apiValues,value:null,json:{type:Sd.jsonValues,read:Sd.read,write:Sd.write,origins:{"web-document":{default:"manual",type:Sd.jsonValues,read:Sd.read,write:Sd.write}}}})],br.prototype,"classificationMethod",null),m([x({types:xz,json:{write:!0}})],br.prototype,"colorRamp",void 0),m([Be("colorRamp")],br.prototype,"readColorRamp",null),m([x({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"fadeRatio",void 0),m([x({type:[String],value:null,json:{write:!0}})],br.prototype,"fields",null),m([x({type:Sh,value:null,json:{write:!0}})],br.prototype,"field1",null),m([x({type:Sh,value:null,json:{write:!0}})],br.prototype,"field2",null),m([x({type:Eve,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"flowTheme",null),m([x({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],br.prototype,"focus",null),m([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],br.prototype,"isAutoGenerated",void 0),m([x({type:Number,value:null,json:{type:hi,write:!0}})],br.prototype,"numClasses",null),m([x({type:$z,json:{type:$z,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],br.prototype,"lengthUnit",void 0),m([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"maxSliderValue",void 0),m([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"minSliderValue",void 0),m([x({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"statistics",null),m([x({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],br.prototype,"standardDeviationInterval",null),m([x({type:h_.apiValues,value:null,json:{type:h_.jsonValues,read:h_.read,write:h_.write,origins:{"web-scene":{type:Mz.jsonValues,write:{writer:Mz.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],br.prototype,"type",null),m([x({type:[Ive],json:{write:!0}})],br.prototype,"visualVariables",void 0),m([x({type:Cve,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"univariateSymbolStyle",null),m([x({type:Tve,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"univariateTheme",null),br=D7=m([X("esri.renderers.support.AuthoringInfo")],br);const V7=br,z7=new bt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Jm=class extends Ee{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};m([x({type:V7,json:{write:!0}})],Jm.prototype,"authoringInfo",void 0),m([x({type:z7.apiValues,readOnly:!0,json:{type:z7.jsonValues,read:!1,write:{writer:z7.write,ignoreOrigin:!0}}})],Jm.prototype,"type",void 0),Jm=m([X("esri.renderers.Renderer")],Jm);const Tu=Jm;function Ave(e){var t,i,r;return(r=(i=(t=e.match(Pve))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))!=null?r:null}const Pve=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var G7;let i1=G7=class extends Ee{constructor(){super(...arguments),this.title=null}clone(){return new G7({title:this.title})}};m([x({type:String,json:{write:!0}})],i1.prototype,"title",void 0),i1=G7=m([X("esri.renderers.support.LegendOptions")],i1);var q7;let p_=q7=class extends i1{constructor(){super(...arguments),this.showLegend=null}clone(){return new q7({title:this.title,showLegend:this.showLegend})}};m([x({type:Boolean,json:{write:!0}})],p_.prototype,"showLegend",void 0),p_=q7=m([X("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p_);const Iz=p_,U7=new bt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ta=class extends Ee{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Pe.getLogger(this.declaredClass).error(".field: field must be a string value"),null):qy(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};m([x()],Ta.prototype,"index",void 0),m([x({type:U7.apiValues,readOnly:!0,json:{read:U7.read,write:U7.write}})],Ta.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Ta.prototype,"field",void 0),m([ri("field")],Ta.prototype,"castField",null),m([x({type:String,json:{write:!0}})],Ta.prototype,"valueExpression",void 0),m([x({type:String,json:{write:!0}})],Ta.prototype,"valueExpressionTitle",void 0),m([x({readOnly:!0})],Ta.prototype,"arcadeRequired",null),m([x({type:Iz,json:{write:!0}})],Ta.prototype,"legendOptions",void 0),Ta=m([X("esri.renderers.visualVariables.VisualVariable")],Ta);const Zm=Ta;var B7;let Md=B7=class extends Zm{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new B7({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([x({readOnly:!0})],Md.prototype,"cache",null),m([x({type:["color"],json:{type:["colorInfo"]}})],Md.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Md.prototype,"normalizationField",void 0),m([x({type:[Nye],json:{write:!0}})],Md.prototype,"stops",null),Md=B7=m([X("esri.renderers.visualVariables.ColorVariable")],Md);const Tz=Md;var H7;let Mh=H7=class extends Ee{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return kg(t.transparency)}writeOpacity(e,t,i){t[i]=S2(e)}clone(){return new H7({label:this.label,opacity:this.opacity,value:this.value})}};m([x({type:String,json:{write:!0}})],Mh.prototype,"label",void 0),m([x({type:Number,json:{type:hi,write:{target:"transparency"}}})],Mh.prototype,"opacity",void 0),m([Be("opacity",["transparency"])],Mh.prototype,"readOpacity",null),m([Xe("opacity")],Mh.prototype,"writeOpacity",null),m([x({type:Number,json:{write:!0}})],Mh.prototype,"value",void 0),Mh=H7=m([X("esri.renderers.visualVariables.support.OpacityStop")],Mh);const Ove=Mh;var W7;let $d=W7=class extends Zm{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new W7({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([x({readOnly:!0})],$d.prototype,"cache",null),m([x({type:["opacity"],json:{type:["transparencyInfo"]}})],$d.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],$d.prototype,"normalizationField",void 0),m([x({type:[Ove],json:{write:!0}})],$d.prototype,"stops",null),$d=W7=m([X("esri.renderers.visualVariables.OpacityVariable")],$d);const Ez=$d;var J7;let Eu=J7=class extends Zm{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new fe("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new J7({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};m([x({readOnly:!0})],Eu.prototype,"cache",null),m([x({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Eu.prototype,"axis",void 0),m([x({type:["rotation"],json:{type:["rotationInfo"]}})],Eu.prototype,"type",void 0),m([x({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Eu.prototype,"rotationType",void 0),m([x({type:String,json:{write:!0}})],Eu.prototype,"valueExpressionTitle",void 0),m([Xe("web-scene","valueExpressionTitle")],Eu.prototype,"writeValueExpressionTitleWebScene",null),Eu=J7=m([X("esri.renderers.visualVariables.RotationVariable")],Eu);const Cz=Eu;var Z7;let r1=Z7=class extends Ee{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new Z7({label:this.label,size:this.size,value:this.value})}};m([x({type:String,json:{write:!0}})],r1.prototype,"label",void 0),m([x({type:Number,cast:di,json:{write:!0}})],r1.prototype,"size",void 0),m([x({type:Number,json:{write:!0}})],r1.prototype,"value",void 0),r1=Z7=m([X("esri.renderers.visualVariables.support.SizeStop")],r1);const n1=r1;var K7;let d_=K7=class extends Iz{constructor(){super(...arguments),this.customValues=null}clone(){return new K7({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};m([x({type:[Number],json:{write:!0}})],d_.prototype,"customValues",void 0),d_=K7=m([X("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],d_);const kve=d_;var Cu,sn;function $h(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Km(e){return e!=null&&!isNaN(e)&&isFinite(e)}function Az(e){return e.valueExpression?Cu.Expression:e.field&&typeof e.field=="string"?Cu.Field:Cu.Unknown}function Rve(e,t){const i=t||Az(e),r=e.valueUnit||"unknown";return i===Cu.Unknown?sn.Constant:e.stops?sn.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?sn.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?sn.Proportional:sn.Additive:sn.Identity:sn.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Cu||(Cu={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(sn||(sn={}));const f_={inches:vi(1,"meters","inches"),feet:vi(1,"meters","feet"),"us-feet":vi(1,"meters","us-feet"),yards:vi(1,"meters","yards"),miles:vi(1,"meters","miles"),"nautical-miles":vi(1,"meters","nautical-miles"),millimeters:vi(1,"meters","millimeters"),centimeters:vi(1,"meters","centimeters"),decimeters:vi(1,"meters","decimeters"),meters:vi(1,"meters","meters"),kilometers:vi(1,"meters","kilometers"),"decimal-degrees":1/yN(1,"meters",Bi.radius)},Ih=Pe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Pz=new Dr,y_=Math.PI,Oz=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function kz(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(F=>F.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Ih.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof t=="number",l=s?null:t,f=l&&l.attributes;let d=s?t:null;const v=r.field,{ipData:_,hasExpression:M}=r.cache;let T=r.cache.compiledFunc;if(!v&&!M){const F=r.stops;return F&&F[0]&&F[0].color}if(typeof d!="number")if(M){if(ae(i)||ae(i.arcade))return void Ih.error("Use of arcade expressions requires an arcade context");const F={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,z=D.getViewInfo(F),H=D.createExecContext(l,z);if(!T){const J=D.createSyntaxTree(r.valueExpression);T=D.createFunction(J),r.cache.compiledFunc=T}d=D.executeFunction(T,H)}else f&&(d=f[v]);const A=r.normalizationField,k=f!=null&&A!=null?parseFloat(f[A]):void 0;if(d!=null&&(!A||s||!isNaN(k)&&k!==0)){isNaN(k)||s||(d/=k);const F=Y7(d,_);if(F){const D=F[0],z=F[1],H=D===z?r.stops[D].color:mt.blendColors(r.stops[D].color,r.stops[z].color,F[2],q(i)?i.color:void 0);return new mt(H)}}}function Rz(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(F=>F.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Ih.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof t=="number",l=s?null:t,f=l&&l.attributes;let d=s?t:null;const v=r.field,{ipData:_,hasExpression:M}=r.cache;let T=r.cache.compiledFunc;if(!v&&!M){const F=r.stops;return F&&F[0]&&F[0].opacity}if(typeof d!="number")if(M){if(ae(i)||ae(i.arcade))return void Ih.error("Use of arcade expressions requires an arcade context");const F={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,z=D.getViewInfo(F),H=D.createExecContext(l,z);if(!T){const J=D.createSyntaxTree(r.valueExpression);T=D.createFunction(J),r.cache.compiledFunc=T}d=D.executeFunction(T,H)}else f&&(d=f[v]);const A=r.normalizationField,k=f!=null&&A!=null?parseFloat(f[A]):void 0;if(d!=null&&(!A||s||!isNaN(k)&&k!==0)){isNaN(k)||s||(d/=k);const F=Y7(d,_);if(F){const D=F[0],z=F[1];if(D===z)return r.stops[D].opacity;{const H=r.stops[D].opacity;return H+(r.stops[z].opacity-H)*F[2]}}}}function Fz(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(k=>k.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Ih.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",l=s==="heading"&&r.rotationType==="arithmetic"?90:0,f=s==="heading"&&r.rotationType==="arithmetic"?-1:1,d=typeof t=="number"?null:t,v=d&&d.attributes,_=r.field,{hasExpression:M}=r.cache;let T=r.cache.compiledFunc,A=0;if(!_&&!M)return A;if(M){if(ae(i)||ae(i.arcade))return void Ih.error("Use of arcade expressions requires an arcade context");const k={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,D=F.getViewInfo(k),z=F.createExecContext(d,D);if(!T){const H=F.createSyntaxTree(r.valueExpression);T=F.createFunction(H),r.cache.compiledFunc=T}A=F.executeFunction(T,z)}else v&&(A=v[_]||0);return A=typeof A!="number"||isNaN(A)?null:l+f*A,A}function Fve(e,t,i){const r=typeof t=="number",s=r?null:t,l=s&&s.attributes;let f=r?t:null;const{isScaleDriven:d}=e.cache;let v=e.cache.compiledFunc;if(d){const M=q(i)?i.scale:void 0,T=q(i)?i.view:void 0;f=M==null||T==="3d"?Lve(e):M}else if(!r)switch(e.inputValueType){case Cu.Expression:{if(ae(i)||ae(i.arcade))return void Ih.error("Use of arcade expressions requires an arcade context");const M={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},T=i.arcade.arcadeUtils,A=T.getViewInfo(M),k=T.createExecContext(s,A);if(!v){const F=T.createSyntaxTree(e.valueExpression);v=T.createFunction(F),e.cache.compiledFunc=v}f=T.executeFunction(v,k);break}case Cu.Field:l&&(f=l[e.field]);break;case Cu.Unknown:f=null}if(!Km(f))return null;if(r||!e.normalizationField)return f;const _=l?parseFloat(l[e.normalizationField]):null;return Km(_)&&_!==0?f/_:null}function Lve(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function g_(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(l=>l.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Ih.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=Nz(Fve(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Ds(e,t,i){return e==null?null:$h(e)?g_(e,t,i):Km(e)?e:null}function Lz(e,t,i){return Km(i)&&e>i?i:Km(t)&&e<t?t:e}function Nve(e,t,i,r){var s;return e+((s=Ds(t.minSize,i,r)||t.minDataValue)!=null?s:0)}function jve(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=e.minSize),Ds(s,t,i)}function Dve(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),l=Ds(t.minSize,i,r),f=Ds(t.maxSize,i,r),d=q(r)?r.shape:void 0;if(e<=t.minDataValue)return l;if(e>=t.maxDataValue)return f;if(l==null||f==null)return null;if(t.scaleBy==="area"&&d){const v=d==="circle",_=v?y_*(l/2)**2:l*l,M=_+s*((v?y_*(f/2)**2:f*f)-_);return v?2*Math.sqrt(M/y_):Math.sqrt(M)}return l+s*(f-l)}function Vve(e,t,i,r){const s=q(r)?r.shape:void 0,l=e/t.minDataValue,f=Ds(t.minSize,i,r),d=Ds(t.maxSize,i,r);let v=null;return v=s==="circle"?2*Math.sqrt(l*(f/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(l*f**2):l*f,Lz(v,f,d)}function zve(e,t,i,r,s){var v,_,M;const[l,f,d]=Y7(e,s);if(l===f)return Ds((v=t.stops)==null?void 0:v[l].size,i,r);{const T=Ds((_=t.stops)==null?void 0:_[l].size,i,r);return T+(Ds((M=t.stops)==null?void 0:M[f].size,i,r)-T)*d}}function Gve(e,t,i,r){const s=(q(r)&&r.resolution?r.resolution:1)*f_[t.valueUnit],l=Ds(t.minSize,i,r),f=Ds(t.maxSize,i,r),{valueRepresentation:d}=t;let v=null;return v=d==="area"?2*Math.sqrt(e/y_)/s:d==="radius"||d==="distance"?2*e/s:e/s,Lz(v,l,f)}function qve(e){return e}function Nz(e,t,i,r,s){switch(t.transformationType){case sn.Additive:return Nve(e,t,i,r);case sn.Constant:return jve(t,i,r);case sn.ClampedLinear:return Dve(e,t,i,r);case sn.Proportional:return Vve(e,t,i,r);case sn.Stops:return zve(e,t,i,r,s);case sn.RealWorldSize:return Gve(e,t,i,r);case sn.Identity:return qve(e);case sn.Unknown:return null}}function Uve(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let l=Ds(e.minSize,Pz,s),f=Ds(e.maxSize,Pz,s);if(l!=null||f!=null){if(l>f){const d=f;f=l,l=d}return{minSize:l,maxSize:f}}}function Bve(e,t,i){if(!e.visualVariables)return;const r=[],s=[],l=[],f=[],d=[];for(const v of e.visualVariables)switch(v.type){case"color":s.push(v);break;case"opacity":l.push(v);break;case"rotation":d.push(v);break;case"size":f.push(v)}return s.forEach(v=>{const _=kz(v,t,i);r.push({variable:v,value:_})}),l.forEach(v=>{const _=Rz(v,t,i);r.push({variable:v,value:_})}),d.forEach(v=>{const _=Fz(v,t,i);r.push({variable:v,value:_})}),f.forEach(v=>{const _=g_(v,t,i);r.push({variable:v,value:_})}),r.filter(v=>v.value!=null)}function Y7(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,l)=>e<s?(r=l,!0):(i=l,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Hve(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const l=s.useSymbolValue?"symbol-value":g_(s,t,i);switch(s.axis){case"width":r[0]=l;break;case"depth":r[1]=l;break;case"height":r[2]=l;break;case"width-and-depth":r[0]=l,r[1]=l;break;case"all":case void 0:case null:r[0]=l,r[1]=l,r[2]=l;break;default:NL(s.axis)}}return r}var X7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getAllSizes:Hve,getColor:kz,getOpacity:Rz,getRotationAngle:Fz,getSize:g_,getSizeForValue:Nz,getSizeFromNumberOrVariable:Ds,getSizeRangeAtScale:Uve,getVisualVariableValues:Bve,viewScaleRE:Oz}),Q7;const m_=new bt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),eI=new bt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function jz(e){if(e!=null)return typeof e=="string"||typeof e=="number"?di(e):e.type==="size"?$h(e)?e:(delete(e=te({},e)).type,new bi(e)):void 0}function Dz(e,t,i){if(typeof e!="object")return e;const r=new bi;return r.read(e,i),r}let bi=Q7=class extends Zm{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Oz.test(this.valueExpression)}}set expression(e){Pe.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){$h(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),$h(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return Az(this)}set maxDataValue(e){e&&this.stops&&(Pe.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Pe.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return jz(e)}readMaxSize(e,t,i){return Dz(e,t,i)}set minDataValue(e){e&&this.stops&&(Pe.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Pe.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return jz(e)}readMinSize(e,t,i){return Dz(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Pe.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Rve(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const s=this.index,l=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new fe("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?eI.read(e):null}clone(){return new Q7({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:$h(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:$h(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===sn.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===sn.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([x({readOnly:!0})],bi.prototype,"cache",null),m([x({type:m_.apiValues,json:{type:m_.jsonValues,origins:{"web-map":{read:!1}},read:m_.read,write:m_.write}})],bi.prototype,"axis",void 0),m([x({type:String,value:null,json:{read:!1}})],bi.prototype,"expression",null),m([x()],bi.prototype,"index",null),m([x({type:String,readOnly:!0})],bi.prototype,"inputValueType",null),m([x({type:kve,json:{write:!0}})],bi.prototype,"legendOptions",void 0),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"maxDataValue",null),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"maxSize",null),m([ri("maxSize")],bi.prototype,"castMaxSize",null),m([Be("maxSize")],bi.prototype,"readMaxSize",null),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"minDataValue",null),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"minSize",null),m([ri("minSize")],bi.prototype,"castMinSize",null),m([Be("minSize")],bi.prototype,"readMinSize",null),m([x({type:String,json:{write:!0}})],bi.prototype,"normalizationField",void 0),m([x({readOnly:!0})],bi.prototype,"arcadeRequired",null),m([x({type:String})],bi.prototype,"scaleBy",void 0),m([x({type:[n1],value:null,json:{write:!0}})],bi.prototype,"stops",null),m([x({type:["outline"],json:{write:!0}})],bi.prototype,"target",void 0),m([x({type:String,readOnly:!0})],bi.prototype,"transformationType",null),m([x({type:["size"],json:{type:["sizeInfo"]}})],bi.prototype,"type",void 0),m([x({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],bi.prototype,"useSymbolValue",void 0),m([x({type:String,json:{write:!0}})],bi.prototype,"valueExpression",void 0),m([Be("valueExpression",["valueExpression","expression"])],bi.prototype,"readValueExpression",null),m([Xe("web-scene","valueExpression")],bi.prototype,"writeValueExpressionWebScene",null),m([x({type:["radius","diameter","area","width","distance"],json:{write:!0}})],bi.prototype,"valueRepresentation",void 0),m([x({type:eI.apiValues,json:{write:eI.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],bi.prototype,"valueUnit",void 0),m([Be("valueUnit")],bi.prototype,"readValueUnit",null),bi=Q7=m([X("esri.renderers.visualVariables.SizeVariable")],bi);const v_=bi,Wve={color:Tz,size:v_,opacity:Ez,rotation:Cz},Jve=new bt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Zve=/^\[([^\]]+)\]$/i;let b_=class extends ot{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:s}=t,l=r&&r.match(Zve),f=l&&l[1];if(f&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:f})),e)return e.map(d=>{const v=Jve.read(d.type),_=Wve[v];_||(Pe.getLogger(this.declaredClass).warn(`Unknown variable type: ${v}`),i&&i.messages&&i.messages.push(new os("visual-variable:unsupported",`visualVariable of type '${v}' is not supported`,{definition:d,context:i})));const M=new _;return M.read(d,i),M})}writeVariables(e,t){const i=[];for(const r of e){const s=r.toJSON(t);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};m([x()],b_.prototype,"visualVariables",null),b_=m([X("esri.renderers.visualVariables.VisualVariableFactory")],b_);const Kve=b_,Yve={base:Zm,key:"type",typeMap:{opacity:Ez,color:Tz,rotation:Cz,size:v_}},s1=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Kve}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,l){r[s]=this._vvFactory.writeVariables(i,l)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(l=>l.type===i&&(typeof r=="string"?l.target===r:r!==!1||!l.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const l of s)l&&(l.field&&Xs(i,r,l.field),l.normalizationField&&Xs(i,r,l.normalizationField),l.valueExpression&&(Xve(l.valueExpression,i,r)||await cs(i,r,l.valueExpression)))}};return m([x({types:[Yve],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),m([Be("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),m([Xe("visualVariables")],t.prototype,"writeVisualVariables",null),t=m([X("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Xve(e,t,i){const r=Ave(e);return!!q(r)&&(Xs(t,i,r),!0)}const Ym={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Qve(e,t=Ym){var d,v;if(!e)return{symbol:null};const{retainId:i=Ym.retainId,ignoreDrivers:r=Ym.ignoreDrivers,hasLabelingContext:s=Ym.hasLabelingContext,retainCIM:l=Ym.retainCIM}=t;let f=null;if(Zp(e)||e instanceof Jp)f=e.clone();else if(e.type==="cim"){const _=(v=(d=e.data)==null?void 0:d.symbol)==null?void 0:v.type;if(_!=="CIMPointSymbol")return{error:new fe("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${_||"unknown"}' is unsupported in 3D`,{symbol:e})};f=l?e.clone():Hp.fromCIMSymbol(e)}else if(e instanceof ps)f=H2.fromSimpleLineSymbol(e);else if(e instanceof no)f=Hp.fromSimpleMarkerSymbol(e);else if(e instanceof Z2)f=Hp.fromPictureMarkerSymbol(e);else if(e instanceof fl)f=t.geometryType&&t.geometryType==="mesh"?J2.fromSimpleFillSymbol(e):sm.fromSimpleFillSymbol(e);else{if(!(e instanceof x0))return{error:new fe("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};f=s?U2.fromTextSymbol(e):Hp.fromTextSymbol(e)}if(i&&f&&f.type!=="cim"&&(f.id=e.id),r&&Zp(f))for(let _=0;_<f.symbolLayers.length;++_)f.symbolLayers.getItemAt(_)._ignoreDrivers=!0;return{symbol:f}}const ebe=["building-scene","integrated-mesh","point-cloud","scene"];function w_(e,t,i,r){const s=Gz(e,{},{context:r,isLabelSymbol:!1});q(s)&&(t[i]=s)}function Vz(e,t,i,r){const s=Gz(e,{},{context:r,isLabelSymbol:!0});q(s)&&(t[i]=s)}function zz(e){return e instanceof w0||e instanceof Jp}function Gz(e,t,i){var v;if(ae(e))return null;const{context:r,isLabelSymbol:s}=i,l=r==null?void 0:r.origin,f=r==null?void 0:r.messages;if(l==="web-scene"&&!zz(e)){const _=Qve(e,{retainCIM:!0,hasLabelingContext:s});return q(_.symbol)?_.symbol.write(t,r):(f==null||f.push(new fe("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:_.error})),null)}const d=(v=r==null?void 0:r.layer)==null?void 0:v.type;return l!=="web-map"&&(l!=="portal-item"||d&&ebe.includes(d))||!zz(e)?e.write(t,r):(f==null||f.push(new fe("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null)}function BAe(e,t){return Kce(e,null,t)}const o1={types:Y2,json:{write:{writer:w_},origins:{"web-scene":{types:IL,write:{writer:w_},read:{reader:Ec({types:IL})}}}}},qz={types:{base:hs,key:"type",typeMap:{"simple-fill":Cs.typeMap["simple-fill"],"picture-fill":Cs.typeMap["picture-fill"],"polygon-3d":Cs.typeMap["polygon-3d"]}},json:{write:{writer:w_},origins:{"web-scene":{type:sm,write:{writer:w_}}}}},__={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var tI;let Th=tI=class extends Ee{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new tI({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};m([x({type:String,json:{write:!0}})],Th.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Th.prototype,"label",void 0),m([x({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Th.prototype,"minValue",void 0),m([x({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Th.prototype,"maxValue",void 0),m([x(o1)],Th.prototype,"symbol",void 0),Th=tI=m([X("esri.renderers.support.ClassBreakInfo")],Th);const x_=Th;var iI;const Uz="log",S_="percent-of-total",M_="field",$_=new bt({esriNormalizeByLog:Uz,esriNormalizeByPercentOfTotal:S_,esriNormalizeByField:M_}),tbe=Ai(x_);let Gr=iI=class extends s1(Tu){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const l=new x_;return l.read(s,i),l.minValue==null&&(l.minValue=r),l.maxValue==null&&(l.maxValue=l.minValue),r=l.maxValue,l})}writeClassBreakInfos(e,t,i,r){const s=e.map(l=>l.write({},r));this._areClassBreaksConsecutive()&&s.forEach(l=>delete l.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(Pe.getLogger(this.declaredClass).error(".field: field must be a string value"),null):qy(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&M_||i&&S_||null,t&&i&&Pe.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):e!==M_&&e!==S_||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new x_({minValue:e,maxValue:t,symbol:TL(i)}):tbe(ve(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ae(t)||ae(t.arcade))&&Pe.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(ae(t)||ae(t.arcade))&&(i=je(te({},i),{arcade:await il()}));const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void Pe.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ae(t)||ae(t.arcade))){const s=await il(),{arcadeUtils:l}=s;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i=je(te({},i),{arcade:s})}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new iI({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ve(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ve(this.visualVariables),legendOptions:ve(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),cs(e,t,this.valueExpression)];Xs(e,t,this.field),Xs(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=pn(t,{}),{valueExpression:f}=this;let d=this._compiledValueExpression.valueExpression===f?this._compiledValueExpression.compiledFunction:null;const v=Jt(l).arcadeUtils;if(!d){const M=v.createSyntaxTree(f);d=v.createFunction(M),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=f;const _=v.executeFunction(d,v.createExecContext(e,v.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(_)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const l=this.normalizationTotal,f=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Uz)s=Math.log(s)*Math.LOG10E;else if(r!==S_||l==null||isNaN(l)){if(r===M_&&!isNaN(f)){if(isNaN(s)||isNaN(f))return-1;s/=f}}else s=s/l*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};m([x(qz)],Gr.prototype,"backgroundFillSymbol",void 0),m([x({type:[x_]})],Gr.prototype,"classBreakInfos",void 0),m([Be("classBreakInfos")],Gr.prototype,"readClassBreakInfos",null),m([Xe("classBreakInfos")],Gr.prototype,"writeClassBreakInfos",null),m([x({type:String,json:{write:!0}})],Gr.prototype,"defaultLabel",void 0),m([x(o1)],Gr.prototype,"defaultSymbol",void 0),m([x({type:String,json:{write:!0}})],Gr.prototype,"field",void 0),m([ri("field")],Gr.prototype,"castField",null),m([x({type:Boolean})],Gr.prototype,"isMaxInclusive",void 0),m([x({type:i1,json:{write:!0}})],Gr.prototype,"legendOptions",void 0),m([x({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Gr.prototype,"minValue",null),m([x({type:String,json:{write:!0}})],Gr.prototype,"normalizationField",void 0),m([x({type:Number,cast:e=>Io(e),json:{write:!0}})],Gr.prototype,"normalizationTotal",void 0),m([x({type:$_.apiValues,value:null,json:{type:$_.jsonValues,read:$_.read,write:$_.write}})],Gr.prototype,"normalizationType",null),m([wt({classBreaks:"class-breaks"})],Gr.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Gr.prototype,"valueExpression",void 0),m([x({type:String,json:{write:!0}})],Gr.prototype,"valueExpressionTitle",void 0),Gr=iI=m([X("esri.renderers.ClassBreaksRenderer")],Gr);const Bz=Gr;class ibe{constructor(t,i){this._storage=new sV,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const Hz="esri.renderers.support.DictionaryLoader",rbe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class rI{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new ibe(100),this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(k){if(Ks(k))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const k of this._symbolFields){const F=this.fieldMap[k];if(F&&t.attributes[F]!=null){const D=""+t.attributes[F];s[k]=D}else s[k]=""}const l=r==null?void 0:r(s,i);if(!l||typeof l!="string")return null;const f=i4(l).toString(),d=this._symbolCache.get(f);if(d)return d.catch(()=>{this._symbolCache.pop(f)}),d;const v=l.split(";"),_=[],M=[];for(const k of v)if(k)if(k.includes("po:")){const F=k.substr(3).split("|");if(F.length===3){const D=F[0],z=F[1];let H=F[2];if(z==="DashTemplate")H=H.split(" ").map(J=>Number(J));else if(z==="Color"){const J=new mt(H).toRgba();H=[J[0],J[1],J[2],255*J[3]]}else H=Number(H);M.push({primitiveName:D,propertyName:z,value:H})}}else if(k.includes("|")){for(const F of k.split("|"))if(this._itemNames.has(F)){_.push(F);break}}else this._itemNames.has(k)&&_.push(k);const T=!q(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",A=this._cimPartsToCIMSymbol(_,M,T,i);return this._symbolCache.put(f,A,1),A}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Pe.getLogger(Hz).error("no valid URL!");const i=li(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:q(t)?t.signal:null}),[{data:r}]=await Promise.all([i,il()]);if(!r)throw this._dictionaryPromise=null,new fe("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,l=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=l.symbol;const f={};if(this.config){const _=this.config;for(const M in _)f[M]=_[M]}if(l.configuration)for(const _ of l.configuration)f.hasOwnProperty(_.name)||(f[_.name]=_.value);const d=[];if(q(t)&&t.fields&&this.fieldMap)for(const _ of this._symbolFields){const M=this.fieldMap[_],T=t.fields.filter(A=>A.name===M);T.length>0&&d.push(je(te({},T[0]),{name:_}))}const v=tae(s,q(t)?t.spatialReference:null,d,f).then(_=>{const M={scale:0};return(T,A)=>{if(ae(_))return null;const k=_.repurposeFeature({geometry:null,attributes:T});return M.scale=q(A)?A.scale:void 0,_.evaluate({$feature:k,$view:M})}}).catch(_=>(Pe.getLogger(Hz).error("Creating dictinoary expression failed:",_),null));return this._dictionaryPromise=v,v}async _cimPartsToCIMSymbol(t,i,r,s){const l=new Array(t.length);for(let v=0;v<t.length;v++)l[v]=this._getSymbolPart(t[v],s);const f=await Promise.all(l),d=this.fieldMap;if(d)for(const v of f)Wz(v,d);return new Uc({data:this._combineSymbolParts(f,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(l=>l.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=li(r,te({responseType:"json",query:{f:"json"}},i));this._ongoingRequests.set(t,s);try{return(await s).data}catch(l){throw this._ongoingRequests.delete(t),l}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const s=te({},t[0]);if(t.length>1){s.symbolLayers=[];for(const l of t){const f=l;s.symbolLayers.unshift(...f.symbolLayers)}}return r&&(s.callout=rbe),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}}function Wz(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&nbe(s,t)}}function nbe(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":Wz(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}var HAe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",DictionaryLoader:rI}),nI;let Ea=nI=class extends s1(Tu){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new rI(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){(r==null?void 0:r.origin)||super.writeVisualVariables(e,t,i,r)}clone(){return new nI({config:ve(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ve(this.fieldMap),url:ve(this.url),visualVariables:ve(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await cs(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};m([x({type:rI})],Ea.prototype,"_loader",null),m([x({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ea.prototype,"config",void 0),m([x({type:Object,json:{write:!0}})],Ea.prototype,"fieldMap",void 0),m([x({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ea.prototype,"scaleExpression",void 0),m([Xe("scaleExpression")],Ea.prototype,"writeData",null),m([x({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Ea.prototype,"scaleExpressionTitle",void 0),m([x({type:String,json:{write:!0}})],Ea.prototype,"url",void 0),m([Xe("visualVariables")],Ea.prototype,"writeVisualVariables",null),Ea=nI=m([X("esri.renderers.DictionaryRenderer")],Ea);const sbe=Ea;var sI;let Au=sI=class extends Ee{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Pe.getLogger(this.declaredClass).error(".field: field must be a string value"),null):qy(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new sI({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([x({type:mt,json:{type:[Number],write:!0}})],Au.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],Au.prototype,"field",void 0),m([ri("field")],Au.prototype,"castField",null),m([x({type:String,json:{write:!0}})],Au.prototype,"label",void 0),m([x({type:String,json:{write:!0}})],Au.prototype,"valueExpression",void 0),m([x({type:String,json:{write:!0}})],Au.prototype,"valueExpressionTitle",void 0),Au=sI=m([X("esri.renderers.support.AttributeColorInfo")],Au);const Jz=Au;var oI;let I_=oI=class extends Ee{constructor(){super(...arguments),this.unit=null}clone(){return new oI({unit:this.unit})}};m([x({type:String,json:{write:!0}})],I_.prototype,"unit",void 0),I_=oI=m([X("esri.renderers.support.DotDensityLegendOptions")],I_);const obe=I_;var aI;let Vs=aI=class extends s1(Tu){constructor(e){super(e),this.attributes=null,this.backgroundColor=new mt([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ps,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new fl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e,t;return(t=(e=this.attributes)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))!=null?t:""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new aI({attributes:ve(this.attributes),backgroundColor:ve(this.backgroundColor),dotBlendingEnabled:ve(this.dotBlendingEnabled),dotShape:ve(this.dotShape),dotSize:ve(this.dotSize),dotValue:ve(this.dotValue),legendOptions:ve(this.legendOptions),outline:ve(this.outline),referenceScale:ve(this.referenceScale),visualVariables:ve(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){var i;await this.collectVVRequiredFields(e,t);for(const r of(i=this.attributes)!=null?i:[])r.valueExpression&&await cs(e,t,r.valueExpression),r.field&&e.add(r.field)}};m([x({type:[Jz],json:{write:!0}})],Vs.prototype,"attributes",void 0),m([x({type:mt,json:{write:!0}})],Vs.prototype,"backgroundColor",void 0),m([x({type:Boolean,json:{write:!0}})],Vs.prototype,"dotBlendingEnabled",void 0),m([x({type:String,json:{write:!1}})],Vs.prototype,"dotShape",void 0),m([x({type:Number,json:{write:!0}})],Vs.prototype,"dotSize",void 0),m([x({type:obe,json:{write:!0}})],Vs.prototype,"legendOptions",void 0),m([x({type:ps,json:{default:null,write:!0}})],Vs.prototype,"outline",void 0),m([x({type:Number,json:{write:!0}})],Vs.prototype,"dotValue",void 0),m([x({type:Number,json:{write:!0}})],Vs.prototype,"referenceScale",void 0),m([x({type:Number,json:{write:!0}})],Vs.prototype,"seed",void 0),m([wt({dotDensity:"dot-density"})],Vs.prototype,"type",void 0),Vs=aI=m([X("esri.renderers.DotDensityRenderer")],Vs);const abe=Vs;let a1=class extends yr(Ee){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};m([x({type:String,json:{write:!0}})],a1.prototype,"minLabel",void 0),m([x({type:String,json:{write:!0}})],a1.prototype,"maxLabel",void 0),m([x({type:String,json:{write:!0}})],a1.prototype,"title",void 0),a1=m([X("esri.renderers.support.HeatmapLegendOptions")],a1);function l1(){return[0,0,0,0]}function lbe(e){return[e[0],e[1],e[2],e[3]]}function Ca(e,t,i,r){return[e,t,i,r]}function Zz(e){const t=l1(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Kz(e,t){return new Float64Array(e,t,4)}function Yz(){return l1()}function Xz(){return Ca(1,1,1,1)}function Qz(){return Ca(1,0,0,0)}function eG(){return Ca(0,1,0,0)}function tG(){return Ca(0,0,1,0)}function iG(){return Ca(0,0,0,1)}const ube=Yz(),cbe=Xz(),hbe=Qz(),pbe=eG(),dbe=tG(),fbe=iG();Object.freeze(Object.defineProperty({__proto__:null,create:l1,clone:lbe,fromValues:Ca,fromArray:Zz,createView:Kz,zeros:Yz,ones:Xz,unitX:Qz,unitY:eG,unitZ:tG,unitW:iG,ZEROS:ube,ONES:cbe,UNIT_X:hbe,UNIT_Y:pbe,UNIT_Z:dbe,UNIT_W:fbe},Symbol.toStringTag,{value:"Module"}));const lI=2.4;function ybe(e){return Ro(e*lI)}function gbe(e){return hF(e)/lI}function mbe(e,t,i,r){let{color:s,ratio:l}=t,{color:f,ratio:d}=i;if(d===l){const _=1e-6;d===1?l-=_:d+=_}const v=Cn((r-l)/(d-l),0,1);b2(e,s.toArray(),f.toArray(),v)}function WAe(e){const t=512,i=new Uint8ClampedArray(4*t);if(e=e.filter(({ratio:d})=>d>=0&&d<=1).sort((d,v)=>d.ratio-v.ratio).map(({color:d,ratio:v})=>({color:d,ratio:Math.max(v,.001)})),e.length<1)return i;let r=e[0],s=e[0],l=1;const f=l1();for(let d=0;d<t;d++){const v=(d+.5)/t;for(;v>s.ratio&&l<e.length;)r=s,s=e[l++];mbe(f,r,s,v),i.set(f,4*d)}return i}function JAe(e,t,i,r){const{radius:s,fieldOffset:l,field:f}=t,d=Math.round(hF(s)),v=new Float64Array(i*r);let _,M=Number.NEGATIVE_INFINITY;const T=wbe(f,l),A=new Set;for(const k of e){const F=k.getCursor();for(;F.next();){const D=F.getObjectId();if(A.has(D))continue;A.add(D);const z=F.readLegacyPointGeometry(),H=128;if(z.x<-H||z.x>=i+H||z.y<-H||z.y>r+H)continue;const J=+T(F),Y=Math.max(0,Math.round(z.x)-d),ie=Math.max(0,Math.round(z.y)-d),re=Math.min(r,Math.round(z.y)+d),ee=Math.min(i,Math.round(z.x)+d);for(let le=ie;le<re;le++)for(let me=Y;me<ee;me++){const we=le*i+me,_e=bbe(z.x-me,z.y-le,d);_=v[we]+=_e*J,_>M&&(M=_)}}}return{matrix:v.buffer,max:M}}function ZAe(e,t,i,r,s,l){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const f=e.getImageData(0,0,t,t);i&&r&&f.data.set(new Uint8ClampedArray(vbe(t,i,r,s,l))),e.putImageData(f,0,0)}function vbe(e,t,i,r,s){const l=new Uint32Array(e*e),f="buffer"in t?t:new Float64Array(t),d="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),v=d.length/(s-r);for(let _=0;_<f.length;_++){const M=f[_],T=Math.floor((M-r)*v);l[_]=d[Cn(T,0,d.length-1)]}return l.buffer}function bbe(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function KAe(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function wbe(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var uI;const rG="esri.renderers.HeatmapRenderer",_be=Pe.getLogger(rG);function nG(e){if(e!=null){const{maxDensity:i,minDensity:r,radius:s}=e;if(i!=null||r!=null||s!=null){const t=e,{blurRadius:l,maxPixelIntensity:f,minPixelIntensity:d}=t;return VC(t,["blurRadius","maxPixelIntensity","minPixelIntensity"])}}return e}let on=uI=class extends Tu{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Fm({ratio:0,color:new mt("rgba(255, 140, 0, 0)")}),new Fm({ratio:.75,color:new mt("rgba(255, 140, 0, 1)")}),new Fm({ratio:.9,color:new mt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return nG(e)}get blurRadius(){return gbe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",ybe(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(lI**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Nr(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,qf(()=>{mse(_be,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=nG(e),super.read(e,t)}getSymbol(){return new no}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Xs(e,t,i),r&&typeof r=="string"&&await cs(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new uI({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ve(this.colorStops),field:this.field,legendOptions:ve(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([x({type:V7,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],on.prototype,"authoringInfo",void 0),m([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],on.prototype,"blurRadius",null),m([x({type:[Fm],json:{write:!0}})],on.prototype,"colorStops",void 0),m([x({type:String,json:{write:!0}})],on.prototype,"field",void 0),m([x({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],on.prototype,"fieldOffset",void 0),m([x({type:a1,json:{write:!0}})],on.prototype,"legendOptions",void 0),m([x({type:Number,json:{write:!0}})],on.prototype,"maxDensity",void 0),m([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],on.prototype,"maxPixelIntensity",null),m([x({type:Number,json:{write:!0}})],on.prototype,"minDensity",void 0),m([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],on.prototype,"minPixelIntensity",null),m([x({type:Number,cast:di,json:{write:!0}})],on.prototype,"radius",void 0),m([x({type:Number,range:{min:0},json:{default:0,write:!0}})],on.prototype,"referenceScale",void 0),m([wt({heatmap:"heatmap"})],on.prototype,"type",void 0),m([x({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],on.prototype,"valueExpression",void 0),m([x({type:String})],on.prototype,"valueExpressionTitle",void 0),m([x({readOnly:!0})],on.prototype,"_pixelIntensityToDensity",null),on=uI=m([X(rG)],on);const sG=on;let Id=class extends yr(Ee){constructor(){super(...arguments),this.color=new mt([0,0,0,0]),this.label=null,this.threshold=0}};m([x({type:mt,json:{write:!0}})],Id.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],Id.prototype,"label",void 0),m([x({type:Number,range:{min:0,max:1},json:{write:!0}})],Id.prototype,"threshold",void 0),Id=m([X("esri.renderers.support.OthersCategory")],Id);let T_=class extends yr(Ee){constructor(){super(...arguments),this.title=null}};m([x({type:String,json:{write:!0}})],T_.prototype,"title",void 0),T_=m([X("esri.renderers.support.PieChartLegendOptions")],T_);let ho=class extends s1(yr(Tu)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new mt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Id,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new no({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(q)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await cs(e,t,i.valueExpression),i.field&&e.add(i.field)}};m([x({type:[Jz],json:{write:!0}})],ho.prototype,"attributes",void 0),m([x({type:fl,json:{default:null,write:!0}})],ho.prototype,"backgroundFillSymbol",void 0),m([x({type:mt,json:{write:!0}})],ho.prototype,"defaultColor",void 0),m([x({type:String,json:{write:!0}})],ho.prototype,"defaultLabel",void 0),m([x({type:Number,range:{min:0,max:1},json:{write:!0}})],ho.prototype,"holePercentage",void 0),m([x({type:Id,json:{write:!0}})],ho.prototype,"othersCategory",void 0),m([x({type:T_,json:{write:!0}})],ho.prototype,"legendOptions",void 0),m([x({type:ps,json:{default:null,write:!0}})],ho.prototype,"outline",void 0),m([x({type:Number,cast:di,json:{write:!0}})],ho.prototype,"size",void 0),m([wt({pieChart:"pie-chart"})],ho.prototype,"type",void 0),ho=m([X("esri.renderers.PieChartRenderer")],ho);const xbe=ho;var cI;let Td=cI=class extends s1(Tu){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new cI({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ve(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};m([x({type:String,json:{write:!0}})],Td.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Td.prototype,"label",void 0),m([x(o1)],Td.prototype,"symbol",void 0),m([wt({simple:"simple"})],Td.prototype,"type",void 0),Td=cI=m([X("esri.renderers.SimpleRenderer")],Td);const u1=Td,Sbe=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function hI(e){return e instanceof ot}function oG(e){return e instanceof gt?Object.keys(e.items):hI(e)?Nr(e).keys():e?Object.keys(e):[]}function E_(e,t){return e instanceof gt?e.items[t]:e[t]}function Mbe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Xm(e){return e?e.declaredClass:null}function aG(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=oG(e),s=oG(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||Mbe(e,t))return{type:"complete",oldValue:e,newValue:t};const l=s.filter(T=>!r.includes(T)),f=r.filter(T=>!s.includes(T)),d=r.filter(T=>s.includes(T)&&E_(e,T)!==E_(t,T)).concat(l,f).sort(),v=Xm(e);if(v&&Sbe.includes(v)&&d.length)return{type:"complete",oldValue:e,newValue:t};let _;const M=hI(e)&&hI(t);for(const T of d){const A=E_(e,T),k=E_(t,T);let F;if((M||typeof A!="function"&&typeof k!="function")&&A!==k&&(A!=null||k!=null)){if(i&&i[T]&&typeof i[T]=="function")F=i[T](A,k);else if(A instanceof Date&&k instanceof Date){if(A.getTime()===k.getTime())continue;F={type:"complete",oldValue:A,newValue:k}}else F=typeof A=="object"&&typeof k=="object"&&Xm(A)===Xm(k)?aG(A,k):{type:"complete",oldValue:A,newValue:k};q(F)&&(q(_)?_.diff[T]=F:_={type:"partial",diff:{[T]:F}})}}return _}function $be(e,t){if(ae(e))return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const l=r.diff[s];if(!l)return!1;r=l}}return!0}function YAe(e,t){for(const i of t)if($be(e,i))return!0;return!1}function Ibe(e,t){if(!(typeof e=="function"||typeof t=="function"||ae(e)&&ae(t)))return ae(e)||ae(t)||typeof e=="object"&&typeof t=="object"&&Xm(e)!==Xm(t)?{type:"complete",oldValue:e,newValue:t}:aG(e,t)}function C_(e){if(ae(e))return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!C_(i))return!1;for(const i of t.removed)if(!C_(i))return!1;for(const i of t.changed)if(!C_(i))return!1;return!0}case"partial":for(const t in e.diff)if(!C_(e.diff[t]))return!1;return!0}}let c1=class extends yr(Ee){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};m([x(__)],c1.prototype,"value",void 0),m([x(__)],c1.prototype,"value2",void 0),m([x(__)],c1.prototype,"value3",void 0),c1=m([X("esri.renderers.support.UniqueValue")],c1);const h1=c1;let Eh=class extends yr(Ee){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return t==="string"||t==="number"?e.map(i=>new h1({value:i})):t==="object"?e[0]instanceof h1?e:e.map(i=>new h1(i)):null}};m([x({type:String,json:{write:!0}})],Eh.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Eh.prototype,"label",void 0),m([x(o1)],Eh.prototype,"symbol",void 0),m([x({type:[h1],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new h1({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const s=[r.value,r.value2,r.value3].filter(q).map(l=>l.toString());i.push(s)}t.values=i}}}})],Eh.prototype,"values",void 0),m([ri("values")],Eh.prototype,"castValues",null),Eh=m([X("esri.renderers.support.UniqueValueClass")],Eh);const lG=Eh;let Qm=class extends yr(Ee){constructor(e){super(e),this.heading=null,this.classes=null}};m([x({type:String,json:{write:!0}})],Qm.prototype,"heading",void 0),m([x({type:[lG],json:{write:!0}})],Qm.prototype,"classes",void 0),Qm=m([X("esri.renderers.support.UniqueValueGroup")],Qm);const pI=Qm;var dI;let Ed=dI=class extends Ee{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new dI({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};m([x({type:String,json:{write:!0}})],Ed.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Ed.prototype,"label",void 0),m([x(o1)],Ed.prototype,"symbol",void 0),m([x(__)],Ed.prototype,"value",void 0),Ed=dI=m([X("esri.renderers.support.UniqueValueInfo")],Ed);const ev=Ed,Tbe=()=>!!Ie("enable-feature:force-wosr"),XAe=()=>!!Ie("enable-feature:SceneLayer-editing"),fI={};async function Ebe(e,t){try{return{data:(await Obe(e,t)).data,baseUrl:Kue(e),styleUrl:e}}catch(i){return Gf(i),null}}function Cbe(e,t,i){const r=q(t.portal)?t.portal:Ts.getDefault();let s;const l=`${r.url} - ${r.user&&r.user.username} - ${e}`;return fI[l]||(fI[l]=Abe(e,r,i).then(f=>(s=f,f.fetchData())).then(f=>{var d;return{data:f,baseUrl:(d=s.itemUrl)!=null?d:"",styleName:e}})),fI[l]}function Abe(e,t,i){return t.load(i).then(()=>{const r=new fu({disableExtraQuery:!0,query:`owner:${uG} AND type:${cG} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var f;let s=null;const l=e.toLowerCase();if(r&&Array.isArray(r)){for(const d of r)if(((f=d.typeKeywords)==null?void 0:f.some(_=>_.toLowerCase()===l))&&d.type===cG&&d.owner===uG){s=d;break}}if(!s)throw new fe("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function Pbe(e,t,i){return e&&q(e.styleUrl)?Ebe(e.styleUrl,i):e&&q(e.styleName)?Cbe(e.styleName,t,i):Promise.reject(new fe("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function QAe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function ePe(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Tbe()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function Obe(e,t){const i=te({responseType:"json",query:{f:"json"}},t);return li(ha(e),i)}const uG="esri_en",cG="Style",tPe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var tv;const hG="esri.renderers.UniqueValueRenderer",Ch=Pe.getLogger(hG),pG="uvInfos-watcher",dG="uvGroups-watcher",kbe=",",Rbe=Ai(ev);function Fbe(e){const{field1:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:l,valueExpression:f}=e,d=!(!t||!i);return[{classes:(l!=null?l:[]).map(v=>{var H;const{symbol:_,label:M,value:T,description:A}=v,[k,F,D]=d?((H=T==null?void 0:T.toString())==null?void 0:H.split(s||""))||[]:[T],z=[];return(t||f)&&z.push(k),i&&z.push(F),r&&z.push(D),{symbol:_,label:M,values:[z],description:A}})}]}let ar=tv=class extends s1(Tu){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let l=0;l<i.length;l++){const f=t.find(d=>d.value===i[l].value);f?Ibe(f,i[l])?(s.changed.push({type:"complete",oldValue:f,newValue:i[l]}),r=!0):s.unchanged.push({oldValue:f,newValue:i[l]}):(s.added.push(i[l]),r=!0)}for(let l=0;l<t.length;l++)i.find(f=>f.value===t[l].value)||(s.removed.push(t[l]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:qy(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new fe("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ch.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Ts.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=y0(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Hg(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Ch.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ch.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Ch.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?Rbe(e):new ev({value:e,symbol:TL(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ch.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t){for(let i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(ae(t)||ae(t.arcade))&&(i=je(te({},i),{arcade:await il()})),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void Ch.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ae(i)||ae(i.arcade))){const s=await il(),{arcadeUtils:l}=s;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i=je(te({},i),{arcade:s})}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){var t;const e=[];for(const i of(t=this.uniqueValueInfos)!=null?t:[])i.symbol&&e.push(i.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((s,l)=>s+l.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new tv({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ve(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ve(this.visualVariables),legendOptions:ve(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ve(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=ve(this.uniqueValueInfos),i=ve(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(ve(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),cs(e,t,this.valueExpression)];Xs(e,t,this.field),Xs(e,t,this.field2),Xs(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return Pbe(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new Jp({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const l=new ev({value:r.name,symbol:s});t.push(l),this._valueInfoMap[r.name]=l}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)==null?void 0:i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",kbe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(pG);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(Ve(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,pG)}}_watchUniqueValueGroups(){this.removeHandles(dG);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(Ve(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes)t.push(Ve(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,l)=>{s!==l&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,dG)}}_updateInfosFromGroups(){var v;if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:l,valueExpression:f}=this;if(!t&&!f)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const d=!(!t||!i);for(const _ of l)for(const M of(v=_.classes)!=null?v:[]){const{symbol:T,label:A,values:k,description:F}=M;for(const D of k!=null?k:[]){const{value:z,value2:H,value3:J}=D,Y=[z];i&&Y.push(H),r&&Y.push(J);const ie=d?Y.join(s||""):Y[0];e.push(new ev({symbol:T,label:A,value:ie,description:F}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:l}=this;if(!t&&!r||!l.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const f=!(!t||!i),d=l.map(_=>{var H;const{symbol:M,label:T,value:A,description:k}=_,[F,D,z]=f?((H=A==null?void 0:A.toString())==null?void 0:H.split(s||""))||[]:[A];return new lG({symbol:M,label:T,description:k,values:[new h1({value:F,value2:D,value3:z})]})}),v=[new pI({classes:d})];e&&Object.freeze(v),this._set("uniqueValueGroups",v),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=pn(t,{});let f=this._cache.compiledFunc;const d=Jt(l).arcadeUtils;if(!f){const _=d.createSyntaxTree(this.valueExpression);f=d.createFunction(_),this._cache.compiledFunc=f}const v=d.executeFunction(f,d.createExecContext(e,d.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[v+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const s=this.field2,l=this.field3,f=[];t&&f.push(i[t]),s&&f.push(i[s]),l&&f.push(i[l]),r=f.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new tv(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Ts.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Ch.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new tv(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Ch.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};m([x({readOnly:!0})],ar.prototype,"_cache",null),m([wt({uniqueValue:"unique-value"})],ar.prototype,"type",void 0),m([x(qz)],ar.prototype,"backgroundFillSymbol",void 0),m([x({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ar.prototype,"field",null),m([ri("field")],ar.prototype,"castField",null),m([Xe("field")],ar.prototype,"writeField",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"field2",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"field3",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"valueExpression",null),m([x({type:String,json:{write:!0}})],ar.prototype,"valueExpressionTitle",void 0),m([x({type:i1,json:{write:!0}})],ar.prototype,"legendOptions",void 0),m([x({type:String,json:{write:!0}})],ar.prototype,"defaultLabel",void 0),m([x(pO(te({},o1),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ar.prototype,"defaultSymbol",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"fieldDelimiter",null),m([x({type:Ts,readOnly:!0})],ar.prototype,"portal",void 0),m([Be("portal",["styleName"])],ar.prototype,"readPortal",null),m([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ar.prototype,"styleOrigin",void 0),m([Be("styleOrigin",["styleName","styleUrl"])],ar.prototype,"readStyleOrigin",null),m([Xe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ar.prototype,"writeStyleOrigin",null),m([x({type:[pI],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||Fbe(t)).map(r=>pI.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ar.prototype,"uniqueValueGroups",null),m([x({type:[ev],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ar.prototype,"uniqueValueInfos",null),ar=tv=m([X(hG)],ar);const iv=ar,rv={key:"type",base:Tu,typeMap:{heatmap:sG,simple:u1,"unique-value":iv,"class-breaks":Bz,"dot-density":abe,dictionary:sbe,"pie-chart":xbe},errorContext:"renderer"},fG={key:"type",base:Tu,typeMap:{simple:u1,"unique-value":iv,"class-breaks":Bz,heatmap:sG},errorContext:"renderer"};function iPe(e,t){return nv(e,null,t)}const Lbe=Ec({types:rv});function nv(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new os("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):Lbe(e,t,i):null}class yI{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(g4),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new yI,r=this._originStores[nt.DEFAULTS];r&&r.forEach((s,l)=>{i.set(l,ve(s),nt.DEFAULTS)});for(let s=nt.SERVICE;s<g4;s++){const l=this._originStores[s];l&&l.forEach((f,d)=>{t&&t.has(d)||i.set(d,ve(f),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=nt.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||Lr(this._propertyOriginMap.get(t))<=r){const l=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),l!==i}return!1}delete(t,i=nt.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let l=i-1;l>=0;l--){const f=this._originStores[l];if(f&&f.has(t)){this._values.set(t,f.get(t)),this._propertyOriginMap.set(t,l);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r&&r.get(t),l=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),l!==s}originOf(t){return this._propertyOriginMap.get(t)||nt.DEFAULTS}forEach(t){this._values.forEach(t)}}const yG=e=>{let t=class extends e{constructor(...i){super(...i);const r=Lr(Nr(this)),s=r.store,l=new yI;r.store=l,xk(r,s,l)}read(i,r){Mk(this,i,r)}getAtOrigin(i,r){const s=gI(this),l=Ss(r);if(typeof i=="string")return s.get(i,l);const f={};return i.forEach(d=>{f[d]=s.get(d,l)}),f}originOf(i){return Yy(this.originIdOf(i))}originIdOf(i){return gI(this).originOf(i)}revert(i,r){const s=gI(this),l=Ss(r),f=Nr(this);let d;d=typeof i=="string"?i==="*"?s.keys(l):[i]:i,d.forEach(v=>{f.invalidate(v),s.revert(v,l),f.commit(v)})}};return t=m([X("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function gI(e){return Nr(e).store}let gG=class extends yG(ot){};gG=m([X("esri.core.ReadOnlyMultiOriginJSONSupport")],gG);const Nbe=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return mI(this).delete(i,Ss(r))}write(i={},r){return Ik(this,i=i||{},r),i}setAtOrigin(i,r,s){Nr(this).setAtOrigin(i,r,Ss(s))}removeOrigin(i){const r=mI(this),s=Ss(i),l=r.keys(s);for(const f of l)r.originOf(f)===s&&r.set(f,r.get(f,s),nt.USER)}updateOrigin(i,r){const s=mI(this),l=Ss(r),f=this.get(i);for(let d=l+1;d<g4;++d)s.delete(i,d);s.set(i,f,l)}toJSON(i){return this.write({},i)}};return t=m([X("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function mI(e){return Nr(e).store}const A_=e=>{let t=class extends Nbe(yG(e)){constructor(...i){super(...i)}};return t=m([X("esri.core.MultiOriginJSONSupport")],t),t};let mG=class extends A_(ot){};mG=m([X("esri.core.MultiOriginJSONSupport")],mG);async function jbe(e,t){const{WhereClause:i}=await Promise.resolve().then(function(){return MZ});return i.create(e,t)}function P_(e,t){return q(e)?q(t)?`(${e}) AND (${t})`:e:t}var vI;let Cd=vI=class extends Ee{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new vI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([x({type:String,json:{write:!0}})],Cd.prototype,"expression",void 0),m([x({type:String,json:{write:!0}})],Cd.prototype,"name",void 0),m([x({type:["boolean","date","number","string"],json:{write:!0}})],Cd.prototype,"returnType",void 0),m([x({type:String,json:{write:!0}})],Cd.prototype,"title",void 0),Cd=vI=m([X("esri.form.ExpressionInfo")],Cd);const Dbe=Cd;let Ad=class extends Ee{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};m([x({type:String,json:{write:!0}})],Ad.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Ad.prototype,"label",void 0),m([x()],Ad.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Ad.prototype,"visibilityExpression",void 0),Ad=m([X("esri.form.elements.Element")],Ad);const p1=Ad;var bI;let O_=bI=class extends Ee{constructor(e){super(e),this.type=null}clone(){return new bI({type:this.type})}};m([x({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],O_.prototype,"type",void 0),O_=bI=m([X("esri.form.elements.inputs.AttachmentInput")],O_);const Vbe=O_;var wI;let Pd=wI=class extends p1{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new wI({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};m([x({type:String,json:{write:!0}})],Pd.prototype,"attachmentKeyword",void 0),m([x({type:Boolean,json:{write:!0}})],Pd.prototype,"editable",void 0),m([x({type:Vbe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Pd.prototype,"input",void 0),m([x({type:["attachment"],json:{read:!1,write:!0}})],Pd.prototype,"type",void 0),Pd=wI=m([X("esri.form.elements.AttachmentElement")],Pd);const vG=Pd;let k_=class extends Ee{constructor(e){super(e),this.type=null}};m([x()],k_.prototype,"type",void 0),k_=m([X("esri.form.elements.inputs.Input")],k_);const d1=k_;let sv=class extends d1{constructor(e){super(e),this.maxLength=null,this.minLength=0}};m([x({type:Number,json:{write:!0}})],sv.prototype,"maxLength",void 0),m([x({type:Number,json:{write:!0}})],sv.prototype,"minLength",void 0),sv=m([X("esri.form.elements.inputs.TextInput")],sv);const _I=sv;var xI;let R_=xI=class extends _I{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new xI({maxLength:this.maxLength,minLength:this.minLength})}};m([x({type:["barcode-scanner"],json:{read:!1,write:!0}})],R_.prototype,"type",void 0),R_=xI=m([X("esri.form.elements.inputs.BarcodeScannerInput")],R_);const zbe=R_;var SI;let f1=SI=class extends d1{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new SI({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};m([x({type:String,json:{write:!0}})],f1.prototype,"noValueOptionLabel",void 0),m([x({type:Boolean,json:{write:!0}})],f1.prototype,"showNoValueOption",void 0),m([x({type:["combo-box"],json:{read:!1,write:!0}})],f1.prototype,"type",void 0),f1=SI=m([X("esri.form.elements.inputs.ComboBoxInput")],f1);const Gbe=f1;var MI;function bG(e){return e!=null?new Date(e):null}function wG(e){return e?e.getTime():null}let Aa=MI=class extends d1{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return bG(t.max)}writeMax(e,t){t.max=wG(e)}readMin(e,t){return bG(t.min)}writeMin(e,t){t.min=wG(e)}clone(){return new MI({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};m([x({type:Boolean,json:{write:!0}})],Aa.prototype,"includeTime",void 0),m([x({type:Date,json:{type:Number,write:!0}})],Aa.prototype,"max",void 0),m([Be("max")],Aa.prototype,"readMax",null),m([Xe("max")],Aa.prototype,"writeMax",null),m([x({type:Date,json:{type:Number,write:!0}})],Aa.prototype,"min",void 0),m([Be("min")],Aa.prototype,"readMin",null),m([Xe("min")],Aa.prototype,"writeMin",null),m([x({type:["datetime-picker"],json:{read:!1,write:!0}})],Aa.prototype,"type",void 0),Aa=MI=m([X("esri.form.elements.inputs.DateTimePickerInput")],Aa);const qbe=Aa;var $I;let y1=$I=class extends d1{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new $I({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};m([x({type:String,json:{write:!0}})],y1.prototype,"noValueOptionLabel",void 0),m([x({type:Boolean,json:{write:!0}})],y1.prototype,"showNoValueOption",void 0),m([x({type:["radio-buttons"],json:{read:!1,write:!0}})],y1.prototype,"type",void 0),y1=$I=m([X("esri.form.elements.inputs.RadioButtonsInput")],y1);const Ube=y1;var II;let g1=II=class extends d1{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new II({offValue:this.offValue,onValue:this.onValue})}};m([x({type:[String,Number],json:{write:!0}})],g1.prototype,"offValue",void 0),m([x({type:[String,Number],json:{write:!0}})],g1.prototype,"onValue",void 0),m([x({type:["switch"],json:{read:!1,write:!0}})],g1.prototype,"type",void 0),g1=II=m([X("esri.form.elements.inputs.SwitchInput")],g1);const Bbe=g1;var TI;let F_=TI=class extends _I{constructor(e){super(e),this.type="text-area"}clone(){return new TI({maxLength:this.maxLength,minLength:this.minLength})}};m([x({type:["text-area"],json:{read:!1,write:!0}})],F_.prototype,"type",void 0),F_=TI=m([X("esri.form.elements.inputs.TextAreaInput")],F_);const Hbe=F_;var EI;let L_=EI=class extends _I{constructor(e){super(e),this.type="text-box"}clone(){return new EI({maxLength:this.maxLength,minLength:this.minLength})}};m([x({type:["text-box"],json:{read:!1,write:!0}})],L_.prototype,"type",void 0),L_=EI=m([X("esri.form.elements.inputs.TextBoxInput")],L_);const Wbe=L_,Jbe={base:d1,key:"type",typeMap:{"barcode-scanner":zbe,"combo-box":Gbe,"datetime-picker":qbe,"radio-buttons":Ube,switch:Bbe,"text-area":Hbe,"text-box":Wbe}};var CI;let qo=CI=class extends p1{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new CI({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};m([x({types:mV,json:{read:{reader:W$},write:!0}})],qo.prototype,"domain",void 0),m([x({type:Boolean,json:{write:!0}})],qo.prototype,"editable",void 0),m([x({type:String,json:{write:!0}})],qo.prototype,"editableExpression",void 0),m([x({type:String,json:{write:!0}})],qo.prototype,"fieldName",void 0),m([x({type:String,json:{write:!0}})],qo.prototype,"hint",void 0),m([x({types:Jbe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],qo.prototype,"input",void 0),m([x({type:String,json:{write:!0}})],qo.prototype,"requiredExpression",void 0),m([x({type:String,json:{read:!1,write:!0}})],qo.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],qo.prototype,"valueExpression",void 0),qo=CI=m([X("esri.form.elements.FieldElement")],qo);const _G=qo;var AI;let Pu=AI=class extends p1{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new AI({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:ve(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};m([x({type:Number,json:{write:!0}})],Pu.prototype,"displayCount",void 0),m([x({type:["list"],json:{write:!0}})],Pu.prototype,"displayType",void 0),m([x({type:Boolean,json:{write:!0}})],Pu.prototype,"editable",void 0),m([x({type:[TS],json:{write:!0}})],Pu.prototype,"orderByFields",void 0),m([x({type:Number,json:{write:!0}})],Pu.prototype,"relationshipId",void 0),m([x({type:["relationship"],json:{read:!1,write:!0}})],Pu.prototype,"type",void 0),Pu=AI=m([X("esri.form.elements.RelationshipElement")],Pu);const xG=Pu;function SG(e){return{typesWithGroup:{base:p1,key:"type",typeMap:{attachment:vG,field:_G,group:e,relationship:xG}},typesWithoutGroup:{base:p1,key:"type",typeMap:{attachment:vG,field:_G,relationship:xG}}}}function MG(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function $G(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function IG(e,t,i=!0){return e?e.map(r=>Ya(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var PI;let El=PI=class extends p1{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return IG(e,OI,!1)}readElements(e,t){return MG(t.formElements,OI,!1)}writeElements(e,t){t.formElements=$G(e,OI,!1)}clone(){return new PI({description:this.description,elements:ve(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};m([x({json:{write:!0}})],El.prototype,"elements",void 0),m([ri("elements")],El.prototype,"castElements",null),m([Be("elements",["formElements"])],El.prototype,"readElements",null),m([Xe("elements")],El.prototype,"writeElements",null),m([x({type:["collapsed","expanded"],json:{write:!0}})],El.prototype,"initialState",void 0),m([x({type:String,json:{read:!1,write:!0}})],El.prototype,"type",void 0),El=PI=m([X("esri.form.elements.GroupElement")],El);const OI=SG(El),Zbe=El;var kI;const RI=SG(Zbe);let Pa=kI=class extends Ee{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return IG(e,RI)}readElements(e,t){return MG(t.formElements,RI)}writeElements(e,t){t.formElements=$G(e,RI)}clone(){return new kI({description:this.description,expressionInfos:ve(this.expressionInfos),elements:ve(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};m([x({type:String,json:{write:!0}})],Pa.prototype,"description",void 0),m([x({json:{write:!0}})],Pa.prototype,"elements",void 0),m([ri("elements")],Pa.prototype,"castElements",null),m([Be("elements",["formElements"])],Pa.prototype,"readElements",null),m([Xe("elements")],Pa.prototype,"writeElements",null),m([x({type:[Dbe],json:{write:!0}})],Pa.prototype,"expressionInfos",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],Pa.prototype,"preserveFieldValuesWhenHidden",void 0),m([x({type:String,json:{write:!0}})],Pa.prototype,"title",void 0),Pa=kI=m([X("esri.form.FormTemplate")],Pa);const Kbe=Pa;function TG(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function Ybe(e,t,i){if(!e&&!t||!i)return;const r=E0(i);EG(e,i,r),EG(t,i,r)}function EG(e,t,i){if(e)for(const r of e)Xbe(r.geometry,t,i)}function Xbe(e,t,i){if(ae(e)||!e.spatialReference||Xi(e.spatialReference,t))return;const r=E0(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)TG(e,e.rings,r);else if("paths"in e)TG(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}let Qbe=0;const CG="esri.layers.graphics.sources.MemorySource",FI=Pe.getLogger(CG);let Ou=class extends hl.LoadableMixin(j2(_a(gt))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=q(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);o_(e,this.layer.spatialReference,i);const r=wh.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const l of r.features){const f=l.attributes[s],d=this._idToClientGraphic.get(f);d&&(l.geometry=d.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new fe("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return o_(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:ai.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new fe("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const l=_=>"objectId"in _&&_.objectId!=null?_.objectId:"attributes"in _&&_.attributes[t]!=null?_.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const _ of e.deleteFeatures){const M=l(_);M!=null&&r.push(M)}const f=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const _ of e.updateFeatures)if(s.push(this._serializeFeature(_)),f){const M=l(_);M!=null&&f.set(M,_)}}Ybe(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:d,featureEditResults:v}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:r});return this.fullExtent=d,i&&i.finish(v.uidToObjectId),this._updateClientGraphicIds(f,v),this._createEditsResult(v)}async _prepareClientMapping(e,t){if(this._layerOrSourceGeometryType!=="mesh"||ae(e))return;const i=[];for(const{geometry:r}of e)!q(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new fe("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let l=0;l<e.length;l++){const f=e[l],d=this._serializeFeature(f);!r&&q(f.geometry)&&(r=f.geometry.type),i[l]=d,t.set(`${d.uid}`,f)}const s=this;return{features:i,inferredGeometryType:r,finish(l){const f=s.sourceJSON.objectIdField;for(const d in l){const v=l[d],_=t.get(d);_&&(_.attributes||(_.attributes={}),v===-1?delete _.attributes[f]:_.attributes[f]=v,s._addIdToClientGraphic(_))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get _layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(Qbe++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ae(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Dn.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await dpe("MemorySourceWorker",{strategy:Ie("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:s,hasZ:l,timeInfo:f}=this.layer,d=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const v=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",A=>{FI.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),A.preventDefault()}));const _={features:v.features,fields:t&&t.map(A=>A.toJSON()),geometryType:Zw.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||l,objectIdField:r,spatialReference:d?null:i&&i.toJSON(),timeInfo:f?f.toJSON():null},M=await this._connection.invoke("load",_,{signal:e});for(const A of M.warnings)FI.warn(A.message,{layer:this.layer,warning:A});M.featureErrors.length&&FI.warn(`Encountered ${M.featureErrors.length} validation errors while loading features`,M.featureErrors);const T=M.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(v.inferredGeometryType)&&(T.geometryType=Zw.toJSON(v.inferredGeometryType)),this.sourceJSON=T,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),v.finish(M.assignedObjectIds)}};m([H4({Type:Dr,ensureType:Ai(Dr)})],Ou.prototype,"itemType",void 0),m([x()],Ou.prototype,"type",void 0),m([x({constructOnly:!0})],Ou.prototype,"layer",void 0),m([x({readOnly:!0})],Ou.prototype,"_workerGeometryType",null),m([x()],Ou.prototype,"sourceJSON",void 0),Ou=m([X(CG)],Ou);function ewe(e){return"portalItem"in e}const AG=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):ewe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return m([x({type:String})],t.prototype,"apiKey",null),t=m([X("esri.layers.mixins.APIKeyMixin")],t),t},PG={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},OG=Object.values(PG),kG=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${OG.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),twe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${OG.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),iwe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function rPe(e){return!!kG.test(e)}function Od(e){if(ae(e))return null;const t=gn(e),i=t.path.match(kG)||t.path.match(twe);if(!i)return null;const[,r,s,l,f]=i,d=s.indexOf("/");return{title:LI(d!==-1?s.slice(d+1):s),serverType:PG[l.toLowerCase()],sublayer:f!=null&&f!==""?parseInt(f,10):null,url:{path:r}}}function rwe(e){const t=gn(e).path.match(iwe);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function LI(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function nwe(e,t){const i=[];if(e){const r=Od(e);q(r)&&r.title&&i.push(r.title)}if(t){const r=LI(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function RG(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",s="//features",l=(e=e.toLowerCase()).includes(t),f=e.includes(i)||e.includes(r)||e.includes(s);return l&&f}function swe(e,t){return e&&DF(VF(e,t))}function owe(e){let{url:t}=e;if(!t)return{url:t};t=VF(t,e.logger);const i=gn(t),r=Od(i.path);let s;if(q(r))r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const l=rwe(i.path);q(l)&&(t=l.serviceUrl,s=l.sublayerId)}return{url:DF(t),layerId:s}}function awe(e,t,i,r,s){Lp(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=Wc(r.url,i,e.layerId.toString()))}function nPe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),l=t.includes("/wmsserver");return i&&(r||s||l)}const FG=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Od(this.url);if(q(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",swe(i,Pe.getLogger(this.declaredClass)))}};return m([x()],t.prototype,"title",null),m([x({type:String})],t.prototype,"url",null),t=m([X("esri.layers.mixins.ArcGISService")],t),t},LG={read:{reader:N$},write:{allowNull:!0,writer:j$}},NI=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return m([x({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),m([x({json:{read:!1,write:!1,origins:{"web-map":LG,"portal-item":LG}}})],t.prototype,"effect",void 0),t=m([X("esri.layers.mixins.BlendLayer")],t),t},NG=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return m([x({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=m([X("esri.layers.mixins.CustomParametersMixin")],t),t},lwe=new yn.EventEmitter,jG="esri.layers.mixins.EditBusLayer",DG=Symbol(jG);function sPe(e){return e!=null&&typeof e=="object"&&DG in e}const uwe=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this.when().then(()=>{this.own([lwe.on("edits",s=>{var M,T,A;const l="layer"in s?s.layer:null,f="layer"in s?(M=s.layer)==null?void 0:M.url:s.serviceUrl,d="layer"in s?(T=s.layer)==null?void 0:T.layerId:s.layerId,v=s.event;if(l===this||f!==this.url)return;if(d!=null&&this.layerId!=null&&d===this.layerId)return void this.emit("edits",ve(v));const _=(A=v.editedFeatures)==null?void 0:A.find(({layerId:k})=>k===this.layerId);if(_){const{adds:k,updates:F,deletes:D}=_.editedFeatures,z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:k?k.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],deletedFeatures:D?D.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],updatedFeatures:F?F.map(({current:{attributes:H}})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],editedFeatures:ve(v.editedFeatures)};this.emit("edits",z)}})])},()=>{})}};return t=DG,i=m([X(jG)],i),i};var jI;const DI=new bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),VI=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Cl=jI=class extends Ee{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:l,units:f,distance:d}=this;return new Hn(te({geometry:ve(i),objectIds:ve(l),spatialRelationship:r,timeExtent:ve(s),where:t,units:f,distance:d},e))}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:l,distance:f}=this;return new jI({geometry:ve(t),objectIds:ve(s),spatialRelationship:i,timeExtent:ve(r),where:e,units:l,distance:f})}};m([x({type:String,json:{write:!0}})],Cl.prototype,"where",void 0),m([x({types:au,json:{write:!0}})],Cl.prototype,"geometry",void 0),m([x({type:DI.apiValues,json:{name:"spatialRel",read:{reader:DI.read},write:{allowNull:!1,writer:DI.write,overridePolicy(){return{enabled:q(this.geometry)}}}}})],Cl.prototype,"spatialRelationship",void 0),m([x({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Cl.prototype,"distance",void 0),m([x({type:[Number],json:{write:!0}})],Cl.prototype,"objectIds",void 0),m([x({type:VI.apiValues,json:{read:VI.read,write:{writer:VI.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Cl.prototype,"units",void 0),m([x({type:Go,json:{write:!0}})],Cl.prototype,"timeExtent",void 0),Cl=jI=m([X("esri.layers.support.FeatureFilter")],Cl);const cwe=Cl;var zI;const VG={read:{reader:N$},write:{writer:j$,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},zG={read:{reader:N$},write:{writer:j$,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},GG={name:"showExcludedLabels",default:!0};let kd=zI=class extends Ee{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t==null?void 0:t.origin){if(i.filter){const l=Object.keys(i.filter);if(l.length>1||l[0]!=="where")return(r=t.messages)==null||r.push(new fe("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new fe("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new zI({filter:q(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};m([x({type:cwe,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?jn(i,s,t):jn(i,null,t)}}}})],kd.prototype,"filter",void 0),m([x({json:{write:!0,origins:{"web-map":VG,"portal-item":VG}}})],kd.prototype,"includedEffect",void 0),m([x({json:{write:!0,origins:{"web-map":zG,"portal-item":zG}}})],kd.prototype,"excludedEffect",void 0),m([x({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":GG,"portal-item":GG}}})],kd.prototype,"excludedLabelsVisible",void 0),kd=zI=m([X("esri.layers.support.FeatureEffect")],kd);const hwe=kd,qG={write:{allowNull:!0}},pwe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return m([x({type:hwe,json:{origins:{"web-map":qG,"portal-item":qG}}})],t.prototype,"featureEffect",void 0),t=m([X("esri.layers.mixins.FeatureEffectLayer")],t),t};var ov;const N_=In()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),UG=N_.jsonValues.slice();ine(UG,"orthometric");const av=In()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Oa=ov=class extends Ee{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return N_.write(e,t,i)}readHeightModel(e,t,i){return N_.read(e)||(i&&i.messages&&i.messages.push(dwe(e,{context:i})),null)}readHeightUnit(e,t,i){return av.read(e)||(i&&i.messages&&i.messages.push(BG(e,{context:i})),null)}readHeightUnitService(e,t,i){return gN(e)||av.read(e)||(i&&i.messages&&i.messages.push(BG(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new ov({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=mN(t);return new ov({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t=te({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new ov;return t.read(e,{origin:"web-scene"}),t}};function BG(e,t){return new os("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function dwe(e,t){return new os("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}m([x({type:N_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:UG,default:"ellipsoidal"}}}})],Oa.prototype,"heightModel",void 0),m([Xe("web-scene","heightModel")],Oa.prototype,"writeHeightModel",null),m([Be(["web-scene","service"],"heightModel")],Oa.prototype,"readHeightModel",null),m([x({type:av.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:av.jsonValues,write:av.write}}}})],Oa.prototype,"heightUnit",void 0),m([Be("web-scene","heightUnit")],Oa.prototype,"readHeightUnit",null),m([Be("service","heightUnit")],Oa.prototype,"readHeightUnitService",null),m([x({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Oa.prototype,"vertCRS",void 0),m([Be("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Oa.prototype,"readVertCRS",null),Oa=ov=m([X("esri.geometry.HeightModelInfo")],Oa);const lv=Oa;function fwe(e){if(!e)return e;const{start:t,end:i}=e;return new Go({start:q(t)?md(t,-t.getTimezoneOffset(),"minutes"):t,end:q(i)?md(i,-i.getTimezoneOffset(),"minutes"):i})}function ywe(e){if(!e)return e;const{start:t,end:i}=e;return new Go({start:q(t)?md(t,t.getTimezoneOffset(),"minutes"):t,end:q(i)?md(i,i.getTimezoneOffset(),"minutes"):i})}var GI;let uv=GI=class extends Ee{constructor(e){super(e)}async collectRequiredFields(e,t){return cs(e,t,this.expression)}clone(){return new GI({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};m([x({type:String,json:{write:!0}})],uv.prototype,"expression",void 0),m([x({type:String,json:{write:!0}})],uv.prototype,"title",void 0),uv=GI=m([X("esri.layers.support.FeatureExpressionInfo")],uv);const HG=uv;function oPe(e){return f_[e]!=null}function gwe(e){return 1/(f_[e]||1)}function mwe(){const e=Object.keys(f_);return e.sort(),e}const vwe=mwe();var qI;const j_=In()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),WG=new bt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ku=qI=class extends Ee{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):q(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new qI({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&eO(this.featureExpressionInfo,e.featureExpressionInfo)}};m([x({type:HG,json:{write:!0}})],ku.prototype,"featureExpressionInfo",void 0),m([Be("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ku.prototype,"readFeatureExpressionInfo",null),m([Xe("featureExpressionInfo",{featureExpressionInfo:{type:HG},"featureExpression.value":{type:[0]}})],ku.prototype,"writeFeatureExpressionInfo",null),m([x({type:j_.apiValues,nonNullable:!0,json:{type:j_.jsonValues,read:j_.read,write:{writer:j_.write,isRequired:!0}}})],ku.prototype,"mode",null),m([x({type:Number,json:{write:!0}})],ku.prototype,"offset",void 0),m([x({type:vwe,json:{type:String,read:WG.read,write:WG.write}})],ku.prototype,"unit",null),ku=qI=m([X("esri.layers.support.ElevationInfo")],ku);const JG=ku,bwe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},D_={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},UI={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},ZG={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Lp}}},wwe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},_we={value:null,type:JG,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function aPe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const V_={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},xwe=je(te({},V_),{json:je(te({},V_.json),{origins:{"web-document":je(te({},V_.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?kg(t.layerDefinition.drawingInfo.transparency):void 0:kg(t.drawingInfo.transparency)}})}),Swe={type:Go,readOnly:!0,get(){var d,v;if(!((d=this.layer)==null?void 0:d.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(v=this.view)==null?void 0:v.timeExtent;let s=this.layer.timeExtent;e&&(s=ywe(s));let l=i?r&&s?r.intersection(s):r||s:s;if(!l||l.isEmpty||l.isAllTime)return l;t&&(l=l.offset(-t.value,t.unit)),e&&(l=fwe(l));const f=this._get("timeExtent");return l.equals(f)?f:l}},lPe={type:ai,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=ai.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=At.fromJSON(t.spatialReference)),i}}}},read:!1}},KG={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Mwe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},$we={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},YG={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};let Al=class extends yr(Ee){constructor(e){super(e)}};m([x({constructOnly:!0,json:{write:!0}})],Al.prototype,"name",void 0),m([x({constructOnly:!0,json:{write:!0}})],Al.prototype,"fields",void 0),m([x({constructOnly:!0,json:{write:!0}})],Al.prototype,"isAscending",void 0),m([x({constructOnly:!0,json:{write:!0}})],Al.prototype,"indexType",void 0),m([x({constructOnly:!0,json:{write:!0}})],Al.prototype,"isUnique",void 0),m([x({constructOnly:!0,json:{write:!0}})],Al.prototype,"description",void 0),Al=m([X("esri.layers.support.FeatureIndex")],Al);const BI=new bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Iwe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Pt(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function z_(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function Twe(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t==null?void 0:t.includes("envelopeaggregate")),centroid:!!(t==null?void 0:t.includes("centroidaggregate")),convexHull:!!(t==null?void 0:t.includes("convexhullaggregate"))}}function cv(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i==null?void 0:i.includes(t.toLowerCase()))}function XG(e,t,i){return{analytics:Ewe(t),attachment:Cwe(t),data:Awe(t),metadata:Pwe(t),operations:Owe(t.capabilities||e,t,i),query:kwe(t,i),queryRelated:Rwe(t),queryTopFeatures:Fwe(t),editing:Lwe(t)}}function Ewe(e){return{supportsCacheHint:cv(e.advancedQueryCapabilities,"queryAnalytics")}}function Cwe(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:cv(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Pt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=Iwe[r.name];s&&(i[s]=!!r.isEnabled)}),i}function Awe(e){return{isVersioned:Pt(e,"isDataVersioned",!1),supportsAttachment:Pt(e,"hasAttachments",!1),supportsM:Pt(e,"hasM",!1),supportsZ:Pt(e,"hasZ",!1)}}function Pwe(e){return{supportsAdvancedFieldProperties:Pt(e,"supportsFieldDescriptionProperty",!1)}}function Owe(e,t,i){const r=e?e.toLowerCase().split(",").map(A=>A.trim()):[],s=i?Od(i):null,l=r.includes(q(s)&&s.serverType==="MapServer"?"data":"query"),f=r.includes("editing")&&!t.datesInUnknownTimezone;let d=f&&r.includes("create"),v=f&&r.includes("delete"),_=f&&r.includes("update");const M=r.includes("changetracking"),T=t.advancedQueryCapabilities;return f&&!(d||v||_)&&(d=v=_=!0),{supportsCalculate:Pt(t,"supportsCalculate",!1),supportsTruncate:Pt(t,"supportsTruncate",!1),supportsValidateSql:Pt(t,"supportsValidateSql",!1),supportsAdd:d,supportsDelete:v,supportsEditing:f,supportsChangeTracking:M,supportsQuery:l,supportsQueryAnalytics:Pt(T,"supportsQueryAnalytic",!1),supportsQueryAttachments:Pt(T,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Pt(T,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Pt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:_,supportsExceedsLimitStatistics:Pt(t,"supportsExceedsLimitStatistics",!1)}}function kwe(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,l=tq(e),f=t==null?void 0:t.includes("MapServer"),d=!Ie("mapserver-pbf-enabled")&&f&&(l!=null?l:0)<10.81,v=RG(t),_=(e.supportedQueryFormats||"").split(",").reduce((M,T)=>{const A=T.toLowerCase().trim();return A&&M.add(A),M},new Set);return{supportsStatistics:Pt(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Pt(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Pt(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Twe(i),supportsCentroid:Pt(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Pt(i,"supportsQueryWithDistance",!1),supportsDistinct:Pt(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Pt(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Pt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Pt(i,"supportsHavingClause",!1),supportsOrderBy:Pt(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Pt(i,"supportsPagination",!1),supportsQuantization:Pt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Pt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Pt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Pt(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Pt(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Pt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Pt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Pt(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Pt(r,"allowOthersToQuery",!0),supportsHistoricMoment:Pt(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!d&&_.has("pbf"),supportsDisjointSpatialRelationship:Pt(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Pt(i,"supportsQueryWithCacheHint",!1)||cv(i,"query"),supportsDefaultSpatialReference:Pt(i,"supportsDefaultSR",!1),supportsCompactGeometry:v,supportsFullTextSearch:Pt(i,"supportsFullTextSearch",!1),maxRecordCountFactor:z_(e,"maxRecordCountFactor",void 0),maxRecordCount:z_(e,"maxRecordCount",void 0),standardMaxRecordCount:z_(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:z_(e,"tileMaxRecordCount",void 0)}}function Rwe(e){const t=e.advancedQueryCapabilities,i=Pt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Pt(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:cv(t,"queryRelated")}}function Fwe(e){return{supportsCacheHint:cv(e.advancedQueryCapabilities,"queryTopFilter")}}function Lwe(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Pt(e,"allowGeometryUpdates",!0),supportsGlobalId:Pt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Pt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Pt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Pt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Pt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Pt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Pt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Pt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Pt(t,"allowOthersToUpdate",!0)}}async function Nwe(e,t,i,r){const{source:s}=await e.load();if(await HI(e,t,r),!s.addAttachment)throw new fe(r,"Layer source does not support addAttachment capability");return s.addAttachment(t,i)}function HI(e,t,i){const{attributes:r}=t,{objectIdField:s}=e;return e.get("capabilities.data.supportsAttachment")?t?r?s&&r[s]?Promise.resolve():Promise.reject(new fe(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new fe(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new fe(i,"A feature is required to add/delete/update attachments")):Promise.reject(new fe(i,"this layer doesn't support attachments"))}async function jwe(e,t,i,r,s){const{source:l}=await e.load();if(await HI(e,t,s),!l.updateAttachment)throw new fe(s,"Layer source does not support updateAttachment capability");return l.updateAttachment(t,i,r)}async function Dwe(e,t,i){const r=await import("./editingSupport.d58335f7.js"),s=await e.load();return r.applyEdits(s,s.source,t,i)}async function Vwe(e,t,i,r){const{source:s}=await e.load();if(await HI(e,t,r),!s.deleteAttachments)throw new fe(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,i)}async function zwe(e,t,i){const{source:r}=await e.load({signal:t==null?void 0:t.signal});if(!r.fetchRecomputedExtents)throw new fe(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function Gwe(e,t,i,r){var k,F;t=G3.from(t);const{source:s,capabilities:l}=await e.load();if(!((k=l==null?void 0:l.data)==null?void 0:k.supportsAttachment))throw new fe(r,"this layer doesn't support attachments");const{attachmentTypes:f,objectIds:d,globalIds:v,num:_,size:M,start:T,where:A}=t;if(!((F=l==null?void 0:l.operations)==null?void 0:F.supportsQueryAttachments)){const D=d&&d.length>1,z=f&&f.length,H=v&&v.length,J=M&&M.length;if(D||z||H||J||_||T||A)throw new fe(r,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",t)}if(!(d==null?void 0:d.length)&&!A)throw new fe(r,"'objectIds' or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new fe(r,"Layer source does not support queryAttachments capability",t);return s.queryAttachments(t)}async function qwe(e,t,i,r){var l;const{source:s}=await e.load();if(!s.queryObjectIds)throw new fe(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds((l=Hn.from(t))!=null?l:e.createQuery(),i)}async function Uwe(e,t,i,r){var l;const{source:s}=await e.load();if(!s.queryFeatureCount)throw new fe(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount((l=Hn.from(t))!=null?l:e.createQuery(),i)}async function Bwe(e,t,i,r){var l;const{source:s}=await e.load();if(!s.queryExtent)throw new fe(r,"Layer source does not support queryExtent capability");return s.queryExtent((l=Hn.from(t))!=null?l:e.createQuery(),i)}async function Hwe(e,t,i,r){const{source:s}=await e.load();if(!s.queryRelatedFeatures)throw new fe(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(wd.from(t),i)}async function Wwe(e,t,i,r){const{source:s}=await e.load();if(!s.queryRelatedFeaturesCount)throw new fe(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(wd.from(t),i)}async function Jwe(e){const t=e.source;if(t==null?void 0:t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(q(r)&&(e.sourceJSON=te(te({},e.sourceJSON),r),e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await jbe(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function Zwe(e){const t=new Hn,i=e.get("capabilities.data"),r=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:l}=e;return t.timeExtent=s!=null&&l!=null?l.offset(-s.value,s.unit):l||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function QG(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function eq(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function tq(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}let m1=class extends yr(Ee){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};m([x({type:String,json:{read:{source:"shapeAreaFieldName"}}})],m1.prototype,"shapeAreaField",void 0),m([x({type:String,json:{read:{source:"shapeLengthFieldName"}}})],m1.prototype,"shapeLengthField",void 0),m([x({type:String,json:{read:e=>Epe.read(e)||Cpe.read(e)}})],m1.prototype,"units",void 0),m1=m([X("esri.layers.support.GeometryFieldsInfo")],m1);const Kwe=m1;var WI;let v1=WI=class extends Ee{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new gt}clone(){return new WI({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};m([x({type:String,json:{write:!0}})],v1.prototype,"floorField",void 0),m([x({json:{read:!1,write:!1}})],v1.prototype,"viewAllMode",void 0),m([x({json:{read:!1,write:!1}})],v1.prototype,"viewAllLevelIds",void 0),v1=WI=m([X("esri.layers.support.LayerFloorInfo")],v1);const iq=v1,rq=new bt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),nq=new bt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Uo=class extends yr(Ee){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};m([x({json:{read:rq.read,write:rq.write}})],Uo.prototype,"cardinality",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"composite",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"id",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"keyField",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"keyFieldInRelationshipTable",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"name",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"relatedTableId",void 0),m([x({json:{read:!0,write:!0}})],Uo.prototype,"relationshipTableId",void 0),m([x({json:{read:nq.read,write:nq.write}})],Uo.prototype,"role",void 0),Uo=m([X("esri.layers.support.Relationship")],Uo);const Ywe=Uo,Xwe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.spatialReference=At.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(gt.ofType(Al)),this.userIsAdmin=!1,this.version=void 0}readCapabilitiesFromService(i,r){return XG(i,r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return QG(r)}readObjectIdFieldFromService(i,r){return eq(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=owe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:Pe.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,l){awe(this,i,null,r,l)}readVersion(i,r){return tq(r)}};return m([x({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),m([Be("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),m([x({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),m([x({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),m([x({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),m([x({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),m([x({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),m([x({readOnly:!0})],t.prototype,"editingInfo",void 0),m([Be("editingInfo")],t.prototype,"readEditingInfo",null),m([x((()=>{const i=ve(_we),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),m([x({type:iq,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],t.prototype,"floorInfo",void 0),m([x({type:ai,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),m([x()],t.prototype,"gdbVersion",void 0),m([x({readOnly:!0,type:Kwe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),m([x({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:BI.read}}}})],t.prototype,"geometryType",void 0),m([x({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),m([x({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),m([x({readOnly:!0,type:lv})],t.prototype,"heightModelInfo",void 0),m([x({type:Date})],t.prototype,"historicMoment",void 0),m([x({readOnly:!0})],t.prototype,"isTable",void 0),m([Be("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),m([x({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),m([x(Mwe)],t.prototype,"minScale",void 0),m([Be("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),m([x($we)],t.prototype,"maxScale",void 0),m([Be("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),m([x({type:String})],t.prototype,"globalIdField",void 0),m([Be("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),m([x({type:String})],t.prototype,"objectIdField",void 0),m([Be("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),m([x({type:[Ywe],readOnly:!0})],t.prototype,"relationships",void 0),m([x()],t.prototype,"sourceJSON",void 0),m([x({type:Boolean})],t.prototype,"returnM",void 0),m([x({type:Boolean})],t.prototype,"returnZ",void 0),m([x({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),m([Be("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),m([x({type:At,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),m([x({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),m([x({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),m([x({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),m([x({type:gt.ofType(Al),readOnly:!0})],t.prototype,"indexes",void 0),m([x(ZG)],t.prototype,"url",null),m([Xe("url")],t.prototype,"writeUrl",null),m([x({readOnly:!0})],t.prototype,"userIsAdmin",void 0),m([x({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),m([Be("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=m([X("esri.layers.mixins.FeatureLayerBase")],t),t};let b1=class extends yr(Ee){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};m([x({type:String,json:{write:!0}})],b1.prototype,"expression",void 0),m([x({type:String,json:{write:!0}})],b1.prototype,"title",void 0),m([x({type:String,json:{write:!0}})],b1.prototype,"returnType",void 0),b1=m([X("esri.layers.support.ExpressionInfo")],b1);const JI=b1;var ZI;let Ru=ZI=class extends Ee{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new ZI({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ve(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};m([x({type:Boolean,json:{write:!0}})],Ru.prototype,"isAutoGenerated",void 0),m([x({type:String,json:{write:!0}})],Ru.prototype,"name",void 0),m([x({type:String,json:{write:!0}})],Ru.prototype,"alias",void 0),m([x({type:String,json:{write:!0}})],Ru.prototype,"onStatisticField",void 0),m([x({type:JI,json:{write:!0}})],Ru.prototype,"onStatisticExpression",void 0),m([x({type:String,json:{write:!0}})],Ru.prototype,"statisticType",void 0),Ru=ZI=m([X("esri.layers.support.AggregateField")],Ru);const Rd=Ru;let Ah=class extends Ee{constructor(){super(...arguments),this.type=null}};m([x({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Ah.prototype,"type",void 0),Ah=m([X("esri.layers.support.FeatureReduction")],Ah);const KI="__begin__",YI="__end__",Qwe=new RegExp(KI,"ig"),e2e=new RegExp(YI,"ig"),sq=new RegExp("^"+KI,"i"),oq=new RegExp(YI+"$","i"),G_='"',t2e=G_+" + ",i2e=" + "+G_;function r2e(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function n2e(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function XI(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=r2e(e.labelExpression),t.type="conventional"),t}function s2e(e){const t=XI(e);if(!t)return null;switch(t.type){case"conventional":return QI(t.expression);case"arcade":return t.expression}return null}function o2e(e){const t=XI(e);if(!t)return null;switch(t.type){case"conventional":return l2e(t.expression);case"arcade":return aq(t.expression)}return null}function QI(e){let t;return e?(t=Ka(e,i=>KI+'$feature["'+i+'"]'+YI),t=sq.test(t)?t.replace(sq,""):G_+t,t=oq.test(t)?t.replace(oq,""):t+G_,t=t.replace(Qwe,t2e).replace(e2e,i2e)):t='""',t}const a2e=/^\s*\{([^}]+)\}\s*$/i;function l2e(e){const t=e.match(a2e);return t&&t[1].trim()||null}const u2e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,c2e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,h2e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function aq(e){if(!e)return null;let t=u2e.exec(e)||c2e.exec(e);return t?t[1]||t[3]:(t=h2e.exec(e),t?t[2]:null)}var e8;let Ph=e8=class extends Ee{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?QI(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=QI(this.value)),e!=null&&(t[i]=e)}clone(){return new e8({expression:this.expression,title:this.title,value:this.value})}};m([x({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ph.prototype,"expression",void 0),m([Be("expression",["expression","value"])],Ph.prototype,"readExpression",null),m([Xe("expression")],Ph.prototype,"writeExpression",null),m([x({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ph.prototype,"title",void 0),m([x({json:{read:!1,write:!1}})],Ph.prototype,"value",void 0),Ph=e8=m([X("esri.layers.support.LabelExpressionInfo")],Ph);const lq=Ph,uq=[252,146,31,255],uPe=[153,153,153,255],p2e={type:"esriSMS",style:"esriSMSCircle",size:6,color:uq,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},d2e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:uq},f2e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},y2e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},g2e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},m2e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},v2e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},b2e=no.fromJSON(p2e),w2e=ps.fromJSON(d2e),_2e=fl.fromJSON(f2e),x2e=x0.fromJSON(y2e);function cPe(e){if(ae(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return b2e;case"polyline":return w2e;case"polygon":case"extent":return _2e}return null}const hPe=no.fromJSON(g2e),pPe=ps.fromJSON(m2e),dPe=fl.fromJSON(v2e);var t8;const q_=new bt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function cq(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function S2e(e){return(e==null?void 0:e.type)==="map-image"}function hq(e){var t,i;return!!S2e(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)==null?void 0:i.supportsArcadeExpressionForLabeling)}function M2e(e){return cq(e)||hq(e.layer)}let Mr=t8=class extends Ee{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=x2e,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,s,l)=>{switch(s){case"=":return r==l;case"<>":return r!=l;case">":return r>l;case">=":return r>=l;case"<":return r<l;case"<=":return r<=l}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),l=r[3],f=i(t[r[4]],r[5],r[6]);switch(l){case"AND":return s&&f;case"OR":return s||f}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=n2e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=aq(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&cq(r))e=new lq({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return XI(this)}getLabelExpressionArcade(){return s2e(this)}getLabelExpressionSingleField(){return o2e(this)}hash(){return JSON.stringify(this)}clone(){return new t8({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ve(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ve(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};m([x({type:String,json:{write:!0}})],Mr.prototype,"name",void 0),m([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Mr.prototype,"allowOverrun",void 0),m([x({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Mr.prototype,"deconflictionStrategy",void 0),m([x({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&hq(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Mr.prototype,"labelExpression",void 0),m([Be("labelExpression")],Mr.prototype,"readLabelExpression",null),m([Xe("labelExpression")],Mr.prototype,"writeLabelExpression",null),m([x({type:lq,json:{write:{overridePolicy:(e,t,i)=>M2e(i)?{allowNull:!0}:{enabled:!1}}}})],Mr.prototype,"labelExpressionInfo",void 0),m([Xe("labelExpressionInfo")],Mr.prototype,"writeLabelExpressionInfo",null),m([x({type:q_.apiValues,json:{type:q_.jsonValues,read:q_.read,write:q_.write}})],Mr.prototype,"labelPlacement",void 0),m([x({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Mr.prototype,"labelPosition",void 0),m([x({type:Number})],Mr.prototype,"maxScale",void 0),m([Xe("maxScale")],Mr.prototype,"writeMaxScale",null),m([x({type:Number})],Mr.prototype,"minScale",void 0),m([Xe("minScale")],Mr.prototype,"writeMinScale",null),m([x({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Mr.prototype,"repeatLabel",void 0),m([x({type:Number,cast:di,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Mr.prototype,"repeatLabelDistance",void 0),m([x({types:Yce,json:{origins:{"web-scene":{types:Xce,write:Vz,default:null}},write:Vz,default:null}})],Mr.prototype,"symbol",void 0),m([x({type:Boolean,json:{write:!0}})],Mr.prototype,"useCodedValues",void 0),m([x({type:String,json:{write:!0}})],Mr.prototype,"where",void 0),Mr=t8=m([X("esri.layers.support.LabelClass")],Mr);const hv=Mr;var i8;const r8=Ec({types:Y2}),$2e="esri.layers.support.FeatureReductionBinning";let zs=i8=class extends Ah{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());jn(i,r,t)}readRenderer(e,t,i){var s,l;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return r?(l=nv(r,t,i))!=null?l:void 0:t.defaultSymbol?t.types&&t.types.length?new iv({defaultSymbol:r8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(f=>({id:f.id,symbol:r8(f.symbol,f,i)}))}):new u1({symbol:r8(t.defaultSymbol,t,i)}):null}clone(){return new i8({fields:ve(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ve(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:ve(this.popupTemplate),renderer:ve(this.renderer)})}};m([wt({binning:"binning"})],zs.prototype,"type",void 0),m([wt({geohash:"geohash"})],zs.prototype,"binType",void 0),m([x({type:Number,range:{min:1,max:9},json:{write:!0}})],zs.prototype,"fixedBinLevel",void 0),m([x({type:[hv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],zs.prototype,"labelingInfo",void 0),m([x(UI)],zs.prototype,"labelsVisible",void 0),m([x(D_)],zs.prototype,"popupEnabled",void 0),m([x({type:l0,json:{name:"popupInfo",write:!0}})],zs.prototype,"popupTemplate",void 0),m([x({type:[Rd],json:{write:!0}})],zs.prototype,"fields",void 0),m([Xe("fields")],zs.prototype,"writeFields",null),m([x({types:rv,json:{write:{target:"drawingInfo.renderer"}}})],zs.prototype,"renderer",void 0),m([Be("renderer",["drawingInfo.renderer"])],zs.prototype,"readRenderer",null),zs=i8=m([X($2e)],zs);const pq=zs;var n8;const s8=Ec({types:Y2}),I2e="esri.layers.support.FeatureReductionCluster";function dq(e){var t;return e.type==="simple"&&!((t=e.visualVariables)==null?void 0:t.length)}let an=n8=class extends Ee{constructor(e){super(e),this.type="cluster",this.clusterRadius=di("80px"),this.clusterMinSize=di("12px"),this.clusterMaxSize=di("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){var s,l,f;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return((l=r==null?void 0:r.authoringInfo)==null?void 0:l.isAutoGenerated)?null:r?dq(r)?null:(f=nv(r,t,i))!=null?f:void 0:t.defaultSymbol?t.types&&t.types.length?new iv({defaultSymbol:s8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(d=>({id:d.id,symbol:s8(d.symbol,d,i)}))}):new u1({symbol:s8(t.defaultSymbol,t,i)}):null}readSymbol(e,t,i){var s,l,f;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return((l=r==null?void 0:r.authoringInfo)==null?void 0:l.isAutoGenerated)?null:r&&dq(r)?(f=nv(r,t,i))==null?void 0:f.symbol:null}writeSymbol(e,t,i,r){var l,f;const s=(f=(l=this.renderer)==null?void 0:l.authoringInfo)==null?void 0:f.isAutoGenerated;if(!this.renderer||s){const d=new u1({symbol:e});t.drawingInfo={renderer:d.write({},r)}}}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());jn(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>Rd.fromJSON(r))}clone(){return new n8({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ve(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ve(this.fields),renderer:ve(this.renderer),symbol:ve(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ve(this.popupTemplate)})}};m([x({type:["cluster"],readOnly:!0,json:{write:!0}})],an.prototype,"type",void 0),m([x({type:Number,cast:e=>e==="auto"?e:di(e),json:{write:!0}})],an.prototype,"clusterRadius",void 0),m([x({type:Number,cast:di,json:{write:!0}})],an.prototype,"clusterMinSize",void 0),m([x({type:Number,cast:di,json:{write:!0}})],an.prototype,"clusterMaxSize",void 0),m([x(D_)],an.prototype,"popupEnabled",void 0),m([x({type:l0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],an.prototype,"popupTemplate",void 0),m([x({types:rv,json:{write:{target:"drawingInfo.renderer"}}})],an.prototype,"renderer",void 0),m([Be("renderer",["drawingInfo.renderer"])],an.prototype,"readRenderer",null),m([x({types:Zce})],an.prototype,"symbol",void 0),m([Be("symbol",["drawingInfo.renderer"])],an.prototype,"readSymbol",null),m([Xe("symbol")],an.prototype,"writeSymbol",null),m([x({type:[hv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],an.prototype,"labelingInfo",void 0),m([x(UI)],an.prototype,"labelsVisible",void 0),m([x({type:[Rd],json:{write:!0}})],an.prototype,"fields",void 0),m([Xe("fields")],an.prototype,"writeFields",null),m([Be("fields")],an.prototype,"readFields",null),an=n8=m([X(I2e)],an);const fq=an;var o8;let U_=o8=class extends Ah{constructor(e){super(e),this.type="selection"}clone(){return new o8}};m([x({type:["selection"]})],U_.prototype,"type",void 0),U_=o8=m([X("esri.layers.support.FeatureReductionSelection")],U_);const yq=U_,gq={key:"type",base:Ah,typeMap:{cluster:fq,binning:pq}},T2e={types:{key:"type",base:Ah,typeMap:{selection:yq,cluster:fq,binning:pq}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:gq},"portal-item":{types:gq},"web-scene":{types:{key:"type",base:Ah,typeMap:{selection:yq}}}}}},w1={Base64:0,Hex:1,String:2,Raw:3},_1=8,mq=(1<<_1)-1;function Oh(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function E2e(e){const t=[];for(let i=0,r=e.length*_1;i<r;i+=_1)t[i>>5]|=(e.charCodeAt(i/_1)&mq)<<i%32;return t}function C2e(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=_1)t.push(String.fromCharCode(e[i>>5]>>>i%32&mq));return t.join("")}function A2e(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function P2e(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,l=4*e.length;s<l;s+=3){const f=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let d=0;d<4;d++)8*s+6*d>32*e.length?r.push(t):r.push(i.charAt(f>>6*(3-d)&63))}return r.join("")}function O2e(e,t){return e<<t|e>>>32-t}function B_(e,t,i,r,s,l){return Oh(O2e(Oh(Oh(t,e),Oh(r,l)),s),i)}function Wn(e,t,i,r,s,l,f){return B_(t&i|~t&r,e,t,s,l,f)}function Jn(e,t,i,r,s,l,f){return B_(t&r|i&~r,e,t,s,l,f)}function Zn(e,t,i,r,s,l,f){return B_(t^i^r,e,t,s,l,f)}function Kn(e,t,i,r,s,l,f){return B_(i^(t|~r),e,t,s,l,f)}function k2e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,l=271733878;for(let f=0;f<e.length;f+=16){const d=i,v=r,_=s,M=l;i=Wn(i,r,s,l,e[f+0],7,-680876936),l=Wn(l,i,r,s,e[f+1],12,-389564586),s=Wn(s,l,i,r,e[f+2],17,606105819),r=Wn(r,s,l,i,e[f+3],22,-1044525330),i=Wn(i,r,s,l,e[f+4],7,-176418897),l=Wn(l,i,r,s,e[f+5],12,1200080426),s=Wn(s,l,i,r,e[f+6],17,-1473231341),r=Wn(r,s,l,i,e[f+7],22,-45705983),i=Wn(i,r,s,l,e[f+8],7,1770035416),l=Wn(l,i,r,s,e[f+9],12,-1958414417),s=Wn(s,l,i,r,e[f+10],17,-42063),r=Wn(r,s,l,i,e[f+11],22,-1990404162),i=Wn(i,r,s,l,e[f+12],7,1804603682),l=Wn(l,i,r,s,e[f+13],12,-40341101),s=Wn(s,l,i,r,e[f+14],17,-1502002290),r=Wn(r,s,l,i,e[f+15],22,1236535329),i=Jn(i,r,s,l,e[f+1],5,-165796510),l=Jn(l,i,r,s,e[f+6],9,-1069501632),s=Jn(s,l,i,r,e[f+11],14,643717713),r=Jn(r,s,l,i,e[f+0],20,-373897302),i=Jn(i,r,s,l,e[f+5],5,-701558691),l=Jn(l,i,r,s,e[f+10],9,38016083),s=Jn(s,l,i,r,e[f+15],14,-660478335),r=Jn(r,s,l,i,e[f+4],20,-405537848),i=Jn(i,r,s,l,e[f+9],5,568446438),l=Jn(l,i,r,s,e[f+14],9,-1019803690),s=Jn(s,l,i,r,e[f+3],14,-187363961),r=Jn(r,s,l,i,e[f+8],20,1163531501),i=Jn(i,r,s,l,e[f+13],5,-1444681467),l=Jn(l,i,r,s,e[f+2],9,-51403784),s=Jn(s,l,i,r,e[f+7],14,1735328473),r=Jn(r,s,l,i,e[f+12],20,-1926607734),i=Zn(i,r,s,l,e[f+5],4,-378558),l=Zn(l,i,r,s,e[f+8],11,-2022574463),s=Zn(s,l,i,r,e[f+11],16,1839030562),r=Zn(r,s,l,i,e[f+14],23,-35309556),i=Zn(i,r,s,l,e[f+1],4,-1530992060),l=Zn(l,i,r,s,e[f+4],11,1272893353),s=Zn(s,l,i,r,e[f+7],16,-155497632),r=Zn(r,s,l,i,e[f+10],23,-1094730640),i=Zn(i,r,s,l,e[f+13],4,681279174),l=Zn(l,i,r,s,e[f+0],11,-358537222),s=Zn(s,l,i,r,e[f+3],16,-722521979),r=Zn(r,s,l,i,e[f+6],23,76029189),i=Zn(i,r,s,l,e[f+9],4,-640364487),l=Zn(l,i,r,s,e[f+12],11,-421815835),s=Zn(s,l,i,r,e[f+15],16,530742520),r=Zn(r,s,l,i,e[f+2],23,-995338651),i=Kn(i,r,s,l,e[f+0],6,-198630844),l=Kn(l,i,r,s,e[f+7],10,1126891415),s=Kn(s,l,i,r,e[f+14],15,-1416354905),r=Kn(r,s,l,i,e[f+5],21,-57434055),i=Kn(i,r,s,l,e[f+12],6,1700485571),l=Kn(l,i,r,s,e[f+3],10,-1894986606),s=Kn(s,l,i,r,e[f+10],15,-1051523),r=Kn(r,s,l,i,e[f+1],21,-2054922799),i=Kn(i,r,s,l,e[f+8],6,1873313359),l=Kn(l,i,r,s,e[f+15],10,-30611744),s=Kn(s,l,i,r,e[f+6],15,-1560198380),r=Kn(r,s,l,i,e[f+13],21,1309151649),i=Kn(i,r,s,l,e[f+4],6,-145523070),l=Kn(l,i,r,s,e[f+11],10,-1120210379),s=Kn(s,l,i,r,e[f+2],15,718787259),r=Kn(r,s,l,i,e[f+9],21,-343485551),i=Oh(i,d),r=Oh(r,v),s=Oh(s,_),l=Oh(l,M)}return[i,r,s,l]}function vq(e,t=w1.Hex){const i=t||w1.Base64,r=k2e(E2e(e),e.length*_1);switch(i){case w1.Raw:return r;case w1.Hex:return A2e(r);case w1.String:return C2e(r);case w1.Base64:return P2e(r)}}var a8;let pv=a8=class extends v_{writeLevels(e,t,i){for(const r in e){const s=this.levels[r];return void(t.stops=s)}}clone(){return new a8({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:$h(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:$h(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:ve(this.levels)})}};m([x()],pv.prototype,"levels",void 0),m([Xe("levels")],pv.prototype,"writeLevels",null),pv=a8=m([X("esri.views.2d.engine.LevelDependentSizeVariable")],pv);const R2e=Pe.getLogger("esri.views.2d.layers.support.clusterUtils");Ie.add("esri-cluster-arcade-enabled",!0);const F2e=Ie("esri-cluster-arcade-enabled"),L2e=(e,t,i,r,s)=>{const l=t.clone();if(!j2e(l))return l;if(l.authoringInfo||(l.authoringInfo=new V7),l.authoringInfo.isAutoGenerated=!0,"visualVariables"in l){const f=(l.visualVariables||[]).filter(v=>v.valueExpression!=="$view.scale"),d=bq(f);f.forEach(v=>{v.type==="rotation"?v.field?v.field=Fd(e,v.field,"avg_angle","number"):v.valueExpression&&(v.field=dv(e,v.valueExpression,"avg_angle","number"),v.valueExpression=null):v.normalizationField?(v.field=Fd(e,v.field,"avg_norm","number",v.normalizationField),v.normalizationField=null):v.field?v.field=Fd(e,v.field,"avg","number"):v.valueExpression&&(v.field=dv(e,v.valueExpression,"avg","number"),v.valueExpression=null)}),ae(d)&&!N2e(f)&&s&&(f.push(wq(i,r)),l.dynamicClusterSize=!0),l.visualVariables=f}switch(l.type){case"simple":break;case"pie-chart":for(const f of l.attributes)f.field?f.field=Fd(e,f.field,"sum","number"):f.valueExpression&&(f.field=dv(e,f.valueExpression,"sum","number"),f.valueExpression=null);break;case"unique-value":l.field?l.field=Fd(e,l.field,"mode","string"):l.valueExpression&&(l.field=dv(e,l.valueExpression,"mode","string"),l.valueExpression=null);break;case"class-breaks":l.normalizationField?(l.field=Fd(e,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=Fd(e,l.field,"avg","number"):l.valueExpression&&(l.field=dv(e,l.valueExpression,"avg","number"),l.valueExpression=null)}return l},bq=e=>{for(const t of e)if(t.type==="size")return t;return null};function fPe(e,t,i){const r=e.clone();let s=!1;if("visualVariables"in r){const l=(r.visualVariables||[]).filter(d=>d.valueExpression!=="$view.scale"),f=bq(l);ae(f)&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(wq(t,i)),r.dynamicClusterSize=!0,s=!0)}return{renderer:r,didInject:s}}const N2e=e=>{for(const t of e)if(t.field==="cluster_count")return!0;return!1},wq=(e,t)=>{const i=[new n1({value:0,size:0}),new n1({value:1})];if(ae(t))return new v_({field:"cluster_count",stops:[...i,new n1({value:2,size:0})]});const r=Object.keys(t).reduce((s,l)=>je(te({},s),{[l]:[...i,new n1({value:Math.max(2,t[l].minValue),size:e.clusterMinSize}),new n1({value:Math.max(3,t[l].maxValue),size:e.clusterMaxSize})]}),{});return new pv({field:"cluster_count",levels:r})},j2e=e=>{const t=i=>R2e.error(new fe("Unsupported-renderer",i,{renderer:e}));switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1;break}case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!F2e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function D2e(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,s="field",l=t.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+vq(l)}}}function dv(e,t,i,r){const s=vq(t),l=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(f=>f.name===l)||e.push(new Rd({name:l,isAutoGenerated:!0,onStatisticExpression:new JI({expression:t,returnType:r}),statisticType:i})),l}function Fd(e,t,i,r,s){if(t==="cluster_count"||e.some(f=>f.name===t))return t;const l=D2e(i,t,s);return e.some(f=>f.name===l)||(i==="avg_norm"?e.push(new Rd({name:l,isAutoGenerated:!0,onStatisticExpression:new JI({expression:`$feature.${t} / $feature.${s}`,returnType:r}),statisticType:"avg"})):e.push(new Rd({name:l,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),l}const V2e=e=>{let t=class extends e{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var d,v;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new Rd({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],l=((d=r.fields)!=null?d:[]).filter(_=>!_.isAutoGenerated);if(i.renderer&&!((v=i.renderer.authoringInfo)==null?void 0:v.isAutoGenerated))return r.fields=[...s,...l],r;if(i.symbol)return r.fields=[...s,...l],r.renderer=null,r;if(!this.renderer)return i;const f=L2e(s,this.renderer,i,null,!1);return r.fields=[...s,...l],r.renderer=f,r}};return m([x(T2e)],t.prototype,"featureReduction",null),t=m([X("esri.layers.mixins.FeatureReductionLayer")],t),t},z2e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},_q=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,l){(l&&l.layerContainerType==="ground"||i&&Zse(this,s,{},l))&&(r[s]=i)}writeOperationalLayerType(i,r,s,l){!i||l&&l.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i!=null?i:"Layer"}read(i,r){r&&(r.layer=this),Hse(this,i,s=>super.read(i,s),r)}write(i,r){var f,d;if(r==null?void 0:r.origin){const v=`${r.origin}/${r.layerContainerType||"operational-layers"}`,_=z2e[v];let M=_&&_[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&v==="web-scene/operational-layers"&&(M=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&v==="web-map/operational-layers"&&(M=!1),!M)return(f=r.messages)==null||f.push(new fe("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${v}'`,{layer:this})),null}const s=super.write(i,je(te({},r),{layer:this})),l=!!r&&!!r.messages&&!!r.messages.filter(v=>v instanceof fe&&v.name==="web-document-write:property-required").length;return R2(s==null?void 0:s.url)?((d=r==null?void 0:r.messages)==null||d.push(new fe("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:s}beforeSave(){}};return m([x({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),m([x(YG)],t.prototype,"listMode",void 0),m([Xe("listMode")],t.prototype,"writeListMode",null),m([x({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),m([Xe("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),m([x(V_)],t.prototype,"opacity",void 0),m([x({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),m([Xe("title"),Xe(["web-scene"],"title")],t.prototype,"writeTitle",null),m([x({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=m([X("esri.layers.mixins.OperationalLayer")],t),t};var l8;const u8=new bt({asc:"ascending",desc:"descending"});let x1=l8=class extends Ee{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new l8({field:this.field,valueExpression:this.valueExpression,order:this.order})}};m([x({type:String,json:{write:!0}})],x1.prototype,"field",void 0),m([x({type:String,json:{write:!0}})],x1.prototype,"valueExpression",void 0),m([x({type:u8.apiValues,json:{read:u8.read,write:u8.write}})],x1.prototype,"order",void 0),x1=l8=m([X("esri.layers.support.OrderByInfo")],x1);const xq=x1;function G2e(e,t,i){if(!e)return null;const r=e.find(l=>!!l.field);if(!r)return null;const s=new xq;return s.read(r,i),[s]}function q2e(e,t,i,r){const s=e.find(l=>!!l.field);s&&jn(i,[s.toJSON()],t)}const U2e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return m([x({type:[xq],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:G2e},write:{target:"layerDefinition.orderBy",writer:q2e}}})],t.prototype,"orderBy",void 0),t=m([X("esri.layers.mixins.OrderedLayer")],t),t},Sq=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem=oi(this.portalItem)}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new am({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await import("./layersLoader.debc7aa5.js").then(function(l){return l.l});return fr(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw Ks(s)||Pe.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Gf(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?gr==null?void 0:gr.findCredential(this.url):null;if(!r)return!0;const s=H_.credential===r?H_.user:await this._fetchEditingUser(i);return H_.credential=r,H_.user=s,ae(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var M,T,A;const r=(T=(M=this.portalItem)==null?void 0:M.portal)==null?void 0:T.user;if(r)return r;const s=gr.findServerInfo((A=this.url)!=null?A:"");if(!(s==null?void 0:s.owningSystemUrl))return null;const l=`${s.owningSystemUrl}/sharing/rest`,f=Ts.getDefault();if(f&&f.loaded&&ha(f.restUrl)===ha(l))return f.user;const d=`${l}/community/self`,v=q(i)?i.signal:null,_=await X2(li(d,{authMode:"no-prompt",query:{f:"json"},signal:v}));return _.ok?D6.fromJSON(_.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,l=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Ts.getDefault());return s&&l&&!RF(l.restUrl,s.restUrl)?(r.messages&&r.messages.push(new fe("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,je(te({},r),{layer:this}))}};return m([x({type:am})],t.prototype,"portalItem",null),m([Be("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),m([Xe("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),m([x({clonable:!1})],t.prototype,"resourceReferences",void 0),m([x({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=m([X("esri.layers.mixins.PortalLayer")],t),t},H_={credential:null,user:null};let fv=class extends ot{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};m([x()],fv.prototype,"updating",void 0),m([x()],fv.prototype,"status",void 0),fv=m([X("esri.layers.support.PublishingInfo")],fv);const B2e=fv,H2e="esri.layers.mixins.PublishableLayer",W2e=e=>{let t=class extends e{get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const r=new B2e;return this._checkPublishingStatus(r),r}_checkPublishingStatus(i){const r=250,s=125;let l=0;const f=async v=>{let _;i.updating=!0;try{_=await this.fetchPublishingStatus()}catch{_="unavailable"}_!=="published"&&_!=="unavailable"||(i.status==="publishing"&&this.refresh(),d.remove()),i.status=_,i.updating=!1,d.removed||(l=setTimeout(f,v,v+s))},d={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch(()=>d.remove()),f(r),this.own(d)}};return m([x({readOnly:!0,clonable:!1})],t.prototype,"publishingInfo",null),t=m([X(H2e)],t),t},yv=new gt,gv=new WeakMap;function J2e(e){Mq(e)&&yv.push(e)}function Z2e(e){Mq(e)&&yv.includes(e)&&yv.remove(e)}function Mq(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function $q(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:$q(t,e%t):0}let c8=0,W_=0;function K2e(){var t;const e=Date.now();for(const i of yv)i.refreshInterval&&e-((t=gv.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(gv.set(i,e),i.refresh(e))}gk(()=>{const e=Date.now();let t=0;for(const i of yv)t=$q(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?gv.get(i)||gv.set(i,e):gv.delete(i);if(t!==W_){if(W_=t,clearInterval(c8),W_===0)return void(c8=0);c8=setInterval(K2e,W_)}});const Iq=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Cw(()=>this.hasDataChanged()),this.when().then(()=>{J2e(this)},()=>{})}destroy(){Z2e(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Ql(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{Pe.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return m([x({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),m([x({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),m([x()],t.prototype,"refreshParameters",null),t=m([X("esri.layers.mixins.RefreshableLayer")],t),t},h8=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&Y2e(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return m([x({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),m([x({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),m([x({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=m([X("esri.layers.mixins.ScaleRangeLayer")],t),t};function Y2e(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Ld=In()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var p8;let mv=p8=class extends Ee{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Lme(this.value,this.unit,"milliseconds")}clone(){return new p8({value:this.value,unit:this.unit})}};m([x({type:Number,json:{write:!0},nonNullable:!0})],mv.prototype,"value",void 0),m([x({type:Ld.apiValues,json:{type:Ld.jsonValues,read:Ld.read,write:Ld.write},nonNullable:!0})],mv.prototype,"unit",void 0),mv=p8=m([X("esri.TimeInterval")],mv);const vv=mv;var d8;let S1=d8=class extends Ee{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new d8({respectsDaylightSaving:e,timezone:t})}};m([x({type:Boolean,json:{write:!0}})],S1.prototype,"respectsDaylightSaving",void 0),m([Be("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],S1.prototype,"readRespectsDaylightSaving",null),m([x({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],S1.prototype,"timezone",void 0),S1=d8=m([X("esri.layers.support.TimeReference")],S1);const X2e=S1;var f8;let Yn=f8=class extends Ee{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new Go({start:i,end:r})}writeFullTimeExtent(e,t){e&&q(e.start)&&q(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new vv({value:t.timeInterval,unit:Ld.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new vv({value:t.defaultTimeInterval,unit:Ld.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:l,fullTimeExtent:f,trackIdField:d,useTime:v}=this;return new f8({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:ve(l),fullTimeExtent:ve(f),trackIdField:d,useTime:v})}};m([x({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Yn.prototype,"cumulative",void 0),m([x({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Yn.prototype,"endField",void 0),m([x({type:Go,json:{write:{enabled:!0,allowNull:!0}}})],Yn.prototype,"fullTimeExtent",void 0),m([Be("fullTimeExtent",["timeExtent"])],Yn.prototype,"readFullTimeExtent",null),m([Xe("fullTimeExtent")],Yn.prototype,"writeFullTimeExtent",null),m([x({type:Boolean,json:{write:!0}})],Yn.prototype,"hasLiveData",void 0),m([x({type:vv,json:{write:{enabled:!0,allowNull:!0}}})],Yn.prototype,"interval",void 0),m([Be("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Yn.prototype,"readInterval",null),m([Xe("interval")],Yn.prototype,"writeInterval",null),m([x({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Yn.prototype,"startField",void 0),m([x({type:X2e,json:{write:{enabled:!0,allowNull:!0}}})],Yn.prototype,"timeReference",void 0),m([x({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Yn.prototype,"trackIdField",void 0),m([x({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Yn.prototype,"useTime",void 0),Yn=f8=m([X("esri.layers.support.TimeInfo")],Yn);const Tq=Yn,Eq=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const l=s.timeOffset,f=Ld.fromJSON(s.timeOffsetUnits);return l&&f?new vv({value:l,unit:f}):null}set timeInfo(i){oR(i,this.fieldsIndex),this._set("timeInfo",i)}};return m([x({type:Go,json:{write:!1}})],t.prototype,"timeExtent",void 0),m([x({type:vv})],t.prototype,"timeOffset",void 0),m([Be("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),m([x({value:null,type:Tq,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),m([x({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=m([X("esri.layers.mixins.TemporalLayer")],t),t},Cq=new bt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let kh=class extends yr(Ee){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};m([x({json:{write:!0}})],kh.prototype,"name",void 0),m([x({json:{write:!0}})],kh.prototype,"description",void 0),m([x({json:{read:Cq.read,write:Cq.write}})],kh.prototype,"drawingTool",void 0),m([x({json:{write:!0}})],kh.prototype,"prototype",void 0),m([x({json:{write:!0}})],kh.prototype,"thumbnail",void 0),kh=m([X("esri.layers.support.FeatureTemplate")],kh);const y8=kh;let Fu=class extends yr(Ee){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=W$(e[i]);return t}writeDomains(e,t){var r;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON());t.domains=i}};m([x({json:{write:!0}})],Fu.prototype,"id",void 0),m([x({json:{write:!0}})],Fu.prototype,"name",void 0),m([x({json:{write:!0}})],Fu.prototype,"domains",void 0),m([Be("domains")],Fu.prototype,"readDomains",null),m([Xe("domains")],Fu.prototype,"writeDomains",null),m([x({type:[y8],json:{write:!0}})],Fu.prototype,"templates",void 0),Fu=m([X("esri.layers.support.FeatureType")],Fu);const g8=Fu;function Q2e(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function Aq(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function Pq(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class Oq{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;const i=[];for(const r of t){const s=r&&r.name;if(s){const l=kq(s),f=Rq(s);this._fieldsMap.set(s,r),this._fieldsMap.set(l,r),this._normalizedFieldsMap.set(f,r),i.push(l),Q2e(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):tS(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),Aq(r)||Pq(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Aq(t)||Pq(t)||t.nullable||gae(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){var r;if(!t)return;let i=this._fieldsMap.get(t);return i||(i=(r=this._fieldsMap.get(kq(t)))!=null?r:this._normalizedFieldsMap.get(Rq(t)),i&&this._fieldsMap.set(t,i),i)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;const i=this.get(t);if(i)return(r=i.name)!=null?r:void 0}}function kq(e){return e.trim().toLowerCase()}function Rq(e){return aae(e).toLowerCase()}function e3e(){return{fields:{type:[J0],value:null},fieldsIndex:{readOnly:!0,get(){return new Oq(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||Pe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return aR(this.fieldsIndex,e)}}}}const m8=Pe.getLogger("esri.layers.support.labelingInfo"),t3e=/\[([^\[\]]+)\]/gi;function Fq(e,t,i){return e?e.map(r=>{const s=new hv;if(s.read(r,i),s.labelExpression){const l=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(t3e,(f,d)=>`[${i3e(d,l)}]`)}return s}):null}function i3e(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}const r3e={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function n3e(e,t){const i=ve(e);return i.some(r=>s3e(r,t))?[]:i}function s3e(e,t){const i=e.labelPlacement,r=r3e[t];if(!e.symbol)return m8.warn("No ILabelClass symbol specified."),!0;if(!r)return m8.error(new fe("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!r.includes(i)){const s=r[0];i&&m8.warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${s}`),e.labelPlacement=s}return!1}const ka=[];function Lq(e,t){var r,s;if(RG((r=e.url)!=null?r:""))return!0;const{wkid:i}=t;for(const l of ka){if(((s=e.version)!=null?s:0)>=l[0])return!0;if(typeof l[1]=="function"&&(l[1]=l[1]()),l[1].has(i))return!1}return!0}ka.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),ka.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),ka.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),ka.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),ka.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),ka.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),ka.push([10.61,()=>new Set([102497])]),ka.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),ka.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),ka.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function o3e(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await X2(r.populateFromStyle());if(fr(i),s.ok===!1){const l=s.error;t&&t.messages&&t.messages.push(new os("renderer:style-reference",`Failed to create unique value renderer from style reference: ${l.message}`,{error:l,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}const a3e=["oid","global-id"],l3e=["oid","global-id","guid"];function Nq({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},l){if(!i)return null;const f=f3e({editFieldsInfo:t,fields:i,objectIdField:r},l);if(!f.length)return null;const d=m3e({titleBase:s,fields:i,displayField:e}),v=g3e();return new l0({title:d,content:v,fieldInfos:f})}const u3e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],c3e=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!jq(e.name,t)&&(!i||e.name!==i)&&!a3e.includes(e.type)&&!u3e.some(s=>s.test(e.name));function h3e(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(p3e),e}function p3e(e,t){return e.type==="oid"?-1:t.type==="oid"?1:Dq(e)?-1:Dq(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function jq(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:l}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),l&&l.toLowerCase()].includes(e.toLowerCase())}function d3e(e,t){return e.editable&&!l3e.includes(e.type)&&!jq(e.name,t)}function f3e({editFieldsInfo:e,fields:t,objectIdField:i},r){return h3e(t!=null?t:[],(r==null?void 0:r.ignoreFieldTypes)||v3e).map(s=>new _g({fieldName:s.name,isEditable:d3e(s,e),label:s.alias,format:y3e(s),visible:c3e(s,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function y3e(e){switch(e.type){case"small-integer":case"integer":case"single":return new t0({digitSeparator:!0,places:0});case"double":return new t0({digitSeparator:!0,places:2});case"date":return new t0({dateFormat:"long-month-day-year"});default:return e.type==="string"&&fR(e.name)?new t0({digitSeparator:!0,places:0}):null}}function g3e(){return[new i0,new pg]}function m3e(e){const t=cae(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i!=null?i:""}function Dq(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const v3e=["geometry","blob","raster","guid","xml"],ys="FeatureLayer",Vq="esri.layers.FeatureLayer",b3e=Pe.getLogger(Vq);function J_(e,t){return new fe("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function zq(e){return e&&e instanceof gt}const v8=e3e();function b8(e,t,i){const r=!!(i==null?void 0:i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let vt=class extends Xwe(V2e(pwe(W2e(uwe(NI(U2e(Eq(h8(Iq(FG(_q(Sq(A_(NG(AG(yr(T0))))))))))))))))){constructor(...e){super(...e),this._handles=new Jr,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=At.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=oi(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?te({url:e},t):e}load(e){var r;const t=q(e)?e.signal:null;if(((r=this.portalItem)==null?void 0:r.loaded)&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Gf).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new fe("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,XG(e,t,this.url)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),((e=this._get("createQueryVersion"))!=null?e:0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)==null?void 0:e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readIsTable(e,t){var i;return(t=(i=t==null?void 0:t.layerDefinition)!=null?i:t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){(r==null?void 0:r.writeLayerSchema)&&jn(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return QG(t.layerDefinition||t)}readObjectIdField(e,t){return eq(t.layerDefinition||t)}get parsedUrl(){const e=gn(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Wc(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Wc(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){nR(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var s,l;const r=(s=(t=t.layerDefinition||t).drawingInfo)==null?void 0:s.renderer;if(r){const f=(l=nv(r,t,i))!=null?l:void 0;return f||b3e.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),f}if(t.defaultSymbol)return t.types&&t.types.length?new iv({defaultSymbol:w8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(f=>({id:f.id,symbol:w8(f.symbol,f,i)}))}):new u1({symbol:w8(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(zq(t)&&this._resetMemorySource(t),zq(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof gt?new Ou({layer:this,items:e}):e:null}readSource(e,t){var r;const i=wh.fromJSON(t.featureSet);return new Ou({layer:this,items:(r=i==null?void 0:i.features)!=null?r:[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e=e&&e.map(l=>y8.fromJSON(l)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){var s,l;const i=(l=(s=t.layerDefinition)==null?void 0:s.name)!=null?l:t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const f=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?nwe(this.url,i):i;let d=i;if(!d&&this.url){const v=Od(this.url);q(v)&&(d=v.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&f&&f!==d&&(d=f+" - "+d),LI(d)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e&&e.map(l=>(l=g8.fromJSON(l),this._fixTemplates(l.templates,r),this._fixTemplates(l.templates,s),l))}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return Nwe(this,e,t,ys)}async updateAttachment(e,t,i){return jwe(this,e,t,i,ys)}async applyEdits(e,t){return Dwe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Nq(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await ak(import("./FeatureLayerSource.9aea6849.js"),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=Zwe(this);e.dynamicDataSource=this.dynamicDataSource;const t=q(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,i=P_(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return Vwe(this,e,t,ys)}async fetchRecomputedExtents(e){return zwe(this,e,ys)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i==null||i.some(l=>{const{id:f}=l;return f!=null&&(f.toString()===r.toString()&&(s=l),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return Gwe(this,e,t,ys)}async queryFeatures(e,t){var s;const i=await this.load(),r=await i.source.queryFeatures((s=Hn.from(e))!=null?s:i.createQuery(),t);if(r==null?void 0:r.features)for(const l of r.features)l.layer=l.sourceLayer=i;return r}async queryObjectIds(e,t){return qwe(this,e,t,ys)}async queryFeatureCount(e,t){return Uwe(this,e,t,ys)}async queryExtent(e,t){return Bwe(this,e,t,ys)}async queryRelatedFeatures(e,t){return Hwe(this,e,t,ys)}async queryRelatedFeaturesCount(e,t){return Wwe(this,e,t,ys)}async queryTopFeatures(e,t){var l;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((l=r==null?void 0:r.query)==null?void 0:l.supportsTopFeaturesQuery))throw new fe(ys,"Layer source does not support queryTopFeatures capability");const s=await i.queryTopFeatures(_h.from(e),t);if(s==null?void 0:s.features)for(const f of s.features)f.layer=f.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r==null?void 0:r.query.supportsTopFeaturesQuery))throw new fe(ys,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(_h.from(e),t)}async queryTopFeaturesExtent(e,t){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((s=r==null?void 0:r.query)==null?void 0:s.supportsTopFeaturesQuery))throw new fe(ys,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(_h.from(e),t)}async queryTopFeatureCount(e,t){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((s=r==null?void 0:r.query)==null?void 0:s.supportsTopFeaturesQuery))throw new fe(ys,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(_h.from(e),t)}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var l,f;t=je(te({},t),{origin:(l=t==null?void 0:t.origin)!=null?l:void 0,writeLayerSchema:(f=t==null?void 0:t.writeLayerSchema)!=null?f:this._hasMemorySource()});const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(J_(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return s==null||s.push(J_(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(J_(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return s==null||s.push(J_(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new fe(ys,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||Lq(this,e))}async save(e){return(await import("./featureLayerUtils.07f1df4f.js")).save(this,e)}async saveAs(e,t){return(await import("./featureLayerUtils.07f1df4f.js")).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var s,l;if(!e){const f=((l=(s=this.capabilities)==null?void 0:s.operations)==null?void 0:l.supportsSync)?"Query,Sync":"Query";jn("layerDefinition.capabilities",f,t),i&&!(r==null?void 0:r.writeLayerSchema)&&(t.capabilities=f)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return li(this.url,{query:je(te({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),nR(this.renderer,this.fieldsIndex),oR(this.timeInfo,this.fieldsIndex),o3e(this,{origin:"service"})}async hasDataChanged(){return Jwe(this)}async fetchPublishingStatus(){const e=this.source;return(e==null?void 0:e.fetchPublishingStatus)?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i,r;const e=(i=(t=this.parsedUrl)==null?void 0:t.path)!=null?i:"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((r=this.fields)==null?void 0:r.some(s=>s.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new fe("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new fe("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};m([Be("service","capabilities")],vt.prototype,"readCapabilities",null),m([x({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],vt.prototype,"charts",void 0),m([x({readOnly:!0})],vt.prototype,"createQueryVersion",null),m([x({json:{read:{source:"layerDefinition.copyrightText"}}})],vt.prototype,"copyright",void 0),m([x({json:{read:{source:"layerDefinition.displayField"}}})],vt.prototype,"displayField",void 0),m([x({types:Cs,readOnly:!0})],vt.prototype,"defaultSymbol",void 0),m([x({type:uo})],vt.prototype,"dynamicDataSource",void 0),m([x({type:Boolean})],vt.prototype,"editingEnabled",null),m([Be(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],vt.prototype,"readEditingEnabled",null),m([Be("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],vt.prototype,"readEditingEnabledFromWebMap",null),m([Xe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],vt.prototype,"writeEditingEnabled",null),m([Xe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],vt.prototype,"writeEditingEnabledToWebMap",null),m([x(je(te({},v8.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:b8}}}}}))],vt.prototype,"fields",void 0),m([x(v8.fieldsIndex)],vt.prototype,"fieldsIndex",void 0),m([x({type:Kbe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],vt.prototype,"formTemplate",void 0),m([x({json:{read:{source:"layerDefinition.extent"}}})],vt.prototype,"fullExtent",void 0),m([x({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:b8,writer(e,t,i){const r=e?BI.toJSON(e):null;r&&jn(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:BI.read}}})],vt.prototype,"geometryType",void 0),m([x({json:{read:{source:"layerDefinition.hasM"}}})],vt.prototype,"hasM",void 0),m([x({json:{read:{source:"layerDefinition.hasZ"}}})],vt.prototype,"hasZ",void 0),m([x(KG)],vt.prototype,"id",void 0),m([x({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],vt.prototype,"infoFor3D",void 0),m([x({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],vt.prototype,"isTable",void 0),m([Be("service","isTable",["type","geometryType"]),Be("isTable",["layerDefinition.type","layerDefinition.geometryType"])],vt.prototype,"readIsTable",null),m([Xe("web-map","isTable")],vt.prototype,"writeIsTable",null),m([x(UI)],vt.prototype,"labelsVisible",void 0),m([x({type:[hv],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Fq},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Fq},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],vt.prototype,"labelingInfo",void 0),m([x((()=>{const e=ve(xwe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){jn(r,S2(t),i)}}},e})())],vt.prototype,"opacity",void 0),m([x(wwe)],vt.prototype,"legendEnabled",void 0),m([x({type:["show","hide"],json:(()=>{const e=ve(YG.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],vt.prototype,"listMode",void 0),m([Be("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],vt.prototype,"readGlobalIdField",null),m([x({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:b8}}}}})],vt.prototype,"objectIdField",void 0),m([Be("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],vt.prototype,"readObjectIdField",null),m([x({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],vt.prototype,"operationalLayerType",void 0),m([x(v8.outFields)],vt.prototype,"outFields",void 0),m([x({readOnly:!0})],vt.prototype,"parsedUrl",null),m([x({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],vt.prototype,"path",void 0),m([x(D_)],vt.prototype,"popupEnabled",void 0),m([x({type:l0,json:{name:"popupInfo",write:!0}})],vt.prototype,"popupTemplate",void 0),m([x({readOnly:!0})],vt.prototype,"defaultPopupTemplate",null),m([x({types:rv,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:fG,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],vt.prototype,"renderer",null),m([Be("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Be("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],vt.prototype,"readRenderer",null),m([x((()=>{const e=ve(bwe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],vt.prototype,"screenSizePerspectiveEnabled",void 0),m([x({clonable:!1})],vt.prototype,"source",null),m([ri("source")],vt.prototype,"castSource",null),m([Be("portal-item","source",["featureSet"]),Be("web-map","source",["featureSet"])],vt.prototype,"readSource",null),m([x({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],vt.prototype,"spatialReference",void 0),m([x({type:Number})],vt.prototype,"subtypeCode",void 0),m([x({type:[y8]})],vt.prototype,"templates",void 0),m([Be("templates",["editFieldsInfo","creatorField","editorField","templates"])],vt.prototype,"readTemplates",null),m([x({type:Tq})],vt.prototype,"timeInfo",void 0),m([x()],vt.prototype,"title",void 0),m([Be("service","title",["name"]),Be("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],vt.prototype,"readTitle",null),m([Be("web-map","title",["layerDefinition.name","title"])],vt.prototype,"readTitleFromWebMap",null),m([x({type:String})],vt.prototype,"sublayerTitleMode",void 0),m([x({json:{read:!1}})],vt.prototype,"type",void 0),m([x({type:String})],vt.prototype,"typeIdField",void 0),m([Be("service","typeIdField"),Be("typeIdField",["layerDefinition.typeIdField"])],vt.prototype,"readTypeIdField",null),m([x({type:[g8]})],vt.prototype,"types",void 0),m([Be("service","types",["types"]),Be("types",["layerDefinition.types"])],vt.prototype,"readTypes",null),m([x({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],vt.prototype,"visible",void 0),m([Be("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],vt.prototype,"readVisible",null),vt=m([X(Vq)],vt);const w8=Ec({types:Y2}),Gq=vt;var w3e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gq});const _3e=["$datastore","$map","$layer","$aggregatedfeatures"],x3e="esri.widgets.Feature.support.arcadeFeatureUtils",S3e=Pe.getLogger(x3e);function M3e(e){return typeof e=="string"?Im($$(e)):Array.isArray(e)?$3e(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?I3e(e):e}function $3e(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Im($$(t)):t}</li>`).join("")}</ul>`}function I3e(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?Im($$(i)):i}</td></tr>`}).join("")}</table>`}function T3e({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:s,map:l,graphic:f,interceptor:d}){i.forEach(v=>{const _=v.toLowerCase(),M={map:l,spatialReference:s.sr,interceptor:d};if(_==="$map"&&(r.vars[_]=t.convertMapToFeatureSetCollection(M)),_==="$layer"&&(r.vars[_]=t.convertFeatureLayerToFeatureSet({layer:f.sourceLayer,spatialReference:s.sr,interceptor:d})),_==="$datastore"&&(r.vars[_]=t.convertServiceUrlToWorkspace({url:f.sourceLayer.url,spatialReference:s.sr,interceptor:d})),_==="$aggregatedfeatures"){const T=f.layer,{fields:A,objectIdField:k,geometryType:F,spatialReference:D,displayField:z}=T,H=new Gq(je(te({fields:A,objectIdField:k,geometryType:F,spatialReference:D,displayField:z},T.type==="feature"?{templates:T.templates,typeIdField:T.typeIdField,types:T.types}:null),{source:e}));r.vars[_]=t.convertFeatureLayerToFeatureSet({layer:H,spatialReference:s.sr,interceptor:d})}})}function qq(){return import("./arcadeUtils.a5768f78.js").then(function(e){return e.ay})}function E3e(e){return"createQuery"in e&&"queryFeatures"in e}async function C3e({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const s=await t.whenLayerView(r);if(!E3e(s))return[];const l=s.createQuery();l.aggregateIds=[e.getObjectId()];const{features:f}=await s.queryFeatures(l);return f}async function Uq({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:s,graphic:l,view:f}){if(!e||!e.expression)return null;const d=t.createSyntaxTree(e.expression),v=_3e.filter(k=>t.hasVariable(d,k)),[_]=await Promise.all([C3e({graphic:l,view:f}),t.loadScriptDependencies(d,!0,v)]),M=t.getViewInfo({spatialReference:r}),T=t.createExecContext(l,M);T.interceptor=i,T.useAsync=!0,T3e({aggregatedFeatures:_,arcadeUtils:t,featureSetVars:v,context:T,viewInfo:M,map:s,graphic:l,interceptor:i});const A=t.createFunction(d,T);return t.executeAsyncFunction(A,T).catch(k=>S3e.error("arcade-execution-error",{error:k,graphic:l,expressionInfo:e}))}async function A3e({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:s,view:l}){if(!e||!e.length)return{};const f=await qq(),d={};for(const M of e)d[`expression/${M.name}`]=Uq({expressionInfo:M,arcadeUtils:f,interceptor:r,spatialReference:t,map:s,graphic:i,view:l});const v=await Ms(d),_={};for(const M in v)_[M]=M3e(v[M].value);return _}const P3e=1;let po=class extends _a(ot){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,s;const t=(r=this.contentElement)==null?void 0:r.type;(s=this.contentElementViewModel)==null||s.destroy();const i=t==="fields"?new J3:t==="media"?new _d:t==="text"?new B3:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=L0(this._compile,P3e,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:s,map:l,view:f,_abortController:d}=this;if(!(t&&i&&s&&l))return void this._set("contentElement",null);const v=await qq();if(d!==this._abortController)return;const _=await Uq({arcadeUtils:v,expressionInfo:t,graphic:i,interceptor:r,map:l,spatialReference:s,view:f});if(!_||_.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const M=await _.castAsJsonAsync(d.signal),T=M==null?void 0:M.type,A=T==="media"?Mg.fromJSON(M):T==="text"?s0.fromJSON(M):T==="fields"?i0.fromJSON(M):null;this._set("contentElement",A)},this.handles.add([Ve(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),fi),Ve(()=>[this.contentElement],()=>this._createVM(),fi)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e,t;return(t=(e=this.view)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e,t;return(t=(e=this.view)==null?void 0:e.map)!=null?t:null}set map(e){this._override("map",e)}};m([x()],po.prototype,"_abortController",void 0),m([x({type:yR})],po.prototype,"expressionInfo",void 0),m([x({type:Dr})],po.prototype,"graphic",void 0),m([x({readOnly:!0})],po.prototype,"contentElement",void 0),m([x({readOnly:!0})],po.prototype,"contentElementViewModel",void 0),m([x()],po.prototype,"interceptor",void 0),m([x()],po.prototype,"spatialReference",null),m([x({readOnly:!0})],po.prototype,"state",null),m([x()],po.prototype,"map",null),m([x()],po.prototype,"view",void 0),po=m([X("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],po);const _8=po,Z_={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let K_=class extends Gn{constructor(e,t){super(e,t),this.viewModel=new _8}initialize(){this.addHandles(Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),fi))}destroy(){this._destroyContentWidget()}renderLoading(){return ge("div",{key:"loading-container",class:Z_.loadingSpinnerContainer},ge("span",{class:this.classes(Z_.iconLoading,Z_.spinner)}))}render(){var t;const{state:e}=this.viewModel;return ge("div",{class:Z_.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new YD({viewModel:e}):i==="media"?new gz({viewModel:e}):i==="text"?new W3({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};m([x({type:_8})],K_.prototype,"viewModel",void 0),K_=m([X("esri.widgets.Feature.FeatureExpression")],K_);const O3e=K_,x8=100;let qi=class extends yr(o0(_a(ot))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await Ql(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await Ql(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await Ql(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=L0(this._queryController,x8,this),this._queryFeatureCountThrottled=L0(this._queryFeatureCountController,x8,this),this._queryPageThrottled=L0(this._queryPageController,x8,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:i}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,i.removeAll(),i.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([Ve(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled],()=>this._queryThrottled(),fi),Ve(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),Ve(()=>[this.layer,this.relationshipId,this.objectId],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:i}=this,r=1,s=Math.ceil(i/t)||1;this._set("featurePage",Math.min(Math.max(e,r),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t==null?void 0:t.loaded)?e.map(i=>{const r=i.clone(),s=$m(i.field,t);return r.field=s,r}):e}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){const t=0,i=10;this._set("displayCount",Math.min(Math.max(e,t),i))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t,i;return(i=(t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField])!=null?i:null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new gt}get relatedLayer(){const{layer:e,map:t,relationship:i}=this;return(e==null?void 0:e.loaded)?fye(t,e,i):null}get relationship(){var i,r;const{relationshipId:e,layer:t}=this;return typeof e=="number"&&(r=(i=t==null?void 0:t.relationships)==null?void 0:i.find(({id:s})=>s===e))!=null?r:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new gt}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:i,graphic:r,relatedLayer:s}=this;return t?"loading":e||i?"querying":r&&s?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){var _,M,T,A,k;const{layer:e,relatedLayer:t,relationshipId:i,objectId:r,_queryFeatureCountAbortController:s}=this;if(await(e==null?void 0:e.load()),!t||typeof r!="number"||!((M=(_=e==null?void 0:e.capabilities)==null?void 0:_.queryRelated)==null?void 0:M.supportsCount))return void this._set("featureCount",0);await t.load();const l=t.createQuery(),f=(k=(A=(T=e.capabilities)==null?void 0:T.queryRelated)==null?void 0:A.supportsCacheHint)!=null?k:!1,d=new wd({cacheHint:f,relationshipId:i,returnGeometry:!1,objectIds:[r],where:l.where}),v=await e.queryRelatedFeaturesCount(d,{signal:s==null?void 0:s.signal});this._set("featureCount",v[r]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:i}=this;return t?e:i?e.slice(0,i):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:i,_queryPageAbortController:r}=this;!i||t<2||e.addMany(await this._queryRelatedFeatures({signal:r==null?void 0:r.signal}))}async _queryRelatedFeatures(e){var re,ee,le,me,we;const{orderByFieldsFixedCasing:t,showAllEnabled:i,featuresPerPage:r,displayCount:s,layer:l,relationshipId:f,featurePage:d,featureCount:v,relatedLayer:_}=this;await(l==null?void 0:l.load());const{relationship:M,objectId:T}=this;if(!M||typeof T!="number"||!((ee=(re=l==null?void 0:l.capabilities)==null?void 0:re.queryRelated)==null?void 0:ee.supportsPagination))return[];const A=i?((d-1)*r+v)%v:0,k=i?r:s;if(!_)return[];await _.load();const F=_.objectIdField,D=[...t==null?void 0:t.map(_e=>_e.field),F],z=t==null?void 0:t.map(_e=>`${_e.field} ${_e.order}`),H=((me=(le=l.capabilities)==null?void 0:le.queryRelated)==null?void 0:me.supportsCacheHint)||!1,J=_.createQuery(),Y=new wd({orderByFields:z,start:A,num:k,outFields:D,cacheHint:H,relationshipId:f,returnGeometry:!1,objectIds:[T],where:J.where}),ie=((we=(await l.queryRelatedFeatures(Y,{signal:e==null?void 0:e.signal}))[T])==null?void 0:we.features)||[];return ie.forEach(_e=>_e.sourceLayer=_),ie}};m([x()],qi.prototype,"_queryAbortController",void 0),m([x()],qi.prototype,"_queryPageAbortController",void 0),m([x()],qi.prototype,"_queryFeatureCountAbortController",void 0),m([x({value:1})],qi.prototype,"featurePage",null),m([x()],qi.prototype,"featuresPerPage",void 0),m([x({readOnly:!0})],qi.prototype,"orderByFieldsFixedCasing",null),m([x()],qi.prototype,"description",void 0),m([x({readOnly:!0})],qi.prototype,"itemDescriptionFieldName",null),m([x({value:3})],qi.prototype,"displayCount",null),m([x({type:Dr})],qi.prototype,"graphic",void 0),m([x()],qi.prototype,"layer",void 0),m([x()],qi.prototype,"map",void 0),m([x({readOnly:!0})],qi.prototype,"objectId",null),m([x({readOnly:!0})],qi.prototype,"objectIdField",null),m([x()],qi.prototype,"orderByFields",void 0),m([x({readOnly:!0})],qi.prototype,"relatedFeatures",null),m([x({readOnly:!0})],qi.prototype,"relatedLayer",null),m([x({readOnly:!0})],qi.prototype,"relationship",null),m([x({readOnly:!0})],qi.prototype,"featureCount",void 0),m([x({readOnly:!0})],qi.prototype,"relatedFeatureViewModels",null),m([x()],qi.prototype,"relationshipId",void 0),m([x()],qi.prototype,"showAllEnabled",void 0),m([x({readOnly:!0})],qi.prototype,"state",null),m([x()],qi.prototype,"title",void 0),qi=m([X("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],qi);const S8=qi,Lu={base:"esri-feature-relationship",esriWidget:"esri-widget",listContainer:"esri-feature-relationship__list",listContainerQuerying:"esri-feature-relationship__list--querying",featureObserver:"esri-feature__feature-observer",stickySpinnerContainer:"esri-feature__sticky-loading-container",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner",iconLoading:"esri-icon-loading-indicator esri-rotating"},Bq={title:!0,description:!0};let gs=class extends Gn{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{(i==null?void 0:i.isIntersecting)&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new S8,this.messages=null,this.messagesCommon=null,this.visibleElements=te({},Bq),this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:s,featuresPerPage:l,featurePage:f}=this.viewModel;i==="ready"&&r&&s.length>=l*f&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new U3,this.addHandles([Ve(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),fi),Ve(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),fs(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([import("./calcite-list.e560b95e.js"),import("./calcite-list-item.8374cab2.js"),import("./calcite-icon.33b58de2.js"),import("./calcite-notice.dc018d47.js")])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=oi(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i}=this.viewModel;return!e&&(t>i||i===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return wl(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return te(te({},Bq),e)}renderStickyLoading(){return this.viewModel.state==="querying"?ge("div",{key:"sticky-loader",class:Lu.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return ge("span",{class:this.classes(Lu.iconLoading,Lu.spinner)})}renderLoading(){return ge("div",{key:"loading-container",class:Lu.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return ge("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=$l(this.container)?"chevron-left":"chevron-right";return ge("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var s,l;const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&((s=e.formattedAttributes)==null?void 0:s.global[t]);const r=e.state==="loading";return ge("calcite-list-item",{key:e.uid,label:r?`${(l=this.messagesCommon)==null?void 0:l.loading}\u2026`:i,description:r?"\u2026":e.description,onclick:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?ge("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return ge("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,color:"blue",scale:"s",width:"full"},ge("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return ge("div",{key:"feature-observer",class:Lu.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return ge("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return ge("div",{key:"list-container",class:this.classes(Lu.listContainer,{[Lu.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return ge("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,color:"red",scale:"s",width:"full"},ge("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return ge("div",{class:this.classes(Lu.base,Lu.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(i=>{this.addHandles(Ve(()=>[i.title,i.state],()=>this.scheduleRender(),fi),t)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,r=t.title&&this.title;this._featureElementInfo.set({description:i,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await Ew(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};m([x()],gs.prototype,"_relatedFeatureIntersectionObserverNode",void 0),m([x({readOnly:!0})],gs.prototype,"displayShowAllButton",null),m([x({readOnly:!0})],gs.prototype,"displayListItems",null),m([x()],gs.prototype,"description",null),m([x({readOnly:!0})],gs.prototype,"featureCountDescription",null),m([x()],gs.prototype,"headingLevel",void 0),m([x()],gs.prototype,"title",null),m([x({type:S8})],gs.prototype,"viewModel",void 0),m([x(),qn("esri/widgets/Feature/t9n/Feature")],gs.prototype,"messages",void 0),m([x(),qn("esri/t9n/common")],gs.prototype,"messagesCommon",void 0),m([x()],gs.prototype,"visibleElements",void 0),m([ri("visibleElements")],gs.prototype,"castVisibleElements",null),gs=m([X("esri.widgets.Feature.FeatureRelationship")],gs);const Hq=gs;class k3e{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var bv;const R3e=1,Wq="content-view-models",Jq="relationship-view-models",Zq={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let tr=bv=class extends o0(ot){constructor(e){super(e),this._handles=new Jr,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=L0(this._graphicChanged,R3e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities=te({},Zq),this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent||t.type==="relationship"&&i.relationshipContent},this._handles.add(Ve(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),fi))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return q(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return oye(jD(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return OD(this.graphic)}castAbilities(e){return te(te({},Zq),e)}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){var e,t;return(t=(e=this.view)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof _d&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof _d&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof _d&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){Ks(i)||(this._error=i,Pe.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new s0({text:e}),0).text:e}_destroyContentViewModels(){var e,t;(e=this._handles)==null||e.remove(Jq),(t=this._handles)==null||t.remove(Wq),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var s;const i=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),r=t==null?void 0:t.getObjectId();return q(i)&&q(r)&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){t==null||t.filter(Boolean).forEach(r=>{e.find(s=>this._matchesFeature(s,r))||e.add(new bv({abilities:{relationshipContent:!1},map:i,graphic:r}))}),e.forEach(r=>{(t==null?void 0:t.find(l=>this._matchesFeature(r,l)))||e.remove(r)})}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:s}=e,l=r==null?void 0:r.type;s&&l&&(l==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),l==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),l==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:s,title:l,description:f}=e,{_sourceLayer:d,graphic:v,map:_}=this,M=new S8(te({displayCount:i,graphic:v,orderByFields:r,relationshipId:s,layer:d,map:_},this._compileTitleAndDesc({title:l,description:f})));return this.contentViewModels[t]=M,this._handles.add(fs(()=>M.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(M)),Jq),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:l,view:f}=this,d=new _8({expressionInfo:i,graphic:r,interceptor:bv.interceptor,map:s,spatialReference:l,view:f});return this.contentViewModels[t]=d,this._handles.add(Ve(()=>d.contentElementViewModel,()=>this._setExpressionContentVM(d,t),fi),Wq),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s}=e;return this.contentViewModels[t]=new C$(te({graphic:i},this._compileTitleAndDesc({title:s,description:r}))),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new B3({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:l,_expressionAttributes:f}=this,{attributes:d}=s,v=l.global;return{title:hd({attributes:d,fieldInfoMap:i,globalAttributes:v,expressionAttributes:f,layer:r,text:e}),description:hd({attributes:d,fieldInfoMap:i,globalAttributes:v,expressionAttributes:f,layer:r,text:t})}}_createFieldsVMParams(e,t){var _;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,s=te(te({},r.global),r.content[t]),l=(_=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:_.filter(({fieldName:M})=>_$(M)||wu(M)||s.hasOwnProperty(M)),f=i==null?void 0:i.expressionInfos,{description:d,title:v}=e;return te({attributes:s,expressionInfos:f,fieldInfos:l},this._compileTitleAndDesc({title:v,description:d}))}_compileFields(e,t){const i=e.clone(),r=new J3(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:s,formattedAttributes:l,_effectivePopupTemplate:f,relatedInfos:d,_sourceLayer:v,_expressionAttributes:_}=this,{attributes:M}=r,{description:T,mediaInfos:A,title:k}=e;return te({abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:M,layer:v,fieldInfoMap:s,formattedAttributes:te(te({},l.global),l.content[t]),expressionAttributes:_,mediaInfos:A,popupTemplate:f,relatedInfos:d},this._compileTitleAndDesc({title:k,description:T}))}_compileMedia(e,t){const i=e.clone(),r=new _d(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const{attributes:l}=t,f=this.formattedAttributes.global;e.text=hd({attributes:l,fieldInfoMap:i,globalAttributes:f,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new B3(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,s=t==null?void 0:t.editFieldsInfo;return r&&s?sye(s,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,{attributes:l}=r,f=this.formattedAttributes.global;return hd({attributes:l,fieldInfoMap:t,globalAttributes:f,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return q3(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return q3(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s,spatialReference:l,map:f,view:d}=this;if(t!==this._featureAbortController||!r)return;await uye({graphic:r,popupTemplate:s,layer:i,spatialReference:l},e);const{content:{value:v},title:{value:_}}=await Ms({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:M}}=await Ms({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:A3e({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:l,graphic:r,map:f,interceptor:bv.interceptor,view:d})});t===this._featureAbortController&&r&&(this._expressionAttributes=M,this._graphicExpressionAttributes=te(te({},r.attributes),M),this._set("formattedAttributes",this._createFormattedAttributes(v)),this._set("title",this._compileTitle(_)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(v)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:l,_sourceLayer:f,_fieldInfoMap:d,_graphicExpressionAttributes:v}=this;i.content[t]=I$({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:te(te({},v),e.attributes),layer:f,fieldInfoMap:d,relatedInfos:l})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:l,_fieldInfoMap:f,_graphicExpressionAttributes:d}=this;i.content[t]=I$({fieldInfos:e.fieldInfos,graphic:r,attributes:te(te({},d),e.attributes),layer:l,fieldInfoMap:f,relatedInfos:s})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:l,_graphicExpressionAttributes:f}=this,d=t==null?void 0:t.fieldInfos,v={global:I$({fieldInfos:d,graphic:i,attributes:f,layer:s,fieldInfoMap:l,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((_,M)=>{_.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:_,contentElementIndex:M,formattedAttributes:v}),_.type==="media"&&this._createMediaFormattedAttributes({contentElement:_,contentElementIndex:M,formattedAttributes:v})}),v}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,jD(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const l=q(s.associatedLayer)?await s.associatedLayer.load(i):s;if(!l)return;const f=t.filter(_=>_&&wu(_.fieldName));if(!f||!f.length)return;t.forEach(_=>this._configureRelatedInfo(_,l));const d=await gve({relatedInfos:r,layer:l},i);Object.keys(d).forEach(_=>{var A;const M=r.get(_.toString()),T=(A=d[_])==null?void 0:A.value;M&&T&&(M.layerInfo=T.data)});const v=await mve({graphic:e,relatedInfos:r,layer:l},i);Object.keys(v).forEach(_=>{var M;hve((M=v[_])==null?void 0:M.value,r.get(_.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=T7(e.fieldName);if(!r)return;const{layerId:s,fieldName:l}=r;if(!s)return;const f=i.get(s.toString())||cve(s,t);f&&(vve({relatedInfo:f,fieldName:l,fieldInfo:e}),this.relatedInfos.set(s,f))}};tr.interceptor=new k3e(pye,dye),m([x()],tr.prototype,"_error",void 0),m([x()],tr.prototype,"_featureAbortController",void 0),m([x({readOnly:!0})],tr.prototype,"_effectivePopupTemplate",null),m([x({readOnly:!0})],tr.prototype,"_fieldInfoMap",null),m([x({readOnly:!0})],tr.prototype,"_sourceLayer",null),m([x()],tr.prototype,"abilities",void 0),m([ri("abilities")],tr.prototype,"castAbilities",null),m([x({readOnly:!0})],tr.prototype,"content",void 0),m([x({readOnly:!0})],tr.prototype,"contentViewModels",void 0),m([x()],tr.prototype,"description",void 0),m([x({type:Boolean})],tr.prototype,"defaultPopupTemplateEnabled",void 0),m([x({readOnly:!0})],tr.prototype,"state",null),m([x({readOnly:!0})],tr.prototype,"formattedAttributes",void 0),m([x({type:Dr,value:null})],tr.prototype,"graphic",null),m([x({readOnly:!0})],tr.prototype,"lastEditInfo",void 0),m([x({readOnly:!0})],tr.prototype,"relatedInfos",void 0),m([x()],tr.prototype,"spatialReference",null),m([x({readOnly:!0})],tr.prototype,"title",void 0),m([x()],tr.prototype,"map",null),m([x({readOnly:!0})],tr.prototype,"waitingForContent",null),m([x()],tr.prototype,"view",void 0),tr=bv=m([X("esri.widgets.FeatureViewModel")],tr);const M8=tr,lr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},Kq=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>KD(i)&&!i.destroyed?ge("div",{class:lr.contentNode,key:i},i.render()):i instanceof HTMLElement?ge("div",{class:lr.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):Pye(i)?ge("div",{class:lr.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=m([X("esri.widgets.Feature.ContentMixin")],t),t};var $8;const Yq={title:!0,content:!0,lastEditedInfo:!0},Xq="relationship-handles";let _n=$8=class extends Kq(Gn){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements=te({},Yq),this.viewModel=new M8}initialize(){this.addHandles(Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),fi))}loadDependencies(){return import("./calcite-notice.dc018d47.js")}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}castVisibleElements(e){return te(te({},Yq),e)}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{state:e}=this.viewModel,t=ge("div",{class:lr.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return ge("div",{class:this.classes(lr.base,lr.esriWidget)},t)}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return ge("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?ge("div",{key:"error-title",slot:"title"},e.errorMessage):null,ge("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return ge("div",{key:"loading-container",class:lr.loadingSpinnerContainer},ge("span",{class:this.classes(lr.iconLoading,lr.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?ge("div",{class:lr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?ge(A$,{level:this.headingLevel,class:lr.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?ge("div",{class:lr.contentNode,key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:ge("div",{class:lr.contentNode,key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);case"relationship":return this.renderRelationship(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?ge("div",{key:this._buildKey("attachments-element",e),class:this.classes(lr.contentElement)},t.render()):null}renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?ge("div",{key:this._buildKey("relationship-element",e),class:lr.contentElement},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ge("div",{key:this._buildKey("expression-element",e),class:lr.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?ge("div",{key:this._buildKey("custom-element",t),class:lr.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ge("div",{key:this._buildKey("fields-element",e),class:lr.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ge("div",{key:this._buildKey("media-element",e),class:lr.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:s}=i,l=i.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,f=wl(l,{date:r,user:s});return ge("div",{key:"edit-info-element",class:this.classes(lr.lastEditedInfo,lr.contentElement)},f)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?ge("div",{key:this._buildKey("text-element",t),class:this.classes(lr.contentElement,lr.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this.removeHandles(Xq),this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_addFeatureRelationshipHandles(e){const{flowItems:t,visibleElements:i}=this;this.addHandles([fs(()=>e,"select-record",({featureViewModel:r})=>{t&&(r.abilities={relationshipContent:!0},t.push(new $8({flowItems:t,viewModel:r,visibleElements:i})))}),fs(()=>e,"show-all-records",()=>{if(!t)return;const{viewModel:r}=e;r.showAllEnabled=!0;const s=new Hq({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(s),t.push(s)})],Xq)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,l)=>{if(s.type==="attachments"&&(this._contentWidgets[l]=new xye({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:r[l]})),s.type==="fields"&&(this._contentWidgets[l]=new YD({viewModel:r[l]})),s.type==="media"&&(this._contentWidgets[l]=new gz({viewModel:r[l]})),s.type==="text"&&(this._contentWidgets[l]=new W3({viewModel:r[l]})),s.type==="custom"&&(this._contentWidgets[l]=new W3({viewModel:r[l]})),s.type==="expression"&&(this._contentWidgets[l]=new O3e({viewModel:r[l]})),s.type==="relationship"){const f=new Hq({viewModel:r[l]});this._addFeatureRelationshipHandles(f),this._contentWidgets[l]=f}},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new W3({viewModel:s}))}this.scheduleRender()}};m([x()],_n.prototype,"graphic",null),m([x()],_n.prototype,"defaultPopupTemplateEnabled",null),m([x()],_n.prototype,"flowItems",void 0),m([x()],_n.prototype,"headingLevel",void 0),m([x()],_n.prototype,"label",null),m([x(),qn("esri/widgets/Feature/t9n/Feature")],_n.prototype,"messages",void 0),m([x(),qn("esri/t9n/common")],_n.prototype,"messagesCommon",void 0),m([x(),qn("esri/widgets/support/t9n/uriUtils")],_n.prototype,"messagesURIUtils",void 0),m([x()],_n.prototype,"spatialReference",null),m([x({readOnly:!0})],_n.prototype,"title",null),m([x()],_n.prototype,"visibleElements",void 0),m([ri("visibleElements")],_n.prototype,"castVisibleElements",null),m([x()],_n.prototype,"map",null),m([x()],_n.prototype,"view",null),m([x({type:M8})],_n.prototype,"viewModel",void 0),_n=$8=m([X("esri.widgets.Feature")],_n);const F3e=_n;var Qq;const Y_=Symbol("anchorHandles");let Nd=class extends yn.EventedAccessor{constructor(e){super(e),this[Qq]=new Jr,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Y_].add([so(()=>Zl(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),Ve(()=>this.screenLocation,(t,i)=>{q(t)&&q(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[Y_]=oi(this[Y_])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&q(e)&&q(t)&&t.ready?t.toScreen(e):null}};Qq=Y_,m([x()],Nd.prototype,"location",void 0),m([x()],Nd.prototype,"screenLocation",null),m([x()],Nd.prototype,"screenLocationEnabled",void 0),m([x()],Nd.prototype,"view",void 0),Nd=m([X("esri.widgets.support.AnchorElementViewModel")],Nd);const eU=Nd,L3e="esri.widgets.CompassViewModel";let X_=class extends eU{constructor(e){super(e),this.visible=!1}};m([x()],X_.prototype,"visible",void 0),X_=m([X(L3e)],X_);const tU=X_,I8={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let jd=class extends Gn{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new tU}initialize(){this.addHandles(Ve(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,s=!e&&i,l={[I8.spinnerStart]:r,[I8.spinnerFinish]:s},f=this._getPositionStyles();return ge("div",{class:this.classes(I8.base,l),styles:f})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Ew(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(ae(t)||ae(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};m([x()],jd.prototype,"location",null),m([x()],jd.prototype,"view",null),m([x({type:tU})],jd.prototype,"viewModel",void 0),m([x()],jd.prototype,"visible",null),jd=m([X("esri.widgets.Spinner")],jd);const N3e=jd,j3e="OBJECTID";var iU;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(iU||(iU={}));function D3e(e){return"r"in e&&"g"in e&&"b"in e}function rU(e){return"h"in e&&"s"in e&&"v"in e}function nU(e){return"l"in e&&"a"in e&&"b"in e}function sU(e){return"l"in e&&"c"in e&&"h"in e}function V3e(e){return"x"in e&&"y"in e&&"z"in e}const z3e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],G3e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function oU(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw"dimensions do not match";const l=e.length,f=e[0].length;let d=0;for(r=0;r<l;r++){for(d=0,s=0;s<f;s++)d+=e[r][s]*t[s];i.push(d)}return i}function aU(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=oU(z3e,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function T8(e){const t=oU(G3e,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**(1/2.4)-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function lU(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>(6/29)**3?i**(1/3):1/3*(29/6)**2*i+4/29);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function uU(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function q3e(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let l=Math.atan2(r,i);return l=l>0?l:l+2*Math.PI,{l:t,c:s,h:l}}function U3e(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function cU(e){return lU(aU(e))}function hU(e){return T8(uU(e))}function B3e(e){return q3e(lU(aU(e)))}function H3e(e){return T8(uU(U3e(e)))}function W3e(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),l=s-Math.min(t,i,r);let f=s,d=l===0?0:s===t?(i-r)/l%6:s===i?(r-t)/l+2:(t-i)/l+4,v=l===0?0:l/f;return d<0&&(d+=6),d*=60,v*=100,f*=100/255,{h:d,s:v,v:f}}function J3e(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,l=s*(1-Math.abs(t%2-1));let f;switch(Math.floor(t)){case 0:f={r:s,g:l,b:0};break;case 1:f={r:l,g:s,b:0};break;case 2:f={r:0,g:s,b:l};break;case 3:f={r:0,g:l,b:s};break;case 4:f={r:l,g:0,b:s};break;case 5:case 6:f={r:s,g:0,b:l};break;default:f={r:0,g:0,b:0}}return f.r=Math.round(f.r+r-s),f.g=Math.round(f.g+r-s),f.b=Math.round(f.b+r-s),f}function E8(e){return D3e(e)?e:sU(e)?H3e(e):nU(e)?hU(e):V3e(e)?T8(e):rU(e)?J3e(e):e}function yPe(e){return rU(e)?e:W3e(E8(e))}function gPe(e){return nU(e)?e:cU(E8(e))}function mPe(e){return sU(e)?e:B3e(E8(e))}function vPe(e,t){const i=cU(e);return i.l*=1-t,hU(i)}function pU(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Z3e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K3e(e,t,i,r,s,l){const f=new Float32Array(6);return f[0]=e,f[1]=t,f[2]=i,f[3]=r,f[4]=s,f[5]=l,f}function Y3e(e,t){return new Float32Array(e,t,6)}function dU(e,t,i,r){const s=t[r],l=t[r+1];e[r]=i[0]*s+i[2]*l+i[4],e[r+1]=i[1]*s+i[3]*l+i[5]}function X3e(e,t,i,r=0,s=0,l=2){const f=s||t.length/l;for(let d=r;d<f;d++)dU(e,t,i,d*l)}Object.freeze(Object.defineProperty({__proto__:null,create:pU,clone:Z3e,fromValues:K3e,createView:Y3e,transform:dU,transformMany:X3e},Symbol.toStringTag,{value:"Module"}));function Q3e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function e_e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function t_e(e,t,i,r,s,l,f){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=f,e}function Q_(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=t[4],d=t[5];let v=i*l-r*s;return v?(v=1/v,e[0]=l*v,e[1]=-r*v,e[2]=-s*v,e[3]=i*v,e[4]=(s*d-l*f)*v,e[5]=(r*f-i*d)*v,e):null}function i_e(e){return e[0]*e[3]-e[1]*e[2]}function fU(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=i[0],M=i[1],T=i[2],A=i[3],k=i[4],F=i[5];return e[0]=r*_+l*M,e[1]=s*_+f*M,e[2]=r*T+l*A,e[3]=s*T+f*A,e[4]=r*k+l*F+d,e[5]=s*k+f*F+v,e}function ex(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=Math.sin(i),M=Math.cos(i);return e[0]=r*M+l*_,e[1]=s*M+f*_,e[2]=r*-_+l*M,e[3]=s*-_+f*M,e[4]=d,e[5]=v,e}function C8(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=i[0],M=i[1];return e[0]=r*_,e[1]=s*_,e[2]=l*M,e[3]=f*M,e[4]=d,e[5]=v,e}function wv(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=i[0],M=i[1];return e[0]=r,e[1]=s,e[2]=l,e[3]=f,e[4]=r*_+l*M+d,e[5]=s*_+f*M+v,e}function yU(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function gU(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function A8(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function r_e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function n_e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function s_e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function mU(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function o_e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function a_e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function l_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function u_e(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],f=e[4],d=e[5],v=t[0],_=t[1],M=t[2],T=t[3],A=t[4],k=t[5],F=$s();return Math.abs(i-v)<=F*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-_)<=F*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(s-M)<=F*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-T)<=F*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-A)<=F*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-k)<=F*Math.max(1,Math.abs(d),Math.abs(k))}const c_e=fU,h_e=mU;Object.freeze(Object.defineProperty({__proto__:null,copy:Q3e,identity:e_e,set:t_e,invert:Q_,determinant:i_e,multiply:fU,rotate:ex,scale:C8,translate:wv,fromRotation:yU,fromScaling:gU,fromTranslation:A8,str:r_e,frob:n_e,add:s_e,subtract:mU,multiplyScalar:o_e,multiplyScalarAndAdd:a_e,exactEquals:l_e,equals:u_e,mul:c_e,sub:h_e},Symbol.toStringTag,{value:"Module"}));const vU=Ie("android");Ie("chrome")||vU&&vU>=4;u$();function bU(e){return e&&"opacity"in e?e.opacity*bU(e.parent):1}async function p_e(e,t){var z,H;if(!e)return;const i=e.sourceLayer,r=(z=q(t)&&t.useSourceLayer?i:e.layer)!=null?z:i,s=bU(r);if(q(e.symbol)&&(!q(t)||t.ignoreGraphicSymbol!==!0)){const J=e.symbol.type==="web-style"?await e.symbol.fetchSymbol(je(te({},t),{cache:q(t)?t.webStyleCache:null})):e.symbol.clone();return z$(J,null,s),J}const l=(H=q(t)?t.renderer:null)!=null?H:r&&"renderer"in r?r.renderer:null;let f=l&&"getSymbolAsync"in l?await l.getSymbolAsync(e,t):null;if(!f)return;if(f=f.type==="web-style"?await f.fetchSymbol(je(te({},t),{cache:q(t)?t.webStyleCache:null})):f.clone(),!(l&&"visualVariables"in l&&l.visualVariables&&l.visualVariables.length))return z$(f,null,s),f;if("arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&(ae(t)||ae(t.arcade))){const J=te({},Jt(t));J.arcade=await il(),t=J}const d=await Promise.resolve().then(function(){return X7}),v=[],_=[],M=[],T=[];for(const J of l.visualVariables)switch(J.type){case"color":v.push(J);break;case"opacity":_.push(J);break;case"rotation":T.push(J);break;case"size":J.target||M.push(J)}const A=!!v.length&&v[v.length-1],k=A?d.getColor(A,e,t):null,F=!!_.length&&_[_.length-1];let D=F?d.getOpacity(F,e,t):null;if(s!=null&&(D=D!=null?D*s:s),z$(f,k,D),M.length){const J=d.getAllSizes(M,e,t);await zge(f,J)}for(const J of T)Gge(f,d.getRotationAngle(J,e,t),J.axis);return f}class d_e{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const s=t[r],l=new tk(s,void 0,void 0,2,2);this._properties[r]={pool:l,acquired:[]}}this._afterDispatchHandle=kse(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)bk(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const s of i.acquired)bk(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}}const f_e=Ie("mac")?"Meta":"Ctrl",tx={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)tx[e]=String.fromCharCode(e);for(let e=1;e<25;e++)tx[111+e]=`F${e}`;for(let e=65;e<91;e++)tx[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function y_e(e){if(e.key!==void 0)return gp(e);const t=tx[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function g_e(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class m_e{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const wU=Pe.getLogger("esri.views.input.InputHandler");class ln{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?wU.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const l=typeof t=="string"?new m_e(t,s):t,f=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},d=M=>{const T=this._incoming[M.match.eventType];if(T){const A=T.indexOf(M);T.splice(A,1),f(),this._manager&&this._manager.updateDependencies()}},v=new v_e(l,r,{onPause:d,onRemove:d,onResume:M=>{const T=this._incoming[M.match.eventType];T&&!T.includes(M)&&(T.push(M),f(),this._manager&&this._manager.updateDependencies())}});let _=this._incoming[l.eventType];return _||(_=[],this._incoming[l.eventType]=_),_.push(v),f(),this._manager&&this._manager.updateDependencies(),v}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new b_e(t,{onEmit:(r,s,l,f)=>{var d;(d=this._manager)==null||d.emit(r.eventType,s,l,f)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):wU.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&((r=s.callback)==null||r.call(s,t),t.shouldStopPropagation()))break}}}class v_e{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class b_e{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class w_e extends ln{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=t;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}}class ix{constructor(t){this._observable=new W4,this._value=t}get(){return Vt(this._observable),this._value}set(t){t!==this._value&&(this._value=t,this._observable.notify())}}class __e extends ln{constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new ix(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}get multiTouchActive(){return this._multiTouchActive.get()}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}}let Pl=class extends ot{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=f_e,this._latestPointerType="mouse",this._propertiesPool=new d_e({latestPointerLocation:S_e},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,i=rt.INTERNAL){if(this._nameToGroup[e])return void Pe.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void Pe.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const l=r.handlers[s];this._handlers.push(l),l.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(f,d,v,_,M)=>{this._emitInputEvent(l.priorityIndex+1,f,d,v,M,_)},setPointerCapture:(f,d)=>{this._setPointerCapture(r,l,f,d)},setEventCallback:f=>{l.eventCallback=f},setUninstallCallback:f=>{l.uninstallCallback=f},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{var r;i.removed=!0,(r=i.uninstallCallback)==null||r.call(i)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Pe.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let s=r.handler.hasSideEffects;if(!s){for(const l of r.handler.outgoingEventTypes)if(e.has(l)){s=!0;break}}if(s)for(const l of r.handler.incomingEventMatches){e.add(l.eventType);for(const f of l.keyModifiers)g_e(f)||t.add(f)}r.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._latestPointerType=e;const r=this._get("latestPointerLocation");if(ae(r)||r.x!==t||r.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=t,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const s=t;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const f=new Set;this._activeKeyModifiers.forEach(d=>{f.add(d)}),this._activeKeyModifiers=f,i=!0}},s=(f,d)=>{d&&!this._activeKeyModifiers.has(f)?(r(),this._activeKeyModifiers.add(f)):!d&&this._activeKeyModifiers.has(f)&&(r(),this._activeKeyModifiers.delete(f))};if(e==="key-down"||e==="key-up"){const f=t.key;this._keyModifiers.has(f)&&s(f,e==="key-down")}const l=t.native;s("Alt",!(!l||!l.altKey)),s("Ctrl",!(!l||!l.ctrlKey)),s("Shift",!(!l||!l.shiftKey)),s("Meta",!(!l||!l.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new w_e((e,t,i)=>this._setLatestPointer(e,t,i)),this._multiTouchHandler=new __e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],rt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,rt.INTERNAL)}_setPointerCapture(e,t,i,r){const s=e.name+"-"+t.priorityIndex,l=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,l),r?(l.add(s),l.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):l.has(s)&&(l.delete(s),l.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,s,l){const f=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=s!==void 0&&s,v={event:new x_e(t,i,f,l||this._activeKeyModifiers,d),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(v):this._doNewPropagation(v)}_doNewPropagation(e){this._currentPropagation={events:new r3,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,i;const e=ss(this._currentPropagation);for(;e.events.length>0;){const{event:r,priorityIndex:s}=e.events.pop(),l=r.data&&r.data.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((i=(t=e.currentHandler).eventCallback)==null||i.call(t,r)),r.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new r3;t.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)t.push(i.events.pop());i.events=t,i.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const s=i.keyModifiers.filter(l=>r.keyModifiers.includes(l));if(s.length===i.keyModifiers.length!=(s.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};m([x({readOnly:!0})],Pl.prototype,"hasPendingInputs",null),m([x({constructOnly:!0})],Pl.prototype,"eventSource",void 0),m([x({constructOnly:!0})],Pl.prototype,"recognizers",void 0),m([x()],Pl.prototype,"_latestPointerType",void 0),m([x()],Pl.prototype,"latestPointerType",null),m([x()],Pl.prototype,"multiTouchActive",null),m([x({readOnly:!0})],Pl.prototype,"latestPointerLocation",void 0),Pl=m([X("esri.views.input.InputManager")],Pl);class x_e{constructor(t,i,r,s,l){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=l,this._propagationState=Rh.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Rh.STOPPED}shouldStopPropagation(){return(this._propagationState&Rh.STOPPED)!=0}async(t){this._propagationState|=Rh.PAUSED;const i=(r,s)=>{this._propagationState&=~Rh.PAUSED;const l=this._resumeCallback;if(this._resumeCallback=null,l&&l(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Rh.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Rh;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Rh||(Rh={}));const rt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class S_e{}function _U(e){return e&&typeof e.highlight=="function"}function bPe(e,t,i){return ae(e)||e>i&&(t===0||e<t)}const rx={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Dd=new a0({id:"zoom-to-feature",title:"{messages.zoom}",className:rx.iconZoom}),xU=new a0({id:"remove-selected-feature",title:"{messages.remove}",className:rx.iconTrash}),M1=new a0({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:rx.iconZoom}),$1=new a0({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:rx.iconBrowseClusteredFeatures}),M_e="esri.widgets.Popup.PopupViewModel",nx=Pe.getLogger(M_e),$_e=e=>{const{event:t,view:i}=e,{action:r}=t,s=i&&i.popup;if(!r)return Promise.reject(new fe("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new fe("trigger-action:missing-arguments","view.popup is missing"));const{disabled:l,id:f}=r;if(!f)return Promise.reject(new fe("trigger-action:invalid-action","action.id is missing"));if(l)return Promise.reject(new fe("trigger-action:invalid-action","Action is disabled"));if(f===Dd.id)return T_e(s.viewModel).catch(_4);if(f===M1.id)return E_e(s.viewModel);if(f===$1.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,f===xU.id){s.close();const{selectedFeature:d}=s;if(!d)return Promise.reject(new fe(`trigger-action:${xU.id}`,"selectedFeature is required",{selectedFeature:d}));const{sourceLayer:v}=d;return v?v.remove(d):i.graphics.remove(d),Promise.resolve()}return Promise.resolve()};function SU(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function Vd(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}async function I_e(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function T_e(e){const{location:t,selectedFeature:i,view:r,zoomFactor:s}=e,l=SU(e);if(!l){const _=new fe("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:r});throw nx.error(_),_}const f=r.scale/s,d=e.get("selectedFeature.geometry")||t,v=d&&d.type==="point"&&await I_e(i,r);Dd.active=!0,Dd.disabled=!0;try{await e.zoomTo({target:{target:l,scale:v?f:void 0}})}catch{const M=new fe("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});nx.error(M)}finally{Dd.active=!1,Dd.disabled=!1,e.zoomToLocation=null,v&&(e.location=d)}}async function E_e(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const d=new fe("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw nx.error(d),d}if(!Vd(t)){const d=new fe("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw nx.error(d),d}const r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()],M1.active=!0,M1.disabled=!0;const{extent:f}=await s.queryExtent(l);await e.zoomTo({target:f}),M1.active=!1,M1.disabled=!1}async function C_e(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()];const{extent:f}=await s.queryExtent(l);e.selectedClusterBoundaryFeature.geometry=f,i.graphics.add(e.selectedClusterBoundaryFeature)}async function A_e(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()],$1.active=!0,$1.disabled=!0;const{features:f}=await s.queryFeatures(l);$1.active=!1,$1.disabled=!1,i.popup.open({features:[t].concat(f),featureMenuOpen:!0})}function P_e(e){const t=e.features.filter(i=>Vd(i));t.length&&(e.features=t)}const MU=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return m([x()],t.prototype,"goToOverride",void 0),m([x()],t.prototype,"view",void 0),t=m([X("esri.widgets.support.GoTo")],t),t},_v=gt.ofType({key:"type",defaultKeyValue:"button",base:u2,typeMap:{button:a0,toggle:AR}}),O_e=()=>[Dd.clone()],k_e=()=>[M1.clone(),$1.clone()];let Qt=class extends MU(eU){constructor(e){super(e),this._handles=new Jr,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new _v,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Dr({symbol:new fl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([Ve(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Ve(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),Ve(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),Ve(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),Ve(()=>this.location,e=>this._locationChange(e)),Ve(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),Ve(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),Ve(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),Ve(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>$_e({event:e,view:this.view})),so(()=>!this.waitingForResult,()=>this._waitingForResultChange(),bl),Ve(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),Ve(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),so(()=>!this.visible,()=>this.browseClusterEnabled=!1),Ve(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new _v;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:l}=this,f=s?i.concat(t):t,d=l&&(typeof l.getEffectivePopupTemplate=="function"&&l.getEffectivePopupTemplate(r)||l.popupTemplate),v=d&&d.actions,_=d&&d.overwriteActions?v:v?v.concat(f):f;return _&&_.filter(Boolean).forEach(M=>e.add(M)),e}get defaultActions(){const e=this._get("defaultActions")||new _v;return e.removeAll(),e.addMany(Vd(this.selectedFeature)?k_e():O_e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:s}=this,l=r&&t.length;l&&i&&s===-1?this.selectedFeatureIndex=0:l&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=nu(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=s=>{this._pendingPromises.has(t)&&this._updateFeatures(s),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=SU(this);return t?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new fe("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e)throw new fe("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t=je(te({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{visible:!0}),{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){P_e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Vd(t)?(await C_e(this),await A_e(this)):Pe.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):Pe.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Dd.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Vd(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:s}=this;if(i===null)return;const l=((i-1)*r+t)%t,f=l+r;s.slice(l,f).forEach((d,v)=>{d&&!d.graphic&&(d.graphic=e[l+v])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Vd(e)?void 0:(e.symbol=await p_e(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=Jt(this._getPointFromGeometry(e.geometry))}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,s=Promise.resolve(i),l=r.map(f=>f.promise);this.promises=[s,...l]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(Vd(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),s=[];t.forEach((l,f)=>{var v,_;if(!l)return;let d=null;if(r.some((M,T)=>(M&&M.graphic===l&&(d=M,r.splice(T,1)),!!d)),d)s[f]=d;else{const M=new M8({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(v=this.view)==null?void 0:v.spatialReference,graphic:l===e?l:null,map:(_=this.view)==null?void 0:_.map,view:this.view});s[f]=M}}),r.forEach(l=>l&&!l.destroyed&&l.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},rt.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(s=>{const{clientOnlyGraphics:l,promisesPerLayerView:f,location:d}=s,v=[Promise.resolve(l),...f.map(_=>_.promise)];return r.popup.open({location:d||i,promises:v}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){var t;return ae(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?(t=e.extent)==null?void 0:t.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return i&&"layer"in i&&i.layer?i.layer:(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||j3e:null,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:s}=this;if(!(r&&i&&t&&s))return;const l=this._getHighlightLayer(r);if(!(l&&l instanceof T0))return;const f=this._getLayerView(i,l);this._highlightActiveFeaturePromise=f;const d=await f;if(!(d&&_U(d)&&this._highlightActiveFeaturePromise===f&&this.activeFeature&&this.highlightEnabled))return;const v=d.highlight(this._getHighlightTarget(r,l));this._handles.add(v,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:s}=this;if(!(t&&r&&i&&s))return;const l=this._getHighlightLayer(t);if(!(l&&l instanceof T0))return;const f=this._getLayerView(r,l);this._highlightSelectedFeaturePromise=f;const d=await f;if(!(d&&_U(d)&&this._highlightSelectedFeaturePromise===f&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const v=d.highlight(this._getHighlightTarget(t,l));this._handles.add(v,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};m([x()],Qt.prototype,"featurePage",void 0),m([x()],Qt.prototype,"isLoadingFeature",null),m([x({type:_v})],Qt.prototype,"actions",void 0),m([x({readOnly:!0})],Qt.prototype,"active",null),m([x()],Qt.prototype,"activeFeature",void 0),m([x({readOnly:!0})],Qt.prototype,"allActions",null),m([x({type:Boolean})],Qt.prototype,"defaultPopupTemplateEnabled",void 0),m([x()],Qt.prototype,"autoCloseEnabled",void 0),m([x()],Qt.prototype,"autoOpenEnabled",void 0),m([x()],Qt.prototype,"browseClusterEnabled",void 0),m([x()],Qt.prototype,"content",void 0),m([x({type:_v,readOnly:!0})],Qt.prototype,"defaultActions",null),m([x({readOnly:!0})],Qt.prototype,"featureCount",null),m([x()],Qt.prototype,"features",null),m([x()],Qt.prototype,"featuresPerPage",void 0),m([x()],Qt.prototype,"featureViewModelAbilities",void 0),m([x({readOnly:!0})],Qt.prototype,"featureViewModels",void 0),m([x()],Qt.prototype,"highlightEnabled",void 0),m([x()],Qt.prototype,"includeDefaultActions",void 0),m([x({type:dt})],Qt.prototype,"location",null),m([x({readOnly:!0})],Qt.prototype,"pendingPromisesCount",null),m([x({readOnly:!0})],Qt.prototype,"selectedClusterBoundaryFeature",void 0),m([x({readOnly:!0})],Qt.prototype,"waitingForResult",null),m([x({readOnly:!0})],Qt.prototype,"promiseCount",null),m([x()],Qt.prototype,"promises",null),m([x({value:null,readOnly:!0})],Qt.prototype,"selectedFeature",null),m([x({value:-1})],Qt.prototype,"selectedFeatureIndex",null),m([x({readOnly:!0})],Qt.prototype,"selectedFeatureViewModel",null),m([x({readOnly:!0})],Qt.prototype,"state",null),m([x()],Qt.prototype,"title",void 0),m([x()],Qt.prototype,"updateLocationEnabled",void 0),m([x()],Qt.prototype,"view",void 0),m([x()],Qt.prototype,"visible",void 0),m([x()],Qt.prototype,"zoomFactor",void 0),m([x()],Qt.prototype,"zoomToLocation",void 0),m([x()],Qt.prototype,"centerAtLocation",null),Qt=m([X("esri.widgets.Popup.PopupViewModel")],Qt);const $U=Qt,IU="selected-index",R_e=0,TU="popup-spinner",ze={calciteThemeLight:"calcite-theme-light",calciteThemeDark:"calcite-theme-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",collapseIcon:"esri-popup__collapse-icon"},EU={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},CU="esri-popup";function Nu(e,t){return t===void 0?`${CU}__${e}`:`${CU}__${e}-${t}`}const AU={closeButton:!0,featureNavigation:!0};let _t=class extends Kq(Gn){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Jr,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{(i==null?void 0:i.isIntersecting)&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=L0(()=>this._displaySpinner(),R_e),this._exitRelatedRecordsActions=new WeakMap,this._flowItems=new gt,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new $U,this.visibleElements=te({},AU),this._addSelectedFeatureIndexHandle(),this.addHandles([Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),Ve(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),Ve(()=>{var i,r,s,l,f,d;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.size,(f=this.viewModel)==null?void 0:f.active,(d=this.viewModel)==null?void 0:d.location,this.alignment]},()=>this.reposition()),Ve(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),Ve(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),Ve(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),Ve(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Ve(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),Ve(()=>{var i,r,s,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.state]},()=>this._setTitleFromFeatureWidget()),Ve(()=>{var i,r,s,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.state]},()=>this._setContentFromFeatureWidget()),so(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),fs(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),fi),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),fs(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),Ve(()=>{var i,r,s,l;return[(r=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:r.state,(l=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:l.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([import("./calcite-flow.a897600e.js"),import("./calcite-flow-item.b0237cc1.js"),import("./calcite-action.e2867728.js"),import("./calcite-tooltip.2d9fa7c0.js"),import("./calcite-icon.33b58de2.js")])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t==null?void 0:t.content);const i=e.viewModel;if((i==null?void 0:i.waitingForContent)||(i==null?void 0:i.state)==="error")return!0;const r=i==null?void 0:i.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||EU}set dockOptions(e){const t=te({},EU),i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const s=te(te({},t),e),l=te(te({},t.breakpoint),r),{breakpoint:f}=s;f===!0?s.breakpoint=l:typeof f=="object"&&(s.breakpoint=te(te({},l),f)),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i,_flowItems:r}=this,{selectedFeatureViewModel:s}=this.viewModel,l=je(te({},t),{title:!1});return s?(e?(e.viewModel=s,e.visibleElements=l):this._feature=new F3e({flowItems:r,headingLevel:i+1,viewModel:s,visibleElements:l}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return te(te({},AU),e)}blur(){const{active:e}=this.viewModel;e||Pe.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||Pe.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var s,l;this._handles.remove(IU);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var F,D,z,H;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:s,currentDockPosition:l}=this,{active:f}=this.viewModel,{menuActions:d}=r,v=f&&d.length>1&&e,_=f&&t,M=f&&!t,T=(D=(F=this.selectedFeature)==null?void 0:F.layer)==null?void 0:D.title,A=(H=(z=this.selectedFeature)==null?void 0:z.layer)==null?void 0:H.id,k={[ze.alignTopCenter]:s==="top-center",[ze.alignBottomCenter]:s==="bottom-center",[ze.alignTopLeft]:s==="top-left",[ze.alignBottomLeft]:s==="bottom-left",[ze.alignTopRight]:s==="top-right",[ze.alignBottomRight]:s==="bottom-right",[ze.isDocked]:_,[ze.shadow]:M,[ze.isDockedTopLeft]:l==="top-left",[ze.isDockedTopCenter]:l==="top-center",[ze.isDockedTopRight]:l==="top-right",[ze.isDockedBottomLeft]:l==="bottom-left",[ze.isDockedBottomCenter]:l==="bottom-center",[ze.isDockedBottomRight]:l==="bottom-right",[ze.isFeatureMenuOpen]:i,[ze.isActionsMenuOpen]:v};return ge("div",{class:this.classes(ze.base,k),role:"presentation","data-layer-title":T,"data-layer-id":A,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},f?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,ze.iconLoading,ze.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?ge("div",{key:Nu("loading-container"),role:"presentation",class:ze.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=$l(this.container),t={[ze.iconRightTriangleArrow]:e,[ze.paginationPreviousIconRTL]:e,[ze.iconLeftTriangleArrow]:!e,[ze.paginationPreviousIconLTR]:!e};return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,t)})}renderPreviousButton(){const{messages:e}=this;return ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ze.button,ze.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=$l(this.container),t={[ze.iconLeftTriangleArrow]:e,[ze.paginationNextIconRTL]:e,[ze.iconRightTriangleArrow]:!e,[ze.paginationNextIconLTR]:!e};return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,t)})}renderNextButton(){const{messages:e}=this;return ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ze.button,ze.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ze.button,ze.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[ze.iconUndock]:e,[ze.iconDock]:!e,[ze.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[ze.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[ze.iconDockToTop]:!e&&t==="top-center",[ze.iconDockToBottom]:!e&&t==="bottom-center"};return ge("span",{"aria-hidden":"true",class:this.classes(i,ze.icon)})}renderDockButton(){var s,l,f;const{dockEnabled:e,messages:t}=this,i=(l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((f=this.dockOptions)==null?void 0:f.buttonEnabled)?ge("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ze.button,ze.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:s}=this,l={[ze.headerContainerButton]:i},f=ge(A$,{level:this.headingLevel,class:ze.headerTitle,innerHTML:e}),d=i?ge("button",{key:`${e}--collapsible`,id:t,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ze.headerContainer,l),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},f,ge("calcite-icon",{class:ze.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):ge("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ze.headerContainer,l)},f);return e?d:null}renderCloseIcon(){return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,ze.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ze.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return ge("header",{class:ze.header},this.renderTitle(),ge("div",{class:ze.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i,_flowItems:r,messagesCommon:s}=this,{content:l}=this.viewModel,f=r.toArray(),d={[ze.contentHasFlows]:!!f.length};return t&&!i?ge("div",{key:l,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(ze.content,d)},ge("calcite-flow",{bind:this,onCalciteFlowItemBack:this._handleBackClick},ge("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode","intl-back":s.back,afterCreate:A3,key:"root-flow-item"},this.renderContent()),f.map(v=>this.renderFlowItem(v))),f.map(v=>this.renderFlowItemTooltip(v))):null}renderFlowItem(e){const{messages:t,messagesCommon:i}=this,r=H3();return ge("calcite-flow-item",{class:this.classes({[ze.calciteThemeDark]:!r,[ze.calciteThemeLight]:r}),heading:e.title,"intl-back":i.back,description:this._getFlowItemDescription(e),key:`flow-item-${e.viewModel.uid}`},ge("calcite-action",{class:ze.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:s=>this._storeExitRelatedRecordsAction(e,s),onclick:this._destroyFlowItemWidgets}),ge("div",{class:this.classes(ze.contentFlowItem,{[ze.calciteThemeDark]:r,[ze.calciteThemeLight]:!r})},e.render()))}renderFlowItemTooltip(e){const{messages:t,_exitRelatedRecordsActions:i}=this,r=H3();return ge("calcite-tooltip",{class:this.classes({[ze.calciteThemeDark]:!r,[ze.calciteThemeLight]:r}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords)}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:s}=this,l=i?s.close:s.open,{menuActions:f}=r;return f.length?ge("div",{key:Nu("actions-menu-button"),class:this.classes(ze.button,ze.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":l,title:l},ge("span",{"aria-hidden":"true",class:ze.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:s}=r;return s.length&&i?ge("ul",{id:e,role:"menu","aria-labelledby":t,key:Nu("actions"),class:ze.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(l=>this.renderAction({action:l,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?ge("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:ze.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?ge("section",{key:Nu("navigation"),class:this.classes(ze.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,s=!!i.length,l=!!r.length,f={[ze.footerHasPagination]:e,[ze.footerHasActions]:s,[ze.footerHasActionsMenu]:l};return e||s?ge("div",{key:Nu("feature-buttons"),class:this.classes(ze.footer,f)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=wl(e.selectedFeatures,{total:t.length});return ge("section",{key:Nu("menu"),class:ze.featureMenu},ge("strong",{class:ze.featureMenuHeader},r),ge("nav",{bind:this,class:ze.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:A3},this.renderFeatureMenu(),ge("div",{class:ze.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?ge("div",{class:ze.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:ge("div",{key:Nu("pointer"),class:ze.pointer,role:"presentation"},ge("div",{class:this.classes(ze.pointerDirection,ze.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:s,collapsible:l,hasContent:f,contentCollapsed:d,visibleElements:v}=this,{title:_}=this.viewModel,M=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",T=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",A={[ze.shadow]:e,[ze.isCollapsible]:l,[ze.isCollapsed]:d};return ge("div",{class:this.classes(ze.main,ze.widget,A),tabIndex:v.closeButton?null:-1,role:"dialog","aria-labelledby":_?r:"","aria-describedby":f&&!d?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},M?this.renderFooter():null,M?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),T?this.renderFooter():null,T?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?ge("div",{class:lr.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return ge("span",{key:"text",class:ze.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[ze.iconLoading]:e.active,[ze.rotating]:e.active,[ze.icon]:!!t,[ze.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),ge("span",{key:"icon","aria-hidden":"true",class:this.classes(ze.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),s={[ze.action]:t.type!=="toggle",[ze.actionToggle]:t.type==="toggle",[ze.actionToggleOn]:t.type==="toggle"&&t.value,[ze.buttonDisabled]:t.disabled},l=[this.renderActionIcon(t),this.renderActionText(r)],f=i==="menu-item"?ge("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(ze.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l):ge("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(ze.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l);return t.visible?f:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:l}=this.viewModel,f=e===l,d={[ze.featureMenuSelected]:f},v=f?ge("span",{key:Nu(`feature-menu-selected-feature-${s}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:ze.iconCheckMark}):null,_=ge("span",{innerHTML:e.title||r.untitled});return ge("li",{role:"menuitem",tabIndex:-1,key:Nu(`feature-menu-feature-${s}`),class:this.classes(d,ze.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},ge("span",{class:ze.featureMenuTitle},_,v))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?ge("ol",{class:ze.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();this._exitRelatedRecordsActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy())}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:s}=e,l=i==null?void 0:i.attributes,f=s==="zoom-to-feature"?wl(e.title,{messages:t}):s==="remove-selected-feature"?wl(e.title,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?wl(e.title,{messages:t}):e.title;return f&&l?wl(f,l):f}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:s}=e,l=s||r?r:ze.iconDefaultAction;return l&&i?wl(l,i):l}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?wl(r,i):r}_createFeatureUpdatedAnimation(){return Yfe("enter",ze.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Ve(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(l=>l.visible),i=this._getInlineActionCount(),r=i===null,s=i===0;return{inlineActions:r?t.slice(0):s?new gt:t.slice(0,i),menuActions:r?new gt:s?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){gp(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){gp(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=gp(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const s=i.querySelectorAll("li"),l=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+l)%l].focus()):(e.stopPropagation(),s[(r-1+l)%l].focus())}_handleActionMenuItemKeyup(e){const t=gp(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,l=s.findIndex(v=>v.uid===r);if(!i)return;const f=i.querySelectorAll("li"),d=f.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),f[f.length-1].focus()):(e.stopPropagation(),f[0].focus()):(e.stopPropagation(),f[(l+1+d)%d].focus()):(e.stopPropagation(),f[(l-1+d)%d].focus())}_handleMainKeyup(e){const t=gp(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await um(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Ve(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,IU)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:s,view:l}=e;if(isNaN(i)||isNaN(t)||!l||!r)return!1;const f=l.padding;return s==="right"&&r.x+i/2>l.width-f.right||s==="left"&&r.x-i/2<f.left||s==="top"&&r.y-t<f.top||s==="bottom"&&r.y+t>l.height-f.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:s}=this,{screenLocation:l,view:f}=s;if(ae(l)||!f||!i)return"top-center";if(!this._isScreenLocationWithinView(l,f))return this._get("currentAlignment")||"top-center";function d(Y){return parseInt(Y.replace(/[^-\d\.]/g,""),10)}const v=r?window.getComputedStyle(r,null):null,_=v?d(v.getPropertyValue("max-height")):0,M=v?d(v.getPropertyValue("height")):0,{height:T,width:A}=i.getBoundingClientRect(),k=A+t,F=Math.max(T,_,M)+t,D=this._isOutsideView({popupHeight:F,popupWidth:k,screenLocation:l,side:"right",view:f}),z=this._isOutsideView({popupHeight:F,popupWidth:k,screenLocation:l,side:"left",view:f}),H=this._isOutsideView({popupHeight:F,popupWidth:k,screenLocation:l,side:"top",view:f}),J=this._isOutsideView({popupHeight:F,popupWidth:k,screenLocation:l,side:"bottom",view:f});return z?H?"bottom-right":"top-right":D?H?"bottom-left":"top-left":H?J?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return $l(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var f;if(e!=="auto")return e;const t=(f=this.viewModel)==null?void 0:f.view,i=$l(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},s=t.width-r.left-r.right,{breakpoints:l}=t;return l&&s<=l.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:s,_pointerOffsetInPx:l}=this,f=r/2,d=i.height-t,v=i.width-e,{padding:_}=this.view;return s==="bottom-center"?{top:t+l-_.top,left:e-f-_.left}:s==="top-left"?{bottom:d+l-_.bottom,right:v+l-_.right}:s==="bottom-left"?{top:t+l-_.top,right:v+l-_.right}:s==="top-right"?{bottom:d+l-_.bottom,left:e+l-_.left}:s==="bottom-right"?{top:t+l-_.top,left:e+l-_.left}:s==="top-center"?{bottom:d+l-_.bottom,left:e-f-_.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(ae(e)||!t)return;const s=this._calculateFullWidth(t),l=this._calculateAlignmentPosition(e.x,e.y,r,s);return l?{top:l.top!==void 0?`${l.top}px`:"auto",left:l.left!==void 0?`${l.left}px`:"auto",bottom:l.bottom!==void 0?`${l.bottom}px`:"auto",right:l.right!==void 0?`${l.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,s]=e,[l,f]=t,{width:d,height:v}=i;return r<=d&&l>d||r>d&&l<=d||s<=v&&f>v||s>v&&f<=v}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,s=i.top+i.bottom,l=[],f=[];l[0]=e[0]-r,l[1]=e[1]-s,f[0]=t[0]-r,f[1]=t[1]-s;const{dockOptions:d}=this,v=d.breakpoint;this._dockingThresholdCrossed(l,f,v)&&this._setDockEnabledForViewSize(d),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var d,v;const t=e.breakpoint,i=(v=(d=this.viewModel)==null?void 0:d.view)==null?void 0:v.ui;if(!i)return!1;const{width:r,height:s}=i;if(isNaN(r)||isNaN(s))return!1;const l=t.hasOwnProperty("width")&&r<=t.width,f=t.hasOwnProperty("height")&&s<=t.height;return l||f}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?wl(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,TU),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new N3e({view:e}),e.ui.add(this._spinner,{key:TU,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(l=>l.uid===t),s=i.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};m([x({readOnly:!0})],_t.prototype,"actionsMenuId",null),m([x({readOnly:!0})],_t.prototype,"actionsMenuButtonId",null),m([x({readOnly:!0})],_t.prototype,"featureMenuId",null),m([x({readOnly:!0})],_t.prototype,"titleId",null),m([x({readOnly:!0})],_t.prototype,"contentId",null),m([x({readOnly:!0})],_t.prototype,"hasContent",null),m([x({readOnly:!0})],_t.prototype,"featureNavigationVisible",null),m([x({readOnly:!0})],_t.prototype,"collapsible",null),m([x({readOnly:!0})],_t.prototype,"featureMenuVisible",null),m([x({readOnly:!0})],_t.prototype,"contentCollapsed",null),m([x({readOnly:!0})],_t.prototype,"dividedActions",null),m([x({readOnly:!0,dependsOn:["_flowItems.length"]})],_t.prototype,"_activeFlowItemWidget",null),m([x()],_t.prototype,"actions",null),m([x()],_t.prototype,"actionsMenuOpen",null),m([x()],_t.prototype,"alignment",void 0),m([x()],_t.prototype,"autoCloseEnabled",null),m([x()],_t.prototype,"autoOpenEnabled",null),m([x()],_t.prototype,"defaultPopupTemplateEnabled",null),m([x()],_t.prototype,"content",null),m([x()],_t.prototype,"collapsed",void 0),m([x()],_t.prototype,"collapseEnabled",void 0),m([x({readOnly:!0})],_t.prototype,"currentAlignment",null),m([x({readOnly:!0})],_t.prototype,"currentDockPosition",null),m([x()],_t.prototype,"dockOptions",null),m([x()],_t.prototype,"dockEnabled",void 0),m([x({readOnly:!0})],_t.prototype,"featureCount",null),m([x()],_t.prototype,"featureMenuOpen",void 0),m([x()],_t.prototype,"features",null),m([x()],_t.prototype,"goToOverride",null),m([x()],_t.prototype,"headingLevel",void 0),m([x()],_t.prototype,"highlightEnabled",null),m([x()],_t.prototype,"location",null),m([x()],_t.prototype,"label",null),m([x()],_t.prototype,"maxInlineActions",void 0),m([x(),qn("esri/widgets/Popup/t9n/Popup")],_t.prototype,"messages",void 0),m([x(),qn("esri/t9n/common")],_t.prototype,"messagesCommon",void 0),m([x()],_t.prototype,"promises",null),m([x({readOnly:!0})],_t.prototype,"selectedFeature",null),m([x()],_t.prototype,"selectedFeatureIndex",null),m([x({readOnly:!0})],_t.prototype,"selectedFeatureWidget",null),m([x()],_t.prototype,"spinnerEnabled",void 0),m([x()],_t.prototype,"title",null),m([x()],_t.prototype,"updateLocationEnabled",null),m([x()],_t.prototype,"view",null),m([x({type:$U}),$ye(["triggerAction","trigger-action"])],_t.prototype,"viewModel",void 0),m([x()],_t.prototype,"visible",null),m([x()],_t.prototype,"visibleElements",void 0),m([ri("visibleElements")],_t.prototype,"castVisibleElements",null),m([zo()],_t.prototype,"_close",null),m([zo()],_t.prototype,"_toggleDockEnabled",null),m([zo()],_t.prototype,"_toggleFeatureMenu",null),m([zo()],_t.prototype,"_toggleActionsMenu",null),m([zo()],_t.prototype,"_triggerAction",null),m([zo()],_t.prototype,"_selectFeature",null),m([zo()],_t.prototype,"_next",null),m([zo()],_t.prototype,"_previous",null),_t=m([X("esri.widgets.Popup")],_t);const PU=_t,P8=[0,0];function F_e(e){var r,s;const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return P8[0]=i.left+((r=t==null?void 0:t.pageXOffset)!=null?r:0),P8[1]=i.top+((s=t==null?void 0:t.pageYOffset)!=null?s:0),P8}function OU(e){e&&(KN(e),e.parentNode&&e.parentNode.removeChild(e))}function L_e(e){const t=document.createElement("div");return e.appendChild(t),t}const xv=16,sx=750,N_e=512,j_e=2,D_e=e=>{let t=class extends e{constructor(...i){var r;super(...i),this._freqInfo={freq:xv,time:sx},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&((r=i[0])==null?void 0:r.popup)!==void 0||(this.popup=new PU({view:this})),this.handles.add([Ve(()=>this.cursor,s=>{const{surface:l}=this;l&&l.setAttribute("data-cursor",s)}),Ve(()=>this.interacting,s=>{const{surface:l}=this;l&&l.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(Ve(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=oi(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){var i;return(i=this._get("container"))!=null?i:null}set container(i){const r=this._get("container"),s=e$(i),l=s instanceof HTMLDivElement?s:null;if(l||typeof i!="string"||Pe.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),r===l)return;const f="dom-size";if(this.handles.remove(f),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(OU(this.root),this._set("root",null)),this.userContent&&(XN(this.userContent,r),OU(this.userContent),this._set("userContent",null))),!l)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);l.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",XN(l,d),l.appendChild(d),this._set("userContent",d);const v=document.createElement("div");v.className="esri-view-root",l.insertBefore(v,l.firstChild),this._set("root",v);const _=document.createElement("div");_.className="esri-view-surface",_.setAttribute("role","application"),_.tabIndex=0,v.appendChild(_),this._set("surface",_);const M=new Oj;v.appendChild(M.surface),this._set("overlay",M),Ve(()=>M.needsRender,T=>{T&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Uf({render:()=>{var A;return(A=this.overlay)==null?void 0:A.render()}}):this._overlayRenderTaskHandle=Er(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(Ve(()=>this.size,T=>{const[A,k]=T,F="esri-view-surface--inset-outline";A>=document.body.clientWidth||k>=document.body.clientHeight?_.classList.add(F):_.classList.remove(F)},fi),f),this._set("container",l),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const l=this.position;return i-=l?l[0]:0,r-=l?l[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const l=this.position;return i+=l?l[0]:0,r+=l?l[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([Ve(()=>this.root,r=>{i.container=r?L_e(r):null},fi),Ve(()=>this.popup,(r,s)=>{const l="popup",f="manual";s&&i.remove(s,l),r&&(r.view=i.view,i.add(r,{key:l,position:f}))},fi)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=xv,i.time=sx,this.handles.add([(()=>{const r=()=>{i.freq=xv,i.time=sx};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Uf({prepare:r=>{const s=this._measure(),l=this._freqInfo;if(l.time+=r.deltaTime,s&&(l.freq=xv,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const f=this._position();l.freq=f||s?xv:Math.min(sx,l.freq*j_e),!s&&l.freq>=N_e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const l=this.width,f=this.height;return r===l&&s===f?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:l,oldHeight:f,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&F_e(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return m([x()],t.prototype,"container",null),m([x({readOnly:!0})],t.prototype,"focused",null),m([x({readOnly:!0})],t.prototype,"height",void 0),m([x({type:PU})],t.prototype,"popup",null),m([x({type:Oj})],t.prototype,"overlay",void 0),m([x({readOnly:!0})],t.prototype,"position",void 0),m([x({readOnly:!0})],t.prototype,"resizing",void 0),m([x({readOnly:!0})],t.prototype,"root",void 0),m([x({value:null,readOnly:!0})],t.prototype,"size",null),m([x({readOnly:!0})],t.prototype,"surface",void 0),m([x({readOnly:!0})],t.prototype,"suspended",void 0),m([x()],t.prototype,"ui",void 0),m([x({readOnly:!0})],t.prototype,"userContent",void 0),m([x({readOnly:!0})],t.prototype,"width",void 0),m([x()],t.prototype,"widthBreakpoint",void 0),t=m([X("esri.views.DOMContainer")],t),t},V_e=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:l,layerViewsAndGraphics:f,clientOnlyGraphics:d}=await this._prepareFetchPopupFeatures(i,r),v=Promise.resolve(d),_=this._queryLayerPopupFeatures(l,f,r),M=_.map(T=>T.promise);return{location:s,clientOnlyGraphics:d,allGraphicsPromise:lk([v,...M]).then(T=>Array.from(new Set(T.flat()))),promisesPerLayerView:_}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:l,graphics:f})=>{const d={clientGraphics:f,event:q(s)?s.event:null,signal:q(s)?s.signal:null,defaultPopupTemplateEnabled:!!q(s)&&!!s.defaultPopupTemplateEnabled},v=l.fetchPopupFeatures(i,d);return{layerView:l,promise:v}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(q(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:l,location:f}=await this._popupHitTestGraphics(i,r),d=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:v,clientOnlyGraphics:_}=this._graphicsPerFetchPopupLayerView(s,d);return{clientOnlyGraphics:_,layerViewsAndGraphics:v,queryArea:l,location:f}}async _popupHitTestGraphics(i,r){const{results:s,mapPoint:l}=await this.popupHitTest(i),f=s.filter(v=>v.type==="graphic"&&this._isValidPopupGraphic(v.graphic,r)),d=f.length?f[0].mapPoint:null;return{clientGraphics:f.map(v=>v.graphic),queryArea:l,location:l||d}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),q(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return q(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],l=new Map,f=r.map(d=>{const v=[];return"layer"in d?l.set(d.layer,v):l.set(d.graphics,v),{layerView:d,graphics:v}});for(const d of i){const v=l.get(d.layer)||l.get(d.sourceLayer)||null;v?v.push(d):s.push(d)}return{layerViewsAndGraphics:f,clientOnlyGraphics:s}}};return t=m([X("esri.views.PopupView")],t),t};let Sv=class extends _a(gt){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{ae(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(gt.ofType(this.itemType.Type))(e):new gt(e)}};function O8(e,t){return{type:e,cast:ZF,set(i){const r=Dp(i,this._get(t),e);r.owner=this,this._set(t,r)}}}m([x()],Sv.prototype,"owner",null),Sv=m([X("esri.core.support.OwningCollection")],Sv);let ox=class extends Sv{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{ae(t.item)||t.item.parent===this.owner&&(Pe.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};ox=m([X("esri.support.AnalysesCollection")],ox);let zd=class extends Sv{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};m([H4({Type:Dr,ensureType:Ai(Dr)})],zd.prototype,"itemType",void 0),zd=m([X("esri.support.GraphicsCollection")],zd);let Fh=class extends ot{constructor(e){super(e),this.view=null,this.baseLayerViews=new gt,this.referenceLayerViews=new gt,this._loadingHandle=Ve(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},fi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};m([x({constructOnly:!0})],Fh.prototype,"view",void 0),m([x({readOnly:!0})],Fh.prototype,"baseLayerViews",void 0),m([x({readOnly:!0})],Fh.prototype,"referenceLayerViews",void 0),m([x({readOnly:!0})],Fh.prototype,"suspended",null),m([x({type:Boolean,readOnly:!0})],Fh.prototype,"updating",null),Fh=m([X("esri.views.BasemapView")],Fh);class z_e{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=eu(),this._started=!1,this.done=!1,Eo(this._controller.signal,()=>{const s=new fe("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,l;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let f,d;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)f=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new fe("layer:view-not-supported","No layerview implementation was found");const M=await this.layerViewImporter.importLayerView(i);fr(t),f="default"in M?new M.default({layer:i,view:r}):new M({layer:i,view:r})}const v=()=>{d=Er(d),f.destroyed||f.destroy(),f.layer=null,f.parent=null,f.view=null,this.done=!0};d=Eo(t,v),fr(t);try{await f.when()}catch(M){throw v(),M}if(!((l=(s=this._map)==null?void 0:s.allLayers)==null?void 0:l.includes(i)))return v(),void this._deferred.reject(new fe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=f,i.emit("layerview-create",{view:r,layerView:f}),r.emit("layerview-create",{layer:i,layerView:f}),this.done=!0,this._deferred.resolve(f)}catch(f){i.emit("layerview-create-error",{view:r,error:f}),r.emit("layerview-create-error",{layer:i,error:f}),this.done=!0,this._deferred.reject(new fe("layerview:create-error","layerview creation failed",{layer:i,error:f}))}}}let Bo=class extends ot{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new O0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(ae(this._workPromise)&&(this._workPromise=eu(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(qf(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var f,d,v;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),ae(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=[],r=_=>{if(!ae(_))for(const M of _)M&&(i.push(M),this._createLayerView(M),"layers"in M&&M.layers&&r(M.layers))};for(const _ of this._rootCollectionNames)r(this.get(_));this._refreshCollections();for(const[_,M]of this._layerLayerViewInfoMap)i.includes(_)||(this._layerLayerViewInfoMap.delete(M.layer),M.destroy());const s=i.filter(_=>_.type==="group").map(_=>_.layers),l=[(f=t==null?void 0:t.ground)==null?void 0:f.layers,(d=t==null?void 0:t.basemap)==null?void 0:d.baseLayers,(v=t==null?void 0:t.basemap)==null?void 0:v.referenceLayers,t==null?void 0:t.layers,...s].filter(_=>!!_);this.addHandles(l.map(_=>this._watchUpdatingTracking.addOnCollectionChange(()=>_,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([fs(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ve(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Ps)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,q(this._workPromise)&&(this._workPromise.reject(zi()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return q(this._workPromise)||this._watchUpdatingTracking.updating||Gy(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new fe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const s of e){const l=this._layerLayerViewInfoMap.get(s);if(!l||!l.layerView)continue;const f=l.layerView;f.layer=s,f.parent=i,t.getItemAt(r)!==f&&t.splice(r,0,f),s.layers&&this._populateLayerViewsOwners(s.layers,f.layerViews,f),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new z_e(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,s;i&&(Ks(i)||i.name==="cancelled:layerview-create")||Pe.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(s=e.id)!=null?s:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};m([x()],Bo.prototype,"_workPromise",void 0),m([x({readOnly:!0})],Bo.prototype,"_watchUpdatingTracking",void 0),m([x({readOnly:!0})],Bo.prototype,"_layersToLayerViews",null),m([x({readOnly:!0})],Bo.prototype,"_rootCollectionNames",null),m([x()],Bo.prototype,"layerViewImporter",void 0),m([x()],Bo.prototype,"supportsGround",void 0),m([x({readOnly:!0})],Bo.prototype,"updating",null),m([x({readOnly:!0})],Bo.prototype,"updatingRemaining",null),m([x({constructOnly:!0})],Bo.prototype,"view",void 0),Bo=m([X("esri.views.LayerViewManager")],Bo);const G_e=Bo;let fo=class extends ot{constructor(e){super(e),this.factor=1.5,this.offset=An(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};m([x({type:Number})],fo.prototype,"factor",void 0),m([x({nonNullable:!0})],fo.prototype,"offset",void 0),m([x()],fo.prototype,"position",void 0),m([x({type:Number,range:{min:0}})],fo.prototype,"size",void 0),m([x()],fo.prototype,"maskUrl",void 0),m([x()],fo.prototype,"maskEnabled",void 0),m([x()],fo.prototype,"overlayUrl",void 0),m([x()],fo.prototype,"overlayEnabled",void 0),m([x({readOnly:!0})],fo.prototype,"version",null),m([x({type:Boolean})],fo.prototype,"visible",void 0),fo=m([X("esri.views.Magnifier")],fo);const kU=fo;class q_e{constructor(){this._tasks=new Array,this._running=new ix(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return this._running.set(!0),new Promise((s,l)=>this._tasks.push(new RU(s,l,t,i,r)))}unshift(t,i,r){return this._running.set(!0),new Promise((s,l)=>this._tasks.unshift(new RU(s,l,t,i,r)))}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=To(i.signal);if(s&&!i.abortCallback)i.reject(zi());else{const l=s?(r=i.abortCallback)==null?void 0:r.call(i,zi()):i.callback(t);tu(l)?l.then(i.resolve,i.reject):i.resolve(l)}}catch(s){i.reject(s)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const t=zi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0,this._running.set(!1)}}class RU{constructor(t,i,r,s,l){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=l}}let Mv=class extends ot{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};m([x()],Mv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),m([x()],Mv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Mv=m([X("esri.views.support.DebugFlags")],Mv);const U_e=new Mv;var yo;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(yo||(yo={}));var Yt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Yt||(Yt={}));const Ol=0,FU=new Map([[Yt.RESOURCE_CONTROLLER,Ol],[Yt.SLIDE,Ol],[Yt.STREAM_DATA_LOADER,Ol],[Yt.ELEVATION_QUERY,Ol],[Yt.TERRAIN_SURFACE,1],[Yt.SURFACE_GEOMETRY_UPDATES,1],[Yt.GRAPHICS_CORE,2],[Yt.I3S_CONTROLLER,2],[Yt.POINT_CLOUD_LAYER,2],[Yt.FEATURE_TILE_FETCHER,2],[Yt.OVERLAY,4],[Yt.STAGE,4],[Yt.GRAPHICS_DECONFLICTOR,4],[Yt.FILTER_VISIBILITY,4],[Yt.SCALE_VISIBILITY,4],[Yt.FRUSTUM_VISIBILITY,4],[Yt.CLOUDS_GENERATOR,4],[Yt.POINT_OF_INTEREST_FREQUENT,6],[Yt.POINT_OF_INTEREST_INFREQUENT,30],[Yt.LABELER,8],[Yt.FEATURE_QUERY_ENGINE,8],[Yt.FEATURE_TILE_TREE,16],[Yt.FEATURE_TILE_TREE_ACTIVE,Ol],[Yt.ELEVATION_ALIGNMENT,12],[Yt.TEXT_TEXTURE_ATLAS,12],[Yt.TEXTURE_UNLOAD,12],[Yt.LINE_OF_SIGHT_TOOL,16],[Yt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ol],[Yt.SNAPPING,Ol],[Yt.SHADOW_ACCUMULATOR,30]]),k8=32;function LU(e){return FU.has(e)?FU.get(e):typeof e=="number"?e:1}const NU=Sr(6.5),jU=Sr(1),B_e=Sr(30),DU=Sr(1e3/30),VU=Sr(100),zU=.9;var R8,Gd;(function(e){class t{constructor(){this._updating=new ix(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Xy("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=yo.INTERACTING,this._tasks=new yp,this._runQueue=new yp,this._load=0,this._idleStateCallbacks=new yp,this._idleUpdatesStartFired=!1,this._maxReschedule=k8,this._forceTask=!1,this._debug=!1,this._debugHandle=Ve(()=>U_e.SCHEDULER_LOG_SLOW_TASKS,f=>this._debug=f,fi);for(const f of Object.keys(Yt))this.performanceInfo.tasks.set(Yt[f],new Xy(Yt[f]));const l=this;this._test={FRAME_SAFETY_BUDGET:NU,INTERACTING_BUDGET:DU,IDLE_BUDGET:VU,get availableBudget(){return l._budget.budget},usedBudget:0,getBudget:()=>l._budget,setBudget:f=>l._budget=f,updateTask:f=>this._updateTask(f),getState:f=>this._getState(f),getRuntime:f=>this._getRuntime(f),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}get updating(){return this._updating.get()}set updating(l){this._updating.set(l)}destroy(){this._tasks.toArray().forEach(l=>l.remove()),this._tasks.clear(),Er(this._debugHandle),this._microTaskQueued=!1,this._updating.set(!1)}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=k8,this._schedule(),this.frame()))}))}registerTask(l,f){const d=LU(l),v=new i(this,l,f,d);return this._tasks.push(v),this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new Xy(l)),v}registerIdleStateCallbacks(l,f){const d={idleBegin:l,idleEnd:f};this._idleStateCallbacks.push(d),this.state===yo.IDLE&&this._idleUpdatesStartFired&&d.idleBegin();const v=this;return{remove:()=>this._removeIdleStateCallbacks(d),set idleBegin(_){v._idleUpdatesStartFired&&(d.idleEnd(),v._state===yo.IDLE&&_()),d.idleBegin=_},set idleEnd(_){d.idleEnd=_}}}get load(){return this._load}set state(l){this._state!==l&&(this._state=l,this.state!==yo.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(f=>f.idleEnd())))}get state(){return this._state}updateBudget(l){this._test.usedBudget=0,++this._frameNumber;let f=NU,d=l.frameDuration,v=jU;switch(this.state){case yo.IDLE:f=Sr(0),d=Sr(Math.max(VU,l.frameDuration)),v=B_e;break;case yo.INTERACTING:d=Sr(Math.max(DU,l.frameDuration));case yo.ANIMATING:}return d=Sr(d-l.elapsedFrameTime-f),this.state!==yo.IDLE&&d<jU&&!this._forceTask?(this._forceTask=!0,!1):(d=Sr(Math.max(d,v)),this._budget.reset(d,this.state),this._maxReschedule=k8,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case yo.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin())),this._runIdle();break;case yo.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(Sr(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd(),this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l),this._runQueue.removeUnordered(l)}_updateTask(l){this._tasks.forAll(f=>{f.name===l&&f.setPriority(l)})}_getState(l){if(this._runQueue.some(d=>d.name===l))return Gd.SCHEDULED;let f=Gd.IDLE;return this._tasks.forAll(d=>{d.name===l&&d.needsUpdate&&(d.schedulePriority<=1?f=Gd.READY:f!==Gd.READY&&(f=Gd.WAITING))}),f}_getRuntime(l){let f=0;return this._tasks.forAll(d=>{d.name===l&&(f+=d.runtime)}),f}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;if(this._tasks.forAll(d=>{d.needsUpdate&&l.set(d.name,(l.get(d.name)||0)+1)}),l.size===0)return null;let f="";return l.forEach((d,v)=>{f+=d>1?` ${d}x ${v}`:` ${v}`}),f}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=this._tasks.reduce((f,d)=>d.needsUpdate?++f:f,0);this._load=this._load*zU+l*(1-zU)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(l=>!!l.needsUpdate||(l.schedulePriority=l.basePriority,!1)),this._tasks.forAll(l=>{l.basePriority===Ol&&l.needsUpdate&&!this._runQueue.includes(l)&&this._runQueue.unshift(l)});this._runQueue.length===0;){let l=!1,f=0;if(this._tasks.forAll(d=>{d.needsUpdate&&d.schedulePriority!==0&&d.basePriority!==Ol&&(!d.task.runOncePerFrame||d.lastFrameRun!==this._frameNumber)&&(l=!0,f=Math.max(f,d.basePriority),d.schedulePriority===1?(d.schedulePriority=0,this._runQueue.push(d)):--d.schedulePriority)}),!l)return this._updating.set(!1),!1;--this._maxReschedule}return this._updating.set(!0),!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const f=this._budget.now(),d=this._runQueue.pop();this._budget.resetProgress();try{d.task.runTask(this._budget)}catch(_){Pe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${d.name}"`,_)}d.schedulePriority=d.basePriority,d.lastFrameRun=this._frameNumber;const v=this._budget.now()-f;if(d.runtime+=v,this._frameTaskTimes.set(d.priority,this._frameTaskTimes.get(d.priority)+v),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",d.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updating.set(this._tasks.some(_=>_.needsUpdate)),void this._recordFrameTaskTimes(this._budget.now()-l)}while(this._schedule());this._updating.set(this._tasks.some(f=>f.needsUpdate)),this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(Yt))this._frameTaskTimes.set(Yt[l],0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((f,d)=>this.performanceInfo.tasks.get(d).record(f)),this.performanceInfo.total.record(l)}get test(){return this._test}}e.Scheduler=t;class i{constructor(l,f,d,v){this._scheduler=l,this.name=f,this._basePriority=v,this.lastFrameRun=0,this.runtime=0,this._queue=new q_e,this._handles=new Jr,this.schedulePriority=this._basePriority,this._task=new ix(q(d)?d:this._queue),this._handles.add(so(()=>this.task.running,()=>l.activate()))}get task(){return this._task.get()}get updating(){return this._queue.running}remove(){this.processQueue(GU),this._scheduler.removeTask(this),this.schedule=$v.schedule,this.reschedule=$v.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){this.name=l;const f=LU(l);this._basePriority!==Ol&&this.schedulePriority===0||(this.schedulePriority=f),this._basePriority=f}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,f,d){return this._queue.push(l,f,d)}reschedule(l,f,d){return this._queue.unshift(l,f,d)}processQueue(l){this._queue.runTask(l)}}class r{constructor(){this._begin=typeof performance!="undefined"?performance.now():0,this._budget=0,this._state=yo.IDLE,this._done=!1,this._enabled=!0}run(l){return!this.done&&(l()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(l){this._enabled=l}reset(l,f){this._begin=this.now(),this._budget=l,this._state=f,this._done=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=!1}get hasProgressed(){return this._done}}e.Budget=r})(R8||(R8={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Gd||(Gd={}));const GU=(()=>{const e=new R8.Budget;return e.enabled=!1,e})();class H_e{remove(){}processQueue(){}schedule(t,i,r){try{if(To(i)){const s=zi();return r?Promise.resolve(r(s)):Promise.reject(s)}return S4(t(GU))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const $v=new H_e;let Iv=class extends ot{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Yt.TEXTURE_UNLOAD))!=null?i:$v}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(s.texture),this._stage.loadImmediate(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return q(t)?`${e}.${t}px`:e}};m([x()],Iv.prototype,"_frameTask",void 0),m([x()],Iv.prototype,"updating",null),Iv=m([X("esri.views.3d.support.TextureCollection")],Iv);var qU;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(qU||(qU={}));const UU=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],BU={};function HU(e){return!!BU[e]}function W_e(e){for(const t of e)if(!HU(t))return!1;return!0}UU.forEach(e=>{BU[e]=!0});class J_e{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,s){const l=Array.isArray(t)?t:t.split(",");if(!W_e(l))return l.some(HU)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let f,d;Array.isArray(i)?d=i:(f=i,d=[]),typeof r=="function"?f=r:s=r,s=s!=null?s:rt.DEFAULT;const v=this._createUniqueGroupName(),_=new Z_e(this.view,l,d,f);this._handlers.set(v,{handler:_,priority:s});for(const M of l){const T=this._handlerCounts.get(M)||0;this._handlerCounts.set(M,T+1)}return this.inputManager&&this.inputManager.installHandlers(v,[_],s),{remove:()=>this._removeHandler(v,l)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const s=this._handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class Z_e extends ln{constructor(t,i,r,s){super(!0),this.view=t;for(const l of i)switch(l){case"click":this.registerIncoming("click",r,f=>s(this._wrapClick(f)));break;case"double-click":this.registerIncoming("double-click",r,f=>s(this._wrapDoubleClick(f)));break;case"immediate-click":this.registerIncoming("immediate-click",r,f=>s(this._wrapImmediateClick(f)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,f=>s(this._wrapImmediateDoubleClick(f)));break;case"hold":this.registerIncoming("hold",r,f=>s(this._wrapHold(f)));break;case"drag":this.registerIncoming("drag",r,f=>{const d=this._wrapDrag(f);d&&s(d)});break;case"key-down":this.registerIncoming("key-down",r,f=>s(this._wrapKeyDown(f)));break;case"key-up":this.registerIncoming("key-up",r,f=>s(this._wrapKeyUp(f)));break;case"pointer-down":this.registerIncoming("pointer-down",r,f=>s(this._wrapPointer(f,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,f=>s(this._wrapPointer(f,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,f=>s(this._wrapPointer(f,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,f=>s(this._wrapPointerDrag(f)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,f=>s(this._wrapMouseWheel(f)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,f=>s(this._wrapPointer(f,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,f=>s(this._wrapPointer(f,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,f=>{s(this._wrapGamepad(f))});break;case"focus":this.registerIncoming("focus",r,f=>{s(this._wrapFocus(f))});break;case"blur":this.registerIncoming("blur",r,f=>{s(this._wrapBlur(f))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:f,native:d,eventId:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:l,y:f,native:d,timestamp:M,screenPoint:An(l,f),mapPoint:this._getMapPoint(l,f),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:T=>t.async(T),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:f,native:d,eventId:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:l,y:f,native:d,timestamp:M,mapPoint:this._getMapPoint(l,f),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:T=>t.async(T),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:f,native:d,eventId:v}=t.data,_=d.pointerId,{cancelable:M,timestamp:T}=t;return{type:"immediate-click",pointerId:_,pointerType:i,button:r,buttons:s,x:l,y:f,native:d,timestamp:T,mapPoint:this._getMapPoint(l,f),eventId:v,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:l,y:f,native:d,eventId:v}=t.data,_=d.pointerId,{cancelable:M,timestamp:T}=t;return{type:"immediate-double-click",pointerId:_,pointerType:i,button:r,buttons:s,x:l,y:f,native:d,timestamp:T,mapPoint:this._getMapPoint(l,f),eventId:v,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:s,x:l,y:f,native:d}=t.data,{cancelable:v,timestamp:_}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:l,y:f,native:d,timestamp:_,mapPoint:this._getMapPoint(l,f),cancelable:v,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(An(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:l,pointerType:f,button:d}=i;if(l==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const v=i.pointer.native,_=i.buttons,{cancelable:M,timestamp:T}=t,A={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return l==="end"&&(this._latestDragStart=void 0),{type:"drag",action:l,x:r,y:s,origin:A,pointerType:f,button:d,buttons:_,radius:i.radius,angle:WS(i.angle),native:v,timestamp:T,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:k=>t.async(k),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:s}=t.data,{cancelable:l,timestamp:f}=t;return{type:"key-down",key:i,repeat:r,native:s,timestamp:f,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:s,timestamp:l}=t;return{type:"key-up",key:i,native:r,timestamp:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:s,button:l,buttons:f,native:d,eventId:v}=t.data,_=d.pointerId,M=d.pointerType,{cancelable:T,timestamp:A}=t;return{type:i,x:r,y:s,pointerId:_,pointerType:M,button:l,buttons:f,native:d,timestamp:A,eventId:v,cancelable:T,stopPropagation:()=>t.stopPropagation(),async:k=>t.async(k),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:s,native:l,eventId:f}=t.data.currentEvent,{button:d}=t.data.startEvent,v=t.data.startEvent.native.pointerId,_=t.data.startEvent.native.pointerType,M=t.data.action,T={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:A,timestamp:k}=t;return{type:"pointer-drag",x:i,y:r,pointerId:v,pointerType:_,button:d,buttons:s,action:M,origin:T,native:l,timestamp:k,eventId:f,cancelable:A,stopPropagation:()=>t.stopPropagation(),async:F=>t.async(F),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:s}=t,{x:l,y:f,deltaY:d,native:v}=r;return{type:"mouse-wheel",x:l,y:f,deltaY:d,native:v,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:s}=t.data,{cancelable:l,timestamp:f}=t,{buttons:d,axes:v}=r;return{type:"gamepad",device:s,timestamp:f,action:i,buttons:d,axes:v,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}}var Ho,WU,JU;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Ho||(Ho={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(WU||(WU={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(JU||(JU={}));function K_e(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Pe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function F8(e){return e.visible&&e.getEditableFlag(Ho.USER)&&e.getEditableFlag(Ho.MANAGER)}function Li(e){return An(e.x,e.y)}function ZU(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return An(t.clientX-i.left,t.clientY-i.top)}function KU(e,t){return t instanceof Event?ZU(e,t):Li(t)}function YU(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Y_e{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":XU(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!QU(t))break;const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool);if(ae(l))break;const f=l.manipulator,d=l.tool;!(q(f)&&q(d)&&f.interactive)||f.grabbable&&f.grabbableForEvent(t)||!f.grabbing||f.dragging||this._ungrabManipulatorBeforeDragging(f,t,i),q(f)&&q(d)&&f.interactive&&f.grabbable&&f.grabbableForEvent(t)&&!f.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:f,tool:d,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&ae(i.activeTool)&&(this._revertToNullActiveTool=!0,i.setActiveTool(l.tool)),f.grabbing=!0,f.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!QU(t))break;const s=this._grabbedManipulators.get(t.pointerId),l=Zl(s,({manipulator:M})=>M),f=Zl(s,({tool:M})=>M);if(ae(l)||ae(f))break;const d=Li(t);d.x=Cn(d.x,0,i.view.width),d.y=Cn(d.y,0,i.view.height);const v=Jt(s).start,_=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(l.dragging=!0,_?l.events.emit("drag",{action:"update",start:v,screenPoint:d}):l.events.emit("drag",{action:"start",start:v,screenPoint:d,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:f,manipulator:l,start:v}));break;case"end":l.dragging=!1,_&&l.events.emit("drag",{action:"end",start:v,screenPoint:d}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool);if(X_e(t)||i.forEachTool(_=>{if((!q(l)||l.tool!==_||_.automaticManipulatorSelection)&&_.manipulators){let M=!1;_.manipulators.forEach(({manipulator:T})=>{T.selected&&(T.selected=!1,M=!0)}),M&&_.onManipulatorSelectionChanged&&_.onManipulatorSelectionChanged()}}),ae(l))break;const{manipulator:f,tool:d}=l;if(!f.interactive)break;f.selectable&&d.automaticManipulatorSelection&&(f.selected=!f.selected,d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged());const v=t.native.shiftKey;f.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:v,stopPropagation:r});break}case"click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool),f=q(l)?l.manipulator:null;if(ae(f)||!f.interactive)break;const d=t.native.shiftKey;f.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d}),r();break}case"double-click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool),f=q(l)?l.manipulator:null;if(ae(f)||!f.interactive)break;const d=t.native.shiftKey;f.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r});break}case"immediate-double-click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool),f=q(l)?l.manipulator:null;if(ae(f)||!f.interactive)break;const d=t.native.shiftKey;f.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Li(i)}),this._grabbedManipulators.forEach(({manipulator:s},l)=>{s===t&&this._grabbedManipulators.delete(l)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(t,i){const r=Zl(this._grabbedManipulators.get(t.pointerId),({manipulator:s})=>s);ae(r)||r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Li(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(t){let i=null;return Gy(t,({manipulator:r})=>!(ae(r)||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),t(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const l=this._grabbedManipulators.values(),f=sse(l,({tool:d})=>d===s);s.firstGrabbedManipulator=q(f)?f.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},s=!0,l){const f=(d,v)=>d===t&&(ae(l)||l===v);this._grabbedManipulators.forEach(({tool:d,manipulator:v,pointerType:_},M)=>{f(d,v)&&(this._grabbedManipulators.delete(M),v.grabbing=!1,v.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:_}))}),this._draggedManipulators.forEach(({tool:d,manipulator:v},_)=>{f(d,v)&&(this._draggedManipulators.delete(_),v.dragging=!1,v.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:d,manipulator:v},_)=>{f(d,v)&&(this._hoveredManipulators.delete(_),v.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(t,i,r){let s=null;return r(l=>{if(l.manipulators==null||!F8(l))return!1;const f=l.manipulators.intersect(t,i);return!ae(f)&&(s={tool:l,manipulator:f},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(An(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!XU(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Li(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){let l=this._intersect(t,r,s);const f=Zl(this._hoveredManipulators.get(i),({manipulator:d})=>d);q(l)&&!l.manipulator.interactive&&(l=null),q(l)&&f===l.manipulator||(q(f)&&(f.hovering=!1),q(l)?(l.manipulator.hovering=!0,this._hoveredManipulators.set(i,l)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}}function XU(e){return e==="mouse"}function QU(e){return e.pointerType!=="mouse"||e.button===0}function X_e(e){return!!e.native.shiftKey}const eB="attached",L8="tools";let ju=class extends pd{constructor(e){super(e),this._manipulatorState=new Y_e,this.tools=new gt,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(UU,e=>{this._handleInputEvent(e)},rt.TOOL),...K_e(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(q(e)&&!this.view.ready)return void Pe.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),q(t)&&t.deactivate(),q(e)&&e.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const r=F8(i);!ae(this.activeTool)&&r||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new Iv(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Ve(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),Kl(()=>this._set("textures",oi(this.textures)))],eB)):this.handles.add(Ve(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){q(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(eB)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i=je(te({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});q(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),!t&&q(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(L8),this._forEachTool(e=>{if(e instanceof ot){const t=Ve(()=>[e.cursor,e.visible,e.editable],()=>{F8(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,L8)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],L8)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag(Ho.MANAGER,ae(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;ae(e)&&this._forEachTool(t=>!(!q(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(ae(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};m([x({constructOnly:!0,nonNullable:!0})],ju.prototype,"view",void 0),m([x({readOnly:!0,nonNullable:!0})],ju.prototype,"textures",void 0),m([x({value:null})],ju.prototype,"activeTool",null),m([x({readOnly:!0,type:gt})],ju.prototype,"tools",void 0),m([x({readOnly:!0})],ju.prototype,"cursor",void 0),m([x({readOnly:!0})],ju.prototype,"updating",null),ju=m([X("esri.views.ToolViewManager")],ju);const Q_e=ju;let I1=class extends ot{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":exe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return txe[this.deviceType]}};m([x({nonNullable:!0,readOnly:!0})],I1.prototype,"nativeIndex",void 0),m([x({type:String,readOnly:!0})],I1.prototype,"deviceType",null),m([x({type:Number,readOnly:!0})],I1.prototype,"axisThreshold",null),I1=m([X("esri.views.input.gamepad.GamepadInputDevice")],I1);const exe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),txe={standard:.15,spacemouse:.025,unknown:0},N8=I1;let Tv=class extends ot{constructor(...e){super(...e),this.devices=new gt,this.enabledFocusMode="document"}};m([x({type:gt.ofType(N8),readOnly:!0})],Tv.prototype,"devices",void 0),m([x({type:["document","view","none"]})],Tv.prototype,"enabledFocusMode",void 0),Tv=m([X("esri.views.input.gamepad.GamepadSettings")],Tv);const ixe=Tv;let ax=class extends ot{constructor(){super(...arguments),this.gamepad=new ixe}};m([x({readOnly:!0})],ax.prototype,"gamepad",void 0),ax=m([X("esri.views.input.Input")],ax);const rxe=ax;let Lh=class extends ot{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};m([x({type:Boolean,nonNullable:!0})],Lh.prototype,"enabled",void 0),m([x({type:N8})],Lh.prototype,"device",void 0),m([x({type:["pan","zoom"],nonNullable:!0})],Lh.prototype,"mode",void 0),m([x({type:["forward-down","forward-up"],nonNullable:!0})],Lh.prototype,"tiltDirection",void 0),m([x({type:Number,nonNullable:!0})],Lh.prototype,"velocityFactor",void 0),Lh=m([X("esri.views.navigation.gamepad.GamepadSettings")],Lh);const tB=Lh;let qd=class extends ot{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new tB,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};m([x({type:Boolean})],qd.prototype,"browserTouchPanEnabled",void 0),m([x({type:tB,nonNullable:!0})],qd.prototype,"gamepad",void 0),m([x({type:Boolean})],qd.prototype,"momentumEnabled",void 0),m([x({type:Boolean})],qd.prototype,"mouseWheelZoomEnabled",void 0),qd=m([X("esri.views.navigation.Navigation")],qd);const iB=qd;function wPe(e,t,i){const r=nB(e),s=t,l=nxe(r,s,i);if(r){const f=lv.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&f!==r.heightUnit){const d=new fe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${f})`,{horizontalUnit:f});return new fe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:d})}}if(!sxe(e)||l===Gs.Unsupported)return new fe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(l){case Gs.Units:{const f=(r==null?void 0:r.heightUnit)||"unknown",d=(s==null?void 0:s.heightUnit)||"unknown",v=new fe("layerview:incompatible-height-unit",`The vertical units of the layer (${f}) must match the vertical units of the scene (${d})`,{layerUnit:f,sceneUnit:d});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:v})}case Gs.HeightModel:{const f=(r==null?void 0:r.heightModel)||"unknown",d=(s==null?void 0:s.heightModel)||"unknown",v=new fe("layerview:incompatible-height-model",`The height model of the layer (${f}) must match the height model of the scene (${d})`,{layerHeightModel:f,sceneHeightModel:d});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:v})}case Gs.CRS:{const f=(r==null?void 0:r.vertCRS)||"unknown",d=(s==null?void 0:s.vertCRS)||"unknown",v=new fe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${f}) must match the vertical datum of the scene (${d})`,{layerDatum:f,sceneDatum:d});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:v})}}return null}function nxe(e,t,i){if(!rB(e)||!rB(t))return Gs.Unsupported;if(e==null||t==null)return Gs.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Gs.Units;if(e.heightModel!==t.heightModel)return Gs.HeightModel;switch(e.heightModel){case"gravity-related-height":return Gs.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Gs.Ok:Gs.CRS;default:return Gs.Unsupported}}var Gs;function rB(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function sxe(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!aB(e)}function nB(e){var r;const t=e.url?Od(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&q(t)&&t.serverType==="ImageServer")&&sB(e)&&e.heightModelInfo?e.heightModelInfo:aB(e)?lv.deriveUnitFromSR(axe,e.spatialReference):null}function sB(e){return"heightModelInfo"in e}function oB(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":return!0;default:return!1}}function aB(e){return oB(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):lB(e)}function oxe(e){return e.layers!=null||lB(e)||oB(e)||sB(e)}function lB(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Gs||(Gs={}));const axe=new lv({heightModel:"gravity-related-height"});var Du;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Du||(Du={}));let j8,D8=null;async function lxe(e){D8||(D8=import("./geometryServiceUtils.fbd83c37.js").then(t=>j8=t)),await D8,fr(e)}async function uB(e,t,i,r){if(!e)return null;const s=e.spatialReference;return lh()||xl(s,t)?Vo(e,t):j8?j8.projectGeometry(e,t,i,r):(await Promise.race([lxe(r),uh(r)]),uB(e,t,i,r))}let Fi=class extends ot{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Za(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return q(this.userSpatialReference)?this.userSpatialReference:Jt(this._spatialReferenceTask.spatialReference)}get extent(){return Jt(this._extentTask.extent)}get heightModelInfo(){return Jt(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return Jt(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return Jt(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return ae(this.userSpatialReference)||this.userSpatialReference.equals(Jt(this._spatialReferenceTask.spatialReference))?Jt(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return Jt(this._tileInfoTask.tileInfo)}get mapCollections(){var i,r,s,l;const e=(i=this.map)==null?void 0:i.call(this),t=[];return q(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(l=e==null?void 0:e.basemap)==null?void 0:l.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var s;if(this.suspended)return(s=this._get("_spatialReferenceTask"))!=null?s:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const l of e){const f=this._getSupportedSpatialReferences(l);if(f.length>0){const d=this._narrowDownSpatialReferenceCandidates(i,f);q(d)&&(i=d)}if(q(i)&&i.length===1)break}if(t&&(ae(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:q(r)?r.spatialReference:null,viewingMode:q(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,s,l,f,d,v,_;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(s=(r=this.map)==null?void 0:r.call(this))==null?void 0:s.basemap,layers:(d=(f=(l=this.map)==null?void 0:l.call(this))==null?void 0:f.basemap)==null?void 0:d.baseLayers},{layers:(_=(v=this.map)==null?void 0:v.call(this))==null?void 0:_.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const M=e[0].tileInfo;return{tileInfo:M&&M.spatialReference.equals(this.spatialReference)?M:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,s,l;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const f of e)if(oxe(f)){const d=nB(f);if(d)return{heightModelInfo:d,vcsWkid:(s=f.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(l=f.spatialReference)==null?void 0:l.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,s;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const l of e.layers){const f="fullExtents"in l&&l.fullExtents||(q(l.fullExtent)?[l.fullExtent]:[]),d=this.requiresExtentInSpatialReference?null:f[0],v=(s=f.find(_=>_.spatialReference.equals(this.spatialReference)))!=null?s:d;if(v)return{candidates:[{extent:v,layer:l}],updating:!1};if(this._getSupportedSpatialReferences(l).length>0)for(const _ of f)i.push({extent:_,layer:l})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(ae(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:q(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(q(this._projectExtentTask.task)&&(this._projectExtentTask.task=Za(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:EL(async s=>{try{const l=await uB(i.extent,r,i.layer.portalItem,s);this._projectExtentTask=je(te({},this._projectExtentTask),{task:null,output:l})}catch{if(To(s))return;this._projectExtentTask=je(te({},this._projectExtentTask),{task:null})}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(ae(e))return t;const i=[],r=(s,l)=>q(s)?q(l)?s===l&&s:s:l;for(const s of e)for(const l of t){if(!s.spatialReference.equals(l.spatialReference))continue;const f=r(s.viewingMode,l.viewingMode);if(f!==!1){i.push({spatialReference:s.spatialReference,viewingMode:f});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return ae(e)||e.length<1?q(t)?{spatialReference:t,viewingMode:null}:null:(q(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==Du.Local)&&(e=e.filter(({viewingMode:i})=>i!==Du.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(q(s)){const l=q(s.constraints)?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:f,viewingMode:d}of l)(!this.requiresExtentInSpatialReference||ae(this.userSpatialReference)||f.equals(this.userSpatialReference))&&i.push({spatialReference:f,viewingMode:d})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};m([x()],Fi.prototype,"required",void 0),m([x({constructOnly:!0})],Fi.prototype,"map",void 0),m([x({constructOnly:!0})],Fi.prototype,"getSpatialReferenceSupport",void 0),m([x()],Fi.prototype,"defaultSpatialReference",void 0),m([x()],Fi.prototype,"userSpatialReference",void 0),m([x()],Fi.prototype,"sourcePreloadCount",void 0),m([x()],Fi.prototype,"priorityCollection",void 0),m([x()],Fi.prototype,"requiresExtentInSpatialReference",void 0),m([x()],Fi.prototype,"suspended",void 0),m([x({readOnly:!0})],Fi.prototype,"ready",null),m([x({readOnly:!0})],Fi.prototype,"heightModelInfoReady",null),m([x({readOnly:!0})],Fi.prototype,"spatialReference",null),m([x({readOnly:!0})],Fi.prototype,"extent",null),m([x({readOnly:!0})],Fi.prototype,"heightModelInfo",null),m([x({readOnly:!0})],Fi.prototype,"vcsWkid",null),m([x({readOnly:!0})],Fi.prototype,"latestVcsWkid",null),m([x({readOnly:!0})],Fi.prototype,"viewingMode",null),m([x({readOnly:!0})],Fi.prototype,"tileInfo",null),m([x({readOnly:!0})],Fi.prototype,"mapCollections",null),m([x({readOnly:!0})],Fi.prototype,"_allLayers",null),m([x({readOnly:!0})],Fi.prototype,"_spatialReferenceTask",null),m([x({readOnly:!0})],Fi.prototype,"_tileInfoTask",null),m([x({readOnly:!0})],Fi.prototype,"_heightModelInfoTask",null),m([x({readOnly:!0})],Fi.prototype,"_extentCandidatesTask",null),m([x()],Fi.prototype,"_extentTask",null),m([x()],Fi.prototype,"_projectExtentTask",void 0),Fi=m([X("esri.views.support.DefaultsFromMap")],Fi);var lx;let Et=lx=class extends _a(yn.EventedMixin(j2(ot))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new I0({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new zd,this.analyses=new ox,this.typeSpecificPreconditionsReady=!0,this.layerViews=new gt,this.magnifier=new kU,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new rxe,this.navigation=new iB,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new J_e(this),this.persistableViewModels=new gt,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(Ve(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,lx.views.add(this)):(this._currentSpatialReference=null,lx.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.toolViewManager)==null||i.detach(),q(this.analysisViewManager)&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):t&&!this.ready&&(this._startup(),q(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},bl))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,um(()=>this.ready)))),this.basemapView=new Fh({view:this}),this.layerViewManager=new G_e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Q_e({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Ve(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=je(te({},this.defaultsFromMap.required),{extent:e}),{sync:!0,initial:!0}),Ve(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Ve(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Ve(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(q(e))return;const s=Kl(()=>e=Za(e));e=EL(async l=>{try{await Ew(this.spatialReferenceWarningDelay,null,l)}catch{return}finally{e=null}Pe.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=oi(this.graphics),this.analyses=oi(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),oi(this.analysisViewManager),this.toolViewManager=oi(this.toolViewManager),this.layerViewManager=oi(this.layerViewManager),this.basemapView=oi(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Pe.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Fi(te({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||hl.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)==null?void 0:e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&((e==null?void 0:e.destroyed)&&(Pe.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:e}),e=null),hl.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Xi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return q(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new fe("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return q(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&Pe.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(so(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Et.views=new gt,m([x()],Et.prototype,"_userSpatialReference",void 0),m([x()],Et.prototype,"activeTool",null),m([x({readOnly:!0})],Et.prototype,"allLayerViews",void 0),m([x()],Et.prototype,"groundView",void 0),m([x()],Et.prototype,"animation",null),m([x()],Et.prototype,"basemapView",void 0),m([x({readOnly:!0})],Et.prototype,"_defaultsFromMapSettings",null),m([x()],Et.prototype,"defaultsFromMap",null),m([x()],Et.prototype,"fatalError",void 0),m([x({type:ai})],Et.prototype,"extent",null),m([x(O8(zd,"graphics"))],Et.prototype,"graphics",void 0),m([x(O8(ox,"analyses"))],Et.prototype,"analyses",void 0),m([x({readOnly:!0,type:lv})],Et.prototype,"heightModelInfo",null),m([x({readOnly:!0})],Et.prototype,"interacting",null),m([x({readOnly:!0})],Et.prototype,"navigating",null),m([x({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Et.prototype,"preconditionsReady",null),m([x({readOnly:!0})],Et.prototype,"typeSpecificPreconditionsReady",void 0),m([x({type:gt,readOnly:!0})],Et.prototype,"layerViews",void 0),m([x({type:kU})],Et.prototype,"magnifier",void 0),m([x({value:null,type:jhe})],Et.prototype,"map",null),m([x()],Et.prototype,"padding",void 0),m([x({readOnly:!0})],Et.prototype,"ready",void 0),m([x({type:At})],Et.prototype,"spatialReference",null),m([x()],Et.prototype,"spatialReferenceWarningDelay",void 0),m([x()],Et.prototype,"stationary",null),m([x({readOnly:!0})],Et.prototype,"supportsGround",void 0),m([x({type:Go})],Et.prototype,"timeExtent",void 0),m([x()],Et.prototype,"tools",null),m([x()],Et.prototype,"toolViewManager",void 0),m([x({readOnly:!0})],Et.prototype,"type",void 0),m([x({type:Number})],Et.prototype,"scale",void 0),m([x({readOnly:!0})],Et.prototype,"updating",void 0),m([x({readOnly:!0})],Et.prototype,"initialExtentRequired",void 0),m([x({readOnly:!0})],Et.prototype,"initialExtent",null),m([x()],Et.prototype,"cursor",null),m([x({readOnly:!0})],Et.prototype,"input",void 0),m([x({type:iB,nonNullable:!0})],Et.prototype,"navigation",void 0),m([x()],Et.prototype,"layerViewManager",void 0),m([x()],Et.prototype,"analysisViewManager",void 0),m([x()],Et.prototype,"width",void 0),m([x()],Et.prototype,"height",void 0),m([x({readOnly:!0})],Et.prototype,"resizing",void 0),m([x({value:null,readOnly:!0})],Et.prototype,"size",null),m([x({readOnly:!0})],Et.prototype,"suspended",void 0),m([x({readOnly:!0})],Et.prototype,"viewEvents",void 0),m([x({readOnly:!0})],Et.prototype,"persistableViewModels",void 0),m([x()],Et.prototype,"_isValid",void 0),m([x()],Et.prototype,"_readyCycleForced",void 0),m([x()],Et.prototype,"_currentSpatialReference",void 0),Et=lx=m([X("esri.views.View")],Et);const uxe=Et;let Nh=class extends D2{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new fe("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=tu(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};m([x({readOnly:!0})],Nh.prototype,"done",null),m([x({readOnly:!0,type:String})],Nh.prototype,"state",void 0),m([x()],Nh.prototype,"target",void 0),Nh=m([X("esri.views.ViewAnimation")],Nh),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Nh||(Nh={}));const V8=Nh;function Ud(e,t,i,r){const s=3*e,l=3*(i-e)-s,f=1-s-l,d=3*t,v=3*(r-t)-d,_=1-d-v;function M(F){return((f*F+l)*F+s)*F}function T(F){return((_*F+v)*F+d)*F}function A(F){return(3*f*F+2*l)*F+s}function k(F,D){let z,H,J,Y,ie,re;for(J=F,re=0;re<8;re++){if(Y=M(J)-F,Math.abs(Y)<D)return J;if(ie=A(J),Math.abs(ie)<1e-6)break;J-=Y/ie}if(z=0,H=1,J=F,J<z)return z;if(J>H)return H;for(;z<H;){if(Y=M(J),Math.abs(Y-F)<D)return J;F>Y?z=J:H=J,J=.5*(H-z)+z}return J}return function(F,D=1e-6){return T(k(F,D))}}const cxe=/^cubic-bezier\((.*)\)/,Wo={};function hxe(e){let t=Wo[e]||null;if(!t){const i=cxe.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=Ud.apply(Ud,r))}}return t}Wo.ease=Ud(.25,.1,.25,1),Wo.linear=Ud(0,0,1,1),Wo.easeIn=Wo["ease-in"]=Ud(.42,0,1,1),Wo.easeOut=Wo["ease-out"]=Ud(0,0,.58,1),Wo.easeInOut=Wo["ease-in-out"]=Ud(.42,0,.58,1);function kl(){return[1,0,0,1,0,0]}function cB(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function pxe(e,t,i,r,s,l){return[e,t,i,r,s,l]}function dxe(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:kl,clone:cB,fromValues:pxe,createView:dxe},Symbol.toStringTag,{value:"Module"}));function T1(e,t){return e[0]=t[0],e[1]=t[1],e}function xn(e,t,i){return e[0]=t,e[1]=i,e}function z8(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function ur(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function hB(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function pB(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function fxe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function yxe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function gxe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function mxe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function vxe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function E1(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Ra(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function Vu(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function C1(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function Ev(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function jh(e){const t=e[0],i=e[1];return t*t+i*i}function dB(e,t){return e[0]=-t[0],e[1]=-t[1],e}function bxe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function ux(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function zu(e,t){return e[0]*t[0]+e[1]*t[1]}function G8(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function cx(e,t,i,r){const s=t[0],l=t[1];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e}function wxe(e,t){t=t||1;const i=2*Pg()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function _xe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Rl(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function xxe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function Sxe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function fB(e,t,i,r){const s=t[0]-i[0],l=t[1]-i[1],f=Math.sin(r),d=Math.cos(r);return e[0]=s*d-l*f+i[0],e[1]=s*f+l*d+i[1],e}function Mxe(e,t){const i=e[0],r=e[1],s=t[0],l=t[1];let f=i*i+r*r;f>0&&(f=1/Math.sqrt(f));let d=s*s+l*l;d>0&&(d=1/Math.sqrt(d));const v=(i*s+r*l)*f*d;return v>1?0:v<-1?Math.PI:Math.acos(v)}function $xe(e){return"vec2("+e[0]+", "+e[1]+")"}function Ixe(e,t){return e[0]===t[0]&&e[1]===t[1]}function q8(e,t){const i=e[0],r=e[1],s=t[0],l=t[1],f=$s();return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))}function U8(e,t,i,r,s){let l=t[0]-i[0],f=t[1]-i[1];const d=(r[0]*l+r[1]*f)*(s-1);return l=r[0]*d,f=r[1]*d,e[0]=t[0]+l,e[1]=t[1]+f,e}const Txe=Ev,hx=ur,Exe=hB,Cxe=pB,Axe=Vu,Pxe=C1,Oxe=jh;Object.freeze(Object.defineProperty({__proto__:null,copy:T1,set:xn,add:z8,subtract:ur,multiply:hB,divide:pB,ceil:fxe,floor:yxe,min:gxe,max:mxe,round:vxe,scale:E1,scaleAndAdd:Ra,distance:Vu,squaredDistance:C1,length:Ev,squaredLength:jh,negate:dB,inverse:bxe,normalize:ux,dot:zu,cross:G8,lerp:cx,random:wxe,transformMat2:_xe,transformMat2d:Rl,transformMat3:xxe,transformMat4:Sxe,rotate:fB,angle:Mxe,str:$xe,exactEquals:Ixe,equals:q8,projectAndScale:U8,len:Txe,sub:hx,mul:Exe,div:Cxe,dist:Axe,sqrDist:Pxe,sqrLen:Oxe},Symbol.toStringTag,{value:"Module"}));function Wt(){return[0,0]}function yB(e){return[e[0],e[1]]}function Gu(e,t){return[e,t]}function gB(e){const t=Wt(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function mB(e,t){return new Float64Array(e,t,2)}function vB(){return Wt()}function bB(){return Gu(1,1)}function wB(){return Gu(1,0)}function _B(){return Gu(0,1)}const kxe=vB(),Rxe=bB(),Fxe=wB(),Lxe=_B();Object.freeze(Object.defineProperty({__proto__:null,create:Wt,clone:yB,fromValues:Gu,fromArray:gB,createView:mB,zeros:vB,ones:bB,unitX:wB,unitY:_B,ZEROS:kxe,ONES:Rxe,UNIT_X:Fxe,UNIT_Y:Lxe},Symbol.toStringTag,{value:"Module"}));const xB=96,SB=39.37,Nxe=180/Math.PI;function MB(e){return e.wkid?e:e.spatialReference||At.WGS84}function B8(e,t){return t.type?xn(e,t.x,t.y):T1(e,t)}function $B(e){return Xp(e)}function Cv(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*Hxe(e.spatialReference)}async function Av(e,t,i,r){let s,l;if(!e||Array.isArray(e)&&!e.length)return null;if(gt.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const d=e.every(M=>"attributes"in M),v=e.some(M=>!M.geometry);let _=e;if(d&&v&&t&&t.allLayerViews){const M=new Map;for(const F of e){const D=F.layer,z=M.get(D)||[],H=F.attributes[D.objectIdField];H!=null&&z.push(H),M.set(D,z)}const T=[];M.forEach((F,D)=>{const z=t.allLayerViews.find(H=>H.layer.id===D.id);if("queryFeatures"in z){const H=D.createQuery();H.objectIds=F,H.returnGeometry=!0,T.push(z.queryFeatures(H))}});const A=await Promise.all(T),k=[];for(const F of A)if(F&&F.features&&F.features.length)for(const D of F.features)q(D.geometry)&&k.push(D.geometry);_=k}for(const M of _)r=await Av(M,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new dt(e);else if(e instanceof Cc)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const d=e.layer,v=t.allLayerViews.find(_=>_.layer.id===d.id);if("queryFeatures"in v){const _=d.createQuery();_.objectIds=[e.attributes[d.objectIdField]],_.returnGeometry=!0;const M=await v.queryFeatures(_);s=ow(M,"features",0,"geometry")}}}if(ae(s)||(l=s.type==="point"?new ai({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!l))return null;lh()||xl(l.spatialReference,i)||await uh();const f=Vo(l,i);return f?r=r?r.union(f):f:null}function jxe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s&&s.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function H8(e,t){return Xi(MB(e),t)?e:Vo(e,t)}async function Dxe(e,t){if(!e||!t)return new vl({targetGeometry:new dt,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:l,size:f}=t,d=[s?f[0]-s.left-s.right:f[0],s?f[1]-s.top-s.bottom:f[1]];let v=null;e instanceof vl?v=e:e.viewpoint?v=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(v=e.target);let _=null;v&&v.targetGeometry?_=v.targetGeometry:e instanceof ai?_=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(_=await Av(e.center,t,i)||await Av(e.extent,t,i)||await Av(e.target,t,i)||await Av(e,t,i)),!_&&l&&l.targetGeometry?_=l.targetGeometry:!_&&t.extent&&(_=t.extent),i||(i=MB(t.spatialReference||t.extent||_)),lh()||Xi(_.spatialReference,i)||xl(_,i)||await uh();const M=H8(_.center?_.center:_,i);let T=null;if(v&&q(v.targetGeometry)&&v.targetGeometry.type==="point")T=v.scale;else if("scale"in e&&e.scale)T=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)T=r.zoomToScale(e.zoom);else if(Array.isArray(_)||_.type==="point"||_.type==="extent"&&_.width===0&&_.height===0){const D=H8(t.extent,i);T=q(D)?Cv(D,d):t.extent?Cv(t.extent,d):l.scale}else T=Cv(H8(_.extent,i),d);const A=jxe(e);A&&(A.min&&A.min>T?T=A.min:A.max&&A.max<T&&(T=A.max));let k=0;v?k=v.rotation:e.hasOwnProperty("rotation")?k=e.rotation:l&&(k=l.rotation);let F=new vl({targetGeometry:M,scale:T,rotation:k});return r&&(F=r.fit(F),r.constrainByGeometry(F),r.rotationEnabled||(F.rotation=k)),F}function Fa(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Vxe(e,t,i){return i?xn(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):E1(e,t,.5)}const zxe=function(){const e=Wt();return function(t,i,r){const s=i.targetGeometry;B8(e,s);const l=.5*A1(i);return t.xmin=e[0]-l*r[0],t.ymin=e[1]-l*r[1],t.xmax=e[0]+l*r[0],t.ymax=e[1]+l*r[1],t.spatialReference=s.spatialReference,t}}();function Gxe(e,t,i,r,s){return K8(e,t,i.center),e.scale=Cv(i,r),s&&s.constraints&&s.constraints.constrain(e),e}function qxe(e,t,i,r){return Z8(e,t,i,r),Q_(e,e)}const IB=function(){const e=Wt();return function(t,i,r){return hx(t,Wxe(t,i),Vxe(e,i,r))}}(),Uxe=function(){const e=kl(),t=Wt();return function(i,r,s,l){const f=A1(r),d=W8(r);return xn(t,f,f),gU(e,t),ex(e,e,d),wv(e,e,IB(t,s,l)),wv(e,e,[0,l.top-l.bottom]),xn(i,e[4],e[5])}}();function A1(e){return e.scale*Bxe(e.targetGeometry)}function Bxe(e){return q(e)&&Cr(e.spatialReference)?1/($B(e.spatialReference)*SB*xB):1}function W8(e){return DS(e.rotation)||0}function Hxe(e){return Cr(e)?$B(e)*SB*xB:1}function Wxe(e,t){return E1(e,t,.5)}const J8=function(){const e=Wt(),t=Wt(),i=Wt();return function(r,s,l,f,d,v){return dB(e,s),E1(t,l,.5*v),xn(i,1/f*v,-1/f*v),A8(r,t),d&&ex(r,r,d),C8(r,r,i),wv(r,r,e),r}}(),Z8=function(){const e=Wt();return function(t,i,r,s){const l=A1(i),f=W8(i);return B8(e,i.targetGeometry),J8(t,e,r,l,f,s)}}(),Jxe=function(){const e=Wt();return function(t,i,r,s){const l=A1(i);return B8(e,i.targetGeometry),J8(t,e,r,l,0,s)}}();function Zxe(e){const t=Ys(e);return t?t.valid[1]-t.valid[0]:0}function Kxe(e,t){return Math.round(Zxe(e)/t)}const Yxe=function(){const e=Wt(),t=Wt(),i=[0,0,0];return function(r,s,l){ur(e,r,s),ux(e,e),ur(t,r,l),ux(t,t),G8(i,e,t);let f=Math.acos(zu(e,t)/(Ev(e)*Ev(t)))*Nxe;return i[2]<0&&(f=-f),isNaN(f)&&(f=0),f}}(),Xxe=function(){const e=Wt();return function(t,i,r,s){const l=t.targetGeometry;return Fa(t,i),Uxe(e,i,r,s),l.x+=e[0],l.y+=e[1],t}}(),K8=function(e,t,i){Fa(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},Qxe=function(){const e=Wt();return function(t,i,r,s,l){l||(l="center"),hx(e,r,s),E1(e,e,.5);const f=e[0],d=e[1];switch(l){case"center":xn(e,0,0);break;case"left":xn(e,-f,0);break;case"top":xn(e,0,d);break;case"right":xn(e,f,0);break;case"bottom":xn(e,0,-d);break;case"top-left":xn(e,-f,d);break;case"bottom-left":xn(e,-f,-d);break;case"top-right":xn(e,f,d);break;case"bottom-right":xn(e,f,-d)}return px(t,i,e),t}}();function _Pe(e,t,i){return Fa(e,t),e.rotation+=i,e}function e9e(e,t,i){return Fa(e,t),e.rotation=i,e}const t9e=function(){const e=Wt();return function(t,i,r,s,l){return Fa(t,i),isNaN(r)||r===0||(CB(e,s,i,l),t.scale=i.scale*r,AB(e,e,t,l),px(t,t,xn(e,e[0]-s[0],s[1]-e[1]))),t}}();function TB(e,t,i){return Fa(e,t),e.scale=i,e}const EB=function(){const e=Wt();return function(t,i,r,s,l,f){return Fa(t,i),isNaN(r)||r===0||(CB(e,l,i,f),t.scale=i.scale*r,t.rotation+=s,AB(e,e,t,f),px(t,t,xn(e,e[0]-l[0],l[1]-e[1]))),t}}(),xPe=function(){const e=Wt(),t=Wt();return function(i,r,s,l,f,d,v){return IB(t,d,v),z8(e,f,t),l?EB(i,r,s,l,e,d):t9e(i,r,s,e,d)}}(),CB=function(){const e=kl();return function(t,i,r,s){return Rl(t,i,qxe(e,r,s,1))}}(),AB=function(){const e=kl();return function(t,i,r,s){return Rl(t,i,Z8(e,r,s,1))}}(),px=function(){const e=Wt(),t=kl();return function(i,r,s){Fa(i,r);const l=A1(r),f=i.targetGeometry;return yU(t,W8(r)),C8(t,t,Gu(l,l)),Rl(e,s,t),f.x+=e[0],f.y+=e[1],i}}();class i9e{constructor(t,i,r,s){const l=t.targetGeometry,f=i.targetGeometry;s?typeof s=="string"&&(s=hxe(s)||Wo.ease):s=Wo.ease,this.easing=s,this.duration=r,this.sCenterX=l.x,this.sCenterY=l.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=f.x,this.tCenterY=f.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let s,l,f,d;i>=1?(s=this.tCenterX,l=this.tCenterY,f=this.tRotation,d=this.tScale):(s=this.sCenterX+r*this.dCenterX,l=this.sCenterY+r*this.dCenterY,f=this.sRotation+r*this.dRotation,d=this.sScale+r*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=l,t.scale=d,t.rotation=f}}let qu=class extends ot{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=Wo.ease,this.view=null,this.viewpoint=null,this.viewpoint=new vl({targetGeometry:new dt,scale:0,rotation:0}),this._updateTask=Uf({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;Fa(r,t),this.transition=new i9e(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new V8({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==V8.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};m([x()],qu.prototype,"animation",void 0),m([x()],qu.prototype,"duration",void 0),m([x()],qu.prototype,"transition",void 0),m([x()],qu.prototype,"easing",void 0),m([x()],qu.prototype,"view",void 0),m([x()],qu.prototype,"viewpoint",void 0),qu=m([X("esri.views.2d.AnimationManager")],qu);const r9e=qu;class n9e{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:l,state:{id:f}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),l.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),q(s)&&(s.lastUpdateId!==f&&(s.viewChange(),s.lastUpdateId=f),s.updateRequested&&s.processUpdate(this._updateParameters)),q(r)&&(r.lastUpdateId!==f&&(r.viewChange(),r.lastUpdateId=f),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Ve(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Uf(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function qr(){return Promise.all([import("./webglDeps.bc3a607e.js"),import("./mapViewDeps.db0b1fa0.js")])}const Pv=()=>qr().then(()=>import("./TileLayerView2D.c6b0c47b.js")),Ov=()=>qr().then(()=>import("./FeatureLayerView2D.e0439759.js")),PB={"base-dynamic":()=>qr().then(()=>import("./BaseDynamicLayerView2D.a516fa70.js")),"base-tile":Pv,"bing-maps":Pv,csv:Ov,"geo-rss":()=>qr().then(()=>import("./GeoRSSLayerView2D.c994617c.js")),feature:Ov,geojson:Ov,graphics:()=>qr().then(()=>import("./GraphicsLayerView2D.9bca8103.js")),group:()=>qr().then(()=>import("./GroupLayerView2D.86511eed.js")),imagery:()=>qr().then(()=>import("./ImageryLayerView2D.98f24296.js")),"imagery-tile":()=>qr().then(()=>import("./ImageryTileLayerView2D.4e2a8732.js")),kml:()=>qr().then(()=>import("./KMLLayerView2D.0893aed5.js")),"map-image":()=>qr().then(()=>import("./MapImageLayerView2D.2532207a.js")),"map-notes":()=>qr().then(()=>import("./MapNotesLayerView2D.9131a4f5.js")),media:()=>qr().then(()=>import("./MediaLayerView2D.57a94b76.js")),"ogc-feature":()=>qr().then(()=>import("./OGCFeatureLayerView2D.a7fbed94.js")),"open-street-map":Pv,"oriented-imagery":Ov,route:()=>qr().then(()=>import("./RouteLayerView2D.c69cd1ac.js")),stream:()=>qr().then(()=>import("./StreamLayerView2D.70e3b163.js")),"subtype-group":()=>qr().then(()=>import("./SubtypeGroupLayerView2D.76629abd.js")),tile:Pv,"vector-tile":()=>qr().then(()=>import("./VectorTileLayerView2D.3c94987d.js")),wcs:()=>qr().then(()=>import("./ImageryTileLayerView2D.4e2a8732.js")),"web-tile":Pv,wfs:Ov,wms:()=>qr().then(()=>import("./WMSLayerView2D.ec3ada78.js")),wmts:()=>qr().then(()=>import("./WMTSLayerView2D.769dd29a.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function s9e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new fe(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const OB={hasLayerViewModule:e=>q(PB[e.type]),importLayerView:e=>{const t=PB[e.type];if(ae(t))throw s9e(e);return t(e)}};function o9e(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,l=0,f=0;const d=[0,0],v=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const _ of v)for(let M=0;M<_.length-1;M++){Ioe(d,r,_,M);const T=Vu(r,d);T<s&&(s=T,l=d[0],f=d[1])}return{coordinate:new dt({x:l,y:f,spatialReference:i}),distance:s}}var Y8;let Bd=Y8=class extends OS(ot){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(ae(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Vo(this.geometry,this.spatialReference)}catch(e){return Pe.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(ae(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Hw(this.normalizedGeometry,i):Ok(this.normalizedGeometry,i))return e;const{coordinate:r}=o9e(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new Y8({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};m([x({constructOnly:!0})],Bd.prototype,"geometry",void 0),m([x({readOnly:!0})],Bd.prototype,"normalizedGeometry",null),m([x({constructOnly:!0})],Bd.prototype,"spatialReference",void 0),Bd=Y8=m([X("esri.views.2d.constraints.GeometryConstraint")],Bd);var X8;let kv=X8=class extends OS(ot){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new X8({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};m([x()],kv.prototype,"enabled",void 0),m([x()],kv.prototype,"rotationEnabled",void 0),kv=X8=m([X("esri.views.2d.constraints.RotationConstraint")],kv);const kB=kv;var Q8;let qs=Q8=class extends OS(ot){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:l}=this,f=-1,d=-1,v=!1,_=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(M=>M.clone()),t.sort((M,T)=>T.scale-M.scale),t.forEach((M,T)=>M.level=T);for(const M of t)!v&&i>0&&i>=M.scale&&(f=M.level,v=!0),!_&&r>0&&r>=M.scale&&(d=e?e.level:-1,_=!0),e=M;s===-1&&(s=i===0?0:f),l===-1&&(l=r===0?t.length-1:d),s=Math.max(s,0),s=Math.min(s,t.length-1),l=Math.max(l,0),l=Math.min(l,t.length-1),s>l&&([s,l]=[l,s]),i=t[s].scale,r=t[l].scale,t.splice(0,s),t.splice(l-s+1,t.length),t.forEach((M,T)=>{this._lodByScale[M.scale]=M,this._scales[T]=M.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",l),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,l=t&&t.targetGeometry,f=r!==0&&e.scale<r,d=i!==0&&e.scale>i;if(f||d){const v=d?i:r;if(t&&l){const _=(v-t.scale)/(e.scale-t.scale);s.x=l.x+(s.x-l.x)*_,s.y=l.y+(s.y-l.y)*_}e.scale=v}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new Q8({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};m([x({readOnly:!0})],qs.prototype,"effectiveLODs",void 0),m([x({readOnly:!0})],qs.prototype,"effectiveMinZoom",void 0),m([x({readOnly:!0})],qs.prototype,"effectiveMaxZoom",void 0),m([x({readOnly:!0})],qs.prototype,"effectiveMinScale",void 0),m([x({readOnly:!0})],qs.prototype,"effectiveMaxScale",void 0),m([x()],qs.prototype,"lods",void 0),m([x()],qs.prototype,"minZoom",void 0),m([x()],qs.prototype,"maxZoom",void 0),m([x()],qs.prototype,"minScale",void 0),m([x()],qs.prototype,"maxScale",void 0),m([x()],qs.prototype,"snapToZoom",void 0),qs=Q8=m([X("esri.views.2d.constraints.ZoomConstraint")],qs);const RB=qs,a9e={base:null,key:"type",typeMap:{extent:ai,polygon:Dn}};let $r=class extends ot{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,i;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _defaultLODs(){var i,r,s;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(s=this.view)==null?void 0:s.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new Bd({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new kB({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,s=this.minScale,l=this.maxScale,f=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===s&&e.maxScale===l&&e.snapToZoom===f?e:new RB({lods:t,minZoom:i,maxZoom:r,minScale:s,maxScale:l,snapToZoom:f})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};m([x({readOnly:!0})],$r.prototype,"effectiveLODs",null),m([x({readOnly:!0})],$r.prototype,"effectiveMinScale",null),m([x({readOnly:!0})],$r.prototype,"effectiveMaxScale",null),m([x({readOnly:!0})],$r.prototype,"effectiveMinZoom",null),m([x({readOnly:!0})],$r.prototype,"effectiveMaxZoom",null),m([x({types:a9e,value:null})],$r.prototype,"geometry",null),m([x({type:[YM]})],$r.prototype,"lods",void 0),m([x()],$r.prototype,"minScale",void 0),m([x()],$r.prototype,"maxScale",void 0),m([x()],$r.prototype,"minZoom",void 0),m([x()],$r.prototype,"maxZoom",void 0),m([x()],$r.prototype,"rotationEnabled",void 0),m([x()],$r.prototype,"snapToZoom",void 0),m([x()],$r.prototype,"view",void 0),m([x({readOnly:!0})],$r.prototype,"version",null),m([x()],$r.prototype,"_defaultLODs",null),m([x({type:Bd})],$r.prototype,"_geometry",null),m([x({type:kB})],$r.prototype,"_rotation",null),m([x({readOnly:!0,type:RB})],$r.prototype,"_zoom",null),$r=m([X("esri.views.2d.MapViewConstraints")],$r);const FB=$r;function l9e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function u9e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function LB(e,t,i,r,s,l,f,d,v,_){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=f,e[6]=d,e[7]=v,e[8]=_,e}function NB(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function c9e(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function h9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=M*f-d*_,A=-M*l+d*v,k=_*l-f*v;let F=i*T+r*A+s*k;return F?(F=1/F,e[0]=T*F,e[1]=(-M*r+s*_)*F,e[2]=(d*r-s*f)*F,e[3]=A*F,e[4]=(M*i-s*v)*F,e[5]=(-d*i+s*l)*F,e[6]=k*F,e[7]=(-_*i+r*v)*F,e[8]=(f*i-r*l)*F,e):null}function p9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=t[4],d=t[5],v=t[6],_=t[7],M=t[8];return e[0]=f*M-d*_,e[1]=s*_-r*M,e[2]=r*d-s*f,e[3]=d*v-l*M,e[4]=i*M-s*v,e[5]=s*l-i*d,e[6]=l*_-f*v,e[7]=r*v-i*_,e[8]=i*f-r*l,e}function d9e(e){const t=e[0],i=e[1],r=e[2],s=e[3],l=e[4],f=e[5],d=e[6],v=e[7],_=e[8];return t*(_*l-f*v)+i*(-_*s+f*d)+r*(v*s-l*d)}function eT(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=i[0],k=i[1],F=i[2],D=i[3],z=i[4],H=i[5],J=i[6],Y=i[7],ie=i[8];return e[0]=A*r+k*f+F*_,e[1]=A*s+k*d+F*M,e[2]=A*l+k*v+F*T,e[3]=D*r+z*f+H*_,e[4]=D*s+z*d+H*M,e[5]=D*l+z*v+H*T,e[6]=J*r+Y*f+ie*_,e[7]=J*s+Y*d+ie*M,e[8]=J*l+Y*v+ie*T,e}function tT(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=i[0],k=i[1];return e[0]=r,e[1]=s,e[2]=l,e[3]=f,e[4]=d,e[5]=v,e[6]=A*r+k*f+_,e[7]=A*s+k*d+M,e[8]=A*l+k*v+T,e}function jB(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=Math.sin(i),k=Math.cos(i);return e[0]=k*r+A*f,e[1]=k*s+A*d,e[2]=k*l+A*v,e[3]=k*f-A*r,e[4]=k*d-A*s,e[5]=k*v-A*l,e[6]=_,e[7]=M,e[8]=T,e}function f9e(e,t,i){const r=i[0],s=i[1],l=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=l*t[6],e[7]=l*t[7],e[8]=l*t[8],e}function y9e(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function g9e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function m9e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function v9e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function b9e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function w9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=i+i,d=r+r,v=s+s,_=i*f,M=r*f,T=r*d,A=s*f,k=s*d,F=s*v,D=l*f,z=l*d,H=l*v;return e[0]=1-T-F,e[3]=M-H,e[6]=A+z,e[1]=M+H,e[4]=1-_-F,e[7]=k-D,e[2]=A-z,e[5]=k+D,e[8]=1-_-T,e}function _9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[4],f=t[5],d=t[6],v=t[8],_=t[9],M=t[10],T=M*f-d*_,A=-M*l+d*v,k=_*l-f*v,F=i*T+r*A+s*k;if(!F)return null;const D=1/F;return e[0]=T*D,e[1]=(-M*r+s*_)*D,e[2]=(d*r-s*f)*D,e[3]=A*D,e[4]=(M*i-s*v)*D,e[5]=(-d*i+s*l)*D,e[6]=k*D,e[7]=(-_*i+r*v)*D,e[8]=(f*i-r*l)*D,e}function x9e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=t[9],A=t[10],k=t[11],F=t[12],D=t[13],z=t[14],H=t[15],J=i*d-r*f,Y=i*v-s*f,ie=i*_-l*f,re=r*v-s*d,ee=r*_-l*d,le=s*_-l*v,me=M*D-T*F,we=M*z-A*F,_e=M*H-k*F,Me=T*z-A*D,Se=T*H-k*D,He=A*H-k*z;let We=J*He-Y*Se+ie*Me+re*_e-ee*we+le*me;return We?(We=1/We,e[0]=(d*He-v*Se+_*Me)*We,e[1]=(v*_e-f*He-_*we)*We,e[2]=(f*Se-d*_e+_*me)*We,e[3]=(s*Se-r*He-l*Me)*We,e[4]=(i*He-s*_e+l*we)*We,e[5]=(r*_e-i*Se-l*me)*We,e[6]=(D*le-z*ee+H*re)*We,e[7]=(z*ie-F*le-H*Y)*We,e[8]=(F*ee-D*ie+H*J)*We,e):null}function S9e(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function M9e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $9e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function I9e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function DB(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function T9e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function E9e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function C9e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function A9e(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],f=e[4],d=e[5],v=e[6],_=e[7],M=e[8],T=t[0],A=t[1],k=t[2],F=t[3],D=t[4],z=t[5],H=t[6],J=t[7],Y=t[8],ie=$s();return Math.abs(i-T)<=ie*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(r-A)<=ie*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(s-k)<=ie*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-F)<=ie*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(f-D)<=ie*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(d-z)<=ie*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(v-H)<=ie*Math.max(1,Math.abs(v),Math.abs(H))&&Math.abs(_-J)<=ie*Math.max(1,Math.abs(_),Math.abs(J))&&Math.abs(M-Y)<=ie*Math.max(1,Math.abs(M),Math.abs(Y))}function P9e(e){const t=$s(),i=e[0],r=e[1],s=e[2],l=e[3],f=e[4],d=e[5],v=e[6],_=e[7],M=e[8];return Math.abs(1-(i*i+l*l+v*v))<=t&&Math.abs(1-(r*r+f*f+_*_))<=t&&Math.abs(1-(s*s+d*d+M*M))<=t}const O9e=eT,k9e=DB;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:l9e,copy:u9e,set:LB,identity:NB,transpose:c9e,invert:h9e,adjoint:p9e,determinant:d9e,multiply:eT,translate:tT,rotate:jB,scale:f9e,scaleByVec2:y9e,fromTranslation:g9e,fromRotation:m9e,fromScaling:v9e,fromMat2d:b9e,fromQuat:w9e,normalFromMat4Legacy:_9e,normalFromMat4:x9e,projection:S9e,str:M9e,frob:$9e,add:I9e,subtract:DB,multiplyScalar:T9e,multiplyScalarAndAdd:E9e,exactEquals:C9e,equals:A9e,isOrthoNormal:P9e,mul:O9e,sub:k9e},Symbol.toStringTag,{value:"Module"}));function dx(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function R9e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function F9e(e,t,i,r,s,l,f,d,v){const _=new Float32Array(9);return _[0]=e,_[1]=t,_[2]=i,_[3]=r,_[4]=s,_[5]=l,_[6]=f,_[7]=d,_[8]=v,_}function L9e(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:dx,clone:R9e,fromValues:F9e,createView:L9e},Symbol.toStringTag,{value:"Module"}));function VB(){return new Float32Array(2)}function N9e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function P1(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function j9e(e,t){return new Float32Array(e,t,2)}function zB(){return VB()}function GB(){return P1(1,1)}function qB(){return P1(1,0)}function UB(){return P1(0,1)}const D9e=zB(),V9e=GB(),z9e=qB(),G9e=UB();Object.freeze(Object.defineProperty({__proto__:null,create:VB,clone:N9e,fromValues:P1,createView:j9e,zeros:zB,ones:GB,unitX:qB,unitY:UB,ZEROS:D9e,ONES:V9e,UNIT_X:z9e,UNIT_Y:G9e},Symbol.toStringTag,{value:"Module"}));function q9e(e){return e instanceof Float32Array&&e.length>=2}function U9e(e){return Array.isArray(e)&&e.length>=2}function iT(e){return q9e(e)||U9e(e)}var rT;const Uu=[0,0];let Dh=rT=class extends Ee{constructor(e){super(e),this._viewpoint2D={center:Wt(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new ai,this.id=0,this.inverseTransform=kl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=kl(),this.transformNoRotation=kl(),this.displayMat3=dx(),this.displayViewMat3=dx(),this.viewMat3=dx(),this.viewMat2d=pU(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Fa(i,e.viewpoint),this._set("size",T1(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new rT({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return iT(t)?Rl(e,t,this.inverseTransform):(Uu[0]=t,Uu[1]=i,Rl(e,Uu,this.inverseTransform))}toScreen(e,t,i){return iT(t)?Rl(e,t,this.transform):(Uu[0]=t,Uu[1]=i,Rl(e,Uu,this.transform))}toScreenNoRotation(e,t,i){return iT(t)?Rl(e,t,this.transformNoRotation):(Uu[0]=t,Uu[1]=i,Rl(e,Uu,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return J8(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,l=this._get("size"),f=new vl({targetGeometry:new dt(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",f),!l||!t||!i)return;this.resolution=A1(f),this.rotation=r,this.scale=i,this.spatialReference=t,T1(this.center,e);const d=l[0]!==0?2/l[0]:0,v=l[1]!==0?-2/l[1]:0;LB(this.displayMat3,d,0,0,0,v,0,-1,1,1);const _=NB(this.viewMat3),M=P1(l[0]/2,l[1]/2),T=P1(-l[0]/2,-l[1]/2),A=DS(r);tT(_,_,M),jB(_,_,A),tT(_,_,T),eT(this.displayViewMat3,this.displayMat3,_);const k=A8(this.viewMat2d,M);return ex(k,k,A),wv(k,k,T),zxe(this.extent,f,l),Z8(this.transform,f,l,s),Q_(this.inverseTransform,this.transform),Jxe(this.transformNoRotation,f,l,s),this.worldScreenWidth=Kxe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};m([x({readOnly:!0})],Dh.prototype,"id",void 0),m([x({value:1,json:{write:!0}})],Dh.prototype,"pixelRatio",null),m([x({json:{write:!0}})],Dh.prototype,"size",null),m([x()],Dh.prototype,"spatialReference",void 0),m([x({type:vl,json:{write:!0}})],Dh.prototype,"viewpoint",null),Dh=rT=m([X("esri.views.2d.ViewState")],Dh);const BB=Dh;var nT,sT;let Bu=nT=class extends ot{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new nT({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};m([x()],Bu.prototype,"left",void 0),m([x()],Bu.prototype,"top",void 0),m([x()],Bu.prototype,"right",void 0),m([x()],Bu.prototype,"bottom",void 0),Bu=nT=m([X("esri.views.2d.PaddedViewState.Padding")],Bu);let O1=sT=class extends BB{constructor(...e){super(...e),this.paddedViewState=new BB,this._updateContent=(()=>{const t=Wt();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;xn(t,r.left+r.right,r.top+r.bottom),ur(t,i,t),T1(s.size,t);const l=s.viewpoint;l&&(this.viewpoint=l)}})(),this.addHandles(Ve(()=>[this.size,this.padding],()=>this._updateContent(),bl)),this.padding=new Bu,this.size=[0,0]}set padding(e){this._set("padding",e||new Bu)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Xxe(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new sT({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};m([x()],O1.prototype,"paddedViewState",void 0),m([x({type:Bu})],O1.prototype,"padding",null),m([x()],O1.prototype,"viewpoint",null),O1=sT=m([X("esri.views.2d.PaddedViewState")],O1);const B9e=O1;class H9e{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class HB{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new r3(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&q(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let l=null;i&&(l=Eo(i,()=>s.abort()));const f=()=>{const M=this._processingItems.get(t);M&&M.controller.abort(),d(),_.reject(zi())},d=()=>{v.remove(),q(l)&&l.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},v=x4(s.signal,f),_=eu();return this._deferreds.set(t,_),this._controllers.set(t,s),_.promise.then(d,d),this._queue.push(t),this._scheduleNext(),_.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=qf(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(ae(t))return;let i;const r=new AbortController,s=new H9e(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(l){this._processError(s,l)}tu(i)?(s.promise=i,i.then(l=>this._processResult(s,l),l=>this._processError(s,l))):this._processResult(s,i)}get test(){return{update:t=>this.runTask(t)}}}function W9e(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const oT=new Set,fx=[],k1=new Map,WB=[0,0];let Vh=class extends ot{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new HB({concurrency:e,process:(i,r)=>{const s=this._keyToItem.get(i);return t(s,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue=oi(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(_=>{const M=this._keyToItem.get(_),T=this.tileInfoView.getTileScale(M.key);k1.has(T)||(k1.set(T,[]),i=Math.max(T,i),r=Math.min(T,r)),k1.get(T).push(M.key),oT.add(T)});let s=this.state.scale;k1.has(s)||(W9e(fx,oT),fx.sort((_,M)=>_-M),s=fx.reduce((_,M)=>Math.abs(M-s)<Math.abs(_-s)?M:_,fx[0])),s=Math.min(s,i),s=Math.max(s,r);const l=k1.get(s),f=t.getClosestInfoForScale(s),d=f.getColumnForX(this.state.center[0]),v=f.getRowForY(this.state.center[1]);return l.sort((_,M)=>{const T=f.denormalizeCol(_.col,_.world),A=f.denormalizeCol(M.col,M.world);return Math.sqrt((d-T)*(d-T)+(v-_.row)*(v-_.row))-Math.sqrt((d-A)*(d-A)+(v-M.row)*(v-M.row))}),oT.clear(),k1.clear(),l[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(l=>{const f=this._keyToItem.get(l);t.getTileCoords(WB,f.key);const d=Vu(WB,i);d<s&&(s=d,r=f.key)}),r.id}};m([x({constructOnly:!0})],Vh.prototype,"concurrency",void 0),m([x({constructOnly:!0})],Vh.prototype,"process",void 0),m([x()],Vh.prototype,"state",void 0),m([x({constructOnly:!0})],Vh.prototype,"strategy",void 0),m([x({constructOnly:!0})],Vh.prototype,"tileInfoView",void 0),m([x({readOnly:!0})],Vh.prototype,"updating",null),Vh=m([X("esri.views.2d.tiling.PagedTileQueue")],Vh);class Us{constructor(t,i,r,s){this.set(t,i,r,s)}static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Us(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[l,f,d,v]=t.split("/");this.level=parseFloat(l),this.row=parseFloat(f),this.col=parseFloat(d),this.world=parseFloat(v)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Us(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Us(t,i,r,s),new Us(t,i,r+1,s),new Us(t,i+1,r,s),new Us(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Us.pool=new sa(Us,null,null,25,50);function zh(e,t){return[e,t]}function Hd(e,t,i){return e[0]=t,e[1]=i,e}function J9e(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const La=new Us("0/0/0/0");class aT{constructor(t,i,r,s,l,f,d,v,_,M,T,A){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=l,this.last=f,this.size=d,this.norm=v,this.worldStart=_,this.worldEnd=M,this.worldSize=T,this.wrap=A}static create(t,i,r=null){const s=Ys(t.spatialReference),l=i.origin||zh(t.origin.x,t.origin.y),f=zh(t.size[0]*i.resolution,t.size[1]*i.resolution),d=zh(-1/0,-1/0),v=zh(1/0,1/0),_=zh(1/0,1/0);q(r)&&(Hd(d,Math.max(0,Math.floor((r.xmin-l[0])/f[0])),Math.max(0,Math.floor((l[1]-r.ymax)/f[1]))),Hd(v,Math.max(0,Math.floor((r.xmax-l[0])/f[0])),Math.max(0,Math.floor((l[1]-r.ymin)/f[1]))),Hd(_,v[0]-d[0]+1,v[1]-d[1]+1));const{cols:M,rows:T}=i;let A,k,F,D;return!r&&M&&T&&(Hd(d,M[0],T[0]),Hd(v,M[1],T[1]),Hd(_,M[1]-M[0]+1,T[1]-T[0]+1)),t.isWrappable?(A=zh(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),_[1]),k=zh(Math.floor((s.origin[0]-l[0])/f[0]),d[1]),F=zh(A[0]+k[0]-1,v[1]),D=!0):(k=d,F=v,A=_,D=!1),new aT(i.level,i.resolution,i.scale,l,d,v,_,f,k,F,A,D)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){La.set(i);const s=r?La.col:this.denormalizeCol(La.col,La.world),l=La.row;return J9e(t,this.getXForColumn(s),this.getYForRow(l+1),this.getXForColumn(s+1),this.getYForRow(l)),t}getTileCoords(t,i,r=!1){La.set(i);const s=r?La.col:this.denormalizeCol(La.col,La.world);return Array.isArray(t)?Hd(t,this.getXForColumn(s),this.getYForRow(La.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(La.row)),t}}class R1{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:l}=s;if(r.length!==0)for(const{row:f,colFrom:d,colTo:v}of r)for(let _=d;_<=v;_++)t.call(i,l,f,s.normalizeCol(_),s.getWorldForColumn(_))}}R1.pool=new sa(R1);class lT{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const ir=new Us("0/0/0/0");class uT{constructor(t,i,r,s,l,f,d,v){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=l,this.rightAdjust=f,this.leftBound=d,this.rightBound=v}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[l,f]=i,d=l-r,v=f-s,_=v!==0?d/v:0,M=(Math.ceil(s)-s)*_,T=(Math.floor(s)-s)*_;return new uT(r,Math.floor(s),Math.ceil(f),_,d<0?M:T,d<0?T:M,d<0?l:r,d<0?r:l)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const go=[[0,0],[0,0],[0,0],[0,0]],Z9e=1e-6;class K9e{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((l,f)=>f.scale-l.scale);const s=this._lodInfos=r.map(l=>aT.create(t,l,i));r.forEach((l,f)=>{this._infoByLevel[l.level]=s[f],this._infoByScale[l.scale]=s[f],this.scales[f]=l.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){ir.set(i);const s=this._infoByLevel[ir.level];return s?s.getTileBounds(t,ir,r):t}getTileCoords(t,i,r=!1){ir.set(i);const s=this._infoByLevel[ir.level];return s?s.getTileCoords(t,ir,r):t}getTileCoverage(t,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),l=R1.pool.acquire(s),f=this._wrap;let d,v,_,M=1/0,T=-1/0;const A=l.spans;go[0][0]=go[0][1]=go[1][1]=go[3][0]=-i,go[1][0]=go[2][0]=t.size[0]+i,go[2][1]=go[3][1]=t.size[1]+i;for(const z of go)t.toMap(z,z),z[0]=s.getColumnForX(z[0]),z[1]=s.getRowForY(z[1]);const k=[];let F=3;for(let z=0;z<4;z++){if(go[z][1]===go[F][1]){F=z;continue}const H=uT.create(go[z],go[F]);M=Math.min(H.ymin,M),T=Math.max(H.ymax,T),k[H.ymin]===void 0&&(k[H.ymin]=[]),k[H.ymin].push(H),F=z}if(M==null||T==null||T-M>100)return null;let D=[];for(d=M;d<T;){k[d]!=null&&(D=D.concat(k[d])),v=1/0,_=-1/0;for(let z=D.length-1;z>=0;z--){const H=D[z];v=Math.min(v,H.getLeftCol()),_=Math.max(_,H.getRightCol())}if(v=Math.floor(v),_=Math.floor(_),d>=s.first[1]&&d<=s.last[1])if(f)if(s.size[0]<s.worldSize[0]){const z=Math.floor(_/s.worldSize[0]);for(let H=Math.floor(v/s.worldSize[0]);H<=z;H++)A.push(new lT(d,Math.max(s.getFirstColumnForWorld(H),v),Math.min(s.getLastColumnForWorld(H),_)))}else A.push(new lT(d,v,_));else v>s.last[0]||_<s.first[0]||(v=Math.max(v,s.first[0]),_=Math.min(_,s.last[0]),A.push(new lT(d,v,_)));d+=1;for(let z=D.length-1;z>=0;z--){const H=D[z];H.ymax>=d?H.incrRow():D.splice(z,1)}}return l}getTileParentId(t){ir.set(t);const i=this._infoByLevel[ir.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ir,this._lodInfos[r],ir),ir.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){ir.set(i);const r=this._infoByLevel[ir.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(ir,s,ir);const f=s.denormalizeCol(ir.col,ir.world);for(const d of t.spans)if(d.row===ir.row&&d.colFrom<=f&&d.colTo>=f)return!0}if(s.resolution<r.resolution){const[f,d,v,_]=t.spans.reduce((D,z)=>(D[0]=Math.min(D[0],z.row),D[1]=Math.max(D[1],z.row),D[2]=Math.min(D[2],z.colFrom),D[3]=Math.max(D[3],z.colTo),D),[1/0,-1/0,1/0,-1/0]),M=r.denormalizeCol(ir.col,ir.world),T=s.getColumnForX(r.getXForColumn(M)),A=s.getRowForY(r.getYForRow(ir.row)),k=s.getColumnForX(r.getXForColumn(M+1))-1,F=s.getRowForY(r.getYForRow(ir.row+1))-1;return!(T>_||k<v||A>d||F<f)}const l=s.denormalizeCol(ir.col,ir.world);return t.spans.some(f=>f.row===ir.row&&f.colFrom<=l&&f.colTo>=l)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=Ys(this.tileInfo.spatialReference),l=-r*(s.valid[1]-s.valid[0]);t[0]+=l,t[2]+=l}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+Z9e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}}function Y9e(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const cT=new Set,yx=[],F1=new Map,JB=[0,0];let Hu=class extends ot{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new HB({concurrency:e,process:(r,s)=>{const l=this._keyToItem.get(r);return t(l,{signal:s})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue=oi(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(_=>{const M=this._keyToItem.get(_),T=this.tileInfoView.getTileScale(M.key);F1.has(T)||(F1.set(T,[]),i=Math.max(T,i),r=Math.min(T,r)),F1.get(T).push(M.key),cT.add(T)});let s=this.state.scale;F1.has(s)||(Y9e(yx,cT),yx.sort((_,M)=>_-M),s=yx.reduce((_,M)=>Math.abs(M-s)<Math.abs(_-s)?M:_,yx[0])),s=Math.min(s,i),s=Math.max(s,r);const l=F1.get(s),f=t.getClosestInfoForScale(s),d=f.getColumnForX(this.state.center[0]),v=f.getRowForY(this.state.center[1]);return l.sort((_,M)=>{const T=f.denormalizeCol(_.col,_.world),A=f.denormalizeCol(M.col,M.world);return Math.sqrt((d-T)*(d-T)+(v-_.row)*(v-_.row))-Math.sqrt((d-A)*(d-A)+(v-M.row)*(v-M.row))}),cT.clear(),F1.clear(),l[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(l=>{const f=this._keyToItem.get(l);t.getTileCoords(JB,f.key);const d=Vu(JB,i);d<s&&(s=d,r=f.key)}),r.id}};m([x({constructOnly:!0})],Hu.prototype,"concurrency",void 0),m([x({constructOnly:!0})],Hu.prototype,"process",void 0),m([x()],Hu.prototype,"state",void 0),m([x({constructOnly:!0})],Hu.prototype,"strategy",void 0),m([x({constructOnly:!0})],Hu.prototype,"tileInfoView",void 0),m([x({readOnly:!0})],Hu.prototype,"updating",null),Hu=m([X("esri.views.2d.tiling.TileQueue")],Hu);const SPe=Hu;class X9e{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];ZB(this._tilePerId,t);for(let l=0;l<s.length;l++)if(s[l].id===t){s.splice(l,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let l=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&l>=0;)l!==t&&(s=this._pruneAroundCenterTile(s,i,r,l)),l--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const l=this._tileKeysPerLevel[s];if(!l||l.length===0)return t;const{size:f,origin:d}=this._tileInfoView.tileInfo,v=r*f[0],_=r*f[1],M=[0,0],T=[0,0];for(l.sort((A,k)=>(M[0]=d.x+v*(A.col+.5),M[1]=d.y-_*(A.row+.5),T[0]=d.x+v*(k.col+.5),T[1]=d.y-_*(k.row+.5),C1(M,i)-C1(T,i)));l.length>0;){const A=l.pop();if(this._removeTile(A.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),ZB(this._tilePerId,t)}}function ZB(e,t){e.delete(t)}const Wd=new Us(0,0,0,0),Jo=new Map,L1=[],gx=[];class MPe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new X9e(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(gx.length=0,L1.length=0,Jo.clear(),!s)return;const{minScale:l,maxScale:f}=this.tileInfoView.tileInfo,{spans:d,lodInfo:v}=s,{level:_}=v,{scale:M,center:T,resolution:A}=t.state,k=!t.stationary&&M>this._previousScale;if(this._previousScale=M,this.tiles.length=0,!i&&(M>l||M<f))return this.tiles.length=0,Jo.clear(),r.forEach(H=>{this.releaseTile(H)}),r.clear(),gx.length=0,L1.length=0,Jo.clear(),R1.pool.release(s),!0;r.forEach(H=>H.visible=!0);let F=0,D=0;if(d.length>0)for(const{row:H,colFrom:J,colTo:Y}of d)for(let ie=J;ie<=Y;ie++){F++;const re=Wd.set(_,H,v.normalizeCol(ie),v.getWorldForColumn(ie)).id;if(r.has(re)){const ee=r.get(re);ee.isReady?(Jo.set(re,ee),D++):k||this._addParentTile(re,Jo)}else{let ee;if(this._tileCache&&this._tileCache.has(re)){if(ee=this._tileCache.pop(re),this.tileIndex.set(re,ee),ee.isReady){Jo.set(re,ee),D++;continue}}else ee=this.acquireTile(Wd),this.tileIndex.set(re,ee);k||this._addParentTile(re,Jo)}}const z=D===F;r.forEach((H,J)=>{if(Wd.set(J),Jo.has(J))return;const Y=this.tileInfoView.intersects(s,Wd),ie=this.cachePolicy==="purge"?Wd.level!==_:Wd.level>_;!Y||!k&&z?!ie&&Y||L1.push(J):H.isReady?ie&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Wd,_)?L1.push(J):gx.push(J):ie&&L1.push(J)});for(const H of gx){const J=r.get(H);J&&J.isReady&&Jo.set(H,J)}for(const H of L1){const J=r.get(H);this._tileCache?this._tileCache.add(J):this.releaseTile(J),r.delete(H)}return Jo.forEach(H=>this.tiles.push(H)),r.forEach(H=>{Jo.has(H.key.id)||(H.visible=!1)}),this._tileCache&&this._tileCache.prune(_,T,A),R1.pool.release(s),Jo.clear(),z}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=Fo();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const l=Fo();if(this.tileInfoView.getTileBounds(l,s.key,!0),pue(l,r))return!0}return!1}}function hT(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class KB extends ln{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){hT(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class Q9e extends ln{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:l}=i,{view:f}=this,{mapViewNavigation:d}=f;switch(s){case"begin":{const{scale:v}=f;this._startScale=v,this._currentScale=v,this._previousDelta=l,d.begin();break}case"update":{if(this._previousDelta.y===l.y)return;this._previousDelta=l;const v=1.015**l.y,_=this._startScale*v,M=_/this._currentScale;d.setViewpointImmediate(M),this._currentScale=_;break}case"end":{const{constraints:v}=f,{effectiveLODs:_,snapToZoom:M}=v;if(!M||!_)return void d.end();const T=v.snapScale(this._currentScale),A=(l.y>0?Math.max(T,v.snapToPreviousScale(this._startScale)):Math.min(T,v.snapToNextScale(this._startScale)))/this._currentScale;d.zoom(A);break}}}}class mx{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,((r=(i=this._callbacks).condition)==null?void 0:r.call(i,this._currentCount,t))&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;((r=(i=this._callbacks).condition)==null?void 0:r.call(i,this._currentCount,t))&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;((r=(i=this._callbacks).condition)==null?void 0:r.call(i,this._currentCount,t))&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class e5e extends ln{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new mx({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&hT(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class t5e extends ln{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new mx({start:(l,f)=>{s.rotate.begin(this._view,f.data),f.stopPropagation()},update:(l,f)=>{s.rotate.update(this._view,f.data),f.stopPropagation()},end:(l,f)=>{s.rotate.end(),f.stopPropagation()},condition:(l,f)=>l===1&&hT(f.data,this.pointerAction)}),this.registerIncoming("drag",r,l=>this._dragEventSeparator.handle(l))}}function Na(e){let t=e*e;return e<0&&(t*=-1),t}function i5e(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function r5e(e,t,i){const r=i,s=e.state,l=e.device,f=t.tiltDirection==="forward-down"?1:-1,d=1;return l.deviceType==="standard"?(r.translation[0]=Na(s.axes[0]),r.translation[1]=Na(s.axes[1]),r.translation[2]=Na(s.buttons[7])-Na(s.buttons[6]),r.heading=Na(s.axes[2]),r.tilt=Na(s.axes[3])):l.deviceType==="spacemouse"&&(r.translation[0]=1.2*Na(s.axes[0]),r.translation[1]=1.2*Na(s.axes[1]),r.translation[2]=2*-Na(s.axes[2]),r.heading=1.2*Na(s.axes[5]),r.tilt=1.2*Na(s.axes[3])),r.tilt*=f,eo(r.translation,r.translation,d),r}function n5e(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class s5e extends ln{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Jr,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Ve(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Uf({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},fi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,i5e(this._transformation)):(this._currentDevice=t.data.device,r5e(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(n5e(i))return;const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,l=a5e*s*t;px(r,r,[i.translation[0]*l,-i.translation[1]*l]);const f=1+i.translation[2]*l5e*t,d=this._view.constraints.rotationEnabled?-i.heading*o5e*t:0,v=this._view.size,_=[v[0]/2,v[1]];EB(r,r,f,d,_,v);const M=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=M}}const o5e=.06,a5e=.7,l5e=6e-4;class u5e extends ln{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class c5e extends ln{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var N1;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(N1||(N1={}));class h5e extends ln{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=N1.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=N1.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:l}=this.view;let f=null;switch(s){case N1.IN:f=l.zoomIn();break;case N1.OUT:f=l.zoomOut();break;default:return}l.begin(),f.then(()=>l.end()),t.stopPropagation()}}const p5e=.6;class d5e extends ln{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:l}=t.data,f=1/p5e**(1/60*l),d=i.zoom(f,[r,s]);d&&(this._canZoom=!1,d.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class f5e extends ln{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new mx({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function YB(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>m5e(i,e.axisThreshold))}:{buttons:[],axes:[]}}function y5e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function g5e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function m5e(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class v5e{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=l=>{this._connectGamepad(l.gamepad)},this._onDisconnectGamepad=l=>{const f=l.gamepad,d=f.index,v=this._inputDevices[d];v&&(this._emitGamepadEvent(f,YB(v),!1),this._inputDevices.splice(d,1),this._latestUpdate.splice(d,1),this._input.gamepad.devices.remove(v),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(l=>this._connectGamepad(l)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new N8(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Uf({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const l=this._inputDevices[s.index];if(!l)return;const f=this._latestUpdate[s.index],d=YB(l),v=r||g5e(d);f&&(f.timestamp===s.timestamp||!f.active&&v||y5e(f.state,d))||this._emitGamepadEvent(s,d,!v)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&t(s)}}_emitGamepadEvent(t,i,r){const s=this._latestUpdate[t.index],l=s&&s.active;if(!l&&!r)return;const f=!l&&r?"start":l&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:f})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const XB=Ie("trident"),QB=Ie("edge"),b5e=Ie("chrome"),w5e=Ie("ff"),_5e=Ie("safari"),j1={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class vx{constructor(t,i){this._input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new v5e(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=oi(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(pT[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&pT[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(pT[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?j1.touchNone:j1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?j1.touchPan:j1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(j1.touchNone),this._element.classList.remove(j1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=ZU(this._element,t);return vx.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=y_e(i);r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(XB||QB)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}XB||QB?r*=.7:b5e||_5e?r*=.6:w5e&&(r*=1.375);const s=100,l=Math.abs(r);if(l>s){const d=.02;r=r/l*200/(1+Math.exp(-d*(l-s)))}const f=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,f)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}vx.test={disableSubpixelCoordinates:!1};const pT={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class x5e extends ln{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function dT(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function S5e(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function M5e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:An()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[Y,ie]=e,[re,ee]=[ie.x-Y.x,ie.y-Y.y];return t.radius=Math.sqrt(re*re+ee*ee)/2,t.center.x=(Y.x+ie.x)/2,t.center.y=(Y.y+ie.y)/2,t}let i=0,r=0;for(let Y=0;Y<e.length;Y++)i+=e[Y].x,r+=e[Y].y;i/=e.length,r/=e.length;const s=e.map(Y=>Y.x-i),l=e.map(Y=>Y.y-r);let f=0,d=0,v=0,_=0,M=0,T=0,A=0;for(let Y=0;Y<s.length;Y++){const ie=s[Y],re=l[Y],ee=ie*ie,le=re*re;f+=ee,d+=le,v+=ie*re,_+=ee*ie,M+=le*re,T+=ie*le,A+=re*ee}const k=.5*(_+T),F=.5*(M+A),D=f*d-v*v,z=(k*d-F*v)/D,H=(f*F-v*k)/D,J=An(z+i,H+r);return{radius:Math.sqrt(z*z+H*H+(f+d)/e.length),center:J}}function Jd(e){const{native:t}=e,{pointerId:i,button:r,pointerType:s}=t;return s==="mouse"?`${i}:${r}`:`${s}`}const Zo={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class $5e extends ln{constructor(t=Zo.maximumDoubleClickDelay,i=Zo.maximumDoubleClickDistance,r=Zo.maximumDoubleTouchDelay,s=Zo.maximumDoubleTouchDistance,l=Qy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Er(t.doubleClickTimer))}get hasPendingInputs(){return Gy(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=Er(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:i,pointerType:r,button:s}=t.native;return r==="mouse"?`${i}:${s}`:`${r}`}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,s=this._getPointerId(i);if(!this._pointerState.has(s))return void this._startClick(t);const l=this._pointerState.get(s),{data:f,modifiers:d}=l.event,v=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;dT(f,i)>v?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),l.pointerDownCount===2&&this._doubleClick.emit(f,void 0,d))}_handlePointerDown(t){const i=Jd(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,s=Jd(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),l),d=1;this._pointerState.set(s,{event:t,doubleClickTimer:f,pointerDownCount:d}),this.refreshHasPendingInputs()}}class I5e extends ln{constructor(t=Zo.maximumDoubleClickDelay,i=Zo.maximumDoubleClickDistance,r=Zo.maximumDoubleTouchDelay,s=Zo.maximumDoubleTouchDistance,l=Qy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=l,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=An(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new mx({start:(f,d)=>this._dragStart(f,d),update:(f,d)=>this._dragUpdate(d),end:(f,d)=>this._dragEnd(d)}),this.registerIncoming("drag",f=>this._dragEventSeparator.handle(f)),this.registerIncoming("pointer-down",f=>this._handlePointerDown(f)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Er(t.doubleTapTimeout)})}get hasPendingInputs(){return Gy(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Er(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:s,buttons:l,pointer:f,pointers:d,pointerType:v,timestamp:_}=r;return{action:t,delta:i,button:s,buttons:l,pointer:f,pointers:d,pointerType:v,timestamp:_}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:l}=r;this._dragStartCenter=l;const f=this._createDoubleTapDragData("begin",An(0,0),r);this._doubleTapDrag.emit(f,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,l=An(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),f=this._createDoubleTapDragData("update",l,i);this._doubleTapDrag.emit(f,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,l=An(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),f=this._createDoubleTapDragData("end",l,i);this._doubleTapDrag.emit(f,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=Jd(i),s=this._pointerState.get(r),{pointerType:l}=i.native;if(s){const f=l==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),dT(s.event.data,i)>f?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=Jd(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,f=this._clock.setTimeout(()=>this._clearPointerDown(s),l);this._pointerState.set(s,{event:t,doubleTapTimeout:f}),this.refreshHasPendingInputs()}}class T5e extends ln{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:E5e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=bx(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const l=wx(s,eH(this._activePointerMap));s.initialAngle=l,s.lastAngle=l,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=bx(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=bx(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=wx(r,i)-t,r.lastAngle=wx(r,i)-t})}_emitEvent(t,i,r){const s=bx(this._activePointerMap);this._drag.emit(this._createPayload(t,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=Sr(t.timestamp);this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,Sr(t.timestamp))))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=Sr(t.timestamp);switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}}function eH(e){const t=[];return e.forEach(i=>{t.push(An(i.event.x,i.event.y))}),M5e(t)}function bx(e){const t=eH(e);let i=0;return e.forEach(r=>{let s=wx(r,t),l=s-r.lastAngle;for(;l>Math.PI;)l-=2*Math.PI;for(;l<-Math.PI;)l+=2*Math.PI;s=r.lastAngle+l,r.lastAngle=s,i+=s-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function E5e(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function wx(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var tH;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(tH||(tH={}));class C5e extends ln{constructor(t=Zo.maximumDoubleClickDelay,i=Zo.maximumDoubleClickDistance,r=Zo.maximumDoubleTouchDelay,s=Zo.maximumDoubleTouchDistance,l=Qy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=Jd(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=Jd(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const l=s.immediateDoubleClick;if(l){l.timeoutHandle.remove();const f=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;dT(l,t.data)>f?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,l.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=Jd(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const Rv={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class A5e extends ln{constructor(t=Rv.maximumClickDelay,i=Rv.movementUntilMouseDrag,r=Rv.movementUntilPenDrag,s=Rv.movementUntilTouchDrag,l=Rv.holdDelay,f=Qy){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=l,this._clock=f,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",d=>{this._handlePointerLoss(d,"pointer-up")}),this.registerIncoming("pointer-capture-lost",d=>{this._handlePointerLoss(d,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",d=>{this._handlePointerLoss(d,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Er(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const f=this._pointerState.get(r);if(f){if(!f.isDragging){const d=f.previousEvent;this._pointerHold.emit(d,void 0,t.modifiers),f.holdEmitted=!0}f.holdTimeout=null}},this._holdDelay));const l={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,l),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):S5e(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,l=this._pointerState.get(s);l&&(l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",l,i==="pointer-up"?r:l.previousEvent),void 0,l.modifiers):i==="pointer-up"&&l.downButton===r.native.button&&t.timestamp-l.startTimestamp<=this._maximumClickDelay&&!l.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const _x={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Zd=class extends ot{constructor(){super(...arguments),this._handles=new Jr}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([so(()=>!e(),()=>this._disconnect()),so(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e,t;return(t=(e=this._inputManager)==null?void 0:e.multiTouchActive)!=null?t:!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=oi(this._inputManager)}_connect(){const e=this.view.surface,t=new vx(e,this.view.input),i=[new C5e,new A5e,new $5e,new T5e(this.view.navigation),new I5e],r=new Pl({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new x5e],rt.INTERNAL),r.installHandlers("navigation",[new f5e(this.view),new s5e(this.view),new d5e(this.view),new KB(this.view),new KB(this.view,[_x.counter]),new e5e(this.view,"primary"),new u5e(this.view,_x.pan),new h5e(this.view,_x.zoom),new c5e(this.view,_x.rotate),new t5e(this.view,"secondary"),new Q9e(this.view,"touch")],rt.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,Ve(()=>{var s,l;return(l=(s=this.view)==null?void 0:s.navigation)==null?void 0:l.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},fi)}get test(){return{inputManager:this._inputManager}}};m([x()],Zd.prototype,"view",void 0),m([x()],Zd.prototype,"latestPointerType",null),m([x()],Zd.prototype,"latestPointerLocation",null),m([x()],Zd.prototype,"multiTouchActive",null),Zd=m([X("esri.views.2d.input.MapViewInputManager")],Zd);const P5e=Zd;var iH,rH,nH,sH={exports:{}};iH=sH,rH=function(){function e(s,l,f,d,v){t(s,l,f||0,d||s.length-1,v||r)}function t(s,l,f,d,v){for(;d>f;){if(d-f>600){var _=d-f+1,M=l-f+1,T=Math.log(_),A=.5*Math.exp(2*T/3),k=.5*Math.sqrt(T*A*(_-A)/_)*(M-_/2<0?-1:1);t(s,l,Math.max(f,Math.floor(l-M*A/_+k)),Math.min(d,Math.floor(l+(_-M)*A/_+k)),v)}var F=s[l],D=f,z=d;for(i(s,f,l),v(s[d],F)>0&&i(s,f,d);D<z;){for(i(s,D,z),D++,z--;v(s[D],F)<0;)D++;for(;v(s[z],F)>0;)z--}v(s[f],F)===0?i(s,f,z):i(s,++z,d),z<=l&&(f=z+1),l<=z&&(d=z-1)}}function i(s,l,f){var d=s[l];s[l]=s[f],s[f]=d}function r(s,l){return s<l?-1:s>l?1:0}return e},(nH=rH())!==void 0&&(iH.exports=nH);const O5e=sH.exports;function xx(e,t){if(!(this instanceof xx))return new xx(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function k5e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function D1(e,t){Fv(e,0,e.children.length,t,e)}function Fv(e,t,i,r,s){s||(s=V1(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var l,f=t;f<i;f++)l=e.children[f],Lv(s,e.leaf?r(l):l);return s}function Lv(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function oH(e,t){return e.minX-t.minX}function aH(e,t){return e.minY-t.minY}function fT(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Sx(e){return e.maxX-e.minX+(e.maxY-e.minY)}function R5e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function F5e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),l=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,l-r)}function yT(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Mx(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function V1(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lH(e,t,i,r,s){for(var l,f=[t,i];f.length;)(i=f.pop())-(t=f.pop())<=r||(l=t+Math.ceil((i-t)/r/2)*r,O5e(e,l,t,i,s),f.push(t,l,l,i))}xx.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!Mx(e,t))return i;for(var s,l,f,d,v=[];t;){for(s=0,l=t.children.length;s<l;s++)f=t.children[s],Mx(e,d=t.leaf?r(f):f)&&(t.leaf?i.push(f):yT(e,d)?this._all(f,i):v.push(f));t=v.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!Mx(e,t))return!1;for(var r,s,l,f,d=[];t;){for(r=0,s=t.children.length;r<s;r++)if(l=t.children[r],Mx(e,f=t.leaf?i(l):l)){if(t.leaf||yT(e,f))return!0;d.push(l)}t=d.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=V1([]),this},remove:function(e,t){if(!e)return this;for(var i,r,s,l,f=this.data,d=this.toBBox(e),v=[],_=[];f||v.length;){if(f||(f=v.pop(),r=v[v.length-1],i=_.pop(),l=!0),f.leaf&&(s=k5e(e,f.children,t))!==-1)return f.children.splice(s,1),v.push(f),this._condense(v),this;l||f.leaf||!yT(f,d)?r?(i++,f=r.children[i],l=!1):f=null:(v.push(f),_.push(i),i=0,r=f,f=f.children[0])}return this},toBBox:function(e){return e},compareMinX:oH,compareMinY:aH,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,l=i-t+1,f=this._maxEntries;if(l<=f)return D1(s=V1(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(l)/Math.log(f)),f=Math.ceil(l/Math.pow(f,r-1))),(s=V1([])).leaf=!1,s.height=r;var d,v,_,M,T=Math.ceil(l/f),A=T*Math.ceil(Math.sqrt(f));for(lH(e,t,i,A,this.compareMinX),d=t;d<=i;d+=A)for(lH(e,d,_=Math.min(d+A-1,i),T,this.compareMinY),v=d;v<=_;v+=T)M=Math.min(v+T-1,_),s.children.push(this._build(e,v,M,r-1));return D1(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,l,f,d,v,_,M,T;r.push(t),!t.leaf&&r.length-1!==i;){for(M=T=1/0,s=0,l=t.children.length;s<l;s++)v=fT(f=t.children[s]),(_=R5e(e,f)-v)<T?(T=_,M=v<M?v:M,d=f):_===T&&v<M&&(M=v,d=f);t=d||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),l=[],f=this._chooseSubtree(s,this.data,t,l);for(f.children.push(e),Lv(f,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var l=this._chooseSplitIndex(i,s,r),f=V1(i.children.splice(l,i.children.length-l));f.height=i.height,f.leaf=i.leaf,D1(i,this.toBBox),D1(f,this.toBBox),t?e[t-1].children.push(f):this._splitRoot(i,f)},_splitRoot:function(e,t){this.data=V1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,D1(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,l,f,d,v,_,M;for(v=_=1/0,r=t;r<=i-t;r++)f=F5e(s=Fv(e,0,r,this.toBBox),l=Fv(e,r,i,this.toBBox)),d=fT(s)+fT(l),f<v?(v=f,M=r,_=d<_?d:_):f===v&&d<_&&(_=d,M=r);return M},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:oH,s=e.leaf?this.compareMinY:aH;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,l,f=this.toBBox,d=Fv(e,0,t,f),v=Fv(e,i-t,i,f),_=Sx(d)+Sx(v);for(s=t;s<i-t;s++)l=e.children[s],Lv(d,e.leaf?f(l):l),_+=Sx(d);for(s=i-t-1;s>=t;s--)l=e.children[s],Lv(v,e.leaf?f(l):l),_+=Sx(v);return _},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Lv(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():D1(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class $x{constructor(t,i){this.key=new Us(0,0,0,0),this.bounds=Fo(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return ai.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=as.acquire();for(let r=0;r<t.length;r++)i[r]=new $x(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return HV.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Kd={added:[],removed:[]},gT=new Set,L5e=new Us(0,0,0,0);class N5e extends yn{constructor(t){super(),this._tiles=new Map,this._index=xx(9,Ie("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new $x(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:l}=s;if(r.length>0)for(const{row:f,colFrom:d,colTo:v}of r)for(let _=d;_<=v;_++){const M=L5e.set(l,f,s.normalizeCol(_),s.getWorldForColumn(_)).id;if(gT.add(M),!this.has(M)){const T=new $x(this.tileScheme,M);this._tiles.set(M,T),this._index.insert(T),this.tiles.push(T),Kd.added.push(T)}}for(let f=this.tiles.length-1;f>=0;f--){const d=this.tiles[f];gT.has(d.id)||(this._tiles.delete(d.id),this.tiles.splice(f,1),this._index.remove(d),Kd.removed.push(d))}(Kd.added.length||Kd.removed.length)&&this.emit("update",Kd),R1.pool.release(i),gT.clear(),Kd.added.length=0,Kd.removed.length=0}}let j5e=0,Gh=class extends ot{constructor(){super(...arguments),this.color=new mt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return j5e++}};m([x({readOnly:!0})],Gh.prototype,"version",null),m([x({type:mt})],Gh.prototype,"color",void 0),m([x({type:mt})],Gh.prototype,"haloColor",void 0),m([x()],Gh.prototype,"haloOpacity",void 0),m([x()],Gh.prototype,"fillOpacity",void 0),Gh=m([X("esri.views.2d.support.HighlightOptions")],Gh);const uH=Gh,D5e=e=>e.includes("Brush");class cH{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),D5e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function V5e(e,t,i,r,s,l,f,d){let v;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?v=[e.width,e.height]:e.width==null&&e.height!=null?v=[e.height,e.height]:e.width!=null&&e.height==null?v=[e.width,e.width]:e.width==null&&e.height==null&&(v=null);const _=i[0]-(r.left+r.right),M=i[1]-(r.top+r.bottom);let T,A,k=e.area||{x:0,y:0,width:_,height:M};if(v){const F=_/M,D=v[0]/v[1];if(D>F){const z=k.width/D;k={x:k.x,y:Math.round(k.y+(k.height-z)/2),width:k.width,height:Math.round(z)}}else{const z=k.height*D;k={x:Math.round(k.x+(k.width-z)/2),y:k.y,width:Math.round(z),height:k.height}}}else v=[k.width,k.height];return v[0]>k.width?(T=Math.min(v[0]/k.width,t),A=v[0]/k.width/T):(T=1,A=v[0]/k.width),{resolutionScale:T,cropArea:{x:Math.round((k.x+r.left)*T),y:Math.round((k.y+r.top)*T),width:Math.round(k.width*T),height:Math.round(k.height*T)},outputScale:A,format:s,quality:l,children:f,rotation:d}}let Nv=null,Ix=!0;function $Pe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(Ix)try{return new ImageData(e,t)}catch{Ix=!1}return hH(e,t,i)}function IPe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(Ix)try{return new ImageData(e,t,i)}catch{Ix=!1}const s=hH(t,i,r);return s.data.set(e,0),s}function z5e(){return Nv||(Nv=document.createElement("canvas"),Nv.width=1,Nv.height=1),Nv}function hH(e,t,i){return i||(i=z5e()),i.getContext("2d").createImageData(e,t)}function G5e(e,t,i){const{ctx:r,canvas:s}=pH(e,i),l=r.getImageData(0,0,e.width,e.height),f=B5e(s,t);return dH(s),{dataUrl:f,data:l}}function q5e(e,t){const{ctx:i,canvas:r}=pH(e,t),s=i.getImageData(0,0,e.width,e.height);return dH(r),s}function pH(e,t){const i=U5e();t.premultipliedAlpha&&K5e(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&Z5e(r),{ctx:r,canvas:i}}function dH(e){e.width=0,e.height=0}function U5e(){return ae(mT)&&(mT=document.createElement("canvas")),mT}let mT=null;function B5e(e,t){const i=Y5e[t.format],r=t.quality/100;return e.toDataURL(i,r)}function H5e(e,t){const i=J5e(e),r=Q5e[i];return{format:i,quality:Cn(t!=null?t:r,0,100)}}function W5e(e,t){return t/Math.max(e[0],e[1])}function TPe(e,t,i,r=0,s=0,l=e.width-r,f=e.height-s,d=!1){const{data:v}=e,{width:_,height:M,data:T}=t,A=l/_,k=f/M,F=Math.ceil(A/2),D=Math.ceil(k/2),z=e.width;for(let H=0;H<M;H++)for(let J=0;J<_;J++){const Y=4*(J+(d?M-H-1:H)*_);let ie=0,re=0,ee=0,le=0,me=0,we=0;const _e=(H+.5)*k;for(let Me=Math.floor(H*k);Me<(H+1)*k;Me++){const Se=Math.abs(_e-(Me+.5))/D,He=(J+.5)*A,We=Se*Se;for(let Ot=Math.floor(J*A);Ot<(J+1)*A;Ot++){const kt=Math.abs(He-(Ot+.5))/F,ft=Math.sqrt(We+kt*kt);if(ft>=1)continue;let Ye=2*ft*ft*ft-3*ft*ft+1;const Ct=4*(r+Ot+(s+Me)*z);we+=Ye*v[Ct+3],re+=Ye,!i&&v[Ct+3]<255&&(Ye=Ye*v[Ct+3]/255),ee+=Ye*v[Ct],le+=Ye*v[Ct+1],me+=Ye*v[Ct+2],ie+=Ye}}T[Y]=ee/ie,T[Y+1]=le/ie,T[Y+2]=me/ie,T[Y+3]=we/re}return t}function J5e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return X5e}}function Z5e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function K5e(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const l=255/s;t[r+0]=t[r+0]*l,t[r+1]=t[r+1]*l,t[r+2]=t[r+2]*l}}}const Y5e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},fH=98,X5e="png",Q5e={png:100,jpg:fH,jpeg:fH};var Or;function EPe(e,t,i={}){const r=yH(e);for(;r.length>1;){const s=Tx(t,r.shift(),i);if(q(s))return s}return e4e(t,r.shift(),i)}function yH(e){const t=Ie("esri-force-webgl");if(t===Or.WEBGL1||t===Or.WEBGL2)return[t];switch(e){case"2d":return Ie("mac")&&Ie("chrome")?[Or.WEBGL1,Or.WEBGL2]:[Or.WEBGL2,Or.WEBGL1];case"3d":return[Or.WEBGL2,Or.WEBGL1]}}function e4e(e,t,i={}){if(!window.WebGLRenderingContext)return gH(e,t4e),null;const r=Tx(e,t,i);return ae(r)&&gH(e,i4e),r}function Tx(e,t,i={}){const r=t===Or.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const l of r){try{s=e.getContext(l,i)}catch{}if(s)break}return s}function gH(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Or||(Or={}));const t4e='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',i4e=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let vT,bT;function r4e(e){const t=yH(e);for(;t.length>1;){const i=mH(t.shift());if(i.available)return i}return mH(t.shift())}function mH(e){switch(e){case Or.WEBGL1:return n4e();case Or.WEBGL2:return s4e()}}function n4e(){return vT||(vT=l4e()),vT}function s4e(){return bT||(bT=u4e()),bT}class vH{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class o4e extends vH{constructor(){super(...arguments),this.type=Or.WEBGL1}}class a4e extends vH{constructor(){super(...arguments),this.type=Or.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function bH(e,t){var l;if(e===Or.WEBGL1&&typeof WebGLRenderingContext=="undefined"||e===Or.WEBGL2&&typeof WebGL2RenderingContext=="undefined")return null;const i=document.createElement("canvas");if(!i)return null;let r=Tx(i,e,{failIfMajorPerformanceCaveat:!0});if(ae(r)&&(r=Tx(i,e),q(r)&&(t.majorPerformanceCaveat=!0)),ae(r))return r;if(e===Or.WEBGL1){const f=(l=r.getParameter(r.VERSION))==null?void 0:l.match(/^WebGL\s+([\d.]*)/);if(f){const d=parseFloat(f[1]);t.available=d>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),r}function l4e(){const e=new o4e,t=bH(Or.WEBGL1,e);return ae(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function u4e(){const e=new a4e,t=bH(Or.WEBGL2,e);return ae(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function c4e(e){const t=r4e(e);if(!t.available)return new fe("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new fe("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new fe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new fe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Or.WEBGL1){if(!t.supportsElementIndexUint)return new fe("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new fe("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new fe("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function h4e(e){return e&&"nodeType"in e}function p4e(e){return e&&typeof e.render=="function"}const wH={component:"esri-component"};let Yd=class extends ot{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(wH.component),t&&t.classList.remove(wH.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||h4e(e)?(this._set("widget",null),e$(e)):(p4e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};m([x({dependsOn:[]})],Yd.prototype,"id",null),m([x()],Yd.prototype,"node",null),m([ri("node")],Yd.prototype,"castNode",null),m([x({readOnly:!0})],Yd.prototype,"widget",void 0),Yd=m([X("esri.views.ui.Component")],Yd);const Ex=Yd,d4e={left:0,top:0,bottom:0,right:0},_H={bottom:30,top:15,right:15,left:15},wT="manual",ms={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function f4e(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function _T(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function xT(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Wu=class extends yn.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Jr,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&xT(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&xT(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([Ve(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,fi),Ve(()=>this.padding,this._applyUIPadding,fi)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(ms.ui),Cye(e),this._attachContainers(e)),t&&(t.classList.remove(ms.ui),xT(t,{top:"",bottom:"",left:"",right:""}),KN(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:te(te({},_H),e)}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(l=>this.add(l,t));const s=_T(e);s&&({index:i,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const s=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||wT)===wT?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(ms.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(l=>this.move(l,t)),!e)return;let i;const r=_T(e)||_T(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof Ex||(e=new Ex({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof Ex?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||d4e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(ms.innerContainer),e.classList.add(ms.cornerContainer);const t=document.createElement("div");t.classList.add(ms.innerContainer),t.classList.add(ms.manualContainer);const i=document.createElement("div");i.classList.add(ms.topLeft),i.classList.add(ms.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(ms.topRight),r.classList.add(ms.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(ms.bottomLeft),s.classList.add(ms.corner),e.appendChild(s);const l=document.createElement("div");l.classList.add(ms.bottomRight),l.classList.add(ms.corner),e.appendChild(l),this._innerContainer=e,this._manualContainer=t;const f=$l();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":l,"top-leading":f?r:i,"top-trailing":f?i:r,"bottom-leading":f?l:s,"bottom-trailing":f?s:l},this._positionNameToContainerLookup=te({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||wT,r=e.index,s=this._positionNameToContainerLookup[i],l=r>-1;if(f4e(t.widget)&&t.widget.startup(),!l)return void s.appendChild(t.node);const f=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?YN(t.node,s.firstChild):s.appendChild(t.node));r>=f.length?s.appendChild(t.node):YN(t.node,f[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};m([x()],Wu.prototype,"container",null),m([x()],Wu.prototype,"height",null),m([x({value:_H})],Wu.prototype,"padding",null),m([ri("padding")],Wu.prototype,"castPadding",null),m([x()],Wu.prototype,"view",void 0),m([x()],Wu.prototype,"width",null),Wu=m([X("esri.views.ui.UI")],Wu);const y4e=Wu;function xH(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function g4e(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function Cx(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function m4e(e){return e.type==="bing-maps"}const qh=[];let z1=class extends pd{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new gt,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>Ve(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([fs(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),so(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");qh.length=0,e?(e.forEach(t=>{var s;if(t.suspended||!((s=t.layer)==null?void 0:s.attributionVisible))return;const i=t.layer;if(xH(i,"user"))return void Cx(qh,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const l=this._fetchedAttributionData.get(t);return void(l?Cx(qh,t,this._getDynamicAttribution(l,this.view,i)):xH(i)&&Cx(qh,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");Cx(qh,t,r||i.copyright)}),g4e(this.items,qh)&&(this.items.removeAll(),this.items.addMany(qh)),qh.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await X2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,m4e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const l=i[s],f=l.coverageAreas;if(!f)return;for(const d of f){const v=d.bbox,_=d.zoomMin-(t&&d.zoomMin?1:0),M=d.zoomMax-(t&&d.zoomMax?1:0),T={xmin:v[1],ymin:v[0],xmax:v[3],ymax:v[2],spatialReference:At.WGS84},A={extent:nu(T),attribution:l.attribution||"",score:d.score!=null?d.score:100,id:s};for(let k=_;k<=M;k++)r[k]=r[k]||[],r[k].push(A)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:s}=t;let l=i.tileInfo.scaleToZoom(s);if(l=Math.min(e.maxKey,Math.round(l)),!r||l==null||l<=-1)return"";const f=e[l],d=Uw(r.center.clone().normalize(),t.spatialReference),v={};return f?f.filter(_=>{const M=!v[_.id]&&d&&Hw(_.extent,d);return M&&(v[_.id]=!0),M}).sort((_,M)=>M.score-_.score||_.objectId-M.objectId).map(_=>_.attribution).join(", "):""}};m([x({readOnly:!0,type:gt})],z1.prototype,"items",void 0),m([x({readOnly:!0})],z1.prototype,"state",null),m([x()],z1.prototype,"view",void 0),z1=m([X("esri.widgets.Attribution.AttributionViewModel")],z1);const SH=z1,Uh={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let vs=class extends Gn{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=Uh.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new SH}initialize(){this.addHandles(fs(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Uh.open]:this._isOpen};return ge("div",{bind:this,class:this.classes(Uh.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return ge("div",{class:Uh.poweredBy},"Powered by"," ",ge("a",{class:Uh.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,s={[Uh.sourcesOpen]:e,[Uh.interactive]:t};return ge("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Uh.sources,s),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,l=s>r,f=this._attributionTextOverflowed!==l;if(this._attributionTextOverflowed=l,f&&(t=!0),this._isOpen){const d=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,d&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};m([x()],vs.prototype,"_isOpen",void 0),m([x()],vs.prototype,"_isInteractive",null),m([x()],vs.prototype,"_attributionTextOverflowed",void 0),m([x()],vs.prototype,"_prevSourceNodeHeight",void 0),m([x({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],vs.prototype,"attributionText",null),m([x()],vs.prototype,"iconClass",void 0),m([x()],vs.prototype,"itemDelimiter",void 0),m([x()],vs.prototype,"label",null),m([x(),qn("esri/widgets/Attribution/t9n/Attribution")],vs.prototype,"messages",void 0),m([x()],vs.prototype,"view",null),m([x({type:SH})],vs.prototype,"viewModel",void 0),m([zo()],vs.prototype,"_toggleState",null),vs=m([X("esri.widgets.Attribution")],vs);const v4e=vs,b4e="esri.widgets.CompassViewModel";let Xd=class extends MU(ot){constructor(e){super(e),this._handles=new Jr,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Ve(()=>this.view,this._updateRotationWatcher,fi))}destroy(){this._handles=Er(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Ve(()=>e==null?void 0:e.rotation,this._updateForRotation,fi):Ve(()=>e==null?void 0:e.camera,this._updateForCamera,fi))}};m([x({readOnly:!0})],Xd.prototype,"canShowNorth",null),m([x()],Xd.prototype,"orientation",void 0),m([x({readOnly:!0})],Xd.prototype,"state",null),m([x()],Xd.prototype,"view",void 0),Xd=m([X(b4e)],Xd);const MH=Xd,Bh={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Fl=class extends Gn{constructor(e,t){super(e,t),this.iconClass=Bh.widgetIcon,this.messages=null,this.viewModel=new MH}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",s=i?-1:0,l={[Bh.disabled]:i,[Bh.interactive]:!i},f={[Bh.northIcon]:r,[Bh.rotationIcon]:!r},{messages:d}=this;return ge("div",{bind:this,class:this.classes(Bh.base,l),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":d.reset,title:d.reset},ge("span",{"aria-hidden":"true",class:this.classes(Bh.icon,f),styles:this._toRotationTransform(e)}),ge("span",{class:Bh.text},d.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};m([x()],Fl.prototype,"goToOverride",null),m([x()],Fl.prototype,"iconClass",void 0),m([x()],Fl.prototype,"label",null),m([x(),qn("esri/widgets/Compass/t9n/Compass")],Fl.prototype,"messages",void 0),m([x()],Fl.prototype,"view",null),m([x({type:MH})],Fl.prototype,"viewModel",void 0),m([zo()],Fl.prototype,"_reset",null),Fl=m([X("esri.widgets.Compass")],Fl);const w4e=Fl;let G1=class extends ot{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(so(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};m([x({readOnly:!0})],G1.prototype,"state",null),m([x()],G1.prototype,"navigationMode",void 0),m([x()],G1.prototype,"view",void 0),G1=m([X("esri.widgets.NavigationToggleViewModel")],G1);const $H=G1,Ko={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Ll=class extends Gn{constructor(e,t){super(e,t),this.iconClass=Ko.widgetIcon,this.messages=null,this.viewModel=new $H}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Ko.disabled]:e,[Ko.isLayoutHorizontal]:this.layout==="horizontal"},r={[Ko.activeButton]:t},s={[Ko.activeButton]:!t},l=e?-1:0,f=this.messages.toggle;return ge("div",{bind:this,class:this.classes(Ko.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:l,"aria-label":f,title:f},ge("div",{class:this.classes(Ko.button,Ko.panButton,r)},ge("span",{class:Ko.panIcon})),ge("div",{class:this.classes(Ko.button,Ko.rotateButton,s)},ge("span",{class:Ko.rotationIcon})))}_toggle(){this.toggle()}};m([x()],Ll.prototype,"iconClass",void 0),m([x()],Ll.prototype,"label",null),m([x({value:"vertical"})],Ll.prototype,"layout",null),m([x(),qn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ll.prototype,"messages",void 0),m([x()],Ll.prototype,"view",null),m([x({type:$H})],Ll.prototype,"viewModel",void 0),m([zo()],Ll.prototype,"_toggle",null),Ll=m([X("esri.widgets.NavigationToggle")],Ll);const _4e=Ll,jv={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Hh=class extends Gn{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[jv.disabled]:!this.enabled,[jv.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return ge("div",{bind:this,class:this.classes(jv.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},ge("span",{"aria-hidden":"true",role:"presentation",class:this.classes(jv.icon,i)}),ge("span",{class:jv.iconText},this.title))}_triggerAction(){this.action.call(this)}};m([x()],Hh.prototype,"action",void 0),m([x()],Hh.prototype,"enabled",void 0),m([x()],Hh.prototype,"iconClass",void 0),m([x()],Hh.prototype,"title",void 0),m([zo()],Hh.prototype,"_triggerAction",null),Hh=m([X("esri.widgets.IconButton")],Hh);const IH=Hh;let q1=class extends ot{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};m([x({readOnly:!0})],q1.prototype,"canZoomIn",null),m([x({readOnly:!0})],q1.prototype,"canZoomOut",null),m([x()],q1.prototype,"view",void 0),q1=m([X("esri.widgets.Zoom.ZoomConditions2D")],q1);const x4e=q1;let U1=class extends ot{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};m([x({readOnly:!0})],U1.prototype,"canZoomIn",null),m([x({readOnly:!0})],U1.prototype,"canZoomOut",null),m([x()],U1.prototype,"view",void 0),U1=m([X("esri.widgets.Zoom.ZoomConditions3D")],U1);const S4e=U1;let Wh=class extends ot{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return q(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return q(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return((e=this.view)==null?void 0:e.ready)?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new x4e({view:e}):e.type==="3d"&&(this._zoomConditions=new S4e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Ql(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Ql(e.goTo({zoomFactor:.5}))}};m([x()],Wh.prototype,"_zoomConditions",void 0),m([x()],Wh.prototype,"canZoomIn",null),m([x()],Wh.prototype,"canZoomOut",null),m([x({readOnly:!0})],Wh.prototype,"state",null),m([x()],Wh.prototype,"view",null),Wh=m([X("esri.widgets.Zoom.ZoomViewModel")],Wh);const TH=Wh,Dv={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Ju=class extends Gn{constructor(e,t){super(e,t),this.iconClass=Dv.widgetIcon,this.messages=null,this.viewModel=new TH}initialize(){this._zoomInButton=new IH({action:this.zoomIn.bind(this),iconClass:Dv.zoomInIcon}),this._zoomOutButton=new IH({action:this.zoomOut.bind(this),iconClass:Dv.zoomOutIcon})}destroy(){this._zoomInButton=oi(this._zoomInButton),this._zoomOutButton=oi(this._zoomOutButton)}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[Dv.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=e;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=r;const{zoomIn:s,zoomOut:l}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=l,ge("div",{class:this.classes(Dv.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};m([x()],Ju.prototype,"iconClass",void 0),m([x()],Ju.prototype,"label",null),m([x({value:"vertical"})],Ju.prototype,"layout",null),m([x(),qn("esri/widgets/Zoom/t9n/Zoom")],Ju.prototype,"messages",void 0),m([x()],Ju.prototype,"view",null),m([x({type:TH})],Ju.prototype,"viewModel",void 0),Ju=m([X("esri.widgets.Zoom")],Ju);const M4e=Ju;function $4e(e){return e&&e.view!==void 0}let Ax=class extends y4e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([Ve(()=>this.components,this._componentsWatcher.bind(this),fi),Ve(()=>this.view,this._updateViewAwareWidgets.bind(this),fi)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;$4e(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Ex({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new v4e({view:this.view})}_createCompass(){return new w4e({view:this.view})}_createNavigationToggle(){return new _4e({view:this.view})}_createZoom(){return new M4e({view:this.view})}};m([x()],Ax.prototype,"components",void 0),Ax=m([X("esri.views.ui.DefaultUI")],Ax);const I4e=Ax;let Px=class extends I4e{constructor(e){super(e),this.components=["attribution","zoom"]}};m([x()],Px.prototype,"components",void 0),Px=m([X("esri.views.ui.2d.DefaultUI2D")],Px);const EH=Px;var ST;let Ox=ST=class extends Ee{constructor(e){super(e),this.color=new mt([0,0,0,1])}clone(){return new ST(ve({color:this.color}))}};m([x({type:mt,json:{write:!0}})],Ox.prototype,"color",void 0),Ox=ST=m([X("esri.webmap.background.ColorBackground")],Ox);const T4e=Ox;let CH,AH,PH,OH,kH,RH;async function E4e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:l}]=await Promise.all([import("./webglDeps.bc3a607e.js"),import("./mapViewDeps.db0b1fa0.js")]);AH=e,PH=t,OH=i,kH=r,RH=s,CH=l}const FH=160;function C4e(e){return e&&e.declaredClass==="esri.Viewpoint"}let Rt=class extends Xde(D_e(V_e(uxe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new I0({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new n9e(this),this._pePromise=null,this.floors=new gt,this.highlightOptions=new uH,this.inputManager=new P5e({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new cH,this.type="2d",this.ui=new EH,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new FB,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([Ve(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(FH)},bl),this.on("resize",t=>this._resizeHandler(t)),Ve(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),ppe()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new N5e(this.featuresTilingScheme)}get initialExtentRequired(){var f;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let l=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((f=this.map.initialViewProperties)==null?void 0:f.viewpoint))&&!s&&((t==null?void 0:t.effectiveLODs)||(l=-1),(!i||e===0&&l===-1)&&(!r||!q(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!lh()||(this._pePromise||(this._pePromise=uh().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=Jt(e.targetGeometry);return!!xl(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var r;e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return A4e(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new dt({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Pe.getLogger(this.declaredClass).error(new fe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;K8(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Ve(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},bl),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Pe.getLogger(this.declaredClass).error(new fe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Pe.getLogger(this.declaredClass).error(new fe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;Gxe(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;e9e(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;TB(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,i,r;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(Ie("esri-2d-log-updating")){const s=this.allLayerViews.reduce((l,f)=>je(te({},l),{[f.layer.id]:!f.destroyed&&!("layerViews"in f)&&f.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new fe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):ae(e.targetGeometry)&&(i=new fe("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new fe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void Pe.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new vl({targetGeometry:new dt,scale:0,rotation:0});Fa(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;TB(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),um(()=>this.ready,t).then(()=>{const i=te({animate:!0},t),r=Dxe(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});Pe.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=YU(e)?KU(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,l=null,f=null;(t==null?void 0:t.include)?NH(t.include,LH(this,M=>r.add(M),M=>{l||(l=new Set),l.add(M)},M=>r.add(M),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),(t==null?void 0:t.exclude)&&NH(t.exclude,LH(this,M=>r.delete(M),M=>{f||(f=new Set),f.add(M)}));const d=this.allLayerViews.filter(M=>!M.suspended&&r.has(M)).reverse(),v=this.toMap(i);let _=[...s?this.graphicsView.hitTest(v).map(M=>({type:"graphic",graphic:M,layer:null,mapPoint:v})):[],...await Promise.all(d.map(M=>M.hitTest(v,i)).toArray())].filter(q).flat().filter(q);return l&&(_=_.filter(M=>!("graphic"in M)||!M.graphic||l.has(MT(M.graphic)))),f&&(_=_.filter(M=>!("graphic"in M)||!M.graphic||f.has(MT(M.graphic)))),{screenPoint:i,results:_}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return G5e(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return q5e(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,W5e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(l=>{const f=this.allLayerViews.find(d=>d.layer.id===l.id);f&&"container"in f&&f.container&&i.push(f.container)})):i=this._stage.children;const{format:r,quality:s}=H5e(e.format,e.quality);return V5e(e,t,this.size,this.padding,r,s,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=YU(e)?KU(this,e):e,i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),l=this.spatialReference;return new dt({x:r,y:s,spatialReference:l})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),An(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return OB.hasLayerViewModule(e)}importLayerView(e){return OB.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Pe.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>je(te({},t),{mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=c4e(this.type);return Ie("safari")&&Ie("safari")<9&&(e=new fe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Ie("safari")})),q(e)?(Pe.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):E4e()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new V8),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(f=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),f}),l=new Promise(f=>f(s));return t.when().catch(()=>{r()&&l.cancel&&l.cancel()}),l}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,s=e.then(l=>{if(fr(t),i!==this._gotoTask)throw new fe("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=l,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<FH&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var z,H,J,Y;const{constraints:e,initialExtent:t,map:i,padding:r,size:s}=this;if(!e)return null;const l=i&&"initialViewProperties"in i&&i.initialViewProperties,f={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?f.zoom!==-1&&(f.scale=e.zoomToScale(f.zoom)):f.zoom=-1;let d=null,v=null,_=0;const M=f.viewpoint&&f.viewpoint.rotation,T=f.viewpoint&&f.viewpoint.targetGeometry;q(T)&&(T.type==="extent"?d=T:T.type==="point"&&(v=T,_=f.viewpoint.scale));const A=f.extent||d||((H=Jt((z=l==null?void 0:l.viewpoint)==null?void 0:z.targetGeometry))==null?void 0:H.extent)||t,k=f.center||v||(A==null?void 0:A.center),F=f.scale||_||((J=l==null?void 0:l.viewpoint)==null?void 0:J.scale)||A&&Cv(A,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),D=f.rotation||M||((Y=l==null?void 0:l.viewpoint)==null?void 0:Y.rotation)||0;return k&&F?new vl({targetGeometry:k,scale:F,rotation:D}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,s=e.then(l=>{if(fr(t),i!==this._gotoTask)throw new fe("view:goto-interrupted","Goto was interrupted");return r.update(l),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(e,t){var s;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((s=i.spatialReference)==null?void 0:s.imageCoordinateSystem)||Xi(t,i.spatialReference))return e;const r=Vo(i,t);if(!r)throw new fe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return C4e(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Qxe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var d,v;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(_){Pe.getLogger(this.declaredClass).warn(new os("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:_})),e.targetGeometry=((d=this.defaultsFromMap.extent)==null?void 0:d.center)||new dt({x:0,y:0,spatialReference:this.spatialReference})}(v=this.constraints)==null||v.fit(e),this._set("state",new B9e({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new CH(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new RH,this._magnifierView.magnifier=this.magnifier;const r=new OH({view:this});this._set("labelManager",r);const s=new r9e({view:this});this._set("animationManager",s);const l=new kH({view:this,animationManager:s});this._set("mapViewNavigation",l),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",_=>this.fatalError=_.error),Ve(()=>this.stationary,_=>i.stationary=_,Ps),Ve(()=>this.background,_=>{i.background=_,this._magnifierView.background=_},Ps),Ve(()=>this.magnifier,_=>this._magnifierView.magnifier=_,Ps),Ve(()=>this.renderingOptions,_=>i.renderingOptions=_,Ps),Ve(()=>this.highlightOptions,_=>i.highlightOptions=_,Ps),Ve(()=>this.state.id,()=>i.state=this.state,Ps)],"map-view"),this._updateStageChildren();const f=this._resolveWhenReady;this._resolveWhenReady=[],f.forEach(_=>_(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,l=new dt({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",l),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new K9e(Kde.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new AH({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new PH(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const d of this.allLayerViews)d.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(ae(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const d=t.viewpoint.clone();d.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=d}const i=t.clone(),[r,s]=t.center;let l=null;try{l=this._project(new dt({x:r,y:s,spatialReference:t.spatialReference}),e)}catch(d){lh()||Pe.getLogger(this.declaredClass).warn(new os("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:l.toJSON(),spatialReference:e,error:d}))}l||(l=new dt({x:0,y:0,spatialReference:e}));const f=K8(new vl({targetGeometry:new dt,scale:0,rotation:0}),t.viewpoint,l);i.viewpoint=f;try{const d=20,v=[t.size[0]/2,t.size[1]/2],_=[v[0]+d,v[1]],M=t.toMap([0,0],_),{x:T,y:A}=this._project(new dt({x:M[0],y:M[1],spatialReference:t.spatialReference}),e);M[0]=T,M[1]=A,i.toScreen(M,M);const k=Yxe(v,M,_),F=Math.hypot(M[0]-v[0],M[1]-v[1])/d;!Number.isFinite(F)||Math.abs(F)>4?(f.rotation=0,f.targetGeometry=new dt({x:0,y:0,spatialReference:e})):(f.scale*=F,f.scale>Ie("mapview-srswitch-adjust-rotation-scale-threshold")?f.rotation=0:f.rotation+=Number.isFinite(k)?k:0)}catch{}this._get("constraints").constrain(f,null),this._get("state").viewpoint=f,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const d of this.allLayerViews)d.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Rt.type="2d",m([x({readOnly:!0})],Rt.prototype,"animationManager",void 0),m([x({constructOnly:!0})],Rt.prototype,"deactivatedWebGLExtensions",void 0),m([x({constructOnly:!0})],Rt.prototype,"debugWebGLExtensions",void 0),m([x({readOnly:!0})],Rt.prototype,"featuresTilingScheme",void 0),m([x({readOnly:!0})],Rt.prototype,"fullOpacity",void 0),m([x({readOnly:!0})],Rt.prototype,"graphicsTileStore",null),m([x()],Rt.prototype,"graphicsView",void 0),m([x({readOnly:!0})],Rt.prototype,"state",void 0),m([x()],Rt.prototype,"initialExtentRequired",null),m([x()],Rt.prototype,"labelManager",void 0),m([x({readOnly:!0})],Rt.prototype,"resourceManager",null),m([x({readOnly:!0})],Rt.prototype,"textureManager",null),m([x({readOnly:!0})],Rt.prototype,"mapViewNavigation",void 0),m([x({constructOnly:!0})],Rt.prototype,"renderCanvas",void 0),m([x()],Rt.prototype,"renderingOptions",void 0),m([x({readOnly:!0})],Rt.prototype,"rendering",void 0),m([x({constructOnly:!0})],Rt.prototype,"supersampleScreenshotsEnabled",void 0),m([x({readOnly:!0})],Rt.prototype,"supportsGround",void 0),m([x()],Rt.prototype,"_stationaryTimer",void 0),m([x()],Rt.prototype,"_defaultsFromMapSettings",null),m([x()],Rt.prototype,"_pePromise",void 0),m([x({readOnly:!0})],Rt.prototype,"typeSpecificPreconditionsReady",null),m([x()],Rt.prototype,"animation",null),m([x({type:T4e})],Rt.prototype,"background",null),m([x({value:null,type:dt,dependsOn:["state.id","ready"]})],Rt.prototype,"center",null),m([x({type:FB})],Rt.prototype,"constraints",null),m([x({value:null,type:ai,dependsOn:["state.id","ready"]})],Rt.prototype,"extent",null),m([x()],Rt.prototype,"floors",void 0),m([x({type:uH})],Rt.prototype,"highlightOptions",void 0),m([x({readOnly:!0})],Rt.prototype,"inputManager",void 0),m([x()],Rt.prototype,"map",void 0),m([x({value:{top:0,right:0,bottom:0,left:0},cast:e=>te({top:0,right:0,bottom:0,left:0},e)})],Rt.prototype,"padding",null),m([x()],Rt.prototype,"resizeAlign",void 0),m([x({readOnly:!0,dependsOn:["state.id"]})],Rt.prototype,"resolution",null),m([x({value:0,type:Number,dependsOn:["state.id","ready"]})],Rt.prototype,"rotation",null),m([x({value:0,type:Number,dependsOn:["state.id","ready"]})],Rt.prototype,"scale",null),m([x({constructOnly:!0})],Rt.prototype,"spatialReferenceLocked",void 0),m([x()],Rt.prototype,"stationary",null),m([x({type:cH,readOnly:!0})],Rt.prototype,"timeline",void 0),m([x({readOnly:!0})],Rt.prototype,"type",void 0),m([x({readOnly:!0})],Rt.prototype,"updating",null),m([x({value:null,type:vl,dependsOn:["state.id","ready"]})],Rt.prototype,"viewpoint",null),m([x({value:-1,dependsOn:["state.id","ready"]})],Rt.prototype,"zoom",null),m([x({readOnly:!0})],Rt.prototype,"navigating",null),m([x({type:EH})],Rt.prototype,"ui",void 0),Rt=m([X("esri.views.MapView")],Rt);const CPe=Rt;function MT(e){var i,r,s,l;const t=e.getObjectId();return t?`${(l=(s=(i=e.layer)==null?void 0:i.uid)!=null?s:(r=e.sourceLayer)==null?void 0:r.uid)!=null?l:"MapView"}/${t}`:`"MapView/${e.uid}`}function LH(e,t,i,r,s){return l=>{if(l instanceof Dr){if(l.layer===e)s==null||s();else{const f=e.allLayerViews.find(d=>d.layer===l.layer);f&&(r==null||r(f))}i(MT(l))}else{const f=e.allLayerViews.find(d=>d.layer===l);f&&t(f)}}}function NH(e,t){if(e)if(xw(e))for(const i of e)if(xw(i))for(const r of i)t(r);else t(i);else t(e)}function A4e(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}var $T;let wr=$T=class extends Ee{constructor(e){super(e),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}static from(e){return Vf($T,e)}};m([x({type:Number,json:{write:!0}})],wr.prototype,"dpi",void 0),m([x()],wr.prototype,"floors",void 0),m([x({type:String,json:{write:!0}})],wr.prototype,"gdbVersion",void 0),m([x({types:au,json:{read:fn,write:!0}})],wr.prototype,"geometry",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"geometryPrecision",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"height",void 0),m([x({type:[Number],json:{write:!0}})],wr.prototype,"layerIds",void 0),m([x({type:["top","visible","all","popup"],json:{write:!0}})],wr.prototype,"layerOption",void 0),m([x({type:ai,json:{write:!0}})],wr.prototype,"mapExtent",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"maxAllowableOffset",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnFieldName",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnUnformattedValues",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnZ",void 0),m([x({type:At,json:{write:!0}})],wr.prototype,"spatialReference",void 0),m([x()],wr.prototype,"sublayers",void 0),m([x({type:Go,json:{write:!0}})],wr.prototype,"timeExtent",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"tolerance",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"width",void 0),wr=$T=m([X("esri.rest.support.IdentifyParameters")],wr);const P4e=wr,jH=96;function DH(e,t){const i=t||e.extent,r=e.width,s=Xp(i&&i.spatialReference);return i&&r?i.width/r*s*oN*jH:0}function APe(e,t){return e/(Xp(t)*oN*jH)}function PPe(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)==null?void 0:i.floorField)&&"floors"in e.view?VH(e.view.floors,t.floorInfo.floorField):null}function kx(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)==null?void 0:i.floorField)?VH(e,t.floorInfo.floorField):null}function VH(e,t){if(!(e==null?void 0:e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function zH(e,t,i){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!qH(e,t)}function GH(e,t,i){return!!e.some(r=>{const s=r.source;return!(!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(ae(s.gdbVersion)||s.gdbVersion===i))||r.originIdOf("renderer")>nt.SERVICE||r.originIdOf("labelingInfo")>nt.SERVICE||r.originIdOf("opacity")>nt.SERVICE||r.originIdOf("labelsVisible")>nt.SERVICE})||!qH(e,t)}function qH(e,t){if(!e||!e.length||ae(t))return!0;const i=t.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).map(l=>l.id).toArray();if(e.length>i.length)return!1;let r=0;const s=i.length;for(const{id:l}of e){for(;r<s&&i[r]!==l;)r++;if(r>=s)return!1}return!0}function O4e(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const UH=e=>e.spatialReference.wkid||JSON.stringify(e.spatialReference);function k4e(e,t){const{dpi:i,gdbVersion:r,geometry:s,geometryPrecision:l,height:f,layerOption:d,mapExtent:v,maxAllowableOffset:_,returnFieldName:M,returnGeometry:T,returnUnformattedValues:A,returnZ:k,spatialReference:F,timeExtent:D,tolerance:z,width:H}=e.toJSON(),{dynamicLayers:J,layerDefs:Y,layerIds:ie}=R4e(e),re=t&&q(t.geometry)?t.geometry:null,ee={geometryPrecision:l,maxAllowableOffset:_,returnFieldName:M,returnGeometry:T,returnUnformattedValues:A,returnZ:k,tolerance:z},le=re&&re.toJSON()||s;if(ee.imageDisplay=`${H},${f},${i}`,r&&(ee.gdbVersion=r),le&&(delete le.spatialReference,ee.geometry=JSON.stringify(le),ee.geometryType=ou(le)),F?ee.sr=F.wkid||JSON.stringify(F):le&&le.spatialReference?ee.sr=UH(le):v&&v.spatialReference&&(ee.sr=UH(v)),ee.time=D?[D.start,D.end].join(","):null,v){const{xmin:me,ymin:we,xmax:_e,ymax:Me}=v;ee.mapExtent=`${me},${we},${_e},${Me}`}return Y&&(ee.layerDefs=Y),J&&!Y&&(ee.dynamicLayers=J),ee.layers=d==="popup"?"visible":d,ie&&!J&&(ee.layers+=`:${ie.join(",")}`),ee}function R4e(e){var F,D;const{mapExtent:t,floors:i,width:r,sublayers:s,layerIds:l,layerOption:f,gdbVersion:d}=e,v=(D=(F=s==null?void 0:s.find(z=>z.layer!=null))==null?void 0:F.layer)==null?void 0:D.serviceSublayers,_=f==="popup",M={},T=DH({extent:t,width:r,spatialReference:t==null?void 0:t.spatialReference}),A=[],k=z=>{const H=T===0,J=z.minScale===0||T<=z.minScale,Y=z.maxScale===0||T>=z.maxScale;if(z.visible&&(H||J&&Y))if(z.sublayers)z.sublayers.forEach(k);else{if((l==null?void 0:l.includes(z.id))===!1||_&&(!z.popupTemplate||!z.popupEnabled))return;A.unshift(z)}};if(s==null||s.forEach(k),s&&!A.length)M.layerIds=[];else{const z=GH(A,v,d),H=A.map(J=>{const Y=kx(i,J);return J.toExportImageJSON(Y)});if(z)M.dynamicLayers=JSON.stringify(H);else{if(s){let Y=A.map(({id:ie})=>ie);l&&(Y=Y.filter(ie=>l.includes(ie))),M.layerIds=Y}else(l==null?void 0:l.length)&&(M.layerIds=l);const J=F4e(i,A);if(q(J)&&J.length){const Y={};for(const ie of J)ie.definitionExpression&&(Y[ie.id]=ie.definitionExpression);Object.keys(Y).length&&(M.layerDefs=JSON.stringify(Y))}}}return M}function F4e(e,t){const i=!!(e==null?void 0:e.length),r=t.filter(s=>s.definitionExpression!=null||i&&s.floorInfo!=null);return r.length?r.map(s=>{const l=kx(e,s),f=P_(l,s.definitionExpression);return{id:s.id,definitionExpression:f}}):null}let Zu=class extends Ee{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,t){return Dr.fromJSON({attributes:te({},t.attributes),geometry:te({},t.geometry)})}writeFeature(e,t){if(!e)return;const{attributes:i,geometry:r}=e;i&&(t.attributes=te({},i)),q(r)&&(t.geometry=r.toJSON(),t.geometryType=Zw.toJSON(r.type))}};m([x({type:String,json:{write:!0}})],Zu.prototype,"displayFieldName",void 0),m([x({type:Dr})],Zu.prototype,"feature",void 0),m([Be("feature",["attributes","geometry"])],Zu.prototype,"readFeature",null),m([Xe("feature")],Zu.prototype,"writeFeature",null),m([x({type:Number,json:{write:!0}})],Zu.prototype,"layerId",void 0),m([x({type:String,json:{write:!0}})],Zu.prototype,"layerName",void 0),Zu=m([X("esri.rest.support.IdentifyResult")],Zu);const L4e=Zu;async function OPe(e,t,i){const r=(t=j4e(t)).geometry?[t.geometry]:[],s=zr(e);return s.path+="/identify",Vm(r).then(l=>{const f=k4e(t,{geometry:l&&l[0]}),d=n7(te(je(te({},s.query),{f:"json"}),f)),v=bV(d,i);return li(s.path,v).then(N4e).then(_=>D4e(_,t.sublayers))})}function N4e(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=Boolean(t.exceededTransferLimit),t.results=t.results.map(i=>L4e.fromJSON(i)),t}function j4e(e){return e=P4e.from(e)}function D4e(e,t){if(!(t==null?void 0:t.length))return e;const i=new Map;function r(s){i.set(s.id,s),s.sublayers&&s.sublayers.forEach(r)}t.forEach(r);for(const s of e.results)s.feature.sourceLayer=i.get(s.layerId);return e}let Ku=class extends NI(h8(T0)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new zd,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};m([x({type:JG})],Ku.prototype,"elevationInfo",void 0),m([x(O8(zd,"graphics"))],Ku.prototype,"graphics",void 0),m([x({type:["show","hide"]})],Ku.prototype,"listMode",void 0),m([x()],Ku.prototype,"screenSizePerspectiveEnabled",void 0),m([x({readOnly:!0})],Ku.prototype,"type",void 0),m([x({constructOnly:!0})],Ku.prototype,"internal",void 0),Ku=m([X("esri.layers.GraphicsLayer")],Ku);const BH=Ku,B1=(e,t,i)=>[t,i],Yo=(e,t,i)=>[t,i,e[2]],H1=(e,t,i)=>[t,i,e[2],e[3]];function HH(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:q(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function Vv({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function zv({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function IT(e,t,i){const r=[];let s,l,f,d;for(let v=0;v<i.length;v++){const _=i[v];v>0?(f=Vv(e,_[0]),d=zv(e,_[1]),f===s&&d===l||(r.push(t(_,f-s,d-l)),s=f,l=d)):(s=Vv(e,_[0]),l=zv(e,_[1]),r.push(t(_,s,l)))}return r.length>0?r:null}function V4e(e,t,i,r){return IT(e,i?r?H1:Yo:r?Yo:B1,t)}function z4e(e,t,i,r){const s=[],l=i?r?H1:Yo:r?Yo:B1;for(let f=0;f<t.length;f++){const d=IT(e,l,t[f]);d&&d.length>=3&&s.push(d)}return s.length?s:null}function G4e(e,t,i,r){const s=[],l=i?r?H1:Yo:r?Yo:B1;for(let f=0;f<t.length;f++){const d=IT(e,l,t[f]);d&&d.length>=2&&s.push(d)}return s.length?s:null}function WH({scale:e,translate:t},i){return i*e[0]+t[0]}function JH({scale:e,translate:t},i){return t[1]-i*e[1]}function ZH(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[s,l]=e.scale;let f=WH(e,i[0][0]),d=JH(e,i[0][1]);r[0]=t(i[0],f,d);for(let v=1;v<i.length;v++){const _=i[v];f+=_[0]*s,d-=_[1]*l,r[v]=t(_,f,d)}return r}function KH(e,t,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=ZH(e,t,i[s]);return r}function q4e(e,t,i,r){return ZH(e,i?r?H1:Yo:r?Yo:B1,t)}function U4e(e,t,i,r){return KH(e,i?r?H1:Yo:r?Yo:B1,t)}function B4e(e,t,i,r){return KH(e,i?r?H1:Yo:r?Yo:B1,t)}function H4e(e,t,i,r,s){return t.xmin=Vv(e,i.xmin),t.ymin=zv(e,i.ymin),t.xmax=Vv(e,i.xmax),t.ymax=zv(e,i.ymax),t!==i&&(r&&(t.zmin=i.zmin,t.zmax=i.zmax),s&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}function W4e(e,t,i,r,s){var l;return t.points=(l=V4e(e,i.points,r,s))!=null?l:[],t}function J4e(e,t,i,r,s){return t.x=Vv(e,i.x),t.y=zv(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m)),t}function Z4e(e,t,i,r,s){const l=z4e(e,i.rings,r,s);return l?(t.rings=l,t):null}function K4e(e,t,i,r,s){const l=G4e(e,i.paths,r,s);return l?(t.paths=l,t):null}function kPe(e,t){return e&&t?Yw(t)?J4e(e,{},t,!1,!1):ug(t)?K4e(e,{},t,!1,!1):su(t)?Z4e(e,{},t,!1,!1):Kw(t)?W4e(e,{},t,!1,!1):lg(t)?H4e(e,{},t,!1,!1):null:null}function RPe(e,t,i,r,s){return q(i)&&(t.points=q4e(e,i.points,r,s)),t}function FPe(e,t,i,r,s){return ae(i)||(t.x=WH(e,i.x),t.y=JH(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m))),t}function LPe(e,t,i,r,s){return q(i)&&(t.rings=B4e(e,i.rings,r,s)),t}function NPe(e,t,i,r,s){return q(i)&&(t.paths=U4e(e,i.paths,r,s)),t}function TT(e,t){return e===t||q(e)&&q(t)&&Xi(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}class jPe{constructor(t,i,r){this.uid=t,this.geometry=i,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}}function DPe(e){return q(e.geometry)}class VPe{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function Rx(e,t,i,r){return{x:e,y:t,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}function zPe(e){if(ae(e))return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const i of e.paths)t+=i.length;return t}case"polygon":{let t=0;for(const i of e.rings)t+=i.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function GPe(e,t){switch(mue(t),e.type==="mesh"&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let i=0;i<e.paths.length;i++)f6(t,e.paths[i],e.hasZ);break;case"polygon":for(let i=0;i<e.rings.length;i++)f6(t,e.rings[i],e.hasZ);break;case"multipoint":f6(t,e.points,e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,e.zmin!=null&&(t[2]=e.zmin),e.zmax!=null&&(t[5]=e.zmax)}}function qPe(e,t){switch(due(t),e.type==="mesh"&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let i=0;i<e.paths.length;i++)c6(t,e.paths[i]);break;case"polygon":for(let i=0;i<e.rings.length;i++)c6(t,e.rings[i]);break;case"multipoint":c6(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function UPe(e,t){return e.objectId!=null?e.objectId:e.attributes&&t?e.attributes[t]:null}C2();Fo();var YH,XH,QH,eW,tW,iW,rW,nW,sW,oW,aW,lW,uW,cW,hW,pW,dW,fW,yW,gW,mW,vW,bW,wW,_W,xW,SW,MW,$W,IW,TW,EW,CW,AW,PW,ET,OW,kW,RW,CT,FW,LW,NW,jW,DW,VW,zW,GW,qW,UW,BW,HW,WW,JW,ZW,KW,YW,XW,QW,eJ,tJ;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(YH||(YH={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(XH||(XH={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(QH||(QH={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(eW||(eW={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(tW||(tW={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(iW||(iW={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(rW||(rW={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(nW||(nW={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(sW||(sW={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(oW||(oW={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(aW||(aW={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(lW||(lW={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(uW||(uW={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(cW||(cW={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(hW||(hW={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(pW||(pW={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(dW||(dW={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(fW||(fW={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(yW||(yW={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(gW||(gW={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(mW||(mW={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(vW||(vW={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(bW||(bW={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(wW||(wW={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(_W||(_W={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(xW||(xW={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(SW||(SW={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(MW||(MW={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}($W||($W={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(IW||(IW={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(TW||(TW={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(EW||(EW={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(CW||(CW={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(AW||(AW={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(PW||(PW={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(ET||(ET={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(OW||(OW={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(kW||(kW={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(RW||(RW={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(CT||(CT={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(FW||(FW={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(LW||(LW={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(NW||(NW={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(jW||(jW={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(DW||(DW={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(VW||(VW={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(zW||(zW={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(GW||(GW={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(qW||(qW={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(UW||(UW={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(BW||(BW={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(HW||(HW={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(WW||(WW={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(JW||(JW={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ZW||(ZW={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(KW||(KW={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(YW||(YW={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(XW||(XW={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(QW||(QW={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(eJ||(eJ={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(tJ||(tJ={}));const cr={main:new mt([255,127,0]),selected:new mt([255,255,255]),outline:new mt([0,0,0,.5]),selectedOutline:new mt([255,255,255]),hoverOutline:new mt([255,255,255]),secondary:new mt([255,255,255]),secondaryOutline:new mt([100,100,100]),transparent:new mt([0,0,0,0])};function W1(e,t){if(t)for(const i in t)e[i]=t[i]}class Gv{constructor(t){this.size=8,this.hoverSize=10,this.color=cr.main,this.hoverColor=cr.main,this.outlineColor=cr.outline,this.hoverOutlineColor=cr.hoverOutline,W1(this,t)}}class Y4e{constructor(t){this.color=cr.secondary,this.hoverColor=cr.main,W1(this,t)}}class X4e{constructor(t){this.color=cr.transparent,this.hoverColor=cr.transparent,this.outlineColor=cr.main,this.hoverOutlineColor=cr.main,this.stagedColor=cr.transparent,this.stagedOutlineColor=cr.secondary,W1(this,t)}}class Q4e{constructor(t){this.vertex=new Gv,this.midpoint=new Gv({color:cr.secondary,outlineColor:cr.secondaryOutline,size:6}),this.selected=new Gv({color:cr.selected,hoverColor:cr.selected,hoverOutlineColor:cr.hoverOutline}),W1(this,t)}}class eSe{constructor(t){this.center=new Gv({color:cr.secondaryOutline}),this.fill=new X4e,this.line=new Y4e,this.vertex=new Gv({color:cr.selected,outlineColor:cr.main,hoverColor:cr.selected,hoverOutlineColor:cr.secondaryOutline}),W1(this,t)}}class tSe{constructor(t){this.reshapeGraphics=new Q4e,this.transformGraphics=new eSe,W1(this,t)}}const BPe=new tSe;let ja=class extends Ee{constructor(){super(...arguments),this.enabled=!0}};m([x({type:Boolean})],ja.prototype,"enabled",void 0),ja=m([X("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],ja);let _r=class extends Ee{constructor(e){super(e),this.lineSnapper=new ja,this.parallelLineSnapper=new ja,this.rightAngleSnapper=new ja,this.rightAngleTriangleSnapper=new ja,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new mt([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};m([x({type:ja,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"lineSnapper",void 0),m([x({type:ja,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"parallelLineSnapper",void 0),m([x({type:ja,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"rightAngleSnapper",void 0),m([x({type:ja,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"rightAngleTriangleSnapper",void 0),m([x({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],_r.prototype,"shortLineThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],_r.prototype,"distance",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"pointThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"intersectionParallelLineThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"parallelLineThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"touchSensitivityMultiplier",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"pointOnLineThreshold",void 0),m([x({type:mt,nonNullable:!0})],_r.prototype,"orange",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"lineHintWidthReference",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"lineHintWidthTarget",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],_r.prototype,"lineHintFadedExtensions",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"parallelLineHintWidth",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],_r.prototype,"parallelLineHintLength",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],_r.prototype,"parallelLineHintOffset",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],_r.prototype,"rightAngleHintSize",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],_r.prototype,"rightAngleHintOutlineSize",void 0),_r=m([X("esri.views.interactive.snapping.Settings.Defaults")],_r);const mo=new _r;var Sn;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(Sn||(Sn={}));function iJ(e){return e?Ki:sSe}function iSe(e,t){return ae(t)||!t.mode?iJ(e).mode:t.mode}function AT(e,t){return q(t)?t:iJ(e)}function rJ(e,t){return iSe(!!q(e)&&e.hasZ,t)}function HPe(e,t){return AT(!!q(e)&&e.hasZ,t)}function Fx(e){const t=OT(e);return rJ(e.geometry,t)}function WPe(e){const t=OT(e),i=rJ(e.geometry,t);return{mode:i,offset:q(t)&&i!=="on-the-ground"?pn(t.offset,0)*gwe(pn(t.unit,"meters")):0}}function PT(e){if(Fx(e)==="on-the-ground")return!1;const t=OT(e),i=q(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||i==="0")}function OT(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function kT(e,t,i){if(ae(i)||!i.mode)return;const r=e.hasZ?e.z:0,s=q(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return r-s;case"on-the-ground":return 0;case"relative-to-ground":return r-(pn(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+s);case"relative-to-scene":return r-(pn(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+s)}}function RT(e,t,i,r=null){return nJ(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function J1(e,t,i,r,s=null){return nJ(e,t[0],t[1],t.length>2?t[2]:0,i,r,s)}function nJ(e,t,i,r,s,l,f=null){if(ae(l))return;const d=q(f)?f.mode:"absolute-height";if(d==="on-the-ground")return 0;const{absoluteZ:v}=rSe(t,i,r,s,e,l);return nSe(v,t,i,r,s,e,f,d)}function rSe(e,t,i,r,s,l){const f=q(l.offset)?l.offset:0;switch(l.mode){case"absolute-height":return{absoluteZ:i+f,elevation:0};case"on-the-ground":{const d=pn(s.elevationProvider.getElevation(e,t,0,r,"ground"),0);return{absoluteZ:d,elevation:d}}case"relative-to-ground":{const d=pn(s.elevationProvider.getElevation(e,t,i,r,"ground"),0);return{absoluteZ:i+d+f,elevation:d}}case"relative-to-scene":{const d=pn(s.elevationProvider.getElevation(e,t,i,r,"scene"),0);return{absoluteZ:i+d+f,elevation:d}}}}function nSe(e,t,i,r,s,l,f,d){const v=q(f)&&q(f.offset)?f.offset:0;switch(d){case"absolute-height":return e-v;case"relative-to-ground":return e-(pn(l.elevationProvider.getElevation(t,i,r,s,"ground"),0)+v);case"relative-to-scene":return e-(pn(l.elevationProvider.getElevation(t,i,r,s,"scene"),0)+v)}}function JPe(e,t){if(ae(t))return!1;const{mode:i}=t;return q(i)&&(e==="scene"&&i==="relative-to-scene"||e==="ground"&&i!=="absolute-height")}const Ki={mode:"absolute-height",offset:0},sSe={mode:"on-the-ground",offset:null};function oSe(e,t){return e===t||q(e)&&q(t)&&e.mode===t.mode&&e.offset===t.offset}function Xn(e,t){const i=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return i;case 3:return i&&e[2]===t[2];case 4:return i&&e[2]===t[2]&&e[3]===t[3]}return!1}function Qd(e,t){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function aSe(e,t){return Math.sqrt(Qd(e,t))}function FT(e,t,i){const r=i.toXYZ(e,lSe);t.sort((s,l)=>{const f=i.toXYZ(s.targetPoint,sJ),d=Gc(f,r),v=i.toXYZ(l.targetPoint,sJ);return d-Gc(v,r)})}const lSe=et(),sJ=et();var Da;function ZPe(e,t){return{point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),distance:e.distance,types:e.types,query:q(t)?t.toJSON():{where:"1=1"}}}function Ir(e,t,i,r){const{coordinateHelper:s,elevationInfo:l}=i;if(!s.hasZ()||ae(t)||t.type!=="3d"||ae(e)||oSe(l,r))return e;const f=J1(t,e,s.spatialReference,l,r),d=s.clone(e);return d[2]=f,d}function Nl(e,t,i,r=Ki){return{left:Ir(e.leftVertex.pos,t,i,r),right:Ir(e.rightVertex.pos,t,i,r)}}function KPe(e){return e.createQuery()}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Da||(Da={}));class qv{constructor(t,i){this.elevationInfo=t,this.domain=i}}class Lx extends qv{constructor(t,i,r=Sn.ALL){super(i,r),this.intersectionPoint=t}equals(t){return t instanceof Lx&&Xn(this.intersectionPoint,t.intersectionPoint)}}class Xo extends qv{constructor(t,i,r,s,l=Sn.ALL,f=!0,d=!0){super(s,l),this.type=t,this.lineStart=i,this.lineEnd=r,this.fadeLeft=f,this.fadeRight=d}equals(t){return t instanceof Xo&&this.type===t.type&&Xn(this.lineStart,t.lineStart)&&Xn(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}}class Nx extends qv{constructor(t,i,r,s=Sn.ALL){super(r,s),this.lineStart=t,this.lineEnd=i}equals(t){return t instanceof Nx&&Xn(this.lineStart,t.lineStart)&&Xn(this.lineEnd,t.lineEnd)}}class LT extends qv{constructor(t,i,r){super(i,r),this.point=t}equals(t){return t instanceof LT&&Xn(this.point,t.point)}}class Uv extends qv{constructor(t,i,r,s,l=Sn.ALL){super(s,l),this.previousVertex=t,this.centerVertex=i,this.nextVertex=r}equals(t){return t instanceof Uv&&Xn(this.previousVertex,t.previousVertex)&&Xn(this.centerVertex,t.centerVertex)&&Xn(this.nextVertex,t.nextVertex)}}class uSe{draw(t,i){const r=this._getUniqueHints(t),s=[];for(const l of r)l instanceof Lx&&s.push(this.visualizeIntersectionPoint(l,i)),l instanceof Xo&&s.push(this.visualizeLine(l,i)),l instanceof Nx&&s.push(this.visualizeParallelSign(l,i)),l instanceof Uv&&s.push(this.visualizeRightAngleQuad(l,i)),l instanceof LT&&s.push(this.visualizePoint(l,i));return By(s)}_getUniqueHints(t){const i=[];for(const r of t){let s=!0;for(const l of i)if(r.equals(l)){s=!1;break}s&&i.push(r)}return i}}class cSe extends uSe{constructor(t){super(),this._graphicsLayer=t}visualizeIntersectionPoint(t,i){return this._visualizeSnappingIndicator(new dt({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:i.coordinateHelper.spatialReference}),pSe)}visualizePoint(t,i){return this._visualizeSnappingIndicator(new dt({x:t.point[0],y:t.point[1],spatialReference:i.coordinateHelper.spatialReference}),dSe)}visualizeLine(t,i){return this._visualizeSnappingIndicator(new Kr({paths:[[t.lineStart,t.lineEnd]],spatialReference:i.coordinateHelper.spatialReference}),fSe)}visualizeParallelSign(t,i){return this._visualizeSnappingIndicator(new Kr({paths:[[t.lineStart,t.lineEnd]],spatialReference:i.coordinateHelper.spatialReference}),ySe)}visualizeRightAngleQuad(t,i){return this._visualizeSnappingIndicator(new Kr({paths:[[t.previousVertex,t.centerVertex,t.nextVertex]],spatialReference:i.coordinateHelper.spatialReference}),vSe(t))}_visualizeSnappingIndicator(t,i){const r=new Dr({geometry:t,symbol:i});return this._graphicsLayer.add(r),Kl(()=>{this._graphicsLayer.remove(r)})}}const Z1=cr.main.toArray(),hSe=[...cr.main.toRgb(),100],pSe=new no({outline:new ps({width:1.5,color:Z1}),size:15,color:[0,0,0,0]}),dSe=new no({outline:{width:.5,color:[0,0,0,1]},size:10,color:Z1}),fSe=new Uc({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:ET.Butt,joinStyle:CT.Round,miterLimit:10,width:Ro(mo.lineHintWidthTarget),color:Z1}]}}}),ySe=new Uc({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Z1}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:Z1}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),oJ=e=>new Uc({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Ro(mo.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Ro(mo.rightAngleHintOutlineSize),color:Z1},{type:"CIMSolidFill",enable:!0,color:hSe}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),gSe=oJ(45),mSe=oJ(225),vSe=(()=>{const e=Wt(),t=Wt(),i=et();return r=>(ur(e,r.centerVertex,r.previousVertex),ur(t,r.nextVertex,r.previousVertex),G8(i,e,t),i[2]<0?gSe:mSe)})();var Ur;(function(e){e[e.Z=0]="Z",e[e.M=1]="M"})(Ur||(Ur={}));class bSe{constructor(t){this.spatialReference=t}createVector(){return this._tag(Wt())}pointToVector(t){return this._tag(Gu(t.x,t.y))}arrayToVector(t){return this._tag(Gu(t[0],t[1]))}vectorToArray(t){return[t[0],t[1]]}pointToArray(t){return[t.x,t.y]}vectorToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return cx(s,t,i,r)}addDelta(t,i,r){t[0]+=i,t[1]+=r}distance(t,i){return Vu(t,i)}getZ(t,i){return i}hasZ(){return!1}getM(t,i){return i}hasM(){return!1}clone(t){return this._tag(gB(t))}copy(t,i){return T1(i,t)}fromXYZ(t){return this._tag(Gu(t[0],t[1]))}toXYZ(t,i=et()){return jr(i,t[0],t[1],0)}equals(t,i){return q8(t,i)}_tag(t){return t}}class aJ{constructor(t,i){this._valueType=t,this.spatialReference=i}createVector(){return this._tag(et())}pointToVector(t){return this._tag(Ar(t.x,t.y,this._valueType===Ur.Z?t.z:t.m))}arrayToVector(t){return this._tag(Ar(t[0],t[1],t[2]||0))}vectorToArray(t){return[t[0],t[1],t[2]]}pointToArray(t){return this._valueType===Ur.Z?[t.x,t.y,t.z]:[t.x,t.y,t.m]}vectorToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=this._valueType===Ur.Z?t[2]:void 0,i.m=this._valueType===Ur.M?t[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=this._valueType===Ur.Z?t[2]:void 0,i.m=this._valueType===Ur.M?t[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){const r=this._valueType===Ur.Z,s=this._valueType===Ur.M;return i.x=t[0],i.y=t[1],i.z=r?t[2]:void 0,i.m=s?t[2]:void 0,i.hasZ=r,i.hasM=s,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return UR(s,t,i,r)}addDelta(t,i,r,s){t[0]+=i,t[1]+=r,this._valueType===Ur.Z&&(t[2]+=s)}distance(t,i){return this._valueType===Ur.Z?u0(t,i):Vu(t,i)}getZ(t,i){return this._valueType===Ur.Z?t[2]:i}hasZ(){return this._valueType===Ur.Z}getM(t,i){return this._valueType===Ur.M?t[2]:i}hasM(){return this._valueType===Ur.M}clone(t){return this._tag(RR(t))}copy(t,i){return Is(i,t)}fromXYZ(t,i=0,r=0){return this._tag(Ar(t[0],t[1],this._valueType===Ur.Z?t.length>2?t[2]:i:r))}toXYZ(t,i=et()){return jr(i,t[0],t[1],this._valueType===Ur.Z?t[2]:0)}equals(t,i){return y2(t,i)}_tag(t){return t}}class wSe{constructor(t){this.spatialReference=t}createVector(){return this._tag(l1())}pointToVector(t){return this._tag(Ca(t.x,t.y,t.z,t.m))}arrayToVector(t){return this._tag(Ca(t[0],t[1],t[2]||0,t[3]||0))}vectorToArray(t){return[t[0],t[1],t[2],t[3]]}pointToArray(t){return[t.x,t.y,t.z,t.m]}vectorToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return b2(s,t,i,r)}addDelta(t,i,r,s){t[0]+=i,t[1]+=r,t[2]+=s}distance(t,i){return u0(t,i)}getZ(t){return t[2]}hasZ(){return!0}getM(t){return t[3]}hasM(){return!0}clone(t){return this._tag(Zz(t))}copy(t,i){return v2(i,t)}fromXYZ(t,i=0,r=0){return this._tag(Ca(t[0],t[1],t.length>2?t[2]:i,r))}toXYZ(t,i=et()){return jr(i,t[0],t[1],t[2])}equals(t,i){return HS(t,i)}_tag(t){return t}}function NT(e,t,i){return e&&t?new wSe(i):t?new aJ(Ur.M,i):e?new aJ(Ur.Z,i):new bSe(i)}function _Se(e,t){if(!t.supported)return;let i=1/0,r=-1/0;const s=t.upperBoundX-t.lowerBoundX;e.forEach(f=>{let d=f.pos[0];for(;d<t.lowerBoundX;)d+=s;for(;d>t.upperBoundX;)d-=s;i=Math.min(i,d),r=Math.max(r,d),f.pos[0]=d});const l=r-i;s-l<l&&e.forEach(f=>{f.pos[0]<0&&(f.pos[0]+=s)})}function xSe(e,t){const i=Ys(e);return t===Du.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}class Bv{constructor(t){this.component=t,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(t){this._pos=t,this.component.unnormalizeVertexPositions()}}class Yu{constructor(t,i,r){this.component=t,this.leftVertex=i,this.rightVertex=r,this.type="edge",i.rightEdge=this,r.leftEdge=this}}class K1{constructor(t,i){this._spatialReference=t,this._viewingMode=i,this.vertices=[],this.edges=[]}unnormalizeVertexPositions(){this.vertices.length<=1||_Se(this.vertices,xSe(this._spatialReference,this._viewingMode))}updateVertexIndex(t,i){if(this.vertices.length===0)return;const r=this.vertices[0];let s=null,l=t,f=i;do s=l,s.index=f++,l=s.rightEdge?s.rightEdge.rightVertex:null;while(l!=null&&l!==r);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.length===0?null:this.vertices[0]}getLastVertex(){return this.vertices.length===0?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(t,i){const r=this.vertices[t];this.vertices[t]=this.vertices[i],this.vertices[i]=r}iterateVertices(t){if(this.vertices.length===0)return;const i=this.vertices[0];let r=i;do t(r,r.index),r=q(r.rightEdge)?r.rightEdge.rightVertex:null;while(r!==i&&r!=null)}}class Y1 extends yn{constructor(t,i){super(),this.type=t,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(t){this._dirty=!0,this.emit("change",t)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const t=[],i=this.coordinateHelper.vectorToArray;for(const r of this.components){if(r.vertices.length<1)continue;const s=[];let l=r.vertices.find(d=>d.leftEdge==null);const f=l;do s.push(i(l.pos)),l=l.rightEdge?l.rightEdge.rightVertex:null;while(l&&l!==f);t.push(s)}return new Kr({paths:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const t=[],i=this.coordinateHelper.vectorToArray;for(const r of this.components){if(r.vertices.length<1)continue;const s=[],l=r.vertices[0];let f=l;const d=f;do s.push(i(f.pos)),f=q(f.rightEdge)?f.rightEdge.rightVertex:null;while(f&&f!==d);r.isClosed()&&s.push(i(l.pos)),t.push(s)}return new Dn({rings:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(t,i){const r=t.spatialReference,s=NT(t.hasZ,t.hasM,r),l=new Y1(t.type,s);switch(t.type){case"polygon":{const f=t.rings;for(let d=0;d<f.length;++d){const v=f[d],_=new K1(r,i),M=v.length>2&&Tc(v[0],v[v.length-1]),T=M?v.length-1:v.length;for(let k=0;k<T;++k){const F=s.arrayToVector(v[k]),D=new Bv(_);_.vertices.push(D),D.pos=F,D.index=k}const A=_.vertices.length-1;for(let k=0;k<A;++k){const F=_.vertices[k],D=_.vertices[k+1],z=new Yu(_,F,D);_.edges.push(z)}if(M){const k=new Yu(_,_.vertices[_.vertices.length-1],_.vertices[0]);_.edges.push(k)}l.components.push(_)}break}case"polyline":for(const f of t.paths){const d=new K1(r,i),v=f.length;for(let M=0;M<v;++M){const T=s.arrayToVector(f[M]),A=new Bv(d);d.vertices.push(A),A.pos=T,A.index=M}const _=d.vertices.length-1;for(let M=0;M<_;++M){const T=d.vertices[M],A=d.vertices[M+1],k=new Yu(d,T,A);d.edges.push(k)}l.components.push(d)}break;case"point":{const f=new K1(r,i),d=new Bv(f);d.index=0,d.pos=s.pointToVector(t),f.vertices.push(d),l.components.push(f);break}}return l}}var Xu;(function(e){e[e.NEW_STEP=0]="NEW_STEP",e[e.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Xu||(Xu={}));class SSe{constructor(t,i,r){this._editGeometry=t,this._component=i,this._pos=r,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let t="redo";ae(this._addedVertex)&&(t="apply",this._addedVertex=new Bv(this._component));const i=this._component.getLastVertex();if(ae(i))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let r=null;i.rightEdge&&(this._originalEdge=i.rightEdge,r=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,ae(this._left)&&(this._left=new Yu(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,q(this._originalEdge)&&q(r)&&(ae(this._right)&&(this._right=new Yu(this._component,this._addedVertex,r)),this._component.edges.push(this._right),r.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:t,addedVertices:[this._addedVertex]})}undo(){ae(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),q(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),q(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),q(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),q(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}class jT{constructor(t,i,r){this._editGeometry=t,this._vertices=i,this.operation=r,this._undone=!1}apply(){this._vertices.forEach(t=>this.operation.apply(t)),this._editGeometry.components.forEach(t=>t.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(t=>this.operation.undo(t)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(t){if(this._undone||t._vertices.length!==this._vertices.length)return!1;for(let i=0;i<t._vertices.length;++i)if(t._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(t.operation)}accumulate(t){return!!(t instanceof jT&&this.canAccumulate(t))&&(this._vertices.forEach(i=>this.operation.accumulate(i,t.operation)),this.operation.accumulateParams(t.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}var jl;(function(e){e[e.CUMULATIVE=0]="CUMULATIVE",e[e.REPLACE=1]="REPLACE"})(jl||(jl={}));class MSe{constructor(t,i,r=0){this._editGeometry=t,this._vertices=i,this._minNumberOfVertices=r,this.removedVertices=null}apply(){let t="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(r=>{const s=this._removeVertex(r);q(s)&&i.push(s)}),t="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:t,removedVertices:this._vertices})}undo(){var t;(t=this.removedVertices)==null||t.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(t){const i=t.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const r={removedVertex:t,createdEdge:null},s=t.leftEdge,l=t.rightEdge;return i.vertices.splice(i.vertices.indexOf(t),1),s&&(i.edges.splice(i.edges.indexOf(s),1),s.leftVertex.rightEdge=null),l&&(i.edges.splice(i.edges.indexOf(l),1),l.rightVertex.leftEdge=null),t.index===0&&l&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(l.rightVertex),0),s&&l&&(r.createdEdge=new Yu(i,s.leftVertex,l.rightVertex),i.edges.push(r.createdEdge)),l&&i.updateVertexIndex(l.rightVertex,l.rightVertex.index-1),r}_undoRemoveVertex(t){const i=t.removedVertex,r=t.removedVertex.component,s=i.leftEdge,l=i.rightEdge;t.createdEdge&&r.edges.splice(r.edges.indexOf(t.createdEdge),1),r.vertices.push(i),s&&(r.edges.push(s),s.leftVertex.rightEdge=s),l&&(r.edges.push(l),l.rightVertex.leftEdge=l),r.updateVertexIndex(i,i.index)}}class $Se{constructor(t,i,r){this._editGeometry=t,this._edge=i,this._t=r,this.createdVertex=null,this._left=null,this._right=null}apply(){let t="redo";const i=this._edge,r=i.component,s=i.leftVertex,l=i.rightVertex;r.edges.splice(r.edges.indexOf(i),1),ae(this.createdVertex)&&(t="apply",this.createdVertex=new Bv(i.component)),r.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),ae(this._left)&&(this._left=new Yu(r,s,this.createdVertex)),this._left.leftVertex.leftEdge?r.edges.push(this._left):r.edges.unshift(this._left),s.rightEdge=this._left,ae(this._right)&&(this._right=new Yu(r,this.createdVertex,l)),r.edges.push(this._right),l.leftEdge=this._right,r.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:t,addedVertices:[this.createdVertex]})}undo(){if(ae(this.createdVertex)||ae(this._left)||ae(this._right))return null;const t=this._edge,i=t.component,r=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,l=r==null?void 0:r.leftVertex,f=s==null?void 0:s.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),l&&(l.rightEdge=t),f&&(f.leftEdge=t),l&&i.updateVertexIndex(l,l.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class DT{constructor(t,i,r){this._editGeometry=t,this._vertex=i,this._pos=r}apply(){const t=ae(this._originalPosition);t&&(this._originalPosition=this._vertex.pos),this._apply(t?"apply":"redo")}undo(){this._vertex.pos=Jt(this._originalPosition),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(t){return t instanceof DT&&t._vertex===this._vertex&&(this._pos=t._pos,this._apply("apply"),!0)}_apply(t){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:t,updatedVertices:[this._vertex]})}}class ISe{constructor(t,i){this._editGeometry=t,this._component=i,this._createdEdge=null}apply(){let t="redo";if(ae(this._createdEdge)){t="apply";const i=this._component.getFirstVertex(),r=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||ae(i)||ae(r))return;this._createdEdge=new Yu(this._component,r,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:t})}undo(){ae(this._createdEdge)||(rO(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class VT{constructor(t,i,r,s){this._helper=t,this.dx=i,this.dy=r,this.dz=s}_move(t,i,r,s){this._helper.addDelta(t.pos,i,r,s)}apply(t){this._move(t,this.dx,this.dy,this.dz)}undo(t){this._move(t,-this.dx,-this.dy,-this.dz)}canAccumulate(t){return t instanceof VT}accumulate(t,i){this._move(t,i.dx,i.dy,i.dz)}accumulateParams(t){this.dx+=t.dx,this.dy+=t.dy,this.dz+=t.dz}}var Qu;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Qu||(Qu={}));class TSe{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&zf(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*lJ);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,lJ));t++)this._items.push(this._allocator())}}const lJ=1024;function uJ(){return[1,0,0,0,1,0,0,0,1]}function ESe(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function CSe(e,t,i,r,s,l,f,d,v){return[e,t,i,r,s,l,f,d,v]}function cJ(e,t){return new Float64Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:uJ,clone:ESe,fromValues:CSe,createView:cJ},Symbol.toStringTag,{value:"Module"}));function hJ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ASe(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function PSe(e,t,i,r,s,l,f,d,v,_,M,T,A,k,F,D){return[e,t,i,r,s,l,f,d,v,_,M,T,A,k,F,D]}function pJ(e,t){return new Float64Array(e,t,16)}const OSe=hJ();Object.freeze(Object.defineProperty({__proto__:null,create:hJ,clone:ASe,fromValues:PSe,createView:pJ,IDENTITY:OSe},Symbol.toStringTag,{value:"Module"}));function X1(){return[0,0,0,1]}function kSe(e){return[e[0],e[1],e[2],e[3]]}function RSe(e,t,i,r){return[e,t,i,r]}function dJ(e,t){return new Float64Array(e,t,4)}const FSe=X1();Object.freeze(Object.defineProperty({__proto__:null,create:X1,clone:kSe,fromValues:RSe,createView:dJ,IDENTITY:FSe},Symbol.toStringTag,{value:"Module"}));class vo{constructor(t,i,r){this._itemByteSize=t,this._itemCreate=i,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this._itemByteSize)}get(){this._itemsPtr===0&&zf(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const i=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let r=0;r<this._itemsPerBuffer;++r)this._items.push(this._itemCreate(i,r*this._itemByteSize));this._buffers.push(i)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=Q1){return new vo(16,mB,t)}static createVec3f64(t=Q1){return new vo(24,FR,t)}static createVec4f64(t=Q1){return new vo(32,Kz,t)}static createMat3f64(t=Q1){return new vo(72,cJ,t)}static createMat4f64(t=Q1){return new vo(128,pJ,t)}static createQuatf64(t=Q1){return new vo(32,dJ,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const Q1=4*Mm.KILOBYTES,YPe=vo.createVec2f64(),Mn=vo.createVec3f64(),LSe=vo.createVec4f64();vo.createMat3f64();const NSe=vo.createMat4f64(),XPe=vo.createQuatf64();function jx(e){return e?fJ(zc(e.origin),zc(e.direction)):fJ(et(),et())}function fJ(e,t){return{origin:e,direction:t}}function QPe(e,t){const i=VSe.get();return i.origin=e,i.direction=t,i}function eOe(e,t=jx()){return jSe(e.origin,e.direction,t)}function tOe(e,t,i=jx()){return Is(i.origin,e),Xr(i.direction,t,e),i}function jSe(e,t,i=jx()){return Is(i.origin,e),Is(i.direction,t),i}function iOe(e,t){const i=Qr(Mn.get(),Tn(Mn.get(),e.direction),Xr(Mn.get(),t,e.origin));return pi(i,i)}function DSe(e,t,i){const r=pi(e.direction,Xr(i,t,e.origin));return Qs(i,e.origin,eo(i,e.direction,r)),i}const VSe=new TSe(()=>jx());function rOe(e,t,i){const r=pi(e,t)/pi(e,e);return eo(i,e,r)}function Hv(e,t){return pi(e,t)/ko(e)}function yJ(e,t){const i=pi(e,t)/(ko(e)*ko(t));return-JS(i)}function nOe(e,t,i){Tn(Dx,e),Tn(zT,t);const r=pi(Dx,zT),s=JS(r),l=Qr(Dx,Dx,zT);return pi(l,i)<0?2*Math.PI-s:s}const Dx=et(),zT=et();function GT(){return l1()}function gJ(e,t=GT()){return v2(t,e)}function zSe(e,t){return Ca(e[0],e[1],e[2],t)}function GSe(e){return e}function qSe(e){e[0]=e[1]=e[2]=e[3]=0}function USe(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e}function Vx(e){return e[3]}function ec(e){return e}function BSe(e,t,i,r){return Ca(e,t,i,r)}function HSe(e,t,i){return e!==i&&Is(i,e),i[3]=e[3]+t,i}function WSe(e,t,i){return Pe.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e===i?i:gJ(e,i)}function zx(e,t,i){if(ae(t))return!1;const{origin:r,direction:s}=t,l=JSe;l[0]=r[0]-e[0],l[1]=r[1]-e[1],l[2]=r[2]-e[2];const f=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(f===0)return!1;const d=2*(s[0]*l[0]+s[1]*l[1]+s[2]*l[2]),v=d*d-4*f*(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]-e[3]*e[3]);if(v<0)return!1;const _=Math.sqrt(v);let M=(-d-_)/(2*f);const T=(-d+_)/(2*f);return(M<0||T<M&&T>0)&&(M=T),!(M<0)&&(i&&(i[0]=r[0]+s[0]*M,i[1]=r[1]+s[1]*M,i[2]=r[2]+s[2]*M),!0)}const JSe=et();function ZSe(e,t){return zx(e,t,null)}function KSe(e,t,i){if(zx(e,t,i))return i;const r=mJ(e,t,Mn.get());return Qs(i,t.origin,eo(Mn.get(),t.direction,u0(t.origin,r)/ko(t.direction))),i}function mJ(e,t,i){const r=Mn.get(),s=NSe.get();Qr(r,t.origin,t.direction);const l=Vx(e);Qr(i,r,t.origin),eo(i,i,1/ko(i)*l);const f=bJ(e,t.origin),d=yJ(t.origin,i);return IN(s,d+f,r),BR(i,i,s),i}function YSe(e,t,i){return zx(e,t,i)?i:(DSe(t,ec(e),i),vJ(e,i,i))}function vJ(e,t,i){const r=Xr(Mn.get(),t,ec(e)),s=eo(Mn.get(),r,e[3]/ko(r));return Qs(i,s,ec(e))}function XSe(e,t){const i=Xr(Mn.get(),t,ec(e)),r=VS(i),s=e[3]*e[3];return Math.sqrt(Math.abs(r-s))}function bJ(e,t){const i=Xr(Mn.get(),t,ec(e)),r=ko(i),s=Vx(e),l=s+Math.abs(s-r);return JS(s/l)}const qT=et();function wJ(e,t,i,r){const s=Xr(qT,t,ec(e));switch(i){case Qu.X:{const l=aF(s,qT)[2];return jr(r,-Math.sin(l),Math.cos(l),0)}case Qu.Y:{const l=aF(s,qT),f=l[1],d=l[2],v=Math.sin(f);return jr(r,-v*Math.cos(d),-v*Math.sin(d),Math.cos(f))}case Qu.Z:return Tn(r,s);default:return}}function _J(e,t){const i=Xr(UT,t,ec(e));return ko(i)-e[3]}function QSe(e,t,i,r){const s=_J(e,t),l=wJ(e,t,Qu.Z,UT),f=eo(UT,l,i-s);return Qs(r,t,f)}function e6e(e,t){const i=Gc(ec(e),t),r=Vx(e);return i<=r*r}const UT=et(),t6e=GT();Object.freeze(Object.defineProperty({__proto__:null,create:GT,copy:gJ,fromCenterAndRadius:zSe,wrap:GSe,clear:qSe,fromRadius:USe,getRadius:Vx,getCenter:ec,fromValues:BSe,elevate:HSe,setExtent:WSe,intersectRay:zx,intersectsRay:ZSe,intersectRayClosestSilhouette:KSe,closestPointOnSilhouette:mJ,closestPoint:YSe,projectPoint:vJ,distanceToSilhouette:XSe,angleToSilhouette:bJ,axisAt:wJ,altitudeAt:_J,setAltitudeAt:QSe,containsPoint:e6e,tmpSphere:t6e},Symbol.toStringTag,{value:"Module"}));function sOe(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],i=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}function oOe(e,t){const i=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),r=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),s=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return jr(e,i,r,s),e}function i6e(e,t,i){Math.abs(e[0])>Math.abs(e[1])?jr(t,0,1,0):jr(t,1,0,0),Qr(i,e,t),Tn(t,t),Qr(t,i,e),Tn(i,i)}function Gx(e=Jv){return[e[0],e[1],e[2],e[3]]}function aOe(e=Jv[0],t=Jv[1],i=Jv[2],r=Jv[3]){return xJ(e,t,i,r,LSe.get())}function qx(e,t){return xJ(t[0],t[1],t[2],t[3],e)}function xJ(e,t,i,r,s=Gx()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function SJ(e,t,i){const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=-(i[0]*e[0]+i[1]*e[1]+i[2]*e[2]),i}function r6e(e,t,i,r=Gx()){const s=i[0]-t[0],l=i[1]-t[1],f=i[2]-t[2],d=e[0]-t[0],v=e[1]-t[1],_=e[2]-t[2],M=l*_-f*v,T=f*d-s*_,A=s*v-l*d,k=M*M+T*T+A*A,F=Math.abs(k-1)>1e-5&&k>1e-12?1/Math.sqrt(k):1;return r[0]=M*F,r[1]=T*F,r[2]=A*F,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function n6e(e,t,i,r,s){if(e.count<3)return!1;e.getVec(i,Wv);let l=r,f=!1;for(;l<e.count-1&&!f;)e.getVec(l,ey),l++,f=!f2(Wv,ey);if(!f)return!1;for(l=Math.max(l,s),f=!1;l<e.count&&!f;)e.getVec(l,ef),l++,Xr(Ux,Wv,ey),Tn(Ux,Ux),Xr(Bx,ey,ef),Tn(Bx,Bx),f=!f2(Wv,ef)&&!f2(ey,ef)&&Math.abs(pi(Ux,Bx))<s6e;return f?(r6e(Wv,ey,ef,t),!0):(i!==0||r!==1||s!==2)&&n6e(e,t,0,1,2)}const s6e=.99619469809,Wv=et(),ey=et(),ef=et(),Ux=et(),Bx=et();function lOe(e,t,i){return t!==e&&qx(e,t),e[3]=-pi(Qo(e),i),e}function uOe(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cOe(e,t,i,r){return Qr(ef,t,e),SJ(i,ef,r)}function o6e(e,t,i,r){return Hx(e,t,Xr(Mn.get(),i,t),u6e,r)}function hOe(e,t,i){return!!q(t)&&Hx(e,t.origin,t.direction,c6e,i)}function pOe(e,t,i){return Hx(e,t.origin,t.vector,Dl.NONE,i)}function dOe(e,t,i){return Hx(e,t.origin,t.vector,Dl.CLAMP,i)}function a6e(e,t){return ty(e,t)>=0}function fOe(e,t){const i=pi(Qo(e),t.ray.direction),r=-ty(e,t.ray.origin);if(i>-1e-6&&i<1e-6)return r>0;const s=r/i;return i>0?s<t.c1&&(t.c1=s):s>t.c0&&(t.c0=s),t.c0<=t.c1}function yOe(e,t,i){const r=eo(Mn.get(),Qo(e),-e[3]),s=l6e(e,Xr(Mn.get(),t,r),Mn.get());return Qs(i,s,r),i}function gOe(e,t,i,r){const s=Qo(e),l=Mn.get(),f=Mn.get();i6e(s,l,f);const d=Xr(Mn.get(),i,t),v=Hv(l,d),_=Hv(f,d),M=Hv(s,d);return jr(r,v,_,M)}function l6e(e,t,i){const r=eo(Mn.get(),Qo(e),pi(Qo(e),t));return Xr(i,t,r),i}function ty(e,t){return pi(Qo(e),t)+e[3]}function Hx(e,t,i,r,s){const l=pi(Qo(e),i);if(l===0)return!1;let f=-(pi(Qo(e),t)+e[3])/l;return r&Dl.CLAMP&&(f=Cn(f,0,1)),!(!(r&Dl.INFINITE_MIN)&&f<0||!(r&Dl.INFINITE_MAX)&&f>1)&&(Qs(s,t,eo(s,i,f)),!0)}function Qo(e){return e}const Jv=[0,0,1,0];var Dl;(function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.INFINITE_MIN=4]="INFINITE_MIN",e[e.INFINITE_MAX=8]="INFINITE_MAX"})(Dl||(Dl={}));const u6e=Dl.INFINITE_MIN|Dl.INFINITE_MAX,c6e=Dl.INFINITE_MAX;function BT(e,t){return e[0]*t[1]-e[1]*t[0]}function h6e(e,t,i){const r=zu(i,t)/jh(i);return E1(e,i,r)}function HT(e,t,i,r,s=i){return ur(iy,r,i),ur(WT,t,s),h6e(Wx,WT,iy),z8(e,s,Wx)}function p6e(e,t,i,r){ur(iy,t,i);const s=r/Ev(iy);return Ra(e,i,iy,s)}function d6e(e,t){const i=e.start,r=e.end,s=t.start,l=t.end,f=ur(iy,r,i),d=ur(y6e,l,s),v=BT(f,d);if(Math.abs(v)<=f6e)return[];const _=ur(WT,i,s),M=BT(d,_)/v,T=BT(f,_)/v;if(M>=0){if(T>=0||t.type===hr.LINE)return[Ra(Wx,i,f,M)]}else if(e.type===hr.LINE&&(T>=0||t.type===hr.LINE))return[Ra(Wx,i,f,M)];return[]}var hr;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(hr||(hr={}));const f6e=1e-6,iy=Wt(),y6e=Wt(),WT=Wt(),Wx=Wt();class Jx{constructor(t,i,r,s=0,l=Zv.IMMEDIATE){this._helper=t,this._planeType=i,this._edge=r,this.distance=s,this._plane=Gx(),this._offsetPlane=Gx(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,l===Zv.IMMEDIATE&&this._initialize()}get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var l,f,d,v;const t=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((f=(l=this._edge.leftVertex.leftEdge)==null?void 0:l.leftVertex)==null?void 0:f.pos),r=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ((v=(d=this._edge.rightVertex.rightEdge)==null?void 0:d.rightVertex)==null?void 0:v.pos);this._edgeDirection=qS(et(),t,r),this._left=this._computeNeighbor(t,i,this._edgeDirection),this._right=this._computeNeighbor(r,s,this._edgeDirection)}_toXYZ(t){return q(t)?this._helper.toXYZ(t):null}_pointToXYZ(t){return this._toXYZ(this._helper.pointToVector(t))}_computeNeighbor(t,i,r){if(ae(i))return{start:t,end:i,direction:Ar(-r[1],r[0],0),isOriginalDirection:!0};const s=qS(et(),t,i),l=!this._passesBisectingAngleThreshold(s,r);return{start:t,end:i,direction:l?this._bisectVectorsPerpendicular(r,s):s,isOriginalDirection:!l}}_passesBisectingAngleThreshold(t,i){const r=Math.abs(yJ(i,t));return r>=MJ&&r<=Math.PI-MJ}_bisectVectorsPerpendicular(t,i){const r=pi(t,i)<0?t:zS(et(),t),s=Math.abs(pi(r,i));if(!(s<$J||s>1-$J))return this._bisectDirection(r,i);const l=Qr(et(),r,[0,0,1]);return Tn(l,l)}_bisectDirection(t,i){const r=Qs(et(),t,i);return Tn(r,r)}_initializePlane(){const t=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);pi(t,i)<0&&zS(i,i),SJ(this._left.start,this._bisectDirection(t,i),this._plane)}_computeNormalDirection(t){const i=Qr(et(),t.direction,this._edgeDirection);Tn(i,i);const r=Qr(et(),this._edgeDirection,i);return this._planeType===JT.XY&&(r[2]=0),Tn(r,r)}_initializeDistanceConstraints(){q(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(ty(this._plane,this._left.end)),q(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(ty(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(t){t<=0&&(this._minDistance=Math.max(this._minDistance,t)),t>=0&&(this._maxDistance=Math.min(this._maxDistance,t))}_updateIntersectDistanceConstraint(t){const i=Qo(t),r=this._edgeDirection,s=Qs(et(),this._left.start,this._left.direction),l=Qs(et(),this._right.start,this._right.direction),f=this._pointInBasis2D(Wt(),i,r,this._left.start),d=this._pointInBasis2D(Wt(),i,r,s),v=this._pointInBasis2D(Wt(),i,r,this._right.start),_=this._pointInBasis2D(Wt(),i,r,l),[M]=d6e({start:d,end:f,type:hr.LINE},{start:_,end:v,type:hr.LINE});if(!M)return;const T=ur(Wt(),f,d);ux(T,T);const A=ur(Wt(),M,d),k=zu(T,A),F=Qs(et(),s,eo(et(),this._left.direction,-k)),D=ty(t,F);this._updateDistanceConstraint(D)}_pointInBasis2D(t,i,r,s){return t[0]=Hv(i,s),t[1]=Hv(r,s),t}_offset(t,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),qx(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const r=(l,f,d)=>q(f)&&o6e(this._offsetPlane,l,Qs(et(),l,f),d),s=et();(t===this._edge.leftVertex?r(this._left.start,this._left.direction,s):r(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(t.pos)),t.pos)}selectArrowFromStartPoint(t){this._selectedArrow=a6e(this.plane,this._pointToXYZ(t))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(t){return ty(this.plane,this._pointToXYZ(t))}apply(t){this._offset(t,this.distance)}undo(t){this._offset(t,0)}canAccumulate(t){return t instanceof Jx&&this._edge.leftVertex.index===t._edge.leftVertex.index&&this._edge.rightVertex.index===t._edge.rightVertex.index&&this._edge.component===t._edge.component&&this._maybeEqualsVec3(this._left.direction,t._left.direction)&&this._maybeEqualsVec3(this._right.direction,t._right.direction)&&y2(Qo(this._plane),Qo(t._plane))}accumulate(t,i){const r=this._plane[3]-i._plane[3]+i.distance;this._offset(t,r)}accumulateParams(t){const i=t.distance-t._plane[3];this.distance=i+this._plane[3]}clone(){const t=new Jx(this._helper,this._planeType,this._edge,this.distance,Zv.DEFERRED);return qx(t._plane,this._plane),qx(t._offsetPlane,this._offsetPlane),t._maxDistance=this._maxDistance,t._minDistance=this._minDistance,t._left=this._cloneNeighbor(this._left),t._right=this._cloneNeighbor(this._right),t._edgeDirection=Is(et(),this._edgeDirection),t}_maybeEqualsVec3(t,i){return ae(t)&&ae(i)||q(t)&&q(i)&&y2(t,i)}_cloneNeighbor({start:t,end:i,direction:r,isOriginalDirection:s}){return{start:Is(et(),t),end:q(i)?Is(et(),i):null,direction:Is(et(),r),isOriginalDirection:s}}}const MJ=nF(15),$J=.001;var JT,Zv;(function(e){e[e.XYZ=0]="XYZ",e[e.XY=1]="XY"})(JT||(JT={})),function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.DEFERRED=1]="DEFERRED"}(Zv||(Zv={}));class ZT{constructor(t,i,r=jl.CUMULATIVE){this.origin=t,this.angle=i,this._accumulationType=r}_rotate(t,i){fB(t.pos,t.pos,this.origin,i)}apply(t){this._rotate(t,this.angle)}undo(t){this._rotate(t,-this.angle)}canAccumulate(t){return t instanceof ZT&&Tc(this.origin,t.origin)}accumulate(t,i){const r=i._accumulationType===jl.REPLACE;this._rotate(t,r?i.angle-this.angle:i.angle)}accumulateParams(t){const i=t._accumulationType===jl.REPLACE;this.angle=i?t.angle:this.angle+t.angle}}class KT{constructor(t,i,r,s,l=jl.CUMULATIVE){this.origin=t,this.axis1=i,this.factor1=r,this.factor2=s,this._accumulationType=l,this.axis2=Gu(i[1],-i[0])}_scale(t,i,r){U8(t.pos,t.pos,this.origin,this.axis1,i),U8(t.pos,t.pos,this.origin,this.axis2,r)}apply(t){this._scale(t,this.factor1,this.factor2)}undo(t){this._scale(t,1/this.factor1,1/this.factor2)}canAccumulate(t){return t instanceof KT&&Tc(this.origin,t.origin)&&Tc(this.axis1,t.axis1)}accumulate(t,i){i._accumulationType===jl.REPLACE?this._scale(t,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(t,i.factor1,i.factor2)}accumulateParams(t){const i=t._accumulationType===jl.REPLACE;this.factor1=i?t.factor1:this.factor1*t.factor1,this.factor2=i?t.factor2:this.factor2*t.factor2}}class g6e{constructor(){this._operations=[],this._closed=!1}close(){this._closed=!0}apply(){for(const t of this._operations)t.apply()}undo(){for(let t=this._operations.length-1;t>=0;t--)this._operations[t].undo()}accumulate(t){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(t)||(this._operations.push(t),t.apply()),!0}}class Kv extends yn{constructor(t){super(),this.data=t,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",i=>{i.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:i.addedVertices,operation:i.operation}),i.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:i.removedVertices,operation:i.operation}),i.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:i.updatedVertices,operation:i.operation})})}destroy(){this._listener.remove()}splitEdge(t,i){return this._apply(new $Se(this.data,t,i))}updateVertices(t,i,r=Xu.ACCUMULATE_STEPS){return this._apply(new jT(this.data,t,i),r)}moveVertices(t,i,r,s,l=Xu.ACCUMULATE_STEPS){return this.updateVertices(t,new VT(this.data.coordinateHelper,i,r,s),l)}scaleVertices(t,i,r,s,l,f=Xu.ACCUMULATE_STEPS,d=jl.CUMULATIVE){return this.updateVertices(t,new KT(i,r,s,l,d),f)}rotateVertices(t,i,r,s=Xu.ACCUMULATE_STEPS,l=jl.CUMULATIVE){return this.updateVertices(t,new ZT(i,r,l),s)}removeVertices(t){return this._apply(new MSe(this.data,t,this._minNumVerticesPerType))}appendVertex(t){return this.data.components.length===0?null:this._apply(new SSe(this.data,this.data.components[0],t))}setVertexPosition(t,i){return this._apply(new DT(this.data,t,i))}offsetEdge(t,i,r,s=Xu.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new Jx(this.data.coordinateHelper,t,i,r),s)}closeComponent(t){return this.data.components.includes(t)?this._apply(new ISe(this.data,t)):null}canRemoveVertex(){return this.data.components[0].vertices.length>this._minNumVerticesPerType}createUndoGroup(){const t=new g6e;return this._apply(t),{remove:()=>t.close()}}undo(){if(this._undoStack.length>0){const t=this._undoStack.pop();return t.undo(),this._redoStack.push(t),t}return null}redo(){if(this._redoStack.length>0){const t=this._redoStack.pop();return t.apply(),this._undoStack.push(t),t}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(t,i=Xu.ACCUMULATE_STEPS){return i!==Xu.NEW_STEP&&!ae(this.lastOperation)&&this.lastOperation.accumulate(t)||(t.apply(),this._undoStack.push(t),this._redoStack=[]),t}static fromGeometry(t,i){return new Kv(Y1.fromGeometry(t,i))}}class Zx{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}}let Jh=class extends ot{constructor(e){super(e),this.constrainResult=t=>t,this._snapPoints=null,this._abortController=null,this._stagedPoint=null,this._snap=Cw(async(t,i,r,s)=>{const l=await this._frameTask.schedule(()=>i.snap(je(te({},t),{context:r,signal:s})),s);l.valid&&await this._frameTask.schedule(()=>{this.stagedPoint=l.apply(),t!==this._snapPoints&&q(this._snapPoints)&&(this.stagedPoint=i.update(je(te({},this._snapPoints),{context:r})))},s)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var t,i;const e=this.view.type==="3d"?(i=(t=this.view)==null?void 0:t.resourceController)==null?void 0:i.scheduler:null;this._frameTask=q(e)?e.registerTask(Yt.SNAPPING):$v}destroy(){this._abortController=Za(this._abortController),this._frameTask=Er(this._frameTask)}async snap(e,t,i){const{point:r,scenePoint:s}=e;return this.stagedPoint=t.update({point:r,scenePoint:s,context:i}),this._snapPoints=e,ae(this._abortController)&&(this._abortController=new AbortController),this._snap(e,t,i,this._abortController.signal)}abort(){this._abortController=Za(this._abortController)}};m([x({constructOnly:!0})],Jh.prototype,"view",void 0),m([x()],Jh.prototype,"stagedPoint",null),m([x()],Jh.prototype,"constrainResult",void 0),m([x()],Jh.prototype,"_stagedPoint",void 0),Jh=m([X("esri.views.interactive.snapping.SnappingOperation")],Jh);var YT;let bs=YT=class extends yn.EventedAccessor{constructor(e){var t;super(e),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new Jr,this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=NT(e.hasZ,!1,e.view.spatialReference),this._snappingManager=e.snappingManager,this._editGeometryOperations=new Kv(new Y1((t=e.editGeometryType)!=null?t:"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new BH({id:YT.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new Zx({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new cSe(this._snappingGraphicsLayer)}),this._activeComponent=new K1(e.view.spatialReference,Du.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(e){const t=te({},e);return delete t.editGeometryType,t}initialize(){this._snappingOperation=new Jh({view:this.view}),this.view.type==="2d"&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=oi(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map(e=>e.pos)}get vertices(){return q(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return q(this._hasZ)?this._hasZ:this.view.type==="3d"}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(e){this._snappingOperation.stagedPoint=ve(e)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(e){const t=this.screenToMap(e);return ae(t)?null:t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return ae(t)?null:t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}}screenToMap(e){let t=null;if(this.view.type==="3d")if(this.hasZ){const i=pn(this.elevationInfo,m6e);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Og(e.x,e.y),i,this._getGeometryZValue())}else{const i=pn(this.elevationInfo,v6e);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Og(e.x,e.y),i,0),q(t)&&(t.z=void 0)}else t=this.view.toMap(e),q(t)&&(t.z=this.hasZ?this._getGeometryZValue():void 0);return t}_pushCursorVertex(e,t){const i=Rx(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=i;const r=this._snappingManager;if(ae(r))return this._stagedVertex=i,void t();Ql(this._snappingOperation.snap({point:i},r,this._snappingContext)).then(()=>{t()})}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(e){const t=this._editGeometryOperations.data.components[0].getLastVertex();if(q(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:r}=this._coordinateHelper.vectorToDehydratedPoint(e);return!(!q(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||r!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(e){return this._isPrimaryPointerAction(e)&&(ae(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=q(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);q(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}_isPrimaryPointerAction(e){return e.pointerType!=="mouse"||e.button===0}};bs.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",m([x({readOnly:!0})],bs.prototype,"vertices",null),m([x({type:Boolean,nonNullable:!0})],bs.prototype,"interactiveUndoDisabled",void 0),m([x({readOnly:!0})],bs.prototype,"history",void 0),m([x({readOnly:!0})],bs.prototype,"redoHistory",void 0),m([x()],bs.prototype,"snapToScene",void 0),m([x()],bs.prototype,"view",void 0),m([x()],bs.prototype,"elevationInfo",void 0),m([x({nonNullable:!0})],bs.prototype,"defaultZ",void 0),m([x()],bs.prototype,"hasZ",null),m([x()],bs.prototype,"_snappingOperation",void 0),m([x()],bs.prototype,"_stagedVertex",null),bs=YT=m([X("esri.views.draw.DrawAction")],bs);const m6e={mode:"absolute-height",offset:0},v6e={mode:"on-the-ground",offset:0},Yv=bs;class Vl{constructor(t,i,r,s){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class XT{constructor(t,i,r,s){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class tc{constructor(t,i,r,s,l=null){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.mapPoint=l,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=s.length===1?s[0]:null}preventDefault(){this.defaultPrevented=!0}}class ic{constructor(t,i){this.native=t,this.vertices=i,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=i.length===1?i[0]:null}preventDefault(){this.defaultPrevented=!0}}const Tt={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};let QT=class extends Yv{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===Tt.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==Tt.complete||i?t!==Tt.undo||this.interactiveUndoDisabled||i?t!==Tt.redo||this.interactiveUndoDisabled||i?t!==Tt.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},rt.TOOL),this.view.on("key-up",e=>{e.key===Tt.pan&&e.stopPropagation()},rt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new XT(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new Vl(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new Vl(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new tc(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new ic(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};QT=m([X("esri.views.draw.MultipointDrawAction")],QT);const IJ=["freehand","hybrid","click"],Kx="click";class b6e{constructor({grabbableForEvent:t}){this.events=new yn,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,i){return 0}attach(){}detach(){}}function w6e(e){return"declaredClass"in e}function TJ(e){return"declaredClass"in e}function _6e(e){return"declaredClass"in e}function mOe(e,t){if(!e)return null;if(_6e(e))return e;const i=new Dr({layer:t,sourceLayer:t});return i.visible=e.visible,i.symbol=ve(e.symbol),i.attributes=ve(e.attributes),i.geometry=x6e(e.geometry),i}function x6e(e){return ae(e)?null:w6e(e)?e:fn(S6e(e))}function S6e(e){const{wkid:t,wkt:i,latestWkid:r}=e.spatialReference,s={wkid:t,wkt:i,latestWkid:r};switch(e.type){case"point":{const{x:l,y:f,z:d,m:v}=e;return{x:l,y:f,z:d,m:v,spatialReference:s}}case"polygon":{const{rings:l,hasZ:f,hasM:d}=e;return{rings:EJ(l),hasZ:f,hasM:d,spatialReference:s}}case"polyline":{const{paths:l,hasZ:f,hasM:d}=e;return{paths:EJ(l),hasZ:f,hasM:d,spatialReference:s}}case"extent":{const{xmin:l,xmax:f,ymin:d,ymax:v,zmin:_,zmax:M,mmin:T,mmax:A,hasZ:k,hasM:F}=e;return{xmin:l,xmax:f,ymin:d,ymax:v,zmin:_,zmax:M,mmin:T,mmax:A,hasZ:k,hasM:F,spatialReference:s}}case"multipoint":{const{points:l,hasZ:f,hasM:d}=e;return{points:AJ(l)?CJ(l):l,hasZ:f,hasM:d,spatialReference:s}}default:return}}function EJ(e){return M6e(e)?e.map(t=>CJ(t)):e}function CJ(e){return e.map(t=>pne(t))}function M6e(e){for(const t of e)if(t.length!==0)return AJ(t);return!1}function AJ(e){return e.length&&(nO(e[0])||sO(e[0]))}function eE(e,t){if(!e)return null;let i;if(TJ(e)){if(t==null)return e.clone();if(TJ(t))return t.copy(e)}return t!=null?(i=t,i.x=e.x,i.y=e.y,i.spatialReference=e.spatialReference,e.hasZ?(i.z=e.z,i.hasZ=e.hasZ):(i.z=null,i.hasZ=!1),e.hasM?(i.m=e.m,i.hasM=!0):(i.m=null,i.hasM=!1)):(i=Rx(e.x,e.y,e.z,e.spatialReference),e.hasM&&(i.m=e.m,i.hasM=!0)),i}function $6e(e){const{wkid:t,wkt:i,latestWkid:r}=e,s={wkid:t,wkt:i,latestWkid:r};return At.fromJSON(s)}function ry(e,t,i,r){if(r==null||e.hasZ||(r=void 0),e.type==="point")return e.x+=t,e.y+=i,e.hasZ&&r!=null&&(e.z+=r),e;if(e.type==="multipoint"){const f=e.points;for(let d=0;d<f.length;d++)f[d]=PJ(f[d],t,i,r);return e}if(e.type==="extent")return e.xmin+=t,e.xmax+=t,e.ymin+=i,e.ymax+=i,r!=null&&(e.zmin+=r,e.zmax+=r),e;const s=Yf(e),l=e.type==="polyline"?e.paths:e.rings;for(let f=0;f<s.length;f++){const d=s[f];for(let v=0;v<d.length;v++)d[v]=PJ(d[v],t,i,r)}return"paths"in e?e.paths=l:e.rings=l,e}function vOe(e,t,i,r,s){const l=e.clone(),f=r.resolution;if(l.type==="point"){if(s)ry(l,t*f,-i*f);else{const d=r.state.transform,v=r.state.inverseTransform,_=d[0]*l.x+d[2]*l.y+d[4],M=d[1]*l.x+d[3]*l.y+d[5];l.x=v[0]*(_+t)+v[2]*(M+i)+v[4],l.y=v[1]*(_+t)+v[3]*(M+i)+v[5]}return l}if(l.type==="multipoint"){if(s)ry(l,t*f,-i*f);else{const d=l.points,v=r.state.transform,_=r.state.inverseTransform;for(let M=0;M<d.length;M++){const T=d[M],A=v[0]*T[0]+v[2]*T[1]+v[4],k=v[1]*T[0]+v[3]*T[1]+v[5],F=_[0]*(A+t)+_[2]*(k+i)+_[4],D=_[1]*(A+t)+_[3]*(k+i)+_[5];d[M]=Xv(T,F,D,void 0)}}return l}if(l.type==="extent"){if(s)ry(l,t*f,-i*f);else{const d=r.state.transform,v=r.state.inverseTransform,_=d[0]*l.xmin+d[2]*l.ymin+d[4],M=d[1]*l.xmin+d[3]*l.ymin+d[5],T=d[0]*l.xmax+d[2]*l.ymax+d[4],A=d[1]*l.xmax+d[3]*l.ymax+d[5];l.xmin=v[0]*(_+t)+v[2]*(M+i)+v[4],l.ymin=v[1]*(_+t)+v[3]*(M+i)+v[5],l.xmax=v[0]*(T+t)+v[2]*(A+i)+v[4],l.ymax=v[1]*(T+t)+v[3]*(A+i)+v[5]}return l}if(s)ry(l,t*f,-i*f);else{const d=Yf(l),v=l.type==="polyline"?l.paths:l.rings,_=r.state.transform,M=r.state.inverseTransform;for(let T=0;T<d.length;T++){const A=d[T];for(let k=0;k<A.length;k++){const F=A[k],D=_[0]*F[0]+_[2]*F[1]+_[4],z=_[1]*F[0]+_[3]*F[1]+_[5],H=M[0]*(D+t)+M[2]*(z+i)+M[4],J=M[1]*(D+t)+M[3]*(z+i)+M[5];A[k]=Xv(F,H,J,void 0)}}"paths"in l?l.paths=v:l.rings=v}return l}function bOe(e,t,i,r){if(e.type==="point"){const{x:F,y:D}=e,z=r?r[0]:F,H=r?r[1]:D,J=e.clone(),Y=(F-z)*t+z,ie=(D-H)*i+H;return J.x=Y,J.y=ie,J}if(e.type==="multipoint"){const F=Yf(e),D=Fo(),[z,H,J,Y]=Fc(D,[F]),ie=r?r[0]:(z+J)/2,re=r?r[1]:(Y+H)/2,ee=e.clone(),le=ee.points;for(let me=0;me<le.length;me++){const we=le[me],[_e,Me]=we,Se=(_e-ie)*t+ie,He=(Me-re)*i+re;le[me]=Xv(we,Se,He,void 0)}return ee}if(e.type==="extent"){const{xmin:F,xmax:D,ymin:z,ymax:H}=e,J=r?r[0]:(F+D)/2,Y=r?r[1]:(H+z)/2,ie=e.clone();if(ie.xmin=(F-J)*t+J,ie.ymax=(H-Y)*i+Y,ie.xmax=(D-J)*t+J,ie.ymin=(z-Y)*i+Y,ie.xmin>ie.xmax){const re=ie.xmin,ee=ie.xmax;ie.xmin=ee,ie.xmax=re}if(ie.ymin>ie.ymax){const re=ie.ymin,ee=ie.ymax;ie.ymin=ee,ie.ymax=re}return ie}const s=Yf(e),l=Fo(),[f,d,v,_]=Fc(l,s),M=r?r[0]:(f+v)/2,T=r?r[1]:(_+d)/2,A=e.clone(),k=A.type==="polyline"?A.paths:A.rings;for(let F=0;F<s.length;F++){const D=s[F];for(let z=0;z<D.length;z++){const H=D[z],[J,Y]=H,ie=(J-M)*t+M,re=(Y-T)*i+T;k[F][z]=Xv(H,ie,re,void 0)}}return"paths"in A?A.paths=k:A.rings=k,A}function wOe(e,t,i,r,s,l){const f=Math.sqrt((i-e)*(i-e)+(r-t)*(r-t));return Math.sqrt((s-e)*(s-e)+(l-t)*(l-t))/f}function _Oe(e,t,i){const r=Math.atan2(t.y-i.y,t.x-i.x)-Math.atan2(e.y-i.y,e.x-i.x),s=Math.atan2(Math.sin(r),Math.cos(r));return WS(s)}function PJ(e,t,i,r){return Xv(e,e[0]+t,e[1]+i,e[2]!=null&&r!=null?e[2]+r:void 0)}function Xv(e,t,i,r){const s=[t,i];return e.length>2&&s.push(r!=null?r:e[2]),e.length>3&&s.push(e[3]),s}function I6e(e,t){let i=null,r=null;return s=>{if(s.action==="cancel")return void(q(r)&&(r.execute({action:"cancel"}),i=null,r=null));const l={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&ae(i)&&(i=new ny,r=new ny,t(e,i,r,s.pointerType,l)),q(i)&&i.execute(l),s.action==="end"&&q(i)&&(i=null,r=null)}}function tE(e,t){return e.events.on("drag",I6e(e,t))}function xOe(e,t){const i=[e.x,e.y,e.z],r=t,s=[Math.cos(r),Math.sin(r)],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(l===0)return null;s[0]/=l,s[1]/=l;const f=d=>{const v=(d.x-i[0])*s[0]+(d.y-i[1])*s[1];d.x=i[0]+v*s[0],d.y=i[1]+v*s[1]};return d=>(f(d.mapStart),f(d.mapEnd),je(te({},d),{axis:s}))}function T6e(e,t){let i=null;return r=>{if(r.action==="start"&&(i=E6e(e,r.mapStart.spatialReference,t)),ae(i))return null;const s=r.mapEnd.x-r.mapStart.x,l=r.mapEnd.y-r.mapStart.y,f=r.mapEnd.z-r.mapStart.z;return i.move(s,l,f),je(te({},r),{translationX:s,translationY:l,translationZ:f})}}function OJ(e,t){return ae(e)?null:e.spatialReference.equals(t)?e.clone():Vo(e,t)}function E6e(e,t,i){const r=e.geometry,s=$6e(t);if(ae(r))return null;if(r.type==="mesh")return C6e(e,r,s,i);const l=OJ(r,s),f=r.spatialReference;return ae(l)?null:{move:(d,v,_)=>{const M=ry(l.clone(),d,v,_);M.spatialReference.equals(f)?e.geometry=M:e.geometry=Vo(M,f)}}}function C6e(e,t,i,r){if(q(t.transform))return A6e(e,t,t.transform,i);if(!t.spatialReference.equals(i))return null;let s=0,l=0,f=0;return{move:(d,v,_)=>{const M=d-s,T=v-l,A=_-f;if(M||T||A){const k=new dt(t.origin.x+M,t.origin.y+T,t.origin.z+A,t.origin.spatialReference);t.centerAt(k,{geographic:r===Du.Global}),e.notifyGeometryChanged(),s=d,l=v,f=_}}}}function A6e(e,t,i,r){const s=OJ(i.getOriginPoint(t.spatialReference),r),l=t.spatialReference;return ae(s)?null:{move:(f,d,v)=>{const _=ry(s.clone(),f,d,v);if(_.spatialReference.equals(l))i.origin=Ar(_.x,_.y,_.z);else{const M=Vo(_,l);q(M)&&(i.origin=Ar(M.x,M.y,M.z))}e.notifyMeshTransformChanged(),e.notifyGeometryChanged()}}}function SOe(e,t){const i=e.map(r=>Jt(T6e(r,t))).filter(r=>q(r));return r=>{const s=r.mapEnd.x-r.mapStart.x,l=r.mapEnd.y-r.mapStart.y,f=r.mapEnd.z-r.mapStart.z;return i.forEach(d=>d(r)),je(te({},r),{translationX:s,translationY:l,translationZ:f})}}function P6e(e,t){const i=new Map;for(const r of t)i.set(r,ve(e[r]));return r=>(i.forEach((s,l)=>{e[l]=s}),r)}function O6e(e){return q(e.geometry)&&e.geometry.type==="mesh"?k6e(e,e.geometry):P6e(e,["geometry"])}function k6e(e,t){const i=q(t.transform)?t.transform.clone():null,r=t.vertexAttributes.clonePositional();return s=>(t.transform=i,t.vertexAttributes=r,e.notifyGeometryChanged(),s)}function MOe(e){const t=e.map(i=>Jt(O6e(i))).filter(i=>q(i));return i=>(t.forEach(r=>r(i)),i)}function $Oe(){let e=0,t=0,i=0;return r=>{r.action==="start"&&(e=r.mapStart.x,t=r.mapStart.y,i=r.mapStart.z);const s=r.mapEnd.x-e,l=r.mapEnd.y-t,f=r.mapEnd.z-i;return e=r.mapEnd.x,t=r.mapEnd.y,i=r.mapEnd.z,je(te({},r),{mapDeltaX:s,mapDeltaY:l,mapDeltaZ:f,mapDeltaSpatialReference:r.mapStart.spatialReference})}}function IOe(){let e=0,t=0;return i=>{i.action==="start"&&(e=i.screenStart.x,t=i.screenStart.y);const r=i.screenEnd.x-e,s=i.screenEnd.y-t;return e=i.screenEnd.x,t=i.screenEnd.y,je(te({},i),{screenDeltaX:r,screenDeltaY:s})}}function TOe(e,t){let i=null,r=0,s=0;return l=>{if(l.action==="start"&&(i=e.toScreen(t),i.x<0||i.x>e.width||i.y<0||i.y>e.height?i=null:(r=l.screenStart.x-i.x,s=l.screenStart.y-i.y)),i==null)return null;const f=Cn(l.screenEnd.x-r,0,e.width),d=Cn(l.screenEnd.y-s,0,e.height),v=An(f,d);return l.screenStart=i,l.screenEnd=v,l}}class ny{constructor(){this.execute=()=>{}}next(t,i=new ny){return q(t)&&(this.execute=r=>{const s=t(r);q(s)&&i.execute(s)}),i}}function R6e(e,t,i=[]){if(e.type==="2d")return s=>s;let r=null;return s=>{s.action==="start"&&(r=e.toMap(s.screenStart,{exclude:i}),q(r)&&(r.z=kT(r,e,t)));const l=e.toMap(s.screenEnd,{exclude:i});q(l)&&(l.z=kT(l,e,t));const f=q(r)&&q(l)?{sceneStart:r,sceneEnd:l}:null;return je(te({},s),{scenePoints:f})}}let Yx=class extends ot{constructor(e){super(e),this.enabled=!1}};m([x({type:Boolean,nonNullable:!0})],Yx.prototype,"enabled",void 0),Yx=m([X("esri.views.interactive.sketch.SketchLabelOptions")],Yx);const Xx=Yx;let Qv=class extends ot{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};m([x({type:String,nonNullable:!0})],Qv.prototype,"mode",void 0),Qv=m([X("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],Qv);let bo=class extends ot{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};m([x({type:Boolean,nonNullable:!0})],bo.prototype,"distance",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"elevation",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"size",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"scale",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"rotation",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"orientation",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"totalLength",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"area",void 0),m([x({type:Boolean,nonNullable:!0})],bo.prototype,"radius",void 0),bo=m([X("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],bo);let tf=class extends ot{constructor(e){super(e),this.enabled=!1,this.elevation=new Qv,this.visibleElements=new bo,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};m([x({type:Boolean,nonNullable:!0})],tf.prototype,"enabled",void 0),m([x({type:Qv,nonNullable:!0})],tf.prototype,"elevation",void 0),m([x({type:bo,nonNullable:!0})],tf.prototype,"visibleElements",void 0),m([x()],tf.prototype,"visualVariables",void 0),tf=m([X("esri.widgets.Sketch.SketchTooltipOptions")],tf);const Qx=tf;class F6e{constructor(){this.next=new ny}createSnapDragEventPipelineStep({predicate:t=()=>!0,cancel:i,snappingManager:r,snappingContext:s,updatingHandles:l,useZ:f=!0}){if(ae(r))return F=>F;let d=null,v=null;const _=()=>{d=Za(d),r.doneSnapping(),q(v)&&v.frameTask.remove(),v=null};i.next(F=>(_(),F)),this.next=new ny;const M=this._createSnapFunction(r,f);let T=null,A=null,k=null;return F=>{if(!t(F))return F;if(F.action==="start"){const D=this._createFrameTask(r.view);if(v=this._createSnappingInfo(s,F,D),v.context.selfSnappingZ=null,!f&&q(F.info)){const z=this._extractSelfSnappingZ(s.coordinateHelper,F.info.handle.component);q(z)&&(v.context.selfSnappingZ={value:z,elevationInfo:s.elevationInfo})}}if(q(v)){const{context:D,originalScenePos:z,originalPos:H}=v,{mapEnd:J,mapStart:Y,action:ie,scenePoints:re}=F,ee=this._updatePosition(H,this._computeMapDelta(J,Y)),le=this._computeMapDelta(Y,H),me=je(te({},F),{action:"update"}),we=v.context,_e=this._updateScenePosition(z,re),Me=r.update({point:ee,scenePoint:_e,context:D});if(k=Me,this._applySnappedUpdate(J,Me,le,f),T=ee,A=_e,ie!=="end"){const{frameTask:Se}=v;ae(d)&&(d=new AbortController),l.addPromise(Ql(M({frameTask:Se,event:me,context:we,point:ee,scenePoint:_e,delta:le,lastPos:T,lastScenePos:A,lastUpdate:k},d.signal)))}}return F.action==="end"&&_(),F}}_createSnapFunction(t,i){return Cw(async({frameTask:r,point:s,scenePoint:l,context:f,event:d,delta:v,lastPos:_,lastScenePos:M,lastUpdate:T},A)=>{const k=await r.schedule(()=>t.snap({point:s,scenePoint:l,context:f,signal:A}),A);if(k.valid){let F=await r.schedule(()=>k.apply(),A);s!==_&&q(_)&&(F=t.update({point:_,scenePoint:M,context:f})),TT(F,T)||(this._applySnappedUpdate(d.mapEnd,F,v,i),this.next.execute(d))}})}_createFrameTask(t){return t.type==="3d"?t.resourceController.scheduler.registerTask(Yt.SNAPPING):$v}_createSnappingInfo(t,i,r){return{context:new Zx({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:q(i.info)?i.info.handle:null,excludeFeature:t.excludeFeature,visualizer:t.visualizer}),originalPos:q(i.snapOrigin)?t.coordinateHelper.vectorToDehydratedPoint(i.snapOrigin):i.mapStart,originalScenePos:q(i.scenePoints)?i.scenePoints.sceneStart:null,frameTask:r}}_updatePosition(t,[i,r,s]){const l=eE(t);return l.x+=i,l.y+=r,l.hasZ&&(l.z+=s),l}_updateScenePosition(t,i){return ae(t)||ae(i)?null:this._updatePosition(t,this._computeMapDelta(i.sceneEnd,i.sceneStart))}_computeMapDelta(t,i){const r=t.hasZ&&i.hasZ?t.z-i.z:0;return[t.x-i.x,t.y-i.y,r]}_applySnappedUpdate(t,i,[r,s,l],f){t.x=i.x+r,t.y=i.y+s,f&&t.hasZ&&i.hasZ&&(t.z=i.z+l)}_extractSelfSnappingZ(t,i){if(!t.hasZ())return null;const r=i.vertices;let s=null;for(const l of r){const f=t.getZ(l.pos);if(q(s)&&Math.abs(f-s)>1e-6)return null;ae(s)&&(s=f)}return s}}let rr=class extends yn.EventedMixin(pd){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new F6e,this.isDraped=!0,this.labelOptions=new Xx,this.tooltipOptions=new Qx,this.snapToSceneEnabled=null,this.lastVertex=null,ae(e.elevationInfo)&&(this.elevationInfo=AT(e.hasZ))}initialize(){const{geometryType:e,view:t}=this,{spatialReference:i}=t,r="viewingMode"in t.state?t.state.viewingMode:Du.Local,s=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=NT(this.hasZ,this.hasM,i),this._editGeometryOperations=new Kv(new Y1(s,this.coordinateHelper)),this._snappingOperation=new Jh({view:t,constrainResult:f=>ae(f)?f:this._getEffectiveDrawSurface().constrainZ(f)}),this.handles.add(Ve(()=>this.stagedVertex,f=>{ae(f)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(f)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(f,d)=>eO(f,d,TT)})),this._activeComponent=new K1(i,r),this._editGeometryOperations.data.components.push(this._activeComponent);const l=this.segmentLabels;q(l)&&(l.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([Ve(()=>this.labelOptions.enabled,f=>{l.visible=f},Ps),this.on("cursor-update",()=>{const f=this.stagedVertex;l.stagedVertex=q(f)?this.coordinateHelper.pointToVector(f):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],f=>{const d=f.vertices.map(T=>({componentIndex:0,vertexIndex:T.index,coordinates:this.coordinateHelper.vectorToArray(T.pos)})),v=d.map(T=>T.coordinates);switch(f.type){case"vertex-add":this.emit(f.type,je(te({},f),{added:v,vertices:d}));break;case"vertex-update":this.emit(f.type,je(te({},f),{updated:v,vertices:d}));break;case"vertex-remove":this.emit(f.type,je(te({},f),{removed:v,vertices:d}))}const _=this._activeComponent.getLastVertex(),M=q(_)?this.coordinateHelper.vectorToDehydratedPoint(_.pos):null;(ae(M)||ae(this.lastVertex)||!TT(this.lastVertex,M))&&(this.lastVertex=M)})),this._manipulator=new b6e({grabbableForEvent:f=>this.drawingMode!=="click"||f.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1}),this.manipulators.add(this._manipulator),this._manipulator.grabbable=e!=="point",this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",f=>this._onImmediateClick(f)),this._manipulator.events.on("immediate-double-click",f=>this._onImmediateDoubleClick(f))])}destroy(){oi(this.segmentLabels),oi(this._snappingOperation),this._editGeometryOperations=oi(this._editGeometryOperations)}get _snappingEnabled(){return q(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._getEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}set drawingMode(e){this._set("drawingMode",e!=null?e:Kx)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return q(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=ve(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return q(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),q(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),q(this.snappingManager)&&this.snappingManager.doneSnapping(),this.geometryType==="segment"||this.geometryType==="point"?this.commitStagedVertex():this.stagedVertex=null;const i=this.geometryType==="multipoint"&&this.numVertices===0||this.geometryType==="polyline"&&this.numVertices<2||this.geometryType==="polygon"&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map((r,s)=>({componentIndex:0,vertexIndex:s,coordinates:r})),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){q(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if(this.geometryType==="polygon"&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(Jt(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return tE(e,(t,i,r,s)=>{const l=s==="touch"&&this._snappingEnabled;!this.isCompleted&&l&&(r=r.next(f=>(l&&q(this.snappingManager)&&this.snappingManager.doneSnapping(),f)),i.next(this._screenToMapDragEventStep()).next(f=>(f.action==="start"&&(this.stagedVertex=f.mapStart,(this.geometryType==="segment"||l&&this.numVertices===0)&&this.commitStagedVertex()),f)).next(R6e(this.view,this.elevationInfo)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>l,cancel:r,snappingManager:this.snappingManager,snappingContext:new Zx({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:s,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint}),this._snappingPipeline.next).next(f=>(l&&(this.stagedVertex=f.mapEnd,f.action==="end"&&this.commitStagedVertex()),f)).next(f=>(f.action==="end"&&(this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),f)))})}_createManipulatorDragPipelineFreehand(e){return tE(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(ae(this.stagedVertex)&&(this.stagedVertex=r.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),r)).next(r=>{switch(r.action){case"start":case"update":this.stagedVertex=r.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return r})})}_createManipulatorDragPipelineHybrid(e){return tE(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(ae(this.stagedVertex)&&(this.stagedVertex=r.mapStart),this.commitStagedVertex()),r)).next(r=>{switch(r.action){case"start":case"update":this.stagedVertex=r.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return r})})}get _drawAtFixedElevation(){return(this.geometryType==="segment"||this.geometryType==="polygon")&&this.numCommittedVertices>0}_getEffectiveDrawSurface(){if(ae(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;return q(this.elevationInfo)&&this.elevationInfo.mode==="absolute-height"&&(t=!0),q(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),q(this.elevationInfo)&&this.elevationInfo.mode==="on-the-ground"&&(t=!1),this._drawAtFixedElevation&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getEffectiveDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(q(i))return e.stopPropagation(),void this.complete();const r=this._screenToMap(e.screenPoint);if(q(r))switch(this.drawingMode){case"freehand":this.geometryType==="point"&&(q(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),q(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),(this.geometryType==="point"||this.geometryType==="segment"&&t.vertices.length===2||this.geometryType==="segment"&&this.drawingMode==="hybrid"&&t.vertices.length===1)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=An(e.x,e.y),i=this._snappingOperation;if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void i.abort();e.stopPropagation();const r=this._closeOnClickVertexIndex(t);if(q(r))return this._closeOnVertex(r),void i.abort();const s=this._screenToMap(t),l=this._requiresScenePoint?this.drawSurface.screenToMap(t):null;if(this._manipulator.cursor=q(s)?"crosshair":null,ae(s))return void i.abort();const f=this.snappingManager;if(ae(f))return this.stagedVertex=s,void i.abort();const d=this._drawAtFixedElevation?Zl(this.elevationDrawSurface,({defaultZ:_})=>_):null,v=new Zx({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer,selfSnappingZ:q(d)?{value:d,elevationInfo:this.elevationInfo}:null});this.updatingHandles.addPromise(Ql(i.snap({point:s,scenePoint:l},f,v)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getEffectiveDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if(t.action==="start"&&(e=this._screenToMap(t.screenStart)),ae(e))return null;const i=this._screenToMap(t.screenEnd);return q(i)?je(te({},t),{mapStart:e,mapEnd:i}):null}}_vertexWithinPointerDistance(e,t){const i=25,r=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!q(r)&&L6e(r,t,i)}};function L6e(e,t,i){const r=e.x-t.x,s=e.y-t.y;return r*r+s*s<=i}m([x()],rr.prototype,"_snappingEnabled",null),m([x()],rr.prototype,"defaultZ",void 0),m([x()],rr.prototype,"isDraped",void 0),m([x({value:Kx})],rr.prototype,"drawingMode",null),m([x({constructOnly:!0})],rr.prototype,"elevationDrawSurface",void 0),m([x({constructOnly:!0})],rr.prototype,"elevationInfo",void 0),m([x({constructOnly:!0,type:Xx})],rr.prototype,"labelOptions",void 0),m([x({constructOnly:!0,type:Qx})],rr.prototype,"tooltipOptions",void 0),m([x({constructOnly:!0})],rr.prototype,"geometryType",void 0),m([x({constructOnly:!0})],rr.prototype,"hasM",void 0),m([x({constructOnly:!0})],rr.prototype,"hasZ",void 0),m([x({constructOnly:!0})],rr.prototype,"manipulators",void 0),m([x({constructOnly:!0})],rr.prototype,"drawSurface",void 0),m([x({constructOnly:!0})],rr.prototype,"segmentLabels",void 0),m([x({constructOnly:!0})],rr.prototype,"snappingManager",void 0),m([x({constructOnly:!0})],rr.prototype,"snappingVisualizer",void 0),m([x()],rr.prototype,"snapToSceneEnabled",void 0),m([x()],rr.prototype,"_snappingOperation",void 0),m([x()],rr.prototype,"stagedVertex",null),m([x()],rr.prototype,"lastVertex",void 0),m([x()],rr.prototype,"updating",null),m([x({constructOnly:!0})],rr.prototype,"view",void 0),rr=m([X("esri.views.draw.DrawOperation")],rr);class N6e{constructor(t,i,r,s=null){this._elevationInfo=t,this.defaultZ=i,this._view=r,this._excludeGraphics=s}screenToMap(t){if(q(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen(Og(t.x,t.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const i=this._view.sceneIntersectionHelper.intersectElevationFromScreen(Og(t.x,t.y),this._elevationInfo,0,this._excludeGraphics);return q(i)&&(i.z=void 0),i}mapToScreen(t){const i=Rx(t.x,t.y,RT(this._view,t,this._elevationInfo),t.spatialReference);return this._view.toScreen(i)}constrainZ(t){const{defaultZ:i}=this;return q(i)&&t.z!==i&&((t=eE(t)).z=i),t}}class j6e{constructor(t,i,r=[]){this.view=t,this.elevationInfo=i,this.exclude=r}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return q(i)&&(i.z=kT(i,this.view,this.elevationInfo)),i}mapToScreen(t){let i=t;return q(this.elevationInfo)&&(i=Rx(t.x,t.y,RT(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(i)}constrainZ(t){return t}}class EOe{constructor(t,i=!1,r=0){this.view=t,this.hasZ=i,this.defaultZ=r,this.mapToScreen=s=>t.toScreen(s),this.screenToMap=i?s=>{const l=t.toMap(s);return l.z=r,l}:s=>t.toMap(s)}constrainZ(t){const{defaultZ:i}=this;return this.hasZ&&t.z!==i&&((t=eE(t)).z=i),t}}var rf;(function(e){e[e.WhenToolEditable=0]="WhenToolEditable",e[e.WhenToolNotEditable=1]="WhenToolNotEditable",e[e.Always=2]="Always"})(rf||(rf={}));class D6e{constructor(){this._isToolEditable=!0,this._manipulators=new gt,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,i=rf.WhenToolEditable){this.addMany([t],i)}addMany(t,i=rf.WhenToolEditable){for(const r of t){const s={manipulator:r,visibilityPredicate:i,attached:!1};this._manipulators.add(s),this._attached&&this._updateManipulatorAttachment(s)}}remove(t){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.getItemAt(i).manipulator===t){const r=this._manipulators.splice(i,1)[0];this._detachManipulator(r);break}}removeAll(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(t=>{this._updateManipulatorAttachment(t)}),this._attached=!0}detach(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:t})=>{t.destroy&&t.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(t,i){return this._manipulators.on(t,r=>{i(r)})}forEach(t){for(const i of this._manipulators.items)t(i)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach(i=>t.push(i.manipulator)),t}intersect(t,i){let r=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:l,attached:f})=>{if(!f||!l.interactive)return;const d=l.intersectionDistance(t,i);q(d)&&d<s&&(s=d,r=l)}),r}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const i=t.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===rf.Always||(this._isToolEditable?t.visibilityPredicate===rf.WhenToolEditable:t.visibilityPredicate===rf.WhenToolNotEditable)}}let kn=class extends ot{constructor(e){super(e),this.manipulators=new D6e,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Ho.MANAGER,!0],[Ho.USER,!0]]),this._creationFinishedResolver=uk()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Ho.USER)}set editable(e){this.setEditableFlag(Ho.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){ae(this.view)?Pe.getLogger(this.declaredClass).error("Can't activate tool if view is not defined."):(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Ho.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Ho.USER)&&this.getEditableFlag(Ho.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};m([x({constructOnly:!0})],kn.prototype,"view",void 0),m([x({readOnly:!0})],kn.prototype,"active",null),m([x({value:!0})],kn.prototype,"visible",null),m([x({value:!0})],kn.prototype,"editable",null),m([x({readOnly:!0})],kn.prototype,"manipulators",void 0),m([x({readOnly:!0})],kn.prototype,"updating",null),m([x()],kn.prototype,"cursor",null),m([x({readOnly:!0})],kn.prototype,"automaticManipulatorSelection",void 0),m([x()],kn.prototype,"hasFocusedManipulators",null),m([x()],kn.prototype,"hasGrabbedManipulators",void 0),m([x()],kn.prototype,"hasHoveredManipulators",void 0),m([x()],kn.prototype,"firstGrabbedManipulator",void 0),m([x({readOnly:!0})],kn.prototype,"created",void 0),m([x({readOnly:!0})],kn.prototype,"removeIncompleteOnCancel",void 0),kn=m([X("esri.views.interactive.InteractiveToolBase")],kn);let Rn=class extends _a(yn.EventedMixin(kn)){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=this.view,t=AT(this.hasZ,this.elevationInfo);this.drawOperation=new rr({view:e,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:e.type==="3d"?new j6e(e,t):null,elevationDrawSurface:e.type==="3d"?new N6e(t,this.defaultZ,e):null,hasM:!1,elevationInfo:t}),this.handles.add([this.drawOperation.on("vertex-add",i=>this.onVertexAdd(i)),this.drawOperation.on("vertex-remove",i=>this.onVertexRemove(i)),this.drawOperation.on("vertex-update",i=>this.onVertexUpdate(i)),this.drawOperation.on("cursor-update",i=>this.onCursorUpdate(i)),this.drawOperation.on("complete",i=>this.onComplete(i))]),this.finishToolCreation()}destroy(){this.drawOperation=oi(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){var e,t;return(t=(e=this.drawOperation)==null?void 0:e.updating)!=null?t:!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};m([x({constructOnly:!0,nonNullable:!0})],Rn.prototype,"defaultZ",void 0),m([x()],Rn.prototype,"drawOperation",void 0),m([x({constructOnly:!0})],Rn.prototype,"elevationInfo",void 0),m([x({value:!0})],Rn.prototype,"enabled",null),m([x({constructOnly:!0})],Rn.prototype,"geometryType",void 0),m([x({constructOnly:!0})],Rn.prototype,"hasZ",void 0),m([x({constructOnly:!0})],Rn.prototype,"mode",void 0),m([x()],Rn.prototype,"snapToScene",void 0),m([x({readOnly:!0})],Rn.prototype,"type",void 0),m([x({readOnly:!0})],Rn.prototype,"updating",null),m([x({constructOnly:!0,nonNullable:!0})],Rn.prototype,"view",void 0),Rn=m([X("esri.views.draw.DrawTool")],Rn);let iE=class extends Yv{constructor(e){super(e),this._addVertexOnPointerUp=!1}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler(e);else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("key-down",e=>{e.key===Tt.complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(e))},rt.TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new Rn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new tc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new ic(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new tc(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new ic(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};iE=m([X("esri.views.draw.PointDrawAction")],iE);let sy=class extends Yv{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=Kx}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=Li(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",e=>{this._dragEnabled&&q(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===Tt.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==Tt.complete||i?t!==Tt.undo||this.interactiveUndoDisabled||i?t!==Tt.redo||this.interactiveUndoDisabled||i?t!==Tt.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},rt.TOOL),this.view.on("key-up",e=>{e.key===Tt.pan&&(e.stopPropagation(),this._panEnabled=!1)},rt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new XT(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new Vl(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new Vl(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new Rn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new Vl(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new tc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new ic(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new tc(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new ic(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};m([x()],sy.prototype,"_dragEnabled",null),m([x()],sy.prototype,"_clickEnabled",null),m([x({type:IJ})],sy.prototype,"mode",void 0),sy=m([X("esri.views.draw.PolygonDrawAction")],sy);let oy=class extends Yv{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=Kx}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=Li(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",e=>{this._dragEnabled&&q(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===Tt.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==Tt.complete||i?t!==Tt.undo||this.interactiveUndoDisabled||i?t!==Tt.redo||this.interactiveUndoDisabled||i?t!==Tt.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},rt.TOOL),this.view.on("key-up",e=>{e.key===Tt.pan&&(e.stopPropagation(),this._panEnabled=!1)},rt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new XT(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new Vl(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new Vl(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new Rn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new Vl(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new tc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new ic(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new tc(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new ic(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};m([x()],oy.prototype,"_clickEnabled",null),m([x()],oy.prototype,"_dragEnabled",null),m([x({type:IJ})],oy.prototype,"mode",void 0),oy=m([X("esri.views.draw.PolylineDrawAction")],oy);function V6e(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function kJ(e,t,i){i*=.5;const r=Math.sin(i);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function z6e(e,t){const i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>$s()?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function RJ(e,t,i){const r=t[0],s=t[1],l=t[2],f=t[3],d=i[0],v=i[1],_=i[2],M=i[3];return e[0]=r*M+f*d+s*_-l*v,e[1]=s*M+f*v+l*d-r*_,e[2]=l*M+f*_+r*v-s*d,e[3]=f*M-r*d-s*v-l*_,e}function G6e(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],f=t[3],d=Math.sin(i),v=Math.cos(i);return e[0]=r*v+f*d,e[1]=s*v+l*d,e[2]=l*v-s*d,e[3]=f*v-r*d,e}function q6e(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],f=t[3],d=Math.sin(i),v=Math.cos(i);return e[0]=r*v-l*d,e[1]=s*v+f*d,e[2]=l*v+r*d,e[3]=f*v-s*d,e}function U6e(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],f=t[3],d=Math.sin(i),v=Math.cos(i);return e[0]=r*v+s*d,e[1]=s*v-r*d,e[2]=l*v+f*d,e[3]=f*v-l*d,e}function B6e(e,t){const i=t[0],r=t[1],s=t[2];return e[0]=i,e[1]=r,e[2]=s,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-s*s)),e}function e9(e,t,i,r){const s=t[0],l=t[1],f=t[2],d=t[3];let v,_,M,T,A,k=i[0],F=i[1],D=i[2],z=i[3];return _=s*k+l*F+f*D+d*z,_<0&&(_=-_,k=-k,F=-F,D=-D,z=-z),1-_>$s()?(v=Math.acos(_),M=Math.sin(v),T=Math.sin((1-r)*v)/M,A=Math.sin(r*v)/M):(T=1-r,A=r),e[0]=T*s+A*k,e[1]=T*l+A*F,e[2]=T*f+A*D,e[3]=T*d+A*z,e}function H6e(e){const t=Pg,i=t(),r=t(),s=t(),l=Math.sqrt(1-i),f=Math.sqrt(i);return e[0]=l*Math.sin(2*Math.PI*r),e[1]=l*Math.cos(2*Math.PI*r),e[2]=f*Math.sin(2*Math.PI*s),e[3]=f*Math.cos(2*Math.PI*s),e}function FJ(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],f=i*i+r*r+s*s+l*l,d=f?1/f:0;return e[0]=-i*d,e[1]=-r*d,e[2]=-s*d,e[3]=l*d,e}function W6e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function LJ(e,t){const i=t[0]+t[4]+t[8];let r;if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);const l=(s+1)%3,f=(s+2)%3;r=Math.sqrt(t[3*s+s]-t[3*l+l]-t[3*f+f]+1),e[s]=.5*r,r=.5/r,e[3]=(t[3*l+f]-t[3*f+l])*r,e[l]=(t[3*l+s]+t[3*s+l])*r,e[f]=(t[3*f+s]+t[3*s+f])*r}return e}function J6e(e,t,i,r){const s=.5*Math.PI/180;t*=s,i*=s,r*=s;const l=Math.sin(t),f=Math.cos(t),d=Math.sin(i),v=Math.cos(i),_=Math.sin(r),M=Math.cos(r);return e[0]=l*v*M-f*d*_,e[1]=f*d*M+l*v*_,e[2]=f*v*_-l*d*M,e[3]=f*v*M+l*d*_,e}function Z6e(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const K6e=v2,Y6e=HR,X6e=WR,Q6e=RJ,eMe=YR,tMe=tF,iMe=b2,NJ=US,rMe=NJ,jJ=BS,nMe=jJ,rE=eF,sMe=iF,oMe=HS;function DJ(e,t,i){const r=pi(t,i);return r<-.999999?(Qr(zl,aMe,t),g2(zl)<1e-6&&Qr(zl,lMe,t),Tn(zl,zl),kJ(e,zl,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Qr(zl,t,i),e[0]=zl[0],e[1]=zl[1],e[2]=zl[2],e[3]=1+r,rE(e,e))}const zl=et(),aMe=Ar(1,0,0),lMe=Ar(0,1,0);function uMe(e,t,i,r,s,l){return e9(VJ,t,s,l),e9(zJ,i,r,l),e9(e,VJ,zJ,2*l*(1-l)),e}const VJ=X1(),zJ=X1();function cMe(e,t,i,r){const s=hMe;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=r[0],s[4]=r[1],s[7]=r[2],s[2]=-t[0],s[5]=-t[1],s[8]=-t[2],rE(e,LJ(e,s))}const hMe=uJ();Object.freeze(Object.defineProperty({__proto__:null,identity:V6e,setAxisAngle:kJ,getAxisAngle:z6e,multiply:RJ,rotateX:G6e,rotateY:q6e,rotateZ:U6e,calculateW:B6e,slerp:e9,random:H6e,invert:FJ,conjugate:W6e,fromMat3:LJ,fromEuler:J6e,str:Z6e,copy:K6e,set:Y6e,add:X6e,mul:Q6e,scale:eMe,dot:tMe,lerp:iMe,length:NJ,len:rMe,squaredLength:jJ,sqrLen:nMe,normalize:rE,exactEquals:sMe,equals:oMe,rotationTo:DJ,sqlerp:uMe,setAxes:cMe},Symbol.toStringTag,{value:"Module"}));function t9(e,t,i=null){return q(i)?[e,t,i]:[e,t]}function GJ(e,t,i=null){return q(i)?{x:e,y:t,z:i}:{x:e,y:t}}class qJ{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return Qre(t.map(i=>this.mapToLocal(i)))}get doUnnormalization(){return!1}}class pMe extends qJ{constructor(t,i,r=null){super(i),this._defaultZ=r,this.transform=kl(),this.transformInv=kl(),this.transform=cB(t),Q_(this.transformInv,this.transform)}makeMapPoint(t,i){return t9(t,i,this._defaultZ)}mapToLocal(t){return GJ(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return t9(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class dMe extends qJ{constructor(t,i){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=et(),this.tangentFrameUpWS=et(),this.tangentFrameRightWS=et(),this.tangentFrameForwardWS=et(),this.localFrameRightWS=et(),this.localFrameUpWS=et(),this.worldToLocalTransform=X1(),this.localToWorldTransform=X1(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const r=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Qu.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Qu.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Qu.Z,this.tangentFrameForwardWS);const s=et();eo(s,this.tangentFrameForwardWS,pi(r,this.tangentFrameForwardWS)),Xr(this.localFrameRightWS,r,s),Tn(this.localFrameRightWS,this.localFrameRightWS),Qr(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),DJ(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),FJ(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(t,i){return t9(t,i,this.defaultZ)}mapToLocal(t){const i=et();this.view.renderCoordsHelper.toRenderCoords(new dt({x:t[0],y:t[1],spatialReference:this.spatialReference}),i),GS(i,i,this.worldToLocalTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return q(r)?GJ(r.x/this.scale,r.y/this.scale):null}localToMap(t){const i=et();this.view.renderCoordsHelper.toRenderCoords(new dt({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),i),GS(i,i,this.localToWorldTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return q(r)?t9(r.x,r.y,this.defaultZ):null}}function fMe(e,t){if(e.type==="2d")return new pMe(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if(e.type==="3d"){const i=t.length>2?new dt({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new dt({x:t[0],y:t[1],spatialReference:e.spatialReference});return new dMe(e,i)}return null}const yMe=["freehand","click"];let i9=class extends Yv{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this.mode==="click"?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint(Li(e));q(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,e.pointerType==="touch"&&this._updateCursor(e.native)))},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),ae(this._activePointerId)&&e.pointerType!=="touch"&&(this._cursorScreenPoint=Li(e),this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=Li(e),this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),this._committedVertices.length===2&&this._drawCompleteHandler(e),this._isDragging=!1)},rt.TOOL),this.view.on("key-down",e=>{e.key===Tt.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===Tt.pan&&(this._panEnabled=!0)},rt.TOOL),this.view.on("key-up",e=>{e.key===Tt.pan&&(this._panEnabled=!1)},rt.TOOL),this.view.on("drag",e=>{q(this._activePointerId)&&e.stopPropagation()},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",e=>{this._abortSnapping(),this._cursorScreenPoint=Li(e),this._activePointerId=e.pointerId,this._isDragging=!1,e.pointerType==="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=Li(e),ae(this._activePointerId)&&e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)},rt.TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),this.vertices.length!==2||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)},rt.TOOL),this.view.on("key-down",e=>{e.key===Tt.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),this.vertices.length===2&&this._drawCompleteHandler(e)),e.key===Tt.complete&&this._cursorScreenPoint&&this.vertices.length===2&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))},rt.TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new Rn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new Vl(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new tc(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new ic(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i),this._committedVertices.length===1&&(this.viewAlignedCoordinateSystem=fMe(this.view,this._committedVertices[0]));const r=this._committedVertices.length-1,s=new Vl(this.view,t,r,this.vertices);this.emit("vertex-add",s)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(t)&&this._pushCursorVertex(t.vertex,()=>this.emit("cursor-update",new tc(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new ic(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new Kv(new Y1("polygon",this._coordinateHelper)),this._activeComponent=new K1(this._coordinateHelper.spatialReference,Du.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};m([x({type:yMe})],i9.prototype,"mode",void 0),i9=m([X("esri/views/2d/engine/markup/SegmentDrawAction")],i9);let eb=class extends ot{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i=te({view:this.view},t);switch(e){case"point":i.editGeometryType="point",this.activeAction=new iE(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new oy(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new QT(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new sy(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new i9(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};m([x()],eb.prototype,"activeAction",void 0),m([x({readOnly:!0})],eb.prototype,"type",void 0),m([x()],eb.prototype,"view",void 0),eb=m([X("esri.views.draw.Draw")],eb);function gMe(e,t){return t}function nE(e,t,i,r){switch(i){case 0:return tb(e,t+r,0);case 1:return e.originPosition==="lowerLeft"?tb(e,t+r,1):bMe(e,t+r,1)}}function UJ(e,t,i,r){return i===2?tb(e,t,2):nE(e,t,i,r)}function mMe(e,t,i,r){return i===2?tb(e,t,3):nE(e,t,i,r)}function vMe(e,t,i,r){return i===3?tb(e,t,3):UJ(e,t,i,r)}function tb({translate:e,scale:t},i,r){return e[r]+i*t[r]}function bMe({translate:e,scale:t},i,r){return e[r]-i*t[r]}class wMe{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=gMe,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const i=qM(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(!ae(i))for(const r of t.features)i(r.geometry)}createSpatialReference(){return{}}addField(t,i){const r=t.fields;X5(r),r.push(i);const s=r.map(l=>l.name);this._attributesConstructor=function(){for(const l of s)this[l]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,s)=>this.addCoordinatePoint(i,r,s),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,s)=>this._addCoordinatePolygon(i,r,s),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,s)=>this._addCoordinatePolyline(i,r,s),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,s)=>this._addCoordinateMultipoint(i,r,s),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:r,queryGeometryType:s}=i,l=S7(r.clone(),r,!1,!1,this._transform),f=oz(l,s,!1,!1);t.queryGeometryType=s,t.queryGeometry=te({},f)}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,r){const s=ss(this._transform,"transform");switch(i=this._applyTransform(s,i,r,0),r){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=t);const s=ss(this._transform,"transform");return this._applyTransform(s,t,i,r)}_addCoordinatePolyline(t,i,r){this._dehydratedAddPointsCoordinate(t.paths,i,r)}_addCoordinatePolygon(t,i,r){this._dehydratedAddPointsCoordinate(t.rings,i,r)}_addCoordinateMultipoint(t,i,r){r===0&&t.points.push([]);const s=this._transformPathLikeValue(i,r);t.points[t.points.length-1].push(s)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,r){r===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(i,r),l=t[t.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),l.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(t){const{hasZ:i,hasM:r}=t;return i&&r?vMe:i?UJ:r?mMe:nE}}async function COe(e,t,i){const r=zr(e),s=te({},i),l=Hn.from(t),f=!l.quantizationParameters,{data:d}=await NV(r,l,new wMe({sourceSpatialReference:l.sourceSpatialReference,applyTransform:f}),s);return d}function _Me(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function xMe(e,t){const i={};for(const r of e){const{parentObjectId:s,parentGlobalId:l,attachmentInfos:f}=r;for(const d of f){const{id:v}=d,_=Due(cce(`${t}/${s}/attachments/${v}`)),M=ED.fromJSON(d);M.set({url:_,parentObjectId:s,parentGlobalId:l}),i[s]?i[s].push(M):i[s]=[M]}}return i}function SMe(e,t,i){let r={query:zm(te(je(te({},e.query),{f:"json"}),_Me(t)))};return i&&(r=je(te(te({},i),r),{query:te(te({},i.query),r.query)})),li(e.path+"/queryAttachments",r)}async function AOe(e,t,i){const r=zr(e);return SMe(r,G3.from(t),te({},i)).then(s=>xMe(s.data.attachmentGroups,r.path))}async function POe(e,t,i){const r=zr(e);return VV(r,Hn.from(t),te({},i)).then(s=>s.data.count)}async function OOe(e,t,i){const r=zr(e);return zV(r,Hn.from(t),te({},i)).then(s=>({count:s.data.count,extent:ai.fromJSON(s.data.extent)}))}async function kOe(e,t,i){const r=zr(e);return DV(r,Hn.from(t),te({},i)).then(s=>s.data.objectIds)}function MMe(e,t){const i=e.toJSON();return i.objectIds&&(i.objectIds=i.objectIds.join(",")),i.orderByFields&&(i.orderByFields=i.orderByFields.join(",")),i.outFields&&!(t==null?void 0:t.returnCountOnly)?i.outFields.includes("*")?i.outFields="*":i.outFields=i.outFields.join(","):delete i.outFields,i.outSpatialReference&&(i.outSR=i.outSR.wkid||JSON.stringify(i.outSR.toJSON()),delete i.outSpatialReference),i.dynamicDataSource&&(i.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i}async function $Me(e,t,i){const r=await BJ(e,t,i),s=r.data,l=s.geometryType,f=s.spatialReference,d={};for(const v of s.relatedRecordGroups){const _={fields:void 0,objectIdFieldName:void 0,geometryType:l,spatialReference:f,hasZ:!!s.hasZ,hasM:!!s.hasM,features:v.relatedRecords};if(v.objectId!=null)d[v.objectId]=_;else for(const M in v)v.hasOwnProperty(M)&&M!=="relatedRecords"&&(d[v[M]]=_)}return je(te({},r),{data:d})}async function IMe(e,t,i){const r=await BJ(e,t,i,{returnCountOnly:!0}),s=r.data,l={};for(const f of s.relatedRecordGroups)f.objectId!=null&&(l[f.objectId]=f.count);return je(te({},r),{data:l})}async function BJ(e,t,i={},r){const s=zm(te(te(je(te({},e.query),{f:"json"}),r),MMe(t,r)));return li(e.path+"/queryRelatedRecords",je(te({},i),{query:te(te({},i.query),s)}))}async function ROe(e,t,i){t=wd.from(t);const r=zr(e);return $Me(r,t,i).then(s=>{const l=s.data,f={};return Object.keys(l).forEach(d=>f[d]=wh.fromJSON(l[d])),f})}async function FOe(e,t,i){t=wd.from(t);const r=zr(e);return IMe(r,t,te({},i)).then(s=>s.data)}const HJ="Layer does not support extent calculation.";function TMe(e,t){var l,f;const i=e.geometry,r=e.toJSON(),s=r;if(q(i)&&(s.geometry=JSON.stringify(i),s.geometryType=ou(i),s.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference)),((l=r.topFilter)==null?void 0:l.groupByFields)&&(s.topFilter.groupByFields=r.topFilter.groupByFields.join(",")),((f=r.topFilter)==null?void 0:f.orderByFields)&&(s.topFilter.orderByFields=r.topFilter.orderByFields.join(",")),r.topFilter&&(s.topFilter=JSON.stringify(s.topFilter)),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),r.outFields&&!((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","):delete s.outFields,r.outSR?s.outSR=r.outSR.wkid||JSON.stringify(r.outSR):i&&r.returnGeometry&&(s.outSR=s.inSR),r.returnGeometry&&delete r.returnGeometry,r.timeExtent){const d=r.timeExtent,{start:v,end:_}=d;v==null&&_==null||(s.time=v===_?v:`${v!=null?v:"null"},${_!=null?_:"null"}`),delete r.timeExtent}return s}async function EMe(e,t,i,r){const s=await r9(e,t,"json",r);return o_(t,i,s.data),s}async function CMe(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?{data:{objectIds:[]}}:r9(e,t,"json",i,{returnIdsOnly:!0})}async function AMe(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?{data:{count:0,extent:null}}:r9(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(HJ);if(s.hasOwnProperty("count"))throw new Error(HJ);return r})}function PMe(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):r9(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function r9(e,t,i,r={},s={}){const l=typeof e=="string"?gn(e):e,f=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",Vm(f,null,r).then(d=>{const v=d&&d[0];q(v)&&((t=t.clone()).geometry=v);const _=zm(te(te(je(te({},l.query),{f:i}),s),TMe(t,s)));return li(Wc(l.path,"queryTopFeatures"),je(te({},r),{query:te(te({},_),r.query)}))})}async function LOe(e,t,i,r){const s=zr(e),l=te({},r),{data:f}=await EMe(s,_h.from(t),i,l);return wh.fromJSON(f)}async function NOe(e,t,i){const r=zr(e);return(await CMe(r,_h.from(t),te({},i))).data.objectIds}async function jOe(e,t,i){const r=zr(e),s=await AMe(r,_h.from(t),te({},i));return{count:s.data.count,extent:ai.fromJSON(s.data.extent)}}async function DOe(e,t,i){const r=zr(e);return(await PMe(r,_h.from(t),te({},i))).data.count}function OMe(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var sE={exports:{}};(function(e,t){function i(){function s(h){if(typeof h=="number")return B.Uc.ah(h);if(h==null)return null;if(jt[h]!=null)return B.Uc.ah(jt[h]);throw Error("Unrecognised Unit Type")}function l(h){if(typeof h=="number")return B.Uc.ah(h);if(h==null)return null;if($i[h]!=null)return B.Uc.ah($i[h]);throw Error("Unrecognised Unit Type")}function f(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function d(h,O,w,c){if(w==null||w.B())return null;switch(w.K()){case B.sn.Point:return h.exportPoint(O,w,c);case B.sn.Polygon:return h.exportPolygon(O,w,c);case B.sn.Polyline:return h.exportPolyline(O,w,c);case B.sn.MultiPoint:return h.exportMultipoint(O,w,c);case B.sn.Envelope:return h.exportExtent(O,w,c)}return null}function v(h,O,w,c){if(w.K()!==B.sn.Point)throw Error("Geometry not Point");return h.exportPoint(O,w,c)}function _(h,O,w){return h.convertToGEGeometry(O,w)}function M(h){var O=h.wkid;h=h.wkt;var w=Xt.get(O||h);return w==null&&(O!==-1&&O!=null?(w=B.Gg.create(O),Xt.set(O,w)):h&&(w=B.Gg.lP(h),Xt.set(h,w)),xr.has(O||h)&&w.QW(xr.get(O||h))),w}function T(h){var O;if(h==null)return null;var w=M(h);return h=w.Id(),w=w.Mn(),(O={}).tolerance=w,O.unitType=h==null?-1:h.pd,O.unitID=h==null?-1:h.Fc(),O.unitBaseFactor=h==null?0:h.ci,O.unitSquareDerivative=h==null?0:B.Uc.WF(h).Fc(),O}function A(h,O,w,c){return w==null?null:(w=B.ac.clip(_(h,Le,w),_(h,Le,c),M(O)),d(h,Le,w,O))}function k(h,O,w,c){w=B.ac.fl(_(h,Le,w),_(h,Le,c),M(O)),c=[];for(var a=0;a<w.length;a++)c.push(d(h,Le,w[a],O));return c}function F(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.contains(_(h,Le,w),_(h,Le,c),M(O))}function D(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.wP(_(h,Le,w),_(h,Le,c),M(O))}function z(h,O,w,c,a){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.ub(_(h,Le,w),_(h,Le,c),M(O),s(a))}function H(h,O,w,c){return!(w==null&&c!=null||c==null&&w!=null)&&B.ac.Nb(_(h,Le,w),_(h,Le,c),M(O))}function J(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.OS(_(h,Le,w),_(h,Le,c),M(O))}function Y(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.touches(_(h,Le,w),_(h,Le,c),M(O))}function ie(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.mY(_(h,Le,w),_(h,Le,c),M(O))}function re(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.OP(_(h,Le,w),_(h,Le,c),M(O))}function ee(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.yU(_(h,Le,w),_(h,Le,c),M(O))}function le(h,O,w,c,a){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.tB(_(h,Le,w),_(h,Le,c),M(O),a)}function me(h,O,w){if(w==null)throw Error("Illegal Argument Exception");return B.ac.ZS(_(h,Le,w),M(O))}function we(h,O,w){if(w==null)throw Error("Illegal Argument Exception");return w=B.ac.$B(_(h,Le,w),M(O)),d(h,Le,w,O)}function _e(h,O,w,c){if(c===void 0&&(c=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var a=c,n=[];for(c=0;c<w.length;c++)n.push(_(h,Le,w[c]));for(w=B.ac.eP(n,a),a=Array(w.length),c=0;c<w.length;c++)a[c]=d(h,Le,w[c],O);return a}return c=B.ac.dP(_(h,Le,w),M(O)),d(h,Le,c,O)}function Me(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(_(h,Le,w[n]));for(w=B.ac.LP(a,_(h,Le,c),M(O)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Le,w[n],O);return c}return n=B.ac.km(_(h,Le,w),_(h,Le,c),M(O)),d(h,Le,n,O)}function Se(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(_(h,Le,w[n]));for(w=B.ac.RX(a,_(h,Le,c),M(O)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Le,w[n],O);return c}return n=B.ac.gp(_(h,Le,w),_(h,Le,c),M(O)),d(h,Le,n,O)}function He(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(_(h,Le,w[n]));for(w=B.ac.MS(a,_(h,Le,c),M(O)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Le,w[n],O);return c}return n=B.ac.Fa(_(h,Le,w),_(h,Le,c),M(O)),d(h,Le,n,O)}function We(h,O,w,c){if(w==null)return null;var a=[];if(Array.isArray(w)){if(w.length===0)return null;for(c=0;c<w.length;c++)a.push(_(h,Le,w[c]))}else a.push(_(h,Le,w)),c!=null&&a.push(_(h,Le,c));return d(h,Le,B.ac.fY(a,M(O)),O)}function Ot(h,O,w,c,a,n,o,u){var p=0;if(n!=null)switch(n){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(w)){if(w==null)h=null;else if(w.length===0)h=[];else{var y=[];for(n=0;n<w.length;n++)y.push(_(h,Le,w[n]));for(w=B.ac.wU(y,M(O),c,p,o,u,s(a)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Le,w[n],O);h=c}return h}return w=B.ac.offset(_(h,Le,w),M(O),c,p,o,u,s(a)),d(h,Le,w,O)}function kt(h,O,w,c,a,n){if(n===void 0&&(n=!1),Array.isArray(w)){if(!Array.isArray(c)){for(var o=[],u=0;u<w.length;u++)o.push(c);c=o}if(c.length!=w.length){if(c.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(u=0;u<w.length;u++)c[u]===void 0?o.push(p):(o.push(c[u]),p=c[u]);c=o}return Ye(h,O,w,c,a,!1,n,"geodesic",NaN)}return w=B.ac.buffer(_(h,Le,w),M(O),c,s(a),!1,0,NaN),d(h,Le,w,O)}function ft(h,O,w,c,a,n,o,u){if(Array.isArray(w)){if(!Array.isArray(c)){for(var p=[],y=0;y<w.length;y++)p.push(c);c=p}if(c.length!==w.length){if(c.length===0)throw Error("Illegal Argument Exception");p=[];var g=0;for(y=0;y<w.length;y++)c[y]===void 0?p.push(g):(p.push(c[y]),g=c[y]);c=p}return Ye(h,O,w,c,a,!0,n,o,u)}return o===void 0&&(o=NaN),w=B.ac.buffer(_(h,Le,w),M(O),c,s(a),!0,f(n),o),d(h,Le,w,O)}function Ye(h,O,w,c,a,n,o,u,p){if(p===void 0&&(p=NaN),w==null)return null;if(w.length===0)return[];for(var y=[],g=0;g<w.length;g++)y.push(_(h,Le,w[g]));for(w=B.ac.HN(y,M(O),c,s(a),n,o,f(u),p),c=Array(w.length),g=0;g<w.length;g++)c[g]=d(h,Le,w[g],O);return c}function Ct(h,O,w,c,a){var n;return a===void 0&&(a=!0),w=B.ac.iz(_(h,Le,w),_(h,Le,c),a),(n={}).coordinate=v(h,Le,w.az(),O),n.distance=w.cz(),n.isRightSide=w.Nz(),n.vertexIndex=w.Va(),n.isEmpty=w.B(),n}function Oi(h,O,w,c){var a;return w=B.ac.jz(_(h,Le,w),_(h,Le,c)),(a={}).coordinate=v(h,Le,w.az(),O),a.distance=w.cz(),a.isRightSide=w.Nz(),a.vertexIndex=w.Va(),a.isEmpty=w.B(),a}function Ui(h,O,w,c,a,n){var o;for(w=B.ac.kz(_(h,Le,w),_(h,Le,c),a,n),c=[],a=0;a<w.length;a++)w[a].B()===!1&&c.push(((o={}).coordinate=v(h,Le,w[a].az(),O),o.distance=w[a].cz(),o.isRightSide=w[a].Nz(),o.vertexIndex=w[a].Va(),o.isEmpty=w[a].B(),o));return c}function _i(h,O,w,c,a,n){return w=B.ac.LQ(_(h,Le,w),M(O),c,a,s(n)),d(h,Le,w,O)}function pr(h,O,w,c,a){return w=B.ac.Sr(_(h,Le,w),M(O),c,s(a)),d(h,Le,w,O)}function Rr(h,O,w,c,a,n){return n===void 0&&(n=0),w=B.ac.Ry(_(h,Le,w),M(O),c,s(a),n),d(h,Le,w,O)}function De(h,O,w,c){if(w==null)throw Error("Illegal Argument Exception");return B.ac.EU(_(h,Le,w),M(O),l(c))}function ct(h,O,w,c){if(w==null)throw Error("Illegal Argument Exception");return B.ac.FU(_(h,Le,w),M(O),s(c))}function Ze(h,O,w,c,a){if(w==null)throw Error("Illegal Argument Exception");return B.ac.RQ(_(h,Le,w),M(O),l(c),f(a))}function yt(h,O,w,c,a){if(w==null)throw Error("Illegal Argument Exception");return B.ac.UQ(_(h,Le,w),M(O),s(c),f(a))}function ni(h){B.IL.bind(h)}function si(h,O,w,c,a){var n=null,o=null;if(c){if(!a)throw B.i.O("AOI missing Spatial Reference");n=_(h,Le,c),o=M(a).hh()}return(h=B.iu.SR(M(O).hh(),M(w).hh(),n,o))!==null?h:null}function Lt(h,O,w,c,a){var n=null,o=null;if(c){if(!a)throw B.i.O("AOI missing Spatial Reference");n=_(h,Le,c),o=M(a).hh()}return B.iu.TR(M(O).hh(),M(w).hh(),n,o)}function Nt(h,O,w,c,a,n){if(a===void 0&&(a=null),n===void 0&&(n=null),n){var o=new B.tC;o.Xu=n.densificationStep,o.Lr=n.centralMeridianOfOutputGCS,n.clipWithInputHorizon&&o.KW(n.clipWithInputHorizon),n.clipWithOutputHorizon&&o.LW(n.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(O.length===0)return[];if(a){if(!(n=a.getCachedGeTransformation(w,c)))e:{if(n=a,a=null,n){var u=n.getGTListEntry();if(u!==null){a=new B.rC(null);for(var p=0,y=u.steps;p<y.length;p++){u=y[p];var g=new B.Cx(u.geogtran);u.isInverse&&g.Lz(),a.add(g)}o=B.xr.Pr(M(w).hh(),M(c).hh(),a,o),n.assignCachedGe(w,c,o),n=o;break e}}if(a===null&&n&&n.steps&&0<n.steps.length){for(a=new B.rC(null),p=0,y=n.steps;p<y.length;p++)(u=y[p]).wkid!=-1&&u.wkid!=null?a.add(B.Cx.create(u.wkid,u.isInverse)):a.add(B.Cx.pP(u.wkt,u.isInverse));o=B.xr.Pr(M(w).hh(),M(c).hh(),a,o),n.assignCachedGe(w,c,o),n=o}else n=B.xr.Pr(M(w).hh(),M(c).hh(),a,o)}for(w=[],a=0;a<O.length;a++)o=O[a],w.push(ce(h,o,c,n))}else for(n=B.xr.Pr(M(w).hh(),M(c).hh(),null),w=[],a=0;a<O.length;a++)o=O[a],w.push(ce(h,o,c,n));return w}function ce(h,O,w,c){return O=B.ac.Bh(_(h,Le,O),c),d(h,Le,O,w)}function ye(h,O){h!=null&&(h=h.wkid||h.wkt,xr.has(h),xr.set(h,O),Xt.has(h)&&Xt.delete(h))}function Te(h){h!=null&&(h=h.wkid||h.wkt,xr.has(h)&&(xr.delete(h),Xt.has(h)&&Xt.delete(h)))}function Ge(h,O,w,c){if(w==null||c==null)return[];var a=[],n=0;for(w=B.ac.LS(_(h,Le,w),_(h,Le,c),M(O))||[];n<w.length;n++)a.push(d(h,Le,w[n],O));return a}var Re,B,Ke,Je,Fe=this&&this.__extends||function(){function h(O,w){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var n in a)a.hasOwnProperty(n)&&(c[n]=a[n])})(O,w)}return function(O,w){function c(){this.constructor=O}h(O,w),O.prototype=w===null?Object.create(w):(c.prototype=w.prototype,new c)}}();(function(h){var O;(O=h.sn||(h.sn={}))[O.Unknown=0]="Unknown",O[O.Point=33]="Point",O[O.Line=322]="Line",O[O.Envelope=197]="Envelope",O[O.MultiPoint=550]="MultiPoint",O[O.Polyline=1607]="Polyline",O[O.Polygon=1736]="Polygon",function(c){c[c.enumMild=0]="enumMild",c[c.enumMedium=1]="enumMedium",c[c.enumHot=2]="enumHot"}(h.TK||(h.TK={}));var w=function(){function c(){this.description=null,this.QA=0}return c.prototype.K=function(){return 0},c.prototype.Eb=function(){return-1},c.prototype.Pf=function(a){this.wc(),a!=this.description&&this.un(a)},c.prototype.un=function(){},c.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=h.fe.xR(this.description,a))!=this.description&&this.un(a)},c.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},c.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=h.fe.wR(this.description,a),this.un(a))},c.prototype.Vg=function(){return null},c.prototype.dn=function(){},c.prototype.A=function(){},c.prototype.So=function(){},c.prototype.yc=function(a){this.A(a)},c.prototype.B=function(){return!0},c.prototype.Pa=function(){},c.prototype.Pc=function(){},c.prototype.Ja=function(){return null},c.prototype.copyTo=function(){},c.prototype.He=function(){return 0},c.prototype.Rb=function(){return 0},c.prototype.dG=function(){return this.hasAttribute(1)},c.uf=function(a){return 1+((192&a)>>6)>>1},c.Tn=function(a){return(32&a)!=0},c.PS=function(a){return(128&a)!=0},c.zd=function(a){return(256&a)!=0},c.zj=function(a){return(512&a)!=0},c.Ic=function(a){return(1024&a)!=0},c.prototype.Qf=function(){var a=this.Ja();return this.copyTo(a),a},c.prototype.ng=function(){return null},c.kg=function(a){var n=a.Ja();return a.copyTo(n),n},c.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},c.zx=function(a){var n=a.K();if(c.zj(n))return a.I();if(a.B())return 0;if(n==197)return 4;if(n==33)return 1;if(c.zd(n))return 2;throw h.i.ga("missing type")},c}();h.ba=w})(B||(B={})),Ke=B||(B={}),Je=function(){function h(){this.y=this.x=0}return h.construct=function(O,w){var c=new h;return c.x=O,c.y=w,c},h.cl=function(O){var w=new h;return w.x=O.x,w.y=O.y,w},h.prototype.na=function(O,w){this.x=O,this.y=w},h.prototype.N=function(O){this.x=O.x,this.y=O.y},h.prototype.hq=function(O,w){return this.x===O&&this.y===w},h.prototype.Mz=function(O){return 2220446049250313e-31>=Math.abs(this.x-O.x)&&2220446049250313e-31>=Math.abs(this.y-O.y)},h.prototype.rb=function(O){return this.x===O.x&&this.y===O.y},h.prototype.Nb=function(O){return O==this||O instanceof h&&this.x==O.x&&this.y==O.y},h.prototype.sub=function(O){this.x-=O.x,this.y-=O.y},h.prototype.vc=function(O,w){this.x=O.x-w.x,this.y=O.y-w.y},h.prototype.add=function(O,w){w!==void 0?(this.x=O.x+w.x,this.y=O.y+w.y):(this.x+=O.x,this.y+=O.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(O){this.x=-O.x,this.y=-O.y},h.prototype.IS=function(O,w,c){this.x=O.x*(1-c)+w.x*c,this.y=O.y*(1-c)+w.y*c},h.prototype.Dt=function(O,w){this.x=this.x*O+w.x,this.y=this.y*O+w.y},h.prototype.BW=function(O,w,c){this.x=w.x*O+c.x,this.y=w.y*O+c.y},h.prototype.scale=function(O){this.x*=O,this.y*=O},h.prototype.compare=function(O){return this.y<O.y?-1:this.y>O.y?1:this.x<O.x?-1:this.x>O.x?1:0},h.prototype.normalize=function(){var O=this.length();O==0&&(this.x=1,this.y=0),this.x/=O,this.y/=O},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Uk=function(){return this.x*this.x+this.y*this.y},h.ub=function(O,w){return Math.sqrt(this.zc(O,w))},h.Jy=function(O,w,c,a){return O-=c,w-=a,Math.sqrt(O*O+w*w)},h.prototype.Sh=function(O){return this.x*O.x+this.y*O.y},h.prototype.aD=function(O){return Math.abs(this.x*O.x)+Math.abs(this.y*O.y)},h.prototype.yi=function(O){return this.x*O.y-this.y*O.x},h.prototype.Ct=function(O,w){var c=-this.x*w+this.y*O;this.x=this.x*O+this.y*w,this.y=c},h.prototype.Jv=function(){var O=this.x;this.x=-this.y,this.y=O},h.prototype.HG=function(O){this.x=-O.y,this.y=O.x},h.prototype.cr=function(){var O=this.x;this.x=this.y,this.y=-O},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(O,w){var c=O.su(),a=w.su();return a==c?0>(O=O.yi(w))?1:0<O?-1:0:c<a?-1:1},h.zc=function(O,w){var c=O.x-w.x;return c*c+(O=O.y-w.y)*O},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(O,w){var c=h.ub(O,w),a=h.construct(this.x,this.y);if(c==0)return h.ub(a,O);var n=new h;return n.N(w),n.sub(O),a.sub(O),a.yi(n)/c},h.Wq=function(O,w,c){var a=new Ke.Xb;a.set(w.x),a.sub(O.x);var n=new Ke.Xb;n.set(c.y),n.sub(O.y);var o=new Ke.Xb;o.set(w.y),o.sub(O.y);var u=new Ke.Xb;return u.set(c.x),u.sub(O.x),a.Bg(n),o.Bg(u),a.sub(o),a.rs()?(a=new Ke.jp(w.x),n=new Ke.jp(O.x),o=new Ke.jp(O.y),a=a.kt(n),O=(O=new Ke.jp(c.y)).kt(o),w=(w=new Ke.jp(w.y)).kt(o),c=(c=new Ke.jp(c.x)).kt(n),a=a.nr(O),w=w.nr(c),(a=a.nr(w)).iT()?-1:a.aS()?1:0):0>(c=a.value())?-1:0<c?1:0},h.prototype.dc=function(){return Ke.P.wj(Ke.P.wj())},h}(),Ke.h=Je,function(h){var O=function(){function w(c){this.Ay=this.Ot=0,this.KX=c}return w.prototype.reset=function(){this.Ay=this.Ot=0},w.prototype.add=function(c){c-=this.Ay;var a=this.Ot+c;this.Ay=a-this.Ot-c,this.Ot=a},w.prototype.sub=function(c){this.add(-c)},w.prototype.tm=function(){return this.KX+this.Ot},w}();h.Ex=O,h.mc=function(){function w(){}return w.En=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)},w.sign=function(c){return 0>c?-1:0<c?1:0},w.MK=function(c){return c-360*Math.floor(c/360)},w.round=function(c){return Math.floor(c+.5)},w.ox=function(c){return c*c},w.jq=function(c,a,n){return .5>=n?c+(a-c)*n:a-(a-c)*(1-n)},w.JG=function(c,a,n,o){.5>=n?(o.x=c.x+(a.x-c.x)*n,o.y=c.y+(a.y-c.y)*n):(o.x=a.x-(a.x-c.x)*(1-n),o.y=a.y-(a.y-c.y)*(1-n))},w.gT=function(c,a,n,o,u,p){.5>=u?(p.x=c+(n-c)*u,p.y=a+(o-a)*u):(p.x=n-(n-c)*(1-u),p.y=o-(o-a)*(1-u))},w}()}(B||(B={})),function(h){var O=function(w){function c(){var a=w.call(this)||this;return a.ta=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return Fe(c,w),c.prototype.bc=function(){return h.h.construct(this.ta,this.oa)},c.prototype.$p=function(a){a.x=this.ta,a.y=this.oa},c.prototype.Ec=function(a){this.gm(0,a)},c.prototype.UB=function(a,n){this.gm(0,h.h.construct(a,n))},c.prototype.Vo=function(a){this.cD(0,a)},c.prototype.setStart=function(a){this.pD(0,a)},c.prototype.yv=function(a,n){return this.Pd(0,a,n)},c.prototype.TB=function(a,n,o){this.vn(0,a,n,o)},c.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},c.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},c.prototype.Rc=function(a){this.gm(1,a)},c.prototype.Sl=function(a,n){this.gm(1,h.h.construct(a,n))},c.prototype.Ro=function(a){this.cD(1,a)},c.prototype.setEnd=function(a){this.pD(1,a)},c.prototype.jv=function(a,n){return this.Pd(1,a,n)},c.prototype.JB=function(a,n,o){this.vn(1,a,n,o)},c.prototype.Eb=function(){return 1},c.prototype.B=function(){return this.Bc()},c.prototype.Pa=function(){},c.prototype.He=function(){return 0},c.prototype.Fa=function(a,n,o,u,p){return this.FM(a,n,o,u,p)},c.prototype.isIntersecting=function(a,n){return this.Br(a,n,!1)!=0},c.prototype.ss=function(a,n){return this.tu(a,n,!1)},c.prototype.tu=function(){return null},c.prototype.Bc=function(){return!1},c.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=h.P.mg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var n=this.la.slice(0),o=this.la.length;o<2*a;o++)n[o]=0;this.la=n}},c.bM=function(a,n,o){if(0<o)var u=0;for(var p=0;p<o;p++)n[0+u]=a[0],u++},c.prototype.gm=function(a,n){a!=0?(this.qa=n.x,this.ma=n.y):(this.ta=n.x,this.oa=n.y)},c.prototype.un=function(a){if(this.la!=null){for(var n=h.fe.Kw(a,this.description),o=[],u=c.Ig(this.description,0),p=c.Ig(this.description,1),y=c.Ig(a,0),g=c.Ig(a,1),b=0,S=1,$=a.Ba;S<$;S++){var I=a.ld(S),C=h.sa.Wa(I);if(n[S]==-1){var R=h.sa.te(I);for(I=0;I<C;I++)o[y+b]=R,o[g+b]=R,b++}else for(R=this.description.bk(n[S])-2,I=0;I<C;I++)o[y+b]=this.la[u+R],o[g+b]=this.la[p+R],b++,R++}this.la=o}this.description=a},c.prototype.cD=function(a,n){if(this.Bc())throw h.i.ga("empty geometry");n.Pf(this.description),n.Bc()&&n.wn();for(var o=0;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=0,y=h.sa.Wa(u);p<y;p++){var g=this.Pd(a,u,p);n.setAttribute(u,p,g)}},c.prototype.pD=function(a,n){if(this.wc(),n.Bc())throw h.i.ga("empty geometry");for(var o=n.description,u=0,p=o.Ba;u<p;u++)for(var y=o.Fd(u),g=h.sa.Wa(y),b=0;b<g;b++){var S=n.Vc(y,b);this.vn(a,y,b,S)}},c.prototype.Pd=function(a,n,o){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.ta;if(o>=h.sa.Wa(n))throw h.i.de();var u=this.description.Rf(n);return 0<=u?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.bk(u)-2+o]):h.sa.te(n)},c.prototype.vn=function(a,n,o,u){if(this.wc(),o>=h.sa.Wa(n))throw h.i.de();var p=this.description.Rf(n);0>p&&(this.se(n),p=this.description.Rf(n)),n==0?a!=0?o!=0?this.ma=u:this.qa=u:o!=0?this.oa=u:this.ta=u:(this.la==null&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.bk(p)-2+o]=u)},c.prototype.copyTo=function(a){if(a.K()!=this.K())throw h.i.O();a.description=this.description,a.$x(this.description.Be.length-2),c.bM(this.la,a.la,2*(this.description.Be.length-2)),a.ta=this.ta,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.qp(a)},c.prototype.Vg=function(a,n){var o=new h.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,n),o.wa=o.pa,o.Nk(this.Pd(1,a,n)),o)},c.prototype.UI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Nk(this.Pd(1,0,0)))},c.prototype.Vw=function(a,n){n.Pf(this.description),n.Db(this.ic(a));for(var o=1,u=this.description.Ba;o<u;o++)for(var p=this.description.Fd(o),y=h.sa.Wa(p),g=0;g<y;g++){var b=this.Vc(a,p,g);n.setAttribute(p,g,b)}},c.prototype.AM=function(a){if(this.description!=a.description||this.ta!=a.ta||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var n=0;n<2*(this.description.Be.length-2);n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},c.prototype.reverse=function(){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var n=this.description.Ba;a<n;a++)for(var o=this.description.ld(a),u=0,p=h.sa.Wa(o);u<p;u++){var y=this.Pd(0,o,u),g=this.Pd(1,o,u);this.vn(0,o,u,g),this.vn(1,o,u,y)}},c.prototype.Br=function(a,n,o){var u=a.K();if(this.K()===322){if(u==322)return h.zb.JM(this,a,n,o);throw h.i.Ra()}throw h.i.Ra()},c.prototype.FM=function(a,n,o,u,p){var y=a.K();if(this.K()===322){if(y==322)return h.zb.Yx(this,a,n,o,u,p);throw h.i.Ra()}throw h.i.Ra()},c.prototype.Sx=function(){return null},c.Ig=function(a,n){return n*(a.Be.length-2)},c.prototype.ic=function(a,n){if(n===void 0)return n=new h.h,this.ic(a,n),n;h.mc.gT(this.ta,this.oa,this.qa,this.ma,a,n)},c.prototype.ge=function(){return null},c.prototype.$F=function(){return null},c.prototype.fq=function(){return null},c.prototype.Di=function(){return null},c.prototype.Rn=function(){return null},c.prototype.lg=function(){return null},c.prototype.Tx=function(a,n){return n!==void 0?this.ux(n)-this.ux(a):this.ux(a)},c.prototype.qp=function(){},c.prototype.fl=function(){return null},c.prototype.dh=function(){},c.prototype.Vc=function(){return null},c.prototype.Me=function(){return null},c.prototype.ux=function(){return null},c.prototype.IG=function(){return null},c.prototype.ub=function(a,n){if(!n&&this.Br(a,0,!1)!=0)return 0;n=17976931348623157e292;var o=this.bc(),u=a.ge(o,!1);return o.sub(a.ic(u)),(o=o.length())<n&&(n=o),o=this.xc(),u=a.ge(o,!1),o.sub(a.ic(u)),(o=o.length())<n&&(n=o),o=a.bc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<n&&(n=o),o=a.xc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<n&&(n=o),n},c.prototype.ng=function(){return h.si.im(this,null)},c}(h.ba);h.NC=O}(B||(B={})),new B.h,function(h){var O;(O=h.VK||(h.VK={}))[O.Unknown=-1]="Unknown",O[O.Not=0]="Not",O[O.Weak=1]="Weak",O[O.Strong=2]="Strong",function(c){c[c.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",c[c.IsWeakSimple=2]="IsWeakSimple",c[c.IsStrongSimple=4]="IsStrongSimple",c[c.DirtyOGCFlags=8]="DirtyOGCFlags",c[c.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",c[c.DirtyExactIntervals=64]="DirtyExactIntervals",c[c.DirtyLooseIntervals=128]="DirtyLooseIntervals",c[c.DirtyIntervals=192]="DirtyIntervals",c[c.DirtyIsEnvelope=256]="DirtyIsEnvelope",c[c.DirtyLength2D=512]="DirtyLength2D",c[c.DirtyRingAreas2D=1024]="DirtyRingAreas2D",c[c.DirtyCoordinates=1993]="DirtyCoordinates",c[c.DirtyAllInternal=65535]="DirtyAllInternal",c[c.DirtyAll=16777215]="DirtyAll"}(h.HK||(h.HK={}));var w=function(c){function a(){var n=c.call(this)||this;return n.Jm=65535,n.xa=0,n.Rg=-1,n.Cb=null,n}return Fe(a,c),a.prototype.qp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.ck=function(n){return(this.Jm&n)!=0},a.prototype.Nf=function(n,o){this.Jm=o?this.Jm|n:this.Jm&~n},a.prototype.oc=function(){this.ck(32)&&this.XM()},a.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(n,o){if(0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.oc(),o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.Fd(u),y=0,g=h.sa.Wa(p);y<g;y++){var b=this.Aa[u].gg(g*n+y);o.setAttribute(p,y,b)}},a.prototype.It=function(n,o){this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var y=u.Fd(p),g=h.sa.Wa(y),b=0;b<g;b++){var S=o.Vc(y,b);this.setAttribute(y,n,b,S)}},a.prototype.D=function(n,o){if(0>n||n>=this.I())throw h.i.de();this.oc(),this.Aa[0].uc(2*n,o)},a.prototype.Oa=function(n){var o=new h.h;return this.D(n,o),o},a.prototype.Hc=function(n,o){this.Aa[0].uc(2*n,o)},a.prototype.Db=function(n,o,u){if(0>n||n>=this.xa)throw h.i.de();this.oc();var p=this.Aa[0];u!==void 0?(p.write(2*n,o),p.write(2*n+1,u)):p.Vt(2*n,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw h.i.de();this.oc();var n=this.Aa[0],o=new h.Od;return o.x=n.read(NaN),o.y=n.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):h.sa.te(1),o},a.prototype.ZB=function(n){if(0>n||n>=this.I())throw h.i.de();this.se(1),this.oc(),this.Qc(1993);var o=this.Aa[0];o.write(2*n,(void 0).x),o.write(2*n+1,(void 0).y),this.Aa[1].rr(n,(void 0).z)},a.prototype.Vc=function(n,o,u){if(0>o||o>=this.xa)throw h.i.de();var p=h.sa.Wa(n);if(u>=p)throw h.i.de();this.oc();var y=this.description.Rf(n);return 0<=y?this.Aa[y].gg(o*p+u):h.sa.te(n)},a.prototype.tF=function(n,o){return this.Vc(n,o,void 0)},a.prototype.setAttribute=function(n,o,u,p){if(0>o||o>=this.xa)throw h.i.de();var y=h.sa.Wa(n);if(u>=y)throw h.i.de();this.se(n),this.oc(),n=this.description.Rf(n),this.Qc(1993),this.Aa[n].rr(o*y+u,p)},a.prototype.vb=function(n){return this.vx(),this.se(n),this.oc(),this.Aa[this.description.Rf(n)]},a.prototype.kn=function(n,o){if(o!=null&&h.sa.Vp(n)!=o.Vp())throw h.i.O();this.se(n),n=this.description.Rf(n),this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Aa[n]=o,this.Qc(16777215)},a.prototype.un=function(n){var o=null;if(this.Aa!=null){var u=h.fe.Kw(n,this.description);o=[];for(var p=0,y=n.Ba;p<y;p++)u[p]!=-1&&(o[p]=this.Aa[u[p]])}this.description=n,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.vD=function(n){this.yu(!0),n instanceof h.l?this.aa.A(n):this.aa.So(n)},a.prototype.WM=function(n){this.yu(!1),n instanceof h.l?this.aa.A(n):this.aa.So(n)},a.prototype.dn=function(n){this.yu(!0),this.aa.copyTo(n)},a.prototype.A=function(n){this.vD(n)},a.prototype.So=function(n){this.vD(n)},a.prototype.yc=function(n){this.WM(n)},a.prototype.Vg=function(n,o){var u=new h.Oc;return this.Bc()?(u.Pa(),u):(this.yu(!0),this.aa.Vg(n,o))},a.prototype.dc=function(){var n=this.description.dc();if(!this.Bc())for(var o=this.I(),u=0,p=this.description.Ba;u<p;u++)n=this.Aa[u].Cn(n,0,o*h.sa.Wa(this.description.Fd(u)));return n},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&this.description.Nb(n.description))||this.Bc()!=n.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=n.I())return!1;for(var u=0;u<this.description.Ba;u++){var p=this.description.ld(u),y=this.vb(p),g=n.vb(p);if(!y.Nb(g,0,o*h.sa.Wa(p)))return!1}return!0},a.prototype.copyTo=function(n){if(n.K()!=this.K())throw h.i.O();this.ZC(n)},a.prototype.ZC=function(n){this.oc(),n.description=this.description,n.Aa=null;var o=this.description.Ba,u=null;if(this.Aa!=null){u=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(u[p]=this.Aa[p].BB(this.I()*h.sa.Wa(this.description.Fd(p))))}this.aa!=null?(n.aa=this.aa.Ja(),this.aa.copyTo(n.aa)):n.aa=null,n.xa=this.xa,n.Jm=this.Jm,n.Aa=u;try{this.qp(n)}catch{throw n.Pa(),h.i.hu()}},a.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(n){n==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=n,this.gM(),this.wc()},a.prototype.yu=function(n){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(n);for(var o=1;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=h.sa.Wa(u),y=this.Aa[o],g=0;g<p;g++){var b=new h.Oc;b.Pa();for(var S=0;S<this.xa;S++){var $=y.gg(S*p+g);b.$b($)}this.aa.setInterval(u,g,b)}n&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var n=this.Aa[0],o=new h.h,u=0;u<this.xa;u++)n.uc(2*u,o),this.aa.$b(o)},a.prototype.Ap=function(n){n.Pa();for(var o=this.Aa[0],u=new h.h,p=0;p<this.xa;p++)o.uc(2*p,u),n.$b(u)},a.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var n=0;n<this.description.Ba;n++){var o=this.description.Fd(n);if(this.Aa[n]!=null){var u=h.sa.Wa(o),p=h.P.truncate(this.Aa[n].size/u);p<this.xa&&(p=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[n].resize(p*u,h.sa.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[n]=h.Zc.TE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(n){if(0>n)throw h.i.O();n!=this.xa&&(this.xa=n,this.Qc(65535))},a.prototype.qm=function(n){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=n)return this.ck(8)?1:2}return-1},a.prototype.Eh=function(n,o){if(this.LT=o,n==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),n==0)this.Nf(2,!1),this.Nf(4,!1);else if(n==1)this.Nf(2,!0),this.Nf(4,!1);else{if(n!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.fD=function(n,o,u,p){if(0>n||n>=this.xa||0>o||o>=this.xa)throw h.i.ga("index out of bounds");this.oc(),p.Pf(this.description),p.B()&&p.wn();for(var y=0;y<this.description.Ba;y++)for(var g=this.description.Fd(y),b=0,S=h.sa.Wa(g);b<S;b++){var $=this.Aa[y].gg(S*n+b),I=this.Aa[y].gg(S*o+b);p.setAttribute(g,b,h.mc.jq($,I,u))}},a.prototype.Ar=function(n,o){var u=this.Aa[0].o,p=u[2*n]-u[2*o];return n=u[2*n+1]-u[2*o+1],Math.sqrt(p*p+n*n)},a.prototype.FR=function(n){if(0>n||n>=this.xa)throw h.i.de();this.oc();var o=new h.Ta;o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.ld(u),y=0,g=h.sa.Wa(p);y<g;y++){var b=this.Aa[u].gg(g*n+y);o.setAttribute(p,y,b)}return o},a.prototype.Fh=function(n,o){if(0>n||n>=this.xa)throw h.i.de();if(o.B())throw h.i.O();this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var y=u.ld(p),g=h.sa.Wa(y),b=0;b<g;b++){var S=o.Vc(y,b);this.setAttribute(y,n,b,S)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(h.ba);h.Fx=w}(B||(B={})),function(h){var O=function(){function w(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.ao=null}return w.prototype.Xo=function(c){this.ao=c},w.prototype.MP=function(){this.Tv=!1},w.prototype.Ee=function(c){this.ob.Ee(c)},w.prototype.Rr=function(c){var a=this.ob.De();return this.nX(a),this.qX(c,a),a},w.prototype.HP=function(c){this.ob.kd(c)},w.prototype.addElement=function(c,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.AD(c,0,a)},w.prototype.ED=function(c){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(c,1,this.Ne)},w.prototype.zn=function(c){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,n=this.ob.o;if(a==-1||n[7*a]==-1)return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),(n=this.ob.o)[7*a]=c,this.xp(-1,c,a,n),c;var o=a==-1?-1:n[7*a+2];return c=this.ob.Nl([-1,-1,o,c,this.il(),-1,-1]),(n=this.ob.o)[7*o+1]=c,this.ky(c,n),n[7*c+2]===-1&&(n[7*a]=c),this.xp(-1,c,a,n),c},w.prototype.Bu=function(c,a,n,o){var u=-1;u==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),u=this.Ne);var p=this.ob.o;if(u==-1||p[7*u]==-1)return n=this.ob.Nl([-1,-1,-1,n,this.il(),-1,-1]),(p=this.ob.o)[7*u]=n,this.xp(-1,n,u,p),n;if(o){o=a!=-1?this.ao.compare(this,n,a):-1;var y=c!=-1?this.ao.compare(this,n,c):1}else o=-1,y=1;if(o==0||y==0)return p[7*u+3]=o==0?a:c,-1;for((a!=-1&&c!=-1?this.Vm>h.P.XA(this.Vm)>>1:a!=-1)?c=a:o=y,a=!0;;){if(0>o){if((y=p[7*c])==-1){o=c,n=this.ob.Nl([-1,-1,c,n,this.il(),-1,-1]),(p=this.ob.o)[7*c]=n;break}c=y}else{if((y=p[7*c+1])==-1){o=p[7*c+6],n=this.ob.Nl([-1,-1,c,n,this.il(),-1,-1]),(p=this.ob.o)[7*c+1]=n;break}c=y}a&&(o*=-1,a=!1)}return this.ky(n,p),p[7*n+2]===-1&&(p[7*u]=n),this.xp(o,n,u,p),n},w.prototype.AF=function(){return this.dR(this.Ne)},w.prototype.wd=function(c,a){a=a==-1?this.Ne:a,this.Tv?this.GP(c,a):this.eY(c,a)},w.prototype.search=function(c,a){for(a=this.uv(a);a!=-1;){var n=this.ao.compare(this,c,a);if(n==0)return a;a=0>n?this.nl(a):this.Zp(a)}return-1},w.prototype.DW=function(c){for(var a=this.uv(-1),n=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(n=a,a=this.Zp(a))}return n},w.prototype.pJ=function(c){for(var a=this.uv(-1),n=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?(n=a,a=this.nl(a)):a=this.Zp(a)}return n},w.prototype.ka=function(c){return this.ob.U(c,3)},w.prototype.nl=function(c){return this.ob.U(c,0)},w.prototype.Zp=function(c){return this.ob.U(c,1)},w.prototype.getParent=function(c){return this.ob.U(c,2)},w.prototype.lb=function(c){return this.ob.U(c,6)},w.prototype.xe=function(c){return this.ob.U(c,5)},w.prototype.sc=function(c){return c==-1?this.ml(this.Ne):this.ml(c)},w.prototype.Gc=function(c){return c==-1?this.bs(this.Ne):this.bs(c)},w.prototype.UR=function(c){return c==-1?this.XF(this.Ne):this.XF(c)},w.prototype.Uj=function(c,a){this.IB(c,a)},w.prototype.uv=function(c){return c==-1?this.TF(this.Ne):this.TF(c)},w.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},w.prototype.size=function(c){return c==-1?this.VF(this.Ne):this.VF(c)},w.prototype.FN=function(c,a){for(var n=a[7*c],o=a[7*c+1],u=a[7*c+4];n!=-1||o!=-1;){var p=n!=-1?a[7*n+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,u<=Math.min(p,o))break;p<=o?this.nJ(n,a):this.mJ(c,a),n=a[7*c],o=a[7*c+1]}},w.prototype.ky=function(c,a){if(this.Tv)for(var n=a[7*c+4],o=a[7*c+2];o!=-1&&a[7*o+4]>n;)a[7*o]==c?this.nJ(c,a):this.mJ(o,a),o=a[7*c+2]},w.prototype.mJ=function(c,a){var n=a[7*c+1];a[7*n+2]=a[7*c+2],a[7*c+2]=n;var o=a[7*n];a[7*c+1]=o,o!=-1&&(a[7*o+2]=c),a[7*n]=c,(o=a[7*n+2])!=-1&&(a[7*o]==c?a[7*o]=n:a[7*o+1]=n)},w.prototype.nJ=function(c,a){var n=a[7*c+2];a[7*c+2]=a[7*n+2],a[7*n+2]=c;var o=a[7*c+1];a[7*n]=o,o!=-1&&(a[7*o+2]=n),a[7*c+1]=n,(o=a[7*c+2])!=-1&&(a[7*o]===n?a[7*o]=c:a[7*o+1]=c)},w.prototype.Rk=function(c,a){this.ob.T(c,2,a)},w.prototype.OB=function(c,a){this.ob.T(c,0,a)},w.prototype.SB=function(c,a){this.ob.T(c,1,a)},w.prototype.RB=function(c,a){this.ob.T(c,5,a)},w.prototype.fx=function(c,a){this.ob.T(c,6,a)},w.prototype.SJ=function(c,a){this.ob.T(a,0,c)},w.prototype.nX=function(c){this.ob.T(c,4,0)},w.prototype.qX=function(c,a){this.ob.T(a,5,c)},w.prototype.TF=function(c){return c==-1?-1:this.ob.U(c,0)},w.prototype.ml=function(c){return c==-1?-1:this.ob.U(c,1)},w.prototype.bs=function(c){return c==-1?-1:this.ob.U(c,2)},w.prototype.dR=function(c){return c==-1?-1:this.ob.U(c,3)},w.prototype.VF=function(c){return c==-1?0:this.ob.U(c,4)},w.prototype.XF=function(c){return this.ob.U(c,5)},w.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},w.prototype.hl=function(c){c!=-1&&this.ob.kd(c)},w.prototype.il=function(){return this.Vm=h.P.XA(this.Vm),1073741823&this.Vm},w.prototype.AD=function(c,a,n){var o=this.ob.o;if(n==-1||o[7*n]==-1)return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),(o=this.ob.o)[7*n]=c,this.xp(-1,c,n,o),c;for(var u=n==-1?-1:o[7*n];;){var p=a==-1?1:this.ao.compare(this,c,u);if(0>p){if((p=this.nl(u))==-1){a=u,c=this.ob.Nl([-1,-1,u,c,this.il(),-1,-1]),(o=this.ob.o)[7*u]=c;break}u=p}else{if(a==1&&p==0)return o[7*n+3]=u,-1;if((p=o[7*u+1])==-1){a=o[7*u+6],c=this.ob.Nl([-1,-1,u,c,this.il(),-1,-1]),(o=this.ob.o)[7*u+1]=c;break}u=p}}return this.ky(c,o),o[7*c+2]===-1&&(o[7*n]=c),this.xp(a,c,n,o),c},w.prototype.xp=function(c,a,n,o){if(c!=-1){var u=o[7*c+5];o[7*c+5]=a}else u=n==-1?-1:o[7*n+2];o[7*a+5]=u,u!=-1&&(o[7*u+6]=a),o[7*a+6]=c,c==(n==-1?-1:o[7*n+1])&&(o[7*n+1]=a),c==-1&&(o[7*n+2]=a),o[7*n+4]=(n==-1?0:o[7*n+4])+1},w.prototype.vB=function(c,a){var n=this.ob.o,o=n[7*c+5];c=n[7*c+6],o!=-1?n[7*o+6]=c:n[7*a+1]=c,c!=-1?n[7*c+5]=o:n[7*a+2]=o,n[7*a+4]=a===-1?-1:n[7*a+4]-1},w.prototype.eY=function(c,a){this.vB(c,a);var n=this.nl(c),o=this.Zp(c),u=this.getParent(c),p=c;if(n!=-1&&o!=-1){this.Vm=h.P.XA(this.Vm);var y=1073741823<this.Vm?this.lb(c):this.xe(c),g=this.getParent(y)==c;this.ob.bC(c,y,0),this.ob.bC(c,y,1),this.ob.bC(c,y,2),u!=-1?this.nl(u)==c?this.OB(u,y):this.SB(u,y):this.SJ(y,a),g?(n==y?(this.OB(y,c),this.Rk(o,y)):o==y&&(this.SB(y,c),this.Rk(n,y)),this.Rk(c,y),u=y):(this.Rk(n,y),this.Rk(o,y),u=this.getParent(c),p=y),n=this.nl(c),o=this.Zp(c),n!=-1&&this.Rk(n,c),o!=-1&&this.Rk(o,c)}n=n!=-1?n:o,u==-1?this.SJ(n,a):this.nl(u)==p?this.OB(u,n):this.SB(u,n),n!=-1&&this.Rk(n,u),this.hl(c)},w.prototype.GP=function(c,a){var n=this.ob.o;n[7*c+4]=2147483647;var o=-1,u=-1,p=a===-1?-1:n[7*a],y=p==c;if(y&&(o=n[7*p],u=n[7*p+1],o==-1&&u==-1))return this.vB(p,a),this.hl(p),void(n[7*a]=-1);this.FN(c,n),(p=n[7*c+2])!=-1&&(n[7*p]==c?n[7*p]=-1:n[7*p+1]=-1),this.vB(c,a),this.hl(c),y&&(n[7*a]=o==-1||n[7*o+2]!=-1?u:o)},w.prototype.IB=function(c,a){this.ob.T(c,3,a)},w}();h.$j=O}(B||(B={})),function(h){var O=function(){function w(c,a){c!==void 0&&this.L(c,a)}return w.prototype.L=function(c,a){this.pa=c,this.wa=a,this.normalize()},w.prototype.isIntersecting=function(c){return this.pa<=c.pa?this.wa>=c.pa:c.wa>=this.pa},w.prototype.move=function(c){this.B()||(this.pa+=c,this.wa+=c)},w.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var c=this.pa;this.pa=this.wa,this.wa=c}isNaN(this.wa)&&this.Pa()}},w.prototype.Pa=function(){this.wa=this.pa=NaN},w.prototype.B=function(){return isNaN(this.pa)},w.prototype.$b=function(c){typeof c=="number"?this.B()?this.wa=this.pa=c:this.Nk(c):c.B()||(this.B()?(this.pa=c.pa,this.wa=c.wa):(this.pa>c.pa&&(this.pa=c.pa),this.wa<c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa()))},w.prototype.Nk=function(c){c<this.pa?this.pa=c:c>this.wa&&(this.wa=c)},w.prototype.contains=function(c){return typeof c=="number"?c>=this.pa&&c<=this.wa:c.pa>=this.pa&&c.wa<=this.wa},w.prototype.Fa=function(c){this.B()||c.B()?this.Pa():(this.pa<c.pa&&(this.pa=c.pa),this.wa>c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa())},w.prototype.X=function(c){this.B()||(this.pa-=c,this.wa+=c,this.wa<this.pa&&this.Pa())},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},w.prototype.FB=function(c,a){c>a?(this.pa=a,this.wa=c):(this.pa=c,this.wa=a)},w.prototype.Kt=function(c){return h.P.Tk(c,this.pa,this.wa)},w.prototype.S=function(){return this.wa-this.pa},w.prototype.tf=function(){return .5*(this.pa+this.wa)},w.prototype.Nb=function(c){return c==this||c instanceof w&&(!(!this.B()||!c.B())||this.pa==c.pa&&this.wa==c.wa)},w.prototype.dc=function(){return h.P.wj(h.P.wj())},w}();h.Oc=O}(B||(B={})),function(h){var O=new h.Oc,w=new h.Oc,c=function(){this.oe=null,this.pb=-1,this.tb=new h.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new h.Oc,this.Wf.FB(0,0)};h.EY=c;var a=function(){function n(o,u,p){this.g=o,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=u,this.Pq=10*u,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=p,this.OA=new c,this.TH=new c,h.P.truncate(3*o.gd/2)}return n.prototype.hG=function(o,u,p,y){o.oe=y===null?null:y[p[5*u]],o.Vv=o.oe!=null,o.Vv||((y=p[5*u+2])!==-1&&this.g.hW(p[5*u],p[5*y],o.tb),o.oe=o.tb,o.Wf.FB(o.tb.ta,o.tb.qa),o.Wf.wa+=this.ra,o.tb.mI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.lA=(o.tb.qa-o.tb.ta)/(o.tb.ma-o.tb.oa)))},n.prototype.JO=function(o,u){var p=o.Br(u,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(ht),o.Vr(ut),u.$p(pt),u.Vr(St),Ne.na(this.Mq,this.Jk),ht.rb(pt)&&this.Jk==ht.y?0>ut.compare(St)?Ne.N(ut):Ne.N(St):ht.rb(St)&&this.Jk==ht.y?0>ut.compare(pt)?Ne.N(ut):Ne.N(pt):pt.rb(ut)&&this.Jk==pt.y?0>ht.compare(St)?Ne.N(ht):Ne.N(St):ut.rb(St)&&this.Jk==ut.y&&(0>ht.compare(pt)?Ne.N(ht):Ne.N(pt)),o.Me(Ne.y,Ne.x)<u.Me(Ne.y,Ne.x)?-1:1)},n.prototype.HO=function(o,u){if(o.tb.oa==u.tb.oa&&o.tb.ta==u.tb.ta)return o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa?this.bA?this.Ly():0:this.KE(o,u);if(o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa)return this.JE(o,u);var p=this.JE(o,u);return o=this.KE(o,u),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},n.prototype.DO=function(o,u){if(o.qa>u.qa){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.qa-o.ta)<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 1},n.prototype.EO=function(o,u){if(o.ta<u.ta){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.ta-o.qa)<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi();return-1},n.prototype.FO=function(o,u){var p=new h.h;p.vc(u.xc(),u.bc()),p.cr(),p.normalize();var y=new h.h;y.vc(o.bc(),u.bc());var g=new h.h;g.vc(o.xc(),u.bc()),y=y.Sh(p),p=g.Sh(p),g=Math.abs(y);var b=Math.abs(p);if(g<b){if(g<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi()}else if(b<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 0>y&&0>p?-1:0<y&&0<p?1:this.zi()},n.prototype.IE=function(o,u){return o.oa==u.oa&&o.ta==u.ta?this.DO(o,u):o.ma==u.ma&&o.qa==u.qa?this.EO(o,u):this.FO(o,u)},n.prototype.GO=function(o,u){return o.ma==u.ma&&o.qa==u.qa&&o.oa==u.oa&&o.ta==u.ta?this.bA?this.Ly():0:this.zi()},n.prototype.JE=function(o,u){var p=1;if(o.tb.oa<u.tb.oa){p=-1;var y=o;o=u,u=y}o=o.tb,y=u.tb;var g=o.ta-y.ta;u=u.lA*(o.oa-y.oa);var b=this.Pq;return g<u-b?-p:g>u+b?p:y.xi(o.ta,o.oa,this.ra)?this.zi():g<u?-p:p},n.prototype.KE=function(o,u){var p=1;if(u.tb.ma<o.tb.ma){p=-1;var y=o;o=u,u=y}o=o.tb,y=u.tb;var g=o.qa-y.ta;u=u.lA*(o.ma-y.oa);var b=this.Pq;return g<u-b?-p:g>u+b?p:y.xi(o.qa,o.ma,this.ra)?this.zi():g<u?-p:p},n.prototype.Ly=function(){return this.sg=!0,this.Pi=new h.Nd(5,this.No,this.ht),-1},n.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new h.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},n.prototype.IO=function(o,u,p,y){if(this.sg)return-1;var g=this.JH==this.Jk&&this.IH==this.Mq;if(g&&o==this.Ys)var b=this.KH;else b=NaN,this.Ys=-1;return g&&u==this.Zs?g=this.LH:(g=NaN,this.Zs=-1),p.oe.UI(O),y.oe.UI(w),O.wa<w.pa?-1:w.wa<O.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(b)&&(this.Ys=o,this.KH=b=o=p.oe.Me(this.Jk,this.Mq)),isNaN(g)&&(this.Zs=u,this.LH=g=o=y.oe.Me(this.Jk,this.Mq)),Math.abs(b-g)<=this.ra?this.JO(p.oe,y.oe):b<g?-1:b>g?1:0)},n.prototype.Mr=function(){this.sg=!1},n.prototype.tm=function(){return this.Pi},n.prototype.VJ=function(o,u){this.Jk=o,this.Mq=u,this.ht=this.No=this.Zs=this.Ys=-1},n.prototype.compare=function(o,u,p){return this.sg?-1:(o=o.ka(p),this.Fm=p,this.ME(u,u,o,o))},n.prototype.ME=function(o,u,p,y){if(this.No==u)var g=this.OA;else this.No=u,g=this.OA,this.OA.pb=o,this.hG(g,u,this.g.ud.o,this.g.Te);if(b==null){this.ht=y;var b=this.TH;this.TH.pb=p,this.hG(b,y,this.g.ud.o,this.g.Te)}return g.Vv||b.Vv?this.IO(u,y,g,b):g.Wf.wa<b.Wf.pa?-1:b.Wf.wa<g.Wf.pa?1:(o=g.Xv?1:0,(o|=b.Xv?2:0)==0?this.HO(g,b):o==1?this.IE(g.tb,b.tb):o==2?-1*this.IE(b.tb,g.tb):this.GO(g.tb,b.tb))},n}();h.PC=a}(B||(B={})),function(h){var O=function(){function w(c,a){this.g=c,this.ra=a,this.sg=!1,this.No=-1,this.Wf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.je=new h.zb,this.Fm=-1,this.wA=17976931348623157e292}return w.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},w.prototype.Fh=function(c){this.Iq.N(c)},w.prototype.compare=function(c,a){return this.NE(a,c.ka(a))},w.prototype.NE=function(c,a){var n=this.g.cc(a)!=null;if(n||(this.g.fd(a,this.je),this.Wf.FB(this.je.ta,this.je.qa)),n)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=c,this.sg=!0,0;this.je.mI(),n=this.je.bc(),(a=new h.h).vc(this.je.xc(),n),a.cr();var o=new h.h;return o.vc(this.Iq,n),n=a.Sh(o),(n/=a.length())<10*-this.ra?-1:n>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((a=Math.abs(n))<this.wA&&(this.Fm=c,this.wA=a),this.sg=!0,a<.25*this.ra)?0:0>n?-1:1},w}();h.WL=O}(B||(B={})),function(h){function O(c,a,n,o){n=new Float64Array(c.subarray(n,o)),c.set(n,a)}var w=function(){function c(a){this.Pb=this.rk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Float64Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Dn=function(a){var n=new c(0);return n.o=new Float64Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Float64Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.BB=function(a){return c.Nr(this,a)},c.prototype.gg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Cn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.wj(this.read(n));return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var y=this.size;if(this.resize(y+o),u)this.o.set(a.o.subarray(n,n+o),y);else{u=o;for(var g=0;g<o;g+=p){u-=p;for(var b=0;b<p;b++)this.o[y+g+b]=a.o[n+u+b]}}},c.prototype.On=function(a,n,o,u,p,y,g){if(this.Pb)throw h.i.Hb();if(!p&&(1>y||u%y!=0))throw h.i.O();var b=this.size-g;if(b<u&&this.resize(this.size+u-b),O(this.o,a+u,a,a+(g-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,g=0;g<u;g+=y)for(p-=y,b=0;b<y;b++)this.o[a+g+b]=n.o[o+p+b]},c.prototype.Dz=function(a,n,o,u,p,y){if(this.Pb)throw h.i.Hb();if(0>y&&(y=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,O(this.o,a+2*u,a,a+(y-a)),p)for(p=0;p<u;p++)y=n[o++],this.o[a++]=y.x,this.o[a++]=y.y;else{p=0;for(var g=u-1;p<u;++p)y=n[o+g],this.o[a++]=y.x,this.o[a++]=y.y,g--}},c.prototype.Nn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,O(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();O(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,y){if(0>a||0>n||0>u||!p&&(0>=y||n%y!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,y);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-y,y==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/y);p<n;p++){for(var g=0;g<y;g++)this.o[a+g]=o.o[u+g];a+=y,u-=y}},c.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&O(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var y=0;y<o;y++){var g=this.o[a+p+y];this.o[a+p+y]=this.o[a+n+y],this.o[a+n+y]=g}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var y=0;y<p;y++){var g=this.o[o+y];this.o[o+y]=this.o[a+y],this.o[a+y]=g}o+=p,a-=p}},c.prototype.qC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.pC=function(a,n,o){if(0>a||0>n)throw h.i.O();if(n!=0){this.size<(n<<1)+a&&this.resize((n<<1)+a),n+=0;for(var u=0;u<n;u++)this.o[a]=o[u][0],this.o[a+1]=o[u][1],a+=2}},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.pB=function(a,n,o){if(0>a||0>n||this.size<(n>>1)+a)throw h.i.O();if(n!=0){n=0+n;for(var u=0;u<n;u++)o[u][0]=this.o[a],o[u][1]=this.o[a+1],a+=2}},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.rk=this.Pb=!0},c.prototype.Wd=function(a,n,o){Array.prototype.sort.call(this.o.subarray(a,n),o)},c.prototype.Vp=function(){return 1},c}();h.ce=w}(B||(B={})),function(h){function O(c,a,n,o){n=new Int32Array(c.subarray(n,o)),c.set(n,a)}h.nY=function(){this.random=1973};var w=function(){function c(a){this.Pb=this.rk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Int32Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Dn=function(a){var n=new c(0);return n.o=new Int32Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int32Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.BB=function(a){return c.Nr(this,a)},c.prototype.gg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Cn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.Vh(this.read(n),a);return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var y=this.size;if(this.resize(y+o),u)this.o.set(a.o.subarray(n,n+o),y);else{u=o;for(var g=0;g<o;g+=p){u-=p;for(var b=0;b<p;b++)this.o[y+g+b]=a.o[n+u+b]}}},c.prototype.On=function(a,n,o,u,p,y,g){if(this.Pb)throw h.i.Hb();if(!p&&(1>y||u%y!=0))throw h.i.O();if(O(this.o,a+u,a,a+(g-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,g=0;g<u;g+=y){p-=y;for(var b=0;b<y;b++)this.o[a+g+b]=n.o[o+p+b]}},c.prototype.Dz=function(a,n,o,u,p,y){if(this.Pb)throw h.i.Hb();if(0>y&&(y=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,O(this.o,a+2*u,a,a+(y-a)),p)for(p=0;p<u;p++)y=n[o++],this.o[a++]=y.x,this.o[a++]=y.y;else{p=0;for(var g=u-1;p<u;++p)y=n[o+g],this.o[a++]=y.x,this.o[a++]=y.y,g--}},c.prototype.Nn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,O(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();O(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,y){if(0>a||0>n||0>u||!p&&(0>=y||n%y!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,y);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-y,y==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/y);p<n;p++){for(var g=0;g<y;g++)this.o[a+g]=o.o[u+g];a+=y,u-=y}},c.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&O(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var y=0;y<o;y++){var g=this.o[a+p+y];this.o[a+p+y]=this.o[a+n+y],this.o[a+n+y]=g}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var y=0;y<p;y++){var g=this.o[o+y];this.o[o+y]=this.o[a+y],this.o[a+y]=g}o+=p,a-=p}},c.prototype.qC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.rk=this.Pb=!0},c.prototype.Wd=function(a,n,o){10>n-a?c.mG(this.o,a,n,o):c.lB(this.o,a,n-1,o)},c.prototype.Vp=function(){return 2},c.prototype.Gc=function(){return this.o[this.size-1]},c.prototype.Jf=function(){this.resize(this.size-1)},c.prototype.XW=function(a){this.o[this.size-1]=a},c.prototype.NV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},c.prototype.gF=function(a){for(var n=0,o=this.size;n<o;n++)if(this.o[n]==a)return n;return-1},c.prototype.cG=function(a){return 0<=this.gF(a)},c.mG=function(a,n,o,u){for(var p=n;p<o;p++){for(var y=a[p],g=p-1;g>=n&&0<u(a[g],y);)a[g+1]=a[g],g--;a[g+1]=y}},c.sx=function(a,n,o){var u=a[o];a[o]=a[n],a[n]=u},c.lB=function(a,n,o,u){if(!(n>=o))for(;;){if(9>o-n){c.mG(a,n,o+1,u);break}var p=a[n];c.sx(a,n,o);for(var y=n,g=n;g<o;g++)0>=u(a[g],p)&&(c.sx(a,y,g),y+=1);c.sx(a,y,o),y-n<o-y?(c.lB(a,n,y-1,u),n=y+1):(c.lB(a,y+1,o,u),o=y-1)}},c}();h.ja=w}(B||(B={})),function(h){function O(c,a,n,o){n=new Int8Array(c.subarray(n,o)),c.set(n,a)}var w=function(){function c(a){this.o=null;var n=a;2>n&&(n=2),this.o=new Int8Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Dn=function(a){var n=new c(0);return n.o=new Int8Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int8Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.BB=function(a){return c.Nr(this,a)},c.prototype.gg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Cn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.Vh(this.read(n),a);return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var y=this.size;if(this.resize(y+o),u)this.o.set(a.o.subarray(n,n+o),y);else{u=o;for(var g=0;g<o;g+=p){u-=p;for(var b=0;b<p;b++)this.o[y+g+b]=a.o[n+u+b]}}},c.prototype.On=function(a,n,o,u,p,y,g){if(this.Pb)throw h.i.Hb();if(!p&&(1>y||u%y!=0))throw h.i.O();if(O(this.o,a+u,a,a+(g-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,g=0;g<u;g+=y){p-=y;for(var b=0;b<y;b++)this.o[a+g+b]=n.o[o+p+b]}},c.prototype.Nn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,O(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.Dz=function(a,n,o,u,p,y){if(this.Pb)throw h.i.Hb();if(0>y&&(y=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,O(this.o,a+2*u,a,a+(y-a)),p)for(p=0;p<u;p++)y=n[o++],this.o[a++]=y.x,this.o[a++]=y.y;else{p=0;for(var g=u-1;p<u;++p)y=n[o+g],this.o[a++]=y.x,this.o[a++]=y.y,g--}},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();O(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,y){if(0>a||0>n||0>u||!p&&(0>=y||n%y!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,y);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-y,y==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/y);p<n;p++){for(var g=0;g<y;g++)this.o[a+g]=o.o[u+g];a+=y,u-=y}},c.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&O(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var y=0;y<o;y++){var g=this.o[a+p+y];this.o[a+p+y]=this.o[a+n+y],this.o[a+n+y]=g}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var y=0;y<p;y++){var g=this.o[o+y];this.o[o+y]=this.o[a+y],this.o[a+y]=g}o+=p,a-=p}},c.prototype.qC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.rk=this.Pb=!0},c.prototype.Wd=function(a,n,o){n=this.o.subarray(a,n),Array.prototype.sort.call(n,o),this.o.set(n,a)},c.prototype.uJ=function(a,n){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=n},c.prototype.FE=function(a,n){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~n},c.prototype.Vp=function(){return 1},c}();h.rn=w}(B||(B={})),function(h){h.Zc=function(){function O(){}return O.Or=function(w,c){return h.rn.rf(w,c)},O.Fn=function(w,c){return h.ce.rf(w,c)},O.kP=function(w,c,a){switch(w){case 1:w=h.ce.rf(c,a);break;case 2:w=h.ja.rf(c,a);break;case 4:w=h.rn.rf(c,a);break;default:throw h.i.Ra()}return w},O.TE=function(w,c){return O.kP(h.sa.Vp(w),c*h.sa.Wa(w),h.sa.te(w))},O.Qh=function(w,c){return h.ja.rf(w,c)},O.lI=function(w){var c,a=[];for(c=0;c<w;c++)a.push(null);return a},O}()}(B||(B={})),function(h){h.ha=function(O){O===void 0&&(O=0),this.u=O}}(B||(B={})),function(h){h.IL=function(){function O(){}return O.bind=function(w){h.Tc=w.PeDefs,h.qf=w.PeFactory,h.IC=w.PeVertcs,h.gj=w.PeCSTransformations,h.HC=w.PeGTTransformations,h.GL=w.PeGeogtran,h.FL=w.PeFactoryCodechange,h.GC=w.PeGCSExtent,h.Eg=w.PePCSInfo,h.HL=w.PeHorizon,h.EL=w.PeCoordsys,h.np=w.PeGTlistExtended,h.np.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=w.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},O}(),h.qf=null,h.IC=null,h.EL=null,h.HL=null,h.Eg=null,h.np=null,h.Lx=null,h.GC=null,h.FL=null,h.GL=null,h.Tc=null,h.HC=null,h.gj=null}(B||(B={})),function(h){var O=function(){function w(){}return w.Mb=function(c,a){return 0<=a?w.R(c):-w.R(c)},w.R=function(c){return 0>c?-c:c},w.vi=function(c){return 3552713678800501e-30>c},w.FC=function(c,a,n){return w.R(c-a)<=n*(1+(w.R(c)+w.R(a))/2)},w.$=function(c,a){return w.FC(c,a,3552713678800501e-30)},w.AL=function(c){return 3552713678800501e-30>=w.R(c)},w.Dd=function(c){return w.AL(c)},w}();h.s=O,h.F=function(){function w(){}return w.ip=function(c,a){var n=0;return(c=O.R(c))+(a=O.R(a))!=0&&(c>a?(n=a/c,n=c*Math.sqrt(1+n*n)):(n=c/a,n=a*Math.sqrt(1+n*n))),n},w.Yq=function(c,a,n,o,u){for(var p=[0,0,0],y=[0,0,0],g=0;2>=g;g++)a[g]-=c[g],n[g]-=a[g];n=p[1]*y[2]-p[2]*y[1],a=p[2]*y[0]-p[0]*y[2],p=p[0]*y[1]-p[1]*y[0],c=-1*(n*c[0]+a*c[1]+p*c[2]),o[0]=n,o[1]=a,o[2]=p,o[3]=c,y=w.qn(o),o[0]/=y,o[1]/=y,o[2]/=y,o[3]/=y,u!=0&&(y=O.Dd(p)?O.Dd(c)?O.Mb(1,a):-O.Mb(1,c):O.Mb(1,p),y*=O.Mb(1,u),o[0]*=y,o[1]*=y,o[2]*=y,o[3]*=y)},w.yx=function(c,a,n){n[0]=c[1]*a[2]-a[1]*c[2],n[1]=c[2]*a[0]-a[2]*c[0],n[2]=c[0]*a[1]-a[0]*c[1]},w.Ut=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},w.qn=function(c){return w.ip(w.ip(c[0],c[1]),c[2])},w.el=function(c,a,n,o,u,p,y,g){c=w.n(c,a,n);var b=Math.cos(n);p.u=(c+u)*b*Math.cos(o),y.u=(c+u)*b*Math.sin(o),g.u=(c*(1-a)+u)*Math.sin(n)},w.eO=function(c,a,n,o,u,p,y){var g=w.ip(a,n),b=1*Math.sqrt(1-c),S=b/1;if(O.$(g,0))p.u=0,u.u=O.Mb(1.570796326794897,o),y.u=O.R(o)-b;else{p.u=Math.atan2(n,a),n=Math.atan2(1*o,b*g),p=Math.cos(n);var $=Math.sin(n);a=b*c/(1-c),c*=1,n=Math.atan2(o+a*$*$*$,g-c*p*p*p),3.141592653589793<O.R(n)&&(n=O.Mb(3.141592653589793,n)-n),n=Math.atan(S*Math.tan(n)),$=Math.sin(n),p=Math.cos(n),u.u=Math.atan2(o+a*$*$*$,g-c*p*p*p),1.570796326794897<O.R(u.u)&&(u.u=O.Mb(3.141592653589793,u.u)-u.u),n=Math.atan(S*Math.tan(u.u)),$=Math.sin(n),p=Math.cos(n),y.u=(o-b*$)*Math.sin(u.u)+(g-1*p)*Math.cos(u.u)}},w.n=function(c,a,n){return n=Math.sin(n),c/Math.sqrt(1-a*n*n)},w.pt=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))},w.Sj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))},w.Tq=function(c,a){if(O.vi(c)||a==0||O.$(O.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=Math.sqrt(1-c),o=(1-n)/(1+n),u=o*o,p=o*u,y=o*p,g=o*y,b=o*g,S=o*b,$=1.572916666666667*p-3.2578125*g+4.295068359375*S;c=2.142578125*y-6.071484375*b,n=3.129296875*g-11.249837239583334*S;var I=4.775276692708333*b,C=7.958636765252976*S,R=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*g-.2688395182291667*S-$+n-C+R*(2*(1.3125*u-1.71875*y+1.650146484375*b)-4*c+6*I+R*(4*$-12*n+24*C+R*(8*c-32*I+R*(16*n-80*C+R*(32*I+64*R*C))))))}for(n=1-c,o=c/2,p=(u=O.R(a))*w.av(c)/(1.570796326794897*n),y=9999,b=u,u=0;1e-16<y&&50>u;u++)S=w.w(c,b),g=b-($=(g=(w.fG(b,c)-o*Math.sin(2*b)/S)/n-p)/(S=1/(S*S*S))),y=O.R($),b=g;return 0<=a?b:-b},w.lW=function(c,a){return O.vi(a)?c:c*w.av(a)/1.570796326794897},w.ca=function(c){return 0>(c=w.kF(c,6.283185307179586))?c+6.283185307179586:3.141592653589793>O.R(c)||O.$(O.R(c),3.141592653589793)?c:c-6.283185307179586},w.kF=function(c,a){return c-Math.floor(c/a)*a},w.Ch=function(c,a){if(.006884661117170036>a){var n=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=n*n;return c/(1+a)*(1+.25*n+.015625*o+.00390625*n*o)*1.570796326794897}return c*w.av(a)},w.Xq=function(c,a){var n=O.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=O.R(w.kF(a,3.141592653589793)))?a:3.141592653589793-a,(O.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*n},w.q=function(c,a,n){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,u=a*o,p=a*u,y=a*p,g=a*y,b=a*g,S=-.7291666666666666*u+.2278645833333333*y+.03987630208333334*b,$=.615234375*p-.21533203125*g,I=-.54140625*y+.20302734375*b,C=.48876953125*g,R=-.4488699776785715*b,L=Math.cos(2*n);return c/(1+a)*((1+.25*o+.015625*p+.00390625*g)*n+Math.sin(2*n)*(-1.5*a+.1875*u+.0234375*y+.00732421875*b-S+I-R+L*(2*(.9375*o-.234375*p-.03662109375*g)-4*$+6*C+L*(4*S-12*I+24*R+L*(8*$-32*C+L*(16*I-80*R+L*(32*C+64*L*R)))))))}return c*(w.fG(n,a)-.5*a*Math.sin(2*n)/w.w(a,n))},w.w=function(c,a){return a=Math.sin(a),Math.sqrt(1-c*a*a)},w.av=function(c){return O.FC(c,1,2220446049250313e-31)?1:1>c?w.Zw(0,1-c)-c/3*w.Ww(0,1-c):NaN},w.fG=function(c,a){var n=O.Mb(1,c);c=O.R(c);var o=Math.floor(c/1.570796326794897);if(1<a)a=c==0?0:NaN;else if(O.Dd(o))a=(c=w.sin(c))*w.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*w.Ww(1-c*c,1-a*c*c);else{var u=h.P.truncate(o%2),p=w.av(a);0<u?a=p*(o+1)-(a=(c=Math.sin(1.570796326794897*(o+1)-c))*w.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*w.Ww(1-c*c,1-a*c*c)):a=p*o+(a=(c=Math.sin(c-1.570796326794897*o))*w.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*w.Ww(1-c*c,1-a*c*c))}return a*n},w.sin=function(c){c=w.ca(c);var a=O.Mb(1,c);return c=O.R(c),O.$(c,3.141592653589793)?0:O.$(c,1.570796326794897)?1*a:Math.sin(c)*a},w.Ww=function(c,a){var n,o,u,p,y=c,g=a,b=1;for(a=0,c=1;o=((n=.2*(y+g+3*b))-y)/n,u=(n-g)/n,p=(n-b)/n,!(1e-4>O.R(o)&&1e-4>O.R(u)&&1e-4>O.R(p));)p=Math.sqrt(g),a+=c/((n=Math.sqrt(b))*(b+(p=Math.sqrt(y)*(p+n)+p*n))),c*=.25,y=.25*(y+p),g=.25*(g+p),b=.25*(b+p);return g=(y=o*u)-(b=p*p),3*a+c*(1+(b=y-6*b)*(.10227272727272728*b-.2142857142857143-.1730769230769231*p*(o=b+g+g))+p*(.1666666666666667*o+p*(-.4090909090909091*g+.1153846153846154*p*y)))/(n*Math.sqrt(n))},w.Zw=function(c,a){for(var n,o,u,p,y=1;o=2-((n=(c+a+y)/3)+c)/n,u=2-(n+a)/n,p=2-(n+y)/n,!(1e-4>O.R(o)&&1e-4>O.R(u)&&1e-4>O.R(p));y=.25*(y+n))n=Math.sqrt(a),o=Math.sqrt(y),c=.25*(c+(n=Math.sqrt(c)*(n+o)+n*o)),a=.25*(a+n);return(1+(.04166666666666666*(c=o*u-p*p)-.1-.06818181818181818*(a=o*u*p))*c+.07142857142857142*a)/Math.sqrt(n)},w.Sw=function(c,a){if(O.vi(c)||a==0||O.$(O.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=c*c,o=c*n,u=c*o,p=c*u,y=c*p,g=c*y,b=-(.02708333333333333*o+.03430059523809524*u+.03149181547619048*p+.02634359154541446*y+.02156896735835538*g),S=.007669890873015873*u+.01299603174603175*p+.0148051353064374*y+.01454454953803912*g,$=-(.002275545634920635*p+.004830845032667949*y+.006558395368616723*g),I=.0006957236677288761*y+.001775193002406544*g,C=-.000217324089394402*g,R=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*n+.09375*o+.04878472222222222*u+.02916666666666667*p+.01938905423280423*y+.01388255931712963*g)-b+$-C+R*(2*(.1041666666666667*n+.0875*o+.06050347222222222*u+.04151785714285714*p+.02958958540013228*y+.02203667534722222*g)-4*S+6*I+R*(4*b-12*$+24*C+R*(8*S-32*I+R*(16*$-80*C+R*(32*I+64*R*C))))))}return a==0||O.$(O.R(a),1.570796326794897)?n=a:(u=(o=Math.sqrt(c))*Math.sin(a),n=Math.tan(.7853981633974483+a/2)*Math.pow((1-u)/(1+u),o/2),n=2*Math.atan(n)-1.570796326794897),n},w.tO=function(c,a){if(O.vi(c)||a==0||O.$(O.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=c*(I=c*($=c*(R=c*c))),o=c*(C=c*n),u=.05833333333333333*$+.07232142857142858*I+.05634300595238095*n+.0355325796406526*C+.020235546186067*o,p=.02653149801587302*I+.04379960317460317*n+.0429211791776896*C+.03255384637546096*o,y=.01294022817460318*n+.02668104344536636*C+.03155651254609588*o,g=.00659454790965208*C+.0163075268674227*o,b=.003463473736911237*o,S=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*R+.08333333333333333*$+.03611111111111111*I+.01875*n+.01195601851851852*C+.008863673941798942*o-u+y-b+S*(2*(.1458333333333333*R+.1208333333333333*$+.07039930555555556*I+.03616071428571429*n+.01839451058201058*C+.01017113095238095*o)-4*p+6*g+S*(4*u-12*y+24*b+S*(8*p-32*g+S*(16*y-80*b+S*(32*g+64*S*b))))))}var $=Math.sqrt(c),I=$/2,C=Math.tan(.7853981633974483+a/2);c=0,u=1;for(var R=a;u!=0;R=o)n=$*Math.sin(R),o=C*Math.pow((1+n)/(1-n),I),o=2*Math.atan(o)-1.570796326794897,c++,(O.$(o,R)||3e4<c)&&(u=0);return R},w}()}(B||(B={})),function(h){var O=function(){function w(c){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new h.h,this.SH=new h.h,this.FA=!1,this.xq=new h.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=c,this.Cs=h.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var a=c.getCode();0<a?(this.Mk=a,h.qf.getCode(c)):this.Mk=h.qf.getCode(c),0>this.Mk&&(this.Mk=0);var n=this.Re.getType();if(this.eH=n==h.Tc.PE_TYPE_PROJCS?2:1,n==h.Tc.PE_TYPE_PROJCS&&!c.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");a=n==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),n!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(a),this.Go=c.getUnit(),this.MH=a.getPrimem().getLongitude(),this.rH=c=a.getUnit().getUnitFactor(),c=Math.PI/(180*c),1e-10>Math.abs(c-1)&&(c=1),this.BA=c,(n&h.Tc.PE_TYPE_PROJCS)!=0?(a=this.Re,this.CA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(a,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,n=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*n,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return w.prototype.cs=function(){return this.Mk},w.prototype.mk=function(){return this.vw},w.Ky=function(c,a){return c==a||c!=null&&a!=null&&c.Mk==0&&a.Mk==0&&c.Cs===a.Cs},w.prototype.Xc=function(){return this.Bl},w.prototype.ih=function(c){c.L(this.uo)},w.prototype.rv=function(){return this.uo.v},w.prototype.qv=function(){return this.uo.C},w.prototype.BR=function(c){c.L(this.ww)},w.prototype.hY=function(){var c=this.Re.getType();if(c==h.Tc.PE_TYPE_PROJCS){c=this.Re;var a=this.mk().getCentralMeridian(),n=c.getGeogcs();if(n==null)throw h.i.ga("internal error");a=[[a+(n=1/n.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(c,1,a),a=a[0][0],n=c.getParameters()[h.Tc.PE_PARM_X0].getValue();var o=this.ol();c=new h.l,o.A(c),a=(o=Math.abs(a-n))+n,n=-1*o+n,o=c.H,c=c.G;var u=new h.l;u.L(n,c,a,o),this.uo==null&&(this.uo=u)}else{if(c!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");n=1/this.Re.getUnit().getUnitFactor()*Math.PI,(c=new h.l).L(-n,-n/2,n,n/2),this.uo==null&&(this.uo=c)}},w.prototype.iY=function(){var c=this.Re.getType();if(c==h.Tc.PE_TYPE_PROJCS){var a=this.Re;if(c=this.mk().getCentralMeridian(),(a=a.getGeogcs())==null)throw h.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var n=this.Xr(),o=new h.l;n.A(o),(n=new h.l).L(c-a,o.G,c+a,o.H),this.ww==null&&(this.ww=n)}else{if(c!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(c=new h.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=c)}},w.prototype.bf=function(){return this.BA},w.prototype.rm=function(){return this.CA},w.prototype.Xr=function(){if(this.Bl)return this.wl;var c=this.wl;return c!=null?c:(this.wx(),this.wl)},w.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},w.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var c=this.Re,a=c.getGeogcs(),n=c.horizonGcsGenerate();if(n!=null){var o=n[0].getNump(),u=n[0].getKind();c=0<n[0].getInclusive();var p=this.bf(),y=90*p,g=360*p,b=370*p,S=180*p*h.Tc.PE_HORIZON_DELTA/Math.PI,$=new h.l,I=null;if(1<o){for(var C=1;C<o;C++)if(n[C].getKind()==h.Tc.PE_HORIZON_LINE){I==null&&(I=new h.Ua);var R=n[C].getCoord();I.rx(R[0][0],R[0][1]),I.Aj(R[1][0],R[1][1])}}if(u==h.Tc.PE_HORIZON_RECT)n=n[0].getCoord(),$.L(n[0][0],n[0][1]),$.$b(n[1][0],n[1][1]),Math.abs($.H-y)<1e-7*S&&($.H=y),Math.abs($.G+y)<1e-7*S&&($.G=-y),$.S()>b&&(n=-400*p,$.L(n,$.G,n+5*g,$.H)),n=new h.Hh($),this.wl==null&&(this.wl=n,this.Kv=c);else{if(b=new h.Ea,g=this.mk().isGcsHorizonMultiOverlap(),$=h.iu.XE(a,h.ju.Integer64),g){for(b=new h.bL,S=h.Ih.local().W(b,$,null),C=0;C<o;C++)if(n[C].getKind()==h.Tc.PE_HORIZON_POLY){for(a=n[C].getSize(),p=n[C].getCoord(),u=[],y=0;y<a;y++)u[y]=h.h.construct(p[y][0],p[y][1]);n[C].getInclusive(),g&&((p=new h.Ea).$k(u,a-1),b.VX(p),S.re())}b=S.next()}else for(C=0;C<o;C++)if(n[C].getKind()==h.Tc.PE_HORIZON_POLY){for(a=n[C].getSize(),p=n[C].getCoord(),g=[],y=0;y<a;y++)g[y]=h.h.construct(p[y][0],p[y][1]);n[C].getInclusive(),b.$k(g,a-1)}c?h.Zj.local().yn(b,$,1):h.mp.local().yn(b,$,1),h.fj.local().yn(b,$,1),this.wl==null&&(this.wl=b,this.Kv=c,this.TG=I)}}}},w.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},w.prototype.yK=function(){if(this.eH==2){var c=this.Re.horizonPcsGenerate();if(c!=null){var a=c[0].getKind();c[0].getInclusive();var n=c[0].getNump(),o=!1;if(a==h.Tc.PE_HORIZON_RECT)c=c[0].getCoord(),(n=new h.l).L(c[0][0],c[0][1]),n.$b(c[1][0],c[1][1]),c=new h.Hh(n);else{for(a=-1,o=0;o<n;o++)c[o].getKind()==h.Tc.PE_HORIZON_POLY&&(a=o);for(o=c[a].getSize()-1,c=c[a].getCoord(),n=[],a=0;a<o;a++)n[a]=h.h.construct(c[a][0],c[a][1]);c=a=new h.Ea,a.$k(n,o),o=!0}this.mk().isDensificationNeeded()&&(n=1e5*this.rm(),c=h.Zl.local().W(c,n,null)),o&&(o=new h.Hh,c.dn(o),c.He(),c.Rb(),c.kR(),h.Zj.local().yn(c,null,1)),this.Ws==null&&(this.Ws=c)}}},w.prototype.ol=function(){if(this.Bl)return this.Ws;var c=this.Ws;return c!=null?c:(this.yK(),this.Ws)},w.prototype.jY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]],h.gj.geogToProj(this.Re,2,c);var a=this.mk(),n=a.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(n&&this.CH.na(c[0][0],c[0][1]),a&&this.SH.na(c[1][0],c[1][1]))}this.FA=!0},w.prototype.xK=function(){if(this.eH==1){var c=400*this.bf();this.xq.L(-c,-c,c,c)}else c=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),c=h.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.xq.B()&&this.xq.L(c)},w.prototype.cR=function(c){this.Bl&&c.L(this.xq),this.xq.B()&&this.xK(),c.L(this.xq)},w.prototype.Wp=function(){return this.MH},w.prototype.Bi=function(){return this.Xz},w.prototype.Id=function(){return this.Go},w.prototype.Zr=function(){return this.rH},w}();h.JC=O}(B||(B={})),function(h){var O=function(){function w(c){this.FT=c,this.Cs=h.Ab.zv(c,0,!0);var a=c.getCode();this.us=0<a?a:h.qf.getCode(c),0>this.us&&(this.us=0),this.Go=a=this.FT.getUnit(),this.DH=1/a.getUnitFactor(),h.qf.getCode(c)}return w.Ky=function(c,a){return c==a||c!=null&&a!=null&&c.us==0&&a.us==0&&c.Cs===a.Cs},w.prototype.cs=function(){return this.us},w}();h.KL=O}(B||(B={})),function(h){h.$g=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,y){if(u!=null||p!=null||y!=null){n=h.F.ca(n),c=h.F.ca(c),a=h.F.ca(a),o=h.F.ca(o),1.570796326794897<h.s.R(a)&&(a=h.s.Mb(3.141592653589793,a)-a,c=h.F.ca(c+3.141592653589793)),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,n=h.F.ca(n+3.141592653589793));var g=h.F.ca(n-c);if(h.s.$(a,o)&&(h.s.$(c,n)||h.s.$(h.s.R(a),1.570796326794897)))u!=null&&(u.u=0),p!=null&&(p.u=0),y!=null&&(y.u=0);else{if(h.s.$(a,-o)){if(h.s.$(h.s.R(a),1.570796326794897))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0<a?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(y!=null&&(y.u=0<a?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));if(h.s.$(h.s.R(g),3.141592653589793))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0),void(y!=null&&(y.u=0))}var b=h.s.R(a)==1.570796326794897?0:Math.cos(a),S=Math.sin(a),$=h.s.R(o)==1.570796326794897?0:Math.cos(o),I=Math.sin(o),C=h.s.R(g)==1.570796326794897?0:Math.cos(g),R=h.s.R(g)==3.141592653589793?0:Math.sin(g);if(u!=null){var L=Math.sin((o-a)/2);g=Math.sin(g/2),u.u=2*Math.asin(Math.sqrt(L*L+b*$*g*g))*w}p!=null&&(p.u=h.s.$(h.s.R(a),1.570796326794897)?0>a?n:h.F.ca(3.141592653589793-n):Math.atan2($*R,b*I-S*$*C)),y!=null&&(h.s.$(h.s.R(o),1.570796326794897)?y.u=0>o?c:h.F.ca(3.141592653589793-c):(y.u=Math.atan2(b*R,I*b*C-$*S),y.u=h.F.ca(y.u+3.141592653589793)))}}},O.sf=function(w,c,a,n,o,u,p){if(u!=null||p!=null){c=h.F.ca(c),a=h.F.ca(a),1.570796326794897<h.s.R(a)&&(a=h.s.Mb(3.141592653589793,a)-a,c=h.F.ca(c+3.141592653589793)),h.s.$(h.s.R(a),1.570796326794897)&&(c=0),o=h.F.ca(o);var y=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),g=h.s.$(h.s.R(o),3.141592653589793)?0:Math.sin(o),b=h.s.$(h.s.R(a),1.570796326794897)?0:Math.cos(a),S=Math.sin(a);w=n/w,n=h.s.$(h.s.R(w),1.570796326794897)?0:Math.cos(w);var $=h.s.$(h.s.R(w),3.141592653589793)?0:Math.sin(w),I=Math.asin(S*n+b*$*y);p!=null&&(p.u=I),u!=null&&(u.u=h.s.$(h.s.R(I),1.570796326794897)?h.s.$(a,-I)?0>I?o:h.F.ca(3.141592653589793-o):c:h.s.$(h.s.R(a),1.570796326794897)&&h.s.$(w,3.141592653589793)?0>a?o:h.F.ca(3.141592653589793-o):h.F.ca(c+Math.atan2($*g,b*n-S*$*y)))}},O}()}(B||(B={})),function(h){h.Yk=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,y,g){var b=new h.ha(0),S=new h.ha(0),$=[0,0,0],I=[0,0,0],C=[0,0,0],R=new h.ha(0),L=new h.ha(0),N=new h.ha(0),U=new h.ha(0),W=new h.ha(0);if(p!=null||y!=null||g!=null)if(h.s.vi(c))h.$g.ub(w,a,n,o,u,p,y,g);else{o=h.F.ca(o),a=h.F.ca(a);var j=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.$(a,o)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),y!=null&&(y.u=0),g!=null&&(g.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(w,c)),y!=null&&(y.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(g!=null&&(g.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(j),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(w,c)),y!=null&&(y.u=0),g!=null&&(g.u=0))}else(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897))&&(h.s.$(h.s.R(n),1.570796326794897)?a=o:o=a);var K=0;if(0>j){K=1;var se=a;a=o,o=se,se=n,n=u,u=se}j=h.F.pt(c,n);var ne=h.F.pt(c,u);y==null&&g==null||(h.$g.ub(w,a,j,o,ne,null,b,S),b=Math.atan2(Math.sin(b.u)*Math.cos(n-j),Math.cos(b.u)),S=Math.atan2(Math.sin(S.u)*Math.cos(u-ne),Math.cos(S.u)),K!=0&&(se=b,b=S,S=se),y!=null&&(y.u=b),g!=null&&(g.u=S)),p!=null&&(h.F.el(1,c,n,a,0,N,U,W),$[0]=N.u,$[1]=U.u,$[2]=W.u,h.F.el(1,c,u,o,0,N,U,W),I[0]=N.u,I[1]=U.u,I[2]=W.u,C[0]=$[1]*I[2]-I[1]*$[2],C[1]=-($[0]*I[2]-I[0]*$[2]),C[2]=$[0]*I[1]-I[0]*$[1],c=1-h.F.w(c,h.F.Xq(c,h.F.Sj(c,Math.acos(C[2]/Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]))))),c*=2-c,y=Math.atan2(-C[1],-C[0]),C=h.F.ca(y-1.570796326794897),y=h.F.ca(y+1.570796326794897),C=h.s.R(h.F.ca(a-C))<=h.s.R(h.F.ca(a-y))?C:y,h.$g.ub(1,C,0,a,j,R,null,null),h.$g.ub(1,C,0,o,ne,L,null,null),3.141592653589793<R.u+L.u&&(C=h.F.ca(C+3.141592653589793),h.$g.ub(1,C,0,a,j,R,null,null),h.$g.ub(1,C,0,o,ne,L,null,null)),R.u*=h.s.Mb(1,n),L.u*=h.s.Mb(1,u),R.u=h.F.Sj(c,R.u),L.u=h.F.Sj(c,L.u),a=h.F.q(w,c,R.u),w=h.F.q(w,c,L.u),p.u=h.s.R(w-a))}}},O.sf=function(w,c,a,n,o,u,p,y){var g=0,b=new h.ha(0),S=new h.ha(0),$=[0,0,0],I=[0,0,0],C=new h.ha(0),R=new h.ha(0),L=new h.ha(0);if(p!=null||y!=null)if(h.s.vi(c))h.$g.sf(w,a,n,o,u,p,y);else if(h.s.Dd(o))p!=null&&(p.u=a),y!=null&&(y.u=n);else if(u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),a=h.F.ca(a),n=h.F.ca(n),1.570796326794897<h.s.R(n)&&(a=h.F.ca(a+3.141592653589793),n=h.s.Mb(3.141592653589793,n)-n),h.s.$(h.s.R(n),1.570796326794897)&&(a=0),h.s.Dd(n)){var N=h.s.R(1.570796326794897-h.s.R(u));N=h.F.Sj(c,N),N=1-h.F.w(c,h.F.Xq(c,N)),N*=2-N,w=o/h.F.Ch(w,N)*1.570796326794897,w=h.F.Tq(N,w),w=h.F.pt(N,w),h.$g.sf(1,a,n,w,u,p,b),y!=null&&(g=b.u),y!=null&&(y.u=h.F.Sj(c,g))}else if(h.s.$(h.s.R(n),1.570796326794897))b=2*(g=h.F.Ch(w,c)),u=0<(w=h.s.Mb(1.570796326794897,n))?h.F.ca(3.141592653589793-u):u,n=g-o,h.s.R(n)<=g?p!=null&&(p.u=u):(n=Math.floor(o/b),h.P.truncate(n%2)==0?(p!=null&&(p.u=u),o-=n*b):(p!=null&&(p.u=h.F.ca(u+3.141592653589793)),o=(n+1)*b-o),n=g-o),y!=null&&(y.u=h.F.Tq(c,n/g*w));else{N=h.F.pt(c,n),u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(n-N));var U=h.P.truncate(h.s.Mb(1,N))*(1.570796326794897>=h.s.R(u)?1:-1);u=h.F.ca(a+Math.atan(Math.tan(u)*-Math.sin(N))),h.$g.ub(w,u,0,a,N,null,S,null),N=h.s.R(1.570796326794897-h.s.R(S.u)),N=h.F.Sj(c,N),N=1-h.F.w(c,h.F.Xq(c,N)),N*=2-N,h.F.el(1,c,0,u,0,C,R,L),$[0]=C.u,$[1]=R.u,$[2]=L.u,h.F.el(1,c,n,a,0,C,R,L),I[0]=C.u,I[1]=R.u,I[2]=L.u,n=Math.acos(($[0]*I[0]+$[1]*I[1]+$[2]*I[2])/Math.sqrt(I[0]*I[0]+I[1]*I[1]+I[2]*I[2])),n=h.F.Sj(N,n),o=0<(n=h.F.q(w,N,n)+o*U)?S.u:h.F.ca(S.u+3.141592653589793),w=h.s.R(n)/h.F.Ch(w,N)*1.570796326794897,w=h.F.Tq(N,w),w=h.F.pt(N,w),h.$g.sf(1,u,0,w,o,p,b),y!=null&&(g=b.u),y!=null&&(y.u=h.F.Sj(c,g))}},O}()}(B||(B={})),function(h){h.eu=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,y,g){var b=0,S=0,$=0;if(p!=null||y!=null||g!=null)if(h.s.vi(c))h.$g.ub(w,a,n,o,u,p,y,g);else{var I=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.Dd(I)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),y!=null&&(y.u=0),g!=null&&(g.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(w,c)),y!=null&&(y.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(g!=null&&(g.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(I),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(w,c)),y!=null&&(y.u=0),g!=null&&(g.u=0))}else if(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897)||h.s.Dd(I)||h.s.$(h.s.R(I),3.141592653589793))return void h.Yk.ub(w,c,a,n,o,u,p,y,g);var C=1-Math.sqrt(1-c),R=c/(1-c),L=w*(1-C);w=h.F.Xq(c,n);var N=h.F.Xq(c,u);c=h.s.R(w)==1.570796326794897?0:Math.cos(w);var U=Math.sin(w),W=h.s.R(N)==1.570796326794897?0:Math.cos(N),j=Math.sin(N),K=I,se=Math.cos(K),ne=Math.sin(K),pe=1,he=0;do{var xe=K,ke=Math.sqrt(Math.pow(W*ne,2)+Math.pow(c*j-U*W*se,2)),Ae=U*j+c*W*se,st=Math.atan2(ke,Ae);if(ke==0){pe=0;break}var qe=c*W*ne/ke;if(b=Math.cos(Math.asin(qe)),S=Ae-2*U*j/(b*=b),1<h.s.R(S)&&(S=h.s.Mb(1,S)),K=I+(1-(K=C/16*b*(4+C*(4-3*b))))*C*qe*(st+K*ke*(S+K*Ae*(2*($=S*S)-1))),se=Math.cos(K),ne=Math.sin(K),he++,3.141592653589793<h.s.R(K)&&30<he){pe=0;break}}while(5e3>=he&&!h.s.$(xe,K));if(pe!=0)C=(R*=b)*(256+R*(R*(74-47*R)-128))/1024,p!=null&&(p.u=L*(1+R*(4096+R*(R*(320-175*R)-768))/16384)*(st-C*ke*(S+C/4*(Ae*(2*$-1)-C/6*S*(4*ke*ke-3)*(4*$-3))))),y!=null&&(y.u=h.s.$(h.s.R(n),1.570796326794897)?0>n?o:h.F.ca(3.141592653589793-o):Math.atan2(W*ne,c*j-U*W*se)),g!=null&&(h.s.$(h.s.R(u),1.570796326794897)?g.u=0>u?a:h.F.ca(3.141592653589793-a):(g.u=Math.atan2(c*ne,c*j*se-U*W),g.u=h.F.ca(g.u+3.141592653589793)));else{K=h.s.Mb(3.141592653589793,I),Ae=U*j-c*W,st=Math.acos(Ae),ke=Math.sin(st),b=1,he=qe=0;do $=qe,se=1-.25*(qe=C*(b*=b)*(1+C+C*C))+.1875*(S=C*C*(se=b*b)*(1+2.25*C))-.1953125*(pe=C*C*C*se*b),qe=.25*qe-.25*S+.29296875*pe,ne=.03125*S-.05859375*pe,pe*=.00651041666666667,S=Ae-2*U*j/b,1<h.s.R(S)&&(S=h.s.Mb(1,S)),b=Math.acos(S),Ae=Math.cos(2*b),xe=Math.cos(3*b),ne=(qe=h.s.$(n,-u)?h.F.ca(3.141592653589793-I)/(3.141592653589793*C*se):h.F.ca(K-I)/(C*(se*st+qe*ke*S+ne*Math.sin(2*st)*Ae+pe*Math.sin(3*st)*xe)))*ke/(c*W),K=1.570796326794897<h.s.R(I)?h.s.Mb(3.141592653589793,ne)-Math.asin(ne):Math.asin(ne),se=Math.cos(K),ke=Math.sqrt(Math.pow(W*ne,2)+Math.pow(c*j-U*W*se,2)),st=3.141592653589793-Math.asin(h.s.R(ke)),Ae=Math.cos(st),b=Math.cos(Math.asin(qe)),he++;while(70>=he&&!h.s.$($,qe));p!=null&&(se=1+(R*=b*=b)*(4096+R*(R*(320-175*R)-768))/16384,h.s.$(n,-u)?p.u=3.141592653589793*L*se:(S=Ae-2*U*j/b,b=Math.acos(S),Ae=Math.cos(2*b),xe=Math.cos(3*b),p.u=L*(se*st+R*(R*(128+R*(35*R-60))-512)/2048*ke*S+R*(5*R-4)/6144*R*R*Math.sin(2*st)*Ae+pe*Math.sin(3*st)*xe+-762939453125e-16*R*R*R*R*Math.sin(4*st)*Math.cos(4*b)))),y!=null&&(h.s.Dd(n)&&h.s.Dd(u)?(b=Math.sqrt(1-qe*qe),y.u=Math.acos(b),0>I&&(y.u*=-1)):h.s.$(h.s.R(n),1.570796326794897)?y.u=0>n?o:h.F.ca(3.141592653589793-o):(p=qe/c,L=Math.sqrt(1-p*p),0>c*j-U*W*Math.cos(K)&&(L*=-1),y.u=Math.atan2(p,L),h.s.$(n,-u)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-C*Math.cos(n))&&(0<n&&1.570796326794897>h.s.R(y.u)||0>n&&1.570796326794897<h.s.R(y.u))&&(y.u=h.s.Mb(3.141592653589793,y.u)-y.u))),g!=null&&(h.s.Dd(n)&&h.s.Dd(u)?(b=Math.sqrt(1-qe*qe),g.u=Math.acos(b),0<=I&&(g.u*=-1)):h.s.$(h.s.R(u),1.570796326794897)?g.u=0>u?a:h.F.ca(3.141592653589793-a):(I=qe/W,p=Math.sqrt(1-I*I),L=Math.sin(K/2),0>Math.sin(N-w)-2*c*j*L*L&&(p*=-1),g.u=Math.atan2(I,p),g.u=h.F.ca(g.u+3.141592653589793),h.s.$(n,-u)&&!h.s.Dd(n)&&!h.s.$(h.s.R(n),1.570796326794897)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-C*Math.cos(n))&&(y!=null?L=y.u:(p=qe/c,L=Math.sqrt(1-p*p),0>c*j-U*W*Math.cos(K)&&(L*=-1),L=Math.atan2(p,L),h.s.$(n,-u)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-C*Math.cos(n))&&(0<n&&1.570796326794897>h.s.R(L)||0>n&&1.570796326794897<h.s.R(L))&&(L=h.s.Mb(3.141592653589793,L)-L)),1.570796326794897>=h.s.R(L)&&1.570796326794897<h.s.R(g.u)||1.570796326794897<=h.s.R(L)&&1.570796326794897>h.s.R(g.u))&&(g.u=-1*h.F.ca(g.u+3.141592653589793))))}}}},O.sf=function(w,c,a,n,o,u,p,y){if(p!=null||y!=null)if(h.s.vi(c))h.$g.sf(w,a,n,o,u,p,y);else if(u=h.F.ca(u),h.s.$(h.s.R(n),1.570796326794897)||h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))h.Yk.sf(w,c,a,n,o,u,p,y);else{var g=h.s.R(u)==1.570796326794897?0:Math.cos(u),b=h.s.R(u)==3.141592653589793?0:Math.sin(u);h.s.$(h.s.R(n),1.570796326794897)&&(a=0),u=1-Math.sqrt(1-c);var S=h.F.Xq(c,n);n=h.s.R(S)==1.570796326794897?0:Math.cos(S);var $=Math.sin(S);S=Math.atan2(Math.tan(S),g);var I=n*b,C=I*I,R=1-C,L=c/(1-c)*R,N=(c=L*(256+L*(L*(74-47*L)-128))/1024)/4,U=c/6,W=o/(w*(1-u)*(1+L*(4096+L*(L*(320-175*L)-768))/16384)),j=W;do{var K=j;o=h.s.R(j)==1.570796326794897?0:Math.cos(j);var se=(L=h.s.R(j)==3.141592653589793?0:Math.sin(j))*L;j=c*L*((w=Math.cos(2*S+j))+N*(o*(2*(j=w*w)-1)-U*w*(4*se-3)*(4*j-3)))+W}while(!h.s.$(K,j));o=h.s.R(j)==1.570796326794897?0:Math.cos(j),L=h.s.R(j)==3.141592653589793?0:Math.sin(j),p!=null&&(b=Math.atan2(L*b,n*o-$*L*g),R=u/16*R*(4+u*(4-3*R)),w=Math.cos(2*S+j),p.u=h.F.ca(a+(b-(1-R)*u*I*(j+R*L*(w+R*o*(2*w*w-1)))))),y!=null&&(R=$*L-n*o*g,R=(1-u)*Math.sqrt(C+R*R),y.u=Math.atan2($*o+n*L*g,R))}},O}()}(B||(B={})),function(h){h.KC=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,y,g){var b=h.F.ca(o-a),S=h.s.$(h.s.R(n),1.570796326794897),$=h.s.$(h.s.R(u),1.570796326794897);if(h.s.$(n,u)&&(h.s.Dd(b)||S))p!=null&&(p.u=0),y!=null&&(y.u=0),g!=null&&(g.u=0);else{if(h.s.vi(c)){var I=Math.sin(n),C=Math.sin(u);I=Math.sqrt((1+I)/(1-I)),C=Math.sqrt((1+C)/(1-C)),I=Math.log(C)-Math.log(I),I=Math.atan2(b,I),p!=null&&(p.u=h.s.$(n,u)?h.s.R(w*Math.cos(n)*b):h.s.R((w*u-w*n)/Math.cos(I)))}else C=h.F.Sw(c,u),I=Math.sin(h.F.Sw(c,n)),C=Math.sin(C),I=Math.sqrt((1+I)/(1-I)),C=Math.sqrt((1+C)/(1-C)),I=Math.log(C)-Math.log(I),I=Math.atan2(b,I),p!=null&&(h.s.$(n,u)?p.u=h.s.R(w*b*Math.cos(n)/h.F.w(c,n)):(b=h.F.q(w,c,n),w=h.F.q(w,c,u),p.u=h.s.R((w-b)/Math.cos(I))));y==null&&g==null||(p=h.F.ca(I+3.141592653589793),S&&$||!S&&!$||(S?I=0>n?o:h.F.ca(3.141592653589793-o):$&&(p=0>u?a:h.F.ca(3.141592653589793-a))),y!=null&&(y.u=I),g!=null&&(g.u=p))}},O.sf=function(w,c,a,n,o,u,p,y){u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),h.s.vi(c)?h.s.$(h.s.R(n),1.570796326794897)?(a=0>n?u:h.F.ca(3.141592653589793-u),3.141592653589793>=(u=o/w%6.283185307179586)?w=n-h.s.Mb(u,n):(a=h.F.ca(a+3.141592653589793),w=-n+h.s.Mb(u-3.141592653589793,n))):h.s.$(h.s.R(u),1.570796326794897)?(a=h.F.ca(a+h.s.Mb(o,u)/(w*Math.cos(n))),w=n):(w=n+o*Math.cos(u)/w,1.570796326794897<h.s.R(w)&&(w=1.570796326794897),h.s.$(h.s.R(w),1.570796326794897)&&(h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))||(1.570796316258184<h.s.R(w)&&(w=h.s.Mb(1.570796316258184,w)),c=Math.sin(n),n=Math.sin(w),c=Math.sqrt((1+c)/(1-c)),n=Math.sqrt((1+n)/(1-n)),c=Math.log(n)-Math.log(c),a=h.F.ca(a+Math.tan(u)*c))):h.s.$(h.s.R(n),1.570796326794897)?(a=0>n?u:h.F.ca(3.141592653589793-u),u=o/h.F.lW(w,c),3.141592653589793>=(u%=6.283185307179586)?w=n-h.s.Mb(u,n):(a=h.F.ca(a+3.141592653589793),w=-n+h.s.Mb(u-3.141592653589793,n)),w=h.F.Tq(c,w)):h.s.$(h.s.R(u),1.570796326794897)?(a=h.F.ca(a+h.s.Mb(o,u)*h.F.w(c,n)/(w*Math.cos(n))),w=n):(w=1.570796326794897*(o*Math.cos(u)+h.F.q(w,c,n))/h.F.Ch(w,c),1.570796326794897<h.s.R(w)&&(w=h.s.Mb(1.570796326794897,w)),w=h.F.Tq(c,w),h.s.$(h.s.R(w),1.570796326794897)&&(h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))||(o=h.F.Sw(c,n),n=h.F.Sw(c,w),1.570796316258184<h.s.R(n)&&(n=h.s.Mb(1.570796316258184,w),w=h.F.tO(c,n)),c=Math.sin(o),n=Math.sin(n),c=Math.sqrt((1+c)/(1-c)),n=Math.sqrt((1+n)/(1-n)),c=Math.log(n)-Math.log(c),a=h.F.ca(a+Math.tan(u)*c))),p!=null&&(p.u=a),y!=null&&(y.u=w)},O}()}(B||(B={})),function(h){h.kb=function(){function O(){}return O.Sy=function(w,c,a,n,o,u,p){h.eu.ub(w,c,a,n,o,u,null,p,null)},O.Ai=function(w,c,a,n,o,u,p,y){h.eu.sf(w,c,a,n,o,u,p,y)},O.xd=function(w,c,a,n,o,u,p,y,g,b){switch(b){case 2:h.Yk.ub(w,c,a,n,o,u,p,y,g);break;case 3:h.LC.ub(w,c,a,n,o,u,p,y,g);break;case 1:h.KC.ub(w,c,a,n,o,u,p,y,g);break;default:h.eu.ub(w,c,a,n,o,u,p,y,g)}},O.qj=function(w,c,a,n,o,u,p,y,g){switch(g){case 2:h.Yk.sf(w,c,a,n,o,u,p,y);break;case 3:h.LC.sf(w,c,a,n,o,u,p,y);break;case 1:h.KC.sf(w,c,a,n,o,u,p,y);break;default:h.eu.sf(w,c,a,n,o,u,p,y)}},O}()}(B||(B={})),function(h){var O=function(){function c(){this.y=this.x=null}return c.construct=function(a){var n=new c;return n.x=new h.Xb,n.x.set(a.x),n.y=new h.Xb,n.y.set(a.y),n},c.QE=function(a,n){var o=new c;return o.x=new h.Xb,o.x.set(a),o.y=new h.Xb,o.y.set(n),o},c.prototype.rg=function(){return this.x.rg()&&this.y.rg()},c.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},c}();h.rY=O;var w=function(){function c(){this.z=this.y=this.x=null}return c.construct=function(a){var n=new c;return n.x=new h.Xb,n.x.set(a.x),n.y=new h.Xb,n.y.set(a.y),n.z=new h.Xb,n.z.set(a.z),n},c.QE=function(a,n,o){var u=new c;return u.x=new h.Xb,u.x.set(a),u.y=new h.Xb,u.y.set(n),u.z=new h.Xb,u.z.set(o),u},c.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},c.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},c.prototype.Sh=function(a){var n=new h.Xb,o=new h.Xb,u=new h.Xb;return n.Ml(this.x,a.x),o.Ml(this.y,a.y),u.Ml(this.z,a.z),(a=new h.Xb).ZM(n,o),a.add(u),a},c.prototype.YE=function(a){var n=new c;n.x.Ml(this.y,a.z),n.y.Ml(this.z,a.x),n.z.Ml(this.x,a.y);var o=new h.Xb,u=new h.Xb,p=new h.Xb;return o.Ml(this.z,a.y),u.Ml(this.x,a.z),p.Ml(this.y,a.x),n.x.sub(o),n.y.sub(u),n.z.sub(p),n},c}();h.sY=w,h.Nx=function(){function c(){}return c.zP=function(a,n,o){var u=n.x;n=n.y,c.el(1,a,Math.cos(u),Math.sin(u),Math.cos(n),Math.sin(n),o)},c.yP=function(a,n){var o=new h.Od;return c.zP(a,n,o),o},c.el=function(a,n,o,u,p,y,g){a/=Math.sqrt(1-n*y*y),g.L(a*p*o,a*p*u,a*(1-n)*y)},c.$u=function(a,n){var o=new h.Xb,u=new h.Xb,p=new h.Xb,y=new h.Xb;o.cos(n.x),u.sin(n.x),p.cos(n.y),y.sin(n.y);var g=new h.Xb;return g.set(y),g.Bg(y),g.Po(a),g.Po(-1),g.fN(),g.sqrt(),(n=new h.Xb).set(1),n.lm(g),(g=new h.Xb).set(n),g.Bg(p),g.Bg(o),(o=new h.Xb).set(n),o.Bg(p),o.Bg(u),(u=new h.Xb).set(n),u.Po(1-a),u.Bg(y),w.QE(g,o,u)},c.NS=function(a,n,o,u){if(Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x)return NaN;if(u=c.YA(u,Math.min(n.x,o.x),Math.max(n.x,o.x)),!new h.Oc(n.x,o.x).contains(u))return NaN;var p=O.construct(n);if(o=O.construct(o),p=c.$u(a,p),o=c.$u(a,o),(o=p.YE(o)).z.rg())return n.y;var y=new h.Xb;y.set(o.x),y.lm(o.z),y.Po(-1);var g=new h.Xb;g.set(o.y),g.lm(o.z),g.Po(-1);var b=new h.Xb;return b.set(g),b.Bg(g),(p=new h.Xb).set(y),p.Bg(y),p.add(b),p.sqrt(),p.rg()||y.rg()&&g.rg()?n.y:(n=Math.atan2(g.value(),y.value()),n=Math.atan2(p.value()*Math.cos(n-u),1-a),u=c.yP(a,h.h.construct(u,n)),a=new h.Od(u.x,u.y,-u.z),u=o.value().Sh(u),a=o.value().Sh(a),Math.abs(a)<Math.abs(u)&&(n=-n),n)},c.Jz=function(a,n,o,u,p){if(p[0]=NaN,p[1]=NaN,Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x||Math.abs(u)>=.5*Math.PI||0<n.y&&0<o.y&&n.y>u&&o.y>u||0>n.y&&0>o.y&&n.y<u&&o.y<u)return 0;var y=O.construct(n),g=O.construct(o);y=c.$u(a,y),g=c.$u(a,g);var b=y.YE(g);if(b.z.rg())return new h.Oc(n.y,o.y).contains(u)?(p[0]=n.x,1):0;(g=new h.Xb).set(b.x),g.lm(b.z),g.Po(-1),(y=new h.Xb).set(b.y),y.lm(b.z),y.Po(-1),(b=new h.Xb).set(y),b.Bg(y);var S=new h.Xb;return S.set(g),S.Bg(g),S.add(b),S.sqrt(),S.rg()||g.rg()&&y.rg()?u==0?(p[0]=n.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(u)/S.value(),1<Math.abs(a)?0:(a=Math.acos(a),b=Math.atan2(y.value(),g.value()),g=Math.min(n.x,o.x),y=Math.max(n.x,o.x),o=c.YA(b-a,g,y),a=u!=0?c.YA(b+a,g,y):o,u=0,g<=o&&o<=y&&(p[u]=o,u++),a!=o&&g<=a&&a<=y&&(p[u]=a,++u==2&&Math.abs(p[0]-n.x)>Math.abs(p[1]-n.x)&&(n=p[0],p[0]=p[1],p[1]=n)),u))},c.YA=function(a,n,o){return a>o?a-=2*(n=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<n&&(a+=2*(n=Math.ceil((n-a)/(2*Math.PI)))*Math.PI),a},c}()}(B||(B={})),function(h){h.SK=function(){function O(){}return O.WX=function(w,c){var a=8,n=[0,0,0,0],o=new h.h;o.N(c),o.scale(h.cb.tc(w).Id().Fc()==9102?1:h.cb.tc(w).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var u=-180,p=180,y=(w=5*a)-1,g=(c=(w+31)/32)-1;0<=g;g--)for(var b=y-32*g,S=Math.min(32,w-32*g),$=1;$<S;$+=2){var I=.5*(p+u);o.x>=I?(n[g]|=1<<b,u=I):p=I,b-=2,y-=2}for(u=-90,p=90,y=w-2,g=c-1;0<=g;g--)for(b=y-32*g,S=Math.min(32,w-32*g),$=0;$<S;$+=2)I=.5*(p+u),o.y>=I?(n[g]|=1<<b,u=I):p=I,b-=2,y-=2;return O.VP(n,a,a)},O.VP=function(w,c,a){for(var n=[],o=0;o<c;o++)n[o]="";for(var u=o=0,p=0;p<c;p++){var y=w[o]>>u&31;if(31<(u+=5)){var g=37-u;y&=(1<<g)-1,u-=32,y|=(w[++o]&(1<<u)-1)<<g}n[c-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[y]}if(a>c)for(p=0;p<a-c;p++)n.push("0");else a<c&&(n.length=a);return n.join("")},O}()}(B||(B={})),function(h){var O={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function c(){}return c.Ny=function(a){c.zp===!1&&c.zt();var n=c.AQ(a);if(n==-1){var o=c.Ax(a);o!=a&&(n=c.Ny(o))}return n==-1&&(o=c.AK(a))!=a&&(n=c.Ny(o)),n},c.AQ=function(a){return c.Hw[a]!==void 0?c.Hw[a]:-1},c.xQ=function(a){c.zp===!1&&c.zt();var n=c.iF(a);if(n==1e38){var o=c.Ax(a);if(o!=a&&(n=c.iF(o)),n==1e38)return 1e-10}return n},c.US=function(a){if(c.Ks[a]!==void 0)return!0;var n=c.Ax(a);return n!=a&&c.Ks[n]!==void 0},c.WS=function(a){if(c.zo[a]!==void 0)return!0;var n=c.Ax(a);return n!=a&&c.zo[n]!==void 0},c.iF=function(a){return c.zp===!1&&c.zt(),c.Ks[a]!==void 0?c.Ks[a]:c.zo[a]!==void 0?c.zo[a]:1e38},c.AK=function(a){return c.zp===!1&&c.zt(),c.RA[a]!==void 0?c.RA[a]:a},c.Ax=function(a){return c.zp===!1&&c.zt(),c.SA[a]!==void 0?c.SA[a]:a},c.zt=function(){for(var a,n=O,o=0;o<n.pcsid.length;o+=2)c.zo[n.pcsid[o]]=n.pcstol[2*n.pcsid[o+1]+1];for(o=0;o<n.pcsidc.length;o+=1)for(var u=(a=n.pcsidc[o])[0];u<=a[1];u++)c.zo[u]=n.pcstol[2*a[2]+1];for(o=0;o<n.gcsid.length;o+=2)c.Ks[n.gcsid[o]]=n.gcstol[2*n.gcsid[o+1]+1];for(o=0;o<n.gcsidc.length;o+=1)for(u=(a=n.gcsidc[o])[0];u<=a[1];u++)c.zo[u]=n.gcstol[2*a[2]+1];for(o=0;o<w.c.length;o+=1)for(u=(a=w.c[o])[0];u<=a[1];u++)c.Hw[u]=a[2];for(o=0;o<w.nc.length;o+=2)c.Hw[w.nc[o]]=w.nc[o+1];for(w=null,o=0;o<n.newtoold.length;o+=2)c.RA[n.newtoold[o+1]]=n.newtoold[o],c.SA[n.newtoold[o]]=n.newtoold[o+1];O=null,c.zp=!0},c.zp=!1,c.Ks=[],c.zo=[],c.RA=[],c.SA=[],c.Hw=[],c}()}(B||(B={})),function(h){function O(c){return c.length===0?'""':c[0]=='"'||c[0]=="."||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var w=[];h.SC=function(){function c(){}return c.zQ=function(a){try{for(var n=0;n<w.length;n++)if(w[n].wkttext===a)return w[n].unit;for(var o,u=n="",p=!1,y=0;y<a.length;y++){var g=a[y];p===!0?g=='"'?a[y+1]=='"'?n+=g:p=p=!1:n+=g:/[\s]/.test(g)||(g==","?(u=n!==""?u+(O(n)+","):u+",",n=""):g==")"||g=="]"?(u=n!==""?u+(O(n)+"]}"):u+"]}",n=""):g=="("||g=="["?(u+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):g=='"'?(p=!0,n=""):n+=g)}o=JSON.parse(u);var b=c.hF(o);if(b===null)return null;for(o=null,g=0;g<b.values.length;g++)if(typeof b.values[g]=="object"&&b.values[g].entity==="UNIT"){o=b.values[g];break}if(o===null)return null;var S=h.Uc.UO(b.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return w.push({wkttext:a,unit:S}),10<w.length&&w.shift(),S}catch{return null}},c.hF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var n=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];n.push(a.values[o])}for(a=0;a<n.length;a++)if((o=c.hF(n[a]))!==null)return o;return null},c.yQ=function(a){var n=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var u=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<u&&(n=.001/u)}else if(0<=(o=a.indexOf("GEOGCS"))){var y=0;if(u=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{y=parseFloat(a.substring(o,p))}catch{y=0}if(0<y&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<y&&0<u&&(n=.001/(y*u))}}return n},c}()}(B||(B={})),function(h){var O;(O=h.$K||(h.$K={}))[O.NONE=0]="NONE",O[O.LINEAR=1]="LINEAR",O[O.ANGULAR=2]="ANGULAR",function(c){c[c.enumFloat=0]="enumFloat",c[c.enumDouble=1]="enumDouble",c[c.enumInt32=2]="enumInt32",c[c.enumInt64=3]="enumInt64",c[c.enumInt8=4]="enumInt8",c[c.enumInt16=5]="enumInt16"}(h.LL||(h.LL={})),function(c){c[c.POSITION=0]="POSITION",c[c.Z=1]="Z",c[c.M=2]="M",c[c.ID=3]="ID",c[c.NORMAL=4]="NORMAL",c[c.TEXTURE1D=5]="TEXTURE1D",c[c.TEXTURE2D=6]="TEXTURE2D",c[c.TEXTURE3D=7]="TEXTURE3D",c[c.ID2=8]="ID2",c[c.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var w=function(){function c(a,n){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,n!==void 0){for(this.Ba=n.Ba,this.Qq=n.Qq,this.dg=n.dg.slice(0),this.wh=n.wh.slice(0),this.yl=n.yl,this.Xs=[],a=n=0;a<this.Ba;a++)this.Xs[a]=n,n+=c.Wa(this.dg[a]);for(this.Qq=n,this.Be=[],a=0;a<this.Ba;a++){n=c.Wa(this.ld(a));for(var o=c.te(this.ld(a)),u=0;u<n;u++)this.Be[this.Xs[a]+u]=o}}else this.Qq=this.Ba=0}return c.prototype.ld=function(a){if(0>a||a>this.Ba)throw h.i.O();return this.dg[a]},c.prototype.Rf=function(a){return this.wh[a]},c.gz=function(a){return c.EM[a]},c.Vp=function(a){return c.NM[a]},c.Wa=function(a){return c.mM[a]},c.prototype.hasAttribute=function(a){return 0<=this.wh[a]},c.prototype.dG=function(){return this.hasAttribute(1)},c.te=function(a){return c.$C[a]},c.prototype.GR=function(a){return this.Xs[a]},c.yG=function(a,n){return c.$C[a]===n},c.prototype.Nb=function(a){return this===a},c.prototype.Cn=function(){for(var a=h.P.Vh(this.dg[0]),n=1;n<this.Ba;n++)a=h.P.Vh(this.dg[n],a);return a},c.prototype.bk=function(a){return this.Xs[a]},c.prototype.dc=function(){return this.yl},c.prototype.Fd=function(a){return this.dg[a]},c.$C=[0,0,NaN,0,0,0,0,0,0],c.EM=[1,1,1,0,2,1,1,1,0],c.NM=[1,1,1,2,0,0,0,0,2],c.mM=[2,1,1,1,3,1,2,3,2],c}();h.sa=w}(B||(B={})),function(h){function O(p,y,g){var b=y-(p=new u(p)).e,S=p.c;for(S.length>++y&&w(p,b,u.gu),S[0]?g?b=y:(S=p.c,b=p.e+b+1):++b;S.length<b;S.push(0));return b=p.e,g===1||g&&(y<=b||b<=a)?(0>p.Cd&&S[0]?"-":"")+(1<S.length?S[0]+"."+S.join("").slice(1):S[0])+(0>b?"e":"e+")+b:p.toString()}function w(p,y,g,b){var S=p.c,$=p.e+y+1;if(g===1?b=5<=S[$]:g===2?b=5<S[$]||S[$]==5&&(b||0>$||S[$+1]!==void 0||1&S[$-1]):g===3?b=b||S[$]!==void 0||0>$:(b=!1,g!==0&&c("!Big.RM!")),1>$||!S[0])b?(p.e=-y,p.c=[1]):p.c=[p.e=0];else{if(S.length=$--,b)for(;9<++S[$];)S[$]=0,$--||(++p.e,S.unshift(1));for($=S.length;!S[--$];S.pop());}return p}function c(p){throw(p=Error(p)).name="BigError",p}var a=-7,n=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=function(){function p(y){if(y instanceof p)this.Cd=y.Cd,this.e=y.e,this.c=y.c.slice();else{var g,b,S;for(y===0&&0>1/y?y="-0":o.test(y+="")||c(NaN),this.Cd=y.charAt(0)=="-"?(y=y.slice(1),-1):1,-1<(g=y.indexOf("."))&&(y=y.replace(".","")),0<(b=y.search(/e/i))?(0>g&&(g=b),g+=+y.slice(b+1),y=y.substring(0,b)):0>g&&(g=y.length),b=0;y.charAt(b)=="0";b++);if(b==(S=y.length))this.c=[this.e=0];else{for(;y.charAt(--S)=="0";);for(this.e=g-b-1,this.c=[],g=0;b<=S;this.c[g++]=+y.charAt(b++));}}}return p.prototype.abs=function(){var y=new p(this);return y.Cd=1,y},p.prototype.cmp=function(y){var g=this.c,b=(y=new p(y)).c,S=this.Cd,$=y.Cd,I=this.e,C=y.e;if(!g[0]||!b[0])return g[0]?S:b[0]?-$:0;if(S!=$)return S;if(y=0>S,I!=C)return I>(C^y)?1:-1;for(S=-1,$=(I=g.length)<(C=b.length)?I:C;++S<$;)if(g[S]!=b[S])return g[S]>(b[S]^y)?1:-1;return I==C?0:I>(C^y)?1:-1},p.prototype.lm=function(y){var g=this.c,b=(y=new p(y)).c,S=this.Cd==y.Cd?1:-1,$=p.tr;if(($!==~~$||0>$||1e6<$)&&c("!Big.DP!"),!g[0]||!b[0])return g[0]==b[0]&&c(NaN),b[0]||c(S/0),new p(0*S);var I,C,R=b.slice(),L=I=b.length,N=g.length,U=g.slice(0,I),W=U.length,j=y,K=j.c=[],se=0,ne=$+(j.e=this.e-y.e)+1;for(j.Cd=S,S=0>ne?0:ne,R.unshift(0);W++<I;U.push(0));do{for(C=0;10>C;C++){if(I!=(W=U.length))var pe=I>W?1:-1;else{var he=-1;for(pe=0;++he<I;)if(b[he]!=U[he]){pe=b[he]>U[he]?1:-1;break}}if(!(0>pe))break;for(y=W==I?b:R;W;){if(U[--W]<y[W]){for(he=W;he&&!U[--he];U[he]=9);--U[he],U[W]+=10}U[W]-=y[W]}for(;!U[0];U.shift());}K[se++]=pe?C:++C,U[0]&&pe?U[W]=g[L]||0:U=[g[L]]}while((L++<N||U[0]!==void 0)&&S--);return K[0]||se==1||(K.shift(),j.e--),se>ne&&w(j,$,p.gu,U[0]!==void 0),j},p.prototype.aS=function(){return 0<this.cmp(0)},p.prototype.iT=function(){return 0>this.cmp(0)},p.prototype.kt=function(y){var g,b=this.Cd,S=(y=new p(y)).Cd;if(b!=S)return y.Cd=-S,this.oI(y);var $=this.c.slice(),I=this.e,C=y.c,R=y.e;if(!$[0]||!C[0])return C[0]?(y.Cd=-S,y):new p($[0]?this:0);if(b=I-R){for((g=0>b)?(b=-b,I=$):(R=I,I=C),I.reverse(),S=b;S--;I.push(0));I.reverse()}else for(I=((g=$.length<C.length)?$:C).length,b=S=0;S<I;S++)if($[S]!=C[S]){g=$[S]<C[S];break}if(g&&(I=$,$=C,C=I,y.Cd=-y.Cd),0<(S=(I=C.length)-(g=$.length)))for(;S--;$[g++]=0);for(S=g;I>b;){if($[--I]<C[I]){for(g=I;g&&!$[--g];$[g]=9);--$[g],$[I]+=10}$[I]-=C[I]}for(;$[--S]==0;$.pop());for(;$[0]==0;)$.shift(),--R;return $[0]||(y.Cd=1,$=[R=0]),y.c=$,y.e=R,y},p.prototype.oI=function(y){var g=this.Cd,b=(y=new p(y)).Cd;if(g!=b)return y.Cd=-b,this.kt(y);b=this.e;var S=this.c,$=y.e,I=y.c;if(!S[0]||!I[0])return I[0]?y:new p(S[0]?this:0*g);if(S=S.slice(),g=b-$){for(0<g?($=b,b=I):(g=-g,b=S),b.reverse();g--;b.push(0));b.reverse()}for(0>S.length-I.length&&(b=I,I=S,S=b),g=I.length,b=0;g;)b=(S[--g]=S[g]+I[g]+b)/10|0,S[g]%=10;for(b&&(S.unshift(b),++$),g=S.length;S[--g]==0;S.pop());return y.c=S,y.e=$,y},p.prototype.pow=function(y){var g=this,b=new p(1),S=b,$=0>y;for((y!==~~y||-1e6>y||1e6<y)&&c("!pow!"),y=$?-y:y;1&y&&(S=S.nr(g)),y>>=1;)g=g.nr(g);return $?b.lm(S):S},p.prototype.round=function(y,g){var b=this;return y==null?y=0:(y!==~~y||0>y||1e6<y)&&c("!round!"),w(b=new p(b),y,g!=null?g:p.gu),b},p.prototype.sqrt=function(){var y=this.c,g=this.Cd,b=this.e,S=new p("0.5");if(!y[0])return new p(this);0>g&&c(NaN),(g=Math.sqrt(this.toString()))==0||g==1/0?((g=y.join("")).length+b&1||(g+="0"),(y=new p(Math.sqrt(g).toString())).e=((b+1)/2|0)-(0>b||1&b)):y=new p(g.toString()),g=y.e+(p.tr+=4);do b=y,y=S.nr(b.oI(this.lm(b)));while(b.c.slice(0,g).join("")!==y.c.slice(0,g).join(""));return w(y,p.tr-=4,p.gu),y},p.prototype.nr=function(y){var g=this.c,b=(y=new p(y)).c,S=g.length,$=b.length,I=this.e,C=y.e;if(y.Cd=this.Cd==y.Cd?1:-1,!g[0]||!b[0])return new p(0*y.Cd);if(y.e=I+C,S<$){var R=g;g=b,b=R,C=S,S=$,$=C}for(R=Array(C=S+$);C--;R[C]=0);for(I=$;I--;){for($=0,C=S+I;C>I;)$=R[C]+b[I]*g[C-I-1]+$,R[C--]=$%10,$=$/10|0;R[C]=(R[C]+$)%10}for($&&++y.e,R[0]||R.shift(),I=R.length;!R[--I];R.pop());return y.c=R,y},p.prototype.toString=function(){var y=this.e,g=this.c.join(""),b=g.length;if(y<=a||y>=n)g=g.charAt(0)+(1<b?"."+g.slice(1):"")+(0>y?"e":"e+")+y;else if(0>y){for(;++y;g="0"+g);g="0."+g}else if(0<y)if(++y>b)for(y-=b;y--;g+="0");else y<b&&(g=g.slice(0,y)+"."+g.slice(y));else 1<b&&(g=g.charAt(0)+"."+g.slice(1));return 0>this.Cd&&this.c[0]?"-"+g:g},p.prototype.toExponential=function(y){return y==null?y=this.c.length-1:(y!==~~y||0>y||1e6<y)&&c("!toExp!"),O(this,y,1)},p.prototype.toFixed=function(y){var g=a,b=n;if(a=-(n=1/0),y==null)var S=this.toString();else y===~~y&&0<=y&&1e6>=y&&(S=O(this,this.e+y),0>this.Cd&&this.c[0]&&0>S.indexOf("-")&&(S="-"+S));return a=g,n=b,S||c("!toFix!"),S},p.prototype.toPrecision=function(y){return y==null?this.toString():((y!==~~y||1>y||1e6<y)&&c("!toPre!"),O(this,y-1,2))},p.tr=20,p.gu=1,p}();h.jp=u}(B||(B={})),function(h){var O=function(){function w(c){this.lf=c}return w.prototype.qr=function(c,a,n){var o=new h.h,u=new h.h,p=this.lf;n.Wd(c,a,function(y,g){return p.uc(2*y,o),p.uc(2*g,u),o.compare(u)})},w.prototype.bq=function(c){return this.lf.read(2*c+1)},w}();h.si=function(){function w(){}return w.cq=function(c){if(c.B())return!1;var a=c.K();return a==1736?c.He()!=0:a==1607?(a=[!1],w.nE(c,!0,a),a[0]):!(a!=197&&(!h.ba.zd(a)||c.wG()))},w.im=function(c){var a=c.K();if(a==1736)return a=new h.Ua(c.description),c.B()||c.ZC(a),a;if(a==1607)return w.nE(c,!1,null);if(a==197)return a=new h.Ua(c.description),c.B()||a.bd(c,!1),a;if(h.ba.zd(a)){if(a=new h.ee(c.description),!c.B()&&!c.wG()){var n=new h.Ta;c.Vo(n),a.add(n),c.Ro(n),a.add(n)}return a}if(h.ba.Tn(a))return null;throw h.i.O()},w.nE=function(c,a,n){n!=null&&(n[0]=!1);var o=null;if(a||(o=new h.ee(c.description)),!c.B()){var u=new h.ja(0);u.Jb(2*c.ea());for(var p=0,y=c.ea();p<y;p++)if(0<c.Ka(p)&&!c.Pn(p)){var g=c.Ca(p);u.add(g),g=c.Wc(p)-1,u.add(g)}if(0<u.size){y=new h.Zt,p=c.vb(0),y.sort(u,0,u.size,new O(p)),y=new h.h,p.uc(2*u.get(0),y),g=0;for(var b=1,S=new h.Ta,$=new h.h,I=1,C=u.size;I<C;I++)if(p.uc(2*u.get(I),$),$.rb(y))u.get(g)>u.get(I)?(u.set(g,2147483647),g=I):u.set(I,2147483647),b++;else{if((1&b)==0)u.set(g,2147483647);else if(a)return n!=null&&(n[0]=!0),null;y.N($),g=I,b=1}if((1&b)==0)u.set(g,2147483647);else if(a)return n!=null&&(n[0]=!0),null;if(!a)for(u.Wd(0,u.size,function(R,L){return R-L}),I=0,C=u.size;I<C&&u.get(I)!=2147483647;I++)c.we(u.get(I),S),o.add(S)}}return a?null:o},w}()}(B||(B={})),function(h){var O=function(){function w(){this.zf=new h.ja(0),this.As=new h.ja(0),this.zH=1,this.Gs=NaN}return w.prototype.sort=function(c,a,n,o){if(32>n-a)o.qr(a,n,c);else{var u=!0;try{for(var p=1/0,y=-1/0,g=a;g<n;g++){var b=o.bq(c.get(g));b<p&&(p=b),b>y&&(y=b)}if(this.reset(n-a,p,y,n-a)){for(g=a;g<n;g++){var S=c.get(g);b=o.bq(S);var $=this.uF(b);this.zf.set($,this.zf.get($)+1),this.As.write(g-a,S)}var I=this.zf.get(0);this.zf.set(0,0),g=1;for(var C=this.zf.size;g<C;g++){var R=this.zf.get(g);this.zf.set(g,I),I+=R}for(g=a;g<n;g++){S=this.As.read(g-a),b=o.bq(S),$=this.uF(b);var L=this.zf.get($);c.set(L+a,S),this.zf.set($,L+1)}u=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(u)o.qr(a,n,c);else{for(g=n=0,C=this.zf.size;g<C;g++)u=n,(n=this.zf.get(g))>u&&o.qr(a+u,a+n,c);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},w.prototype.reset=function(c,a,n,o){return!(2>c||n==a)&&(c=Math.min(w.cL,c),this.zf.Jb(c),this.zf.resize(c),this.zf.Yj(0,0,this.zf.size),this.zH=a,this.As.resize(o),this.Gs=(n-a)/(c-1),!0)},w.prototype.uF=function(c){return h.P.truncate((c-this.zH)/this.Gs)},w.cL=65536,w}();h.Zt=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var c=function(){function p(){}return p.Su=function(y,g,b,S,$,I){var C=new p;return C.Km=new h.h,C.Xm=new h.h,C.cw=new h.h,C.Km.N(y),C.Xm.N(g),C.cw.N(b),C.Eo=S,C.sh=$,C.uh=I,C},p.construct=function(y,g,b,S){var $=new p;return $.Km=new h.h,$.Xm=new h.h,$.cw=new h.h,$.Km.N(y),$.Xm.N(g),$.cw.Sc(),$.Eo=4,$.sh=b,$.uh=S,$},p}(),a=function(){function p(y,g,b,S,$,I){this.$v=null,this.za=0,this.zA=y,this.XH=this.VH=0,this.La=g,this.Oj=b,this.xk=S,this.Fq=$,this.Vb=I}return p.prototype.next=function(){for(var y=new h.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,y),this.za++,!y.B())break}var g=!1;if(this.$v==null&&(this.VH=y.Ng(),this.XH=y.kh(),this.$v=u.buffer(y,this.La,this.Oj,this.xk,this.Fq,this.Vb),g=!0),this.za<this.zA.I()){var b=new h.Ea;this.$v.copyTo(b)}else b=this.$v;if(!g){g=new h.Ed;var S=y.Ng()-this.VH;y=y.kh()-this.XH,g.ig(S,y),b.Pc(g)}return b},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),n=function(){function p(y,g){this.Xa=y,this.za=0,this.qq=g}return p.prototype.next=function(){var y=this.Xa.Y;if(this.za<y.ea()){var g=this.za;if(this.za++,!y.Pn(g))for(var b=y.Oa(y.Wc(g)-1);this.za<y.ea();){var S=y.Oa(y.Ca(this.za));if(y.Pn(this.za)||S!=b)break;b=y.Oa(y.Wc(this.za)-1),this.za++}if(this.za-g==1)return this.Xa.fE(this.Xa.Y,g,this.qq);for((b=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,g,!0),g+=1;g<this.za;g++)b.Fr(this.Xa.Y,g,0,y.tv(g),!1);return this.Xa.fE(b,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),o=function(){function p(y){this.Xa=y,this.za=0}return p.prototype.next=function(){var y=this.Xa.Y;if(this.za<y.ea()){var g=this.za;for(y.Kr(this.za),this.za++;this.za<y.ea()&&!(0<y.Kr(this.za));)this.za++;return g==0&&this.za==y.ea()?this.Xa.ly(y,0,y.ea()):this.Xa.ly(y,g,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),u=function(){function p(y){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=y,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return p.buffer=function(y,g,b,S,$,I){if(y==null||0>S)throw h.i.O();if(y.B())return new h.Ea(y.description);var C=new h.l;return y.yc(C),0<g&&C.X(g,g),(I=new p(I)).Oj=b,I.Y=y,I.ra=h.ua.Xd(b,C,!0),I.dt=h.ua.Xd(null,C,!0),I.La=g,I.ET=y.K(),0>=$&&($=96),I.sb=Math.abs(I.La),I.Mv=I.sb!=0?1/I.sb:0,isNaN(S)||S==0?S=1e-5*I.sb:S>.5*I.sb&&(S=.5*I.sb),12>$&&($=12),(y=Math.abs(g)*(1-Math.cos(Math.PI/$)))>S?S=y:(y=Math.PI/Math.acos(1-S/Math.abs(g)))<$-1&&12>($=h.P.truncate(y))&&($=12,S=Math.abs(g)*(1-Math.cos(Math.PI/$))),I.xk=S,I.Fq=$,I.oA=Math.min(I.dt,.25*S),I.gE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var y=this.lE();y=h.P.truncate((y+3)/4);var g=.5*Math.PI/y;this.jA=g;for(var b=0;b<4*y;b++)this.Jd.push(null);var S=Math.cos(g);g=Math.sin(g);var $=h.h.construct(0,1);for(b=0;b<y;b++)this.Jd[b+0*y]=h.h.construct($.y,-$.x),this.Jd[b+1*y]=h.h.construct(-$.x,-$.y),this.Jd[b+2*y]=h.h.construct(-$.y,$.x),this.Jd[b+3*y]=$,($=h.h.construct($.x,$.y)).Ct(S,g)},p.prototype.gE=function(){var y=this.Y.K();if(h.ba.zd(y))return(y=new h.Ua(this.Y.description)).pc(this.Y,!0),this.Y=y,this.gE();if(this.La<=this.ra){if(!h.ba.PS(y))return new h.Ea(this.Y.description);if(0>=this.La&&(y=new h.l,this.Y.A(y),y.S()<=2*-this.La||y.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw h.i.Ra()}},p.prototype.MN=function(){if(this.zG(this.Y)){var y=new h.Ta;this.Y.we(0,y);var g=new h.l;return this.Y.A(g),y.Db(g.tf()),this.Iu(y)}return this.Y=this.RV(this.Y),y=new n(this,this.qq),h.Ih.local().W(y,this.Oj,this.Vb).next()},p.prototype.LN=function(){if(this.La==0)return this.Y;var y=h.$l.local();if(this.ev(),this.Y=y.W(this.Y,null,!1,this.Vb),0>this.La){var g=this.Y;return g=this.ly(g,0,g.ea()),y.W(g,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(y=new h.Ta,this.Y.we(0,y),g=new h.l,this.Y.A(g),y.Db(g.tf()),this.Iu(y)):(y=new o(this),h.Ih.local().W(y,this.Oj,this.Vb).next())},p.prototype.ly=function(y,g,b){for(var S=new h.Ea(y.description);g<b;g++)if(!(1>y.Ka(g))){var $=y.Kr(g),I=new h.l;if(y.Tj(g,I),0<this.La){if(0<$)if(this.AG(y,g))$=new h.Ta,y.we(y.Ca(g),$),$.Db(I.tf()),this.Au(S,$);else{var C=$=new h.Ua(y.description);C=h.au.EG(this.Y,g)||this.Bn(this.Y,g,C,!0,1)==2?this.eE(y,g):this.An($),S.add(C,!1)}else if(!(I.S()+this.ra<=2*this.sb||I.da()+this.ra<=2*this.sb||(C=$=new h.Ua(y.description),this.Bn(this.Y,g,C,!0,1),$.B()))){var R=new h.l;for(R.L(I),R.X(this.sb,this.sb),C.vp(R),I=1,$=(C=this.An($)).ea();I<$;I++)S.addPath(C,I,!0)}}else if(0<$){if(!(I.S()+this.ra<=2*this.sb||I.da()+this.ra<=2*this.sb||(C=$=new h.Ua(y.description),this.Bn(this.Y,g,C,!0,-1),$.B())))for(R=new h.l,C.yc(R),R.X(this.sb,this.sb),C.vp(R),I=1,$=(C=this.An($)).ea();I<$;I++)S.addPath(C,I,!0)}else for(C=$=new h.Ua(y.description),this.Bn(this.Y,g,C,!0,-1),I=0,$=(C=this.An($)).ea();I<$;I++)S.addPath(C,I,!0)}if(0<this.La)return 1<S.ea()?S=this.An(S):p.kx(S);if(y=new h.l,S.yc(y),S.B())return p.kx(S);for(y.X(this.sb,this.sb),S.vp(y),S=this.An(S),y=new h.Ea(S.description),I=1,$=S.ea();I<$;I++)y.addPath(S,I,!1);return p.kx(y)},p.prototype.KN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(y){var g=new h.Ea(this.Y.description);return this.Au(g,y),this.oX(g)},p.prototype.JN=function(){var y=new a(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return h.Ih.local().W(y,this.Oj,this.Vb).next()},p.prototype.GN=function(){var y=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)y.bd(this.Y,!1);else{var g=new h.Hh;this.Y.dn(g),g.X(this.La,this.La),y.bd(g,!1)}return y}return y.bd(this.Y,!1),this.Y=y,this.eE(y,0)},p.prototype.eE=function(y,g){this.ev();var b=new h.Ea(y.description),S=new h.h,$=new h.h,I=new h.h,C=new h.h,R=new h.h,L=new h.h,N=new h.h,U=new h.h,W=y.Ka(g),j=y.Ca(g),K=0;for(g=y.Ka(g);K<g;K++){if(y.D(j+K,$),y.D(j+(K+1)%W,C),y.D(j+(K+2)%W,L),N.vc(C,$),N.length()==0||(N.Jv(),N.normalize(),N.scale(this.sb),S.add(N,$),I.add(N,C),K==0?b.Nt(S):b.Ei(S),b.Ei(I),U.vc(L,C),U.length()==0))throw h.i.Ra();U.Jv(),U.normalize(),U.scale(this.sb),R.add(U,C),this.BD(b,C,I,R,!1)}return p.kx(b)},p.prototype.fE=function(y,g,b){if(this.ev(),1>y.Ka(g))return null;if(this.AG(y,g)&&0<this.La){b=new h.Ta,y.we(y.Ca(g),b);var S=new h.l;return y.Tj(g,S),b.Db(S.tf()),this.Iu(b)}if(S=new h.Ua(y.description),y.Pn(g))this.Bn(y,g,S,b,1),this.Bn(y,g,S,b,-1);else{var $=new h.Ua(y.description);$.addPath(y,g,!1),$.Fr(y,g,0,y.tv(g),!1),this.Bn($,0,S,b,1)}return this.An(S)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},p.prototype.An=function(y){return h.Hg.Ok(y,this.dt,!0,!0,this.Vb)},p.prototype.lE=function(){if(this.xk==0)return this.Fq;var y=1-this.xk*Math.abs(this.Mv);return 4>(y=-1>y?4:2*Math.PI/Math.acos(y)+.5)?y=4:y>this.Fq&&(y=this.Fq),h.P.truncate(y)},p.prototype.BD=function(y,g,b,S,$){this.ev();var I=new h.h;I.vc(b,g),I.scale(this.Mv);var C=new h.h;C.vc(S,g),C.scale(this.Mv),0>(I=Math.atan2(I.y,I.x)/this.jA)&&(I=this.Jd.length+I),I=this.Jd.length-I,0>(C=Math.atan2(C.y,C.x)/this.jA)&&(C=this.Jd.length+C),(C=this.Jd.length-C)<I&&(C+=this.Jd.length);var R=h.P.truncate(C);C=h.P.truncate(Math.ceil(I)),(I=new h.h).N(this.Jd[C%this.Jd.length]),I.Dt(this.sb,g);var L=10*this.ra;for(I.sub(b),I.length()<L&&(C+=1),I.N(this.Jd[R%this.Jd.length]),I.Dt(this.sb,g),I.sub(S),I.length()<L&&--R,b=R-C,b++,R=0,C%=this.Jd.length;R<b;R++,C=(C+1)%this.Jd.length)I.N(this.Jd[C]),I.Dt(this.sb,g),y.Ei(I),this.Zq();$&&y.Ei(S)},p.prototype.Bn=function(y,g,b,S,$){var I=new h.hd,C=I.hN(y,g);if(I.Ip(this.oA,!1,!1),2>I.I(C))return 0>$||($=y,I=new h.Ta,$.we($.Ca(g),I),this.Au(b,I)),1;var R=I.Oa(I.Ya(I.Ob(C))),L=new h.Ed;if(L.ig(-R.x,-R.y),I.Pc(L),S&&(this.oQ(I,C,$),2>I.I(C)))return 0>$||($=y,I=new h.Ta,$.we($.Ca(g),I),this.Au(b,I)),1;this.$d.length=0;var N=I.Ob(C);g=I.Ya(N);var U=$==1?I.Na(g):I.V(g);y=$==1?I.V(g):I.Na(g);var W=!0;S=new h.h,C=new h.h;var j=new h.h,K=new h.h,se=new h.h,ne=new h.h,pe=new h.h,he=new h.h,xe=new h.h,ke=new h.h,Ae=this.sb;N=I.Ka(N);for(var st=0;st<N;st++)I.D(y,C),W&&(I.D(g,S),I.D(U,j),he.vc(S,j),he.normalize(),ke.HG(he),ke.scale(Ae),K.add(ke,S)),pe.vc(C,S),pe.normalize(),xe.HG(pe),xe.scale(Ae),se.add(S,xe),U=he.yi(pe),W=he.Sh(pe),0>U||0>W&&U==0?this.$d.push(c.Su(K,se,S,2,this.$d.length+1,this.$d.length-1)):K.rb(se)||(this.$d.push(c.construct(K,S,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(c.construct(S,se,this.$d.length+1,this.$d.length-1,"dummy"))),ne.add(C,xe),this.$d.push(c.Su(se,ne,S,1,this.$d.length+1,this.$d.length-1)),K.N(ne),ke.N(xe),j.N(S),S.N(C),he.N(pe),U=g,g=y,W=!1,y=$==1?I.V(g):I.Na(g);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(b),L.ig(R.x,R.y),b.TD(L,b.ea()-1),1},p.prototype.TV=function(y){for(var g=this.uO(),b=!0,S=g+1,$=g;S!=g;$=S){var I=this.$d[$];S=I.sh!=-1?I.sh:($+1)%this.$d.length,I.Eo!=0&&(b&&y.Nt(I.Km),I.Eo==2?this.BD(y,I.cw,I.Km,I.Xm,!0):y.Ei(I.Xm),b=!1)}},p.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var y=0,g=0,b=this.$d.length;g<b;){var S=this.$d[g];if((3&S.Eo)!=0){y=g;break}g=S.sh}for(b=y+1,g=y;b!=y;g=b){b=(S=this.$d[g]).sh;for(var $=1,I=null;b!=g&&(3&(I=this.$d[b]).Eo)==0;)b=I.sh,$++;$!=1&&(S.Eo&I.Eo)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(S.Km),this.Ns.Rc(S.Xm),this.nw.Ec(I.Km),this.nw.Rc(I.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(S.Xm.N(this.Ms[0]),I.Km.N(this.Ms[0]),S.sh=b,I.uh=g))}return y},p.prototype.Hv=function(y,g,b){var S=new h.h;if(S.vc(b,y),b=S.length(),0<(b=this.sb*this.sb-b*b*.25)){b=Math.sqrt(b),S.normalize(),S.cr();var $=new h.h;if($.vc(g,y),$.Sh(S)+b>=this.sb)return!0}return!1},p.prototype.oQ=function(y,g,b){for(var S=0;1>S;S++){var $=!1,I=y.Ob(g),C=y.Ka(I);if(C==0)break;var R=C;if(3>C)break;!y.ec(I)&&(R=C-1),I=y.Ya(I),C=0<b?y.Na(I):y.V(I);for(var L=0<b?y.V(I):y.Na(I),N=C,U=!0,W=new h.h,j=new h.h,K=new h.h,se=new h.h,ne=new h.h,pe=h.h.construct(0,0),he=new h.h,xe=new h.h,ke=new h.h,Ae=new h.h,st=this.sb,qe=0,It=0;It<R&&(y.D(L,j),U&&(y.D(I,W),y.D(C,K),N=C),xe.vc(W,K),xe.normalize(),he.vc(j,W),he.normalize(),N!=L);){var xt=xe.yi(he),tt=xe.Sh(he),xi=!0;if(0>xt||0>tt&&xt==0||!this.Hv(K,W,j)||(pe.N(j),xi=!1,++qe,$=!0),xi){if(0<qe)for(;(xt=0<b?y.Na(N):y.V(N))!=I;){if(y.D(xt,se),!this.Hv(se,K,pe)){xt!=L&&this.Hv(se,K,j)&&this.Hv(se,W,j)&&(K.N(se),N=xt,xi=!1,++qe);break}K.N(se),N=xt,xi=!1,++qe}if(!xi)continue;if(0<qe){for(N=0<b?y.Na(C):y.V(C),U=1;U<qe;U++)xi=0<b?y.Na(N):y.V(N),y.qd(N,!0),N=xi;ke.vc(W,K),qe=st*st-(qe=ke.length())*qe*.25,st-(qe=Math.sqrt(qe))>.5*this.xk?(ne.add(K,W),ne.scale(.5),ke.normalize(),ke.cr(),Ae.N(ke),Ae.scale(st-qe),ne.add(Ae),y.mf(C,ne)):y.qd(C,!0),qe=0}K.N(W),N=I}W.N(j),C=I,I=L,L=0<b?y.V(I):y.Na(I),It++,U=!1}if(0<qe){for(N=0<b?y.Na(C):y.V(C),U=1;U<qe;U++)xi=0<b?y.Na(N):y.V(N),y.qd(N,!0),N=xi;ne.add(K,W),ne.scale(.5),ke.vc(W,K),qe=st*st-(qe=ke.length())*qe*.25,qe=Math.sqrt(qe),ke.normalize(),ke.cr(),Ae.N(ke),Ae.scale(st-qe),ne.add(Ae),y.mf(C,ne)}if(y.Ip(this.oA,!1,!1),!$)break}},p.prototype.AG=function(y,g){if(y.Ka(g)==1)return!0;var b=new h.l;return y.Tj(g,b),Math.max(b.S(),b.da())<.5*this.xk},p.prototype.zG=function(y){var g=new h.l;return y.A(g),Math.max(g.S(),g.da())<.5*this.xk},p.prototype.RV=function(y){for(var g=0,b=0,S=(y=h.zC.local().W(y,.25*this.xk,!1,this.Vb)).ea();b<S;b++)g=Math.max(y.Ka(b),g);return 32>g?(this.qq=!1,y):(this.qq=!0,h.Hg.Ok(y,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(y,g){if(g=g.D(),this.Jd!=null&&this.Jd.length!==0){var b=new h.h;b.N(this.Jd[0]),b.Dt(this.sb,g),y.Nt(b);for(var S=1,$=this.Jd.length;S<$;S++)b.N(this.Jd[S]),b.Dt(this.sb,g),y.Ei(b)}else{S=this.lE(),b=h.P.truncate((S+3)/4),S=.5*Math.PI/b,$=Math.cos(S);for(var I=Math.sin(S),C=new h.h,R=3;0<=R;R--){switch(C.na(0,this.sb),R){case 0:for(S=0;S<b;S++)y.Aj(C.x+g.x,C.y+g.y),C.Ct($,I);break;case 1:for(S=0;S<b;S++)y.Aj(-C.y+g.x,C.x+g.y),C.Ct($,I);break;case 2:for(S=0;S<b;S++)y.Aj(-C.x+g.x,-C.y+g.y),C.Ct($,I);break;default:for(y.rx(C.y+g.x,-C.x+g.y),S=1;S<b;S++)C.Ct($,I),y.Aj(C.y+g.x,-C.x+g.y)}this.Zq()}}},p.kx=function(y){return y.Eh(1,0),y},p.prototype.oX=function(y){return y.Eh(2,this.ra),y.hm(),y},p}();h.CK=u}(B||(B={})),function(h){var O=function(){function w(c){this.Da=c,this.g=new h.hd,this.ed=new h.ja(0)}return w.prototype.Nh=function(c,a,n){switch(a){case 0:if(c.v<n&&c.C<=n)break;return c.v>=n?1:-1;case 1:if(c.G<n&&c.H<=n)break;return c.G>=n?1:-1;case 2:if(c.v>=n&&c.C>n)break;return c.C<=n?1:-1;case 3:if(!(c.G>=n&&c.H>n))return c.H<=n?1:-1}return 0},w.prototype.vy=function(c,a){return c.K()==1736?this.xy(c,a):this.yy(c)},w.prototype.xy=function(c,a){if(this.Da.S()==0||this.Da.da()==0)return c.Ja();var n=new h.l;c.yc(n),this.Y=this.g.Ib(c);var o=new h.l,u=new h.l,p=new h.h,y=new h.h,g=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0];new h.jg;var S=new h.zb,$=new h.ja(0);$.Jb(Math.min(100,c.I()));for(var I=!1,C=0;!I&&4>C;C++){var R=!1,L=(1&C)!=0,N=0;switch(C){case 0:N=this.Da.v,R=n.v<=N&&n.C>=N;break;case 1:N=this.Da.G,R=n.G<=N&&n.H>=N;break;case 2:N=this.Da.C,R=n.v<=N&&n.C>=N;break;case 3:N=this.Da.H,R=n.G<=N&&n.H>=N}if(R)for(I=!0,R=this.g.Ob(this.Y);R!=-1;){var U=-1,W=-1,j=this.g.Ya(R),K=j;do{var se=this.g.cc(K);se==null&&(se=S,this.g.D(K,p),se.Ec(p),this.g.D(this.g.V(K),y),se.Rc(y)),se.A(o);var ne=this.Nh(o,C,N),pe=0,he=-1;if(ne==-1){pe=0<(se=se.fq(L,N,g,b))?this.g.Wl(K,b,se):0,pe+=1;var xe=K,ke=this.g.V(xe);for(se=0;se<pe;se++){if(this.g.D(xe,p),this.g.D(ke,y),(he=this.g.cc(xe))==null&&((he=S).Ec(p),he.Rc(y)),he.A(u),(he=this.Nh(u,C,N))==-1){if(L)(he=Math.abs(p.y-N))<(Ae=Math.abs(y.y-N))?(p.y=N,this.g.mf(xe,p)):(y.y=N,this.g.mf(ke,y));else{he=Math.abs(p.x-N);var Ae=Math.abs(y.x-N);he<Ae?(p.x=N,this.g.mf(xe,p)):(y.x=N,this.g.mf(ke,y))}(he=this.g.cc(xe))==null&&((he=S).Ec(p),he.Rc(y)),he.A(u),he=this.Nh(u,C,N)}Ae=U,U=he,W==-1&&(W=U),Ae==0&&U==1||Ae==1&&U==0||Ae!=0||U!=0||$.add(xe),U==1&&(I=!1),he=xe=ke,ke=this.g.V(ke)}}pe==0&&(Ae=U,U=ne,W==-1&&(W=U),Ae==0&&U==1||Ae==1&&U==0||Ae!=0||U!=0||$.add(K),U==1&&(I=!1),he=this.g.V(K)),K=he}while(K!=j);for(W==0&&U==0&&$.add(j),se=0,U=$.size;se<U;se++)W=$.get(se),this.g.qd(W,!1);$.clear(!1),R=3>this.g.Ka(R)?this.g.ar(R):this.g.Sb(R)}}return I?c.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(c){var a=new h.l,n=new h.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new h.jg,y=c,g=new h.l;c.yc(g);for(var b=0;4>b;b++){var S=!1,$=(1&b)!=0,I=0;switch(b){case 0:I=this.Da.v,S=g.v<=I&&g.C>=I;break;case 1:I=this.Da.G,S=g.G<=I&&g.H>=I;break;case 2:I=this.Da.C,S=g.v<=I&&g.C>=I;break;case 3:I=this.Da.H,S=g.G<=I&&g.H>=I}if(S){S=y,y=c.Ja(),(S=S.Ha()).aj();for(var C,R=new h.h;S.ab();)for(var L,N=!0;S.Ia();){var U=S.ia();U.A(a);var W=this.Nh(a,b,I);if(W==-1){if(0<(W=U.fq($,I,o,u))){var j=0;C=U.bc();for(var K=0;K<=W;K++)if(j!=(L=K<W?u[K]:1)){U.dh(j,L,p);var se=p.get();se.Ec(C),K<W&&($?(R.x=o[K],R.y=I):(R.x=I,R.y=o[K]),se.Rc(R)),se.A(n);var ne=this.Nh(n,b,I);if(ne==-1){if(C=se.bc(),j=se.xc(),$)(ne=Math.abs(C.y-I))<(pe=Math.abs(j.y-I))?(C.y=I,se.Ec(C)):(j.y=I,se.Rc(j));else{ne=Math.abs(C.x-I);var pe=Math.abs(j.x-I);ne<pe?(C.x=I,se.Ec(C)):(j.x=I,se.Rc(j))}se.A(n),ne=this.Nh(n,b,I)}C=se.xc(),j=L,(L=ne)==1?(y.pc(se,N),N=!1):N=!0}}}else(L=W)==1?(y.pc(U,N),N=!1):N=!0}}}return y},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var c=new h.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,n=this.g.V(n))this.g.D(n,c),(this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(c){for(var a=new h.h,n=new h.h,o=h.P.mg(2048,0),u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u)){var p=this.g.Ya(u),y=p;do{var g=this.g.V(y);this.g.D(y,a);var b=-1;if(a.x==this.Da.v?(this.g.D(g,n),n.x==this.Da.v&&(b=1)):a.x==this.Da.C&&(this.g.D(g,n),n.x==this.Da.C&&(b=1)),a.y==this.Da.G?(this.g.D(g,n),n.y==this.Da.G&&(b=0)):a.y==this.Da.H&&(this.g.D(g,n),n.y==this.Da.H&&(b=0)),b!=-1&&(b=h.h.ub(a,n),!(1>=(b=h.P.truncate(Math.min(Math.ceil(b/c),2048)))))){for(var S=1;S<b;S++)o[S-1]=1*S/b;this.g.Wl(y,o,b-1)}y=g}while(y!=p)}},w.prototype.Xl=function(c,a){var n=this.g.Hd(),o=new h.h,u=new h.ja(0);u.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var y=this.g.Ya(p),g=0,b=this.g.Ka(p);g<b;g++){var S=this.g.V(y);this.g.D(y,o),(c?o.y==a:o.x==a)&&(this.g.D(S,o),(c?o.y==a:o.x==a)&&(this.g.Qa(y,n)!=1&&(u.add(y),this.g.Sa(y,n,1)),this.g.Qa(S,n)!=1&&(u.add(S),this.g.Sa(S,n,1)))),y=S}if(this.g.Ud(n),!(3>u.size)){var $=this;u.Wd(0,u.size,function(ne,pe){return $.Oh(ne,pe)}),n=new h.h,p=new h.h,y=new h.h,p.Sc();var I=-1;g=new h.ja(0),b=new h.ja(0),S=this.g.Hd();for(var C=this.g.Hd(),R=0,L=u.size;R<L;R++){var N=u.get(R);if(this.g.D(N,o),!o.rb(p)){if(I!=-1){for(var U=I;U<R;U++){I=u.get(U);var W=this.g.V(I);N=this.g.Na(I);var j=!1;0>this.Oh(I,W)&&(this.g.D(W,n),c?n.y==a:n.x==a)&&(g.add(I),j=!0,this.g.Sa(I,C,1)),0>this.Oh(I,N)&&(this.g.D(N,n),c?n.y==a:n.x==a)&&(j||g.add(I),this.g.Sa(I,S,1))}for(U=0,j=g.size;U<j;U++){if(I=g.get(U),N=this.g.Qa(I,S),W=this.g.Qa(I,C),N==1){N=this.g.Na(I),this.g.D(N,y);var K=[0];if(K[0]=0,!y.rb(o)){var se=h.h.ub(p,y);K[0]=h.h.ub(y,o)/se,K[0]==0?K[0]=2220446049250313e-31:K[0]==1&&(K[0]=.9999999999999998),this.g.Wl(N,K,1),N=this.g.Na(I),this.g.mf(N,o),b.add(N),this.g.Sa(N,S,1),this.g.Sa(N,C,-1)}}W==1&&(W=this.g.V(I),this.g.D(W,y),(K=[0])[0]=0,y.rb(o)||(se=h.h.ub(p,y),K[0]=h.h.ub(p,o)/se,K[0]==0?K[0]=2220446049250313e-31:K[0]==1&&(K[0]=.9999999999999998),this.g.Wl(I,K,1),N=this.g.V(I),this.g.mf(N,o),b.add(N),this.g.Sa(N,S,-1),this.g.Sa(N,C,1)))}I=g,g=b,(b=I).clear(!1)}I=R,p.N(o)}}this.g.Ud(S),this.g.Ud(C)}},w.prototype.Pl=function(c,a){var n=new h.h,o=new h.ja(0);o.Jb(100);for(var u=this.g.Hd(),p=0,y=this.ed.size;p<y;p++){var g=this.ed.get(p);if(g!=-1){var b=this.g.V(g);this.g.D(g,n),(c?n.y==a:n.x==a)&&(this.g.D(b,n),(c?n.y==a:n.x==a)&&(this.g.Qa(g,u)!=-2&&(o.add(g),this.g.Sa(g,u,-2)),this.g.Qa(b,u)!=-2&&(o.add(b),this.g.Sa(b,u,-2))))}}if(o.size!=0){var S=this;for(o.Wd(0,o.size,function(pe,he){return S.Oh(pe,he)}),p=0,y=o.size;p<y;p++){var $=o.get(p);this.g.Sa($,u,p)}g=new h.h,(b=new h.h).Sc();var I=-1;for(p=0,y=o.size;p<y;p++)if(($=o.get(p))!=-1&&(this.g.D($,n),!n.rb(b))){if(I!=-1)for(;;){$=!1;for(var C=1<p-I?p-1:p,R=I;R<C;R++){var L=o.get(R);if(L!=-1){var N=-1,U=this.g.V(L);0>this.Oh(L,U)&&(this.g.D(U,g),c?g.y==a:g.x==a)&&(N=U),U=-1;var W=this.g.Na(L);if(0>this.Oh(L,W)&&(this.g.D(W,g),c?g.y==a:g.x==a)&&(U=W),N!=-1&&U!=-1)this.Mh(L,o,u),this.g.qd(L,!1),this.Mh(N,o,u),this.g.qd(N,!1),$=!0;else if(N!=-1||U!=-1){for(W=R+1;W<p;W++){var j=o.get(W);if(j!=-1){var K=this.g.V(j),se=-1;0>this.Oh(j,K)&&(this.g.D(K,g),c?g.y==a:g.x==a)&&(se=K),K=this.g.Na(j);var ne=-1;if(0>this.Oh(j,K)&&(this.g.D(K,g),c?g.y==a:g.x==a)&&(ne=K),se!=-1&&ne!=-1){this.Mh(j,o,u),this.g.qd(j,!1),this.Mh(se,o,u),this.g.qd(se,!1),$=!0;break}if(N!=-1&&ne!=-1){this.At(o,L,N,j,ne,u),$=!0;break}if(U!=-1&&se!=-1){this.At(o,j,se,L,U,u),$=!0;break}}}if($)break}}}if(!$)break}I=p,b.N(n)}}this.g.Ud(u)},w.prototype.Mh=function(c,a,n){n=this.g.Qa(c,n),a.set(n,-1),n=this.g.Qa(c,this.li),this.ed.set(n,-1),(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(c,a,n,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,u),this.g.Cc(u,n),this.Mh(o,c,p),this.g.oi(o,!1),this.Mh(u,c,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var n=this.ed.get(c);n!=-1&&this.g.cj(n,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var y=this.g.Ya(p);if(y==-1||p!=this.g.cd(y)){var g=p;p=this.g.Sb(p),this.g.Kf(g,-1),this.g.br(g)}else{n=y,g=0;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=y);2>=g?(n=this.g.Qa(y,this.li),this.ed.set(n,-1),y=this.g.qd(y,!1),g==2&&(n=this.g.Qa(y,this.li),this.ed.set(n,-1),this.g.qd(y,!1)),g=p,p=this.g.Sb(p),this.g.Kf(g,-1),this.g.br(g)):(this.g.fp(p,!1),this.g.Yg(p,this.g.Na(y)),this.g.Xj(p,g),u+=g,o++,p=this.g.Sb(p))}}for(c=0,a=this.ed.size;c<a;c++)if((n=this.ed.get(c))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),g=0,y=n;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=y);2>=g?(n=this.g.Qa(y,this.li),this.ed.set(n,-1),y=this.g.qd(y,!1),g==2&&(0<=(n=this.g.Qa(y,this.li))&&this.ed.set(n,-1),this.g.qd(y,!1)),g=p,this.g.Kf(g,-1),this.g.br(g)):(this.g.mn(p,!0),this.g.Xj(p,g),this.g.Kf(p,y),this.g.Yg(p,this.g.Na(y)),this.g.fp(p,!1),u+=g,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),c=0,a=this.g.md;a!=-1;a=this.g.ve(a))c+=this.g.I(a);this.g.XB(c)},w.wy=function(c,a,n){return new w(a).vy(c,n)},w.clip=function(c,a,n,o){if(c.B())return c;if(a.B())return c.Ja();if((n=c.K())==33)return o=c.D(),a.contains(o)?c:c.Ja();if(n==197)return o=new h.l,c.A(o),o.Fa(a)?(a=new h.Hh,c.copyTo(a),a.Zo(o),a):c.Ja();var u=new h.l;if(c.yc(u),a.contains(u))return c;if(!a.isIntersecting(u))return c.Ja();if((u=c.Cb)!=null&&(u=u.Hk)!=null){if((u=u.To(a))==1){if(n!=1736)throw h.i.Ra();return(c=new h.Ea(c.description)).vp(a),c}if(u==0)return c.Ja()}switch(n){case 550:n=null,u=c.I();for(var p=c.vb(0),y=0,g=0;g<u;g++)o=new h.h,p.uc(2*g,o),a.contains(o)||(y==0&&(n=c.Ja()),y<g&&n.Gd(c,y,g),y=g+1);return 0<y&&n.Gd(c,y,u),y==0?c:n;case 1736:case 1607:return w.wy(c,a,o);default:throw h.i.Ra()}},w.prototype.Oh=function(c,a){var n=new h.h;return this.g.D(c,n),c=new h.h,this.g.D(a,c),n.compare(c)},w}();h.Vd=O}(B||(B={})),function(h){var O=function(){function w(c,a){this.Da=c,this.g=new h.hd,this.ed=new h.ja(0),this.od=a}return w.prototype.Nh=function(c,a,n){switch(a){case 0:if(c.v<n&&c.C<=n)break;return c.v>=n?1:-1;case 1:if(c.G<n&&c.H<=n)break;return c.G>=n?1:-1;case 2:if(c.v>=n&&c.C>n)break;return c.C<=n?1:-1;case 3:if(!(c.G>=n&&c.H>n))return c.H<=n?1:-1}return 0},w.prototype.vy=function(c,a){return c.K()==1736?this.xy(c,a):this.yy(c)},w.prototype.xy=function(c,a){if(this.Da.S()==0||this.Da.da()==0)return c.Ja();var n=new h.l;c.yc(n),this.Y=this.g.Ib(c);var o=new h.l,u=new h.l,p=new h.h,y=new h.h,g=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0],S=new h.zb,$=new h.ja(0);$.Jb(256);for(var I=!1,C=0;!I&&4>C;C++){var R=!1,L=(1&C)!=0,N=0;switch(C){case 0:N=this.Da.v,R=n.v<=N&&n.C>=N;break;case 1:N=this.Da.G,R=n.G<=N&&n.H>=N;break;case 2:N=this.Da.C,R=n.v<=N&&n.C>=N;break;case 3:N=this.Da.H,R=n.G<=N&&n.H>=N}if(R)for(I=!0,R=this.g.Ob(this.Y);R!=-1;){var U=!0,W=-1,j=-1,K=this.g.Ya(R),se=K;do{var ne=this.g.cc(se);ne==null&&(ne=S,this.g.D(se,p),ne.Ec(p),this.g.D(this.g.V(se),y),ne.Rc(y)),ne.A(o);var pe=this.Nh(o,C,N),he=0,xe=-1;if(pe==-1){he=0<(ne=ne.fq(L,N,g,b))?this.g.HX(se,b,ne):0,he+=1;var ke=se,Ae=this.g.V(ke);for(ne=0;ne<he;ne++){if(this.g.D(ke,p),this.g.D(Ae,y),(xe=this.g.cc(ke))==null&&((xe=S).Ec(p),xe.Rc(y)),xe.A(u),(xe=this.Nh(u,C,N))==-1){if(L)(xe=Math.abs(p.y-N))<(st=Math.abs(y.y-N))?(p.y=N,this.g.mf(ke,p)):(y.y=N,this.g.mf(Ae,y));else{xe=Math.abs(p.x-N);var st=Math.abs(y.x-N);xe<st?(p.x=N,this.g.mf(ke,p)):(y.x=N,this.g.mf(Ae,y))}(xe=this.g.cc(ke))==null&&((xe=S).Ec(p),xe.Rc(y)),xe.A(u),xe=this.Nh(u,C,N)}st=W,W=xe,j==-1&&(j=W),st==0&&W==1||st==1&&W==0||st!=0||W!=0||$.add(ke),W==1&&(U=I=!1),xe=ke=Ae,Ae=this.g.V(Ae)}}if(he==0&&(st=W,W=pe,j==-1&&(j=W),st==0&&W==1||st==1&&W==0||st!=0||W!=0||$.add(se),W==1&&(U=I=!1),xe=this.g.V(se)),se=xe,256<=$.size){for(ne=1,pe=$.size-1;ne<pe;ne++)he=$.get(ne),this.g.qd(he,!1);$.set(1,$.Gc()),$.Dh(2)}}while(se!=K);if(!U)for(j==0&&W==0&&$.add(K),ne=0,pe=$.size;ne<pe;ne++)he=$.get(ne),this.g.qd(he,!1);$.clear(!1),R=U||this.g.Ka(R)==0?this.g.ar(R):this.g.Sb(R)}}return I?c.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(c){var a=new h.l,n=new h.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new h.jg,y=c,g=new h.l;c.yc(g);for(var b=new h.h,S=new h.h,$=null,I=null,C=0;4>C;C++){var R=!1,L=(1&C)!=0,N=0;switch(C){case 0:N=this.Da.v,R=g.v<=N&&g.C>=N;break;case 1:N=this.Da.G,R=g.G<=N&&g.H>=N;break;case 2:N=this.Da.C,R=g.v<=N&&g.C>=N;break;case 3:N=this.Da.H,R=g.G<=N&&g.H>=N}if(R)for(R=y,y=c.Ja(),(R=R.Ha()).aj();R.ab();)for(var U,W=!0;R.Ia();){var j=R.ia();j.A(a);var K=this.Nh(a,C,N);if(K==-1){if(0<(K=j.fq(L,N,o,u))){var se=0;j.$p(b);for(var ne=0;ne<=K;ne++)if(se!=(U=ne<K?u[ne]:1)){j.dh(se,U,p);var pe=p.get();pe.Ec(b),ne<K&&(L?(S.x=o[ne],S.y=N):(S.x=N,S.y=o[ne]),pe.Rc(S)),pe.A(n);var he=this.Nh(n,C,N);he==-1&&($==null&&($=new h.h),I==null&&(I=new h.h),pe.$p($),pe.Vr(I),L?(se=Math.abs($.y-N))<(he=Math.abs(I.y-N))?($.y=N,pe.Ec($)):(I.y=N,pe.Rc(I)):(se=Math.abs($.x-N))<(he=Math.abs(I.x-N))?($.x=N,pe.Ec($)):(I.x=N,pe.Rc(I)),pe.A(n),he=this.Nh(n,C,N)),pe.Vr(b),se=U,(U=he)==1?(y.pc(pe,W),W=!1):W=!0}}}else(U=K)==1?(y.pc(j,W),W=!1):W=!0}}return y},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var c=new h.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,n=this.g.V(n))this.g.D(n,c),(this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(c){for(var a=new h.h,n=new h.h,o=null,u=null,p=h.P.mg(2048,0),y=this.g.Ob(this.Y);y!=-1;y=this.g.Sb(y)){var g=this.g.Ya(y),b=g;do{var S=this.g.V(b);this.g.D(b,a);var $=-1;if(a.x==this.Da.v?(this.g.D(S,n),n.x==this.Da.v&&($=1)):a.x==this.Da.C&&(this.g.D(S,n),n.x==this.Da.C&&($=1)),a.y==this.Da.G?(this.g.D(S,n),n.y==this.Da.G&&($=0)):a.y==this.Da.H&&(this.g.D(S,n),n.y==this.Da.H&&($=0)),$!=-1){if(o==null&&(o=new h.h),u==null&&(u=new h.h),o.N(a),u.na(0,0),$==0){var I=a.x-this.Da.v;u.x=h.mc.sign(n.x-a.x),o.x=c*h.mc.En(Math.floor(Math.abs(I/c)),I)+this.Da.v,0>o.x&&(o.x+=c)}else I=a.y-this.Da.G,u.y=h.mc.sign(n.y-a.y),o.y=c*h.mc.En(Math.floor(Math.abs(I/c)),I)+this.Da.G,0>o.y&&(o.y+=c);I=$!=0?n.y-a.y:n.x-a.x;var C=Math.abs(I);if(65536<C/c)throw h.i.ga("internal error");if(0<C){C=h.P.truncate(C/c)+2,p.length<C&&(p=h.P.mg(C));for(var R=C=0;;R++){var L=new h.h;if(L.x=o.x+u.x*R*c,L.y=o.y+u.y*R*c,1<=(L=($!=0?L.y-a.y:L.x-a.x)/I))break;0>=L||(p[C]=L,C++)}C!=0&&this.g.Wl(b,p,C)}}b=S}while(b!=g)}},w.prototype.Xl=function(c,a){for(var n=-1,o=new h.h,u=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var y=this.g.Ya(p),g=0,b=this.g.Ka(p);g<b;g++){var S=this.g.V(y);this.g.D(y,o),(c?o.y==a:o.x==a)&&(this.g.D(S,o),(c?o.y==a:o.x==a)&&(n==-1&&(n=this.g.Hd()),u==null&&(u=new h.ja(0)).Jb(100),this.g.Qa(y,n)!=1&&(u.add(y),this.g.Sa(y,n,1)),this.g.Qa(S,n)!=1&&(u.add(S),this.g.Sa(S,n,1)))),y=S}if(n!=-1&&this.g.Ud(n),!(u==null||3>u.size)){var $=this;u.Wd(0,u.size,function(ne,pe){return $.Oh(ne,pe)}),n=new h.h,p=new h.h,y=new h.h,p.Sc();var I=-1;g=new h.ja(0),b=new h.ja(0),S=null;for(var C=this.g.Hd(),R=this.g.Hd(),L=0,N=u.size;L<N;L++){var U=u.get(L);if(this.g.D(U,o),!o.rb(p)){if(I!=-1){for(var W=I;W<L;W++){I=u.get(W);var j=this.g.V(I);U=this.g.Na(I);var K=!1;this.g.D(j,n),0>p.compare(n)&&(c?n.y==a:n.x==a)&&(g.add(I),K=!0,this.g.Sa(I,R,1)),this.g.D(U,n),0>p.compare(n)&&(c?n.y==a:n.x==a)&&(K||g.add(I),this.g.Sa(I,C,1))}for(W=0,K=g.size;W<K;W++){if(I=g.get(W),U=this.g.Qa(I,C),j=this.g.Qa(I,R),U==1&&(U=this.g.Na(I),this.g.D(U,y),!y.rb(o))){S==null&&(S=[]);var se=h.h.ub(p,y);S[0]=h.h.ub(y,o)/se,S[0]==0?S[0]=2220446049250313e-31:S[0]==1&&(S[0]=.9999999999999998),this.g.Wl(U,S,1),U=this.g.Na(I),this.g.mf(U,o),b.add(U),this.g.Sa(U,C,1),this.g.Sa(U,R,-1)}j==1&&(j=this.g.V(I),this.g.D(j,y),y.rb(o)||(S==null&&(S=[]),se=h.h.ub(p,y),S[0]=h.h.ub(p,o)/se,S[0]==0?S[0]=2220446049250313e-31:S[0]==1&&(S[0]=.9999999999999998),this.g.Wl(I,S,1),U=this.g.V(I),this.g.mf(U,o),b.add(U),this.g.Sa(U,C,-1),this.g.Sa(U,R,1)))}I=g,g=b,(b=I).clear(!1)}I=L,p.N(o)}}this.g.Ud(C),this.g.Ud(R)}},w.prototype.Pl=function(c,a){for(var n=new h.h,o=null,u=-1,p=0,y=this.ed.size;p<y;p++){var g=this.ed.get(p);if(g!=-1){var b=this.g.V(g);this.g.D(g,n),(c?n.y==a:n.x==a)&&(this.g.D(b,n),(c?n.y==a:n.x==a)&&(u==-1&&(u=this.g.Hd()),o==null&&(o=new h.ja(0)).Jb(100),this.g.Qa(g,u)!=-2&&(o.add(g),this.g.Sa(g,u,-2)),this.g.Qa(b,u)!=-2&&(o.add(b),this.g.Sa(b,u,-2))))}}if(o==null)u!=-1&&this.g.Ud(u);else{var S=this;for(o.Wd(0,o.size,function(pe,he){return S.Oh(pe,he)}),p=0,y=o.size;p<y;p++){var $=o.get(p);this.g.Sa($,u,p)}g=new h.h,(b=new h.h).Sc();var I=-1;for(p=0,y=o.size;p<y;p++)if(($=o.get(p))!=-1&&(this.g.D($,n),!n.rb(b))){if(I!=-1)for(;;){$=!1;for(var C=1<p-I?p-1:p,R=I;R<C;R++){var L=o.get(R);if(L!=-1){var N=-1,U=this.g.V(L);this.g.D(U,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(N=U),U=-1;var W=this.g.Na(L);if(this.g.D(W,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(U=W),N!=-1&&U!=-1)this.Mh(L,o,u),this.g.qd(L,!1),this.Mh(N,o,u),this.g.qd(N,!1),$=!0;else if(N!=-1||U!=-1){for(W=R+1;W<p;W++){var j=o.get(W);if(j!=-1){var K=this.g.V(j),se=-1;this.g.D(K,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(se=K),K=this.g.Na(j);var ne=-1;if(this.g.D(K,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(ne=K),se!=-1&&ne!=-1){this.Mh(j,o,u),this.g.qd(j,!1),this.Mh(se,o,u),this.g.qd(se,!1),$=!0;break}if(N!=-1&&ne!=-1){this.At(o,L,N,j,ne,u),$=!0;break}if(U!=-1&&se!=-1){this.At(o,j,se,L,U,u),$=!0;break}}}if($)break}}}if(!$)break}I=p,b.N(n)}this.g.Ud(u)}},w.prototype.Mh=function(c,a,n){n=this.g.Qa(c,n),a.set(n,-1),n=this.g.Qa(c,this.li),this.ed.set(n,-1),(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(c,a,n,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,u),this.g.Cc(u,n),this.Mh(o,c,p),this.g.oi(o,!1),this.Mh(u,c,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var n=this.ed.get(c);n!=-1&&this.g.cj(n,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var y=this.g.Ya(p);if(y==-1||p!=this.g.cd(y)){var g=p;p=this.g.Sb(p),this.g.Kf(g,-1),this.g.br(g)}else{n=y,g=0;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=y);this.g.fp(p,!1),this.g.Yg(p,this.g.Na(y)),this.g.Xj(p,g),u+=g,o++,p=this.g.Sb(p)}}for(c=0,a=this.ed.size;c<a;c++)if((n=this.ed.get(c))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),g=0,y=n;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=y);2>=g?(n=this.g.Qa(y,this.li),this.ed.set(n,-1),y=this.g.qd(y,!1),g==2&&(0<=(n=this.g.Qa(y,this.li))&&this.ed.set(n,-1),this.g.qd(y,!1)),g=p,this.g.Kf(g,-1),this.g.br(g)):(this.g.mn(p,!0),this.g.Xj(p,g),this.g.Kf(p,y),this.g.Yg(p,this.g.Na(y)),this.g.fp(p,!1),u+=g,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),c=0,a=this.g.md;a!=-1;a=this.g.ve(a))c+=this.g.I(a);this.g.XB(c)},w.wy=function(c,a,n,o){return new w(a,o).vy(c,n)},w.clip=function(c,a,n,o,u){return w.Pu(c,a,null,n,o,u)},w.Pu=function(c,a,n,o,u,p){var y=c.K();if(y==33)return u=c.D(),a.contains(u)?c:c.Ja();if(y==197)return u=new h.l,c.A(u),u.Fa(a)?(a=new h.Hh,c.copyTo(a),a.Zo(u),a):c.Ja();if(c.B())return c;if(a.B())return c.Ja();var g=new h.l;if(c.yc(g),a.contains(g))return c;if(!a.isIntersecting(g))return c.Ja();if((n!=null||isNaN(o))&&h.ua.oy(n,a,!1),!h.ba.zj(y))throw h.i.O();if((n=c.Cb)!=null&&(n=n.Hk)!=null){if((n=n.To(a))==1){if(y!=1736)throw h.i.ga("internal error");return(c=new h.Ea(c.description)).vp(a),c}if(n==0)return c.Ja()}switch(y){case 550:for(p=null,y=c.I(),n=c.vb(0),o=0,u=new h.h,g=0;g<y;g++)n.uc(2*g,u),a.contains(u)||(o==0&&(p=c.Ja()),o<g&&p.Gd(c,o,g),o=g+1);return 0<o&&p.Gd(c,o,y),o==0?c:p;case 1736:case 1607:return w.wy(c,a,u,p);default:throw h.i.ga("internal error")}},w.prototype.Oh=function(c,a){var n=new h.h;return this.g.D(c,n),c=new h.h,this.g.D(a,c),n.compare(c)},w}();h.ti=O}(B||(B={})),function(h){var O=new h.h,w=function(){function a(n,o,u,p,y){this.Rm=new h.h,this.Fk=new h.h,this.Ri=new h.h,this.g=n,this.Cw=u,this.po=p,this.Rm=o,this.Al=y,this.Fk.Sc(),this.Ri.Sc()}return a.prototype.sE=function(n){this.g.D(n,this.Fk),n=h.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var o=h.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return c.eG(n,o)},a.prototype.ez=function(n){return this.g.Qa(n,this.Al)},a.prototype.Ky=function(n,o){return this.g.D(n,this.Fk),this.g.D(o,this.Ri),c.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},a}();h.oY=function(){};var c=function(){function a(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return a.dQ=function(n,o){var u=new a;return u.g=n,u.ra=o,u.Cw=o*o,u.bw=2*o,u.po=1/u.bw,u.wO()},a.Ev=function(n,o,u,p,y){return(n-=u)*n+(o-=p)*o<=y},a.eG=function(n,o){return h.P.Vh(o,h.P.Vh(n))},a.prototype.yO=function(n,o){this.g.Hc(n,O);for(var u=(O.y-this.Rm.y)*this.po,p=h.P.truncate((O.x-this.Rm.x)*this.po),y=h.P.truncate(u),g=u=0;1>=g;g+=1)for(var b=0;1>=b;b+=1){var S=a.eG(p+g,y+b),$=this.zl.lR(S);$!=-1&&(this.rq[u]=$,this.zs[u]=S,u++)}for(p=u-1;1<=p;p--)for($=this.rq[p],y=p-1;0<=y;y--)if($==this.rq[y]){this.zs[y]=-1,p!=--u&&(this.zs[p]=this.zs[u],this.rq[p]=this.rq[u]);break}for(y=0;y<u;y++)this.zO(n,this.zs[y],O,this.rq[y],o)},a.prototype.zO=function(n,o,u,p,y){for(var g=new h.h;p!=-1;p=this.zl.zR(p)){var b=this.zl.ka(p);n==b||o!=-1&&this.g.Qa(b,this.Al)!=o||(this.g.Hc(b,g),a.Ev(u.x,u.y,g.x,g.y,this.Cw)&&y.add(p))}},a.prototype.Zm=function(n,o,u){var p=this.g.Qa(n,this.so),y=this.g.Qa(o,this.so);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,n),this.g.Sa(n,this.so,p)),y==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,y),this.g.Sa(o,this.so,-2),o=this.TT(n,o),u&&(u=this.mw.sE(n),this.g.Sa(n,this.Al,u)),o},a.RT=function(n,o,u){n.Nb(o),u=n;var p=new h.h;a.ST(n.D(),o.D(),p),u.Db(p)},a.ST=function(n,o,u){var p=n.x;n.x!=o.x&&(p=(1*n.x+1*o.x)/2);var y=n.y;n.y!=o.y&&(y=(1*n.y+1*o.y)/2),u.na(p,y)},a.prototype.TT=function(n,o){var u=new h.h;this.g.D(n,u);var p=new h.h;this.g.D(o,p);var y=this.g.YF(n),g=y+(o=this.g.YF(o)),b=0,S=u.x;u.x!=p.x&&(S=(u.x*y+p.x*o)/g,b++);var $=u.y;return u.y!=p.y&&($=(u.y*y+p.y*o)/g,b++),0<b&&this.g.Db(n,S,$),this.g.rX(n,g),b!=0},a.prototype.wO=function(){var n=this.g.gd,o=this.g.DF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.po=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new w(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new h.ZK(h.P.truncate(4*n/3),this.mw),this.zl.vW(this.g.gd),n=!1,o=this.g.md;o!=-1;o=this.g.ve(o))for(var u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),y=0,g=this.g.Ka(u);y<g;y++){var b=this.mw.sE(p);this.g.Sa(p,this.Al,b),this.zl.addElement(p,b),p=this.g.V(p)}var S=new h.ja(0);for(S.Jb(10),o=this.g.md;o!=-1;o=this.g.ve(o))for(u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(p=this.g.Ya(u),y=0,g=this.g.Ka(u);y<g;y++){if(this.g.Qa(p,this.so)!=-2)for(b=this.g.Qa(p,this.Al),this.zl.kd(p,b);this.yO(p,S),S.size!=0;){b=!1;for(var $=0,I=S.size;$<I;$++){var C=S.get($),R=this.zl.ka(C);this.zl.wd(C),b=this.Zm(p,R,$+1==I)||b}if(n=n||b,S.clear(!1),!b)break}p=this.g.V(p)}return n&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),n},a.prototype.qN=function(){for(var n=new h.h,o=this.Ad.ke;o!=-1;o=this.Ad.lz(o)){var u=this.Ad.sc(o);for(this.g.D(this.Ad.ka(u),n),u=this.Ad.lb(u);u!=-1;u=this.Ad.lb(u))this.g.mf(this.Ad.ka(u),n)}},a}();h.$t=c}(B||(B={})),function(h){var O=function(){function w(c){c===void 0&&(c=null),this.zg=null,this.Pb=!1,this.zg=c===null?[]:c}return w.prototype.copyTo=function(c){if(c.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.zg.length;a++)c.zg.push(this.zg[a].Qf())},w.prototype.count=function(){return this.zg.length},w.prototype.add=function(c){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(c.Qf())},w.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},w.prototype.remove=function(c){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(c,1)},w.prototype.kg=function(){var c=new w;return this.copyTo(c),c},w.prototype.Qf=function(){return this.kg()},w.prototype.transform=function(c,a,n,o){if(c.length<a)throw h.i.ga("invalid Argument");var u=n;for(n=0;n<this.zg.length;n++){var p=this.zg[n];if(p.sm()!=null){var y=p.Wn,g=y?1:0,b=y?p.sm().getGeogcs2():p.sm().getGeogcs1();if(b=u/(b=b.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(b-1))for(u=0;u<a;u++)c[u][0]*=b,c[u][1]*=b;h.HC.geogToGeog(p.sm(),a,c,null,g),u=(y?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(b=u/o,3552713678800501e-30<Math.abs(b-1))for(u=0;u<a;u++)c[u][0]*=b,c[u][1]*=b;return a},w.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof w)||this.zg.length!=c.zg.length)return!1;for(var a=0;a<this.zg.length;a++)if(!this.zg[a].Nb(c.zg[a]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var c="CGT ("+this.count()+") ",a=0,n=this.count();a<n;++a)c+=this.zg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c},w.create=function(){return new w},w}();h.rC=O}(B||(B={})),function(h){var O,w=Math.PI,c=2*Math.PI,a=Math.PI/2,n=function(){function p(){}return p.OO=function(y,g){var b=new p;return b.x=y,b.y=g,b.type=0,b.Wh=0,b},p.cl=function(y){var g=new p;return g.x=y.x,g.y=y.y,g.type=0,g.Wh=0,g},p.NO=function(y){var g=new p;return g.x=y.x,g.y=y.y,g.type=y.type,g.Wh=y.Wh,g},p.Qd=function(y,g,b){var S=new p;return S.x=y.x+g*Math.cos(b),S.y=y.y+g*Math.sin(b),S.type=y.type,S.Wh=y.Wh,S},p.Ru=function(y,g){var b=new p;return b.x=.5*(y.x+g.x),b.y=.5*(y.y+g.y),b.type=y.type,b.Wh=y.Wh,b},p.OE=function(y,g){var b=new p;return b.x=y.x+.001*(g.x-y.x),b.y=y.y+.001*(g.y-y.y),b.type=y.type,b.Wh=y.Wh,b},p}(),o=function(){};(O=h.aL||(h.aL={}))[O.Round=0]="Round",O[O.Bevel=1]="Bevel",O[O.Miter=2]="Miter",O[O.Square=3]="Square";var u=function(){function p(y){this.IA=this.Zb=this.xg=null,this.od=y}return p.W=function(y,g,b,S,$,I){if(y==null||1>y.Eb())throw h.i.O();return g==0||y.B()?y:((I=new p(I)).mo=y,I.La=g,I.ra=$,I.Mi=b,I.xA=S,I.Qx())},p.prototype.$L=function(){var y=this.mo,g=y.bc(),b=y.xc(),S=new h.h;return S.vc(b,g),S.normalize(),S.Jv(),S.scale(this.La),g.add(S),b.add(S),S=y.Ja(),y.Ec(g),y.Rc(b),S},p.prototype.ZL=function(){var y=this.mo;if(0<this.La&&this.Mi!=2){var g=new h.Ea;return g.bd(y,!1),this.mo=g,this.Qx()}return(y=new h.Hh(y.aa)).X(this.La,this.La),y},p.prototype.oJ=function(y,g,b,S){return(g.x-y.x)*(S.x-b.x)+(g.y-y.y)*(S.y-b.y)},p.prototype.hc=function(y,g){if(g===void 0)this.Zb.push(y),this.gf++;else if(this.gf==0)this.hc(y);else{var b=this.Dw,S=this.xg[g==0?b-1:g-1],$=this.xg[g],I=this.oJ(S,$,this.Zb[this.gf-1],y);0<I?this.hc(y):0>I&&(0<this.oJ(S,$,$,this.Zb[this.gf-1])?($=this.xg[g==0?b-2:g==1?b-1:g-2],b=n.Qd(S,this.La,Math.atan2(S.y-$.y,S.x-$.x)-a),this.Zb[this.gf-1]=b,this.Mi==1||this.Mi==2?(b=n.Ru(b,S),this.hc(b),b=n.Qd(S,this.La,this.Lv+a),(S=n.Ru(b,S)).type|=256,this.hc(S)):(b=n.Qd(S,this.La,this.Lv+a)).type|=256,this.hc(b),this.hc(y,g)):(b=n.Qd($,this.La,this.Lv+a),this.hc(b),this.Mi==1||this.Mi==2?(b=n.Ru(b,$),this.hc(b),b=n.Qd($,this.La,this.Wz-a),(S=n.Ru(b,$)).type|=256,this.hc(S)):(b=n.Qd($,this.La,this.Wz-a)).type|=256,this.hc(b)))}},p.prototype.hE=function(){var y,g=this.Dw;this.gf=0;var b=.5*this.ra,S=0,$=0;for(y=0;y<g;y++){var I=this.xg[y],C=y==0?this.xg[g-1]:this.xg[y-1],R=y==g-1?this.xg[0]:this.xg[y+1],L=C.x-I.x,N=C.y-I.y,U=R.x-I.x,W=R.y-I.y,j=Math.atan2(N,L),K=Math.atan2(W,U);if(this.Lv=j,this.Wz=K,y==0&&(S=j,$=K),L=L*W-U*N,N=K,K<j&&(K+=c),0<L*this.La)this.Mi==1||this.Mi==2?(j=n.Qd(I,this.La,j+a),this.hc(j),j=n.OE(I,j),this.hc(j),j=n.Qd(I,this.La,K-a),(I=n.OE(I,j)).type|=256,this.hc(I),this.hc(j)):(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),j=n.Qd(I,L,.5*(j+K)),this.hc(j,y));else if((512&I.type)!=0){for(L=1-b/Math.abs(this.La),C=1,R=0>this.La?-w:w,-1<L&&1>L&&(.017453292519943295>(N=2*Math.acos(L))&&(N=.017453292519943295),1<(C=h.P.truncate(w/N+1.5))&&(R/=C)),N=j+a,j=n.Qd(I,this.La,N),y==0&&(j.type|=1024),this.hc(j,y),L=this.La/Math.cos(R/2),N+=R/2,(j=n.Qd(I,L,N)).type|=1024,this.hc(j);0<--C;)N+=R,(j=n.Qd(I,L,N)).type|=1024,this.hc(j);(j=n.Qd(I,this.La,K-a)).type|=1024,this.hc(j)}else if(this.Mi==1)j=n.Qd(I,this.La,j+a),this.hc(j,y),j=n.Qd(I,this.La,K-a),this.hc(j);else if(this.Mi==0)for(L=1-b/Math.abs(this.La),C=1,R=K-a-(j+a),-1<L&&1>L&&(.017453292519943295>(N=2*Math.acos(L))&&(N=.017453292519943295),1<(C=h.P.truncate(Math.abs(R)/N+1.5))&&(R/=C)),L=this.La/Math.cos(.5*R),N=j+a+.5*R,j=n.Qd(I,L,N),this.hc(j,y);0<--C;)N+=R,j=n.Qd(I,L,N),this.hc(j);else this.Mi==2?(L=C.x-I.x,N=C.y-I.y,.99999999<(C=(L*(U=R.x-I.x)+N*(W=R.y-I.y))/Math.sqrt(L*L+N*N)/Math.sqrt(U*U+W*W))?(j=n.Qd(I,1.4142135623730951*this.La,K-.25*w),this.hc(j,y),j=n.Qd(I,1.4142135623730951*this.La,K+.25*w),this.hc(j)):(C=Math.abs(this.La/Math.sin(.5*Math.acos(C))))>(R=Math.abs(this.xA*this.La))?(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),j=n.Qd(I,L,.5*(j+K)),K=h.h.construct(j.x,j.y),j=h.h.construct(I.x,I.y),(I=new h.h).vc(K,j),(K=new h.h).BW(R/I.length(),I,j),j=(C-R)*Math.abs(this.La)/Math.sqrt(C*C-this.La*this.La),0<this.La?I.Jv():I.cr(),I.scale(j/I.length()),(j=new h.h).add(K,I),(C=new h.h).vc(K,I),j=n.cl(j),this.hc(j,y),j=n.cl(C),this.hc(j)):(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),j=n.Qd(I,L,.5*(j+K)),this.hc(j,y))):(K=N,0<this.La?(K>j&&(K-=c),C=j-K<a):(K<j&&(K+=c),C=K-j<a),C?(N=0>(L=1.4142135623730951*this.La)?j+.25*w:j+.75*w,j=n.Qd(I,L,N),this.hc(j,y),N=0>L?K-.25*w:K-.75*w,j=n.Qd(I,L,N),this.hc(j)):(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),K<j&&(K+=c),j=n.Qd(I,L,(j+K)/2),this.hc(j,y)))}return this.Lv=S,this.Wz=$,this.hc(this.Zb[0],0),I=n.NO(this.Zb[this.gf-1]),this.Zb[0]=I,this.rW()},p.prototype.Cu=function(y,g){if(!(2>g))for(var b=0;b<g;b++){var S=this.Zb[y+b];b!=0?this.IA.Ei(h.h.construct(S.x,S.y)):this.IA.Nt(h.h.construct(S.x,S.y))}},p.prototype.aM=function(y,g,b){var S=y.Ca(g),$=y.Wc(g);if(this.Zb=[],this.IA=b,y.ec(g)){for(g=y.Oa(S);y.Oa($-1).rb(g);)$--;if(2<=$-S){for(this.Dw=$-S,this.xg=[],g=S;g<$;g++)this.xg.push(n.cl(y.Oa(g)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(g=y.Oa(S);S<$&&y.Oa(S+1).rb(g);)S++;for(g=y.Oa($-1);S<$&&y.Oa($-2).rb(g);)$--;if(2<=$-S){for(this.Dw=2*($-S)-2,this.xg=[],(b=n.cl(y.Oa(S))).type|=1536,this.xg.push(b),g=S+1;g<$-1;g++)b=n.cl(y.Oa(g)),this.xg.push(b);for((b=n.cl(y.Oa($-1))).type|=512,this.xg.push(b),g=$-2;g>=S+1;g--)(b=n.cl(y.Oa(g))).type|=1024,this.xg.push(b);if(this.hE())if(2<=this.Zb.length){for(y=-1,($=(1024&this.Zb[this.gf-1].type)!=0)||(y=0),g=1;g<this.gf;g++)(S=(1024&this.Zb[g].type)!=0)?$||1<($=g-1)-y+1&&this.Cu(y,$-y+1):$&&(y=g-1),$=S;$||1<($=this.gf-1)-y+1&&this.Cu(y,$-y+1)}else y=0,$=this.gf-1,0<=y&&1<=$-y&&this.Cu(y,$-y+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.rW=function(){for(var y=!1,g=0;g<this.gf;g++){var b=this.Zb[g];b.sh=g+1,b.uh=g-1,this.Zb[g]=b}for((b=this.Zb[0]).uh=this.gf-2,this.Zb[0]=b,(b=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=b,g=b=0;g<this.gf;g++)if((256&this.Zb[b].type)!=0){var S=this.BP(b);if(S==-1){y=!0;break}b=S}else b=this.Zb[b].sh;return!y&&(this.LO(b),!0)},p.prototype.BP=function(y){for(var g,b,S=this.gf-1,$=y,I=1;I<=S-2;I++){g=$=this.Zb[$].sh,b=y;for(var C=1;C<=I;C++){if(b=this.Zb[b].uh,(256&this.Zb[b].type)==0&&(256&this.Zb[g].type)==0){var R=this.bS(b,g);if(R!=-1)return R}g=this.Zb[g].uh}}return-1},p.prototype.bS=function(y,g){var b=this.Zb[this.Zb[y].uh],S=this.Zb[y],$=this.Zb[this.Zb[g].uh],I=this.Zb[g];if(!this.EW(b,S,$,I))return-1;var C=new o;return this.sQ(b,S,$,I,C)&&!C.XD&&h.P.XJ((S.x-b.x)*(I.y-$.y)-(S.y-b.y)*(I.x-$.x))!=h.P.XJ(this.La)?(b=this.Zb[y].uh,C.cn.type=S.type,C.cn.sh=g,C.cn.uh=b,this.Zb[y]=C.cn,C.cn=this.Zb[g],C.cn.uh=y,this.Zb[g]=C.cn,g):-1},p.prototype.EW=function(y,g,b,S){return Math.max(y.x,g.x)>=Math.min(b.x,S.x)&&Math.max(b.x,S.x)>=Math.min(y.x,g.x)&&Math.max(y.y,g.y)>=Math.min(b.y,S.y)&&Math.max(b.y,S.y)>=Math.min(y.y,g.y)},p.prototype.sQ=function(y,g,b,S,$){$.XD=!1;var I=(g.y-y.y)*(S.x-b.x)-(g.x-y.x)*(S.y-b.y),C=(b.y-y.y)*(g.x-y.x)-(b.x-y.x)*(g.y-y.y);if(0<=(I=I==0?2:C/I)&&1>=I){var R=I;if(I=(S.y-b.y)*(g.x-y.x)-(S.x-b.x)*(g.y-y.y),C=(y.y-b.y)*(S.x-b.x)-(y.x-b.x)*(S.y-b.y),0<=(I=I==0?2:C/I)&&1>=I)return $.cn=n.OO(y.x+I*(g.x-y.x),y.y+I*(g.y-y.y)),$.cn.Wh=b.Wh+R*(S.Wh-b.Wh),R!=0&&R!=1||I!=0&&I!=1||($.XD=!0),$.RY=I,$.SY=R,!((R==0||R==1)&&0<I&&1>I||(I==0||I==1)&&0<R&&1>R)}return!1},p.prototype.LO=function(y){for(;this.Zb[y].uh<y;)y=this.Zb[y].uh;var g=0,b=y;do b=this.Zb[b],this.Zb[g]=b,b=b.sh,g++;while(b!=y);this.Zb[g]=this.Zb[0],this.gf=g+1},p.prototype.VC=function(y){var g=this.mo,b=g.Ha();if(b!=null){b.aj();for(var S=-1;b.ab();)S++,this.aM(g,S,y)}},p.prototype.Qx=function(){var y=this.mo.K();return y==322?this.$L():y==197?this.ZL():h.ba.zd(y)?((y=new h.Ua).pc(this.mo,!0),this.mo=y,this.Qx()):y==1607?(y=new h.Ua,this.VC(y),y):y==1736?(y=new h.Ea,this.VC(y),y):null},p}();h.DK=u}(B||(B={})),function(h){var O=function(){function n(o){this.sk=o}return n.prototype.D=function(o,u){this.sk.g.D(o,u)},n.prototype.wd=function(o){var u=this.sk.Ga.ka(o);this.sk.Ga.wd(o,-1),this.sk.g.qd(u,!1)},n}(),w=function(){function n(o){this.sk=o}return n.prototype.D=function(o,u){this.sk.DT.D(o,u)},n.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},n}(),c=function(){function n(o){this.sk=o}return n.prototype.D=function(o,u){u.N(this.sk.GT[o])},n.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},n}(),a=function(){function n(o){o===void 0?(this.Ga=new h.$j,this.Ga.Ee(20),this.g=new h.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new O(this)):o instanceof Array?(this.Ga=new h.$j,this.Ga.Ee(20),this.GT=o,this.Zh=new c(this)):(this.Ga=new h.$j,this.Ga.Ee(20),this.DT=o,this.Zh=new w(this))}return n.prototype.Ib=function(o){var u=o.K();if(h.Fx.zj(u))this.eN(o);else if(h.Xk.zd(u))this.jN(o);else if(u==197)this.bN(o);else{if(u!=33)throw h.i.O("invalid shape type");this.iN(o)}},n.prototype.YQ=function(){var o=new h.Ta,u=this.Ga.sc(-1),p=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(u),o),p.nf(o),u=this.Ga.lb(u);u!=-1;u=this.Ga.lb(u))this.g.Xi(this.Ga.ka(u),o),p.lineTo(o);return p},n.MO=function(o){var u=new n(o),p=o.I(),y=1,g=new h.h,b=new h.h,S=new h.h;for(o.D(0,g);o.D(y,b),b.Mz(g)&&y<p-1;)y++;for(u.Ga.addElement(0,-1),u.Ga.zn(y),p=y+1;p<o.I();p++)o.D(p,S),(y=u.kC(S))!=-1&&u.Ga.Uj(y,p);for(S=new h.Ta,y=u.Ga.sc(-1),p=new h.Ea(o.description),o.we(u.Ga.ka(y),S),p.nf(S),y=u.Ga.lb(y);y!=-1;y=u.Ga.lb(y))o.we(u.Ga.ka(y),S),p.lineTo(S);return p},n.construct=function(o,u,p){for(var y=new n(o),g=1,b=o[0];o[g].Mz(b)&&g<u-1;)g++;for(y.Ga.addElement(0,-1),y.Ga.zn(g),g+=1;g<u;g++)(b=y.kC(o[g]))!=-1&&y.Ga.Uj(b,g);for(o=0,u=y.Ga.sc(-1);u!=-1;u=y.Ga.lb(u))p[o++]=y.Ga.ka(u);return o},n.EG=function(o,u){var p=o.Ca(u),y=o.Wc(u);if(u=!o.ec(u)&&o.Pn(u),o=o.vb(0),y*=2,u&&(y-=2),6>y-(p*=2))return!0;u=new h.h;var g=new h.h,b=new h.h;o.uc(p,u),o.uc(p+2,g),o.uc(p+4,b);var S=n.Yu(g,b,u);if(S.rs()||!n.wm(S.value()))return!1;var $=h.h.construct(g.x,g.y),I=new h.h;for(p+=6;p<y;p+=2)if(I.N(g),g.N(b),o.uc(p,b),(S=n.Yu(g,b,u)).rs()||!n.wm(S.value())||(S=n.Yu($,b,u)).rs()||!n.wm(S.value())||(S=n.Yu(g,b,I)).rs()||!n.wm(S.value()))return!1;return!0},n.prototype.eN=function(o){for(var u=new h.Ta,p=new h.h,y=0;y<o.I();y++){o.D(y,p);var g=this.Er(p);if(g!=-1){o.we(y,u);var b=this.g.hc(this.Us,u);this.Ga.Uj(g,b)}}},n.prototype.bN=function(o){for(var u=new h.Ta,p=new h.h,y=0;4>y;y++){o.hB(y,p);var g=this.Er(p);if(g!=-1){o.If(y,u);var b=this.g.hc(this.Us,u);this.Ga.Uj(g,b)}}},n.prototype.jN=function(o){var u=new h.Ta,p=o.bc();if((p=this.Er(p))!=-1){o.Vo(u);var y=this.g.hc(this.Us,u);this.Ga.Uj(p,y)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Ro(u),o=this.g.hc(this.Us,u),this.Ga.Uj(p,o))},n.prototype.iN=function(o){var u=o.D();(u=this.Er(u))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(u,o))},n.prototype.Er=function(o){var u=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(u=this.Ga.zn(-5)),u}return this.kC(o)},n.prototype.kC=function(o){var u=-1;do{var p=this.Ga.sc(-1),y=this.Ga.Gc(-1),g=this.Ga.ka(p),b=this.Ga.ka(y),S=new h.h,$=new h.h;if(this.Zh.D(g,S),this.Zh.D(b,$),g=h.h.Wq($,o,S),n.wm(g))u=this.Ga.zn(-1),(S=this.iC(o,y,p))!=p&&this.jC(o,p,this.Ga.xe(S));else if(n.xG(g)){$=this.Ga.uv(-1);var I=this.Ga.sc(-1),C=this.Ga.Gc(-1);for(g=new h.h,b=new h.h;I!=this.Ga.xe(C);){var R=this.Ga.ka($);this.Zh.D(R,g),R=h.h.Wq(g,o,S),n.xG(R)?(C=$,$=this.Ga.nl($)):(I=$,$=this.Ga.Zp($))}if($=C,S=I,R=this.Ga.ka($),I=this.Ga.ka(S),this.Zh.D(R,g),this.Zh.D(I,b),S!=p&&(g=h.h.Wq(b,o,g),!n.wm(g)))continue;u=this.Ga.Bu(S,$,-2,!1),this.jC(o,$,y),this.iC(o,S,p)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec($),this.tb.Rc(S),0>(S=this.tb.ge(o,!0))?(S=this.Ga.xe(y),this.Ga.wd(y,-1),u=this.Ga.zn(-3),this.iC(o,S,p)):1<S&&(S=this.Ga.lb(p),this.Ga.wd(p,-1),u=this.Ga.Bu(-1,S,-3,!1),this.jC(o,S,y))}while(0);return u},n.prototype.jC=function(o,u,p){if(u!=p){var y=this.Ga.ka(u),g=this.Ga.lb(u),b=new h.h,S=new h.h;for(this.Zh.D(y,b);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(g),S),y=h.h.Wq(S,o,b),!n.wm(y));)y=u,u=g,b.N(S),g=this.Ga.lb(u),this.Zh.wd(y)}},n.prototype.iC=function(o,u,p){if(u==p)return p;var y=this.Ga.ka(u),g=this.Ga.xe(u),b=new h.h,S=new h.h;for(this.Zh.D(y,b);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(g),S),y=h.h.Wq(b,o,S),!n.wm(y));)y=u,u=g,b.N(S),g=this.Ga.xe(u),this.Zh.wd(y);return u},n.Yu=function(o,u,p){var y=new h.Xb;y.set(u.x),y.sub(o.x);var g=new h.Xb;g.set(p.y),g.sub(o.y);var b=new h.Xb;return b.set(u.y),b.sub(o.y),(u=new h.Xb).set(p.x),u.sub(o.x),y.Bg(g),b.Bg(u),y.sub(b),y},n.wm=function(o){return 0>o},n.xG=function(o){return 0<o},n}();h.au=a}(B||(B={})),function(h){var O=function(){function w(c){this.g=null,this.oH=!0,this.od=c}return w.uU=function(c,a,n){return c=h.ua.Gr(c),h.$t.Ev(a.Ng(),a.kh(),n.Ng(),n.kh(),h.mc.ox(c))},w.xO=function(c,a){var n=new h.Ta;return h.$t.RT(c,a,n),n},w.W=function(c,a,n,o){return(n=new w(n)).g=c,n.ra=a,n.oH=o,n.zM()},w.prototype.iM=function(c){return h.$t.dQ(this.g,c)},w.prototype.nM=function(c){return h.bu.W(this.g,c,this.od)},w.prototype.zM=function(){var c=this.ra,a=h.ua.Gr(c),n=1.00001*(c=h.ua.mN(c));c*=1.000001;for(var o=!1,u=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,y=this.g.eS();;p++){if(p>u)throw h.i.ga("Internal Error: max number of iterations exceeded");var g=this.iM(a);if(o=o||g,this.oH&&(g=this.g.Ip(a,!0,!1)!=0,o=o||g),g=!1,(p==0||y||h.bu.fI(!0,this.g,c,null,this.od))&&(g=this.nM(n),o=o||g),!g)break;h.op.Bp(this.od)}return o},w}();h.Vk=O}(B||(B={})),function(h){var O=function(){function c(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return c.prototype.wv=function(a,n){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,n))return null;o=n}return o},c.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||(4095&this.$s)==0)&&(this.$s=0,h.op.Bp(this.Vb))},c.prototype.iP=function(){var a=this.g.$q(!1),n=!1,o=new h.zb,u=new h.zb,p=new h.l;p.Pa();var y=new h.l;y.Pa();for(var g=new h.Ta,b=new h.OC,S=a.next();S!=-1;S=a.next()){h.op.Bp(this.Vb);var $=null,I=!1;if(!h.ba.Tn(this.g.jc(a.ek))){if(($=this.wv(S,o))==null)continue;if($.A(p),p.X(this.ra,this.ra),$.Di(this.ra)){if(!$.Di(0))continue;I=!0,$=null}}var C=this.g.$q(a),R=C.next();for(R!=-1&&(R=C.next());R!=-1;R=C.next()){var L=null,N=!1;if(!h.ba.Tn(this.g.jc(C.ek))){if((L=this.wv(R,u))==null)continue;if(L.A(y),L.Di(this.ra)){if(!L.Di(0))continue;N=!0,L=null}}var U=0,W=0;if($!=null&&L!=null)p.CG(y)&&(b.Qo($),b.Qo(L),b.Fa(this.ra,!1),0<(U=b.ql(0))+(W=b.ql(1))&&(this.g.lr(S,b,0,!0),this.g.lr(R,b,1,!0)),b.clear());else if($!=null){var j=new h.h;if(this.g.D(R,j),p.contains(j)){if(b.Qo($),this.g.Xi(R,g),b.Fz(this.ra,g,!1),0<(U=b.ql(0)))if(this.g.lr(S,b,0,!0),N){for(N=-1,j=this.g.V(R);j!=-1&&j!=R&&(N=j,(L=this.wv(j,u))!=null&&L.Di(0));j=this.g.V(j));for(j=R;j!=-1&&(this.g.Fh(j,b.Cf),j!=N);j=this.g.V(j));}else this.g.Fh(R,b.Cf);b.clear()}}else{if(L==null)continue;if(j=new h.h,this.g.D(S,j),y.X(this.ra,this.ra),y.contains(j)){if(b.Qo(L),this.g.Xi(S,g),b.Fz(this.ra,g,!1),0<(W=b.ql(0)))if(this.g.lr(R,b,0,!0),I){for(N=-1,j=this.g.V(S);j!=-1&&j!=S&&(N=j,(L=this.wv(j,u))!=null&&L.Di(0));j=this.g.V(j));for(j=S;j!=-1&&(this.g.Fh(j,b.Cf),j!=N);j=this.g.V(j));}else this.g.Fh(S,b.Cf);b.clear()}}if(U+W!=0){if(U!=0){if(($=this.g.cc(S))==null){if(!this.g.fd(S,o))continue;$=o,o.A(p)}else $.A(p);if($.Di(this.ra))break}n=!0}}}return n},c.prototype.jP=function(){return this.LU()},c.prototype.LU=function(){return new h.MC().LX(this.g,this.ra)},c.prototype.gI=function(){var a=!1;this.Nc==null&&(this.Nc=new h.$j);var n=new h.ja(0);n.Jb(this.g.gd+1);for(var o=this.g.$q(),u=o.next();u!=-1;u=o.next())n.add(u);this.g.nx(n,n.size),n.add(-1),o=this.g.Hd(),u=this.g.Hd(),this.ae=new h.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var p=new h.ja(0),y=new h.ja(0),g=0;new h.h;var b=this.g.ud;this.g.wb.oc();for(var S,$,I=this.g.wb.Aa[0].o,C=n.get(g++);C!=-1;){var R=S=I[2*($=b.U(C,0))],L=$=I[2*$+1];do{var N=b.U(C,2),U=b.U(C,1);if(N!=-1){var W=b.U(N,0),j=I[2*W];0>(L<(W=I[2*W+1])?-1:L>W?1:R<j?-1:R>j?1:0)&&(y.add(C),y.add(N))}U!=-1&&(j=I[2*(W=b.U(U,0))],0>(L<(W=I[2*W+1])?-1:L>W?1:R<j?-1:R>j?1:0)&&(y.add(U),y.add(U))),(j=this.g.Qa(C,o))!=-1&&(p.add(j),this.g.Sa(C,o,-1)),(j=this.g.Qa(C,u))!=-1&&(p.add(j),this.g.Sa(C,u,-1)),(C=n.get(g++))!==-1&&(R=I[2*(L=b.U(C,0))],L=I[2*L+1])}while(C!=-1&&R===S&&L===$);for(R=p.size==1&&y.size==2,j=L=-1,N=0,U=p.size;N<U;N++){W=p.get(N);var K=this.Nc.xe(W);if(K==-1||p.cG(K)||(L=K),(W=this.Nc.lb(W))==-1||p.cG(W)||(j=W),L!=-1&&j!=-1)break}for(this.ae.VJ($,S),N=0,U=p.size;N<U;N++)W=p.get(N),this.Nc.wd(W,-1);if(p.clear(!1),!R&&L!=-1&&j!=-1&&this.lO(L,j)){a=!0,this.Pi=this.ae.tm();break}for(N=0,U=y.size;N<U;N+=2){if($=y.get(N),S=y.get(N+1),R?($=this.Nc.Bu(L,j,$,!0),R=!1):$=this.Nc.addElement($,-1),this.ae.sg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(S,o)==-1?this.g.Sa(S,o,$):this.g.Sa(S,u,$)}if(a)break;y.Dh(0)}return this.g.Ud(o),this.g.Ud(u),a},c.prototype.lO=function(a,n){return this.ae.compare(this.Nc,this.Nc.ka(a),n),a=this.ae.sg,this.ae.Mr(),a},c.tE=function(a){for(var n=a.md;n!=-1;n=a.ve(n))if(h.ba.Ic(a.jc(n)))return!0;return!1},c.aQ=function(a,n,o,u){return!!c.tE(a)&&((n=new c(u)).g=a,n.ra=o,15>a.gd?a=n.iP():n.jP())},c.W=function(a,n,o){return c.aQ(a,a.DF(),n,o)},c.fI=function(a,n,o,u,p){if(!c.tE(n))return!1;var y=new c(p);if(y.g=n,y.ra=o,y.Yz=a,y.gI())return u!=null&&u.Yt(y.Pi),!0;var g=new h.Ed;return g.VB(),n.Pc(g),(y=new c(p)).g=n,y.ra=o,y.Yz=a,a=y.gI(),g.VB(),n.Pc(g),!!a&&(u!=null&&u.Yt(y.Pi),!0)},c.Ol=function(a,n){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*n<1*a*n},c.gP=function(a,n,o,u){if(h.ba.Ic(n.K()))return new c(u).hP(a,n,o);throw h.i.ga("crack_A_with_B")},c.prototype.hP=function(a,n,o){var u=new h.l;a.yc(u);var p=new h.l;if(n.yc(p),p.X(o,o),!p.isIntersecting(u))return a;var y=a.Cb,g=null;y!=null&&(g=y.Gb),c.Ol(a,a.I())&&(g=h.ua.lj(a,p));var b=g!=null?g.getIterator():null,S=n.Ha();n=a.Ha();var $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];S.ab();)for(;S.Ia();){var I=S.ia();if(g!=null){for(b.Wo(I,o),y=b.next();y!=-1;y=b.next())if(this.Zq(),n.Wb(g.ka(y),-1),n.Ia()){var C=(y=n.ia()).Fa(I,null,$,null,o);for(y=0;y<C;++y){var R=$[y];if(R!=0&&R!=1){var L=n.xb(),N=new w;N.t=R,N.index=L,p.push(N)}}}}else{var U=new h.l;if(I.yc(U),U.X(o,o),u.isIntersecting(U)){for(n.aj();n.ab();)for(;n.Ia();)if(this.Zq(),y=n.ia(),R=new h.l,y.yc(R),R.isIntersecting(U))for(C=y.Fa(I,null,$,null,o),y=0;y<C;++y)(R=$[y])!=0&&R!=1&&(L=n.xb(),(N=new w).t=R,N.index=L,p.push(N))}}}if(p.length==0)return a;for(p=p.sort(w.zy),a=a.Ja(),n.aj();n.ab()&&!n.Ia(););for(o=n.ia(),u=new h.jg,g=-1,y=0,b=p.length;y<b;){for($=p[y].index,S=y+1;S<b&&p[S].index==$;)++S;for(;n.xb()<$;){if(this.Zq(),I=n.Ia(),R=n.gb,(U=I||!n.Qn()||n.Rn())&&a.pc(o,g!=R),g=R,!I)for(;n.ab()&&!n.Ia(););o=n.ia()}for($=0;y<S;y++)(R=p[y].t)!=$&&(o.dh($,R,u),$=R,R=n.gb,a.pc(u.get(),g!=R),g=R);if((U=(I=n.Ia())||!n.Qn()||n.Rn())&&(o.dh($,1,u),a.pc(u.get(),!1)),I)o=n.ia();else{for(;n.ab()&&!n.Ia(););o=n.Ia()?n.ia():null}y=S}for(o!=null&&(R=n.gb,(U=(I=n.Ia())||!n.Qn()||n.Rn())&&a.pc(o,g!=R),g=R),I=n.Ia();;){if(!I){for(;n.ab()&&!(I=n.Ia()););if(!I)break}o=n.ia(),R=n.gb,(U=(I=n.Ia())||!n.Qn()||n.Rn())&&a.pc(o,g!=R),g=R}return a},c}();h.bu=O;var w=function(){function c(){}return c.zy=function(a,n){return a.index==n.index?a.t>n.t?1:a.t<n.t?-1:0:a.index>n.index?1:-1},c}()}(B||(B={})),function(h){var O;(O=h.FK||(h.FK={}))[O.Left=0]="Left",O[O.Right=1]="Right",O[O.Coincident=2]="Coincident",O[O.Undefined=3]="Undefined",O[O.Uncut=4]="Uncut";var w=function(n,o,u,p,y,g,b,S,$,I,C){this.Y=n,this.ct=o,this.Ps=u,this.ug=p,this.Nm=I,this.Cl=C};h.qY=w;var c=function(){function n(o,u){this.EH=o,this.Ji=u}return n.prototype.lM=function(o,u){var p=new h.h;this.Ji.D(o,p);var y=new h.h;return this.Ji.D(u,y),(p=p.compare(y))!=0?p:(o=this.Ji.Qa(o,this.EH))<(u=this.Ji.Qa(u,this.EH))?-1:o==u?0:1},n}(),a=function(n,o,u,p,y,g,b,S,$){this.ug=n,this.Ps=o,this.JA=u,this.PH=p,this.Gi=y,this.Cl=g,this.Nm=b,this.QH=S,this.JT=$};h.pY=a,h.GK=function(){function n(){}return n.EK=function(o,u,p,y,g,b){if(u.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(o);else if(p.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(o);else{var S=new h.hd;if(S.Ib(u),S.Ib(p),h.Vk.W(S,y,b,!0),S.gd==0)o=new w(u.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(o);else{for(u=0,p=S.Hd(),y=S.md;y!=-1;y=S.ve(y))for(b=S.Ob(y);b!=-1;b=S.Sb(b))for(var $=S.Ya(b),I=0,C=S.Ka(b);I<C;$=S.V($),I++)S.Sa($,p,u++);u=n.CM(p,S),n.YL(o,u,S,g)}}},n.CM=function(o,u){for(var p=u.gd,y=new h.ja(0),g=u.md;g!=-1;g=u.ve(g))for(var b=u.Ob(g);b!=-1;b=u.Sb(b))for(var S=u.Ya(b),$=0,I=u.Ka(b);$<I;S=u.V(S),$++)y.add(S);var C=new c(o,u);y.Wd(0,p,function(ke,Ae){return C.lM(ke,Ae)}),o=[];var R=[],L=u.Hd(),N=u.Hd();g=u.md,b=u.ve(g),I=new h.h;var U=new h.h,W=y.get(0),j=u.cd(W),K=u.Sf(j);u.D(W,I);var se=1;for(S=0;se<p-1;){var ne=!1;for($=se;$<p;$++)if($!=S){var pe=y.get($),he=u.cd(pe),xe=u.Sf(he);if(u.D(pe,U),!I.rb(U))break;K==g&&xe==b&&(ne=n.pM(L,N,u,o,R,j,W,he,pe))}if(ne||S==se-1){if(ne&&S==se-1&&se--,++S==p)break;W=y.get(S),j=u.cd(W),K=u.Sf(j),u.D(W,I)}ne||(se=S+1)}for(p=[],g=u.md;g!=-1;g=u.ve(g))for(b=u.Ob(g);b!=-1;b=u.Sb(b))for(y=u.Ya(b),$=0,I=u.Ka(b);$<I;y=u.V(y),$++){if(0<=(S=u.Qa(y,N)))for(;S<R.length&&R[S].ug==y;)p.push(R[S++]);if(0<=(S=u.Qa(y,L)))for(;S<o.length&&o[S].ug==y;)p.push(o[S++])}return u.Ud(L),u.Ud(N),p},n.pM=function(o,u,p,y,g,b,S,$,I){var C=p.tj(b),R=p.tj($),L=p.Ya(b),N=p.Ya($),U=p.Na(S),W=p.Na(I),j=!1,K=!1,se=!1,ne=!1;return S!=L&&(I!=N&&(j=n.qM(o,p,y,b,U,$,W)),I!=R&&(K=n.rM(o,p,y,b,U,$,I))),S!=C&&(I!=N&&(se=n.sM(u,p,g,b,S,$,W,L)),I!=R&&(ne=n.tM(u,p,g,b,S,$,I,L))),j&&K&&se?(o=y.length-1,g[ne?g.length-2:g.length-1].Gi==2&&(y[o-1]=y[o],--y.length)):j&&K&&ne&&g[g.length-1].Gi==2&&(g=y[y.length-1],--y.length,p.Qa(g.ug,o)==y.length&&p.Sa(g.ug,o,-1)),j||K||se||ne},n.qM=function(o,u,p,y,g,b,S){var $=new h.zb,I=new h.zb,C=[0,0],R=[0,0],L=u.cc(g);return L==null&&(u.fd(g,$),L=$),($=u.cc(S))==null&&(u.fd(S,I),$=I),2>(L=L.Fa($,null,C,R,0))&&(y=new a(g,y,C[0],NaN,L,S,b,R[0],NaN),p.push(y),0>(y=u.Qa(g,o))&&u.Sa(g,o,p.length-1)),!0},n.rM=function(o,u,p,y,g,b,S){var $=new h.zb,I=new h.zb,C=[0,0],R=[0,0],L=u.cc(g);return L==null&&(u.fd(g,$),L=$),($=u.cc(S))==null&&(u.fd(S,I),$=I),2>(L=L.Fa($,null,C,R,0))&&(y=new a(g,y,C[0],NaN,L,S,b,R[0],NaN),p.push(y),0>(y=u.Qa(g,o))&&u.Sa(g,o,p.length-1),!0)},n.sM=function(o,u,p,y,g,b,S,$){var I=new h.zb,C=new h.zb,R=[0,0],L=[0,0],N=u.cc(g);return N==null&&(u.fd(g,I),N=I),(I=u.cc(S))==null&&(u.fd(S,C),I=C),(N=N.Fa(I,null,R,L,0))==2?(y=new a(g,y,R[0],R[1],N,S,b,L[0],L[1]),p.push(y),0>(y=u.Qa(g,o))&&u.Sa(g,o,p.length-1),!0):(C=!1,g==$&&(y=new a(g,y,R[0],NaN,N,S,b,L[0],NaN),p.push(y),0>(y=u.Qa(g,o))&&u.Sa(g,o,p.length-1),C=!0),C)},n.tM=function(o,u,p,y,g,b,S,$){var I=new h.zb,C=new h.zb,R=[0,0],L=[0,0],N=u.cc(g);return N==null&&(u.fd(g,I),N=I),(I=u.cc(S))==null&&(u.fd(S,C),I=C),(N=N.Fa(I,null,R,L,0))==2?(y=new a(g,y,R[0],R[1],N,S,b,L[0],L[1]),p.push(y),0>(y=u.Qa(g,o))&&u.Sa(g,o,p.length-1),!0):(C=!1,g==$&&(y=new a(g,y,R[0],NaN,N,S,b,L[0],NaN),p.push(y),0>(y=u.Qa(g,o))&&u.Sa(g,o,p.length-1),C=!0),C)},n.YL=function(o,u,p,y){var g=[];g[0]=new h.h,g[1]=new h.h,g[2]=new h.h,g[3]=new h.h;var b=new h.h,S=new h.h,$=new h.h,I=new h.h,C=null;y!=null&&(C=new h.jg).Qr();var R=0,L=null,N=new h.zb;new h.zb;for(var U=p.Ob(p.md);U!=-1;U=p.Sb(U)){for(var W=4,j=-1,K=-1,se=-1,ne=-1,pe=NaN,he=!0,xe=!1,ke=!0,Ae=!0,st=!0,qe=0,It=U,xt=0,tt=p.Ya(U),xi=p.Ka(U),nr=0;nr<xi;tt=p.V(tt),nr++){var Ii=p.cc(tt);if(Ii==null){if(!p.fd(tt,N))continue;Ii=N}K==-1&&(K=tt);for(var ei=0;R<u.length&&tt==u[R].ug;){j=u[R].Ps;var ti=u[R].ug,zt=u[R].JA,ki=u[R].Nm,Dt=u[R].Cl,dr=u[R].QH;if(u[R].Gi==2){if(xe||(It=j,K=ti,xt=zt,se=ki,ne=Dt,pe=dr,W=2,y!=null?L=new h.Ua:qe=0,st=!1,Ae=!0),zt=u[R].PH,dr=u[R].JT,y!=null?(Ii.dh(ei,u[R].PH,C),L.pc(C.get(),Ae)):qe++,ei=zt,xe=!0,Ae=he=!1,R+1==u.length||u[R+1].Gi!=2||u[R+1].ug==ti&&u[R+1].JA!=ei){if(y!=null){var Bt=new w(L,2,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe);y.push(Bt)}else null.add(qe);It=j,K=ti,xt=zt,se=ki,ne=Dt,pe=dr,W=2,xe=he=!1,Ae=st=!0}}else{var Hr=p.V(ti);if(R<u.length-1&&u[R+1].ug==Hr&&u[R+1].Cl==Dt&&u[R+1].Gi==2)zt!=ei&&(st&&(y!=null?L=new h.Ua:qe=0),he=0<R&&u[R-1].Ps==j?W==1?0:W==0?1:3:3,y!=null?(Ii.dh(ei,zt,C),L.pc(C.get(),Ae),Bt=new w(L,he,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):(qe++,null.add(qe)),ei=zt,It=j,K=ti,xt=zt,se=ki,ne=Dt,pe=dr,W=he,he=ke=!1,Ae=st=!0);else if(!n.xM(o,p,u,R,b,S)){n.uM(p,u,R,U,tt,$,I);var ui=!1;if(Hr=!1,Bt=!0,!(b.rb($)||S.rb($)||b.rb(I)||S.rb(I))){g[0].N(b),g[1].N(S),g[2].N($),g[3].N(I),g.sort(h.h.pu);var dc=g[0],fc=g[1],yc=g[2],un=g[3];dc.rb(b)?fc.rb(S)?o?(Hr=ui=!0,Bt=!1):ui=!1:un.rb(S)?o?Bt=Hr=ui=!0:ui=!1:(ui=!0,Bt=fc.rb($)):fc.rb(b)?yc.rb(S)?o?(Hr=ui=!0,Bt=!1):ui=!1:dc.rb(S)?o?Bt=Hr=ui=!0:ui=!1:(ui=!0,Bt=yc.rb($)):yc.rb(b)?un.rb(S)?o?(Hr=ui=!0,Bt=!1):ui=!1:fc.rb(S)?o?Bt=Hr=ui=!0:ui=!1:(ui=!0,Bt=un.rb($)):dc.rb(S)?o?(Hr=ui=!0,Bt=!1):ui=!1:yc.rb(S)?o?Bt=Hr=ui=!0:ui=!1:(ui=!0,Bt=dc.rb($))}ui&&(ui=tt==ti,(zt!=ei||ui&&ei==0)&&(st&&(y!=null?L=new h.Ua:qe=0),y!=null?(Ii.dh(ei,zt,C),L.pc(C.get(),Ae)):qe++),Bt?W!=1?((zt!=ei||ui&&ei==0)&&(y!=null?(Bt=new w(L,1,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):null.add(qe)),Hr?(R>=u.length-2||u[R+2].Ps!=j)&&(W=0):W=1):((zt!=ei||ui&&ei==0)&&(y!=null?(Bt=new w(L,3,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):null.add(qe)),W=1):W!=0?((zt!=ei||ui&&ei==0)&&(y!=null?(Bt=new w(L,0,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):null.add(qe)),Hr?(R>=u.length-2||u[R+2].Ps!=j)&&(W=1):W=0):((zt!=ei||ui&&ei==0)&&(y!=null?(Bt=new w(L,3,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):null.add(qe)),W=0),(zt!=ei||ui&&ei==0)&&(ei=zt,It=j,K=ti,xt=zt,se=ki,ne=Dt,pe=dr,he=ke=!1,Ae=st=!0))}}R++}ei!=1&&(st&&(y!=null?L=new h.Ua:qe=0),y!=null?(Ii.dh(ei,1,C),L.pc(C.get(),Ae)):qe++,Ae=st=!1,ke=!0)}ke&&(zt=1,ti=p.tj(U),ti=p.Na(ti),Dt=ki=-1,dr=NaN,he?y!=null?(Bt=new w(L,4,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):null.add(qe):(he=W==1?0:W==0?1:3,y!=null?(Bt=new w(L,he,j,ti,zt,W,It,K,xt,ki,Dt,dr,se,ne,pe),y.push(Bt)):null.add(qe)))}},n.xM=function(o,u,p,y,g,b){var S=p[y].QH;if(S==1)return n.vM(o,u,p,y,g,b);if(S==0)return n.wM(o,u,p,y,g,b);throw h.i.Ra()},n.vM=function(o,u,p,y,g,b){var S=new h.zb,$=p[y].ug,I=p[y].Nm,C=p[y].Cl,R=-1,L=-1,N=-1,U=-1;if(!o&&0<y){var W=p[y-1];R=W.ug,L=W.Nm,N=W.Cl,U=W.Gi}var j=-1,K=-1,se=-1,ne=-1;y<p.length-1&&(j=(W=p[y+1]).ug,K=W.Nm,se=W.Cl,ne=W.Gi);var pe=u.V($);return W=u.V(C),o?y==p.length-1||j!=$||K!=I||se!=W||ne==2?((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1):((o=u.cc(C))==null&&(u.fd(C,S),o=S),g.N(o.lg()),(o=u.cc(W))==null&&(u.fd(W,S),o=S),b.N(o.lg()),g.Uq(),b.normalize(),g.normalize(),!1):0<y&&R==$&&L==I&&N==W&&U==2||y<p.length-1&&j==pe&&K==I&&se==W&&ne==2?((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1):!(y<p.length-1&&j==$&&K==I&&se==W)||((o=u.cc(C))==null&&(u.fd(C,S),o=S),g.N(o.lg()),(o=u.cc(W))==null&&(u.fd(W,S),o=S),b.N(o.lg()),g.Uq(),b.normalize(),g.normalize(),!1)},n.wM=function(o,u,p,y,g,b){var S=new h.zb,$=p[y].ug,I=p[y].Nm,C=p[y].Cl,R=-1,L=-1,N=-1,U=-1;if(!o&&y<p.length-1){var W=p[y+1];R=W.ug,L=W.Nm,N=W.Cl,U=W.Gi}var j=-1,K=-1,se=-1;W=-1,0<y&&(j=(W=p[y-1]).ug,K=W.Nm,se=W.Cl,W=W.Gi);var ne=u.V($),pe=u.Na(C);return o?y!=0&&j==$&&K==I&&se==pe&&W!=2||((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1):!(0<y&&j==$&&K==I&&se==pe&&W==2||y<p.length-1&&R==ne&&L==I&&N==pe&&U==2)||((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1)},n.uM=function(o,u,p,y,g,b,S){var $=new h.zb,I=o.cc(g);if(I==null&&(o.fd(g,$),I=$),u=(p=u[p]).ug,p=p.JA,g=o.V(u),p==1)b.N(I.lg()),g!=-1&&g!=o.tj(y)?((I=o.cc(g))==null&&(o.fd(g,$),I=$),S.N(I.lg()),(I=o.cc(u))==null&&o.fd(u,$)):S.N(b),b.Uq(),S.normalize(),b.normalize();else{if(p!=0)throw h.i.Ra();S.N(I.lg()),b.nt(S),S.normalize(),b.normalize()}},n}()}(B||(B={})),function(h){var O;(O=h.XL||(h.XL={}))[O.Linear=0]="Linear",O[O.Angular=1]="Angular",O[O.Area=2]="Area";var w=function(){function y(g,b,S){this.pd=b,this.ci=S,this.qA=g}return y.prototype.Nb=function(g){return g instanceof y&&this.ci===g.ci},y.WF=function(g){return g.pd!==0?null:g.qA===-1?new y(-1,2,g.ci*g.ci):y.ah(u[g.qA])},y.ah=function(g){return(g=o[g])===void 0?null:g},y.UO=function(g,b,S){var $=null;if(S!=null)try{S.values[0]==="EPSG"&&($=y.ah(parseInt(S.values[1])))}catch{}return $===null&&($=new y(-1,g,b)),$},y.prototype.Fc=function(){return this.qA},y.prototype.xF=function(g){if(g.pd!=this.pd)throw h.i.Hb();return this.ci/g.ci},y.Ph=function(g,b,S){return b.xF(S)*g},y.SE=function(g,b,S,$,I){for(S=S.xF($),$=0;$<b;$++)I[$]=g[$]*S},y}();h.Uc=w;for(var c=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],n=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],u=[],p=0;p<c.length;p+=2)o[c[p]]=new w(c[p],2,c[p+1]);for(c=null,p=0;p<a.length;p+=2)o[a[p]]=new w(a[p],1,a[p+1]);for(a=null,p=0;p<n.length;p+=3)o[n[p]]=new w(n[p],0,n[p+1]),u[n[p]]=n[p+2];n=null}(B||(B={})),function(h){var O=function(){function w(){this.yb=this.pb=0}return w.prototype.set=function(c,a){a!==void 0?(this.pb=c,this.yb=a):typeof c=="number"?(this.pb=c,this.yb=0):(this.pb=c.pb,this.yb=c.yb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(c){var a=this.pb+c.pb;c=this.yb+c.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=c},w.prototype.fN=function(){var c=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(c);this.pb=c,this.yb=a},w.prototype.ZM=function(c,a){this.pb=c.pb+a.pb,this.yb=c.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(c){if(typeof c=="number"){var a=this.pb-c;c=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-c.pb,c=this.yb+c.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=c},w.prototype.Bg=function(c){var a=this.pb*c.pb;this.yb=this.yb*Math.abs(c.pb)+c.yb*Math.abs(this.pb)+this.yb*c.yb+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Po=function(c){var a=this.pb*c;this.yb=this.yb*Math.abs(c)+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Ml=function(c,a){var n=Math.abs(c.pb)*Math.abs(a.pb);this.yb=c.yb*Math.abs(a.pb)+a.yb*Math.abs(c.pb)+c.yb*a.yb+2220446049250313e-31*Math.abs(n),this.pb=n},w.prototype.lm=function(c){var a=Math.abs(c.pb),n=this.pb/c.pb,o=(this.yb+Math.abs(n)*c.yb)/a;c.yb>.01*a&&(o*=1+(1+(c=c.yb/a))*c),this.pb=n,this.yb=o+2220446049250313e-31*Math.abs(n)},w.prototype.sqrt=function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/c:this.pb>this.yb?c-Math.sqrt(this.pb-this.yb):Math.max(c,Math.sqrt(this.pb+this.yb)-c);a+=2220446049250313e-31*Math.abs(c)}else this.pb<-1*this.yb?a=c=NaN:(c=0,a=Math.sqrt(this.yb));this.pb=c,this.yb=a},w.prototype.sin=function(c){var a=Math.sin(c.pb),n=Math.cos(c.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(n)+.5*a*c.yb)*c.yb+2220446049250313e-31*a},w.prototype.cos=function(c){var a=Math.sin(c.pb),n=Math.cos(c.pb);this.pb=n,n=Math.abs(n),this.yb=(Math.abs(a)+.5*n*c.yb)*c.yb+2220446049250313e-31*n},w.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},w.prototype.rs=function(){return this.rg()&&this.yb!=0},w}();h.Xb=O}(B||(B={}));var Ne=new B.h,ht=new B.h,ut=new B.h,pt=new B.h,St=new B.h;(function(h){var O,w;(w=O||(O={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var c=function(){function a(n,o,u,p,y,g,b){o!==void 0?(this.ib=n,this.ek=o,this.dl=u,this.ki=p,this.za=g,this.cA=b,this.gw=y):(this.ib=n.ib,this.ek=n.ek,this.dl=n.dl,this.ki=n.ki,this.za=n.za,this.cA=n.cA,this.gw=n.gw),this.XG=!0}return a.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},a.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},a.vP=function(n,o,u,p,y,g,b){return new a(n,o,u,p,y,g,b)},a}();h.vY=c,O=function(){function a(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(n){return this.Te!=null?this.Te[n]:null},a.prototype.Zg=function(n,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var u=0,p=this.wb.I();u<p;u++)this.Te.push(null)}this.Te[n]=o},a.prototype.ep=function(n,o){this.nd.T(n,1,o)},a.prototype.cp=function(n,o){this.nd.T(n,2,o)},a.prototype.QB=function(n,o){this.nd.T(n,6,o)},a.prototype.Up=function(n){return this.nd.U(n,6)},a.prototype.gx=function(n,o){this.nd.T(n,7,o)},a.prototype.sv=function(n){return this.nd.U(n,0)},a.prototype.JJ=function(n,o){this.dd.T(n,1,o)},a.prototype.NJ=function(n,o){this.dd.T(n,0,o)},a.prototype.EF=function(n){return this.dd.U(n,7)},a.prototype.ap=function(n,o){this.dd.T(n,3,o)},a.prototype.bp=function(n,o){this.dd.T(n,4,o)},a.prototype.pU=function(n){this.dd==null&&(this.dd=new h.ad(8));var o=this.dd.De();return this.dd.T(o,2,n),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.JQ=function(n){this.dd.kd(n)},a.prototype.rU=function(n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var o=this.nd.De();return this.nd.T(o,0,o),this.nd.T(o,3,0),this.nd.T(o,6,0),this.gx(o,n),o>=this.Qi.size&&(n=16>o?16:h.P.truncate(3*o/2),this.Qi.resize(n),this.xo.resize(n)),this.Qi.set(o,0),this.xo.set(o,0),o},a.prototype.nF=function(n){this.nd.kd(n)},a.prototype.Qy=function(n){this.ud.kd(n),this.gd--},a.prototype.jI=function(n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var o=this.ud.De(),u=0<=n?n:o;if(this.ud.T(o,0,u),0>n){if(u>=this.wb.I()){if(n=16>u?16:h.P.truncate(3*u/2),this.wb.resize(n),this.Te!=null)for(var p=0;p<n;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(n),this.jt=this.wb.vb(0)}this.wb.Db(u,-1e38,-1e38),this.Te!=null&&(this.Te[u]=null),this.Ug!=null&&this.Ug.write(u,1)}return this.ud.T(o,4,2*u),this.gd++,o},a.prototype.yj=function(n,o,u){var p=o!=-1?this.Na(o):this.tj(n),y=p!=-1?this.V(p):-1,g=this.jI(u==null?this.gd:-1),b=this.Va(g);return u!=null&&this.wb.It(b,u),this.cj(g,n),this.Cc(g,y),this.Dc(g,p),y!=-1&&this.Dc(y,g),p!=-1&&this.Cc(p,g),u=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,g),o==p&&this.Kf(n,g),u&&y==-1&&(this.Cc(g,g),this.Dc(g,g)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),g},a.prototype.pm=function(){return this.lo==null&&(this.lo=new h.Ta(this.wb.description)),this.lo},a.prototype.$o=function(n,o){this.dd.T(n,2,-134217729&this.dd.U(n,2)||(o==1?134217728:0))},a.prototype.Kn=function(n){return(134217728&this.dd.U(n,2))!=0?1:0},a.prototype.cN=function(n){var o=this.Kg(n.K(),n.description);return n.K()==1736&&this.$o(o,n.Kn()),this.PD(o,n),o},a.prototype.dN=function(n){var o=this.Kg(n.K(),n.description);return this.QD(o,n),o},a.prototype.SV=function(n,o){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0)),this.nd.Ee(this.nd.Jg+n),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+n),this.xo.Jb(this.xo.size+n)},a.prototype.PD=function(n,o){this.SV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var u=this.Te!=null&&o.Se!=null,p=0,y=o.ea();p<y;p++)if(!(2>o.Ka(p))){var g=this.wf(n,-1);this.mn(g,o.ec(p));for(var b=o.Ca(p),S=o.Wc(p);b<S;b++){var $=this.yj(g,-1,null);if(u)if($=this.Va($),(1&o.UF(b))!=0)this.Zg($,null);else{var I=new h.jg;o.cc(b,I,!0),this.Zg($,I.get())}}}},a.prototype.QD=function(n,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),n=this.wf(n,-1);var u=0;for(o=o.I();u<o;u++)this.yj(n,-1,null)},a.prototype.JX=function(n,o,u){var p=this.V(n);if(p==-1)throw h.i.Ra();for(var y=this.pm(),g=this.cd(n),b=0,S=o.ql(u);b<S;b++){var $=this.Va(n),I=this.V(n),C=o.Xp(u,b);b==0&&(C.Vo(y),this.Fh(n,y)),C.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(C)),C.Ro(y),b<S-1?n=this.yj(g,I,y):this.Fh(p,y)}},a.prototype.IX=function(n,o,u){var p=this.V(n);if(p==-1)throw h.i.Ra();for(var y=this.pm(),g=this.cd(n),b=0,S=o.ql(u);b<S;b++){var $=this.Va(n),I=this.V(n),C=o.Xp(u,S-b-1);b==0&&(C.Ro(y),this.Fh(n,y)),C.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(C)),C.Vo(y),b<S-1?n=this.yj(g,I,y):this.Fh(p,y)}},a.prototype.DF=function(){var n=new h.l;n.Pa();for(var o=this.$q(),u=new h.h,p=!0,y=o.next();y!=-1;y=o.next())this.D(y,u),p?n.$b(u.x,u.y):n.Nk(u.x,u.y),p=!1;return n},a.prototype.Ib=function(n){var o=n.K();if(h.ba.Ic(o))return this.cN(n);if(o==550)return this.dN(n);throw h.i.Ra()},a.prototype.pN=function(n,o){var u=o.K();if(h.ba.Ic(u))this.PD(n,o);else{if(u!=550)throw h.i.Ra();this.QD(n,o)}},a.prototype.hN=function(n,o){var u=this.Kg(1736,n.description);if(2>n.Ka(o))return u;this.Kl.Gd(n,n.Ca(o),n.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(u,-1);this.mn(p,n.ec(o)||!0);var y=this.Te!=null&&n.Se!=null,g=n.Ca(o);for(o=n.Wc(o);g<o;g++){var b=this.yj(p,-1,null);if(y)if(b=this.Va(b),(1&n.UF(g))!=0)this.Zg(b,null);else{var S=new h.jg;n.cc(g,S,!0),this.Zg(b,S.get())}}return u},a.prototype.Ke=function(n){var o=this.jc(n),u=h.UK.Kg(o,this.Kl.description),p=this.I(n);if(p==0)return u;if(h.ba.Ic(o)){o=this.ea(n);for(var y=h.Zc.Qh(o+1),g=h.Zc.Or(o+1,0),b=u.description,S=0,$=b.Ba;S<$;S++){for(var I=b.ld(S),C=h.sa.Wa(I),R=h.Zc.TE(I,p),L=this.wb.vb(I),N=0,U=0,W=0,j=this.Ob(n);j!=-1;j=this.Sb(j)){var K=0;this.ec(j)&&(K|=1),this.TS(j)&&(K|=4),K!=0&&g.uJ(U,K);var se=this.Ka(j);if(y.write(U++,W),W+=se,I==0){se=L;var ne=R,pe=new h.h;for(K=this.Ya(j);N<W;K=this.V(K),N++){var he=this.Va(K);se.uc(2*he,pe),ne.Vt(2*N,pe)}}else for(K=this.Ya(j);N<W;K=this.V(K),N++)for(he=this.Va(K),ne=0;ne<C;ne++)pe=L.gg(he*C+ne),R.rr(N*C+ne,pe)}u.kn(I,R),y.write(o,p)}u.KJ(g),u.LJ(y),u.Qc(16777215)}else if(o==550){for(b=u.description,u.resize(p),S=0,$=b.Ba;S<$;S++){for(I=b.ld(S),C=h.sa.Wa(I),R=u.vb(I),L=this.wb.vb(I),N=0,j=this.Ob(n),se=this.Ka(j),K=this.Ya(j);N<se;K=this.V(K),N++)for(he=this.Va(K),ne=0;ne<C;ne++)pe=L.gg(he*C+ne),R.rr(N*C+ne,pe);u.kn(I,R)}u.Qc(16777215)}return u},a.prototype.wB=function(n){for(var o=this.Ob(n);o!=-1;o=this.ar(o));o=this.KR(n);var u=this.ve(n);o!=-1?this.JJ(o,u):this.md=u,u!=-1?this.NJ(u,o):this.sw=o,this.JQ(n)},a.prototype.Kg=function(n,o){return o===void 0?this.VE(n,h.fe.pg()):this.VE(n,o)},a.prototype.VE=function(n,o){return n=this.pU(n),this.wb==null?this.wb=this.Kl=new h.ee(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=n:(this.NJ(n,this.sw),this.JJ(this.sw,n)),this.sw=n},a.prototype.ve=function(n){return this.dd.U(n,1)},a.prototype.KR=function(n){return this.dd.U(n,0)},a.prototype.jc=function(n){return 2147483647&this.dd.U(n,2)},a.prototype.CJ=function(n,o,u){o=this.yk[o],(n=this.EF(n))>=o.size&&o.resize(Math.max(h.P.truncate(1.25*n),16),-1),o.write(n,u)},a.prototype.FF=function(n,o){return(n=this.EF(n))<(o=this.yk[o]).size?o.read(n):-1},a.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var n=0;n<this.yk.length;n++)if(this.yk[n]==null)return this.yk[n]=h.Zc.Qh(0),n;return this.yk.push(h.Zc.Qh(0)),this.yk.length-1},a.prototype.sW=function(n){this.yk[n]=null},a.prototype.Ob=function(n){return this.dd.U(n,3)},a.prototype.mv=function(n){return this.dd.U(n,4)},a.prototype.I=function(n){return this.dd.U(n,5)},a.prototype.ea=function(n){return this.dd.U(n,6)},a.prototype.Ip=function(n,o,u){for(var p=0,y=this.md;y!=-1;y=this.ve(y)){var g=this.jc(y);if(h.ba.Ic(g)&&(!u||g==1736)){g=this.jc(y)==1736;for(var b=this.Ob(y);b!=-1;){for(var S=0,$=this.Ya(b);S<h.P.truncate(this.Ka(b)/2);){var I=this.V($);if(I==-1)break;var C=this.Va($),R=this.Uh(C);R!=null?C=R.Rb():(R=this.Va(I),C=this.wb.Ar(C,R)),C<=n?(C==0?p==0&&(p=-1):p=1,I!=this.tj(b)&&(this.gC(I,$),this.qd(I,!0))):$=this.V($),S++}for(S=this.Ya(b),$=this.ec(b)?S:this.tj(b);0<this.Ka(b);){if((I=this.Na($))==-1){this.qd($,!0),p==0&&(p=-1);break}var L=this.Va(I);if((R=this.Uh(L))!=null?C=R.Rb():(C=this.Va($),C=this.wb.Ar(C,L)),C<=n)C==0?p==0&&(p=-1):p=1,this.gC(I,$),this.qd(I,!1),S==I&&(S=this.Ya(b));else if(($=this.Na($))==S)break}$=this.Ka(b),o&&(g?3>$:2>$)?(b=this.ar(b),p=0<$?1:p==0?-1:p):b=this.Sb(b)}}}return p},a.prototype.gC=function(n,o){var u=this.Va(n),p=this.Va(o);if(this.Ug!=null&&(u=this.Ug.read(u),this.Ug.write(p,u)),this.di!=null){for(p=0,u=this.di.length;p<u;p++)if(this.di[p]!=null){var y=this.Qa(n,p);y!=-1&&this.Sa(o,p,y)}}},a.prototype.Wl=function(n,o,u){var p=0,y=this.V(n);if(y==-1)throw h.i.Ra();for(var g=this.Va(n),b=this.Va(y),S=this.Uh(g),$=S==null?this.wb.Ar(g,b):S.Rb(),I=0;I<u;I++){var C=o[I];if(0<C&&1>C){var R=C;S!=null&&(R=0<$?S.Tx(C)/$:0),this.wb.fD(g,b,R,this.pm());var L=this.yj(this.cd(n),y,this.pm());if(p++,S!=null){var N=S.fl(0,C);R=this.Va(this.Na(L)),this.Zg(R,N),this.mf(L,N.xc()),I!=u-1&&o[I+1]!=1||(C=S.fl(C,1),this.Zg(R,C))}}}return p},a.prototype.HX=function(n,o,u){var p=0,y=this.V(n);if(y==-1)throw h.i.ga("internal error");var g=this.Va(n),b=this.Va(y),S=this.Uh(g),$=S==null?this.wb.Ar(g,b):S.Rb(),I=0;n=this.cd(n);for(var C=0;C<u;C++){var R=o[C];if(I<R&&1>R){var L=R;if(S!=null&&(L=0<$?S.Tx(R)/$:0),this.wb.fD(g,b,L,this.pm()),L=this.tS(n,y,this.pm()),p++,S!=null){I=S.fl(I,R);var N=this.Va(this.Na(L));this.Zg(N,I),this.Db(L,I.qa,I.ma),C!=u-1&&o[C+1]!=1||(I=S.fl(R,1),L=this.Va(L),this.Zg(L,I))}}I=R}return p},a.prototype.tS=function(n,o,u){var p=o!=-1?this.Na(o):this.tj(n),y=p!=-1?this.V(p):-1,g=this.jI(u==null?this.gd:-1),b=this.Va(g);return u!=null&&this.wb.It(b,u),this.cj(g,n),this.Cc(g,y),this.Dc(g,p),y!=-1&&this.Dc(y,g),p!=-1&&this.Cc(p,g),u=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,g),o==p&&(u&&p!=-1||this.Kf(n,g)),u&&y==-1&&(this.Cc(g,g),this.Dc(g,g)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),g},a.prototype.pE=function(n,o,u){var p=this.Va(o),y=this.Va(u);if(0>p||y>this.gd-1)throw h.i.O("invalid call");if(p>y&&!this.ec(n))throw h.i.O("cannot iterate across an open path");for(n=0;o!=u;o=this.V(o))p=this.Va(o),(y=this.Uh(p))!=null?n+=y.Rb():(y=this.Va(this.V(o)),n+=this.wb.Ar(p,y));return n},a.prototype.Fh=function(n,o){var u=this.Va(n);this.wb.It(u,o),(u=this.Uh(u))!=null&&u.setStart(o),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&u.setEnd(o))},a.prototype.Xi=function(n,o){n=this.Va(n),this.wb.we(n,o)},a.prototype.mf=function(n,o){this.Db(n,o.x,o.y)},a.prototype.Db=function(n,o,u){var p=this.Va(n);this.wb.Db(p,o,u),(p=this.Uh(p))!=null&&p.UB(o,u),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&p.Sl(o,u))},a.prototype.D=function(n,o){this.wb.D(this.ud.U(n,0),o)},a.prototype.Hc=function(n,o){this.wb.Aa[0].uc(2*this.ud.U(n,0),o)},a.prototype.Oa=function(n){var o=new h.h;return this.wb.D(this.ud.U(n,0),o),o},a.prototype.ZF=function(n,o){this.jt.uc(2*n,o)},a.prototype.Vc=function(n,o,u){return this.wb.Vc(n,this.Va(o),u)},a.prototype.setAttribute=function(n,o,u,p){this.wb.setAttribute(n,this.Va(o),u,p)},a.prototype.Va=function(n){return this.ud.U(n,0)},a.prototype.kh=function(){var n=new h.h;return this.D(void 0,n),n.y},a.prototype.hq=function(n,o){n=this.Va(n),o=this.Va(o);var u=this.wb.Aa[0].o;return u[2*n]===u[2*o]&&u[2*n+1]===u[2*o+1]},a.prototype.Fv=function(n,o){n=this.Va(n);var u=this.wb.Aa[0].o;return u[2*n]===o.x&&u[2*n+1]===o.y},a.prototype.rX=function(n,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=h.Zc.Fn(this.wb.I(),1)}(n=this.Va(n))>=this.Ug.size&&this.Ug.resize(n+1,1),this.Ug.write(n,o)},a.prototype.YF=function(n){return n=this.Va(n),this.Ug==null||n>=this.Ug.size?1:this.Ug.read(n)},a.prototype.Sa=function(n,o,u){o=this.di[o],n=this.Va(n),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(n,u)},a.prototype.Qa=function(n,o){return(n=this.Va(n))<(o=this.di[o]).size?o.read(n):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var n=0;n<this.di.length;n++)if(this.di[n]==null)return this.di[n]=h.Zc.Qh(0,-1),n;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(n){this.di[n]=null},a.prototype.cc=function(n){return this.Te!=null?(n=this.Va(n),this.Te[n]):null},a.prototype.fd=function(n,o){var u=this.ud.U(n,2);if(u==-1)return!1;if(this.aA){var p=new h.Ta;this.Xi(n,p),o.setStart(p),this.Xi(u,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(n,0),Ne),o.gm(0,Ne),this.wb.Hc(this.ud.U(u,0),Ne),o.gm(1,Ne);return!0},a.prototype.hW=function(n,o,u){if(this.aA){var p=new h.Ta;this.Xi(n,p),u.setStart(p),this.Xi(o,p),u.setEnd(p)}else this.wb.Hc(n,Ne),u.gm(0,Ne),this.wb.Hc(o,Ne),u.gm(1,Ne)},a.prototype.wf=function(n,o){if(o!=-1){if(n!=this.Sf(o))throw h.i.Ra();var u=this.es(o)}else u=this.mv(n);var p=this.rU(n);return o!=-1&&this.ep(o,p),this.cp(p,o),this.ep(p,u),u!=-1?this.cp(u,p):this.ap(n,p),o==-1&&this.bp(n,p),this.Tl(n,this.ea(n)+1),p},a.prototype.iG=function(n,o,u,p){n=this.wf(n,-1);for(var y=0,g=o,b=!1;g==u&&(b=!0),this.cj(g,n),y++,(g=this.V(g))!=o;);return this.mn(n,!0),this.Xj(n,y),b&&(o=u),this.Kf(n,o),this.Yg(n,this.Na(o)),this.fp(n,!1),p!=null&&(p[0]=b),n},a.prototype.ar=function(n){var o=this.es(n),u=this.Sb(n),p=this.Sf(n);return o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.vO(n),this.Tl(p,this.ea(p)-1),this.nF(n),u},a.prototype.vO=function(n){var o=this.Ya(n);if(o!=-1){for(var u=0,p=this.Ka(n);u<p;u++){var y=o;o=this.V(o),this.Qy(y)}o=this.Sf(n),this.Vj(o,this.I(o)-this.Ka(n))}this.Xj(n,0)},a.prototype.Sb=function(n){return this.nd.U(n,2)},a.prototype.es=function(n){return this.nd.U(n,1)},a.prototype.Ka=function(n){return this.nd.U(n,3)},a.prototype.ec=function(n){return(1&this.Up(n))!=0},a.prototype.mn=function(n,o){if(this.ec(n)!=o){if(0<this.Ka(n)){var u=this.Ya(n),p=this.tj(n);o?(this.Cc(p,u),this.Dc(u,p),u=this.Va(p)):(this.Cc(p,-1),this.Dc(u,-1),u=this.Va(p)),this.Zg(u,null)}this.QB(n,(1|this.Up(n))-1|(o?1:0))}},a.prototype.Sf=function(n){return this.nd.U(n,7)},a.prototype.TS=function(n){return(2&this.Up(n))!=0},a.prototype.KB=function(n,o){this.QB(n,(2|this.Up(n))-2|(o?2:0))},a.prototype.qz=function(n){if(this.YS(n))return this.Qi.get(this.sv(n));var o=new h.zb,u=this.Ya(n);if(u==-1)return 0;var p=new h.h;this.D(u,p);for(var y=0,g=0,b=this.Ka(n);g<b;g++,u=this.V(u)){var S=this.cc(u);if(S==null){if(!this.fd(u,o))continue;S=o}y+=S.Sx(p.x,p.y)}return this.fp(n,!0),this.Qi.set(this.sv(n),y),y},a.prototype.ir=function(n,o,u){o=this.Ek[o],n=this.sv(n),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(n,u)},a.prototype.uj=function(n,o){return(n=this.sv(n))<(o=this.Ek[o]).size?o.read(n):-1},a.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var n=0;n<this.Ek.length;n++)if(this.Ek[n]==null)return this.Ek[n]=h.Zc.Qh(0),n;return this.Ek.push(h.Zc.Qh(0)),this.Ek.length-1},a.prototype.xB=function(n){this.Ek[n]=null},a.prototype.UT=function(n,o,u){if(u==-1)throw h.i.O();if(o!=u){var p=this.Sb(u),y=this.es(u),g=this.Sf(u);y==-1?this.ap(g,p):this.cp(y,p),p==-1?this.bp(g,y):this.ep(p,y),this.Vj(g,this.I(g)-this.Ka(u)),this.Tl(g,this.ea(g)-1),y=o==-1?this.mv(n):this.es(o),this.ep(u,y),this.cp(u,o),o==-1?this.bp(n,u):this.ep(o,u),y==-1?this.ap(n,u):this.cp(y,u),this.Vj(n,this.I(n)+this.Ka(u)),this.Tl(n,this.ea(n)+1),this.gx(u,n)}},a.prototype.kj=function(n,o){this.wb.we(this.Va(o),this.pm()),this.yj(n,-1,this.pm())},a.prototype.qd=function(n,o){var u=this.cd(n),p=this.Na(n),y=this.V(n);p!=-1&&this.Cc(p,y);var g=this.Ka(u);if(n==this.Ya(u)&&this.Kf(u,1<g?y:-1),y!=-1&&this.Dc(y,p),n==this.tj(u)&&this.Yg(u,1<g?p:-1),p!=-1&&y!=-1){p=this.Va(p);var b=this.Va(y);o?(o=this.Uh(p))!=null&&(p=new h.h,this.wb.D(b,p),o.Rc(p)):(b=this.Va(n),o=this.Uh(b),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(u,g-1),u=this.Sf(u),this.Vj(u,this.I(u)-1),this.Qy(n),y},a.prototype.Ya=function(n){return this.nd.U(n,4)},a.prototype.tj=function(n){return this.nd.U(n,5)},a.prototype.V=function(n){return this.ud.U(n,2)},a.prototype.Na=function(n){return this.ud.U(n,1)},a.prototype.cd=function(n){return this.ud.U(n,3)},a.prototype.hc=function(n,o){return this.yj(n,-1,o)},a.prototype.$q=function(n){if(n===void 0)return this.$q(!1);if(n instanceof c)return new c(n);var o,u=-1,p=-1,y=-1,g=0,b=!1;for(o=this.md;o!=-1;o=this.ve(o))if(!n||h.ba.Ic(this.jc(o))){for(u=this.Ob(o);u!=-1;u=this.Sb(u))if(y=p=this.Ya(u),g=0,p!=-1){b=!0;break}if(b)break}return c.vP(this,o,u,p,y,g,n)},a.prototype.Pc=function(n){if(this.Kl.Pc(n),this.Te!=null)for(var o=0,u=this.Te.length;o<u;o++)this.Te[o]!=null&&this.Te[o].Pc(n)},a.prototype.lr=function(n,o,u,p){p?this.JX(n,o,u):this.IX(n,o,u)},a.prototype.Dc=function(n,o){this.ud.T(n,1,o)},a.prototype.Cc=function(n,o){this.ud.T(n,2,o)},a.prototype.cj=function(n,o){this.ud.T(n,3,o)},a.prototype.Xj=function(n,o){this.nd.T(n,3,o)},a.prototype.Kf=function(n,o){this.nd.T(n,4,o)},a.prototype.Yg=function(n,o){this.nd.T(n,5,o)},a.prototype.Tl=function(n,o){this.dd.T(n,6,o)},a.prototype.Vj=function(n,o){this.dd.T(n,5,o)},a.prototype.kJ=function(n){var o=n;do{var u=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,u),o=u}while(o!=n)},a.prototype.XB=function(n){this.gd=n},a.prototype.br=function(n){var o=this.es(n),u=this.Sb(n),p=this.Sf(n);o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.Kf(n,-1),this.Yg(n,-1),this.nF(n)},a.prototype.oi=function(n,o){var u=this.Na(n),p=this.V(n);if(u!=-1&&this.Cc(u,p),p!=-1&&this.Dc(p,u),u!=-1&&p!=-1)if(u=this.Va(u),p=this.Va(p),o){if((o=this.Uh(u))!=null){var y=new h.h;this.wb.D(p,y),o.Rc(y)}}else o=this.Va(n),o=this.Uh(o),this.Zg(u,o),o!=null&&(y=new h.h,this.wb.D(u,y),o.Ec(y));this.Qy(n)},a.prototype.YS=function(n){return(4&this.Up(n))!=0},a.prototype.fp=function(n,o){this.QB(n,(4|this.Up(n))-4|(o?4:0))},a.prototype.nx=function(n,o){var u=this.ud.o;this.wb.oc();var p=this.wb.Aa[0].o;n.Wd(0,o,function(y,g){var b=u[5*y];y=u[5*g],g=p[2*b],b=p[2*b+1];var S=p[2*y];return b<(y=p[2*y+1])?-1:b>y?1:g<S?-1:g>S?1:0})},a.prototype.eS=function(){for(var n=this.md;n!=-1;n=this.ve(n))if(!h.ba.Ic(this.jc(n)))return!0;return!1},a.prototype.cC=function(n,o){for(var u=this.Ob(n),p=this.Ob(o),y=this.mv(n),g=this.mv(o),b=this.Ob(n);b!=-1;b=this.Sb(b))this.gx(b,o);for(b=this.Ob(o);b!=-1;b=this.Sb(b))this.gx(b,n);this.ap(n,p),this.ap(o,u),this.bp(n,g),this.bp(o,y),u=this.I(n),p=this.ea(n),y=this.ea(o),this.Vj(n,this.I(o)),this.Vj(o,u),this.Tl(n,y),this.Tl(o,p),u=this.dd.U(n,2),this.dd.T(n,2,this.dd.U(o,2)),this.dd.T(o,2,u)},a}(),h.hd=O})(B||(B={})),function(h){var O=function(w){function c(a,n,o,u){var p=w.call(this)||this;return p.aa=new h.l,a===void 0?p.PE():typeof a=="number"?p.QO(a,n,o,u):a instanceof h.Ta?n!==void 0?p.Su(a,n,o):p.RO(a):a instanceof h.sa?n!==void 0?p.TO(a,n):p.SO(a):a instanceof h.l?p.PO(a):p.PE(),p}return Fe(c,w),c.prototype.Su=function(a,n,o){this.description=h.fe.pg(),this.aa.Pa(),a.B()||this.vu(a,n,o)},c.prototype.PO=function(a){this.description=h.fe.pg(),this.aa.L(a),this.aa.normalize()},c.prototype.SO=function(a){if(a==null)throw h.i.O();this.description=a,this.aa.Pa()},c.prototype.TO=function(a,n){if(a==null)throw h.i.O();this.description=a,this.aa.L(n),this.aa.normalize()},c.prototype.PE=function(){this.description=h.fe.pg(),this.aa.Pa()},c.prototype.RO=function(a){this.description=h.fe.pg(),this.aa.Pa(),a.B()||this.vu(a)},c.prototype.QO=function(a,n,o,u){this.description=h.fe.pg(),this.L(a,n,o,u)},c.prototype.L=function(a,n,o,u){if(this.wc(),typeof a=="number")this.aa.L(a,n,o,u);else for(this.Pa(),n=0,o=a.length;n<o;n++)this.$b(a[n])},c.prototype.Zo=function(a){if(this.wc(),!a.aT())throw h.i.O();this.aa.L(a)},c.prototype.Pa=function(){this.wc(),this.aa.Pa()},c.prototype.B=function(){return this.aa.B()},c.prototype.S=function(){return this.aa.S()},c.prototype.da=function(){return this.aa.da()},c.prototype.ik=function(){return this.aa.ik()},c.prototype.Lp=function(){return this.aa.Lp()},c.prototype.Kp=function(){return this.aa.tf()},c.prototype.$b=function(a){if(a instanceof h.h)this.wc(),this.aa.$b(a);else if(a instanceof h.l)this.wc(),this.aa.$b(a);else if(a instanceof h.Ta){if(this.wc(),!a.Bc()){var n=a.description;if(this.description!=n&&this.Ll(n),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,u=n.Ba;o<u;o++)for(var p=n.Fd(o),y=h.sa.Wa(p),g=0;g<y;g++){var b=a.Vc(p,g),S=this.Vg(p,g);S.$b(b),this.setInterval(p,g,S)}}}}else if(a instanceof c&&!a.B())for((n=a.description)!=this.description&&this.Ll(n),this.aa.$b(a.aa),o=1,u=n.Ba;o<u;o++)for(p=n.ld(o),y=h.sa.Wa(p),g=0;g<y;g++)b=a.Vg(p,g),(S=this.Vg(p,g)).$b(b),this.setInterval(p,g,S)},c.prototype.vu=function(a,n,o){if(n!==void 0){this.aa.L(a.D(),n,o),o=1;for(var u=(n=a.description).Ba;o<u;o++)for(var p=n.Fd(o),y=h.sa.Wa(p),g=0;g<y;g++){var b=a.Vc(p,g);this.setInterval(p,g,b,b)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,u=(n=a.description).Ba;o<u;o++)for(p=n.Fd(o),y=h.sa.Wa(p),g=0;g<y;g++)b=a.Vc(p,g),this.setInterval(p,g,b,b)},c.prototype.setInterval=function(a,n,o,u){if(o=typeof o=="number"?new h.Oc(o,u):o,this.wc(),a==0)if(n==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(n!=1)throw h.i.de();this.aa.G=o.pa,this.aa.H=o.wa}else this.qD(0,a,n,o.pa),this.qD(1,a,n,o.wa)},c.prototype.X=function(a,n){this.wc(),this.aa.X(a,n)},c.prototype.Pc=function(a){if(a instanceof h.Ed)this.wc(),a.hC(this.aa);else if(this.wc(),!this.aa.B()){var n=new h.JK;this.So(n),n.SS()?n.Pa():a.hC(n)}},c.prototype.copyTo=function(a){if(a.K()!=this.K())throw h.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var n=0;n<2*(this.description.Be.length-2);n++)a.la[n]=this.la[n]}},c.prototype.Ja=function(){return new c(this.description)},c.prototype.He=function(){return this.aa.rF()},c.prototype.Rb=function(){return this.aa.tR()},c.prototype.K=function(){return 197},c.prototype.Eb=function(){return 2},c.prototype.dn=function(a){this.copyTo(a)},c.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},c.prototype.So=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},c.prototype.Vg=function(a,n){var o=new h.Oc;return o.L(this.Pd(0,a,n),this.Pd(1,a,n)),o},c.prototype.If=function(a,n){n.Pf(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var u=this.description.ld(a),p=h.sa.Wa(u),y=0;y<p;y++)n.setAttribute(u,y,this.Pd(0,u,y));n.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(u=this.description.ld(a),p=h.sa.Wa(u),y=0;y<p;y++)n.setAttribute(u,y,this.Pd(1,u,y));n.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(u=this.description.ld(a),p=h.sa.Wa(u),y=0;y<p;y++)n.setAttribute(u,y,this.Pd(0,u,y));n.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(u=this.description.ld(a),p=h.sa.Wa(u),y=0;y<p;y++)n.setAttribute(u,y,this.Pd(1,u,y));n.Db(this.aa.C,this.aa.G);break;default:throw h.i.de()}},c.prototype.hB=function(a,n){a=this.aa.hB(a),n.na(a.x,a.y)},c.prototype.fR=function(a,n){return n*(a.Qq-2)},c.prototype.sF=function(a,n,o){if(this.aa.B())throw h.i.ga("empty geometry");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=h.sa.Wa(n))throw h.i.O();var u=this.description.Rf(n);return this.qu(),0<=u?this.la[this.fR(this.description,a)+this.description.GR(u)-2+o]:h.sa.te(n)},c.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=c.Ig(this.description,0),n=c.Ig(this.description,1),o=0,u=1,p=this.description.Ba;u<p;u++){var y=this.description.ld(u),g=h.sa.Wa(y);y=h.sa.te(y);for(var b=0;b<g;b++)this.la[a+o]=y,this.la[n+o]=y,o++}}},c.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var n=h.fe.Kw(a,this.description),o=[],u=c.Ig(this.description,0),p=c.Ig(this.description,1),y=c.Ig(a,0),g=c.Ig(a,1),b=0,S=1,$=a.Ba;S<$;S++){var I=a.ld(S),C=h.sa.Wa(I);if(n[S]==-1){var R=h.sa.te(I);for(I=0;I<C;I++)o[y+b]=R,o[g+b]=R,b++}else for(R=this.description.bk(n[S])-2,I=0;I<C;I++)o[y+b]=this.la[u+R],o[g+b]=this.la[p+R],b++,R++}this.la=o}else this.la=null;this.description=a},c.prototype.Pd=function(a,n,o){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=h.sa.Wa(n))throw h.i.de();var u=this.description.Rf(n);return 0<=u?(this.qu(),this.la[c.Ig(this.description,a)+this.description.bk(u)-2+o]):h.sa.te(n)},c.prototype.qD=function(a,n,o,u){if(this.wc(),n==0)a!=0?o!=0?this.aa.H=u:this.aa.C=u:o!=0?this.aa.G=u:this.aa.v=u;else{if(o>=h.sa.Wa(n))throw h.i.de();if(!this.hasAttribute(n)){if(h.sa.yG(n,u))return;this.se(n)}n=this.description.Rf(n),this.qu(),this.la[c.Ig(this.description,a)+this.description.bk(n)-2+o]=u}},c.Ig=function(a,n){return n*(a.Be.length-2)},c.prototype.Fa=function(a){this.wc();var n=new h.l;return a.A(n),this.aa.Fa(n)},c.prototype.isIntersecting=function(a){return a instanceof h.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},c.prototype.Lu=function(a,n){this.wc(),a.B()?this.Pa():n!==void 0?this.vu(a,n,void 0):this.aa.Lu(a.Ng(),a.kh())},c.prototype.offset=function(a,n){this.wc(),this.aa.offset(a,n)},c.prototype.normalize=function(){this.wc(),this.aa.normalize()},c.prototype.tf=function(a){if(a===void 0){if(a=new h.Ta(this.description),this.B())return a;for(n=this.description.Ba,o=1;o<n;o++)for(u=this.description.Fd(o),p=h.sa.Wa(u),y=0;y<p;y++)g=.5*(this.Pd(0,u,y)+this.Pd(1,u,y)),a.setAttribute(u,y,g);return a.Db(this.aa.ik(),this.aa.Lp()),a}if(a.Pf(this.description),this.B())a.Pa();else{for(var n=this.description.Ba,o=1;o<n;o++)for(var u=this.description.ld(o),p=h.sa.Wa(u),y=0;y<p;y++){var g=.5*(this.sF(0,u,y)+this.sF(1,u,y));a.setAttribute(u,y,g)}a.Db(this.aa.tf())}},c.prototype.hz=function(){return new h.Ta(this.aa.hz())},c.prototype.contains=function(a){return a instanceof h.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},c.prototype.ZO=function(a){return this.aa.contains(a)},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.dc=function(){var a=this.description.dc();if(a=h.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)a=h.P.Vh(a,this.la[n]);return a},c.prototype.gs=function(){return this.aa.v},c.prototype.js=function(){return this.aa.G},c.prototype.fs=function(){return this.aa.C},c.prototype.hs=function(){return this.aa.H},c.prototype.ng=function(){return h.si.im(this,null)},c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},c}(h.ba);h.Hh=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){c===void 0?this.Pa():(this.v=c,this.G=a,this.C=n,this.H=o)}return w.construct=function(c,a,n,o){var u=new w;return u.v=c,u.G=a,u.C=n,u.H=o,u},w.prototype.L=function(c,a,n,o){typeof c=="number"?n!==void 0?(this.v=c,this.G=a,this.C=n,this.H=o,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof h.h?a!==void 0?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof w?this.L(c.v,c.G,c.C,c.H):c instanceof h.Oc&&(c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa))},w.prototype.bx=function(c,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=c[0].x,this.G=c[0].y,this.C=this.v,this.H=this.G;for(var n=1;n<a;n++){var o=c[n];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(c==null||c.length==0)this.Pa();else for(o=c[0],this.L(o.x,o.y),n=1;n<c.length;n++)a=c[n],this.Nk(a.x,a.y)},w.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.$b=function(c,a){typeof c=="number"?this.B()?(this.v=c,this.G=a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof h.h||c instanceof h.Od?this.$b(c.x,c.y):c instanceof w&&!c.B()&&(this.$b(c.v,c.G),this.$b(c.C,c.H))},w.prototype.Nk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)},w.prototype.X=function(c,a){this.B()||(this.v-=c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},w.prototype.scale=function(c){0>c&&this.Pa(),this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)},w.prototype.zoom=function(c,a){this.B()||this.L(this.tf(),c*this.S(),a*this.da())},w.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},w.prototype.CG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},w.prototype.Fa=function(c){return!this.B()&&!c.B()&&(c.v>this.v&&(this.v=c.v),c.C<this.C&&(this.C=c.C),c.G>this.G&&(this.G=c.G),c.H<this.H&&(this.H=c.H),(c=this.v<=this.C&&this.G<=this.H)||this.Pa(),c)},w.prototype.hB=function(c){switch(c){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.de()}},w.prototype.iB=function(c){if(c==null||4>c.length)throw h.i.O();c[0]!=null?c[0].na(this.v,this.G):c[0]=h.h.construct(this.v,this.G),c[1]!=null?c[1].na(this.v,this.H):c[1]=h.h.construct(this.v,this.H),c[2]!=null?c[2].na(this.C,this.H):c[2]=h.h.construct(this.C,this.H),c[3]!=null?c[3].na(this.C,this.G):c[3]=h.h.construct(this.C,this.G)},w.prototype.rF=function(){return this.B()?0:this.S()*this.da()},w.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},w.prototype.ik=function(){return(this.C+this.v)/2},w.prototype.Lp=function(){return(this.H+this.G)/2},w.prototype.S=function(){return this.C-this.v},w.prototype.da=function(){return this.H-this.G},w.prototype.move=function(c,a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)},w.prototype.Lu=function(c,a){if(a!==void 0)this.move(c-this.ik(),a-this.Lp());else if(c instanceof h.h)this.Lu(c.x,c.y);else{if(!(c instanceof h.Ta))throw h.i.O();a=(this.C-this.v)/2;var n=(this.H-this.G)/2;this.v=c.Ng()-a,this.C=c.Ng()+a,this.G=c.kh()-n,this.H=c.kh()+n}},w.prototype.offset=function(c,a){this.v+=c,this.C+=c,this.G+=a,this.H+=a},w.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=c,this.C=a,c=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=c,this.H=a}},w.prototype.fn=function(c){c.na(this.v,this.G)},w.prototype.VI=function(c){c.na(this.C,this.G)},w.prototype.YI=function(c){c.na(this.v,this.H)},w.prototype.gn=function(c){c.na(this.C,this.H)},w.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.hz=function(){return h.h.construct(this.v,this.G)},w.prototype.contains=function(c,a){if(a!==void 0)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof h.Ta)return this.contains(c.Ng(),c.kh());if(c instanceof h.h)return this.contains(c.x,c.y);if(c instanceof w)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw h.i.O()},w.prototype.jm=function(c,a){if(a!==void 0)return c>this.v&&c<this.C&&a>this.G&&a<this.H;if(c instanceof h.h)return this.jm(c.x,c.y);if(c instanceof w)return c.v>this.v&&c.C<this.C&&c.G>this.G&&c.H<this.H;throw h.i.O()},w.prototype.Nb=function(c){return c==this||c instanceof w&&(!(!this.B()||!c.B())||this.v==c.v&&this.G==c.G&&this.C==c.C&&this.H==c.H)},w.prototype.dc=function(){var c=this.v;c=h.P.truncate(c^c>>>32);var a=h.P.Vh(c);return c=this.C,c=h.P.truncate(c^c>>>32),a=h.P.Vh(c,a),c=this.G,c=h.P.truncate(c^c>>>32),a=h.P.Vh(c,a),c=this.H,c=h.P.truncate(c^c>>>32),h.P.Vh(c,a)},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.uy=function(c,a){var n=this.ak(c),o=this.ak(a);if((n&o)!=0)return 0;if((n|o)==0)return 4;var u=(n!=0?1:0)|(o!=0?2:0);do{var p=a.x-c.x,y=a.y-c.y;if(p>y?(n&w.TC)!=0?((n&w.lu)!=0?(c.y+=y*(this.v-c.x)/p,c.x=this.v):(c.y+=y*(this.C-c.x)/p,c.x=this.C),n=this.ak(c)):(o&w.TC)!=0?((o&w.lu)!=0?(a.y+=y*(this.v-a.x)/p,a.x=this.v):(a.y+=y*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)):n!=0?((n&w.mu)!=0?(c.x+=p*(this.G-c.y)/y,c.y=this.G):(c.x+=p*(this.H-c.y)/y,c.y=this.H),n=this.ak(c)):((o&w.mu)!=0?(a.x+=p*(this.G-a.y)/y,a.y=this.G):(a.x+=p*(this.H-a.y)/y,a.y=this.H),o=this.ak(a)):(n&w.UC)!=0?((n&w.mu)!=0?(c.x+=p*(this.G-c.y)/y,c.y=this.G):(c.x+=p*(this.H-c.y)/y,c.y=this.H),n=this.ak(c)):(o&w.UC)!=0?((o&w.mu)!=0?(a.x+=p*(this.G-a.y)/y,a.y=this.G):(a.x+=p*(this.H-a.y)/y,a.y=this.H),o=this.ak(a)):n!=0?((n&w.lu)!=0?(c.y+=y*(this.v-c.x)/p,c.x=this.v):(c.y+=y*(this.C-c.x)/p,c.x=this.C),n=this.ak(c)):((o&w.lu)!=0?(a.y+=y*(this.v-a.x)/p,a.x=this.v):(a.y+=y*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)),(n&o)!=0)return 0}while((n|o)!=0);return u},w.prototype.ak=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3},w.prototype.Di=function(c){return!this.B()&&(this.S()<=c||this.da()<=c)},w.prototype.ub=function(c){return c instanceof h.h?Math.sqrt(this.dK(c)):Math.sqrt(this.px(c))},w.prototype.px=function(c){var a=0,n=0,o=this.v-c.C;return o>a&&(a=o),(o=this.G-c.H)>n&&(n=o),(o=c.v-this.C)>a&&(a=o),(o=c.G-this.H)>n&&(n=o),a*a+n*n},w.prototype.dK=function(c){var a=0,n=0,o=this.v-c.x;return o>a&&(a=o),(o=this.G-c.y)>n&&(n=o),(o=c.x-this.C)>a&&(a=o),(o=c.y-this.H)>n&&(n=o),a*a+n*n},w.prototype.en=function(c){this.B()?c.Pa():c.L(this.v,this.C)},w.lu=1,w.mu=4,w.TC=3,w.UC=12,w}();h.l=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var c=function(){function a(n,o){this.ei=n,this.ZG=o}return a.prototype.qr=function(n,o,u){this.ei.FX(u,n,o,this.ZG)},a.prototype.bq=function(n){return this.ei.Tr(n,this.ZG)},a}();O=function(){function a(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return a.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.bd=function(n,o){if(!this.Rv)throw h.i.Hb();var u=new h.l;u.L(o),this.io.add(n),this.Fb.push(u)},a.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.DD=function(n,o){if(!this.Qv)throw h.i.Hb();var u=new h.l;u.L(o),this.io.add(n),this.Fb.push(u)},a.prototype.dF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.zD=function(n,o){if(!this.Pv)throw h.i.Hb();var u=new h.l;u.L(o),this.ew.add(n),this.rd.push(u)},a.prototype.cF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var n=!0;n;)switch(this.Yb){case 0:n=this.Bz();break;case 1:n=this.mS();break;case 2:n=this.jS();break;case 3:n=this.lS();break;case 4:n=this.QX();break;case 5:n=this.MX();break;case 6:n=this.NX();break;case 7:n=this.OX();break;case 8:n=this.tx();break;case 9:n=this.dC();break;case 10:n=this.Pz();break;case 11:n=this.eT();break;case 12:n=this.bT();break;case 13:n=this.cT();break;case 14:n=this.dT();break;case 15:n=this.fJ();break;case 16:n=this.eJ();break;default:throw h.i.Ra()}return!this.Jc},a.prototype.WB=function(n){this.ra=n},a.prototype.oz=function(n){return this.Fb[n]},a.prototype.Wy=function(n){return this.rd[n]},a.prototype.pl=function(n){return this.io.read(n)},a.prototype.jl=function(n){return this.ew.read(n)},a.Oz=function(n){return(1&n)==1},a.gq=function(n){return(1&n)==0},a.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},a.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var n=0;n<this.rd.length;n++){var o=this.rd[n];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},a.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),n=0;n<this.rd.length;n++)o=this.rd[n],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);for(n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.QX=function(){var n=this.Md.get(--this.qe),o=n>>1;return a.gq(n)?(this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=10,!0)},a.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},a.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.OX=function(){var n=this.Md.get(this.qe-1),o=this.Ff.get(this.Tg-1),u=this.Tr(n,!0),p=this.Tr(o,!1);return u>p?this.tx():u<p?this.dC():a.Oz(n)?this.tx():a.Oz(o)?this.dC():this.tx()},a.prototype.tx=function(){var n=this.Md.get(--this.qe),o=n>>1;if(a.gq(n))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(n=this.Bd.sc(this.Df);n!=-1;){var u=this.Bd.getData(n);this.ff.xj(u),this.Jj.set(u,-1),u=this.Bd.lb(n),this.Bd.kd(this.Df,n),n=u}return 0<this.ff.size()?(this.qw.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.dC=function(){var n=this.Ff.get(--this.Tg),o=n>>1;if(a.gq(n))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(n=this.Bd.sc(this.Ef);n!=-1;){var u=this.Bd.getData(n);this.sd.xj(u),this.Kj.set(u,-1),u=this.Bd.lb(n),this.Bd.kd(this.Ef,n),n=u}return 0<this.sd.size()?(this.qo.zB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=4,!0},a.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var n=this.Ff.get(this.Tg)>>1;return this.ff.xj(n),this.Yb=7,!0},a.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=7,!0},a.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var n=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var n=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(n,o,u){this.Cm==null&&(this.Cm=new h.Zt),u=new c(this,u),this.Cm.sort(n,0,o,u)},a.prototype.FX=function(n,o,u,p){var y=this;n.Wd(o,u,function(g,b){var S=y.Tr(g,p),$=y.Tr(b,p);return S<$||S==$&&a.gq(g)&&a.Oz(b)?-1:1})},a.prototype.Tr=function(n,o){var u=.5*this.ra;return o?(o=this.Fb[n>>1],a.gq(n)?o.G-u:o.H+u):(o=this.rd[n>>1],a.gq(n)?o.G-u:o.H+u)},a}(),h.sC=O}(B||(B={})),function(h){var O=function(){function w(){}return w.construct=function(c,a,n,o,u,p){var y=new w;return y.v=c,y.G=a,y.Xe=n,y.C=o,y.H=u,y.Dg=p,y},w.prototype.Pa=function(){this.Xe=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.SS=function(){return isNaN(this.Xe)},w.prototype.L=function(c,a,n,o,u,p){o!==void 0?typeof c=="number"?(this.v=c,this.G=a,this.Xe=n,this.C=o,this.H=u,this.Dg=p):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*n,this.H=this.G+n,this.Xe=c.z-.5*o,this.Dg=this.Xe+o):(this.v=c,this.G=a,this.Xe=n,this.C=c,this.H=a,this.Dg=n)},w.prototype.move=function(c){this.v+=c.x,this.G+=c.y,this.Xe+=c.z,this.C+=c.x,this.H+=c.y,this.Dg+=c.z},w.prototype.copyTo=function(c){c.v=this.v,c.G=this.G,c.C=this.C,c.H=this.H},w.prototype.Nk=function(c,a,n){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>n?this.Xe=n:this.Dg<n&&(this.Dg=n):this.Dg=this.Xe=n},w.prototype.$b=function(c,a,n){if(typeof c=="number")this.B()?(this.v=c,this.G=a,this.Xe=n,this.C=c,this.H=a,this.Dg=n):this.Nk(c,a,n);else if(c instanceof h.Od)this.$b(c.x,c.y,c.z);else{if(!(c instanceof w))throw h.i.O();c.B()||(this.$b(c.v,c.G,c.Xe),this.$b(c.C,c.H,c.Dg))}},w.prototype.construct=function(c,a,n){c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa,this.Xe=n.pa,this.Dg=n.wa)},w.prototype.iB=function(c){if(c==null||8>c.length)throw h.i.O();c[0]=new h.Od(this.v,this.G,this.Xe),c[1]=new h.Od(this.v,this.H,this.Xe),c[2]=new h.Od(this.C,this.H,this.Xe),c[3]=new h.Od(this.C,this.G,this.Xe),c[4]=new h.Od(this.v,this.G,this.Dg),c[5]=new h.Od(this.v,this.H,this.Dg),c[6]=new h.Od(this.C,this.H,this.Dg),c[7]=new h.Od(this.C,this.G,this.Dg)},w.prototype.bx=function(c){if(c==null||c.length==0)this.Pa();else{var a=c[0];for(this.L(a.x,a.y,a.z),a=1;a<c.length;a++){var n=c[a];this.Nk(n.x,n.y,n.z)}}},w}();h.JK=O}(B||(B={})),function(h){(function(O){O.Ra=function(){var w=Error();return w.message="Internal Error",w},O.Fe=function(){var w=Error();return w.message="Not Implemented",w},O.Zk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},O.Hb=function(){var w=Error();return w.message="Invalid Call",w},O.O=function(w){var c=Error();return c.message="Illegal Argument Exception",w!==void 0&&(c.message+=": "+w),c},O.hu=function(w){var c=Error();return c.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",c},O.ga=function(w){var c=Error();return c.message="Geometry Exception: "+w,c},O.BK=function(){var w=Error();return w.message="Assert Failed Exception",w},O.de=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},O.RC=function(){var w=Error();return w.message="UserCancelException",w}})(h.i||(h.i={}))}(B||(B={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(B||(B={})),function(h){var O=function(){function a(n,o){this.Xa=n,this.AH=o,this.GH=-1,this.ul=!1}return a.prototype.re=function(){},a.prototype.next=function(){if(++this.GH==this.AH.I())return null;var n=this.AH.Oa(this.GH);n.scale(this.Xa.fc);var o=new h.Ea;return this.Xa.ny(n,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),w=function(){function a(n,o,u){this.Xa=n,this.tw=o,this.Zn=!1,this.fo=u,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.wk=[]}return a.prototype.re=function(){},a.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var n=h.ba.kg(this.sq);return h.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}n=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var o=this.wk.length=0,u=new h.h,p=new h.h,y=[0];this.td.Ia()&&8>this.AA;){var g=this.td.ia();if(u.N(g.bc()),p.N(g.xc()),u.scale(this.Xa.fc),p.scale(this.Xa.fc),h.ej.Ou(u,p)?u.x=p.x:h.ej.Mu(u,p)&&(p.x=u.x),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,u,p,this.Xa.LA,this.Xa.at,y,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(g=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,g,g.length-1)),h.ej.Nu(u,p)?(this.sq.Pa(),this.Xa.ny(u,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(y[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}n==null&&(n=new h.Ea).$k(null,0),this.JD(n),o++}if(this.dw[0]=0,0<o){for(y=this.td.xb();0<o;)this.td.ni(),u.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.kk())),u.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(h.ej.Ou(u,p)?u.x=p.x:h.ej.Mu(u,p)&&(p.x=u.x)),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,u,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(n),o--;return u.N(this.tw.Oa(this.td.xb())),u.scale(this.Xa.fc),c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,u,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.td.Wb(y),this.td.ia(),o=h.ua.mj(null,n,!0),h.Hg.Ok(n,o,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),n=h.ba.kg(this.sq),h.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.JD=function(n){var o=this.wk[0],u=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var y=this.fi+1.570796326794897;u=y+3.141592653589793-(this.fi-this.Pj[0])}else u=(y=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var g=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),b=!1;if(Math.abs(u-y)<=.5*this.Xa.co)if(g){var S=n.Oa(n.I()-2);S.scale(this.Xa.fc);var $=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,S.x,S.y,$),S=$.u;S<=y;)S+=6.283185307179586;for(;S>y;)S-=6.283185307179586;S<u&&(b=!0)}else b=!0;b?(n.yB(0,n.I()-1),this.ul||((o=new h.h).N(n.Oa(n.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<o.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),g||(u=.5*(u+y))):(g?((y=new h.h).N(o),y.scale(1/this.Xa.fc),n.xf(0,-1,y)):c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],y,u,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.AA+=1)}c.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,u,p,this.ul,this.uk,n),this.fi=this.Is[0]},a.prototype.sy=function(n,o){return this.Xa.sy(this.wk,n,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),c=function(){function a(){}return a.buffer=function(n,o,u,p,y,g){if(n==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(n.B())return new h.Ea(n.description);var b=new a;b.Sg=o,b.Kc=h.cb.tc(o);var S=h.cb.xv(b.Kc);if(b.Vb=g,b.Ub=h.cb.gv(b.Kc),b.lc=S*(2-S),b.fc=b.Kc.Id().ci,b.ra=b.Sg.Mn(),b.Cq=b.Kc.Mn(),b.at=b.Cq*b.fc,b.Bq=1.570796326794897/b.fc,b.KY=3.141592653589793/b.fc,b.Ls=6.283185307179586/b.fc,b.LY=b.Ls/6,b.GA=0,b.JY=1.5707963267948966*b.Ub/b.GA,u==4?(b.Ae=2,b.Yv=!0):(b.Ae=u,b.Yv=!1),b.La=p,b.sb=Math.abs(p),isNaN(y)||.001>y?b.tX():b.bo=y,u=n.K(),h.ba.zd(u)?((u=new h.Ua(n.description)).pc(n,!0),n=u,u=1607):u==197&&(u=new h.l,n.A(u),u.S()<=b.ra||u.da()<=b.ra?((u=new h.Ua(n.description)).bd(n,!1),n=u,u=1607):((u=new h.Ea(n.description)).bd(n,!1),n=u,u=1736)),b.uX(),h.ba.Tn(u)||b.vX(),b.sb<=.5*b.bo)return u!=1736?new h.Ea(n.description):b.Yv?n:h.ej.Sr(n,b.Sg,b.Ae,b.LA,-1,g);if(0>b.La&&u!=1736)return new h.Ea(n.description);if(b.Yv&&h.ba.Ic(u)?(o=h.ej.Sr(n,o,4,NaN,b.bo,g),n=h.cb.Bh(o,b.Sg,b.Kc)):n=h.cb.Bh(n,b.Sg,b.Kc),(n=h.Jh.nj(n,b.Kc)).B())return new h.Ea(n.description);switch(!b.Yv&&h.ba.Ic(u)&&(n=h.ej.kI(b.fc,n)),n=a.GX(n,b.Kc),u){case 1736:o=b.PN(n);break;case 1607:o=b.QN(n);break;case 550:o=b.NN(n);break;case 33:o=b.ON(n);break;default:throw h.i.ga("corrupted_geometry")}return(b=h.cb.Bh(o,b.Kc,b.Sg)).Ll(n.description),b},a.prototype.PN=function(n){var o=new h.Ea;n=new w(this,n,o),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),n=h.kp.pj(n,this.Kc,2);var u=new h.Ed;return u.scale(1/this.fc,1/this.fc),o.Pc(u),o=h.kp.pj(o,this.Kc,2),0<=this.La?h.Ih.local().W(o,n,this.Kc,this.Vb):h.mp.local().W(o,n,this.Kc,this.Vb)},a.prototype.QN=function(n){return n=new w(this,n,null),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),h.kp.pj(n,this.Kc,2)},a.prototype.NN=function(n){return n=new O(this,n),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),h.kp.pj(n,this.Kc,2)},a.prototype.ON=function(n){(n=n.D()).scale(this.fc);var o=new h.Ea;return this.ny(n,!1,o),h.kp.pj(o,this.Kc,2)},a.prototype.sy=function(n,o,u,p,y,g){var b=n[0],S=n[n.length-1],$=b.y>S.y?b.y:S.y,I=h.F.q(this.Ub,this.lc,b.y<S.y?b.y:S.y);if($=h.F.q(this.Ub,this.lc,$),.001<this.GA-(I+o+this.sb)&&.001<this.GA+($-o-this.sb))return!1;I=(o=u-1.570796326794897)-3.141592653589793,$=o+3.141592653589793;var C=(u=p+1.570796326794897)+3.141592653589793,R=[NaN],L=[NaN],N=[NaN],U=[NaN];if(p=!1,a.ZI(this.Ub,this.lc,this.sb,b,o,I,S,u,R,L),a.ZI(this.Ub,this.lc,this.sb,S,C,u,b,I,N,U),(u<R[0]&&R[0]<C||u<L[0]&&L[0]<C)&&(p=!0),p||(I<N[0]&&N[0]<o||I<U[0]&&U[0]<o)&&(p=!0),!p&&y)return!1;for(var W=[],j=n.length-1;0<=j;j--)W.push(n[j]);return g.Pa(),g.$k(null,0),j=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,n,o,u,y,j,g),a.Jr(this.Ub,this.lc,this.fc,this.sb,S,u,C,this.co,y,j,g,R[0],L[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,W,C,$,y,j,g),a.Jr(this.Ub,this.lc,this.fc,this.sb,b,I,o,this.co,y,j,g,N[0],U[0]),n=!1,y||(n=this.DE(this.fc,g)),p||n},a.prototype.ny=function(n,o,u){u.Pa(),u.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,n,-this.co,6.283185307179586,this.co,o,[0],u,NaN,NaN),o||this.DE(this.fc,u)},a.prototype.DE=function(n,o){var u=this.qO(n,o);return n=this.rO(n,o),u||n},a.prototype.qO=function(n,o){var u=o.I(),p=!1,y=new h.l;if(o.A(y),!h.s.$(y.H*n,1.570796326794897)&&!h.s.$(y.G*n,-1.570796326794897))return!1;var g=new h.h;for(--u;0<=u;u--)o.D(u,g),(g.y==y.H&&h.s.$(g.y*n,1.570796326794897)||g.y==y.G&&h.s.$(g.y*n,-1.570796326794897))&&(p=!0,this.JI(g,u,o));return p},a.prototype.rO=function(n,o){var u=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(u.x-p.x)*n?(this.QV(o),!0):this.pO(o)},a.prototype.pO=function(n){return 0>n.He()&&(this.PV(n),!0)},a.prototype.JI=function(n,o,u){var p=u.I(),y=0<o?o-1:p-1;if(p=u.Oa(o<p-1?o+1:0),y=u.Oa(y),!h.s.$(p.y,n.y)&&!h.s.$(p.x,n.x)){var g=new h.h;g.na(p.x,n.y),u.Db(o,g)}h.s.$(y.y,n.y)||h.s.$(y.x,n.x)||((p=new h.h).na(y.x,n.y),u.xf(0,o,p))},a.prototype.QV=function(n){var o=new h.Ea,u=new h.Ea,p=new h.Ed,y=n.Oa(0),g=n.Oa(n.I()-1),b=new h.h;y.x>g.x?(g=this.Bq,p.ig(-this.Ls,0)):(g=-this.Bq,p.ig(this.Ls,0)),o.add(n,!1),n.Pa(),u.add(o,!1),u.Pc(p),y=new h.l,u.A(y),y.X((this.Ls-y.S())/2,0),y.G=-this.Bq,y.H=this.Bq;for(var S=0;S<u.I();S++)u.D(S,b),o.xf(0,-1,b);for(u.Pc(p),S=0;S<u.I();S++)u.D(S,b),o.xf(0,-1,b);u=o.Oa(0),p=o.Oa(o.I()-1),b.na(p.x,g),o.xf(0,-1,b),b.na(.5*(p.x+u.x),g),o.xf(0,-1,b),b.na(u.x,g),o.xf(0,-1,b),o=h.Jh.ms(o,this.Kc,2,!0,y.v),o=h.Jh.ms(o,this.Kc,2,!0,y.C),o=h.Vd.clip(o,y,this.Cq,NaN),n.add(o,!1)},a.prototype.PV=function(n){var o=new h.l;n.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,n.$k(null,0);var u=new h.h;u.na(o.v,o.G),n.xf(1,-1,u),u.na(o.v,o.H),n.xf(1,-1,u),u.na(.5*(o.v+o.C),o.H),n.xf(1,-1,u),u.na(o.C,o.H),n.xf(1,-1,u),u.na(o.C,o.G),n.xf(1,-1,u),u.na(.5*(o.v+o.C),o.G),n.xf(1,-1,u)},a.my=function(n,o,u,p,y,g,b,S,$,I,C){var R=null;$||((R=new h.h).Sc(),0<C.I()&&(R.N(C.Oa(C.I()-1)),R.scale(u)));var L=new h.ha(0),N=new h.ha(0),U=new h.ha(0),W=new h.h,j=new h.h,K=g[g.length-1];u=1/u;for(var se=0;se<g.length;se++){var ne=g[se];if(se==0)var pe=b;else se==g.length-1?pe=S:(h.kb.xd(n,o,K.x,K.y,ne.x,ne.y,null,null,L,y),pe=L.u-1.570796326794897);h.kb.Ai(n,o,ne.x,ne.y,p,pe,N,U),$?j.na(N.u,U.u):(W.na(N.u,U.u),a.bJ(ne.x,W.x,R.x,I),j.na(I[0]+W.x,W.y),R.N(j)),j.scale(u),C.xf(0,-1,j)}},a.Jr=function(n,o,u,p,y,g,b,S,$,I,C,R,L){if(!(b-g<S)){var N=new h.ha(0),U=new h.ha(0),W=new h.h,j=new h.h,K=null;$||((K=new h.h).Sc(),0<C.I()&&(K.N(C.Oa(C.I()-1)),K.scale(u)));var se=h.P.truncate(Math.ceil(g/S)),ne=se++*S;for(ne==g&&(ne=se++*S),u=1/u;ne<b+S&&(g<R&&R<ne?(ne=R,se--):g<L&&L<ne&&(ne=L,se--),!(ne>=b));)h.kb.Ai(n,o,y.x,y.y,p,ne,N,U),$?j.na(N.u,U.u):(W.na(N.u,U.u),a.bJ(y.x,W.x,K.x,I),j.na(I[0]+W.x,W.y),K.N(j)),j.scale(u),C.xf(0,-1,j),g=ne,ne=se++*S}},a.ZI=function(n,o,u,p,y,g,b,S,$,I){var C=new h.h,R=new h.h,L=new h.ha(0),N=new h.ha(0);for(h.kb.Ai(n,o,p.x,p.y,u,y,L,N),C.na(L.u,N.u),h.kb.Ai(n,o,p.x,p.y,u,g,L,N),R.na(L.u,N.u),u=new h.ha(0),h.kb.Sy(n,o,b.x,b.y,C.x,C.y,u),$[0]=u.u,h.kb.Sy(n,o,b.x,b.y,R.x,R.y,u),I[0]=u.u;$[0]<=I[0];)$[0]+=6.283185307179586;for(;$[0]>I[0];)$[0]-=6.283185307179586;for(;$[0]>=S;)$[0]-=6.283185307179586,I[0]-=6.283185307179586;for(;$[0]<S;)$[0]+=6.283185307179586,I[0]+=6.283185307179586},a.bJ=function(n,o,u,p){if(isNaN(u)){for(;3.141592653589793<p[0]+o-n;)p[0]-=6.283185307179586;for(;3.141592653589793<n-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-u?p[0]-=6.283185307179586:3.141592653589793<u-(p[0]+o)&&(p[0]+=6.283185307179586)},a.GX=function(n,o){var u=n.K(),p=h.ba.Ic(u)?n.ea():u==550?n.I():1;if(p==1)return n;var y=new h.ja(0);y.resize(p);for(var g=[],b=new h.l,S=0;S<p;S++){if(y.write(S,S),h.ba.Ic(u)){n.Tj(S,b);var $=b.tf()}else $=n.Oa(S);$=h.SK.WX(o,$),g[S]=$}for(y.Wd(0,y.size,function(I,C){return g[I]<g[C]?-1:g[I]>g[C]?1:0}),o=n.Ja(),S=0;S<p;S++)b=y.read(S),h.ba.Ic(u)?o.addPath(n,b,!0):o.Gd(n,b,b+1);return o},a.prototype.uX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new h.h;o.na(0,10*this.fc);var u=45*this.fc,p=new h.ha(0),y=new h.ha(0),g=new h.ha(0),b=new h.ha(0),S=new h.ha(0),$=new h.ha(0),I=new h.ha(0),C=new h.ha(0),R=new h.h,L=new h.h,N=new h.h,U=new h.h;h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,0,p,y),R.na(p.u,y.u),h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,u,g,b),L.na(g.u,b.u),p=new h.ha(0),y=new h.ha(0);for(var W=new h.ha(0);h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,.5*(0+u),S,$),N.na(S.u,$.u),h.kb.xd(this.Ub,this.lc,R.x,R.y,L.x,L.y,p,y,null,2),h.kb.qj(this.Ub,this.lc,R.x,R.y,.5*p.u,y.u,I,C,2),U.na(I.u,C.u),h.kb.xd(this.Ub,this.lc,N.x,N.y,U.x,U.y,W,null,null,2),!(W.u<=this.bo);)u*=.9,h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,u,g,b),L.na(g.u,b.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(u-0))},a.prototype.vX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new h.h,u=new h.h;o.na(0,10*this.fc),u.na(10*this.fc,10*this.fc);var p=new h.ha(0),y=new h.ha(0),g=new h.ha(0);h.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,g,p,y,this.Ae);var b=new h.ha(0),S=new h.ha(0),$=new h.ha(0),I=new h.ha(0),C=new h.h,R=new h.ha(0),L=new h.ha(0),N=new h.ha(0),U=new h.ha(0),W=new h.ha(0),j=new h.ha(0),K=new h.ha(0),se=new h.ha(0),ne=new h.ha(0),pe=new h.h,he=new h.h,xe=new h.h,ke=new h.h,Ae=1;p=p.u,y=y.u+1.570796326794897,g=g.u,h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,p-1.570796326794897,L,N),pe.na(L.u,N.u),h.kb.Ai(this.Ub,this.lc,u.x,u.y,n,y,U,W),he.na(U.u,W.u),L=new h.ha(0),N=new h.ha(0),y=new h.ha(0);for(var st=new h.ha(0);h.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+Ae)*g,p,b,S,this.Ae),C.na(b.u,S.u),h.kb.xd(this.Ub,this.lc,o.x,o.y,C.x,C.y,null,null,R,this.Ae),h.kb.Ai(this.Ub,this.lc,C.x,C.y,n,R.u+1.570796326794897,j,K),xe.na(j.u,K.u),h.kb.xd(this.Ub,this.lc,pe.x,pe.y,he.x,he.y,L,N,null,2),h.kb.qj(this.Ub,this.lc,pe.x,pe.y,.5*L.u,N.u,se,ne,2),ke.na(se.u,ne.u),h.kb.xd(this.Ub,this.lc,xe.x,xe.y,ke.x,ke.y,y,null,null,2),!(y.u<=this.bo);)Ae*=.9,h.kb.qj(this.Ub,this.lc,o.x,o.y,Ae*g,p,$,I,this.Ae),u.na($.u,I.u),h.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,null,null,st,this.Ae),h.kb.Ai(this.Ub,this.lc,u.x,u.y,n,st.u+1.570796326794897,U,W),he.na(U.u,W.u);1e5<(n=Ae*g)&&(n=1e5),this.LA=n},a.prototype.tX=function(){var n=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/n&&(n=this.sb/500),.01>n&&(n=.01),this.bo=n},a}();h.QK=c}(B||(B={})),function(h){var O=function(){function w(){}return w.Of=function(c,a){var n=new h.h;n.N(a),c.push(n)},w.wp=function(c,a){c.add(a.x),c.add(a.y)},w.cB=function(c){c.Dh(c.size-2)},w.jB=function(c,a){a.na(c.get(c.size-2),c.get(c.size-1))},w.Sr=function(c,a,n,o,u,p){if(c==null)throw h.i.O();var y=c.K();if(c.B()||h.ba.Tn(y))return c;var g=new w;g.Sg=a,g.Kc=h.cb.tc(a);var b=h.cb.xv(g.Kc);if(g.Vb=p,g.Ub=h.cb.gv(g.Kc),g.lc=b*(2-b),g.fc=g.Kc.Id().ci,g.Cq=g.Kc.Mn(),g.at=g.Cq*g.fc,g.vA=o,g.uA=u,g.Ae=n,y==197?(n=new h.Ea(c.description)).bd(c,!1):h.ba.zd(y)?(n=new h.Ua(c.description)).pc(c,!0):n=c,g.Ae!=4){if((a=g.Sg.Nb(g.Kc)==0?h.cb.Bh(n,g.Sg,g.Kc):h.Jh.nj(n,g.Kc)).B())return a;a=w.kI(g.fc,a),a=g.Uy(a),a=h.kp.pj(a,g.Kc,g.Ae),g=h.cb.Bh(a,g.Kc,g.Sg)}else{if(h.Gg.Tb(a)==2?(c=h.cb.ol(),(a=h.Zj.local().W(n,c,a,p))==c&&(a=new h.Ea,c.copyTo(a))):a=h.Jh.nj(n,g.Kc),a.B())return a;g=g.yX(a)}return g},w.kI=function(c,a){var n=new h.l;if(a.yc(n),3.141592653589793>n.S()*c)return a;var o=!1;n=a.Ha();for(var u=new h.h,p=new h.h;n.ab();)for(;n.Ia();){var y=n.ia();if(u.N(y.bc()),p.N(y.xc()),u.scale(c),p.scale(c),3.141592653589793<Math.abs(u.x-p.x)){var g=w.Nu(u,p);if(!g){o=!0;break}if(6.283185307179586<Math.abs(u.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var b=1<a.description.Ba,S=new h.h,$=new h.h,I=new h.h,C=new h.h,R=new h.Ta;for(n.aj();n.ab();)for(var L=NaN,N=[0];n.Ia();){if(y=n.ia(),u.N(y.bc()),p.N(y.xc()),u.scale(c),p.scale(c),isNaN(L)?(w.Yi(u.x,NaN,N),$.N(u)):$.N(I),L=$.x,g=w.Nu(u,p)){if(6.283185307179586<p.x-u.x)for(;6.283185307179586<p.x-u.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-u.x)for(;-6.283185307179586>p.x-u.x;)p.x+=6.283185307179586;w.Yi(p.x,NaN,N),I.N(p)}else S.N(p),w.vU(S),w.Yi(S.x,L,N),I.na(N[0]+S.x,S.y);.5>Math.abs(I.x-p.x)&&I.N(p),b?(y.Vw(0,R),C.N($),C.scale(1/c),R.Db(C),(g=n.xm())?o.nf(R):o.lineTo(R),n.Sn()&&!a.ec(n.gb)&&(y.Vw(1,R),C.N(I),C.scale(1/c),R.Db(C),o.lineTo(R))):((g=n.xm())&&o.Cz(null,0),y=o.ea()-1,C.N($),C.scale(1/c),o.xf(y,-1,C),n.Sn()&&!a.ec(n.gb)&&(C.N(I),C.scale(1/c),o.xf(y,-1,C)))}return o},w.oF=function(c,a,n,o,u,p,y,g,b,S,$,I){var C=new h.h,R=new h.h,L=0<o.compare(u);w.aJ(L,o,u,C,R),w.pF(c,a,n,C,R,p,NaN,y,g,b,S,null,$,I),L&&w.aC(b,S,null,$)},w.prototype.Uy=function(c){var a=c.Ja(),n=c.Ha(),o=[],u=null,p=null,y=1<c.description.Ba;y&&(u=new h.ce(0),p=new h.jg);for(var g=[0],b=new h.h,S=new h.h,$=new h.h,I=new h.h;n.ab();)for(g[0]=0;n.Ia();){var C=n.ia();b.N(C.bc()),S.N(C.xc()),b.scale(this.fc),S.scale(this.fc);var R=0<b.compare(S);w.aJ(R,b,S,$,I),o.length=0,u!=null&&u.Dh(0),0<this.vA?w.pF(this.Ub,this.lc,this.Ae,$,I,this.vA,this.uA,this.at,null,null,null,y?u:null,o,g):w.WQ(this.Ub,this.lc,this.Ae,$,I,this.uA,this.at,y?u:null,o,g),R&&w.aC(null,null,y?u:null,o),o[0].N(C.bc()),o[o.length-1].N(C.xc());for(var L=1;L<o.length-1;L++)o[L].scale(1/this.fc);y?(R=w.$I(R,C,p),w.OD(n.xm(),n.Sn()&&!c.ec(n.gb),C,R,u,o,a)):w.ND(n.xm(),n.Sn()&&!c.ec(n.gb),o,a)}return a},w.prototype.yX=function(c){var a=c.Ja(),n=c.Ha(),o=[],u=null,p=new h.jg,y=1<c.description.Ba;for(y&&(u=new h.ce(0));n.ab();)for(;n.Ia();){var g=n.ia(),b=g.bc(),S=g.xc();b=0<b.compare(S),S=w.$I(b,g,p),o.length=0,u!=null&&u.Dh(0),w.xX(this.Ub,this.lc,this.fc,S,this.Sg,this.vA,this.uA,y?u:null,o),b&&w.aC(null,null,y?u:null,o),y?w.OD(n.xm(),n.Sn()&&!c.ec(n.gb),g,S,u,o,a):w.ND(n.xm(),n.Sn()&&!c.ec(n.gb),o,a)}return a},w.ND=function(c,a,n,o){c&&o.Cz(null,0),c=o.ea()-1;var u=n.slice(0);o.lG(c,u,u.length-1),a&&o.xf(c,-1,n[n.length-1])},w.OD=function(c,a,n,o,u,p,y){var g=new h.Ta;if(n.Vo(g),c?y.nf(g):y.lineTo(g),2<p.length){c=o.Rb();for(var b=1;b<p.length-1;b++){var S=o.IG(u.get(b)*c);o.Vw(S,g),g.Db(p[b]),y.lineTo(g)}}a&&(n.Ro(g),y.lineTo(g))},w.pF=function(c,a,n,o,u,p,y,g,b,S,$,I,C,R){var L=new h.ha(0),N=new h.ha(0),U=new h.ha(0);h.kb.xd(c,a,o.x,o.y,u.x,u.y,U,L,N,n),U=U.u;var W=L=L.u;0>W&&(W+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),b!=null&&(b[0]=U),S!=null&&(S[0]=W),$!=null&&($[0]=N),S=b=NaN,I!=null&&(b=((S=h.F.Ch(c,a))-($=h.F.q(c,a,o.y)))/U,S=(S+$)/U),$=w.Ou(o,u),N=w.Mu(o,u),W=$||N;var j=w.AE(o,u,g),K=new h.ha(0),se=new h.ha(0),ne=new h.h,pe=new h.h,he=new h.h;w.Yi(o.x,NaN,R);var xe=[R[0]];if(U<=p)w.Of(C,o),w.Yi(u.x,NaN,R),I!=null&&I.add(0),W?($&&w.fB(o,u,I,C),N&&w.dB(o,u,I,C)):j?w.eB(o,u,L,b,S,I,C):0<y&&(pe.na(o.x-xe[0],o.y),ne.na(u.x-R[0],u.y),w.Ty(c,a,n,o,U,L,pe,ne,0,1,y,I,C,xe)),w.Of(C,u);else{var ke=U/((p=1+h.P.truncate(Math.ceil(U/p)))-1),Ae=new h.h,st=0;w.Of(C,o),Ae.N(o),pe.na(o.x-R[0],o.y),I!=null&&I.add(0);for(var qe=1;qe<p;qe++){if(qe<p-1){h.kb.qj(c,a,o.x,o.y,qe*ke,L,K,se,n),ne.na(K.u,se.u),w.Yi(ne.x,Ae.x,R),he.na(R[0]+ne.x,ne.y);var It=qe/(p-1)}else w.Yi(u.x,NaN,R),ne.na(u.x-R[0],u.y),he.N(u),It=1;W?(qe==1&&$&&w.fB(o,he,I,C),qe==p-1&&N&&w.dB(Ae,u,I,C)):j?w.zE(Ae,he,g)&&(o.x<u.x?Ae.x>he.x&&(R[0]+=6.283185307179586,he.na(R[0]+ne.x,ne.y)):Ae.x<he.x&&(R[0]-=6.283185307179586,he.na(R[0]+ne.x,ne.y)),w.eB(Ae,he,L,b,S,I,C)):0<y&&w.Ty(c,a,n,o,U,L,pe,ne,st,It,y,I,C,xe),w.Of(C,he),I!=null&&I.add(It),Ae.N(he),pe.N(ne),xe[0]=R[0],st=It}}},w.WQ=function(c,a,n,o,u,p,y,g,b,S){var $=new h.ha(0),I=new h.ha(0),C=new h.ha(0);h.kb.xd(c,a,o.x,o.y,u.x,u.y,C,$,I,n),I=C.u,$=$.u;var R=C=NaN;if(g!=null){R=h.F.Ch(c,a);var L=h.F.q(c,a,o.y);C=(R-L)/I,R=(R+L)/I}L=w.Ou(o,u);var N=w.Mu(o,u),U=L||N;y=w.AE(o,u,y);var W=w.Nu(o,u);W=U||y||W,w.Yi(o.x,NaN,S);var j=new h.h;w.Of(b,o),j.N(o),g!=null&&g.add(0),W?(U?(L&&w.fB(o,u,g,b),N&&w.dB(o,u,g,b)):y&&w.eB(o,u,$,C,R,g,b),w.Yi(u.x,NaN,S),w.Of(b,u)):I<=p?(w.Yi(u.x,NaN,S),w.Of(b,u)):(C=new h.h,y=new h.h,C.N(o),y.N(u),C.x-=S[0],y.x-=S[0],-3.141592653589793>y.x?y.x+=6.283185307179586:3.141592653589793<y.x&&(y.x-=6.283185307179586),w.Ty(c,a,n,o,I,$,C,y,0,1,p,g,b,S),w.Of(b,u),w.Yi(u.x,NaN,S)),g!=null&&g.add(1)},w.Ty=function(c,a,n,o,u,p,y,g,b,S,$,I,C,R){var L=new h.h,N=new h.h;L.na(y.x+R[0],y.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var U=new h.ha(0),W=new h.ha(0),j=new h.ha(0),K=new h.h,se=new h.h,ne=new h.h,pe=new h.h;K.N(y),se.N(g),y=new h.ce(0),g=new h.ce(0),w.wp(y,se),g.add(S);var he=new h.h,xe=new h.zb,ke=[];for(w.TJ(4,ke);0<y.size;){for(var Ae,st=!1,qe=NaN,It=0;3>It;It++)if(Ae=ke[It]*S+(1-ke[It])*b,h.kb.qj(c,a,o.x,o.y,Ae*u,p,U,W,n),ne.na(U.u,W.u),It==0&&(qe=Ae,pe.N(ne)),w.RW(K,ne,se,xe),xe.ic(xe.ge(ne,!0),he),h.kb.xd(c,a,ne.x,ne.y,he.x,he.y,j,null,null,2),j.u>$){st=!0;break}st?(se.N(pe),S=qe,w.wp(y,se),g.add(S)):(w.cB(y),g.Gn(g.size-1,1,g.size-1),0<y.size&&(w.Yi(se.x,L.x,R),N.na(R[0]+se.x,se.y),w.Of(C,N),L.N(N),I!=null&&I.add(S),K.N(se),b=S,w.jB(y,se),S=g.get(g.size-1)))}},w.xX=function(c,a,n,o,u,p,y,g,b){var S=new h.h,$=new h.h,I=new h.h,C=new h.h,R=new h.h,L=new h.h,N=new h.h,U=new h.h,W=new h.h,j=new h.h,K=new h.ha(0),se=new h.ha(0),ne=new h.h,pe=[[],[]],he=h.Gg.Tb(u)==1;u=u.Yd(0);var xe=o.bc(),ke=o.xc();he?(L.na(xe.x*n,xe.y*n),N.na(ke.x*n,ke.y*n)):(pe[0][0]=xe.x,pe[0][1]=xe.y,pe[1][0]=ke.x,pe[1][1]=ke.y,h.cb.wt(),L.x=pe[0][0]*n,L.y=pe[0][1]*n,N.x=pe[1][0]*n,N.y=pe[1][1]*n);var Ae=0,st=0,qe=1,It=o.Rn();S.N(xe),$.N(ke),ke=new h.ce(0);var xt=new h.ce(0),tt=new h.ce(0);w.wp(ke,$),w.wp(xt,N),tt.add(qe),w.Of(b,S),g!=null&&g.add(st);var xi=[],nr=0<y?It?5:3:It?5:1;w.TJ(nr,xi);for(var Ii=new h.ha(0),ei=new h.ha(0),ti=new h.ha(0),zt=new h.ha(0),ki=new h.ha(0),Dt=new h.ha(0),dr=new h.ha(0);0<xt.size;){var Bt=!1,Hr=NaN;for(h.kb.xd(c,a,L.x,L.y,N.x,N.y,Ii,ei,null,2),xe=0;xe<nr&&!(xe==0&&(!It&&0>=y&&Ii.u<=p&&3.141592653589793>Math.abs(L.x-N.x)||o.Tx(st,qe)<=u));xe++){var ui=xi[xe]*qe+(1-xi[xe])*st;if(o.ic(ui,I),he?U.na(I.x*n,I.y*n):(pe[0][0]=I.x,pe[0][1]=I.y,h.cb.wt(),U.x=pe[0][0]*n,U.y=pe[0][1]*n),xe==0&&(Hr=ui,R.N(I),j.N(U),0<p&&(Ii.u>p||3.141592653589793<=Math.abs(L.x-N.x)))){Bt=!0;break}if(It&&0<p){if(h.kb.xd(c,a,L.x,L.y,U.x,U.y,ti,null,null,2),ti.u>p||3.141592653589793<=Math.abs(L.x-U.x)){Bt=!0;break}}else if(0<y){if(It?(C.IS(S,$,xi[xe]),he?W.na(C.x*n,C.y*n):(pe[0][0]=C.x,pe[0][1]=C.y,h.cb.wt(),W.x=pe[0][0]*n,W.y=pe[0][1]*n)):(C.N(I),W.N(U)),h.kb.xd(c,a,L.x,L.y,W.x,W.y,zt,null,null,2),!(zt.u<=Ii.u)){Bt=!0;break}if(h.kb.qj(c,a,L.x,L.y,zt.u,ei.u,K,se,2),ne.na(K.u,se.u),h.kb.xd(c,a,ne.x,ne.y,U.x,U.y,ki,null,null,2),ki.u>y){Bt=!0;break}if(It){if(h.kb.xd(c,a,ne.x,ne.y,W.x,W.y,Dt,null,null,2),Dt.u>y){Bt=!0;break}if(h.kb.xd(c,a,W.x,W.y,U.x,U.y,dr,null,null,2),dr.u>y){Bt=!0;break}}}}Bt?($.N(R),N.N(j),qe=Hr,w.wp(ke,$),w.wp(xt,N),tt.add(qe)):(w.cB(ke),w.cB(xt),tt.Gn(tt.size-1,1,tt.size-1),w.Of(b,$),Ae+=Ii.u,g!=null&&g.add(Ae),0<xt.size&&(S.N($),L.N(N),st=qe,w.jB(ke,$),w.jB(xt,N),qe=tt.get(tt.size-1)))}if(g!=null)for(c=1/Ae,xe=0;xe<g.size;xe++)g.write(xe,g.read(xe)*c)},w.aC=function(c,a,n,o){o.reverse(),n!=null&&n.pi(0,n.size,1),n=c!=null?c[0]:NaN,o=a!=null?a[0]:NaN,c!=null&&(c[0]=o),a!=null&&(a[0]=n)},w.aJ=function(c,a,n,o,u){c?(o.N(n),u.N(a)):(o.N(a),u.N(n))},w.$I=function(c,a,n){return c?(n.create(a.K()),a.copyTo(n.get()),n.get().reverse(),n.get()):a},w.Yi=function(c,a,n){if(isNaN(a)){for(;3.141592653589793<n[0]-c;)n[0]-=6.283185307179586;for(;3.141592653589793<c-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+c-a?n[0]-=6.283185307179586:3.141592653589793<a-(n[0]+c)&&(n[0]+=6.283185307179586)},w.RW=function(c,a,n,o){3.141592653589793>Math.abs(a.x-c.x)?(o.Ec(c),3.141592653589793<=n.x-c.x?o.Sl(n.x-6.283185307179586,n.y):3.141592653589793<=c.x-n.x?o.Sl(n.x+6.283185307179586,n.y):o.Sl(n.x,n.y)):(o.Ec(n),3.141592653589793<=c.x-n.x?o.Sl(c.x-6.283185307179586,c.y):3.141592653589793<=n.x-c.x?o.Sl(c.x+6.283185307179586,c.y):o.Sl(c.x,c.y))},w.TJ=function(c,a){for(var n=0;n<c;n++){var o=Math.ceil(n/2)/(c+1);n%2!=0&&(o=-o),a[n]=.5+o}},w.Ou=function(c,a){return!!(h.s.$(c.y,1.570796326794897)&&!h.s.$(a.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)&&!h.s.$(a.y,-1.570796326794897))},w.Mu=function(c,a){return!!(h.s.$(a.y,1.570796326794897)&&!h.s.$(c.y,1.570796326794897)||h.s.$(a.y,-1.570796326794897)&&!h.s.$(c.y,-1.570796326794897))},w.AE=function(c,a,n){return!(!w.zE(c,a,n)||h.s.$(c.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)||h.s.$(a.y,1.570796326794897)||h.s.$(a.y,-1.570796326794897))},w.zE=function(c,a,n){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=n},w.Nu=function(c,a){return!!(h.s.$(c.y,1.570796326794897)&&h.s.$(a.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)&&h.s.$(a.y,-1.570796326794897))},w.fB=function(c,a,n,o){if(0<c.y){var u=new h.h;u.na(a.x,1.570796326794897)}else(u=new h.h).na(a.x,-1.570796326794897);h.s.$(c.x,u.x)||h.s.$(a.y,u.y)||(w.Of(o,u),n!=null&&n.add(0))},w.dB=function(c,a,n,o){if(0<a.y){var u=new h.h;u.na(c.x,1.570796326794897)}else(u=new h.h).na(c.x,-1.570796326794897);h.s.$(a.x,u.x)||h.s.$(c.y,u.y)||(w.Of(o,u),n!=null&&n.add(1))},w.eB=function(c,a,n,o,u,p,y){h.s.Dd(n)?(0<1.570796326794897-c.y&&((n=new h.h).na(c.x,1.570796326794897),w.Of(y,n),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((n=new h.h).na(a.x,1.570796326794897),w.Of(y,n),p!=null&&p.add(o))):(0<1.570796326794897+c.y&&((n=new h.h).na(c.x,-1.570796326794897),w.Of(y,n),p!=null&&p.add(u)),0<1.570796326794897+a.y&&((n=new h.h).na(a.x,-1.570796326794897),w.Of(y,n),p!=null&&p.add(u)))},w.vU=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586},w}();h.ej=O}(B||(B={})),function(h){h.kp=function(){function O(){}return O.pj=function(w,c,a){if(w==null||c==null||!h.cb.Xc(c))throw h.i.O();if(w.B())return w;var n=w,o=n.K();if(h.ba.Ic(o)){n=h.Jh.nj(w,c),w=new h.l,n.A(w),o=h.ua.Xd(c,w,!1);for(var u=h.cb.ih(c),p=Math.floor((w.v-u.v)/u.S())*u.S()+u.v;p<w.C;)p>w.v+o&&p<w.C-o&&(n=h.Jh.ms(n,c,a,!0,p)),p+=u.S()}else{if(o==197)return(w=new h.Ea(n.description)).bd(n,!1),O.pj(w,c,a);if(h.ba.zd(o))return(w=new h.Ua(n.description)).pc(n,!0),O.pj(w,c,a)}return O.Py(n,c)},O.Py=function(w,c){if(w==null||c==null||!h.cb.Xc(c))throw h.i.O();if(w.B())return w;var a=w.K();return a==197?(a=new h.Ea(w.description)).bd(w,!1):h.ba.zd(a)?(a=new h.Ua(w.description)).pc(w,!0):a=w,(a=h.Jh.nj(a,c)).B()?a:h.Gg.Tb(c)==1?h.Jh.Hn(a,c,0,a!=w,0):O.IQ(a,c,a!=w)},O.IQ=function(w,c,a){if(!h.cb.Xc(c))throw h.i.O();if(w.B())return w;var n=h.cb.bf(c),o=-180*n;return n*=360,h.Gg.Tb(c)==2&&(n=(o=h.cb.ih(c)).C,n-=o=o.v),h.Jh.Jp(w,o,n,c,a,0,!0)},O}()}(B||(B={})),function(h){h.xY=function(){function O(){}return O.R=function(w){return 0>w?-w:w},O.Mb=function(w,c){return 0<=c?O.R(w):-O.R(w)},O.$=function(w,c){return w==c||O.R(w-c)<=O.EC*(1+(O.R(w)+O.R(c))/2)},O.Dd=function(w){return w==0||O.R(w)<=O.EC},O.Ch=function(w,c){var a=(c=(1-(c=Math.sqrt(1-c)))/(1+c))*c;return w/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*O.zL},O.zL=1.5707963267948966,O.EC=3552713678800501e-30,O}()}(B||(B={})),function(h){var O=function(c){this.Yf=c,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};h.zY=O;var w=function(){function c(a){a===void 0&&(a=null),this.Ej=null,this.Wn=!1,a!==null&&(this.Ej=new O(a))}return c.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},c.prototype.Qf=function(){var a=new c;return this.copyTo(a),a},c.prototype.copyTo=function(a){a.Ej=this.Ej,a.Wn=this.Wn},c.prototype.Lz=function(){this.Wn=!this.Wn},c.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},c.prototype.GJ=function(a){if(0>=a)throw h.i.O();if(a!=this.Fc()){if((a=h.qf.geogtran(a))==null)throw h.i.O("Geogtran not found.");this.Ej=new O(a)}},c.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},c.prototype.pX=function(a){if(a==null)throw h.i.O();var n=null;try{n=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw h.i.O()}this.Ej=new O(n)},c.prototype.Nb=function(a){return a==this||!(!(a instanceof c)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Wn==a.Wn},c.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},c.create=function(a,n){var o=new c;return o.GJ(a),n&&o.Lz(),o},c.pP=function(a,n){var o=new c;return o.pX(a),n&&o.Lz(),o},c}();h.Cx=w}(B||(B={})),function(h){var O=function(){function c(){}return c.construct=function(a,n,o,u){var p=new c;return p.jw=a,p.kw=n,p.MY=o,p.NY=u,p},c.zy=function(a,n){return a.jw==n.jw?a.kw==n.kw?0:a.kw<n.kw?-1:1:a.jw<n.jw?-1:1},c}(),w=function(){function c(){this.tT=[],this.uT=[],this.sp()}return c.fz=function(){return c.eK==null&&(c.eK=new c),c.eK},c.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},c.prototype.dD=function(a){try{var n=[];n=n.sort(O.zy);for(var o=0;o<n.length;o++)a.push(n[o])}catch{}},c}();h.yY=w}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.tD=function(c){this.Hk=c},w.prototype.RM=function(c){this.Gb=c},w.prototype.sD=function(c){this.Bo=c},w.xE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736)},w.vE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736||20>c.I())},w.wE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736||20>c.I())},w}();h.Wk=O}(B||(B={})),function(h){h.ac=function(){function O(){}return O.OT=function(w){var c=new h.Ea;return c.rx(w.gs(),w.js()),c.Aj(w.gs(),w.hs()),c.Aj(w.fs(),w.hs()),c.Aj(w.fs(),w.js()),c},O.Bh=function(w,c){return w===null?null:h.Gx.local().W(w,c,null)},O.fY=function(w,c){var a=h.Ih.local();return w=new h.$c(w),a.W(w,c,null).next()},O.km=function(w,c,a){return h.mp.local().W(w,c,a,null)},O.gp=function(w,c,a){return h.Jx.local().W(w,c,a,null)},O.RX=function(w,c,a){var n=h.Jx.local();for(w=new h.$c(w),c=new h.$c(c),a=n.W(w,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},O.Nb=function(w,c,a){return h.fj.local().W(3,w,c,a,null)},O.OP=function(w,c,a){return h.fj.local().W(4,w,c,a,null)},O.MS=function(w,c,a){var n=h.Zj.local();for(w=new h.$c(w),c=new h.$c(c),a=n.W(w,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},O.LP=function(w,c,a){var n=h.mp.local();for(w=new h.$c(w),c=new h.$c(c),a=n.W(w,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},O.Fa=function(w,c,a){return h.Zj.local().W(w,c,a,null)},O.LS=function(w,c,a){if((w=h.Zj.local().W(w,c,a,null,1))===null)return[];if(w.K()===550){for(c=[],a=0;a<w.xa;a++)c.push(w.FR(a));return c}return w.K()===33?[w]:[]},O.mY=function(w,c,a){return h.fj.local().W(2,w,c,a,null)},O.contains=function(w,c,a){return h.fj.local().W(1,w,c,a,null)},O.wP=function(w,c,a){return h.fj.local().W(16,w,c,a,null)},O.touches=function(w,c,a){return h.fj.local().W(8,w,c,a,null)},O.yU=function(w,c,a){return h.fj.local().W(32,w,c,a,null)},O.OS=function(w,c,a){return h.fj.local().W(1073741824,w,c,a,null)},O.tB=function(w,c,a,n){return h.uL.local().W(w,c,a,n,null)},O.ub=function(w,c,a,n){var o=null;if(a!=null){if(o=a.Id(),n!=null&&o.Fc()!=n.Fc()&&o.pd!=n.pd)throw h.i.Zk()}else if(n!=null)throw h.i.O();return w=h.lL.local().W(w,c,null),o!==null&&n!==null&&(w=h.Uc.Ph(w,o,n)),w},O.clip=function(w,c,a){return h.fL.local().W(w,h.l.construct(c.gs(),c.js(),c.fs(),c.hs()),a,null)},O.fl=function(w,c,a){if(w==null||c==null)return null;for(w=h.hL.local().W(!0,w,c,a,null),c=[];(a=w.next())!=null;)a.B()||c.push(a);return c.slice(0)},O.HN=function(w,c,a,n,o,u,p,y){if(o===!0)return O.IN(w,c,a,n,u,p,y);if(o=a,c!=null){if(p=c.Id(),n!=null&&p.Fc()!=n.Fc()){if(p.pd!=n.pd)throw h.i.Zk();o=[],h.Uc.SE(a,a.length,n,p,o)}}else if(n!=null)throw h.i.O();if(a=h.vC.local(),u){for(w=new h.$c(w),c=a.W(w,c,o,u,null),w=[];(u=c.next())!=null;)w.push(u);u=w.slice(0)}else for(u=[],n=0;n<w.length;n++)u[n]=a.W(w[n],c,o[n],null);return u},O.IN=function(w,c,a,n,o,u,p){if(c===null||(n==null&&(n=c.Fc()!==4326?c.Id():h.Uc.ah(9001)),n.pd!==0))throw h.i.O();if(h.Uc.SE(a,a.length,n,h.Uc.ah(9001),a),n=h.AC.local(),o){for(w=new h.$c(w),c=n.W(w,c,u,a,p,!1,o,null),a=[];(u=c.next())!=null;)a.push(u);o=a.slice(0)}else{o=[];for(var y=0;y<w.length;y++)o[y]=n.W(w[y],c,u,a[y],p,!1,null)}return o},O.buffer=function(w,c,a,n,o,u,p){var y=a;if(o===!1){if(c!=null){if(o=c.Id(),n!=null&&o.Fc()!=n.Fc()){if(o.pd!=n.pd)throw h.i.Zk();y=h.Uc.Ph(a,n,o)}}else if(n!=null)throw h.i.O();w=h.vC.local().W(w,c,y,null)}else{if(c===null||(n==null&&(n=c.Fc()!==4326?c.Id():h.Uc.ah(9001)),n.pd!==0))throw h.i.O();y=h.Uc.Ph(a,n,h.Uc.ah(9001)),w=h.AC.local().W(w,c,u,y,p,!1,null)}return w},O.wU=function(w,c,a,n,o,u,p){if(c!=null){var y=c.Id();if(p!=null&&y.Fc()!=p.Fc()){if(y.pd!=p.pd)throw h.i.Zk();a=h.Uc.Ph(a,p,y)}}else if(p!=null)throw h.i.O();for(w=new h.$c(w),c=h.DC.local().W(w,c,a,n,o,u,null),a=[];(n=c.next())!=null;)a.push(n);return a.slice(0)},O.offset=function(w,c,a,n,o,u,p){if(c!=null){var y=c.Id();if(p!=null&&y.Fc()!=p.Fc()){if(y.pd!=p.pd)throw h.i.Zk();a=h.Uc.Ph(a,p,y)}}else if(p!=null)throw h.i.O();return h.DC.local().W(w,c,a,n,o,u,null)},O.dP=function(w){return h.xC.local().W(w,null)},O.eP=function(w,c){var a=h.xC.local();for(w=new h.$c(w),c=a.W(w,c,null),a=[];(w=c.next())!=null;)a.push(w);return a},O.iz=function(w,c,a){return h.Hx.local().iz(w,c,a)},O.jz=function(w,c){return h.Hx.local().jz(w,c)},O.kz=function(w,c,a,n){return h.Hx.local().kz(w,c,a,n)},O.$B=function(w,c){return h.$l.local().W(w,c,!1,null)},O.ZS=function(w,c){return h.$l.local().ts(w,c,null)},O.LQ=function(w,c,a,n,o){var u=h.zC.local();if(c!=null){if(c=c.Id(),o!=null&&c.Fc()!=o.Fc()){if(c.pd!=o.pd)throw h.i.Zk();a=h.Uc.Ph(a,o,c)}}else if(o!=null)throw h.i.O();return u.W(w,a,n,null)},O.Sr=function(w,c,a,n){var o=h.Zl.local();if(c!=null){if(c=c.Id(),n!=null&&c.Fc()!=n.Fc()){if(c.pd!=n.pd)throw h.i.Zk();a=h.Uc.Ph(a,n,c)}}else if(n!=null)throw h.i.O();return o.W(w,a,null)},O.Ry=function(w,c,a,n,o){o===void 0&&(o=0);var u=h.nL.local();if(o==4||o!==0)throw h.i.Fe();if(n!==null){if(n.pd!==0)throw h.i.O("Unit must be a linear unit type");a=h.Uc.Ph(a,n,h.Uc.ah(9001))}return u.W(w,a,c,o,null)},O.RQ=function(w,c,a,n){if(w===null)return 0;if(n==4||n!==0)throw h.i.Fe();if(w.K()==197)w=O.OT(w);else if(w.K()!=1736)return 0;if(n=h.cb.tc(c),w=h.cb.Bh(w,c,n),w=h.PK.SQ([w])[0],a!==null){if(a.pd!==2)throw h.i.O("Unit must be a area unit type");w=h.Uc.Ph(w,h.Uc.ah(109404),a)}return w},O.UQ=function(w,c,a,n){if(w=h.qL.local().W(w,c,n,null),a!==null){if(a.pd!==0)throw h.i.O("Unit must be a linear unit type");w=h.Uc.Ph(w,h.Uc.ah(9001),a)}return w},O.EU=function(w,c,a){if(w===null)return 0;var n=null;if(c!=null){if((n=c.Id()).pd==0&&(n=h.Uc.WF(n))==null&&a!==null)throw h.i.O();if(a!=null&&n.Fc()!=a.Fc()&&n.pd!=a.pd)throw h.i.Zk()}else if(a!=null)throw h.i.O();return w.K()==1736||w.K()==197?(w=w.He(),a!==null?h.Uc.Ph(w,n,a):w):0},O.FU=function(w,c,a){if(w===null||w.B()||1>w.Eb())return 0;var n=null;if(c!=null){if(n=c.Id(),a!=null&&n.Fc()!=a.Fc()&&n.pd!=a.pd)throw h.i.Zk()}else if(a!=null)throw h.i.O();w.K()==1736||w.K()==197?c=w.ng():h.ba.zd(w.K())?(c=new h.Ua(w.description)).pc(w,!0):c=w,w=0,c=c.Ha();for(var o=new h.h,u=new h.h;c.ab();)for(;c.Ia();){var p=c.ia();p.$p(o),p.Vr(u),w+=h.h.ub(o,u)}return n!==null&&a!==null&&(w=h.Uc.Ph(w,n,a)),w},O.aP=function(w){return w.points!==void 0?O.hS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?O.gG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?O.gG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?O.iS(w):w.xmin!==void 0?O.gS(w):null},O.iS=function(w){if(w.x==null||w.x=="NaN")return new h.Ta;var c=new h.Ta(w.x,w.y);return w.z!==void 0&&w.z!==null&&c.sX(w.z),w.m!==void 0&&w.m!==null&&c.cX(w.m),c},O.gS=function(w){if(w.xmin==null||w.xmin=="NaN")return new h.Hh;var c=new h.Hh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&c.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&c.setInterval(2,0,w.mmin,w.mmax),c},O.hS=function(w,c,a){var n=0,o=new h.ee,u=3*w.points.length;u%2!=0&&u++,2>u&&(u=2);var p=h.P.truncate(3*w.points.length/2);4>p?p=4:16>p&&(p=16),u=h.Zc.Fn(u,0);var y=h.Zc.Fn(p);p=h.Zc.Fn(p);for(var g=0;g<w.points.length;g++)u.write(2*g,w.points[g][0]),u.write(2*g+1,w.points[g][1]),y.write(g,c||a?w.points[g][2]:NaN),p.write(g,a&&c?w.points[g][3]:NaN),n++;return n!=0&&(o.resize(n),o.kn(0,u)),c&&(o.se(1),o.kn(1,y)),a&&(o.se(2),o.kn(2,c==0?y:p)),o.Qc(16777215),o},O.gG=function(w,c,a,n){var o=0,u=2;if(n=="P"){var p=new h.Ea;o=1,u=3}else p=new h.Ua;for(var y=h.Zc.Qh(0),g=h.Zc.Or(0),b=0,S=0,$=[],I=[],C=0;C<w.length;C++){var R=w[C].length;if($[C]=!1,n==="P"&&w[C][0][0]===w[C][w[C].length-1][0]&&w[C][0][1]===w[C][w[C].length-1][1]){var L=a==0||w[C][0][3]===w[C][w[C].length-1][3]||w[C][0][3]===void 0&&w[C][w[C].length-1][3]===void 0;(c==0||w[C][0][2]===w[C][w[C].length-1][2]||w[C][0][2]===void 0&&w[C][w[C].length-1][2]===void 0)&&L&&($[C]=!0,--R)}R>=u?(I[C]=!1,S+=1,y.add(b),g.add(o),b+=R):I[C]=!0}for((n=3*b)%2!=0&&n++,2>n&&(n=2),4>(C=h.P.truncate(3*b/2))?C=4:16>C&&(C=16),n=h.Zc.Fn(n,0),o=h.Zc.Fn(C),u=h.Zc.Fn(C),C=R=0;C<w.length;C++)if(I[C]===!1)for(L=0;L<w[C].length;L++){var N=!1;L===w[C].length-1&&$[C]===!0&&(N=!0),N||(n.write(2*R,w[C][L][0]),n.write(2*R+1,w[C][L][1]),o.write(R,c||a?w[C][L][2]:NaN),u.write(R,a&&c?w[C][L][3]:NaN),R++)}return b!=0&&(w=p,y.resize(S),g.resize(S),0<b&&(y.add(b),g.add(0)),w.kn(0,n),w.KJ(g),w.LJ(y)),c&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,c==0?o:u)),p.Qc(16777215),p},O}()}(B||(B={})),function(h){h.Dx=function(){function O(){}return O.dr=function(w){var c,a=0,n=w.length,o=w[0];for(c=0;c<n-1;c++){var u=w[c+1];a+=(u[0]-o[0])*(u[1]+o[1]),o=u}return 0<=a},O.rotate=function(w,c,a){c=c*Math.PI/180;var n=Math.cos(c),o=Math.sin(c);if(w.paths!==void 0){c={paths:[]};for(var u=0;u<w.paths.length;u++){for(var p=w.paths[u],y=[],g=0;g<p.length;g++){var b=p[g].slice(0);y.push(b);var S=n*(p[g][0]-a.x)-o*(p[g][1]-a.y)+a.x,$=o*(p[g][0]-a.x)+n*(p[g][1]-a.y)+a.y;b[0]=S,b[1]=$}c.paths.push(y),w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM)}return c}if(w.rings!==void 0){for(c={rings:[]},u=0;u<w.rings.length;u++){p=w.rings[u],y=[];var I=O.dr(p);for(g=0;g<p.length;g++)b=p[g].slice(0),y.push(b),S=n*(p[g][0]-a.x)-o*(p[g][1]-a.y)+a.x,$=o*(p[g][0]-a.x)+n*(p[g][1]-a.y)+a.y,b[0]=S,b[1]=$;O.dr(y)!==I&&y.reverse(),c.rings.push(y),w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM)}return c}if(w.x!==void 0)return c={x:n*(w.x-a.x)-o*(w.y-a.y)+a.x,y:o*(w.x-a.x)+n*(w.y-a.y)+a.y},w.z!==void 0&&(c.z=w.z),w.m!==void 0&&(c.m=w.m),w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM),c;if(w.points!==void 0){for(c={points:[]},u=w.points,g=0;g<u.length;g++)(p=u[g].slice(0))[0]=n*(u[g][0]-a.x)-o*(u[g][1]-a.y)+a.x,p[1]=o*(u[g][0]-a.x)+n*(u[g][1]-a.y)+a.y,c.points.push(p);return w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM),c}return null},O.EQ=function(w,c){if(w.paths!==void 0){for(var a={paths:[]},n=0;n<w.paths.length;n++){for(var o=w.paths[n],u=[],p=0;p<o.length;p++){var y=o[p].slice(0);u.push(y);var g=c.x-o[p][0];y[0]=o[p][0]+2*g}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},n=0;n<w.rings.length;n++){o=w.rings[n];var b=O.dr(o);for(u=[],p=0;p<o.length;p++)y=o[p].slice(0),u.push(y),g=c.x-o[p][0],y[0]=o[p][0]+2*g;O.dr(u)!==b&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return g=c.x-w.x,a={x:w.x+2*g,y:w.y},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},n=w.points,p=0;p<n.length;p++)o=n[p].slice(0),g=c.x-o[0],o[0]+=2*g,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),g=c.x-w.xmin,a.xmax=w.xmin+2*g,g=c.x-w.xmax,a.xmin=w.xmax+2*g,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},O.FQ=function(w,c){if(w.paths!==void 0){for(var a={paths:[]},n=0;n<w.paths.length;n++){for(var o=w.paths[n],u=[],p=0;p<o.length;p++){var y=o[p].slice(0);u.push(y);var g=c.y-o[p][1];y[1]=o[p][1]+2*g}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},n=0;n<w.rings.length;n++){o=w.rings[n];var b=O.dr(o);for(u=[],p=0;p<o.length;p++)y=o[p].slice(0),u.push(y),g=c.y-o[p][1],y[1]=o[p][1]+2*g;O.dr(u)!==b&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return g=c.y-w.y,a={y:w.y+2*g,x:w.x},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},n=w.points,p=0;p<n.length;p++)o=n[p].slice(0),g=c.y-o[1],o[1]+=2*g,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),g=c.y-w.ymin,a.ymax=w.ymin+2*g,g=c.y-w.ymax,a.ymin=w.ymax+2*g,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},O}()}(B||(B={})),function(h){h.UK=function(){function O(){}return O.Kg=function(w,c){switch(c==null&&(c=h.fe.pg()),w){case 33:return new h.Ta(c);case 322:return new h.zb(c);case 197:return new h.Hh(c);case 550:return new h.ee(c);case 1607:return new h.Ua(c);case 1736:return new h.Ea(c);default:throw h.i.ga("invalid argument.")}},O}()}(B||(B={})),function(h){var O=function(){function w(c,a){this.Qe=h.ja.rf(c,-1),this.va=new h.cu,this.yl=a}return w.prototype.vW=function(c){this.va.Bt(Math.min(this.Qe.size,c)),this.va.hn(c)},w.prototype.addElement=function(c,a){if(a===void 0)return this.$M(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,c)},w.prototype.$M=function(c){var a=this.yl.ez(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,c)},w.prototype.kd=function(c,a){if(a===void 0)this.FP(c);else{a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==c?(this.va.kd(n,u,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):u=o,o=p}}},w.prototype.FP=function(c){var a=this.yl.ez(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==c?(this.va.kd(n,u,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):u=o,o=p}},w.prototype.lR=function(c){return c=h.P.truncate(c%this.Qe.size),(c=this.Qe.get(c))==-1?-1:this.va.sc(c)},w.prototype.zR=function(c){return this.va.lb(c)},w.prototype.wd=function(c){var a=this.yl.ez(this.ka(c));a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){if(o==c)return this.va.kd(n,u,o),void(this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1)));u=o,o=this.va.lb(o)}throw h.i.O()},w.prototype.ka=function(c){return this.va.ka(c)},w.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},w.prototype.size=function(){return this.va.OF()},w}();h.ZK=O}(B||(B={})),function(h){var O=function(){function w(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.mT=!1,this.ke=-1}return w.prototype.hl=function(c){this.Ni.kd(c)},w.prototype.Rw=function(){return this.Ni.De()},w.prototype.dv=function(c){this.va.kd(c)},w.prototype.VA=function(){return this.va.De()},w.prototype.RB=function(c,a){this.Ni.T(c,1,a)},w.prototype.fx=function(c,a){this.Ni.T(c,2,a)},w.prototype.bX=function(c,a){this.Ni.T(c,3,a)},w.prototype.PB=function(c,a){this.va.T(c,4,a)},w.prototype.eX=function(c,a){this.va.T(c,3,a)},w.prototype.OJ=function(c,a){this.va.T(c,2,a)},w.prototype.Rh=function(c){var a=this.VA();return this.va.T(a,3,this.ke),this.va.T(a,4,0),this.va.T(a,5,c),this.ke!=-1&&this.OJ(this.ke,a),this.ke=a},w.prototype.eh=function(c){this.GE(c);var a=this.va.U(c,2),n=this.va.U(c,3);return a!=-1?this.eX(a,n):this.ke=n,n!=-1&&this.OJ(n,a),this.dv(c),n},w.prototype.Bt=function(c){this.va.Ee(c)},w.prototype.KF=function(c){return this.va.U(c,5)},w.prototype.aX=function(c,a){this.va.T(c,5,a)},w.prototype.addElement=function(c,a){return this.oS(c,a)},w.prototype.oS=function(c,a){var n=this.Rw();this.fx(n,-1),this.va.U(c,0)==-1&&this.va.T(c,0,n);var o=this.va.U(c,1);return this.RB(n,o),o!=-1&&this.fx(o,n),this.va.T(c,1,n),this.setData(n,a),this.PB(c,this.ds(c)+1),this.mT&&this.bX(n,c),n},w.prototype.kd=function(c,a){var n=this.xe(a),o=this.lb(a);return n!=-1?this.fx(n,o):this.va.T(c,0,o),o!=-1?this.RB(o,n):this.va.T(c,1,n),this.hl(a),this.PB(c,this.ds(c)-1),o},w.prototype.hn=function(c){this.Ni.Ee(c)},w.prototype.getData=function(c){return this.Ni.U(c,0)},w.prototype.setData=function(c,a){this.Ni.T(c,0,a)},w.prototype.lb=function(c){return this.Ni.U(c,2)},w.prototype.xe=function(c){return this.Ni.U(c,1)},w.prototype.sc=function(c){return this.va.U(c,0)},w.prototype.Gc=function(c){return this.va.U(c,1)},w.prototype.clear=function(){for(var c=this.ke;c!=-1;)c=this.eh(c)},w.prototype.GE=function(c){for(var a=this.Gc(c);a!=-1;){var n=a;a=this.xe(n),this.hl(n)}this.va.T(c,0,-1),this.va.T(c,1,-1),this.PB(c,0)},w.prototype.B=function(){return this.Ni.size==0},w.prototype.OF=function(){return this.Ni.size},w.prototype.ds=function(c){return this.va.U(c,4)},w.prototype.lz=function(c){return this.va.U(c,3)},w}();h.lp=O}(B||(B={})),function(h){var O=function(){function w(c){c===void 0?(this.vg=new h.ad(2),this.va=new h.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new h.ad(2),this.va=new h.ad(c?4:2),this.ke=-1,this.Sv=c)}return w.prototype.hl=function(c){this.vg.kd(c)},w.prototype.Rw=function(){return this.vg.De()},w.prototype.dv=function(c){this.va.kd(c)},w.prototype.VA=function(){return this.va.De()},w.prototype.Rh=function(){var c=this.VA();return this.Sv&&(this.va.T(c,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,c),this.ke=c),c},w.prototype.eh=function(c){for(var a=this.sc(c);a!=-1;){var n=a;a=this.lb(a),this.hl(n)}this.Sv&&(a=this.va.U(c,2),n=this.va.U(c,3),a!=-1?this.va.T(a,3,n):this.ke=n,n!=-1&&this.va.T(n,2,a)),this.dv(c)},w.prototype.Bt=function(c){this.va.Ee(c)},w.prototype.addElement=function(c,a){var n=this.va.U(c,1),o=this.Rw();return n!=-1?this.vg.T(n,1,o):this.va.T(c,0,o),this.va.T(c,1,o),this.vg.T(o,0,a),o},w.prototype.hn=function(c){this.vg.Ee(c)},w.prototype.kd=function(c,a,n){a!=-1?(this.vg.T(a,1,this.vg.U(n,1)),this.va.U(c,1)==n&&this.va.T(c,1,a)):(this.va.T(c,0,this.vg.U(n,1)),this.va.U(c,1)==n&&this.va.T(c,1,-1)),this.hl(n)},w.prototype.Cy=function(c,a){var n=this.va.U(c,1),o=this.va.U(a,0);o!=-1&&(n!=-1?this.vg.T(n,1,o):this.va.T(c,0,o),this.va.T(c,1,this.va.U(a,1))),this.Sv&&(c=this.va.U(a,2),n=this.va.U(a,3),c!=-1?this.va.T(c,3,n):this.ke=n,n!=-1&&this.va.T(n,2,c)),this.dv(a)},w.prototype.ka=function(c){return this.vg.U(c,0)},w.prototype.Uj=function(c,a){this.vg.T(c,0,a)},w.prototype.lb=function(c){return this.vg.U(c,1)},w.prototype.sc=function(c){return this.va.U(c,0)},w.prototype.Ln=function(c){return this.ka(this.sc(c))},w.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},w.prototype.B=function(){return this.vg.size==0},w.prototype.OF=function(){return this.vg.size},w.prototype.lz=function(c){return this.va.U(c,3)},w}();h.cu=O}(B||(B={})),function(h){h.ua=function(){function O(){}return O.Xd=function(w,c,a){return c=c.zr(),w=w!=null&&w.Yd!==void 0?w.Yd(0):0,a&&(c*=4,w*=1.1),Math.max(w,c)},O.Gr=function(w){return 2*Math.sqrt(2)*w},O.mN=function(w){return Math.sqrt(2)*w},O.mj=function(w,c,a){var n=new h.l;return c.A(n),O.Xd(w,n,a)},O.rE=function(w,c,a){return c=c.Vg(1,0).zr(),w=w!=null?w.Yd(1):0,a&&(c*=4,w*=1.1),Math.max(w,c)},O.ov=function(w,c){var a=new h.l;return w.yc(a),w=new h.l,c.yc(w),a.$b(w),a},O.TN=function(w){var c=new h.l;if(w.yc(c),c.B())return null;var a=new h.fu(c,8),n=-1,o=new h.l,u=!1;do for(var p=0,y=w.ea();p<y;p++){if(w.Tj(p,o),(n=a.Ez(p,o,n))==-1){if(u)throw h.i.ga("internal error");w.Ap(c,!1),u=!0,a.reset(c,8);break}u=!1}while(u);return a},O.iE=function(w){var c=new h.l;w.yc(c);for(var a=new h.fu(c,8),n=-1,o=w.Ha(),u=new h.l,p=!1;o.ab();)for(;o.Ia();){var y=o.ia(),g=o.xb();if(y.A(u),(n=a.Ez(g,u,n))==-1){if(p)throw h.i.Ra();w.Ap(c,!1),p=!0,a.reset(c,8),o.aj();break}}return a},O.lj=function(w,c){var a=new h.l;w.yc(a);for(var n=new h.fu(a,8),o=-1,u=new h.l,p=w.Ha(),y=!1;p.ab();)for(;p.Ia();){var g=p.ia(),b=p.xb();if(g.A(u),u.isIntersecting(c)&&(o=n.Ez(b,u,o))==-1){if(y)throw h.i.ga("internal error.");w.Ap(a,!1),y=!0,n.reset(a,8),p.aj();break}}return n},O.jE=function(w,c){for(var a=new h.fu(c,8),n=new h.h,o=!1,u=new h.l,p=0;p<w.I();p++)if(w.D(p,n),c.contains(n)&&(u.L(n),a.xj(p,u)==-1)){if(o)throw h.i.Ra();o=!0,p=new h.l,w.Ap(p,!1),a.reset(p,8),p=-1}return a},O.gR=function(w,c,a){var n=new h.l,o=new h.l;w.yc(n),c.yc(o),n.X(a,a),o.X(a,a);var u=new h.l;u.L(n),u.Fa(o),w=w.Ha(),c=c.Ha();var p=new h.sC;p.WB(a);var y=!1;for(p.kK();w.ab();)for(;w.Ia();)w.ia().A(n),n.isIntersecting(u)&&(y=!0,(a=new h.l).L(n),p.DD(w.xb(),a));if(p.dF(),!y)return null;for(n=!1,p.jK();c.ab();)for(;c.Ia();)c.ia().A(o),o.isIntersecting(u)&&(n=!0,(a=new h.l).L(o),p.zD(c.xb(),a));return p.cF(),n?p:null},O.hR=function(w,c,a,n,o){var u=w.K(),p=c.K(),y=new h.l,g=new h.l;w.yc(y),c.yc(g),y.X(a,a),g.X(a,a);var b=new h.l;b.L(y),b.Fa(g);var S=new h.sC;S.WB(a);var $=!1;S.kK();var I=0;for(a=w.ea();I<a;I++)n&&u==1736&&!w.Gv(I)||(w.Tj(I,y),y.isIntersecting(b)&&($=!0,S.DD(I,y)));if(S.dF(),!$)return null;for(w=!1,S.jK(),n=0,a=c.ea();n<a;n++)o&&p==1736&&!c.Gv(n)||(c.Tj(n,g),g.isIntersecting(b)&&(w=!0,S.zD(n,g)));return S.cF(),w?S:null},O.Tu=function(w,c,a){if(w!=c)for(var n=0;n<a;n++)w[n]==null?w[n]=h.h.cl(c[n]):w[n].N(c[n])},O.Ey=function(w,c,a,n){var o=0;for(n+=0;o<n;a++,o++)w[o]==null&&(w[o]=[0,0]),w[o][0]=c[a].x,w[o][1]=c[a].y},O.Dy=function(w,c,a,n){var o=c,u=0;for(c=n+c;o<c;u++,o++)w[o]==null?w[o]=h.h.construct(a[u][0],a[u][1]):w[o].na(a[u][0],a[u][1])},O.fP=function(w,c,a){if(w!=c)for(var n=0;n<a;n++)w[n]==null?w[n]=new h.Ta(c[n]):c[n].copyTo(w[n])},O.qE=function(w,c,a,n){var o=0;return w!=null&&(o=w.Yd(0),n&&!a||w==null||(o+=1.01*w.pz(0))),a&&(c*=4,o*=1.01),Math.max(o,c)},O.oy=function(w,c,a){return O.qE(w,c.zr(),a,!1)},O.bO=function(w,c){var a=new h.l;return c.A(a),O.oy(w,a,!0)},O.py=function(w,c){return O.qE(w,c.zr(),!1,!0)},O.Ju=function(w,c){var a=new h.l;return c.A(a),O.py(w,a)},O.vG=function(w,c,a,n){n*=n;var o=new h.h;if(o.vc(w,c),(w=new h.h).vc(a,c),c=o.Uk(),a=w.Uk(),c<=n&&a<=n)return!0;var u=h.mc.ox(o.yi(w));return(u<=n*c||u<=n*a)&&0<=o.Sh(w)},O.ZJ=function(w,c,a,n){for(var o=0;o<c;o++){var u=w[o].y,p=h.P.Tk(u,a,n);p!=u&&(w[o].y=p)}},O}()}(B||(B={})),function(h){var O,w,c=function(){function u(p){this.Za=p}return u.prototype.compare=function(p,y,g){p=p.ka(g),g=this.Za.qk(y);var b=this.Za.qk(p);return g<b?-1:g==b?o.iq(y)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(y)?1:0:1},u}(),a=function(){function u(p){this.Za=p}return u.prototype.qr=function(p,y,g){this.Za.CX(g,p,y)},u.prototype.bq=function(p){return this.Za.qk(p)},u}();(w=O||(O={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var n=function(){function u(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.tg=[0,0]}return u.prototype.Zi=function(p,y){this.Si.pa=p.pa-y,this.Si.wa=p.wa+y,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.zB=function(p,y,g){if(p>y)throw h.i.O();this.Si.pa=p-g,this.Si.wa=y+g,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.Wo=function(p,y){this.Si.pa=p-y,this.Si.wa=p+y,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.ie)return-1;for(var p=!0;p;)switch(this.tg[this.ie]){case 1:p=this.AU();break;case 2:p=this.BU();break;case 3:p=this.CU();break;case 4:p=this.DU();break;case 5:p=this.AW();break;case 6:p=this.fT();break;case 7:p=this.oN();break;case 0:p=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},u.construct=function(p){var y=new u;return y.Za=p,y.ji.Jb(20),y.ie=-1,y},u.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},u.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0):p<this.Si.pa?(p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),!0)},u.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.nk(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.pk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},u.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},u.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},u.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},u.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},u}();h.AY=n;var o=function(){function u(p){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=p,this.nq=this.Uv=!1}return u.prototype.mr=function(){this.Pk(!0)},u.prototype.Dr=function(p,y){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(p,y))},u.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},u.prototype.xj=function(p){if(!this.Uf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var y=this.Hj.length;if(this.dA){var g=new h.ja(0);g.Jb(2*y),this.XI(g),this.bi.Jb(2*y),this.bi.resize(0),this.WI(g),this.Mm.resize(y,-1),this.Mm.Yj(-1,0,y),this.dA=!1}else this.Mm.Yj(-1,0,y);this.kf=this.Vu()}y=this.kG(p<<1,this.kf),g=this.bg.addElement(1+(p<<1),this.rz(y)),this.QJ(y,g),this.Mm.set(p,y),this.aw++},u.prototype.remove=function(p){if(!this.Uf||!this.nq)throw h.i.ga("invalid call");var y=this.Mm.get(p);if(y==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var g=this.rz(y),b=this.bg.UR(g);this.bg.wd(this.rR(y),g),this.bg.wd(this.OR(y),g),(p=this.bg.size(g))==0&&(this.bg.HP(g),this.UJ(b,-1)),this.Gj.kd(y),g=this.PF(b);var S=this.sj(b),$=this.nk(b);for(y=0;!(0<p||b==this.kf||S!=-1&&$!=-1);)b==this.sj(g)?S!=-1?(this.Qk(g,S),this.Wj(S,g),this.Qk(b,-1)):$!=-1?(this.Qk(g,$),this.Wj($,g),this.Sk(b,-1)):this.Qk(g,-1):S!=-1?(this.Sk(g,S),this.Wj(S,g),this.Qk(b,-1)):$!=-1?(this.Sk(g,$),this.Wj($,g),this.Sk(b,-1)):this.Sk(g,-1),this.Wj(b,-1),y++,b=g,p=(g=this.pk(b))!=-1?this.bg.size(g):0,S=this.sj(b),$=this.nk(b),g=this.PF(b)},u.prototype.reset=function(){if(!this.Uf||!this.nq)throw h.i.O("invalid call");this.Pk(!1)},u.prototype.size=function(){return this.aw},u.prototype.getIterator=function(){return n.construct(this)},u.prototype.XI=function(p){for(var y=this.Hj.length,g=0;g<2*y;g++)p.add(g);this.DX(p,2*y)},u.prototype.WI=function(p){for(var y=NaN,g=0;g<p.size;g++){var b=p.get(g),S=this.qk(b);S!=y&&(this.bi.add(b),y=S)}},u.prototype.qS=function(){var p=this.Hj.length,y=new h.ja(0);y.Jb(2*p),this.XI(y),this.bi.Jb(2*p),this.bi.resize(0),this.WI(y),this.Gj.Ee(p),this.Vi.hn(2*p);var g=h.Zc.Qh(p);for(g.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<y.size;p++){var b=y.get(p),S=g.get(b>>1);S!=-1?this.QJ(S,this.Vi.addElement(this.rz(S),b)):(S=this.kG(b,this.kf),g.set(b>>1,S))}},u.prototype.kG=function(p,y){var g=y,b=y,S=-1,$=0,I=this.bi.size-1,C=0,R=p>>1,L=NaN,N=NaN,U=!0,W=this.yR(R);for(R=this.vR(R);U;){$<I?(C=$+h.P.truncate((I-$)/2),this.bz(g)==-1&&this.AJ(g,this.bi.get(C),this.bi.get(C+1))):this.bz(g)==-1&&this.AJ(g,this.bi.get($),this.bi.get($));var j=this.Pp(g);if(R<j)y!=-1&&(y==g?(b=g,L=j,N=(y=this.sj(g))!=-1?this.Pp(y):NaN):N>j&&(j<L?this.Qk(b,g):this.Sk(b,g),this.Sk(g,y),this.Uf&&(this.Wj(g,b),this.Wj(y,g)),b=g,L=j,y=-1,N=NaN)),(I=this.sR(g))==-1&&(I=this.Vu(),this.ZW(g,I)),g=I,I=C;else if(W>j)y!=-1&&(y==g?(b=g,L=j,N=(y=this.nk(g))!=-1?this.Pp(y):NaN):N<j&&(j<L?this.Qk(b,g):this.Sk(b,g),this.Qk(g,y),this.Uf&&(this.Wj(g,b),this.Wj(y,g)),b=g,L=j,y=-1,N=NaN)),($=this.PR(g))==-1&&($=this.Vu(),this.jX(g,$)),g=$,$=C+1;else{(U=this.pk(g))==-1&&(U=this.uP(g),this.UJ(g,U));var K=this.aN(U,p);S=this.sP(),this.mX(S,U),this.YW(S,K),g!=y&&(j<L?this.Qk(b,g):this.Sk(b,g),this.Uf&&this.Wj(g,b),y!=-1&&(N<j?this.Qk(g,y):this.Sk(g,y),this.Uf&&this.Wj(y,g))),U=!1}}return S},u.prototype.Vu=function(){return this.ne.De()},u.prototype.uP=function(p){return this.Uf?this.bg.Rr(p):this.Vi.Rh(p)},u.prototype.sP=function(){return this.Gj.De()},u.prototype.Pk=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.bg=new h.$j,this.bg.Xo(new c(this))):this.bg.clear():this.Vi==null?this.Vi=new h.lp:this.Vi.clear(),this.ne==null?(this.Gj=new h.ad(3),this.ne=new h.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},u.prototype.AJ=function(p,y,g){this.SW(p,y),this.TW(p,g)},u.prototype.Pp=function(p){var y=this.bz(p);return y==-1?NaN:(y=this.qk(y))==(p=this.qk(this.bR(p)))?y:.5*(y+p)},u.prototype.SW=function(p,y){this.ne.T(p,0,y)},u.prototype.TW=function(p,y){this.ne.T(p,1,y)},u.prototype.ZW=function(p,y){this.ne.T(p,3,y)},u.prototype.jX=function(p,y){this.ne.T(p,4,y)},u.prototype.UJ=function(p,y){this.ne.T(p,2,y)},u.prototype.Qk=function(p,y){this.ne.T(p,5,y)},u.prototype.Sk=function(p,y){this.ne.T(p,6,y)},u.prototype.Wj=function(p,y){this.ne.T(p,7,y)},u.prototype.mX=function(p,y){this.Gj.T(p,0,y)},u.prototype.aN=function(p,y){return this.Uf?this.bg.addElement(y,p):this.Vi.addElement(p,y)},u.prototype.YW=function(p,y){this.Gj.T(p,1,y)},u.prototype.QJ=function(p,y){this.Gj.T(p,2,y)},u.prototype.ml=function(p){return this.Uf?this.bg.sc(p):this.Vi.sc(p)},u.prototype.bs=function(p){return this.Uf?this.bg.Gc(p):this.Vi.Gc(p)},u.iq=function(p){return(1&p)==0},u.Iv=function(p){return(1&p)==1},u.prototype.bz=function(p){return this.ne.U(p,0)},u.prototype.bR=function(p){return this.ne.U(p,1)},u.prototype.pk=function(p){return this.ne.U(p,2)},u.prototype.sR=function(p){return this.ne.U(p,3)},u.prototype.PR=function(p){return this.ne.U(p,4)},u.prototype.sj=function(p){return this.ne.U(p,5)},u.prototype.nk=function(p){return this.ne.U(p,6)},u.prototype.PF=function(p){return this.ne.U(p,7)},u.prototype.rz=function(p){return this.Gj.U(p,0)},u.prototype.rR=function(p){return this.Gj.U(p,1)},u.prototype.OR=function(p){return this.Gj.U(p,2)},u.prototype.yR=function(p){return this.Hj[p].pa},u.prototype.vR=function(p){return this.Hj[p].wa},u.prototype.DX=function(p,y){this.Cm==null&&(this.Cm=new h.Zt);var g=new a(this);this.Cm.sort(p,0,y,g)},u.prototype.CX=function(p,y,g){var b=this;p.Wd(y,g,function(S,$){var I=b.qk(S),C=b.qk($);return I<C||I==C&&u.iq(S)&&u.Iv($)?-1:1})},u.prototype.qk=function(p){var y=this.Hj[p>>1];return u.iq(p)?y.pa:y.wa},u}();h.ur=o}(B||(B={})),function(h){var O=function(){function w(c){if(c==null)throw h.i.ga("Invalid arguement");this.hf=c;var a=c.iR();a.cS()?c.ef.DG()?this.no=h.ui.PannableFold:this.no=h.ui.Clip:this.no=h.ui.DontClip,a.dS()?c.$f.DG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=a.Lr,this.hH=a.Xu,c=this.hf.nH,this.WG=c.ks(2147483648),this.Wv=c.ks(1073741824)}return w.Bh=function(c,a,n){return a.yw.Bh(c,n)},w.Tt=function(c,a,n,o){return c.yw.Tt(a,n,o)},w.St=function(c,a,n,o){if(n=0>n?a.length:n,(c=c.yw.Tt(a,n,o))==n)return c;for(var u=a=0;u<n;u++){var p=o[u];p.isNaN()||(a<u&&o[a].N(p),a++)}for(;a<n;a++)o[a].Sc();return c},w.transform=function(c,a,n,o,u){if(c.isIdentity())return h.ua.fP(o,a,n),n;for(var p=[],y=0,g=0;g<n;){for(var b=Math.min(p.length,n-g),S=g,$=0;S<b;S++,$++)p[$]==null?p[$]=a[S].D():a[S].D(p[$]);var I=u?w.St(c,p,b,p):w.Tt(c,p,b,p);for($=S=0;S<I;S++,$++)o[g]==null&&(o[g]=new h.Ta(a[g])),o[g].Db(p[$]);g+=b,y+=I}return y},w.prototype.Tt=function(c,a,n){if(this.hf.isIdentity())return c!=n&&h.ua.Tu(n,c,a),a;var o=this.hf.ef,u=this.hf.$f,p=o.Tb(),y=u.Tb();if(p==0&&p===y){var g=o.Sp();return u=g/(u=u.Sp()),(g=new h.Ed).Jt(u,u),g.aY(c,a,n),a}if(g=h.P.Hu(Math.min(a,64)),p==3){var b=o.Li;p=(o=b.hk()).Tb(),n!=c&&h.ua.Tu(n,c,a),h.Ab.bl(b,n,a,!0),b.St(h.dm.forward,n,a),h.Ab.al(b,n,a,!0)}if(p==3||y===3)throw h.i.ga("image: transform_in_place_");if(p==2)this.no==h.ui.Clip?(n!=c&&h.ua.Tu(n,c,a),c=o.ol(),h.Ab.JS(c,o,n,a)):(n!=c&&h.ua.Tu(n,c,a),o.Xc()&&(p=o.Yd(0),b=o.Le(),h.Ab.AX(n,a,b,p),h.Ab.lF(n,a,o,0))),h.Ab.DL(o,n,a,g);else for(p=o.Yd(0),b=o.Le(),o=0;o<a;o++)h.Ab.BX(c[o],b,p,n[o]);for(h.Ab.BL(this.hf,n,a,g),c=0,(y=y==2)?c=u.Bi():isNaN(this.Dm)||(c=this.Dm),y&&this.Sm!=h.ui.Clip||h.Ab.lF(n,a,u.tc(),c),y&&(h.Ab.tG(n,a,u,this.Sm),h.Ab.CL(u,n,a,g)),c=a,o=0;o<a;++o)n[o].isNaN()&&c--;return c},w.prototype.Bh=function(c,a){if(this.hf.isIdentity()||c.B())return c;if(c.K()==33)return this.SI(c);var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb();if(u==0&&u==p)return a=n.Sp(),a/=o=o.Sp(),(o=new h.Ed).Jt(a,a),(c=h.ba.kg(c)).Pc(o),c;switch(c.K()){case 1607:case 1736:c=this.QI(c,a);break;case 550:c=this.aW(c,a);break;case 197:c=this.$V(c,a);break;default:throw h.i.ga("")}return c},w.prototype.SI=function(c){var a=c.D(),n=[];return n[0]=a,this.Tt(n,1,n),(c=new h.Ta(c)).Db(n[0]),c},w.prototype.QI=function(c,a){if(c.vm())throw h.i.ga("curves not supported");var n=c.K();if(n==1736)return this.bW(c,a);if(n==1607)return this.cW(c,a);throw h.i.ga("projectMultiPath")},w.prototype.bW=function(c,a){var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb(),y=h.P.Hu(Math.min(c.I(),64)),g=h.Ea.kg(c);u==3&&(u=(n=(c=n.Li).hk()).Tb(),g=c.bl(g,!0),this.yp(c,h.dm.forward,g),g=c.al(g,!0)),c=null,p==3&&(p=(o=(c=o.Li).hk()).Tb());var b=u==2,S=p==2,$=S?o.tc():o,I=!S&&!this.Wv;p=!1;var C=g;if(b){if((C=h.Ab.OI(C,n,this.no,a)).B())return C}else{if(g=new h.l,C.yc(g),u=n.Le(),g.G<u.G||g.H>u.H){var R=h.l.construct(g.v-1,u.G,g.C+1,u.H);if((C=h.ti.Pu(C,R,n,NaN,0,a)).B())return C}g.S()>2*u.S()&&(C=h.Ab.Jp(C,-2*u.S(),2*u.S(),n,!0,0,!0,a))}g=this.hH,(u=!isNaN(g))&&(C=h.Zl.local().W(C,g,a)),R=S?o.mk():null;var L=NaN;b&&(L=n.Bi());var N=o.Yr()!=null;if(this.WG)b&&(h.Ab.wr(n,L,C,y),u&&(b=n.jh(),g*=(L=n.tc().jh())/b)),h.Ab.vr(this.hf,C,I,y),u&&(b=n.tc().jh(),g*=(L=o.tc().jh())/b),n=C;else{var U=new h.Ua(C.description);U.yD(C),b&&(h.Ab.wr(n,L,U,y),u&&(b=n.jh(),g*=(L=n.tc().jh())/b)),h.Ab.vr(this.hf,U,I,y),u&&(b=n.tc().rm(),g*=(L=o.tc().rm())/b),I=NaN,S?(R=o.mk(),I=o.Bi()):isNaN(this.Dm)||(I=this.Dm),b=w.vv(n)|w.vv(o),L=10*$.Yd(0),this.Wv&&(b=3,L=0),n=h.Ab.PQ(C,n,U,$,I,a,b,L)}return N&&(n=h.Ab.SD(n,o,a)),S&&(p||(S=$.Le().S(),n.Vg(0,0).S()>=S-$.Yd(0)&&($=R.getNorthPoleLocation(),S=R.getSouthPoleLocation(),C=R.getNorthPoleGeometry(),R=R.getSouthPoleGeometry(),I=0,C==h.Eg.PE_POLE_POINT&&$!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(I=1),R==h.Eg.PE_POLE_POINT&&S!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(I|=2),I!==0&&(p=!0))),n=h.Ab.Hz(n,o,this.Sm,a),u&&(n=h.Zl.local().W(n,g,a)),h.Ab.Kx(o,n,y)),n.B()||(p&&(n=h.$l.local().W(n,o,!1,a)),c!=null&&(n=c.al(n,!1),this.yp(c,h.dm.reverse,n),n=c.bl(n,!1))),n},w.vv=function(c){if(c.Tb()!=2)return 0;var a=0,n=c.mk();c=n.getNorthPoleLocation();var o=n.getSouthPoleLocation(),u=n.getNorthPoleGeometry();return n=n.getSouthPoleGeometry(),u==h.Eg.PE_POLE_POINT&&c!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),n==h.Eg.PE_POLE_POINT&&o!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},w.prototype.cW=function(c,a){var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb(),y=h.P.Hu(Math.min(c.I(),64)),g=h.Ua.kg(c);u==3&&(u=(n=(c=n.Li).hk()).Tb(),g=c.bl(g,!0),this.yp(c,h.dm.forward,g),g=c.al(g,!0)),c=null,p==3&&(p=(o=(c=o.Li).hk()).Tb());var b=u==2;u=(p=p==2)?o.tc():o;var S=!p&&!this.Wv;if(b){if((g=h.Ab.OI(g,n,this.no,a)).B())return g}else{var $=new h.l;g.yc($);var I=n.Le();if(($.G<I.G||$.H>I.H)&&($=h.l.construct($.v-1,I.G,$.C+1,I.H),(g=h.ti.Pu(g,$,n,NaN,0,a)).B()))return g}var C=NaN;b&&(C=n.Bi()),$=o.Yr()!=null,I=this.hH;var R=!isNaN(I);if(R&&(g=h.Zl.local().W(g,I,a)),this.WG)b&&h.Ab.wr(n,C,g,y),R&&(b=n.jh(),I*=(C=n.tc().jh())/b),h.Ab.vr(this.hf,g,S,y),R&&(b=n.tc().jh(),I*=(C=o.tc().jh())/b),n=g;else{var L=new h.Ua(g.description);L.yD(g),b&&(h.Ab.wr(n,C,L,y),R&&(b=n.jh(),I*=(C=n.tc().jh())/b)),h.Ab.vr(this.hf,L,S,y),R&&(b=n.tc().jh(),I*=(C=o.tc().jh())/b),S=NaN,p?S=o.Bi():isNaN(this.Dm)||(S=this.Dm),b=w.vv(n)|w.vv(o),C=10*u.Yd(0),this.Wv&&(b=3,C=0),n=h.Ab.QQ(g,n,L,u,S,a,b,C)}return $&&(n=h.Ab.SD(n,o,a)),p&&(n=h.Ab.Hz(n,o,this.Sm,a),R&&(n=h.Zl.local().W(n,I,a)),h.Ab.Kx(o,n,y)),n.B()||c!=null&&(n=c.al(n,!1),this.yp(c,h.dm.reverse,n),n=c.bl(n,!1)),n},w.prototype.$V=function(c,a){var n=(c.da()+c.S())/400;return n!=0?(n=h.Zl.local().W(c,n,a),n=this.QI(n,a),a=c.Ja(),n.dn(a)):(a=new h.Ta(c.Kp()),n=this.SI(a),a=c.Ja(),n.B()?a.Pa():(c.copyTo(a),c=n.D(),a.L(c.x,c.y,c.x,c.y))),a},w.prototype.aW=function(c,a){c=h.ba.kg(c);var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb(),y=h.P.Hu(Math.min(c.I(),64));if(u==3){var g=n.Li;u=(n=g.hk()).Tb(),c=g.al(c,!0),this.yp(g,h.dm.forward,c),c=g.bl(c,!0)}if(u==2){if(this.no==h.ui.Clip?c=h.Zj.local().W(c,n.ol(),n,a):n.Xc()&&(u=new h.l,c.yc(u),n.Le().contains(u)||(this.no==h.ui.PannableFold&&(c=h.Ab.nj(c,n)),h.Ab.Lt(c,n.Le(),n.Yd(0),!0),c=h.Ab.Hn(c,n,0,!0,0,a))),c.B())return c;h.Ab.wr(n,0,c,y)}else h.Ab.Lt(c,n.Le(),n.Yd(0),!0);return h.Ab.vr(this.hf,c,!1,y),n=0,u=!1,g=null,p==3&&(u=!0,p=(o=(g=o.Li).hk()).Tb()),(p=p==2)?n=o.Bi():isNaN(this.Dm)||(n=this.Dm),p&&this.Sm!=h.ui.Clip||(c=h.Ab.Hn(c,o.tc(),n,!1,0,a)),p&&(c=h.Ab.Hz(c,o,this.Sm,a),h.Ab.Kx(o,c,y),c.B())||u&&(c=g.al(c,!0),this.yp(g,h.dm.reverse,c),c=g.bl(c,!0)),c},w.prototype.yp=function(c,a,n){var o=n.I();if(o!=0){for(var u=n.vb(0),p=h.P.mg(200,0),y=[],g=0;g<o;){var b=Math.min(100,o-g);u.Xw(2*g,2*b,p,2,!0);for(var S=0;S<b;++S)y[S]=h.h.construct(p[2*g],p[2*g+1]);c.St(a,y,b),g+=b}n.Qc(1993)}},w.Py=function(c,a,n){if(c==null||a==null||!a.Xc())throw h.i.ga("Invalid Arguement");if(c.B())return c;var o=c.K();return o==197?(o=new h.Ea(c.description)).bd(c,!1):h.ba.zd(o)?(o=new h.Ua(c.description)).pc(c,!0):o=c,(o=h.Ab.nj(o,a)).B()?o:h.Ab.Hn(o,a,0,o!=c,0,n)},w.pj=function(c,a,n,o){if(c==null||a==null||!a.Xc())throw h.i.ga("Invalid Arguement");if(c.B())return c;var u=c.K();if(h.ba.Ic(u)){c=h.Ab.nj(c,a),u=new h.l,c.A(u);for(var p=h.ua.oy(a,u,!1),y=a.ih(),g=Math.floor((u.v-y.v)/y.S())*y.S()+y.v;g<u.C;)g>u.v+p&&g<u.C-p&&(c=h.Ab.pS(c,a,n,g)),g+=y.S()}else{if(u==197)return(u=new h.Ea(c.description)).bd(c,!1),w.pj(u,a,n,o);if(h.ba.zd(u))return(u=new h.Ua(c.description)).pc(c,!0),w.pj(u,a,n,o)}return w.Py(c,a,o)},w}();h.du=O}(B||(B={})),function(h){var O=function(w){function c(a,n,o,u){var p=w.call(this)||this;return a===void 0?p.description=h.fe.pg():o===void 0?p.description=a:(p.description=h.fe.pg(),p.UB(a,n),p.Sl(o,u)),p}return Fe(c,w),c.prototype.K=function(){return 322},c.prototype.Rb=function(){var a=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(a*a+n*n)},c.prototype.Di=function(a){var n=this.ta-this.qa,o=this.oa-this.ma;return Math.sqrt(n*n+o*o)<=a},c.prototype.Rn=function(){return!1},c.prototype.lg=function(){var a=new h.h;return a.vc(this.xc(),this.bc()),a},c.YO=function(a,n){return new c(a.x,a.y,n.x,n.y)},c.prototype.dn=function(a){a.Pa(),a.Pf(this.description);var n=new h.l;this.A(n),a.Zo(n),n=1;for(var o=this.description.Ba;n<o;n++)for(var u=this.description.ld(n),p=h.sa.Wa(u);n<p;n++){var y=this.Vg(u,0);a.setInterval(u,0,y)}},c.prototype.A=function(a){a.L(this.ta,this.oa,this.qa,this.ma),a.normalize()},c.prototype.So=function(a){a.Pa(),a.$b(this.ta,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},c.prototype.Pc=function(a){if(a instanceof h.Ed){this.wc();var n=new h.h;n.x=this.ta,n.y=this.oa,a.Gh(n,n),this.ta=n.x,this.oa=n.y,n.x=this.qa,n.y=this.ma,a.Gh(n,n),this.qa=n.x,this.ma=n.y}else this.wc(),(n=new h.Od).x=this.ta,n.y=this.oa,n.z=this.Pd(0,1,0),n=a.hp(n),this.ta=n.x,this.oa=n.y,this.vn(0,1,0,n.z),n.x=this.qa,n.y=this.ma,n.z=this.Pd(1,1,0),n=a.hp(n),this.qa=n.x,this.ma=n.y,this.vn(1,1,0,n.z)},c.prototype.Ja=function(){return new c(this.description)},c.prototype.Sx=function(a,n){return(this.qa-a-(this.ta-a))*(this.ma-n+(this.oa-n))*.5},c.prototype.ux=function(a){return a*this.Rb()},c.prototype.IG=function(a){return a/this.Rb()},c.prototype.yF=function(a){return h.mc.jq(this.ta,this.qa,a)},c.prototype.aR=function(a){return h.mc.jq(this.oa,this.ma,a)},c.prototype.fl=function(a,n){var o=new h.jg;return this.dh(a,n,o),o.get()},c.prototype.dh=function(a,n,o){if(o==null)throw h.i.O();o.Qr(),(o=o.get()).Pf(this.description);var u=new h.h;this.ic(a,u),o.UB(u.x,u.y),this.ic(n,u),o.Sl(u.x,u.y),u=1;for(var p=this.description.Ba;u<p;u++)for(var y=this.description.Fd(u),g=h.sa.Wa(y),b=0;b<g;b++){var S=this.Vc(a,y,b);o.TB(y,b,S),S=this.Vc(n,y,b),o.JB(y,b,S)}},c.prototype.Vc=function(a,n,o){if(n==0)return o==0?this.ic(a).x:this.ic(a).y;switch(h.sa.gz(n)){case 0:return .5>a?this.yv(n,o):this.jv(n,o);case 1:var u=this.yv(n,o);return n=this.jv(n,o),h.mc.jq(u,n,a);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},c.prototype.ge=function(a,n){var o=this.qa-this.ta,u=this.ma-this.oa,p=o*o+u*u;return p==0?.5:(a=((a.x-this.ta)*o+(a.y-this.oa)*u)/p,n||(0>a?a=0:1<a&&(a=1)),a)},c.prototype.fq=function(a,n,o,u){if(a){if((a=this.ma-this.oa)==0)return n==this.ma?-1:0;if(0>(n=(n-this.oa)/a)||1<n)return 0;o!=null&&(o[0]=this.yF(n))}else{if((a=this.qa-this.ta)==0)return n==this.qa?-1:0;if(0>(n=(n-this.ta)/a)||1<n)return 0;o!=null&&(o[0]=this.aR(n))}return u!=null&&(u[0]=n),1},c.prototype.Me=function(a,n){var o=this.ma-this.oa;return o==0?a==this.ma?n:NaN:(a=(a-this.oa)/o,n=this.yF(a),a==1&&(n=this.qa),n)},c.prototype.tu=function(a,n,o){return 0<=this.tp(a.x,a.y,n,o)},c.prototype.xi=function(a,n,o){return 0<=this.tp(a,n,o,!0)},c.prototype.ss=function(a,n){return this.tu(a,n,!1)},c.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var n=this.description.Qq-2;a<n;a++){var o=this.la[a];this.la[a]=this.la[a+n],this.la[a+n]=o}}},c.prototype.wu=function(a,n){(n=h.h.construct(a,n)).sub(this.bc());var o=new h.h;return o.vc(this.xc(),this.bc()),(a=o.yi(n))>(n=8881784197001252e-31*(Math.abs(o.x*n.y)+Math.abs(o.y*n.x)))?-1:a<-n?1:0},c.prototype.tp=function(a,n,o,u){var p=this.ta,y=this.oa,g=a-p,b=n-y;if((g=Math.sqrt(g*g+b*b))<=Math.max(o,6661338147750939e-31*g))return u&&g==0?NaN:0;if(g=a-this.qa,b=n-this.ma,(g=Math.sqrt(g*g+b*b))<=Math.max(o,6661338147750939e-31*g))return u&&g==0?NaN:1;if(g=this.qa-this.ta,b=this.ma-this.oa,0<(u=Math.sqrt(g*g+b*b))){var S=1/u,$=a-p,I=n-y,C=$*(g*=S)+I*(b*=S),R=17763568394002505e-31*(Math.abs($*g)+Math.abs(I*b)),L=g;if(g=-b,b=L,C<-(R=Math.max(o,R))||C>u+R)return NaN;if(Math.abs($*g+I*b)<=Math.max(o,17763568394002505e-31*(Math.abs($*g)+Math.abs(I*b)))&&(.5>=(g=h.P.Tk(C*S,0,1))?(b=this.ta+(this.qa-this.ta)*g,u=this.oa+(this.ma-this.oa)*g):(b=this.qa-(this.qa-this.ta)*(1-g),u=this.ma-(this.ma-this.oa)*(1-g)),h.h.Jy(b,u,a,n)<=o)){if(.5>g){if(h.h.Jy(b,u,p,y)<=o)return 0}else if(h.h.Jy(b,u,this.qa,this.ma)<=o)return 1;return g}}return NaN},c.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.AM(a))},c.prototype.mD=function(a,n,o){var u=o?this.ta:this.qa;o=o?this.oa:this.ma;var p=new h.h;return p.x=a.qa-u,p.y=a.ma-o,!(n.Sh(p)>6661338147750939e-31*n.aD(p))||(p.x=a.ta-u,p.y=a.oa-o,n.Sh(p)<=6661338147750939e-31*n.aD(p))},c.prototype.lD=function(a){var n=new h.h;return n.x=this.qa-this.ta,n.y=this.ma-this.oa,!!this.mD(a,n,!1)&&(n.Uq(),!!this.mD(a,n,!0))},c.IM=function(a,n){var o=a.wu(n.ta,n.oa),u=a.wu(n.qa,n.ma);return!(0>o&&0>u||0<o&&0<u)&&(o=n.wu(a.ta,a.oa),u=n.wu(a.qa,a.ma),!(0>o&&0>u||0<o&&0<u)&&((o=a.Rb())>(u=n.Rb())?a.lD(n):n.lD(a)))},c.GM=function(a,n,o){var u=h.h.construct(NaN,NaN),p=a.qa-a.ta,y=a.ma-a.oa,g=n.qa-n.ta,b=n.ma-n.oa,S=g*y-p*b;if(S==0)return u;var $=8881784197001252e-31*(Math.abs(g*y)+Math.abs(p*b)),I=n.ta-a.ta,C=n.oa-a.oa,R=g*C-I*b,L=R/S,N=Math.abs(S);return L<-(g=(8881784197001252e-31*(Math.abs(g*C)+Math.abs(I*b))*N+$*Math.abs(R))/(S*S)+2220446049250313e-31*Math.abs(L))||L>1+g||(g=(b=p*C-I*y)/S)<-(p=(8881784197001252e-31*(Math.abs(p*C)+Math.abs(I*y))*N+$*Math.abs(b))/(S*S)+2220446049250313e-31*Math.abs(g))||g>1+p||(L=h.P.Tk(L,0,1),p=h.P.Tk(g,0,1),y=a.ic(L),S=n.ic(p),($=new h.h).vc(y,S),$.length()>o&&($.add(y,S),$.scale(.5),L=a.ge($,!1),p=n.ge($,!1),a=a.ic(L),n=n.ic(p),a.sub(n),a.length()>o)||u.na(L,p)),u},c.JM=function(a,n,o,u){var p=0;if((a.ta==n.ta&&a.oa==n.oa||a.ta==n.qa&&a.oa==n.ma)&&(p++,!u))return 1;if(a.qa==n.ta&&a.ma==n.oa||a.qa==n.qa&&a.ma==n.ma){if(++p==2)return 2;if(!u)return 1}return n.xi(a.ta,a.oa,o)||n.xi(a.qa,a.ma,o)||a.xi(n.ta,n.oa,o)||a.xi(n.qa,n.ma,o)?1:u&&p!=0||c.IM(a,n)==0?0:1},c.Yx=function(a,n,o,u,p,y){var g=0,b=a.tp(n.ta,n.oa,y,!1),S=a.tp(n.qa,n.ma,y,!1),$=n.tp(a.ta,a.oa,y,!1),I=n.tp(a.qa,a.ma,y,!1);return isNaN(b)||(u!=null&&(u[g]=b),p!=null&&(p[g]=0),o!=null&&(o[g]=h.h.construct(n.ta,n.oa)),g++),isNaN(S)||(u!=null&&(u[g]=S),p!=null&&(p[g]=1),o!=null&&(o[g]=h.h.construct(n.qa,n.ma)),g++),g==2||isNaN($)||b==0&&$==0||S==0&&$==1||(u!=null&&(u[g]=0),p!=null&&(p[g]=$),o!=null&&(o[g]=h.h.construct(a.ta,a.oa)),g++),g==2||isNaN(I)||b==1&&I==0||S==1&&I==1||(u!=null&&(u[g]=1),p!=null&&(p[g]=I),o!=null&&(o[g]=h.h.construct(n.qa,n.ma)),g++),0<g?(g==2&&u!=null&&u[0]>u[1]&&(a=u[0],u[0]=u[1],u[1]=a,p!=null&&(u=p[0],p[0]=p[1],p[1]=u),o!=null&&(p=h.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),g):(g=c.GM(a,n,y),isNaN(g.x)?0:(o!=null&&(o[0]=a.ic(g.x)),u!=null&&(u[0]=g.x),p!=null&&(p[0]=g.y),1))},c.prototype.$F=function(){return 0},c.prototype.qp=function(){},c.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},c}(h.NC);h.zb=O}(B||(B={})),function(h){var O=function(){function w(){this.Lm=[],this.za=-1}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var c=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),c}return this.Lm=null},w.prototype.VX=function(c){this.Lm.push(c)},w.prototype.re=function(){},w}();h.bL=O}(B||(B={})),function(h){var O;(O=h.NL||(h.NL={}))[O.enumFillRuleOddEven=0]="enumFillRuleOddEven",O[O.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(c){function a(n,o){var u=c.call(this)||this;if(u.yf=!1,u.Gq=null,u.uq=0,u.tq=0,u.Cj=null,u.Og=!1,u.nb=null,u.mb=null,u.Se=null,u.Nj=null,u.Td=null,u.vq=0,u.gb=0,u.zq=0,o===void 0)u.yf=n,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=h.fe.pg();else{if(o==null)throw h.i.O();u.yf=n,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=o}return u.Cj=null,u.gb=0,u}return Fe(a,c),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.Pf(this.description)},a.prototype.rx=function(n,o){var u=new h.h;u.x=n,u.y=o,this.Nt(u)},a.prototype.Nt=function(n){this.Xx(),this.Gq.Db(n),this.Og=!0},a.prototype.nf=function(n){if(n.B())throw h.i.O();this.Ll(n.description),this.Xx(),n.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var n=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),n++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+n),this.fm(o+n),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(n,o){this.Rx(),this.Db(this.xa-1,n,o)},a.prototype.Ei=function(n){this.Rx(),this.Db(this.xa-1,n)},a.prototype.lineTo=function(n){this.Rx(),this.It(this.xa-1,n)},a.prototype.xU=function(n){if(this.wc(),this.yf)throw h.i.Ra();var o=this.ea();if(n>o)throw h.i.Ra();if(this.ec(n)){if(this.mb==null)throw h.i.Ra();var u=this.xa,p=this.Ca(n),y=this.Wc(n);this.fm(this.xa+1),this.oc();for(var g=0,b=this.description.Ba;g<b;g++)if(this.Aa[g]!=null){var S=h.sa.Wa(this.description.Fd(g));this.Aa[g].On(S*y,this.Aa[g],S*p,S,!0,1,S*u)}for(;o>n;o--)u=this.nb.read(o),this.nb.write(o,u+1);this.mb.FE(n,1)}},a.prototype.Cp=function(){if(this.vx(),n===void 0){this.Og=!1;var n=this.ea()-1}var o=this.mb.read(n);this.mb.write(n,1|o),this.Se!=null&&(n=this.Wc(n)-1,this.Se.write(n,1),this.Nj.write(n,-1))},a.prototype.ec=function(n){return(1&this.mb.read(n))!=0},a.prototype.Pn=function(n){if(this.ec(n))return!0;var o=this.Ca(n);return!(o>(n=this.Wc(n)-1))&&(o=this.Oa(o),n=this.Oa(n),o.rb(n))},a.prototype.Av=function(n){return(2&this.mb.read(n))!=0},a.prototype.pc=function(n,o){if(this.Ll(n.description),n.K()!=322)throw h.i.Ra();var u=new h.Ta;(o||this.B())&&(n.Vo(u),this.nf(u)),n.Ro(u),this.lineTo(u)},a.prototype.vp=function(n){var o=this.xa==0;this.rx(n.v,n.G),this.Aj(n.v,n.H),this.Aj(n.C,n.H),this.Aj(n.C,n.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(n,o){if(!n.B()){for(var u=this.xa==0,p=new h.Ta(this.description),y=0;4>y;y++)n.If(o?4-y-1:y,p),y==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,u&&!o&&this.Nf(256,!1)}},a.prototype.add=function(n,o){for(var u=0;u<n.ea();u++)this.addPath(n,u,!o)},a.prototype.addPath=function(n,o,u){this.wf(-1,n,o,u)},a.prototype.$k=function(n,o){this.Cz(n,o)},a.prototype.Fr=function(n,o,u,p,y){if(y||this.ea()!=0||(y=!0),0>o&&(o=n.ea()-1),o>=n.ea()||0>u||0>p||p>n.tv(o))throw h.i.ga("index out of bounds");if(p!=0){var g=n.ec(o)&&u+p==n.tv(o);if(!g||p!=1){if(this.Og=!1,this.Ll(n.description),u=n.Ca(o)+u+1,y&&(p++,u--),g&&p--,g=this.xa,this.fm(this.xa+p),this.oc(),y){if(p==0)return;this.nb.add(this.xa),y=n.mb.read(o),y&=-5,this.yf&&(y|=1),this.mb.write(this.mb.size-1,y),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);y=0;for(var b=this.description.Ba;y<b;y++){var S=this.description.ld(y),$=h.sa.Wa(S),I=n.description.Rf(S);0>I||n.Aa[I]==null?this.Aa[y].Nn($*g,h.sa.te(S),p*$,$*g):this.Aa[y].On($*g,n.Aa[I],$*u,p*$,!0,$,$*g)}if(this.vm()||n.Av(o))throw h.i.Ra();this.Qc(1993)}}},a.prototype.jJ=function(){for(var n=0,o=this.ea();n<o;n++)this.zW(n)},a.prototype.zW=function(n){if(this.oc(),n>=this.ea())throw h.i.O();var o=this.Ca(n),u=this.Ka(n);n=this.ec(n)?1:0;for(var p=0,y=this.description.Ba;p<y;p++)if(this.Aa[p]!=null){var g=h.sa.Wa(this.description.Fd(p));this.Aa[p].pi(g*(o+n),g*(u-n),g)}this.Qc(1993)},a.prototype.ar=function(n){this.oc();var o=this.ea();if(0>n&&(n=o-1),n>=o)throw h.i.O();for(var u=this.Ca(n),p=this.Ka(n),y=0,g=this.description.Ba;y<g;y++)if(this.Aa[y]!=null){var b=h.sa.Wa(this.description.Fd(y));this.Aa[y].Gn(b*u,b*p,b*this.xa)}for(u=n+1;u<=o;u++)y=this.nb.read(u),this.nb.write(u-1,y-p);if(this.mb==null)for(u=n+1;u<=o;u++)n=this.mb.read(u),this.mb.write(u-1,n);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(n,o,u,p){if(o==this||u>=o.ea())throw h.i.O();var y=this.ea();if(n>y)throw h.i.O();0>n&&(n=y),0>u&&(u=o.ea()-1),this.Og=!1,this.Ll(o.description),o.oc();var g=o.Ca(u),b=o.Ka(u),S=this.xa,$=o.ec(u)&&!p?1:0;this.fm(this.xa+b),this.oc();for(var I=n<y?this.Ca(n):S,C=0,R=this.description.Ba;C<R;C++){var L=this.description.Fd(C),N=o.description.Rf(L),U=h.sa.Wa(L);0<=N&&o.Aa[N]!=null?($!=0&&this.Aa[C].On(I*U,o.Aa[N],U*g,U,!0,U,U*S),this.Aa[C].On((I+$)*U,o.Aa[N],U*(g+$),U*(b-$),p,U,U*(S+$))):this.Aa[C].Nn(I*U,h.sa.te(L),U*b,U*S)}for(this.nb.add(S+b),p=y;p>=n+1;p--)g=this.nb.read(p-1),this.nb.write(p,g+b);for(o.Av(u),this.mb.add(0),p=y-1;p>=n+1;p--)y=this.mb.read(p),y&=-5,this.mb.write(p+1,y);y=o.ER().read(u),y&=-5,this.yf&&(y|=1),this.mb.write(n,y)},a.prototype.Cz=function(n,o){var u=-1,p=this.ea();if(u>p)throw h.i.O();0>u&&(u=p),this.Og=!1;var y=this.xa;this.fm(this.xa+o),this.oc();var g=u<p?this.Ca(u):y;if(n!=null)this.Aa[0].Dz(2*g,n,0,o,!0,2*y);else{var b=h.sa.te(0);this.Aa[0].Nn(2*g,b,2*o,2*y)}n=1;for(var S=this.description.Ba;n<S;n++){b=this.description.ld(n);var $=h.sa.Wa(b);b=h.sa.te(b),this.Aa[n].Nn(g*$,b,$*o,$*y)}for(this.nb.add(this.xa),y=p;y>=u+1;y--)g=this.nb.read(y-1),this.nb.write(y,g+o);for(this.mb.add(0),y=p-1;y>=u+1;y--)o=this.mb.read(y),o&=-5,this.mb.write(y+1,o);this.yf&&this.mb.write(u,1)},a.prototype.lG=function(n,o,u){var p=-1;if(0>n&&(n=this.ea()),n>this.ea()||p>this.Ka(n)||u>o.length)throw h.i.ga("index out of bounds");if(u!=0){n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(n)),this.oc();var y=this.xa;this.fm(this.xa+u),this.oc();for(var g=0,b=this.description.Ba;g<b;g++){var S=this.description.Fd(g),$=h.sa.Wa(S);this.Aa[g].Wt($*(this.Ca(n)+p+u),(y-this.Ca(n)-p)*$,this.Aa[g],$*(this.Ca(n)+p),!0,$),g==0?this.Aa[g].qC($*(this.Ca(n)+p),u,o,0,!0):this.Aa[g].Yj(h.sa.te(S),(this.Ca(n)+p)*$,u*$)}for(this.vm()&&(this.Se.Wt(this.Ca(n)+p+u,y-this.Ca(n)-p,this.Se,this.Ca(n)+p,!0,1),this.Nj.Wt(this.Ca(n)+p+u,y-this.Ca(n)-p,this.Nj,this.Ca(n)+p,!0,1),this.Se.Yj(1,this.Ca(n)+p,u),this.Nj.Yj(-1,this.Ca(n)+p,u)),n+=1,o=this.ea();n<=o;n++)this.nb.write(n,this.nb.read(n)+u)}},a.prototype.xf=function(n,o,u){var p=this.ea();if(0>n&&(n=this.ea()),n>=p||o>this.Ka(n))throw h.i.ga("index out of bounds");n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(n));var y=this.xa;this.fm(this.xa+1),this.oc();var g=this.Ca(n);this.Aa[0].xj(2*(g+o),u,2*y),u=1;for(var b=this.description.Ba;u<b;u++){var S=this.description.Fd(u),$=h.sa.Wa(S);this.Aa[u].Nn($*(g+o),h.sa.te(S),$,$*y)}for(n+=1;n<=p;n++)this.nb.write(n,this.nb.read(n)+1)},a.prototype.yB=function(n,o){var u=this.ea();if(0>n&&(n=u-1),n>=u||o>=this.Ka(n))throw h.i.ga("index out of bounds");this.oc();var p=this.Ca(n);0>o&&(o=this.Ka(n)-1),o=p+o,p=0;for(var y=this.description.Ba;p<y;p++)if(this.Aa[p]!=null){var g=h.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(g*o,g,g*this.xa)}for(;u>=n+1;u--)o=this.nb.read(u),this.nb.write(u,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.pE=function(n,o,u,p){if(n=this.Ca(n)+o,(u=this.Ca(u)+p)<n||0>n||u>this.I()-1)throw h.i.O();o=0,(p=this.Ha()).Wb(n);do{for(;p.Ia()&&(n=p.ia(),p.xb()!=u);)o+=n=n.Rb();if(p.xb()==u)break}while(p.ab());return o},a.prototype.aO=function(n,o,u){if(o=this.Ca(n)+o,u=this.Ca(n)+u,0>o||u>this.I()-1)throw h.i.O();var p=this.Ha();if(o>u){if(!this.ec(n))throw h.i.O("cannot iterate across an open path");p.EB()}var y=n=0;p.Wb(o);do y+=n,n=p.ia().Rb();while(p.xb()!=u);return y},a.prototype.ng=function(){return h.si.im(this,null)},a.prototype.FS=function(n,o,u){for(var p=n;p<u-1;p++)if(this.ec(p))throw h.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var y=this.pE(n,o,u,void 0);if(y!=0)for(var g=1;g<p;g++){var b=this.description.ld(g);if(h.sa.gz(b)!=2)for(var S=h.sa.Wa(b),$=0;$<S;$++)this.HS(b,n,o,u,y,$)}}},a.prototype.ES=function(n,o,u){var p=this.description.Ba;if(p!=1){var y=this.aO(n,o,u);if(y!=0)for(var g=1;g<p;g++){var b=this.description.ld(g);if(h.sa.gz(b)!=2)for(var S=h.sa.Wa(b),$=0;$<S;$++)this.GS(b,n,o,u,y,$)}}},a.prototype.HS=function(n,o,u,p,y,g){var b=this.Ha(),S=this.Ca(o)+u;p=this.Ca(p)+void 0,o=this.Vc(n,S,g),u=this.Vc(n,p,g);var $=o,I=0;b.Wb(S);do if(b.Ia()){if(b.ia(),b.xb()==p)break;this.setAttribute(n,b.xb(),g,$),b.ni();do{if(S=b.ia(),b.kk()==p)return;I+=S=S.Rb(),$=h.mc.jq(o,u,I/y),b.Qn()||this.setAttribute(n,b.kk(),g,$)}while(b.Ia())}while(b.ab())},a.prototype.GS=function(n,o,u,p,y,g){var b=this.Ha(),S=this.Ca(o)+u;if((o=this.Ca(o)+p)!=S){p=this.Vc(n,S,g),u=this.Vc(n,o,g);var $=0;b.Wb(S),b.EB(),S=p;do{var I=b.ia();this.setAttribute(n,b.xb(),g,S),$+=S=I.Rb(),S=h.mc.jq(p,u,$/y)}while(b.kk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},a.prototype.Pc=function(n){n instanceof h.Ed?this.TD(n,-1):this.rN(n)},a.prototype.TD=function(n,o){if(!this.B()&&!n.isIdentity()){this.oc();var u=this.Aa[0],p=new h.h,y=new h.h;if(0>o){var g=this.vm(),b=0;o=this.xa}else g=this.Av(o),b=this.Ca(o),o=this.Wc(o);for(;b<o;b++){if(p.x=u.read(2*b),p.y=u.read(2*b+1),g){var S=this.Nj.read(b);if(0<=S)switch(7&this.Se.read(b)){case 2:y.x=this.Td.read(S),y.y=this.Td.read(S+1),n.Gh(y,y),this.Td.write(S,y.x),this.Td.write(S+1,y.y),y.x=this.Td.read(S+3),y.y=this.Td.read(S+4),n.Gh(y,y),this.Td.write(S+3,y.x),this.Td.write(S+4,y.y);break;case 4:throw h.i.Ra()}}n.Gh(p,p),u.write(2*b,p.x),u.write(2*b+1,p.y)}this.Qc(1993)}},a.prototype.rN=function(n){if(!this.B()){this.se(1),this.oc();for(var o=this.Aa[0],u=this.Aa[1],p=new h.Od,y=new h.Od,g=this.vm(),b=0;b<this.xa;b++){if(p.x=o.read(2*b),p.y=o.read(2*b+1),p.z=u.read(b),g){var S=this.Nj.read(b);if(0<=S)switch(7&this.Se.read(b)){case 2:y.x=this.Td.read(S),y.y=this.Td.read(S+1),y.z=this.Td.read(S+2),y=n.hp(y),this.Td.write(S,y.x),this.Td.write(S+1,y.y),this.Td.write(S+1,y.z),y.x=this.Td.read(S+3),y.y=this.Td.read(S+4),y.z=this.Td.read(S+5),y=n.hp(y),this.Td.write(S+3,y.x),this.Td.write(S+4,y.y),this.Td.write(S+5,y.z);break;case 4:throw h.i.Ra()}}p=n.hp(p),o.write(2*b,p.x),o.write(2*b+1,p.y),u.write(b,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.qp=function(n){n.Og=!1,n.vq=this.vq,n.zq=this.zq,n.nb=this.nb!=null?h.ja.Dn(this.nb):null,n.mb=this.mb!=null?h.rn.Dn(this.mb):null,n.Nj=this.Nj!=null?h.ja.Dn(this.Nj):null,n.Se=this.Se!=null?h.rn.Dn(this.Se):null,n.Td=this.Td!=null?h.ce.Dn(this.Td):null,n.uq=this.uq,n.tq=this.tq,n.Cj=this.ck(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var n=this.Ha(),o=new h.Ex(0);n.ab();)for(;n.Ia();)o.add(n.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&c.prototype.Nb.call(this,n)))return!1;var o=this.ea();return!(o!=n.ea()||this.nb!=null&&!this.nb.Nb(n.nb,0,o+1)||this.zq!=n.zq||this.mb!=null&&!this.mb.Nb(n.mb,0,o))&&c.prototype.Nb.call(this,n)},a.prototype.Ha=function(){return new h.TL(this)},a.prototype.dy=function(n){if(c.prototype.dy.call(this,n),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Ap=function(n,o){if(c.prototype.Ap.call(this,n,o),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(n){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(n)):(4&this.mb.read(n))!=0)},a.prototype.Kr=function(n){return this.yf?(this.zu(),this.Cj.read(n)):0},a.prototype.zu=function(){if(this.ck(1024)){var n=this.ea();this.Cj==null?this.Cj=new h.ce(n):this.Cj.size!=n&&this.Cj.resize(n),n=new h.Ex(0);for(var o=new h.Ex(0),u=new h.h,p=0,y=this.Ha();y.ab();){for(o.reset(),this.D(this.Ca(y.gb),u);y.Ia();)o.add(y.ia().Sx(u.x,u.y));n.add(o.tm());var g=p++;this.Cj.write(g,o.tm())}this.tq=n.tm(),this.Nf(1024,!1)}},a.prototype.AR=function(){if(this.yf){this.hm();for(var n=this.ea(),o=0;o<n;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.ck(8)){this.zu();var n=this.ea();(this.mb==null||this.mb.size<n)&&(this.mb=h.Zc.Or(n+1));for(var o=1,u=0;u<n;u++){var p=this.Cj.read(u);u==0&&(o=0<p?1:-1),0<p*o?this.mb.uJ(u,4):this.mb.FE(u,4)}this.Nf(8,!1)}},a.prototype.nz=function(n){var o=this.gb,u=this.ea();if(0<=o&&o<u){if(n<this.Wc(o)){if(n>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<u&&n>=this.Ca(o)&&n<this.Wc(o))return this.gb=o}if(5>u){for(o=0;o<u;o++)if(n<this.Wc(o))return this.gb=o;throw h.i.ga("corrupted geometry")}for(o=0,--u;u>o;){var p=o+(u-o>>1);if(n<this.Ca(p))u=p-1;else{if(!(n>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var n=this.I();if(!this.yf){n-=this.ea();for(var o=0,u=this.ea();o<u;o++)this.ec(o)&&n++}return n},a.prototype.tv=function(n){var o=this.Ka(n);return this.ec(n)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.LJ=function(n){this.nb=n,this.Qc(16777215)},a.prototype.QR=function(){return this.vx(),this.Se},a.prototype.ER=function(){return this.vx(),this.mb},a.prototype.KJ=function(n){this.mb=n,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(n){return this.nb.read(n+1)},a.prototype.Ka=function(n){return this.nb.read(n+1)-this.nb.read(n)},a.prototype.Ca=function(n){return this.nb.read(n)},a.prototype.nu=function(n,o){this.Cb==null&&(this.Cb=new h.Wk),o=h.Mx.kW(o);var u=this.Cb.Hk;if(u!=null){if(!(u.Kk<n||o>u.MR()))return!0;this.Cb.tD(null)}return u=h.Mx.create(this,n,o),this.Cb.tD(u),!0},a.prototype.dc=function(){var n=c.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Cn(n,0,o+1),this.mb!=null&&this.mb.Cn(n,0,o)}return n},a.prototype.UF=function(n){return this.Se!=null?this.Se.read(n):1},a.prototype.cc=function(n,o,u){var p=this.nz(n);if(n==this.Wc(p)-1&&!this.ec(p))throw h.i.ga("index out of bounds");this.oc();var y=this.Se,g=1;if(y!=null&&(g=7&y.read(n)),g!==1)throw h.i.Ra();if(o.Qr(),o=o.get(),u?o.Pf(h.fe.pg()):o.Pf(this.description),p=n==this.Wc(p)-1&&this.ec(p)?this.Ca(p):n+1,y=new h.h,this.D(n,y),o.Ec(y),this.D(p,y),o.Rc(y),!u)for(u=1,y=this.description.Ba;u<y;u++){g=this.description.Fd(u);for(var b=h.sa.Wa(g),S=0;S<b;S++){var $=this.Vc(g,n,S);o.TB(g,S,$),$=this.Vc(g,p,S),o.JB(g,S,$)}}},a.prototype.Tj=function(n,o){if(n>=this.ea())throw h.i.O();if(this.B())o.Pa();else{if(this.Av(n))throw h.i.ga("not implemented");var u=this.vb(0),p=new h.h,y=new h.l;y.Pa();var g=this.Ca(n);for(n=this.Wc(n);g<n;g++)u.uc(2*g,p),y.$b(p);o.L(y)}},a.prototype.hj=function(n){return this.Cb==null&&(this.Cb=new h.Wk),!(n==0||16>this.I())&&(n=h.ua.iE(this),this.Cb.RM(n),!0)},a.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new h.Wk),this.Cb.Bo==null){this.Cb.sD(null);var n=h.ua.TN(this);this.Cb.sD(n)}},a.prototype.$o=function(n){this.zq=n},a.prototype.Kn=function(){return this.zq},a.prototype.yD=function(n){if(this==n)throw h.i.ga("MultiPathImpl.add");for(var o=this.ea(),u=0;u<n.ea();u++)this.addPath(n,u,!0),this.xU(o),o++},a.prototype.fO=function(n){var o=this.nz(n),u=this.Ca(o);if(u!=n){if(n>=(o=this.Wc(o))||n<u)throw h.i.ga("change_ring_start_point");for(var p=0,y=this.description.Ba;p<y;p++){var g=this.description.ld(p);g=h.sa.Wa(g),this.Aa[p].rotate(u*g,n*g,o*g)}}},a}(h.Fx);h.Xk=w}(B||(B={})),function(h){var O=function(w){function c(a){var n=w.call(this)||this;if(a!==void 0){if(a==null)throw h.i.O();n.description=a}else n.description=h.fe.pg();return n.xa=0,n}return Fe(c,w),c.prototype.Ja=function(){return new c(this.description)},c.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},c.prototype.Du=function(a,n){this.resize(this.xa+1);var o=new h.h;o.na(a,n),this.Db(this.xa-1,o)},c.prototype.Gd=function(a,n,o){if(o=0>o?a.I():o,0>n||n>a.I()||o<n)throw h.i.O();if(n!=o){this.Ll(a.description),o-=n;var u=this.xa;this.resize(this.xa+o),this.oc();for(var p=0,y=a.description.Ba;p<y;p++){var g=a.description.Fd(p),b=h.sa.Wa(g),S=this.vb(g);g=a.vb(g),S.On(u*b,g,n*b,o*b,!0,1,u*b)}}},c.prototype.CD=function(a,n){var o=a.length;if(n=0>n?o:n,0>o||0>n)throw h.i.O();if(n!=0){o=n-0,n=this.xa,this.resize(this.xa+o);for(var u=0;u<o;u++)this.Db(n+u,a[0+u])}},c.prototype.yB=function(a){if(0>a||a>=this.I())throw h.i.ga("index out of bounds");this.oc();for(var n=0,o=this.description.Ba;n<o;n++)if(this.Aa[n]!=null){var u=h.sa.Wa(this.description.Fd(n));this.Aa[n].Gn(u*a,u,u*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},c.prototype.resize=function(a){this.fm(a)},c.prototype.qp=function(){},c.prototype.Pa=function(){w.prototype.rD.call(this)},c.prototype.Pc=function(a){if(a instanceof h.Ed){if(this.B())return;this.oc();for(var n=this.Aa[0],o=new h.h,u=0;u<this.xa;u++)o.x=n.read(2*u),o.y=n.read(2*u+1),a.Gh(o,o),n.write(2*u,o.x),n.write(2*u+1,o.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),n=this.Aa[0],o=this.Aa[1];var p=new h.Od;for(u=0;u<this.xa;u++){p.x=n.read(2*u),p.y=n.read(2*u+1),p.z=o.read(u);var y=a.hp(p);n.write(2*u,y.x),n.write(2*u+1,y.y),o.write(u,y.z)}}this.Qc(1993)},c.prototype.Eb=function(){return 0},c.prototype.K=function(){return 550},c.prototype.He=function(){return 0},c.prototype.Rb=function(){return 0},c.prototype.Nb=function(a){return a==this||a instanceof c&&w.prototype.Nb.call(this,a)},c.prototype.gW=function(a,n){var o=this.xa;if(o=Math.min(o,n+1e3),0>n||n>=this.xa||o<n||a.length!=1e3)throw h.i.O();var u=o-n,p=[];for(this.vb(0).Xw(2*n,2*u,p,0,!0),n=0;n<u;n++)a[n]=h.h.construct(p[2*n],p[2*n+1]);return o},c.prototype.Zx=function(){},c.prototype.ey=function(){},c.prototype.nu=function(){return!1},c.prototype.hj=function(){return!1},c.prototype.ng=function(){return null},c}(h.Fx);h.ee=O}(B||(B={})),function(h){var O;(O=h.dL||(h.dL={}))[O.NotDetermined=0]="NotDetermined",O[O.Structure=1]="Structure",O[O.DegenerateSegments=2]="DegenerateSegments",O[O.Clustering=3]="Clustering",O[O.Cracking=4]="Cracking",O[O.CrossOver=5]="CrossOver",O[O.RingOrientation=6]="RingOrientation",O[O.RingOrder=7]="RingOrder",O[O.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",O[O.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",O[O.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function c(a,n,o){a===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=a,this.Lo=n,this.Mo=o)}return c.prototype.Yt=function(a){this.Lj=a.Lj,this.Lo=a.Lo,this.Mo=a.Mo},c}();h.Nd=w}(B||(B={})),function(h){h.P=function(){function O(){}return O.assert=function(w){if(w===!1)throw h.i.BK()},O.XJ=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},O.Hu=function(w){var c;c===void 0&&(c=0);for(var a=[],n=0;n<w;n++)a[n]=O.mg(2,c);return a},O.mg=function(w,c){c===void 0&&(c=0);for(var a=[],n=0;n<w;n++)a[n]=c;return a},O.bv=function(w,c){var a,n;for(a===void 0&&(a=0),n===void 0&&(n=w.length-1);a<=n;a++)w[a]=c},O.Tk=function(w,c,a){return w<c?c:w>a?a:w},O.Vh=function(w,c){var a=5381;return((a=((a=((a=c!==void 0?(c<<5)+c+(255&w):(a<<5)+a+(255&w))<<5)+a+(w>>8&255))<<5)+a+(w>>16&255))<<5)+a+(w>>24&255)&2147483647},O.wj=function(){throw Error("Not Implemented")},O.XA=function(w){return O.WT(w)+12345&2147483647},O.SG=function(w){var c=32,a=w%O.Px|0,n=w/O.Px|0;return(c&=63)==0?w:(32>c?(w=a>>>c|n<<32-c,c=n>>c):(w=n>>c-32,c=0<=n?0:-1),c*O.Px+(w>>>0))},O.WT=function(w){var c=1103515245,a=65535&c;return((c-a)*(w|=0)|0)+(a*w|0)|0},O.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},O.MAX_SAFE_INTEGER=Math.pow(2,53)-1,O.MIN_SAFE_INTEGER=-O.MAX_SAFE_INTEGER,O.QC=65536,O.Px=O.QC*O.QC,O}()}(B||(B={})),function(h){var O;(O=h.xL||(h.xL={}))[O.Project=0]="Project",O[O.Union=1]="Union",O[O.Difference=2]="Difference",O[O.Proximity2D=3]="Proximity2D",O[O.Relate=4]="Relate",O[O.Equals=5]="Equals",O[O.Disjoint=6]="Disjoint",O[O.Intersects=7]="Intersects",O[O.Within=8]="Within",O[O.Contains=9]="Contains",O[O.Crosses=10]="Crosses",O[O.Touches=11]="Touches",O[O.Overlaps=12]="Overlaps",O[O.Buffer=13]="Buffer",O[O.Distance=14]="Distance",O[O.Intersection=15]="Intersection",O[O.Clip=16]="Clip",O[O.Cut=17]="Cut",O[O.DensifyByLength=18]="DensifyByLength",O[O.DensifyByAngle=19]="DensifyByAngle",O[O.LabelPoint=20]="LabelPoint",O[O.GeodesicBuffer=21]="GeodesicBuffer",O[O.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",O[O.ShapePreservingDensify=23]="ShapePreservingDensify",O[O.GeodeticLength=24]="GeodeticLength",O[O.GeodeticArea=25]="GeodeticArea",O[O.Simplify=26]="Simplify",O[O.SimplifyOGC=27]="SimplifyOGC",O[O.Offset=28]="Offset",O[O.Generalize=29]="Generalize",O[O.SymmetricDifference=30]="SymmetricDifference",O[O.ConvexHull=31]="ConvexHull",O[O.Boundary=32]="Boundary",O[O.SimpleRelation=33]="SimpleRelation";var w=function(){function c(){}return c.prototype.K=function(){return null},c.prototype.yn=function(){},c.prototype.Ku=function(){return!1},c}();h.Ge=w}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 13},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(p=new h.$c(a),this.W(p,n,[o],!1,u).next()):u===!0?(o=new h.wC(a,n,o,!1,p),h.Ih.local().W(o,n,p)):new h.wC(a,n,o,!1,p)},c.instance=null,c}(h.Ge);h.vC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u){this.za=-1,this.Sd=c,this.Vz=a,this.Es=n,this.nT=new h.l,this.nT.Pa(),this.ho=-1,this.Vb=u}return w.prototype.next=function(){for(var c;(c=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(c,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.buffer=function(c,a){return h.CK.buffer(c,a,this.Vz,NaN,96,this.Vb)},w.prototype.re=function(){},w}();h.wC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 16},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.gL(a,n,o,u)},c.instance=null,c}(h.Ge);h.fL=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){if(this.za=-1,c==null)throw h.i.O();this.aa=a,this.Ak=c,this.ra=h.ua.Xd(n,a,!1)}return w.prototype.next=function(){var c;return(c=this.Ak.next())!=null?(this.za=this.Ak.Ma(),h.Vd.clip(c,this.aa,this.ra,0)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.gL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 31},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){return a instanceof h.ba?h.yC.mE(a):new h.yC(n,a,o)},c.instance=null,c}(h.Ge);h.xC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){if(this.pA=new h.au,this.za=-1,a==null)throw h.i.O();this.YG=c,this.Jc=!1,this.Ak=a,this.Vb=n}return w.prototype.next=function(){if(this.YG){if(!this.Jc){var c=this.ZN(this.Ak);return this.Jc=!0,c}return null}if(!this.Jc){if((c=this.Ak.next())!=null)return this.za=this.Ak.Ma(),w.mE(c);this.Jc=!0}return null},w.prototype.Ma=function(){return this.za},w.prototype.ZN=function(c){for(var a;(a=c.next())!=null;)this.pA.Ib(a);return this.pA.YQ()},w.prototype.re=function(){if(!this.Jc){if(!this.YG)throw h.i.ga("Invalid call for non merging convex hull.");var c=this.Ak.next();if(c==null)throw h.i.ga("Expects a non-null geometry.");this.pA.Ib(c)}},w.mE=function(c){if(w.QS(c))return c;var a=c.K();if(h.Xk.zd(a))return(a=new h.Ua(c.description)).pc(c,!0),a;if(a==550&&c.I()==2){var n=new h.Ta;return a=new h.Ua(c.description),c.we(0,n),a.nf(n),c.we(1,n),a.lineTo(n),a}return h.au.MO(c)},w.QS=function(c){if(c.B())return!0;var a=c.K();return a==33||a==197||!h.Xk.zd(a)&&(a==550?c.I()==1:a==1607?c.ea()==1&&2>=c.I():c.ea()==1&&(2>=c.I()||h.au.EG(c,0)))},w}();h.yC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 17},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return new h.iL(a,n,o,u,p)},c.instance=null,c}(h.Ge);h.hL=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u){if(this.Vf=null,a==null||n==null)throw h.i.ga("invalid argument");this.kT=c,this.iA=a,this.gH=n,c=h.ua.ov(a,n),this.ra=h.ua.Xd(o,c,!0),this.fH=-1,this.od=u}return w.prototype.Ma=function(){return 0},w.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},w.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},w.prototype.OQ=function(){var c=new h.Ua,a=new h.Ua,n=new h.Ua;this.Vf.push(c),this.Vf.push(a);var o=[];h.GK.EK(this.kT,this.iA,this.gH,this.ra,o,this.od);for(var u=0;u<o.length;u++){var p=o[u];if(p.ct==0)c.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Vf.push(p.Y);else{if(p.ct!=4)throw h.i.ga("internal");n.add(p.Y,!1)}}n.B()||c.B()&&a.B()&&!(3<=this.Vf.length)||this.Vf.push(n),c.B()&&a.B()&&3>this.Vf.length&&(this.Vf.length=0)},w.prototype.NQ=function(){var c=new h.ja(0),a=new h.hd,n=a.WE(),o=a.Ib(this.iA),u=a.Ib(this.gH),p=new h.Hg;try{p.Gt(a,this.ra,this.od),p.fl(n,o,u,c);var y=a.Ke(o),g=new h.Ea,b=new h.Ea;for(this.Vf.length=0,this.Vf.push(g),this.Vf.push(b),o=0;o<c.size;o++){var S=new h.hd,$=S.Ib(y),I=S.Ib(a.Ke(c.get(o)));p.fr(S,this.od);var C=p.Cv($,I),R=S.Ke(C);if(!R.B()){var L=a.FF(c.get(o),n);L==2?g.add(R,!1):L==1?b.add(R,!1):this.Vf.push(R);var N=new h.hd;$=N.Ib(y),I=N.Ib(a.Ke(c.get(o))),p.fr(N,this.od),y=N.Ke(p.km($,I))}}!y.B()&&0<c.size&&this.Vf.push(y),g.B()&&b.B()&&(this.Vf.length=0)}finally{p.Wg()}},w.prototype.re=function(){},w}();h.iL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){if(a instanceof h.ba)return a=new h.$c(a),this.W(a,n,o).next();if(0>=n)throw h.i.O();return new h.jL(a,n,o)},c.instance=null,c}(h.Ge);h.Zl=O}(B||(B={})),function(h){var O=function(){function w(c,a){this.za=-1,this.Sd=c,this.Rs=a}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){var c;return(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(c)):null},w.prototype.IP=function(c){if(c.B()||1>c.Eb())return c;var a=c.K();if(a==1736||a==1607)return this.Iy(c);if(h.ba.zd(a))return this.KP(c);if(a==197)return this.JP(c);throw h.i.Ra()},w.prototype.KP=function(c){if(c.Rb()<=this.Rs)return c;var a=new h.Ua(c.description);return a.pc(c,!0),this.Iy(a)},w.prototype.JP=function(c){var a=new h.Ea(c.description);a.bd(c,!1);var n=new h.l;return c.A(n),c=n.da(),n.S()<=this.Rs&&c<=this.Rs?a:this.Iy(a)},w.prototype.Iy=function(c){for(var a=c.Ja(),n=c.Ha();n.ab();)for(var o=!0;n.Ia();){var u=n.ia();if(u.K()!=322)throw h.i.ga("not implemented");var p=n.Qn(),y=u.Rb();if(y>this.Rs){var g=Math.ceil(y/this.Rs);y=new h.Ta(c.description),o&&(u.Vo(y),a.nf(y));var b=o=1/g,S=0;for(--g;S<g;S++)u.Vw(b,y),a.lineTo(y),b+=o;p?a.Cp():(u.Ro(y),a.lineTo(y))}else p?a.Cp():a.pc(u,o);o=!1}return a},w.prototype.re=function(){},w}();h.jL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.K=function(){return 2},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u).next()):new h.kL(a,n,o,u)},c.km=function(a,n,o,u){if(a.B()||n.B())return a;var p=a.Eb(),y=n.Eb();if(p>y)return a;var g=a.K(),b=n.K(),S=new h.l,$=new h.l,I=new h.l;a.A(S),n.A($),I.L(S),I.$b($);var C=(I=h.ua.Xd(o,I,!0))*Math.sqrt(2)*1.00001,R=new h.l;if(R.L(S),R.X(C,C),!R.isIntersecting($))return a;if(p==1&&y==2)return c.FV(a,n,b,o,u);if(g==33)switch(h.Xk.zd(b)?(o=new h.Ua(n.description),o.pc(n,!0)):o=n,b){case 1736:return c.SU(a,o,I);case 1607:return c.TU(a,o,I);case 550:return c.QU(a,o,I);case 197:return c.PU(a,o,I);case 33:return c.RU(a,o,I);default:throw h.i.O()}else if(g==550)switch(b){case 1736:return c.iU(a,n,I);case 197:return c.gU(a,n,I);case 33:return c.hU(a,n,I)}return h.Hg.km(a,n,o,u)},c.SU=function(a,n,o){return h.jd.FG(n,a,o)==0?a:a.Ja()},c.TU=function(a,n,o){var u=a.D();n=n.Ha();for(var p=o*Math.sqrt(2)*1.00001,y=p*p,g=new h.l;n.ab();)for(;n.Ia();){var b=n.ia();if(b.A(g),g.X(p,p),g.contains(u)){if(b.ss(u,o))return a.Ja();var S=b.bc();if(h.h.zc(u,S)<=y||(S=b.xc(),h.h.zc(u,S)<=y))return a.Ja()}}return a},c.QU=function(a,n,o){var u=n.vb(0);n=n.I();var p=a.D(),y=new h.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var g=0;g<n;g++)if(u.uc(2*g,y),h.h.zc(y,p)<=o)return a.Ja();return a},c.PU=function(a,n,o){var u=new h.l;return n.A(u),u.X(o,o),n=a.D(),u.contains(n)?a.Ja():a},c.RU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D();return n=n.D(),h.h.zc(u,n)<=o?a.Ja():a},c.iU=function(a,n,o){var u=new h.l;n.A(u),u.X(o,o);for(var p=a.I(),y=!1,g=[],b=0;b<p;b++)g[b]=!1;var S=new h.h;for(b=0;b<p;b++)a.D(b,S),u.contains(S)&&h.jd.Zd(n,S,o)!=0&&(y=!0,g[b]=!0);if(!y)return a;for(n=a.Ja(),b=0;b<p;b++)g[b]||n.Gd(a,b,b+1);return n},c.gU=function(a,n,o){var u=new h.l;n.A(u),u.X(o,o),n=a.I();var p=!1;o=[];for(var y=0;y<n;y++)o[y]=!1;var g=new h.h;for(y=0;y<n;y++)a.D(y,g),u.contains(g)&&(p=!0,o[y]=!0);if(!p)return a;for(u=a.Ja(),y=0;y<n;y++)o[y]||u.Gd(a,y,y+1);return u},c.hU=function(a,n,o){var u=a.vb(0),p=a.I(),y=n.D(),g=new h.h,b=!1;n=[];for(var S=0;S<p;S++)n[S]=!1;for(o=(S=o*Math.sqrt(2)*1.00001)*S,S=0;S<p;S++)u.uc(2*S,g),h.h.zc(g,y)<=o&&(b=!0,n[S]=!0);if(!b)return a;for(u=a.Ja(),S=0;S<p;S++)n[S]||u.Gd(a,S,S+1);return u},c.FV=function(a,n,o,u,p){var y=new h.Hh;a.dn(y);var g=new h.l;return n.A(g),y.$b(g),y.X(.1*y.S(),.1*y.da()),(g=new h.Ea).bd(y,!1),o==1736?g.add(n,!0):g.bd(n,!0),h.Zj.local().W(a,g,u,p)},c.instance=null,c}(h.Ge);h.mp=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){this.vs=a==null,this.za=-1,this.Sd=c,this.Vz=n,this.rT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.mp.km(c,this.rT,this.Vz,this.Vb)):null;var c},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.kL=O}(B||(B={})),function(h){var O=function(){function c(a){this.od=a,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return c.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},c.prototype.$P=function(a,n){if(this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(a.K())&&h.ba.Ic(n.K())?a.I()>n.I()?this.bE(a,n,o):(this.Pt(),a=this.bE(n,a,o),this.Pt(),a):a.K()==550&&h.ba.Ic(n.K())?(a=this.cE(n,a,o),this.Pt(),a):n.K()==550&&h.ba.Ic(a.K())?this.cE(a,n,o):a.K()==550&&n.K()==550?a.I()>n.I()?this.dE(a,n):(this.Pt(),a=this.dE(n,a),this.Pt(),a):0},c.prototype.bE=function(a,n,o){var u=a.Ha(),p=n.Ha(),y=new h.l,g=new h.l,b=17976931348623157e292;if(!o&&this.lY(a,n,u,p))return 0;for(;u.ab();)for(;u.Ia();)if((a=u.ia()).A(y),!(y.px(this.qh)>b)){for(;p.ab();)for(;p.Ia();)if((n=p.ia()).A(g),y.px(g)<b&&(n=a.ub(n,o),(n*=n)<b)){if(n==0)return 0;b=n}p.aj()}return Math.sqrt(b)},c.prototype.cE=function(a,n,o){var u=a.Ha(),p=new h.l,y=17976931348623157e292,g=new h.h,b=n.I();for(o=!o&&a.K()==1736;u.ab();)for(;u.Ia();){var S=u.ia();if(S.A(p),!(1<b&&p.px(this.qh)>y)){for(var $=0;$<b;$++){if(n.D($,g),o&&h.jd.Zd(a,g,0)!=0)return 0;var I=S.ge(g,!1);if(g.sub(S.ic(I)),(I=g.Uk())<y){if(I==0)return 0;y=I}}o=!1}}return Math.sqrt(y)},c.prototype.dE=function(a,n){for(var o,u=17976931348623157e292,p=new h.h,y=new h.h,g=a.I(),b=n.I(),S=0;S<g;S++)if(a.D(S,p),!(1<b&&this.qh.dK(p)>u)){for(var $=0;$<b;$++)if(n.D($,y),(o=h.h.zc(p,y))<u){if(o==0)return 0;u=o}}return Math.sqrt(u)},c.prototype.lY=function(a,n,o,u){if(a.K()==1736){for(;u.ab();)if(u.Ia()){var p=u.ia();if(h.jd.Zd(a,p.xc(),0)!=0)return!0}u.aj()}if(n.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),h.jd.Zd(n,a.xc(),0)!=0))return!0;o.aj()}return!1},c.prototype.im=function(a,n){return a.B()||n.B()?NaN:(a.A(this.Dj),n.A(this.qh),this.$P(a,n))},c}(),w=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Fe(a,c),a.prototype.W=function(n,o,u){if(n==null||o==null)throw h.i.O();if(n.B()||o.B())return NaN;var p=n.K(),y=o.K();if(p==33){if(y==33)return h.h.ub(n.D(),o.D());if(y==197)return u=new h.l,o.A(u),u.ub(n.D());(p=new h.ee).add(n),n=p}else if(p==197){if(y==197)return y=new h.l,n.A(y),u=new h.l,o.A(u),u.ub(y);(p=new h.Ea).bd(n,!1),n=p}return y==33?((y=new h.ee).add(o),o=y):y==197&&((y=new h.Ea).bd(o,!1),o=y),new O(u).im(n,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(h.Ge);h.lL=w}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){this.uH=c,this.yH=a,this.od=o,this.VG=n}return w.prototype.next=function(){var c=this.uH.next();return c==null?null:this.uC(c)},w.prototype.Ma=function(){return this.uH.Ma()},w.prototype.uC=function(c){var a=c.K();if(h.ba.Tn(a))return c;if(a==197)return(a=new h.Ea(c.description)).bd(c,!1),this.uC(a);if(c.B())return c;if(c==null)throw h.i.Ra();a=c.Ja();for(var n=new h.zb,o=0,u=c.ea();o<u;o++)this.OK(c,o,a,n);return a},w.prototype.OK=function(c,a,n,o){if(!(2>c.Ka(a))){var u=c.Ca(a),p=c.Wc(a)-1,y=c.vb(0),g=c.ec(a),b=new h.ja(0);b.Jb(c.Ka(a)+1);var S=new h.ja(0);for(S.Jb(c.Ka(a)+1),b.add(g?u:p),b.add(u),u=new h.h;1<b.size;){var $=b.Gc();b.Jf();var I=b.Gc();c.D($,u),o.Ec(u),c.D(I,u),o.Rc(u),0<=(I=this.NK(o,u,y,$,I,p))?(b.add(I),b.add($)):S.add($)}if(g||S.add(b.get(0)),S.size==b.size)n.addPath(c,a,!0);else if(2<=S.size&&(!this.VG||S.size!=2||!(g||h.h.ub(c.Oa(S.get(0)),c.Oa(S.get(1)))<=this.yH))){for(a=new h.Ta,o=0,p=S.size;o<p;o++)c.we(S.get(o),a),o==0?n.nf(a):n.lineTo(a);g&&(this.VG||S.size!=2||n.lineTo(a),n.Cp())}}},w.prototype.NK=function(c,a,n,o,u,p){var y=u-1;for(u<=o&&(y=p),p=u=-1,o+=1;o<=y;o++){n.uc(2*o,a);var g=a.x,b=a.y;c.ic(c.ge(a,!1),a),a.x-=g,a.y-=b,(g=a.length())>this.yH&&g>p&&(u=o,p=g)}return u},w.prototype.re=function(){},w}();h.mL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 29},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.mL(a,n,o,u)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.zC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 21},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p,y,g,b){return a instanceof h.ba?(b=new h.$c(a),this.W(b,n,o,[u],p,y,!1,g).next()):g===!0?(o=new h.BC(a,n,o,u,p,!1,!1,b),h.Ih.local().W(o,n,b)):new h.BC(a,n,o,u,p,!1,!1,b)},c.instance=null,c}(h.Ge);h.AC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u,p,y,g){if(p)throw h.i.Fe();if(a==null)throw h.i.O();this.za=-1,this.Os=c,this.wg=a,this.Ae=n,this.Es=o,this.bo=u,this.ho=-1,this.Vb=g,this.oT=new h.l,this.oT.Pa()}return w.prototype.next=function(){for(var c;(c=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(c,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.VQ=function(c,a){return h.QK.buffer(c,this.wg,this.Ae,a,this.bo,this.Vb)},w.prototype.re=function(){},w}();h.BC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 24},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){if(n==null)throw h.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw h.i.Fe();var u=h.cb.tc(n),p=h.cb.xv(u),y=h.cb.gv(u);p*=2-p;var g=u.Id().ci,b=a.K();if(b==1736||b==197)var S=a.ng();else h.ba.zd(b)?(S=new h.Ua(a.description)).pc(a,!0):S=a;if(u.Nb(n)==0){if(h.cb.Xc(n)){S=h.Jh.nj(S,n),b==1607&&S==a&&(S=h.ba.kg(a)),a=new h.Oc,h.cb.ih(n).en(a),b=0;for(var $=S.I();b<$;b++){var I=S.Oa(b);I.x=h.Jh.an(I.x,a),S.Db(b,I)}}a=S.Ja(),S=h.Jh.RI(n,u,S,a)?a:h.cb.Bh(S,n,u)}return this.cQ(S,o,y,p,g)},c.prototype.cQ=function(a,n,o,u,p){var y=new h.ha(0),g=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var b=a.ia(),S=b.bc();b=b.xc(),S.scale(p),b.scale(p),h.kb.xd(o,u,S.x,S.y,b.x,b.y,y,null,null,n),g+=y.u}return g},c.instance=null,c}(h.Ge);h.qL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u,p).next()):new h.oL(a,o,u,n,-1,-1,p)},c.instance=null,c}(h.Ge);h.nL=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u,p){if(0<p||n!=4&&0<u)throw h.i.Fe();if(a==null)throw h.i.O();this.za=-1,this.Os=c,this.wg=a,this.Ae=n,this.yT=o,this.xT=u}return w.prototype.next=function(){for(var c;(c=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(c);return null},w.prototype.Ma=function(){return this.za},w.prototype.Uy=function(c){return h.ej.Sr(c,this.wg,this.Ae,this.yT,this.xT,this.Vb)},w.prototype.re=function(){},w}();h.oL=O}(B||(B={})),function(h){(function(O){O[O.Unknown=0]="Unknown",O[O.Contains=1]="Contains",O[O.Within=2]="Within",O[O.Equals=3]="Equals",O[O.Disjoint=4]="Disjoint",O[O.Touches=8]="Touches",O[O.Crosses=16]="Crosses",O[O.Overlaps=32]="Overlaps",O[O.NoThisRelation=64]="NoThisRelation",O[O.Intersects=1073741824]="Intersects",O[O.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.YK||(h.YK={})),h.rL=function(){function O(){}return O.iW=function(w,c){var a=w.K(),n=c.K();if(h.ba.zj(a)){var o=w.Cb;if(o!=null&&(o=o.Hk)!=null){if(n==33){var u=c.D();o=o.Uo(u.x,u.y)}else u=new h.l,c.A(u),o=o.To(u);if(o==1)return 1;if(o==0)return 4}}if(h.ba.zj(n)&&(o=c.Cb)!=null&&(o=o.Hk)!=null){if(a==33?(w=w.D(),o=o.Uo(w.x,w.y)):(c=new h.l,w.A(c),o=o.To(c)),o==1)return 2;if(o==0)return 4}return 0},O}()}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.K=function(){return 15},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u,p===void 0?-1:p).next()):p===void 0?new h.CC(a,n,o,u,-1):new h.CC(a,n,o,u,p)},c.prototype.yn=function(a,n,o){this.Ku(a)&&(n=h.ua.mj(n,a,!1),a.hj(o)||a.nu(n,o))},c.prototype.Ku=function(a){return h.Mx.uE(a)},c.instance=null,c}(h.Ge);h.Zj=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u){if(this.vs=a==null,this.za=-1,this.Sd=c,this.wg=n,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=u,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return w.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var c=this.Bw.next();if(c!=null)return c;this.Bw=null}for(;(c=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?c=this.Fa(c):(this.Bw=this.KS(c),c=this.Bw.next()),c;return null},w.prototype.Ma=function(){return this.za},w.prototype.Fa=function(c){var a=this.uK(c);if(a!=null)return a;a=h.ua.ov(this.Pe,c);var n=h.ua.Xd(this.wg,a,!0);a=new h.l,this.Pe.A(a);var o=new h.l;return c.A(o),a.X(2*n,2*n),a.Fa(o),a.X(100*n,100*n),n=h.Vd.clip(this.Pe,a,0,0),c=h.Vd.clip(c,a,0,0),h.Hg.Cv(c,n,this.wg,this.Vb)},w.prototype.KI=function(c,a,n){var o=0;if((1&a)!=0)n[0]==null&&(n[0]=new h.ee(c)),o++;else for(var u=0;u<n.length-1;u++)n[u]=n[u+1];if((2&a)!=0)n[o]==null&&(n[o]=new h.Ua(c)),o++;else for(u=o;u<n.length-1;u++)n[u]=n[u+1];if((4&a)!=0)n[o]==null&&(n[o]=new h.Ea(c)),o++;else for(u=o;u<n.length-1;u++)n[u]=n[u+1];if(o!=3){for(c=[],u=0;u<o;u++)c[u]=n[u];return new h.$c(c)}return new h.$c(n)},w.prototype.KS=function(c){var a=this.uK(c);if(a!=null){var n=[null,null,null];return n[a.Eb()]=a,this.KI(c.description,this.Hi,n)}a=h.ua.ov(this.Pe,c),n=h.ua.Xd(this.wg,a,!0),a=new h.l,this.Pe.A(a),a.X(2*n,2*n);var o=new h.l;return c.A(o),a.Fa(o),a.X(100*n,100*n),n=h.Vd.clip(this.Pe,a,0,0),a=h.Vd.clip(c,a,0,0),n=h.Hg.Kz(a,n,this.wg,this.Vb),this.KI(c.description,this.Hi,n)},w.prototype.uK=function(c){var a=h.ua.ov(c,this.Pe),n=h.ua.Xd(this.wg,a,!0);a=c.K();var o=c.B(),u=this.Pe.B();if(!(u=o||u)){u=new h.l,c.A(u);var p=new h.l;this.Pe.A(p),p.X(2*n,2*n),u=!u.isIntersecting(p)}if(!u)if((p=h.rL.iW(this.Pe,c))==4)u=!0;else{if((2&p)!=0)return this.Pe;if((1&p)!=0)return c}if(u)return(n=h.ba.uf(a))<(u=h.ba.uf(this.Fj))?w.CB(c,o):n>u||n==0&&a==550&&this.Fj==33?this.iJ():w.CB(c,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return n=this.Pe,a=new h.l,c.A(a),o=new h.l,n.A(o),a.Fa(o),n=new h.Hh,c.copyTo(n),n.Zo(a),n;if(a==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(a)==0)return o=a==197?c:this.Pe,c=a==197?this.Pe:c,a=new h.l,o.A(a),h.Vd.clip(c,a,n,0);if(h.ba.uf(a)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(a)&&h.ba.uf(this.Fj)==0){if(n=h.ua.mj(this.wg,c,!1),a==550||a==33)return h.Hg.uG(c,this.Pe,n);if(this.Fj==550||this.Fj==33)return h.Hg.uG(this.Pe,c,n);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.rK(this.Pe,c):this.rK(c,this.Pe)},w.prototype.rK=function(c,a){var n=c,o=a,u=h.ua.mj(this.wg,a,!1),p=new h.l;o.A(p);var y=new h.l;n.A(y),y.X(2*u,2*u),p.Fa(y),p.X(10*u,10*u),n=c=h.Vd.clip(c,p,0,0),y=new h.ja(0);var g=-1,b=o.Cb;if(b!=null){var S=b.Hk;if(S!=null){g=0,y.Jb(n.I()+n.ea());for(var $=new h.l,I=n.Ha();I.ab();)for(;I.Ia();){I.ia().A($);var C=S.To($);C==1?y.add(1):C==0?y.add(0):(y.add(-1),g++)}}}if(5<a.I()&&(b=(o=a=h.Vd.clip(a,p,0,0)).Cb),0>g&&(g=n.sz()),p=n.I()+o.I(),g*o.I()>Math.log(p)*p*4)return null;p=null,g=o.Ha(),b!=null&&b.Gb!=null&&(p=b.Gb),p==null&&20<o.I()&&(p=h.ua.iE(o)),c=c.Ja(),o=null,b=n.Ha(),S=[0,0,0,0,0,0,0,0,0],$=new h.ce(0),I=new h.jg,C=-1;for(var R=0,L=0,N=0<y.size,U=-1;b.ab();){U=b.gb;var W=0;for(C=-1,R=0;b.Ia();){var j=N?h.P.truncate(y.get(L)):-1;L++;var K=b.ia();if(0>j){if(p!=null)for(o==null?o=p.qR(K,u):o.Wo(K,u),j=o.next();j!=-1;j=o.next()){g.Wb(p.ka(j)),j=g.ia();var se=K.Fa(j,null,S,null,u);for(j=0;j<se;j++)$.add(S[j])}else for(g.aj();g.ab();)for(;g.Ia();)for(j=g.ia(),se=K.Fa(j,null,S,null,u),j=0;j<se;j++)$.add(S[j]);if(0<$.size){$.Wd(0,$.size,function(ke,Ae){return ke-Ae});var ne=0;$.add(1),se=-1,j=0;for(var pe=$.size;j<pe;j++){var he=$.get(j);if(he!=ne){var xe=!1;if(ne!=0||he!=1?(K.dh(ne,he,I),ne=I.get()):(ne=K,xe=!0),2<=W){if(c.Fr(n,U,C,R,W==3),this.LD(a,ne.bc(),u)!=1&&this.MD(a,ne,u)!=1)return null;c.pc(ne,!1),W=1,R=0}else switch(se=this.MD(a,ne,u),se){case 1:xe?2>W?(C=b.xb()-n.Ca(U),R=1,W=W==0?3:2):R++:(c.pc(ne,W==0),W=1);break;case 0:W=0,C=-1,R=0;break;default:return null}ne=he}}}else{if(0>(j=this.LD(a,K.bc(),u)))return null;j==1?(2>W&&(C=b.xb()-n.Ca(U),W=W==0?3:2),R++):(C=-1,R=0)}$.clear(!1)}else j!=0&&j==1&&(W==0?(W=3,C=b.xb()-n.Ca(U)):W==1?(W=2,C=b.xb()-n.Ca(U)):R++)}2<=W&&(c.Fr(n,U,C,R,W==3),C=-1)}return c},w.prototype.LD=function(c,a,n){return h.Fg.ym(c,a,n)},w.prototype.MD=function(c,a,n){var o=a.bc();a=a.xc();var u=h.Fg.ym(c,o,n),p=h.Fg.ym(c,a,n);return u==1&&p==0||u==0&&p==1?-1:u==0||p==0?0:u==1||p==1?1:((u=new h.h).add(o,a),u.scale(.5),(c=h.Fg.ym(c,u,n))==0?0:c==1?1:-1)},w.CB=function(c,a){return a?c:c.Ja()},w.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},w.prototype.re=function(){},w}();h.CC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 28},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p,y,g){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u,p,y,g).next()):new h.sL(a,n,o,u,p,y,g)},c.instance=null,c}(h.Ge);h.DC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u,p,y){this.za=-1,this.Sd=c,this.Oj=a,this.La=n,this.Mi=o,this.xA=u,this.pH=p,this.od=y}return w.prototype.next=function(){var c=this.Sd.next();return c!=null?(this.za=this.Sd.Ma(),this.eL(c)):null},w.prototype.Ma=function(){return this.za},w.prototype.eL=function(c){var a=0>=this.pH?h.ua.mj(this.Oj,c,!1):this.pH;return h.DK.W(c,this.La,this.Mi,this.xA,a,this.od)},w.prototype.re=function(){},w}();h.sL=O}(B||(B={})),function(h){var O;(O=h.IK||(h.IK={}))[O.clipToDomainOnly=1]="clipToDomainOnly",O[O.clipWithHorizon=2]="clipWithHorizon",O[O.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Fe(a,c),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(n,o,u){return n instanceof h.ba?(n=new h.$c(n),this.W(n,o,u).next()):new h.tL(n,o,u)},a.prototype.transform=function(n,o,u,p){return h.du.transform(n,o,u,p,!0)},a.prototype.St=function(n,o,u,p){return h.du.St(n,o,u,p)},a.instance=null,a}(h.Ge);h.Gx=w}(B||(B={})),function(h){var O=function(){function w(c,a,n){this.za=-1,this.Sd=c,this.HT=a,this.od=n}return w.prototype.next=function(){var c=this.Sd.next();return c!=null?(this.za=this.Sd.Ma(),h.du.Bh(c,this.HT,this.od)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.tL=O}(B||(B={})),function(h){var O=function(){function c(){}return c.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},c.prototype.vQ=function(a,n,o){for(a.Wb(n,o);a.Ia();){var u=a.ia();if((u=u.Rb())!=0)return a.xb()}for(a.Wb(n,o);a.zz();)if((u=(u=a.ni()).Rb())!=0)return a.xb();return-1},c.prototype.wQ=function(a,n){for(a.Wb(n,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},c.prototype.uQ=function(a,n){for(a.Wb(n,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},c.prototype.tQ=function(a,n,o,u){if(this.zk=this.vQ(n,o,u),this.zk!=-1){n.Wb(this.zk,-1);var p=n.ia(),y=p.ic(p.ge(a,!1));if(o=h.h.zc(y,a),(u=new h.h).N(y),u.sub(p.bc()),(y=new h.h).N(a),y.sub(p.bc()),this.mq=0>u.yi(y),this.rh=this.uQ(n,this.zk),this.rh!=-1){n.Wb(this.rh,-1);var g=(p=n.ia()).ge(a,!1);g=p.ic(g);var b=h.h.zc(g,a);b>o?this.rh=-1:(u.N(g),u.sub(p.bc()),y.N(a),y.sub(p.bc()),this.ws=0>u.yi(y))}this.rh==-1&&(this.rh=this.wQ(n,this.zk),this.rh!=-1&&(n.Wb(this.rh,-1),g=(p=n.ia()).ge(a,!1),g=p.ic(g),(b=h.h.zc(g,a))>o?this.rh=-1:(u.N(g),u.sub(p.bc()),y.N(a),y.sub(p.bc()),this.ws=0>u.yi(y),a=this.zk,this.zk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},c.prototype.YN=function(a,n,o,u,p){return o=o.Ha(),this.tQ(a,o,u,p),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.zk,-1),a=o.ia().lg(),o.Wb(this.rh,-1),n=o.ia().lg(),0<=a.yi(n)):n},c}(),w=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Fe(a,c),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(n,o,u){var p;if(p===void 0&&(p=!1),n.B())return new h.bm;o=o.D();var y=n,g=n.K();switch(g==197&&((y=new h.Ea).bd(n,!1),g=1736),g){case 33:return this.sI(y,o);case 550:return this.eI(y,o);case 1607:case 1736:return this.XT(y,o,u,p);default:throw h.i.ga("not implemented")}},a.prototype.jz=function(n,o){if(n.B())return new h.bm;o=o.D();var u=n,p=n.K();switch(p==197&&((u=new h.Ea).bd(n,!1),p=1736),p){case 33:return this.sI(u,o);case 550:case 1607:case 1736:return this.eI(u,o);default:throw h.i.ga("not implemented")}},a.prototype.kz=function(n,o,u,p){if(0>p)throw h.i.O();if(n.B())return[];o=o.D();var y=n,g=n.K();switch(g==197&&((y=new h.Ea).bd(n,!1),g=1736),g){case 33:return this.OU(y,o,u,p);case 550:case 1607:case 1736:return this.oU(y,o,u,p);default:throw h.i.ga("not implemented")}},a.prototype.XT=function(n,o,u,p){if(n.K()==1736&&u&&(u=new h.l,n.A(u),u=h.ua.Xd(null,u,!1),(p?h.jd.Zd(n,o,0):h.jd.Zd(n,o,u))!=0)){var y=new h.bm(o,0,0);return p&&y.RJ(!0),y}var g=n.Ha();y=new h.h;for(var b=u=-1,S=17976931348623157e292,$=0;g.ab();)for(;g.Ia();){var I=g.ia();I=I.ic(I.ge(o,!1));var C=h.h.zc(I,o);C<S?($=1,y=I,u=g.xb(),b=g.gb,S=C):C==S&&$++}return y=new h.bm(y,u,Math.sqrt(S)),p&&(g.Wb(u,b),I=g.ia(),p=0>h.h.Wq(o,I.bc(),I.xc()),1<$&&(($=new O).reset(),p=$.YN(o,p,n,u,b)),y.RJ(p)),y},a.prototype.sI=function(n,o){return n=n.D(),o=h.h.ub(n,o),new h.bm(n,0,o)},a.prototype.eI=function(n,o){for(var u=n.vb(0),p=n.I(),y=n=0,g=0,b=17976931348623157e292,S=0;S<p;S++){var $=new h.h;u.uc(2*S,$);var I=h.h.zc($,o);I<b&&(y=$.x,g=$.y,n=S,b=I)}return(o=new h.bm).by(y,g,n,Math.sqrt(b)),o},a.prototype.OU=function(n,o,u,p){return p==0?[]:(u*=u,n=n.D(),(o=h.h.zc(n,o))<=u?(u=[],(p=new h.bm).by(n.x,n.y,0,Math.sqrt(o)),u[0]=p):u=[],u)},a.prototype.oU=function(n,o,u,p){if(p==0)return[];var y=n.vb(0),g=n.I();n=[],u*=u;for(var b=0;b<g;b++){var S=y.read(2*b),$=y.read(2*b+1),I=o.x-S,C=o.y-$;(I=I*I+C*C)<=u&&((C=new h.bm).by(S,$,b,Math.sqrt(I)),n.push(C))}return o=n.length,n.sort(function(R,L){return R.La<L.La?-1:R.La==L.La?0:1}),p>=o||(n.length=p),n.slice(0)},a.instance=null,a}(h.Ge);h.Hx=w}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 4},c.prototype.W=function(a,n,o,u,p){return h.cm.tB(a,n,o,u,p)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Ku=function(a){return h.Xt.ry(a)},c.prototype.yn=function(a,n,o){h.Xt.xD(a,n,o)},c.instance=null,c}(h.Ge);h.uL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 33},c.prototype.W=function(a,n,o,u,p){return a===1073741824?!h.vd.uB(n,o,u,4,p):h.vd.uB(n,o,u,a,p)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Ku=function(a){return h.Xt.ry(a)},c.prototype.yn=function(a,n,o){h.Xt.xD(a,n,o)},c.instance=null,c}(h.Ge);h.fj=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){if(this.od=o,this.lT=n,this.za=-1,c==null)throw h.i.O();this.Ak=c,this.Oj=a}return w.prototype.next=function(){var c;if((c=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");return this.$B(c)}return null},w.prototype.Ma=function(){return this.za},w.prototype.$B=function(c){if(c==null)throw h.i.O();return h.Ix.YJ(c,this.Oj,this.lT,this.od)},w.prototype.re=function(){},w}();h.vL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 26},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.vL(a,n,o,u)},c.prototype.ts=function(a,n,o,u,p){return 0<(u!==void 0?h.Ix.ts(a,n,o,u,p):h.Ix.ts(a,n,!1,null,o))},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.$l=O}(B||(B={})),function(h){var O=function(){function p(){this.Aq=0}return p.prototype.iX=function(y){this.Aq&=-2,this.Aq|=y?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.SF=function(){return this.Yp()?0:1},p}();h.tY=O;var w=function(){},c=function(p,y,g,b){this.x=p,this.y=y,this.Ci=g,this.zm=b},a=function(){function p(y){this.Ce=y}return p.prototype.compare=function(y,g,b){return y=y.ka(b),g=this.Ce.lf.read(2*g),0>(g-=y=this.Ce.lf.read(2*y))?-1:0<g?1:0},p}(),n=function(){function p(y){this.Ce=y}return p.prototype.compare=function(y,g,b){g=this.Ce.hb[g],y=this.Ce.hb[y.ka(b)];var S=g.Yp(),$=y.Yp();b=g.oe.Me(this.Ce.Oo,0);var I=y.oe.Me(this.Ce.Oo,0);return b==I&&((S=.5*((b=Math.min(S?g.oe.oa:g.oe.ma,$?y.oe.oa:y.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(S=b),b=g.oe.Me(S,0),I=y.oe.Me(S,0)),b<I?-1:b>I?1:0},p}(),o=function(){function p(y,g){this.TI=new h.h,this.parent=y,this.ZR=g}return p.prototype.qr=function(y,g,b){var S=this.parent,$=this.ZR;b.Wd(y,g,function(I,C){return S.Oh(I,C,$)})},p.prototype.bq=function(y){return y=this.parent.ii.get(y),this.parent.lf.uc(2*(y>>1),this.TI),this.TI.y+((1&y)!=0?this.parent.Qj:-this.parent.Qj)},p}(),u=function(){function p(y,g,b,S,$){this.iH=y.description,this.Y=y,this.Sg=g,this.Qj=h.ua.mj(this.Sg,y,!1),this.Do=h.ua.mj(this.Sg,y,!0),this.sA=b,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new h.lp,this.fb=new h.$j,this.le=new h.Nd,this.UG=this.sl=$}return p.prototype.$S=function(){return this.UG=!0,(!h.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?h.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},p.prototype.fC=function(y,g){var b=this.lf.read(2*y);y=this.lf.read(2*y+1);var S=this.lf.read(2*g);g=this.lf.read(2*g+1);var $=!h.$t.Ev(b,y,S,g,this.Qj*this.Qj);return $||this.Y.Eb()!=0&&b==S&&y==g},p.prototype.BE=function(){for(var y=this.Y,g=y.yf?3:2,b=0,S=y.ea();b<S;b++)if(y.Ka(b)<g)return this.le=new h.Nd(1,b,0),!1;return!0},p.prototype.yE=function(y){var g=this.Y,b=g.Ha(),S=g.hasAttribute(1);for(g=S?h.ua.rE(this.Sg,g,!1):0;b.ab();)for(;b.Ia();){var $=b.ia();if(!($.Rb()>this.Qj)){if(y&&S){var I=$.yv(1,0);if($=$.yv(1,0),Math.abs($-I)>g)continue}return this.le=new h.Nd(2,b.xb(),-1),!1}}return!0},p.prototype.hO=function(){var y=this.Y,g=null;h.ba.Ic(this.Y.K())&&(g=this.Y);var b=(this.UG||this.sl)&&g!=null,S=y.I();this.lf=y.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*S),this.hi=new h.ja(0),this.hi.Jb(2*S),b&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(S));for(var $=y=0;$<S;$++)if(this.ii.add(2*$),this.ii.add(2*$+1),this.hi.add(2*$),this.hi.add(2*$+1),b){for(;$>=g.Wc(y);)y++;this.Hl.add(y)}for(new h.Zt().sort(this.hi,0,2*S,new o(this,b)),this.fb.clear(),this.fb.Xo(new a(this)),this.fb.Ee(S),g=0,S*=2;g<S;g++)if(b=this.hi.get(g),b=(y=this.ii.get(b))>>1,(1&y)==0){if(y=this.fb.addElement(b,-1),($=this.fb.xe(y))!=-1&&!this.fC(this.fb.ka($),b))return this.le=new h.Nd(3,b,this.fb.ka($)),!1;var I=this.fb.lb(y);if(I!=-1&&!this.fC(this.fb.ka(I),b))return this.le=new h.Nd(3,b,this.fb.ka(I)),!1}else if(y=this.fb.search(b,-1),$=this.fb.xe(y),I=this.fb.lb(y),this.fb.wd(y,-1),$!=-1&&I!=-1&&!this.fC(this.fb.ka($),this.fb.ka(I)))return this.le=new h.Nd(3,this.fb.ka($),this.fb.ka(I)),!1;return!0},p.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},p.prototype.jO=function(){var y=new h.hd;y.Ib(this.Y);var g=new h.Nd;return!h.bu.fI(!1,y,this.Qj,g,this.od)||(g.Lo=y.Va(g.Lo),g.Mo=y.Va(g.Mo),this.le.Yt(g),!1)},p.prototype.iO=function(){var y=this.Y,g=y.Ha();for(y=y.Ha();g.ab();)for(;g.Ia();){var b=g.ia();if(!g.Sn()||!g.VS()){y.wW(g);do for(;y.Ia();){var S=y.ia();if((S=b.Br(S,this.Qj,!0))!=0)return this.le=new h.Nd(S==2?5:4,g.xb(),y.xb()),!1}while(y.ab())}}return!0},p.prototype.nO=function(){var y=this.Y;this.hb.length=0,this.ro.length=0,this.ag=y.Ha(),this.ag.EB();var g=new h.ja(0);g.Jb(10);var b=NaN,S=0,$=0;for(y=2*y.I();$<y;$++){var I=this.hi.get($);if((1&(I=this.ii.get(I)))==0){I>>=1;var C=this.lf.read(2*I),R=this.lf.read(2*I+1);if(g.size!=0&&(C!=b||R!=S)){if(!this.LI(g))return!1;g!=null&&g.clear(!1)}g.add(I),b=C,S=R}}return!!this.LI(g)},p.prototype.mO=function(){for(var y=this.Y,g=Array(y.ea()),b=0,S=y.ea();b<S;b++)g[b]=y.Pn(b);S=new w;var $=new h.h;b=this.hi.get(0);var I=(b=this.ii.get(b))>>1;this.lf.uc(2*I,$);var C=g[b=this.Hl.get(I)],R=y.Ca(b),L=y.Wc(b)-1;S.gl=I==R||I==L,S.jy=this.sl?!C&&S.gl:S.gl,S.Ci=b,S.x=$.x,S.y=$.y,S.zm=I;for(var N=new w,U=1,W=this.hi.size;U<W;U++)if(b=this.hi.get(U),(1&(b=this.ii.get(b)))==0){I=b>>1,this.lf.uc(2*I,$),(b=this.Hl.get(I))!=S.Ci&&(C=g[b],R=y.Ca(b),L=y.Wc(b)-1);var j=I==R||I==L,K=this.sl?!C&&S.gl:S.gl;if(N.x=$.x,N.y=$.y,N.Ci=b,N.zm=I,N.jy=K,N.gl=j,N.x==S.x&&N.y==S.y){if(this.sl){if(!(N.jy&&S.jy||N.Ci==S.Ci&&(N.gl||S.gl)))return this.le=new h.Nd(8,N.zm,S.zm),!1}else if(!N.gl||!S.gl)return this.le=new h.Nd(5,N.zm,S.zm),!1}b=S,S=N,N=b}return!0},p.prototype.EE=function(){for(var y=this.Y,g=[],b=-1,S=!1,$=0,I=y.ea();$<I;$++)y.Gv($)&&(S=!1,b++,$<I-1&&(y.Gv($+1)||(S=!0))),g[$]=S?b:-1;S=new h.h,$=this.hi.get(0);var C=($=this.ii.get($))>>1;this.lf.uc(2*C,S),$=this.Hl.get(C),b=new c(S.x,S.y,$,C,g[$]),y=[];var R=1;for(I=this.hi.size;R<I;R++)if($=this.hi.get(R),(1&($=this.ii.get($)))==0){if(C=$>>1,this.lf.uc(2*C,S),$=this.Hl.get(C),($=new c(S.x,S.y,$,C,g[$])).x==b.x&&$.y==b.y){if($.Ci==b.Ci)return this.le=new h.Nd(9,$.zm,b.zm),!1;0<=g[$.Ci]&&g[$.Ci]==g[b.Ci]&&(y.length!=0&&y[y.length-1]==b||y.push(b),y.push($))}b=$}if(y.length==0)return!0;for($=new h.lp(!0),h.P.bv(g,-1),S=-1,(R=new h.h).Sc(),b=0,I=y.length;b<I;b++){(C=y[b]).x==R.x&&C.y==R.y||(S=$.Rh(0),R.x=C.x,R.y=C.y);var L=g[C.Ci];L==-1&&(L=$.Rh(2),g[C.Ci]=L),$.addElement(L,S),$.addElement(S,L)}for((I=new h.ja(0)).Jb(10),b=$.ke;b!=-1;b=$.lz(b))if((1&(y=$.KF(b)))==0&&(2&y)!=0){for(y=-1,I.add(b),I.add(-1);0<I.size;){if(S=I.Gc(),I.Jf(),R=I.Gc(),I.Jf(),(1&(C=$.KF(R)))!=0){y=(2&C)==0?S:R;break}for($.aX(R,1|C),C=$.sc(R);C!=-1;C=$.lb(C))(L=$.getData(C))!=S&&(I.add(L),I.add(R))}if(y!=-1){for($=-1,b=0,I=g.length;b<I;b++)if(g[b]==y){$=b;break}return this.le=new h.Nd(10,$,-1),!1}}return!0},p.prototype.oO=function(){var y=this.Y;if(0>=y.He())return this.le=new h.Nd(6,y.ea()==1?1:-1,-1),0;if(y.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=h.ja.rf(y.ea(),0),this.EA=h.ja.rf(y.ea(),-1);for(var g=-1,b=0,S=0,$=y.ea();S<$;S++){var I=y.Kr(S);if(this.vo.write(S,0>I?0:256),0<I)g=S,b=I;else{if(I==0)return this.le=new h.Nd(6,S,-1),0;if((0>g||b<Math.abs(I))&&(this.le=new h.Nd(7,S,-1),this.sl))return 0;this.EA.write(S,g)}}for(this.et=y.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),$=y.I(),this.Oo=NaN,(y=new h.ja(0)).Jb(10),this.Sq=h.ja.rf($,-1),this.Jw=h.ja.rf($,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new n(this)),g=0,$*=2;0<this.et&&g<$;g++)if(b=this.hi.get(g),(1&(b=this.ii.get(b)))==0){if(b>>=1,(S=this.lf.read(2*b+1))!=this.Oo&&y.size!=0){if(!this.vt(y))return 0;y!=null&&y.clear(!1)}y.add(b),this.Oo=S}return 0<this.et&&!this.vt(y)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},p.prototype.LI=function(y){if(y.size==1)return!0;for(var g=0,b=y.size;g<b;g++){var S=y.get(g);this.ag.Wb(S);var $=this.ag.ni();this.hb.push(this.Uu($,S,this.ag.gb,!0)),this.ag.ia(),$=this.ag.ia(),this.hb.push(this.Uu($,S,this.ag.gb,!1))}var I=this;for(this.hb.sort(function(L,N){return I.SP(L,N)}),(S=this.oh.ke)==-1&&(S=this.oh.Rh(0)),this.oh.hn(this.hb.length),g=0,b=this.hb.length;g<b;g++)this.oh.addElement(S,g);g=!0;for(var C=b=-1;g&&(g=!1,($=this.oh.sc(S))!=-1);)for(var R=this.oh.lb($);R!=-1;)if(b=this.oh.getData($),C=this.oh.getData(R),(b=this.hb[b].Ko)!=(C=this.hb[C].Ko))$=R,R=this.oh.lb($);else if(g=!0,this.oh.kd(S,$),$=this.oh.xe(R),(R=this.oh.kd(S,R))==-1||$==-1)break;if(g=this.oh.ds(S),this.oh.GE(S),0<g)return this.le=new h.Nd(5,b,C),!1;for(g=0,b=y.size;g<b;g++)this.qB(this.hb[g]);return this.hb.length=0,!0},p.prototype.vt=function(y){for(var g=0,b=y.size;g<b;g++){var S=y.get(g),$=this.Sq.read(S);if($!=-1){var I=this.fb.ka($);this.Bj.add(I),this.fb.wd($,-1),this.qB(this.hb[I]),this.hb[I]=null,this.Sq.write(S,-1)}($=this.Jw.read(S))!=-1&&(I=this.fb.ka($),this.Bj.add(I),this.fb.wd($,-1),this.qB(this.hb[I]),this.hb[I]=null,this.Jw.write(S,-1))}for(g=0,b=y.size;g<b;g++){if(S=y.get(g),this.ag.Wb(S),($=this.ag.ni()).oa>$.ma){var C=this.ag.xb(),R=this.Uu($,S,this.ag.gb,!0);0<this.Bj.size?(I=this.Bj.Gc(),this.Bj.Jf(),this.hb[I]=R):(I=this.hb.length,this.hb.push(R)),$=this.fb.addElement(I,-1),this.Sq.read(C)==-1?this.Sq.write(C,$):this.Jw.write(C,$),(3&this.vo.read(this.ag.gb))==0&&this.Qm.add($)}this.ag.ia(),($=this.ag.ia()).oa<$.ma&&(C=this.ag.kk(),R=this.Uu($,S,this.ag.gb,!1),0<this.Bj.size?(I=this.Bj.Gc(),this.Bj.Jf(),this.hb[I]=R):(I=this.hb.length,this.hb.push(R)),$=this.fb.addElement(I,-1),this.Sq.read(C)==-1?this.Sq.write(C,$):this.Jw.write(C,$),(3&this.vo.read(this.ag.gb))==0&&this.Qm.add($))}for(g=0,b=this.Qm.size;g<b&&0<this.et;g++)if($=this.Qm.get(g),(3&this.vo.read(this.hb[this.fb.ka($)].DA))==0){y=-1,S=this.fb.xe($);var L=$;R=null,I=-1;for(var N=0;S!=-1&&(I=this.fb.ka(S),I=(R=this.hb[I]).DA,(3&(N=this.vo.read(I)))==0);)L=S,S=this.fb.xe(S);S==-1?(C=1,S=L):(y=(3&N)==1?I:this.EA.read(I),C=R.SF()!=0?0:1,S=this.fb.lb(S));do{if(I=this.fb.ka(S),I=(R=this.hb[I]).DA,(3&(L=this.vo.read(I)))==0){if(C!=R.SF())return this.le=new h.Nd(6,I,-1),!1;if(L=252&L|(N=C==0||R.Yp()?2:1),this.vo.write(I,N),N==2&&this.le.Lj==0&&this.EA.read(I)!=y&&(this.le=new h.Nd(7,I,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&L)==1&&(y=I),L=S,S=this.fb.lb(S),C=C!=0?0:1}while(L!=$)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},p.prototype.Uu=function(y,g,b,S){if(y.K()!=322)throw h.i.Ra();return(y=this.nP(y)).Ko=g,y.DA=b,y.Aq=0,y.iX(S),y},p.prototype.nP=function(y){if(0<this.ro.length){var g=this.ro[this.ro.length-1];--this.ro.length,y.copyTo(g.oe)}else(g=new O).oe=h.NC.kg(y);return g},p.prototype.qB=function(y){y.oe.K()==322&&this.ro.push(y)},p.prototype.fU=function(){for(var y=this.Y.I(),g=new h.ja(0),b=0;b<y;b++)g.add(b);var S=this;for(g.Wd(0,y,function($,I){return S.Qu($,I)}),b=1;b<y;b++)if(this.Qu(g.get(b-1),g.get(b))==0)return this.le=new h.Nd(3,g.get(b-1),g.get(b)),0;return 2},p.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},p.prototype.jV=function(){return this.$S()},p.prototype.kU=function(){for(var y=this.Y.I(),g=new h.ja(0),b=0;b<y;b++)g.add(b);var S=this;g.Wd(0,y,function(L,N){return S.KO(L,N)});var $=Array(y);for(h.P.bv($,!1),$[g.get(0)]=!0,b=1;b<y;b++){var I=g.get(b-1),C=g.get(b);this.Qu(I,C)==0?$[C]=!1:$[C]=!0}g=this.Y.Ja(),I=this.Y,C=0;var R=1;for(b=0;b<y;b++)$[b]?R=b+1:(C<R&&g.Gd(I,C,R),C=b+1);return C<R&&g.Gd(I,C,R),g.Eh(2,this.Do),g},p.prototype.IV=function(){var y=this.Y,g=y.Ha(),b=y.Ha(),S=this.Y.Ja(),$=this.Y,I=y.hasAttribute(1),C=I?h.ua.rE(this.Sg,y,!0):0,R=new h.ja(0),L=new h.ja(0);for(R.Jb(h.P.truncate(y.I()/2+1)),L.Jb(h.P.truncate(y.I()/2+1));g.ab();)if(b.ab(),!(2>y.Ka(g.gb))){b.yW();for(var N,U,W=!0;g.Ia();){var j=g.ia(),K=b.ni();if(g.xb()>b.xb())break;W&&(R.add(g.xb()),L.add(b.kk()),W=!1),U=R.Gc();var se=g.kk();if(1<se-U){var ne=new h.h;ne.vc(y.Oa(U),y.Oa(se)),N=ne.length()}else N=j.Rb();U=L.Gc(),1<(se=b.xb())-U?((ne=new h.h).vc(y.Oa(U),y.Oa(se)),U=ne.length()):U=K.Rb(),N>this.Do?R.add(g.kk()):I&&(N=y.Vc(1,R.Gc(),0),j=j.jv(1,0),Math.abs(j-N)>C&&R.add(g.kk())),U>this.Do?L.add(b.xb()):I&&(N=y.Vc(1,L.Gc(),0),j=K.jv(1,0),Math.abs(j-N)>C&&L.add(b.xb()))}if(R.Gc()<L.Gc()?R.size>L.size?R.Jf():L.Jf():(R.Gc()!=L.Gc()&&L.Jf(),L.Jf()),2<=L.size+R.size){for(W=new h.Ta,K=0,j=R.size;K<j;K++)$.we(R.get(K),W),K==0?S.nf(W):S.lineTo(W);for(K=L.size-1;0<K;K--)$.we(L.get(K),W),S.lineTo(W);$.ec(g.gb)?S.Cp():0<L.size&&($.we(L.get(0),W),S.lineTo(W))}R!=null&&R.clear(!1),L!=null&&L.clear(!1)}return S.Eh(2,this.Do),S},p.prototype.mV=function(){return this.zX()},p.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?h.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&h.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},p.ts=function(y,g,b,S,$){if(S!=null&&(S.Lj=0,S.Lo=-1,S.Mo=-1),y.B())return 1;var I=y.K();if(I==33)return 1;var C=h.ua.mj(g,y,!1);if(I==197)return g=new h.l,y.A(g),g.Di(C)?(S!=null&&(S.Lj=2,S.Lo=-1,S.Mo=-1),0):1;if(h.ba.zd(I))return(C=new h.Ua(y.description)).pc(y,!0),p.ts(C,g,b,S,$);var R=y.qm(C);if((b=b?-1:R)!=-1)return b;if(g=new p(y,g,b,$,!1),I==550)b=g.fU();else if(I==1607)b=g.EV();else{if(I!=1736)throw h.i.Ra();b=g.jV()}return y.Eh(b,C),S!=null&&b==0&&S.Yt(g.le),b},p.YJ=function(y,g,b,S){if(y.B())return y;var $=y.K();if($==33)return y;var I=h.ua.mj(g,y,!1);if($==197)return g=new h.l,y.A(g),g.Di(I)?y.Ja():y;if(h.ba.zd($))return($=new h.Ua(y.description)).pc(y,!0),p.YJ($,g,b,S);if(I=y.qm(I),(b=b?-1:I)==2)return y;if(y=new p(y,g,b,S,!1),$==550)y=y.kU();else if($==1607)y=y.IV();else{if($!=1736)throw h.i.Ra();y=y.mV()}return y},p.prototype.Oh=function(y,g,b){if(y==g)return 0;y=this.ii.get(y);var S=this.ii.get(g);g=y>>1;var $=S>>1,I=new h.h,C=new h.h;return this.lf.uc(2*g,I),I.y+=(1&y)!=0?this.Qj:-this.Qj,this.lf.uc(2*$,C),C.y+=(1&S)!=0?this.Qj:-this.Qj,(y=I.compare(C))==0&&b?0>(b=this.Hl.get(g)-this.Hl.get($))?-1:0<b?1:0:y},p.prototype.Qu=function(y,g){if(y==g)return 0;var b=this.Y,S=b.Oa(y),$=b.Oa(g);if(S.x<$.x)return-1;if(S.x>$.x)return 1;if(S.y<$.y)return-1;if(S.y>$.y)return 1;for(S=1;S<this.jT;S++){$=this.iH.ld(S);for(var I=h.sa.Wa($),C=0;C<I;C++){var R=b.Vc($,y,C),L=b.Vc($,g,C);if(R<L)return-1;if(R>L)return 1}}return 0},p.prototype.KO=function(y,g){var b=this.Qu(y,g);return b==0?y<g?-1:1:b},p.prototype.SP=function(y,g){if(y===g)return 0;var b=y.oe.lg();y.Yp()&&b.Uq(),y=g.oe.lg(),g.Yp()&&y.Uq(),g=b.su();var S=y.su();return S==g?(g=b.yi(y),Math.abs(g)<=8881784197001252e-31*(Math.abs(y.x*b.y)+Math.abs(y.y*b.x))&&(g--,g++),0>g?1:0<g?-1:0):g<S?-1:1},p}();h.Ix=u}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 30},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u).next()):new h.wL(a,n,o,u)},c.gp=function(a,n,o,u){var p=a.Eb(),y=n.Eb();if(a.B()&&n.B())return p>y?a:n;if(a.B())return n;if(n.B())return a;var g=new h.l,b=new h.l,S=new h.l;return a.A(g),n.A(b),S.L(g),S.$b(b),g=h.ua.Xd(o,S,!0),b=a.K(),S=n.K(),b==33&&S==33?c.WU(a,n,g):b!=S?0<p||0<y?p>y?a:n:b==550?c.dI(a,n,g):c.dI(n,a,g):h.Hg.gp(a,n,o,u)},c.WU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D(),p=n.D(),y=new h.ee(a.description);return h.h.zc(u,p)>o&&(y.add(a),y.add(n)),y},c.dI=function(a,n,o){var u=a.vb(0),p=a.I(),y=n.D(),g=a.Ja();o=o*Math.sqrt(2)*1.00001;var b=new h.l;if(a.A(b),b.X(o,o),b.contains(y)){o*=o,b=!1;for(var S=[],$=0;$<p;$++)S[$]=!1;for($=0;$<p;$++){var I=u.read(2*$),C=u.read(2*$+1);(I-=y.x)*I+(C-=y.y)*C<=o&&(b=!0,S[$]=!0)}if(b)for($=0;$<p;$++)S[$]||g.Gd(a,$,$+1);else g.Gd(a,0,p),g.add(n)}else g.Gd(a,0,p),g.add(n);return g},c.instance=null,c}(h.Ge);h.Jx=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){this.vs=a==null,this.za=-1,this.Sd=c,this.wg=n,this.IT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.gp(c,this.IT,this.wg,this.Vb)):null;var c},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.wL=O}(B||(B={})),function(h){var O=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},a}(),w=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.kN=function(n){this.Ir+=n.zx,this.rj.push(n)},a.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(n){return n===this},a}(),c=function(){function a(n,o,u){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=n,this.wg=o,this.Vb=u}return a.ZD=function(n){var o=[],u=0;for(n=Object.keys(n);u<n.length;u++)o.push(Number(n[u]));return o.sort(function(p,y){return p-y}),o},a.prototype.aG=function(n){var o=this.Fo[n],u=a.ZD(o)[0],p=o[u],y=p.iy().Vy;return p=p.iy().vK,delete o[u],p&&(y=h.$l.local().W(y,this.wg,!1,this.Vb),n==0&&y.K()==33&&(n=new h.ee(y.description),y.B()||n.add(y),y=n)),y},a.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw h.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},a.prototype.Ma=function(){return this.za},a.prototype.lK=function(){if(this.Jc)return!0;var n=null;if(this.Sd!=null&&(n=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.op.Bp(this.Vb),n!=null){var o=n.Eb();this.vH[o]=!0,o>=this.Bk&&!this.eA&&(this.HD(o,!1,n),o>this.Bk&&!this.eA&&this.uW(o))}if(0<this.kq)for(o=0;o<=this.Bk;o++)for(;1<this.wq[o]&&(n=this.AO(o)).length!=0;)n=h.Hg.QP(n,this.wg,this.Vb),this.HD(o,!0,n);return this.Jc},a.prototype.AO=function(n){for(var o=[],u=[],p=this.Fo[n],y=a.ZD(p),g=0;g<y.length;g++){var b=y[g],S=p[b];if(this.Jc||1e4<S.Ir&&1<S.rj.length){for(this.wq[n]-=S.rj.length,this.kq-=S.rj.length;0<S.rj.length;)o.push(S.iy().Vy),S.OV();u.push(b)}}for(g=0;g<u.length;g++)delete p[u[g]];return o},a.prototype.uW=function(n){for(var o=0;o<n;o++)this.Fo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.HD=function(n,o,u){var p=new O;if(p.Az(),p.Vy=u,u=a.$R(u),p.zx=u,u=a.YR(u),n+1>this.Fo.length)for(var y=0,g=Math.max(2,n+1);y<g;y++)this.Fo.push([]);(y=this.Fo[n][u])===void 0&&(y=new w,this.Fo[n][u]=y),p.vK=o,y.kN(p),this.wq[n]++,this.kq++,this.Bk=Math.max(this.Bk,n)},a.YR=function(n){return 0<n?h.P.truncate(Math.log(n)/Math.log(4)+.5):0},a.$R=function(n){var o=n.K();if(h.ba.zj(o))return n.I();if(o==33)return 1;if(o==197)return 4;if(h.ba.zd(o))return 2;throw h.i.Ra()},a.prototype.re=function(){this.lK()},a}();h.yL=c}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Fe(c,w),c.prototype.K=function(){return 1},c.prototype.W=function(a,n,o,u){return u===void 0?new h.yL(a,n,o):this.bQ(a,n,o,u)},c.prototype.bQ=function(a,n,o,u){return a=new h.$c([a,n]),this.W(a,o,u).next()},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.Ih=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",O=function(){function c(a,n,o,u){this.Vs=new h.l,this.BT=a,this.CT=n,this.oq=u,this.wo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,u?this.wo=n.ea():this.td=n.Ha()),this.tl||(p=n.Cb)!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,u?this.wo=a.ea():this.td=a.Ha()),this.tl||(this.ei=u?h.ua.hR(a,n,o,1<=a.qm(0),1<=n.qm(0)):h.ua.gR(a,n,o))}return c.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.sU();break;case 1:a=this.tU();break;case 2:a=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},c.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},c.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},c.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},c.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},c.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},c.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Wo(a,this.ra),this.Yb=2,!0},c.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},c}(),h.am=O}(B||(B={})),function(h){(h=h.JL||(h.JL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(B||(B={})),function(h){h.LC=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,y,g){var b=[0,0,0],S=[0,0,0],$=[0,0,0],I=[0,0,0,0],C=new h.ha(0),R=new h.ha(0),L=new h.ha(0);if(p!=null||y!=null||g!=null)if(h.s.vi(c))h.$g.ub(w,a,n,o,u,p,y,g);else{o=h.F.ca(o),a=h.F.ca(a);var N=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.$(a,o)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),y!=null&&(y.u=0),g!=null&&(g.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(w,c)),y!=null&&(y.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(g!=null&&(g.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(N),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(w,c)),y!=null&&(y.u=0),g!=null&&(g.u=0))}else if(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897)||h.s.$(a,o)||h.s.$(h.s.R(N),3.141592653589793)||h.s.Dd(n))return void h.Yk.ub(w,c,a,n,o,u,p,y,g);var U=Math.sqrt(1-c);o=h.F.ca(o-a),a=0,h.F.el(1,c,n,a,0,C,R,L),b[0]=C.u,b[1]=R.u,b[2]=L.u,h.F.el(1,c,u,o,0,C,R,L),S[0]=C.u,S[1]=R.u,S[2]=L.u,$[0]=0,$[1]=0,$[2]=-1*c*h.F.n(1,c,n)*Math.sin(n),0>o?h.F.Yq($,S,b,I,0):h.F.Yq($,b,S,I,0),R=[0,0,0],L=[0,0,0];var W=[0,0,0];b=[0,0,0],C=[0,0,0];var j=Math.acos(I[2]/1),K=1-c,se=Math.tan(j),ne=1+se*se/K,pe=2*$[2]*se/K;for(K=(-pe+(se=Math.sqrt(pe*pe-4*ne*($[2]*$[2]/K-1))))/(ne*=2),pe=(-pe-se)/ne,se=Math.tan(j),j=(K+pe)/2,$=((ne=se*K+$[2])+(se*pe+$[2]))/2,se=h.F.ip(K-j,ne-$),K=$/U*1.570796326794897,pe=0;100>pe&&(ne=(ne=h.F.w(c,K))*ne/Math.cos(K)*(Math.sin(K)-$*ne/(1-c)),!h.s.Dd(ne));pe++)K-=ne;$=h.F.n(1,c,K)*Math.cos(K),se=1-se/($=Math.sqrt(($-j)*($+j))),se*=2-se,ne=h.F.qn(R),j=h.F.qn(L),K=h.F.qn(W);var he=h.F.Ut(W,R);pe=h.F.Ut(W,L),h.F.yx(W,R,b),h.F.yx(W,L,C),R=Math.acos(he/(K*ne)),L=Math.acos(pe/(K*j)),L*=h.s.Mb(1,h.F.Ut(b,C)),(1.570796326794897<=h.s.R(R)&&1.570796326794897<=h.s.R(L)||3.141592653589793<h.s.R(R-L))&&(R=(3.141592653589793-h.s.R(R))*h.s.Mb(1,R),L=(3.141592653589793-h.s.R(L))*h.s.Mb(1,L)),b=h.F.Sj(se,L),C=h.F.q($,se,h.F.Sj(se,R)),b=h.F.q($,se,b),b=h.s.R(b-C)*w,R=new h.ha(0),L=new h.ha(0),W=I[1]/1,W*=-h.s.Mb(1,N),C=Math.acos(W)*h.s.Mb(1,N),O.sf(w,c,a,n,b,C,R,L),h.s.$(o,R.u)&&h.s.$(u,L.u)||(se=h.F.ip(h.F.ca(o-R.u),u-L.u),O.sf(w,c,a,n,b,h.F.ca(C+3.141592653589793),R,L),(ne=h.F.ip(h.F.ca(o-R.u),u-L.u))<se&&(C=h.F.ca(C+3.141592653589793))),R=[0,0,0,0],L=[0,0,0,0],se=[0,0,0],w=[0,0,0],a=[0,0,0],n=[0,0,0],W=[0,0,0],($=[0,0,0])[0]=0,$[1]=0,$[2]=U,se[0]=0,se[1]=0,se[2]=0,h.F.Yq(se,$,S,R,0),h.s.Dd(u)?(w[0]=S[0],w[1]=S[1],w[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(c=h.F.n(1,c,u)*Math.cos(u),w[0]=0,w[1]=0,S[2]+=Math.tan(1.570796326794897-h.s.R(u))*c*h.s.Mb(1,u),a[0]=c*Math.cos(o)-c*Math.sin(o),a[1]=c*Math.sin(o)+c*Math.cos(o)),a[2]=S[2],h.F.Yq(S,a,w,L,1),h.F.yx(L,R,n),h.F.yx(L,I,W),W=h.F.Ut(n,W)/(h.F.qn(n)*h.F.qn(W)),W*=h.s.Mb(1,N),o=Math.acos(W)*-h.s.Mb(1,N),(0<C&&0<o||0>C&&0>o)&&(o=h.F.ca(o+3.141592653589793)),p!=null&&(p.u=b),y!=null&&(y.u=C),g!=null&&(g.u=o)}}},O.sf=function(w,c,a,n,o,u,p,y){var g=[0,0,0],b=[0,0,0],S=[0,0,0],$=[0,0,0],I=[0,0,0],C=[0,0,0],R=[0,0,0],L=[0,0,0,0],N=new h.ha(0),U=new h.ha(0),W=new h.ha(0),j=new h.ha(0),K=new h.ha(0),se=new h.ha(0);if(p!=null&&y!=null)if(h.s.vi(c))h.$g.sf(w,a,n,o,u,p,y);else if(h.s.Dd(o))p!=null&&(p.u=a),y!=null&&(y.u=n);else if(u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),a=h.F.ca(a),n=h.F.ca(n),1.570796326794897<h.s.R(n)&&(a=h.F.ca(a+3.141592653589793),n=h.s.Mb(3.141592653589793,n)-n),h.s.$(h.s.R(n),1.570796326794897)||h.s.Dd(n)||h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))h.Yk.sf(w,c,a,n,o,u,p,y);else{var ne=Math.sqrt(1-c);for(w=o/w,h.F.el(1,c,n,0,0,j,K,se),g[0]=j.u,g[1]=K.u,g[2]=K.u,R[0]=0,R[1]=0,R[2]=-1*c*h.F.n(1,c,n)*Math.sin(n),j=h.F.n(1,c,n),K=h.F.ca(1.570796326794897-u),se=Math.sin(K),o=Math.cos(n),n=Math.sin(n),I[0]=j*o-n*se,I[1]=Math.cos(K),I[2]=(1-c)*j*n+o*se,0>u?h.F.Yq(R,I,g,L,0):h.F.Yq(R,g,I,L,0),g=Math.acos(L[2]/1),L=Math.atan2(-L[1],-L[0]),n=1-c,K=1+(I=Math.tan(g))*I/n,n=(-(j=2*R[2]*I/n)+(I=Math.sqrt(j*j-4*K*(R[2]*R[2]/n-1))))/(K*=2),j=(-j-I)/K,I=Math.tan(g),g=(n+j)/2,R=((K=I*n+R[2])+(I*j+R[2]))/2,I=h.F.ip(n-g,K-R),ne=R/ne*1.570796326794897,n=0;100>n&&(j=(j=h.F.w(c,ne))*j/Math.cos(ne)*(Math.sin(ne)-R*j/(1-c)),!h.s.Dd(j));n++)ne-=j;ne=h.F.n(1,c,ne)*Math.cos(ne),R=1-I/(ne=Math.sqrt((ne-g)*(ne+g))),R*=2-R,C=Math.acos(h.F.Ut(C,b)/(h.F.qn(C)*h.F.qn(b))),C*=h.s.Mb(1,b[0]),u=(h.F.q(ne,R,h.F.Sj(R,C))+w*h.s.Mb(1,u))/h.F.Ch(ne,R),u=h.F.ca(1.570796326794897*u),u=h.F.Tq(R,u),h.F.n(ne,R,u),I=h.F.ca(L+a),a=Math.cos(I),u=Math.sin(I),S[0]=$[0]*a+$[1]*-u,S[1]=$[0]*u+$[1]*a,S[2]=$[2],h.F.eO(c,S[0],S[1],S[2],W,U,N),p!=null&&(p.u=U.u),y!=null&&(y.u=W.u)}},O}()}(B||(B={})),function(h){var O=function(){function o(u){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=u}return o.prototype.compare=function(u,p,y){return this.g.Hc(p,this.xt),this.g.Hc(u.ka(y),this.yt),this.xt.compare(this.yt)},o}(),w=function(){function o(u){this.Cf=new h.h,this.Fk=new h.h,this.g=u}return o.prototype.Fh=function(u){this.Cf.N(u)},o.prototype.compare=function(u,p){return this.g.Hc(u.ka(p),this.Fk),this.Cf.compare(this.Fk)},o}(),c=function(o){function u(p){var y=o.call(this,p.g,p.ra,!1)||this;return y.ib=p,y}return Fe(u,o),u.prototype.compare=function(p,y,g){if(this.sg)return-1;var b=this.ib.Rd.Ln(this.ib.Th(y));p=p.ka(g);var S=this.ib.Rd.Ln(this.ib.Th(p));return this.Fm=g,this.ME(y,b,p,S)},u}(h.PC),a=function(o){function u(p){var y=o.call(this,p.g,p.ra)||this;return y.ib=p,y}return Fe(u,o),u.prototype.compare=function(p,y){return this.sg?-1:(p=this.ib.Rd.Ln(this.ib.Th(p.ka(y))),this.Fm=y,this.NE(y,p))},u}(h.WL),n=function(){function o(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new h.$j,this.Nc=new h.$j,this.ph=new h.ja(0),this.Ik=new h.OC,this.Gf=new h.ja(0),this.Ck=new h.ja(0),this.lo=new h.Ta}return o.prototype.LX=function(u,p){var y=new h.Ed;return y.VB(),u.Pc(y),this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,p=this.eC(),u.Pc(y),p||(this.lQ(),p||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},o.prototype.PX=function(u,p){this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,this.Pg=!1,this.eC(),this.Pg||(this.Pg=u.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.qg=function(u,p){return this.hb.U(u,0+p)},o.prototype.GB=function(u,p,y){this.hb.T(u,0+p,y)},o.prototype.Th=function(u){return this.hb.U(u,2)},o.prototype.UW=function(u,p){this.hb.T(u,2,p)},o.prototype.MF=function(u,p){return this.hb.U(u,3+p)},o.prototype.Rp=function(u){return this.hb.U(u,7)},o.prototype.Rl=function(u,p){this.hb.T(u,7,p)},o.prototype.Tp=function(u,p){return this.hb.U(u,3+this.Qp(u,p))},o.prototype.hr=function(u,p,y){this.hb.T(u,3+this.Qp(u,p),y)},o.prototype.IR=function(u,p){return this.hb.U(u,5+this.Qp(u,p))},o.prototype.jr=function(u,p,y){this.hb.T(u,5+this.Qp(u,p),y)},o.prototype.Ur=function(u){return this.Ad.U(u,0)},o.prototype.PW=function(u,p){this.Ad.T(u,0,p)},o.prototype.$y=function(u){return this.Ad.U(u,4)},o.prototype.er=function(u,p){this.Ad.T(u,4,p)},o.prototype.kl=function(u){return this.Ad.U(u,1)},o.prototype.nn=function(u,p){this.Ad.T(u,1,p)},o.prototype.Zy=function(u){return this.Ad.U(u,3)},o.prototype.Ft=function(u,p){this.Ad.T(u,3,p)},o.prototype.$m=function(u){var p=this.Ad.De(),y=this.nh.Rh();return this.PW(p,y),u!=-1?(this.nh.addElement(y,u),this.g.Sa(u,this.zh,p),this.er(p,this.g.Va(u))):this.er(p,-1),p},o.prototype.CP=function(u){this.Ad.kd(u)},o.prototype.FD=function(u,p){this.nh.addElement(this.Ur(u),p),this.g.Sa(p,this.zh,u)},o.prototype.ot=function(u){var p=this.hb.De(),y=this.Rd.Rh();return this.UW(p,y),u!=-1&&this.Rd.addElement(y,u),p},o.prototype.GD=function(u,p){this.Rd.addElement(this.Th(u),p)},o.prototype.Wu=function(u){this.hb.kd(u),0<=(u=this.ph.gF(u))&&this.ph.NV(u)},o.prototype.jj=function(u,p){if(this.qg(u,0)==-1)this.GB(u,0,p);else{if(this.qg(u,1)!=-1)throw h.i.Ra();this.GB(u,1,p)}this.gy(u,p)},o.prototype.gy=function(u,p){var y=this.kl(p);if(y!=-1){var g=this.Tp(y,p);this.jr(g,p,u),this.hr(u,p,g),this.hr(y,p,u),this.jr(u,p,y)}else this.jr(u,p,u),this.hr(u,p,u),this.nn(p,u)},o.prototype.Qp=function(u,p){return this.qg(u,0)==p?0:1},o.prototype.Zm=function(u,p){var y,g=this.Zy(p);if(g!=-1&&(this.df.wd(g,-1),this.Ft(p,-1)),(g=this.kl(p))!=-1){var b=y=g;do{var S=!1,$=this.Qp(y,p),I=this.MF(y,$);if(this.qg(y,$+1&1)==u){if(this.Zu(y),this.Rd.eh(this.Th(y)),this.Wu(y),y==I){g=-1;break}g==y&&(g=this.kl(p),b=I,S=!0)}y=I}while(y!=b||S);if(g!=-1){do $=this.Qp(y,p),I=this.MF(y,$),this.GB(y,$,u),y=I;while(y!=b);(y=this.kl(u))!=-1?(b=this.Tp(y,u),S=this.Tp(g,u),b==y?(this.nn(u,g),this.gy(y,u),this.nn(u,y)):S==g&&this.gy(g,u),this.hr(g,u,b),this.jr(b,u,g),this.hr(y,u,S),this.jr(S,u,y)):this.nn(u,g)}}for(g=this.Ur(u),y=this.Ur(p),b=this.nh.sc(y);b!=-1;b=this.nh.lb(b))this.g.Sa(this.nh.ka(b),this.zh,u);this.nh.Cy(g,y),this.CP(p)},o.prototype.PT=function(u,p){var y=this.qg(u,0),g=this.qg(u,1),b=this.qg(p,0),S=this.qg(p,1);this.Rd.Cy(this.Th(u),this.Th(p)),p==this.kl(y)&&this.nn(y,u),p==this.kl(g)&&this.nn(g,u),this.Zu(p),this.Wu(p),y==b&&g==S||g==b&&y==S||(this.Jn(y,this.Ao),this.Jn(b,this.Ri),this.Ao.rb(this.Ri)?(y!=b&&this.Zm(y,b),g!=S&&this.Zm(g,S)):(g!=b&&this.Zm(g,b),y!=S&&this.Zm(y,S)))},o.prototype.Zu=function(u){var p=this.qg(u,1);this.ZE(u,this.qg(u,0)),this.ZE(u,p)},o.prototype.ZE=function(u,p){var y=this.Tp(u,p),g=this.IR(u,p),b=this.kl(p);y!=u?(this.hr(g,p,y),this.jr(y,p,g),b==u&&this.nn(p,y)):this.nn(p,-1)},o.prototype.RD=function(u,p,y){var g=this.Rd.sc(u),b=this.Rd.ka(g);u=this.Ie(b);var S=this.Ie(this.g.V(b));for(this.g.lr(b,p,y,!0),g=this.Rd.lb(g);g!=-1;g=this.Rd.lb(g)){b=this.Rd.ka(g);var $=this.Ie(b)==u;this.g.lr(b,p,y,$)}g=p.Xp(y,0).bc(),p=p.Xp(y,p.ql(y)-1).xc(),this.wK(u,g),this.wK(S,p)},o.prototype.UE=function(u,p,y){var g=this.Th(u),b=this.qg(u,0),S=this.qg(u,1),$=this.ot(-1);for(this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,b),u=1,p=p.ql(y);u<p;u++)y=this.$m(-1),this.Ck.add(y),this.Gf.add(y),this.jj($,y),$=this.ot(-1),this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,y);for(this.jj($,S),g=this.Rd.sc(g);g!=-1;g=this.Rd.lb(g))if(S=this.Rd.ka(g),this.Ie(S)==b){u=0;do 0<u&&($=this.Gf.get(u-1),this.FD($,S),this.$y($)==-1&&this.er($,this.g.Va(S))),$=this.Gf.get(u),u+=2,this.GD($,S),S=this.g.V(S);while(u<this.Gf.size)}else{u=this.Gf.size-1;do u<this.Gf.size-2&&($=this.Gf.get(u+1),this.FD($,S),0>this.$y($)&&this.er($,this.g.Va(S))),$=this.Gf.get(u),u-=2,this.GD($,S),S=this.g.V(S);while(0<=u)}this.Gf.clear(!1)},o.prototype.Ie=function(u){return this.g.Qa(u,this.zh)},o.prototype.NI=function(u,p,y){var g=this.qg(p,0),b=new h.h;this.Jn(g,b);var S=new h.h,$=this.qg(p,1);this.Jn($,S);var I=y.ql(u),C=y.Xp(u,0),R=new h.h;if(C.$p(R),!b.rb(R)){if(!this.Pg){var L=b.compare(this.xh);0>L*(R=R.compare(this.xh))&&(this.Pg=!0)}this.qF(g,this.Gf),this.Ck.add(g)}for(!this.Pg&&1<I&&(L=b.compare(S),C=C.xc(),(b.compare(C)!=L||C.compare(S)!=L||0>C.compare(this.xh))&&(this.Pg=!0)),u=(C=y.Xp(u,I-1)).xc(),S.rb(u)||(this.Pg||0>(L=S.compare(this.xh))*(R=u.compare(this.xh))&&(this.Pg=!0),this.qF($,this.Gf),this.Ck.add($)),this.Gf.add(p),S=0,$=this.Gf.size;S<$;S++)u=this.Gf.get(S),y=this.Rp(u),h.ad.GG(y)&&(this.Nc.wd(y,-1),this.Rl(u,-1)),u!=p&&this.Rp(u)!=-3&&(this.ph.add(u),this.Rl(u,-3));this.Gf.clear(!1)},o.prototype.gO=function(u,p){this.ae.compare(this.Nc,this.Nc.ka(u),p),this.ae.sg&&(this.ae.Mr(),this.jF(u,p))},o.prototype.jF=function(u,p){this.Yn=!0,u=this.Nc.ka(u),p=this.Nc.ka(p);var y=this.Rd.Ln(this.Th(u)),g=this.Rd.Ln(this.Th(p)),b=this.g.cc(y);b==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(y,this.je),b=this.je),(y=this.g.cc(g))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(g,this.Pm),y=this.Pm),this.Ik.Qo(b),this.Ik.Qo(y),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(u,p,-1,this.Ik),this.Ik.clear()},o.prototype.BQ=function(u,p){this.Yn=!0,p=this.Nc.ka(p);var y=this.Rd.Ln(this.Th(p)),g=this.g.cc(y);g==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(y,this.je),g=this.je),y=this.wF(u),this.Ik.Qo(g),this.g.Xi(y,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(p,-1,u,this.Ik),this.Ik.clear()},o.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var u=this.ph.Gc();this.ph.Jf(),this.Rl(u,-1),this.RS(u)!=-1&&this.rS(u),this.Xn=!1}},o.prototype.rS=function(u){if(this.Xn){var p=this.Nc.Bu(this.HH,this.BH,u,!0);this.Xn=!1}else p=this.Nc.ED(u);p==-1?this.PT(this.Nc.ka(this.Nc.AF()),u):(this.Rl(u,p),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,p)))},o.prototype.RS=function(u){var p=this.qg(u,0);if(u=this.qg(u,1),this.Jn(p,this.Ao),this.Jn(u,this.Ri),h.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var y=this.Ao.compare(this.xh),g=this.Ri.compare(this.xh);return 0>=y&&0<g?u:0>=g&&0<y?p:-1},o.prototype.jQ=function(){var u=new h.ja(0);u.Jb(this.g.gd);for(var p=this.g.$q(),y=p.next();y!=-1;y=p.next())this.g.Qa(y,this.zh)!=-1&&u.add(y);this.g.nx(u,u.size),this.kQ(u)},o.prototype.kQ=function(u){this.df.clear(),this.df.Ee(u.size),this.df.Xo(new O(this.g));var p=new h.h;p.Sc();for(var y=-1,g=new h.h,b=0,S=u.size;b<S;b++){var $=u.get(b);this.g.Hc($,g),g.rb(p)?($=this.g.Qa($,this.zh),this.Zm(y,$)):(y=this.Ie($),this.g.Hc($,p),$=this.df.zn($),this.Ft(y,$))}},o.prototype.lQ=function(){var u=new h.ja(0);u.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))u.add(this.df.ka(p));this.df.clear(),this.g.nx(u,u.size),p=0;for(var y=u.size;p<y;p++){var g=u.get(p),b=this.Ie(g);g=this.df.zn(g),this.Ft(b,g)}},o.prototype.qF=function(u,p){var y=this.kl(u);if(y!=-1){var g=y;do h.ad.GG(this.Rp(g))&&p.add(g),g=this.Tp(g,u);while(g!=y)}},o.prototype.wK=function(u,p){for(u=this.nh.sc(this.Ur(u));u!=-1;u=this.nh.lb(u))this.g.mf(this.nh.ka(u),p)},o.prototype.cK=function(u,p,y,g){this.Zu(u),p!=-1&&this.Zu(p),this.NI(0,u,g),p!=-1&&this.NI(1,p,g),y!=-1&&(g.Cf.D(this.Ao),this.Jn(y,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(y)),y=0;for(var b=this.Ck.size;y<b;y++){var S=this.Ck.get(y),$=this.Zy(S);$!=-1&&(this.df.wd($,-1),this.Ft(S,-1))}for(y=this.Th(u),b=p!=-1?this.Th(p):-1,this.RD(y,g,0),p!=-1&&this.RD(b,g,1),this.UE(u,g,0),p!=-1&&this.UE(p,g,1),this.Rd.eh(y),this.Wu(u),p!=-1&&(this.Rd.eh(b),this.Wu(p)),y=0,b=this.Ck.size;y<b;y++)(S=this.Ck.get(y))==this.Lq&&(this.Zv=!0),($=this.Zy(S))==-1&&(($=this.df.ED(this.wF(S)))==-1?(u=this.Ie(this.df.ka(this.df.AF())),this.Zm(u,S)):this.Ft(S,$));this.Ck.clear(!1)},o.prototype.Jn=function(u,p){this.g.ZF(this.$y(u),p)},o.prototype.wF=function(u){return this.nh.Ln(this.Ur(u))},o.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new c(this),this.Nc.ao=this.ae);var u=new h.ja(0),p=null,y=null;this.BH=this.HH=-1,this.Xn=!1;for(var g=this.df.sc(-1);g!=-1;){this.Xn=!1;var b=this.df.ka(g);this.Lq=this.Ie(b),this.g.Hc(b,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var S=this.kl(this.Lq),$=S==-1;if(!$){b=S;do{var I=this.Rp(b);I==-1?(this.ph.add(b),this.Rl(b,-3)):I!=-3&&u.add(I),b=this.Tp(b,this.Lq)}while(b!=S)}if(0<u.size){for(this.Xn=u.size==1&&this.ph.size==1,$=0,S=u.size;$<S;$++)b=this.Nc.ka(u.get($)),this.Rl(b,-2);var C=-2,R=-2;for($=0,S=u.size;$<S;$++){if(I=u.get($),C==-2){var L=this.Nc.xe(I);L!=-1?(b=this.Nc.ka(L),(b=this.Rp(b))!=-2&&(C=L)):C=-1}if(R==-2&&((I=this.Nc.lb(I))!=-1?(b=this.Nc.ka(I),(b=this.Rp(b))!=-2&&(R=I)):R=-1),C!=-2&&R!=-2)break}for($=0,S=u.size;$<S;$++)I=u.get($),b=this.Nc.ka(I),this.Nc.wd(I,-1),this.Rl(b,-1);u.clear(!1),this.HH=C!=-1?C:-1,this.BH=R!=-1?R:-1,C!=-1&&R!=-1?this.Xn||this.gO(C,R):C==-1&&R==-1&&(this.Xn=!1)}else $&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.pJ(p),p.sg&&(p.Mr(),this.BQ(this.Lq,p.Fm)));this.sS(),this.Zv?(this.Zv=!1,y==null&&(y=new w(this.g)),y.Fh(this.xh),g=this.df.pJ(y)):g=this.df.lb(g)}return this.Yn},o.prototype.gr=function(u){for(this.g=u,this.zh=this.g.Hd(),this.hb.Ee(u.gd+32),this.Ad.Ee(u.gd),this.nh.Bt(u.gd),this.nh.hn(u.gd),this.Rd.Bt(u.gd+32),this.Rd.hn(u.gd+32),u=this.g.md;u!=-1;u=this.g.ve(u))if(h.ba.Ic(this.g.jc(u)))for(I=this.g.Ob(u);I!=-1;I=this.g.Sb(I)){var p=this.g.Ka(I),y=this.g.Ya(I),g=this.$m(y),b=this.ot(y);for(this.jj(b,g),C=this.g.V(y),y=0,p-=2;y<p;y++){var S=this.g.V(C),$=this.$m(C);this.jj(b,$),b=this.ot(C),this.jj(b,$),C=S}this.g.ec(I)?($=this.$m(C),this.jj(b,$),b=this.ot(C),this.jj(b,$),this.jj(b,g)):($=this.$m(C),this.jj(b,$))}else for(var I=this.g.Ob(u);I!=-1;I=this.g.Sb(I)){var C=this.g.Ya(I);for(g=0,p=this.g.Ka(I);g<p;g++)this.$m(C),C=this.g.V(C)}this.jQ()},o}();h.MC=n}(B||(B={})),function(h){var O=function(w){function c(a,n,o){var u=w.call(this)||this;if(a!==void 0)if(o!==void 0){u.description=h.fe.pg();var p=new h.Od;p.L(a,n,o),u.ZB(p)}else if(n!==void 0)u.description=h.fe.pg(),u.Db(a,n);else if(a instanceof h.sa)u.description=a;else if(a instanceof h.h)u.description=h.fe.pg(),u.Db(a);else{if(!(a instanceof c))throw h.i.O();u.description=a.description,u.Db(a.Ng(),a.kh()),a.la!==null&&(u.la=a.la.slice(0))}else u.description=h.fe.pg();return u}return Fe(c,w),c.prototype.D=function(a){if(a===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(a=new h.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},c.prototype.Db=function(a,n){typeof a=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=a,this.la[1]=n):(this.wc(),this.Db(a.x,a.y))},c.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var a=new h.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.dG()?this.la[2]:h.sa.te(1),a},c.prototype.ZB=function(a){this.wc();var n=this.hasAttribute(1);n||h.sa.yG(1,a.z)||(this.se(1),n=!0),this.la==null&&this.wn(),this.la[0]=a.x,this.la[1]=a.y,n&&(this.la[2]=a.z)},c.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},c.prototype.YB=function(a){this.setAttribute(0,0,a)},c.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},c.prototype.WJ=function(a){this.setAttribute(0,1,a)},c.prototype.XR=function(){return this.Vc(1,0)},c.prototype.sX=function(a){this.setAttribute(1,0,a)},c.prototype.uR=function(){return this.Vc(2,0)},c.prototype.cX=function(a){this.setAttribute(2,0,a)},c.prototype.Fc=function(){return this.tF(3,0)},c.prototype.GJ=function(a){this.setAttribute(3,0,a)},c.prototype.Vc=function(a,n){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+n]:h.sa.te(a)},c.prototype.tF=function(a,n){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+n]:h.sa.te(a)},c.prototype.setAttribute=function(a,n,o){this.wc();var u=this.description.Rf(a);0>u&&(this.se(a),u=this.description.Rf(a)),this.la==null&&this.wn(),this.la[this.description.bk(u)+n]=o},c.prototype.K=function(){return 33},c.prototype.Eb=function(){return 0},c.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},c.prototype.un=function(a){if(this.la!=null){for(var n=h.fe.Kw(a,this.description),o=[],u=0,p=0,y=a.Ba;p<y;p++){var g=a.ld(p),b=h.sa.Wa(g);if(n[p]==-1){var S=h.sa.te(g);for(g=0;g<b;g++)o[u]=S,u++}else for(S=this.description.bk(n[p]),g=0;g<b;g++)o[u]=this.la[S],u++,S++}this.la=o}this.description=a},c.prototype.wn=function(){this.gJ(this.description.Be.length),c.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},c.prototype.Pc=function(a){if(a instanceof h.Ed){if(!this.Bc()){var n=this.D();a.Gh(n,n),this.Db(n)}}else this.Bc()||(this.se(1),n=this.xz(),this.ZB(a.hp(n)))},c.prototype.copyTo=function(a){if(a.K()!=33)throw h.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.Pf(this.description)):(a.Pf(this.description),a.gJ(this.description.Be.length),c.YD(this.la,a.la,this.description.Be.length))},c.prototype.Ja=function(){return new c(this.description)},c.prototype.B=function(){return this.Bc()},c.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},c.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.Pf(this.description),a.$b(this)},c.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},c.prototype.So=function(a){if(this.Bc())a.Pa();else{var n=this.xz();a.v=n.x,a.G=n.y,a.Xe=n.z,a.C=n.x,a.H=n.y,a.Dg=n.z}},c.prototype.Vg=function(a,n){var o=new h.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,n),o.pa=a,o.wa=a,o)},c.prototype.gJ=function(a){if(this.la==null)this.la=h.P.mg(a);else if(this.la.length<a){for(var n=this.la.slice(0),o=this.la.length;o<a;o++)n[o]=0;this.la=n}},c.YD=function(a,n,o){if(0<o)for(o=0;o<a.length;o++)n[o]=a[o]},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var n=0,o=this.description.Be.length;n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var n=0,o=this.description.Be.length;n<o;n++){var u=this.la[n];u=h.P.truncate(u^u>>>32),a=h.P.Vh(u,a)}return a},c.prototype.ng=function(){return null},c}(h.ba);h.Ta=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){c!==void 0&&(this.x=c,this.y=a,this.z=n)}return w.construct=function(c,a,n){var o=new w;return o.x=c,o.y=a,o.z=n,o},w.prototype.L=function(c,a,n){this.x=c,this.y=a,this.z=n},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var c=this.length();c==0&&(this.x/=c,this.y/=c,this.z/=c)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(c){return new w(this.x-c.x,this.y-c.y,this.z-c.z)},w.prototype.Bg=function(c){new w(this.x*c,this.y*c,this.z*c)},w.prototype.Sh=function(c){return this.x*c.x+this.y*c.y+this.z*c.z},w}();h.Od=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){this.Iw=this.yA=null,this.Zf=a,this.AT=a.y-n,this.zT=a.y+n,this.Gw=0,this.Zz=c,this.ra=n,this.MT=n*n,this.$z=n!=0,this.Nv=!1}return w.prototype.result=function(){return this.Gw!=0?1:0},w.prototype.UM=function(c){return c=c.ic(c.ge(this.Zf,!1)),h.h.zc(c,this.Zf)<=this.MT},w.prototype.aF=function(c){if(!this.$z&&(this.Zz&&this.Zf.rb(c.bc())||this.Zf.rb(c.xc())))this.Nv=!0;else if(c.oa==this.Zf.y&&c.oa==c.ma){if(this.Zz&&!this.$z){var a=Math.max(c.ta,c.qa);this.Zf.x>Math.min(c.ta,c.qa)&&this.Zf.x<a&&(this.Nv=!0)}}else{var n=!1;if(a=Math.max(c.ta,c.qa),this.Zf.x>a?n=!0:this.Zf.x>=Math.min(c.ta,c.qa)&&(n=0<c.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),n){if(this.Zf.y==c.bc().y){if(this.Zf.y<c.xc().y)return}else if(this.Zf.y==c.xc().y&&this.Zf.y<c.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(c.bc().y>c.xc().y?1:-1)}}},w.prototype.MI=function(c){var a=c.Vg(0,1);if(a.pa>this.zT||a.wa<this.AT)return!1;if(this.$z&&this.UM(c))return!0;if(a.pa>this.Zf.y||a.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=c.$F()))for(c=0;c<a;c++){var n=this.yA[c].get();if(this.aF(n),this.Nv)return!0}else if(this.aF(c),this.Nv)return!0;return!1},w.KM=function(c,a,n){for(a=new w(c.Kn()==0,a,n),c=c.Ha();c.ab();)for(;c.Ia();)if(n=c.ia(),a.MI(n))return-1;return a.result()},w.LM=function(c,a,n,o){var u=new h.l;c.yc(u),u.X(o,o);var p=new w(c.Kn()==0,n,o);c=c.Ha();var y=new h.l;for(y.L(u),y.C=n.x+o,y.G=n.y-o,y.H=n.y+o,o=(n=a.HF(y,o)).next();o!=-1;o=n.next())if(c.Wb(a.ka(o)),c.Ia()&&(o=c.ia(),p.MI(o)))return-1;return p.result()},w.ym=function(c,a,n){if(c.B())return 0;var o=new h.l;if(c.yc(o),o.X(n,n),!o.contains(a))return 0;if((o=c.Cb)!=null){var u=o.Hk;if(u!=null){if((u=u.Uo(a.x,a.y))==1)return 1;if(u==0)return 0}if((o=o.Gb)!=null)return w.LM(c,o,a,n)}return w.KM(c,a,n)},w.XS=function(c,a,n){return a.B()?0:w.ym(c,a.D(),n)},w.Ol=function(c,a){return!(16>(c=c.I()))&&2*c+Math.log(c)/Math.log(2)*a<1*c*a},w}();h.Fg=O}(B||(B={})),function(h){var O=function(w){function c(a){return w.call(this,!0,a)||this}return Fe(c,w),c.prototype.Ja=function(){return new c(this.description)},c.prototype.Eb=function(){return 2},c.prototype.K=function(){return 1736},c.prototype.sG=function(a,n,o){this.ES(a,n,o)},c.prototype.kR=function(){this.AR()},c}(h.Xk);h.Ea=O}(B||(B={})),function(h){(function(O){O[O.PiPOutside=0]="PiPOutside",O[O.PiPInside=1]="PiPInside",O[O.PiPBoundary=2]="PiPBoundary"})(h.ML||(h.ML={})),h.jd=function(){function O(){}return O.FG=function(w,c,a){return(w=h.Fg.XS(w,c,a))==0?0:w==1?1:2},O.Zd=function(w,c,a){return(w=h.Fg.ym(w,c,a))==0?0:w==1?1:2},O.SX=function(w,c,a,n,o){if(c.length<a||o.length<a)throw h.i.O();for(var u=0;u<a;u++)o[u]=O.Zd(w,c[u],n)},O.nK=function(w,c,a,n,o){if(w.K()==1736)O.SX(w,c,a,n,o);else{if(w.K()!=197)throw h.i.ga("invalid_call");var u=new h.l;w.A(u),O.VM(u,c,a,n,o)}},O.VM=function(w,c,a,n,o){if(c.length<a||o.length<a)throw h.i.O();if(w.B())for(n=0;n<a;n++)o[n]=0;else for(w.X(.5*-n,.5*-n),w.X(.5*n,.5*n),n=0;n<a;n++)w.contains(c[n])?o[n]=1:w.contains(c[n])?o[n]=2:o[n]=0},O.UX=function(w,c,a,n,o){for(var u=0;u<a;u++)o[u]=w.ss(c[u],n)?2:0},O.TX=function(w,c,a,n,o){var u=w.Cb,p=null;u!=null&&(p=u.Hk),u=a;for(var y=0;y<a;y++)if(o[y]=1,p!=null){var g=c[y];p.Uo(g.x,g.y)==0&&(o[y]=0,u--)}if(u!=0)for(w=w.Ha();w.ab()&&u!=0;)for(;w.Ia()&&u!=0;)for(p=w.ia(),y=0;y<a&&u!=0;y++)o[y]==1&&p.ss(c[y],n)&&(o[y]=2,u--);for(y=0;y<a;y++)o[y]==1&&(o[y]=0)},O.oK=function(w,c,a,n,o){var u=w.K();if(u==1607)O.TX(w,c,a,n,o);else{if(!h.ba.zd(u))throw h.i.ga("Invalid call.");O.UX(w,c,a,n,o)}},O}()}(B||(B={})),function(h){var O=function(w){function c(a,n){if(arguments.length==2){var o=w.call(this,!1,a.description)||this;o.nf(a),o.lineTo(n)}else o=w.call(this,!1,a)||this;return o}return Fe(c,w),c.prototype.Ja=function(){return new c(this.description)},c.prototype.Eb=function(){return 1},c.prototype.K=function(){return 1607},c.prototype.sG=function(a,n,o){this.FS(a,n,o)},c}(h.Xk);h.Ua=O}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.progress=function(){return!0},w.Bp=function(c){if(c!=null&&!c.progress(-1,-1))throw h.i.RC()},w}();h.op=O}(B||(B={})),function(h){var O;(O=h.KK||(h.KK={}))[O.clipWithInputHorizon=1]="clipWithInputHorizon",O[O.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function n(){this.Mg=3,this.Xu=this.Lr=NaN}return n.prototype.KW=function(o){this.LB(1,o)},n.prototype.LW=function(o){this.LB(2,o)},n.prototype.cS=function(){return this.ks(1)},n.prototype.dS=function(){return this.ks(2)},n.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.prototype.Qf=function(){var o=new n;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},n}();h.tC=w,function(n){n[n.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",n[n.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.LK||(h.LK={}));var c=function(){function n(){this.Mg=0}return n.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.kg=function(o){var u=new n;return u.Mg=o.Mg,u},n.prototype.hM=function(o){this.Mg=o.Mg},n}();h.wY=c;var a=function(){function n(o,u,p){this.ef=o,this.$f=u,this.Wf=new h.l,this.Wf.L(p),this.vT=o.dc()+u.dc()+this.Wf.dc().toString()}return n.prototype.dc=function(){return this.vT},n.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.$f.Nb(o.$f)&&this.Wf.Nb(o.Wf)},n}();h.BY=a,a=function(){function n(){this.$f=this.ef=null,this.mH=new w,this.nH=new c,this.yw=this.Yf=null,this.ow=this.Vn=!0}return n.Pr=function(o,u,p,y){var g;y===void 0&&(y=null),g===void 0&&(g=null);var b=new n;return b.sp(o,u,p,y,g),b},n.prototype.sp=function(o,u,p,y,g){if(o==null||u==null)throw h.i.ga("invalidArgument");if(this.ef=o,this.$f=u,this.ow=this.Vn=!1,y!=null&&(this.mH=y.Qf()),g!=null&&this.nH.hM(g),g=!1,u.Tb()==1&&y!=null&&(y=y.Lr,isNaN(y)||y==0||(g=!0)),o==u)this.Vn=!g,this.ow=!0;else{y=o.Tb();var b=u.Tb();if(y==0||b==0){if(p!=null)throw h.i.O();o.Id()!=null&&u.Id()!=null&&(this.Vn=o.Id().Nb(u.Id()))}else y==3||b==3?this.Vn=o.Nb(u):this.ef.fS(this.$f)?this.Vn=!g:this.Vn=!1,this.Yf=p,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},n.prototype.isIdentity=function(){return this.Vn},n.prototype.iR=function(){return this.mH.Qf()},n.prototype.Nb=function(o){return o==this||!!(o instanceof n&&this.ef.Nb(o.ef)&&this.$f.Nb(o.$f))&&(this.Yf==o.Yf||!(this.Yf==null||o.Yf==null||!this.Yf.Nb(o.Yf)))},n.prototype.kY=function(){this.yw=new h.du(this)},n}(),h.xr=a}(B||(B={})),function(h){var O=function(){function w(){}return w.Ep=function(c){return c*w.jW},w.mx=function(c,a){return w.bP(a-c)},w.cP=function(c){return-360<=c&&720>c?(0>c?c+=360:360<=c&&(c-=360),c):(0>(c=h.mc.MK(c))&&(c+=360),c)},w.bP=function(c){return 180<(c=w.cP(c))&&(c-=360),c},w.jW=57.29577951308232,w}();h.sr=O,h.Jh=function(){function w(){}return w.nj=function(c,a){var n=new h.l;c.A(n);var o=h.cb.ih(a),u=new h.l;return u.L(o),u.v=n.v,u.C=n.C,u.X(.01*u.da(),0),a=h.ua.Xd(a,n,!1),u.contains(n)?c:h.Vd.clip(c,u,a,0)},w.ms=function(c,a,n,o,u){if(!h.cb.Xc(a))throw h.i.O();var p=h.ua.mj(a,c,!1),y=h.cb.ih(a),g=h.cb.tc(a),b=g.Id().ci,S=h.cb.xv(g);g=h.cb.gv(g),S*=2-S;var $=new h.Oc;y.en($);var I=[[0,0],[0,0]];if(h.Gg.Tb(a)==2?o?(I[0][0]=w.an(u,$),I[0][1]=y.Lp(),h.cb.wt(),y=I[0][0]*b):(I[0][0]=y.ik(),I[0][1]=u,h.cb.wt(),y=I[0][1]*b):y=u*b,!o&&y!=0)throw h.i.O();var C=new h.ha,R=new h.hd;c=R.Ib(c);for(var L=[0],N=new h.h,U=new h.h,W=new h.h,j=new h.h,K=new h.h,se=new h.h,ne=R.Ob(c);ne!=-1;ne=R.Sb(ne)){var pe=R.Ya(ne);R.D(pe,W);for(var he=!1,xe=pe=R.V(pe);xe!=-1;xe=R.V(xe)){if(xe==pe){if(he)break;he=!0}if(R.D(xe,j),o&&p<u-W.x&&j.x-u>p||p<u-j.x&&W.x-u>p||!o&&p<-W.y&&j.y>p||p<-j.y&&W.y>p)do if(!(Math.abs(W.x-j.x)>=.5*$.S())){if(h.Gg.Tb(a)==2?(I[0][0]=w.an(W.x,$),I[0][1]=W.y,I[1][0]=w.an(j.x,$),I[1][1]=j.y,h.cb.ZV(),K.x=I[0][0]*b,K.y=I[0][1]*b,se.x=I[1][0]*b,se.y=I[1][1]*b):(K.x=W.x*b,K.y=W.y*b,se.x=j.x*b,se.y=j.y*b),se.x=6.283185307179586*(j.x-W.x)/$.S()+K.x,o){if(U.x=y,U.y=w.Iz(g,S,K,se,y,n),isNaN(U.y))break}else{if(U.x=w.Gz(g,S,K,se,n),isNaN(U.x))break;U.y=0}h.kb.xd(g,S,K.x,K.y,se.x,se.y,C,null,null,n);var ke=C.u;h.kb.xd(g,S,K.x,K.y,U.x,U.y,C,null,null,n);var Ae=C.u;h.Gg.Tb(a)==2?(I[0][0]=U.x/b,I[0][1]=U.y/b,h.cb.XQ(),o?(N.y=I[0][1],N.x=u):(N.x=w.qs(I[0][0],W.x,j.x,$),N.y=u)):o?(N.x=u,N.y=U.y/b):(N.x=w.qs(U.x/b,W.x,j.x,$),N.y=u),L[0]=0<ke?h.P.Tk(Ae/ke,0,1):.5,L[0]!=0&&L[0]!=1&&(ke=R.Na(xe),R.Wl(ke,L,1),R.Db(R.V(ke),N.x,N.y))}while(0);W.N(j)}}return R.Ke(c)},w.Hn=function(c,a,n,o,u){if(c.B())return c;var p=h.cb.bf(a);return w.Jp(c,n-180*p,360*p,a,o,u,!0)},w.Iz=function(c,a,n,o,u,p){if(3.141592653589793<=Math.abs(n.x-o.x)||!w.Un(n.x,o.x,u))return NaN;if(n.x>o.x)var y=o;else y=n,n=o;o=new h.ha(0);var g=new h.ha(0),b=new h.ha(0);h.kb.xd(c,a,y.x,y.y,n.x,n.y,g,o,null,p);var S=g.u,$=0,I=1,C=new h.h;for(C.N(y);S*(I-$)>1e-12*c;){var R=.5*($+I);if(h.kb.qj(c,a,y.x,y.y,S*R,o.u,g,b,p),C.x=g.u,C.y=b.u,C.x==u)break;if(w.Un(y.x,C.x,u))I=R;else{if(!w.Un(n.x,C.x,u))return NaN;$=R}}return C.y},w.Un=function(c,a,n){return c=O.Ep(c),a=O.mx(c,O.Ep(a)),(n=O.mx(c,O.Ep(n)))==0||0<a&&0<n&&n<=a||0>a&&0>n&&n>=a},w.an=function(c,a){var n=a.wa-a.pa;return a.Kt(c-Math.floor((c-a.pa)/n)*n)},w.qs=function(c,a,n,o){var u=new h.Oc;for(u.L(a,n),n=o.S(),c=Math.floor((c-a)/n)*n+c,u=u.tf();Math.abs(c-u)>Math.abs(c+n-u);)c+=n;return c},w.Gz=function(c,a,n,o,u){if(n.y>o.y)var p=o;else p=n,n=o;if((o=new h.Oc).L(p.y,n.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-n.x))return NaN;if(p.x==n.x)return p.x;var y=new h.ha(0),g=new h.ha(0),b=new h.ha(0);h.kb.xd(c,a,p.x,p.y,n.x,n.y,g,y,null,u);var S=g.u,$=0,I=1,C=new h.h;for(C.N(p);S*(I-$)>1e-12*c;){var R=.5*($+I);if(h.kb.qj(c,a,p.x,p.y,S*R,y.u,g,b,u),C.x=g.u,C.y=b.u,o.L(p.y,C.y),C.y==0)break;if(o.contains(0))I=R;else{if(o.L(n.y,C.y),!o.contains(0))return NaN;$=R}}return C.x},w.Jp=function(c,a,n,o,u,p,y){var g=new h.l;if(c.A(g),g.B())return c;var b=new h.Oc;g.en(b);var S=new h.Oc;if(S.L(a,a+n),S.contains(b)&&S.wa!=b.wa)return c;var $=new h.l;$.L(g);var I=c.K();if(I==33)return((g=($=u?c:c.Qf()).Ng())<S.pa||g>=S.wa||y&&g==S.wa)&&(g+=Math.ceil((S.pa-g)/n)*n,g=S.Kt(g),$.YB(g)),$;if(I==550){for(o=($=u?c:c.Qf()).vb(0),I=2*$.I(),c=!1,u=0;u<I;u+=2)((g=o.read(u))<S.pa||g>=S.wa||y&&g==S.wa)&&(c=!0,g+=Math.ceil((S.pa-g)/n)*n,g=S.Kt(g),o.write(u,g));return c&&$.Qc(1993),$}if(S.contains(b))return c;if(I==197)return n=u?c:c.Qf(),g.Fa($),n.Zo(g),n;var C=.1*Math.max(g.da(),g.S());for($.X(0,C),y=c,S=o.Yd(0),c=h.Ih.local(),u=new h.Ed;;){var R=Math.floor((b.pa-a)/n),L=Math.ceil((b.wa-a)/n);if(!(3<L-R))break;R=Math.floor(.5*(L+R)),$.v=g.v-C,$.C=a+n*R;var N=h.Vd.clip(y,$,S,p);$.v=$.C,$.C=g.C+C;var U=h.Vd.clip(y,$,S,p);u.ig((R-L)*n,0),U.Pc(u),I==1736?y=c.W(N,U,o,null):(y=N).add(U,!1),y.A(g),g.en(b)}for($.v=a,$.C=a+n,(a=new h.l).L($),a.X(S,0),(a=Math.floor((g.v-$.v)/n)*n)!=0?($.move(a,0),u.ig(-a,0)):u.MB(),a=I==1607?new h.Ua(y.description):new h.Ea(y.description),p=new h.l,b=new h.l;g.C>$.v;)(C=h.Vd.clip(y,$,S,0)).A(b),(I==1607?!C.B()&&(b.S()>S||b.da()>S):!C.B()&&(I!=1736||b.S()>S))&&(C.Pc(u),C.A(b),a.A(p),p.X(S,S),p.isIntersecting(b)&&I==1736?a=c.W(a,C,o,null):a.add(C,!1)),$.move(n,0),u.shift(-n,0);return a},w.RI=function(c,a,n,o){var u=new h.ee(n.description);u.Gd(n,0,-1),u=h.cb.Bh(u,c,a);var p=n.I();if(o.Pa(),!h.cb.Xc(c)||p!=u.I())return!1;var y=new h.l;n.A(y);var g=new h.l;if(u.A(g),y=y.S(),g=g.S(),y!=0&&g!=0){if(g/=y,c=h.cb.ih(a).S()/h.cb.ih(c).S(),1e-10<Math.abs(g/c-1))return!1}else if(y!=0||g!=0)return!1;for(o.add(n,!1),n=0;n<p;n++)c=u.Oa(n),o.Db(n,c);return!0},w.Jz=function(){throw h.i.Fe()},w}()}(B||(B={})),function(h){var O,w,c;(w=O=h.ui||(h.ui={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(c=h.RK||(h.RK={})),h.Ab=function(){function a(){}return a.zv=function(n,o,u){if(u||0<o){for(n=n.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),o=[],u=0;u<n.length;u++)o[u]="a"<=n[u]&&"z">=n[u]?o[u]=n[u].toUpperCase():n[u];return o.join()}return n.toString(h.Tc.PE_STR_AUTH_TOP)},a.wr=function(n,o,u,p){var y=p.length,g=u.I();if(g!=0){var b=u.vb(0),S=Math.min(g,y),$=0,I=n.gh();isNaN(o)&&(o=0);for(var C=n.Xc(),R=179*(n=C?n.tc().Le().S():0)/360;0<g;){if(b.pB($<<1,S,p),h.gj.projToGeogCenter(I,S,p,o),C)for(var L=0;L<S;L++){var N=p[L][0]-o,U=h.mc.sign(N),W=b.read(2*($+L));0>U*h.mc.sign(W)&&Math.abs(N)>R&&(p[L][0]+=-U*n)}b.pC($<<1,S,p),$+=S,g-=S,S=Math.min(g,y)}u.Qc(1993)}},a.DL=function(n,o,u,p){var y=0,g=n.gh();isNaN(y)&&(y=0);var b=n.Xc(),S=n.bf();n=360*S,S*=179;for(var $=p.length,I=0;I<u;){for(var C=I;C<u&&o[C].isNaN();++C)I++;var R=Math.min($,u-I);if(0<R){C=1;for(var L=I+1;C<R;++C,++L)if(o[L].isNaN()){R=C;break}if(h.ua.Ey(p,o,I,R),h.gj.projToGeogCenter(g,R,p,y),b)for(C=0,L=I;C<R;++C,++L){var N=o[L].x,U=p[C][0]-y,W=h.mc.sign(U);0>W*h.mc.sign(N)&&Math.abs(U)>S&&(p[C][0]-=W*n)}h.ua.Dy(o,I,p,R),I+=R}}},a.Kx=function(n,o,u){var p=u.length,y=o.I();if(!(1>y)){var g=o.vb(0),b=Math.min(y,p),S=0,$=n.gh(),I=n.Xc(),C=I?n.Le().S():0,R=179*C/360,L=0;for(I&&(L=n.Bi());0<y;){if(g.pB(S<<1,b,u),h.gj.geogToProj($,b,u),I)for(n=0;n<b;n++){var N=u[n][0],U=h.mc.sign(N),W=g.read(2*(S+n))-L;0>U*h.mc.sign(W)&&Math.abs(N)>R&&(u[n][0]+=-U*C)}g.pC(S<<1,b,u),S+=b,y-=b,b=Math.min(y,p)}o.Qc(1993)}},a.CL=function(n,o,u,p){if(u!=0){var y=n.gh(),g=n.Xc(),b=g?n.Le().S():0,S=179*b/360,$=0;for(g&&($=n.Bi()),n=0;n<u;){for(var I=n;I<u&&o[I].isNaN();++I)n++;var C=Math.min(p.length,u-n);if(0<C){I=1;for(var R=n+1;I<C;++I,++R)if(o[R].isNaN()){C=I;break}if(h.ua.Ey(p,o,n,C),h.gj.geogToProj(y,C,p),g)for(I=0,R=n;I<C;I++){var L=p[I][0],N=h.mc.sign(L);0>N*h.mc.sign(o[R].x-$)&&Math.abs(L)>S&&(p[I][0]-=N*b)}h.ua.Dy(o,n,p,C),n+=C}}}},a.vr=function(n,o,u,p){var y=o.I();if(y!=0){var g=o.vb(0),b=n.ef,S=n.$f,$=b.tc().Sp(),I=S.tc().Sp(),C=b.bf(),R=S.bf();if((n=n.Yf)==null||n.count()==0){for(u=$/I,p=(b.Wp()-S.Wp())*R,I=-90*C,n=90*C,$=!1,R=1,b=2*y;R<b;)C=g.get(R),(S=h.P.Tk(C,I,n))!=C&&(g.set(R,S),$=!0),R+=2;if(p!=0||u!=1)for($=!0,I=new h.h,R=0;R<y;R++)g.uc(2*R,I),I.x*=u,I.x+=p,I.y*=u,g.Vt(2*R,I);$&&o.Qc(1993)}else{b=p.length,S=Math.min(y,b);var L=h.P.mg(S),N=null,U=0,W=NaN,j=NaN,K=360*R,se=R/C;u&&(j=90*R,W=89.9*C,N=h.P.mg(S));for(var ne=!0,pe=0;y!=0;){for(C=!1,g.pB(U<<1,S,p),R=0;R<S;R++)L[R]=p[R][0];if(u)for(R=0;R<S;R++){var he=Math.abs(p[R][1])-W;0<he&&(C=p[R][1],p[R][1]=h.mc.En(W,C),N[R]=h.mc.En(he,C),C=!0)}for(R=p[0][0],n.transform(p,S,$,I),ne&&(pe=p[0][0]-se*R,ne=!1),R=0;R<S;R++)he=p[R][0]-L[R]*se-pe,200<Math.abs(he)&&(p[R][0]=0<he?p[R][0]-K:p[R][0]+K);if(C){for(R=0;R<S;R++)N[R]!=0&&(p[R][1]+=se*N[R],p[R][1]>j?p[R][1]=j:p[R][1]<-j&&(p[R][1]=-j));for(C=0;C<S;C++)N[C]=0}g.pC(U<<1,S,p),U+=S,y-=S,S=Math.min(y,b)}o.Qc(1993)}}},a.BL=function(n,o,u,p){if(n.ow)p=90*n.ef.bf(),h.ua.ZJ(o,u,-p,p);else{var y=n.Yf,g=n.ef,b=n.$f;n=g.Zr();var S=b.Zr(),$=g.bf(),I=90*$,C=b.bf();if(y==null||y.count()==0){if(p=n/S,y=(g.Wp()-b.Wp())*C,h.ua.ZJ(o,u,-I,I),y!=0||p!=1)for(C=0;C<u;C++)o[C].x*=p,o[C].x+=y,o[C].y*=p}else{g=Math.min(u,p.length),I=h.P.mg(g),b=360*C,$=C/$;for(var R=!0,L=0,N=0;u!=0;){for(C=0;C<g;C++)I[C]=o[C+N].x;for(C=o[0].x,h.ua.Ey(p,o,N,g),y.transform(p,g,n,S),h.ua.Dy(o,N,p,g),R&&(L=o[0].x-$*C,R=!1),C=0;C<g;C++){var U=o[N+C].x-I[C]*$-L;200<Math.abs(U)&&(o[N+C].x=0<U?o[N+C].x-b:o[N+C].x+b)}N+=g,u-=g,g=Math.min(u,p.length)}}}},a.fv=function(n,o){return n=n.ih(),isNaN(o)||n.Lu(o,0),n},a.PQ=function(n,o,u,p,y,g,b,S){for(var $=a.fv(p,y),I=$.S(),C=I/360,R=a.kE*C,L=n.vb(0),N=o.Xc(),U=N?I/o.Le().S():0,W=!1,j=new h.Ea(u.description),K=0,se=u.ea();K<se;++K){var ne=N,pe=new h.Ua(u.description);if(pe.addPath(u,K,!0),b!=0){var he=a.KD(!0,pe,$.H-S,$.H,b);(W=W||he)&&(ne=!1)}var xe=-1;ne&&(xe=n.Ca(K));var ke=pe.vb(0),Ae=pe.I(),st=0,qe=ke.read(0),It=0;he=3*p.Yd(0);var xt=!1,tt=new h.h;tt.Sc();var xi=new h.h;xi.Sc();for(var nr=!1,Ii=1;Ii<Ae;++Ii){var ei=h.h.construct(ke.gg(2*Ii),ke.gg(2*Ii+1)),ti=ei.x,zt=ti+st,ki=zt-qe;if(ei.x=zt,Math.abs(ki)>R){if(ne){var Dt=xe+(Ii+1<Ae?Ii:0),dr=L.read(2*(xe+Ii-1));Dt=(L.read(2*Dt)-dr)*U,Math.abs(ki-Dt)>1*C&&(ne=!1)}ne||(zt=ti+(st-=h.mc.En(I,zt-qe)),++It,nr=st!=0,ei.x=zt)}else xt||h.ua.vG(xi,tt,ei,he)&&(xt=!0);nr&&ke.write(2*Ii,zt),qe=zt,xi.N(tt),tt.N(ei)}0<It&&pe.Qc(1993),ne=pe.Oa(0),Ae=pe.Oa(Ae-1),pe=h.h.ub(ne,Ae)<he?a.pQ(pe,p,y,g,xt):a.qQ(n,K,pe,p,y),j.add(pe,!1)}return y=p.Yd(0),u=$.S()/180,a.Lt(j,$,.1*y,!1),j=j!=(y=h.ti.clip(j,$,y,u,g)),n=n.He(),b=0,0<(S=y.He())&&0>n?b=1:0>=S&&0<n&&(S==0?(S=NaN,o.Tb()==2?S=o.ol().He():o.Tb()==1&&(S=o.Le().rF()),n>.99*S&&(b=-1)):b=-1),b!=0&&((o=new h.Ea(y.description)).vp($),(o=h.Zl.local().W(o,u,g)).add(y,!1),j=!0,y=o),j&&(y=h.$l.local().W(y,p,!1,g)),y},a.qQ=function(n,o,u,p,y){var g=u.I(),b=u.Oa(0),S=u.Oa(g-1);y=(p=a.fv(p,y)).S(),b=h.mc.sign(S.x-b.x);var $=new h.l;u.yc($);var I=p.ik();if(S=I-y,I+=y,0<=b){var C=Math.ceil((S-$.v)/y);for(C*=y;S>$.v+C;)C+=y;for(;S<$.C+C;)C-=y;var R=C;720<$.S()&&(I=S+360*Math.ceil($.S()/360))}else{for(C=Math.ceil((I-$.C)/y),C*=y;I<$.C+C;)C-=y;for(;I>$.v+C;)C+=y;R=C,720<$.S()&&(S=I-360*Math.ceil($.S()/360))}C=b*y;var L=h.l.construct($.v,$.G,$.C,$.H);L.move(R,0);var N=new h.Ed;N.ig(R,0),u.Pc(N),($=new h.Ua(u.description)).add(u,!1),R=u.Oa(g-1),y=0;for(var U=$.Oa(0).x;0<b?L.C<I:L.v>S;)L.move(C,0),N.Lb=C,u.Pc(N),U+=C,p.v<=U&&p.C>=U&&(y=$.I()-1),u.Db(0,R),R=u.Oa(g-1),$.Fr(u,0,0,g-1,!1);return u=new h.Ea($.description),g=0<n.Kr(o),u.add($,!1),n=$.Oa(0),S=$.Oa($.I()-1),o=u.ea()-1,(0>b?g:!g)?(b=h.h.construct(S.x,p.H),u.Ei(b),b=h.h.construct(p.ik(),p.H),u.Ei(b),p=h.h.construct(n.x,p.H)):(b=h.h.construct(S.x,p.G),u.Ei(b),b=h.h.construct(p.ik(),p.G),u.Ei(b),p=h.h.construct(n.x,p.G)),u.Ei(p),u.sG(0,o,0),u.fO(y),u},a.pQ=function(n,o,u,p,y){var g=new h.Ea(n.description);g.add(n,!1),g.yB(0,g.I()-1);var b=new h.l;g.yc(b);var S=(u=a.fv(o,u)).S(),$=Math.ceil((u.v-b.v)/S);for($*=S;u.v>b.v+$;)$+=S;for(;u.v<b.C+$;)$-=S;if(($+=S)!=0){b.move($,0);var I=new h.Ed;I.ig($,0),g.Pc(I)}if(u.v<=b.v&&u.C>b.C)return y&&(y=g.He(),o=(g=h.$l.local().W(g,o,!0,p)).He(),(o=h.mc.sign(y)!=h.mc.sign(o))&&g.jJ()),g;for((n=new h.Ea(n.description)).add(g,!1),y=y||b.S()>S-o.Yd(0);b.v<u.C;)b.move(S,0),(I=new h.Ed).ig(S,0),g.Pc(I),n.add(g,!1);return y&&(y=n.He(),n.$o(1),o=(n=h.$l.local().W(n,o,!0,p)).He(),(o=h.mc.sign(y)!=h.mc.sign(o))&&n.jJ()),n},a.KD=function(n,o,u,p,y){for(var g=o.vb(0),b=o.I(),S=!1,$=0;$<b;$++){var I=h.h.construct(g.gg(2*$),g.gg(2*$+1));if((1&y)!=0&&I.y>=u){S=!0;break}if((2&y)!=0&&I.y<=-u){S=!0;break}}if(!S)return!1;g=!1,n&&(g=o.Pn(0)),b=(n=new h.hd).Ib(o),S=n.Ob(b);var C=-1,R=!0,L=new h.h;L.Sc(),$=new h.Ta;for(var N=-1,U=n.Ya(S);U!=-1;U=n.V(U)){I=n.Oa(U);var W=(1&y)!=0&&90<=I.y?1:0;if(W|=(2&y)!=0&&I.y<=-u?2:0,0<C&&C!=W){if(L.x!=I.x){L.x=I.x,n.Xi(n.Na(U),$);var j=n.yj(S,U,$);n.mf(j,L)}if(g)for(N=N!=-1?n.V(N):n.Ya(S),j=n.Na(U);N!=j;)N=n.qd(N,!1);N=-1}0<W&&(I.y=h.mc.En(p,I.y),n.mf(U,I),R||C==W||(I.x!=L.x?(n.Xi(U,$),j=n.yj(S,U,$),n.Db(j,L.x,I.y),N=j):N=U)),C=W,L=I,R=!1}if(g){if(N!=-1)for(N=n.V(N);N!=-1;)N=n.qd(N,!1);u=n.Ya(S),n.hq(u,n.tj(S))||(n.Xi(u,$),n.yj(S,-1,$))}return n.Ke(b).copyTo(o),!0},a.Hz=function(n,o,u,p){var y=n;if(y.B()||u==O.DontClip)return y;var g=y.K();if(g==33)return y=[(p=y).D()],a.tG(y,1,o,u),y[0].isNaN()?p.Pa():p.Db(y[0]),n;var b=(n=o.tc()).bf(),S=90*b,$=180*b,I=360*b,C=o.Bi(),R=.5*b,L=new h.l;y.A(L);var N=o.Xr(),U=o.KQ(),W=N.K()==197;if(o=new h.l,N.A(o),u==O.PannableFold&&(u=n.Le().S(),o.v=C-.5*u,o.C=o.v+u),L.G<-S||L.H>S){if(new h.l().L(L.v-b,-S,L.C+b,S),(y=h.ti.Pu(y,o,n,NaN,0,p)).B())return y;y.A(L)}if(U&&(o.H<L.G||o.G>L.H))return y.Ja();if(L.S()>I&&(y=a.Jp(y,C-$,I,n,!0,0,!0,p)).A(L),(S=a.$N(L.v,L.C,o.v,o.C,I))!=0&&L.move(S,0),L.C>o.C||L.v<o.v){if(L.C>o.C)for(;L.v>=o.C;)L.move(-I,0),S-=I;for(;L.v<o.C-I;)L.move(I,0),S+=I}if(u=h.ua.Ju(n,N),S!=0&&((b=new h.Ed).ig(S,0),y.Pc(b)),U){if(W&&o.contains(L))return y;for(U=[null,null],S=0;2>S;S++){if(W?b=h.ba.Ic(g)?h.ti.clip(y,o,u,R,p):h.ti.clip(y,o,u,0,p):(b=h.Zj.local().W(y,N,n,p))==N&&(b=h.ba.kg(b)),o.v<=L.v&&o.C>=L.C||o.v>=L.v&&o.C<=L.C)return b;U[S]=b,S==0&&(L.move(-I,0),(b=new h.Ed).ig(-I,0),y.Pc(b))}if(g==550)U[0].Gd(U[1],0,-1);else if(h.ba.Ic(g))U[0].add(U[1],!1);else{if(g!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");U[0].B()&&(U[0]=U[1])}return U[0]}if(o.H<L.G||o.G>L.H)return y;for(g=0;!y.B()&&L.C>o.v;)g!=0&&((b=new h.Ed).ig(g,0),y.Pc(b)),h.fj.local().W(4,y,N,n,p)||N==(y=h.mp.local().W(y,N,n,p))&&(y=h.ba.kg(y)),g!=0&&((R=new h.Ed).ig(-g,0),y.Pc(R)),g-=I,L.move(-I,0);return y},a.tG=function(n,o,u,p){if(o!=0&&p!=O.DontClip)if(p==O.PannableFold){p=u.CR();for(var y=o,g=0;g<o;g++)(n[g].y>p.H||n[g].y<p.G)&&(n[g].Sc(),y--);y!=0&&a.cv(n,o,p.v,p.S())}else{var b=90*(p=u.bf()),S=180*p;for(p*=360,y=o,g=0;g<o;g++)(n[g].y>b||n[g].y<-b)&&(n[g].Sc(),y--);if(y!=0){(y=new h.l).bx(n,o),b=u.Xr();var $=u.kv();g=b.K()==197;var I=new h.l;if(b.A(I),!$||!(I.H<y.G||I.G>y.H))if($)if(a.cv(n,o,I.ik()-S,p),y=o,g)for(g=0;g<o;g++)I.contains(n[g])||(n[g].Sc(),y--);else for(u=h.ua.Ju(u.tc(),b),g=0;g<o;g++)(S=h.jd.Zd(b,n[g],u)!=0)||(n[g].Sc(),y--);else for(a.cv(n,o,-S,p),y=o,u=h.ua.Ju(u.tc(),b),g=0;g<o;g++)(S=n[g]).isNaN()&&y--,$=a.oE(S.x,I.v,I.C,p),S.x+=$,(S=h.jd.Zd(b,S,u)!=0)&&(n[g].Sc(),y--)}}},a.Jp=function(n,o,u,p,y,g,b,S){var $=n.K(),I=o+u;if($===33){var C=(p=y?n:n.Qf()).Ng();return(C<o||C>=I||b&&C==I)&&(C+=Math.ceil((o-C)/u)*u,C=h.P.Tk(C,o,I),p.YB(C)),p}if(n.B()||(C=new h.l,n.A(C),C.B()))return n;var R=new h.Oc;C.en(R);var L=new h.Oc;if(L.L(o,I),L.contains(R))return n;if((I=new h.l).L(C),$===550){for(S=(p=y?n:n.Qf()).vb(0),$=2*p.I(),I=!1,o=0;o<$;o+=2)((C=S.read(o))<L.pa||C>=L.wa||b&&C==L.wa)&&(I=!0,C+=Math.ceil((L.pa-C)/u)*u,C=L.Kt(C),S.write(o,C));return I&&p.Qc(1993),p}if($==197)return u=y?n:n.Qf(),C.Fa(I),u.Zo(C),u;var N=.1*Math.max(C.da(),C.S());for(I.X(0,N),b=n,L=p.Yd(0),n=h.Ih.local(),y=new h.Ed;;){var U=Math.floor((R.pa-o)/u),W=Math.ceil((R.wa-o)/u);if(!(3<W-U))break;U=Math.floor(.5*(W+U)),I.v=C.v-N,I.C=o+u*U;var j=h.ti.clip(b,I,L,g,S);I.v=I.C,I.C=C.C+N;var K=h.ti.clip(b,I,L,g,S);y.ig((U-W)*u,0),K.Pc(y),$==1736?b=n.W(j,K,p,null):(b=j).add(K,!1),b.A(C),C.en(R)}for(I.v=o,I.C=o+u,(o=new h.l).L(I),o.X(L,0),(o=Math.floor((C.v-I.v)/u)*u)!=0?(I.move(o,0),y.ig(-o,0)):y.MB(),o=$==1607?new h.Ua(b.description):new h.Ea(b.description),g=new h.l,R=new h.l;C.C>I.v;)(N=h.ti.clip(b,I,L,0,S)).A(R),($==1607?!N.B()&&(R.S()>L||R.da()>L):!N.B()&&($!=1736||R.S()>L))&&(N.Pc(y),N.A(R),o.A(g),g.X(L,L),g.isIntersecting(R)&&$==1736?o=n.W(o,N,p,null):o.add(N,!1)),I.move(u,0),y.shift(-u,0);return o},a.cv=function(n,o,u,p){for(var y=u+p,g=0;g<o;g++){var b=n[g].x;u<=b&&b<y||!(b<u||b>y||b==y)||(b+=Math.ceil((u-b)/p)*p,b=h.P.Tk(b,u,y),n[g].x=b)}},a.Hn=function(n,o,u,p,y,g){if(!o.Xc())throw h.i.ga("fold_into_360_degree_range");if(n.B())return n;if(o.Tb()==2){u=o.rv();var b=o.qv()-u}else{var S=o.bf();b=360*S,u-=180*S}return a.Jp(n,u,b,o,p,y,!0,g)},a.lF=function(n,o,u,p){if(u.Tb()==2)p=u.rv(),u=u.qv()-p;else{var y=u.bf();u=360*y,p-=180*y}a.cv(n,o,p,u)},a.nj=function(n,o){var u=o.Le();if(n.K()==33){var p=n.kh();return u.G<=p&&p<=u.H?n:n.Ja()}p=new h.l,n.A(p);var y=new h.l;return y.L(u),y.v=p.v,y.C=p.C,y.X(.01*y.da(),0),u=h.ua.py(o,p),y.contains(p)?n:h.ti.clip(n,y,u,0,null)},a.kr=function(n,o,u){return n>o.C&&n-o.C<u?o.C:n<o.v&&o.v-n<u?o.v:n},a.BX=function(n,o,u,p){p.x=a.kr(n.x,o,u),p.y=n.y},a.AX=function(n,o,u,p){for(var y=0;y<o;y++)n[y].y<u.G||n[y].y>u.H?n[y].Sc():n[y].x=a.kr(n[y].x,u,p)},a.Lt=function(n,o,u,p){if(!n.B()){var y=n.K();if(!p||y!=1736)if(h.ba.zj(y)){p=n.vb(0),y=0;for(var g=n.I();y<g;y++){var b=p.read(2*y),S=a.kr(b,o,u);S!=b&&p.write(2*y,S)}n.Qc(1993)}else if(y==197)p=new h.l,n.A(p),p.v=a.kr(p.v,o,u),p.C=a.kr(p.C,o,u),n.Zo(p);else{if(y!=33)throw h.i.ga("internal error");n.YB(a.kr(n.Ng(),o,u))}}},a.pS=function(n,o,u,p){var y=new h.hd,g=y.Ib(n);return n=h.ua.Ju(o,n),a.ms(y,g,o,n,u,!0,p),y.Ke(g)},a.ms=function(n,o,u,p,y,g,b){if(!u.Xc())throw h.i.O("invalid call");var S=u.Le(),$=u.tc(),I=$.gh().getDatum().getSpheroid();$=$.Id().ci;var C=I.getFlattening();I=I.getAxis(),C*=2-C;var R=new h.Oc;S.en(R);var L=null,N=[[0,0],[0,0]];if(u.Tb()==2?(L=u.gh(),g?(N[0][0]=a.an(b,R),N[0][1]=S.Lp(),h.gj.projToGeog(L,1,N),S=N[0][0]*$):(N[0][0]=S.ik(),N[0][1]=b,h.gj.projToGeog(L,1,N),S=N[0][1]*$)):S=b*$,!g&&S!=0&&y!=c.GreatElliptic)throw h.i.ga("invalid argument");var U=new h.ha,W=[0],j=new h.h,K=new h.h,se=new h.h,ne=[null,null],pe=new h.h,he=new h.h,xe=new h.h,ke=new h.h;for(o=n.Ob(o);o!=-1;o=n.Sb(o)){var Ae=n.Ya(o);n.D(Ae,pe);for(var st=!1,qe=Ae=n.V(Ae);qe!=-1;qe=n.V(qe)){if(qe==Ae){if(st)break;st=!0}if(n.D(qe,he),g&&(p<b-pe.x&&he.x-b>p||p<b-he.x&&pe.x-b>p)||!g&&(b!=0||p<-pe.y&&he.y>p||p<-he.y&&pe.y>p))do if(!(Math.abs(pe.x-he.x)>=.5*R.S())){if(u.Tb()==2?(N[0][0]=a.an(pe.x,R),N[0][1]=pe.y,N[1][0]=a.an(he.x,R),N[1][1]=he.y,h.gj.projToGeogCenter(L,2,N,0),xe.x=N[0][0]*$,xe.y=N[0][1]*$,ke.y=N[1][1]*$):(xe.x=pe.x*$,xe.y=pe.y*$,ke.y=he.y*$),ke.x=2*(he.x-pe.x)*Math.PI/R.S()+xe.x,g){if(K.x=S,K.y=a.Iz(I,C,xe,ke,S,y),isNaN(K.y))break;ne[0]=K;var It=1}else if(y==c.GreatElliptic){var xt=[0,0];if((It=h.Nx.Jz(C,xe,ke,S,xt))==0)break;K.x=xt[0],K.y=S,ne[0]=K,It==2&&(se.x=xt[1],se.y=S,ne[1]=se)}else{if(K.x=a.Gz(I,C,xe,ke,y),isNaN(K.x))break;K.y=0,ne[0]=K,It=1}var tt=-1;for(xt=0;xt<It;xt++){h.kb.xd(I,C,xe.x,xe.y,ke.x,ke.y,U,null,null,y);var xi=U.u;h.kb.xd(I,C,xe.x,xe.y,ne[xt].x,ne[xt].y,U,null,null,y);var nr=U.u;if(u.Tb()==2?(N[0][0]=ne[xt].x/$,N[0][1]=ne[xt].y/$,h.gj.geogToProj(L,1,N),g?(j.y=N[0][1],j.x=b):(j.x=a.qs(N[0][0],pe.x,he.x,R),j.y=b)):g?(j.x=b,j.y=ne[xt].y/$):(j.x=a.qs(ne[xt].x/$,pe.x,he.x,R),j.y=b),W[0]=0<xi?h.P.Tk(nr/xi,0,1):.5,W[0]==0||W[0]==1)break;tt>W[0]||(tt=n.Na(qe),n.Wl(tt,W,1),n.Db(n.V(tt),j.x,j.y),tt=W[0])}}while(0);pe.N(he)}}},a.an=function(n,o){var u=o.wa-o.pa;return o.Kt(n-Math.floor((n-o.pa)/u)*u)},a.qs=function(n,o,u,p){var y=new h.Oc;for(y.L(o,u),u=p.S(),n=Math.floor((n-o)/u)*u+n,y=y.tf();Math.abs(n-y)>Math.abs(n+u-y);)n+=u;return n},a.Un=function(n,o,u){return n=h.sr.Ep(n),o=h.sr.mx(n,h.sr.Ep(o)),(u=h.sr.mx(n,h.sr.Ep(u)))==0||0<o&&0<u&&u<=o||0>o&&0>u&&u>=o},a.Iz=function(n,o,u,p,y,g){if(g==c.GreatElliptic)return h.Nx.NS(o,u,p,y);if(Math.abs(u.x-p.x)>=Math.PI||!a.Un(u.x,p.x,y))return NaN;if(u.x>p.x)var b=p;else b=u,u=p;p=new h.ha;var S=new h.ha,$=new h.ha;h.kb.xd(n,o,b.x,b.y,u.x,u.y,S,p,null,g);var I=S.u,C=0,R=1,L=new h.h;for(L.N(b);I*(R-C)>1e-12*n;){var N=.5*(C+R);if(h.kb.qj(n,o,b.x,b.y,I*N,p.u,S,$,g),L.x=S.u,L.y=$.u,L.x==y)break;if(a.Un(b.x,L.x,y))R=N;else{if(!a.Un(u.x,L.x,y))return NaN;C=N}}return L.y},a.Gz=function(n,o,u,p,y){if(y==c.GreatElliptic)return n=[0,0],h.Nx.Jz(o,u,p,0,n),n[0];if(u.y>p.y)var g=p;else g=u,u=p;if((p=new h.Oc).L(g.y,u.y),!p.contains(0)||Math.abs(g.x-u.x)>=Math.PI)return NaN;if(g.x==u.x)return g.x;var b=new h.ha,S=new h.ha,$=new h.ha;h.kb.xd(n,o,g.x,g.y,u.x,u.y,S,b,null,y);var I=S.u,C=0,R=1,L=new h.h;for(L.N(g);I*(R-C)>1e-12*n;){var N=.5*(C+R);if(h.kb.qj(n,o,g.x,g.y,I*N,b.u,S,$,y),L.x=S.u,L.y=$.u,p.L(g.y,L.y),L.y==0)break;if(p.contains(0))R=N;else{if(p.L(u.y,L.y),!p.contains(0))return NaN;C=N}}return L.x},a.RI=function(n,o,u,p){if(!n.ef.Xc())return!1;var y=new h.ee(o.description);if(y.Gd(o,0,-1),p=h.Gx.local().W(y,n,p),y=o.I(),u.Pa(),y!=p.I())return!1;var g=new h.l;o.A(g);var b=new h.l;if(p.A(b),g=g.S(),b=b.S(),g!=0&&b!=0){if(b/=g,n=n.$f.ih().S()/n.ef.ih().S(),1e-10<Math.abs(b/n-1))return!1}else if(g!=0||b!=0)return!1;for(u.add(o,!1),o=new h.h,n=0;n<y;n++)p.D(n,o),u.Db(n,o);return!0},a.lN=function(n,o){return(n%=360*o)>=180*o&&(n-=360*o),n},a.OI=function(n,o,u,p){if(u==O.Clip){var y=o.ol();y.K()==197?(u=new h.l,y.A(u),y=h.ua.py(o,u),n=h.ti.clip(n,u,y,5e4*o.rm(),p)):h.fj.local().W(1,y,n,o,p)||(n=h.Zj.local().W(n,y,o,p))==y&&(n=h.Xk.kg(n))}else o.Xc()&&(p=new h.l,n.yc(p),o.Le().contains(p)||(a.Lt(n,o.Le(),o.Yd(0),!0),u==O.PannableFold&&(n=a.nj(n,o)),n=a.Hn(n,o,0,!0,1e5*o.rm(),null)));return n},a.SD=function(n,o,u){var p=o.Yr();if(p==null)return n;var y=(o=o.tc()).Le().S(),g=new h.l;n.yc(g);var b=new h.Oc;g.en(b),g=p.Ha(),p=null;for(var S=new h.Ed;g.ab();)for(;g.Ia();){var $=g.ia(),I=$.Vg(0,0),C=new h.Oc;for(C.L(I.pa,I.wa),I=0;C.wa>b.pa;)C.move(-y),--I;for(;C.pa<=b.wa;){if(C.isIntersecting(b)){p==null&&(p=new h.Ua);var R=h.zb.YO($.bc(),$.xc());I!=0&&(S.ig(I*y,0),R.Pc(S)),p.pc(R,!0)}C.move(y),++I}}return p!=null?(o=h.ua.bO(o,p),o=h.ua.Gr(o),h.bu.gP(n,p,o,u)):n},a.$N=function(n,o,u,p,y){return n>=u&&o<=p?0:a.oE(.5*(o+n),u,p,y)},a.oE=function(n,o,u,p){return h.mc.round((.5*(u+o)-n)/p)*p},a.QQ=function(n,o,u,p,y,g,b,S){var $=a.fv(p,y),I=$.S(),C=I/360,R=a.kE*C,L=n.vb(0),N=o.Xc(),U=N?I/o.Le().S():0;o=n.Ja();for(var W=0,j=u.ea();W<j;++W){var K=N,se=new h.Ua(u.description);se.addPath(u,W,!0);var ne=u.ec(W);b!=0&&(ne=a.KD(ne,se,$.H-S,$.H,b))&&(K=!1);var pe=-1;ne=se.I();var he=!1;K&&(pe=n.Ca(W),he=n.ec(W));var xe=se.vb(0),ke=0,Ae=xe.read(0),st=0,qe=3*p.Yd(0),It=!1,xt=new h.h;xt.Sc();var tt=new h.h;tt.Sc();for(var xi=!1,nr=1;nr<ne;++nr){var Ii=h.h.construct(xe.gg(2*nr),xe.gg(2*nr+1)),ei=Ii.x,ti=ei+ke,zt=ti-Ae;if(Ii.x=ti,Math.abs(zt)>R){if(K){var ki=pe+nr-1,Dt=pe;(!he||nr+1<ne)&&(Dt+=nr),ki=L.read(2*ki),Dt=(L.read(2*Dt)-ki)*U,Math.abs(zt-Dt)>1*C&&(N=!1)}K||(ti=ei+(ke-=h.mc.En(I,ti-Ae)),++st,xi=ke!=0,Ii.x=ti)}else It||h.ua.vG(xt,tt,Ii,qe)&&(It=!0);xi&&xe.write(2*nr,ti),Ae=ti,xt.N(tt),tt.N(Ii)}st!=0&&se.Qc(1993),K=se.Oa(0),ne=se.Oa(ne-1),h.h.ub(K,ne),se=a.rQ(se,p,isNaN(y)?0:y,g),o.add(se,!1)}return n=p.Yd(0),u=$.S()/180,a.Lt(o,$,.1*n,!1),h.ti.clip(o,$,n,u,g)},a.rQ=function(n,o,u,p){return a.Hn(n,o,u,!0,0,p)},a.JS=function(n,o,u,p){var y=n.K();if(y==1736)for(o=o!=null?o.Yd(0):0,y=0;y<p;y++)h.jd.Zd(n,u[y],o)!=1&&u[y].Sc();else{if(y!=197)throw h.i.O();for(y=0;y<p;y++)n.ZO(u[y])||u[y].Sc()}},a.bl=function(n,o,u,p){if(32>u)for(var y=new h.Ta,g=0;g<u;g++)y.Db(o[g]),n.bl(y,p).D(o[g]);else{var b=new h.ee;for(b.se(3),b.CD(o,u),y=b.vb(3),g=0;g<u;g++)y.write(g,g);for(g=n.bl(b,p),n=g.vb(0),y=g.vb(3),p=h.h.construct(NaN,NaN),b=0;b<u;b++)o[b]=p;for(u=g.I(),g=0;g<u;g++)p=y.read(g),n.uc(2*g,o[p])}},a.al=function(n,o,u,p){if(32>u)for(var y=new h.Ta,g=0;g<u;g++)y.Db(o[g]),n.al(y,p).D(o[g]);else{var b=new h.ee;for(b.se(3),b.CD(o,u),y=b.vb(3),g=0;g<u;g++)y.write(g,g);for(g=n.al(b,p),n=g.vb(0),y=g.vb(3),p=h.h.construct(NaN,NaN),b=0;b<u;b++)o[b]=p;for(u=g.I(),g=0;g<u;g++)p=y.read(g),n.uc(2*g,o[p])}},a.kE=210,a}()}(B||(B={})),function(h){var O;(O=h.PL||(h.PL={}))[O.rightSide=1]="rightSide";var w=function(){function c(a,n,o){this.Ds=new h.h,a===void 0?this.Ko=-1:(this.Ds.N(a),this.Ko=n,this.La=o,this.pw=0)}return c.prototype.RJ=function(a){this.pw=a?1|this.pw:-2&this.pw},c.prototype.B=function(){return 0>this.Ko},c.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},c.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Ko},c.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},c.prototype.Nz=function(){return(1&this.pw)!=0},c.prototype.by=function(a,n,o,u){this.Ds.x=a,this.Ds.y=n,this.Ko=o,this.La=u},c}();h.bm=w}(B||(B={})),function(h){var O=function(){function c(){}return c.prototype.Wo=function(a,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,a.yc(this.Gk),this.Gk.X(n,n),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(a.K()))?(this.OH=a.bc(),this.NH=a.xc(),this.ra=n):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},c.prototype.Zi=function(a,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(a),this.Gk.X(n,n),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},c.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var a=null,n=null,o=null,u=null;this.xs&&(a=new h.h,n=new h.h,o=new h.l);for(var p=!1;!p;){for(;this.vk!=-1;){var y=this.Gb.Xy(this.Gb.hv(this.vk));if(y.isIntersecting(this.Gk)){if(!this.xs){p=!0;break}if(a.N(this.OH),n.N(this.NH),o.L(y),o.X(this.ra,this.ra),0<o.uy(a,n)){p=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){y=this.vh.Gc();var g=this.Ki[this.Ki.length-1];for(u==null&&((u=[])[0]=new h.l,u[1]=new h.l,u[2]=new h.l,u[3]=new h.l),w.zJ(g,u),this.vh.Jf(),--this.Ki.length,g=0;4>g;g++){var b=this.Gb.Np(y,g);if(b!=-1&&0<this.Gb.RR(b)&&u[g].isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),n.N(this.NH),o.L(u[g]),o.X(this.ra,this.ra),0<o.uy(a,n)){var S=new h.l;S.L(u[g]),this.vh.add(b),this.Ki.push(S)}}else(S=new h.l).L(u[g]),this.vh.add(b),this.Ki.push(S)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},c.XO=function(a,n,o){var u=new c;return u.Gb=a,u.Gk=new h.l,u.vh=new h.ja(0),u.Ki=[],u.Wo(n,o),u},c.WO=function(a,n,o){var u=new c;return u.Gb=a,u.Gk=new h.l,u.vh=new h.ja(0),u.Ki=[],u.Zi(n,o),u},c.VO=function(a){var n=new c;return n.Gb=a,n.Gk=new h.l,n.vh=new h.ja(0),n.Ki=[],n},c}();h.CY=O;var w=function(){function c(a,n){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Pk(a,n)}return c.prototype.reset=function(a,n){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(a,n)},c.prototype.xj=function(a,n){return this.Bv(a,n,0,this.Da,this.kf,!1,-1)},c.prototype.Ez=function(a,n,o){o=o==-1?this.kf:this.RF(o);var u=this.da(o),p=this.jR(o);return this.Bv(a,n,u,p,o,!1,-1)},c.prototype.ka=function(a){return this.eR(a)},c.prototype.BF=function(a){return this.Xy(this.hv(a))},c.prototype.da=function(a){return this.lv(a)},c.prototype.jR=function(a){var n=new h.l;n.L(this.Da);var o=this.lv(a);a=this.LF(a);for(var u=0;u<2*o;u+=2){var p=h.P.truncate(3&a>>u);p==0?(n.v=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):p==1?(n.C=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):(p==2?n.C=.5*(n.v+n.C):n.v=.5*(n.v+n.C),n.H=.5*(n.G+n.H))}return n},c.prototype.RR=function(a){return this.vz(a)},c.prototype.qR=function(a,n){return O.XO(this,a,n)},c.prototype.HF=function(a,n){return O.WO(this,a,n)},c.prototype.getIterator=function(){return O.VO(this)},c.prototype.Pk=function(a,n){if(0>n||32<2*n)throw h.i.O("invalid height");this.wT=n,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},c.prototype.Bv=function(a,n,o,u,p,y,g){if(!u.contains(n))return o==0?-1:this.Bv(a,n,0,this.Da,this.kf,y,g);if(!y)for(var b=p;b!=-1;b=this.DR(b))this.jx(b,this.vz(b)+1);(b=new h.l).L(u),u=p;var S=[];for(S[0]=new h.l,S[1]=new h.l,S[2]=new h.l,S[3]=new h.l;o<this.wT&&this.dO(u);o++){c.zJ(b,S);for(var $=!1,I=0;4>I;I++)if(S[I].contains(n)){$=!0;var C=this.Np(u,I);C==-1&&(C=this.mP(u,I)),this.jx(C,this.vz(C)+1),u=C,b.L(S[I]);break}if(!$)break}return this.nS(a,n,o,b,u,y,p,g)},c.prototype.nS=function(a,n,o,u,p,y,g,b){var S=this.IF(p);if(y){if(p==g)return b;this.NP(b),y=b}else y=this.oP(),this.IB(y,a),this.FW(this.hv(y),n);return this.hX(y,p),S!=-1?(this.hx(y,S),this.ex(S,y)):this.BJ(p,y),this.NB(p,y),this.dx(p,this.nv(p)+1),this.cO(p)&&this.HQ(o,u,p),y},c.prototype.NP=function(a){var n=this.RF(a),o=this.IF(n),u=this.JR(a),p=this.pv(a);this.Wr(n)==a?(p!=-1?this.hx(p,-1):this.NB(n,-1),this.BJ(n,p)):o==a?(this.ex(u,-1),this.NB(n,u)):(this.hx(p,u),this.ex(u,p)),this.hx(a,-1),this.ex(a,-1),this.dx(n,this.nv(n)-1)},c.zJ=function(a,n){var o=.5*(a.v+a.C),u=.5*(a.G+a.H);n[0].L(o,u,a.C,a.H),n[1].L(a.v,u,o,a.H),n[2].L(a.v,a.G,o,u),n[3].L(o,a.G,a.C,u)},c.prototype.cO=function(a){return this.nv(a)==8&&!this.bG(a)},c.prototype.HQ=function(a,n,o){var u=this.Wr(o);do{var p=this.hv(u),y=this.ai.U(u,0);p=this.Xy(p),this.Bv(y,p,a,n,o,!0,u),u=y=this.pv(u)}while(u!=-1)},c.prototype.dO=function(a){return 8<=this.nv(a)||this.bG(a)},c.prototype.bG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},c.prototype.mP=function(a,n){var o=this.jf.De();return this.JW(a,n,o),this.jx(o,0),this.dx(o,0),this.Rk(o,a),this.FJ(o,this.lv(a)+1),this.IJ(o,n<<2*this.lv(a)|this.LF(a)),o},c.prototype.oP=function(){var a=this.ai.De();if(0<this.iw.size){var n=this.iw.Gc();this.iw.Jf()}else n=this.ys.length,this.ys.push(new h.l);return this.GW(a,n),a},c.prototype.Np=function(a,n){return this.jf.U(a,n)},c.prototype.JW=function(a,n,o){this.jf.T(a,n,o)},c.prototype.Wr=function(a){return this.jf.U(a,4)},c.prototype.BJ=function(a,n){this.jf.T(a,4,n)},c.prototype.IF=function(a){return this.jf.U(a,5)},c.prototype.NB=function(a,n){this.jf.T(a,5,n)},c.prototype.LF=function(a){return this.jf.U(a,6)},c.prototype.IJ=function(a,n){this.jf.T(a,6,n)},c.prototype.nv=function(a){return this.jf.U(a,7)},c.prototype.vz=function(a){return this.jf.U(a,8)},c.prototype.dx=function(a,n){this.jf.T(a,7,n)},c.prototype.jx=function(a,n){this.jf.T(a,8,n)},c.prototype.DR=function(a){return this.jf.U(a,9)},c.prototype.Rk=function(a,n){this.jf.T(a,9,n)},c.prototype.lv=function(a){return this.jf.U(a,10)},c.prototype.FJ=function(a,n){this.jf.T(a,10,n)},c.prototype.eR=function(a){return this.ai.U(a,0)},c.prototype.IB=function(a,n){this.ai.T(a,0,n)},c.prototype.JR=function(a){return this.ai.U(a,1)},c.prototype.pv=function(a){return this.ai.U(a,2)},c.prototype.hx=function(a,n){this.ai.T(a,1,n)},c.prototype.ex=function(a,n){this.ai.T(a,2,n)},c.prototype.RF=function(a){return this.ai.U(a,3)},c.prototype.hX=function(a,n){this.ai.T(a,3,n)},c.prototype.hv=function(a){return this.ai.U(a,4)},c.prototype.GW=function(a,n){this.ai.T(a,4,n)},c.prototype.Xy=function(a){return this.ys[a]},c.prototype.FW=function(a,n){this.ys[a].L(n)},c}();h.fu=w}(B||(B={})),function(h){var O;(O=h.WK||(h.WK={}))[O.Outside=0]="Outside",O[O.Inside=1]="Inside",O[O.Border=2]="Border";var w=function(){function a(n,o){this.KT=o,this.Xh=n}return a.prototype.ax=function(n,o){this.dH!=o&&n.flush(),this.dH=o},a.prototype.bF=function(n,o){for(var u=0;u<o;)for(var p=n[u++],y=n[u++],g=n[u++]*this.KT;p<y;p++)this.Xh[g+(p>>4)]|=this.dH<<2*(15&p)},a}();h.DY=w;var c=function(){function a(n,o,u){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(n,o,u)}return a.create=function(n,o,u){if(!a.uE(n))throw h.i.O();return a.rP(n,o,u)},a.kW=function(n){switch(n){case 0:n=1024;break;case 1:n=16384;break;case 2:n=262144;break;default:throw h.i.ga("Internal Error")}return n},a.uE=function(n){return!(n.B()||n.K()!=1607&&n.K()!=1736)},a.prototype.mQ=function(n,o){o=o.Ha();for(var u=new h.h,p=new h.h;o.ab();)for(;o.Ia();){var y=o.ia();if(y.K()!=322)throw h.i.ga("Internal Error");n.Gh(y.bc(),u),n.Gh(y.xc(),p),this.Ti.fy(u.x,u.y,p.x,p.y)}this.Ti.dJ(h.Ox.Bx)},a.prototype.nQ=function(){throw h.i.ga("Internal Error")},a.prototype.My=function(n,o){for(var u=1;4>u;u++)n.fy(o[u-1].x,o[u-1].y,o[u].x,o[u].y);n.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.dJ(h.Ox.Bx)},a.prototype.mK=function(n,o,u){for(var p=[null,null,null,null],y=0;y<p.length;y++)p[y]=new h.h;o=o.Ha(),u=this.Lk.$X(u)+1.5,y=new h.h;for(var g=new h.h,b=new h.h,S=new h.h,$=new h.h,I=new h.l,C=new h.h;o.ab();){var R=!1,L=!0;for(C.na(0,0);o.Ia();){var N=o.ia();if(S.x=N.ta,S.y=N.oa,$.x=N.qa,$.y=N.ma,I.Pa(),I.$b(S.x,S.y),I.Nk($.x,$.y),this.xl.CG(I)){this.Lk.Gh($,$),L?(this.Lk.Gh(S,S),C.N(S),L=!1):S.N(C),y.vc($,S);var U=.5>(N=y.length());N==0?y.na(1,0):(U||C.N($),y.scale(u/N),g.na(-y.y,y.x),b.na(y.y,-y.x),S.sub(y),$.add(y),p[0].add(S,g),p[1].add(S,b),p[2].add($,b),p[3].add($,g),U?R=!0:this.My(n,p))}else R&&(this.My(n,p),R=!1),L=!0}R&&this.My(n,p)}},a.prototype.nC=function(n){return h.P.truncate(n*this.lH+this.WH)},a.prototype.oC=function(n){return h.P.truncate(n*this.Gs+this.YH)},a.rP=function(n,o,u){return new a(n,o,u)},a.prototype.Az=function(n,o,u){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(u)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Kk=o,u=0;for(var p=this.Hf,y=this.Wm;8<=p;)u+=p*y,p=h.P.truncate(p/2),y=h.P.truncate((2*p+31)/32);this.Xh=h.P.mg(u,0),this.Ti=new h.Ox,u=new w(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,u),n.A(this.xl),this.xl.X(o,o),p=new h.l;var g=o*(y=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=y.da(),p.L(this.xl.tf(),Math.max(g,this.xl.S()),Math.max(o,this.xl.da())),this.NA=this.Kk,this.Lk=new h.Ed,this.Lk.kS(p,y),new h.Ed,n.K()){case 550:u.ax(this.Ti,2),this.nQ();break;case 1607:u.ax(this.Ti,2),this.mK(this.Ti,n,this.NA);break;case 1736:u.ax(this.Ti,1),this.mQ(this.Lk,n),u.ax(this.Ti,2),this.mK(this.Ti,n,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},a.prototype.SN=function(){this.Ti.flush();for(var n=0,o=this.Hf*this.Wm,u=this.Hf,p=h.P.truncate(this.Hf/2),y=this.Wm,g=h.P.truncate((2*p+31)/32);8<u;){for(u=0;u<p;u++)for(var b=2*u,S=2*u+1,$=0;$<p;$++){var I=2*$,C=2*$+1,R=I>>4;I=2*(15&I);var L=C>>4;C=2*(15&C);var N=this.Xh[n+y*b+R]>>I&3;N|=this.Xh[n+y*b+L]>>C&3,N|=this.Xh[n+y*S+R]>>I&3,N|=this.Xh[n+y*S+L]>>C&3,this.Xh[o+g*u+($>>4)]|=N<<2*(15&$)}u=p,y=g,n=o,p=h.P.truncate(u/2),g=h.P.truncate((2*p+31)/32),o=n+y*u}},a.prototype.Uo=function(n,o){return this.xl.contains(n,o)?(n=this.nC(n),o=this.oC(o),0>n||n>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(n>>4)]>>2*(15&n)&3)==0?0:o==1?1:2):0},a.prototype.To=function(n){if(!n.Fa(this.xl))return 0;var o=this.nC(n.v),u=this.nC(n.C),p=this.oC(n.G);if(n=this.oC(n.H),0>o&&(o=0),0>p&&(p=0),u>=this.Hf&&(u=this.Hf-1),n>=this.Hf&&(n=this.Hf-1),o>u||p>n)return 0;for(var y=Math.max(u-o,1)*Math.max(n-p,1),g=0,b=this.Wm,S=this.Hf,$=0;;){if(32>y||16>S){for(y=p;y<=n;y++)for(var I=o;I<=u;I++)if(1<($=this.Xh[g+b*y+(I>>4)]>>2*(15&I)&3))return 2;if($==0)return 0;if($==1)return 1}g+=b*S,S=h.P.truncate(S/2),b=h.P.truncate((2*S+31)/32),o=h.P.truncate(o/2),p=h.P.truncate(p/2),u=h.P.truncate(u/2),n=h.P.truncate(n/2),y=Math.max(u-o,1)*Math.max(n-p,1)}},a.prototype.MR=function(){return this.Hf*this.Wm},a}();h.Mx=c}(B||(B={})),function(h){var O;(O=h.QL||(h.QL={}))[O.contains=1]="contains",O[O.within=2]="within",O[O.equals=3]="equals",O[O.disjoint=4]="disjoint",O[O.touches=8]="touches",O[O.crosses=16]="crosses",O[O.overlaps=32]="overlaps",O[O.unknown=0]="unknown",O[O.intersects=1073741824]="intersects";var w=function(){function a(){}return a.construct=function(n,o,u,p,y,g,b,S){var $=new a;return $.rw=n,$.Om=o,$.Mj=u,$.Ui=p,$.wH=y,$.OY=g,$.PY=b,$.QY=S,$},a}();h.Xt=function(){function a(){}return a.xD=function(n,o,u){if(a.ry(n)){var p=h.ua.mj(o,n,!1);o=!1,h.Wk.xE(n)&&(o=o||n.nu(p,u)),(p=n.K())!=1736&&p!=1607||!h.Wk.vE(n)||u==0||(o=o||n.hj(u)),p!=1736&&p!=1607||!h.Wk.wE(n)||u==0||o||n.cM()}},a.ry=function(n){return h.Wk.xE(n)||h.Wk.vE(n)||h.Wk.wE(n)},a}();var c=function(){function a(){this.th=[]}return a.uB=function(n,o,u,p,y){var g=n.K(),b=o.K();if(g==197){if(b==197)return a.oW(n,o,u,p);if(b==33)return p==2?p=1:p==1&&(p=2),a.cJ(o,n,u,p)}else if(g==33){if(b==197)return a.cJ(n,o,u,p);if(b==33)return a.qW(n,o,u,p)}if(n.B()||o.B())return p==4;var S=new h.l;n.A(S);var $=new h.l;o.A($);var I=new h.l;if(I.L(S),I.$b($),u=h.ua.Xd(u,I,!1),a.fk(S,$,u))return p==4;switch(S=!1,h.Xk.zd(g)&&((g=new h.Ua(n.description)).pc(n,!0),n=g,g=1607),h.Xk.zd(b)&&((b=new h.Ua(o.description)).pc(o,!0),o=b,b=1607),g!=197&&b!=197?(n.Eb()<o.Eb()||g==33&&b==550)&&(p==2?p=1:p==1&&(p=2)):g!=1736&&b!=197&&(p==2?p=1:p==1&&(p=2)),g){case 1736:switch(b){case 1736:S=a.st(n,o,u,p,y);break;case 1607:S=a.bn(n,o,u,p,y);break;case 33:S=a.rt(n,o,u,p);break;case 550:S=a.qt(n,o,u,p,y);break;case 197:S=a.BI(n,o,u,p,y)}break;case 1607:switch(b){case 1736:S=a.bn(o,n,u,p,y);break;case 1607:S=a.bB(n,o,u,p,y);break;case 33:S=a.ut(n,o,u,p,y);break;case 550:S=a.tt(n,o,u,p,y);break;case 197:S=a.HI(n,o,u,p)}break;case 33:switch(b){case 1736:S=a.rt(o,n,u,p);break;case 1607:S=a.ut(o,n,u,p,y);break;case 550:S=a.mt(o,n,u,p)}break;case 550:switch(b){case 1736:S=a.qt(o,n,u,p,y);break;case 1607:S=a.tt(o,n,u,p,y);break;case 550:S=a.UA(n,o,u,p,y);break;case 33:S=a.mt(n,o,u,p);break;case 197:S=a.cI(n,o,u,p)}break;case 197:switch(b){case 1736:S=a.BI(o,n,u,p,y);break;case 1607:S=a.HI(o,n,u,p);break;case 550:S=a.cI(o,n,u,p)}}return S},a.oW=function(n,o,u,p){if(n.B()||o.B())return p==4;var y=new h.l,g=new h.l,b=new h.l;switch(n.A(y),o.A(g),b.L(y),b.$b(g),n=h.ua.Xd(u,b,!1),p){case 4:return a.fk(y,g,n);case 2:return a.eF(g,y,n);case 1:return a.eF(y,g,n);case 3:return a.gk(y,g,n);case 8:return a.YP(y,g,n);case 32:return a.XP(y,g,n);case 16:return a.WP(y,g,n)}return!1},a.cJ=function(n,o,u,p){if(n.B()||o.B())return p==4;n=n.D();var y=new h.l,g=new h.l;switch(o.A(y),g.L(n),g.$b(y),o=h.ua.Xd(u,g,!1),p){case 4:return a.Tw(n,y,o);case 2:return a.$A(n,y,o);case 1:return a.MU(n,y,o);case 3:return a.qI(n,y,o);case 8:return a.ZA(n,y,o)}return!1},a.qW=function(n,o,u,p){if(n.B()||o.B())return p==4;n=n.D(),o=o.D();var y=new h.l;switch(y.L(n),y.$b(o),u=h.ua.Xd(u,y,!1),p){case 4:return a.NU(n,o,u);case 2:return a.pI(o,n,u);case 1:return a.pI(n,o,u);case 3:return a.rI(n,o,u)}return!1},a.st=function(n,o,u,p,y){switch(p){case 4:return a.fV(n,o,u);case 2:return a.Uw(o,n,u,y);case 1:return a.Uw(n,o,u,y);case 3:return a.iV(n,o,u);case 8:return a.qV(n,o,u);case 32:return a.lV(n,o,u,y)}return!1},a.bn=function(n,o,u,p,y){switch(p){case 4:return a.gV(n,o,u);case 1:return a.aB(n,o,u,y);case 8:return a.rV(n,o,u,y);case 16:return a.bV(n,o,u)}return!1},a.rt=function(n,o,u,p){switch(p){case 4:return a.eV(n,o,u);case 1:return a.ZU(n,o,u);case 8:return a.pV(n,o,u)}return!1},a.qt=function(n,o,u,p){switch(p){case 4:return a.dV(n,o,u);case 1:return a.YU(n,o,u);case 8:return a.oV(n,o,u);case 16:return a.aV(n,o,u)}return!1},a.BI=function(n,o,u,p,y){if(a.cV(n,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.sV(n,o,u);case 1:return a.XU(n,o,u);case 3:return a.hV(n,o,u);case 8:return a.nV(n,o,u,y);case 32:return a.kV(n,o,u,y);case 16:return a.$U(n,o,u,y)}return!1},a.bB=function(n,o,u,p){switch(p){case 4:return a.BV(n,o,u);case 2:return a.FI(o,n,u);case 1:return a.FI(n,o,u);case 3:return a.DV(n,o,u);case 8:return a.II(n,o,u);case 32:return a.HV(n,o,u);case 16:return a.GI(n,o,u)}return!1},a.ut=function(n,o,u,p){switch(p){case 4:return a.AV(n,o,u);case 1:return a.vV(n,o,u);case 8:return a.LV(n,o,u)}return!1},a.tt=function(n,o,u,p){switch(p){case 4:return a.zV(n,o,u);case 1:return a.uV(n,o,u);case 8:return a.KV(n,o,u);case 16:return a.xV(n,o,u)}return!1},a.HI=function(n,o,u,p){if(a.yV(n,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.MV(n,o,u);case 1:return a.tV(n,o,u);case 3:return a.CV(n,o,u);case 8:return a.JV(n,o,u);case 32:return a.GV(n,o,u);case 16:return a.wV(n,o,u)}return!1},a.UA=function(n,o,u,p){switch(p){case 4:return a.bU(n,o,u);case 2:return a.$H(o,n,u);case 1:return a.$H(n,o,u);case 3:return a.dU(n,o,u);case 32:return a.jU(n,o,u)}return!1},a.mt=function(n,o,u,p){switch(p){case 4:return a.aI(n,o,u);case 2:return a.nU(n,o,u);case 1:return a.ZT(n,o,u);case 3:return a.Pw(n,o,u)}return!1},a.cI=function(n,o,u,p){switch(p){case 4:return a.aU(n,o,u);case 2:return a.mU(n,o,u);case 1:return a.YT(n,o,u);case 3:return a.cU(n,o,u);case 8:return a.lU(n,o,u);case 16:return a.$T(n,o,u)}return!1},a.iV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!!a.gk(p,y,u)&&(p=a.rc(n,o,!1))!=4&&p!=1&&p!=2&&(!!a.ZH(n,o,u)||(p=n.Rb(),y=o.Rb(),!(Math.abs(p-y)>4*Math.max(n.I(),o.I())*u)&&a.Rz(n,o,u,!0)))},a.fV=function(n,o,u){var p=a.rc(n,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.zI(n,o,u)},a.qV=function(n,o,u){var p=a.rc(n,o,!1);return p!=4&&p!=1&&p!=2&&a.DI(n,o,u,null)},a.lV=function(n,o,u,p){var y=a.rc(n,o,!1);return y!=4&&y!=1&&y!=2&&a.AI(n,o,u,p)},a.Uw=function(n,o,u,p){var y=new h.l,g=new h.l;return n.A(y),o.A(g),!!a.Ac(y,g,u)&&(y=a.rc(n,o,!1))!=4&&y!=2&&(y==1||a.wI(n,o,u,p))},a.gV=function(n,o,u){var p=a.rc(n,o,!0);return p==4||p!=1&&p!=1073741824&&a.zI(n,o,u)},a.rV=function(n,o,u,p){var y=a.rc(n,o,!1);return y!=4&&y!=1&&a.EI(n,o,u,p)},a.bV=function(n,o,u){var p=a.rc(n,o,!1);return p!=4&&p!=1&&a.yI(n,o,u,null)},a.aB=function(n,o,u,p){var y=new h.l,g=new h.l;return n.A(y),o.A(g),!!a.Ac(y,g,u)&&(y=a.rc(n,o,!1))!=4&&(y==1||a.xI(n,o,u,p))},a.eV=function(n,o,u){return h.jd.FG(n,o,u)==0},a.pV=function(n,o,u){return o=o.D(),a.CI(n,o,u)},a.ZU=function(n,o,u){return o=o.D(),a.vI(n,o,u)},a.dV=function(n,o,u){var p=a.rc(n,o,!1);if(p==4)return!0;if(p==1)return!1;p=new h.l,n.A(p),p.X(u,u);for(var y=new h.h,g=0;g<o.I();g++)if(o.D(g,y),p.contains(y)){var b=h.jd.Zd(n,y,u);if(b==1||b==2)return!1}return!0},a.oV=function(n,o,u){var p=this.rc(n,o,!1);if(p==4||p==1)return!1;p=new h.l,n.A(p),p.X(u,u);for(var y=!1,g=n,b=!1,S=0;S<o.I();S++){var $=o.Oa(S);if(p.contains($)){if(($=h.jd.Zd(g,$,u))==2)y=!0;else if($==1)return!1}b||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?g=n:(g=new h.Ea,n.copyTo(g),g.hj(1)),b=!0)}return!!y},a.aV=function(n,o,u){var p=this.rc(n,o,!1);if(p==4||p==1)return!1;var y=new h.l;p=new h.l;var g=new h.l;n.A(y),o.A(g),p.L(y),p.X(u,u),g=y=!1;for(var b=n,S=!1,$=0;$<o.I();$++){var I=o.Oa($);if(p.contains(I)?(I=h.jd.Zd(b,I,u))==0?g=!0:I==1&&(y=!0):g=!0,y&&g)return!0;S||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(b=new h.Ea,n.copyTo(b),b.hj(1)),S=!0)}return!1},a.YU=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),!this.Ac(p,y,u)||(y=this.rc(n,o,!1))==4)return!1;if(y==1)return!0;y=!1;for(var g=n,b=!1,S=0;S<o.I();S++){var $=o.Oa(S);if(!p.contains($))return!1;if(($=h.jd.Zd(g,$,u))==1)y=!0;else if($==0)return!1;b||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?g=n:(g=new h.Ea,n.copyTo(g),g.hj(1)),b=!0)}return y},a.hV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!!a.gk(p,y,u)&&((p=new h.Ea).bd(o,!1),a.Rz(n,p,u,!0))},a.cV=function(n,o,u){var p=a.rc(n,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var y=new h.l;if(p=new h.l,n.A(y),o.A(p),a.Ac(p,y,u)||(y=new h.h,p.fn(y),(o=h.jd.Zd(n,y,u))!=0)||(p.VI(y),(o=h.jd.Zd(n,y,u))!=0)||(p.gn(y),(o=h.jd.Zd(n,y,u))!=0)||(p.YI(y),(o=h.jd.Zd(n,y,u))!=0))return!1;o=n.vb(0),(y=new h.l).L(p),y.X(u,u);for(var g=0,b=n.I();g<b;g++){var S=o.read(2*g),$=o.read(2*g+1);if(y.contains(S,$))return!1}return!a.NG(n,p,u)},a.nV=function(n,o,u,p){var y=a.rc(n,o,!1);if(y==4||y==1||y==2)return!1;y=new h.l;var g=new h.l;return n.A(y),o.A(g),!a.Ac(g,y,u)&&(g.S()<=u&&g.da()<=u?(o=o.Kp(),a.CI(n,o,u)):g.S()<=u||g.da()<=u?(y=new h.Ua,g=new h.Ta,o.If(0,g),y.nf(g),o.If(2,g),y.lineTo(g),a.EI(n,y,u,p)):((y=new h.Ea).bd(o,!1),a.DI(n,y,u,p)))},a.kV=function(n,o,u,p){var y=a.rc(n,o,!1);if(y==4||y==1||y==2)return!1;y=new h.l;var g=new h.l;return n.A(y),o.A(g),!(a.Ac(g,y,u)||g.S()<=u||g.da()<=u)&&((y=new h.Ea).bd(o,!1),a.AI(n,y,u,p))},a.sV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),a.Ac(y,p,u)},a.XU=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!!a.Ac(p,y,u)&&(p=a.rc(n,o,!1))!=4&&p!=2&&(p==1||(y.S()<=u&&y.da()<=u?(o=o.Kp(),a.vI(n,o,u)):y.S()<=u||y.da()<=u?(y=new h.Ua,p=new h.Ta,o.If(0,p),y.nf(p),o.If(2,p),y.lineTo(p),a.xI(n,y,u,null)):((y=new h.Ea).bd(o,!1),a.wI(n,y,u,null))))},a.$U=function(n,o,u,p){var y=new h.l,g=new h.l;return n.A(y),o.A(g),!(a.Ac(g,y,u)||g.da()>u&&g.S()>u||g.da()<=u&&g.S()<=u)&&(y=new h.Ua,g=new h.Ta,o.If(0,g),y.nf(g),o.If(2,g),y.lineTo(g),a.yI(n,y,u,p))},a.DV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(!a.gk(p,y,u)||a.rc(n,o,!1)==4)&&(!!a.ZH(n,o,u)||a.Rz(n,o,u,!1))},a.BV=function(n,o,u){return this.rc(n,o,!1)==4||!!new h.am(n,o,u,!0).next()&&!this.OG(n,o,u)},a.II=function(n,o,u){if(a.rc(n,o,!1)==4)return!1;var p=new h.ce(0);if(a.Sz(n,o,u,p)!=0)return!1;for(var y=new h.ee,g=0;g<p.size;g+=2){var b=p.read(g),S=p.read(g+1);y.Du(b,S)}return n=n.ng(),o=o.ng(),n.Gd(o,0,o.I()),a.Ow(n,y,u)},a.GI=function(n,o,u){if(a.rc(n,o,!1)==4)return!1;var p=new h.ce(0);if(a.Sz(n,o,u,p)!=0)return!1;for(var y=new h.ee,g=0;g<p.size;g+=2){var b=p.read(g),S=p.read(g+1);y.Du(b,S)}return n=n.ng(),o=o.ng(),n.Gd(o,0,o.I()),!a.Ow(n,y,u)},a.HV=function(n,o,u){return a.rc(n,o,!1)!=4&&a.QG(n,o,u)},a.FI=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(!a.Ac(p,y,u)||a.rc(n,o,!1)==4)&&a.Am(o,n,u,!1)},a.AV=function(n,o,u){return a.rc(n,o,!1)==4||(o=o.D(),!a.Tz(n,o,u))},a.LV=function(n,o,u){return a.rc(n,o,!1)!=4&&(o=o.D(),a.Uz(n,o,u))},a.vV=function(n,o,u){return a.rc(n,o,!1)!=4&&(o=o.D(),a.MG(n,o,u))},a.zV=function(n,o,u){return a.rc(n,o,!1)==4||!a.PG(n,o,u,!1)},a.KV=function(n,o,u){if(this.rc(n,o,!1)==4)return!1;var p=n.Ha(),y=new h.l,g=new h.l,b=new h.l;n.A(y),o.A(g),y.X(u,u),g.X(u,u),b.L(y),b.Fa(g),y=null;var S=n.Cb;if(S!=null){var $=S.Gb;y=S.Bo,$==null&&($=S=h.ua.lj(n,b))}else $=S=h.ua.lj(n,b);var I=$.getIterator(),C=null;y!=null&&(C=y.getIterator());var R=new h.h,L=new h.h,N=!1,U=u*u;for(y=new h.rn(o.I()),S=0;S<o.I();S++)y.write(S,0);for(S=0;S<o.I();S++)if(o.D(S,R),b.contains(R)){if(g.L(R.x,R.y,R.x,R.y),C!=null&&(C.Zi(g,u),C.next()==-1))continue;I.Zi(g,u);for(var W=I.next();W!=-1;W=I.next())if(p.Wb($.ka(W)),(W=p.ia()).ic(W.ge(R,!1),L),h.h.zc(R,L)<=U){y.write(S,1),N=!0;break}}if(!N)return!1;for(n=n.ng(),p=new h.ee,g=new h.h,S=0;S<o.I();S++)y.read(S)!=0&&(o.D(S,g),p.Du(g.x,g.y));return this.Ow(n,p,u)},a.xV=function(n,o,u){if(this.rc(n,o,!1)==4)return!1;var p=n.Ha(),y=new h.l,g=new h.l,b=new h.l;n.A(y),o.A(g),y.X(u,u),g.X(u,u),b.L(y),b.Fa(g),y=null;var S=n.Cb;if(S!=null){var $=S.Gb;y=S.Bo,$==null&&($=S=h.ua.lj(n,b))}else $=S=h.ua.lj(n,b);var I=$.getIterator(),C=null;y!=null&&(C=y.getIterator());var R=new h.h,L=new h.h,N=!1,U=!1,W=u*u;for(y=new h.rn(o.I()),S=0;S<o.I();S++)y.write(S,0);for(S=0;S<o.I();S++)if(o.D(S,R),b.contains(R)){if(g.L(R.x,R.y,R.x,R.y),C!=null&&(C.Zi(g,u),C.next()==-1)){U=!0;continue}I.Zi(g,u);for(var j=!1,K=I.next();K!=-1;K=I.next())if(p.Wb($.ka(K)),(K=p.ia()).ic(K.ge(R,!1),L),h.h.zc(R,L)<=W){y.write(S,1),j=N=!0;break}j||(U=!0)}else U=!0;if(!N||!U)return!1;for(n=n.ng(),p=new h.ee,g=new h.h,S=0;S<o.I();S++)y.read(S)!=0&&(o.D(S,g),p.Du(g.x,g.y));return!this.Ow(n,p,u)},a.uV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(!a.Ac(p,y,u)||a.rc(n,o,!1)==4||!a.PG(n,o,u,!0))&&(n=n.ng(),!a.bI(n,o,u))},a.CV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(y.da()>u&&y.S()>u)&&a.gk(p,y,u)},a.yV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!a.Ac(y,p,u)&&!a.NG(n,y,u)},a.JV=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),y.da()<=u&&y.S()<=u)return y=o.Kp(),a.Uz(n,y,u);if(y.da()<=u||y.S()<=u)return y=new h.Ua,p=new h.Ta,o.If(0,p),y.nf(p),o.If(2,p),y.lineTo(p),a.II(n,y,u);n=n.Ha(),o=new h.l,p=new h.l,o.L(y),p.L(y),o.X(-u,-u),p.X(u,u),y=!1;for(var g=new h.l,b=new h.l;n.ab();)for(;n.Ia();){if(n.ia().A(g),b.L(o),b.Fa(g),!b.B()&&(b.da()>u||b.S()>u))return!1;b.L(p),b.Fa(g),b.B()||(y=!0)}return y},a.GV=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(a.Ac(p,y,u)||a.Ac(y,p,u)||a.Ac(y,p,u)||y.da()>u&&y.S()>u||y.da()<=u&&y.S()<=u)&&(p=new h.Ua,y=new h.Ta,o.If(0,y),p.nf(y),o.If(2,y),p.lineTo(y),a.QG(n,p,u))},a.MV=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),!a.Ac(y,p,u)||y.da()<=u&&y.S()<=u)return!1;if(y.da()<=u||y.S()<=u)return a.Ac(y,p,u);n=n.Ha(),(o=new h.l).L(y),o.X(-u,-u),y=!1,p=new h.l;for(var g=new h.l;n.ab();)for(;n.Ia();)n.ia().A(p),o.jm(p)?y=!0:(g.L(o),g.Fa(p),!g.B()&&(g.da()>u||g.S()>u)&&(y=!0));return y},a.tV=function(n,o,u){var p=new h.l,y=new h.l;return o.A(y),n.A(p),!(!a.Ac(p,y,u)||y.da()>u&&y.S()>u)&&(y.da()<=u&&y.S()<=u?(o=o.Kp(),a.MG(n,o,u)):(p=new h.Ua,y=new h.Ta,o.If(0,y),p.nf(y),o.If(2,y),p.lineTo(y),a.Am(p,n,u,!1)))},a.wV=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),a.Ac(y,p,u)||y.da()<=u&&y.S()<=u)return!1;if(y.da()<=u||y.S()<=u)return p=new h.Ua,y=new h.Ta,o.If(0,y),p.nf(y),o.If(2,y),p.lineTo(y),a.GI(n,p,u);n=n.Ha(),o=new h.l,(p=new h.l).L(y),o.L(y),p.X(-u,-u),o.X(u,u);for(var g=y=!1,b=new h.l,S=new h.l;n.ab();)for(;n.Ia();)if(n.ia().A(b),g||o.contains(b)||(g=!0),y||(S.L(p),S.Fa(b),!S.B()&&(S.da()>u||S.S()>u)&&(y=!0)),y&&g)return!0;return!1},a.dU=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!!a.gk(p,y,u)&&(!!a.eU(n,o,u)||a.TA(n,o,u,!1,!0,!1))},a.bU=function(n,o,u){return!a.bI(n,o,u)},a.jU=function(n,o,u){return a.TA(n,o,u,!1,!1,!0)},a.$H=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!!a.Ac(p,y,u)&&a.TA(o,n,u,!0,!1,!1)},a.Ow=function(n,o,u){u*=u;for(var p=new h.h,y=new h.h,g=0;g<o.I();g++){o.D(g,y);for(var b=!1,S=0;S<n.I();S++)if(n.D(S,p),h.h.zc(p,y)<=u){b=!0;break}if(!b)return!1}return!0},a.Pw=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),a.gk(p,y,u)},a.aI=function(n,o,u){return o=o.D(),a.lt(n,o,u)},a.nU=function(n,o,u){return a.Pw(n,o,u)},a.ZT=function(n,o,u){return!a.aI(n,o,u)},a.cU=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(y.da()>u||y.S()>u)&&a.gk(p,y,u)},a.aU=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),a.Ac(y,p,u))return!1;for((o=new h.l).L(y),o.X(u,u),u=new h.h,y=0;y<n.I();y++)if(n.D(y,u),o.contains(u))return!1;return!0},a.lU=function(n,o,u){var p=new h.l,y=new h.l,g=new h.l;if(o.A(p),p.da()<=u&&p.S()<=u)return!1;if(p.da()<=u||p.S()<=u){o=new h.h;var b=!1;y.L(p),g.L(p),y.X(u,u),p.da()>u?g.X(0,-u):g.X(-u,0);for(var S=0;S<n.I();S++)if(n.D(S,o),y.contains(o)){if(p.da()>u){if(o.y>g.G&&o.y<g.H)return!1}else if(o.x>g.v&&o.x<g.C)return!1;b=!0}return b}for(y.L(p),g.L(p),y.X(u,u),g.X(-u,-u),o=new h.h,b=!1,S=0;S<n.I();S++)if(n.D(S,o),y.contains(o)){if(g.jm(o))return!1;b=!0}return b},a.mU=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),!a.Ac(y,p,u))return!1;if(y.da()<=u&&y.S()<=u)return a.gk(p,y,u);if(y.da()<=u||y.S()<=u){o=!1,p=new h.l;var g=new h.l;p.L(y),g.L(y),y.da()>u?p.X(0,-u):p.X(-u,0),g.X(u,u);for(var b=new h.h,S=0;S<n.I();S++){if(n.D(S,b),!g.contains(b))return!1;y.da()>u?b.y>p.G&&b.y<p.H&&(o=!0):b.x>p.v&&b.x<p.C&&(o=!0)}return o}for(o=!1,p=new h.l,g=new h.l,p.L(y),g.L(y),p.X(-u,-u),g.X(u,u),b=new h.h,S=0;S<n.I();S++){if(n.D(S,b),!g.contains(b))return!1;p.jm(b)&&(o=!0)}return o},a.YT=function(n,o,u){var p=new h.l,y=new h.l;return n.A(p),o.A(y),!(!a.Ac(p,y,u)||y.da()>u||y.S()>u)&&(o=o.Kp(),!a.lt(n,o,u))},a.$T=function(n,o,u){var p=new h.l,y=new h.l;if(n.A(p),o.A(y),a.Ac(y,p,u)||y.da()<=u&&y.S()<=u)return!1;if(y.da()<=u||y.S()<=u){o=new h.l,p=new h.l,o.L(y),y.da()>u?o.X(0,-u):o.X(-u,0),p.L(y),p.X(u,u);for(var g=new h.h,b=!1,S=!1,$=0;$<n.I();$++)if(n.D($,g),b||(y.da()>u?g.y>o.G&&g.y<o.H&&(b=!0):g.x>o.v&&g.x<o.C&&(b=!0)),S||p.contains(g)||(S=!0),b&&S)return!0;return!1}for(o=new h.l,p=new h.l,o.L(y),o.X(-u,-u),p.L(y),p.X(u,u),g=new h.h,S=b=!1,$=0;$<n.I();$++)if(n.D($,g),!b&&o.jm(g)&&(b=!0),S||p.contains(g)||(S=!0),b&&S)return!0;return!1},a.rI=function(n,o,u){return h.h.zc(n,o)<=u*u},a.NU=function(n,o,u){return h.h.zc(n,o)>u*u},a.pI=function(n,o,u){return a.rI(n,o,u)},a.qI=function(n,o,u){var p=new h.l;return p.L(n),a.gk(p,o,u)},a.Tw=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),!p.contains(n)},a.ZA=function(n,o,u){if(o.da()<=u&&o.S()<=u)return!1;var p=new h.l,y=new h.l;if(p.L(o),p.X(u,u),!p.contains(n))return!1;if(o.da()<=u||o.S()<=u){if(y.L(o),o.da()>u?y.X(0,-u):y.X(-u,0),o.da()>u){if(n.y>y.G&&n.y<y.H)return!1}else if(n.x>y.v&&n.x<y.C)return!1;return!0}return y.L(o),y.X(-u,-u),!y.jm(n)},a.$A=function(n,o,u){if(o.da()<=u&&o.S()<=u)return!0;if(o.da()<=u||o.S()<=u){var p=new h.l;p.L(o),o.da()>u?p.X(0,-u):p.X(-u,0);var y=!1;return o.da()>u?n.y>p.G&&n.y<p.H&&(y=!0):n.x>p.v&&n.x<p.C&&(y=!0),y}return(p=new h.l).L(o),p.X(-u,-u),p.jm(n)},a.MU=function(n,o,u){return a.qI(n,o,u)},a.gk=function(n,o,u){return a.Ac(n,o,u)&&a.Ac(o,n,u)},a.fk=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),!n.isIntersecting(p)},a.YP=function(n,o,u){if(n.da()<=u&&n.S()<=u){var p=n.tf();return a.ZA(p,o,u)}if(o.da()<=u&&o.S()<=u)return p=o.tf(),a.ZA(p,n,u);if(n.da()>u&&n.S()>u&&(o.da()<=u||o.S()<=u)?p=o:(p=n,n=o),p.da()<=u||p.S()<=u){if(n.da()<=u||n.S()<=u){o=new h.zb;var y=new h.zb,g=[0,0],b=[0,0],S=new h.h;return p.fn(S),o.Ec(S),p.gn(S),o.Rc(S),n.fn(S),y.Ec(S),n.gn(S),y.Rc(S),o.Fa(y,null,g,b,u),o.Fa(y,null,null,null,u)==1&&(g[0]==0||g[1]==1||b[0]==0||b[1]==1)}return o=new h.l,y=new h.l,o.L(n),o.X(-u,-u),y.L(o),y.Fa(p),!(!y.B()&&(y.da()>u||y.S()>u))}return n.X(u,u),(y=new h.l).L(p),y.Fa(n),!(y.B()||!y.B()&&y.da()>u&&y.S()>u)},a.XP=function(n,o,u){if(a.Ac(n,o,u)||a.Ac(o,n,u)||n.da()<=u&&n.S()<=u||o.da()<=u&&o.S()<=u)return!1;if(n.da()<=u||n.S()<=u){if(o.da()>u&&o.S()>u)return!1;var p=new h.zb,y=new h.zb,g=[0,0],b=[0,0],S=new h.h;return n.fn(S),p.Ec(S),n.gn(S),p.Rc(S),o.fn(S),y.Ec(S),o.gn(S),y.Rc(S),p.Fa(y,null,g,b,u),p.Fa(y,null,null,null,u)==2&&(0<g[0]||1>g[1])&&(0<b[0]||1>b[1])}return!(o.da()<=u||o.S()<=u)&&((p=new h.l).L(n),p.Fa(o),!(p.B()||p.da()<=u||p.S()<=u))},a.eF=function(n,o,u){if(!a.Ac(n,o,u))return!1;if(n.da()<=u&&n.S()<=u)return n=n.tf(),a.$A(n,o,u);if(o.da()<=u&&o.S()<=u)return o=o.tf(),a.$A(o,n,u);if(n.da()<=u||n.S()<=u)return a.Ac(n,o,u);if(o.da()<=u||o.S()<=u){var p=new h.l;return p.L(n),p.X(-u,-u),p.jm(o)?!0:((n=new h.l).L(p),n.Fa(o),!(n.B()||n.da()<=u&&n.S()<=u))}return a.Ac(n,o,u)},a.WP=function(n,o,u){if(a.Ac(n,o,u)||a.Ac(o,n,u)||n.da()<=u&&n.S()<=u||o.da()<=u&&o.S()<=u||o.da()>u&&o.S()>u&&n.da()>u&&n.S()>u)return!1;if(n.da()>u&&n.S()>u)var p=o;else p=n,n=o;if(n.da()>u&&n.S()>u){o=new h.l;var y=new h.l;return y.L(n),y.X(-u,-u),o.L(y),o.Fa(p),!(o.B()||o.da()<=u&&o.S()<=u)}o=new h.zb,y=new h.zb;var g=[0,0],b=[0,0],S=new h.h;return p.fn(S),o.Ec(S),p.gn(S),o.Rc(S),n.fn(S),y.Ec(S),n.gn(S),y.Rc(S),o.Fa(y,null,g,b,u),o.Fa(y,null,null,null,u)==1&&0<g[0]&&1>g[1]&&0<b[0]&&1>b[1]},a.zI=function(n,o,u){var p=new h.l,y=new h.l,g=new h.am(n,o,u,!0);if(!g.next())return!0;if(this.OG(n,o,u))return!1;var b=n,S=null;o.K()==1736&&(S=o);var $=!1,I=!1;do{var C=g.pl(),R=g.jl();if(R=o.Oa(o.Ca(R)),p.L(g.oz()),p.X(u,u),p.contains(R)&&(R=h.jd.Zd(b,R,0))!=0||o.K()==1736&&(C=n.Oa(n.Ca(C)),y.L(g.Wy()),y.X(u,u),y.contains(C)&&(R=h.jd.Zd(S,C,0))!=0))return!1;$||(!h.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(b=new h.Ea,n.copyTo(b),b.hj(1)),$=!0),o.K()!=1736||I||(I=o,!h.Fg.Ol(I,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?S=o:(S=new h.Ea,I.copyTo(S),S.hj(1)),I=!0)}while(g.next());return!0},a.Ac=function(n,o,u){var p=new h.l;return p.L(n),p.X(u,u),p.contains(o)},a.ns=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),o=new h.h,n.fn(o),!p.contains(o)||(n.VI(o),!p.contains(o)||(n.YI(o),!p.contains(o)||(n.gn(o),!p.contains(o))))},a.ZH=function(n,o,u){if(n.ea()!=o.ea()||n.I()!=o.I())return!1;var p=new h.h,y=new h.h,g=!0;u*=u;for(var b=0;b<n.ea();b++){if(n.Wc(b)!=o.Wc(b)){g=!1;break}for(var S=n.Ca(b);S<o.Wc(b);S++)if(n.D(S,p),o.D(S,y),h.h.zc(p,y)>u){g=!1;break}if(!g)break}return!!g},a.eU=function(n,o,u){if(n.I()!=o.I())return!1;var p=new h.h,y=new h.h,g=!0;u*=u;for(var b=0;b<n.I();b++)if(n.D(b,p),o.D(b,y),h.h.zc(p,y)>u){g=!1;break}return!!g},a.TA=function(n,o,u,p,y,g){var b=!1;if(n.I()>o.I()){p&&(p=!1,b=!0);var S=o}else S=n,n=o;if(o=null,y||g||b){o=new h.rn(n.I());for(var $=0;$<n.I();$++)o.write($,0)}$=new h.l;var I=new h.l,C=new h.l;S.A($),n.A(I),$.X(u,u),I.X(u,u),C.L($),C.Fa(I),I=new h.h;for(var R=new h.h,L=!0,N=h.ua.jE(n,C),U=N.getIterator(),W=u*u,j=0;j<S.I();j++)if(S.D(j,I),C.contains(I)){var K=!1;$.L(I.x,I.y,I.x,I.y),U.Zi($,u);for(var se=U.next();se!=-1&&(se=N.ka(se),n.D(se,R),!(h.h.zc(I,R)<=W&&((y||g||b)&&o.write(se,1),K=!0,p)));se=U.next());if(!K&&(L=!1,y||p))return!1}else{if(y||p)return!1;L=!1}if(g&&L)return!1;if(p)return!0;for($=0;$<n.I();$++)if(o.read($)==1){if(g)return!0}else if(y||b)return!1;return!g},a.bI=function(n,o,u){if(n.I()>o.I())var p=o;else p=n,n=o;o=new h.l;var y=new h.l,g=new h.l;p.A(o),n.A(y),o.X(u,u),y.X(u,u),g.L(o),g.Fa(y),y=new h.h;for(var b=new h.h,S=u*u,$=h.ua.jE(n,g),I=$.getIterator(),C=0;C<p.I();C++)if(p.D(C,y),g.contains(y)){o.L(y.x,y.y,y.x,y.y),I.Zi(o,u);for(var R=I.next();R!=-1;R=I.next())if(n.D($.ka(R),b),h.h.zc(y,b)<=S)return!0}return!1},a.Rz=function(n,o,u,p){return a.Am(n,o,u,p)&&a.Am(o,n,u,p)},a.Am=function(n,o,u,p){function y(st,qe){return R.LE(st,qe)}var g,b=!0,S=[0,0],$=[0,0],I=0,C=new h.ja(0),R=new a,L=new h.l,N=new h.l,U=new h.l;n.A(L),o.A(N),L.X(u,u),N.X(u,u),U.L(L),U.Fa(N),n=n.Ha(),N=o.Ha();var W=null,j=W=null,K=o.Cb;for(K!=null?(W=K.Gb,j=K.Bo,W==null&&(W=h.ua.lj(o,U))):W=h.ua.lj(o,U),o=W.getIterator(),K=null,j!=null&&(K=j.getIterator());n.ab();)for(;n.Ia();){var se=!1,ne=n.ia();if(ne.A(L),!L.isIntersecting(U)||K!=null&&(K.Zi(L,u),K.next()==-1))return!1;for(j=ne.Rb(),o.Wo(ne,u),g=o.next();g!=-1;g=o.next()){N.Wb(W.ka(g)),g=N.ia();var pe=ne.Fa(g,null,S,$,u);if(pe==2&&(!p||$[0]<=$[1])){pe=S[0];var he=S[1],xe=$[0],ke=$[1];if(pe*j<=u&&(1-he)*j<=u){se=!0,I=0,C.resize(0),R.th.length=0;var Ae=n.xb();for(xe=!0;xe;){if(n.Ia()){if(j=(ne=n.ia()).Rb(),(pe=ne.Fa(g,null,S,$,u))==2&&(!p||$[0]<=$[1])&&(pe=S[0],he=S[1],pe*j<=u&&(1-he)*j<=u)){Ae=n.xb();continue}if(N.Ia()&&(g=N.ia(),(pe=ne.Fa(g,null,S,$,u))==2&&(!p||$[0]<=$[1])&&(pe=S[0],he=S[1],pe*j<=u&&(1-he)*j<=u))){Ae=n.xb();continue}}xe=!1}Ae!=n.xb()&&(n.Wb(Ae),n.ia());break}Ae=n.xb(),g=w.construct(Ae,n.gb,pe,he,N.xb(),N.gb,xe,ke),R.th.push(g),C.add(C.size)}}if(!se){if(I==R.th.length)return!1;for(1<C.size-I&&C.Wd(I,C.size,y),se=0;I<R.th.length;I++)if(!((g=R.th[C.get(I)]).Mj<se&&g.Ui<se)){if(j*(g.Mj-se)>u)return!1;if(j*(1-(se=g.Ui))<=u||se==1)break}if(j*(1-se)>u)return!1;I=0,C.resize(0),R.th.length=0}}return b},a.QG=function(n,o,u){if(1>a.Sz(n,o,u,null))return!1;var p=new h.l,y=new h.l;n.A(p),o.A(y);var g=a.ns(p,y,u);return p=a.ns(y,p,u),!(!g||!p)||(g&&!p?!a.Am(o,n,u,!1):p&&!g?!a.Am(n,o,u,!1):!a.Am(n,o,u,!1)&&!a.Am(o,n,u,!1))},a.Sz=function(n,o,u,p){function y(tt,xi){return L.LE(tt,xi)}if(n.sz()>o.sz())var g=o,b=n;else g=n,b=o;n=g.Ha(),o=b.Ha();var S=[0,0],$=[0,0],I=-1,C=0,R=new h.ja(0),L=new a,N=new h.l,U=new h.l,W=new h.l;g.A(N),b.A(U),N.X(u,u),U.X(u,u),W.L(N),W.Fa(U),g=null,p!=null&&(g=new h.h);var j=U=U=null,K=b.Cb;for(K!=null?(U=K.Gb,j=K.Bo,U==null&&(U=h.ua.lj(b,W))):U=h.ua.lj(b,W),b=U.getIterator(),K=null,j!=null&&(K=j.getIterator());n.ab();)for(j=0;n.Ia();){var se=n.ia();if(se.A(N),N.isIntersecting(W)){if(K!=null&&(K.Zi(N,u),K.next()==-1))continue;var ne=se.Rb();b.Wo(se,u);for(var pe=b.next();pe!=-1;pe=b.next()){var he=U.ka(pe);o.Wb(he);var xe=o.ia(),ke=xe.Rb(),Ae=se.Fa(xe,null,S,$,u);if(0<Ae){pe=S[0],I=$[0];var st=Ae==2?S[1]:NaN,qe=Ae==2?$[1]:NaN;if(Ae==2){if(ne*(st-pe)>u)return 1;var It=ne*(st-pe);if(o.Ia()){if(xe=o.ia(),(Ae=se.Fa(xe,null,S,null,u))==2){Ae=S[0];var xt=S[1];if(It+(Ae=ne*(xt-Ae))>u)return 1}o.Wb(he),o.ia()}if(!o.xm()){if(o.ni(),xe=o.ni(),(Ae=se.Fa(xe,null,S,null,u))==2&&(Ae=S[0],It+(Ae=ne*((xt=S[1])-Ae))>u))return 1;o.Wb(he),o.ia()}if(n.Ia()){if(he=n.xb(),(Ae=(se=n.ia()).Fa(xe,null,S,null,u))==2&&(Ae=S[0],It+(Ae=ne*((xt=S[1])-Ae))>u))return 1;n.Wb(he),n.ia()}if(!n.xm()){if(he=n.xb(),n.ni(),(Ae=(se=n.ni()).Fa(xe,null,S,null,u))==2&&(Ae=S[0],It+(Ae=ke*((xt=S[1])-Ae))>u))return 1;n.Wb(he),n.ia()}xe=w.construct(n.xb(),n.gb,pe,st,o.xb(),o.gb,I,qe),L.th.push(xe),R.add(R.size)}I=0,p!=null&&(se.ic(pe,g),p.add(g.x),p.add(g.y))}}if(C<L.th.length){for(R.Wd(C,R.size,y),se=0,pe=L.th[R.get(C)].Om;C<L.th.length;C++)if(!((xe=L.th[R.get(C)]).Mj<se&&xe.Ui<se))if(ne*(xe.Mj-se)>u)j=ne*(xe.Ui-xe.Mj),se=xe.Ui,pe=xe.Om;else{if(xe.Om!=pe?(j=ne*(xe.Ui-xe.Mj),pe=xe.Om):j+=ne*(xe.Ui-xe.Mj),j>u)return 1;if((se=xe.Ui)==1)break}ne*(1-se)>u&&(j=0),C=0,R.resize(0),L.th.length=0}}}return I},a.OG=function(n,o,u){var p=n.Ha(),y=o.Ha();for(n=new h.am(n,o,u,!1);n.next();){o=n.pl();var g=n.jl();if(p.Wb(o),y.Wb(g),o=p.ia(),0<y.ia().Fa(o,null,null,null,u))return!0}return!1},a.PG=function(n,o,u,p){var y=n.Ha(),g=new h.l,b=new h.l,S=new h.l;n.A(g),o.A(b),g.X(u,u),g.contains(b),b.X(u,u),S.L(g),S.Fa(b),(g=n.Cb)!=null?(g=g.Gb)==null&&(g=h.ua.lj(n,S)):g=h.ua.lj(n,S),n=g.getIterator();for(var $=new h.h,I=new h.h,C=u*u,R=0;R<o.I();R++)if(o.D(R,$),S.contains($)){b.L($.x,$.y,$.x,$.y),n.Zi(b,u);for(var L=!1,N=n.next();N!=-1;N=n.next())if(y.Wb(g.ka(N)),(N=y.ia()).ic(N.ge($,!1),I),h.h.zc(I,$)<=C){L=!0;break}if(p){if(!L)return!1}else if(L)return!0}return!!p},a.Tz=function(n,o,u){var p=new h.h,y=u*u,g=n.Ha();if((n=n.Cb)!=null&&(n=n.Gb)!=null){var b=new h.l;for(b.L(o),b=(u=n.HF(b,u)).next();b!=-1;b=u.next())if(g.Wb(n.ka(b)),g.Ia()){var S=(b=g.ia()).ge(o,!1);if(b.ic(S,p),h.h.zc(o,p)<=y)return!0}return!1}for(n=new h.l;g.ab();)for(;g.Ia();)if((b=g.ia()).A(n),n.X(u,u),n.contains(o)&&(S=b.ge(o,!1),b.ic(S,p),h.h.zc(o,p)<=y))return!0;return!1},a.MG=function(n,o,u){return a.Tz(n,o,u)&&!a.Uz(n,o,u)},a.Uz=function(n,o,u){return n=n.ng(),!a.lt(n,o,u)},a.NG=function(n,o,u){if(n.vm()){var p=new h.zb(o.v,o.G,o.v,o.H),y=new h.zb(o.v,o.H,o.C,o.H),g=new h.zb(o.C,o.H,o.C,o.G);for(o=new h.zb(o.C,o.G,o.v,o.G),n=n.Ha();n.ab();)for(;n.Ia();){var b=n.ia();if(b.isIntersecting(p,u)||b.isIntersecting(y,u)||b.isIntersecting(g,u)||b.isIntersecting(o,u))return!0}}else{(p=new h.l).L(o),p.X(u,u),u=n.vb(0),y=new h.h,g=new h.h,o=new h.h,b=new h.h;for(var S=0,$=n.ea();S<$;S++)for(var I=!0,C=n.Ca(S),R=n.Wc(S);C<R;C++)if(I)u.uc(2*C,g),I=!1;else{if(u.uc(2*C,y),o.N(g),b.N(y),p.uy(o,b)!=0)return!0;g.N(y)}}return!1},a.rc=function(n,o,u){var p=n.K(),y=o.K();if(h.ba.zj(p)){var g=n.Cb;if(g!=null&&(g=g.Hk)!=null)if(y==33){var b=o.D();if((b=g.Uo(b.x,b.y))==1)return 1;if(b==0)return 4}else{if(b=new h.l,o.A(b),(b=g.To(b))==1)return 1;if(b==0)return 4;if(u&&h.ba.zj(y)&&a.CE(o,g))return 1073741824}}if(h.ba.zj(y)&&(g=o.Cb)!=null&&(g=g.Hk)!=null)if(p==33){if(n=n.D(),(b=g.Uo(n.x,n.y))==1)return 2;if(b==0)return 4}else{if(o=new h.l,n.A(o),(b=g.To(o))==1)return 2;if(b==0)return 4;if(u&&h.ba.zj(p)&&a.CE(n,g))return 1073741824}return 0},a.CE=function(n,o){for(var u=n.I(),p=new h.h,y=0;y<u;y++)if(n.D(y,p),o.Uo(p.x,p.y)==1)return!0;return!1},a.DI=function(n,o,u,p){for(var y=1<=n.qm(0)&&1<=o.qm(0),g=n.Ha(),b=o.Ha(),S=[0,0],$=[0,0],I=new h.am(n,o,u,!1),C=!1;I.next();){var R=I.pl(),L=I.jl();if(g.Wb(R),b.Wb(L),R=g.ia(),(L=b.ia().Fa(R,null,$,S,u))==2){if(C=S[0],L=S[1],R=R.Rb(),y&&(L-C)*R>u)return!1;C=!0}else if(L!=0){if(C=S[0],R=$[0],0<C&&1>C&&0<R&&1>R)return!1;C=!0}}return!!C&&(g=new h.l,b=new h.l,y=new h.l,n.A(g),o.A(b),g.X(1e3*u,1e3*u),b.X(1e3*u,1e3*u),y.L(g),y.Fa(b),!(10<n.I()&&(n=h.Vd.clip(n,y,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,y,u,0),o.B()))&&h.cm.st(n,o,u,"F********",p))},a.AI=function(n,o,u,p){var y=1<=n.qm(0)&&1<=o.qm(0),g=new h.l,b=new h.l,S=new h.l;n.A(g),o.A(b);for(var $=!1,I=a.ns(g,b,u),C=a.ns(b,g,u),R=n.Ha(),L=o.Ha(),N=[0,0],U=[0,0],W=new h.am(n,o,u,!1);W.next();){var j=W.pl(),K=W.jl();if(R.Wb(j),L.Wb(K),K=R.ia(),(j=L.ia().Fa(K,null,U,N,u))==2){j=N[0];var se=N[1];if(K=K.Rb(),y&&(se-j)*K>u&&($=!0,I&&C))return!0}else if(j!=0&&(j=N[0],K=U[0],0<j&&1>j&&0<K&&1>K))return!0}if(y=new h.l,R=new h.l,y.L(g),y.X(1e3*u,1e3*u),R.L(b),R.X(1e3*u,1e3*u),S.L(y),S.Fa(R),g="",g=$?g+"**":g+"T*",I){if(10<o.I()&&(o=h.Vd.clip(o,S,u,0)).B())return!1;g+="****"}else g+="T***";if(C){if(10<n.I()&&(n=h.Vd.clip(n,S,u,0)).B())return!1;g+="***"}else g+="T**";return h.cm.st(n,o,u,g.toString(),p)},a.wI=function(n,o,u,p){var y=[!1],g=a.uI(n,o,u,y);return y[0]?g:(y=new h.l,o.A(y),y.X(1e3*u,1e3*u),!(10<n.I()&&(n=h.Vd.clip(n,y,u,0),n.B()))&&h.cm.Uw(n,o,u,p))},a.uI=function(n,o,u,p){p[0]=!1;for(var y=n.Ha(),g=o.Ha(),b=[0,0],S=[0,0],$=new h.am(n,o,u,!1),I=!1;$.next();){var C=$.pl(),R=$.jl();if(y.Wb(C,-1),g.Wb(R,-1),C=y.ia(),(C=g.ia().Fa(C,null,S,b,u))!=0&&(I=!0,C==1&&(C=b[0],R=S[0],0<C&&1>C&&0<R&&1>R)))return p[0]=!0,!1}if(!I){for(p[0]=!0,b=new h.l,n.A(b),b.X(u,u),$=n,I=!1,S=new h.l,p=0,y=o.ea();p<y;p++)if(0<o.Ka(p)){if(o.Tj(p,S),!b.isIntersecting(S)||(g=o.Oa(o.Ca(p)),(g=h.Fg.ym($,g,0))==0))return!1;I||(!h.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?$=n:(g=new h.Ea,n.copyTo(g),g.hj(1),$=g),I=!0)}if(n.ea()==1||o.K()==1607)return!0;for(b=new h.l,o.A(b),b.X(u,u),S=o,$=!1,u=new h.l,p=0,y=n.ea();p<y;p++)if(0<n.Ka(p)){if(n.Tj(p,u),b.isIntersecting(u)&&(g=n.Oa(n.Ca(p)),(g=h.Fg.ym(S,g,0))==1))return!1;$||(!h.Fg.Ol(o,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?S=o:(g=new h.Ea,o.copyTo(g),g.hj(1),S=g),$=!0)}return!0}return!1},a.EI=function(n,o,u,p){for(var y=n.Ha(),g=o.Ha(),b=[0,0],S=[0,0],$=new h.am(n,o,u,!1),I=!1;$.next();){var C=$.pl(),R=$.jl();if(y.Wb(C),g.Wb(R),C=y.ia(),(C=g.ia().Fa(C,null,S,b,u))==2)I=!0;else if(C!=0){if(I=b[0],C=S[0],0<I&&1>I&&0<C&&1>C)return!1;I=!0}}return!!I&&(g=new h.l,b=new h.l,y=new h.l,n.A(g),o.A(b),g.X(1e3*u,1e3*u),b.X(1e3*u,1e3*u),y.L(g),y.Fa(b),!(10<n.I()&&(n=h.Vd.clip(n,y,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,y,u,0),o.B()))&&h.cm.bn(n,o,u,"F********",p))},a.yI=function(n,o,u,p){for(var y=n.Ha(),g=o.Ha(),b=[0,0],S=[0,0],$=new h.am(n,o,u,!1),I=!1;$.next();){var C=$.pl(),R=$.jl();if(y.Wb(C),g.Wb(R),C=y.ia(),(C=g.ia().Fa(C,null,S,b,u))==2)I=!0;else if(C!=0){if(I=b[0],C=S[0],0<I&&1>I&&0<C&&1>C)return!0;I=!0}}return!!I&&(g=new h.l,b=new h.l,S=new h.l,$=new h.l,y=new h.l,n.A(g),o.A(b),a.ns(b,g,u)?(S.L(g),S.X(1e3*u,1e3*u),$.L(b),$.X(1e3*u,1e3*u),y.L(S),y.Fa($),!(10<n.I()&&(n=h.Vd.clip(n,y,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,y,u,0),o.B()))&&(u=h.cm.bn(n,o,u,"T********",p))):u=h.cm.bn(n,o,u,"T*****T**",p))},a.xI=function(n,o,u,p){var y=[!1],g=a.uI(n,o,u,y);return y[0]?g:(y=new h.l,o.A(y),y.X(1e3*u,1e3*u),!(10<n.I()&&(n=h.Vd.clip(n,y,u,0),n.B()))&&h.cm.aB(n,o,u,p))},a.vI=function(n,o,u){return h.jd.Zd(n,o,u)==1},a.CI=function(n,o,u){return h.jd.Zd(n,o,u)==2},a.lt=function(n,o,u){var p=new h.h;u*=u;for(var y=0;y<n.I();y++)if(n.D(y,p),h.h.zc(p,o)<=u)return!1;return!0},a.prototype.LE=function(n,o){return n=this.th[n],o=this.th[o],n.Om<o.Om||n.Om==o.Om&&(n.rw<o.rw||n.rw==o.rw&&(n.Mj<o.Mj||n.Mj==o.Mj&&(n.Ui<o.Ui||n.Ui==o.Ui&&n.wH<o.wH)))?-1:1},a}();h.vd=c}(B||(B={})),function(h){var O,w,c;(w=O||(O={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(c||(c={})),O=function(){function a(){this.me=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.tB=function(n,o,u,p,y){if(p.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var g=0;9>g;g++){var b=p.charAt(g);if(b!="*"&&b!="T"&&b!="F"&&b!="0"&&b!="1"&&b!="2")throw h.i.ga("relation string")}if((g=this.HR(p,n.Eb(),o.Eb()))!=0)return h.vd.uB(n,o,u,g,y);g=new h.l,n.A(g),b=new h.l,o.A(b);var S=new h.l;if(S.L(g),S.$b(b),u=h.ua.Xd(u,S,!1),n=this.RE(n,u),o=this.RE(o,u),n.B()||o.B())return this.pW(n,o,p);switch(g=o.K(),b=!1,n.K()){case 1736:switch(g){case 1736:b=this.st(n,o,u,p,y);break;case 1607:b=this.bn(n,o,u,p,y);break;case 33:b=this.rt(n,o,u,p);break;case 550:b=this.qt(n,o,u,p,y)}break;case 1607:switch(g){case 1736:b=this.bn(o,n,u,this.aq(p),y);break;case 1607:b=this.bB(n,o,u,p,y);break;case 33:b=this.ut(n,o,u,p,y);break;case 550:b=this.tt(n,o,u,p,y)}break;case 33:switch(g){case 1736:b=this.rt(o,n,u,this.aq(p));break;case 1607:b=this.ut(o,n,u,this.aq(p),y);break;case 33:b=this.VU(n,o,u,p);break;case 550:b=this.mt(o,n,u,this.aq(p))}break;case 550:switch(g){case 1736:b=this.qt(o,n,u,this.aq(p),y);break;case 1607:b=this.tt(o,n,u,this.aq(p),y);break;case 550:b=this.UA(n,o,u,p,y);break;case 33:b=this.mt(n,o,u,p)}break;default:b=!1}return b},a.st=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.sJ();var b=new h.l,S=new h.l;return n.A(b),o.A(S),p=!1,h.vd.fk(b,S,u)&&(g.Eu(n,o),p=!0),p||((b=h.vd.rc(n,o,!1))==4?(g.Eu(n,o),p=!0):b==1?(g.hy(o),p=!0):b==2&&(g.UD(n),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,y),g.Dp(n,o),g.j.Wg()),a.hg(g.J,g.Yc)},a.Uw=function(n,o,u,p){var y=new a;y.$i(),y.dj("T*****F**"),y.sJ();var g=new h.l,b=new h.l;n.A(g),o.A(b);var S=!1;return h.vd.fk(g,b,u)&&(y.Eu(n,o),S=!0),S||((g=h.vd.rc(n,o,!1))==4?(y.Eu(n,o),S=!0):g==1?(y.hy(o),S=!0):g==2&&(y.UD(n),S=!0)),S?this.hg(y.J,y.Yc):(n=(S=new h.hd).Ib(n),g=S.Ib(o),h.Vk.W(S,u,p,!1),u=S.Ke(g).ng(),S.Ip(0,!0,!0),h.tn.W(S,n,-1,!1,p),S.I(n)!=0&&(h.tn.W(S,g,-1,!1,p),y.gr(S,p),(o=S.I(g)==0)||(y.Dp(n,g),y.j.Wg(),g=this.hg(y.J,y.Yc))?(n=S.Ke(n),n=(S=new h.hd).Ib(n),g=S.Ib(u),y.gr(S,p),y.me=0,y.$i(),y.dj(o?"T*****F**":"******F**"),y.DB(),y.Dp(n,g),y.j.Wg(),this.hg(y.J,y.Yc)):g))},a.bn=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.DB();var b=new h.l,S=new h.l;return n.A(b),o.A(S),p=!1,h.vd.fk(b,S,u)&&(g.Fu(n,o),p=!0),p||((b=h.vd.rc(n,o,!1))==4?(g.Fu(n,o),p=!0):b==1&&(g.VD(o),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,y),g.mh=g.j.Fp(),a.Lw(o,g.j,g.mh),g.Dp(n,o),g.j.Gp(g.mh),g.j.Wg()),a.hg(g.J,g.Yc)},a.aB=function(n,o,u,p){var y=new a;y.$i(),y.dj("T*****F**"),y.DB();var g=new h.l,b=new h.l;n.A(g),o.A(b);var S=!1;return h.vd.fk(g,b,u)&&(y.Fu(n,o),S=!0),S||((g=h.vd.rc(n,o,!1))==4?(y.Fu(n,o),S=!0):g==1&&(y.VD(o),S=!0)),S?this.hg(y.J,y.Yc):(n=(S=new h.hd).Ib(n),o=S.Ib(o),y.Yo(S,u,p),S.I(n)!=0&&(y.Dp(n,o),y.j.Wg(),this.hg(y.J,y.Yc)))},a.qt=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.tJ();var b=new h.l,S=new h.l;return n.A(b),o.A(S),p=!1,h.vd.fk(b,S,u)&&(g.Gu(n),p=!0),p||((b=h.vd.rc(n,o,!1))==4?(g.Gu(n),p=!0):b==1&&(g.uN(),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,y),g.By(n,o),g.j.Wg()),a.hg(g.J,g.Yc)},a.bB=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.$W(),p=new h.l;var b=new h.l;n.A(p),o.A(b);var S=!1;return h.vd.fk(p,b,u)&&(g.KG(n,o),S=!0),S||h.vd.rc(n,o,!1)!=4||(g.KG(n,o),S=!0),S||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,y),g.$h=g.j.Fp(),g.mh=g.j.Fp(),a.Lw(n,g.j,g.$h),a.Lw(o,g.j,g.mh),g.Dp(n,o),g.j.Gp(g.$h),g.j.Gp(g.mh),g.j.Wg()),a.hg(g.J,g.Yc)},a.tt=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.HJ(),p=new h.l;var b=new h.l;n.A(p),o.A(b);var S=!1;return h.vd.fk(p,b,u)&&(g.Qz(n),S=!0),S||h.vd.rc(n,o,!1)!=4||(g.Qz(n),S=!0),S||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,y),g.$h=g.j.Fp(),a.Lw(n,g.j,g.$h),g.By(n,o),g.j.Gp(g.$h),g.j.Wg()),a.hg(g.J,g.Yc)},a.UA=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.MJ(),p=new h.l;var b=new h.l;n.A(p),o.A(b);var S=!1;return h.vd.fk(p,b,u)&&(g.tI(),S=!0),S||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,y),g.By(n,o),g.j.Wg()),a.hg(g.J,g.Yc)},a.rt=function(n,o,u,p){var y=new a;y.$i(),y.dj(p),y.tJ();var g=new h.l;n.A(g),o=o.D();var b=!1;return h.vd.Tw(o,g,u)&&(y.Gu(n),b=!0),b||((u=h.jd.Zd(n,o,u))==1?(y.J[0]=0,y.J[2]=2,y.J[3]=-1,y.J[5]=1,y.J[6]=-1):u==2?(y.J[6]=-1,n.He()!=0?(y.J[0]=-1,y.J[3]=0,y.J[2]=2,y.J[5]=1):(y.J[0]=0,y.J[3]=-1,y.J[5]=-1,u=new h.l,n.A(u),y.J[2]=u.da()==0&&u.S()==0?-1:1)):y.Gu(n)),this.hg(y.J,p)},a.ut=function(n,o,u,p,y){var g=new a;g.$i(),g.dj(p),g.HJ();var b=new h.l;n.A(b),p=o.D();var S=!1;if(h.vd.Tw(p,b,u)&&(g.Qz(n),S=!0),!S){b=null;var $=S=!1;(g.fa[0]||g.fa[6])&&(h.vd.Tz(n,p,u)?(g.fa[0]&&(b=h.si.im(n,y),$=!h.vd.lt(b,p,u),S=!0,g.J[0]=$?-1:0),g.J[6]=-1):(g.J[0]=-1,g.J[6]=0)),g.fa[3]&&(b!=null&&b.B()?g.J[3]=-1:(S||(b==null&&(b=h.si.im(n,y)),$=!h.vd.lt(b,p,u),S=!0),g.J[3]=$?0:-1)),g.fa[5]&&(b!=null&&b.B()?g.J[5]=-1:S&&!$?g.J[5]=0:(b==null&&(b=h.si.im(n,y)),y=h.vd.Pw(b,o,u),g.J[5]=y?-1:0)),g.fa[2]&&(n.Rb()!=0?g.J[2]=1:((y=new h.ee(n.description)).Gd(n,0,n.I()),n=h.vd.Pw(y,o,u),g.J[2]=n?-1:0))}return this.hg(g.J,g.Yc)},a.mt=function(n,o,u,p){var y=new a;y.$i(),y.dj(p),y.MJ();var g=new h.l;n.A(g),o=o.D();var b=!1;if(h.vd.Tw(o,g,u)&&(y.tI(),b=!0),!b){g=!1,b=!0,u*=u;for(var S=0;S<n.I();S++){var $=n.Oa(S);if(h.h.zc($,o)<=u?g=!0:b=!1,g&&!b)break}g?(y.J[0]=0,y.J[2]=b?-1:0,y.J[6]=-1):(y.J[0]=-1,y.J[2]=0,y.J[6]=0)}return a.hg(y.J,p)},a.VU=function(n,o,u,p){n=n.D(),o=o.D();for(var y=[],g=0;9>g;g++)y[g]=-1;return h.h.zc(n,o)<=u*u?y[0]=0:(y[2]=0,y[6]=0),y[8]=2,a.hg(y,p)},a.hg=function(n,o){for(var u=0;9>u;u++)switch(o.charAt(u)){case"T":if(n[u]==-1)return!1;break;case"F":if(n[u]!=-1)return!1;break;case"0":if(n[u]!=0)return!1;break;case"1":if(n[u]!=1)return!1;break;case"2":if(n[u]!=2)return!1}return!0},a.pW=function(n,o,u){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(n.B()&&o.B()){for(var y=0;9>y;y++)p[y]=-1;return this.hg(p,u)}return y=!1,n.B()&&(n=o,y=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=n.K(),h.ba.Ic(o)?o==1736?n.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new h.l,n.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=n.Rb()!=0,p[2]=o?1:0,p[5]=h.si.cq(n)?0:-1):(p[2]=0,p[5]=-1),y&&this.qK(p),this.hg(p,u)},a.HR=function(n,o,u){return a.ZP(n)?3:a.PP(n)?4:a.ZX(n,o,u)?8:a.xP(n,o,u)?16:a.$O(n)?1:a.zU(n,o,u)?32:0},a.ZP=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="F"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="F"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.PP=function(n){return n.charAt(0)=="F"&&n.charAt(1)=="F"&&n.charAt(2)=="*"&&n.charAt(3)=="F"&&n.charAt(4)=="F"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.ZX=function(n,o,u){return(o!=0||u!=0)&&((o!=2||u!=2)&&(n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="T"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"||o==1&&u==1&&n.charAt(0)=="F"&&n.charAt(1)=="T"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")||u!=0&&n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="T"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")},a.xP=function(n,o,u){return o>u?n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*":o==1&&u==1&&n.charAt(0)=="0"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.$O=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.zU=function(n,o,u){if(o==u){if(o!=1)return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*";if(n.charAt(0)=="1"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*")return!0}return!1},a.Lw=function(n,o,u){n=o.Ma(n);for(var p=o.Oe;p!=-1;p=o.Tf(p))if((o.yd(p)&n)!=0){var y=o.Je(p);if(y==-1)o.pn(p,u,0);else{var g=y,b=0;do(o.fh(g)&n)!=0&&b++,g=o.kc(o.ya(g));while(g!=y);o.pn(p,u,b)}}},a.aq=function(n){var o=""+n.charAt(0);return o+=n.charAt(3),o+=n.charAt(6),o+=n.charAt(1),o+=n.charAt(4),o+=n.charAt(7),o+=n.charAt(2),(o+=n.charAt(5))+n.charAt(8)},a.prototype.$i=function(){for(var n=0;9>n;n++)this.J[n]=-2,this.$a[n]=-2},a.qK=function(n){var o=n[1],u=n[2],p=n[5];n[1]=n[3],n[2]=n[6],n[5]=n[7],n[3]=o,n[6]=u,n[7]=p},a.prototype.dj=function(n){for(this.Yc=n,n=0;9>n;n++)this.Yc.charAt(n)!="*"?(this.fa[n]=!0,this.me++):this.fa[n]=!1},a.prototype.PJ=function(){for(var n=0;9>n;n++)this.fa[n]&&this.J[n]==-2&&(this.J[n]=-1,this.fa[n]=!1)},a.prototype.qc=function(n){return this.J[n]!=-2&&(this.J[n]==-1?(this.fa[n]=!1,this.me--,!0):this.Yc.charAt(n)!="T"&&this.Yc.charAt(n)!="F"?!(this.J[n]<this.$a[n])&&(this.fa[n]=!1,this.me--,!0):(this.fa[n]=!1,this.me--,!0))},a.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.sN=function(n,o,u){var p=!0;return this.fa[0]&&(this.xS(n,o,u),p=p&&this.qc(0)),this.fa[1]&&(this.nG(n,o,1),p=p&&this.qc(1)),this.fa[2]&&(this.oG(n,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.nG(n,u,3),p=p&&this.qc(3)),this.fa[4]&&(this.wN(n,o,u),p=p&&this.qc(4)),this.fa[5]&&(this.$D(n,u,5),p=p&&this.qc(5)),this.fa[6]&&(this.oG(n,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.$D(n,o,7),p=p&&this.qc(7)),p},a.prototype.Eu=function(n,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(n,o,u,p,y){o==-1&&p==-1||((u!="T"&&u!="F"&&o!=-1||y!="T"&&y!="F"&&p!=-1)&&n.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(u=new h.l,n.A(u),this.J[o]=u.da()==0&&u.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(n){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(n,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.UD=function(n){this.hy(n),a.qK(this.J)},a.prototype.Fu=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var u=this.Yc.charAt(6);u=u=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0}this.fa[7]&&(o=h.si.cq(o),this.J[7]=o?0:-1),this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.VD=function(n){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||n.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(n=h.si.cq(n),this.J[1]=n?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(n){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.KG=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var u=this.Yc.charAt(2);u=u=="T"||u=="F"||n.Rb()!=0,this.J[2]=u?1:0}this.fa[5]&&(n=h.si.cq(n),this.J[5]=n?0:-1),this.fa[6]&&(u=(u=this.Yc.charAt(6))=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0),this.fa[7]&&(o=h.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(n){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||n.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(n=h.si.cq(n),this.J[5]=n?0:-1),this.J[6]=0},a.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.tN=function(n,o,u){var p=!0;return this.fa[0]&&(this.yS(n,o),p=p&&this.qc(0)),this.fa[1]&&(this.uS(n,o,u,this.mh),p=p&&this.qc(1)),this.fa[2]&&(this.vS(n,o),p=p&&this.qc(2)),this.fa[3]&&(this.AN(n,o,u,this.mh),p=p&&this.qc(3)),this.fa[4]&&(this.xN(n,o,u,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.yN(n,o,u),p=p&&this.qc(5)),this.fa[6]&&(this.gQ(n,o),p=p&&this.qc(6)),this.fa[7]&&(this.fQ(n,o,u,this.mh),p=p&&this.qc(7)),p},a.prototype.hT=function(n,o,u){var p=!0;return this.fa[0]&&(this.BS(n,o,u,this.$h,this.mh),p=p&&this.qc(0)),this.fa[1]&&(this.pG(n,o,u,this.$h,this.mh,1),p=p&&this.qc(1)),this.fa[2]&&(this.qG(n,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.pG(n,u,o,this.mh,this.$h,3),p=p&&this.qc(3)),this.fa[4]&&(this.CN(n,o,u,this.$h,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.aE(n,u,this.$h,5),p=p&&this.qc(5)),this.fa[6]&&(this.qG(n,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.aE(n,o,this.mh,7),p=p&&this.qc(7)),p},a.prototype.WD=function(n,o,u){var p=!0;return this.fa[0]&&(this.zS(n,o),p=p&&this.qc(0)),this.fa[2]&&(this.wS(n,o),p=p&&this.qc(2)),this.fa[3]&&(this.BN(n,o,u),p=p&&this.qc(3)),this.fa[5]&&(this.zN(n,o),p=p&&this.qc(5)),this.fa[6]&&(this.hQ(n,o),p=p&&this.qc(6)),p},a.prototype.LG=function(n,o,u){var p=!0;return this.fa[0]&&(this.CS(n,o,u,this.$h),p=p&&this.qc(0)),this.fa[2]&&(this.AS(n,u),p=p&&this.qc(2)),this.fa[3]&&(this.EN(n,o,u,this.$h),p=p&&this.qc(3)),this.fa[5]&&(this.DN(n,o,u,this.$h),p=p&&this.qc(5)),this.fa[6]&&(this.iQ(n,o,u),p=p&&this.qc(6)),p},a.prototype.UU=function(n,o,u){var p=!0;return this.fa[0]&&(this.DS(n,o,u),p=p&&this.qc(0)),this.fa[2]&&(this.rG(n,o,u,2),p=p&&this.qc(2)),this.fa[6]&&(this.rG(n,u,o,6),p=p&&this.qc(6)),p},a.prototype.xS=function(n,o,u){this.J[0]!=2&&((n=this.j.af(n))&o)!=0&&(n&u)!=0&&(this.J[0]=2)},a.prototype.nG=function(n,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(p&o)!=0&&(this.J[u]=1)}},a.prototype.oG=function(n,o,u,p){this.J[p]!=2&&((n=this.j.af(n))&o)!=0&&(n&u)==0&&(this.J[p]=2)},a.prototype.wN=function(n,o,u){if(this.J[4]!=1){var p=this.j.fh(n);(p&o)!=0&&(p&u)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&((n=this.j.yd(this.j.vf(n)))&o)!=0&&(n&u)!=0&&(this.J[4]=0)}},a.prototype.$D=function(n,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(p&o)==0&&(this.J[u]=1)}},a.prototype.yS=function(n,o){if(this.J[0]!=1){var u=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(u&o)!=0&&(this.J[0]=1)}},a.prototype.uS=function(n,o,u,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var y=this.j.vf(n),g=this.j.yd(y);(g&o)==0&&(this.j.af(n)&o)!=0&&(n=this.j.og(y,p),(g&u)!=0&&n%2!=0&&(this.J[1]=0))}},a.prototype.vS=function(n,o){this.J[2]!=2&&(this.j.fh(n)&o)!=0&&(this.J[2]=2)},a.prototype.AN=function(n,o,u,p){if(this.J[3]!=1){var y=this.j.fh(n);(y&o)!=0&&(y&u)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(y=this.j.vf(n),((n=this.j.yd(y))&o)!=0&&(o=this.j.og(y,p),(n&u)!=0&&o%2==0&&(this.J[3]=0)))}},a.prototype.xN=function(n,o,u,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var y=this.j.vf(n);((n=this.j.yd(y))&o)!=0&&(o=this.j.og(y,p),(n&u)!=0&&o%2!=0&&(this.J[4]=0))}},a.prototype.yN=function(n,o,u){this.J[5]!=1&&((n=this.j.fh(n))&o)!=0&&(n&u)==0&&(this.J[5]=1)},a.prototype.gQ=function(n,o){if(this.J[6]!=1){var u=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(u&o)==0&&(this.J[6]=1)}},a.prototype.fQ=function(n,o,u,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var y=this.j.vf(n),g=this.j.yd(y);(g&o)==0&&(this.j.af(n)&o)==0&&(n=this.j.og(y,p),(g&u)!=0&&n%2!=0&&(this.J[7]=0))}},a.prototype.BS=function(n,o,u,p,y){if(this.J[0]!=1){var g=this.j.fh(n);(g&o)!=0&&(g&u)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),((g=this.j.yd(n))&o)!=0&&(g&u)!=0&&(o=this.j.og(n,p),y=this.j.og(n,y),o%2==0&&y%2==0&&(this.J[0]=0)))}},a.prototype.pG=function(n,o,u,p,y,g){if(this.J[g]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var b=this.j.yd(n);(b&o)!=0&&(b&u)!=0&&(o=this.j.og(n,p),y=this.j.og(n,y),o%2==0&&y%2!=0&&(this.J[g]=0))}},a.prototype.qG=function(n,o,u,p){this.J[p]!=1&&((n=this.j.fh(n))&o)!=0&&(n&u)==0&&(this.J[p]=1)},a.prototype.CN=function(n,o,u,p,y){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var g=this.j.yd(n);(g&o)!=0&&(g&u)!=0&&(o=this.j.og(n,p),y=this.j.og(n,y),o%2!=0&&y%2!=0&&(this.J[4]=0))}},a.prototype.aE=function(n,o,u,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),(this.j.yd(n)&o)==0&&this.j.og(n,u)%2!=0&&(this.J[p]=0))},a.prototype.zS=function(n,o){this.J[0]!=0&&(this.j.yd(n)&o)==0&&(this.j.jk(this.j.Yy(n))&o)!=0&&(this.J[0]=0)},a.prototype.wS=function(n,o){this.J[2]!=2&&(this.j.yd(n)&o)!=0&&(this.J[2]=2)},a.prototype.BN=function(n,o,u){this.J[3]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)!=0&&(this.J[3]=0)},a.prototype.zN=function(n,o){this.J[5]!=1&&(this.j.yd(n)&o)!=0&&(this.J[5]=1)},a.prototype.hQ=function(n,o){this.J[6]!=0&&(this.j.yd(n)&o)==0&&(this.j.jk(this.j.Yy(n))&o)==0&&(this.J[6]=0)},a.prototype.CS=function(n,o,u,p){if(this.J[0]!=0){var y=this.j.yd(n);(y&o)!=0&&(y&u)!=0&&this.j.og(n,p)%2==0&&(this.J[0]=0)}},a.prototype.AS=function(n,o){this.J[2]!=1&&(this.j.Je(n)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(n)&o)==0&&(this.J[2]=0))},a.prototype.EN=function(n,o,u,p){if(this.J[3]!=0){var y=this.j.yd(n);(y&o)!=0&&(y&u)!=0&&this.j.og(n,p)%2!=0&&(this.J[3]=0)}},a.prototype.DN=function(n,o,u,p){if(this.J[5]!=0){var y=this.j.yd(n);(y&o)!=0&&(y&u)==0&&this.j.og(n,p)%2!=0&&(this.J[5]=0)}},a.prototype.iQ=function(n,o,u){this.J[6]!=0&&((n=this.j.yd(n))&o)==0&&(n&u)!=0&&(this.J[6]=0)},a.prototype.DS=function(n,o,u){this.J[0]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)!=0&&(this.J[0]=0)},a.prototype.rG=function(n,o,u,p){this.J[p]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)==0&&(this.J[p]=0)},a.prototype.Dp=function(n,o){var u=!1;n=this.j.Ma(n),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){var y=this.j.Je(p);if(y==-1){if(this.Um!=-1)switch(this.Um){case 3:u=this.WD(p,n,o);break;case 4:u=this.LG(p,n,o);break;default:throw h.i.ga("internal error")}}else{var g=y;do{var b=g;if(this.j.Bb(b,this.Wi)!=1)do{switch(this.xw){case 0:u=this.sN(b,n,o);break;case 1:u=this.tN(b,n,o);break;case 2:u=this.hT(b,n,o);break;default:throw h.i.ga("internal error")}if(u)break;this.j.Kb(b,this.Wi,1),b=this.j.kc(b)}while(b!=g&&!u);if(u)break;g=this.j.kc(this.j.ya(b))}while(g!=y);if(u)break}}u||this.PJ(),this.j.Lg(this.Wi)},a.prototype.By=function(n,o){var u=!1;n=this.j.Ma(n),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){switch(this.Um){case 3:u=this.WD(p,n,o);break;case 4:u=this.LG(p,n,o);break;case 5:u=this.UU(p,n,o);break;default:throw h.i.Ra()}if(u)break}u||this.PJ()},a.prototype.gr=function(n,o){this.j.fr(n,o)},a.prototype.Yo=function(n,o,u){this.TP(n,o,u),this.gr(n,u)},a.prototype.TP=function(n,o,u){for(h.Vk.W(n,o,u,!1),n.Ip(0,!0,!0),o=n.md;o!=-1;o=n.ve(o))n.jc(o)==1736&&h.tn.W(n,o,-1,!1,u)},a.RE=function(n,o){var u=n.K();return h.ba.zd(u)?((o=new h.Ua(n.description)).pc(n,!0),o):u==197?(u=new h.l,n.A(u),u.da()<=o&&u.S()<=o?(o=new h.Ta(n.description),n.tf(o),o):u.da()<=o||u.S()<=o?(o=new h.Ua(n.description),u=new h.Ta,n.If(0,u),o.nf(u),n.If(2,u),o.lineTo(u),o):((o=new h.Ea(n.description)).bd(n,!1),o)):n},a}(),h.cm=O}(B||(B={})),function(h){var O=function(){function a(n){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=n,this.Js=-1}return a.prototype.cc=function(n){return this.g.cc(this.uz(n))},a.prototype.Dv=function(n){var o=this.dz(n);if(n=this.CF(n),this.g.Na(o)==n){var u=o;o=n,n=u}return this.g.Hc(o,this.xt),this.g.Hc(n,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(n){var o=this.dz(n);return n=this.CF(n),this.g.V(o)==n?o:n},a.prototype.dz=function(n){return this.Gm.get(n)},a.prototype.CF=function(n){return this.fw.get(n)},a.prototype.mF=function(n){this.Gm.set(n,this.Js),this.Js=n},a.prototype.iI=function(n){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,n),this.fw.set(o,this.g.V(n)),o}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),o=this.Gm.size,this.Gm.add(n),this.fw.add(this.g.V(n)),o},a.prototype.mz=function(n){return this.g.cd(this.dz(n))},a}();h.uY=O;var w=function(){function a(n){this.Ce=n,this.je=new h.zb,this.Pm=new h.zb,this.xH=0,this.Co=null,this.tA=-1}return a.prototype.compare=function(n,o,u){u=n.ka(u);var p=this.Ce.hb;if(this.tA==o)var y=this.xH;else this.Co=p.cc(o),this.Co==null?((n=p.g).fd(p.uz(o),this.je),this.Co=this.je,y=this.je.Me(this.Ce.Ah,0)):y=this.Co.Me(this.Ce.Ah,0),this.xH=y,this.tA=o;if((n=p.cc(u))==null){(n=p.g).fd(p.uz(u),this.Pm),n=this.Pm;var g=this.Pm.Me(this.Ce.Ah,0)}else g=n.Me(this.Ce.Ah,0);return y==g&&(o=p.Dv(o),u=p.Dv(u),(o=.5*((u=Math.min(o?this.Co.ma:this.Co.oa,u?n.ma:n.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=u),y=this.Co.Me(o,0),g=n.Me(o,0)),y<g?-1:y>g?1:0},a.prototype.reset=function(){this.tA=-1},a}(),c=function(){function a(){this.Ym=this.Il=null,this.fb=new h.$j,this.fb.MP(),this.ae=new w(this),this.fb.Xo(this.ae)}return a.prototype.CQ=function(){var n=!1;if(this.hw&&(n=this.DQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return n=this.g.qz(o),this.g.KB(o,!0),0>n&&(n=this.g.Ya(o),this.g.kJ(n),this.g.Yg(o,this.g.Na(n)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.yo,-1);o=new h.ja(0),this.Ah=NaN;var u=new h.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.ke);p!=-1;p=this.Il.lb(p)){var y=this.Il.getData(p);if(this.g.Hc(y,u),u.y!=this.Ah&&o.size!=0&&(n=this.vt(o)||n,this.ae.reset(),o.clear(!1)),o.add(y),this.Ah=u.y,this.ft==0)break}for(0<this.ft&&(n=this.vt(o)||n,o.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.KB(o,!0),u=o,o=this.g.uj(o,this.yo);o!=-1;)p=this.g.uj(o,this.yo),this.g.UT(this.Y,this.g.Sb(u),o),u=o,o=p;o=this.g.Sb(u)}else this.g.KB(o,!1),o=this.g.Sb(o);return this.g.xB(this.Gl),this.g.xB(this.yo),n},a.prototype.vt=function(n){return this.VV(n)},a.prototype.VV=function(n){var o=!1;this.hb==null&&(this.hb=new O(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(n);for(var u=0,p=n.size;u<p;u++){var y=n.get(u);y!=-1&&this.jG(y,-1)}for(u=0;u<this.Ym.size&&0<this.ft;u++)if(n=this.Ym.get(u),y=this.hb.mz(this.fb.ka(n)),p=-1,this.g.uj(y,this.Gl)==0){y=this.fb.xe(n);for(var g,b=n;y!=-1;){var S=this.fb.ka(y),$=this.hb.mz(S),I=this.g.uj($,this.Gl);if(I!=0){p=$;break}b=y,y=this.fb.xe(y)}y==-1?(g=!0,y=b):(S=this.fb.ka(y),g=this.hb.Dv(S),y=this.fb.lb(y),g=!g);do{if(S=this.fb.ka(y),$=this.hb.mz(S),(I=this.g.uj($,this.Gl))==0&&(g!=this.hb.Dv(S)&&(o=this.g.Ya($),this.g.kJ(o),this.g.Yg($,this.g.Na(o)),o=!0),this.g.ir($,this.Gl,g?3:2),g||(b=this.g.uj(p,this.yo),this.g.ir(p,this.yo,$),this.g.ir($,this.yo,b)),this.ft--,this.ft==0))return o;p=$,b=y,y=this.fb.lb(y),g=!g}while(b!=n)}return o},a.prototype.UV=function(n){for(var o=0,u=n.size;o<u;o++){var p=n.get(o),y=this.g.Qa(p,this.to),g=this.g.Qa(p,this.Ts);if(y!=-1){var b=this.fb.ka(y);this.hb.mF(b),this.g.Sa(p,this.to,-1)}g!=-1&&(b=this.fb.ka(g),this.hb.mF(b),this.g.Sa(p,this.Ts,-1)),b=-1,y!=-1&&g!=-1?(this.fb.wd(y,-1),this.fb.wd(g,-1),n.set(o,-1)):b=y!=-1?y:g,b!=-1&&(this.jG(p,b)||this.fb.wd(b,-1),n.set(o,-1))}},a.prototype.jG=function(n,o){var u=new h.h,p=new h.h;this.g.Hc(n,u);var y=this.g.V(n);this.g.Hc(y,p);var g=!1;if(u.y<p.y){g=!0;var b=this.hb.iI(n);if(o==-1)var S=this.fb.addElement(b,-1);else S=o,this.fb.Uj(S,b);(b=this.g.Qa(y,this.to))==-1?this.g.Sa(y,this.to,S):this.g.Sa(y,this.Ts,S),y=this.g.cd(n),this.g.uj(y,this.Gl)==0&&this.Ym.add(S)}return y=this.g.Na(n),this.g.Hc(y,p),u.y<p.y&&(g=!0,b=this.hb.iI(y),o==-1?S=this.fb.addElement(b,-1):(S=o,this.fb.Uj(S,b)),(b=this.g.Qa(y,this.to))==-1?this.g.Sa(y,this.to,S):this.g.Sa(y,this.Ts,S),y=this.g.cd(n),this.g.uj(y,this.Gl)==0&&this.Ym.add(S)),g},a.W=function(n,o,u,p){var y=new a;return y.g=n,y.Y=o,y.Il=u,y.hw=p,y.CQ()},a.prototype.DQ=function(){var n=new h.ja(0),o=new h.ja(0),u=-1,p=-1,y=new h.h;y.Sc();for(var g=-1,b=-1,S=-1,$=new h.h,I=this.Il.sc(this.Il.ke);I!=-1;I=this.Il.lb(I)){var C=this.Il.getData(I);this.g.Hc(C,$);var R=this.g.cd(C);y.rb($)&&b==R?(p==-1&&(u=this.g.Fy(),p=this.g.Hd()),S==-1&&(S=o.size,this.g.Sa(g,p,S),o.add(1),this.g.uj(R,u)==-1&&(this.g.ir(R,u,g),n.add(R))),this.g.Sa(C,p,S),o.XW(o.Gc()+1)):(S=-1,y.N($)),g=C,b=R}if(n.size==0)return!1;for(y=new h.ja(0),g=new h.ja(0),b=0,S=n.size;b<S;b++){R=n.get(b);var L=this.g.uj(R,u);for(C=this.g.Qa(L,p),y.clear(!1),g.clear(!1),y.add(L),g.add(C),C=this.g.V(L);C!=L;C=this.g.V(C)){var N=C;if(($=this.g.Qa(N,p))!=-1)if(g.size==0)g.add($),y.add(N);else if(g.Gc()==$){I=y.Gc();var U=this.g.V(I);L=this.g.V(N),this.g.Cc(I,L),this.g.Dc(L,I),this.g.Cc(N,U),this.g.Dc(U,N),N=[!1],U=this.g.iG(this.Y,U,this.g.Ya(R),N),this.g.Sa(C,p,-1),N[0]&&this.g.Kf(R,L),C=this.g.Ka(R),C-=L=this.g.Ka(U),this.g.Xj(R,C),o.set($,o.get($)-1),o.get($)==1&&(o.set($,0),g.Jf(),y.Jf()),C=L=I}else y.add(C),g.add($)}}return this.g.xB(u),this.g.Ud(p),!0},a}();h.RL=c}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.jg=function(){this.KA=this.tb=null},w.prototype.get=function(){return this.KA},w.prototype.set=function(c){if(this.KA=c,c!=null)throw c.K()==322&&(this.tb=c),h.i.Ra()},w.prototype.create=function(c){if(c!=322)throw h.i.ga("Not Implemented");this.Qr()},w.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.KA=this.tb},w}();h.jg=O}(B||(B={})),function(h){(h=h.SL||(h.SL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(B||(B={})),function(h){var O=function(c){this.bj=c,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},w=function(){function c(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return c.prototype.rB=function(a){if(a!=null){for(var n=0,o=a.length;n<o;n++)this.mW(a[n]);a.length=0}},c.prototype.mW=function(a){a.bj=null,this.Kq.push(a)},c.prototype.Qw=function(a){if(this.Kq.length===0)var n=new O(a);else(n=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return n},c.prototype.NR=function(a,n){return a==0?this.bt[n]:this.Aw[n]},c.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new h.jg);var a=this.HA[this.Ew];return this.Ew++,a},c.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},c.prototype.Qo=function(a){this.oo.push(this.Qw(a))},c.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},c.prototype.Xp=function(a,n){return this.NR(a,n).bj},c.prototype.Fa=function(a,n){if(this.oo.length!=2)throw h.i.Ra();this.ra=a;var o=h.mc.ox(.01*a),u=!1,p=this.oo[0],y=this.oo[1];if(n||(5&p.bj.Br(y.bj,a,!0))!=0){if(p.bj.K()==322){var g=p.bj;if(y.bj.K()==322){n=y.bj;var b=h.zb.Yx(g,n,null,this.Hq,this.Dk,a);if(b==0)throw h.zb.Yx(g,n,null,this.Hq,this.Dk,a),h.i.Ra();a=Array(9),h.P.bv(a,null);for(var S=0;S<b;S++){var $=this.Hq[S],I=this.Dk[S],C=p.nB,R=1;$==0?(C=p.oB,R=p.mC):$==1&&(C=p.mB,R=p.lC);var L=y.nB,N=1;I==0?(L=y.oB,N=y.mC):I==1&&(L=y.mB,N=y.lC);var U=new h.h;C==L?(C=new h.h,g.ic($,C),$=new h.h,n.ic(I,$),N/=I=R+N,h.mc.JG(C,$,N,U),h.h.zc(U,C)+h.h.zc(U,$)>o&&(u=!0)):C>L?(g.ic($,U),$=new h.h,n.ic(I,$),h.h.zc(U,$)>o&&(u=!0)):(n.ic(I,U),C=new h.h,g.ic($,C),h.h.zc(U,C)>o&&(u=!0)),a[S]=U}for(p=0,y=-1,S=0;S<=b;S++)(N=S<b?this.Hq[S]:1)!=p&&(o=this.WA(),g.dh(p,N,o),y!=-1&&o.get().Ec(a[y]),S!=b&&o.get().Rc(a[S]),p=N,this.bt.push(this.Qw(o.get()))),y=S;for(g=[0,0,0,0,0,0,0,0,0],S=0;S<b;S++)g[S]=S;for(1<b&&this.Dk[0]>this.Dk[1]&&(N=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=N,S=g[0],g[0]=g[1],g[1]=S),p=0,y=-1,S=0;S<=b;S++)(N=S<b?this.Dk[S]:1)!=p&&(o=this.WA(),n.dh(p,N,o),y!=-1&&(p=g[y],o.get().Ec(a[p])),S!=b&&(p=g[S],o.get().Rc(a[p])),p=N,this.Aw.push(this.Qw(o.get()))),y=S;return u}}throw h.i.Ra()}return!1},c.prototype.Fz=function(a,n,o){if(n.copyTo(this.Cf),this.oo.length!=1)throw h.i.Ra();this.ra=a;var u=this.oo[0];if(o||u.bj.tu(n.D(),a,!0)){if(u.bj.K()!=322)throw h.i.Ra();var p=(a=u.bj).ge(n.D(),!1);this.Hq[0]=p;var y=u.nB;for(o=1,p==0?(y=u.oB,o=u.mC):p==1&&(y=u.mB,o=u.lC),u=new h.h,y==0?(y=new h.h,a.ic(p,y),n=n.D(),h.mc.JG(y,n,1/(o+1),u)):0<y?(u=new h.h,a.ic(p,u)):u=n.D(),o=0,p=-1,y=0;1>=y;y++){if((n=1>y?this.Hq[y]:1)!=o){var g=this.WA();a.dh(o,n,g),p!=-1&&g.get().Ec(u),y!=1&&g.get().Rc(u),o=n,this.bt.push(this.Qw(g.get()))}p=y}this.Cf.Db(u)}},c}();h.OC=w}(B||(B={})),function(h){var O=function(){function w(c){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=c,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new h.h}return w.prototype.wW=function(c){if(this.ib!=c.ib)throw h.i.Hb();this.Af=c.Af,this.Kd=c.Kd,this.gb=c.gb,this.El=c.El,this.cg=c.cg,this.Bm=c.Bm,this.tk=null},w.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw h.i.de();this.Kd++}return this.tk},w.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw h.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},w.prototype.xW=function(){this.Af=-1,this.Kd=0},w.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},w.prototype.Wb=function(c,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var n=this.DM();if(c>=n&&c<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=c-n)}a=0<=a&&a<this.ib.ea()&&c>=this.ib.Ca(a)&&c<this.ib.Wc(a)?a:this.ib.nz(c),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=c-this.ib.Ca(a),this.cg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},w.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},w.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},w.prototype.Vx=function(c){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(c)&&(a=0),this.ib.Ka(c)-a},w.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},w.prototype.EB=function(){this.Bm=!0},w.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},w.prototype.DM=function(){return this.ib.Ca(this.gb)},w.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},w.prototype.xm=function(){return this.Af==0},w.prototype.Sn=function(){return this.Af==this.cg-1},w.prototype.Ia=function(){return this.Kd<this.cg},w.prototype.zz=function(){return 0<this.Kd},w.prototype.Qf=function(){var c=new w(this.ib);return c.Af=this.Af,c.Kd=this.Kd,c.cg=this.cg,c.gb=this.gb,c.El=this.El,c.ib=this.ib,c.Bm=this.Bm,c},w.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw h.i.de();this.Af=this.Kd;var c=this.xb();this.ib.oc();var a=this.ib.Se,n=1;switch(a!=null&&(n=7&a.read(c)),a=this.ib.description,n){case 1:this.tb==null&&(this.tb=new h.zb),this.tk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.tk.Pf(a),n=this.kk(),this.ib.Hc(c,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(n,this.Fs),this.tk.Rc(this.Fs);for(var o=1,u=a.Ba;o<u;o++)for(var p=a.ld(o),y=h.sa.Wa(p),g=0;g<y;g++){var b=this.ib.Vc(p,c,g);this.tk.TB(p,g,b),b=this.ib.Vc(p,n,g),this.tk.JB(p,g,b)}},w.prototype.VS=function(){return this.gb==this.ib.ea()-1},w.prototype.Rn=function(){var c=this.ib.QR();return c!=null&&(7&c.read(this.Af))!=1},w}();h.TL=O}(B||(B={})),function(h){var O=function(){function w(c){c instanceof h.ba?(this.sH=c,this.za=-1,this.Gi=1):(this.qT=c.slice(0),this.za=-1,this.Gi=c.length)}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},w.prototype.re=function(){},w}();h.$c=O}(B||(B={})),function(h){var O=function(){this.next=null},w=function(){function c(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return c.prototype.wX=function(a,n,o){this.ri=a,this.rl=n,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=h.P.mg(384,0)),this.iK()},c.prototype.S=function(){return this.ri},c.prototype.da=function(){return this.rl},c.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},c.prototype.iK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var n=this.Yl[a];n!=null;){var o=n;n=n.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},c.prototype.dJ=function(a){for(this.fF=a==c.Bx,a=this.Nw;a<=this.Mw;a++)this.nN(),this.gN(a),this.UP();this.iK()},c.prototype.fy=function(a,n,o,u){if(n!=u){var p=1;if(n>u&&(p=a,a=o,o=p,p=n,n=u,u=p,p=-1),!(0>u||n>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var y=(o-a)/(u-n);u>this.rl&&(o=y*((u=this.rl)-n)+a),0>n&&(a=y*(0-n)+a,n=0);var g=Math.max(this.ri+1,8388607);-8388607>a?(n=(0-a)/y+n,a=0):a>g&&(n=(this.ri-a)/y+n,a=this.ri),-8388607>o?u=(0-a)/y+n:o>g&&(u=(this.ri-a)/y+n),(n=h.P.truncate(n))!=(u=h.P.truncate(u))&&((o=new O).x=h.P.truncate(4294967296*a),o.y=n,o.H=u,o.RP=h.P.truncate(4294967296*y),o.dir=p,this.Yl==null&&(this.Yl=h.P.mg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},c.prototype.nN=function(){if(this.Lh!=null){for(var a=!1,n=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var u=o;o=o.next,n!=null?n.next=o:this.Lh=o,u.next=null}else o.x+=o.RP,n!=null&&n.x>o.x&&(a=!0),n=o,o=o.next;a&&(this.Lh=this.aK(this.Lh))}},c.prototype.gN=function(a){if(!(a>=this.rl)){var n=this.Yl[a];if(n!=null){this.Yl[a]=null,n=this.aK(n),this.Vq-=this.bK,a=this.Lh;for(var o=!0,u=n,p=null;a!=null&&u!=null;)a.x>u.x?(o&&(this.Lh=u),o=u.next,u.next=a,p!=null&&(p.next=u),p=u,u=o):(o=a.next,a.next=u,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=n)}}},c.$J=function(a,n){return 0>a?0:a>n?n:a},c.prototype.UP=function(){if(this.Lh!=null){for(var a=0,n=this.Lh,o=h.P.truncate(h.P.SG(n.x)),u=n.next;u!=null;u=u.next)if(a=this.fF?1^a:a+u.dir,u.x>n.x){var p=h.P.truncate(h.P.SG(u.x));a!=0&&(n=c.$J(o,this.ri),(o=c.$J(p,this.ri))>n&&n<this.ri&&(this.jn[this.Ql++]=n,this.jn[this.Ql++]=o,this.jn[this.Ql++]=u.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),n=u,o=p}}},c.prototype.aK=function(a){for(var n=0,o=a;o!=null;o=o.next)n++;if(this.bK=n,n==1)return a;this.Lf==null?this.Lf=h.P.mg(Math.max(n,16),null):this.Lf.length<n&&(this.Lf=h.P.mg(Math.max(n,2*this.Lf.length),null));var u=0;for(o=a;o!=null;o=o.next)this.Lf[u++]=o;for(n==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):c.vN(this.Lf,n,function(p,y){return p==y?0:p.x<y.x?-1:p.x>y.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,u=1;u<n;u++)o.next=this.Lf[u],o=this.Lf[u],this.Lf[u]=null;return o.next=null,a},c.vN=function(a,n,o){if(n==a.length)a.sort(o);else{var u=a.slice(0,0),p=a.slice(n);n=a.slice(0,n).sort(o),a.length=0,a.push.apply(a,u.concat(n).concat(p))}},c.Bx=0,c}();h.Ox=w}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.wi=function(c,a){var n=this.g.Qa(c,this.Rq);if(this.Fl==n&&(this.Fl=this.pe.lb(this.Fl)),this.jo==n&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,n),this.dk(c),a&&(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c){var o=this.g.V(c);if(o!=c){if((n=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(c))!=c&&(n=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},w.prototype.kD=function(){for(var c=!1,a=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var n=this.jo,o=0,u=!0;n!=this.Fl;){var p=this.pe.getData(n),y=new h.h;this.g.Hc(p,y),u&&(this.g.Hc(p,a),u=!1),y=this.g.Na(p);var g=this.g.V(p);this.g.Qa(y,this.Ag)!=-559038737&&(this.Yh.add(y),this.g.Sa(y,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(g,this.Ag)!=-559038737&&(this.Yh.add(g),this.g.Sa(g,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),n=this.pe.lb(n)}if(2>this.Yh.size)break;var b=this;for(this.ye.Wd(0,this.ye.size,function(S,$){return b.kM(S,$)}),n=0,o=this.ye.size;n<o;n++)u=this.ye.get(n),u=this.Yh.get(u),this.g.Sa(u,this.Ag,n),y=new h.h,this.g.Hc(u,y);for(y=this.OM(a),n=0,o=this.ye.size;n<o;n++)(u=this.ye.get(n))!=-1&&(u=this.Yh.get(u),this.g.Sa(u,this.Ag,-1));if(!y)break;c=!0}return c},w.prototype.OM=function(c){for(var a=!1,n=!0;n;){n=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var u=this.em(o),p=0,y=this.ye.size;p<y&&o!=-1&&u!=-1&&o!=u;p++){var g=this.ye.get(o);u=this.ye.get(u),g=this.Yh.get(g),u=this.Yh.get(u);var b=this.g.V(g);this.g.Fv(b,c)||(b=this.g.Na(g));var S=this.g.V(u);this.g.Fv(S,c)||(S=this.g.Na(u));var $=this.ru(b,g),I=this.ru(S,u),C=$?this.g.Na(b):this.g.V(b),R=I?this.g.Na(S):this.g.V(S),L=!1;(this.up(b)||this.up(S)||this.up(g)||this.up(u)||this.up(C)||this.up(R))&&(L=!0),!L&&this.g.hq(g,u)&&(L=!0,this.oD($,I,b,g,S,u)),!L&&this.g.hq(C,R)&&(L=!0,this.oD(!$,!I,b,C,S,R)),L&&(a=!0),n=n||L,o=this.em(o),u=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),u=this.em(o),p=0,y=this.ye.size;p<y&&o!=-1&&u!=-1&&o!=u;p++)g=this.ye.get(o),u=this.ye.get(u),g=this.Yh.get(g),u=this.Yh.get(u),b=this.g.V(g),this.g.Fv(b,c)||(b=this.g.Na(g)),S=this.g.V(u),this.g.Fv(S,c)||(S=this.g.Na(u)),$=this.ru(b,g),I=this.ru(S,u),C=$?this.g.Na(b):this.g.V(b),R=I?this.g.Na(S):this.g.V(S),this.yM($,I,g,b,C,u,S,R)&&(a=!0),o=this.em(o),u=this.em(o);return a},w.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new h.Hg().HU(this.hw,this.g,this.Y,this.od);var c=!1,a=!0;this.Ag=this.Rq=-1;var n=this.g.I(this.Y),o=new h.ja(0);o.Jb(n);for(var u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),y=0,g=this.g.Ka(u);y<g;y++)o.add(p),p=this.g.V(p);var b=this.g.ud.o,S=this.g.ud.Mf;this.g.wb.oc();var $=this.g.wb.Aa[0].o;for(o.Wd(0,n,function(C,R){var L=b[S*C],N=b[S*R],U=$[2*L];L=$[2*L+1];var W=$[2*N];return(U=L<(N=$[2*N+1])?-1:L>N?1:U<W?-1:U>W?1:0)==0&&(U=(C=b[S*C+3])<(R=b[S*R+3])?-1:C==R?0:1),U}),this.Rq=this.g.Hd(),this.pe=new h.lp,this.MA=this.pe.Rh(0),this.pe.hn(n),u=0;u<n;u++)p=o.get(u),y=this.pe.addElement(this.MA,p),this.g.Sa(p,this.Rq,y);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(c=!0);a;){a=!1,n=0,o=!1;do{o=!1,this.jo=-1,g=0,u=new h.h,y=new h.h;for(var I=this.pe.sc(this.MA);I!=-1;)p=this.pe.getData(I),this.jo!=-1?(this.g.Hc(p,y),u.rb(y)?g++:(u.N(y),this.Fl=I,0<g&&(p=this.kD())&&(o=!0,this.Fl!=-1&&(p=this.pe.getData(this.Fl),this.g.Hc(p,u))),this.jo=I=this.Fl,g=0)):(this.jo=I,this.g.Hc(this.pe.getData(I),u),g=0),I!=-1&&(I=this.pe.lb(I));if(this.Fl=-1,0<g&&(p=this.kD())&&(o=!0),10<n++)throw h.i.Ra();o&&this.BM(),this.YC()&&(o=!0),a=a||o&&!1,c=c||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),h.RL.W(this.g,this.Y,this.pe,this.hw)||c},w.prototype.ru=function(c,a){return this.g.V(a)!=c},w.prototype.yM=function(c,a,n,o,u,p,y,g){if(o==y)return this.dk(n),this.dk(p),!1;var b=this.g.Qa(n,this.Ag),S=this.g.Qa(u,this.Ag),$=this.g.Qa(p,this.Ag),I=this.g.Qa(g,this.Ag),C=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,C[0]=b,n[1]=0,C[1]=S,n[2]=1,C[2]=$,n[3]=1,C[3]=I,b=1;4>b;b++){for(S=C[b],$=n[b],I=b-1;0<=I&&C[I]>S;)C[I+1]=C[I],n[I+1]=n[I],I--;C[I+1]=S,n[I+1]=$}return C=0,n[0]!=0&&(C|=1),n[1]!=0&&(C|=2),n[2]!=0&&(C|=4),n[3]!=0&&(C|=8),(C==5||C==10)&&(c==a?c?(this.g.Cc(g,o),this.g.Dc(o,g),this.g.Cc(u,y),this.g.Dc(y,u)):(this.g.Dc(g,o),this.g.Cc(o,g),this.g.Dc(u,y),this.g.Cc(y,u)):c?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(y,u),this.g.Cc(u,y)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(y,u),this.g.Dc(u,y)),!0)},w.prototype.oD=function(c,a,n,o,u,p){this.IY?this.QM():this.PM(c,a,n,o,u,p)},w.prototype.QM=function(){throw h.i.ga("not implemented.")},w.prototype.PM=function(c,a,n,o,u,p){if(c!=a)c?(this.g.Cc(n,u),this.g.Dc(u,n),this.g.Cc(p,o),this.g.Dc(o,p),this.xn(u,n),this.wi(u,!0),this.g.oi(u,!0),this.dk(n),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(u,n),this.g.Dc(n,u),this.g.Cc(o,p),this.g.Dc(p,o),this.xn(u,n),this.wi(u,!0),this.g.oi(u,!1),this.dk(n),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.dk(o);else{var y=c?n:o,g=a?u:p;for(c=c?o:n,a=a?p:u,u=!1,this.g.Cc(y,g),this.g.Cc(g,y),this.g.Dc(c,a),this.g.Dc(a,c),p=a;p!=g;)n=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,n),u=u||p==y,p=o;u||(n=this.g.Na(g),o=this.g.V(g),this.g.Dc(g,o),this.g.Cc(g,n)),this.xn(g,y),this.wi(g,!0),this.g.oi(g,!1),this.dk(y),this.xn(a,c),this.wi(a,!0),this.g.oi(a,!1),this.dk(c)}},w.prototype.YC=function(){for(var c=!1,a=this.g.Ob(this.Y);a!=-1;){for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u&&1<u;){var p=this.g.Na(n),y=this.g.V(n);this.g.hq(p,y)?(c=!0,this.wi(n,!1),this.g.qd(n,!0),this.wi(y,!1),this.g.qd(y,!0),n=p,o=0,u=this.g.Ka(a)):(n=y,o++)}if(2>this.g.Ka(a)){for(c=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++)this.wi(c,!1),c=this.g.V(c);a=this.g.ar(a),c=!0}else a=this.g.Sb(a)}return c},w.prototype.up=function(c){for(var a=!1;;){var n=this.g.V(c),o=this.g.Na(c);if(n==c)return this.wi(c,!0),this.g.oi(c,!1),!0;if(!this.g.hq(n,o)||(a=!0,this.dk(o),this.dk(n),this.wi(c,!0),this.g.oi(c,!1),this.xn(n,o),this.wi(n,!0),this.g.oi(n,!0),n==o))break;c=o}return a},w.prototype.BM=function(){for(var c=0,a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a)){var n=this.pe.getData(a);this.g.cj(n,-1)}for(var o=0,u=this.g.Ob(this.Y);u!=-1;)if((a=this.g.Ya(u))==-1||this.g.cd(a)!=-1)n=u,u=this.g.Sb(u),this.g.br(n);else{this.g.cj(a,u);var p=1;for(n=this.g.V(a);n!=a;n=this.g.V(n))this.g.cj(n,u),p++;this.g.fp(u,!1),this.g.Xj(u,p),this.g.Yg(u,this.g.Na(a)),o+=p,c++,u=this.g.Sb(u)}for(a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a))n=this.pe.getData(a),this.g.cd(n)==-1&&(u=this.g.iG(this.Y,n,n,null),o+=this.g.Ka(u),c++);for(this.g.Tl(this.Y,c),this.g.Vj(this.Y,o),c=0,o=this.g.md;o!=-1;o=this.g.ve(o))c+=this.g.I(o);this.g.XB(c)},w.prototype.em=function(c){for(var a=0,n=this.ye.size-1;a<n;a++)if(c=(c+1)%this.ye.size,this.ye.get(c)!=-1)return c;return-1},w.prototype.xn=function(c,a){var n=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.Ag);this.g.gC(c,a),this.g.Sa(a,this.Rq,n),this.g.Sa(a,this.Ag,o)},w.prototype.dk=function(c){var a=this.g.Qa(c,this.Ag);a!=-1&&(this.ye.set(a,-1),this.g.Sa(c,this.Ag,-1))},w.W=function(c,a,n,o,u){var p=new w;return p.g=c,p.Y=a,p.sA=n,p.hw=o,p.od=u,p.SM()},w.prototype.kM=function(c,a){var n=this.Yh.get(c),o=new h.h;this.g.Hc(n,o),n=new h.h;var u=this.Yh.get(a);return this.g.Hc(u,n),o.rb(n)?0:(u=this.Bs.get(c),c=new h.h,this.g.Hc(u,c),u=this.Bs.get(a),a=new h.h,this.g.Hc(u,a),(u=new h.h).vc(o,c),(o=new h.h).vc(n,a),h.h.pu(u,o))},w}();h.tn=O}(B||(B={})),function(h){var O;(O=h.VL||(h.VL={}))[O.Local=0]="Local",O[O.Geographic=1]="Geographic",O[O.Projected=2]="Projected",O[O.Image=3]="Image",O[O.Unknown=4]="Unknown",function(c){c[c.Integer32=0]="Integer32",c[c.Integer64=1]="Integer64",c[c.FloatingPoint=2]="FloatingPoint"}(h.OL||(h.OL={}));var w=function(){function c(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return c.prototype.Fc=function(){return this.fg},c.prototype.QF=function(){return 1},c.prototype.QW=function(a){this.hA=a},c.prototype.Yd=function(){if(this.hA!==null)return this.hA;var a=.001;return this.fg!=0?a=h.yr.xQ(this.fg):this.yh!=null&&(a=h.SC.yQ(this.yh)),a},c.prototype.wz=function(){return this.yh},c.prototype.Id=function(){return this.fg!=0?h.Uc.ah(h.yr.Ny(this.fg)):this.yh!=null?h.SC.zQ(this.yh):void 0},c.Tb=function(a){if(a.fg!=0){if(h.yr.US(a.fg)===!0)return 1;if(h.yr.WS(a.fg)===!0)return 2}return 4},c.prototype.cs=function(){var a=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=h.yr.AK(a),this.Jo!=-1?this.Jo:a)},c.create=function(a){if(0>=a)throw h.i.O("Invalid or unsupported wkid: "+a);var n=new c;return n.fg=a,n},c.lP=function(a){if(a==null||a.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var n=new c;return n.yh=a,n},c.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.fg==a.fg&&(this.fg!=0||this.yh===a.yh)},c.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},c.prototype.dc=function(){if(this.rp!=="")return this.rp;var a=this.toString();if(Array.prototype.reduce)return this.rp="S"+a.split("").reduce(function(u,p){return(u=(u<<5)-u+p.charCodeAt(0))&u},0);var n=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)n=(n<<5)-n+a.charCodeAt(o),n&=n;return this.rp="S"+n},c.prototype.Mn=function(){return this.Yd(0)},c.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.tP(this)},c.UN=2147483645,c.VN=9007199254740990,c}();h.Gg=w}(B||(B={})),function(h){var O=function(w){function c(){var a=w!==null&&w.apply(this,arguments)||this;return a.Li=null,a.NT=null,a.Jq=new h.UL,a.Go=null,a.lw=null,a}return Fe(c,w),c.tP=function(a){var n=new c;if(n.fg=a.fg,n.Jo=a.Jo,n.UH=a.UH,n.yh=a.yh,n.yh!==""&&n.yh!==null){a=c.fM(n.yh);var o=c.dM(n.yh);n.Jq.Wx(a,o,h.ju.Integer64),n.ay(a),n.cy(o),n.fg=a.cs()}else a=c.eM(n.fg),n.ay(a),n.cy(null),n.Jq.Wx(a,null,h.ju.Integer64);return n},c.prototype.Yd=function(a){return this.Jq.Mn(a)},c.dM=function(a){if(0>=a.length)throw h.i.O();var n=null;try{n=h.IC.fromString(a)}catch{n=null}return n==null?null:c.XC(n,!0)},c.prototype.ay=function(a){this.Ld=a,this.Go=this.Ld.Id()},c.prototype.cy=function(a){this.FH=a,this.NT=this.FH!=null?this.FH.Go:null},c.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},c.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},c.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},c.prototype.rm=function(){return this.Ld.rm()},c.prototype.bf=function(){return this.Ld.bf()},c.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},c.prototype.Wp=function(){return this.Ld.Wp()},c.prototype.Yr=function(){return this.Ld.Yr()},c.prototype.mk=function(){return this.Ld.mk()},c.prototype.fS=function(a){return h.JC.Ky(this.Ld,a.Ld)},c.prototype.ol=function(){return this.Ld.ol()},c.prototype.Xr=function(){return this.Ld.Xr()},c.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},c.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var a=new h.l;return this.Ld.ih(a),a},c.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.uo},c.prototype.CR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var a=new h.l;return this.Ld.BR(a),a},c.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},c.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},c.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},c.prototype.KQ=function(){return this.Ld.kv()},c.prototype.Sp=function(){return this.Go.getUnitFactor()},c.prototype.pz=function(a){return this.Jq.pz(a)},c.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.hk().tc();if(a==0||a===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=c.XE(a,this.Jq.QF())},c.XE=function(a,n){if(a==null)throw h.i.O("null pointer.");var o=new c;return a=c.ou(a,!0),o.Jq.Wx(a,null,n),o.ay(a),o.cy(null),o.fg=a.cs(),o},c.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},c.prototype.kv=function(){return this.Ld.kv()},c.ou=function(a,n){var o=a.getCode();if(0>=o&&0<(o=h.qf.getCode(a))){if((a=h.qf.coordsys(o))==null)throw h.i.O("Text to wkid mapping had failed: "+o);return c.ou(a,n)}if(n&&0<o&&(n=c.qx[o]))return n;n=h.Ab.zv(a,o,!1);var u=c.gK[n];return u||(a=0>=o?a:h.qf.coordsys(o),a=new h.JC(a),c.gK[n]=a,0<o&&(c.qx[o]=a),a)},c.eM=function(a){if(0>=a)throw h.i.O("Invalid or unsupported wkid: "+a);var n=c.qx[a];if(n!=null)return n;if((n=h.qf.coordsys(a))==null)throw h.i.O("Invalid or unsupported wkid: "+a);return(n=c.ou(n,!1)).cs()!=a&&(c.qx[a]=n),n},c.fM=function(a){if(a==null||a===void 0||a.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var n=null;try{n=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw h.i.O("Cannot create SpatialReference from text. "+o.message)}if(n===null)throw h.i.O("Cannot create SpatialReference from text. ");return c.ou(n,!0)},c.XC=function(a,n){var o,u=a.getCode();if(0>=u&&0<(u=h.qf.getCode(a))){if((u=h.qf.vertcs(u))===null)throw h.i.O();return c.XC(u,n)}if(n&&0<u&&(n=c.fK[u])||(a=h.Ab.zv(a,u,!1),n=c.hK[a]))return n;if(0>=u||(o=h.qf.vertcs(u)),o===null)throw h.i.O();return o=new h.KL(o),c.hK[a]=o,0<u&&(c.fK[u]=o),o},c.nI=function(a,n){if(n===null||n.B())return null;var o=new h.l;if(n!==null&&a.Tb()!=1){var u=a.tc(),p=u.gh();a=h.xr.Pr(a,u,null,null),(n=h.Gx.local().W(n,a,null)).A(o)}else p=a.gh(),n.A(o);return n=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new h.GC(o.v,o.G,o.C,o.H,n,p)},c.gD=function(a){var n={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var u=a[o],p={HY:!1,VY:"",UY:-1,geogtran:null};u.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var y=u.getGeogtran().getCode();-1<y?p.wkid=y:p.wkt=u.getGeogtran().toString(),n.steps.push(p)}return n},c.SR=function(a,n,o,u){return o===void 0&&(o=null),o=c.nI(u,o),a=h.np.getGTlist(a.gh(),n.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,o,1),n=null,a&&0<a.length&&(n=this.gD(a[0]),h.Lx.destroy(a)),o!==null&&o.destroy(),n},c.TR=function(a,n,o,u){var p;if(o===void 0&&(o=null),u===void 0&&(u=null),p===void 0&&(p=30),o=c.nI(u,o),a=h.np.getGTlist(a.gh(),n.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,o,p),n=[],a&&0<a.length){for(p=0;p<a.length;p++)n.push(this.gD(a[p]));h.Lx.destroy(a)}return o!==null&&o.destroy(),n},c.qx={},c.gK={},c.fK={},c.hK={},c}(h.Gg);h.iu=O}(B||(B={})),function(h){var O,w;(w=O=h.ju||(h.ju={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var c=function(){function a(){this.sp()}return a.prototype.assign=function(n){this.Hm=n.Hm,this.Im=n.Im,this.Rj=n.Rj,this.nA=n.nA,this.Ho=n.Ho,this.mA=n.mA,this.Kk=n.Kk,this.Oq=n.Oq,this.Nq=n.Nq,this.Tm=n.Tm},a.prototype.QF=function(){return this.Tm},a.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=O.FloatingPoint},a.prototype.Wx=function(n,o,u){if(this.sp(),this.Tm=u,u!=O.FloatingPoint){var p=new h.l;n.cR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=n.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(p=(u==O.Integer64?1e-9:1/18e5)*n.bf(),this.Rj=1/p):p==h.Tc.PE_TYPE_PROJCS&&(p=(u==O.Integer64?1e-4:.001)*n.rm(),this.Rj=1/p),o!=null?(p=(u==O.Integer32?.001:1e-4)*o.DH,this.Ho=1/p):this.Ho=1e4,this.TM(),this.Kk=n.uw,this.Oq=o!=null?.001*o.DH:.001,this.Nq=2220446049250313e-29},a.prototype.TM=function(){if(this.Tm!=O.FloatingPoint){var n=this.Tm==O.Integer64?h.Gg.VN:h.Gg.UN,o=n/this.Rj,u=this.Hm+o,p=h.P.truncate((u-this.Hm)*this.Rj);p>n&&(this.Rj=n/(u-this.Hm)),o=this.Im+o,(p=h.P.truncate((o-this.Im)*this.Rj))>n&&(this.Rj=n/(o-this.Im))}},a.prototype.WB=function(n){switch(n){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Mn=function(n){switch(n){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(n){if(this.Tm==O.FloatingPoint)return 0;switch(n){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},a.prototype.toString=function(){var n="SRPD [m_toleranceXY: "+this.Kk.toString();return(n=(n=(n=(n=(n=(n=(n=(n=(n=n+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();h.UL=c}(B||(B={})),function(h){function O(u,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*u,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function w(u,p,y){return u=u/6378137*57.29577951308232,y?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function c(u,p,y){var g=u.Qf();if(u.K()===33)p=p(g.Ng(),g.kh()),g.Db(p[0],p[1]);else if(u.K()===197){var b=p(u.gs(),u.js(),y);p=p(u.fs(),u.hs(),y),g.L(b[0],b[1],p[0],p[1])}else for(b=new h.h,u=0;u<g.I();u++){g.D(u,b);var S=p(b.x,b.y,y);b.na(S[0],S[1]),g.Db(u,b)}return g}function a(u){return c(u,w,!0)}function n(u){return c(u,O,!0)}var o=Math.PI/180;h.PK=function(){function u(){}return u.xu=function(p){var y=Math.sqrt(.006694379990197414),g=Math.sin(p.y*o);return h.h.construct(6378137*p.x*o,3.1677196636462314e6*(g/(1-.006694379990197414*g*g)-1/(2*y)*Math.log((1-y*g)/(1+y*g))))},u.Ux=function(p,y,g,b){var S=1/298.257223563,$=Math.sin(g);g=Math.cos(g);var I=(1-S)*Math.tan(p),C=I*(p=1/Math.sqrt(1+I*I)),R=Math.atan2(I,g),L=(I=p*$)*I,N=1-L,U=27233160610754688e-5*N/4040829998466145e-2,W=1+U/16384*(4096+U*(U*(320-175*U)-768)),j=U/1024*(256+U*(U*(74-47*U)-128));U=b/(635675231424518e-8*W);for(var K,se,ne,pe=2*Math.PI;1e-12<Math.abs(U-pe);)ne=Math.cos(2*R+U),pe=U,U=b/(635675231424518e-8*W)+j*(K=Math.sin(U))*(ne+j/4*((se=Math.cos(U))*(2*ne*ne-1)-j/6*ne*(4*K*K-3)*(4*ne*ne-3)));return b=C*K-p*se*g,N=S/16*N*(4+S*(4-3*N)),h.h.construct((y+(Math.atan2(K*$,p*se-C*K*g)-(1-N)*S*I*(U+N*K*(ne+N*se*(2*ne*ne-1)))))/o,Math.atan2(C*se+p*K*g,(1-S)*Math.sqrt(L+b*b))/o)},u.HM=function(p,y,g,b){var S=1/298.257223563,$=b-y,I=Math.atan((1-S)*Math.tan(p)),C=Math.atan((1-S)*Math.tan(g)),R=Math.sin(I);I=Math.cos(I);var L=Math.sin(C);C=Math.cos(C);var N=$,U=1e3;do{var W=Math.sin(N),j=Math.cos(N),K=Math.sqrt(C*W*C*W+(I*L-R*C*j)*(I*L-R*C*j));if(K===0)return 0;j=R*L+I*C*j;var se=Math.atan2(K,j),ne=I*C*W/K,pe=1-ne*ne;W=j-2*R*L/pe,isNaN(W)&&(W=0);var he=S/16*pe*(4+S*(4-3*pe)),xe=N;N=$+(1-he)*S*ne*(se+he*K*(W+he*j*(2*W*W-1)))}while(1e-12<Math.abs(N-xe)&&0<--U);return U===0?(R=b-y,{azimuth:Math.atan2(Math.sin(R)*Math.cos(g),Math.cos(p)*Math.sin(g)-Math.sin(p)*Math.cos(g)*Math.cos(R)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos(b-y))}):(y=(p=27233160610754688e-5*pe/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(C*Math.sin(N),I*L-R*C*Math.cos(N)),TQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(se-y*K*(W+y/4*(j*(2*W*W-1)-y/6*W*(4*K*K-3)*(4*W*W-3)))),TY:Math.atan2(I*Math.sin(N),I*L*Math.cos(N)-R*C)})},u.eQ=function(p){var y=p.hasAttribute(1),g=p.hasAttribute(2),b=[],S=p.ea(),$=null,I=null;y&&($=p.vb(1)),g&&(I=p.vb(2));for(var C=new h.h,R=0;R<S;R++){for(var L=p.Ca(R),N=p.Ka(R),U=0,W=0,j=NaN,K=NaN,se=NaN,ne=NaN,pe=p.ec(R),he=[],xe=L;xe<L+N;xe++){p.D(xe,C),ne=se=NaN;var ke=[C.x,C.y];y&&(se=$.get(xe),ke.push(se)),g&&(S=I.get(xe),ke.push(ne)),xe==L&&pe&&(U=C.x,W=C.y,j=se,K=ne),he.push(ke)}!pe||U==C.x&&W==C.y&&(!y||isNaN(j)&&isNaN(se)||j==se)&&(!g||isNaN(K)&&isNaN(ne)||K==ne)||he.push(he[0].slice(0)),b.push(he)}return b},u.Ry=function(p,y){p=u.eQ(p),637.100877141506>y&&(y=637.100877141506);for(var g,b=[],S=0;S<p.length;S++){var $,I,C=p[S];b.push(g=[]),g.push([C[0][0],C[0][1]]);var R=C[0][0]*o,L=C[0][1]*o;for($=0;$<C.length-1;$++){var N=C[$+1][0]*o,U=C[$+1][1]*o;if(R!==N||L!==U){N=(U=u.HM(L,R,U,N)).azimuth;var W=(U=U.TQ)/y;if(1<W){for(I=1;I<=W-1;I++){var j=u.Ux(L,R,N,I*y);g.push([j.x,j.y])}I=u.Ux(L,R,N,(U+Math.floor(W-1)*y)/2),g.push([I.x,I.y])}L=u.Ux(L,R,N,U),g.push([L.x,L.y]),R=L.x*o,L=L.y*o}}}return{lJ:b}},u.SQ=function(p){for(var y=[],g=0;g<p.length;g++){var b=p[g];b=u.Ry(b,1e4),y.push(b)}p=[];for(var S=0;S<y.length;S++){b=y[S];var $=0;for(g=0;g<b.lJ.length;g++){var I,C=b.lJ[g],R=u.xu(h.h.construct(C[0][0],C[0][1])),L=u.xu(h.h.construct(C[C.length-1][0],C[C.length-1][1])),N=L.x*R.y-R.x*L.y;for(I=0;I<C.length-1;I++)R=u.xu(h.h.construct(C[I+1][0],C[I+1][1])),N+=(L=u.xu(h.h.construct(C[I][0],C[I][1]))).x*R.y-R.x*L.y;$+=N}$/=1,p.push($/-2)}return p},u}(),h.cb=function(){function u(){}return u.sB=function(p,y,g,b,S,$,I){u.bD[p.dc()]=y,isNaN(g)==0&&(u.hD[p.dc()]=g),isNaN(b)==0&&(u.uD[p.dc()]=b),isNaN(S)==0&&(u.WC[p.dc()]=S),u.iD[p.dc()]=$,I!==null&&(u.jD[p.dc()]=I)},u.Yw=function(p,y,g){u.nD[p.dc()+"-"+y.dc()]=g},u.tc=function(p){if((p=u.bD[p.dc()])==null)throw h.i.Fe();return p},u.bf=function(p){if((p=u.hD[p.dc()])==null)throw h.i.Fe();return p},u.xv=function(p){if((p=u.uD[p.dc()])==null)throw h.i.Fe();return p},u.gv=function(p){if((p=u.WC[p.dc()])==null)throw h.i.Fe();return p},u.ih=function(p){if((p=u.jD[p.dc()])==null)throw h.i.Fe();return h.l.construct(p[0],p[1],p[2],p[3])},u.Xc=function(p){if((p=u.iD[p.dc()])==null)throw h.i.Fe();return p},u.Bh=function(p,y,g){if(y.Nb(g))return p;var b=u.nD[y.dc()+"-"+g.dc()];if(b!==void 0)return b(p,y,g);throw h.i.Fe()},u.wt=function(){throw h.i.Fe()},u.XQ=function(){throw h.i.Fe()},u.ZV=function(){throw h.i.Fe()},u.ol=function(){throw h.i.Fe()},u.nW=function(){var p=h.Gg.create(102100),y=h.Gg.create(3857),g=h.Gg.create(4326);h.cb.sB(p,g,NaN,NaN,NaN,!1,null),h.cb.sB(g,g,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.sB(y,g,NaN,NaN,NaN,!1,null),h.cb.Yw(p,g,a),h.cb.Yw(g,p,n),h.cb.Yw(y,g,a),h.cb.Yw(g,y,n)},u.bD=[],u.hD=[],u.uD=[],u.WC=[],u.iD=[],u.jD=[],u.nD=[],u}()}(B||(B={})),B.cb.nW(),function(h){var O=function(){function w(c){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=c}return w.prototype.kd=function(c){c<this.Dl?(this.o[c*this.Mf]=this.ko,this.ko=c):this.Dl--,this.size--},w.prototype.U=function(c,a){return this.o[c*this.Mf+a]},w.prototype.T=function(c,a,n){this.o[c*this.Mf+a]=n},w.prototype.De=function(){var c=this.ko;if(c==-1){if(this.Dl==this.Jg){if(2147483647<(c=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(c=2147483647),c==this.Jg)throw h.i.de();this.yz(c)}c=this.Dl,this.Dl++}else this.ko=this.o[c*this.Mf];this.size++;for(var a=c*this.Mf;a<c*this.Mf+this.Mf;a++)this.o[a]=-1;return c},w.prototype.Nl=function(c){var a=this.ko;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw h.i.de();this.yz(a)}a=this.Dl,this.Dl++}else this.ko=this.o[a*this.Mf];this.size++;for(var n=a*this.Mf,o=0;o<c.length;o++)this.o[n+o]=c[o];return a},w.prototype.oj=function(c){this.ko=-1,this.size=this.Dl=0,c&&(this.o=null,this.Jg=0)},w.prototype.Ee=function(c){c>this.Jg&&this.yz(c)},w.prototype.sx=function(c,a){c*=this.Mf,a*=this.Mf;for(var n=0;n<this.Mf;n++){var o=this.o[a+n];this.o[a+n]=this.o[c+n],this.o[c+n]=o}},w.prototype.bC=function(c,a,n){var o=this.o[this.Mf*a+n];this.o[this.Mf*a+n]=this.o[this.Mf*c+n],this.o[this.Mf*c+n]=o},w.GG=function(c){return 0<=c},w.prototype.yz=function(c){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*c);a.set(this.o,0),this.o=a,this.Jg=c},w}();h.ad=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var c=function(){function n(o){this.Ce=o,this.Ah=NaN,this.$G=new h.jg,this.aH=new h.jg,this.os=new h.Oc,this.ps=new h.Oc}return n.prototype.compare=function(o,u,p){if(o=o.ka(p),this.Ce.kB(u,this.$G),this.Ce.kB(o,this.aH),u=this.$G.get(),o=this.aH.get(),this.os.L(u.ta,u.qa),this.ps.L(o.ta,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=u.oa==u.ma;var y=o.oa==o.ma;if(p||y){if(p&&y)return 0;if(u.oa==o.oa&&u.ta==o.ta)return p?1:-1;if(u.ma==o.ma&&u.qa==o.qa)return p?-1:1}return(p=u.Me(this.Ah,this.os.pa))==(y=o.Me(this.Ah,this.ps.pa))&&((y=.5*((p=Math.min(u.ma,o.ma))+this.Ah))==this.Ah&&(y=p),p=u.Me(y,this.os.pa),y=o.Me(y,this.ps.pa)),p<y?-1:p>y?1:0},n.prototype.WJ=function(o){this.Ah=o},n}(),a=function(){function n(o){this.ib=o,this.RH=new h.jg,this.Cf=new h.h,this.rA=new h.Oc}return n.prototype.fX=function(o){this.Cf.N(o)},n.prototype.compare=function(o,u){return this.ib.kB(o.ka(u),this.RH),o=this.RH.get(),this.rA.L(o.ta,o.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},n}();O=function(){function n(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new h.Nd,this.XN=2147483647,this.WN=h.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return n.prototype.ty=function(o){this.gA=o},n.prototype.$m=function(){this.he==null&&(this.he=new h.ad(8));var o=this.he.De();return this.he.T(o,1,0),o},n.prototype.qU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var u=this.Lc.De();return this.Lc.T(u,2,0),this.Lc.T(u,3,0),this.EJ(o,u),this.EJ(u,o),o},n.prototype.hI=function(){this.ze==null&&(this.ze=new h.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},n.prototype.OW=function(o,u){this.he.T(o,7,u)},n.prototype.on=function(o,u){this.he.T(o,2,u)},n.prototype.NW=function(o,u){this.he.T(o,1,u)},n.prototype.gX=function(o,u){this.he.T(o,3,u)},n.prototype.dX=function(o,u){this.he.T(o,4,u)},n.prototype.er=function(o,u){this.he.T(o,5,u)},n.prototype.$Q=function(o){return this.he.U(o,5)},n.prototype.MW=function(o,u){this.he.T(o,6,u)},n.prototype.YM=function(o,u){this.MW(u,o)},n.prototype.DJ=function(o,u){this.Lc.T(o,1,u)},n.prototype.EJ=function(o,u){this.Lc.T(o,4,u)},n.prototype.Vl=function(o,u){this.Lc.T(o,5,u)},n.prototype.Ul=function(o,u){this.Lc.T(o,6,u)},n.prototype.VW=function(o,u){this.Lc.T(o,2,u)},n.prototype.cx=function(o,u){this.Lc.T(o,3,u)},n.prototype.GF=function(o){return this.Lc.U(o,3)},n.prototype.Ht=function(o,u){this.Lc.T(o,7,u)},n.prototype.zK=function(o,u){if(this.om(o)!=-1)for(u=u?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,u)},n.prototype.xx=function(o,u){o!=-1&&(this.zK(o,u),this.zK(this.ya(o),u))},n.prototype.Et=function(o,u){this.ze.T(o,1,u)},n.prototype.Xg=function(o,u){this.ze.T(o,2,u)},n.prototype.ln=function(o,u){this.ze.T(o,3,u),this.IW(o,this.ZQ(u)),this.HW(u,o)},n.prototype.HW=function(o,u){this.ze.T(o,4,u)},n.prototype.IW=function(o,u){this.ze.T(o,5,u)},n.prototype.yJ=function(o,u){this.ze.T(o,6,u)},n.prototype.wJ=function(o,u){this.ze.T(o,7,u)},n.prototype.vJ=function(o,u){this.$n.write(o,u)},n.prototype.xJ=function(o,u){this.fA.write(o,u)},n.prototype.gY=function(o){var u=0,p=0,y=this.vF(o),g=new h.h,b=new h.h,S=new h.h;this.$r(y,g),b.N(g);var $=y;do this.nm($,S),p+=h.h.ub(b,S),this.$e(this.ya($))!=o&&(u+=(S.x-g.x-(b.x-g.x))*(S.y-g.y+(b.y-g.y))*.5),b.N(S),$=this.kc($);while($!=y);this.$n.write(o,u),this.fA.write(o,p)},n.prototype.KU=function(o,u){var p=new c(this),y=new h.$j;y.Ee(h.P.truncate(this.xa/2)),y.Xo(p);for(var g=new h.ja(0),b=this.bh(),S=null,$=0,I=new h.h,C=this.Oe;C!=-1;C=this.Tf(C)){if((255&++$)==0&&u!=null&&!u.progress(-1,-1))throw h.i.RC();var R=this.Je(C);if(R!=-1){if(g.Dh(0),!this.cY(y,b,g,R)){this.D(C,I),p.WJ(I.y);var L=R;do{var N=this.Bb(L,b);N!=-1&&(y.wd(N,-1),this.Kb(L,b,-2)),L=this.kc(this.ya(L))}while(R!=L);L=R;do(N=this.Bb(L,b))==-1&&(N=y.addElement(L,-1),g.add(N)),L=this.kc(this.ya(L));while(R!=L)}for(R=g.size-1;0<=R;R--)N=g.get(R),L=y.ka(N),this.Kb(this.ya(L),b,N),this.JU(y,N,o)}else this.Yy(C)==-1&&(S==null&&(S=new a(this)),this.D(C,I),S.fX(I),L=y.DW(S),R=this.Jl,L!=-1&&(N=y.ka(L),this.$e(N)==this.$e(this.ya(N))&&(N=this.JF(y,L)),N!=-1&&(R=this.$e(N))),this.YM(R,C))}this.Lg(b)},n.prototype.JU=function(o,u,p){var y=o.ka(u),g=this.$e(y);if(this.In(g)==-1){var b=this.JF(o,u),S=this.ya(y),$=this.$e(S);this.Mp(g),this.Mp($);var I=this.In(g),C=this.In($);if(b==-1&&I==-1&&($==g?(this.ln($,this.Jl),I=C=this.Jl):(C==-1&&(this.ln($,this.Jl),C=this.Jl),this.ln(g,$),I=$)),b!=-1){var R=this.$e(b);C==-1&&(0>=this.Mp(R)?(C=this.In(R),this.ln($,C)):(this.ln($,R),C=R),$==g&&(I=C))}I==-1&&this.dY(g,$),p==0?this.eW(o,u,y,b,g,$):p==5?this.fW(o,u,y,S,g,$):p==4&&this.dW(y,b,g,$)}},n.prototype.eW=function(o,u,p,y,g,b){var S=this.jk(g);if(y!=-1){var $=this.jk(b),I=this.jk(this.$e(y));y=S&$&I,I^=I&this.fh(p),(I|=y)!=0&&(this.Xg(b,$|I),this.Xg(g,I|S),S=S||I)}for(u=o.lb(u);u!=-1&&(y=o.ka(u),p=this.$e(this.ya(y)),g=this.jk(p),b=this.fh(y),$=this.$e(y),y=g&(I=this.jk($))&S,S^=S&b,(S|=y)!=0);u=o.lb(u))this.Xg(p,g|S),this.Xg($,I|S)},n.prototype.fW=function(o,u,p,y,g,b){if(g!=b){p=this.Bb(p,this.eg),p+=this.Bb(y,this.eg),y=0;var S=new h.ja(0),$=new h.ja(0);$.add(0);for(var I=o.sc(-1);I!=u;I=o.lb(I)){var C=o.ka(I),R=this.ya(C),L=this.$e(C),N=this.$e(R);if(L!=N){if(C=this.Bb(C,this.eg),y+=C+=this.Bb(R,this.eg),R=!1,S.size!=0&&S.Gc()==N&&($.Jf(),S.Jf(),R=!0),this.In(N)==-1)throw h.i.Ra();R&&this.In(N)==L||($.add(y),S.add(L))}}y+=p,S.size!=0&&S.Gc()==b&&($.Jf(),S.Jf()),y!=0?$.Gc()==0&&(o=this.g.md,o=this.Ma(o),this.Xg(g,o)):$.Gc()!=0&&(o=this.g.md,o=this.Ma(o),this.Xg(g,o))}},n.prototype.dW=function(o,u,p,y){var g=this.Ma(this.g.md);if(u==-1)this.Xg(y,this.Io),(1&(o=this.Bb(o,this.yg)))!=0?this.Xg(p,g):this.Xg(p,this.Io);else{var b=this.jk(y);b==0?(b=this.jk(this.$e(u)),this.Xg(y,b),(1&(o=this.Bb(o,this.yg)))!=0?this.Xg(p,b==g?this.Io:g):this.Xg(p,b)):(1&(o=this.Bb(o,this.yg)))!=0?this.Xg(p,b==g?this.Io:g):this.Xg(p,b)}},n.prototype.cY=function(o,u,p,y){var g=y,b=-1,S=-1,$=0;do{if($==2)return!1;var I=this.Bb(g,u);if(I!=-1){if(b!=-1)return!1;b=I}else{if(S!=-1)return!1;S=g}$++,g=this.kc(this.ya(g))}while(y!=g);return S!=-1&&b!=-1&&(this.Kb(o.ka(b),u,-2),o.Uj(b,S),p.add(b),!0)},n.prototype.dY=function(o,u){var p=this.Mp(o);if(p!=0){var y=this.Mp(u);0<p&&0>y||0>p&&0<y?this.ln(o,u):(u=this.In(u))!=-1&&this.ln(o,u)}},n.prototype.qP=function(o,u){this.Eq=this.g.Hd();for(var p=0,y=u.size;p<y;p++){var g=u.get(p),b=this.g.Qa(g,this.Em),S=this.g.Sf(this.g.cd(g)),$=this.g.jc(S);if(h.ba.Ic($)){var I=this.g.V(g);if(I!=-1){var C=this.g.Qa(I,this.Em);if(b!=C){var R=this.qU(),L=this.ya(R),N=this.lh.De();this.lh.T(N,0,g),this.lh.T(N,1,-1),this.Ht(R,N),this.DJ(R,b),(N=this.Je(b))==-1?(this.on(b,R),this.Vl(R,L),this.Ul(L,R)):(b=this.ue(N),this.Vl(N,L),this.Ul(L,N),this.Ul(b,R),this.Vl(R,b)),this.DJ(L,C),(b=this.Je(C))==-1?(this.on(C,L),this.Ul(R,L),this.Vl(L,R)):(C=this.ue(b),this.Vl(b,R),this.Ul(R,b),this.Ul(C,L),this.Vl(L,C)),S=this.Ma(S),o==0?(this.Kb(L,this.be,0),this.Kb(R,this.be,$==1736?S:0)):o==5?(C=new h.h,this.g.D(g,C),g=new h.h,this.g.D(I,g),b=I=0,0>C.compare(g)?I=1:b=-1,this.Kb(L,this.be,0),this.Kb(R,this.be,0),this.Kb(R,this.eg,I),this.Kb(L,this.eg,b)):o==7?(this.Kb(L,this.be,this.Io),this.Kb(R,this.be,$==1736?S:0)):o==4&&(this.Kb(L,this.be,0),this.Kb(R,this.be,0),this.Kb(R,this.yg,1),this.Kb(L,this.yg,1)),$=$==1736?this.WN:0,this.cx(R,S|$),this.cx(L,S|$)}}}}},n.prototype.QT=function(o,u){var p=this.om(u);if(p!=-1){var y=this.om(o);this.lh.T(p,1,y),this.Ht(o,p),this.Ht(u,-1)}o=this.ya(o),u=this.ya(u),(p=this.om(u))!=-1&&(y=this.om(o),this.lh.T(p,1,y),this.Ht(o,p),this.Ht(u,-1))},n.prototype.EX=function(o){function u(se,ne){return y.CO(se,ne)}var p=new h.ja(0);p.Jb(10);for(var y=this,g=this.Oe;g!=-1;g=this.Tf(g)){p.clear(!1);var b=this.Je(g);if(b!=-1){var S=b;do p.add(S),S=this.kc(this.ya(S));while(S!=b);if(1<p.size){if(S=!0,2<p.size)p.Wd(0,p.size,u),p.add(p.get(0));else if(0<this.BO(p.get(0),p.get(1))){var $=p.get(0);p.set(0,p.get(1)),p.set(1,$)}else S=!1;for(var I=$=p.get(0),C=this.vf(I),R=this.ya(I),L=-1,N=1,U=p.size;N<U;N++){var W=p.get(N),j=this.ya(W),K=this.lk(j);if(K==C&&W!=I){if(o==0)L=this.GF(I)|this.GF(W),this.cx(I,L),this.cx(R,L),this.Kb(I,this.be,this.Bb(I,this.be)|this.Bb(W,this.be)),this.Kb(R,this.be,this.Bb(R,this.be)|this.Bb(j,this.be));else if(this.eg!=-1)L=this.Bb(I,this.eg)+this.Bb(W,this.eg),j=this.Bb(R,this.eg)+this.Bb(j,this.eg),this.Kb(I,this.eg,L),this.Kb(R,this.eg,j);else{if(o==7)return void(this.Pi=new h.Nd(5,g,-1));this.yg!=-1&&(L=this.Bb(I,this.yg)+this.Bb(W,this.yg),j=this.Bb(R,this.yg)+this.Bb(j,this.yg),this.Kb(I,this.yg,L),this.Kb(R,this.yg,j))}this.QT(I,W),this.Gy(W),L=I,p.set(N,-1),W==$&&(p.set(0,-1),$=-1)}else this.xx(L,!1),L=-1,I=W,C=K,R=j}if(this.xx(L,!1),L=-1,S){for($=-1,N=0,U=p.size;N<U;N++)if((W=p.get(N))!=-1){if($==-1)I=$=W,C=this.vf(I),R=this.ya(I);else if(W!=I&&(j=this.ya(W),K=this.lk(j),this.Ul(R,W),this.Vl(W,R),I=W,C=K,R=j,o==7&&(this.Bb(W,this.be)|this.Bb(this.ue(W),this.be))==(1|this.Io)))return void(this.Pi=new h.Nd(5,g,-1))}this.on(g,$)}else{for($=-1,N=0,U=p.size;N<U;N++)if((W=p.get(N))!=-1){$=W;break}b!=$&&this.on(g,$)}}}}},n.prototype.RN=function(){for(var o=-1,u=this.bh(),p=this.Oe;p!=-1;p=this.Tf(p)){var y=this.Je(p);if(y!=-1){var g=y;do{if(this.Bb(g,u)!=1){var b=this.hI();this.Et(b,g),this.wJ(b,o),o!=-1&&this.yJ(o,b),o=b;var S=0,$=g;do S|=this.Bb($,this.be),this.VW($,b),this.Kb($,u,1),$=this.kc($);while($!=g);this.Xg(b,S)}g=this.kc(this.ya(g))}while(g!=y)}}b=this.hI(),this.Et(b,-1),this.wJ(b,o),o!=-1&&this.yJ(o,b),this.Jl=b,this.$n=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(u)},n.prototype.mR=function(o,u,p){if((u=u!=-1?u:this.Je(o))==-1)return-1;for(o=u;;){if(this.Bb(u,p)!=1)return u;if((u=this.kc(this.ya(u)))==o)return-1}},n.prototype.tW=function(){for(var o=this.bh(),u=this.Oe;u!=-1;u=this.Tf(u))for(var p=-1;;){var y=this.mR(u,p,o);if(y==-1)break;p=this.kc(this.ya(y));for(var g=y;;){var b=this.kc(g),S=this.ue(g),$=this.ya(g);if(S==$){if(this.DP(g),p!=g&&p!=$||(p=-1),g==y||S==y){if(g==(y=b)||S==y)break;g=b;continue}}else this.Kb(g,o,1);if((g=b)==y)break}}this.Lg(o)},n.prototype.HB=function(o,u,p,y,g){this.Wg(),this.bH=g,this.g=o,this.Dq=this.g.WE(),(o=new h.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var b=0,S=1,$=p!=null?p.get(0):this.g.md;for(g=1;$!=-1;){this.g.CJ($,this.Dq,S),S<<=1;for(var I=this.g.Ob($);I!=-1;I=this.g.Sb(I))for(var C=this.g.Ya(I),R=0,L=this.g.Ka(I);R<L;R++)o.add(C),C=this.g.V(C);h.ba.Tn(this.g.jc($))||(b+=this.g.ea($)),p!=null?($=g<p.size?p.get(g):-1,g++):$=this.g.ve($)}for(this.Io=S,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.he=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.op.Bp(y),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,b)),this.Em=this.g.Hd(),p=new h.h,g=0,b=new h.h,p.Sc(),S=0;S<=this.xa;S++)if(S<this.xa?(C=o.get(S),this.g.D(C,b)):b.Sc(),!p.rb(b)){if(g<S){for(C=this.$m(),L=R=-1;g<S;g++)L=o.get(g),this.g.Sa(L,this.Em,C),$=this.lh.De(),this.lh.T($,0,L),this.lh.T($,1,R),R=$,I=this.g.cd(L),$=this.g.Sf(I),$=this.Ma($),this.NW(C,this.yd(C)|$);this.OW(C,R),this.er(C,this.g.Va(L)),this.Qs!=-1&&this.dX(this.Qs,C),this.gX(C,this.Qs),this.Qs=C,this.Oe==-1&&(this.Oe=C)}g=S,p.N(b)}h.op.Bp(y),this.be=this.bh(),u==5&&(this.eg=this.bh()),u==4&&(this.yg=this.bh()),this.qP(u,o),this.Pi.Lj==0&&(this.EX(u),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(u,y))):this.kA=!0))},n.prototype.Gy=function(o){var u=this.kc(o),p=this.ue(o),y=this.ya(o),g=this.kc(y),b=this.ue(y);u!=y&&(this.Ul(b,u),this.Vl(u,b)),p!=y&&(this.Ul(p,g),this.Vl(g,p)),p=this.lk(o),this.Je(p)==o&&(g!=o?this.on(p,g):this.on(p,-1)),g=this.lk(y),this.Je(g)==y&&(u!=y?this.on(g,u):this.on(g,-1)),this.Lc.kd(o),this.Lc.kd(y)},n.prototype.JF=function(o,u){for(;;){if((u=o.xe(u))==-1)return-1;var p=o.ka(u);if(this.$e(p)!=this.$e(this.ya(p)))return p}},n.prototype.fr=function(o,u){var p;p===void 0&&(p=!0),this.HB(o,0,null,u,p)},n.prototype.qJ=function(o,u,p){var y=new h.ja(0);y.add(u),this.HB(o,4,y,p,o.jc(u)==1736)},n.prototype.rJ=function(o,u,p){var y=new h.ja(0);y.add(u),this.HB(o,5,y,p,!0)},n.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},n.prototype.Je=function(o){return this.he.U(o,2)},n.prototype.D=function(o,u){this.g.ZF(this.$Q(o),u)},n.prototype.yd=function(o){return this.he.U(o,1)},n.prototype.Tf=function(o){return this.he.U(o,4)},n.prototype.Yy=function(o){return this.he.U(o,6)},n.prototype.mm=function(o){return this.he.U(o,7)},n.prototype.ls=function(o){return this.lh.U(o,1)},n.prototype.vj=function(o){return this.lh.U(o,0)},n.prototype.og=function(o,u){return(u=this.Fi[u]).size<=o?-1:u.read(o)},n.prototype.pn=function(o,u,p){(u=this.Fi[u]).size<=o&&u.resize(this.he.size,-1),u.write(o,p)},n.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=h.ja.rf(this.he.Jg,-1),u=0,p=this.Fi.length;u<p;u++)if(this.Fi[u]==null)return this.Fi[u]=o,u;return this.Fi.push(o),this.Fi.length-1},n.prototype.Gp=function(o){this.Fi[o]=null},n.prototype.lk=function(o){return this.Lc.U(o,1)},n.prototype.vf=function(o){return this.lk(this.ya(o))},n.prototype.ya=function(o){return this.Lc.U(o,4)},n.prototype.ue=function(o){return this.Lc.U(o,5)},n.prototype.kc=function(o){return this.Lc.U(o,6)},n.prototype.$e=function(o){return this.Lc.U(o,2)},n.prototype.af=function(o){return this.jk(this.Lc.U(o,2))},n.prototype.om=function(o){return this.Lc.U(o,7)},n.prototype.$r=function(o,u){this.D(this.lk(o),u)},n.prototype.nm=function(o,u){this.D(this.vf(o),u)},n.prototype.fh=function(o){return this.Lc.U(o,3)&this.XN},n.prototype.Bb=function(o,u){return(u=this.Ii[u]).size<=o?-1:u.read(o)},n.prototype.Kb=function(o,u,p){(u=this.Ii[u]).size<=o&&u.resize(this.Lc.size,-1),u.write(o,p)},n.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=h.ja.rf(this.Lc.Jg,-1),u=0,p=this.Ii.length;u<p;u++)if(this.Ii[u]==null)return this.Ii[u]=o,u;return this.Ii.push(o),this.Ii.length-1},n.prototype.Lg=function(o){this.Ii[o]=null},n.prototype.DP=function(o){var u=this.$e(o),p=this.ya(o),y=this.kc(o);y==p&&(y=this.kc(y))==o&&(y=-1);var g=this.vF(u);g!==o&&g!=p||this.Et(u,y),p=this.$n.read(u),isNaN(p)||(this.vJ(u,NaN),this.xJ(u,NaN)),this.xx(o,!0),this.Gy(o)},n.prototype.EP=function(o){for(var u=0,p=o.size;u<p;u++){var y=o.get(u),g=this.$e(this.ya(y));this.Et(this.$e(y),-1),this.Et(g,-1),this.xx(y,!0),this.Gy(y)}},n.prototype.vF=function(o){return this.ze.U(o,1)},n.prototype.jk=function(o){return this.ze.U(o,2)},n.prototype.In=function(o){return this.ze.U(o,3)},n.prototype.ZQ=function(o){return this.ze.U(o,4)},n.prototype.Mp=function(o){var u=this.$n.read(o);return isNaN(u)&&(this.gY(o),u=this.$n.read(o)),u},n.prototype.Ma=function(o){return this.g.FF(o,this.Dq)},n.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},n.prototype.oR=function(o){return this.g.Qa(o,this.Eq)},n.prototype.nR=function(o,u){var p=this.Je(o);if(p==-1)return-1;var y=p,g=-1,b=-1;do{if(this.vf(y)==u)return y;if(g==-1){if((g=this.Je(u))==-1)break;b=g}if(this.vf(b)==o)return this.ya(b);y=this.kc(this.ya(y)),b=this.kc(this.ya(b))}while(y!=p&&b!=g);return-1},n.prototype.kB=function(o,u){u.Qr(),u=u.get();var p=new h.h;this.$r(o,p),u.Ec(p),this.nm(o,p),u.Rc(p)},n.prototype.CO=function(o,u){if(o==u)return 0;var p=new h.h;this.nm(o,p);var y=new h.h;return this.nm(u,y),p.rb(y)?0:(u=new h.h,this.$r(o,u),(o=new h.h).vc(p,u),(p=new h.h).vc(y,u),h.h.pu(o,p))},n.prototype.BO=function(o,u){if(o==u)return 0;var p=new h.h;this.nm(o,p);var y=new h.h;return this.nm(u,y),p.rb(y)?0:(u=new h.h,this.$r(o,u),(o=new h.h).vc(p,u),(p=new h.h).vc(y,u),0<=p.y&&0<o.y?h.h.pu(o,p):0)},n.prototype.sO=function(){for(var o=h.mc.ox(this.gA),u=new h.h,p=new h.h,y=new h.h,g=new h.h,b=new h.h,S=this.Oe;S!=-1;S=this.Tf(S)){var $=this.Je(S);if($!=-1){var I=$;this.$r(I,u),this.nm(I,p),b.vc(p,u);var C=b.Uk();do{var R=I;if((I=this.kc(this.ya(I)))!=R){this.nm(I,y),g.vc(y,u),R=g.Uk();var L=g.yi(b);if(L*L/(R*C)*Math.min(R,C)<=o)return!1;b.N(g),C=R,p.N(y)}}while(I!=$)}}return!0},n}(),h.ku=O}(B||(B={})),function(h){var O=function(){function w(){this.j=null,this.jH=new h.h,this.kH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return w.prototype.cf=function(c){return c<this.Ij.length&&this.Ij[c]},w.prototype.fl=function(c,a,n,o){var u=h.ba.uf(this.j.g.jc(n));if(h.ba.uf(this.j.g.jc(a))!=2||u!=1)throw h.i.Ra();this.AP(c,a,n,o)},w.prototype.fr=function(c,a){this.j==null&&(this.j=new h.ku),this.j.fr(c,a)},w.prototype.Gt=function(c,a,n){for(h.Vk.W(c,a,n,!0),a=c.md;a!=-1;a=c.ve(a))c.jc(a)==1736&&h.tn.W(c,a,-1,this.Ov,n);this.fr(c,n)},w.prototype.HE=function(c,a,n,o,u){var p=this.j.g;if(p.jc(c)==1736)for(c=p.Ob(c);c!=-1;c=p.Sb(c)){var y=p.Ya(c);this.j.Ie(y),this.j.Ie(p.V(y));var g=this.j.oR(y);if(g!=-1){var b=this.j.Bb(g,n);if(b!=1&&b!=2)if(this.cf(this.j.af(g))){this.j.Kb(g,n,1),b=p.wf(a,-1);var S=g,$=this.j.Ie(y),I=1;do{var C=this.um(y,u);p.kj(b,C),o!=-1&&this.j.pn($,o,1),this.j.Kb(S,n,1),S=this.j.kc(S);do var R=(C=I==1?p.V(y):p.Na(y))!=-1?this.j.Ie(C):-1;while(R==$);var L=this.j.lk(S);if(L!=R){do R=(C=I==1?p.Na(y):p.V(y))!=-1?this.j.Ie(C):-1;while(R==$);L!=R?(R=L,C=this.j.vj(this.j.mm(R))):I=-I}$=R,y=C}while(S!=g);p.mn(b,!0)}else this.j.Kb(g,n,2)}}},w.prototype.$E=function(){for(var c=this.j.bh(),a=new h.ja(0),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var o=this.j.Je(n),u=o;if(o!=-1)do{if(this.j.Bb(u,c)!=1){var p=this.j.ya(u);this.j.Kb(p,c,1),this.j.Kb(u,c,1),this.cf(this.j.af(u))&&this.cf(this.j.af(p))&&a.add(u)}u=this.j.kc(this.j.ya(u))}while(u!=o)}this.j.Lg(c),this.j.EP(a)},w.prototype.um=function(c,a){return a==-1?c:this.WR(c,a)},w.prototype.WR=function(c,a){var n=this.j.g,o=this.j.mm(this.j.Ie(c));do{var u=this.j.vj(o);if(n.Sf(n.cd(u))==a)return u;o=this.j.ls(o)}while(o!=-1);return c},w.prototype.Qt=function(c,a,n){this.$E();var o=this.j.g,u=o.Kg(1736),p=this.j.bh();return this.pK(c,a,u,n,p,-1),this.j.Lg(p),h.tn.W(o,u,1,this.Ov,null),u},w.prototype.pK=function(c,a,n,o,u,p){for(this.HE(c,n,u,p,o),a!=-1&&this.HE(a,n,u,p,o),c=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Tf(a)){var y=this.j.Je(a);if(y!=-1){var g=y;do{var b=this.j.Bb(g,u);if(b!=1&&b!=2)if(this.cf(this.j.af(g))){b=c.wf(n,-1);var S=g;do{var $=this.j.om(S);$!=-1?$=this.j.vj($):($=this.j.vj(this.j.om(this.j.ya(S))),$=this.j.g.V($)),$=this.um($,o),c.kj(b,$),this.j.Kb(S,u,1),p!=-1&&($=this.j.Ie($),this.j.pn($,p,1)),S=this.j.kc(S)}while(S!=g);c.mn(b,!0)}else this.j.Kb(g,u,2);g=this.j.kc(this.j.ya(g))}while(g!=y)}}},w.prototype.XX=function(c,a,n){var o=this.j.g,u=o.Kg(1736),p=o.Kg(1607),y=o.Kg(550);this.$E();var g=-1,b=this.j.bh(),S=this.j.Fp();for(this.pK(c,a,u,n,b,S),c=this.j.Oe;c!=-1;c=this.j.Tf(c))if((a=this.j.Je(c))!=-1){var $=a;do{var I=this.j.Bb($,b),C=this.j.Bb(this.j.ya($),b);if((I|=C)==2)if(I=this.j.fh($),this.cf(I)){var R=o.wf(p,-1),L=$;I=this.$w(c,o),I=this.um(I,n),o.kj(R,I),this.j.pn(c,S,1);do{if(I=this.j.vf(L),C=this.$w(I,o),C=this.um(C,n),o.kj(R,C),this.j.Kb(L,b,1),this.j.Kb(this.j.ya(L),b,1),this.j.pn(I,S,1),L=this.j.kc(L),I=this.j.Bb(L,b),(I|=C=this.j.Bb(this.j.ya(L),b))!=2)break;if(I=this.j.fh(L),!this.cf(I)){this.j.Kb(L,b,1),this.j.Kb(this.j.ya(L),b,1);break}}while(L!=$)}else this.j.Kb($,b,1),this.j.Kb(this.j.ya($),b,1);$=this.j.kc(this.j.ya($))}while($!=a)}for(c=this.j.Oe;c!=-1;c=this.j.Tf(c))(I=this.j.og(c,S))!=1&&(I=this.j.yd(c),this.cf(I)&&(g==-1&&(g=o.wf(y,-1)),(a=this.j.mm(c))!=-1&&(a=this.j.vj(a),I=this.um(a,n),o.kj(g,I))));return this.j.Gp(S),this.j.Lg(b),h.tn.W(o,u,1,this.Ov,null),(n=[])[0]=y,n[1]=p,n[2]=u,n},w.prototype.$w=function(c,a){var n=-1;for(c=this.j.mm(c);c!=-1;c=this.j.ls(c)){var o=this.j.vj(c);n==-1&&(n=o);var u=this.j.Ma(a.Sf(a.cd(o)));if(this.cf(u)){n=o;break}}return n},w.prototype.gB=function(c,a){for(var n=this.ll(a),o=this.j.lk(a),u=this.j.vf(a),p=0,y=0,g=this.j.mm(o);g!=-1;g=this.j.ls(g)){var b=this.j.vj(g),S=c.cd(b),$=this.j.Ma(c.Sf(S));S=c.Ya(S),($=($&n)!=0)&&S==b&&(this.vl=a);var I=c.V(b);I!=-1&&this.j.Ie(I)==u?(p++,$&&(this.vl===-1&&S==I&&(b=this.j.kc(a),this.cf(this.ll(b))&&(this.vl=b)),y++)):(b=c.Na(b))!=-1&&this.j.Ie(b)==u&&(p--,$&&(this.vl===-1&&S===b&&(b=this.j.kc(a),this.cf(this.ll(b))&&(this.vl=b)),y--))}return this.j.D(o,this.jH),this.j.D(u,this.kH),(y!=0?y:p)*(c=h.h.ub(this.jH,this.kH))},w.prototype.ll=function(c){return this.j.fh(c)|this.j.af(c)|this.j.af(this.j.ya(c))},w.prototype.sK=function(c){for(var a=this.j.ya(this.j.ue(c)),n=-1;a!=c;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.ue(a))}return n!=-1?this.j.ya(n):-1},w.prototype.tK=function(c){for(var a=this.j.ya(this.j.kc(c)),n=-1;a!=c;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.kc(a))}return n!=-1?this.j.ya(n):-1},w.prototype.hJ=function(c,a,n,o,u){var p=this.j.g,y=c,g=this.j.ya(y);this.j.Kb(y,n,1),this.j.Kb(g,n,1),this.vl=-1;for(var b=this.gB(p,y),S=y,$=-1,I=!1,C=1;;){var R=this.j.ue(y);if(R==g)break;if(g=this.j.kc(g),this.j.ya(R)!=g){if((y=this.sK(y))==-1){I=!0;break}g=this.j.ya(y)}else y=R;if(y==c){$=c;break}if(R=this.ll(y),!this.cf(R))break;this.j.Kb(y,n,1),this.j.Kb(g,n,1),S=y,b+=this.gB(p,y),C++}if($==-1)for(y=c,g=this.j.ya(y),$=y;(c=this.j.kc(y))!=g;){if(g=this.j.ue(g),this.j.ya(c)!=g){if((y=this.tK(y))==-1){I=!0;break}g=this.j.ya(y)}else y=c;if(R=this.ll(y),!this.cf(R))break;this.j.Kb(y,n,1),this.j.Kb(g,n,1),$=y,b+=this.gB(p,y),C++}else if(this.vl!=-1&&(S=this.vl,$=this.j.ue(this.vl),this.j.ya($)!=this.j.kc(this.j.ya(S))&&($=this.sK(S))==-1))throw h.i.Ra();for(0<=b||(y=$,$=this.j.ya(S),S=this.j.ya(y)),n=p.wf(a,-1),y=S,S=this.j.lk(S),I=this.j.vf($)==S&&I,b=this.$w(S,p),b=this.um(b,u),p.kj(n,b),o!=-1&&this.j.pn(S,o,1),S=0,C=I?h.P.truncate((C+1)/2):-1;c=this.j.vf(y),b=this.$w(c,p),b=this.um(b,u),p.kj(n,b),S++,o!=-1&&this.j.pn(c,o,1),I&&S==C&&(n=p.wf(a,-1),p.kj(n,b)),y!=$;)if(c=this.j.kc(y),this.j.ue(this.j.ya(y))!=this.j.ya(c)){if((y=this.tK(y))==-1)throw h.i.Ra()}else y=c},w.prototype.Rt=function(c){for(var a=this.j.g.Kg(1607),n=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var u=this.j.Je(o),p=u;do this.j.Bb(p,n)!=1&&this.cf(this.ll(p))&&this.hJ(p,a,n,-1,c),p=this.j.kc(this.j.ya(p));while(p!=u)}return this.j.Lg(n),a},w.prototype.YX=function(c){for(var a=this.j.g,n=a.Kg(1607),o=a.Kg(550),u=this.j.bh(),p=this.j.Fp(),y=-1,g=this.j.Oe;g!=-1;g=this.j.Tf(g)){var b=this.j.Je(g),S=b;do{var $=this.j.Bb(S,u);$!=1&&($=this.ll(S),this.cf($)&&this.hJ(S,n,u,p,c)),S=this.j.kc(this.j.ya(S))}while(S!=b)}for(g=this.j.Oe;g!=-1;g=this.j.Tf(g))($=this.j.og(g,p))!=1&&($=this.j.yd(g),this.cf($)&&(y==-1&&(y=a.wf(o,-1)),(b=this.j.mm(g))!=-1&&(b=this.j.vj(b),b=this.um(b,c),a.kj(y,b))));return this.j.Lg(u),this.j.Gp(p),(c=[])[0]=o,c[1]=n,c},w.prototype.pr=function(){for(var c=this.j.g,a=c.Kg(550),n=c.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Tf(o))if(this.cf(this.j.yd(o))){for(var u=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var y=this.j.vj(p);u==-1&&(u=y);var g=this.j.Ma(c.Sf(c.cd(y)));if(this.cf(g)){u=y;break}}c.kj(n,u)}return a},w.prototype.eq=function(c){this.Ij=[];for(var a=0;a<c;a++)this.Ij[a]=!1},w.WV=function(c,a,n){var o=c.Ja(),u=Array(1e3);h.P.bv(u,null);var p=h.P.mg(1e3,0),y=c.I(),g=!0,b=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw h.i.Ra();for(var S=0;S<y;){var $=h.P.truncate(c.gW(u,S)-S);b?h.jd.nK(a,u,$,n,p):h.jd.oK(a,u,$,n,p);for(var I=0,C=0;C<$;C++)p[C]==0&&(g&&(g=!1,o.Gd(c,0,S)),I!=C&&o.Gd(c,S+I,S+C),I=C+1);g||I==$||o.Gd(c,S+I,S+$),S+=$}return g?c:o},w.uG=function(c,a,n){return c instanceof h.ee?w.WV(c,a,n):a instanceof h.Ta?c.B()||a.B()?c.Ja():h.Vk.uU(n,c,a)?h.Vk.xO(c,a):c.Ja():w.XV(c,a,n)},w.Cv=function(c,a,n,o){var u=new h.l;c.A(u);var p=new h.l;a.A(p);var y=new h.l;if(y.L(u),y.$b(p),n=h.ua.Xd(n,y,!0),(y=new h.l).L(p),p=h.ua.Gr(n),y.X(p,p),!u.isIntersecting(y)){if(c.Eb()<=a.Eb())return w.mi(w.Ue(c.Ja()),c,"&");if(c.Eb()>a.Eb())return w.mi(w.Ue(a.Ja()),c,"&")}return p=new w,y=(u=new h.hd).Ib(w.Ue(c)),a=u.Ib(w.Ue(a)),p.Gt(u,n,o),o=p.Cv(y,a),c=w.mi(u.Ke(o),c,"&"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},w.XV=function(c,a,n){if(c.B()||a.B())return c.Ja();var o=[null],u=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw h.i.Ra();return o[0]=c.D(),p?h.jd.nK(a,o,1,n,u):h.jd.oK(a,o,1,n,u),u[0]==0?c.Ja():c},w.prototype.GU=function(c,a,n,o,u){if(c.B())return c;var p=new h.hd;return c=p.Ib(c),this.Ok(p,c,a,n,o,u)},w.prototype.IU=function(c,a,n,o,u,p){if(u&&c.jc(a)!=550){var y=new h.MC;y.PX(c,n),y.Pg?(h.Vk.W(c,n,p,!0),u=!1):this.j.ty(n)}else h.Vk.W(c,n,p,!0),u=!1;if(o&&c.jc(a)!=550?this.j.rJ(c,a,p):this.j.qJ(c,a,p),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(c,a,n,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,c.jc(a)==1736||o&&c.jc(a)!=550)return c.$o(a,0),a=this.Qt(a,-1,-1),(c=c.Ke(a)).$o(0),u?c.Eh(1,0):(c.Eh(2,n),c.hm()),c;if(c.jc(a)==1607)return a=this.Rt(-1),c=c.Ke(a),u||c.Eh(2,n),c;if(c.jc(a)==550)return a=this.pr(),c=c.Ke(a),u||c.Eh(2,n),c;throw h.i.Ra()},w.prototype.Ok=function(c,a,n,o,u,p){this.j=new h.ku;try{return this.IU(c,a,n,o,u,p)}finally{this.j.Wg()}},w.Ok=function(c,a,n,o,u){return new w().GU(c,a,n,o,u)},w.prototype.HU=function(c,a,n,o){this.Ov=c,this.j=new h.ku,c=a.Kn(n);var u=a.jc(n);if(c!=1||u==550?this.j.qJ(a,n,o):this.j.rJ(a,n,o),!this.j.kA)if(this.j.ty(NaN),o=this.j.Ma(n),this.eq(o+1),this.Ij[o]=!0,a.jc(n)==1736||c==1&&a.jc(n)!=550)a.$o(n,0),o=this.Qt(n,-1,-1),a.cC(o,n),a.wB(o);else if(a.jc(n)==1607)o=this.Rt(-1),a.cC(o,n),a.wB(o);else{if(a.jc(n)!=550)throw h.i.ga("internal error");o=this.pr(),a.cC(o,n),a.wB(o)}},w.prototype.km=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a));if(n>o)return c;var u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)]=!0,n==2&&o==2)return this.Qt(c,a,-1);if(n==1&&o==2||n==1&&o==1)return this.Rt(-1);if(n==0)return this.pr();throw h.i.Ra()},w.prototype.Cv=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=c),n==2&&o==2)return this.Qt(c,a,u);if(n==1&&0<o||o==1&&0<n)return this.Rt(u);if(n==0||o==0)return this.pr();throw h.i.Ra()},w.prototype.Kz=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=c),n==2&&o==2)return this.XX(c,a,u);if(n==1&&0<o||o==1&&0<n)return this.YX(u);if(n==0||o==0)return(c=[])[0]=this.pr(),c;throw h.i.Ra()},w.prototype.gp=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)]=!0,this.Ij[this.j.Ma(a)]=!0,n==2&&o==2)return this.Qt(c,a,-1);if(n==1&&o==1)return this.Rt(-1);if(n==0&&o==0)return this.pr();throw h.i.Ra()},w.Ue=function(c){var a=c.K();return a==197?(a=new h.Ea(c.description),c.B()||a.bd(c,!1),a):a==33?(a=new h.ee(c.description),c.B()||a.add(c),a):a==322?(a=new h.Ua(c.description),c.B()||a.pc(c,!0),a):c},w.mi=function(c,a,n){var o=c.K();return o==197?(a=new h.Ea(c.description),c.B()||a.bd(c,!1),a):o!=33||n!="|"&&n!="^"?o==322?(a=new h.Ua(c.description),c.B()||a.pc(c,!0),a):o==33&&n=="-"&&a.K()==33||o==550&&n=="&"&&a.K()==33?(a=new h.Ta(c.description),c.B()||c.we(0,a),a):c:(a=new h.ee(c.description),c.B()||a.add(c),a)},w.km=function(c,a,n,o){if(c.B()||a.B()||c.Eb()>a.Eb())return w.mi(w.Ue(c),c,"-");var u=new h.l;c.A(u);var p=new h.l;if(a.A(p),!u.isIntersecting(p))return w.mi(w.Ue(c),c,"-");var y=new h.l;return y.L(u),y.$b(p),n=h.ua.Xd(n,y,!0),p=new w,y=(u=new h.hd).Ib(w.Ue(c)),a=u.Ib(w.Ue(a)),p.Gt(u,n,o),o=p.km(y,a),o=u.Ke(o),c=w.mi(o,c,"-"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},w.QP=function(c,a,n){if(2>c.length)throw h.i.O("not enough geometries to dissolve");for(var o=0,u=0,p=c.length;u<p;u++)o=Math.max(c[u].Eb(),o);var y=new h.l;y.Pa();var g=new h.hd,b=-1,S=0,$=-1;for(u=0,p=c.length;u<p;u++)if(c[u].Eb()==o)if(c[u].B())$==-1&&($=u);else{$=u,b==-1?b=g.Ib(w.Ue(c[u])):g.pN(b,w.Ue(c[u]));var I=new h.l;c[u].yc(I),y.$b(I),S++}return 2>S?w.Ue(c[$]):(c=o==2,a=h.ua.Xd(o==0?a:null,y,!0),new w().Ok(g,b,a,c,!0,n))},w.Kz=function(c,a,n,o){var u=[null,null,null],p=new h.l;c.A(p);var y=new h.l;a.A(y);var g=new h.l;if(g.L(p),g.$b(y),n=h.ua.Xd(n,g,!0),(g=new h.l).L(y),y=h.ua.Gr(n),g.X(y,y),!p.isIntersecting(g)){if(c.Eb()<=a.Eb())return u[(c=w.mi(w.Ue(c.Ja()),c,"&")).Eb()]=c,u;if(c.Eb()>a.Eb())return u[(c=w.mi(w.Ue(a.Ja()),c,"&")).Eb()]=c,u}for(y=new w,g=(p=new h.hd).Ib(w.Ue(c)),a=p.Ib(w.Ue(a)),y.Gt(p,n,o),o=y.Kz(g,a),a=0;a<o.length;a++)y=w.mi(p.Ke(o[a]),c,"&"),h.ba.Ic(y.K())&&(y.Eh(2,n),y.K()==1736&&y.hm()),u[y.Eb()]=y;return u},w.gp=function(c,a,n,o){if(c.Eb()>a.Eb())return w.mi(w.Ue(c),c,"^");if(c.Eb()<a.Eb()||c.B())return w.mi(w.Ue(a),c,"^");if(a.B())return w.mi(w.Ue(c),c,"^");var u=new h.l;c.A(u);var p=new h.l;a.A(p);var y=new h.l;return y.L(u),y.$b(p),n=h.ua.Xd(n,y,!0),p=new w,y=(u=new h.hd).Ib(w.Ue(c)),a=u.Ib(w.Ue(a)),p.Gt(u,n,o),o=p.gp(y,a),c=w.mi(u.Ke(o),c,"^"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},w.prototype.GQ=function(c,a){var n=this.j.g;c=n.wf(c,-1);for(var o=a.size,u=0;u<o;u++){var p=a.get(u);n.kj(c,p)}n.mn(c,!0)},w.prototype.WW=function(c,a){for(var n=this.j.g,o=n.md;o!=-1;o=n.ve(o))if(o==a)for(var u=n.Ob(o);u!=-1;u=n.Sb(u)){var p=n.Ya(u);if(p!=-1)for(var y=n.V(p);y!=-1;){p=this.j.Ie(p);var g=this.j.Ie(y);(p=this.j.nR(p,g))!=-1&&(g=this.j.ya(p),this.j.Kb(p,c,1),this.j.Kb(g,c,2)),p=y,y=n.V(p)}}},w.prototype.YV=function(c,a,n,o){n=this.j.Ma(n),o=this.j.Ma(o);var u=new h.ja(0);u.Jb(256);for(var p=this.j.g,y=this.j.bh(),g=this.j.Oe;g!=-1;g=this.j.Tf(g)){var b=this.j.Je(g);if(b!=-1){var S=b;do{if(this.j.Bb(S,y)!=1){var $=S,I=S,C=!1,R=0;do{if(this.j.Kb($,y,1),!C){var L=this.j.fh($);(L&o)!=0&&(this.j.af($)&n)!=0&&(I=$,C=!0)}C&&(u.add(this.j.vj(this.j.mm(this.j.lk($)))),c!=-1&&((L=this.j.fh($))&o)!=0&&(R|=L=this.j.Bb($,c))),$=this.j.kc($)}while($!=I);C&&0<this.j.Mp(this.j.$e(I))&&($=p.Kg(1736),this.GQ($,u),a!=-1&&p.CJ($,a,R)),u.clear(!1)}S=this.j.kc(this.j.ya(S))}while(S!=b)}}this.j.Lg(y)},w.prototype.AP=function(c,a,n,o){this.j.tW();var u=-1;c!=-1&&(u=this.j.bh(),this.WW(u,n)),this.YV(u,c,a,n),u!=-1&&(this.j.Lg(u),u=-1);var p=this.j.g;for(c=0,u=p.md;u!=-1;u=p.ve(u))u!=a&&u!=n&&(o.add(u),c++);o.Wd(0,c,function(y,g){return(y=p.qz(p.Ob(y)))<(g=p.qz(p.Ob(g)))?-1:y==g?0:1})},w.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},w}();h.Hg=O}(B||(B={})),function(h){var O=function(){function w(c){c!==void 0?this.Jt(c):this.MB()}return w.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},w.prototype.Nb=function(c){return this==c||c instanceof w&&this.eb==c.eb&&this.jb==c.jb&&this.Lb==c.Lb&&this.qb==c.qb&&this.bb==c.bb&&this.Qb==c.Qb},w.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},w.prototype.Gh=function(c,a){var n=this.qb*c.x+this.bb*c.y+this.Qb;a.x=this.eb*c.x+this.jb*c.y+this.Lb,a.y=n},w.prototype.aY=function(c,a,n){for(var o=0;o<a;o++){var u=c[o].x,p=c[o].y,y=this.eb*u+this.jb*p+this.Lb;u=this.qb*u+this.bb*p+this.Qb,n[o]!=null?n[o].na(y,u):n[o]=h.h.construct(y,u)}},w.prototype.multiply=function(c){w.multiply(this,c,this)},w.multiply=function(c,a,n){var o=c.eb*a.eb+c.qb*a.jb,u=c.jb*a.eb+c.bb*a.jb,p=c.Lb*a.eb+c.Qb*a.jb+a.Lb,y=c.eb*a.qb+c.qb*a.bb,g=c.jb*a.qb+c.bb*a.bb;c=c.Lb*a.qb+c.Qb*a.bb+a.Qb,n.eb=o,n.jb=u,n.Lb=p,n.qb=y,n.bb=g,n.Qb=c},w.prototype.Qf=function(){var c=new w;return c.eb=this.eb,c.jb=this.jb,c.Lb=this.Lb,c.qb=this.qb,c.bb=this.bb,c.Qb=this.Qb,c},w.prototype.hC=function(c){if(!c.B()){for(var a=[],n=0;4>n;n++)a[n]=new h.h;c.iB(a),this.bY(a,a),c.bx(a,4)}},w.prototype.bY=function(c,a){for(var n=0;n<c.length;n++){var o=new h.h,u=c[n];o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.Qb,a[n]=o}},w.prototype.kS=function(c,a){c.B()||a.B()||c.S()==0||c.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/c.S(),this.bb=a.da()/c.da(),this.Lb=a.v-c.v*this.eb,this.Qb=a.G-c.G*this.bb)},w.prototype.$X=function(c){var a=new h.h,n=new h.h;a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.sub(a);var o=.5*a.Uk();return a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.add(n),c*(o>(a=.5*a.Uk())?Math.sqrt(o):Math.sqrt(a))},w.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},w.prototype.isIdentity=function(c){if(c!==void 0){var a=h.h.construct(0,1);return this.Gh(a,a),a.sub(h.h.construct(0,1)),a.Uk()>c*c?!1:(a.na(0,0),this.Gh(a,a),!(a.Uk()>c*c)&&(a.na(1,0),this.Gh(a,a),a.sub(h.h.construct(1,0)),a.Uk()<=c*c))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},w.prototype.Di=function(c){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*c*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},w.prototype.ig=function(c,a){this.eb=1,this.jb=0,this.Lb=c,this.qb=0,this.bb=1,this.Qb=a},w.prototype.Jt=function(c,a){a!==void 0?(this.eb=c,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(c,c)},w.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},w.prototype.kX=function(c){this.lX(Math.cos(c),Math.sin(c))},w.prototype.lX=function(c,a){this.eb=c,this.jb=-a,this.Lb=0,this.qb=a,this.bb=c,this.Qb=0},w.prototype.shift=function(c,a){this.Lb+=c,this.Qb+=a},w.prototype.scale=function(c,a){this.eb*=c,this.jb*=c,this.Lb*=c,this.qb*=a,this.bb*=a,this.Qb*=a},w.prototype.flipX=function(c,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=c+a-this.Lb},w.prototype.flipY=function(c,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=c+a-this.Qb},w.prototype.rotate=function(c){var a=new w;a.kX(c),this.multiply(a)},w.prototype.inverse=function(c){if(c!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?c.lx():(a=1/a,c.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,c.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,c.eb=this.bb*a,c.jb=-this.jb*a,c.qb=-this.qb*a,c.bb=this.eb*a)}else this.inverse(this)},w}();h.Ed=O}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},w.prototype.Jt=function(c,a){this.eb=c,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},w.prototype.translate=function(c,a,n){this.Lb+=c,this.Qb+=a,this.Cg+=n},w.prototype.hC=function(c){if(!c.B()){for(var a=new h.Od[8],n=0;8>n;n++)a[n]=new h.Od;c.iB(a),this.transform(a,8,a),c.bx(a)}},w.prototype.transform=function(c,a,n){for(var o=0;o<a;o++){var u=new h.Od,p=c[o];u.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,u.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,u.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,n[o]=u}},w.prototype.hp=function(c){var a=new h.Od;return a.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,a.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,a.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,a},w.prototype.Bg=function(c){w.multiply(this,c,this)},w.multiply=function(c,a,n){var o=c.eb*a.eb+c.qb*a.jb+c.pf*a.Ve,u=c.eb*a.qb+c.qb*a.bb+c.pf*a.We,p=c.eb*a.pf+c.qb*a.Ye+c.pf*a.Ze,y=c.jb*a.eb+c.bb*a.jb+c.Ye*a.Ve,g=c.jb*a.qb+c.bb*a.bb+c.Ye*a.We,b=c.jb*a.pf+c.bb*a.Ye+c.Ye*a.Ze,S=c.Ve*a.eb+c.We*a.jb+c.Ze*a.Ve,$=c.Ve*a.qb+c.We*a.bb+c.Ze*a.We,I=c.Ve*a.pf+c.We*a.Ye+c.Ze*a.Ze,C=c.Lb*a.eb+c.Qb*a.jb+c.Cg*a.Ve+a.Lb,R=c.Lb*a.qb+c.Qb*a.bb+c.Cg*a.We+a.Qb;c=c.Lb*a.pf+c.Qb*a.Ye+c.Cg*a.Ze+a.Cg,n.eb=o,n.qb=u,n.pf=p,n.jb=y,n.bb=g,n.Ye=b,n.Ve=S,n.We=$,n.Ze=I,n.Lb=C,n.Qb=R,n.Cg=c},w.inverse=function(c,a){var n=c.eb*(c.bb*c.Ze-c.Ye*c.We)-c.qb*(c.jb*c.Ze-c.Ye*c.Ve)+c.pf*(c.jb*c.We-c.bb*c.Ve);if(n==0)throw h.i.ga("math singularity");var o=1/n;n=(c.bb*c.Ze-c.Ye*c.We)*o;var u=-(c.jb*c.Ze-c.Ye*c.Ve)*o,p=(c.jb*c.We-c.bb*c.Ve)*o,y=-(c.qb*c.Ze-c.We*c.pf)*o,g=(c.eb*c.Ze-c.pf*c.Ve)*o,b=-(c.eb*c.We-c.qb*c.Ve)*o,S=(c.qb*c.Ye-c.pf*c.bb)*o,$=-(c.eb*c.Ye-c.pf*c.jb)*o;o*=c.eb*c.bb-c.qb*c.jb;var I=-(c.Lb*n+c.Qb*u+c.Cg*p),C=-(c.Lb*y+c.Qb*g+c.Cg*b);c=-(c.Lb*S+c.Qb*$+c.Cg*o),a.eb=n,a.qb=y,a.pf=S,a.jb=u,a.bb=g,a.Ye=$,a.Ve=p,a.We=b,a.Ze=o,a.Lb=I,a.Qb=C,a.Cg=c},w.prototype.Qf=function(){var c=new w;return c.eb=this.eb,c.qb=this.qb,c.pf=this.pf,c.jb=this.jb,c.bb=this.bb,c.Ye=this.Ye,c.Ve=this.Ve,c.We=this.We,c.Ze=this.Ze,c.Lb=this.Lb,c.Qb=this.Qb,c.Cg=this.Cg,c},w}();h.FY=O}(B||(B={})),function(h){var O=function(c){function a(n){if(n!==void 0)n=c.call(this,n.dc(),n)||this;else{(n=c.call(this)||this).dg=[],n.dg[0]=0,n.Ba=1,n.wh=[];for(var o=0;10>o;o++)n.wh[o]=-1;n.wh[n.dg[0]]=0}return n.lq=!0,n}return Fe(a,c),a.prototype.se=function(n){this.hasAttribute(n)||(this.wh[n]=0,this.eD())},a.prototype.removeAttribute=function(n){if(n==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(n)&&(this.wh[n]=-1,this.eD())},a.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var n=0;n<this.wh.length;n++)this.wh[n]=-1;this.wh[this.dg[0]]=0,this.lq=!0},a.prototype.zF=function(){return w.fz().add(this)},a.pg=function(){return w.fz().VR()},a.prototype.oM=function(){var n=this.dc();return new h.sa(n,this)},a.prototype.eD=function(){for(var n=this.Ba=0,o=0;10>n;n++)0<=this.wh[n]&&(this.dg[o]=n,this.wh[n]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},a.prototype.Nb=function(n){if(n==null)return!1;if(n==this)return!0;if(!(n instanceof a)||n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=n.dg[o])return!1;return this.lq==n.lq},a.prototype.BG=function(n){if(n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=n.dg[o])return!1;return!0},a.Kw=function(n,o){for(var u=[],p=0;p<n.Ba;p++)u[p]=-1;p=0;for(var y=n.Ba;p<y;p++)u[p]=o.Rf(n.ld(p));return u},a.wR=function(n,o){return(n=new a(n)).se(o),n.zF()},a.xR=function(n,o){for(var u=null,p=0;10>p;p++)!n.hasAttribute(p)&&o.hasAttribute(p)&&(u==null&&(u=new a(n)),u.se(p));return u!=null?u.zF():n},a}(h.sa);h.fe=O;var w=function(){function c(){this.map=[];var a=new O;this.add(a),(a=new O).se(1),this.add(a)}return c.fz=function(){return c.XK},c.prototype.VR=function(){return c.gt},c.prototype.add=function(a){var n=a.dc();if(c.gt!=null&&c.gt.dc()==n&&a.BG(c.gt))return c.gt;if(c.Fw!=null&&c.Fw.dc()==n&&a.BG(c.Fw))return c.Fw;var o=null;return this.map[n]!==void 0&&(o=this.map[n]),o==null&&((o=a.oM()).Ba==1?c.gt=o:o.Ba==2&&o.ld(1)==1?c.Fw=o:this.map[n]=o),o},c.XK=new c,c}()}(B||(B={}));var jt={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},$i={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Xt=new(function(){function h(){this.MM=50,this.pp=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.pp.clear()},h.prototype.delete=function(O){return!!this.pp.delete(O)&&(this.ij.splice(this.ij.indexOf(O),1),!0)},h.prototype.get=function(O){var w=this.pp.get(O);if(w!==void 0)return this.ij[0]!==O&&(this.ij.splice(this.ij.indexOf(O),1),this.ij.unshift(O)),w},h.prototype.has=function(O){return this.pp.has(O)},h.prototype.set=function(O,w){return this.get(O)!==void 0&&this.delete(O),this.ij.unshift(O),this.pp.set(O,w),this.jM(),this},h.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var O=this.ij.pop();this.pp.delete(O)}},h}()),Le=((Re={}).convertJSONToGeometry=function(h){return B.ac.aP(h)},Re.hasM=function(h){return h.hasAttribute(B.Kh.M)},Re.hasZ=function(h){return h.hasAttribute(B.Kh.Z)},Re.getPointX=function(h){return h.Ng()},Re.getPointY=function(h){return h.kh()},Re.getPointZ=function(h){return h.XR()},Re.getPointM=function(h){return h.uR()},Re.getXMin=function(h){return h.gs()},Re.getYMin=function(h){return h.js()},Re.getXMax=function(h){return h.fs()},Re.getYMax=function(h){return h.hs()},Re.getZExtent=function(h){return h.Vg(B.Kh.Z,0)},Re.getMExtent=function(h){return h.Vg(B.Kh.M,0)},Re.exportPaths=function(h){var O=[],w=h.ea(),c=null,a=null,n=h.hasAttribute(B.Kh.Z),o=h.hasAttribute(B.Kh.M);n&&(c=h.vb(B.Kh.Z)),o&&(a=h.vb(B.Kh.M));for(var u=new B.h,p=0;p<w;p++){for(var y=h.Ca(p),g=h.Ka(p),b=0,S=0,$=NaN,I=NaN,C=NaN,R=NaN,L=h.ec(p),N=[],U=y;U<y+g;U++){h.D(U,u),R=C=NaN;var W=[u.x,u.y];n&&(C=c.get(U),W.push(C)),o&&(R=a.get(U),W.push(R)),U==y&&L&&(b=u.x,S=u.y,$=C,I=R),N.push(W)}!L||b==u.x&&S==u.y&&(!n||isNaN($)&&isNaN(C)||$==C)&&(!o||isNaN(I)&&isNaN(R)||I==R)||N.push(N[0].slice(0)),O.push(N)}return O},Re.exportPathsFlat=function(){},Re.exportPoints=function(h){var O=h.hasAttribute(B.Kh.Z),w=h.hasAttribute(B.Kh.M),c=null,a=null;O&&(c=h.vb(B.Kh.Z)),w&&(a=h.vb(B.Kh.M));for(var n=new B.h,o=h.I(),u=[],p=0;p<o;p++){h.D(p,n);var y=[n.x,n.y];O&&y.push(c.get(p)),w&&y.push(a.get(p)),u.push(y)}return u},Re.exportPointsFlat=function(){},Re),xr=new Map;return function(){function h(){}return h.buffer=kt,h.clip=A,h.contains=F,h.convexHull=_e,h.crosses=D,h.cut=k,h.densify=pr,h.difference=Me,h.disjoint=re,h.distance=z,h.equals=H,h.extendedSpatialReferenceInfo=T,h.generalize=_i,h.geodesicArea=Ze,h.geodesicBuffer=ft,h.geodesicDensify=Rr,h.geodesicLength=yt,h.intersect=He,h.intersects=J,h.isSimple=me,h.nearestCoordinate=Ct,h.nearestVertex=Oi,h.nearestVertices=Ui,h.offset=Ot,h.overlaps=ee,h.planarArea=De,h.planarLength=ct,h.relate=le,h.simplify=we,h.symmetricDifference=Se,h.touches=Y,h.union=We,h.within=ie,h.rotate=B.Dx.rotate,h.flipHorizontal=B.Dx.EQ,h.flipVertical=B.Dx.FQ,h.intersectLinesToPoints=Ge,h.ExtendedParams=B.tC,h.clearDefaultSpatialReferenceTolerance=Te,h.changeDefaultSpatialReferenceTolerance=ye,h._enableProjection=ni,h._project=Nt,h._getTransformation=si,h._getTransformationBySuitability=Lt,h}()}var r=i();r!==void 0&&(e.exports=r)})(sE);const Zt=sE.exports,kMe=OMe({__proto__:null,default:Zt},[sE.exports]);var RMe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",G:Zt,g:kMe});const yi={convertToGEGeometry:FMe,exportPoint:LMe,exportPolygon:NMe,exportPolyline:jMe,exportMultipoint:DMe,exportExtent:VMe};function FMe(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function LMe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new dt({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(l.z=e.getPointZ(t)),s&&(l.m=e.getPointM(t)),l.cache._geVersion=t,l}function NMe(e,t,i){const r=new Dn({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function jMe(e,t,i){const r=new Kr({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function DMe(e,t,i){const r=new ag({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function VMe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new ai({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const f=e.getZExtent(t);l.zmin=f.vmin,l.zmax=f.vmax}if(s){const f=e.getMExtent(t);l.mmin=f.vmin,l.mmax=f.vmax}return l.cache._geVersion=t,l}var zMe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",hydratedAdapter:yi});function wi(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function GMe(e){return Zt.extendedSpatialReferenceInfo(e)}function qMe(e,t){return Zt.clip(yi,wi(e),e,t)}function UMe(e,t){return Zt.cut(yi,wi(e),e,t)}function BMe(e,t){return Zt.contains(yi,wi(e),e,t)}function HMe(e,t){return Zt.crosses(yi,wi(e),e,t)}function WMe(e,t,i){return Zt.distance(yi,wi(e),e,t,i)}function JMe(e,t){return Zt.equals(yi,wi(e),e,t)}function ZMe(e,t){return Zt.intersects(yi,wi(e),e,t)}function KMe(e,t){return Zt.touches(yi,wi(e),e,t)}function YMe(e,t){return Zt.within(yi,wi(e),e,t)}function XMe(e,t){return Zt.disjoint(yi,wi(e),e,t)}function QMe(e,t){return Zt.overlaps(yi,wi(e),e,t)}function e$e(e,t,i){return Zt.relate(yi,wi(e),e,t,i)}function t$e(e){return Zt.isSimple(yi,wi(e),e)}function i$e(e){return Zt.simplify(yi,wi(e),e)}function r$e(e,t=!1){return Zt.convexHull(yi,wi(e),e,t)}function n$e(e,t){return Zt.difference(yi,wi(e),e,t)}function s$e(e,t){return Zt.symmetricDifference(yi,wi(e),e,t)}function o$e(e,t){return Zt.intersect(yi,wi(e),e,t)}function a$e(e,t=null){return Zt.union(yi,wi(e),e,t)}function l$e(e,t,i,r,s,l){return Zt.offset(yi,wi(e),e,t,i,r,s,l)}function u$e(e,t,i,r=!1){return Zt.buffer(yi,wi(e),e,t,i,r)}function c$e(e,t,i,r,s,l){return Zt.geodesicBuffer(yi,wi(e),e,t,i,r,s,l)}function h$e(e,t,i=!0){return Zt.nearestCoordinate(yi,wi(e),e,t,i)}function p$e(e,t){return Zt.nearestVertex(yi,wi(e),e,t)}function d$e(e,t,i,r){return Zt.nearestVertices(yi,wi(e),e,t,i,r)}function oE(e){var t,i;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e&&(i=(t=e.extent)==null?void 0:t.center)!=null?i:null}function f$e(e,t,i){if(e==null)throw new ay;const r=e.spatialReference;if((i=i!=null?i:oE(e))==null)throw new ay;const s=e.constructor.fromJSON(Zt.rotate(e,t,i));return s.spatialReference=r,s}function y$e(e,t){if(e==null)throw new ay;const i=e.spatialReference;if((t=t!=null?t:oE(e))==null)throw new ay;const r=e.constructor.fromJSON(Zt.flipHorizontal(e,t));return r.spatialReference=i,r}function g$e(e,t){if(e==null)throw new ay;const i=e.spatialReference;if((t=t!=null?t:oE(e))==null)throw new ay;const r=e.constructor.fromJSON(Zt.flipVertical(e,t));return r.spatialReference=i,r}function m$e(e,t,i,r){return Zt.generalize(yi,wi(e),e,t,i,r)}function v$e(e,t,i){return Zt.densify(yi,wi(e),e,t,i)}function b$e(e,t,i,r=0){return Zt.geodesicDensify(yi,wi(e),e,t,i,r)}function w$e(e,t){return Zt.planarArea(yi,wi(e),e,t)}function _$e(e,t){return Zt.planarLength(yi,wi(e),e,t)}function x$e(e,t,i){return Zt.geodesicArea(yi,wi(e),e,t,i)}function S$e(e,t,i){return Zt.geodesicLength(yi,wi(e),e,t,i)}function M$e(e,t){return Zt.intersectLinesToPoints(yi,wi(e),e,t)}function $$e(e,t){Zt.changeDefaultSpatialReferenceTolerance(e,t)}function I$e(e){Zt.clearDefaultSpatialReferenceTolerance(e)}class ay extends Error{constructor(){super("Illegal Argument Exception")}}var VOe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",buffer:u$e,changeDefaultSpatialReferenceTolerance:$$e,clearDefaultSpatialReferenceTolerance:I$e,clip:qMe,contains:BMe,convexHull:r$e,crosses:HMe,cut:UMe,densify:v$e,difference:n$e,disjoint:XMe,distance:WMe,equals:JMe,extendedSpatialReferenceInfo:GMe,flipHorizontal:y$e,flipVertical:g$e,generalize:m$e,geodesicArea:x$e,geodesicBuffer:c$e,geodesicDensify:b$e,geodesicLength:S$e,intersect:o$e,intersectLinesToPoints:M$e,intersects:ZMe,isSimple:t$e,nearestCoordinate:h$e,nearestVertex:p$e,nearestVertices:d$e,offset:l$e,overlaps:QMe,planarArea:w$e,planarLength:_$e,relate:e$e,rotate:f$e,simplify:i$e,symmetricDifference:s$e,touches:KMe,union:a$e,within:YMe});let Va=class extends ot{constructor(){super(...arguments),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}};m([x({type:At})],Va.prototype,"outSpatialReference",void 0),m([x({type:ai})],Va.prototype,"processExtent",void 0),m([x({type:At})],Va.prototype,"processSpatialReference",void 0),m([x({nonNullable:!0})],Va.prototype,"returnFeatureCollection",void 0),m([x({nonNullable:!0})],Va.prototype,"returnM",void 0),m([x({nonNullable:!0})],Va.prototype,"returnZ",void 0),Va=m([X("esri.rest.geoprocessor.GPOptions")],Va),Va.from=Ai(Va);const T$e=Va;let za=class extends Ee{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};m([x({type:ai})],za.prototype,"extent",void 0),m([x()],za.prototype,"height",void 0),m([x()],za.prototype,"href",void 0),m([x()],za.prototype,"opacity",void 0),m([x()],za.prototype,"rotation",void 0),m([x()],za.prototype,"scale",void 0),m([x()],za.prototype,"visible",void 0),m([x()],za.prototype,"width",void 0),za=m([X("esri.layer.support.MapImage")],za);const WJ=za;let ib=class extends Ee{constructor(e){super(e),this.itemId=null,this.url=null}};m([x({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],ib.prototype,"itemId",void 0),m([x({type:String,json:{write:!0}})],ib.prototype,"url",void 0),ib=m([X("esri.rest.support.DataFile")],ib);const aE=ib,JJ=new bt({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});let rb=class extends Ee{constructor(e){super(e),this.distance=0,this.units=null}};m([x({json:{write:!0}})],rb.prototype,"distance",void 0),m([x({json:{read:JJ.read,write:JJ.write}})],rb.prototype,"units",void 0),rb=m([X("esri.rest.support.LinearUnit")],rb);const ZJ=rb,KJ=new bt({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});let nb=class extends Ee{constructor(e){super(e),this.dataType=null,this.value=null}};m([x({json:{read:KJ.read,write:KJ.write}})],nb.prototype,"dataType",void 0),m([x()],nb.prototype,"value",void 0),nb=m([X("esri.rest.support.ParameterValue")],nb);const E$e=nb;let ly=class extends Ee{constructor(e){super(e),this.format=null,this.itemId=null,this.url=null}};m([x()],ly.prototype,"format",void 0),m([x({json:{read:{source:"itemID"},write:{target:"itemID"}}})],ly.prototype,"itemId",void 0),m([x()],ly.prototype,"url",void 0),ly=m([X("esri.rest.support.RasterData")],ly);const YJ=ly;function XJ(e){const t=e.dataType,i=E$e.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return i;case"GPDate":i.value=new Date(i.value);break;case"GPDataFile":i.value=aE.fromJSON(i.value);break;case"GPLinearUnit":i.value=ZJ.fromJSON(i.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":{const r=e.value.url;i.value=r?aE.fromJSON(i.value):wh.fromJSON(i.value);break}case"GPRasterData":case"GPRasterDataLayer":{const r=e.value.mapImage;i.value=r?WJ.fromJSON(r):YJ.fromJSON(i.value);break}case"GPField":i.value=J0.fromJSON(i.value);break;case"GPMultiValue:GPDate":{const r=i.value;i.value=r.map(s=>new Date(s));break}case"GPMultiValue:GPDataFile":i.value=i.value.map(r=>aE.fromJSON(r));break;case"GPMultiValue:GPLinearUnit":i.value=i.value.map(r=>ZJ.fromJSON(r));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":i.value=i.value.map(r=>wh.fromJSON(r));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":i.value=i.value.map(r=>r?WJ.fromJSON(r):YJ.fromJSON(i.value));break;case"GPMultiValue:GPField":i.value=i.value.map(r=>J0.fromJSON(r))}return i}function lE(e,t,i){for(const r in e){const s=e[r];Array.isArray(s)?e[r]=JSON.stringify(s.map(l=>lE({item:l},!0).item)):s instanceof Date&&(e[r]=s.getTime())}return n7(e,t,i)}const QJ=new bt({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let sb=class extends Ee{constructor(e){super(e),this.description=null,this.type=null}};m([x({type:String,json:{write:!0}})],sb.prototype,"description",void 0),m([x({type:String,json:{read:QJ.read,write:QJ.write}})],sb.prototype,"type",void 0),sb=m([X("esri.rest.support.GPMessage")],sb);const C$e=sb;var n9;const A$e=new bt({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});let nf=n9=class extends Ee{constructor(e){super(e),this.jobId=null,this.jobStatus=null,this.messages=null,this.requestOptions=null,this.sourceUrl=null,this._timer=null}cancelJob(e){const{jobId:t,sourceUrl:i}=this,{path:r}=zr(i),s=je(te(te({},this.requestOptions),e),{query:{f:"json"}});return this._clearTimer(),li(`${r}/jobs/${t}/cancel`,s).then(l=>{const f=n9.fromJSON(l.data);return this.messages=f.messages,this.jobStatus=f.jobStatus,this})}destroy(){clearInterval(this._timer)}checkJobStatus(e){const{path:t}=zr(this.sourceUrl),i=je(te(te({},this.requestOptions),e),{query:{f:"json"}}),r=`${t}/jobs/${this.jobId}`;return li(r,i).then(({data:s})=>{const l=n9.fromJSON(s);return this.messages=l.messages,this.jobStatus=l.jobStatus,this})}fetchResultData(e,t,i){t=T$e.from(t||{});const{returnFeatureCollection:r,returnM:s,returnZ:l,outSpatialReference:f}=t,{path:d}=zr(this.sourceUrl),v=lE({returnFeatureCollection:r,returnM:s,returnZ:l,outSR:f,returnType:"data",f:"json"},null),_=je(te(te({},this.requestOptions),i),{query:v}),M=`${d}/jobs/${this.jobId}/results/${e}`;return li(M,_).then(T=>XJ(T.data))}fetchResultImage(e,t,i){const{path:r}=zr(this.sourceUrl),s=je(te({},t.toJSON()),{f:"json"}),l=lE(s),f=je(te(te({},this.requestOptions),i),{query:l}),d=`${r}/jobs/${this.jobId}/results/${e}`;return li(d,f).then(v=>XJ(v.data))}async fetchResultMapImageLayer(){const{path:e}=zr(this.sourceUrl),t=e.indexOf("/GPServer/"),i=`${e.substring(0,t)}/MapServer/jobs/${this.jobId}`;return new(await Promise.resolve().then(function(){return j$e})).default({url:i})}async waitForJobCompletion(e={}){const{interval:t=1e3,signal:i,statusCallback:r}=e;return new Promise((s,l)=>{Eo(i,()=>{this._clearTimer(),l(zi())}),this._clearTimer();const f=setInterval(()=>{this._timer||l(zi()),this.checkJobStatus(this.requestOptions).then(d=>{const{jobStatus:v}=d;switch(this.jobStatus=v,v){case"job-succeeded":this._clearTimer(),s(this);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":r&&r(this);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":this._clearTimer(),l(this)}})},t);this._timer=f})}_clearTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}};m([x()],nf.prototype,"jobId",void 0),m([x({json:{read:A$e.read}})],nf.prototype,"jobStatus",void 0),m([x({type:[C$e]})],nf.prototype,"messages",void 0),m([x()],nf.prototype,"requestOptions",void 0),m([x({json:{write:!0}})],nf.prototype,"sourceUrl",void 0),nf=n9=m([X("esri.rest.support.JobInfo")],nf);class s9{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new fe(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new s9(this.major,this.minor,this._context)}static parse(t,i=""){const[r,s]=t.split("."),l=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(l))throw new fe((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(l))throw new fe((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const f=parseInt(r,10),d=parseInt(s,10);return new s9(f,d,i)}}const P$e=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesPromise=null,this._allLayersAndTablesMap=null}readCapabilities(i,r){var J,Y;const s=r.capabilities&&r.capabilities.split(",").map(ie=>ie.toLowerCase().trim());if(!s)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const l=this.type,f=s.includes("data"),d=s.includes("query"),v=s.includes("map"),_=!!r.exportTilesAllowed,M=s.includes("tilemap"),T=l!=="tile"&&!!r.supportsDynamicLayers,A=l!=="tile"&&(!r.tileInfo||T),k=l!=="tile"&&(!r.tileInfo||T),F=l!=="tile",D=r.cimVersion&&s9.parse(r.cimVersion),z=(J=D==null?void 0:D.since(1,4))!=null?J:!1,H=(Y=D==null?void 0:D.since(2,0))!=null?Y:!1;return{operations:{supportsExportMap:v,supportsExportTiles:_,supportsIdentify:d,supportsQuery:f,supportsTileMap:M},exportMap:v?{supportsArcadeExpressionForLabeling:z,supportsSublayersChanges:F,supportsDynamicLayers:T,supportsSublayerVisibility:A,supportsSublayerDefinitionExpression:k,supportsCIMSymbols:H}:null,exportTiles:_?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),s}async fetchSublayerInfo(i,r){var s;return await this.fetchAllLayersAndTables(r),(s=this._allLayersAndTablesMap)==null?void 0:s.get(i)}async fetchAllLayersAndTables(i){await this.load(i),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=li(gn(this.url).path+"/layers",{responseType:"json",query:je(te({f:"json"},this.customParameters),{token:this.apiKey})}).then(s=>{this._allLayersAndTablesMap=new Map;for(const l of s.data.layers)this._allLayersAndTablesMap.set(l.id,l);return{result:s.data}},s=>({error:s})));const r=await this._allLayersAndTablesPromise;if(fr(i),"result"in r)return r.result;throw r.error}};return m([x({readOnly:!0})],t.prototype,"capabilities",void 0),m([Be("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),m([x({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),m([x({type:ai})],t.prototype,"fullExtent",void 0),m([x(KG)],t.prototype,"id",void 0),m([x({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),m([x(D_)],t.prototype,"popupEnabled",void 0),m([x({type:At})],t.prototype,"spatialReference",void 0),m([x({readOnly:!0})],t.prototype,"version",void 0),m([Be("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=m([X("esri.layers.mixins.ArcGISMapService")],t),t};var o9;function uE(e){return e&&e.type==="esriSMS"}function cE(e,t,i){var s;const r=this.originIdOf(t)>=Ss(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&((s=i.layer)==null?void 0:s.type)==="map-image"&&(i.writeSublayerStructure||r)}}function eZ(e,t,i){var r;return{enabled:!!i&&((r=i.layer)==null?void 0:r.type)==="tile"&&this._isOverridden(t)}}function ea(e,t,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function a9(e,t,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(t)>=Ss(i.origin))}}let O$e=0;const sf=new Set;sf.add("layer"),sf.add("parent"),sf.add("loaded"),sf.add("loadStatus"),sf.add("loadError"),sf.add("loadWarnings");let Ft=o9=class extends _a(A_(o0(hl))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var i,r;if(!this.layer&&!this.url)throw new fe("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let t=null;if(!this.layer||this.originIdOf("url")>nt.SERVICE||((i=this.source)==null?void 0:i.type)==="data-layer")t=(await li(this.url,te({responseType:"json",query:{f:"json"}},e))).data;else{let s=this.id;((r=this.source)==null?void 0:r.type)==="map-layer"&&(s=this.source.mapLayerId),t=await this.layer.fetchSublayerInfo(s,e)}t&&(this.sourceJSON=t,this.read({layerDefinition:t},{origin:"service"}))})()),this}readCapabilities(e,t){const i=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(l=>l.trim()):[],r=this.url?Od(this.url):null,s=i.includes(q(r)&&r.serverType==="MapServer"?"data":"query");return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:s}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new Oq(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){const e=this._get("id");return e!=null?e:O$e++}set id(e){this._get("id")!==e&&(this.get("layer.capabilities.exportMap.supportsDynamicLayers")!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,i,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(s=>s.write({},r))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const i=t.layerDefinition;return 1-.01*(i.transparency!=null?i.transparency:i.drawingInfo.transparency)}writeOpacity(e,t,i,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=aw(this.parent.id):t.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e){for(const t of e.getSymbols())if(Zp(t)){Pe.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Su({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Ai(gt.ofType(o9),e)}writeSublayers(e,t,i){this.get("sublayers.length")&&(t[i]=this.sublayers.map(r=>r.id).toArray().reverse())}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){var r,s;const e=(s=(r=this.layer)==null?void 0:r.parsedUrl)!=null?s:this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,(t==null?void 0:t.type)==="map-layer")return`${e.path}/${t.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${f0(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,i,r){t[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Nr(this),t=new o9;return Nr(t).store=e.clone(sf),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return Nq(this,e)}createQuery(){return new Hn({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var i,r;if(this.hasOwnProperty("sublayers"))return null;const e=(i=this.layer)==null?void 0:i.parsedUrl,t=new(await Promise.resolve().then(function(){return w3e})).default({url:e.path});return e&&this.source&&(this.source.type==="map-layer"?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),this.layer.refreshInterval!=null&&(t.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.floorInfo&&(t.floorInfo=ve(this.floorInfo)),this.originIdOf("labelingInfo")>nt.SERVICE&&(t.labelingInfo=ve(this.labelingInfo)),this.originIdOf("labelsVisible")>nt.DEFAULTS&&(t.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>nt.DEFAULTS&&(t.legendEnabled=this.legendEnabled),this.originIdOf("visible")>nt.DEFAULTS&&(t.visible=this.visible),this.originIdOf("minScale")>nt.DEFAULTS&&(t.minScale=this.minScale),this.originIdOf("maxScale")>nt.DEFAULTS&&(t.maxScale=this.maxScale),this.originIdOf("opacity")>nt.DEFAULTS&&(t.opacity=this.opacity),this.originIdOf("popupTemplate")>nt.DEFAULTS&&(t.popupTemplate=ve(this.popupTemplate)),this.originIdOf("renderer")>nt.SERVICE&&(t.renderer=ve(this.renderer)),((r=this.source)==null?void 0:r.type)==="data-layer"&&(t.dynamicDataSource=this.source.clone()),this.originIdOf("title")>nt.DEFAULTS&&(t.title=this.title),this.layer.type==="map-image"&&this.layer.originIdOf("customParameters")>nt.DEFAULTS&&(t.customParameters=this.layer.customParameters),this.layer.type==="tile"&&this.layer.originIdOf("customParameters")>nt.DEFAULTS&&(t.customParameters=this.layer.customParameters),t}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i.some(l=>{const{id:f}=l;return f!=null&&(f.toString()===r.toString()&&(s=l),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),t){var f,d,v,_,M,T;if(await this.load(),!((d=(f=this.capabilities)==null?void 0:f.operations)==null?void 0:d.supportsQuery))throw new fe("Sublayer.queryFeatures","this layer doesn't support queries.");const[{executeQuery:i},{default:r}]=await Promise.all([Promise.resolve().then(function(){return Ome}),Promise.resolve().then(function(){return kme})]),s=await i(this.url,Hn.from(e),(_=(v=this.layer)==null?void 0:v.spatialReference)!=null?_:null,je(te({},t),{query:je(te({},(M=this.layer)==null?void 0:M.customParameters),{token:(T=this.layer)==null?void 0:T.apiKey})})),l=r.fromJSON(s.data);if(l==null?void 0:l.features)for(const A of l.features)A.sourceLayer=this;return l}toExportImageJSON(e){var l;const t={id:this.id,source:((l=this.source)==null?void 0:l.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=P_(e,this.definitionExpression);q(i)&&(t.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((f,d)=>(f[d]=this.originIdOf(d),f),{});if(Object.keys(r).some(f=>r[f]>nt.SERVICE)){const f=t.drawingInfo={};if(r.renderer>nt.SERVICE&&(f.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>nt.SERVICE&&(f.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>nt.SERVICE){!this.loaded&&this.labelingInfo.some(v=>!v.labelPlacement)&&Pe.getLogger(this.declaredClass).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let d=this.labelingInfo;q(this.geometryType)&&(d=n3e(this.labelingInfo,Jw.toJSON(this.geometryType))),f.labelingInfo=d.filter(v=>v.labelPlacement).map(v=>v.toJSON({origin:"service",layer:this.layer})),f.showLabels=!0}r.opacity>nt.SERVICE&&(f.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(f.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const i="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const r of i)uE(r.symbol)&&t(r.symbol);"symbol"in e&&uE(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&uE(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const i=this.layer,r=this._get(e);let s,l;switch(e){case"definitionExpression":case"floorInfo":s="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":s="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":s="supportsDynamicLayers",l="supportsModification"}const f=Nr(this).getDefaultOrigin();if(f!=="service"){if(s&&this.get(`layer.capabilities.exportMap.${s}`)===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${s}'`);if(l&&this.get(`capabilities.exportMap.${l}`)===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${l}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),f!=="service"&&r!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{const r=this.get("layer.capabilities.exportMap.supportsSublayersChanges");r==null||r||(Pe.getLogger(this.declaredClass).error(new fe("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,t){Pe.getLogger(this.declaredClass).error(new fe("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};Ft.test={isMapImageLayerOverridePolicy:e=>e===ea||e===cE,isTileImageLayerOverridePolicy:e=>e===eZ},m([x({readOnly:!0})],Ft.prototype,"capabilities",void 0),m([Be("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Ft.prototype,"readCapabilities",null),m([x({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:cE}}})],Ft.prototype,"definitionExpression",null),m([x({type:[J0],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Ft.prototype,"fields",void 0),m([x({readOnly:!0})],Ft.prototype,"fieldsIndex",null),m([x({type:iq,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:cE},origins:{"web-scene":{read:!1,write:!1}}}})],Ft.prototype,"floorInfo",null),m([x({type:ai,json:{read:{source:"layerDefinition.extent"}}})],Ft.prototype,"fullExtent",void 0),m([x({type:Jw.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:Jw.read}}}}})],Ft.prototype,"geometryType",void 0),m([x({type:String})],Ft.prototype,"globalIdField",void 0),m([Be("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ft.prototype,"readGlobalIdFieldFromService",null),m([x({type:hi,json:{write:{ignoreOrigin:!0}}})],Ft.prototype,"id",null),m([x({value:null,type:[hv],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ea}}})],Ft.prototype,"labelingInfo",null),m([Xe("labelingInfo")],Ft.prototype,"writeLabelingInfo",null),m([x({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ea}}})],Ft.prototype,"labelsVisible",null),m([x({value:null})],Ft.prototype,"layer",null),m([x({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:a9}}})],Ft.prototype,"legendEnabled",void 0),m([x({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ft.prototype,"listMode",null),m([x({type:Number,value:0,json:{write:{overridePolicy:ea}}})],Ft.prototype,"minScale",null),m([Be("minScale",["minScale","layerDefinition.minScale"])],Ft.prototype,"readMinScale",null),m([x({type:Number,value:0,json:{write:{overridePolicy:ea}}})],Ft.prototype,"maxScale",null),m([Be("maxScale",["maxScale","layerDefinition.maxScale"])],Ft.prototype,"readMaxScale",null),m([x({readOnly:!0})],Ft.prototype,"effectiveScaleRange",null),m([x({type:String})],Ft.prototype,"objectIdField",void 0),m([Be("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ft.prototype,"readObjectIdFieldFromService",null),m([x({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ea}}})],Ft.prototype,"opacity",null),m([Be("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Ft.prototype,"readOpacity",null),m([Xe("opacity")],Ft.prototype,"writeOpacity",null),m([x({json:{type:hi,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:ea}}})],Ft.prototype,"parent",void 0),m([Xe("parent")],Ft.prototype,"writeParent",null),m([x({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:a9,writer(e,t,i){t[i]=!e}}}})],Ft.prototype,"popupEnabled",void 0),m([x({type:l0,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:a9}}})],Ft.prototype,"popupTemplate",void 0),m([x({readOnly:!0})],Ft.prototype,"defaultPopupTemplate",null),m([x({types:rv,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ea},origins:{"web-scene":{types:fG,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ea}}}}})],Ft.prototype,"renderer",null),m([x({types:{key:"type",base:null,typeMap:{"data-layer":uo,"map-layer":Su}},cast(e){if(e){if("mapLayerId"in e)return Vf(Su,e);if("dataSource"in e)return Vf(uo,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:ea}}})],Ft.prototype,"source",null),m([x()],Ft.prototype,"sourceJSON",void 0),m([x({value:null,json:{type:[hi],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ea}}})],Ft.prototype,"sublayers",null),m([ri("sublayers")],Ft.prototype,"castSublayers",null),m([Xe("sublayers")],Ft.prototype,"writeSublayers",null),m([x({type:String,json:{name:"name",write:{overridePolicy:a9}}})],Ft.prototype,"title",void 0),m([x({type:String})],Ft.prototype,"typeIdField",void 0),m([Be("typeIdField",["layerDefinition.typeIdField"])],Ft.prototype,"readTypeIdField",null),m([x({type:[g8],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Ft.prototype,"types",void 0),m([x({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:eZ}}})],Ft.prototype,"url",null),m([x({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ea}}})],Ft.prototype,"visible",null),m([Xe("visible")],Ft.prototype,"writeVisible",null),Ft=o9=m([X("esri.layers.support.Sublayer")],Ft);const l9=Ft,k$e=Pe.getLogger("esri.layers.TileLayer");function R$e(e,t){const i=[],r={};return e&&e.forEach(s=>{const l=new l9;if(l.read(s,t),r[l.id]=l,s.parentLayerId!=null&&s.parentLayerId!==-1){const f=r[s.parentLayerId];f.sublayers||(f.sublayers=[]),f.sublayers.unshift(l)}else i.unshift(l)}),i}const hE=gt.ofType(l9);function tZ(e,t){e&&e.forEach(i=>{t(i),i.sublayers&&i.sublayers.length&&tZ(i.sublayers,t)})}const F$e=e=>{let t=class extends e{constructor(...i){super(...i),this.allSublayers=new I0({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[nt.SERVICE]:{},[nt.PORTAL_ITEM]:{},[nt.WEB_SCENE]:{},[nt.WEB_MAP]:{}},this.addHandles(Ve(()=>this.sublayers,(r,s)=>this._handleSublayersChange(r,s),bl))}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:s}=this,l=Ss(r.origin);if(l<nt.SERVICE||(s[l]={context:r,visibleLayers:i.visibleLayers||s[l].visibleLayers,layers:i.layers||s[l].layers},l>nt.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:f,origin:d}=this.createSublayersForOrigin("web-document"),v=Nr(this);v.setDefaultOrigin(d),this._set("sublayers",new hE(f)),v.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=Ss(i==="web-document"?"web-map":i);let s=nt.SERVICE,l=this.sublayersSourceJSON[nt.SERVICE].layers,f=this.sublayersSourceJSON[nt.SERVICE].context,d=null;const v=[nt.PORTAL_ITEM,nt.WEB_SCENE,nt.WEB_MAP].filter(F=>F<=r);for(const F of v){const D=this.sublayersSourceJSON[F];O4e(D.layers)&&(s=F,l=D.layers,f=D.context,D.visibleLayers&&(d={visibleLayers:D.visibleLayers,context:D.context}))}const _=[nt.PORTAL_ITEM,nt.WEB_SCENE,nt.WEB_MAP].filter(F=>F>s&&F<=r);let M=null;for(const F of _){const{layers:D,visibleLayers:z,context:H}=this.sublayersSourceJSON[F];D&&(M={layers:D,context:H}),z&&(d={visibleLayers:z,context:H})}const T=R$e(l,f),A=new Map,k=new Set;if(M)for(const F of M.layers)A.set(F.id,F);if(d)for(const F of d.visibleLayers)k.add(F);return tZ(T,F=>{M&&F.read(A.get(F.id),M.context),d&&F.read({defaultVisibility:k.has(F.id)},d.context)}),{origin:Yy(s),sublayers:new hE({items:T})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(s=>{s.parent=null,s.layer=null}),this.handles.remove("sublayers-owner")),i&&(i.forEach(s=>{s.parent=this,s.layer=this}),this.handles.add([i.on("after-add",({item:s})=>{s.parent=this,s.layer=this}),i.on("after-remove",({item:s})=>{s.parent=null,s.layer=null})],"sublayers-owner"),this.type==="tile"&&this.handles.add(i.on("before-changes",s=>{k$e.error(new fe("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),s.preventDefault()}),"sublayers-owner"))}};return m([x({readOnly:!0})],t.prototype,"allSublayers",void 0),m([x({readOnly:!0,type:gt.ofType(l9)})],t.prototype,"serviceSublayers",void 0),m([x({value:null,type:hE,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),m([x({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=m([X("esri.layers.mixins.SublayersOwner")],t),t},L$e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let wo=class extends _a(ot){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const i=kx(this.floors,t);return t.toExportImageJSON(i)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&GH(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(L$e[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){var i;const e=!!((i=this.floors)==null?void 0:i.length),t=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return t.length?JSON.stringify(t.reduce((r,s)=>{const l=kx(this.floors,s),f=P_(l,s.definitionExpression);return q(f)&&(r[s.id]=f),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,i=s=>{const l=this.scale,f=l===0,d=s.minScale===0||l<=s.minScale,v=s.maxScale===0||l>=s.maxScale;s.visible&&(f||d&&v)&&(s.sublayers?s.sublayers.forEach(i):e.unshift(s))};t&&t.forEach(i);const r=this._get("visibleSublayers");return!r||r.length!==e.length||r.some((s,l)=>e[l]!==s)?e:r}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=je(te({},t),{layers:this.layers,layerDefs:this.layerDefs}),t}};m([x({readOnly:!0})],wo.prototype,"dynamicLayers",null),m([x()],wo.prototype,"floors",void 0),m([x({readOnly:!0})],wo.prototype,"hasDynamicLayers",null),m([x()],wo.prototype,"layer",null),m([x({readOnly:!0})],wo.prototype,"layers",null),m([x({readOnly:!0})],wo.prototype,"layerDefs",null),m([x({type:Number})],wo.prototype,"scale",void 0),m([x(Swe)],wo.prototype,"timeExtent",void 0),m([x({readOnly:!0})],wo.prototype,"version",null),m([x({readOnly:!0})],wo.prototype,"visibleSublayers",null),wo=m([X("esri.layers.mixins.ExportImageParameters")],wo);let kr=class extends NI(Eq(h8(F$e(P$e(FG(_q(Sq(A_(Iq(AG(NG(_a(T0))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?te({url:e},t):e}load(e){const t=q(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(Gf).then(()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(e,t){const i=t.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(e,t,i,r){if(!this.loaded||!e)return;const s=e.slice().reverse().flatten(({sublayers:_})=>_&&_.toArray().reverse()).toArray();let l=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const _=Ss(r.origin);if(_===nt.PORTAL_ITEM){const M=this.createSublayersForOrigin("service").sublayers;l=zH(s,M,nt.SERVICE)}else if(_>nt.PORTAL_ITEM){const M=this.createSublayersForOrigin("portal-item");l=zH(s,M.sublayers,Ss(M.origin))}}const f=[],d=te({writeSublayerStructure:l},r);let v=l;s.forEach(_=>{const M=_.write({},d);f.push(M),v=v||_.originOf("visible")==="user"}),f.some(_=>Object.keys(_).length>1)&&(t.layers=f),v&&(t.visibleLayers=s.filter(_=>_.visible).map(_=>_.id))}createExportImageParameters(e,t,i,r){const s=r&&r.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const l=new wo({layer:this,floors:r==null?void 0:r.floors,scale:DH({extent:e,width:t})*s}),f=l.toJSON();l.destroy();const d=!r||!r.rotation||this.version<10.3?{}:{rotation:-r.rotation},v=e&&e.spatialReference,_=v.wkid||JSON.stringify(v.toJSON());f.dpi*=s;const M={};if(r==null?void 0:r.timeExtent){const{start:T,end:A}=r.timeExtent.toJSON();M.time=T&&A&&T===A?""+T:`${T!=null?T:"null"},${A!=null?A:"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(M.time="null,null");return te(te(te({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:_,imageSR:_,size:t+","+i},f),d),M)}async fetchImage(e,t,i,r){return this._fetchImage("image",e,t,i,r)}async fetchImageBitmap(e,t,i,r){const s=await this._fetchImage("blob",e,t,i,r);return createImageBitmap(s)}async fetchRecomputedExtents(e={}){const t=je(te({},e),{query:je(te({returnUpdates:!0,f:"json"},this.customParameters),{token:this.apiKey})}),{data:i}=await li(this.url,t),{extent:r,fullExtent:s,timeExtent:l}=i,f=r||s;return{fullExtent:f&&ai.fromJSON(f),timeExtent:l&&Go.fromJSON({start:l[0],end:l[1]})}}loadAll(){return fM(this,e=>{e(this.allSublayers)})}serviceSupportsSpatialReference(e){return Lq(this,e)}async _fetchImage(e,t,i,r,s){var d;const l={responseType:e,signal:(d=s==null?void 0:s.signal)!=null?d:null,query:je(te(te(je(te(te({},this.parsedUrl.query),this.createExportImageParameters(t,i,r,s)),{f:"image"}),this.refreshParameters),this.customParameters),{token:this.apiKey})},f=this.parsedUrl.path+"/export";if(l.query.dynamicLayers!=null&&!this.capabilities.exportMap.supportsDynamicLayers)throw new fe("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:l.query});try{const{data:v}=await li(f,l);return v}catch(v){throw Ks(v)?v:new fe("mapimagelayer:image-fetch-error",`Unable to load image: ${f}`,{error:v})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:i}=await li(this.parsedUrl.path,{query:je(te(te({f:"json"},this.parsedUrl.query),this.customParameters),{token:this.apiKey}),signal:e});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};m([x({type:Boolean})],kr.prototype,"datesInUnknownTimezone",void 0),m([x()],kr.prototype,"dpi",void 0),m([x()],kr.prototype,"gdbVersion",void 0),m([x()],kr.prototype,"imageFormat",void 0),m([Be("imageFormat",["supportedImageFormatTypes"])],kr.prototype,"readImageFormat",null),m([x({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],kr.prototype,"imageMaxHeight",void 0),m([x({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],kr.prototype,"imageMaxWidth",void 0),m([x()],kr.prototype,"imageTransparency",void 0),m([x({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],kr.prototype,"isReference",void 0),m([x({json:{read:!1,write:!1}})],kr.prototype,"labelsVisible",void 0),m([x({type:["ArcGISMapServiceLayer"]})],kr.prototype,"operationalLayerType",void 0),m([x({json:{read:!1,write:!1}})],kr.prototype,"popupEnabled",void 0),m([x()],kr.prototype,"sourceJSON",void 0),m([x({json:{write:{ignoreOrigin:!0}}})],kr.prototype,"sublayers",void 0),m([Xe("sublayers",{layers:{type:[l9]},visibleLayers:{type:[hi]}})],kr.prototype,"writeSublayers",null),m([x({type:["show","hide","hide-children"]})],kr.prototype,"listMode",void 0),m([x({json:{read:!1},readOnly:!0,value:"map-image"})],kr.prototype,"type",void 0),m([x(ZG)],kr.prototype,"url",void 0),kr=m([X("esri.layers.MapImageLayer")],kr);const N$e=kr;var j$e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:N$e});new bt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new bt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let of=class extends Ee{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};m([x({type:String,json:{write:!0}})],of.prototype,"deviationUnit",void 0),m([x({json:{read:{reader:e=>e?e.map(t=>fn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],of.prototype,"geometries",void 0),m([x({type:Number,json:{write:!0}})],of.prototype,"maxDeviation",void 0),of=m([X("esri.rest.support.GeneralizeParameters")],of),of.from=Ai(of);new bt({preserveShape:"preserve-shape"});let Zh=class extends Ee{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};m([x({type:String,json:{write:!0}})],Zh.prototype,"calculationType",void 0),m([x({type:Boolean,json:{write:!0}})],Zh.prototype,"geodesic",void 0),m([x({json:{write:!0}})],Zh.prototype,"lengthUnit",void 0),m([x({type:[Kr],json:{read:{reader:e=>e?e.map(t=>fn(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Zh.prototype,"polylines",void 0),Zh=m([X("esri.rest.support.LengthsParameters")],Zh),Zh.from=Ai(Zh);new bt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new bt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let rc=class extends Ee{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};m([x({type:Number,json:{write:!0}})],rc.prototype,"bevelRatio",void 0),m([x({json:{read:{reader:e=>e?e.map(t=>fn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],rc.prototype,"geometries",void 0),m([x({type:Number,json:{write:!0}})],rc.prototype,"offsetDistance",void 0),m([x({type:String,json:{write:!0}})],rc.prototype,"offsetHow",void 0),m([x({type:String,json:{write:!0}})],rc.prototype,"offsetUnit",void 0),rc=m([X("esri.rest.support.OffsetParameters")],rc),rc.from=Ai(rc);let af=class extends Ee{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:ou(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};m([x()],af.prototype,"geometries",void 0),m([x({json:{read:{source:"outSR"}}})],af.prototype,"outSpatialReference",void 0),m([x()],af.prototype,"transformation",void 0),m([x()],af.prototype,"transformForward",void 0),af=m([X("esri.rest.support.ProjectParameters")],af);const D$e=af,V$e=Ai(D$e);async function zOe(e,t,i){t=V$e(t);const r=zr(e),s=te(je(te({},r.query),{f:"json"}),t.toJSON()),l=t.outSpatialReference,f=ou(t.geometries[0]),d=bV(s,i);return li(r.path+"/project",d).then(({data:{geometries:v}})=>_V(v,f,l))}new bt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Kh=class extends Ee{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};m([x({json:{read:{reader:e=>e?e.map(t=>fn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries1=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],Kh.prototype,"geometries1",void 0),m([x({json:{read:{reader:e=>e?e.map(t=>fn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries2=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],Kh.prototype,"geometries2",void 0),m([x({type:String,json:{write:!0}})],Kh.prototype,"relation",void 0),m([x({type:String,json:{write:!0}})],Kh.prototype,"relationParameter",void 0),Kh=m([X("esri.rest.support.RelationParameters")],Kh),Kh.from=Ai(Kh);new bt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let lf=class extends Ee{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};m([x({type:String,json:{write:!0}})],lf.prototype,"extendHow",void 0),m([x({type:[Kr],json:{read:{reader:e=>e?e.map(t=>fn(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],lf.prototype,"polylines",void 0),m([x({json:{read:{reader:e=>e?fn(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],lf.prototype,"trimExtendTo",void 0),lf=m([X("esri.rest.support.TrimExtendParameters")],lf),lf.from=Ai(lf);const z$e=new bt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let nc=class extends Ee{constructor(e){super(e),this.bufferSpatialReference=null,this.distances=null,this.geodesic=!1,this.geometries=null,this.outSpatialReference=null,this.unionResults=!1,this.unit=null}toJSON(){const e={unit:z$e.toJSON(this.unit),unionResults:this.unionResults,geodesic:this.geodesic},t=this.distances,i=this.outSpatialReference,r=this.bufferSpatialReference,s=this.geometries;if(s&&s.length>0){const l=s.map(d=>(d=d.type==="extent"?Dn.fromExtent(d):d).toJSON()),f=s[0].type==="extent"?"esriGeometryPolygon":ou(s[0]);e.geometries=JSON.stringify({geometryType:f,geometries:l}),e.inSR=s[0].spatialReference.wkid?s[0].spatialReference.wkid:JSON.stringify(s[0].spatialReference.toJSON())}return t&&(e.distances=t.join(",")),i&&(e.outSR=i.wkid?i.wkid:JSON.stringify(i.toJSON())),r&&(e.bufferSR=r.wkid?r.wkid:JSON.stringify(r.toJSON())),e}};m([x({type:At,json:{write:!0}})],nc.prototype,"bufferSpatialReference",void 0),m([x({type:[Number],json:{write:!0}})],nc.prototype,"distances",void 0),m([x({type:Boolean,json:{write:!0}})],nc.prototype,"geodesic",void 0),m([x({types:[au],json:{write:!0}})],nc.prototype,"geometries",void 0),m([x({type:At,json:{write:!0}})],nc.prototype,"outSpatialReference",void 0),m([x({type:Boolean,json:{write:!0}})],nc.prototype,"unionResults",void 0),m([x({type:String,json:{write:!0}})],nc.prototype,"unit",void 0),nc=m([X("esri.rest.support.BufferParameters")],nc);let ws=class extends Ee{constructor(e){super(e),this.contains=!0,this.dynamicLayerInfos=null,this.gdbVersion=null,this.geometryPrecision=null,this.layerDefinitions=null,this.layerIds=null,this.maxAllowableOffset=null,this.outSpatialReference=null,this.returnGeometry=!1,this.searchFields=null,this.searchText=null}};m([x({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],ws.prototype,"contains",void 0),m([x({type:[Object],json:{read:{source:"dynamicLayers"},write:{target:"dynamicLayers"}}})],ws.prototype,"dynamicLayerInfos",void 0),m([x({type:String,json:{write:!0}})],ws.prototype,"gdbVersion",void 0),m([x({type:Number,json:{write:!0}})],ws.prototype,"geometryPrecision",void 0),m([x({type:[Object],json:{write:!0}})],ws.prototype,"layerDefinitions",void 0),m([x({type:[Number],json:{write:!0}})],ws.prototype,"layerIds",void 0),m([x({type:Number,json:{write:!0}})],ws.prototype,"maxAllowableOffset",void 0),m([x({type:At,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ws.prototype,"outSpatialReference",void 0),m([x({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],ws.prototype,"returnGeometry",void 0),m([x({type:[String],json:{write:!0}})],ws.prototype,"searchFields",void 0),m([x({type:String,json:{write:!0}})],ws.prototype,"searchText",void 0),ws=m([X("esri.rest.support.FindParameters")],ws),ws.from=Ai(ws);let Gl=class extends Ee{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.foundFieldName=null,this.layerId=null,this.layerName=null,this.value=void 0}readFeature(e,t){const i={attributes:{}};return t.attributes&&(i.attributes=t.attributes),t.geometry&&(i.geometry=t.geometry),Dr.fromJSON(i)}writeFeature(e,t){if(!e)return;const{attributes:i,geometry:r}=e;i&&(t.attributes=te({},i)),q(r)&&(t.geometry=r.toJSON(),t.geometryType=Zw.toJSON(r.type))}};m([x({type:String,json:{write:!0}})],Gl.prototype,"displayFieldName",void 0),m([x({type:Dr})],Gl.prototype,"feature",void 0),m([Be("feature",["attributes","geometry"])],Gl.prototype,"readFeature",null),m([Xe("feature")],Gl.prototype,"writeFeature",null),m([x({type:String,json:{write:!0}})],Gl.prototype,"foundFieldName",void 0),m([x({type:Number,json:{write:!0}})],Gl.prototype,"layerId",void 0),m([x({type:String,json:{write:!0}})],Gl.prototype,"layerName",void 0),m([x({json:{write:!0}})],Gl.prototype,"value",void 0),Gl=m([X("esri.rest.support.FindResult")],Gl);const u9=new bt({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"});u9.fromJSON.bind(u9);u9.toJSON.bind(u9);const c9=new bt({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"});c9.fromJSON.bind(c9);c9.toJSON.bind(c9);let _o=class extends ot{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.label=null,this.layout="map-only",this.layoutItem=null,this.layoutOptions=null,this.outScale=0,this.scalePreserved=!0,this.showLabels=!0}};m([x()],_o.prototype,"attributionVisible",void 0),m([x()],_o.prototype,"exportOptions",void 0),m([x()],_o.prototype,"forceFeatureAttributes",void 0),m([x()],_o.prototype,"format",void 0),m([x()],_o.prototype,"label",void 0),m([x()],_o.prototype,"layout",void 0),m([x({type:am})],_o.prototype,"layoutItem",void 0),m([x()],_o.prototype,"layoutOptions",void 0),m([x()],_o.prototype,"outScale",void 0),m([x()],_o.prototype,"scalePreserved",void 0),m([x()],_o.prototype,"showLabels",void 0),_o=m([X("esri.rest.support.PrintTemplate")],_o);new bt({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"});new bt({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"});let Yh=class extends ot{constructor(e){super(e),this.extent=null,this.extraParameters=null,this.outSpatialReference=null,this.template=null,this.updateDelay=1e3,this.view=null}};m([x()],Yh.prototype,"extent",void 0),m([x()],Yh.prototype,"extraParameters",void 0),m([x()],Yh.prototype,"outSpatialReference",void 0),m([x()],Yh.prototype,"template",void 0),m([x()],Yh.prototype,"updateDelay",void 0),m([x()],Yh.prototype,"view",void 0),Yh=m([X("esri.rest.support.PrintParameters")],Yh);function pE(e){switch(e){case Ci.SUPPORTED:break;case Ci.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Ci.GEOMETRY_MISSING:return"no geometry";case Ci.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Ci.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Ci.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Ci;(function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Ci||(Ci={}));function G$e(e){var t;if(((t=e.layer)==null?void 0:t.type)!=="graphics")return Ci.GRAPHICS_LAYER_MISSING;if(ae(e.geometry))return Ci.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return Ci.GEOMETRY_TYPE_UNSUPPORTED}return Fx(e)!=="on-the-ground"&&PT(e)?Ci.ELEVATION_MODE_UNSUPPORTED:Ci.SUPPORTED}function iZ(e){if(!e)return null;if(Vw(e)&&e.wkid){const t=vde[e.wkid];if(t)return t}if(e.wkt){const t=q$e(e.wkt);if(t)return t}return null}function q$e(e){const t=gde.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function h9(e){const t=iZ(e!=null?e:At.WGS84);if(U$e(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function U$e(e){return e!=null&&"b"in e&&"eSq"in e&&"radius"in e}function p9(e,t,i){const{a:r,eSq:s}=h9(i),l=Math.sqrt(s),f=Math.sin(t[1]*ks),d=r*t[0]*ks;let v;return s>0?v=r*((1-s)*(f/(1-s*(f*f))-1/(2*l)*Math.log((1-l*f)/(1+l*f))))*.5:v=r*f,e[0]=d,e[1]=v,e}function dE(e){return iZ(e)!==null}function GOe(e,t="square-meters"){if(e.some(f=>!dE(f.spatialReference)))throw new fe("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let f=0;f<e.length;f++){const d=e[f],v=d.spatialReference,{radius:_,densificationRatio:M}=h9(v),T=_*M;i.push(B$e(d,T))}const r=[],s=[0,0],l=[0,0];for(let f=0;f<i.length;f++){const{rings:d,spatialReference:v}=i[f];let _=0;for(let M=0;M<d.length;M++){const T=d[M];p9(s,T[0],v),p9(l,T[T.length-1],v);let A=l[0]*s[1]-s[0]*l[1];for(let k=0;k<T.length-1;k++)p9(s,T[k+1],v),p9(l,T[k],v),A+=l[0]*s[1]-s[0]*l[1];_+=A}_=vi(_,"square-meters",t),r.push(_/-2)}return r}function qOe(e,t="meters"){if(!e)throw new fe("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!dE(r.spatialReference)))throw new fe("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const s=e[r],{spatialReference:l}=s,f=s.type==="polyline"?s.paths:s.rings;let d=0;for(let v=0;v<f.length;v++){const _=f[v];let M=0;for(let T=1;T<_.length;T++){const A=_[T-1][0],k=_[T][0],F=_[T-1][1],D=_[T][1];if(F!==D||A!==k){const z=new rZ;nZ(z,[A,F],[k,D],l),M+=z.distance}}d+=M}d=vi(d,"meters",t),i.push(d)}return i}function B$e(e,t){if(e.type!=="polyline"&&e.type!=="polygon")throw new fe("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!dE(i))throw new fe("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=e.type==="polyline"?e.paths:e.rings,s=[],l=[0,0],f=new rZ;for(const d of r){const v=[];s.push(v),v.push([d[0][0],d[0][1]]);let _,M,T=d[0][0],A=d[0][1];for(let k=0;k<d.length-1;k++){if(_=d[k+1][0],M=d[k+1][1],T===_&&A===M)continue;const F=[T,A];nZ(f,[T,A],[_,M],i);const{azimuth:D,distance:z}=f,H=z/t;if(H>1){for(let J=1;J<=H-1;J++)d9(l,F,D,J*t,i),v.push(l.slice(0));d9(l,F,D,(z+Math.floor(H-1)*t)/2,i),v.push(l.slice(0))}d9(l,F,D,z,i),v.push(l.slice(0)),T=l[0],A=l[1]}}return e.type==="polyline"?new Kr({paths:s,spatialReference:i}):new Dn({rings:s,spatialReference:i})}class rZ{constructor(t=0,i,r){this.distance=t,this.azimuth=i,this.reverseAzimuth=r}}function d9(e,t,i,r,s){const l=t[0],f=t[1],d=l*ks,v=f*ks,_=(i!=null?i:0)*ks,{a:M,b:T,f:A}=h9(s),k=Math.sin(_),F=Math.cos(_),D=(1-A)*Math.tan(v),z=1/Math.sqrt(1+D*D),H=D*z,J=Math.atan2(D,F),Y=z*k,ie=Y*Y,re=1-ie,ee=re*(M*M-T*T)/(T*T),le=1+ee/16384*(4096+ee*(ee*(320-175*ee)-768)),me=ee/1024*(256+ee*(ee*(74-47*ee)-128));let we,_e,Me,Se,He=r/(T*le),We=2*Math.PI;for(;Math.abs(He-We)>1e-12;)Me=Math.cos(2*J+He),we=Math.sin(He),_e=Math.cos(He),Se=me*we*(Me+me/4*(_e*(2*Me*Me-1)-me/6*Me*(4*we*we-3)*(4*Me*Me-3))),We=He,He=r/(T*le)+Se;const Ot=H*we-z*_e*F,kt=Math.atan2(H*_e+z*we*F,(1-A)*Math.sqrt(ie+Ot*Ot)),ft=Math.atan2(we*k,z*_e-H*we*F),Ye=A/16*re*(4+A*(4-3*re)),Ct=kt/ks,Oi=(d+(ft-(1-Ye)*A*Y*(He+Ye*we*(Me+Ye*_e*(2*Me*Me-1)))))/ks;return e[0]=Oi,e[1]=Ct,e}function nZ(e,t,i,r){const s=t[0]*ks,l=t[1]*ks,f=i[0]*ks,d=i[1]*ks,{a:v,b:_,f:M,radius:T}=h9(r),A=f-s,k=Math.atan((1-M)*Math.tan(l)),F=Math.atan((1-M)*Math.tan(d)),D=Math.sin(k),z=Math.cos(k),H=Math.sin(F),J=Math.cos(F);let Y,ie,re,ee,le,me,we,_e,Me,Se,He=1e3,We=A;do{if(we=Math.sin(We),_e=Math.cos(We),re=Math.sqrt(J*we*(J*we)+(z*H-D*J*_e)*(z*H-D*J*_e)),re===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;le=D*H+z*J*_e,me=Math.atan2(re,le),Me=z*J*we/re,ie=1-Me*Me,ee=le-2*D*H/ie,isNaN(ee)&&(ee=0),Se=M/16*ie*(4+M*(4-3*ie)),Y=We,We=A+(1-Se)*M*Me*(me+Se*re*(ee+Se*le*(2*ee*ee-1)))}while(Math.abs(We-Y)>1e-12&&--He>0);if(He===0){const Oi=T,Ui=Math.acos(Math.sin(l)*Math.sin(d)+Math.cos(l)*Math.cos(d)*Math.cos(f-s))*Oi,_i=f-s,pr=Math.sin(_i)*Math.cos(d),Rr=Math.cos(l)*Math.sin(d)-Math.sin(l)*Math.cos(d)*Math.cos(_i),De=Math.atan2(pr,Rr);return e.azimuth=De/ks,e.distance=Ui,e.reverseAzimuth=void 0,e}const Ot=ie*(v*v-_*_)/(_*_),kt=Ot/1024*(256+Ot*(Ot*(74-47*Ot)-128)),ft=_*(1+Ot/16384*(4096+Ot*(Ot*(320-175*Ot)-768)))*(me-kt*re*(ee+kt/4*(le*(2*ee*ee-1)-kt/6*ee*(4*re*re-3)*(4*ee*ee-3)))),Ye=Math.atan2(J*Math.sin(We),z*H-D*J*Math.cos(We)),Ct=Math.atan2(z*Math.sin(We),z*H*Math.cos(We)-D*J);return e.azimuth=Ye/ks,e.distance=ft,e.reverseAzimuth=Ct/ks,e}var fE;let Xh=fE=class extends Dn{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let i;if(e&&e.center)i=e;else{if(e&&e.rings)return super.normalizeCtorArgs(e,t);i={center:e}}return te(te(te({},super.normalizeCtorArgs()),i),t)}initialize(){var f;const e=this.center,t=this.numberOfPoints;if(this.hasZ=(f=e==null?void 0:e.hasZ)!=null?f:!1,this.rings.length!==0||!e)return;const i=vi(this.radius,this.radiusUnit,"meters"),r=e.spatialReference;let s,l="geographic";if(r.isWebMercator?l="webMercator":((r.wkid&&Q[r.wkid])!=null||r.wkt&&r.wkt.indexOf("PROJCS")===0)&&(l="projected"),this.geodesic){let d;switch(l){case"webMercator":d=Jf(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":d=e}s=this._createGeodesicCircle(d,i,t),l==="webMercator"&&(s=nu(s))}else{let d;l==="webMercator"||l==="projected"?d=i/this._convert2Meters(1,e.spatialReference):l==="geographic"&&(d=yN(i,"meters",kM(e.spatialReference).radius)),s=this._createPlanarCircle(e,d,t)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s}=this;return new fE({center:e==null?void 0:e.clone(),numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s})}_createGeodesicCircle(e,t,i){let r=0;const s=[];for(;r<360;){const l=[0,0],f=[e.x,e.y];d9(l,f,r,t),this.hasZ&&l.push(e.z),s.push(l),r+=360/i}return s.push(s[0]),new Dn(s)}_createPlanarCircle(e,t,i){const r=[],s=2*Math.PI/i;for(let l=0;l<i;++l){const f=s*l,d=[e.x+Math.cos(-f)*t,e.y+Math.sin(-f)*t];this.hasZ&&d.push(e.z),r.push(d)}return r.push(r[0]),new Dn({spatialReference:e.spatialReference,rings:[r]})}_convert2Meters(e,t){let i;if(t.wkid&&Q[t.wkid]!=null)i=Q.values[Q[t.wkid]];else{const r=t.wkt,s=r.lastIndexOf(",")+1,l=r.lastIndexOf("]]");i=parseFloat(r.substring(s,l))}return e*i}};m([x({type:dt})],Xh.prototype,"center",void 0),m([x()],Xh.prototype,"geodesic",void 0),m([x()],Xh.prototype,"numberOfPoints",void 0),m([x()],Xh.prototype,"radius",void 0),m([x()],Xh.prototype,"radiusUnit",void 0),Xh=fE=m([X("esri.geometry.Circle")],Xh);const H$e=Xh;function f9(e){return sZ(e).result}function UOe(e){return sZ(e).geometry}function sZ(e){var t;return((t=e.layer)==null?void 0:t.type)!=="graphics"?{result:Ci.GRAPHICS_LAYER_MISSING,geometry:null}:ae(e.geometry)?{result:Ci.GEOMETRY_MISSING,geometry:null}:Fx(e)!=="on-the-ground"&&PT(e)?{result:Ci.ELEVATION_MODE_UNSUPPORTED,geometry:null}:e.geometry.type!=="point"&&e.geometry.type!=="polyline"&&(e.geometry.type!=="polygon"||e.geometry instanceof H$e)?{result:Ci.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:Ci.SUPPORTED,geometry:e.geometry}}function W$e(e){var i;if(((i=e.layer)==null?void 0:i.type)!=="graphics")return Ci.GRAPHICS_LAYER_MISSING;if(ae(e.geometry))return Ci.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Ci.SUPPORTED;default:return Ci.GEOMETRY_TYPE_UNSUPPORTED}const t=q(e.symbol)&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return t&&t.length>0&&t.some(r=>r.type==="object")?Fx(e)!=="on-the-ground"&&PT(e)?Ci.ELEVATION_MODE_UNSUPPORTED:Ci.SUPPORTED:Ci.SYMBOL_TYPE_UNSUPPORTED}function oZ(e,t,i){if(!t||!e||!e.map)return;const{map:r}=e,s=r.layers.find(l=>l===t);s||r.add(t,i),i!=null&&r.layers.reorder(s,i)}function BOe(e,t){return e.allLayerViews.find(i=>{const r=i.layer;return r===t||"sublayers"in r&&q(r.sublayers)&&r.sublayers.includes(t)})}function J$e(e,t){const i=aZ[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function Z$e(e,t){const i=aZ[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const aZ={min:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.min.apply(Math,e[0])},max:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.max.apply(Math,e[0])},avg:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:lZ(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:K$e(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sqrt(uZ(e[0]))},count:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:uZ(e[0])}};function lZ(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}function K$e(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}function uZ(e){const t=lZ(e),i=e.length;let r=0;for(const s of e)r+=(s-t)**2;return i>1?r/(i-1):0}class _s{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(t){if(t.precision!==null||t.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(t){const i=new _s;return i.second=t/1e3,i}static createFromValueAndQualifer(t,i,r){let s=null;const l=new _s;if(l.op=r==="-"?"-":"+",i.type==="interval-period"){_s._fixDefaults(i);const f=new RegExp("^[0-9]{1,}$");if(i.period==="year"||i.period==="month")throw new Error("Year-Month Intervals not supported");if(!f.test(t))throw new Error("Illegal Interval");l[i.period]=parseFloat(t)}else{if(_s._fixDefaults(i.start),_s._fixDefaults(i.end),i.start.period==="year"||i.start.period==="month")throw new Error("Year-Month Intervals not supported");if(i.end.period==="year"||i.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(i.start.period){case"day":switch(i.end.period){case"hour":if(s=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");l[i.start.period]=parseFloat(t.split(" ")[0]),l[i.end.period]=parseFloat(t.split(" ")[1]);break;case"minute":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");{l[i.start.period]=parseFloat(t.split(" ")[0]);const f=t.split(" ")[1].split(":");l.hour=parseFloat(f[0]),l.minute=parseFloat(f[1])}break;case"second":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{l[i.start.period]=parseFloat(t.split(" ")[0]);const f=t.split(" ")[1].split(":");l.hour=parseFloat(f[0]),l.minute=parseFloat(f[1]),l.second=parseFloat(f[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(i.end.period){case"minute":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");l.hour=parseFloat(t.split(":")[0]),l.minute=parseFloat(t.split(":")[1]);break;case"second":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const f=t.split(":");l.hour=parseFloat(f[0]),l.minute=parseFloat(f[1]),l.second=parseFloat(f[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(i.end.period!=="second")throw new Error("Invalid Interval.");if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const f=t.split(":");l.minute=parseFloat(f[0]),l.second=parseFloat(f[1])}break;default:throw new Error("Invalid Interval.")}}return l}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function cZ(e,t){const i=hZ[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function Y$e(e,t){const i=hZ[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const hZ={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(t==null)return null;if(t instanceof Date)switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(e.length===2){const[t,i]=e;return t==null||i==null?null:t.toString().substring(i-1)}if(e.length===3){const[t,i,r]=e;return t==null||i==null||r==null?null:r<=0?"":t.toString().substring(i-1,i+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>e==null||t==null?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=e.length===3,i=t?e[1]:" ",r=t?e[2]:e[1];if(i==null||r==null)return null;const s=`(${vne(i)})`;switch(e[0]){case"BOTH":return r.replace(new RegExp(`^${s}*|${s}*$`,"g"),"");case"LEADING":return r.replace(new RegExp(`^${s}*`,"g"),"");case"TRAILING":return r.replace(new RegExp(`${s}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0]>0?1:e[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],i=e.length===2?10**e[1]:1;return t==null?null:Math.round(t*i)/i}},truncate:{minParams:1,maxParams:2,evaluate:e=>e[0]==null?null:e.length===1?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>typeof e[0]=="string"||e[0]instanceof String?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let i=0;i<e.length;i++){if(e[i]==null)return null;t+=e[i].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toUpperCase()}};var pZ,dZ,fZ={exports:{}};dZ=function(){function e(s,l){function f(){this.constructor=s}f.prototype=l.prototype,s.prototype=new f}function t(s,l,f,d){var v=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(v,t.prototype),v.expected=l,v.found=f,v.location=d,v.name="SyntaxError",v}function i(s,l,f){return f=f||" ",s.length>l?s:(l-=s.length,s+(f+=f.repeat(l)).slice(0,l))}function r(s,l){var f,d={},v=(l=l!==void 0?l:{}).grammarSource,_={start:lC},M=lC,T="!",A="=",k=">=",F=">",D="<=",z="<>",H="<",J="!=",Y="+",ie="-",re="*",ee="/",le="@",me="'",we="N'",_e="''",Me=".",Se="null",He="true",We="false",Ot="in",kt="is",ft="like",Ye="escape",Ct="not",Oi="and",Ui="or",_i="between",pr="from",Rr="for",De="substring",ct="extract",Ze="trim",yt="position",ni="timestamp",si="date",Lt="leading",Nt="trailing",ce="both",ye="to",Te="interval",Ge="year",Re="month",B="day",Ke="hour",Je="minute",Fe="second",Ne="case",ht="end",ut="when",pt="then",St="else",jt=",",$i="(",Xt=")",Le="`",xr=/^[A-Za-z_\x80-\uFFFF]/,h=/^[A-Za-z0-9_]/,O=/^[A-Za-z0-9_.\x80-\uFFFF]/,w=/^[^']/,c=/^[0-9]/,a=/^[eE]/,n=/^[+\-]/,o=/^[ \t\n\r]/,u=/^[^`]/,p=Mt("!",!1),y=Mt("=",!1),g=Mt(">=",!1),b=Mt(">",!1),S=Mt("<=",!1),$=Mt("<>",!1),I=Mt("<",!1),C=Mt("!=",!1),R=Mt("+",!1),L=Mt("-",!1),N=Mt("*",!1),U=Mt("/",!1),W=Ul([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),j=Ul([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),K=Ul([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),se=Mt("@",!1),ne=Mt("'",!1),pe=Mt("N'",!1),he=Mt("''",!1),xe=Ul(["'"],!0,!1),ke=Mt(".",!1),Ae=Ul([["0","9"]],!1,!1),st=Ul(["e","E"],!1,!1),qe=Ul(["+","-"],!1,!1),It=Mt("NULL",!0),xt=Mt("TRUE",!0),tt=Mt("FALSE",!0),xi=Mt("IN",!0),nr=Mt("IS",!0),Ii=Mt("LIKE",!0),ei=Mt("ESCAPE",!0),ti=Mt("NOT",!0),zt=Mt("AND",!0),ki=Mt("OR",!0),Dt=Mt("BETWEEN",!0),dr=Mt("FROM",!0),Bt=Mt("FOR",!0),Hr=Mt("SUBSTRING",!0),ui=Mt("EXTRACT",!0),dc=Mt("TRIM",!0),fc=Mt("POSITION",!0),yc=Mt("TIMESTAMP",!0),un=Mt("DATE",!0),D9=Mt("LEADING",!0),V9=Mt("TRAILING",!0),ue=Mt("BOTH",!0),Oe=Mt("TO",!0),Ue=Mt("INTERVAL",!0),qt=Mt("YEAR",!0),Wr=Mt("MONTH",!0),Yi=Mt("DAY",!0),xs=Mt("HOUR",!0),vf=Mt("MINUTE",!0),oY=Mt("SECOND",!0),aY=Mt("CASE",!0),lY=Mt("END",!0),uY=Mt("WHEN",!0),cY=Mt("THEN",!0),hY=Mt("ELSE",!0),pY=Mt(",",!1),dY=Mt("(",!1),fY=Mt(")",!1),yY=Ul([" ","	",`
`,"\r"],!1,!1),rC=Mt("`",!1),nC=Ul(["`"],!0,!1),gY=function(P){return P},mY=function(P,G){var Z={type:"expression-list"},oe=yee(P,G);return Z.value=oe,Z},vY=function(P,G){return _y(P,G)},bY=function(P,G){return _y(P,G)},wY=function(P){return dee("NOT",P)},_Y=function(P,G){return G==""||G==null||G==null?P:G.type=="arithmetic"?_y(P,G.tail):LC(G.op,P,G.right,G.escape)},xY=function(P){return{type:"arithmetic",tail:P}},SY=function(P,G){return{op:P+"NOT",right:G}},MY=function(P,G){return{op:P,right:G}},$Y=function(P,G,Z){return{op:"NOT"+P,right:{type:"expression-list",value:[G,Z]}}},IY=function(P,G,Z){return{op:P,right:{type:"expression-list",value:[G,Z]}}},TY=function(P){return P[0]+" "+P[2]},EY=function(P){return P[0]+" "+P[2]},CY=function(P,G,Z){return{op:P,right:G,escape:Z.value}},AY=function(P,G){return{op:P,right:G,escape:""}},PY=function(P,G){return{op:P,right:G}},OY=function(P){return{op:P,right:{type:"expression-list",value:[]}}},kY=function(P,G){return{op:P,right:G}},RY=function(P,G){return _y(P,G)},FY=function(P,G){return _y(P,G)},LY=function(P){return P.paren=!0,P},NY=function(P){return/^CURRENT_DATE$/i.test(P)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(P)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:P}},jY=function(P){return P},DY=function(P,G){return P+G.join("")},VY=function(P,G){return P+G.join("")},zY=function(P){return{type:"parameter",value:P[1]}},GY=function(P,G){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:P},G]}}},qY=function(P,G,Z){return{type:"function",name:"substring",args:{type:"expression-list",value:Z?[P,G,Z[2]]:[P,G]}}},UY=function(P,G,Z){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:P!=null?P:"BOTH"},G,Z]}}},BY=function(P,G){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:P!=null?P:"BOTH"},G]}}},HY=function(P,G){return{type:"function",name:"position",args:{type:"expression-list",value:[P,G]}}},WY=function(P,G){return{type:"function",name:P,args:G||{type:"expression-list",value:[]}}},JY=function(P){return{type:"timestamp",value:P.value}},ZY=function(P,G,Z){return{type:"interval",value:G,qualifier:Z,op:P}},KY=function(P,G){return{type:"interval",value:P,qualifier:G,op:""}},YY=function(P,G){return{type:"interval-qualifier",start:P,end:G}},XY=function(P,G){return{type:"interval-period",period:P.value,precision:G,secondary:null}},QY=function(P){return{type:"interval-period",period:P.value,precision:null,secondary:null}},eX=function(P){return{type:"interval-period",period:P.value,precision:null,secondary:null}},tX=function(P,G){return{type:"interval-period",period:"second",precision:P,secondary:G}},iX=function(P){return{type:"interval-period",period:"second",precision:P,secondary:null}},rX=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},nX=function(P,G){return{type:"interval-period",period:P.value,precision:G,secondary:null}},sX=function(P){return{type:"interval-period",period:P.value,precision:null,secondary:null}},oX=function(P,G){return{type:"interval-period",period:"second",precision:P,secondary:G}},aX=function(P){return{type:"interval-period",period:"second",precision:P,secondary:null}},lX=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},uX=function(){return{type:"string",value:"day"}},cX=function(){return{type:"string",value:"hour"}},hX=function(){return{type:"string",value:"minute"}},pX=function(){return{type:"string",value:"month"}},dX=function(){return{type:"string",value:"year"}},fX=function(P){return parseFloat(P)},yX=function(P){return parseFloat(P)},gX=function(P){return{type:"date",value:P.value}},mX=function(){return{type:"null",value:null}},vX=function(){return{type:"boolean",value:!0}},bX=function(){return{type:"boolean",value:!1}},sC=function(){return"'"},wX=function(P){return{type:"string",value:P.join("")}},_X=function(P,G){return{type:"case-expression",format:"simple",operand:P,clauses:G,else:null}},xX=function(P,G,Z){return{type:"case-expression",format:"simple",operand:P,clauses:G,else:Z.value}},SX=function(P){return{type:"case-expression",format:"searched",clauses:P,else:null}},MX=function(P,G){return{type:"case-expression",format:"searched",clauses:P,else:G.value}},$X=function(P,G){return{type:"when-clause",operand:P,value:G}},IX=function(P,G){return{type:"when-clause",operand:P,value:G}},TX=function(P){return{type:"else-clause",value:P}},EX=function(P){return{type:"number",value:P}},CX=function(P,G,Z){return parseFloat(P+G+Z)},AX=function(P,G){return parseFloat(P+G)},PX=function(P,G){return parseFloat(P+G)},OX=function(P){return parseFloat(P)},kX=function(P,G){return P[0]+G},RX=function(P){return"."+(P!=null?P:"")},FX=function(P,G){return P+G},LX=function(P){return P.join("")},NX=function(P,G){return"e"+(G===null?"":G)},jX=function(){return"IN"},DX=function(){return"IS"},VX=function(){return"LIKE"},zX=function(){return"ESCAPE"},GX=function(){return"NOT"},qX=function(){return"AND"},UX=function(){return"OR"},BX=function(){return"BETWEEN"},HX=function(){return"FROM"},WX=function(){return"FOR"},JX=function(){return"SUBSTRING"},ZX=function(){return"EXTRACT"},KX=function(){return"TRIM"},YX=function(){return"POSITION"},XX=function(){return"TIMESTAMP"},QX=function(){return"DATE"},eQ=function(){return"LEADING"},tQ=function(){return"TRAILING"},iQ=function(){return"BOTH"},rQ=function(){return"TO"},nQ=function(){return"INTERVAL"},sQ=function(){return"YEAR"},oQ=function(){return"MONTH"},aQ=function(){return"DAY"},lQ=function(){return"HOUR"},uQ=function(){return"MINUTE"},cQ=function(){return"SECOND"},hQ=function(){return"CASE"},pQ=function(){return"END"},dQ=function(){return"WHEN"},fQ=function(){return"THEN"},yQ=function(){return"ELSE"},gQ=function(P){return P},mQ=function(P){return P.join("")},V=0,gb=[{line:1,column:1}],Ua=0,z9=[],$e=0;if("startRule"in l){if(!(l.startRule in _))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');M=_[l.startRule]}function Mt(P,G){return{type:"literal",text:P,ignoreCase:G}}function Ul(P,G,Z){return{type:"class",parts:P,inverted:G,ignoreCase:Z}}function vQ(){return{type:"end"}}function oC(P){var G,Z=gb[P];if(Z)return Z;for(G=P-1;!gb[G];)G--;for(Z={line:(Z=gb[G]).line,column:Z.column};G<P;)s.charCodeAt(G)===10?(Z.line++,Z.column=1):Z.column++,G++;return gb[P]=Z,Z}function aC(P,G){var Z=oC(P),oe=oC(G);return{source:v,start:{offset:P,line:Z.line,column:Z.column},end:{offset:G,line:oe.line,column:oe.column}}}function at(P){V<Ua||(V>Ua&&(Ua=V,z9=[]),z9.push(P))}function bQ(P,G,Z){return new t(t.buildMessage(P,G),P,G,Z)}function lC(){var P,G;return P=V,Ce(),(G=Tr())!==d?(Ce(),P=gY(G)):(V=P,P=d),P}function uC(){var P,G,Z,oe,lt,ci,ji,sr;if(P=V,(G=Tr())!==d){for(Z=[],oe=V,lt=Ce(),(ci=Ib())!==d?(ji=Ce(),(sr=Tr())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);oe!==d;)Z.push(oe),oe=V,lt=Ce(),(ci=Ib())!==d?(ji=Ce(),(sr=Tr())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);P=mY(G,Z)}else V=P,P=d;return P}function Tr(){var P,G,Z,oe,lt,ci,ji,sr;if(P=V,(G=G9())!==d){for(Z=[],oe=V,lt=Ce(),(ci=MC())!==d?(ji=Ce(),(sr=G9())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);oe!==d;)Z.push(oe),oe=V,lt=Ce(),(ci=MC())!==d?(ji=Ce(),(sr=G9())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);P=vY(G,Z)}else V=P,P=d;return P}function G9(){var P,G,Z,oe,lt,ci,ji,sr;if(P=V,(G=mb())!==d){for(Z=[],oe=V,lt=Ce(),(ci=Sb())!==d?(ji=Ce(),(sr=mb())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);oe!==d;)Z.push(oe),oe=V,lt=Ce(),(ci=Sb())!==d?(ji=Ce(),(sr=mb())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);P=bY(G,Z)}else V=P,P=d;return P}function mb(){var P,G,Z,oe,lt;return P=V,(G=wy())===d&&(G=V,s.charCodeAt(V)===33?(Z=T,V++):(Z=d,$e===0&&at(p)),Z!==d?(oe=V,$e++,s.charCodeAt(V)===61?(lt=A,V++):(lt=d,$e===0&&at(y)),$e--,lt===d?oe=void 0:(V=oe,oe=d),oe!==d?G=Z=[Z,oe]:(V=G,G=d)):(V=G,G=d)),G!==d?(Z=Ce(),(oe=mb())!==d?P=wY(oe):(V=P,P=d)):(V=P,P=d),P===d&&(P=wQ()),P}function wQ(){var P,G,Z;return P=V,(G=Bl())!==d?(Ce(),(Z=_Q())===d&&(Z=null),P=_Y(G,Z)):(V=P,P=d),P}function _Q(){var P;return(P=xQ())===d&&(P=IQ())===d&&(P=MQ())===d&&(P=SQ())===d&&(P=$Q()),P}function xQ(){var P,G,Z,oe,lt,ci;if(P=[],G=V,Z=Ce(),(oe=cC())!==d?(lt=Ce(),(ci=Bl())!==d?G=Z=[Z,oe,lt,ci]:(V=G,G=d)):(V=G,G=d),G!==d)for(;G!==d;)P.push(G),G=V,Z=Ce(),(oe=cC())!==d?(lt=Ce(),(ci=Bl())!==d?G=Z=[Z,oe,lt,ci]:(V=G,G=d)):(V=G,G=d);else P=d;return P!==d&&(P=xY(P)),P}function cC(){var P;return s.substr(V,2)===k?(P=k,V+=2):(P=d,$e===0&&at(g)),P===d&&(s.charCodeAt(V)===62?(P=F,V++):(P=d,$e===0&&at(b)),P===d&&(s.substr(V,2)===D?(P=D,V+=2):(P=d,$e===0&&at(S)),P===d&&(s.substr(V,2)===z?(P=z,V+=2):(P=d,$e===0&&at($)),P===d&&(s.charCodeAt(V)===60?(P=H,V++):(P=d,$e===0&&at(I)),P===d&&(s.charCodeAt(V)===61?(P=A,V++):(P=d,$e===0&&at(y)),P===d&&(s.substr(V,2)===J?(P=J,V+=2):(P=d,$e===0&&at(C)))))))),P}function SQ(){var P,G,Z,oe;return P=V,(G=xC())!==d?(Ce(),(Z=wy())!==d?(Ce(),(oe=Bl())!==d?P=SY(G,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=xC())!==d?(Ce(),(Z=Bl())!==d?P=MY(G,Z):(V=P,P=d)):(V=P,P=d)),P}function MQ(){var P,G,Z,oe,lt,ci;return P=V,(G=wy())!==d?(Ce(),(Z=$C())!==d?(Ce(),(oe=Bl())!==d?(Ce(),(lt=Sb())!==d?(Ce(),(ci=Bl())!==d?P=$Y(Z,oe,ci):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=$C())!==d?(Ce(),(Z=Bl())!==d?(Ce(),(oe=Sb())!==d?(Ce(),(lt=Bl())!==d?P=IY(G,Z,lt):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)),P}function hC(){var P,G,Z,oe,lt;return P=V,G=V,(Z=wy())!==d?(oe=Ce(),(lt=SC())!==d?G=Z=[Z,oe,lt]:(V=G,G=d)):(V=G,G=d),G!==d&&(G=TY(G)),(P=G)===d&&(P=SC()),P}function q9(){var P,G,Z,oe,lt;return P=V,G=V,(Z=wy())!==d?(oe=Ce(),(lt=Z9())!==d?G=Z=[Z,oe,lt]:(V=G,G=d)):(V=G,G=d),G!==d&&(G=EY(G)),(P=G)===d&&(P=Z9()),P}function $Q(){var P,G,Z,oe;return P=V,(G=hC())!==d?(Ce(),(Z=bf())!==d?(Ce(),eee()!==d?(Ce(),(oe=J9())!==d?P=CY(G,Z,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=hC())!==d?(Ce(),(Z=bf())!==d?P=AY(G,Z):(V=P,P=d)):(V=P,P=d)),P}function IQ(){var P,G,Z,oe;return P=V,(G=q9())!==d?(Ce(),(Z=Qn())!==d?(Ce(),(oe=uC())!==d?(Ce(),es()!==d?P=PY(G,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=q9())!==d?(Ce(),(Z=Qn())!==d?(Ce(),(oe=es())!==d?P=OY(G):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=q9())!==d?(Ce(),(Z=W9())!==d?P=kY(G,Z):(V=P,P=d)):(V=P,P=d))),P}function Bl(){var P,G,Z,oe,lt,ci,ji,sr;if(P=V,(G=U9())!==d){for(Z=[],oe=V,lt=Ce(),(ci=pC())!==d?(ji=Ce(),(sr=U9())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);oe!==d;)Z.push(oe),oe=V,lt=Ce(),(ci=pC())!==d?(ji=Ce(),(sr=U9())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);P=RY(G,Z)}else V=P,P=d;return P}function pC(){var P;return s.charCodeAt(V)===43?(P=Y,V++):(P=d,$e===0&&at(R)),P===d&&(s.charCodeAt(V)===45?(P=ie,V++):(P=d,$e===0&&at(L))),P}function U9(){var P,G,Z,oe,lt,ci,ji,sr;if(P=V,(G=B9())!==d){for(Z=[],oe=V,lt=Ce(),(ci=dC())!==d?(ji=Ce(),(sr=B9())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);oe!==d;)Z.push(oe),oe=V,lt=Ce(),(ci=dC())!==d?(ji=Ce(),(sr=B9())!==d?oe=lt=[lt,ci,ji,sr]:(V=oe,oe=d)):(V=oe,oe=d);P=FY(G,Z)}else V=P,P=d;return P}function dC(){var P;return s.charCodeAt(V)===42?(P=re,V++):(P=d,$e===0&&at(N)),P===d&&(s.charCodeAt(V)===47?(P=ee,V++):(P=d,$e===0&&at(U))),P}function B9(){var P,G;return(P=LQ())===d&&(P=AQ())===d&&(P=PQ())===d&&(P=OQ())===d&&(P=kQ())===d&&(P=RQ())===d&&(P=BQ())===d&&(P=TQ())===d&&(P=W9())===d&&(P=V,Qn()!==d?(Ce(),(G=Tr())!==d?(Ce(),es()!==d?P=LY(G):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)),P}function TQ(){var P;return(P=EQ())!==d&&(P=NY(P)),P}function EQ(){var P;return(P=CQ())!==d&&(P=jY(P)),P}function CQ(){var P,G,Z,oe;if(P=V,(G=H9())!==d){for(Z=[],oe=yC();oe!==d;)Z.push(oe),oe=yC();P=DY(G,Z)}else V=P,P=d;return P}function fC(){var P,G,Z,oe;if(P=V,(G=H9())!==d){for(Z=[],oe=ii();oe!==d;)Z.push(oe),oe=ii();P=VY(G,Z)}else V=P,P=d;return P}function H9(){var P;return xr.test(s.charAt(V))?(P=s.charAt(V),V++):(P=d,$e===0&&at(W)),P}function ii(){var P;return h.test(s.charAt(V))?(P=s.charAt(V),V++):(P=d,$e===0&&at(j)),P}function yC(){var P;return O.test(s.charAt(V))?(P=s.charAt(V),V++):(P=d,$e===0&&at(K)),P}function W9(){var P,G,Z;return P=V,s.charCodeAt(V)===64?(G=le,V++):(G=d,$e===0&&at(se)),G!==d&&(Z=fC())!==d?P=G=[G,Z]:(V=P,P=d),P!==d&&(P=zY(P)),P}function AQ(){var P,G,Z;return P=V,ree()!==d?(Ce(),Qn()!==d?(Ce(),(G=FQ())!==d?(Ce(),K9()!==d?(Ce(),(Z=Tr())!==d?(Ce(),es()!==d?P=GY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P}function PQ(){var P,G,Z,oe,lt,ci,ji;return P=V,iee()!==d?(Ce(),Qn()!==d?(Ce(),(G=Tr())!==d?(Ce(),K9()!==d?(Ce(),(Z=Tr())!==d?(Ce(),oe=V,(lt=tee())!==d?(ci=Ce(),(ji=Tr())!==d?oe=lt=[lt,ci,ji,Ce()]:(V=oe,oe=d)):(V=oe,oe=d),oe===d&&(oe=null),(lt=es())!==d?P=qY(G,Z,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P}function OQ(){var P,G,Z,oe;return P=V,IC()!==d?(Ce(),Qn()!==d?(Ce(),(G=gC())===d&&(G=null),Ce(),(Z=Tr())!==d?(Ce(),K9()!==d?(Ce(),(oe=Tr())!==d?(Ce(),es()!==d?P=UY(G,Z,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,IC()!==d?(Ce(),Qn()!==d?(Ce(),(G=gC())===d&&(G=null),Ce(),(Z=Tr())!==d?(Ce(),es()!==d?P=BY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)),P}function gC(){var P;return(P=aee())===d&&(P=lee())===d&&(P=uee()),P}function kQ(){var P,G,Z;return P=V,nee()!==d?(Ce(),Qn()!==d?(Ce(),(G=Tr())!==d?(Ce(),Z9()!==d?(Ce(),(Z=Tr())!==d?(Ce(),es()!==d?P=HY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P}function RQ(){var P,G,Z;return P=V,(G=pee())!==d?(Ce(),Qn()!==d?(Ce(),(Z=uC())===d&&(Z=null),Ce(),es()!==d?P=WY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P}function FQ(){var P;return(P=EC())===d&&(P=CC())===d&&(P=AC())===d&&(P=PC())===d&&(P=OC())===d&&(P=ip()),P}function LQ(){var P;return(P=J9())===d&&(P=JQ())===d&&(P=UQ())===d&&(P=qQ())===d&&(P=GQ())===d&&(P=NQ())===d&&(P=jQ()),P}function NQ(){var P,G;return P=V,see()!==d?(Ce(),(G=bf())!==d?P=JY(G):(V=P,P=d)):(V=P,P=d),P}function jQ(){var P,G,Z,oe;return P=V,TC()!==d?(Ce(),s.charCodeAt(V)===45?(G=ie,V++):(G=d,$e===0&&at(L)),G===d&&(s.charCodeAt(V)===43?(G=Y,V++):(G=d,$e===0&&at(R))),G!==d?(Ce(),(Z=bf())!==d?(Ce(),(oe=mC())!==d?P=ZY(G,Z,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,TC()!==d?(Ce(),(G=bf())!==d?(Ce(),(Z=mC())!==d?P=KY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)),P}function mC(){var P,G,Z;return P=V,(G=DQ())!==d?(Ce(),cee()!==d?(Ce(),(Z=VQ())!==d?P=YY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=zQ()),P}function DQ(){var P,G,Z;return P=V,(G=by())!==d?(Ce(),Qn()!==d?(Ce(),(Z=bb())!==d?(Ce(),es()!==d?P=XY(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=by())!==d&&(G=QY(G)),P=G),P}function VQ(){var P,G,Z,oe;return P=V,(G=by())!==d&&(G=eX(G)),(P=G)===d&&(P=V,(G=ip())!==d?(Ce(),Qn()!==d?(Ce(),(Z=bb())!==d?(Ce(),Ib()!==d?(Ce(),(oe=vb())!==d?(Ce(),es()!==d?P=tX(Z,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=ip())!==d?(Ce(),Qn()!==d?(Ce(),(Z=bb())!==d?(Ce(),es()!==d?P=iX(Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=ip())!==d&&(G=rX()),P=G))),P}function zQ(){var P,G,Z,oe;return P=V,(G=by())!==d?(Ce(),Qn()!==d?(Ce(),(Z=vb())!==d?(Ce(),es()!==d?P=nX(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=by())!==d&&(G=sX(G)),(P=G)===d&&(P=V,(G=ip())!==d?(Ce(),Qn()!==d?(Ce(),(Z=bb())!==d?(Ce(),Ib()!==d?(Ce(),(oe=vb())!==d?(Ce(),es()!==d?P=oX(Z,oe):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=ip())!==d?(Ce(),Qn()!==d?(Ce(),(Z=vb())!==d?(Ce(),es()!==d?P=aX(Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P===d&&(P=V,(G=ip())!==d&&(G=lX()),P=G)))),P}function by(){var P,G;return P=V,(G=AC())!==d&&(G=uX()),(P=G)===d&&(P=V,(G=PC())!==d&&(G=cX()),(P=G)===d&&(P=V,(G=OC())!==d&&(G=hX()),(P=G)===d&&(P=V,(G=CC())!==d&&(G=pX()),(P=G)===d&&(P=V,(G=EC())!==d&&(G=dX()),P=G)))),P}function vb(){var P;return(P=wf())!==d&&(P=fX(P)),P}function bb(){var P;return(P=wf())!==d&&(P=yX(P)),P}function GQ(){var P,G;return P=V,oee()!==d?(Ce(),(G=bf())!==d?P=gX(G):(V=P,P=d)):(V=P,P=d),P}function qQ(){var P;return(P=YQ())!==d&&(P=mX()),P}function UQ(){var P,G;return P=V,(G=XQ())!==d&&(G=vX()),(P=G)===d&&(P=V,(G=QQ())!==d&&(G=bX()),P=G),P}function bf(){var P;return(P=J9())===d&&(P=W9()),P}function J9(){var P,G,Z,oe,lt;if(P=V,s.charCodeAt(V)===39?(G=me,V++):(G=d,$e===0&&at(ne)),G===d&&(s.substr(V,2)===we?(G=we,V+=2):(G=d,$e===0&&at(pe))),G!==d){for(Z=[],oe=V,s.substr(V,2)===_e?(lt=_e,V+=2):(lt=d,$e===0&&at(he)),lt!==d&&(lt=sC()),(oe=lt)===d&&(w.test(s.charAt(V))?(oe=s.charAt(V),V++):(oe=d,$e===0&&at(xe)));oe!==d;)Z.push(oe),oe=V,s.substr(V,2)===_e?(lt=_e,V+=2):(lt=d,$e===0&&at(he)),lt!==d&&(lt=sC()),(oe=lt)===d&&(w.test(s.charAt(V))?(oe=s.charAt(V),V++):(oe=d,$e===0&&at(xe)));s.charCodeAt(V)===39?(oe=me,V++):(oe=d,$e===0&&at(ne)),oe!==d?P=wX(Z):(V=P,P=d)}else V=P,P=d;return P}function BQ(){var P;return(P=HQ())===d&&(P=WQ()),P}function HQ(){var P,G,Z,oe,lt;if(P=V,Mb()!==d)if(Ce(),(G=Tr())!==d){for(Ce(),Z=[],oe=_b();oe!==d;)Z.push(oe),oe=_b();oe=Ce(),(lt=$b())!==d?P=_X(G,Z):(V=P,P=d)}else V=P,P=d;else V=P,P=d;if(P===d)if(P=V,Mb()!==d)if(Ce(),(G=Tr())!==d){for(Ce(),Z=[],oe=_b();oe!==d;)Z.push(oe),oe=_b();oe=Ce(),(lt=vC())!==d?(Ce(),$b()!==d?P=xX(G,Z,lt):(V=P,P=d)):(V=P,P=d)}else V=P,P=d;else V=P,P=d;return P}function WQ(){var P,G,Z,oe;if(P=V,Mb()!==d){for(Ce(),G=[],Z=wb();Z!==d;)G.push(Z),Z=wb();Z=Ce(),(oe=$b())!==d?P=SX(G):(V=P,P=d)}else V=P,P=d;if(P===d)if(P=V,Mb()!==d){for(Ce(),G=[],Z=wb();Z!==d;)G.push(Z),Z=wb();Z=Ce(),(oe=vC())!==d?(Ce(),$b()!==d?P=MX(G,oe):(V=P,P=d)):(V=P,P=d)}else V=P,P=d;return P}function wb(){var P,G,Z;return P=V,kC()!==d?(Ce(),(G=Tr())!==d?(Ce(),RC()!==d?(Ce(),(Z=Tr())!==d?P=$X(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P}function _b(){var P,G,Z;return P=V,kC()!==d?(Ce(),(G=Tr())!==d?(Ce(),RC()!==d?(Ce(),(Z=Tr())!==d?P=IX(G,Z):(V=P,P=d)):(V=P,P=d)):(V=P,P=d)):(V=P,P=d),P}function vC(){var P,G;return P=V,hee()!==d?(Ce(),(G=Tr())!==d?P=TX(G):(V=P,P=d)):(V=P,P=d),P}function JQ(){var P,G,Z,oe;return P=V,(G=ZQ())!==d?(Z=V,$e++,oe=H9(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=EX(G):(V=P,P=d)):(V=P,P=d),P}function ZQ(){var P,G,Z,oe;return P=V,(G=xb())!==d&&(Z=bC())!==d&&(oe=wC())!==d?P=CX(G,Z,oe):(V=P,P=d),P===d&&(P=V,(G=xb())!==d&&(Z=bC())!==d?P=AX(G,Z):(V=P,P=d),P===d&&(P=V,(G=xb())!==d&&(Z=wC())!==d?P=PX(G,Z):(V=P,P=d),P===d&&(P=V,(G=xb())!==d&&(G=OX(G)),P=G))),P}function xb(){var P,G,Z;return(P=wf())===d&&(P=V,s.charCodeAt(V)===45?(G=ie,V++):(G=d,$e===0&&at(L)),G===d&&(s.charCodeAt(V)===43?(G=Y,V++):(G=d,$e===0&&at(R))),G!==d&&(Z=wf())!==d?P=kX(G,Z):(V=P,P=d)),P}function bC(){var P,G,Z;return P=V,s.charCodeAt(V)===46?(G=Me,V++):(G=d,$e===0&&at(ke)),G!==d?((Z=wf())===d&&(Z=null),P=RX(Z)):(V=P,P=d),P}function wC(){var P,G,Z;return P=V,(G=KQ())!==d&&(Z=wf())!==d?P=FX(G,Z):(V=P,P=d),P}function wf(){var P,G;if(P=[],(G=_C())!==d)for(;G!==d;)P.push(G),G=_C();else P=d;return P!==d&&(P=LX(P)),P}function _C(){var P;return c.test(s.charAt(V))?(P=s.charAt(V),V++):(P=d,$e===0&&at(Ae)),P}function KQ(){var P,G,Z;return P=V,a.test(s.charAt(V))?(G=s.charAt(V),V++):(G=d,$e===0&&at(st)),G!==d?(n.test(s.charAt(V))?(Z=s.charAt(V),V++):(Z=d,$e===0&&at(qe)),Z===d&&(Z=null),P=NX(G,Z)):(V=P,P=d),P}function YQ(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===Se?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(It)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=G=[G,Z]:(V=P,P=d)):(V=P,P=d),P}function XQ(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===He?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(xt)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=G=[G,Z]:(V=P,P=d)):(V=P,P=d),P}function QQ(){var P,G,Z,oe;return P=V,s.substr(V,5).toLowerCase()===We?(G=s.substr(V,5),V+=5):(G=d,$e===0&&at(tt)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=G=[G,Z]:(V=P,P=d)):(V=P,P=d),P}function Z9(){var P,G,Z,oe;return P=V,s.substr(V,2).toLowerCase()===Ot?(G=s.substr(V,2),V+=2):(G=d,$e===0&&at(xi)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=jX():(V=P,P=d)):(V=P,P=d),P}function xC(){var P,G,Z,oe;return P=V,s.substr(V,2).toLowerCase()===kt?(G=s.substr(V,2),V+=2):(G=d,$e===0&&at(nr)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=DX():(V=P,P=d)):(V=P,P=d),P}function SC(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===ft?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(Ii)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=VX():(V=P,P=d)):(V=P,P=d),P}function eee(){var P,G,Z,oe;return P=V,s.substr(V,6).toLowerCase()===Ye?(G=s.substr(V,6),V+=6):(G=d,$e===0&&at(ei)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=zX():(V=P,P=d)):(V=P,P=d),P}function wy(){var P,G,Z,oe;return P=V,s.substr(V,3).toLowerCase()===Ct?(G=s.substr(V,3),V+=3):(G=d,$e===0&&at(ti)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=GX():(V=P,P=d)):(V=P,P=d),P}function Sb(){var P,G,Z,oe;return P=V,s.substr(V,3).toLowerCase()===Oi?(G=s.substr(V,3),V+=3):(G=d,$e===0&&at(zt)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=qX():(V=P,P=d)):(V=P,P=d),P}function MC(){var P,G,Z,oe;return P=V,s.substr(V,2).toLowerCase()===Ui?(G=s.substr(V,2),V+=2):(G=d,$e===0&&at(ki)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=UX():(V=P,P=d)):(V=P,P=d),P}function $C(){var P,G,Z,oe;return P=V,s.substr(V,7).toLowerCase()===_i?(G=s.substr(V,7),V+=7):(G=d,$e===0&&at(Dt)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=BX():(V=P,P=d)):(V=P,P=d),P}function K9(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===pr?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(dr)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=HX():(V=P,P=d)):(V=P,P=d),P}function tee(){var P,G,Z,oe;return P=V,s.substr(V,3).toLowerCase()===Rr?(G=s.substr(V,3),V+=3):(G=d,$e===0&&at(Bt)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=WX():(V=P,P=d)):(V=P,P=d),P}function iee(){var P,G,Z,oe;return P=V,s.substr(V,9).toLowerCase()===De?(G=s.substr(V,9),V+=9):(G=d,$e===0&&at(Hr)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=JX():(V=P,P=d)):(V=P,P=d),P}function ree(){var P,G,Z,oe;return P=V,s.substr(V,7).toLowerCase()===ct?(G=s.substr(V,7),V+=7):(G=d,$e===0&&at(ui)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=ZX():(V=P,P=d)):(V=P,P=d),P}function IC(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===Ze?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(dc)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=KX():(V=P,P=d)):(V=P,P=d),P}function nee(){var P,G,Z,oe;return P=V,s.substr(V,8).toLowerCase()===yt?(G=s.substr(V,8),V+=8):(G=d,$e===0&&at(fc)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=YX():(V=P,P=d)):(V=P,P=d),P}function see(){var P,G,Z,oe;return P=V,s.substr(V,9).toLowerCase()===ni?(G=s.substr(V,9),V+=9):(G=d,$e===0&&at(yc)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=XX():(V=P,P=d)):(V=P,P=d),P}function oee(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===si?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(un)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=QX():(V=P,P=d)):(V=P,P=d),P}function aee(){var P,G,Z,oe;return P=V,s.substr(V,7).toLowerCase()===Lt?(G=s.substr(V,7),V+=7):(G=d,$e===0&&at(D9)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=eQ():(V=P,P=d)):(V=P,P=d),P}function lee(){var P,G,Z,oe;return P=V,s.substr(V,8).toLowerCase()===Nt?(G=s.substr(V,8),V+=8):(G=d,$e===0&&at(V9)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=tQ():(V=P,P=d)):(V=P,P=d),P}function uee(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===ce?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(ue)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=iQ():(V=P,P=d)):(V=P,P=d),P}function cee(){var P,G,Z,oe;return P=V,s.substr(V,2).toLowerCase()===ye?(G=s.substr(V,2),V+=2):(G=d,$e===0&&at(Oe)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=rQ():(V=P,P=d)):(V=P,P=d),P}function TC(){var P,G,Z,oe;return P=V,s.substr(V,8).toLowerCase()===Te?(G=s.substr(V,8),V+=8):(G=d,$e===0&&at(Ue)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=nQ():(V=P,P=d)):(V=P,P=d),P}function EC(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===Ge?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(qt)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=sQ():(V=P,P=d)):(V=P,P=d),P}function CC(){var P,G,Z,oe;return P=V,s.substr(V,5).toLowerCase()===Re?(G=s.substr(V,5),V+=5):(G=d,$e===0&&at(Wr)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=oQ():(V=P,P=d)):(V=P,P=d),P}function AC(){var P,G,Z,oe;return P=V,s.substr(V,3).toLowerCase()===B?(G=s.substr(V,3),V+=3):(G=d,$e===0&&at(Yi)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=aQ():(V=P,P=d)):(V=P,P=d),P}function PC(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===Ke?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(xs)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=lQ():(V=P,P=d)):(V=P,P=d),P}function OC(){var P,G,Z,oe;return P=V,s.substr(V,6).toLowerCase()===Je?(G=s.substr(V,6),V+=6):(G=d,$e===0&&at(vf)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=uQ():(V=P,P=d)):(V=P,P=d),P}function ip(){var P,G,Z,oe;return P=V,s.substr(V,6).toLowerCase()===Fe?(G=s.substr(V,6),V+=6):(G=d,$e===0&&at(oY)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=cQ():(V=P,P=d)):(V=P,P=d),P}function Mb(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===Ne?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(aY)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=hQ():(V=P,P=d)):(V=P,P=d),P}function $b(){var P,G,Z,oe;return P=V,s.substr(V,3).toLowerCase()===ht?(G=s.substr(V,3),V+=3):(G=d,$e===0&&at(lY)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=pQ():(V=P,P=d)):(V=P,P=d),P}function kC(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===ut?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(uY)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=dQ():(V=P,P=d)):(V=P,P=d),P}function RC(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===pt?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(cY)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=fQ():(V=P,P=d)):(V=P,P=d),P}function hee(){var P,G,Z,oe;return P=V,s.substr(V,4).toLowerCase()===St?(G=s.substr(V,4),V+=4):(G=d,$e===0&&at(hY)),G!==d?(Z=V,$e++,oe=ii(),$e--,oe===d?Z=void 0:(V=Z,Z=d),Z!==d?P=yQ():(V=P,P=d)):(V=P,P=d),P}function Ib(){var P;return s.charCodeAt(V)===44?(P=jt,V++):(P=d,$e===0&&at(pY)),P}function Qn(){var P;return s.charCodeAt(V)===40?(P=$i,V++):(P=d,$e===0&&at(dY)),P}function es(){var P;return s.charCodeAt(V)===41?(P=Xt,V++):(P=d,$e===0&&at(fY)),P}function Ce(){var P,G;for(P=[],G=FC();G!==d;)P.push(G),G=FC();return P}function FC(){var P;return o.test(s.charAt(V))?(P=s.charAt(V),V++):(P=d,$e===0&&at(yY)),P}function pee(){var P,G,Z,oe;if(P=V,(G=fC())!==d&&(G=gQ(G)),(P=G)===d)if(P=V,s.charCodeAt(V)===96?(G=Le,V++):(G=d,$e===0&&at(rC)),G!==d){if(Z=[],u.test(s.charAt(V))?(oe=s.charAt(V),V++):(oe=d,$e===0&&at(nC)),oe!==d)for(;oe!==d;)Z.push(oe),u.test(s.charAt(V))?(oe=s.charAt(V),V++):(oe=d,$e===0&&at(nC));else Z=d;Z!==d?(s.charCodeAt(V)===96?(oe=Le,V++):(oe=d,$e===0&&at(rC)),oe!==d?P=mQ(Z):(V=P,P=d)):(V=P,P=d)}else V=P,P=d;return P}function dee(P,G){return{type:"unary-expression",operator:P,expr:G}}function LC(P,G,Z,oe){var lt={type:"binary-expression",operator:P,left:G,right:Z};return oe!==void 0&&(lt.escape=oe),lt}function fee(P,G){for(var Z=[P],oe=0;oe<G.length;oe++)Z.push(G[oe][3]);return Z}function yee(P,G,Z){return fee(P,G)}function _y(P,G){for(var Z=P,oe=0;oe<G.length;oe++)Z=LC(G[oe][1],Z,G[oe][3]);return Z}if((f=M())!==d&&V===s.length)return f;throw f!==d&&V<s.length&&at(vQ()),bQ(z9,Ua<s.length?s.charAt(Ua):null,Ua<s.length?aC(Ua,Ua+1):aC(Ua,Ua))}return e(t,Error),t.prototype.format=function(s){var l="Error: "+this.message;if(this.location){var f,d=null;for(f=0;f<s.length;f++)if(s[f].source===this.location.source){d=s[f].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,_=this.location.source+":"+v.line+":"+v.column;if(d){var M=this.location.end,T=i("",v.line.toString().length," "),A=d[v.line-1],k=(v.line===M.line?M.column:A.length+1)-v.column||1;l+=`
 --> `+_+`
`+T+` |
`+v.line+" | "+A+`
`+T+" | "+i("",v.column-1," ")+i("",k,"^")}else l+=`
 at `+_}return l},t.buildMessage=function(s,l){var f={literal:function(k){return'"'+v(k.text)+'"'},class:function(k){var F=k.parts.map(function(D){return Array.isArray(D)?_(D[0])+"-"+_(D[1]):_(D)});return"["+(k.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(k){return k.description}};function d(k){return k.charCodeAt(0).toString(16).toUpperCase()}function v(k){return k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function _(k){return k.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function M(k){return f[k.type](k)}function T(k){var F,D,z=k.map(M);if(z.sort(),z.length>0){for(F=1,D=1;F<z.length;F++)z[F-1]!==z[F]&&(z[D]=z[F],D++);z.length=D}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function A(k){return k?'"'+v(k)+'"':"end of input"}return"Expected "+T(s)+" but "+A(l)+" found."},{SyntaxError:t,parse:r}},(pZ=fZ).exports&&(pZ.exports=dZ());class X$e{static parse(t){return fZ.exports.parse(t)}}const yZ=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Q$e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,e7e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,t7e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,i7e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,r7e=new Set(["current_timestamp","current_date","current_time"]);function uf(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function ob(e,t,i="0",r="0",s="0",l="0",f="",d="0",v="0"){if(f==="+"||f==="-"){const _=`${uf(parseInt(e,10),4)}-${uf(parseInt(t,10),2)}-${uf(parseInt(i,10),2)}`;let M="";parseFloat(l)<10&&(M="0");const T=`${uf(parseInt(r,10),2)}:${uf(parseInt(s,10),2)}:${M+parseFloat(l).toString()}`,A=`${f}${uf(parseInt(d,10),2)}:${uf(parseInt(v,10),2)}`;return new Date(_+"T"+T+A)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(i,10),parseInt(r,10),parseInt(s,10),parseFloat(l))}class n7e{static makeBool(t){return mZ(t)}static featureValue(t,i,r,s){return SZ(t,i,r,s)}static equalsNull(t){return t===null}static applyLike(t,i,r){return vE(t,i,r)}static ensureArray(t){return gE(t)}static applyIn(t,i){return mE(t,i)}static currentDate(){const t=new Date;return t.setHours(0,0,0,0),t}static makeSqlInterval(t,i,r){return _s.createFromValueAndQualifer(t,i,r)}static convertInterval(t){return t instanceof _s?t.valueInMilliseconds():t}static currentTimestamp(){return new Date}static compare(t,i,r){return _Z(t,i,r)}static calculate(t,i,r){return xZ(t,i,r)}static makeComparable(t){return sc(t)}static evaluateFunction(t,i){return cZ(t,i)}static lookup(t,i){const r=i[t];return r===void 0?null:r}static between(t,i){return t==null||i[0]==null||i[1]==null?null:t>=i[0]&&t<=i[1]}static notbetween(t,i){return t==null||i[0]==null||i[1]==null?null:t<i[0]||t>i[1]}static ternaryNot(t){return g9(t)}static ternaryAnd(t,i){return vZ(t,i)}static ternaryOr(t,i){return bZ(t,i)}}class y9{constructor(t,i){this.fieldsIndex=i,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=X$e.parse(t);const{isStandardized:r,isAggregate:s,referencedFieldNames:l}=this._extractExpressionInfo(i);this._referencedFieldNames=l,this.isStandardized=r,this.isAggregate=s}static create(t,i){return new y9(t,i)}get fieldNames(){return this._referencedFieldNames}testSet(t,i=hf){const r={};for(const s of this.fieldNames)r[s]=t.map(l=>i.getAttribute(l,s));return!!this._evaluateNode(this.parseTree,{attributes:r},hf)}calculateValue(t,i=hf){const r=this._evaluateNode(this.parseTree,t,i);return r instanceof _s?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(t,i=hf){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(t,this.parameters,i,this._datefields):Ie("esri-csp-restrictions")?this.calculateValue(t,i):(this._compileMe(),this.parseTree._compiledVersion(t,this.parameters,i,this._datefields))}testFeature(t,i=hf){return!!this._evaluateNode(this.parseTree,t,i)}testFeatureCompiled(t,i=hf){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(t,this.parameters,i,this._datefields):Ie("esri-csp-restrictions")?this.testFeature(t,i):(this._compileMe(),!!this.parseTree._compiledVersion(t,this.parameters,i,this._datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,t=>{t.type==="current-time"?this._hasDateFunctions=!0:t.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||r7e.has(t.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="function"&&t.add(i.name.toLowerCase())}),Array.from(t)}getExpressions(){const t=new Map;return this._visitAll(this.parseTree,i=>{if(i.type==="function"){const r=i.name.toLowerCase(),s=i.args.value[0];if(s.type==="column-reference"){const l=s.column,f=`${r}-${l}`;t.has(f)||t.set(f,{aggregateType:r,field:l})}}}),[...t.values()]}getVariables(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="parameter"&&t.add(i.value.toLowerCase())}),Array.from(t)}_compileMe(){const t="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",t).bind(n7e)}_extractExpressionInfo(t){const i=[],r=new Set;let s=!0,l=!0;return this._visitAll(this.parseTree,f=>{var d;switch(f.type){case"column-reference":{const v=t==null?void 0:t.get(f.column);let _,M;v?_=M=(d=v.name)!=null?d:"":(M=f.column,_=M.toLowerCase()),v&&v.name&&(v.type==="date"||v.type==="esriFieldTypeDate")&&(this._datefields[v.name]=1),r.has(_)||(r.add(_),i.push(M)),f.column=M;break}case"function":{const{name:v,args:_}=f,M=_.value.length;s&&(s=Y$e(v,M)),l&&(l=Z$e(v,M));break}}}),{referencedFieldNames:Array.from(i),isStandardized:s,isAggregate:l}}_visitAll(t,i){if(t!=null)switch(i(t),t.type){case"when-clause":this._visitAll(t.operand,i),this._visitAll(t.value,i);break;case"case-expression":for(const r of t.clauses)this._visitAll(r,i);t.format==="simple"&&this._visitAll(t.operand,i),t.else!==null&&this._visitAll(t.else,i);break;case"expression-list":for(const r of t.value)this._visitAll(r,i);break;case"unary-expression":this._visitAll(t.expr,i);break;case"binary-expression":this._visitAll(t.left,i),this._visitAll(t.right,i);break;case"function":this._visitAll(t.args,i)}}evaluateNodeToJavaScript(t){switch(t.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(t.value)+", "+JSON.stringify(t.qualifier)+","+JSON.stringify(t.op)+")";case"case-expression":{let i="";if(t.format==="simple"){const r="this.makeComparable("+this.evaluateNodeToJavaScript(t.operand)+")";i="( ";for(let s=0;s<t.clauses.length;s++)i+=" ("+r+" === this.makeComparable("+this.evaluateNodeToJavaScript(t.clauses[s].operand)+")) ? ("+this.evaluateNodeToJavaScript(t.clauses[s].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}else{i="( ";for(let r=0;r<t.clauses.length;r++)i+=" this.makeBool("+this.evaluateNodeToJavaScript(t.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(t.clauses[r].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}return i}case"parameter":return"this.lookup("+JSON.stringify(t.value.toLowerCase())+",lookups)";case"expression-list":{let i="[";for(const r of t.value)i!=="["&&(i+=","),i+=this.evaluateNodeToJavaScript(r);return i+="]",i}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(t.expr)+")";case"binary-expression":switch(t.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")";case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")"}throw new Error("Not Supported Operator "+t.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(t.value);case"date":return"(new Date("+gZ(t.value).getTime().toString()+"))";case"timestamp":return"(new Date("+yE(t.value).getTime().toString()+"))";case"current-time":return t.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(t.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(t.name)+","+this.evaluateNodeToJavaScript(t.args)+")"}throw new Error("Unsupported sql syntax "+t.type)}_evaluateNode(t,i,r){switch(t.type){case"interval":{const s=this._evaluateNode(t.value,i,r);return _s.createFromValueAndQualifer(s,t.qualifier,t.op)}case"case-expression":if(t.format==="simple"){const s=sc(this._evaluateNode(t.operand,i,r));for(let l=0;l<t.clauses.length;l++)if(s===sc(this._evaluateNode(t.clauses[l].operand,i,r)))return this._evaluateNode(t.clauses[l].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}else{for(let s=0;s<t.clauses.length;s++)if(mZ(this._evaluateNode(t.clauses[s].operand,i,r)))return this._evaluateNode(t.clauses[s].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}return null;case"parameter":return this.parameters[t.value.toLowerCase()];case"expression-list":{const s=[];for(const l of t.value)s.push(this._evaluateNode(l,i,r));return s}case"unary-expression":return g9(this._evaluateNode(t.expr,i,r));case"binary-expression":switch(t.operator){case"AND":return vZ(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"OR":return bZ(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)===null;case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)!==null;case"IN":{const s=gE(this._evaluateNode(t.right,i,r));return mE(this._evaluateNode(t.left,i,r),s)}case"NOT IN":{const s=gE(this._evaluateNode(t.right,i,r));return g9(mE(this._evaluateNode(t.left,i,r),s))}case"BETWEEN":{const s=this._evaluateNode(t.left,i,r),l=this._evaluateNode(t.right,i,r);return s==null||l[0]==null||l[1]==null?null:s>=sc(l[0])&&s<=sc(l[1])}case"NOTBETWEEN":{const s=this._evaluateNode(t.left,i,r),l=this._evaluateNode(t.right,i,r);return s==null||l[0]==null||l[1]==null?null:s<sc(l[0])||s>sc(l[1])}case"LIKE":return vE(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape);case"NOT LIKE":return g9(vE(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return _Z(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"-":case"+":case"*":case"/":return xZ(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r))}case"null":case"boolean":case"string":case"number":return t.value;case"date":return gZ(t.value);case"timestamp":return yE(t.value);case"current-time":{const s=new Date;return t.mode==="date"&&s.setHours(0,0,0,0),s}case"column-reference":return SZ(i,t.column,this._datefields,r);case"function":{const s=this._evaluateNode(t.args,i,r);return this.isAggregate?J$e(t.name,s):cZ(t.name,s)}}throw new Error("Unsupported sql syntax "+t.type)}}function yE(e){let t=Q$e.exec(e);if(t!==null){const[,i,r,s,l,f,d]=t;return ob(i,r,s,l,f,d)}if(t=e7e.exec(e),t!==null){const[,i,r,s,l,f,d,v,_,M]=t;return ob(i,r,s,l,f,d,v,_,M)}if(t=t7e.exec(e),t!==null){const[,i,r,s,l,f,d,v,_]=t;return ob(i,r,s,l,f,"0",d,v,_)}if(t=i7e.exec(e),t!==null){const[,i,r,s,l,f]=t;return ob(i,r,s,l,f)}if(t=yZ.exec(e),t!==null){const[,i,r,s]=t;return ob(i,r,s)}throw new Error("SQL Invalid Timestamp")}function gZ(e){const t=yZ.exec(e);if(t===null)try{return yE(e)}catch{throw new Error("SQL Invalid Date")}const[,i,r,s]=t;return new Date(parseInt(i,10),parseInt(r,10)-1,parseInt(s,10))}function mZ(e){return e===!0}function gE(e){return Array.isArray(e)?e:[e]}function g9(e){return e!==null?e!==!0:null}function vZ(e,t){return e!=null&&t!=null?e===!0&&t===!0:e!==!1&&t!==!1&&null}function bZ(e,t){return e!=null&&t!=null?e===!0||t===!0:e===!0||t===!0||null}function mE(e,t){if(e==null)return null;let i=!1;for(const r of t)if(r==null)i=null;else if(e===r){i=!0;break}return i}const wZ="-[]/{}()*+?.\\^$|";var cf;function s7e(e,t){const i=t;let r="",s=cf.Normal;for(let l=0;l<e.length;l++){const f=e.charAt(l);switch(s){case cf.Normal:f===i?s=cf.Escaped:wZ.includes(f)?r+="\\"+f:r+=f==="%"?".*":f==="_"?".":f;break;case cf.Escaped:wZ.includes(f)?r+="\\"+f:r+=f,s=cf.Normal}}return new RegExp("^"+r+"$","m")}function vE(e,t,i){return e==null?null:s7e(t,i).test(e)}function sc(e){return e instanceof Date?e.valueOf():e}function _Z(e,t,i){if(t==null||i==null)return null;const r=sc(t),s=sc(i);switch(e){case"<>":return r!==s;case"=":return r===s;case">":return r>s;case"<":return r<s;case">=":return r>=s;case"<=":return r<=s}}function xZ(e,t,i){if(t instanceof _s)if(i instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+i.getTime());case"-":return t.valueInMilliseconds()-i.getTime();case"*":return t.valueInMilliseconds()*i.getTime();case"/":return t.valueInMilliseconds()/i.getTime()}else if(i instanceof _s)switch(e){case"+":return _s.createFromMilliseconds(t.valueInMilliseconds()+i.valueInMilliseconds());case"-":return _s.createFromMilliseconds(t.valueInMilliseconds()-i.valueInMilliseconds());case"*":return t.valueInMilliseconds()*i.valueInMilliseconds();case"/":return t.valueInMilliseconds()/i.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(i instanceof _s)if(t instanceof Date)switch(e){case"+":return new Date(i.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-i.valueInMilliseconds());case"*":return t.getTime()*i.valueInMilliseconds();case"/":return t.getTime()/i.valueInMilliseconds()}else i=i.valueInMilliseconds();else if(t instanceof Date&&typeof i=="number")switch(i=24*i*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}else if(i instanceof Date&&typeof t=="number")switch(t=24*t*60*60*1e3,i=i.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i}}function o7e(e){return e&&typeof e.attributes=="object"}function SZ(e,t,i,r){const s=r.getAttribute(e,t);return s!=null&&i[t]===1?new Date(s):s}(function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"})(cf||(cf={}));const hf={getAttribute:(e,t)=>(o7e(e)?e.attributes:e)[t]};var MZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",WhereClause:y9,defaultAttributeAdapter:hf});class a7e{constructor(t,i){this._cache=new V$(t),this._invalidCache=new V$(i)}get(t,i){const r=`${i.uid}:${t}`,s=this._cache.get(r);if(s)return s;if(this._invalidCache.get(r)!==void 0)return null;try{const l=y9.create(t,i);return this._cache.put(r,l),l}catch{return this._invalidCache.put(r,null),null}}}const bE=new a7e(50,500),Qh="feature-store:unsupported-query",$Z=" as ",l7e=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function HOe(e,t){if(!t)return!0;const i=bE.get(t,e);if(!i)throw new fe(Qh,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new fe(Qh,"where clause is not standard",{where:t});return wE(e,i.fieldNames,"where clause contains missing fields"),!0}function WOe(e,t,i){if(!t)return!0;const r=bE.get(t,e);if(!r)throw new fe(Qh,"invalid SQL expression",{having:t});if(!r.isAggregate)throw new fe(Qh,"having does not contain a valid aggregate function",{having:t});const s=r.fieldNames;if(wE(e,s,"having contains missing fields"),!r.getExpressions().every(l=>{const{aggregateType:f,field:d}=l,v=e.has(d)&&e.get(d).name;return i.some(_=>{const{onStatisticField:M,statisticType:T}=_;return(e.has(M)&&e.get(M).name)===v&&T.toLowerCase().trim()===f})}))throw new fe(Qh,"expressions in having should also exist in outStatistics",{having:t});return!0}function ab(e,t){return e?bE.get(e,t):null}function wE(e,t,i,r=!0){const s=[];for(const l of t)if(l!=="*"&&!e.has(l))if(r){const f=IZ(l);try{const d=ab(f,e);if(!d)throw new fe(Qh,"invalid SQL expression",{where:f});if(!d.isStandardized)throw new fe(Qh,"expression is not standard",{clause:d});wE(e,d.fieldNames,"expression contains missing fields")}catch(d){const v=d&&d.details;if(v&&(v.clause||v.where))throw d;v&&v.missingFields?s.push(...v.missingFields):s.push(l)}}else s.push(l);if(s.length)throw new fe(Qh,i,{missingFields:s})}function IZ(e){return e.split($Z)[0]}function u7e(e){return e.split($Z)[1]}function JOe(e,t){const i=t.get(e);return!!i&&!l7e.has(i.type)}const TZ=new bt({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let uy=class extends Ee{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};m([x({type:hs,json:{write:!0}})],uy.prototype,"baseSymbol",void 0),m([x({types:xz,json:{read:{reader:Sz},write:!0}})],uy.prototype,"colorRamp",void 0),m([x({json:{read:TZ.read,write:TZ.write}})],uy.prototype,"type",void 0),uy=m([X("esri.rest.support.ClassificationDefinition")],uy);const c7e=uy,EZ=new bt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),CZ=new bt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Ga=class extends c7e{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};m([x({json:{write:!0}})],Ga.prototype,"breakCount",void 0),m([x({json:{write:!0}})],Ga.prototype,"classificationField",void 0),m([x({type:String,json:{read:EZ.read,write:EZ.write}})],Ga.prototype,"classificationMethod",void 0),m([x({json:{write:!0}})],Ga.prototype,"normalizationField",void 0),m([x({json:{read:CZ.read,write:CZ.write}})],Ga.prototype,"normalizationType",void 0),m([x({value:null,json:{write:!0}})],Ga.prototype,"standardDeviationInterval",null),m([x({value:null,json:{write:!0}})],Ga.prototype,"definedInterval",null),m([x()],Ga.prototype,"type",void 0),Ga=m([X("esri.rest.support.ClassBreaksDefinition")],Ga);const h7e=Ga,p7e=Pe.getLogger("esri.rest.support.generateRendererUtils");function cy(e,t){return Number(e.toFixed(t))}function d7e(e){const{normalizationTotal:t}=e;return{classBreaks:f7e(e),normalizationTotal:t}}function f7e(e){const t=e.definition,{classificationMethod:i,breakCount:r,normalizationType:s,definedInterval:l}=t,f=[];let d=e.values;if(d.length===0)return[];d=d.sort((M,T)=>M-T);const v=d[0],_=d[d.length-1];if(i==="equal-interval")if(d.length>=r){const M=(_-v)/r;let T=v;for(let A=1;A<r;A++){const k=cy(v+A*M,6);f.push({minValue:T,maxValue:k,label:Bs(T,k,s)}),T=k}f.push({minValue:T,maxValue:_,label:Bs(T,_,s)})}else d.forEach(M=>{f.push({minValue:M,maxValue:M,label:Bs(M,M,s)})});else if(i==="natural-breaks"){const M=y7e(d),T=e.valueFrequency||M.valueFrequency,A=g7e(M.uniqueValues,T,r);let k=v;for(let F=1;F<r;F++)if(M.uniqueValues.length>F){const D=cy(M.uniqueValues[A[F]],6);f.push({minValue:k,maxValue:D,label:Bs(k,D,s)}),k=D}f.push({minValue:k,maxValue:_,label:Bs(k,_,s)})}else if(i==="quantile")if(d.length>=r&&v!==_){let M=v,T=Math.ceil(d.length/r),A=0;for(let k=1;k<r;k++){let F=T+A-1;F>d.length&&(F=d.length-1),F<0&&(F=0),f.push({minValue:M,maxValue:d[F],label:Bs(M,d[F],s)}),M=d[F],A+=T,T=Math.ceil((d.length-A)/(r-k))}f.push({minValue:M,maxValue:_,label:Bs(M,_,s)})}else{let M=-1;for(let T=0;T<d.length;T++){const A=d[T];A!==M&&(M=A,f.push({minValue:M,maxValue:A,label:Bs(M,A,s)}),M=A)}}else if(i==="standard-deviation"){const M=b7e(d),T=w7e(d,M);if(T===0)f.push({minValue:d[0],maxValue:d[0],label:Bs(d[0],d[0],s)});else{const A=v7e(v,_,r,M,T)*T;let k=0,F=v;for(let z=r;z>=1;z--){const H=cy(M-(z-.5)*A,6);f.push({minValue:F,maxValue:H,label:Bs(F,H,s)}),F=H,k++}let D=cy(M+.5*A,6);f.push({minValue:F,maxValue:D,label:Bs(F,D,s)}),F=D,k++;for(let z=1;z<=r;z++)D=k===2*r?_:cy(M+(z+.5)*A,6),f.push({minValue:F,maxValue:D,label:Bs(F,D,s)}),F=D,k++}}else if(i==="defined-interval"){if(!l)return f;const M=d[0],T=d[d.length-1],A=Math.ceil((T-M)/l);let k=M;for(let F=1;F<A;F++){const D=cy(M+F*l,6);f.push({minValue:k,maxValue:D,label:Bs(k,D,s)}),k=D}f.push({minValue:k,maxValue:T,label:Bs(k,T,s)})}return f}function Bs(e,t,i){let r=null;return r=e===t?i&&i==="percent-of-total"?e+"%":e.toString():i&&i==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function y7e(e){const t=[],i=[];let r=Number.MIN_VALUE,s=1,l=-1;for(let f=0;f<e.length;f++){const d=e[f];d===r?(s++,i[l]=s):d!==null&&(t.push(d),r=d,s=1,i.push(s),l++)}return{uniqueValues:t,valueFrequency:i}}function g7e(e,t,i){const r=e.length,s=[];i>r&&(i=r);for(let f=0;f<i;f++)s.push(Math.round(f*r/i-1));s.push(r-1);let l=AZ(s,e,t,i);return m7e(l.mean,l.sdcm,s,e,t,i)&&(l=AZ(s,e,t,i)),s}function AZ(e,t,i,r){let s=[],l=[],f=[],d=0;const v=[],_=[];for(let k=0;k<r;k++){const F=hy(k,e,t,i);v.push(F.sbMean),_.push(F.sbSdcm),d+=_[k]}let M,T=d,A=!0;for(;A||d<T;){A=!1,s=[];for(let k=0;k<r;k++)s.push(e[k]);for(let k=0;k<r;k++)for(let F=e[k]+1;F<=e[k+1];F++)if(M=t[F],k>0&&F!==e[k+1]&&Math.abs(M-v[k])>Math.abs(M-v[k-1]))e[k]=F;else if(k<r-1&&e[k]!==F-1&&Math.abs(M-v[k])>Math.abs(M-v[k+1])){e[k+1]=F-1;break}T=d,d=0,l=[],f=[];for(let k=0;k<r;k++){l.push(v[k]),f.push(_[k]);const F=hy(k,e,t,i);v[k]=F.sbMean,_[k]=F.sbSdcm,d+=_[k]}}if(d>T){for(let k=0;k<r;k++)e[k]=s[k],v[k]=l[k],_[k]=f[k];d=T}return{mean:v,sdcm:_}}function m7e(e,t,i,r,s,l){let f=0,d=0,v=0,_=0,M=!0;for(let T=0;T<2&&M;T++){T===0&&(M=!1);for(let A=0;A<l-1;A++)for(;i[A+1]+1!==i[A+2];){i[A+1]=i[A+1]+1;const k=hy(A,i,r,s);v=k.sbMean,f=k.sbSdcm;const F=hy(A+1,i,r,s);if(_=F.sbMean,d=F.sbSdcm,!(f+d<t[A]+t[A+1])){i[A+1]=i[A+1]-1;break}t[A]=f,t[A+1]=d,e[A]=v,e[A+1]=_,M=!0}for(let A=l-1;A>0;A--)for(;i[A]!==i[A-1]+1;){i[A]=i[A]-1;const k=hy(A-1,i,r,s);v=k.sbMean,f=k.sbSdcm;const F=hy(A,i,r,s);if(_=F.sbMean,d=F.sbSdcm,!(f+d<t[A-1]+t[A])){i[A]=i[A]+1;break}t[A-1]=f,t[A]=d,e[A-1]=v,e[A]=_,M=!0}}return M}function v7e(e,t,i,r,s){let l=Math.max(r-e,t-r)/s/i;return l=l>=1?1:l>=.5?.5:.25,l}function b7e(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/=e.length,t}function w7e(e,t){let i=0;for(let r=0;r<e.length;r++){const s=e[r];i+=(s-t)*(s-t)}return i/=e.length,Math.sqrt(i)}function hy(e,t,i,r){let s=0,l=0;for(let v=t[e]+1;v<=t[e+1];v++){const _=r[v];s+=i[v]*_,l+=_}l<=0&&p7e.warn("Exception in Natural Breaks calculation");const f=s/l;let d=0;for(let v=t[e]+1;v<=t[e+1];v++)d+=r[v]*(i[v]-f)**2;return{sbMean:f,sbSdcm:d}}const _7e="<Null>",x7e="equal-interval",S7e=1,M7e=5,$7e=10,I7e=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,PZ=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),T7e=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function ep(e){return e==null||typeof e=="string"&&!e?_7e:e}function OZ(e){const t=e.normalizationField!=null||e.normalizationType!=null,i=e.minValue!=null||e.maxValue!=null,r=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!i&&!r}function kZ(e){const t=e.returnDistinct?[...new Set(e.values)]:e.values,i=t.filter(s=>s!=null).length,r={count:i};return e.supportsNullCount&&(r.nullcount=t.length-i),e.percentileParams&&(r.median=xE(t,e.percentileParams)),r}function _E(e){const{values:t,useSampleStdDev:i,supportsNullCount:r}=e;let s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,f=null,d=null,v=null,_=null,M=0;const T=e.minValue==null?-1/0:e.minValue,A=e.maxValue==null?1/0:e.maxValue;for(const F of t)Number.isFinite(F)?F>=T&&F<=A&&(f+=F,s=Math.min(s,F),l=Math.max(l,F),M++):typeof F=="string"&&M++;if(M&&f!=null){d=f/M;let F=0;for(const D of t)Number.isFinite(D)&&D>=T&&D<=A&&(F+=(D-d)**2);_=i?M>1?F/(M-1):0:M>0?F/M:0,v=Math.sqrt(_)}else s=null,l=null;const k={avg:d,count:M,max:l,min:s,stddev:v,sum:f,variance:_};return r&&(k.nullcount=t.length-M),e.percentileParams&&(k.median=xE(t,e.percentileParams)),k}function xE(e,t){const{fieldType:i,value:r,orderBy:s,isDiscrete:l}=t,f=RZ(i,s==="desc");if((e=[...e].filter(k=>k!=null).sort((k,F)=>f(k,F))).length===0)return null;if(r<=0)return e[0];if(r>=1)return e[e.length-1];const d=(e.length-1)*r,v=Math.floor(d),_=v+1,M=d%1,T=e[v],A=e[_];return _>=e.length||l||typeof T=="string"||typeof A=="string"?T:T*(1-M)+A*M}function RZ(e,t){const i=t?1:-1,r=E7e(t),s=FZ(t);if(!(!!e&&["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...PZ].includes(e)))return(l,f)=>typeof l=="number"&&typeof f=="number"?r(l,f):typeof l=="string"&&typeof f=="string"?s(l,f):i;if(e==="esriFieldTypeDate")return(l,f)=>{const d=new Date(l).getTime(),v=new Date(f).getTime();return isNaN(d)||isNaN(v)?i:r(d,v)};if(PZ.has(e))return(l,f)=>r(l,f);if(e==="esriFieldTypeString")return(l,f)=>s(l,f);if(e==="esriFieldTypeGUID"||e==="esriFieldTypeGlobalID"){const l=FZ(t);return(f,d)=>l(LZ(f),LZ(d))}return t?(l,f)=>1:(l,f)=>-1}function FZ(e){return e?(t,i)=>(t=t==null?void 0:t.toUpperCase(),i=i==null?void 0:i.toUpperCase(),t>i?-1:t<i?1:0):(t,i)=>(t=t==null?void 0:t.toUpperCase(),i=i==null?void 0:i.toUpperCase(),t<i?-1:t>i?1:0)}function E7e(e){return e?(t,i)=>i-t:(t,i)=>t-i}function LZ(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function C7e(e,t){let i;for(i in e)T7e.includes(i)&&(Number.isFinite(e[i])||(e[i]=null));return t&&["avg","stddev","variance"].forEach(r=>{e[r]!=null&&(e[r]=Math.ceil(e[r]))}),e}function A7e(e){const t={};for(let i of e)(i==null||typeof i=="string"&&i.trim()==="")&&(i=null),t[i]==null?t[i]={count:1,data:i}:t[i].count++;return{count:t}}function SE(e){return(e==null?void 0:e.type)!=="coded-value"?[]:e.codedValues.map(t=>t.code)}function P7e(e,t,i,r){const s=e.count,l=[];if(i&&t){const f=[],d=SE(t[0]);for(const v of d)if(t[1]){const _=SE(t[1]);for(const M of _)if(t[2]){const T=SE(t[2]);for(const A of T)f.push(`${ep(v)}${r}${ep(M)}${r}${ep(A)}`)}else f.push(`${ep(v)}${r}${ep(M)}`)}else f.push(v);for(const v of f)s.hasOwnProperty(v)||(s[v]={data:v,count:0})}for(const f in s){const d=s[f];l.push({value:d.data,count:d.count,label:d.label})}return{uniqueValueInfos:l}}function O7e(e,t,i,r){let s=null;switch(t){case"log":e!==0&&(s=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&r!==0&&(s=e/r*100);break;case"field":Number.isFinite(i)&&i!==0&&(s=e/i);break;case"natural-log":e>0&&(s=Math.log(e));break;case"square-root":e>0&&(s=e**.5)}return s}function NZ(e,t){const i=R7e({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||M7e});return e=k7e(e,t.minValue,t.maxValue),d7e({definition:i,values:e,normalizationTotal:t.normalizationTotal})}function k7e(e,t,i){return t=t!=null?t:-1/0,i=i!=null?i:1/0,e.filter(r=>Number.isFinite(r)&&r>=t&&r<=i)}function R7e(e){const t=e.field,i=e.classificationMethod||x7e,r=e.normalizationType,s=e.normalizationField,l=new h7e;return l.classificationField=t,l.breakCount=e.breakCount,l.classificationMethod=i,l.standardDeviationInterval=i==="standard-deviation"?e.standardDeviationInterval||S7e:void 0,l.normalizationType=r,l.normalizationField=r==="field"?s:void 0,l}function F7e(e,t){let i=e.classBreaks;const r=i.length,s=i[0].minValue,l=i[r-1].maxValue,f=t==="standard-deviation",d=I7e;return i=i.map(v=>{const _=v.label,M={minValue:v.minValue,maxValue:v.maxValue,label:_};if(f&&_){const T=_.match(d).map(A=>+A.trim());T.length===2?(M.minStdDev=T[0],M.maxStdDev=T[1],T[0]<0&&T[1]>0&&(M.hasAvg=!0)):T.length===1&&(_.includes("<")?(M.minStdDev=null,M.maxStdDev=T[0]):_.includes(">")&&(M.minStdDev=T[0],M.maxStdDev=null))}return M}),{minValue:s,maxValue:l,classBreakInfos:i,normalizationTotal:e.normalizationTotal}}function L7e(e,t){const{min:i,max:r,intervals:s}=N7e(e,t),l=s.map((f,d)=>({minValue:s[d][0],maxValue:s[d][1],count:0}));for(const f of e)if(f!=null&&f>=i&&f<=r){const d=j7e(s,f);d>-1&&l[d].count++}return{bins:l,minValue:i,maxValue:r,normalizationTotal:t.normalizationTotal}}function N7e(e,t){const{field:i,classificationMethod:r,standardDeviationInterval:s,normalizationType:l,normalizationField:f,normalizationTotal:d,minValue:v,maxValue:_}=t,M=t.numBins||$7e;let T=null,A=null,k=null;if((!r||r==="equal-interval")&&!l){if(v!=null&&_!=null)T=v,A=_;else{const F=_E({values:e,minValue:v,maxValue:_,useSampleStdDev:!l,supportsNullCount:OZ({normalizationType:l,normalizationField:f,minValue:v,maxValue:_})});T=F.min,A=F.max}k=D7e(T,A,M)}else{const{classBreaks:F}=NZ(e,{field:i,normalizationType:l,normalizationField:f,normalizationTotal:d,classificationMethod:r,standardDeviationInterval:s,minValue:v,maxValue:_,numClasses:M});T=F[0].minValue,A=F[F.length-1].maxValue,k=F.map(D=>[D.minValue,D.maxValue])}return{min:T,max:A,intervals:k}}function j7e(e,t){let i=-1;for(let r=e.length-1;r>=0;r--)if(t>=e[r][0]){i=r;break}return i}function D7e(e,t,i){const r=(t-e)/i,s=[];let l,f=e;for(let d=1;d<=i;d++)l=f+r,l=Number(l.toFixed(16)),s.push([f,d===i?t:l]),f=l;return s}class m9{constructor(t,i,r){var l;this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=(l=t.returnDistinctValues)!=null?l:!1,this.fieldsIndex=r,this.featureAdapter=i;const s=t.outFields;if(s&&!s.includes("*")){this.outFields=s;let f=0;for(const d of s){const v=IZ(d),_=this.fieldsIndex.get(v),M=_?null:ab(v,r),T=_?_.name:u7e(d)||"FIELD_EXP_"+f++;this._fieldDataCache.set(d,{alias:T,clause:M})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):t.length}getAttributes(t){const i=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(i)}getFieldValue(t,i,r){const s=r?r.name:i;let l=null;return this._fieldDataCache.has(s)?l=this._fieldDataCache.get(s).clause:r||(l=ab(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:l})),r?this.featureAdapter.getAttribute(t,s):l.calculateValue(t,this.featureAdapter)}getDataValue(t,i){const r=i.normalizationType,s=i.normalizationTotal;let l=this.getFieldValue(t,i.field,this.fieldsIndex.get(i.field));if(i.field2&&(l=`${ep(l)}${i.fieldDelimiter}${ep(this.getFieldValue(t,i.field2,this.fieldsIndex.get(i.field2)))}`,i.field3&&(l=`${l}${i.fieldDelimiter}${ep(this.getFieldValue(t,i.field3,this.fieldsIndex.get(i.field3)))}`)),r&&Number.isFinite(l)){const f=r==="field"&&i.normalizationField?this.getFieldValue(t,i.normalizationField,this.fieldsIndex.get(i.normalizationField)):null;l=O7e(l,r,f,s)}return l}getExpressionValue(t,i,r,s){const l={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},f=s.createExecContext(l,r);return s.executeFunction(i,f)}getExpressionValues(t,i,r,s){const l={fields:this.fieldsIndex.fields};return t.map(f=>{const d={attributes:this.featureAdapter.getAttributes(f),layer:l},v=s.createExecContext(d,r);return s.executeFunction(i,v)})}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:ab(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testFeature(t,this.featureAdapter)}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:ab(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(t);const r={};for(const s of i){const{alias:l,clause:f}=this._fieldDataCache.get(s);r[l]=f?f.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,l)}return r}_processAttributesForDistinctValues(t){if(ae(t)||!this.returnDistinctValues)return t;const i=this.outFields,r=[];if(i)for(const f of i){const{alias:d}=this._fieldDataCache.get(f);r.push(t[d])}else for(const f in t)r.push(t[f]);const s=`${(i||["*"]).join(",")}=${r.join(",")}`;let l=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++l),l>1?null:t}}const jZ={convertToGEGeometry:V7e,exportPoint:G7e,exportPolygon:U7e,exportPolyline:H7e,exportMultipoint:J7e,exportExtent:K7e};function V7e(e,t){return t==null?null:e.convertJSONToGeometry(t)}class z7e{constructor(t,i,r){this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}}function G7e(e,t,i){const r=new z7e(e.getPointX(t),e.getPointY(t),i),s=e.hasZ(t),l=e.hasM(t);return s&&(r.z=e.getPointZ(t)),l&&(r.m=e.getPointM(t)),r}class q7e{constructor(t,i,r,s){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function U7e(e,t,i){return new q7e(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class B7e{constructor(t,i,r,s){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function H7e(e,t,i){return new B7e(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class W7e{constructor(t,i,r,s){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function J7e(e,t,i){return new W7e(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))}class Z7e{constructor(t,i,r,s,l){this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=s,this.spatialReference=l,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function K7e(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new Z7e(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){const f=e.getZExtent(t);l.zmin=f.vmin,l.zmax=f.vmax}if(s){const f=e.getMExtent(t);l.mmin=f.vmin,l.mmax=f.vmax}return l}const ME=[0,0];function DZ(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,ME),t.z!=null&&(i.z=t.z),t.m!=null&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,ME),[i.xmax,i.ymax]=e(t.xmax,t.ymax,ME),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:VZ(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:VZ(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:zZ(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function VZ(e,t){const i=[];for(const r of e)i.push(zZ(r,t));return i}function zZ(e,t){const i=[];for(const r of e){const s=t(r[0],r[1],[0,0]);i.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return i}async function GZ(e,t){if(!e||!t)return;const i=Array.isArray(e)?e.map(r=>q(r.geometry)?r.geometry.spatialReference:null).filter(q):[e];await RN(i.map(r=>({source:r,dest:t})))}const qZ=DZ.bind(null,wp),UZ=DZ.bind(null,Wf);function v9(e,t,i,r){if(!e||(i||(i=t,t=e.spatialReference),!Cr(t)||!Cr(i)||Xi(t,i)))return e;if(Hf(t,i)){const s=Xa(i)?qZ(e):UZ(e);return s.spatialReference=i,s}return b3(jZ,[e],t,i,null,r)[0]}class Y7e{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,i,r){if(!t||!t.length||!i||!r||Xi(i,r))return t;const s={geometries:t,inSpatialReference:i,outSpatialReference:r,resolve:null};return this._jobs.push(s),new Promise(l=>{s.resolve=l,this._timer===null&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:i,inSpatialReference:r,outSpatialReference:s,resolve:l}=t;Hf(r,s)?Xa(s)?l(i.map(qZ)):l(i.map(UZ)):l(b3(jZ,i,r,s,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const X7e=new Y7e;function ZOe(e,t,i){return X7e.push(e,t,i)}function Q7e(e,t,i){return{objectId:e,target:t,distance:i,type:"vertex"}}function eIe(e,t,i,r,s,l=!1){return{objectId:e,target:t,distance:i,type:"edge",start:r,end:s,draped:l}}const tIe=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),BZ=Object.freeze({}),HZ=new bn,iIe=new bn,$E=new bn,oc={esriGeometryPoint:f7,esriGeometryPolyline:w7,esriGeometryPolygon:_7,esriGeometryMultipoint:b7};function WZ(e,t,i,r=e.hasZ,s=e.hasM){if(ae(t))return null;const l=e.hasZ&&r,f=e.hasM&&s;if(i){const d=qm($E,t,e.hasZ,e.hasM,"esriGeometryPoint",i,r,s);return f7(d,l,f)}return f7(t,l,f)}function IE(e,t,i,r,s,l,f=t,d=i){var T,A,k,F,D,z;const v=t&&f,_=i&&d,M=q(r)?"coords"in r?r:r.geometry:null;if(ae(M))return null;if(s){let H=eve(iIe,M,t,i,e,s,f,d);return l&&(H=qm($E,H,v,_,e,l)),(A=(T=oc[e])==null?void 0:T.call(oc,H,v,_))!=null?A:null}if(l){const H=qm($E,M,t,i,e,l,f,d);return(F=(k=oc[e])==null?void 0:k.call(oc,H,v,_))!=null?F:null}return ive(HZ,M,t,i,f,d),(z=(D=oc[e])==null?void 0:D.call(oc,HZ,v,_))!=null?z:null}async function KOe(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:l,outStatistics:f}=e;if(r)for(let d=0;d<r.length;d++)r[d]=r[d].trim();if(s)for(let d=0;d<s.length;d++)s[d]=s[d].trim();if(l)for(let d=0;d<l.length;d++)l[d]=l[d].trim();if(f)for(let d=0;d<f.length;d++)f[d].onStatisticField&&(f[d].onStatisticField=f[d].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),rIe(e,t,i)}async function rIe(e,t,i){var l;if(!e)return null;let{where:r}=e;if(e.where=r=r&&r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await sIe(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:f}=e.geometry;s=q4(s),s.spatialReference=f}if(s){await GZ(s.spatialReference,i),s=nIe(s,i);const f=(await Vm(fn(s)))[0];if(ae(f))throw BZ;const d="quantizationParameters"in e&&((l=e.quantizationParameters)==null?void 0:l.tolerance)||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,v=d&&JZ(s,i)?{densificationStep:8*d}:void 0,_=f.toJSON(),M=await v9(_,_.spatialReference,i,v);if(!M)throw BZ;M.spatialReference=i,e.geometry=M}return e}function JZ(e,t){if(!e)return!1;const i=e.spatialReference;return(lg(e)||su(e)||ug(e))&&!Xi(i,t)&&!xl(i,t)}function nIe(e,t){const i=e.spatialReference;return JZ(e,t)&&lg(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function sIe(e){const{distance:t,units:i}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const s=r.spatialReference,l=i?tIe.fromJSON(i):ym(s),f=s&&(Vw(s)||Xa(s))?r:await GZ(s,O4).then(()=>v9(r,O4));return(await oIe())(f.spatialReference,f,t,l)}async function oIe(){return(await import("./geometryEngineJSON.d6a1f595.js")).geodesicBuffer}function TE(e){return e&&ZZ in e?JSON.parse(JSON.stringify(e,aIe)):e}const ZZ="_geVersion",aIe=(e,t)=>e!==ZZ?t:void 0;class YOe{constructor(t,i,r){this.items=t,this.query=i,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.fieldsIndex=r.fieldsIndex,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.featureAdapter=r.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const t=new m9(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:r,outStatistics:s}=this.query;if(!(i==null?void 0:i.length))return 1;const f=new Map,d=new Map,v=new Set;for(const _ of s){const{statisticType:M}=_,T=M!=="exceedslimit"?_.onStatisticField:void 0;if(!d.has(T)){const k=[];for(const F of i){const D=this._getAttributeValues(t,F,f);k.push(D)}d.set(T,this._calculateUniqueValues(k,t.returnDistinctValues))}const A=d.get(T);for(const k in A){const{data:F,items:D}=A[k],z=F.join(",");r&&!t.validateItems(D,r)||v.add(z)}}return v.size}async createQueryResponse(){let t;return this.query.outStatistics?t=this.query.outStatistics.some(i=>i.statisticType==="exceedslimit")?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):t=this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry&&(Cr(this.query.outSR)&&!Xi(this.query.geometry.spatialReference,this.query.outSR)?t.queryGeometry=TE(te({spatialReference:this.query.outSR},v9(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR))):t.queryGeometry=TE(te({spatialReference:this.query.outSR},this.query.geometry))),t}createSnappingResponse(t,i){const r=this.featureAdapter,s=KZ(this.hasZ,this.hasM),{point:l}=t,f=typeof t.distance=="number"?t.distance:t.distance.x,d=typeof t.distance=="number"?t.distance:t.distance.y,v={candidates:[]},_=this.geometryType==="esriGeometryPolygon",M=l.z!=null,T=l.m!=null,A=this._getPointCreator(l,M,T,this.spatialReference,i),k=new YZ(null,0),F=new YZ(null,0),D={x:0,y:0,z:0};for(const z of this.items){const H=r.getGeometry(z);if(ae(H))continue;const{coords:J,lengths:Y}=H;if(k.coords=J,F.coords=J,t.types&py.EDGE){let ie=0;for(let re=0;re<Y.length;re++){const ee=Y[re];for(let le=0;le<ee;le++,ie+=s){const me=k;if(me.coordsIndex=ie,le!==ee-1){const we=F;we.coordsIndex=ie+s;const _e=D;lIe(D,l,me,we);const Me=(l.x-_e.x)/f,Se=(l.y-_e.y)/d,He=Me*Me+Se*Se;He<=1&&v.candidates.push(eIe(r.getObjectId(z),A(_e),Math.sqrt(He),A(me),A(we)))}}}}if(t.types&py.VERTEX){const ie=_?J.length-s:J.length;for(let re=0;re<ie;re+=s){const ee=k;ee.coordsIndex=re;const le=(l.x-ee.x)/f,me=(l.y-ee.y)/d,we=le*le+me*me;we<=1&&v.candidates.push(Q7e(r.getObjectId(z),A(ee),Math.sqrt(we)))}}}return v.candidates.sort((z,H)=>z.distance-H.distance),v}_getPointCreator(t,i,r,s,l){const f=q(l)&&!Xi(s,l)?M=>v9(M,s,l):M=>M,{hasZ:d}=this,v=0,_=t.m;return i&&r?d?({x:M,y:T,z:A})=>f({x:M,y:T,z:A,m:_}):({x:M,y:T})=>f({x:M,y:T,z:v,m:_}):i?d?({x:M,y:T,z:A})=>f({x:M,y:T,z:A}):({x:M,y:T})=>f({x:M,y:T,z:v}):r?({x:M,y:T})=>f({x:M,y:T,m:_}):({x:M,y:T})=>f({x:M,y:T})}async createSummaryStatisticsResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:f,minValue:d,maxValue:v,scale:_}=t,M=this.fieldsIndex.isDateField(i),T=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:f,scale:_}),A=OZ({normalizationType:l,normalizationField:s,minValue:d,maxValue:v}),k=this.fieldsIndex.get(i),F={value:.5,fieldType:k==null?void 0:k.type},D=pR(k)?kZ({values:T,supportsNullCount:A,percentileParams:F}):_E({values:T,minValue:d,maxValue:v,useSampleStdDev:!l,supportsNullCount:A,percentileParams:F});return C7e(D,M)}async createUniqueValuesResponse(t){const{field:i,valueExpression:r,domains:s,returnAllCodedValues:l,scale:f}=t,d=await this._getDataValues({field:i,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:r,scale:f}),v=A7e(d);return P7e(v,s,l,t.fieldDelimiter)}async createClassBreaksResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:f,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numClasses:T,scale:A}=t,k=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:f,scale:A}),F=NZ(k,{field:i,normalizationField:s,normalizationType:l,normalizationTotal:f,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numClasses:T});return F7e(F,d)}async createHistogramResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:f,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numBins:T,scale:A}=t,k=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:f,scale:A});return L7e(k,{field:i,normalizationField:s,normalizationType:l,normalizationTotal:f,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numBins:T})}_sortFeatures(t,i,r){if(t.length>1&&i&&i.length)for(const s of i.reverse()){const l=s.split(" "),f=l[0],d=this.fieldsIndex.get(f),v=l[1]&&l[1].toLowerCase()==="desc",_=RZ(d==null?void 0:d.type,v);t.sort((M,T)=>{const A=r(M,f,d),k=r(T,f,d);return _(A,k)})}}_createFeatureQueryResponse(t){const i=this.items,{geometryType:r,hasM:s,hasZ:l,objectIdField:f,spatialReference:d}=this,{outFields:v,outSR:_,quantizationParameters:M,resultRecordCount:T,resultOffset:A,returnZ:k,returnM:F}=t,D=T!=null&&i.length>(A||0)+T,z=v&&(v.includes("*")?[...this.fieldsIndex.fields]:v.map(H=>this.fieldsIndex.get(H)));return{exceededTransferLimit:D,features:this._createFeatures(t,i),fields:z,geometryType:r,hasM:s&&F,hasZ:l&&k,objectIdFieldName:f,spatialReference:TE(_||d),transform:M&&HH(M)||null}}_createFeatures(t,i){const r=new m9(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:l}=this,{orderByFields:f,quantizationParameters:d,returnGeometry:v,returnCentroid:_,maxAllowableOffset:M,resultOffset:T,resultRecordCount:A,returnZ:k=!1,returnM:F=!1}=t,D=l&&k,z=s&&F;let H=[],J=0;const Y=[...i];if(this._sortFeatures(Y,f,(re,ee,le)=>r.getFieldValue(re,ee,le)),v||_){const re=HH(d);if(v&&!_)for(const ee of Y)H[J++]={attributes:r.getAttributes(ee),geometry:IE(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ee),M,re,D,z)};else if(!v&&_)for(const ee of Y)H[J++]={attributes:r.getAttributes(ee),centroid:WZ(this,this.featureAdapter.getCentroid(ee,this),re)};else for(const ee of Y)H[J++]={attributes:r.getAttributes(ee),centroid:WZ(this,this.featureAdapter.getCentroid(ee,this),re),geometry:IE(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ee),M,re,D,z)}}else for(const re of Y){const ee=r.getAttributes(re);ee&&(H[J++]={attributes:ee})}const ie=T||0;if(A!=null){const re=ie+A;H=H.slice(ie,Math.min(H.length,re))}return H}_createExceedsLimitQueryResponse(t){let i=!1,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(const f of t.outStatistics)if(f.statisticType==="exceedslimit"){r=f.maxPointCount!=null?f.maxPointCount:Number.POSITIVE_INFINITY,s=f.maxRecordCount!=null?f.maxRecordCount:Number.POSITIVE_INFINITY,l=f.maxVertexCount!=null?f.maxVertexCount:Number.POSITIVE_INFINITY;break}if(this.geometryType==="esriGeometryPoint")i=this.items.length>r;else if(this.items.length>s)i=!0;else{const f=KZ(this.hasZ,this.hasM),d=this.featureAdapter;i=this.items.reduce((v,_)=>{const M=d.getGeometry(_);return v+(q(M)&&M.coords.length||0)},0)/f>l}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}async _createStatisticsQueryResponse(t){const i={attributes:{}},r=[],s=new Map,l=new Map,f=new Map,d=new Map,v=new m9(t,this.featureAdapter,this.fieldsIndex),_=t.outStatistics,{groupByFieldsForStatistics:M,having:T,orderByFields:A}=t,k=M&&M.length,F=!!k,D=F&&M[0],z=F&&!this.fieldsIndex.get(D);for(const J of _){const{outStatisticFieldName:Y,statisticType:ie}=J,re=J,ee=ie!=="exceedslimit"?J.onStatisticField:void 0,le=ie==="percentile_disc"||ie==="percentile_cont",me=ie==="EnvelopeAggregate"||ie==="CentroidAggregate"||ie==="ConvexHullAggregate",we=F&&k===1&&(ee===D||z)&&ie==="count";if(F){if(!f.has(ee)){const Me=[];for(const Se of M){const He=this._getAttributeValues(v,Se,s);Me.push(He)}f.set(ee,this._calculateUniqueValues(Me,!me&&v.returnDistinctValues))}const _e=f.get(ee);for(const Me in _e){const{count:Se,data:He,items:We,itemPositions:Ot}=_e[Me],kt=He.join(",");if(!T||v.validateItems(We,T)){const ft=d.get(kt)||{attributes:{}};if(me){ft.aggregateGeometries||(ft.aggregateGeometries={});const{aggregateGeometries:Ct,outStatisticFieldName:Oi}=await this._getAggregateGeometry(re,We);ft.aggregateGeometries[Oi]=Ct}else{let Ct=null;if(we)Ct=Se;else{const Oi=this._getAttributeValues(v,ee,s),Ui=Ot.map(_i=>Oi[_i]);Ct=le&&"statisticParameters"in re?this._getPercentileValue(re,Ui):this._getStatisticValue(re,Ui,null,v.returnDistinctValues)}ft.attributes[Y]=Ct}let Ye=0;M.forEach((Ct,Oi)=>ft.attributes[this.fieldsIndex.get(Ct)?Ct:"EXPR_"+ ++Ye]=He[Oi]),d.set(kt,ft)}}}else if(me){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:_e,outStatisticFieldName:Me}=await this._getAggregateGeometry(re,this.items);i.aggregateGeometries[Me]=_e}else{const _e=this._getAttributeValues(v,ee,s);i.attributes[Y]=le&&"statisticParameters"in re?this._getPercentileValue(re,_e):this._getStatisticValue(re,_e,l,v.returnDistinctValues)}r.push({name:Y,alias:Y,type:"esriFieldTypeDouble"})}const H=F?Array.from(d.values()):[i];return this._sortFeatures(H,A,(J,Y)=>J.attributes[Y]),{fields:r,features:H}}async _getAggregateGeometry(t,i){const r=await import("./geometryEngineJSON.d6a1f595.js"),{statisticType:s,outStatisticFieldName:l}=t,{featureAdapter:f,spatialReference:d,geometryType:v,hasZ:_,hasM:M}=this,T=i.map(F=>IE(v,_,M,f.getGeometry(F))),A=r.convexHull(d,T,!0)[0],k={aggregateGeometries:null,outStatisticFieldName:null};if(s==="EnvelopeAggregate"){const F=A?U4(A):q4(r.union(d,T));k.aggregateGeometries=je(te({},F),{spatialReference:d}),k.outStatisticFieldName=l||"extent"}else if(s==="CentroidAggregate"){const F=A?zk(A):koe(q4(r.union(d,T)));k.aggregateGeometries={x:F[0],y:F[1],spatialReference:d},k.outStatisticFieldName=l||"centroid"}else s==="ConvexHullAggregate"&&(k.aggregateGeometries=A,k.outStatisticFieldName=l||"convexHull");return k}_getStatisticValue(t,i,r,s){const{onStatisticField:l,statisticType:f}=t;let d=null;return d=(r==null?void 0:r.has(l))?r.get(l):pR(this.fieldsIndex.get(l))?kZ({values:i,returnDistinct:s}):_E({values:i,minValue:null,maxValue:null,useSampleStdDev:!0}),r&&r.set(l,d),d[f==="var"?"variance":f]}_getPercentileValue(t,i){const{onStatisticField:r,statisticParameters:s,statisticType:l}=t,{value:f,orderBy:d}=s,v=this.fieldsIndex.get(r);return xE(i,{value:f,orderBy:d,fieldType:v==null?void 0:v.type,isDiscrete:l==="percentile_disc"})}_getAttributeValues(t,i,r){if(r.has(i))return r.get(i);const s=this.fieldsIndex.get(i),l=this.items.map(f=>t.getFieldValue(f,i,s));return r.set(i,l),l}_getAttributeDataValues(t,i){return this.items.map(r=>t.getDataValue(r,{field:i.field,field2:i.field2,field3:i.field3,fieldDelimiter:i.fieldDelimiter,normalizationField:i.normalizationField,normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}async _getAttributeExpressionValues(t,i,r){const{arcadeUtils:s}=await il(),l=s.createFunction(i),f=r&&s.getViewInfo(r);return t.getExpressionValues(this.items,l,f,s)}_calculateUniqueValues(t,i){const r={},s=this.items,l=s.length;for(let f=0;f<l;f++){const d=s[f],v=[];for(const M of t)v.push(M[f]);const _=v.join(",");i?r[_]==null&&(r[_]={count:1,data:v,items:[d],itemPositions:[f]}):r[_]==null?r[_]={count:1,data:v,items:[d],itemPositions:[f]}:(r[_].count++,r[_].items.push(d),r[_].itemPositions.push(f))}return r}async _getDataValues(t){const i=new m9(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:s,normalizationField:l,normalizationType:f,normalizationTotal:d,scale:v}=t,_=r?{viewingMode:"map",scale:v,spatialReference:this.query.outSR||this.spatialReference}:null;return r?this._getAttributeExpressionValues(i,r,_):this._getAttributeDataValues(i,{field:s,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:l,normalizationType:f,normalizationTotal:d})}}function lIe(e,t,i,r){const s=r.x-i.x,l=r.y-i.y,f=s*s+l*l,d=(t.x-i.x)*s+(t.y-i.y)*l,v=Math.min(1,Math.max(0,d/f));e.x=i.x+s*v,e.y=i.y+l*v}function KZ(e,t){return e?t?4:3:t?3:2}var py;(function(e){e[e.NONE=0]="NONE",e[e.EDGE=1]="EDGE",e[e.VERTEX=2]="VERTEX"})(py||(py={}));class YZ{constructor(t,i){this.coords=t,this.coordsIndex=i}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}function EE({start:e,end:t,type:i},r,s){const l=[],f=r,d=ur(ac,t,e),v=ur(lc,e,f),_=jh(d),M=2*zu(d,v),T=M*M-4*_*(jh(v)-s*s);if(T===0){const A=-M/(2*_);(i===qa.PLANE||A>=0)&&l.push(Ra(Ar(0,0,r[2]),e,d,A))}else if(T>0){const A=Math.sqrt(T),k=(-M+A)/(2*_);(i===qa.PLANE||k>=0)&&l.push(Ra(Ar(0,0,r[2]),e,d,k));const F=(-M-A)/(2*_);(i===qa.PLANE||F>=0)&&l.push(Ra(Ar(0,0,r[2]),e,d,F))}return l}function CE(e,t){const i=e.start,r=e.end,s=ur(ac,r,i),l=jr(lc,-s[1],s[0],0),f=t.start,d=t.end,v=En(ub,d,f),_=pi(v,l),M=jr(rK,i[0],i[1],0),T=En(nK,M,f),A=pi(T,l);if(Math.abs(_)<Fn)return[];const k=Op(sK,f,v,A/_);if(t.type===hr.RAY){const F=En(b9,k,f);if(pi(F,v)<-Fn)return[]}if(e.type===qa.HALF_PLANE){const F=hx(b9,k,i);if(zu(F,s)<-Fn)return[]}return[zc(k)]}function AE(e,t){return OE(lb(w9,t[2],e),t)}function XZ(e,t){const i=0,r=iK(lb(w9,i,e),lb(pIe,i,t)),s=[];for(const l of r)s.push(yB(l));return s}function QZ(e,t){return PE(e,lb(w9,e[2],t))}function uIe(e,t){return eK(lb(w9,e[2],t),e)}function cIe(e,t,i){const r=jr(ac,e[0],e[1],t[2]),s=Xr(lc,r,t),l=i/ko(s);return Op(et(),t,s,l)}function PE(e,{start:t,end:i,type:r}){const s=En(ac,e,t),l=En(lc,i,t),f=pi(s,l)/pi(l,l);return Op(et(),t,l,r===hr.RAY?Math.max(f,0):f)}function eK({start:e,end:t,type:i},r){const s=En(ac,r,e),l=En(lc,t,e);if(i===hr.RAY&&pi(l,s)<-Fn)return u0(e,r);const f=Qr(ub,l,s);return g2(f)/g2(l)}function tK({start:e,end:t,type:i},r,s){const l=[];if(sl(e[2],r[2],Fn)&&sl(t[2],r[2],Fn)){const f=e,d=r,v=ur(ac,t,f),_=ur(lc,f,d),M=jh(v),T=2*zu(v,_),A=T*T-4*M*(jh(_)-s*s);if(A===0){const k=-T/(2*M);(i===hr.LINE||k>=0)&&l.push(Ra(Ar(0,0,r[2]),f,v,k))}else if(A>0){const k=Math.sqrt(A),F=(-T+k)/(2*M);(i===hr.LINE||F>=0)&&l.push(Ra(Ar(0,0,r[2]),f,v,F));const D=(-T-k)/(2*M);(i===hr.LINE||D>=0)&&l.push(Ra(Ar(0,0,r[2]),f,v,D))}}else{const f=En(ac,t,e);if(sl(f[2],0,Fn))return l;const d=(r[2]-e[2])/f[2],v=Op(lc,e,f,d);if(i===hr.RAY){const _=En(ub,v,e);if(pi(f,_)<-Fn)return l}for(const _ of kE(r,s,v))l.push(_)}return l}function iK(e,t){const i=e.start,r=e.end,s=t.start,l=t.end,f=En(ac,r,i),d=En(lc,l,s),v=En(ub,s,i),_=Qr(rK,f,d),M=pi(v,_);if(!sl(M,0,Fn))return[];const T=m2(_);if(sl(T,0,Fn))return[];const A=Qr(nK,v,d),k=pi(A,_)/T,F=Op(sK,i,f,k);if(e.type===hr.RAY){const D=En(b9,F,i);if(pi(f,D)<-Fn)return[]}if(t.type===hr.RAY){const D=En(b9,F,s);if(pi(d,D)<-Fn)return[]}return[zc(F)]}function OE({start:e,end:t,type:i},r){const s=En(ac,r,e),l=En(lc,t,e),f=Qr(ub,l,s);if(m2(f)/m2(l)<Fn)switch(i){case hr.LINE:return[zc(r)];case hr.RAY:return pi(l,s)<-Fn?[]:[zc(r)]}return[]}function kE(e,t,i){return sl(e[2],i[2],Fn)&&sl(Gc(i,e),t*t,Fn)?[zc(i)]:[]}function lb(e,t,{start:i,end:r,type:s}){return jr(e.start,i[0],i[1],t),jr(e.end,r[0],r[1],t),e.type=hIe[s],e}var qa;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(qa||(qa={}));const hIe={[qa.PLANE]:hr.LINE,[qa.HALF_PLANE]:hr.RAY},Fn=1e-6,ac=et(),lc=et(),ub=et(),rK=et(),nK=et(),sK=et(),b9=et(),w9={start:et(),end:et(),type:hr.LINE},pIe={start:et(),end:et(),type:hr.LINE};class pf{constructor(t){this.coordinateHelper=t}intersect(t){return gIe(this,t)}}class dIe extends pf{constructor(t,i){super(t),this.point=i,this.pointXYZ=t.toXYZ(i)}equals(t){return dy(t)&&Xn(this.point,t.point)}check(t){const i=this.coordinateHelper.toXYZ(t,uc);return Gc(i,this.pointXYZ)<mo.pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}}class oK extends pf{constructor(t,i,r,s){super(t),this.start=i,this.end=r,this.type=s,this.startXYZ=t.toXYZ(i),this.endXYZ=t.toXYZ(r),this.lineLike={start:this.startXYZ,end:this.endXYZ,type:this.type}}equals(t){return df(t)&&this.type===t.type&&Xn(this.start,t.start)&&Xn(this.end,t.end)}check(t){const i=this.coordinateHelper.toXYZ(t,uc);return eK(this.lineLike,i)<mo.pointOnLineThreshold}closestTo(t){const i=this.coordinateHelper,r=i.toXYZ(t,uc),s=PE(r,this.lineLike);return i.fromXYZ(s)}}class fIe extends oK{constructor(t,i,r){super(t,i,r,hr.LINE)}}class _9 extends pf{constructor(t,i,r,s){super(t),this.intersection=i,this.first=r,this.second=s}equals(t){return t instanceof _9&&this.first.equals(t.first)&&this.second.equals(t.second)}check(){return!1}closestTo(){return this.coordinateHelper.clone(this.intersection)}}class RE extends pf{constructor(t,i,r,s){super(t),this.basePoint=i,this.first=r,this.second=s}equals(t){return t instanceof RE&&this.first.equals(t.first)&&this.second.equals(t.second)}check(){return!1}closestTo(t){const i=this.basePoint,r=this.coordinateHelper,s=r.toXYZ(t,uc),l=jr(vIe,i[0],i[1],s[2]);return r.fromXYZ(l)}}class aK extends pf{constructor(t,i,r){super(t),this.center=i,this.radius=r,this.centerXYZ=t.toXYZ(i)}equals(t){return fy(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}check(){return!1}closestTo(t){const i=this.coordinateHelper,r=i.toXYZ(t,uc),s=cIe(r,this.centerXYZ,this.radius);return s[2]=i.getZ(t,this.centerXYZ[2]),i.fromXYZ(s)}}class FE extends pf{constructor(t,i,r,s){super(t),this.start=i,this.end=r,this.type=s,this.planeLike={start:i,end:r,type:s}}equals(t){return ff(t)&&this.type===t.type&&Xn(this.start,t.start)&&Xn(this.end,t.end)}check(t){const i=this.coordinateHelper.toXYZ(t,uc);return uIe(i,this.planeLike)<mo.pointOnLineThreshold}closestTo(t){const i=this.coordinateHelper,r=i.toXYZ(t,uc),s=QZ(r,this.planeLike);return i.fromXYZ(s)}closestEndTo(t){const{start:i,end:r}=this;return Math.sign(zu(ur(bIe,r,i),ur(wIe,t,i)))>0?r:i}}class lK extends FE{constructor(t,i,r){super(t,i,r,qa.HALF_PLANE)}}class uK extends FE{constructor(t,i,r){super(t,i,r,qa.PLANE)}}class yIe extends pf{constructor(t,i,r,s){super(t),this.start=i,this.end=r,this.getZ=s,this.planeLike={start:i,end:r,type:qa.HALF_PLANE}}equals(t){return yf(t)&&Xn(this.start,t.start)&&Xn(this.end,t.end)&&this.getZ===t.getZ}check(t){const i=this.coordinateHelper.toXYZ(t,uc),r=cK(this,i);return Gc(i,r)<mo.pointThreshold}closestTo(t){const i=this.coordinateHelper,r=cK(this,i.toXYZ(t,uc));return i.fromXYZ(r)}addIfOnTheGround(t,i){for(const r of i){const s=this.getZ(r[0],r[1],r[2]);q(s)&&Math.abs(r[2]-s)<Fn&&(r[2]=s,t.push(r))}}}function cK(e,t){const i=QZ(t,e.planeLike),r=e.getZ(t[0],t[1],t[2]);return q(r)&&(i[2]=r),i}function gIe(e,t){let i=[];if(dy(e)){const{pointXYZ:r}=e;df(t)?i=OE(t.lineLike,r):fy(t)?i=kE(t.centerXYZ,t.radius,r):ff(t)?i=AE(t.planeLike,r):yf(t)&&(i=cb(t,e))}else if(df(e)){const{lineLike:r}=e;dy(t)?i=OE(r,t.pointXYZ):df(t)?i=iK(r,t.lineLike):fy(t)?i=tK(r,t.centerXYZ,t.radius):ff(t)?i=CE(t.planeLike,r):yf(t)&&(i=cb(t,e))}else if(fy(e)){const{centerXYZ:r,radius:s}=e;df(t)?i=tK(t.lineLike,r,s):dy(t)?i=kE(r,s,t.pointXYZ):ff(t)?i=EE(t.planeLike,r,s):yf(t)&&(i=cb(t,e))}else if(ff(e)){const{planeLike:r,coordinateHelper:s}=e;if(ff(t))return XZ(r,t.planeLike).map(l=>new RE(s,s.fromXYZ(l),e,t));dy(t)?i=AE(r,t.pointXYZ):df(t)?i=CE(r,t.lineLike):fy(t)?i=EE(r,t.centerXYZ,t.radius):yf(t)&&(i=cb(t,e))}else yf(e)&&(i=cb(e,t));return mIe(i,e,t)}function cb(e,t){const{planeLike:i,getZ:r}=e,s=[];if(dy(t))e.addIfOnTheGround(s,AE(i,t.pointXYZ));else if(df(t))e.addIfOnTheGround(s,CE(i,t.lineLike));else if(fy(t))e.addIfOnTheGround(s,EE(i,t.centerXYZ,t.radius));else if(ff(t)||yf(t))for(const[l,f]of XZ(i,t.planeLike)){const d=r(l,f,0);q(d)&&s.push(Ar(l,f,d))}return s}function mIe(e,t,i){const r=t.coordinateHelper;return e.map(s=>new _9(r,r.fromXYZ(s),t,i))}function dy(e){return e instanceof dIe}function df(e){return e instanceof oK}function fy(e){return e instanceof aK}function ff(e){return e instanceof FE}function yf(e){return e instanceof yIe}const uc=et(),vIe=et(),bIe=Wt(),wIe=Wt();class yy{constructor(t,i,r,s,l){this.coordinateHelper=t,this.targetPoint=i,this.constraint=r,this.elevationInfo=s,this.domain=l}}class hK extends yy{constructor({coordinateHelper:t,targetPoint:i,objectId:r,constraint:s,elevationInfo:l}){super(t,i,s,l,Sn.FEATURE),this.objectId=r}}class _Ie extends hK{constructor(t){super(je(te({},t),{constraint:new fIe(t.coordinateHelper,t.edgeStart,t.edgeEnd)}))}get hints(){return[new Xo(Da.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo,this.domain)]}}class pK extends yy{constructor({coordinateHelper:t,targetPoint:i,constraint:r,previousVertex:s,otherVertex:l,otherVertexType:f,objectId:d,elevationInfo:v}){super(t,i,r,v,Sn.SELF),this.previousVertex=s,this.otherVertex=l,this.otherVertexType=f,this.objectId=d}get hints(){const t=this.previousVertex,i=this.otherVertexType===gy.CENTER?this.otherVertex:this.targetPoint,r=this.otherVertexType===gy.CENTER?this.targetPoint:this.otherVertex,s=this.elevationInfo;return[new Xo(Da.TARGET,i,r,s,this.domain),new Xo(Da.REFERENCE,t,i,s,this.domain),new Uv(this.previousVertex,i,r,s,this.domain)]}}var gy;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(gy||(gy={}));function dK(e,t,i,r,s=et()){const l=t.toXYZ(e);return l[2]=J1(r,l,t.spatialReference,i)||0,r.renderCoordsHelper.toRenderCoords(l,t.spatialReference,s),s}function xIe(e,t,i,r,s=et()){const l=Is(NE,e);return l[2]=J1(r,l,t,i)||0,r.renderCoordsHelper.toRenderCoords(l,t,s),s}function Hs(e,t,i,r){return LE(t.toXYZ(e),t.spatialReference,i,r)}function LE(e,t,i,r){return r.type==="2d"?(x9.x=e[0],x9.y=e[1],x9.spatialReference=t,r.toScreen(x9)):(xIe(e,t,i,r,NE),r.state.camera.projectToScreen(NE,jE),An(jE[0],jE[1]))}function XOe(e,t,i,r,s,l,f){if(r.mode==="absolute-height")return dK(e,i,r,s,l),void dK(t,i,r,s,f);const d=i.toXYZ(e),v=i.toXYZ(t),_=J1(s,d,i.spatialReference,r),M=J1(s,v,i.spatialReference,r),T=(_==null?M:M==null?_:Math.min(_,M))||0;d[2]=T,v[2]=T,s.renderCoordsHelper.toRenderCoords(d,i.spatialReference,l),s.renderCoordsHelper.toRenderCoords(v,i.spatialReference,f)}const x9=new dt,NE=et(),jE=Og();let tp=class extends pd{constructor(e){super(e),this.options=null,this._domain=Sn.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}get updating(){return Gy(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,t=new Map;if(q(this.options)&&q(this.options.featureSources))for(const i of this.options.featureSources.items){const r=i.layer.uid,s=e.get(r);if(s){e.delete(r),t.set(r,s);continue}if(!i.layer.loaded){this.updatingHandles.addPromise(i.layer.load());continue}const l=this._createSourceInfo(i);q(l)&&t.set(r,l)}for(const[,i]of e)i.destroy();return t}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),bl),q(this.view)&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,t){for(const[,i]of this.snappingSources)i.snappingSource.layerSource.layer===e&&(i.layerView=t)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,i,r){if(!(t&this._domain)||ae(this.options)||!this.options.effectiveFeatureEnabled)return[];const s=[],l=this._computeScreeenSizeDistanceParameters(e,i),f={distance:l,point:e,coordinateHelper:i.coordinateHelper,types:this._types};for(const[,{snappingSource:v,layerView:_}]of this.snappingSources)!v.layerSource.enabled||q(_)&&_.suspended||s.push(v.fetchCandidates(f,r).then(M=>M.filter(T=>!this._candidateIsExcluded(v,T,i.excludeFeature))));const d=(await lk(s)).flat();return this._addRightAngleCandidates(d,e,l,i),fr(r),FT(e,d,i.coordinateHelper),d}_addRightAngleCandidates(e,t,i,r){var M,T,A,k,F,D,z,H;const s=q(r.vertexHandle)?(T=(M=r.vertexHandle.rightEdge)==null?void 0:M.rightVertex)==null?void 0:T.pos:q(r.editGeometryOperations)&&r.editGeometryOperations.data.type==="polygon"?(k=Jt((A=r.editGeometryOperations.data.components[0])==null?void 0:A.getFirstVertex()))==null?void 0:k.pos:null,l=q(r.vertexHandle)?(D=(F=r.vertexHandle.leftEdge)==null?void 0:F.leftVertex)==null?void 0:D.pos:q(r.editGeometryOperations)?(H=Jt((z=r.editGeometryOperations.data.components[0])==null?void 0:z.getLastVertex()))==null?void 0:H.pos:null,{view:f}=this,d=Ir(s,f,r),v=Ir(l,f,r),_=e.length;for(let J=0;J<_;J++)this._addRightAngleCandidate(e[J],v,t,i,r,e),this._addRightAngleCandidate(e[J],d,t,i,r,e)}_addRightAngleCandidate(e,t,i,r,s,l){const f=e instanceof _Ie,d=f&&q8(e.constraint.start,e.constraint.end);if(ae(t)||!f||d)return;const v=e.constraint.closestTo(t),_=(v[0]-i[0])/r.x,M=(v[1]-i[1])/r.y;if(_*_+M*M<=1){const T=s.coordinateHelper,A=new pK({coordinateHelper:T,targetPoint:v,otherVertex:t,otherVertexType:gy.NEXT,previousVertex:e.constraint.start,constraint:new lK(T,t,v),objectId:e.objectId,elevationInfo:e.elevationInfo});l.push(A)}}_computeScreeenSizeDistanceParameters(e,t){let i=q(this.options)?this.options.distance*(t.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return ae(this.view)?{x:i,y:i,z:i,distance:i}:this.view.type==="2d"?(i*=this.view.resolution,{x:i,y:i,z:i,distance:i}):this._computeScreenSizeDistanceParameters3D(e,i,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,i,r){const{coordinateHelper:s,elevationInfo:l}=r,{spatialReference:f}=s,d=s.hasZ()?Ki:l,v=s.toXYZ(e,MIe);v[2]=J1(i,v,f,d,Ki),i.renderCoordsHelper.toRenderCoords(v,f,fK);const _=i.state.camera.computeScreenPixelSizeAt(fK),M=_*i.renderCoordsHelper.unitInMeters/i.mapCoordsHelper.unitInMeters,T=t*M,A=LE(v,f,Ki,i),k=DE(A,v,M,0,0,i,r),F=DE(A,v,0,M,0,i,r),D=DE(A,v,0,0,M,i,r);return{x:k===0?0:T/k,y:F===0?0:T/F,z:D===0?0:T/D,distance:_*t}}get _types(){return py.EDGE|py.VERTEX}_candidateIsExcluded(e,t,i){if(ae(i))return!1;const r=this._getCandidateObjectId(t);if(ae(r))return!1;const s=e.layerSource.layer;return s.type==="graphics"?i.uid===r:i.sourceLayer===s&&!(!i.attributes||!("objectIdField"in s))&&i.attributes[s.objectIdField]===r}_getCandidateObjectId(e){return e instanceof hK?e.objectId:null}_createSourceInfo(e){const t=this._createFeatureSnappingSourceType(e);if(ae(t))return null;if("loading"in t)return this.updatingHandles.addPromise(t.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const i=q(this.view)?this.view.allLayerViews.find(r=>r.layer===e.layer):null;return new SIe(t.source,i)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(ae(t)||t.type!=="3d")return null;const i=this._getSourceModule("scene");return q(i.module)?{source:new i.module.SceneLayerSnappingSource({layerSource:e,view:t})}:{loading:i.loader}}_createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source.type){case"feature-layer":case"oriented-imagery":{const t=this._getSourceModule("featureService");return q(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const t=this._getSourceModule("featureCollection");return q(t.module)?{source:new t.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:t.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const t=this._getSourceModule("graphics");return q(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const t=this._getSourceModule("notes");return q(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>q(e.layer.sublayers)?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_getSourceModule(e){const t=this._sourceModules[e];if(ae(t.loader)){const i=this._loadSourceModule(e).then(r=>{t.module=r});return t.loader=i,{module:t.module,loader:i}}return{module:t.module,loader:t.loader}}_loadSourceModule(e){const t=this.updatingHandles;switch(e){case"featureService":return t.addPromise(import("./FeatureServiceSnappingSource.e4d1f687.js"));case"featureCollection":return t.addPromise(import("./FeatureCollectionSnappingSource.649df69b.js"));case"graphics":case"notes":return t.addPromise(import("./GraphicsSnappingSource.d642b872.js"));case"scene":return t.addPromise(import("./SceneLayerSnappingSource.b76942be.js"))}return null}};m([x({constructOnly:!0})],tp.prototype,"spatialReference",void 0),m([x({constructOnly:!0})],tp.prototype,"view",void 0),m([x()],tp.prototype,"options",void 0),m([x({readOnly:!0})],tp.prototype,"updating",null),m([x({readOnly:!0})],tp.prototype,"snappingSources",null),tp=m([X("esri.views.interactive.snapping.FeatureSnappingEngine")],tp);class SIe{constructor(t,i){this.snappingSource=t,this.layerView=i,this.handles=new Jr;const r=this.snappingSource.layerSource.layer;if("refresh"in r){const s=r;this.handles.add(s.on("refresh",()=>t.refresh()))}this.handles.add([Ve(()=>t.updating,s=>t.layerSource.updating=s,Ps),Ve(()=>t.availability,s=>t.layerSource.availability=s,Ps)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}function DE(e,t,i,r,s,l,{coordinateHelper:f}){const d=Is($Ie,t);d[0]+=i,d[1]+=r,d[2]+=s;const v=LE(d,f.spatialReference,Ki,l);return aSe(v,e)}const MIe=et(),fK=et(),$Ie=et();class S9{constructor(t,i){this.view=t,this.options=i,this.squaredShortLineThreshold=mo.shortLineThreshold*mo.shortLineThreshold}snap(t,i){return q(i.vertexHandle)?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(t,i):this.snapNewVertex(t,i)}edgeExceedsShortLineThreshold(t,i){return this.exceedsShortLineThreshold(t.leftVertex.pos,t.rightVertex.pos,i)}exceedsShortLineThreshold(t,i,{elevationInfo:r,editGeometryOperations:s}){const l=s.data.coordinateHelper;return this.squaredShortLineThreshold===0||Qd(Hs(i,l,r,this.view),Hs(t,l,r,this.view))>this.squaredShortLineThreshold}squaredProximityThreshold(t){return t==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:i}=this.options,r=t*i;return r*r}}class IIe extends yy{constructor({coordinateHelper:t,lineStart:i,lineEnd:r,targetPoint:s,elevationInfo:l}){super(t,s,new uK(t,i,r),l,Sn.SELF),this._referenceLineHint=new Xo(Da.REFERENCE_EXTENSION,i,r,l,this.domain)}get hints(){return[this._referenceLineHint,new Xo(Da.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}class TIe extends S9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,l=[];if(s<1)return l;const f=i.coordinateHelper,d=Hs(t,f,Ki,this.view),{view:v}=this,_=r.edges[s-1];let M=_;do{if(this.edgeExceedsShortLineThreshold(M,i)){const T=Nl(M,v,i);this._processCandidateProposal(T.left,T.right,t,d,i,l)}M=M.leftVertex.leftEdge}while(M&&M!==_);return l}snapExistingVertex(t,i){const r=[],s=Jt(i.vertexHandle),l=s.component;if(l.edges.length<2)return r;const{view:f}=this,{coordinateHelper:d}=i,v=Hs(t,d,Ki,f),_=s.leftEdge,M=s.rightEdge;_&&M&&this.edgeExceedsShortLineThreshold(_,i)&&this.edgeExceedsShortLineThreshold(M,i)&&this._processCandidateProposal(Ir(_.leftVertex.pos,f,i),Ir(M.rightVertex.pos,f,i),t,v,i,r);const T=l.edges[0];let A=T;do{if(A!==s.leftEdge&&A!==s.rightEdge&&this.edgeExceedsShortLineThreshold(A,i)){const k=Nl(A,f,i);this._processCandidateProposal(k.left,k.right,t,v,i,r)}A=A.rightVertex.rightEdge}while(A&&A!==T);return r}_processCandidateProposal(t,i,r,s,l,f){const{coordinateHelper:d,pointer:v}=l;d.toXYZ(t,yK),d.toXYZ(i,gK);const _=d.toXYZ(r,CIe),M=PE(_,EIe),T=d.fromXYZ(M);Qd(s,Hs(T,d,Ki,this.view))<this.squaredProximityThreshold(v)&&f.push(new IIe({coordinateHelper:d,lineStart:t,lineEnd:i,targetPoint:T,elevationInfo:d.hasZ()?Ki:null}))}}const yK=et(),gK=et(),EIe={start:yK,end:gK,type:hr.LINE},CIe=et();class AIe extends yy{constructor({coordinateHelper:t,referenceLine:i,lineStart:r,targetPoint:s,elevationInfo:l}){const f=t.toXYZ(r,PIe),d=t.toXYZ(i.left,OIe),v=t.toXYZ(i.right,kIe);Xr(f,Qs(f,f,v),d),super(t,s,new uK(t,r,t.fromXYZ(f)),l,Sn.SELF),this._referenceLines=[{edge:i,fadeLeft:!0,fadeRight:!0}]}get hints(){const t=this.elevationInfo;return[new Xo(Da.TARGET,this.constraint.start,this.targetPoint,t,this.domain),new Nx(this.constraint.start,this.targetPoint,t,this.domain),...this._referenceLines.map(i=>new Xo(Da.REFERENCE,i.edge.left,i.edge.right,t,this.domain,i.fadeLeft,i.fadeRight))]}addReferenceLine(t){const i={edge:t,fadeLeft:!0,fadeRight:!0},{coordinateHelper:r}=this;this._referenceLines.forEach(s=>{r.equals(t.right,s.edge.left)&&(s.fadeLeft=!1,i.fadeRight=!1),r.equals(t.right,s.edge.right)&&(s.fadeRight=!1,i.fadeRight=!1),r.equals(t.left,s.edge.right)&&(s.fadeRight=!1,i.fadeLeft=!1),r.equals(t.left,s.edge.left)&&(s.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}}const PIe=et(),OIe=et(),kIe=et();class RIe extends S9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,l=r.vertices.length,f=[];if(s<2)return f;const{view:d}=this,v=Hs(t,i.coordinateHelper,Ki,d),_=Ir(r.vertices[l-1].pos,d,i),M=Ir(r.vertices[0].pos,d,i),T=r.edges[s-1];let A=T;do{if(this.edgeExceedsShortLineThreshold(A,i)){const k=Nl(A,d,i);this._checkEdgeForParalleLines(k,_,t,v,i,f),this._checkEdgeForParalleLines(k,M,t,v,i,f)}A=A.leftVertex.leftEdge}while(A&&A!==T);return f}snapExistingVertex(t,i){const r=[],s=Jt(i.vertexHandle),l=s.component;if(l.edges.length<3)return r;const{view:f}=this,d=Hs(t,i.coordinateHelper,Ki,f),v=s.leftEdge,_=s.rightEdge,M=l.vertices[0],T=Ir(M.pos,f,i),A=l.vertices.length,k=l.vertices[A-1],F=Ir(k.pos,f,i),D=l.edges[0];let z=D;do{if(z!==v&&z!==_&&this.edgeExceedsShortLineThreshold(z,i)){const H=Nl(z,f,i);v&&this._checkEdgeForParalleLines(H,Ir(v.leftVertex.pos,f,i),t,d,i,r),_&&this._checkEdgeForParalleLines(H,Ir(_.rightVertex.pos,f,i),t,d,i,r),s===M?this._checkEdgeForParalleLines(H,F,t,d,i,r):s===k&&this._checkEdgeForParalleLines(H,T,t,d,i,r)}z=z.rightVertex.rightEdge}while(z&&z!==D);return r}_checkEdgeForParalleLines(t,i,r,s,l,f){const d=t.left,v=t.right;if(HT(my,i,d,v),C1(my,i)<mo.parallelLineThreshold)return;HT(my,r,d,v,i);const{coordinateHelper:_,pointer:M}=l,T=_.fromXYZ(my,_.getZ(r,0));if(Qd(s,Hs(T,_,Ki,this.view))<this.squaredProximityThreshold(M)){if(this._parallelToPreviousCandidate(t,f))return;f.push(new AIe({coordinateHelper:_,referenceLine:t,lineStart:i,targetPoint:T,elevationInfo:_.hasZ()?Ki:null}))}}_parallelToPreviousCandidate(t,i){const r=t.left,s=t.right;for(const l of i)if(HT(my,s,l.constraint.start,l.constraint.end,r),C1(my,s)<mo.parallelLineThreshold)return l.addReferenceLine(t),!0;return!1}}const my=Wt();class FIe extends S9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.vertices.length,l=[];if(s<2)return l;const{view:f}=this,d=Hs(t,i.coordinateHelper,Ki,f),v=r.vertices[s-1];if(this.edgeExceedsShortLineThreshold(v.leftEdge,i)){const M=Ir(v.pos,f,i),T=Nl(v.leftEdge,f,i);this._checkForSnappingCandidate(l,T,M,t,T.left,M,i,t,d)}const _=r.vertices[0];if(this.edgeExceedsShortLineThreshold(_.rightEdge,i)){const M=Ir(_.pos,f,i),T=Nl(_.rightEdge,f,i);this._checkForSnappingCandidate(l,T,M,t,T.right,M,i,t,d)}return l}snapExistingVertex(t,i){const r=[],s=Jt(i.vertexHandle),l=s.component,f=l.vertices.length;if(f<3)return r;const{view:d}=this,v=Hs(t,i.coordinateHelper,Ki,d),_=s.leftEdge,M=s.rightEdge,T=l.vertices[0],A=l.vertices[f-1];if(!_){const k=T.rightEdge.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(k,i)){const F=Nl(k,d,i),D=Ir(T.rightEdge.rightVertex.pos,d,i);this._checkForSnappingCandidate(r,F,D,t,F.right,D,i,t,v)}return r}if(!M){const k=A.leftEdge.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(k,i)){const F=Nl(k,d,i),D=Ir(A.leftEdge.leftVertex.pos,d,i);this._checkForSnappingCandidate(r,F,D,t,F.left,D,i,t,v)}return r}if(_&&_.leftVertex.leftEdge){const k=_.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(k,i)){const F=Nl(k,d,i),D=Ir(_.leftVertex.pos,d,i);this._checkForSnappingCandidate(r,F,D,t,F.left,D,i,t,v)}}if(M&&M.rightVertex.rightEdge){const k=M.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(k,i)){const F=Nl(k,d,i),D=Ir(M.rightVertex.pos,d,i);this._checkForSnappingCandidate(r,F,D,t,F.right,D,i,t,v)}}return r}_checkForSnappingCandidate(t,i,r,s,l,f,d,v,_){const{coordinateHelper:M,pointer:T}=d;ur(hb,i.right,i.left);const A=jr(jIe,hb[1],-hb[0],0),k=zu(A,ur(hb,s,r))/jh(A),F=M.fromXYZ(Ra(hb,f,A,k),M.getZ(v,0));if(Qd(_,Hs(F,M,Ki,this.view))<this.squaredProximityThreshold(T)){const D=M.toXYZ(f,LIe),z=Op(NIe,D,A,Math.sign(k)),H=M.fromXYZ(z);t.push(new pK({coordinateHelper:M,targetPoint:F,constraint:new lK(M,f,H),previousVertex:l,otherVertex:f,otherVertexType:gy.CENTER,elevationInfo:M.hasZ()?Ki:null}))}}}const hb=Wt(),LIe=et(),NIe=et(),jIe=et();class DIe extends yy{constructor({coordinateHelper:t,targetPoint:i,point1:r,point2:s,elevationInfo:l}){super(t,i,new aK(t,t.arrayToVector(cx(VIe,r,s,.5)),.5*Vu(r,s)),l,Sn.SELF),this._p1=r,this._p2=s}get hints(){const t=this.elevationInfo;return[new Xo(Da.REFERENCE,this.targetPoint,this._p1,t,this.domain),new Xo(Da.REFERENCE,this.targetPoint,this._p2,t,this.domain),new Uv(this._p1,this.targetPoint,this._p2,t,this.domain)]}}const VIe=Wt();class zIe extends S9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=[],l=r.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||l<2)return s;const{view:f}=this,d=r.vertices[0],v=r.vertices[l-1],_=Ir(d.pos,f,i),M=Ir(v.pos,f,i);return this._processCandidateProposal(_,M,t,i,s),s}snapExistingVertex(t,i){const r=[],s=Jt(i.vertexHandle),l=s.component;if(l.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(s.index===0||s.index===l.vertices.length-1))return r;const{view:f}=this,d=Ir(s.leftEdge.leftVertex.pos,f,i),v=Ir(s.rightEdge.rightVertex.pos,f,i);return this._processCandidateProposal(d,v,t,i,r),r}_processCandidateProposal(t,i,r,s,l){if(!this.exceedsShortLineThreshold(t,i,s))return;const f=cx(GIe,t,i,.5),d=.5*Vu(t,i),v=p6e(qIe,r,f,d),{coordinateHelper:_,pointer:M}=s,T=_.fromXYZ(v,_.getZ(r,0)),A=Hs(r,_,Ki,this.view);Qd(A,Hs(T,_,Ki,this.view))<this.squaredProximityThreshold(M)&&l.push(new DIe({coordinateHelper:_,targetPoint:T,point1:t,point2:i,elevationInfo:_.hasZ()?Ki:null}))}}const GIe=Wt(),qIe=Wt();let vy=class extends ot{constructor(e){super(e),this.updating=!1,this._snappers=new gt,this._domain=Sn.SELF}initialize(){this._snappers.push(new RIe(this.view,this.options),new TIe(this.view,this.options),new FIe(this.view,this.options),new zIe(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t,i){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];const r=[];for(const s of this._snappers.items)for(const l of s.snap(e,i))r.push(l);return FT(e,r,i.coordinateHelper),r}};m([x({readOnly:!0})],vy.prototype,"updating",void 0),m([x({constructOnly:!0})],vy.prototype,"view",void 0),m([x()],vy.prototype,"options",null),vy=m([X("esri.views.interactive.snapping.SelfSnappingEngine")],vy);function UIe(e,t){return[new vy({view:e,options:t}),new tp({view:e,options:t,spatialReference:e.spatialReference})]}let gf=class extends ot{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};m([x({constructOnly:!0})],gf.prototype,"layer",void 0),m([x()],gf.prototype,"enabled",void 0),m([x()],gf.prototype,"updating",void 0),m([x()],gf.prototype,"availability",void 0),gf=m([X("esri.views.interactive.snapping.FeatureSnappingLayerSource")],gf);const BIe=gf;let xo=class extends ot{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new gt,this.distance=mo.distance,this.touchSensitivityMultiplier=mo.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};m([x()],xo.prototype,"enabled",void 0),m([x()],xo.prototype,"enabledToggled",void 0),m([x()],xo.prototype,"selfEnabled",void 0),m([x()],xo.prototype,"featureEnabled",void 0),m([x({type:gt.ofType(BIe)})],xo.prototype,"featureSources",void 0),m([x()],xo.prototype,"distance",void 0),m([x()],xo.prototype,"touchSensitivityMultiplier",void 0),m([x({readOnly:!0})],xo.prototype,"effectiveEnabled",null),m([x({readOnly:!0})],xo.prototype,"effectiveSelfEnabled",null),m([x({readOnly:!0})],xo.prototype,"effectiveFeatureEnabled",null),xo=m([X("esri.views.interactive.snapping.SnappingOptions")],xo);const VE=xo;class M9 extends yy{constructor(t,i,r,s,l){super(t,i,new _9(t,i,r.constraint,s.constraint),l,Sn.ALL),this.first=r,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new Lx(this.targetPoint,this.elevationInfo,this.domain)]}}let ql=class extends yn.EventedMixin(pd){constructor(e){super(e),this.options=new VE,this.snappingEnginesFactory=UIe,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=cc.MAIN}initialize(){this.handles.add([Ve(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}},()=>{this.doneSnapping(),this.emit("changed")},bl),Ve(()=>this.options,e=>{for(const t of this._engines)t.options=e},bl),Ve(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t),Ps)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;const{view:i,options:r}=this;this._engines=t(i,r)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}async snap(e){return HIe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:i}=e;this._removeVisualization();const r=this._currentMainCandidate;if(ae(r))return t;const s=this._selectUpdateInput(e);if(ae(s))return t;const{coordinateHelper:{spatialReference:l}}=i,f=Vo(this._convertPointElevation(s,i),l);if(ae(f))return t;const{view:d}=this,{coordinateHelper:v,elevationInfo:_,visualizer:M}=i,T=[],A=v.pointToVector(f),k=r.constraint.closestTo(A);if(!this._arePointsWithinScreenThreshold(A,k,i))return this._resetSnappingState(),t;r.targetPoint=k,T.push(...r.hints);for(const D of this._currentOtherActiveCandidates)D.targetPoint=k,T.push(...D.hints);q(M)&&this.handles.add(M.draw(T,{coordinateHelper:v,elevationInfo:mK(i),view:d,selfSnappingZ:i.selfSnappingZ}),$9);const F=v.vectorToDehydratedPoint(k);return this._convertPointElevation(F,i,Ki,_)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case cc.MAIN:return e;case cc.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=cc.MAIN}_removeVisualization(){this.handles.remove($9)}async _snapSinglePoint({point:e,context:t,signal:i}){const{coordinateHelper:r}=t,{view:s}=this,l=this._convertPointElevation(e,t),f=r.pointToVector(l),d=await this._fetchCandidates(f,Sn.ALL,t,i);return this._createSnapResult(f,cc.MAIN,d,s,t,i)}async _snapMultiPoint({point:e,scenePoint:t,context:i,signal:r}){const{view:s}=this,{coordinateHelper:l}=i,{spatialReference:f}=l;await RN(t.spatialReference,f);const d=Vo(this._convertPointElevation(t,i),f),v=l.pointToVector(d),_=await this._fetchCandidates(v,Sn.FEATURE,i,r);if(_.length>0){const k=await this._fetchCandidates(v,Sn.SELF,i,r);return this._createSnapResult(v,cc.SCENE,[..._,...k],s,i,r)}const M=this._convertPointElevation(e,i),T=l.pointToVector(M),A=await this._fetchCandidates(T,Sn.SELF,i,r);return this._createSnapResult(T,cc.MAIN,A,s,i,r)}async _fetchCandidates(e,t,i,r){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(e,t,i,r)))).flat()}_createSnapResult(e,t,i,r,s,l){return{get valid(){return!To(l)},apply:()=>{const{elevationInfo:f,coordinateHelper:d}=s,{snappedPoint:v,hints:_}=this._processCandidates(e,t,i,s);return this._removeVisualization(),q(s.visualizer)&&this.handles.add(s.visualizer.draw(_,{coordinateHelper:d,elevationInfo:mK(s),view:r,selfSnappingZ:s.selfSnappingZ}),$9),this._convertPointElevation(v,s,Ki,f)}}}_processCandidates(e,t,i,r){const{coordinateHelper:s}=r;if(i.length<1)return this.doneSnapping(),{snappedPoint:s.vectorToDehydratedPoint(e),hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),FT(e,i,s);const l=this._currentMainCandidate;if(q(l)){const f=this._findOldConstraintInNewCandidates(l,i);if(f>=0){if(!(i[f]instanceof M9))return this._intersectWithOtherCandidates(f,i,e,t,r);if(this._arePointsWithinScreenThreshold(e,l.targetPoint,r))return this._updateSnappingCandidate(l,t,i,r)}}return this._intersectWithOtherCandidates(0,i,e,t,r)}_findOldConstraintInNewCandidates(e,t){return e instanceof M9?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}_intersectWithOtherCandidates(e,t,i,r,s){const{coordinateHelper:l}=s,f=t[e],d=[];for(let v=0;v<t.length;++v){if(v===e)continue;const _=t[v];for(const M of f.constraint.intersect(_.constraint)){const T=l.fromXYZ(M.closestTo(f.targetPoint),f.targetPoint[2]);d.push([new M9(l,T,f,_,_.elevationInfo),this._squaredScreenDistance(i,T,l)])}}return d.length>0&&(d.sort((v,_)=>v[1]-_[1]),d[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(d[0][0],r,t,s):this._updateSnappingCandidate(f,r,t,s)}_updateSnappingCandidate(e,t,i,r){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const s=this._currentMainCandidate.targetPoint,l=[];l.push(...e.hints);for(const f of i){if(e instanceof M9){if(f.constraint.equals(e.first.constraint)||f.constraint.equals(e.second.constraint))continue}else if(f.constraint.equals(e.constraint))continue;f.constraint.check(s)&&(f.targetPoint=s,this._currentOtherActiveCandidates.push(f),l.push(...f.hints))}return{snappedPoint:r.coordinateHelper.vectorToDehydratedPoint(s),hints:l}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,t,i){return this._squaredScreenDistance(e,t,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(e,t,i){return Qd(this._toScreen(e,i),this._toScreen(t,i))}_toScreen(e,t){return Hs(e,t,Ki,this.view)}_findOldCandidateIndex(e,t){let i=-1;for(let r=0;r<e.length;++r)if(t.constraint.equals(e[r].constraint)){i=r;break}return i}_convertPointElevation(e,t,i=t.elevationInfo,r=Ki){const{view:s}=this;if(!(q(e)&&t.coordinateHelper.hasZ()&&q(s)&&s.type==="3d"))return e;const l=ve(e);return l.z=RT(s,l,i,r),l}get test(){return{visualizationsActive:this.handles.has($9),engines:this._engines}}};var cc;m([x({constructOnly:!0})],ql.prototype,"view",void 0),m([x()],ql.prototype,"options",void 0),m([x({readOnly:!0})],ql.prototype,"updating",null),m([x()],ql.prototype,"snappingEnginesFactory",void 0),m([x()],ql.prototype,"_engines",void 0),m([x()],ql.prototype,"_squaredMouseProximityTreshold",null),m([x()],ql.prototype,"_squaredTouchProximityThreshold",null),ql=m([X("esri.views.interactive.snapping.SnappingManager")],ql),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(cc||(cc={}));const $9="visualization-handle";function HIe(e){return q(e.scenePoint)}function mK({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?Ki:t}function WIe(e){return q(e)&&e.type==="graphic"}function JIe(e){var t;return(t=e.find(WIe))!=null?t:null}let Ln=class extends yn.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:NL(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};m([x()],Ln.prototype,"activeComponent",void 0),m([x()],Ln.prototype,"cancelled",void 0),m([x()],Ln.prototype,"history",void 0),m([x()],Ln.prototype,"tool",null),m([x()],Ln.prototype,"type",void 0),m([x()],Ln.prototype,"canUndo",null),m([x()],Ln.prototype,"canRedo",null),m([x()],Ln.prototype,"onEnd",void 0),m([x()],Ln.prototype,"undo",null),m([x()],Ln.prototype,"redo",null),m([x()],Ln.prototype,"toggleTool",void 0),m([x()],Ln.prototype,"addToSelection",void 0),m([x()],Ln.prototype,"removeFromSelection",void 0),Ln=m([X("esri.widgets.Sketch.support.OperationHandle")],Ln);let I9=class extends Ln{};m([x()],I9.prototype,"activeComponent",void 0),I9=m([X("esri.widgets.Sketch.support.CreateOperationHandle")],I9);let hc=class extends Ln{};m([x()],hc.prototype,"activeComponent",void 0),hc=m([X("esri.widgets.Sketch.support.UpdateOperationHandle")],hc);const vK={defaultZ:0},T9={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let Ni=class extends yn.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._handles=new Jr,this._internalGraphicsLayer=new BH({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new Jr,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new Xx,this.layer=null,this.pointSymbol=new no({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new fl({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new ps({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new Qx,this.updateGraphics=new gt,this.updateOnGraphicClick=!0,this.updatePointSymbol=new no({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new fl({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new ps({color:[12,207,255],width:2}),this.vertexSymbol=new no({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=vK,this.defaultUpdateOptions=T9,this.snappingOptions=new VE}initialize(){this._handles.add([fs(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),fs(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(q(this._operationHandle))for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),Ve(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.elevationInfo)!=null?t:null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},Ps),Ve(()=>this.view,e=>{oi(this._snappingManager),e&&(this._snappingManager=new ql({view:e,options:this.snappingOptions}),e.type==="2d"?import("./editingTools.ab970130.js"):e.type==="3d"&&(import("./editingTools.e1823318.js").then(function(t){return t.e}),import("./GraphicsLayerView3D.58b41e36.js").then(function(t){return t.G})))},Ps),Ve(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})])}destroy(){this.cancel(),this._handles=oi(this._handles),this._viewHandles=oi(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=oi(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return this.view.type==="3d"?"move":"transform"}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return!q(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):Jt(this.activeComponent.graphic)}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",te(te({},vK),e))}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",je(te(te({},T9),e),{reshapeOptions:te(te({},T9.reshapeOptions),e==null?void 0:e.reshapeOptions)}))}set snappingOptions(e){q(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var i;const e=!(!((i=this.view)==null?void 0:i.ready)||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:r,map:s}=t;r&&(t.cursor=null),s&&s.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const i="view-ready";this._handles.remove(i),e&&this._handles.add(so(()=>e.ready,r=>{this._viewHandles.removeAll(),r&&this._viewHandles.add(this._generateViewHandles(e))},Ps),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Za(this._moduleLoaderAbortController),this._viewReadyAbortController=Za(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){const{activeTool:i,layer:r}=this,s=t.toArray();r.removeMany(s),this.cancel(),this._emitDeleteEvent({graphics:s,tool:i})}}async create(e,t){if(this.cancel(),await this._waitViewReady(),this.state==="disabled")throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),zi();if(q(this.view.activeTool)&&(this.view.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");oZ(this.view,this._internalGraphicsLayer);const i=await this._setupCreateOperation(e,t);if(ae(i)||this.destroyed)return void this.view.map.remove(this._internalGraphicsLayer);const r=()=>{if(i===this._operationHandle){const s=this.createGraphic,l=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||s==null||this.layer.add(s),this.emit("create",{graphic:s,state:l?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};i.on("complete",r),this._operationHandle=i,this.view.ready&&this.view.focus()}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:s}=this;if(s==="disabled")throw r||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),i||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),zi();q(this.view.activeTool)&&(this.view.activeTool=null);const l=Array.isArray(e)?e:[e];if(e==null||!l||!l.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(l.some(d=>d.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!ae(d.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const f=await this._setupUpdateOperation(l,t);this.destroyed||ae(f)||Br(f)||(oZ(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(f,t),this.emit("update",{graphics:l,state:"start",aborted:!1,tool:f.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const t of e)q(t.geometry)&&t.geometry.type!=="mesh"&&!Xi(t.geometry.spatialReference,this.view.spatialReference)&&(xl(t.geometry.spatialReference,this.view.spatialReference)||lh()||await uh(),t.geometry=Vo(t.geometry,this.view.spatialReference));this._endAsyncOperation()}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=this.view;if(t.type==="2d"){const s=[];this.view.map.allLayers.forEach(f=>{f.type!=="vector-tile"&&f.type!=="imagery"||s.push(f)});const l=await this.view.hitTest(e,{exclude:s});return JIe(l.results)}const i=[this.view.map.ground];t.map.allLayers.forEach(s=>{s.type==="integrated-mesh"&&i.push(s)});const r=await t.hitTest(e,{exclude:i});if(r.results.length>0){const s=r.results[0];if(q(s)&&s.type==="graphic"&&s.graphic&&(!r.ground.mapPoint||t.map.ground.opacity<1||r.ground.distance-pn(s.distance,0)>-Math.min(3*r.ground.distance,t.viewingMode==="global"?kM(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return s}return null}_generateViewHandles(e){return[e.on("immediate-click",async t=>{const i=this.state==="active"&&this._operationHandle.type==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const r=await t.async(()=>this._getFirstHit(Li(t)));let s=null;if(q(r)){const l=r.graphic;this.updateGraphics.includes(l)||l.layer===this.layer?(t.stopPropagation(),s=l):e.type!=="2d"||this._isComponentGraphic(l)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();q(s)&&!this.updateGraphics.includes(s)&&await this.update([s],je(te({},this.defaultUpdateOptions),{reshapeOptions:te({},this.defaultUpdateOptions.reshapeOptions)})),this._endAsyncOperation()},rt.WIDGET)]}async _setupCreateOperation(e,t){const i=te(te({hasZ:this.view.type==="3d"},this.defaultCreateOptions),t),r=await this._setupDrawGraphicTool(e,this.view,i);return ae(r)?null:(this.view.tools.add(r),this.view.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(e,t,i){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const r=e!=="rectangle",s=e!=="rectangle";this.snappingOptions.enabledToggled=!1;const l=je(te({view:t,mode:e==="rectangle"||e==="circle"?"hybrid":"click"},i),{snapToScene:!1,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),snappingManager:this._snappingManager,forceUniformSize:s,centered:r});return this.view.type==="2d"?this._makeDrawGraphicTool2D(l):this._makeDrawGraphicTool3D(l)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(import("./editingTools.ab970130.js"));return Br(t)||this.destroyed?null:new t.module.DrawGraphicTool2D(je(te({},e),{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:ZIe(e.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions}))}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(import("./editingTools.e1823318.js").then(function(r){return r.e}));if(Br(t)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new t.module.DrawGraphicTool3D(je(te({},e),{elevationInfo:i,snapToScene:!q(i)||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions}))}_setupCreateOperationHandle(e){let t=null;const i=e.forceUniformSize,r=e.centered,s=[this.view.on("key-down",f=>{if(f.key===Tt.pan)f.stopPropagation(),f.repeat||(e.enabled=!1);else if(f.key===Tt.complete)f.stopPropagation(),e.completeCreateOperation();else if(f.key!==Tt.vertexAdd||f.repeat)f.key===Tt.undo?(f.stopPropagation(),l.undo()):f.key===Tt.redo?(f.stopPropagation(),l.redo()):f.key!==Tt.snappingToggle||e.geometryType==="rectangle"||e.geometryType==="circle"||f.repeat?f.key!==Tt.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||f.repeat?f.key===Tt.center&&(f.repeat||(e.centered=!r,f.stopPropagation())):(e.forceUniformSize=!i,f.stopPropagation()):(this.snappingOptions.enabledToggled=!0,f.stopPropagation());else{const d=e.drawOperation.geometryType;d!=="polyline"&&d!=="polygon"&&d!=="multipoint"||(f.stopPropagation(),e.drawOperation.commitStagedVertex())}},rt.WIDGET),this.view.on("key-up",f=>{f.key===Tt.pan?e.enabled=!0:f.key===Tt.snappingToggle&&e.geometryType!=="rectangle"&&e.geometryType!=="circle"?(this.snappingOptions.enabledToggled=!1,f.stopPropagation()):f.key!==Tt.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?f.key===Tt.center&&(e.centered=r,f.stopPropagation()):(e.forceUniformSize=i,f.stopPropagation())},rt.WIDGET),e.on("vertex-add",f=>{switch(t=ae(t)?"start":"active",f.operation){case"apply":this.emit("create",{graphic:Jt(e.graphic),state:t,tool:this.activeTool,toolEventInfo:f,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[Jt(e.graphic)],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[Jt(e.graphic)],tool:e.geometryType})}}),e.on("cursor-update",f=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:Jt(e.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:f.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",f=>{switch(f.operation){case"apply":this.emit("create",{graphic:Jt(e.graphic),state:"active",tool:this.activeTool,toolEventInfo:f,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[Jt(e.graphic)],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[Jt(e.graphic)],tool:e.geometryType})}}),e.on("complete",f=>{this._set("createGraphic",Jt(f.graphic)),t="complete",f.aborted?l&&l.cancel():l&&l.complete()}),Ve(()=>this._getGraphicSymbolFromTool(e.geometryType),f=>{e.graphicSymbol=f})],l=new I9({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var f;s.forEach(d=>d.remove()),s.length=0,(f=this.view.tools)==null||f.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return l}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;default:return null}}async _setupUpdateOperation(e,t){const{layer:i,view:r}=this,s=je(te(te({tool:this._defaultUpdateTool},this.defaultUpdateOptions),t),{reshapeOptions:te(te({},this.defaultUpdateOptions.reshapeOptions),t==null?void 0:t.reshapeOptions)});let l=s.tool;for(const f of e)i.remove(f),i.add(f);if(r.type==="3d"){if(e.length===0)return null;switch(l){case"move":return this._setupMove3DOperation(e,s,r,l);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const f=f9(e[0]);return f===Ci.SUPPORTED?this._setupReshape3DOperation(e[0],s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${pE(f)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,s,r)}}switch(l){case"move":return this._setupMove2DOperation(e,s,r);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const f=f9(e[0]);return f===Ci.SUPPORTED?this._setupTransformOrReshape2DOperation(e,l,s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${pE(f)}).`),null)}case"transform":if(e.length===1){const f=ow(e[0].geometry,"type");f!=="point"&&f!=="multipoint"||(l="reshape")}return this._setupTransformOrReshape2DOperation(e,l,s,r)}}async _setupMove3DOperation(e,t,i,r,s=!1){for(const _ of e){const M=G$e(_);if(M!==Ci.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${pE(M)}).`),null}const l=await this._requireModule(import("./editingTools.e1823318.js").then(function(_){return _.e}));if(Br(l))return l;const f=new l.module.GraphicMoveTool({view:i,enableZ:t.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(f),f.graphics.addMany(e),s||this.updateGraphics.addMany(e);const d=[],v=new hc({activeComponent:f,tool:r,type:"update",onEnd:()=>{var _;d.forEach(M=>M.remove()),d.length=0,(_=this.view.tools)==null||_.remove(f),f.destroyed||f.destroy()},undo:()=>{E9(v,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{C9(v,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:_=>{this.updateGraphics.push(_),f.graphics.push(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[_],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:_=>{const M=this.updateGraphics.indexOf(_);v.history.undo.forEach(T=>T.updates.splice(M,1)),v.history.redo.forEach(T=>T.updates.splice(M,1)),this.updateGraphics.remove(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[_],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?f.graphics.remove(_):v.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||r!=="transform")return;const _=this.updateGraphics.getItemAt(0);if(f9(_)!==Ci.SUPPORTED)return;const M=await this._setupReshape3DOperation(_,t,i,!0);Br(M)||(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(M,t))}});return d.push(...this._getHandlesForComponent(v,t),this.view.on("immediate-click",_=>this._getCommonUpdateOperationClickHandlers(v,_,t),rt.WIDGET),i.on("key-down",_=>{this._getCommonUpdateOperationKeyDownHandlers(v,_),_.key===Tt.snappingToggle&&(this.snappingOptions.enabledToggled=!0,_.stopPropagation())},rt.WIDGET),i.on("key-up",_=>{_.key===Tt.snappingToggle&&(this.snappingOptions.enabledToggled=!1,_.stopPropagation())},rt.WIDGET)),v}_setupGraphicTransform3DOperation(e,t,i,r=!1){if(e.length===1&&W$e(e[0])===Ci.SUPPORTED){const s=e[0],l=s.geometry;if(q(l)&&(l.type==="point"||l.type==="mesh"))return this._setupPointTransform3DOperation(s,t,i);if(q(l)&&(l.type==="polygon"||l.type==="polyline"))return this._setupPolyTransform3DOperation(s,t,i,r)}return this._setupMove3DOperation(e,t,i,"transform",r)}async _setupPointTransform3DOperation(e,t,i){const r="transform",{enableRotation:s,enableScaling:l,enableZ:f}=t,d=await this._requireModule(import("./editingTools.e1823318.js").then(function(T){return T.e}));if(Br(d))return d;const v=new d.module.GraphicTransformTool({graphic:e,view:i,enableRotation:s,enableScaling:l,enableZ:f,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(v),this.updateGraphics.add(e);const _=[],M=new hc({activeComponent:v,tool:r,type:"update",onEnd:()=>{var T;_.forEach(A=>A.remove()),_.length=0,(T=this.view.tools)==null||T.remove(v),v.destroyed||v.destroy()},undo:()=>{E9(M,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{C9(M,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async T=>{this.updateGraphics.add(T),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[T],removed:[],type:"selection-change"},type:"update"});const A=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);Br(A)||(M.onEnd(),M.destroy(),this._setUpdateOperationHandle(A,t))},removeFromSelection:T=>{this.updateGraphics.remove(T),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[T],type:"selection-change"},type:"update"}),M.complete()},toggleTool:()=>{}});return _.push(...this._getHandlesForComponent(M,t),this.view.on("immediate-click",T=>this._getCommonUpdateOperationClickHandlers(M,T,t),rt.WIDGET),i.on("key-down",T=>{this._getCommonUpdateOperationKeyDownHandlers(M,T),T.key===Tt.snappingToggle&&(this.snappingOptions.enabledToggled=!0,T.stopPropagation())},rt.WIDGET),i.on("key-up",T=>{T.key===Tt.snappingToggle&&(this.snappingOptions.enabledToggled=!1,T.stopPropagation())},rt.WIDGET)),M}async _setupPolyTransform3DOperation(e,t,i,r=!1){const s="transform",{enableRotation:l,enableScaling:f,enableZ:d,preserveAspectRatio:v}=t,_=await this._requireModule(import("./editingTools.e1823318.js").then(function(k){return k.e}));if(Br(_))return _;const M=new _.module.ExtentTransformTool({graphic:e,view:i,enableRotation:l,enableScaling:f,enableZ:d,preserveAspectRatio:v,tooltipOptions:this.tooltipOptions});this.view.tools.add(M),r||this.updateGraphics.add(e);const T=[],A=new hc({activeComponent:M,tool:s,type:"update",onEnd:()=>{var k;T.forEach(F=>F.remove()),T.length=0,(k=this.view.tools)==null||k.remove(M),M.destroyed||M.destroy()},canUndo:()=>M.canUndo,undo:()=>{M.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>M.canRedo,redo:()=>{M.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async k=>{this.updateGraphics.add(k),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[k],removed:[],type:"selection-change"},type:"update"});const F=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);Br(F)||(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(F,t))},removeFromSelection:k=>{this.updateGraphics.remove(k),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[k],type:"selection-change"},type:"update"}),A.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;const k=this.updateGraphics.getItemAt(0);if(f9(k)!==Ci.SUPPORTED)return;const F=await this._setupReshape3DOperation(k,t,i,!0);Br(F)||(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(F,t))}});return T.push(...this._getHandlesForComponent(A,t),this.view.on("immediate-click",k=>this._getCommonUpdateOperationClickHandlers(A,k,t),rt.WIDGET),this.view.on("key-down",k=>this._getCommonUpdateOperationKeyDownHandlers(A,k),rt.WIDGET),this.view.on("key-down",k=>{k.key!==Tt.constraint||k.repeat||(M.preserveAspectRatio=!M.preserveAspectRatio,k.stopPropagation())},rt.WIDGET),this.view.on("key-up",k=>{k.key===Tt.constraint&&(M.preserveAspectRatio=!M.preserveAspectRatio,k.stopPropagation())},rt.WIDGET)),A}async _setupMove2DOperation(e,t,i){const r="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=await this._getGraphicMover(e,t,i);if(Br(s))return s;const l=new hc({activeComponent:s,tool:r,type:"update",onEnd:()=>{var _;this._displayDefaultCursor(),v.forEach(M=>M.remove()),d.forEach(M=>M.remove()),v=[],d=[],s.destroy(),(_=this._internalGraphicsLayer)==null||_.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const _=this.updateGraphics.toArray();E9(l,_),l.refreshComponent(),this._emitUndoEvent({graphics:_,tool:r})},redo:()=>{const _=this.updateGraphics.toArray();C9(l,_),l.refreshComponent(),this._emitRedoEvent({graphics:_,tool:r})},addToSelection:async _=>{await this._updateSpatialReference(_),this.updateGraphics.push(_),s.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[_],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:_=>{const M=this.updateGraphics.indexOf(_);l.history.undo.forEach(A=>A.updates.splice(M,1)),l.history.redo.forEach(A=>A.updates.splice(M,1)),this.updateGraphics.remove(_);const T=this.updateGraphics.toArray();this.emit("update",{graphics:T,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[_],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?s.graphics=T:l.complete()}});let f=!1,d=[i.on("immediate-click",_=>this._getCommonUpdateOperationClickHandlers(l,_,t),rt.WIDGET),i.on("key-down",_=>{this._getCommonUpdateOperationKeyDownHandlers(l,_),_.key!==Tt.constraint||_.repeat||(f=!0,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},rt.WIDGET),i.on("key-up",_=>{_.key===Tt.constraint&&f&&(f=!1,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},rt.WIDGET)],v=this._getHandlesForComponent(l,t);return l}async _setupReshape3DOperation(e,t,i,r=!1){const s="reshape",l=await this._requireModule(import("./editingTools.e1823318.js").then(function(_){return _.e}));if(Br(l))return l;this.snappingOptions.enabledToggled=!1;const f=new l.module.GraphicReshapeTool({view:i,graphic:e,enableZVertex:t.enableZ&&t.reshapeOptions.vertexOperation==="move",enableZShape:t.enableZ&&t.reshapeOptions.shapeOperation==="move",enableMoveGraphic:t.reshapeOptions.shapeOperation==="move"||t.reshapeOptions.shapeOperation==="move-xy",enableMidpoints:t.reshapeOptions.edgeOperation==="split",enableEdgeOffset:t.reshapeOptions.edgeOperation==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(f),r||this.updateGraphics.add(e);const d=[],v=new hc({activeComponent:f,tool:s,type:"update",onEnd:()=>{var _;d.forEach(M=>M.remove()),d.length=0,(_=this.view.tools)==null||_.remove(f),f.destroyed||f.destroy()},canUndo:()=>f.canUndo,undo:()=>{f.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>f.canRedo,redo:()=>{f.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async _=>{this.updateGraphics.add(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[_],removed:[],type:"selection-change"},type:"update"});const M=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);Br(M)||(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(M,t))},removeFromSelection:_=>{this.updateGraphics.remove(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[_],type:"selection-change"},type:"update"}),v.complete()},toggleTool:async()=>{if(t.toggleToolOnClick===!1)return;const _=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);Br(_)||(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(_,t))}});return d.push(...this._getHandlesForComponent(v,t),i.on("immediate-click",_=>this._getCommonUpdateOperationClickHandlers(v,_,t),rt.WIDGET),i.on("key-down",_=>{this._getCommonUpdateOperationKeyDownHandlers(v,_),_.key===Tt.snappingToggle&&(this.snappingOptions.enabledToggled=!0,_.stopPropagation())},rt.WIDGET),i.on("key-up",_=>{_.key===Tt.snappingToggle&&(this.snappingOptions.enabledToggled=!1,_.stopPropagation())},rt.WIDGET)),v}async _setupTransformOrReshape2DOperation(e,t,i,r){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=t==="transform"?await this._getBox(e,i,r):await this._getReshape(e,i,r);if(Br(s))return s;const l=new hc({activeComponent:s,type:"update",onEnd:()=>{d.forEach(v=>v.remove()),f.forEach(v=>v.remove()),d=[],f=[],l.activeComponent&&!l.activeComponent.destroyed&&l.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{E9(l,this.updateGraphics.toArray()),l.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:l.tool})},redo:()=>{C9(l,this.updateGraphics.toArray()),l.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:l.tool})},addToSelection:async v=>{let _=l.activeComponent;if(_.type==="reshape"){const M=[...this.updateGraphics,v];this.updateGraphics.removeAll();const T=await this._setupMove2DOperation(M,i,r);if(Br(T))return;l.onEnd(),l.destroy(),this._setUpdateOperationHandle(T,i)}else this.updateGraphics.add(v),_.graphics=this.updateGraphics.toArray(),_.refresh(),l.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[v],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async v=>{const _=this.updateGraphics.indexOf(v);l.history.undo.forEach(T=>T.updates.splice(_,1)),l.history.redo.forEach(T=>T.updates.splice(_,1)),this.updateGraphics.remove(v);const M=this.updateGraphics.toArray();if(M.length===0)l.complete();else{const T=M[0].geometry;M.length!==1||!q(T)||T.type!=="point"&&T.type!=="multipoint"?l.activeComponent.graphics=M:l.toggleTool()}this.emit("update",{graphics:M,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[v],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const v=this.updateGraphics.getItemAt(0),_=v.geometry;if(q(_)&&(l.tool==="reshape"&&(_.type==="point"||_.type==="multipoint")||l.tool==="transform"&&_.type==="extent"))return;let M=null;l.tool==="transform"?M=await this._getReshape([v],i,r):l.tool==="reshape"&&(M=await this._getBox([v],i,r)),Br(M)||(l.activeComponent.destroy(),l.activeComponent=M,l.activeComponent&&(d.forEach(T=>T.remove()),d=this._getHandlesForComponent(l,i)))}});let f=[r.on("immediate-click",v=>this._getCommonUpdateOperationClickHandlers(l,v,i),rt.WIDGET),r.on("key-down",v=>{if(this._getCommonUpdateOperationKeyDownHandlers(l,v),v.key!==Tt.snappingToggle||v.repeat||(this.snappingOptions.enabledToggled=!0,v.stopPropagation()),v.key===Tt.constraint&&!v.repeat&&l){const _=l.activeComponent;_&&_.type==="box"&&(_.preserveAspectRatio=!_.preserveAspectRatio)}},rt.WIDGET),r.on("key-up",v=>{var _;if(v.key===Tt.snappingToggle&&((_=l==null?void 0:l.activeComponent)==null?void 0:_.type)==="reshape"&&(this.snappingOptions.enabledToggled=!1,v.stopPropagation()),v.key===Tt.constraint&&l){const M=l.activeComponent;M&&M.type==="box"&&(M.preserveAspectRatio=!M.preserveAspectRatio)}},rt.WIDGET)],d=this._getHandlesForComponent(l,i);return l}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:r}=t,s=await this._requireModule(import("./GraphicMover.ff93363f.js").then(function(l){return l.G}));return Br(s)?s:new s.module.default({enableMoveAllGraphics:r,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:l,dy:f,graphic:d})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:f,mover:d,type:"move-start"},type:"update"})},onGraphicMove:({dx:l,dy:f,graphic:d})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:f,mover:d,type:"move"},type:"update"}),onGraphicMoveStop:({dx:l,dy:f,graphic:d})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:f,mover:d,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,i){const{enableRotation:r,enableScaling:s,preserveAspectRatio:l}=t,f=await this._requireModule(import("./Box.71ae2f91.js"));return Br(f)?f:new f.module.default({graphics:e,enableRotation:r,enableScaling:s,preserveAspectRatio:l,layer:this._internalGraphicsLayer,view:i,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onMove:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onMoveStop:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onScaleStart:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onScale:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onScaleStop:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onRotateStart:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onRotate:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onRotateStop:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"})}})}async _getReshape(e,t,i){var f,d;const r=((f=t.reshapeOptions)==null?void 0:f.edgeOperation)==="split",s=((d=t.reshapeOptions)==null?void 0:d.shapeOperation)==="move",l=await this._requireModule(import("./Reshape.2c4dca61.js"));return Br(l)?l:new l.module.default({enableMidpoints:r,enableMovement:s,graphic:e[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:i,callbacks:{onReshapeStart:v=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},v),type:"update"}),onReshape:v=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},v),type:"update"}),onReshapeStop:({mover:v,type:_})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:v,type:_},type:"update"}),onMoveStart:({dx:v,dy:_,mover:M,type:T})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:_,mover:M,type:T},type:"update"}),onMove:({dx:v,dy:_,mover:M,type:T})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:_,mover:M,type:T},type:"update"}),onMoveStop:({dx:v,dy:_,mover:M,type:T})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:_,mover:M,type:T},type:"update"}),onVertexAdd:({added:v,type:_,vertices:M})=>{const T=v.map(A=>Yf(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:T,vertices:M,type:_},type:"update"})},onVertexRemove:({removed:v,type:_,vertices:M})=>{const T=v.map(A=>Yf(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:T,vertices:M,type:_},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:r,viewEvent:s})=>{var l;((l=s.native)==null?void 0:l.shiftKey)&&(s.stopPropagation(),e.removeFromSelection(r))}),i.on("graphic-move-start",r=>e.addToHistory(pc(r.allGraphics)))];case"box":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(pc(r.graphics))),i.on("rotate-start",r=>e.addToHistory(pc(r.graphics))),i.on("scale-start",r=>e.addToHistory(pc(r.graphics)))];case"reshape":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(pc([r.mover]))),i.on("reshape-start",r=>e.addToHistory(pc([r.graphic]))),i.on("vertex-add",r=>e.addToHistory(pc([r.oldGraphic]))),i.on("vertex-remove",r=>e.addToHistory(pc([r.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",r=>{e.addToHistory(pc(r.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r.dx,dy:r.dy,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:r})=>{e.addToHistory({updates:[r]})}),i.on("graphic-translate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[i.on("reshape",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-add",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-remove",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];default:return}}_onTransformOrReshape2DGraphicClick(e,t,i){var l;const{graphic:r,viewEvent:s}=i;return((l=s.native)==null?void 0:l.shiftKey)&&r.layer===this.layer?(s.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(s.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;const i=this.view.map;this._disablePopup(t);const r=()=>{if(e===this._operationHandle){const s=this.updateGraphics.toArray(),l=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:s,state:"complete",aborted:e.cancelled,tool:l,toolEventInfo:null,type:"update"})}};e.on("complete",r)}async _getCommonUpdateOperationClickHandlers(e,t,i){const r=Li(t),s=await t.async(()=>this._getFirstHit(r));if(ae(s))return void e.complete();if(t.native.shiftKey&&this._toggleSelection([s.graphic],e,i))return void t.stopPropagation();this.updateGraphics.includes(s.graphic)?t.stopPropagation():e.complete()}_toggleSelection(e,t,i){const r=!!i.multipleSelectionEnabled;return e.some(s=>s!=null&&!(!r||s.layer!==this.layer)&&(this.updateGraphics.includes(s)?t.removeFromSelection(s):t.addToSelection(s),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===Tt.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):i===Tt.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):i===Tt.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&Tt.delete.includes(i)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;const t=this.activeComponent,i=this.updateGraphics.toArray();ae(t)||t.type==="reshape-3d"||(t.type!=="reshape"||i.length===1&&ow(i[0].geometry,"type")==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=oi(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||ae(t))&&(e.attributes&&e.attributes.esriSketchTool||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,i){Pe.getLogger(this.declaredClass).error(new fe(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",je(te({},e),{type:"undo"}))}_emitRedoEvent(e){this.emit("redo",je(te({},e),{type:"redo"}))}_emitDeleteEvent(e){this.emit("delete",je(te({},e),{type:"delete"}))}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:T9}}wait(){return um(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return((t=this.view)==null?void 0:t.type)!=="3d"||this.updateOnGraphicClick||q(e)&&e.toggleToolOnClick}_disablePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&ae(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}_restorePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&q(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const e=this.view;e&&(Za(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await ak(um(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal))}};function ZIe(e){return e==="polygon"||e==="rectangle"||e==="circle"}function E9(e,t){bK("undo",e.history.undo,e.history.redo,t)}function C9(e,t){bK("redo",e.history.redo,e.history.undo,t)}function bK(e,t,i,r){const s=t.pop().updates,l=[];r.forEach((f,d)=>{const v=s[d];v!=null&&("geometry"in v&&q(v.geometry)&&(l.push({geometry:f.geometry}),f.geometry=v.geometry),"symbol"in v&&q(v.symbol)&&(l.push({symbol:f.symbol}),f.symbol=v.symbol),"undo"in v&&(l.push(v),v[e](f)))}),i.push({updates:l})}function pc(e){return{updates:e.map(t=>({geometry:t.geometry}))}}function Br(e){return"requireError"in e&&e.requireError==="aborted"}m([x()],Ni.prototype,"updating",null),m([x()],Ni.prototype,"_operationHandle",void 0),m([x({readOnly:!0})],Ni.prototype,"activeTool",null),m([x()],Ni.prototype,"activeFillSymbol",void 0),m([x()],Ni.prototype,"activeLineSymbol",void 0),m([x()],Ni.prototype,"activeVertexSymbol",void 0),m([x()],Ni.prototype,"allowDeleteKey",void 0),m([x({readOnly:!0})],Ni.prototype,"createGraphic",null),m([x()],Ni.prototype,"defaultCreateOptions",null),m([x()],Ni.prototype,"defaultUpdateOptions",null),m([x({type:Xx,nonNullable:!0})],Ni.prototype,"labelOptions",void 0),m([x()],Ni.prototype,"layer",void 0),m([x({types:Cs})],Ni.prototype,"pointSymbol",void 0),m([x({types:Cs})],Ni.prototype,"polygonSymbol",void 0),m([x({types:Cs})],Ni.prototype,"polylineSymbol",void 0),m([x({type:VE,nonNullable:!0})],Ni.prototype,"snappingOptions",null),m([x()],Ni.prototype,"_snappingManager",void 0),m([x({readOnly:!0})],Ni.prototype,"state",null),m([x({type:Qx,nonNullable:!0})],Ni.prototype,"tooltipOptions",void 0),m([x({readOnly:!0})],Ni.prototype,"updateGraphics",void 0),m([x()],Ni.prototype,"updateOnGraphicClick",void 0),m([x({types:Cs})],Ni.prototype,"updatePointSymbol",void 0),m([x({types:Cs})],Ni.prototype,"updatePolygonSymbol",void 0),m([x({types:Cs})],Ni.prototype,"updatePolylineSymbol",void 0),m([x({types:Cs})],Ni.prototype,"vertexSymbol",void 0),m([x({value:null})],Ni.prototype,"view",null),Ni=m([X("esri.widgets.Sketch.SketchViewModel")],Ni);const pb=/^[a-z0-9]+(-[a-z0-9]+)*$/,A9=(e,t,i,r="")=>{const s=e.split(":");if(e.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;r=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const d=s.pop(),v=s.pop(),_={provider:s.length>0?s[0]:r,prefix:v,name:d};return t&&!P9(_)?null:_}const l=s[0],f=l.split("-");if(f.length>1){const d={provider:r,prefix:f.shift(),name:f.join("-")};return t&&!P9(d)?null:d}if(i&&r===""){const d={provider:r,prefix:"",name:l};return t&&!P9(d,i)?null:d}return null},P9=(e,t)=>e?!!((e.provider===""||e.provider.match(pb))&&(t&&e.prefix===""||e.prefix.match(pb))&&e.name.match(pb)):!1,wK=Object.freeze({left:0,top:0,width:16,height:16}),O9=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),k9=Object.freeze(te(te({},wK),O9)),zE=Object.freeze(je(te({},k9),{body:"",hidden:!1}));function KIe(e,t){const i={};!e.hFlip!=!t.hFlip&&(i.hFlip=!0),!e.vFlip!=!t.vFlip&&(i.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(i.rotate=r),i}function _K(e,t){const i=KIe(e,t);for(const r in zE)r in O9?r in e&&!(r in i)&&(i[r]=O9[r]):r in t?i[r]=t[r]:r in e&&(i[r]=e[r]);return i}function YIe(e,t){const i=e.icons,r=e.aliases||Object.create(null),s=Object.create(null);function l(f){if(i[f])return s[f]=[];if(!(f in s)){s[f]=null;const d=r[f]&&r[f].parent,v=d&&l(d);v&&(s[f]=[d].concat(v))}return s[f]}return(t||Object.keys(i).concat(Object.keys(r))).forEach(l),s}function XIe(e,t,i){const r=e.icons,s=e.aliases||Object.create(null);let l={};function f(d){l=_K(r[d]||s[d],l)}return f(t),i.forEach(f),_K(e,l)}function xK(e,t){const i=[];if(typeof e!="object"||typeof e.icons!="object")return i;e.not_found instanceof Array&&e.not_found.forEach(s=>{t(s,null),i.push(s)});const r=YIe(e);for(const s in r){const l=r[s];l&&(t(s,XIe(e,s,l)),i.push(s))}return i}const QIe=te({provider:"",aliases:{},not_found:{}},wK);function GE(e,t){for(const i in t)if(i in e&&typeof e[i]!=typeof t[i])return!1;return!0}function SK(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!GE(e,QIe))return null;const i=t.icons;for(const s in i){const l=i[s];if(!s.match(pb)||typeof l.body!="string"||!GE(l,zE))return null}const r=t.aliases||Object.create(null);for(const s in r){const l=r[s],f=l.parent;if(!s.match(pb)||typeof f!="string"||!i[f]&&!r[f]||!GE(l,zE))return null}return t}const MK=Object.create(null);function e8e(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function mf(e,t){const i=MK[e]||(MK[e]=Object.create(null));return i[t]||(i[t]=e8e(e,t))}function qE(e,t){return SK(t)?xK(t,(i,r)=>{r?e.icons[i]=r:e.missing.add(i)}):[]}function t8e(e,t,i){try{if(typeof i.body=="string")return e.icons[t]=te({},i),!0}catch{}return!1}let db=!1;function $K(e){return typeof e=="boolean"&&(db=e),db}function i8e(e){const t=typeof e=="string"?A9(e,!0,db):e;if(t){const i=mf(t.provider,t.prefix),r=t.name;return i.icons[r]||(i.missing.has(r)?null:void 0)}}function r8e(e,t){const i=A9(e,!0,db);if(!i)return!1;const r=mf(i.provider,i.prefix);return t8e(r,i.name,t)}function n8e(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),db&&!t&&!e.prefix){let s=!1;return SK(e)&&(e.prefix="",xK(e,(l,f)=>{f&&r8e(l,f)&&(s=!0)})),s}const i=e.prefix;if(!P9({provider:t,prefix:i,name:"a"}))return!1;const r=mf(t,i);return!!qE(r,e)}const IK=Object.freeze({width:null,height:null}),TK=Object.freeze(te(te({},IK),O9)),s8e=/(-?[0-9.]*[0-9]+[0-9.]*)/g,o8e=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function EK(e,t,i){if(t===1)return e;if(i=i||100,typeof e=="number")return Math.ceil(e*t*i)/i;if(typeof e!="string")return e;const r=e.split(s8e);if(r===null||!r.length)return e;const s=[];let l=r.shift(),f=o8e.test(l);for(;;){if(f){const d=parseFloat(l);isNaN(d)?s.push(l):s.push(Math.ceil(d*t*i)/i)}else s.push(l);if(l=r.shift(),l===void 0)return s.join("");f=!f}}function a8e(e,t){const i=te(te({},k9),e),r=te(te({},TK),t),s={left:i.left,top:i.top,width:i.width,height:i.height};let l=i.body;[i,r].forEach(k=>{const F=[],D=k.hFlip,z=k.vFlip;let H=k.rotate;D?z?H+=2:(F.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),F.push("scale(-1 1)"),s.top=s.left=0):z&&(F.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),F.push("scale(1 -1)"),s.top=s.left=0);let J;switch(H<0&&(H-=Math.floor(H/4)*4),H=H%4,H){case 1:J=s.height/2+s.top,F.unshift("rotate(90 "+J.toString()+" "+J.toString()+")");break;case 2:F.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:J=s.width/2+s.left,F.unshift("rotate(-90 "+J.toString()+" "+J.toString()+")");break}H%2==1&&(s.left!==s.top&&(J=s.left,s.left=s.top,s.top=J),s.width!==s.height&&(J=s.width,s.width=s.height,s.height=J)),F.length&&(l='<g transform="'+F.join(" ")+'">'+l+"</g>")});const f=r.width,d=r.height,v=s.width,_=s.height;let M,T;return f===null?(T=d===null?"1em":d==="auto"?_:d,M=EK(T,v/_)):(M=f==="auto"?v:f,T=d===null?EK(M,_/v):d==="auto"?_:d),{attributes:{width:M.toString(),height:T.toString(),viewBox:s.left.toString()+" "+s.top.toString()+" "+v.toString()+" "+_.toString()},body:l}}const l8e=/\sid="(\S+)"/g,u8e="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let c8e=0;function h8e(e,t=u8e){const i=[];let r;for(;r=l8e.exec(e);)i.push(r[1]);return i.length&&i.forEach(s=>{const l=typeof t=="function"?t(s):t+(c8e++).toString(),f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+f+')([")]|\\.[a-z])',"g"),"$1"+l+"$3")}),e}const UE=Object.create(null);function p8e(e,t){UE[e]=t}function BE(e){return UE[e]||UE[""]}function HE(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const WE=Object.create(null),fb=["https://api.simplesvg.com","https://api.unisvg.com"],R9=[];for(;fb.length>0;)fb.length===1||Math.random()>.5?R9.push(fb.shift()):R9.push(fb.pop());WE[""]=HE({resources:["https://api.iconify.design"].concat(R9)});function d8e(e,t){const i=HE(t);return i===null?!1:(WE[e]=i,!0)}function JE(e){return WE[e]}const f8e=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let CK=f8e();function y8e(e,t){const i=JE(e);if(!i)return 0;let r;if(!i.maxURL)r=0;else{let s=0;i.resources.forEach(f=>{s=Math.max(s,f.length)});const l=t+".json?icons=";r=i.maxURL-s-i.path.length-l.length}return r}function g8e(e){return e===404}const m8e=(e,t,i)=>{const r=[],s=y8e(e,t),l="icons";let f={type:l,provider:e,prefix:t,icons:[]},d=0;return i.forEach((v,_)=>{d+=v.length+1,d>=s&&_>0&&(r.push(f),f={type:l,provider:e,prefix:t,icons:[]},d=v.length),f.icons.push(v)}),r.push(f),r};function v8e(e){if(typeof e=="string"){const t=JE(e);if(t)return t.path}return"/"}const b8e=(e,t,i)=>{if(!CK){i("abort",424);return}let r=v8e(t.provider);switch(t.type){case"icons":{const l=t.prefix,d=t.icons.join(","),v=new URLSearchParams({icons:d});r+=l+".json?"+v.toString();break}case"custom":{const l=t.uri;r+=l.slice(0,1)==="/"?l.slice(1):l;break}default:i("abort",400);return}let s=503;CK(e+r).then(l=>{const f=l.status;if(f!==200){setTimeout(()=>{i(g8e(f)?"abort":"next",f)});return}return s=501,l.json()}).then(l=>{if(typeof l!="object"||l===null){setTimeout(()=>{l===404?i("abort",l):i("next",s)});return}setTimeout(()=>{i("success",l)})}).catch(()=>{i("next",s)})},w8e={prepare:m8e,send:b8e};function _8e(e){const t={loaded:[],missing:[],pending:[]},i=Object.create(null);e.sort((s,l)=>s.provider!==l.provider?s.provider.localeCompare(l.provider):s.prefix!==l.prefix?s.prefix.localeCompare(l.prefix):s.name.localeCompare(l.name));let r={provider:"",prefix:"",name:""};return e.forEach(s=>{if(r.name===s.name&&r.prefix===s.prefix&&r.provider===s.provider)return;r=s;const l=s.provider,f=s.prefix,d=s.name,v=i[l]||(i[l]=Object.create(null)),_=v[f]||(v[f]=mf(l,f));let M;d in _.icons?M=t.loaded:f===""||_.missing.has(d)?M=t.missing:M=t.pending;const T={provider:l,prefix:f,name:d};M.push(T)}),t}function AK(e,t){e.forEach(i=>{const r=i.loaderCallbacks;r&&(i.loaderCallbacks=r.filter(s=>s.id!==t))})}function x8e(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let i=!1;const r=e.provider,s=e.prefix;t.forEach(l=>{const f=l.icons,d=f.pending.length;f.pending=f.pending.filter(v=>{if(v.prefix!==s)return!0;const _=v.name;if(e.icons[_])f.loaded.push({provider:r,prefix:s,name:_});else if(e.missing.has(_))f.missing.push({provider:r,prefix:s,name:_});else return i=!0,!0;return!1}),f.pending.length!==d&&(i||AK([e],l.id),l.callback(f.loaded.slice(0),f.missing.slice(0),f.pending.slice(0),l.abort))})}))}let S8e=0;function M8e(e,t,i){const r=S8e++,s=AK.bind(null,i,r);if(!t.pending.length)return s;const l={id:r,icons:t,callback:e,abort:s};return i.forEach(f=>{(f.loaderCallbacks||(f.loaderCallbacks=[])).push(l)}),s}function $8e(e,t=!0,i=!1){const r=[];return e.forEach(s=>{const l=typeof s=="string"?A9(s,t,i):s;l&&r.push(l)}),r}var I8e={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function T8e(e,t,i,r){const s=e.resources.length,l=e.random?Math.floor(Math.random()*s):e.index;let f;if(e.random){let ee=e.resources.slice(0);for(f=[];ee.length>1;){const le=Math.floor(Math.random()*ee.length);f.push(ee[le]),ee=ee.slice(0,le).concat(ee.slice(le+1))}f=f.concat(ee)}else f=e.resources.slice(l).concat(e.resources.slice(0,l));const d=Date.now();let v="pending",_=0,M,T=null,A=[],k=[];typeof r=="function"&&k.push(r);function F(){T&&(clearTimeout(T),T=null)}function D(){v==="pending"&&(v="aborted"),F(),A.forEach(ee=>{ee.status==="pending"&&(ee.status="aborted")}),A=[]}function z(ee,le){le&&(k=[]),typeof ee=="function"&&k.push(ee)}function H(){return{startTime:d,payload:t,status:v,queriesSent:_,queriesPending:A.length,subscribe:z,abort:D}}function J(){v="failed",k.forEach(ee=>{ee(void 0,M)})}function Y(){A.forEach(ee=>{ee.status==="pending"&&(ee.status="aborted")}),A=[]}function ie(ee,le,me){const we=le!=="success";switch(A=A.filter(_e=>_e!==ee),v){case"pending":break;case"failed":if(we||!e.dataAfterTimeout)return;break;default:return}if(le==="abort"){M=me,J();return}if(we){M=me,A.length||(f.length?re():J());return}if(F(),Y(),!e.random){const _e=e.resources.indexOf(ee.resource);_e!==-1&&_e!==e.index&&(e.index=_e)}v="completed",k.forEach(_e=>{_e(me)})}function re(){if(v!=="pending")return;F();const ee=f.shift();if(ee===void 0){if(A.length){T=setTimeout(()=>{F(),v==="pending"&&(Y(),J())},e.timeout);return}J();return}const le={status:"pending",resource:ee,callback:(me,we)=>{ie(le,me,we)}};A.push(le),_++,T=setTimeout(re,e.rotate),i(ee,t,le.callback)}return setTimeout(re),H}function PK(e){const t=te(te({},I8e),e);let i=[];function r(){i=i.filter(d=>d().status==="pending")}function s(d,v,_){const M=T8e(t,d,v,(T,A)=>{r(),_&&_(T,A)});return i.push(M),M}function l(d){return i.find(v=>d(v))||null}return{query:s,find:l,setIndex:d=>{t.index=d},getIndex:()=>t.index,cleanup:r}}function OK(){}const ZE=Object.create(null);function E8e(e){if(!ZE[e]){const t=JE(e);if(!t)return;const i=PK(t),r={config:t,redundancy:i};ZE[e]=r}return ZE[e]}function C8e(e,t,i){let r,s;if(typeof e=="string"){const l=BE(e);if(!l)return i(void 0,424),OK;s=l.send;const f=E8e(e);f&&(r=f.redundancy)}else{const l=HE(e);if(l){r=PK(l);const f=e.resources?e.resources[0]:"",d=BE(f);d&&(s=d.send)}}return!r||!s?(i(void 0,424),OK):r.query(t,s,i)().abort}const kK="iconify2",yb="iconify",RK=yb+"-count",FK=yb+"-version",LK=36e5,A8e=168;function KE(e,t){try{return e.getItem(t)}catch{}}function YE(e,t,i){try{return e.setItem(t,i),!0}catch{}}function NK(e,t){try{e.removeItem(t)}catch{}}function XE(e,t){return YE(e,RK,t.toString())}function QE(e){return parseInt(KE(e,RK))||0}const F9={local:!0,session:!0},jK={local:new Set,session:new Set};let eC=!1;function P8e(e){eC=e}let L9=typeof window=="undefined"?{}:window;function DK(e){const t=e+"Storage";try{if(L9&&L9[t]&&typeof L9[t].length=="number")return L9[t]}catch{}F9[e]=!1}function VK(e,t){const i=DK(e);if(!i)return;const r=KE(i,FK);if(r!==kK){if(r){const d=QE(i);for(let v=0;v<d;v++)NK(i,yb+v.toString())}YE(i,FK,kK),XE(i,0);return}const s=Math.floor(Date.now()/LK)-A8e,l=d=>{const v=yb+d.toString(),_=KE(i,v);if(typeof _=="string"){try{const M=JSON.parse(_);if(typeof M=="object"&&typeof M.cached=="number"&&M.cached>s&&typeof M.provider=="string"&&typeof M.data=="object"&&typeof M.data.prefix=="string"&&t(M,d))return!0}catch{}NK(i,v)}};let f=QE(i);for(let d=f-1;d>=0;d--)l(d)||(d===f-1?(f--,XE(i,f)):jK[e].add(d))}function zK(){if(!eC){P8e(!0);for(const e in F9)VK(e,t=>{const i=t.data,r=t.provider,s=i.prefix,l=mf(r,s);if(!qE(l,i).length)return!1;const f=i.lastModified||-1;return l.lastModifiedCached=l.lastModifiedCached?Math.min(l.lastModifiedCached,f):f,!0})}}function O8e(e,t){const i=e.lastModifiedCached;if(i&&i>=t)return i===t;if(e.lastModifiedCached=t,i)for(const r in F9)VK(r,s=>{const l=s.data;return s.provider!==e.provider||l.prefix!==e.prefix||l.lastModified===t});return!0}function k8e(e,t){eC||zK();function i(r){let s;if(!F9[r]||!(s=DK(r)))return;const l=jK[r];let f;if(l.size)l.delete(f=Array.from(l).shift());else if(f=QE(s),!XE(s,f+1))return;const d={cached:Math.floor(Date.now()/LK),provider:e.provider,data:t};return YE(s,yb+f.toString(),JSON.stringify(d))}t.lastModified&&!O8e(e,t.lastModified)||!Object.keys(t.icons).length||(t.not_found&&(t=Object.assign({},t),delete t.not_found),i("local")||i("session"))}function GK(){}function R8e(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,x8e(e)}))}function F8e(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:i,prefix:r}=e,s=e.iconsToLoad;delete e.iconsToLoad;let l;if(!s||!(l=BE(i)))return;l.prepare(i,r,s).forEach(d=>{C8e(i,d,v=>{if(typeof v!="object")d.icons.forEach(_=>{e.missing.add(_)});else try{const _=qE(e,v);if(!_.length)return;const M=e.pendingIcons;M&&_.forEach(T=>{M.delete(T)}),k8e(e,v)}catch(_){console.error(_)}R8e(e)})})}))}const L8e=(e,t)=>{const i=$8e(e,!0,$K()),r=_8e(i);if(!r.pending.length){let v=!0;return t&&setTimeout(()=>{v&&t(r.loaded,r.missing,r.pending,GK)}),()=>{v=!1}}const s=Object.create(null),l=[];let f,d;return r.pending.forEach(v=>{const{provider:_,prefix:M}=v;if(M===d&&_===f)return;f=_,d=M,l.push(mf(_,M));const T=s[_]||(s[_]=Object.create(null));T[M]||(T[M]=[])}),r.pending.forEach(v=>{const{provider:_,prefix:M,name:T}=v,A=mf(_,M),k=A.pendingIcons||(A.pendingIcons=new Set);k.has(T)||(k.add(T),s[_][M].push(T))}),l.forEach(v=>{const{provider:_,prefix:M}=v;s[_][M].length&&F8e(v,s[_][M])}),t?M8e(t,r,l):GK};function N8e(e,t){const i=te({},e);for(const r in t){const s=t[r],l=typeof s;r in IK?(s===null||s&&(l==="string"||l==="number"))&&(i[r]=s):l===typeof i[r]&&(i[r]=r==="rotate"?s%4:s)}return i}const j8e=/[\s,]+/;function D8e(e,t){t.split(j8e).forEach(i=>{switch(i.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function V8e(e,t=0){const i=e.replace(/^-?[0-9.]*/,"");function r(s){for(;s<0;)s+=4;return s%4}if(i===""){const s=parseInt(e);return isNaN(s)?0:r(s)}else if(i!==e){let s=0;switch(i){case"%":s=25;break;case"deg":s=90}if(s){let l=parseFloat(e.slice(0,e.length-i.length));return isNaN(l)?0:(l=l/s,l%1==0?r(l):0)}}return t}function z8e(e,t){let i=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)i+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+e+"</svg>"}function G8e(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function q8e(e){return'url("data:image/svg+xml,'+G8e(e)+'")'}const qK=je(te({},TK),{inline:!1}),U8e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},B8e={display:"inline-block"},tC={backgroundColor:"currentColor"},UK={backgroundColor:"transparent"},BK={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},HK={webkitMask:tC,mask:tC,background:UK};for(const e in HK){const t=HK[e];for(const i in BK)t[e+i]=BK[i]}const N9={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";N9[e+"-flip"]=t,N9[e.slice(0,1)+"-flip"]=t,N9[e+"Flip"]=t});function WK(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const JK=(e,t)=>{const i=N8e(qK,t),r=te({},U8e),s=t.mode||"svg",l={},f=t.style,d=typeof f=="object"&&!(f instanceof Array)?f:{};for(let D in t){const z=t[D];if(z!==void 0)switch(D){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":i[D]=z===!0||z==="true"||z===1;break;case"flip":typeof z=="string"&&D8e(i,z);break;case"color":l.color=z;break;case"rotate":typeof z=="string"?i[D]=V8e(z):typeof z=="number"&&(i[D]=z);break;case"ariaHidden":case"aria-hidden":z!==!0&&z!=="true"&&delete r["aria-hidden"];break;default:{const H=N9[D];H?(z===!0||z==="true"||z===1)&&(i[H]=!0):qK[D]===void 0&&(r[D]=z)}}}const v=a8e(e,i),_=v.attributes;if(i.inline&&(l.verticalAlign="-0.125em"),s==="svg"){r.style=te(te({},l),d),Object.assign(r,_);let D=0,z=t.id;return typeof z=="string"&&(z=z.replace(/-/g,"_")),r.innerHTML=h8e(v.body,z?()=>z+"ID"+D++:"iconifyVue"),Ry("svg",r)}const{body:M,width:T,height:A}=e,k=s==="mask"||(s==="bg"?!1:M.indexOf("currentColor")!==-1),F=z8e(M,je(te({},_),{width:T+"",height:A+""}));return r.style=te(te(te(je(te({},l),{"--svg":q8e(F),width:WK(_.width),height:WK(_.height)}),B8e),k?tC:UK),d),Ry("span",r)};$K(!0);p8e("",w8e);if(typeof document!="undefined"&&typeof window!="undefined"){zK();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!n8e(r))&&console.error(i)}catch{console.error(i)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let i in t){const r="IconifyProviders["+i+"] is invalid.";try{const s=t[i];if(typeof s!="object"||!s||s.resources===void 0)continue;d8e(i,s)||console.error(r)}catch{console.error(r)}}}}const H8e=je(te({},k9),{body:""}),QOe=S5({inheritAttrs:!1,data(){return{iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let i;if(typeof e!="string"||(i=A9(e,!1,!0))===null)return this.abortLoading(),null;const r=i8e(i);if(!r)return(!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",r!==null&&(this._loadingIcon={name:e,abort:L8e([i],()=>{this.counter++})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const s=["iconify"];return i.prefix!==""&&s.push("iconify--"+i.prefix),i.provider!==""&&s.push("iconify--"+i.provider),{data:r,classes:s}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return JK(H8e,e);let i=e;return t.classes&&(i=je(te({},e),{class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")})),JK(te(te({},k9),t.data),i)}});var j9,W8e=new Uint8Array(16);function J8e(){if(!j9&&(j9=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!j9))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return j9(W8e)}var Z8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function K8e(e){return typeof e=="string"&&Z8e.test(e)}var Nn=[];for(var iC=0;iC<256;++iC)Nn.push((iC+256).toString(16).substr(1));function Y8e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Nn[e[t+0]]+Nn[e[t+1]]+Nn[e[t+2]]+Nn[e[t+3]]+"-"+Nn[e[t+4]]+Nn[e[t+5]]+"-"+Nn[e[t+6]]+Nn[e[t+7]]+"-"+Nn[e[t+8]]+Nn[e[t+9]]+"-"+Nn[e[t+10]]+Nn[e[t+11]]+Nn[e[t+12]]+Nn[e[t+13]]+Nn[e[t+14]]+Nn[e[t+15]]).toLowerCase();if(!K8e(i))throw TypeError("Stringified UUID is invalid");return i}function eke(e,t,i){e=e||{};var r=e.random||(e.rng||J8e)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(var s=0;s<16;++s)t[i+s]=r[s];return t}return Y8e(r)}var ZK=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},KK={exports:{}};(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var i=function(r){var s=/\blang(?:uage)?-([\w-]+)\b/i,l=0,f={},d={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function J(Y){return Y instanceof v?new v(Y.type,J(Y.content),Y.alias):Array.isArray(Y)?Y.map(J):Y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(J){return Object.prototype.toString.call(J).slice(8,-1)},objId:function(J){return J.__id||Object.defineProperty(J,"__id",{value:++l}),J.__id},clone:function J(Y,ie){ie=ie||{};var re,ee;switch(d.util.type(Y)){case"Object":if(ee=d.util.objId(Y),ie[ee])return ie[ee];re={},ie[ee]=re;for(var le in Y)Y.hasOwnProperty(le)&&(re[le]=J(Y[le],ie));return re;case"Array":return ee=d.util.objId(Y),ie[ee]?ie[ee]:(re=[],ie[ee]=re,Y.forEach(function(me,we){re[we]=J(me,ie)}),re);default:return Y}},getLanguage:function(J){for(;J&&!s.test(J.className);)J=J.parentElement;return J?(J.className.match(s)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(re){var J=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(re.stack)||[])[1];if(J){var Y=document.getElementsByTagName("script");for(var ie in Y)if(Y[ie].src==J)return Y[ie]}return null}},isActive:function(J,Y,ie){for(var re="no-"+Y;J;){var ee=J.classList;if(ee.contains(Y))return!0;if(ee.contains(re))return!1;J=J.parentElement}return!!ie}},languages:{plain:f,plaintext:f,text:f,txt:f,extend:function(J,Y){var ie=d.util.clone(d.languages[J]);for(var re in Y)ie[re]=Y[re];return ie},insertBefore:function(J,Y,ie,re){re=re||d.languages;var ee=re[J],le={};for(var me in ee)if(ee.hasOwnProperty(me)){if(me==Y)for(var we in ie)ie.hasOwnProperty(we)&&(le[we]=ie[we]);ie.hasOwnProperty(me)||(le[me]=ee[me])}var _e=re[J];return re[J]=le,d.languages.DFS(d.languages,function(Me,Se){Se===_e&&Me!=J&&(this[Me]=le)}),le},DFS:function J(Y,ie,re,ee){ee=ee||{};var le=d.util.objId;for(var me in Y)if(Y.hasOwnProperty(me)){ie.call(Y,me,Y[me],re||me);var we=Y[me],_e=d.util.type(we);_e==="Object"&&!ee[le(we)]?(ee[le(we)]=!0,J(we,ie,null,ee)):_e==="Array"&&!ee[le(we)]&&(ee[le(we)]=!0,J(we,ie,me,ee))}}},plugins:{},highlightAll:function(J,Y){d.highlightAllUnder(document,J,Y)},highlightAllUnder:function(J,Y,ie){var re={callback:ie,container:J,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",re),re.elements=Array.prototype.slice.apply(re.container.querySelectorAll(re.selector)),d.hooks.run("before-all-elements-highlight",re);for(var ee=0,le;le=re.elements[ee++];)d.highlightElement(le,Y===!0,re.callback)},highlightElement:function(J,Y,ie){var re=d.util.getLanguage(J),ee=d.languages[re];J.className=J.className.replace(s,"").replace(/\s+/g," ")+" language-"+re;var le=J.parentElement;le&&le.nodeName.toLowerCase()==="pre"&&(le.className=le.className.replace(s,"").replace(/\s+/g," ")+" language-"+re);var me=J.textContent,we={element:J,language:re,grammar:ee,code:me};function _e(Se){we.highlightedCode=Se,d.hooks.run("before-insert",we),we.element.innerHTML=we.highlightedCode,d.hooks.run("after-highlight",we),d.hooks.run("complete",we),ie&&ie.call(we.element)}if(d.hooks.run("before-sanity-check",we),le=we.element.parentElement,le&&le.nodeName.toLowerCase()==="pre"&&!le.hasAttribute("tabindex")&&le.setAttribute("tabindex","0"),!we.code){d.hooks.run("complete",we),ie&&ie.call(we.element);return}if(d.hooks.run("before-highlight",we),!we.grammar){_e(d.util.encode(we.code));return}if(Y&&r.Worker){var Me=new Worker(d.filename);Me.onmessage=function(Se){_e(Se.data)},Me.postMessage(JSON.stringify({language:we.language,code:we.code,immediateClose:!0}))}else _e(d.highlight(we.code,we.grammar,we.language))},highlight:function(J,Y,ie){var re={code:J,grammar:Y,language:ie};return d.hooks.run("before-tokenize",re),re.tokens=d.tokenize(re.code,re.grammar),d.hooks.run("after-tokenize",re),v.stringify(d.util.encode(re.tokens),re.language)},tokenize:function(J,Y){var ie=Y.rest;if(ie){for(var re in ie)Y[re]=ie[re];delete Y.rest}var ee=new T;return A(ee,ee.head,J),M(J,ee,Y,ee.head,0),F(ee)},hooks:{all:{},add:function(J,Y){var ie=d.hooks.all;ie[J]=ie[J]||[],ie[J].push(Y)},run:function(J,Y){var ie=d.hooks.all[J];if(!(!ie||!ie.length))for(var re=0,ee;ee=ie[re++];)ee(Y)}},Token:v};r.Prism=d;function v(J,Y,ie,re){this.type=J,this.content=Y,this.alias=ie,this.length=(re||"").length|0}v.stringify=function J(Y,ie){if(typeof Y=="string")return Y;if(Array.isArray(Y)){var re="";return Y.forEach(function(_e){re+=J(_e,ie)}),re}var ee={type:Y.type,content:J(Y.content,ie),tag:"span",classes:["token",Y.type],attributes:{},language:ie},le=Y.alias;le&&(Array.isArray(le)?Array.prototype.push.apply(ee.classes,le):ee.classes.push(le)),d.hooks.run("wrap",ee);var me="";for(var we in ee.attributes)me+=" "+we+'="'+(ee.attributes[we]||"").replace(/"/g,"&quot;")+'"';return"<"+ee.tag+' class="'+ee.classes.join(" ")+'"'+me+">"+ee.content+"</"+ee.tag+">"};function _(J,Y,ie,re){J.lastIndex=Y;var ee=J.exec(ie);if(ee&&re&&ee[1]){var le=ee[1].length;ee.index+=le,ee[0]=ee[0].slice(le)}return ee}function M(J,Y,ie,re,ee,le){for(var me in ie)if(!(!ie.hasOwnProperty(me)||!ie[me])){var we=ie[me];we=Array.isArray(we)?we:[we];for(var _e=0;_e<we.length;++_e){if(le&&le.cause==me+","+_e)return;var Me=we[_e],Se=Me.inside,He=!!Me.lookbehind,We=!!Me.greedy,Ot=Me.alias;if(We&&!Me.pattern.global){var kt=Me.pattern.toString().match(/[imsuy]*$/)[0];Me.pattern=RegExp(Me.pattern.source,kt+"g")}for(var ft=Me.pattern||Me,Ye=re.next,Ct=ee;Ye!==Y.tail&&!(le&&Ct>=le.reach);Ct+=Ye.value.length,Ye=Ye.next){var Oi=Ye.value;if(Y.length>J.length)return;if(!(Oi instanceof v)){var Ui=1,_i;if(We){if(_i=_(ft,Ct,J,He),!_i)break;var ct=_i.index,pr=_i.index+_i[0].length,Rr=Ct;for(Rr+=Ye.value.length;ct>=Rr;)Ye=Ye.next,Rr+=Ye.value.length;if(Rr-=Ye.value.length,Ct=Rr,Ye.value instanceof v)continue;for(var De=Ye;De!==Y.tail&&(Rr<pr||typeof De.value=="string");De=De.next)Ui++,Rr+=De.value.length;Ui--,Oi=J.slice(Ct,Rr),_i.index-=Ct}else if(_i=_(ft,0,Oi,He),!_i)continue;var ct=_i.index,Ze=_i[0],yt=Oi.slice(0,ct),ni=Oi.slice(ct+Ze.length),si=Ct+Oi.length;le&&si>le.reach&&(le.reach=si);var Lt=Ye.prev;yt&&(Lt=A(Y,Lt,yt),Ct+=yt.length),k(Y,Lt,Ui);var Nt=new v(me,Se?d.tokenize(Ze,Se):Ze,Ot,Ze);if(Ye=A(Y,Lt,Nt),ni&&A(Y,Ye,ni),Ui>1){var ce={cause:me+","+_e,reach:si};M(J,Y,ie,Ye.prev,Ct,ce),le&&ce.reach>le.reach&&(le.reach=ce.reach)}}}}}}function T(){var J={value:null,prev:null,next:null},Y={value:null,prev:J,next:null};J.next=Y,this.head=J,this.tail=Y,this.length=0}function A(J,Y,ie){var re=Y.next,ee={value:ie,prev:Y,next:re};return Y.next=ee,re.prev=ee,J.length++,ee}function k(J,Y,ie){for(var re=Y.next,ee=0;ee<ie&&re!==J.tail;ee++)re=re.next;Y.next=re,re.prev=Y,J.length-=ee}function F(J){for(var Y=[],ie=J.head.next;ie!==J.tail;)Y.push(ie.value),ie=ie.next;return Y}if(!r.document)return r.addEventListener&&(d.disableWorkerMessageHandler||r.addEventListener("message",function(J){var Y=JSON.parse(J.data),ie=Y.language,re=Y.code,ee=Y.immediateClose;r.postMessage(d.highlight(re,d.languages[ie],ie)),ee&&r.close()},!1)),d;var D=d.util.currentScript();D&&(d.filename=D.src,D.hasAttribute("data-manual")&&(d.manual=!0));function z(){d.manual||d.highlightAll()}if(!d.manual){var H=document.readyState;H==="loading"||H==="interactive"&&D&&D.defer?document.addEventListener("DOMContentLoaded",z):window.requestAnimationFrame?window.requestAnimationFrame(z):window.setTimeout(z,16)}return d}(t);e.exports&&(e.exports=i),typeof ZK!="undefined"&&(ZK.Prism=i),i.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},i.languages.markup.tag.inside["attr-value"].inside.entity=i.languages.markup.entity,i.languages.markup.doctype.inside["internal-subset"].inside=i.languages.markup,i.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(i.languages.markup.tag,"addInlined",{value:function(s,l){var f={};f["language-"+l]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:i.languages[l]},f.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:f}};d["language-"+l]={pattern:/[\s\S]+/,inside:i.languages[l]};var v={};v[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:d},i.languages.insertBefore("markup","cdata",v)}}),Object.defineProperty(i.languages.markup.tag,"addAttribute",{value:function(r,s){i.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:i.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.xml=i.languages.extend("markup",{}),i.languages.ssml=i.languages.xml,i.languages.atom=i.languages.xml,i.languages.rss=i.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var l=r.languages.markup;l&&(l.tag.addInlined("style","css"),l.tag.addAttribute("style","css"))}(i),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{"class-name":[i.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),i.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,i.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:i.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:i.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:i.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:i.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:i.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),i.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&(i.languages.markup.tag.addInlined("script","javascript"),i.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),i.languages.js=i.languages.javascript,function(){if(typeof i=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading\u2026",s=function(D,z){return"\u2716 Error "+D+" while fetching file: "+z},l="\u2716 Error: File does not exist or is empty",f={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",v="loading",_="loaded",M="failed",T="pre[data-src]:not(["+d+'="'+_+'"]):not(['+d+'="'+v+'"])',A=/\blang(?:uage)?-([\w-]+)\b/i;function k(D,z){var H=D.className;H=H.replace(A," ")+" language-"+z,D.className=H.replace(/\s+/g," ").trim()}i.hooks.add("before-highlightall",function(D){D.selector+=", "+T}),i.hooks.add("before-sanity-check",function(D){var z=D.element;if(z.matches(T)){D.code="",z.setAttribute(d,v);var H=z.appendChild(document.createElement("CODE"));H.textContent=r;var J=z.getAttribute("data-src"),Y=D.language;if(Y==="none"){var ie=(/\.(\w+)$/.exec(J)||[,"none"])[1];Y=f[ie]||ie}k(H,Y),k(z,Y);var re=i.plugins.autoloader;re&&re.loadLanguages(Y);var ee=new XMLHttpRequest;ee.open("GET",J,!0),ee.onreadystatechange=function(){ee.readyState==4&&(ee.status<400&&ee.responseText?(z.setAttribute(d,_),H.textContent=ee.responseText,i.highlightElement(H)):(z.setAttribute(d,M),ee.status>=400?H.textContent=s(ee.status,ee.statusText):H.textContent=l))},ee.send(null)}}),i.plugins.fileHighlight={highlight:function(z){for(var H=(z||document).querySelectorAll(T),J=0,Y;Y=H[J++];)i.highlightElement(Y)}};var F=!1;i.fileHighlight=function(){F||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),F=!0),i.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(KK);var tke=KK.exports;export{Jt as $,eTe as A,tTe as B,uTe as C,rie as D,iTe as E,Mo as F,cTe as G,sTe as H,QOe as I,EPe as J,Pe as K,jhe as L,Or as M,Xre as N,q as O,tke as P,une as Q,hne as R,wTe as S,_P as T,ae as U,fTe as V,vTe as W,Ie as X,fe as Y,rEe as Z,CPe as _,rTe as a,tCe as a$,_4 as a0,li as a1,gd as a2,Eo as a3,zi as a4,aW as a5,Sr as a6,HB as a7,fr as a8,Ks as a9,_a as aA,ot as aB,L0 as aC,m as aD,x as aE,X as aF,rt as aG,An as aH,ko as aI,eo as aJ,vl as aK,dt as aL,so as aM,px as aN,Og as aO,Ar as aP,IB as aQ,z8 as aR,EB as aS,Wt as aT,Vxe as aU,_Pe as aV,Yxe as aW,T1 as aX,xPe as aY,Jr as aZ,EL as a_,gi as aa,xn as ab,hF as ac,VB as ad,uk as ae,x4 as af,et as ag,dx as ah,jr as ai,g9e as aj,f9e as ak,jB as al,tT as am,Gu as an,DS as ao,yn as ap,cH as aq,Uf as ar,Iw as as,Ve as at,fi as au,TPe as av,$Pe as aw,Cn as ax,sn as ay,f_ as az,XA as b,VW as b$,Ys as b0,Fo as b1,Dn as b2,ou as b3,FAe as b4,bn as b5,su as b6,zk as b7,J4e as b8,MEe as b9,NB as bA,eT as bB,P1 as bC,aAe as bD,nEe as bE,dAe as bF,ve as bG,tV as bH,Kye as bI,Yye as bJ,WAe as bK,mt as bL,ss as bM,sa as bN,YH as bO,XH as bP,Zl as bQ,pn as bR,Ew as bS,_W as bT,gW as bU,mW as bV,OW as bW,vW as bX,MW as bY,DW as bZ,tW as b_,kPe as ba,iz as bb,eve as bc,qm as bd,w7 as be,xx as bf,AAe as bg,$Ee as bh,dEe as bi,GTe as bj,o0 as bk,r4e as bl,cue as bm,hue as bn,At as bo,Gf as bp,ug as bq,lg as br,GZ as bs,v9 as bt,DTe as bu,Yw as bv,Kw as bw,pPe as bx,dPe as by,hPe as bz,nTe as c,UAe as c$,ra as c0,zW as c1,Vk as c2,V4 as c3,Roe as c4,Ioe as c5,N4 as c6,Gk as c7,LTe as c8,GW as c9,yAe as cA,KW as cB,QW as cC,dW as cD,YW as cE,$ge as cF,gAe as cG,mAe as cH,mEe as cI,MAe as cJ,BTe as cK,xge as cL,Sge as cM,i4 as cN,QH as cO,fAe as cP,cAe as cQ,uV as cR,Mge as cS,pAe as cT,cg as cU,Xa as cV,n_ as cW,wV as cX,Aoe as cY,yd as cZ,Us as c_,zTe as ca,yU as cb,pU as cc,fU as cd,Rl as ce,wv as cf,ex as cg,X3e as ch,fEe as ci,vAe as cj,bAe as ck,$Ae as cl,Ro as cm,ET as cn,CT as co,_Ae as cp,wAe as cq,xAe as cr,SAe as cs,aV as ct,lV as cu,pW as cv,rW as cw,nW as cx,sW as cy,$W as cz,aTe as d,PF as d$,NAe as d0,di as d1,A8 as d2,Pbe as d3,tPe as d4,Obe as d5,QAe as d6,Ts as d7,gn as d8,y0 as d9,nz as dA,RPe as dB,NPe as dC,LPe as dD,FPe as dE,LB as dF,t_e as dG,zy as dH,Xp as dI,r3 as dJ,mi as dK,bt as dL,Fp as dM,NF as dN,ri as dO,Ee as dP,qn as dQ,Gn as dR,ge as dS,wl as dT,A3 as dU,Kl as dV,KD as dW,gr as dX,oO as dY,d0 as dZ,Bg as d_,ePe as da,g2e as db,m2e as dc,v2e as dd,To as de,ibe as df,Ibe as dg,P_ as dh,n3e as di,fPe as dj,L2e as dk,oz as dl,fn as dm,sz as dn,DAe as dp,LAe as dq,fme as dr,qAe as ds,S7 as dt,gTe as du,mTe as dv,Oq as dw,kxe as dx,y9e as dy,Xme as dz,ns as e,Kr as e$,XEe as e0,f0 as e1,dce as e2,ha as e3,k2 as e4,jf as e5,Lo as e6,E6 as e7,sCe as e8,uo as e9,p2e as eA,d2e as eB,f2e as eC,mM as eD,bTe as eE,Gq as eF,Ms as eG,hCe as eH,am as eI,Od as eJ,Jf as eK,RN as eL,Vo as eM,rwe as eN,eCe as eO,Uc as eP,no as eQ,rr as eR,EOe as eS,cSe as eT,oi as eU,ag as eV,Qre as eW,Dk as eX,VTe as eY,Cr as eZ,i$e as e_,COe as ea,zme as eb,wh as ec,ak as ed,POe as ee,OOe as ef,kOe as eg,wd as eh,ROe as ei,FOe as ej,AOe as ek,LOe as el,NOe as em,jOe as en,DOe as eo,Hn as ep,hl as eq,Cw as er,Ybe as es,ai as et,Go as eu,xMe as ev,RG as ew,Wc as ex,jn as ey,Dr as ez,KA as f,Qr as f$,Tc as f0,GJ as f1,UR as f2,Poe as f3,WMe as f4,H$e as f5,kn as f6,Xx as f7,Qx as f8,BH as f9,fpe as fA,Vw as fB,dE as fC,Xi as fD,mCe as fE,gCe as fF,TCe as fG,u0 as fH,nZ as fI,S$e as fJ,ECe as fK,rZ as fL,qOe as fM,xCe as fN,vCe as fO,Op as fP,r6e as fQ,aOe as fR,VS as fS,Qo as fT,gOe as fU,GOe as fV,x$e as fW,SCe as fX,TSe as fY,zc as fZ,Xr as f_,fMe as fa,RT as fb,E0 as fc,Ps as fd,RM as fe,vi as ff,nAe as fg,sAe as fh,G0 as fi,JCe as fj,XCe as fk,z3 as fl,ZCe as fm,QCe as fn,KCe as fo,eAe as fp,YCe as fq,tAe as fr,iAe as fs,rAe as ft,bCe as fu,Oo as fv,$l as fw,xl as fx,fCe as fy,sN as fz,iie as g,iSe as g$,Qs as g0,pi as g1,Is as g2,Mn as g3,Gc as g4,kL as g5,fs as g6,y2 as g7,C1 as g8,rJ as g9,iEe as gA,OEe as gB,Zae as gC,$N as gD,Fpe as gE,uSe as gF,CTe as gG,mo as gH,dK as gI,XOe as gJ,Da as gK,Sn as gL,Zz as gM,yPe as gN,E8 as gO,C2 as gP,Rx as gQ,mue as gR,HR as gS,bu as gT,JG as gU,FEe as gV,VEe as gW,AT as gX,By as gY,j6e as gZ,N6e as g_,ux as ga,E1 as gb,cx as gc,xIe as gd,Rpe as ge,hJ as gf,Gx as gg,nF as gh,BR as gi,Tn as gj,Rle as gk,SJ as gl,l1 as gm,GT as gn,Du as go,yTe as gp,QPe as gq,Ape as gr,jx as gs,tOe as gt,f2 as gu,iF as gv,v2 as gw,zS as gx,ur as gy,Ca as gz,hTe as h,Er as h$,Kle as h0,JU as h1,uEe as h2,TO as h3,eE as h4,$6e as h5,pEe as h6,NL as h7,l9e as h8,yle as h9,T6e as hA,O6e as hB,tE as hC,TOe as hD,xOe as hE,IOe as hF,qpe as hG,IN as hH,Vpe as hI,Sle as hJ,Npe as hK,vPe as hL,$Oe as hM,gt as hN,F6e as hO,G$e as hP,Ci as hQ,SOe as hR,MOe as hS,Zx as hT,Kv as hU,Jx as hV,PSe as hW,JT as hX,qS as hY,pd as hZ,Xu as h_,hOe as ha,cEe as hb,_Ce as hc,SEe as hd,WU as he,rh as hf,MN as hg,kM as hh,JM as hi,VN as hj,p3 as hk,uJ as hl,Rxe as hm,NSe as hn,Ppe as ho,x6e as hp,WPe as hq,ETe as hr,zEe as hs,wF as ht,ICe as hu,hEe as hv,YPe as hw,kT as hx,ny as hy,rOe as hz,pTe as i,mu as i$,R6e as i0,TAe as i1,OSe as i2,ine as i3,qU as i4,yOe as i5,UOe as i6,f9 as i7,bl as i8,pCe as i9,ASe as iA,sOe as iB,qSe as iC,yp as iD,ube as iE,ty as iF,cbe as iG,w6e as iH,jTe as iI,NTe as iJ,lbe as iK,RR as iL,jpe as iM,zR as iN,Vg as iO,zg as iP,Gg as iQ,ACe as iR,il as iS,gwe as iT,oPe as iU,nne as iV,Fde as iW,Axe as iX,IEe as iY,u6 as iZ,Xpe as i_,WS as ia,Lpe as ib,iOe as ic,Yre as id,yr as ie,eO as ig,zL as ih,Io as ii,nOe as ij,Ype as ik,DJ as il,XPe as im,jT as io,VT as ip,ZT as iq,KT as ir,vle as is,U8 as it,zu as iu,gxe as iv,mxe as iw,jl as ix,Dpe as iy,tg as iz,S5 as j,nce as j$,Ixe as j0,En as j1,m2 as j2,Mle as j3,QR as j4,Hv as j5,sEe as j6,ide as j7,tde as j8,JS as j9,cOe as jA,xJ as jB,pOe as jC,dOe as jD,a6e as jE,lOe as jF,Qu as jG,LSe as jH,fOe as jI,gJ as jJ,Vx as jK,ec as jL,ZSe as jM,Fx as jN,cPe as jO,kJ as jP,RJ as jQ,z6e as jR,iCe as jS,OO as jT,C6 as jU,Hg as jV,Wg as jW,Ss as jX,io as jY,rce as jZ,fw as j_,dB as ja,eOe as jb,Xae as jc,Bi as jd,PTe as je,vh as jf,D$ as jg,Gy as jh,Yt as ji,Tse as jj,GU as jk,Ihe as jl,GEe as jm,qEe as jn,Z3 as jo,R2 as jp,MTe as jq,one as jr,yce as js,tu as jt,hde as ju,GS as jv,W6e as jw,X1 as jx,_9e as jy,qx as jz,ote as k,_xe as k$,d0e as k0,rCe as k1,oxe as k2,um as k3,wPe as k4,HPe as k5,Bve as k6,Qve as k7,Ym as k8,Hp as k9,the as kA,CEe as kB,kEe as kC,bEe as kD,UEe as kE,ow as kF,Q7e as kG,eIe as kH,x9e as kI,jEe as kJ,AEe as kK,EAe as kL,X2 as kM,nCe as kN,$Ce as kO,c9e as kP,PEe as kQ,oOe as kR,h9e as kS,GSe as kT,REe as kU,ZEe as kV,LEe as kW,JEe as kX,GR as kY,$s as kZ,yB as k_,b2e as ka,H2 as kb,w2e as kc,sm as kd,_2e as ke,J2 as kf,qg as kg,uq as kh,eue as ki,uPe as kj,UPe as kk,Tl as kl,HEe as km,DEe as kn,Za as ko,ene as kp,aCe as kq,NEe as kr,uCe as ks,lCe as kt,gue as ku,vue as kv,qPe as kw,CCe as kx,HCe as ky,zPe as kz,Ha as l,Li as l$,Ev as l0,oEe as l1,d6 as l2,gB as l3,n6e as l4,due as l5,YR as l6,rO as l7,BEe as l8,d_e as l9,Lr as lA,Q5 as lB,O5e as lC,tO as lD,D9e as lE,V9e as lF,F9e as lG,s9 as lH,E1e as lI,qR as lJ,Lp as lK,Xe as lL,Be as lM,IPe as lN,Vf as lO,kTe as lP,zw as lQ,Gw as lR,RTe as lS,P9e as lT,YEe as lU,zpe as lV,mO as lW,lk as lX,BOe as lY,_U as lZ,oZ as l_,$v as la,ITe as lb,eu as lc,C_ as ld,GPe as le,NN as lf,DPe as lg,U2 as lh,x0 as li,mOe as lj,Jp as lk,T0 as ll,iv as lm,qf as ln,WEe as lo,wEe as lp,vEe as lq,pue as lr,xEe as ls,uOe as lt,_Ee as lu,bPe as lv,Uw as lw,j2 as lx,D$e as ly,zOe as lz,lTe as m,SF as m$,vOe as m0,ps as m1,fl as m2,BPe as m3,Yf as m4,Fc as m5,bOe as m6,wOe as m7,_Oe as m8,dCe as m9,JTe as mA,KTe as mB,hg as mC,Xs as mD,Eae as mE,bq as mF,wq as mG,j2e as mH,YTe as mI,Kde as mJ,l0 as mK,iPe as mL,u1 as mM,ZF as mN,zd as mO,lh as mP,uh as mQ,NM as mR,er as mS,LM as mT,DM as mU,g3 as mV,$de as mW,Zxe as mX,TTe as mY,XF as mZ,zr as m_,Eoe as ma,Tt as mb,o3e as mc,rPe as md,gEe as me,yEe as mf,X5 as mg,Zde as mh,K9e as mi,SPe as mj,MPe as mk,Cc as ml,Dp as mm,D2 as mn,Ql as mo,dpe as mp,R1 as mq,hwe as mr,cwe as ms,Swe as mt,aR as mu,HTe as mv,PPe as mw,XTe as mx,WTe as my,ZTe as mz,Q9 as n,ab as n$,qTe as n0,wo as n1,OPe as n2,APe as n3,P4e as n4,kx as n5,wCe as n6,p9e as n7,kk as n8,I0 as n9,ep as nA,O7e as nB,KAe as nC,bbe as nD,OZ as nE,kZ as nF,_E as nG,C7e as nH,A7e as nI,P7e as nJ,NZ as nK,F7e as nL,L7e as nM,Zt as nN,jZ as nO,gae as nP,wp as nQ,b3 as nR,O4 as nS,GAe as nT,sV as nU,uAe as nV,TE as nW,BZ as nX,YOe as nY,py as nZ,KOe as n_,In as na,Cs as nb,wt as nc,R9e as nd,$be as ne,mPe as nf,gPe as ng,Ud as nh,sPe as ni,lwe as nj,Vm as nk,BAe as nl,Kue as nm,Zp as nn,Qg as no,X6 as np,FG as nq,_q as nr,Sq as ns,A_ as nt,lv as nu,ZG as nv,_Te as nw,Mm as nx,OTe as ny,toe as nz,WA as o,ATe as o$,ZOe as o0,IE as o1,wE as o2,HOe as o3,WOe as o4,JOe as o5,goe as o6,Soe as o7,Hw as o8,FTe as o9,VPe as oA,qM as oB,J0 as oC,jPe as oD,Pme as oE,$me as oF,AV as oG,jV as oH,HH as oI,zAe as oJ,Jhe as oK,YAe as oL,h7 as oM,p7 as oN,kAe as oO,PAe as oP,N5e as oQ,jAe as oR,s_ as oS,hi as oT,i1 as oU,Nye as oV,oh as oW,xz as oX,Sz as oY,e6e as oZ,sse as o_,oa,vne as ob,xTe as oc,STe as od,Zpe as oe,cde as of,ude as og,cCe as oh,zV as oi,NV as oj,OAe as ok,VAe as ol,LV as om,VV as on,WCe as oo,O0 as op,Tq as oq,eme as or,RAe as os,aae as ot,tS as ou,pR as ov,QTe as ow,eEe as ox,tEe as oy,aEe as oz,oTe as p,lPe as p$,Bue as p0,M6 as p1,Jw as p2,as as p3,FCe as p4,NCe as p5,Dj as p6,PCe as p7,kCe as p8,jCe as p9,ZPe as pA,FT as pB,CAe as pC,BSe as pD,lAe as pE,V$ as pF,rIe as pG,x6 as pH,NI as pI,h8 as pJ,Nhe as pK,Lhe as pL,Ohe as pM,FL as pN,fM as pO,Nr as pP,Iq as pQ,mG as pR,aPe as pS,Nq as pT,fG as pU,D_ as pV,e3e as pW,os as pX,she as pY,pF as pZ,AG as p_,UCe as pa,RCe as pb,VCe as pc,M0e as pd,BCe as pe,zCe as pf,LCe as pg,DCe as ph,OCe as pi,p1e as pj,$h as pk,qCe as pl,GCe as pm,b0 as pn,YM as po,ix as pp,JPe as pq,U_e as pr,Ki as ps,hK as pt,yIe as pu,Xo as pv,_Ie as pw,dIe as px,LT as py,KPe as pz,X9 as q,uwe as q$,_we as q0,KG as q1,nwe as q2,LI as q3,owe as q4,awe as q5,lne as q6,cne as q7,ng as q8,iR as q9,Lq as qA,s1 as qB,V7 as qC,Cz as qD,zge as qE,Hve as qF,Gge as qG,Fz as qH,Bz as qI,x_ as qJ,_z as qK,ev as qL,swe as qM,MCe as qN,Ai as qO,$Te as qP,EEe as qQ,TEe as qR,_F as qS,Zw as qT,ul as qU,Ka as qV,TR as qW,DF as qX,C$e as qY,dTe as qZ,nv as q_,Mde as qa,sg as qb,wwe as qc,hs as qd,Z2 as qe,U2e as qf,NG as qg,V2e as qh,pwe as qi,Eq as qj,nR as qk,oR as ql,UI as qm,hv as qn,Fq as qo,V_ as qp,rv as qq,bwe as qr,y8 as qs,g8 as qt,v_ as qu,n7 as qv,bV as qw,au as qx,u7 as qy,Dne as qz,$y as r,J6e as r$,XAe as r0,nt as r1,Ah as r2,yq as r3,iq as r4,kg as r5,$we as r6,Mwe as r7,Ec as r8,Y2 as r9,xwe as rA,DH as rB,nPe as rC,Due as rD,Zse as rE,ck as rF,Q as rG,yCe as rH,oAe as rI,IAe as rJ,g0 as rK,Ige as rL,hAe as rM,ZAe as rN,JAe as rO,XI as rP,UTe as rQ,uu as rR,pS as rS,aq as rT,y9 as rU,vq as rV,w1 as rW,JV as rX,sMe as rY,FSe as rZ,kSe as r_,W$ as ra,Kbe as rb,Tu as rc,Xwe as rd,Nwe as re,jwe as rf,Dwe as rg,Zwe as rh,Vwe as ri,zwe as rj,Gwe as rk,qwe as rl,Uwe as rm,Bwe as rn,Hwe as ro,Wwe as rp,Jwe as rq,F$e as rr,P$e as rs,l9 as rt,ane as ru,pa as rv,KEe as rw,oCe as rx,BF as ry,ile as rz,iw as s,QEe as s0,lEe as s1,Ace as s2,X7 as s3,HAe as s4,w3e as s5,VOe as s6,j$e as s7,MZ as s8,Q8e as t,Ty as u,eke as v,fte as w,TA as x,sP as y,EA as z};
