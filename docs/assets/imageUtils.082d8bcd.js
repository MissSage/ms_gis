import{aJ as I,aL as L}from"./vendor.faf54504.js";import{n as C}from"./BitmapTileContainer.7ce35fb5.js";const _=t=>{let e=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new C(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var i;this.container.removeChild(this._bitmapView),(i=this._bitmapView)==null||i.removeAllChildren()}};return e=I([L("esri.views.2d.layers.BitmapTileLayerView2D")],e),e};function M(t){return t instanceof HTMLImageElement?t.naturalWidth:t.width}function T(t){return t instanceof HTMLImageElement?t.naturalHeight:t.height}function $(t,e,i,o){if(i.level===o.level)return e;const n=t.tileInfo.size,r=t.getTileResolution(i.level),l=t.getTileResolution(o.level);let a=t.getLODInfoAt(o.level);const m=a.getXForColumn(o.col),d=a.getYForRow(o.row);a=t.getLODInfoAt(i.level);const f=a.getXForColumn(i.col),u=a.getYForRow(i.row),s=M(e)/n[0],h=T(e)/n[1],w=Math.round(s*((m-f)/r)),g=Math.round(h*(-(d-u)/r)),v=Math.round(s*n[0]*(l/r)),p=Math.round(h*n[1]*(l/r)),c=V(n);return c.getContext("2d").drawImage(e,w,g,v,p,0,0,n[0],n[1]),c}function V(t){const e=document.createElement("canvas");return[e.width,e.height]=t,e}export{$ as n,V as o,_ as t};
