import{fx as R,U,ag as m,ai as b,fp as W,fy as M,fz as $,fA as k,fB as v,fC as x,fD as w,fE as j,fF as A,fG as E,bo as F,O as G}from"./vendor.ad8aa1ba.js";import{i as S,o as l,r as z}from"./automaticLengthMeasurementUtils.d71dd38b.js";import{x as B}from"./earcut.afc1d357.js";import{S as D}from"./triangle.e65b7c06.js";function J(t,n=h()){return q(t,n)}function L(t,n=h()){return q(t,n,!1)}function q(t,n,o=t.hasZ){const a=S(t.spatialReference),u=R(a);if(U(u))return null;const y=(f,s)=>!(s.length<2)&&(b(f,s[0],s[1],o&&s[2]||0),!0);let g=0;for(const f of t.rings){const s=f.length;if(s<3)continue;const{positionsWorldCoords:e}=n;for(;e.length<s;)e.push(m());const p=O,i=b(Y,0,0,0),C=1/s;for(let r=0;r<s;r++){if(!y(p,f[r])||!W(p,t.spatialReference,e[r],a))return null;M(i,i,e[r],C)}const d=$(e[0],e[1],i,k());if(v(x(d))===0)continue;for(let r=0;r<s;r++)w(d,i,e[r],e[r]);const c=Z(e);for(let r=0;r<c.length;r+=3)g+=D(e[c[r]],e[c[r+1]],e[c[r+2]])}return l(g,u)}const O=m(),Y=m();function h(){return{positionsWorldCoords:[]}}function Z(t){return B(H(t),[],2)}function H(t){const n=new Float64Array(2*t.length);for(let o=0;o<t.length;++o){const a=t[o],u=2*o;n[u+0]=a[0],n[u+1]=a[1]}return n}function I(t){const{spatialReference:n}=t;return z(n,K,N,P,t)}function K(t){return l(Math.abs(j([t],"square-meters")[0]),"square-meters")}function N(t){try{return l(Math.abs(A(t,"square-meters")),"square-meters")}catch{return null}}function P(t){const n=[];return E(t,n)?l(Math.abs(j([{type:"polygon",rings:n,spatialReference:F.WGS84}],"square-meters")[0]),"square-meters"):null}function Q(t,n,o=h()){if(n==="on-the-ground"){const a=I(t);return G(a)?a:L(t,o)}return J(t,o)}function tt(t,n=h()){return Q(t,"on-the-ground",n)}export{Q as i,tt as u};
