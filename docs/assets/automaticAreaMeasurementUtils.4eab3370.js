import{fO as U,U as W,ag as m,ai as j,fG as C,fP as M,fQ as $,fR as k,fS as v,fT as S,fU as w,fV as b,fW as x,fX as G,bo as O,O as A}from"./vendor.1bde3be2.js";import{i as E,o as l,r as F}from"./automaticLengthMeasurementUtils.a1544857.js";import{x as J}from"./earcut.afc1d357.js";import{S as L}from"./triangle.22e57035.js";function P(t,n=h()){return q(t,n)}function Q(t,n=h()){return q(t,n,!1)}function q(t,n,o=t.hasZ){const a=E(t.spatialReference),u=U(a);if(W(u))return null;const y=(f,s)=>!(s.length<2)&&(j(f,s[0],s[1],o&&s[2]||0),!0);let g=0;for(const f of t.rings){const s=f.length;if(s<3)continue;const{positionsWorldCoords:e}=n;for(;e.length<s;)e.push(m());const p=T,i=j(V,0,0,0),R=1/s;for(let r=0;r<s;r++){if(!y(p,f[r])||!C(p,t.spatialReference,e[r],a))return null;M(i,i,e[r],R)}const d=$(e[0],e[1],i,k());if(v(S(d))===0)continue;for(let r=0;r<s;r++)w(d,i,e[r],e[r]);const c=X(e);for(let r=0;r<c.length;r+=3)g+=L(e[c[r]],e[c[r+1]],e[c[r+2]])}return l(g,u)}const T=m(),V=m();function h(){return{positionsWorldCoords:[]}}function X(t){return J(Y(t),[],2)}function Y(t){const n=new Float64Array(2*t.length);for(let o=0;o<t.length;++o){const a=t[o],u=2*o;n[u+0]=a[0],n[u+1]=a[1]}return n}function Z(t){const{spatialReference:n}=t;return F(n,z,B,D,t)}function z(t){return l(Math.abs(b([t],"square-meters")[0]),"square-meters")}function B(t){try{return l(Math.abs(x(t,"square-meters")),"square-meters")}catch{return null}}function D(t){const n=[];return G(t,n)?l(Math.abs(b([{type:"polygon",rings:n,spatialReference:O.WGS84}],"square-meters")[0]),"square-meters"):null}function H(t,n,o=h()){if(n==="on-the-ground"){const a=Z(t);return A(a)?a:Q(t,o)}return P(t,o)}function tt(t,n=h()){return H(t,"on-the-ground",n)}export{H as i,tt as u};
