import{d5 as $,d6 as g,nl as w,d8 as c,nm as N,d3 as F,bM as R,Y as S,O as U,d7 as j,d9 as D,da as T,nn as W,no as O,np as v,d4 as Y}from"./vendor.1bde3be2.js";import{c as k,a as P}from"./devEnvironmentUtils.d8d0484c.js";function C(e,t,a,n){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?z(e,t,n):F(e,t,n).then(r=>q(R(r),e.name,t,a,n)):Promise.reject(new S("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function q(e,t,a,n,r){var p,f,h;const u=e.data,m=a&&U(a.portal)?a.portal:j.getDefault(),b={portal:m,url:c(e.baseUrl),origin:"portal-item"},o=u.items.find(l=>l.name===t);if(!o){const l=`The symbol name '${t}' could not be found`;return Promise.reject(new S("symbolstyleutils:symbol-name-not-found",l,{symbolName:t}))}let i=D(T(o,n),b),y=(f=(p=o.thumbnail)==null?void 0:p.href)!=null?f:null;const d=o.thumbnail&&o.thumbnail.imageData;k()&&(i=(h=P(i))!=null?h:"",y=P(y));const E={portal:m,url:c(N(i)),origin:"portal-item"};return $(i,r).then(l=>{const M=n==="cimRef"?g(l.data):l.data,s=w(M,E);if(s&&W(s)){if(y){const x=D(y,b);s.thumbnail=new O({url:x})}else d&&(s.thumbnail=new O({url:`data:image/png;base64,${d}`}));e.styleUrl?s.styleOrigin=new v({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new v({portal:a.portal,styleName:e.styleName,name:t}))}return s})}function z(e,t,a){const n=Y.replace(/\{SymbolName\}/gi,e.name),r=U(t.portal)?t.portal:j.getDefault();return $(n,a).then(u=>{const m=g(u.data);return w(m,{portal:r,url:c(N(n)),origin:"portal-item"})})}export{q as fetchSymbolFromStyle,C as resolveWebStyleSymbol};
