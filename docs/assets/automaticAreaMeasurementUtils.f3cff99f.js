import{fB as R,E as W,a3 as m,a5 as b,ft as M,fC as U,fD as $,fE as k,fF as v,fG as E,fH as w,fI as j,fJ as x,fK as A,bb as F,A as G}from"./vendor.150443b7.js";import{i as J,o as l,r as S}from"./automaticLengthMeasurementUtils.8487bf96.js";import{x as B}from"./earcut.afc1d357.js";import{S as D}from"./triangle.21a14e09.js";function H(t,n=h()){return q(t,n)}function I(t,n=h()){return q(t,n,!1)}function q(t,n,o=t.hasZ){const a=J(t.spatialReference),u=R(a);if(W(u))return null;const y=(f,s)=>!(s.length<2)&&(b(f,s[0],s[1],o&&s[2]||0),!0);let g=0;for(const f of t.rings){const s=f.length;if(s<3)continue;const{positionsWorldCoords:e}=n;for(;e.length<s;)e.push(m());const p=K,i=b(L,0,0,0),C=1/s;for(let r=0;r<s;r++){if(!y(p,f[r])||!M(p,t.spatialReference,e[r],a))return null;U(i,i,e[r],C)}const d=$(e[0],e[1],i,k());if(v(E(d))===0)continue;for(let r=0;r<s;r++)w(d,i,e[r],e[r]);const c=Y(e);for(let r=0;r<c.length;r+=3)g+=D(e[c[r]],e[c[r+1]],e[c[r+2]])}return l(g,u)}const K=m(),L=m();function h(){return{positionsWorldCoords:[]}}function Y(t){return B(Z(t),[],2)}function Z(t){const n=new Float64Array(2*t.length);for(let o=0;o<t.length;++o){const a=t[o],u=2*o;n[u+0]=a[0],n[u+1]=a[1]}return n}function z(t){const{spatialReference:n}=t;return S(n,N,O,P,t)}function N(t){return l(Math.abs(j([t],"square-meters")[0]),"square-meters")}function O(t){try{return l(Math.abs(x(t,"square-meters")),"square-meters")}catch{return null}}function P(t){const n=[];return A(t,n)?l(Math.abs(j([{type:"polygon",rings:n,spatialReference:F.WGS84}],"square-meters")[0]),"square-meters"):null}function Q(t,n,o=h()){if(n==="on-the-ground"){const a=z(t);return G(a)?a:I(t,o)}return H(t,o)}function tt(t,n=h()){return Q(t,"on-the-ground",n)}export{Q as i,tt as u};
