import{K as on,f$ as P,aP as x,fH as y,fI as O,fN as u,ag as j,fA as rn,ju as cn,jv as _,aJ as l,fC as N,fO as o,fL as p,ai as M,jw as un,iY as v,gW as gn,fq as bn,aI as I,jx as fn,hI as ln,j0 as pn,fM as d,jy as dn,hY as hn,jz as R,fJ as Y,hR as $n,gd as E,h8 as In,iS as mn,g1 as h,jA as Pn,hr as jn,jB as V,g2 as U,fB as J,f_ as W}from"./vendor.ad8aa1ba.js";import{v as Nn,A as k,M as Mn}from"./lineSegment.bfe799ff.js";const F=on.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class vn{constructor(){this.plane=P(),this.origin=j(),this.basis1=j(),this.basis2=j()}}function m(n=an){return{plane:P(n.plane),origin:O(n.origin),basis1:O(n.basis1),basis2:O(n.basis2)}}function An(n,s,i){const e=Ln.get();return e.origin=n,e.basis1=s,e.basis2=i,e.plane=rn(0,0,0,0),w(e),e}function A(n,s=m()){return G(n.origin,n.basis1,n.basis2,s)}function wn(n,s){u(s.origin,n.origin),u(s.basis1,n.basis1),u(s.basis2,n.basis2),cn(s.plane,n.plane)}function G(n,s,i,e=m()){return u(e.origin,n),u(e.basis1,s),u(e.basis2,i),w(e),zn(e,"fromValues()"),e}function w(n){_(n.basis2,n.basis1,n.origin,n.plane)}function K(n,s,i){n!==i&&A(n,i);const e=l(o.get(),f(n),s);return p(i.origin,i.origin,e),i.plane[3]-=s,i}function Sn(n,s,i){return X(s,i),K(i,B(n,n.origin),i),i}function X(n,s=m()){const i=(n[2]-n[0])/2,e=(n[3]-n[1])/2;return M(s.origin,n[0]+i,n[1]+e,0),M(s.basis1,i,0,0),M(s.basis2,0,e,0),un(0,0,1,0,s.plane),s}function q(n,s,i){return!!gn(n.plane,s,i)&&sn(n,i)}function Tn(n,s,i){if(q(n,s,i))return i;const e=Z(n,s,o.get());return p(i,s.origin,l(o.get(),s.direction,bn(s.origin,e)/I(s.direction))),i}function Z(n,s,i){const e=S.get();tn(n,s,e,S.get());let t=Number.POSITIVE_INFINITY;for(const a of C){const r=L(n,a,T.get()),g=o.get();if(fn(e,r,g)){const c=ln(o.get(),s.origin,g),b=Math.abs(pn(d(s.direction,c)));b<t&&(t=b,u(i,g))}}return t===Number.POSITIVE_INFINITY?D(n,s,i):i}function D(n,s,i){if(q(n,s,i))return i;const e=S.get(),t=S.get();tn(n,s,e,t);let a=Number.POSITIVE_INFINITY;for(const r of C){const g=L(n,r,T.get()),c=o.get();if(dn(e,g,c)){const b=hn(s,c);if(!R(t,c))continue;b<a&&(a=b,u(i,c))}}return z(n,s.origin)<a&&Q(n,s.origin,i),i}function Q(n,s,i){const e=$n(n.plane,s,o.get()),t=k(en(n,n.basis1),e,-1,1,o.get()),a=k(en(n,n.basis2),e,-1,1,o.get());return Y(i,p(o.get(),t,a),n.origin),i}function nn(n,s,i){const{origin:e,basis1:t,basis2:a}=n,r=Y(o.get(),s,e),g=v(t,r),c=v(a,r),b=v(f(n),r);return M(i,g,c,b)}function z(n,s){const i=nn(n,s,o.get()),{basis1:e,basis2:t}=n,a=I(e),r=I(t),g=Math.max(Math.abs(i[0])-a,0),c=Math.max(Math.abs(i[1])-r,0),b=i[2];return g*g+c*c+b*b}function xn(n,s){return Math.sqrt(z(n,s))}function yn(n,s){let i=Number.NEGATIVE_INFINITY;for(const e of C){const t=L(n,e,T.get()),a=Mn(t,s);a>i&&(i=a)}return Math.sqrt(i)}function On(n,s){return R(n.plane,s)&&sn(n,s)}function _n(n,s,i,e){return qn(n,i,e)}function B(n,s){const i=-n.plane[3];return v(f(n),s)-i}function Yn(n,s,i,e){const t=B(n,s),a=l(Bn,f(n),i-t);return p(e,s,a),e}function En(n,s){return E(n.basis1,s.basis1)&&E(n.basis2,s.basis2)&&E(n.origin,s.origin)}function Vn(n,s,i){return n!==i&&A(n,i),In($,s),mn($,$),h(i.basis1,n.basis1,$),h(i.basis2,n.basis2,$),h(N(i.plane),N(n.plane),$),h(i.origin,n.origin,s),Pn(i.plane,i.plane,i.origin),i}function Fn(n,s,i,e){return n!==e&&A(n,e),jn(H,s,i),h(e.basis1,n.basis1,H),h(e.basis2,n.basis2,H),w(e),e}function f(n){return N(n.plane)}function qn(n,s,i){switch(s){case V.X:u(i,n.basis1),U(i,i);break;case V.Y:u(i,n.basis2),U(i,i);break;case V.Z:u(i,f(n))}return i}function sn(n,s){const i=Y(o.get(),s,n.origin),e=J(n.basis1),t=J(n.basis2),a=d(n.basis1,i),r=d(n.basis2,i);return-a-e<0&&a-e<0&&-r-t<0&&r-t<0}function en(n,s){const i=T.get();return u(i.origin,n.origin),u(i.vector,s),i}function L(n,s,i){const{basis1:e,basis2:t,origin:a}=n,r=l(o.get(),e,s.origin[0]),g=l(o.get(),t,s.origin[1]);p(i.origin,r,g),p(i.origin,i.origin,a);const c=l(o.get(),e,s.direction[0]),b=l(o.get(),t,s.direction[1]);return l(i.vector,p(c,c,b),2),i}function zn(n,s){Math.abs(d(n.basis1,n.basis2)/(I(n.basis1)*I(n.basis2)))>1e-6&&F.warn(s,"Provided basis vectors are not perpendicular"),Math.abs(d(n.basis1,f(n)))>1e-6&&F.warn(s,"Basis vectors and plane normal are not perpendicular"),Math.abs(-d(f(n),n.origin)-n.plane[3])>1e-6&&F.warn(s,"Plane offset is not consistent with plane origin")}function tn(n,s,i,e){const t=f(n);_(t,s.direction,s.origin,i),_(N(i),t,s.origin,e)}const an={plane:P(),origin:x(0,0,0),basis1:x(1,0,0),basis2:x(0,1,0)},S=new y(P),T=new y(Nn),Bn=j(),Ln=new y(()=>m()),C=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],$=W(),H=W();Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:vn,create:m,wrap:An,copy:A,copyWithoutVerify:wn,fromValues:G,updateUnboundedPlane:w,elevate:K,setExtent:Sn,fromAABoundingRect:X,intersectRay:q,intersectRayClosestSilhouette:Tn,closestPointOnSilhouette:Z,closestPoint:D,projectPoint:Q,projectPointLocal:nn,distance2:z,distance:xn,distanceToSilhouette:yn,extrusionContainsPoint:On,axisAt:_n,altitudeAt:B,setAltitudeAt:Yn,equals:En,transform:Vn,rotate:Fn,normal:f,UP:an},Symbol.toStringTag,{value:"Module"}));export{m as G,w as H,X as Q,A as X,xn as e};
