var K=Object.defineProperty,g=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var b=(e,r,t)=>r in e?K(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,s=(e,r)=>{for(var t in r||(r={}))E.call(r,t)&&b(e,t,r[t]);if(S)for(var t of S(r))j.call(r,t)&&b(e,t,r[t]);return e},m=(e,r)=>g(e,z(r));import{b as p,S as T}from"./Utils.4c2feac4.js";import{A as v,f,_ as x}from"./MaterialKey.6f6162d1.js";import"./vendor.ad8aa1ba.js";import"./number.30628ef2.js";import"./enums.2d9e6f64.js";import"./Texture.22d23c43.js";import"./VertexElementDescriptor.1fdca6da.js";import"./alignmentUtils.6849a0a8.js";function V(e){var r;return e.type==="line-marker"?{type:"line-marker",color:(r=e.color)==null?void 0:r.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function d(e){return v(e)}function B(e,r,t=!1){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return N(e,r,t);case"simple-marker":case"picture-marker":return w(e,r,t);case"simple-line":return k(e,r,t);case"text":return O(e,r,t);case"label":return L(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return m(s({},V(e)),{type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize});default:throw new Error(`symbol not supported ${e.type}`)}}function L(e,r,t){const a=e.toJSON(),l=f(p.LABEL,m(s({},r),{placement:a.labelPlacement}));return m(s({materialKey:t?d(l):l,hash:e.hash()},a),{labelPlacement:a.labelPlacement})}function N(e,r,t){const a=f(p.FILL,r),l=t?d(a):a,n=e.clone(),o=n.outline,c=x(r.symbologyType);c||(n.outline=null);const h=s({materialKey:l,hash:n.hash()},V(n));if(c)return h;const u=[];if(u.push(h),o){const i=f(p.LINE,m(s({},r),{isOutline:!0})),y=s({materialKey:t?d(i):i,hash:o.hash()},V(o));u.push(y)}return{type:"composite-symbol",layers:u,hash:u.reduce((i,y)=>y.hash+i,"")}}function k(e,r,t){var u;const a=x(r.symbologyType)?T.DEFAULT:r.symbologyType,l=f(p.LINE,m(s({},r),{symbologyType:a})),n=t?d(l):l,o=e.clone(),c=o.marker;o.marker=null;const h=[];if(h.push(s({materialKey:n,hash:o.hash()},V(o))),c){const i=f(p.MARKER,r),y=t?d(i):i;c.color=(u=c.color)!=null?u:o.color,h.push(s({materialKey:y,hash:c.hash(),lineWidth:o.width},V(c)))}return{type:"composite-symbol",layers:h,hash:h.reduce((i,y)=>y.hash+i,"")}}function w(e,r,t){const a=f(p.MARKER,r),l=t?d(a):a,n=V(e);return m(s({materialKey:l,hash:e.hash()},n),{angle:e.angle,maxVVSize:r.maxVVSize})}function O(e,r,t){const a=f(p.TEXT,r),l=t?d(a):a,n=V(e);return m(s({materialKey:l,hash:e.hash()},n),{angle:e.angle,maxVVSize:r.maxVVSize})}export{B as createSymbolSchema};
