import{x as j,gG as C,fl as d,lC as N,lD as b,lE as x,iE as _,gX as M,kC as O,gY as R,lF as k,g6 as G,a3 as h,g2 as W,h8 as w,E,kv as v,lG as V}from"./vendor.f59460b9.js";import{i as s,T as c}from"./BufferView.5c51c693.js";import{t as U,r as B,o as S}from"./vec33.eeb71c8e.js";const m=j.getLogger("esri.geometry.support.meshUtils.normalProjection");function q(r,e,o,a,t){return l(a)?(p(u.TO_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert spatial reference to PCPF"),t)}function H(r,e,o,a,t){return l(a)?(p(u.FROM_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert to spatial reference from PCPF"),t)}function I(r,e,o){return C(r,e,0,o,d(e),0,r.length/3),o}function J(r,e,o){return C(r,d(o),0,e,o,0,r.length/3),e}function K(r,e,o){if(E(r))return e;const a=c.fromTypedArray(r),t=c.fromTypedArray(e);return U(t,a,o),e}function Q(r,e,o){if(E(r))return e;v(n,o);const a=s.fromTypedArray(r),t=s.fromTypedArray(e);return B(t,a,n),V(n)||S(t,t),e}function $(r,e,o){if(E(r))return e;v(n,o);const a=s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),t=s.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(B(t,a,n),V(n)||S(t,t),r!==e)for(let f=3;f<r.length;f+=4)e[f]=r[f];return e}function rr(r,e,o,a,t){if(!l(a))return m.error("Cannot convert spatial reference to PCPF"),t;p(u.TO_PCPF,s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function er(r,e,o,a,t){if(!l(a))return m.error("Cannot convert to spatial reference from PCPF"),t;p(u.FROM_PCPF,s.fromTypedArray(r,16),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,16));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function p(r,e,o,a,t,f){if(!e)return;const g=o.count,T=d(t);if(L(t))for(let y=0;y<g;y++)a.getVec(y,A),e.getVec(y,i),_(T,A,F,T),M(n,F),r===u.FROM_PCPF&&O(n,n),R(i,i,n),f.setVec(y,i);else for(let y=0;y<g;y++){a.getVec(y,A),e.getVec(y,i),_(T,A,F,T),M(n,F);const Y=k(o.get(y,1));let P=Math.cos(Y);r===u.TO_PCPF&&(P=1/P),n[0]*=P,n[1]*=P,n[2]*=P,n[3]*=P,n[4]*=P,n[5]*=P,r===u.FROM_PCPF&&O(n,n),R(i,i,n),G(i,i),f.setVec(y,i)}return f}function l(r){return L(r)||z(r)}function L(r){return r.isWGS84||N(r)||b(r)||x(r)}function z(r){return r.isWebMercator}var u;(function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"})(u||(u={}));const A=h(),i=h(),F=W(),n=w();export{er as L,I as M,J as O,K as R,$ as V,H as h,q as j,rr as k,Q as v};
