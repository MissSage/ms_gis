var qX=Object.defineProperty,UX=Object.defineProperties;var BX=Object.getOwnPropertyDescriptors;var fb=Object.getOwnPropertySymbols;var JT=Object.prototype.hasOwnProperty,ZT=Object.prototype.propertyIsEnumerable;var KT=(e,t,i)=>t in e?qX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,te=(e,t)=>{for(var i in t||(t={}))JT.call(t,i)&&KT(e,i,t[i]);if(fb)for(var i of fb(t))ZT.call(t,i)&&KT(e,i,t[i]);return e},De=(e,t)=>UX(e,BX(t));var YT=(e,t)=>{var i={};for(var r in e)JT.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&fb)for(var r of fb(e))t.indexOf(r)<0&&ZT.call(e,r)&&(i[r]=e[r]);return i};function T5(e,t){const i=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)i[r[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const HX="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",WX=T5(HX);function XT(e){return!!e||e===""}function C5(e){if(Zt(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=Mn(r)?KX(r):C5(r);if(s)for(const l in s)t[l]=s[l]}return t}else{if(Mn(e))return e;if(Wr(e))return e}}const JX=/;(?![^(]*\))/g,ZX=/:(.+)/;function KX(e){const t={};return e.split(JX).forEach(i=>{if(i){const r=i.split(ZX);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function A5(e){let t="";if(Mn(e))t=e;else if(Zt(e))for(let i=0;i<e.length;i++){const r=A5(e[i]);r&&(t+=r+" ")}else if(Wr(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const w7e=e=>e==null?"":Zt(e)||Wr(e)&&(e.toString===rC||!Kt(e.toString))?JSON.stringify(e,QT,2):String(e),QT=(e,t)=>t&&t.__v_isRef?QT(e,t.value):mf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s])=>(i[`${r} =>`]=s,i),{})}:tC(t)?{[`Set(${t.size})`]:[...t.values()]}:Wr(t)&&!Zt(t)&&!nC(t)?String(t):t,Di={},gf=[],ea=()=>{},YX=()=>!1,XX=/^on[^a-z]/,yb=e=>XX.test(e),P5=e=>e.startsWith("onUpdate:"),Ln=Object.assign,eC=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},QX=Object.prototype.hasOwnProperty,Si=(e,t)=>QX.call(e,t),Zt=Array.isArray,mf=e=>gb(e)==="[object Map]",tC=e=>gb(e)==="[object Set]",Kt=e=>typeof e=="function",Mn=e=>typeof e=="string",O5=e=>typeof e=="symbol",Wr=e=>e!==null&&typeof e=="object",iC=e=>Wr(e)&&Kt(e.then)&&Kt(e.catch),rC=Object.prototype.toString,gb=e=>rC.call(e),eQ=e=>gb(e).slice(8,-1),nC=e=>gb(e)==="[object Object]",k5=e=>Mn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,mb=T5(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vb=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},tQ=/-(\w)/g,qa=vb(e=>e.replace(tQ,(t,i)=>i?i.toUpperCase():"")),iQ=/\B([A-Z])/g,vf=vb(e=>e.replace(iQ,"-$1").toLowerCase()),bb=vb(e=>e.charAt(0).toUpperCase()+e.slice(1)),R5=vb(e=>e?`on${bb(e)}`:""),gy=(e,t)=>!Object.is(e,t),F5=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},wb=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},rQ=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let sC;const nQ=()=>sC||(sC=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ep;const _b=[];class sQ{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ep&&(this.parent=ep,this.index=(ep.scopes||(ep.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(_b.push(this),ep=this)}off(){this.active&&(_b.pop(),ep=_b[_b.length-1])}stop(t){if(this.active){if(this.effects.forEach(i=>i.stop()),this.cleanups.forEach(i=>i()),this.scopes&&this.scopes.forEach(i=>i.stop(!0)),this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function oQ(e,t){t=t||ep,t&&t.active&&t.effects.push(e)}const L5=e=>{const t=new Set(e);return t.w=0,t.n=0,t},oC=e=>(e.w&yc)>0,aC=e=>(e.n&yc)>0,aQ=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=yc},lQ=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const s=t[r];oC(s)&&!aC(s)?s.delete(e):t[i++]=s,s.w&=~yc,s.n&=~yc}t.length=i}},N5=new WeakMap;let my=0,yc=1;const j5=30,vy=[];let tp;const ip=Symbol(""),D5=Symbol("");class V5{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],oQ(this,r)}run(){if(!this.active)return this.fn();if(!vy.includes(this))try{return vy.push(tp=this),uQ(),yc=1<<++my,my<=j5?aQ(this):lC(this),this.fn()}finally{my<=j5&&lQ(this),yc=1<<--my,rp(),vy.pop();const t=vy.length;tp=t>0?vy[t-1]:void 0}}stop(){this.active&&(lC(this),this.onStop&&this.onStop(),this.active=!1)}}function lC(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let bf=!0;const z5=[];function wf(){z5.push(bf),bf=!1}function uQ(){z5.push(bf),bf=!0}function rp(){const e=z5.pop();bf=e===void 0?!0:e}function Hs(e,t,i){if(!uC())return;let r=N5.get(e);r||N5.set(e,r=new Map);let s=r.get(i);s||r.set(i,s=L5()),cC(s)}function uC(){return bf&&tp!==void 0}function cC(e,t){let i=!1;my<=j5?aC(e)||(e.n|=yc,i=!oC(e)):i=!e.has(tp),i&&(e.add(tp),tp.deps.push(e))}function Ul(e,t,i,r,s,l){const y=N5.get(e);if(!y)return;let d=[];if(t==="clear")d=[...y.values()];else if(i==="length"&&Zt(e))y.forEach((v,_)=>{(_==="length"||_>=r)&&d.push(v)});else switch(i!==void 0&&d.push(y.get(i)),t){case"add":Zt(e)?k5(i)&&d.push(y.get("length")):(d.push(y.get(ip)),mf(e)&&d.push(y.get(D5)));break;case"delete":Zt(e)||(d.push(y.get(ip)),mf(e)&&d.push(y.get(D5)));break;case"set":mf(e)&&d.push(y.get(ip));break}if(d.length===1)d[0]&&G5(d[0]);else{const v=[];for(const _ of d)_&&v.push(..._);G5(L5(v))}}function G5(e,t){for(const i of Zt(e)?e:[...e])(i!==tp||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const cQ=T5("__proto__,__v_isRef,__isVue"),hC=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(O5)),hQ=q5(),pQ=q5(!1,!0),dQ=q5(!0),pC=fQ();function fQ(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=Ii(this);for(let l=0,y=this.length;l<y;l++)Hs(r,"get",l+"");const s=r[t](...i);return s===-1||s===!1?r[t](...i.map(Ii)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){wf();const r=Ii(this)[t].apply(this,i);return rp(),r}}),e}function q5(e=!1,t=!1){return function(r,s,l){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&l===(e?t?AQ:_C:t?wC:bC).get(r))return r;const y=Zt(r);if(!e&&y&&Si(pC,s))return Reflect.get(pC,s,l);const d=Reflect.get(r,s,l);return(O5(s)?hC.has(s):cQ(s))||(e||Hs(r,"get",s),t)?d:ws(d)?!y||!k5(s)?d.value:d:Wr(d)?e?xC(d):by(d):d}}const yQ=dC(),gQ=dC(!0);function dC(e=!1){return function(i,r,s,l){let y=i[r];if(!e&&!W5(s)&&(s=Ii(s),y=Ii(y),!Zt(i)&&ws(y)&&!ws(s)))return y.value=s,!0;const d=Zt(i)&&k5(r)?Number(r)<i.length:Si(i,r),v=Reflect.set(i,r,s,l);return i===Ii(l)&&(d?gy(s,y)&&Ul(i,"set",r,s):Ul(i,"add",r,s)),v}}function mQ(e,t){const i=Si(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&Ul(e,"delete",t,void 0),r}function vQ(e,t){const i=Reflect.has(e,t);return(!O5(t)||!hC.has(t))&&Hs(e,"has",t),i}function bQ(e){return Hs(e,"iterate",Zt(e)?"length":ip),Reflect.ownKeys(e)}const fC={get:hQ,set:yQ,deleteProperty:mQ,has:vQ,ownKeys:bQ},wQ={get:dQ,set(e,t){return!0},deleteProperty(e,t){return!0}},_Q=Ln({},fC,{get:pQ,set:gQ}),U5=e=>e,xb=e=>Reflect.getPrototypeOf(e);function Sb(e,t,i=!1,r=!1){e=e.__v_raw;const s=Ii(e),l=Ii(t);t!==l&&!i&&Hs(s,"get",t),!i&&Hs(s,"get",l);const{has:y}=xb(s),d=r?U5:i?J5:wy;if(y.call(s,t))return d(e.get(t));if(y.call(s,l))return d(e.get(l));e!==s&&e.get(t)}function Mb(e,t=!1){const i=this.__v_raw,r=Ii(i),s=Ii(e);return e!==s&&!t&&Hs(r,"has",e),!t&&Hs(r,"has",s),e===s?i.has(e):i.has(e)||i.has(s)}function $b(e,t=!1){return e=e.__v_raw,!t&&Hs(Ii(e),"iterate",ip),Reflect.get(e,"size",e)}function yC(e){e=Ii(e);const t=Ii(this);return xb(t).has.call(t,e)||(t.add(e),Ul(t,"add",e,e)),this}function gC(e,t){t=Ii(t);const i=Ii(this),{has:r,get:s}=xb(i);let l=r.call(i,e);l||(e=Ii(e),l=r.call(i,e));const y=s.call(i,e);return i.set(e,t),l?gy(t,y)&&Ul(i,"set",e,t):Ul(i,"add",e,t),this}function mC(e){const t=Ii(this),{has:i,get:r}=xb(t);let s=i.call(t,e);s||(e=Ii(e),s=i.call(t,e)),r&&r.call(t,e);const l=t.delete(e);return s&&Ul(t,"delete",e,void 0),l}function vC(){const e=Ii(this),t=e.size!==0,i=e.clear();return t&&Ul(e,"clear",void 0,void 0),i}function Eb(e,t){return function(r,s){const l=this,y=l.__v_raw,d=Ii(y),v=t?U5:e?J5:wy;return!e&&Hs(d,"iterate",ip),y.forEach((_,M)=>r.call(s,v(_),v(M),l))}}function Ib(e,t,i){return function(...r){const s=this.__v_raw,l=Ii(s),y=mf(l),d=e==="entries"||e===Symbol.iterator&&y,v=e==="keys"&&y,_=s[e](...r),M=i?U5:t?J5:wy;return!t&&Hs(l,"iterate",v?D5:ip),{next(){const{value:T,done:A}=_.next();return A?{value:T,done:A}:{value:d?[M(T[0]),M(T[1])]:M(T),done:A}},[Symbol.iterator](){return this}}}}function gc(e){return function(...t){return e==="delete"?!1:this}}function xQ(){const e={get(l){return Sb(this,l)},get size(){return $b(this)},has:Mb,add:yC,set:gC,delete:mC,clear:vC,forEach:Eb(!1,!1)},t={get(l){return Sb(this,l,!1,!0)},get size(){return $b(this)},has:Mb,add:yC,set:gC,delete:mC,clear:vC,forEach:Eb(!1,!0)},i={get(l){return Sb(this,l,!0)},get size(){return $b(this,!0)},has(l){return Mb.call(this,l,!0)},add:gc("add"),set:gc("set"),delete:gc("delete"),clear:gc("clear"),forEach:Eb(!0,!1)},r={get(l){return Sb(this,l,!0,!0)},get size(){return $b(this,!0)},has(l){return Mb.call(this,l,!0)},add:gc("add"),set:gc("set"),delete:gc("delete"),clear:gc("clear"),forEach:Eb(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{e[l]=Ib(l,!1,!1),i[l]=Ib(l,!0,!1),t[l]=Ib(l,!1,!0),r[l]=Ib(l,!0,!0)}),[e,i,t,r]}const[SQ,MQ,$Q,EQ]=xQ();function B5(e,t){const i=t?e?EQ:$Q:e?MQ:SQ;return(r,s,l)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Si(i,s)&&s in r?i:r,s,l)}const IQ={get:B5(!1,!1)},TQ={get:B5(!1,!0)},CQ={get:B5(!0,!1)},bC=new WeakMap,wC=new WeakMap,_C=new WeakMap,AQ=new WeakMap;function PQ(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function OQ(e){return e.__v_skip||!Object.isExtensible(e)?0:PQ(eQ(e))}function by(e){return e&&e.__v_isReadonly?e:H5(e,!1,fC,IQ,bC)}function kQ(e){return H5(e,!1,_Q,TQ,wC)}function xC(e){return H5(e,!0,wQ,CQ,_C)}function H5(e,t,i,r,s){if(!Wr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=s.get(e);if(l)return l;const y=OQ(e);if(y===0)return e;const d=new Proxy(e,y===2?r:i);return s.set(e,d),d}function _f(e){return W5(e)?_f(e.__v_raw):!!(e&&e.__v_isReactive)}function W5(e){return!!(e&&e.__v_isReadonly)}function SC(e){return _f(e)||W5(e)}function Ii(e){const t=e&&e.__v_raw;return t?Ii(t):e}function MC(e){return wb(e,"__v_skip",!0),e}const wy=e=>Wr(e)?by(e):e,J5=e=>Wr(e)?xC(e):e;function $C(e){uC()&&(e=Ii(e),e.dep||(e.dep=L5()),cC(e.dep))}function EC(e,t){e=Ii(e),e.dep&&G5(e.dep)}function ws(e){return Boolean(e&&e.__v_isRef===!0)}function RQ(e){return IC(e,!1)}function FQ(e){return IC(e,!0)}function IC(e,t){return ws(e)?e:new LQ(e,t)}class LQ{constructor(t,i){this._shallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Ii(t),this._value=i?t:wy(t)}get value(){return $C(this),this._value}set value(t){t=this._shallow?t:Ii(t),gy(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:wy(t),EC(this))}}function _y(e){return ws(e)?e.value:e}const NQ={get:(e,t,i)=>_y(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return ws(s)&&!ws(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function TC(e){return _f(e)?e:new Proxy(e,NQ)}class jQ{constructor(t,i,r){this._setter=i,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new V5(t,()=>{this._dirty||(this._dirty=!0,EC(this))}),this.__v_isReadonly=r}get value(){const t=Ii(this);return $C(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Ua(e,t){let i,r;const s=Kt(e);return s?(i=e,r=ea):(i=e.get,r=e.set),new jQ(i,r,s||!r)}Promise.resolve();function DQ(e,t,...i){const r=e.vnode.props||Di;let s=i;const l=t.startsWith("update:"),y=l&&t.slice(7);if(y&&y in r){const M=`${y==="modelValue"?"model":y}Modifiers`,{number:T,trim:A}=r[M]||Di;A?s=i.map(R=>R.trim()):T&&(s=i.map(rQ))}let d,v=r[d=R5(t)]||r[d=R5(qa(t))];!v&&l&&(v=r[d=R5(vf(t))]),v&&Mo(v,e,6,s);const _=r[d+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,Mo(_,e,6,s)}}function CC(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const l=e.emits;let y={},d=!1;if(!Kt(e)){const v=_=>{const M=CC(_,t,!0);M&&(d=!0,Ln(y,M))};!i&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!l&&!d?(r.set(e,null),null):(Zt(l)?l.forEach(v=>y[v]=null):Ln(y,l),r.set(e,y),y)}function Z5(e,t){return!e||!yb(t)?!1:(t=t.slice(2).replace(/Once$/,""),Si(e,t[0].toLowerCase()+t.slice(1))||Si(e,vf(t))||Si(e,t))}let Ws=null,AC=null;function Tb(e){const t=Ws;return Ws=e,AC=e&&e.type.__scopeId||null,t}function VQ(e,t=Ws,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&rA(-1);const l=Tb(t),y=e(...s);return Tb(l),r._d&&rA(1),y};return r._n=!0,r._c=!0,r._d=!0,r}function K5(e){const{type:t,vnode:i,proxy:r,withProxy:s,props:l,propsOptions:[y],slots:d,attrs:v,emit:_,render:M,renderCache:T,data:A,setupState:R,ctx:F,inheritAttrs:V}=e;let z,W;const Z=Tb(e);try{if(i.shapeFlag&4){const ee=s||r;z=Ha(M.call(ee,ee,T,l,R,A,F)),W=v}else{const ee=t;z=Ha(ee.length>1?ee(l,{attrs:v,slots:d,emit:_}):ee(l,null)),W=t.props?v:zQ(v)}}catch(ee){xy.length=0,Vb(ee,e,1),z=_s(Hl)}let Q=z;if(W&&V!==!1){const ee=Object.keys(W),{shapeFlag:re}=Q;ee.length&&re&(1|6)&&(y&&ee.some(P5)&&(W=GQ(W,y)),Q=xf(Q,W))}return i.dirs&&(Q.dirs=Q.dirs?Q.dirs.concat(i.dirs):i.dirs),i.transition&&(Q.transition=i.transition),z=Q,Tb(Z),z}const zQ=e=>{let t;for(const i in e)(i==="class"||i==="style"||yb(i))&&((t||(t={}))[i]=e[i]);return t},GQ=(e,t)=>{const i={};for(const r in e)(!P5(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function qQ(e,t,i){const{props:r,children:s,component:l}=e,{props:y,children:d,patchFlag:v}=t,_=l.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&v>=0){if(v&1024)return!0;if(v&16)return r?PC(r,y,_):!!y;if(v&8){const M=t.dynamicProps;for(let T=0;T<M.length;T++){const A=M[T];if(y[A]!==r[A]&&!Z5(_,A))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:r===y?!1:r?y?PC(r,y,_):!0:!!y;return!1}function PC(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const l=r[s];if(t[l]!==e[l]&&!Z5(i,l))return!0}return!1}function UQ({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const BQ=e=>e.__isSuspense;function HQ(e,t){t&&t.pendingBranch?Zt(e)?t.effects.push(...e):t.effects.push(e):Hee(e)}function Cb(e,t){if(cn){let i=cn.provides;const r=cn.parent&&cn.parent.provides;r===i&&(i=cn.provides=Object.create(r)),i[e]=t}}function mc(e,t,i=!1){const r=cn||Ws;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Kt(t)?t.call(r.proxy):t}}function WQ(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return NC(()=>{e.isMounted=!0}),jC(()=>{e.isUnmounting=!0}),e}const xo=[Function,Array],JQ={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xo,onEnter:xo,onAfterEnter:xo,onEnterCancelled:xo,onBeforeLeave:xo,onLeave:xo,onAfterLeave:xo,onLeaveCancelled:xo,onBeforeAppear:xo,onAppear:xo,onAfterAppear:xo,onAppearCancelled:xo},setup(e,{slots:t}){const i=Fee(),r=WQ();let s;return()=>{const l=t.default&&RC(t.default(),!0);if(!l||!l.length)return;const y=Ii(e),{mode:d}=y,v=l[0];if(r.isLeaving)return X5(v);const _=kC(v);if(!_)return X5(v);const M=Y5(_,y,r,i);Q5(_,M);const T=i.subTree,A=T&&kC(T);let R=!1;const{getTransitionKey:F}=_.type;if(F){const V=F();s===void 0?s=V:V!==s&&(s=V,R=!0)}if(A&&A.type!==Hl&&(!ap(_,A)||R)){const V=Y5(A,y,r,i);if(Q5(A,V),d==="out-in")return r.isLeaving=!0,V.afterLeave=()=>{r.isLeaving=!1,i.update()},X5(v);d==="in-out"&&_.type!==Hl&&(V.delayLeave=(z,W,Z)=>{const Q=OC(r,A);Q[String(A.key)]=A,z._leaveCb=()=>{W(),z._leaveCb=void 0,delete M.delayedLeave},M.delayedLeave=Z})}return v}}},ZQ=JQ;function OC(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function Y5(e,t,i,r){const{appear:s,mode:l,persisted:y=!1,onBeforeEnter:d,onEnter:v,onAfterEnter:_,onEnterCancelled:M,onBeforeLeave:T,onLeave:A,onAfterLeave:R,onLeaveCancelled:F,onBeforeAppear:V,onAppear:z,onAfterAppear:W,onAppearCancelled:Z}=t,Q=String(e.key),ee=OC(i,e),re=(he,be)=>{he&&Mo(he,r,9,be)},ie={mode:l,persisted:y,beforeEnter(he){let be=d;if(!i.isMounted)if(s)be=V||d;else return;he._leaveCb&&he._leaveCb(!0);const we=ee[Q];we&&ap(e,we)&&we.el._leaveCb&&we.el._leaveCb(),re(be,[he])},enter(he){let be=v,we=_,xe=M;if(!i.isMounted)if(s)be=z||v,we=W||_,xe=Z||M;else return;let $e=!1;const je=he._enterCb=it=>{$e||($e=!0,it?re(xe,[he]):re(we,[he]),ie.delayedLeave&&ie.delayedLeave(),he._enterCb=void 0)};be?(be(he,je),be.length<=1&&je()):je()},leave(he,be){const we=String(e.key);if(he._enterCb&&he._enterCb(!0),i.isUnmounting)return be();re(T,[he]);let xe=!1;const $e=he._leaveCb=je=>{xe||(xe=!0,be(),je?re(F,[he]):re(R,[he]),he._leaveCb=void 0,ee[we]===e&&delete ee[we])};ee[we]=e,A?(A(he,$e),A.length<=1&&$e()):$e()},clone(he){return Y5(he,t,i,r)}};return ie}function X5(e){if(Ab(e))return e=xf(e),e.children=null,e}function kC(e){return Ab(e)?e.children?e.children[0]:void 0:e}function Q5(e,t){e.shapeFlag&6&&e.component?Q5(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function RC(e,t=!1){let i=[],r=0;for(let s=0;s<e.length;s++){const l=e[s];l.type===So?(l.patchFlag&128&&r++,i=i.concat(RC(l.children,t))):(t||l.type!==Hl)&&i.push(l)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function FC(e){return Kt(e)?{setup:e,name:e.name}:e}const e9=e=>!!e.type.__asyncLoader,Ab=e=>e.type.__isKeepAlive;function KQ(e,t){LC(e,"a",t)}function YQ(e,t){LC(e,"da",t)}function LC(e,t,i=cn){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Pb(t,r,i),i){let s=i.parent;for(;s&&s.parent;)Ab(s.parent.vnode)&&XQ(r,t,i,s),s=s.parent}}function XQ(e,t,i,r){const s=Pb(t,e,r,!0);DC(()=>{eC(r[t],s)},i)}function Pb(e,t,i=cn,r=!1){if(i){const s=i[e]||(i[e]=[]),l=t.__weh||(t.__weh=(...y)=>{if(i.isUnmounted)return;wf(),Sf(i);const d=Mo(t,i,e,y);return lp(),rp(),d});return r?s.unshift(l):s.push(l),l}}const Bl=e=>(t,i=cn)=>(!Db||e==="sp")&&Pb(e,t,i),QQ=Bl("bm"),NC=Bl("m"),eee=Bl("bu"),tee=Bl("u"),jC=Bl("bum"),DC=Bl("um"),iee=Bl("sp"),ree=Bl("rtg"),nee=Bl("rtc");function see(e,t=cn){Pb("ec",e,t)}let t9=!0;function oee(e){const t=GC(e),i=e.proxy,r=e.ctx;t9=!1,t.beforeCreate&&VC(t.beforeCreate,e,"bc");const{data:s,computed:l,methods:y,watch:d,provide:v,inject:_,created:M,beforeMount:T,mounted:A,beforeUpdate:R,updated:F,activated:V,deactivated:z,beforeDestroy:W,beforeUnmount:Z,destroyed:Q,unmounted:ee,render:re,renderTracked:ie,renderTriggered:he,errorCaptured:be,serverPrefetch:we,expose:xe,inheritAttrs:$e,components:je,directives:it,filters:Ye}=t;if(_&&aee(_,r,null,e.appContext.config.unwrapInjectedRef),y)for(const ft in y){const Ze=y[ft];Kt(Ze)&&(r[ft]=Ze.bind(i))}if(s){const ft=s.call(i,i);Wr(ft)&&(e.data=by(ft))}if(t9=!0,l)for(const ft in l){const Ze=l[ft],Ct=Kt(Ze)?Ze.bind(i,i):Kt(Ze.get)?Ze.get.bind(i,i):ea,Oi=!Kt(Ze)&&Kt(Ze.set)?Ze.set.bind(i):ea,Ui=Ua({get:Ct,set:Oi});Object.defineProperty(r,ft,{enumerable:!0,configurable:!0,get:()=>Ui.value,set:_i=>Ui.value=_i})}if(d)for(const ft in d)zC(d[ft],r,i,ft);if(v){const ft=Kt(v)?v.call(i):v;Reflect.ownKeys(ft).forEach(Ze=>{Cb(Ze,ft[Ze])})}M&&VC(M,e,"c");function Dt(ft,Ze){Zt(Ze)?Ze.forEach(Ct=>ft(Ct.bind(i))):Ze&&ft(Ze.bind(i))}if(Dt(QQ,T),Dt(NC,A),Dt(eee,R),Dt(tee,F),Dt(KQ,V),Dt(YQ,z),Dt(see,be),Dt(nee,ie),Dt(ree,he),Dt(jC,Z),Dt(DC,ee),Dt(iee,we),Zt(xe))if(xe.length){const ft=e.exposed||(e.exposed={});xe.forEach(Ze=>{Object.defineProperty(ft,Ze,{get:()=>i[Ze],set:Ct=>i[Ze]=Ct})})}else e.exposed||(e.exposed={});re&&e.render===ea&&(e.render=re),$e!=null&&(e.inheritAttrs=$e),je&&(e.components=je),it&&(e.directives=it)}function aee(e,t,i=ea,r=!1){Zt(e)&&(e=i9(e));for(const s in e){const l=e[s];let y;Wr(l)?"default"in l?y=mc(l.from||s,l.default,!0):y=mc(l.from||s):y=mc(l),ws(y)&&r?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>y.value,set:d=>y.value=d}):t[s]=y}}function VC(e,t,i){Mo(Zt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function zC(e,t,i,r){const s=r.includes(".")?_A(i,r):()=>i[r];if(Mn(e)){const l=t[e];Kt(l)&&Gb(s,l)}else if(Kt(e))Gb(s,e.bind(i));else if(Wr(e))if(Zt(e))e.forEach(l=>zC(l,t,i,r));else{const l=Kt(e.handler)?e.handler.bind(i):t[e.handler];Kt(l)&&Gb(s,l,e)}}function GC(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:l,config:{optionMergeStrategies:y}}=e.appContext,d=l.get(t);let v;return d?v=d:!s.length&&!i&&!r?v=t:(v={},s.length&&s.forEach(_=>Ob(v,_,y,!0)),Ob(v,t,y)),l.set(t,v),v}function Ob(e,t,i,r=!1){const{mixins:s,extends:l}=t;l&&Ob(e,l,i,!0),s&&s.forEach(y=>Ob(e,y,i,!0));for(const y in t)if(!(r&&y==="expose")){const d=lee[y]||i&&i[y];e[y]=d?d(e[y],t[y]):t[y]}return e}const lee={data:qC,props:np,emits:np,methods:np,computed:np,beforeCreate:es,created:es,beforeMount:es,mounted:es,beforeUpdate:es,updated:es,beforeDestroy:es,beforeUnmount:es,destroyed:es,unmounted:es,activated:es,deactivated:es,errorCaptured:es,serverPrefetch:es,components:np,directives:np,watch:cee,provide:qC,inject:uee};function qC(e,t){return t?e?function(){return Ln(Kt(e)?e.call(this,this):e,Kt(t)?t.call(this,this):t)}:t:e}function uee(e,t){return np(i9(e),i9(t))}function i9(e){if(Zt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function es(e,t){return e?[...new Set([].concat(e,t))]:t}function np(e,t){return e?Ln(Ln(Object.create(null),e),t):t}function cee(e,t){if(!e)return t;if(!t)return e;const i=Ln(Object.create(null),e);for(const r in t)i[r]=es(e[r],t[r]);return i}function hee(e,t,i,r=!1){const s={},l={};wb(l,Lb,1),e.propsDefaults=Object.create(null),UC(e,t,s,l);for(const y in e.propsOptions[0])y in s||(s[y]=void 0);i?e.props=r?s:kQ(s):e.type.props?e.props=s:e.props=l,e.attrs=l}function pee(e,t,i,r){const{props:s,attrs:l,vnode:{patchFlag:y}}=e,d=Ii(s),[v]=e.propsOptions;let _=!1;if((r||y>0)&&!(y&16)){if(y&8){const M=e.vnode.dynamicProps;for(let T=0;T<M.length;T++){let A=M[T];const R=t[A];if(v)if(Si(l,A))R!==l[A]&&(l[A]=R,_=!0);else{const F=qa(A);s[F]=r9(v,d,F,R,e,!1)}else R!==l[A]&&(l[A]=R,_=!0)}}}else{UC(e,t,s,l)&&(_=!0);let M;for(const T in d)(!t||!Si(t,T)&&((M=vf(T))===T||!Si(t,M)))&&(v?i&&(i[T]!==void 0||i[M]!==void 0)&&(s[T]=r9(v,d,T,void 0,e,!0)):delete s[T]);if(l!==d)for(const T in l)(!t||!Si(t,T))&&(delete l[T],_=!0)}_&&Ul(e,"set","$attrs")}function UC(e,t,i,r){const[s,l]=e.propsOptions;let y=!1,d;if(t)for(let v in t){if(mb(v))continue;const _=t[v];let M;s&&Si(s,M=qa(v))?!l||!l.includes(M)?i[M]=_:(d||(d={}))[M]=_:Z5(e.emitsOptions,v)||(!(v in r)||_!==r[v])&&(r[v]=_,y=!0)}if(l){const v=Ii(i),_=d||Di;for(let M=0;M<l.length;M++){const T=l[M];i[T]=r9(s,v,T,_[T],e,!Si(_,T))}}return y}function r9(e,t,i,r,s,l){const y=e[i];if(y!=null){const d=Si(y,"default");if(d&&r===void 0){const v=y.default;if(y.type!==Function&&Kt(v)){const{propsDefaults:_}=s;i in _?r=_[i]:(Sf(s),r=_[i]=v.call(null,t),lp())}else r=v}y[0]&&(l&&!d?r=!1:y[1]&&(r===""||r===vf(i))&&(r=!0))}return r}function BC(e,t,i=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const l=e.props,y={},d=[];let v=!1;if(!Kt(e)){const M=T=>{v=!0;const[A,R]=BC(T,t,!0);Ln(y,A),R&&d.push(...R)};!i&&t.mixins.length&&t.mixins.forEach(M),e.extends&&M(e.extends),e.mixins&&e.mixins.forEach(M)}if(!l&&!v)return r.set(e,gf),gf;if(Zt(l))for(let M=0;M<l.length;M++){const T=qa(l[M]);HC(T)&&(y[T]=Di)}else if(l)for(const M in l){const T=qa(M);if(HC(T)){const A=l[M],R=y[T]=Zt(A)||Kt(A)?{type:A}:A;if(R){const F=ZC(Boolean,R.type),V=ZC(String,R.type);R[0]=F>-1,R[1]=V<0||F<V,(F>-1||Si(R,"default"))&&d.push(T)}}}const _=[y,d];return r.set(e,_),_}function HC(e){return e[0]!=="$"}function WC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function JC(e,t){return WC(e)===WC(t)}function ZC(e,t){return Zt(t)?t.findIndex(i=>JC(i,e)):Kt(t)&&JC(t,e)?0:-1}const KC=e=>e[0]==="_"||e==="$stable",n9=e=>Zt(e)?e.map(Ha):[Ha(e)],dee=(e,t,i)=>{const r=VQ((...s)=>n9(t(...s)),i);return r._c=!1,r},YC=(e,t,i)=>{const r=e._ctx;for(const s in e){if(KC(s))continue;const l=e[s];if(Kt(l))t[s]=dee(s,l,r);else if(l!=null){const y=n9(l);t[s]=()=>y}}},XC=(e,t)=>{const i=n9(t);e.slots.default=()=>i},fee=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=Ii(t),wb(t,"_",i)):YC(t,e.slots={})}else e.slots={},t&&XC(e,t);wb(e.slots,Lb,1)},yee=(e,t,i)=>{const{vnode:r,slots:s}=e;let l=!0,y=Di;if(r.shapeFlag&32){const d=t._;d?i&&d===1?l=!1:(Ln(s,t),!i&&d===1&&delete s._):(l=!t.$stable,YC(t,s)),y=t}else t&&(XC(e,t),y={default:1});if(l)for(const d in s)!KC(d)&&!(d in y)&&delete s[d]};function _7e(e,t){const i=Ws;if(i===null)return e;const r=i.proxy,s=e.dirs||(e.dirs=[]);for(let l=0;l<t.length;l++){let[y,d,v,_=Di]=t[l];Kt(y)&&(y={mounted:y,updated:y}),y.deep&&up(d),s.push({dir:y,instance:r,value:d,oldValue:void 0,arg:v,modifiers:_})}return e}function sp(e,t,i,r){const s=e.dirs,l=t&&t.dirs;for(let y=0;y<s.length;y++){const d=s[y];l&&(d.oldValue=l[y].value);let v=d.dir[r];v&&(wf(),Mo(v,i,8,[e.el,d,e,t]),rp())}}function QC(){return{app:null,config:{isNativeTag:YX,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gee=0;function mee(e,t){return function(r,s=null){s!=null&&!Wr(s)&&(s=null);const l=QC(),y=new Set;let d=!1;const v=l.app={_uid:gee++,_component:r,_props:s,_container:null,_context:l,_instance:null,version:Jee,get config(){return l.config},set config(_){},use(_,...M){return y.has(_)||(_&&Kt(_.install)?(y.add(_),_.install(v,...M)):Kt(_)&&(y.add(_),_(v,...M))),v},mixin(_){return l.mixins.includes(_)||l.mixins.push(_),v},component(_,M){return M?(l.components[_]=M,v):l.components[_]},directive(_,M){return M?(l.directives[_]=M,v):l.directives[_]},mount(_,M,T){if(!d){const A=_s(r,s);return A.appContext=l,M&&t?t(A,_):e(A,_,T),d=!0,v._container=_,_.__vue_app__=v,u9(A.component)||A.component.proxy}},unmount(){d&&(e(null,v._container),delete v._container.__vue_app__)},provide(_,M){return l.provides[_]=M,v}};return v}}const ts=HQ;function vee(e){return bee(e)}function bee(e,t){const i=nQ();i.__VUE__=!0;const{insert:r,remove:s,patchProp:l,createElement:y,createText:d,createComment:v,setText:_,setElementText:M,parentNode:T,nextSibling:A,setScopeId:R=ea,cloneNode:F,insertStaticContent:V}=e,z=(ue,ye,Ee,Ge=null,ke=null,B=null,Je=!1,He=null,Re=!!ye.dynamicChildren)=>{if(ue===ye)return;ue&&!ap(ue,ye)&&(Ge=yt(ue),pr(ue,ke,B,!0),ue=null),ye.patchFlag===-2&&(Re=!1,ye.dynamicChildren=null);const{type:Le,ref:ht,shapeFlag:ut}=ye;switch(Le){case o9:W(ue,ye,Ee,Ge);break;case Hl:Z(ue,ye,Ee,Ge);break;case kb:ue==null&&Q(ye,Ee,Ge,Je);break;case So:it(ue,ye,Ee,Ge,ke,B,Je,He,Re);break;default:ut&1?ie(ue,ye,Ee,Ge,ke,B,Je,He,Re):ut&6?Ye(ue,ye,Ee,Ge,ke,B,Je,He,Re):(ut&64||ut&128)&&Le.process(ue,ye,Ee,Ge,ke,B,Je,He,Re,si)}ht!=null&&ke&&s9(ht,ue&&ue.ref,B,ye||ue,!ye)},W=(ue,ye,Ee,Ge)=>{if(ue==null)r(ye.el=d(ye.children),Ee,Ge);else{const ke=ye.el=ue.el;ye.children!==ue.children&&_(ke,ye.children)}},Z=(ue,ye,Ee,Ge)=>{ue==null?r(ye.el=v(ye.children||""),Ee,Ge):ye.el=ue.el},Q=(ue,ye,Ee,Ge)=>{[ue.el,ue.anchor]=V(ue.children,ye,Ee,Ge)},ee=({el:ue,anchor:ye},Ee,Ge)=>{let ke;for(;ue&&ue!==ye;)ke=A(ue),r(ue,Ee,Ge),ue=ke;r(ye,Ee,Ge)},re=({el:ue,anchor:ye})=>{let Ee;for(;ue&&ue!==ye;)Ee=A(ue),s(ue),ue=Ee;s(ye)},ie=(ue,ye,Ee,Ge,ke,B,Je,He,Re)=>{Je=Je||ye.type==="svg",ue==null?he(ye,Ee,Ge,ke,B,Je,He,Re):xe(ue,ye,ke,B,Je,He,Re)},he=(ue,ye,Ee,Ge,ke,B,Je,He)=>{let Re,Le;const{type:ht,props:ut,shapeFlag:pt,transition:St,patchFlag:Nt,dirs:$i}=ue;if(ue.el&&F!==void 0&&Nt===-1)Re=ue.el=F(ue.el);else{if(Re=ue.el=y(ue.type,B,ut&&ut.is,ut),pt&8?M(Re,ue.children):pt&16&&we(ue.children,Re,null,Ge,ke,B&&ht!=="foreignObject",Je,He),$i&&sp(ue,null,Ge,"created"),ut){for(const Fe in ut)Fe!=="value"&&!mb(Fe)&&l(Re,Fe,null,ut[Fe],B,ue.children,Ge,ke,We);"value"in ut&&l(Re,"value",null,ut.value),(Le=ut.onVnodeBeforeMount)&&Ba(Le,Ge,ue)}be(Re,ue,ue.scopeId,Je,Ge)}$i&&sp(ue,null,Ge,"beforeMount");const Xt=(!ke||ke&&!ke.pendingBranch)&&St&&!St.persisted;Xt&&St.beforeEnter(Re),r(Re,ye,Ee),((Le=ut&&ut.onVnodeMounted)||Xt||$i)&&ts(()=>{Le&&Ba(Le,Ge,ue),Xt&&St.enter(Re),$i&&sp(ue,null,Ge,"mounted")},ke)},be=(ue,ye,Ee,Ge,ke)=>{if(Ee&&R(ue,Ee),Ge)for(let B=0;B<Ge.length;B++)R(ue,Ge[B]);if(ke){let B=ke.subTree;if(ye===B){const Je=ke.vnode;be(ue,Je,Je.scopeId,Je.slotScopeIds,ke.parent)}}},we=(ue,ye,Ee,Ge,ke,B,Je,He,Re=0)=>{for(let Le=Re;Le<ue.length;Le++){const ht=ue[Le]=He?vc(ue[Le]):Ha(ue[Le]);z(null,ht,ye,Ee,Ge,ke,B,Je,He)}},xe=(ue,ye,Ee,Ge,ke,B,Je)=>{const He=ye.el=ue.el;let{patchFlag:Re,dynamicChildren:Le,dirs:ht}=ye;Re|=ue.patchFlag&16;const ut=ue.props||Di,pt=ye.props||Di;let St;(St=pt.onVnodeBeforeUpdate)&&Ba(St,Ee,ye,ue),ht&&sp(ye,ue,Ee,"beforeUpdate");const Nt=ke&&ye.type!=="foreignObject";if(Le?$e(ue.dynamicChildren,Le,He,Ee,Ge,Nt,B):Je||Ct(ue,ye,He,null,Ee,Ge,Nt,B,!1),Re>0){if(Re&16)je(He,ye,ut,pt,Ee,Ge,ke);else if(Re&2&&ut.class!==pt.class&&l(He,"class",null,pt.class,ke),Re&4&&l(He,"style",ut.style,pt.style,ke),Re&8){const $i=ye.dynamicProps;for(let Xt=0;Xt<$i.length;Xt++){const Fe=$i[Xt],xr=ut[Fe],h=pt[Fe];(h!==xr||Fe==="value")&&l(He,Fe,xr,h,ke,ue.children,Ee,Ge,We)}}Re&1&&ue.children!==ye.children&&M(He,ye.children)}else!Je&&Le==null&&je(He,ye,ut,pt,Ee,Ge,ke);((St=pt.onVnodeUpdated)||ht)&&ts(()=>{St&&Ba(St,Ee,ye,ue),ht&&sp(ye,ue,Ee,"updated")},Ge)},$e=(ue,ye,Ee,Ge,ke,B,Je)=>{for(let He=0;He<ye.length;He++){const Re=ue[He],Le=ye[He],ht=Re.el&&(Re.type===So||!ap(Re,Le)||Re.shapeFlag&(6|64))?T(Re.el):Ee;z(Re,Le,ht,null,Ge,ke,B,Je,!0)}},je=(ue,ye,Ee,Ge,ke,B,Je)=>{if(Ee!==Ge){for(const He in Ge){if(mb(He))continue;const Re=Ge[He],Le=Ee[He];Re!==Le&&He!=="value"&&l(ue,He,Le,Re,Je,ye.children,ke,B,We)}if(Ee!==Di)for(const He in Ee)!mb(He)&&!(He in Ge)&&l(ue,He,Ee[He],null,Je,ye.children,ke,B,We);"value"in Ge&&l(ue,"value",Ee.value,Ge.value)}},it=(ue,ye,Ee,Ge,ke,B,Je,He,Re)=>{const Le=ye.el=ue?ue.el:d(""),ht=ye.anchor=ue?ue.anchor:d("");let{patchFlag:ut,dynamicChildren:pt,slotScopeIds:St}=ye;St&&(He=He?He.concat(St):St),ue==null?(r(Le,Ee,Ge),r(ht,Ee,Ge),we(ye.children,Ee,ht,ke,B,Je,He,Re)):ut>0&&ut&64&&pt&&ue.dynamicChildren?($e(ue.dynamicChildren,pt,Ee,ke,B,Je,He),(ye.key!=null||ke&&ye===ke.subTree)&&eA(ue,ye,!0)):Ct(ue,ye,Ee,ht,ke,B,Je,He,Re)},Ye=(ue,ye,Ee,Ge,ke,B,Je,He,Re)=>{ye.slotScopeIds=He,ue==null?ye.shapeFlag&512?ke.ctx.activate(ye,Ee,Ge,Je,Re):Lt(ye,Ee,Ge,ke,B,Je,Re):Dt(ue,ye,Re)},Lt=(ue,ye,Ee,Ge,ke,B,Je)=>{const He=ue.component=Ree(ue,Ge,ke);if(Ab(ue)&&(He.ctx.renderer=si),Lee(He),He.asyncDep){if(ke&&ke.registerDep(He,ft),!ue.el){const Re=He.subTree=_s(Hl);Z(null,Re,ye,Ee)}return}ft(He,ue,ye,Ee,ke,B,Je)},Dt=(ue,ye,Ee)=>{const Ge=ye.component=ue.component;if(qQ(ue,ye,Ee))if(Ge.asyncDep&&!Ge.asyncResolved){Ze(Ge,ye,Ee);return}else Ge.next=ye,Uee(Ge.update),Ge.update();else ye.component=ue.component,ye.el=ue.el,Ge.vnode=ye},ft=(ue,ye,Ee,Ge,ke,B,Je)=>{const He=()=>{if(ue.isMounted){let{next:ht,bu:ut,u:pt,parent:St,vnode:Nt}=ue,$i=ht,Xt;Re.allowRecurse=!1,ht?(ht.el=Nt.el,Ze(ue,ht,Je)):ht=Nt,ut&&F5(ut),(Xt=ht.props&&ht.props.onVnodeBeforeUpdate)&&Ba(Xt,St,ht,Nt),Re.allowRecurse=!0;const Fe=K5(ue),xr=ue.subTree;ue.subTree=Fe,z(xr,Fe,T(xr.el),yt(xr),ue,ke,B),ht.el=Fe.el,$i===null&&UQ(ue,Fe.el),pt&&ts(pt,ke),(Xt=ht.props&&ht.props.onVnodeUpdated)&&ts(()=>Ba(Xt,St,ht,Nt),ke)}else{let ht;const{el:ut,props:pt}=ye,{bm:St,m:Nt,parent:$i}=ue,Xt=e9(ye);if(Re.allowRecurse=!1,St&&F5(St),!Xt&&(ht=pt&&pt.onVnodeBeforeMount)&&Ba(ht,$i,ye),Re.allowRecurse=!0,ut&&Ft){const Fe=()=>{ue.subTree=K5(ue),Ft(ut,ue.subTree,ue,ke,null)};Xt?ye.type.__asyncLoader().then(()=>!ue.isUnmounted&&Fe()):Fe()}else{const Fe=ue.subTree=K5(ue);z(null,Fe,Ee,Ge,ue,ke,B),ye.el=Fe.el}if(Nt&&ts(Nt,ke),!Xt&&(ht=pt&&pt.onVnodeMounted)){const Fe=ye;ts(()=>Ba(ht,$i,Fe),ke)}ye.shapeFlag&256&&ue.a&&ts(ue.a,ke),ue.isMounted=!0,ye=Ee=Ge=null}},Re=new V5(He,()=>fA(ue.update),ue.scope),Le=ue.update=Re.run.bind(Re);Le.id=ue.uid,Re.allowRecurse=Le.allowRecurse=!0,Le()},Ze=(ue,ye,Ee)=>{ye.component=ue;const Ge=ue.vnode.props;ue.vnode=ye,ue.next=null,pee(ue,ye.props,Ge,Ee),yee(ue,ye.children,Ee),wf(),d9(void 0,ue.update),rp()},Ct=(ue,ye,Ee,Ge,ke,B,Je,He,Re=!1)=>{const Le=ue&&ue.children,ht=ue?ue.shapeFlag:0,ut=ye.children,{patchFlag:pt,shapeFlag:St}=ye;if(pt>0){if(pt&128){Ui(Le,ut,Ee,Ge,ke,B,Je,He,Re);return}else if(pt&256){Oi(Le,ut,Ee,Ge,ke,B,Je,He,Re);return}}St&8?(ht&16&&We(Le,ke,B),ut!==Le&&M(Ee,ut)):ht&16?St&16?Ui(Le,ut,Ee,Ge,ke,B,Je,He,Re):We(Le,ke,B,!0):(ht&8&&M(Ee,""),St&16&&we(ut,Ee,Ge,ke,B,Je,He,Re))},Oi=(ue,ye,Ee,Ge,ke,B,Je,He,Re)=>{ue=ue||gf,ye=ye||gf;const Le=ue.length,ht=ye.length,ut=Math.min(Le,ht);let pt;for(pt=0;pt<ut;pt++){const St=ye[pt]=Re?vc(ye[pt]):Ha(ye[pt]);z(ue[pt],St,Ee,null,ke,B,Je,He,Re)}Le>ht?We(ue,ke,B,!0,!1,ut):we(ye,Ee,Ge,ke,B,Je,He,Re,ut)},Ui=(ue,ye,Ee,Ge,ke,B,Je,He,Re)=>{let Le=0;const ht=ye.length;let ut=ue.length-1,pt=ht-1;for(;Le<=ut&&Le<=pt;){const St=ue[Le],Nt=ye[Le]=Re?vc(ye[Le]):Ha(ye[Le]);if(ap(St,Nt))z(St,Nt,Ee,null,ke,B,Je,He,Re);else break;Le++}for(;Le<=ut&&Le<=pt;){const St=ue[ut],Nt=ye[pt]=Re?vc(ye[pt]):Ha(ye[pt]);if(ap(St,Nt))z(St,Nt,Ee,null,ke,B,Je,He,Re);else break;ut--,pt--}if(Le>ut){if(Le<=pt){const St=pt+1,Nt=St<ht?ye[St].el:Ge;for(;Le<=pt;)z(null,ye[Le]=Re?vc(ye[Le]):Ha(ye[Le]),Ee,Nt,ke,B,Je,He,Re),Le++}}else if(Le>pt)for(;Le<=ut;)pr(ue[Le],ke,B,!0),Le++;else{const St=Le,Nt=Le,$i=new Map;for(Le=Nt;Le<=pt;Le++){const a=ye[Le]=Re?vc(ye[Le]):Ha(ye[Le]);a.key!=null&&$i.set(a.key,Le)}let Xt,Fe=0;const xr=pt-Nt+1;let h=!1,O=0;const w=new Array(xr);for(Le=0;Le<xr;Le++)w[Le]=0;for(Le=St;Le<=ut;Le++){const a=ue[Le];if(Fe>=xr){pr(a,ke,B,!0);continue}let n;if(a.key!=null)n=$i.get(a.key);else for(Xt=Nt;Xt<=pt;Xt++)if(w[Xt-Nt]===0&&ap(a,ye[Xt])){n=Xt;break}n===void 0?pr(a,ke,B,!0):(w[n-Nt]=Le+1,n>=O?O=n:h=!0,z(a,ye[n],Ee,null,ke,B,Je,He,Re),Fe++)}const c=h?wee(w):gf;for(Xt=c.length-1,Le=xr-1;Le>=0;Le--){const a=Nt+Le,n=ye[a],o=a+1<ht?ye[a+1].el:Ge;w[Le]===0?z(null,n,Ee,o,ke,B,Je,He,Re):h&&(Xt<0||Le!==c[Xt]?_i(n,Ee,o,2):Xt--)}}},_i=(ue,ye,Ee,Ge,ke=null)=>{const{el:B,type:Je,transition:He,children:Re,shapeFlag:Le}=ue;if(Le&6){_i(ue.component.subTree,ye,Ee,Ge);return}if(Le&128){ue.suspense.move(ye,Ee,Ge);return}if(Le&64){Je.move(ue,ye,Ee,si);return}if(Je===So){r(B,ye,Ee);for(let ut=0;ut<Re.length;ut++)_i(Re[ut],ye,Ee,Ge);r(ue.anchor,ye,Ee);return}if(Je===kb){ee(ue,ye,Ee);return}if(Ge!==2&&Le&1&&He)if(Ge===0)He.beforeEnter(B),r(B,ye,Ee),ts(()=>He.enter(B),ke);else{const{leave:ut,delayLeave:pt,afterLeave:St}=He,Nt=()=>r(B,ye,Ee),$i=()=>{ut(B,()=>{Nt(),St&&St()})};pt?pt(B,Nt,$i):$i()}else r(B,ye,Ee)},pr=(ue,ye,Ee,Ge=!1,ke=!1)=>{const{type:B,props:Je,ref:He,children:Re,dynamicChildren:Le,shapeFlag:ht,patchFlag:ut,dirs:pt}=ue;if(He!=null&&s9(He,null,Ee,ue,!0),ht&256){ye.ctx.deactivate(ue);return}const St=ht&1&&pt,Nt=!e9(ue);let $i;if(Nt&&($i=Je&&Je.onVnodeBeforeUnmount)&&Ba($i,ye,ue),ht&6)ct(ue.component,Ee,Ge);else{if(ht&128){ue.suspense.unmount(Ee,Ge);return}St&&sp(ue,null,ye,"beforeUnmount"),ht&64?ue.type.remove(ue,ye,Ee,ke,si,Ge):Le&&(B!==So||ut>0&&ut&64)?We(Le,ye,Ee,!1,!0):(B===So&&ut&(128|256)||!ke&&ht&16)&&We(Re,ye,Ee),Ge&&Rr(ue)}(Nt&&($i=Je&&Je.onVnodeUnmounted)||St)&&ts(()=>{$i&&Ba($i,ye,ue),St&&sp(ue,null,ye,"unmounted")},Ee)},Rr=ue=>{const{type:ye,el:Ee,anchor:Ge,transition:ke}=ue;if(ye===So){Ne(Ee,Ge);return}if(ye===kb){re(ue);return}const B=()=>{s(Ee),ke&&!ke.persisted&&ke.afterLeave&&ke.afterLeave()};if(ue.shapeFlag&1&&ke&&!ke.persisted){const{leave:Je,delayLeave:He}=ke,Re=()=>Je(Ee,B);He?He(ue.el,B,Re):Re()}else B()},Ne=(ue,ye)=>{let Ee;for(;ue!==ye;)Ee=A(ue),s(ue),ue=Ee;s(ye)},ct=(ue,ye,Ee)=>{const{bum:Ge,scope:ke,update:B,subTree:Je,um:He}=ue;Ge&&F5(Ge),ke.stop(),B&&(B.active=!1,pr(Je,ue,ye,Ee)),He&&ts(He,ye),ts(()=>{ue.isUnmounted=!0},ye),ye&&ye.pendingBranch&&!ye.isUnmounted&&ue.asyncDep&&!ue.asyncResolved&&ue.suspenseId===ye.pendingId&&(ye.deps--,ye.deps===0&&ye.resolve())},We=(ue,ye,Ee,Ge=!1,ke=!1,B=0)=>{for(let Je=B;Je<ue.length;Je++)pr(ue[Je],ye,Ee,Ge,ke)},yt=ue=>ue.shapeFlag&6?yt(ue.component.subTree):ue.shapeFlag&128?ue.suspense.next():A(ue.anchor||ue.el),ni=(ue,ye,Ee)=>{ue==null?ye._vnode&&pr(ye._vnode,null,null,!0):z(ye._vnode||null,ue,ye,null,null,null,Ee),mA(),ye._vnode=ue},si={p:z,um:pr,m:_i,r:Rr,mt:Lt,mc:we,pc:Ct,pbc:$e,n:yt,o:e};let Rt,Ft;return t&&([Rt,Ft]=t(si)),{render:ni,hydrate:Rt,createApp:mee(ni,Rt)}}function s9(e,t,i,r,s=!1){if(Zt(e)){e.forEach((A,R)=>s9(A,t&&(Zt(t)?t[R]:t),i,r,s));return}if(e9(r)&&!s)return;const l=r.shapeFlag&4?u9(r.component)||r.component.proxy:r.el,y=s?null:l,{i:d,r:v}=e,_=t&&t.r,M=d.refs===Di?d.refs={}:d.refs,T=d.setupState;if(_!=null&&_!==v&&(Mn(_)?(M[_]=null,Si(T,_)&&(T[_]=null)):ws(_)&&(_.value=null)),Mn(v)){const A=()=>{M[v]=y,Si(T,v)&&(T[v]=y)};y?(A.id=-1,ts(A,i)):A()}else if(ws(v)){const A=()=>{v.value=y};y?(A.id=-1,ts(A,i)):A()}else Kt(v)&&bc(v,d,12,[y,M])}function Ba(e,t,i,r=null){Mo(e,t,7,[i,r])}function eA(e,t,i=!1){const r=e.children,s=t.children;if(Zt(r)&&Zt(s))for(let l=0;l<r.length;l++){const y=r[l];let d=s[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[l]=vc(s[l]),d.el=y.el),i||eA(y,d))}}function wee(e){const t=e.slice(),i=[0];let r,s,l,y,d;const v=e.length;for(r=0;r<v;r++){const _=e[r];if(_!==0){if(s=i[i.length-1],e[s]<_){t[r]=s,i.push(r);continue}for(l=0,y=i.length-1;l<y;)d=l+y>>1,e[i[d]]<_?l=d+1:y=d;_<e[i[l]]&&(l>0&&(t[r]=i[l-1]),i[l]=r)}}for(l=i.length,y=i[l-1];l-- >0;)i[l]=y,y=t[y];return i}const _ee=e=>e.__isTeleport,tA="components";function x7e(e,t){return See(tA,e,!0,t)||e}const xee=Symbol();function See(e,t,i=!0,r=!1){const s=Ws||cn;if(s){const l=s.type;if(e===tA){const d=Vee(l);if(d&&(d===t||d===qa(t)||d===bb(qa(t))))return l}const y=iA(s[e]||l[e],t)||iA(s.appContext[e],t);return!y&&r?l:y}}function iA(e,t){return e&&(e[t]||e[qa(t)]||e[bb(qa(t))])}const So=Symbol(void 0),o9=Symbol(void 0),Hl=Symbol(void 0),kb=Symbol(void 0),xy=[];let op=null;function Mee(e=!1){xy.push(op=e?null:[])}function $ee(){xy.pop(),op=xy[xy.length-1]||null}let Rb=1;function rA(e){Rb+=e}function nA(e){return e.dynamicChildren=Rb>0?op||gf:null,$ee(),Rb>0&&op&&op.push(e),e}function S7e(e,t,i,r,s,l){return nA(oA(e,t,i,r,s,l,!0))}function Eee(e,t,i,r,s){return nA(_s(e,t,i,r,s,!0))}function Fb(e){return e?e.__v_isVNode===!0:!1}function ap(e,t){return e.type===t.type&&e.key===t.key}const Lb="__vInternal",sA=({key:e})=>e!=null?e:null,Nb=({ref:e})=>e!=null?Mn(e)||ws(e)||Kt(e)?{i:Ws,r:e}:e:null;function oA(e,t=null,i=null,r=0,s=null,l=e===So?0:1,y=!1,d=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sA(t),ref:t&&Nb(t),scopeId:AC,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return d?(a9(v,i),l&128&&e.normalize(v)):i&&(v.shapeFlag|=Mn(i)?8:16),Rb>0&&!y&&op&&(v.patchFlag>0||l&6)&&v.patchFlag!==32&&op.push(v),v}const _s=Iee;function Iee(e,t=null,i=null,r=0,s=null,l=!1){if((!e||e===xee)&&(e=Hl),Fb(e)){const d=xf(e,t,!0);return i&&a9(d,i),d}if(zee(e)&&(e=e.__vccOpts),t){t=Tee(t);let{class:d,style:v}=t;d&&!Mn(d)&&(t.class=A5(d)),Wr(v)&&(SC(v)&&!Zt(v)&&(v=Ln({},v)),t.style=C5(v))}const y=Mn(e)?1:BQ(e)?128:_ee(e)?64:Wr(e)?4:Kt(e)?2:0;return oA(e,t,i,r,s,y,l,!0)}function Tee(e){return e?SC(e)||Lb in e?Ln({},e):e:null}function xf(e,t,i=!1){const{props:r,ref:s,patchFlag:l,children:y}=e,d=t?Aee(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&sA(d),ref:t&&t.ref?i&&s?Zt(s)?s.concat(Nb(t)):[s,Nb(t)]:Nb(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:y,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==So?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&xf(e.ssContent),ssFallback:e.ssFallback&&xf(e.ssFallback),el:e.el,anchor:e.anchor}}function Cee(e=" ",t=0){return _s(o9,null,e,t)}function M7e(e,t){const i=_s(kb,null,e);return i.staticCount=t,i}function Ha(e){return e==null||typeof e=="boolean"?_s(Hl):Zt(e)?_s(So,null,e.slice()):typeof e=="object"?vc(e):_s(o9,null,String(e))}function vc(e){return e.el===null||e.memo?e:xf(e)}function a9(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Zt(t))i=16;else if(typeof t=="object")if(r&(1|64)){const s=t.default;s&&(s._c&&(s._d=!1),a9(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(Lb in t)?t._ctx=Ws:s===3&&Ws&&(Ws.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Kt(t)?(t={default:t,_ctx:Ws},i=32):(t=String(t),r&64?(i=16,t=[Cee(t)]):i=8);e.children=t,e.shapeFlag|=i}function Aee(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=A5([t.class,r.class]));else if(s==="style")t.style=C5([t.style,r.style]);else if(yb(s)){const l=t[s],y=r[s];l!==y&&!(Zt(l)&&l.includes(y))&&(t[s]=l?[].concat(l,y):y)}else s!==""&&(t[s]=r[s])}return t}function $7e(e,t,i,r){let s;const l=i&&i[r];if(Zt(e)||Mn(e)){s=new Array(e.length);for(let y=0,d=e.length;y<d;y++)s[y]=t(e[y],y,void 0,l&&l[y])}else if(typeof e=="number"){s=new Array(e);for(let y=0;y<e;y++)s[y]=t(y+1,y,void 0,l&&l[y])}else if(Wr(e))if(e[Symbol.iterator])s=Array.from(e,(y,d)=>t(y,d,void 0,l&&l[d]));else{const y=Object.keys(e);s=new Array(y.length);for(let d=0,v=y.length;d<v;d++){const _=y[d];s[d]=t(e[_],_,d,l&&l[d])}}else s=[];return i&&(i[r]=s),s}function E7e(e,t,i={},r,s){if(Ws.isCE)return _s("slot",t==="default"?null:{name:t},r&&r());let l=e[t];l&&l._c&&(l._d=!1),Mee();const y=l&&aA(l(i)),d=Eee(So,{key:i.key||`_${t}`},y||(r?r():[]),y&&e._===1?64:-2);return!s&&d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),l&&l._c&&(l._d=!0),d}function aA(e){return e.some(t=>Fb(t)?!(t.type===Hl||t.type===So&&!aA(t.children)):!0)?e:null}const l9=e=>e?lA(e)?u9(e)||e.proxy:l9(e.parent):null,jb=Ln(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>l9(e.parent),$root:e=>l9(e.root),$emit:e=>e.emit,$options:e=>GC(e),$forceUpdate:e=>()=>fA(e.update),$nextTick:e=>dA.bind(e.proxy),$watch:e=>Wee.bind(e)}),Pee={get({_:e},t){const{ctx:i,setupState:r,data:s,props:l,accessCache:y,type:d,appContext:v}=e;let _;if(t[0]!=="$"){const R=y[t];if(R!==void 0)switch(R){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return l[t]}else{if(r!==Di&&Si(r,t))return y[t]=1,r[t];if(s!==Di&&Si(s,t))return y[t]=2,s[t];if((_=e.propsOptions[0])&&Si(_,t))return y[t]=3,l[t];if(i!==Di&&Si(i,t))return y[t]=4,i[t];t9&&(y[t]=0)}}const M=jb[t];let T,A;if(M)return t==="$attrs"&&Hs(e,"get",t),M(e);if((T=d.__cssModules)&&(T=T[t]))return T;if(i!==Di&&Si(i,t))return y[t]=4,i[t];if(A=v.config.globalProperties,Si(A,t))return A[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:l}=e;if(s!==Di&&Si(s,t))s[t]=i;else if(r!==Di&&Si(r,t))r[t]=i;else if(Si(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(l[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:l}},y){let d;return!!i[y]||e!==Di&&Si(e,y)||t!==Di&&Si(t,y)||(d=l[0])&&Si(d,y)||Si(r,y)||Si(jb,y)||Si(s.config.globalProperties,y)}},Oee=QC();let kee=0;function Ree(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||Oee,l={uid:kee++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,update:null,scope:new sQ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:BC(r,s),emitsOptions:CC(r,s),emit:null,emitted:null,propsDefaults:Di,inheritAttrs:r.inheritAttrs,ctx:Di,data:Di,props:Di,attrs:Di,slots:Di,refs:Di,setupState:Di,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=DQ.bind(null,l),e.ce&&e.ce(l),l}let cn=null;const Fee=()=>cn||Ws,Sf=e=>{cn=e,e.scope.on()},lp=()=>{cn&&cn.scope.off(),cn=null};function lA(e){return e.vnode.shapeFlag&4}let Db=!1;function Lee(e,t=!1){Db=t;const{props:i,children:r}=e.vnode,s=lA(e);hee(e,i,s,t),fee(e,r);const l=s?Nee(e,t):void 0;return Db=!1,l}function Nee(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=MC(new Proxy(e.ctx,Pee));const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?Dee(e):null;Sf(e),wf();const l=bc(r,e,0,[e.props,s]);if(rp(),lp(),iC(l)){if(l.then(lp,lp),t)return l.then(y=>{uA(e,y,t)}).catch(y=>{Vb(y,e,0)});e.asyncDep=l}else uA(e,l,t)}else hA(e,t)}function uA(e,t,i){Kt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Wr(t)&&(e.setupState=TC(t)),hA(e,i)}let cA;function hA(e,t,i){const r=e.type;if(!e.render){if(!t&&cA&&!r.render){const s=r.template;if(s){const{isCustomElement:l,compilerOptions:y}=e.appContext.config,{delimiters:d,compilerOptions:v}=r,_=Ln(Ln({isCustomElement:l,delimiters:d},y),v);r.render=cA(s,_)}}e.render=r.render||ea}Sf(e),wf(),oee(e),rp(),lp()}function jee(e){return new Proxy(e.attrs,{get(t,i){return Hs(e,"get","$attrs"),t[i]}})}function Dee(e){const t=r=>{e.exposed=r||{}};let i;return{get attrs(){return i||(i=jee(e))},slots:e.slots,emit:e.emit,expose:t}}function u9(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(TC(MC(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in jb)return jb[i](e)}}))}function Vee(e){return Kt(e)&&e.displayName||e.name}function zee(e){return Kt(e)&&"__vccOpts"in e}function bc(e,t,i,r){let s;try{s=r?e(...r):e()}catch(l){Vb(l,t,i)}return s}function Mo(e,t,i,r){if(Kt(e)){const l=bc(e,t,i,r);return l&&iC(l)&&l.catch(y=>{Vb(y,t,i)}),l}const s=[];for(let l=0;l<e.length;l++)s.push(Mo(e[l],t,i,r));return s}function Vb(e,t,i,r=!0){const s=t?t.vnode:null;if(t){let l=t.parent;const y=t.proxy,d=i;for(;l;){const _=l.ec;if(_){for(let M=0;M<_.length;M++)if(_[M](e,y,d)===!1)return}l=l.parent}const v=t.appContext.config.errorHandler;if(v){bc(v,null,10,[e,y,d]);return}}Gee(e,i,s,r)}function Gee(e,t,i,r=!0){console.error(e)}let zb=!1,c9=!1;const Js=[];let Wl=0;const Sy=[];let My=null,Mf=0;const $y=[];let wc=null,$f=0;const pA=Promise.resolve();let h9=null,p9=null;function dA(e){const t=h9||pA;return e?t.then(this?e.bind(this):e):t}function qee(e){let t=Wl+1,i=Js.length;for(;t<i;){const r=t+i>>>1;Ey(Js[r])<e?t=r+1:i=r}return t}function fA(e){(!Js.length||!Js.includes(e,zb&&e.allowRecurse?Wl+1:Wl))&&e!==p9&&(e.id==null?Js.push(e):Js.splice(qee(e.id),0,e),yA())}function yA(){!zb&&!c9&&(c9=!0,h9=pA.then(vA))}function Uee(e){const t=Js.indexOf(e);t>Wl&&Js.splice(t,1)}function gA(e,t,i,r){Zt(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&i.push(e),yA()}function Bee(e){gA(e,My,Sy,Mf)}function Hee(e){gA(e,wc,$y,$f)}function d9(e,t=null){if(Sy.length){for(p9=t,My=[...new Set(Sy)],Sy.length=0,Mf=0;Mf<My.length;Mf++)My[Mf]();My=null,Mf=0,p9=null,d9(e,t)}}function mA(e){if($y.length){const t=[...new Set($y)];if($y.length=0,wc){wc.push(...t);return}for(wc=t,wc.sort((i,r)=>Ey(i)-Ey(r)),$f=0;$f<wc.length;$f++)wc[$f]();wc=null,$f=0}}const Ey=e=>e.id==null?1/0:e.id;function vA(e){c9=!1,zb=!0,d9(e),Js.sort((i,r)=>Ey(i)-Ey(r));const t=ea;try{for(Wl=0;Wl<Js.length;Wl++){const i=Js[Wl];i&&i.active!==!1&&bc(i,null,14)}}finally{Wl=0,Js.length=0,mA(),zb=!1,h9=null,(Js.length||Sy.length||$y.length)&&vA(e)}}const bA={};function Gb(e,t,i){return wA(e,t,i)}function wA(e,t,{immediate:i,deep:r,flush:s,onTrack:l,onTrigger:y}=Di){const d=cn;let v,_=!1,M=!1;if(ws(e)?(v=()=>e.value,_=!!e._shallow):_f(e)?(v=()=>e,r=!0):Zt(e)?(M=!0,_=e.some(_f),v=()=>e.map(W=>{if(ws(W))return W.value;if(_f(W))return up(W);if(Kt(W))return bc(W,d,2)})):Kt(e)?t?v=()=>bc(e,d,2):v=()=>{if(!(d&&d.isUnmounted))return T&&T(),Mo(e,d,3,[A])}:v=ea,t&&r){const W=v;v=()=>up(W())}let T,A=W=>{T=z.onStop=()=>{bc(W,d,4)}};if(Db)return A=ea,t?i&&Mo(t,d,3,[v(),M?[]:void 0,A]):v(),ea;let R=M?[]:bA;const F=()=>{if(!!z.active)if(t){const W=z.run();(r||_||(M?W.some((Z,Q)=>gy(Z,R[Q])):gy(W,R)))&&(T&&T(),Mo(t,d,3,[W,R===bA?void 0:R,A]),R=W)}else z.run()};F.allowRecurse=!!t;let V;s==="sync"?V=F:s==="post"?V=()=>ts(F,d&&d.suspense):V=()=>{!d||d.isMounted?Bee(F):F()};const z=new V5(v,V);return t?i?F():R=z.run():s==="post"?ts(z.run.bind(z),d&&d.suspense):z.run(),()=>{z.stop(),d&&d.scope&&eC(d.scope.effects,z)}}function Wee(e,t,i){const r=this.proxy,s=Mn(e)?e.includes(".")?_A(r,e):()=>r[e]:e.bind(r,r);let l;Kt(t)?l=t:(l=t.handler,i=t);const y=cn;Sf(this);const d=wA(s,l.bind(r),i);return y?Sf(y):lp(),d}function _A(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function up(e,t){if(!Wr(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ws(e))up(e.value,t);else if(Zt(e))for(let i=0;i<e.length;i++)up(e[i],t);else if(tC(e)||mf(e))e.forEach(i=>{up(i,t)});else if(nC(e))for(const i in e)up(e[i],t);return e}function xA(e,t,i){const r=arguments.length;return r===2?Wr(t)&&!Zt(t)?Fb(t)?_s(e,null,[t]):_s(e,t):_s(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Fb(i)&&(i=[i]),_s(e,t,i))}const Jee="3.2.24",Zee="http://www.w3.org/2000/svg",Ef=typeof document!="undefined"?document:null,SA=new Map,Kee={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t?Ef.createElementNS(Zee,e):Ef.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Ef.createTextNode(e),createComment:e=>Ef.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ef.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,r){const s=i?i.previousSibling:t.lastChild;let l=SA.get(e);if(!l){const y=Ef.createElement("template");if(y.innerHTML=r?`<svg>${e}</svg>`:e,l=y.content,r){const d=l.firstChild;for(;d.firstChild;)l.appendChild(d.firstChild);l.removeChild(d)}SA.set(e,l)}return t.insertBefore(l.cloneNode(!0),i),[s?s.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Yee(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function Xee(e,t,i){const r=e.style,s=Mn(i);if(i&&!s){for(const l in i)f9(r,l,i[l]);if(t&&!Mn(t))for(const l in t)i[l]==null&&f9(r,l,"")}else{const l=r.display;s?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=l)}}const MA=/\s*!important$/;function f9(e,t,i){if(Zt(i))i.forEach(r=>f9(e,t,r));else if(t.startsWith("--"))e.setProperty(t,i);else{const r=Qee(e,t);MA.test(i)?e.setProperty(vf(r),i.replace(MA,""),"important"):e[r]=i}}const $A=["Webkit","Moz","ms"],y9={};function Qee(e,t){const i=y9[t];if(i)return i;let r=qa(t);if(r!=="filter"&&r in e)return y9[t]=r;r=bb(r);for(let s=0;s<$A.length;s++){const l=$A[s]+r;if(l in e)return y9[t]=l}return t}const EA="http://www.w3.org/1999/xlink";function ete(e,t,i,r,s){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(EA,t.slice(6,t.length)):e.setAttributeNS(EA,t,i);else{const l=WX(t);i==null||l&&!XT(i)?e.removeAttribute(t):e.setAttribute(t,l?"":i)}}function tte(e,t,i,r,s,l,y){if(t==="innerHTML"||t==="textContent"){r&&y(r,s,l),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const d=i==null?"":i;(e.value!==d||e.tagName==="OPTION")&&(e.value=d),i==null&&e.removeAttribute(t);return}if(i===""||i==null){const d=typeof e[t];if(d==="boolean"){e[t]=XT(i);return}else if(i==null&&d==="string"){e[t]="",e.removeAttribute(t);return}else if(d==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=i}catch{}}let qb=Date.now,IA=!1;if(typeof window!="undefined"){qb()>document.createEvent("Event").timeStamp&&(qb=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);IA=!!(e&&Number(e[1])<=53)}let g9=0;const ite=Promise.resolve(),rte=()=>{g9=0},nte=()=>g9||(ite.then(rte),g9=qb());function ste(e,t,i,r){e.addEventListener(t,i,r)}function ote(e,t,i,r){e.removeEventListener(t,i,r)}function ate(e,t,i,r,s=null){const l=e._vei||(e._vei={}),y=l[t];if(r&&y)y.value=r;else{const[d,v]=lte(t);if(r){const _=l[t]=ute(r,s);ste(e,d,_,v)}else y&&(ote(e,d,y,v),l[t]=void 0)}}const TA=/(?:Once|Passive|Capture)$/;function lte(e){let t;if(TA.test(e)){t={};let i;for(;i=e.match(TA);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[vf(e.slice(2)),t]}function ute(e,t){const i=r=>{const s=r.timeStamp||qb();(IA||s>=i.attached-1)&&Mo(cte(r,i.value),t,5,[r])};return i.value=e,i.attached=nte(),i}function cte(e,t){if(Zt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r(s))}else return t}const CA=/^on[a-z]/,hte=(e,t,i,r,s=!1,l,y,d,v)=>{t==="class"?Yee(e,r,s):t==="style"?Xee(e,i,r):yb(t)?P5(t)||ate(e,t,i,r,y):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pte(e,t,r,s))?tte(e,t,r,l,y,d,v):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ete(e,t,r,s))};function pte(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&CA.test(t)&&Kt(i)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||CA.test(t)&&Mn(i)?!1:t in e}const dte={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ZQ.props;const I7e={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Iy(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),Iy(e,!0),r.enter(e)):r.leave(e,()=>{Iy(e,!1)}):Iy(e,t))},beforeUnmount(e,{value:t}){Iy(e,t)}};function Iy(e,t){e.style.display=t?e._vod:"none"}const fte=Ln({patchProp:hte},Kee);let AA;function yte(){return AA||(AA=vee(fte))}const T7e=(...e)=>{const t=yte().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=gte(r);if(!s)return;const l=t._component;!Kt(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.innerHTML="";const y=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),y},t};function gte(e){return Mn(e)?document.querySelector(e):e}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const PA=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",If=e=>PA?Symbol(e):"_vr_"+e,mte=If("rvlm"),OA=If("rvd"),m9=If("r"),kA=If("rl"),v9=If("rvl"),Tf=typeof window!="undefined";function vte(e){return e.__esModule||PA&&e[Symbol.toStringTag]==="Module"}const Vi=Object.assign;function b9(e,t){const i={};for(const r in t){const s=t[r];i[r]=Array.isArray(s)?s.map(e):e(s)}return i}const Ty=()=>{},bte=/\/$/,wte=e=>e.replace(bte,"");function w9(e,t,i="/"){let r,s={},l="",y="";const d=t.indexOf("?"),v=t.indexOf("#",d>-1?d:0);return d>-1&&(r=t.slice(0,d),l=t.slice(d+1,v>-1?v:t.length),s=e(l)),v>-1&&(r=r||t.slice(0,v),y=t.slice(v,t.length)),r=Mte(r!=null?r:t,i),{fullPath:r+(l&&"?")+l+y,path:r,query:s,hash:y}}function _te(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function RA(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function xte(e,t,i){const r=t.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&Cf(t.matched[r],i.matched[s])&&FA(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Cf(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function FA(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Ste(e[i],t[i]))return!1;return!0}function Ste(e,t){return Array.isArray(e)?LA(e,t):Array.isArray(t)?LA(t,e):e===t}function LA(e,t){return Array.isArray(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function Mte(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/");let s=i.length-1,l,y;for(l=0;l<r.length;l++)if(y=r[l],!(s===1||y==="."))if(y==="..")s--;else break;return i.slice(0,s).join("/")+"/"+r.slice(l-(l===r.length?1:0)).join("/")}var Cy;(function(e){e.pop="pop",e.push="push"})(Cy||(Cy={}));var Ay;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ay||(Ay={}));function $te(e){if(!e)if(Tf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),wte(e)}const Ete=/^[^#]+#/;function Ite(e,t){return e.replace(Ete,"#")+t}function Tte(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const Ub=()=>({left:window.pageXOffset,top:window.pageYOffset});function Cte(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;t=Tte(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function NA(e,t){return(history.state?history.state.position-t:-1)+e}const _9=new Map;function Ate(e,t){_9.set(e,t)}function Pte(e){const t=_9.get(e);return _9.delete(e),t}let Ote=()=>location.protocol+"//"+location.host;function jA(e,t){const{pathname:i,search:r,hash:s}=t,l=e.indexOf("#");if(l>-1){let d=s.includes(e.slice(l))?e.slice(l).length:1,v=s.slice(d);return v[0]!=="/"&&(v="/"+v),RA(v,"")}return RA(i,e)+r+s}function kte(e,t,i,r){let s=[],l=[],y=null;const d=({state:A})=>{const R=jA(e,location),F=i.value,V=t.value;let z=0;if(A){if(i.value=R,t.value=A,y&&y===F){y=null;return}z=V?A.position-V.position:0}else r(R);s.forEach(W=>{W(i.value,F,{delta:z,type:Cy.pop,direction:z?z>0?Ay.forward:Ay.back:Ay.unknown})})};function v(){y=i.value}function _(A){s.push(A);const R=()=>{const F=s.indexOf(A);F>-1&&s.splice(F,1)};return l.push(R),R}function M(){const{history:A}=window;!A.state||A.replaceState(Vi({},A.state,{scroll:Ub()}),"")}function T(){for(const A of l)A();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",M),{pauseListeners:v,listen:_,destroy:T}}function DA(e,t,i,r=!1,s=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:s?Ub():null}}function Rte(e){const{history:t,location:i}=window,r={value:jA(e,i)},s={value:t.state};s.value||l(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(v,_,M){const T=e.indexOf("#"),A=T>-1?(i.host&&document.querySelector("base")?e:e.slice(T))+v:Ote()+e+v;try{t[M?"replaceState":"pushState"](_,"",A),s.value=_}catch(R){console.error(R),i[M?"replace":"assign"](A)}}function y(v,_){const M=Vi({},t.state,DA(s.value.back,v,s.value.forward,!0),_,{position:s.value.position});l(v,M,!0),r.value=v}function d(v,_){const M=Vi({},s.value,t.state,{forward:v,scroll:Ub()});l(M.current,M,!0);const T=Vi({},DA(r.value,v,null),{position:M.position+1},_);l(v,T,!1),r.value=v}return{location:r,state:s,push:d,replace:y}}function Fte(e){e=$te(e);const t=Rte(e),i=kte(e,t.state,t.location,t.replace);function r(l,y=!0){y||i.pauseListeners(),history.go(l)}const s=Vi({location:"",base:e,go:r,createHref:Ite.bind(null,e)},t,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function C7e(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Fte(e)}function Lte(e){return typeof e=="string"||e&&typeof e=="object"}function VA(e){return typeof e=="string"||typeof e=="symbol"}const _c={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},zA=If("nf");var GA;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(GA||(GA={}));function Af(e,t){return Vi(new Error,{type:e,[zA]:!0},t)}function cp(e,t){return e instanceof Error&&zA in e&&(t==null||!!(e.type&t))}const qA="[^/]+?",Nte={sensitive:!1,strict:!1,start:!0,end:!0},jte=/[.+*?^${}()[\]/\\]/g;function Dte(e,t){const i=Vi({},Nte,t),r=[];let s=i.start?"^":"";const l=[];for(const _ of e){const M=_.length?[]:[90];i.strict&&!_.length&&(s+="/");for(let T=0;T<_.length;T++){const A=_[T];let R=40+(i.sensitive?.25:0);if(A.type===0)T||(s+="/"),s+=A.value.replace(jte,"\\$&"),R+=40;else if(A.type===1){const{value:F,repeatable:V,optional:z,regexp:W}=A;l.push({name:F,repeatable:V,optional:z});const Z=W||qA;if(Z!==qA){R+=10;try{new RegExp(`(${Z})`)}catch(ee){throw new Error(`Invalid custom RegExp for param "${F}" (${Z}): `+ee.message)}}let Q=V?`((?:${Z})(?:/(?:${Z}))*)`:`(${Z})`;T||(Q=z&&_.length<2?`(?:/${Q})`:"/"+Q),z&&(Q+="?"),s+=Q,R+=20,z&&(R+=-8),V&&(R+=-20),Z===".*"&&(R+=-50)}M.push(R)}r.push(M)}if(i.strict&&i.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&(s+="(?:/|$)");const y=new RegExp(s,i.sensitive?"":"i");function d(_){const M=_.match(y),T={};if(!M)return null;for(let A=1;A<M.length;A++){const R=M[A]||"",F=l[A-1];T[F.name]=R&&F.repeatable?R.split("/"):R}return T}function v(_){let M="",T=!1;for(const A of e){(!T||!M.endsWith("/"))&&(M+="/"),T=!1;for(const R of A)if(R.type===0)M+=R.value;else if(R.type===1){const{value:F,repeatable:V,optional:z}=R,W=F in _?_[F]:"";if(Array.isArray(W)&&!V)throw new Error(`Provided param "${F}" is an array but it is not repeatable (* or + modifiers)`);const Z=Array.isArray(W)?W.join("/"):W;if(!Z)if(z)A.length<2&&(M.endsWith("/")?M=M.slice(0,-1):T=!0);else throw new Error(`Missing required param "${F}"`);M+=Z}}return M}return{re:y,score:r,keys:l,parse:d,stringify:v}}function Vte(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function zte(e,t){let i=0;const r=e.score,s=t.score;for(;i<r.length&&i<s.length;){const l=Vte(r[i],s[i]);if(l)return l;i++}return s.length-r.length}const Gte={type:0,value:""},qte=/[a-zA-Z0-9_]/;function Ute(e){if(!e)return[[]];if(e==="/")return[[Gte]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(R){throw new Error(`ERR (${i})/"${_}": ${R}`)}let i=0,r=i;const s=[];let l;function y(){l&&s.push(l),l=[]}let d=0,v,_="",M="";function T(){!_||(i===0?l.push({type:0,value:_}):i===1||i===2||i===3?(l.length>1&&(v==="*"||v==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:_,regexp:M,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):t("Invalid state to consume buffer"),_="")}function A(){_+=v}for(;d<e.length;){if(v=e[d++],v==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:v==="/"?(_&&T(),y()):v===":"?(T(),i=1):A();break;case 4:A(),i=r;break;case 1:v==="("?i=2:qte.test(v)?A():(T(),i=0,v!=="*"&&v!=="?"&&v!=="+"&&d--);break;case 2:v===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+v:i=3:M+=v;break;case 3:T(),i=0,v!=="*"&&v!=="?"&&v!=="+"&&d--,M="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${_}"`),T(),y(),s}function Bte(e,t,i){const r=Dte(Ute(e.path),i),s=Vi(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Hte(e,t){const i=[],r=new Map;t=BA({strict:!1,end:!0,sensitive:!1},t);function s(M){return r.get(M)}function l(M,T,A){const R=!A,F=Jte(M);F.aliasOf=A&&A.record;const V=BA(t,M),z=[F];if("alias"in M){const Q=typeof M.alias=="string"?[M.alias]:M.alias;for(const ee of Q)z.push(Vi({},F,{components:A?A.record.components:F.components,path:ee,aliasOf:A?A.record:F}))}let W,Z;for(const Q of z){const{path:ee}=Q;if(T&&ee[0]!=="/"){const re=T.record.path,ie=re[re.length-1]==="/"?"":"/";Q.path=T.record.path+(ee&&ie+ee)}if(W=Bte(Q,T,V),A?A.alias.push(W):(Z=Z||W,Z!==W&&Z.alias.push(W),R&&M.name&&!UA(W)&&y(M.name)),"children"in F){const re=F.children;for(let ie=0;ie<re.length;ie++)l(re[ie],W,A&&A.children[ie])}A=A||W,v(W)}return Z?()=>{y(Z)}:Ty}function y(M){if(VA(M)){const T=r.get(M);T&&(r.delete(M),i.splice(i.indexOf(T),1),T.children.forEach(y),T.alias.forEach(y))}else{const T=i.indexOf(M);T>-1&&(i.splice(T,1),M.record.name&&r.delete(M.record.name),M.children.forEach(y),M.alias.forEach(y))}}function d(){return i}function v(M){let T=0;for(;T<i.length&&zte(M,i[T])>=0;)T++;i.splice(T,0,M),M.record.name&&!UA(M)&&r.set(M.record.name,M)}function _(M,T){let A,R={},F,V;if("name"in M&&M.name){if(A=r.get(M.name),!A)throw Af(1,{location:M});V=A.record.name,R=Vi(Wte(T.params,A.keys.filter(Z=>!Z.optional).map(Z=>Z.name)),M.params),F=A.stringify(R)}else if("path"in M)F=M.path,A=i.find(Z=>Z.re.test(F)),A&&(R=A.parse(F),V=A.record.name);else{if(A=T.name?r.get(T.name):i.find(Z=>Z.re.test(T.path)),!A)throw Af(1,{location:M,currentLocation:T});V=A.record.name,R=Vi({},T.params,M.params),F=A.stringify(R)}const z=[];let W=A;for(;W;)z.unshift(W.record),W=W.parent;return{name:V,path:F,params:R,matched:z,meta:Kte(z)}}return e.forEach(M=>l(M)),{addRoute:l,resolve:_,removeRoute:y,getRoutes:d,getRecordMatcher:s}}function Wte(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function Jte(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Zte(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Zte(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="boolean"?i:i[r];return t}function UA(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Kte(e){return e.reduce((t,i)=>Vi(t,i.meta),{})}function BA(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}const HA=/#/g,Yte=/&/g,Xte=/\//g,Qte=/=/g,eie=/\?/g,WA=/\+/g,tie=/%5B/g,iie=/%5D/g,JA=/%5E/g,rie=/%60/g,ZA=/%7B/g,nie=/%7C/g,KA=/%7D/g,sie=/%20/g;function x9(e){return encodeURI(""+e).replace(nie,"|").replace(tie,"[").replace(iie,"]")}function oie(e){return x9(e).replace(ZA,"{").replace(KA,"}").replace(JA,"^")}function S9(e){return x9(e).replace(WA,"%2B").replace(sie,"+").replace(HA,"%23").replace(Yte,"%26").replace(rie,"`").replace(ZA,"{").replace(KA,"}").replace(JA,"^")}function aie(e){return S9(e).replace(Qte,"%3D")}function lie(e){return x9(e).replace(HA,"%23").replace(eie,"%3F")}function uie(e){return e==null?"":lie(e).replace(Xte,"%2F")}function Bb(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function cie(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const l=r[s].replace(WA," "),y=l.indexOf("="),d=Bb(y<0?l:l.slice(0,y)),v=y<0?null:Bb(l.slice(y+1));if(d in t){let _=t[d];Array.isArray(_)||(_=t[d]=[_]),_.push(v)}else t[d]=v}return t}function YA(e){let t="";for(let i in e){const r=e[i];if(i=aie(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(Array.isArray(r)?r.map(l=>l&&S9(l)):[r&&S9(r)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+i,l!=null&&(t+="="+l))})}return t}function hie(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=Array.isArray(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}function Py(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:t,list:()=>e,reset:i}}function xc(e,t,i,r,s){const l=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((y,d)=>{const v=T=>{T===!1?d(Af(4,{from:i,to:t})):T instanceof Error?d(T):Lte(T)?d(Af(2,{from:t,to:T})):(l&&r.enterCallbacks[s]===l&&typeof T=="function"&&l.push(T),y())},_=e.call(r&&r.instances[s],t,i,v);let M=Promise.resolve(_);e.length<3&&(M=M.then(v)),M.catch(T=>d(T))})}function M9(e,t,i,r){const s=[];for(const l of e)for(const y in l.components){let d=l.components[y];if(!(t!=="beforeRouteEnter"&&!l.instances[y]))if(pie(d)){const _=(d.__vccOpts||d)[t];_&&s.push(xc(_,i,r,l,y))}else{let v=d();s.push(()=>v.then(_=>{if(!_)return Promise.reject(new Error(`Couldn't resolve component "${y}" at "${l.path}"`));const M=vte(_)?_.default:_;l.components[y]=M;const A=(M.__vccOpts||M)[t];return A&&xc(A,i,r,l,y)()}))}}return s}function pie(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function XA(e){const t=mc(m9),i=mc(kA),r=Ua(()=>t.resolve(_y(e.to))),s=Ua(()=>{const{matched:v}=r.value,{length:_}=v,M=v[_-1],T=i.matched;if(!M||!T.length)return-1;const A=T.findIndex(Cf.bind(null,M));if(A>-1)return A;const R=QA(v[_-2]);return _>1&&QA(M)===R&&T[T.length-1].path!==R?T.findIndex(Cf.bind(null,v[_-2])):A}),l=Ua(()=>s.value>-1&&gie(i.params,r.value.params)),y=Ua(()=>s.value>-1&&s.value===i.matched.length-1&&FA(i.params,r.value.params));function d(v={}){return yie(v)?t[_y(e.replace)?"replace":"push"](_y(e.to)).catch(Ty):Promise.resolve()}return{route:r,href:Ua(()=>r.value.href),isActive:l,isExactActive:y,navigate:d}}const die=FC({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:XA,setup(e,{slots:t}){const i=by(XA(e)),{options:r}=mc(m9),s=Ua(()=>({[eP(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[eP(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const l=t.default&&t.default(i);return e.custom?l:xA("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},l)}}}),fie=die;function yie(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function gie(e,t){for(const i in t){const r=t[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some((l,y)=>l!==s[y]))return!1}return!0}function QA(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const eP=(e,t,i)=>e!=null?e:t!=null?t:i,mie=FC({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:i}){const r=mc(v9),s=Ua(()=>e.route||r.value),l=mc(OA,0),y=Ua(()=>s.value.matched[l]);Cb(OA,l+1),Cb(mte,y),Cb(v9,s);const d=RQ();return Gb(()=>[d.value,y.value,e.name],([v,_,M],[T,A,R])=>{_&&(_.instances[M]=v,A&&A!==_&&v&&v===T&&(_.leaveGuards.size||(_.leaveGuards=A.leaveGuards),_.updateGuards.size||(_.updateGuards=A.updateGuards))),v&&_&&(!A||!Cf(_,A)||!T)&&(_.enterCallbacks[M]||[]).forEach(F=>F(v))},{flush:"post"}),()=>{const v=s.value,_=y.value,M=_&&_.components[e.name],T=e.name;if(!M)return tP(i.default,{Component:M,route:v});const A=_.props[e.name],R=A?A===!0?v.params:typeof A=="function"?A(v):A:null,V=xA(M,Vi({},R,t,{onVnodeUnmounted:z=>{z.component.isUnmounted&&(_.instances[T]=null)},ref:d}));return tP(i.default,{Component:V,route:v})||V}}});function tP(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const vie=mie;function A7e(e){const t=Hte(e.routes,e),i=e.parseQuery||cie,r=e.stringifyQuery||YA,s=e.history,l=Py(),y=Py(),d=Py(),v=FQ(_c);let _=_c;Tf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=b9.bind(null,Ne=>""+Ne),T=b9.bind(null,uie),A=b9.bind(null,Bb);function R(Ne,ct){let We,yt;return VA(Ne)?(We=t.getRecordMatcher(Ne),yt=ct):yt=Ne,t.addRoute(yt,We)}function F(Ne){const ct=t.getRecordMatcher(Ne);ct&&t.removeRoute(ct)}function V(){return t.getRoutes().map(Ne=>Ne.record)}function z(Ne){return!!t.getRecordMatcher(Ne)}function W(Ne,ct){if(ct=Vi({},ct||v.value),typeof Ne=="string"){const Ft=w9(i,Ne,ct.path),ue=t.resolve({path:Ft.path},ct),ye=s.createHref(Ft.fullPath);return Vi(Ft,ue,{params:A(ue.params),hash:Bb(Ft.hash),redirectedFrom:void 0,href:ye})}let We;if("path"in Ne)We=Vi({},Ne,{path:w9(i,Ne.path,ct.path).path});else{const Ft=Vi({},Ne.params);for(const ue in Ft)Ft[ue]==null&&delete Ft[ue];We=Vi({},Ne,{params:T(Ne.params)}),ct.params=T(ct.params)}const yt=t.resolve(We,ct),ni=Ne.hash||"";yt.params=M(A(yt.params));const si=_te(r,Vi({},Ne,{hash:oie(ni),path:yt.path})),Rt=s.createHref(si);return Vi({fullPath:si,hash:ni,query:r===YA?hie(Ne.query):Ne.query||{}},yt,{redirectedFrom:void 0,href:Rt})}function Z(Ne){return typeof Ne=="string"?w9(i,Ne,v.value.path):Vi({},Ne)}function Q(Ne,ct){if(_!==Ne)return Af(8,{from:ct,to:Ne})}function ee(Ne){return he(Ne)}function re(Ne){return ee(Vi(Z(Ne),{replace:!0}))}function ie(Ne){const ct=Ne.matched[Ne.matched.length-1];if(ct&&ct.redirect){const{redirect:We}=ct;let yt=typeof We=="function"?We(Ne):We;return typeof yt=="string"&&(yt=yt.includes("?")||yt.includes("#")?yt=Z(yt):{path:yt},yt.params={}),Vi({query:Ne.query,hash:Ne.hash,params:Ne.params},yt)}}function he(Ne,ct){const We=_=W(Ne),yt=v.value,ni=Ne.state,si=Ne.force,Rt=Ne.replace===!0,Ft=ie(We);if(Ft)return he(Vi(Z(Ft),{state:ni,force:si,replace:Rt}),ct||We);const ue=We;ue.redirectedFrom=ct;let ye;return!si&&xte(r,yt,We)&&(ye=Af(16,{to:ue,from:yt}),Oi(yt,yt,!0,!1)),(ye?Promise.resolve(ye):we(ue,yt)).catch(Ee=>cp(Ee)?Ee:ft(Ee,ue,yt)).then(Ee=>{if(Ee){if(cp(Ee,2))return he(Vi(Z(Ee.to),{state:ni,force:si,replace:Rt}),ct||ue)}else Ee=$e(ue,yt,!0,Rt,ni);return xe(ue,yt,Ee),Ee})}function be(Ne,ct){const We=Q(Ne,ct);return We?Promise.reject(We):Promise.resolve()}function we(Ne,ct){let We;const[yt,ni,si]=bie(Ne,ct);We=M9(yt.reverse(),"beforeRouteLeave",Ne,ct);for(const Ft of yt)Ft.leaveGuards.forEach(ue=>{We.push(xc(ue,Ne,ct))});const Rt=be.bind(null,Ne,ct);return We.push(Rt),Pf(We).then(()=>{We=[];for(const Ft of l.list())We.push(xc(Ft,Ne,ct));return We.push(Rt),Pf(We)}).then(()=>{We=M9(ni,"beforeRouteUpdate",Ne,ct);for(const Ft of ni)Ft.updateGuards.forEach(ue=>{We.push(xc(ue,Ne,ct))});return We.push(Rt),Pf(We)}).then(()=>{We=[];for(const Ft of Ne.matched)if(Ft.beforeEnter&&!ct.matched.includes(Ft))if(Array.isArray(Ft.beforeEnter))for(const ue of Ft.beforeEnter)We.push(xc(ue,Ne,ct));else We.push(xc(Ft.beforeEnter,Ne,ct));return We.push(Rt),Pf(We)}).then(()=>(Ne.matched.forEach(Ft=>Ft.enterCallbacks={}),We=M9(si,"beforeRouteEnter",Ne,ct),We.push(Rt),Pf(We))).then(()=>{We=[];for(const Ft of y.list())We.push(xc(Ft,Ne,ct));return We.push(Rt),Pf(We)}).catch(Ft=>cp(Ft,8)?Ft:Promise.reject(Ft))}function xe(Ne,ct,We){for(const yt of d.list())yt(Ne,ct,We)}function $e(Ne,ct,We,yt,ni){const si=Q(Ne,ct);if(si)return si;const Rt=ct===_c,Ft=Tf?history.state:{};We&&(yt||Rt?s.replace(Ne.fullPath,Vi({scroll:Rt&&Ft&&Ft.scroll},ni)):s.push(Ne.fullPath,ni)),v.value=Ne,Oi(Ne,ct,We,Rt),Ct()}let je;function it(){je=s.listen((Ne,ct,We)=>{const yt=W(Ne),ni=ie(yt);if(ni){he(Vi(ni,{replace:!0}),yt).catch(Ty);return}_=yt;const si=v.value;Tf&&Ate(NA(si.fullPath,We.delta),Ub()),we(yt,si).catch(Rt=>cp(Rt,4|8)?Rt:cp(Rt,2)?(he(Rt.to,yt).then(Ft=>{cp(Ft,4|16)&&!We.delta&&We.type===Cy.pop&&s.go(-1,!1)}).catch(Ty),Promise.reject()):(We.delta&&s.go(-We.delta,!1),ft(Rt,yt,si))).then(Rt=>{Rt=Rt||$e(yt,si,!1),Rt&&(We.delta?s.go(-We.delta,!1):We.type===Cy.pop&&cp(Rt,4|16)&&s.go(-1,!1)),xe(yt,si,Rt)}).catch(Ty)})}let Ye=Py(),Lt=Py(),Dt;function ft(Ne,ct,We){Ct(Ne);const yt=Lt.list();return yt.length?yt.forEach(ni=>ni(Ne,ct,We)):console.error(Ne),Promise.reject(Ne)}function Ze(){return Dt&&v.value!==_c?Promise.resolve():new Promise((Ne,ct)=>{Ye.add([Ne,ct])})}function Ct(Ne){Dt||(Dt=!0,it(),Ye.list().forEach(([ct,We])=>Ne?We(Ne):ct()),Ye.reset())}function Oi(Ne,ct,We,yt){const{scrollBehavior:ni}=e;if(!Tf||!ni)return Promise.resolve();const si=!We&&Pte(NA(Ne.fullPath,0))||(yt||!We)&&history.state&&history.state.scroll||null;return dA().then(()=>ni(Ne,ct,si)).then(Rt=>Rt&&Cte(Rt)).catch(Rt=>ft(Rt,Ne,ct))}const Ui=Ne=>s.go(Ne);let _i;const pr=new Set;return{currentRoute:v,addRoute:R,removeRoute:F,hasRoute:z,getRoutes:V,resolve:W,options:e,push:ee,replace:re,go:Ui,back:()=>Ui(-1),forward:()=>Ui(1),beforeEach:l.add,beforeResolve:y.add,afterEach:d.add,onError:Lt.add,isReady:Ze,install(Ne){const ct=this;Ne.component("RouterLink",fie),Ne.component("RouterView",vie),Ne.config.globalProperties.$router=ct,Object.defineProperty(Ne.config.globalProperties,"$route",{enumerable:!0,get:()=>_y(v)}),Tf&&!_i&&v.value===_c&&(_i=!0,ee(s.location).catch(ni=>{}));const We={};for(const ni in _c)We[ni]=Ua(()=>v.value[ni]);Ne.provide(m9,ct),Ne.provide(kA,by(We)),Ne.provide(v9,v);const yt=Ne.unmount;pr.add(Ne),Ne.unmount=function(){pr.delete(Ne),pr.size<1&&(_=_c,je&&je(),v.value=_c,_i=!1,Dt=!1),yt()}}}}function Pf(e){return e.reduce((t,i)=>t.then(()=>i()),Promise.resolve())}function bie(e,t){const i=[],r=[],s=[],l=Math.max(t.matched.length,e.matched.length);for(let y=0;y<l;y++){const d=t.matched[y];d&&(e.matched.find(_=>Cf(_,d))?r.push(d):i.push(d));const v=e.matched[y];v&&(t.matched.find(_=>Cf(_,v))||s.push(v))}return[i,r,s]}function m(e,t,i,r){var s,l=arguments.length,y=l<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,r);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(y=(l<3?s(y):l>3?s(t,i,y):s(t,i))||y);return l>3&&y&&Object.defineProperty(t,i,y),y}let Sc;function Me(e){return typeof Sc[e]=="function"?Sc[e]=Sc[e](globalThis):Sc[e]}var MZ,$Z,EZ,IZ;Sc=((MZ=globalThis.dojoConfig)==null?void 0:MZ.has)||(($Z=globalThis.esriConfig)==null?void 0:$Z.has)?te(te({},(EZ=globalThis.dojoConfig)==null?void 0:EZ.has),(IZ=globalThis.esriConfig)==null?void 0:IZ.has):{},Me.add=(e,t,i,r)=>((r||Sc[e]===void 0)&&(Sc[e]=t),i&&Me(e)),Me.cache=Sc,Me.add("esri-deprecation-warnings",!0),(()=>{var t;Me.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(Me.add("host-browser",e),Me.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),Me.add("dom",e),Me("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,l=parseFloat(s);if(Me.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),Me.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),Me.add("khtml",s.includes("Konqueror")?l:void 0),Me.add("edge",parseFloat(r.split("Edge/")[1])||void 0),Me.add("opr",parseFloat(r.split("OPR/")[1])||void 0),Me.add("webkit",!Me("wp")&&!Me("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),Me.add("chrome",!Me("edge")&&!Me("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),Me.add("android",!Me("wp")&&parseFloat(r.split("Android ")[1])||void 0),Me.add("safari",!s.includes("Safari")||Me("wp")||Me("chrome")||Me("android")||Me("edge")||Me("opr")?void 0:parseFloat(s.split("Version/")[1])),Me.add("mac",s.includes("Macintosh")),!Me("wp")&&r.match(/(iPhone|iPod|iPad)/)){const y=RegExp.$1.replace(/P/,"p"),d=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",v=parseFloat(d.replace(/_/,".").replace(/_/g,""));Me.add(y,v),Me.add("ios",v)}Me.add("trident",parseFloat(s.split("Trident/")[1])||void 0),Me("webkit")||(!r.includes("Gecko")||Me("wp")||Me("khtml")||Me("trident")||Me("edge")||Me.add("mozilla",l),Me("mozilla")&&Me.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&Me.add("esri-mobile",t),i&&Me.add("esri-iPhone",i),Me.add("esri-geolocation",!!navigator.geolocation)}Me.add("esri-canvas-svg-support",!Me("trident")),Me.add("esri-wasm","WebAssembly"in globalThis),Me.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),Me.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),Me.add("esri-atomics","Atomics"in globalThis),Me.add("esri-workers","Worker"in globalThis),Me.add("web-feat:cache","caches"in globalThis),Me.add("esri-workers-arraybuffer-transfer",!Me("safari")||Number(Me("safari"))>=12),Me.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Me.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Me.add("featurelayer-snapshot-enabled",!0),Me.add("featurelayer-snapshot-point-min-threshold",8e4),Me.add("featurelayer-snapshot-point-max-threshold",4e5),Me.add("featurelayer-snapshot-point-coverage",.1),Me.add("featurelayer-advanced-symbols",!1),Me.add("featurelayer-pbf",!0),Me.add("featurelayer-pbf-statistics",!1),Me.add("feature-layers-workers",!0),Me.add("feature-polyline-generalization-factor",1),Me.add("mapview-transitions-duration",200),Me.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Me.add("mapserver-pbf-enabled",!1),Me.add("mapimagelayer-popup-identify-max-tolerance",20),Me.add("heatmap-allow-raster-fallback",!0),Me.add("heatmap-force-raster",!1),Me("host-webworker")||Me("host-browser")&&(Me.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Me.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{Me.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Me.add("esri-image-decode",!1,!0,!0)})}return!1}),Me.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const wie=null;function q(e){return e!=null}function ae(e){return e==null}function Jl(e,t){return q(e)?t(e):wie}function Wt(e){return e}function is(e,t){return $9(e,t),e}function $9(e,t){if(ae(e))throw new Error(t!=null?t:"value is None")}function hn(e,t){return q(e)?e:typeof t=="function"?t():t}function P7e(e,t){return q(e)?e:t}function oi(e){return q(e)&&e.destroy(),null}function O7e(e){return q(e)&&e.dispose(),null}function Tr(e){return q(e)&&e.remove(),null}function Wa(e){return q(e)&&e.abort(),null}function k7e(e){return q(e)&&e.release(),null}function iP(e,t,i){return q(e)&&q(t)?q(i)?i(e,t):e.equals(t):e===t}function _ie(e){return null}function R7e(e,t){const i=new Array;for(const r of e)i.push(Oy(r,null,t));return i}function F7e(e,t){for(const i of e)Jl(i,t)}function Oy(e,t,i){return q(e)?i(e):t}function xie(e){return e.filter(t=>q(t))}function Hb(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function Fr(e){return e}class ta{constructor(t=1){this._seed=t}set seed(t){this._seed=t!=null?t:Math.random()*ta._m}getInt(){return this._seed=(ta._a*this._seed+ta._c)%ta._m,this._seed}getFloat(){return this.getInt()/(ta._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/ta._m*r}}ta._m=2147483647,ta._a=48271,ta._c=0;function Sie(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):e.filter((i,r,s)=>s.indexOf(i)===r)}function Mc(e,t,i){if(ae(e)&&ae(t))return!0;if(ae(e)||ae(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function L7e(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function N7e(e,t,i){let r,s;return i?(r=t.filter(l=>!e.some(y=>i(y,l))),s=e.filter(l=>!t.some(y=>i(y,l)))):(r=t.filter(l=>!e.includes(l)),s=e.filter(l=>!t.includes(l))),{added:r,removed:s}}function j7e(e){return e&&typeof e.length=="number"}const Mie=!!Array.prototype.fill;function D7e(e,t){if(Mie)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function V7e(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class rP{constructor(){this.last=0}}const nP=new rP;function E9(e,t,i,r){r=r||nP;const s=Math.max(0,r.last-10);for(let y=s;y<i;++y)if(e[y]===t)return r.last=y,y;const l=Math.min(s,i);for(let y=0;y<l;++y)if(e[y]===t)return r.last=y,y;return-1}function $ie(e,t,i,r){const s=i!=null?i:e.length,l=E9(e,t,s,r);if(l!==-1)return e[l]=e[s-1],i==null&&e.pop(),t}const ia=new Set;function Eie(e,t,i=e.length,r=t.length,s,l){if(r===0||i===0)return i;ia.clear();for(let d=0;d<r;++d)ia.add(t[d]);s=s||nP;const y=Math.max(0,s.last-10);for(let d=y;d<i;++d)if(ia.has(e[d])&&(l&&l.push(e[d]),ia.delete(e[d]),e[d]=e[i-1],--i,--d,ia.size===0||i===0))return ia.clear(),i;for(let d=0;d<y;++d)if(ia.has(e[d])&&(l&&l.push(e[d]),ia.delete(e[d]),e[d]=e[i-1],--i,--d,ia.size===0||i===0))return ia.clear(),i;return ia.clear(),i}new ta;function sP(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function z7e(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function Iie(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),s=new e.constructor(r);for(let l=0;l<r;l++)s[l]=e[t+l];return s}function G7e(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function Tie(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function Cie(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function Aie(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function Pie(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function Oie(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function kie(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function Rie(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function oP(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function aP(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function Fie(e){const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e[i];return t}function lP(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&lP(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function me(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=dP(e);if(q(t))return t;if(uP(e))return e.clone();if(cP(e))return e.map(me);if(hP(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=me(e[r]);return i}function I9(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=dP(e);if(q(t))return t;if(cP(e)){let i=!0;const r=e.map(s=>{const l=I9(s);return s!=null&&l==null&&(i=!1),l});return i?r:null}if(uP(e))return e.clone();if(!hP(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],l=I9(s);if(s!=null&&l==null)return null;i[r]=l}return i}return null}function uP(e){return typeof e.clone=="function"}function cP(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function hP(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function pP(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function dP(e){if(Tie(e)||Cie(e)||Aie(e)||Pie(e)||Oie(e)||kie(e)||Rie(e)||oP(e)||aP(e))return Iie(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,me(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(me(i));return t}return null}function T9(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function Lie(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Mc(e,t):e instanceof Set?t instanceof Set&&jie(e,t):e instanceof Map?t instanceof Map&&Die(e,t):!!pP(e)&&pP(t)&&Nie(e,t))}function Nie(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function jie(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Die(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function fP(e,t,i=!1){return gP(e,t,i)}function Of(e,t){if(t!=null)return t[e]||yP(e.split("."),!1,t)}function Nn(e,t,i){const r=e.split("."),s=r.pop(),l=yP(r,!0,i);l&&s&&(l[s]=t)}function yP(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function gP(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let l=r[s],y=t[s];return l===y?r:l===void 0?(r[s]=me(y),r):(Array.isArray(y)||Array.isArray(r)?(l=l?Array.isArray(l)?r[s]=l.concat():r[s]=[l]:r[s]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(d=>{l.includes(d)||l.push(d)}):r[s]=y.concat())):y&&typeof y=="object"?r[s]=gP(l,y,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=y),r)},e||{}):e}var TZ;const gi={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:(TZ=globalThis.location)==null?void 0:TZ.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(fP(gi,globalThis.esriConfig,!0),delete gi.has),!gi.assetsPath){{const e="4.25.5";gi.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}gi.defaultAssetsPath=gi.assetsPath}const Vie=/\{([^\}]+)\}/g;function mP(e){return e!=null?e:""}function Ja(e,t){return e.replace(Vie,typeof t=="object"?(i,r)=>mP(Of(r,t)):(i,r)=>mP(t(r)))}function zie(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function C9(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function q7e(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const vP={info:0,warn:1,error:2,none:3};class Ae{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Ae._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Ae.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Ae._loggers;return Ae._loggers=t,i},set throttlingDisabled(t){Ae._throttlingDisabled=t}}}static getLogger(t){let i=Ae._loggers[t];return i||(i=new Ae({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!Ae._throttlingDisabled){const s=this._argsToKey(r),l=this._loggedMessages[t].get(s);if(i==="once"&&l!=null||i==="oncePerTick"&&l&&l>=Ae._tickCounter)return;this._loggedMessages[t].set(s,Ae._tickCounter),Ae._scheduleTickCounterIncrement()}for(const s of gi.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;q(r);){const s=r[t];if(q(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=gi.log.level?gi.log.level:"warn";return vP[this._parentWithMember("level",i)]<=vP[t]}_argsToKey(...t){const i=(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return C9(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Ae._tickCounterScheduled||(Ae._tickCounterScheduled=!0,Promise.resolve().then(()=>{Ae._tickCounter++,Ae._tickCounterScheduled=!1}))}}Ae._loggers={},Ae._tickCounter=0,Ae._tickCounterScheduled=!1,Ae._throttlingDisabled=!1;function ky(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function U7e(e,t){for(const[i,r]of e)if(t(r,i))return r;return null}function bP(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}const kf=Ae.getLogger("esri.core.accessorSupport.ensureTypes");function Gie(e){return e==null?e:new Date(e)}function qie(e){return e==null?e:!!e}function Ry(e){return e==null?e:e.toString()}function $o(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function Wb(e){return e==null?e:Math.round(parseFloat(e))}function wP(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Jb(e,t){return t!=null&&e&&!(t instanceof e)}function _P(e){return e&&"isCollection"in e}function xP(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Uie(e,t){if(!t||!t.constructor||!_P(t.constructor))return A9(e,t)?t:new e(t);const i=xP(e.prototype.itemType),r=xP(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(A9(e,t),t):new e(t):t}function A9(e,t){return!!wP(t)&&(kf.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Zb(e)+"'"),!0)}function Rf(e,t){return t==null?t:_P(e)?Uie(e,t):Jb(e,t)?A9(e,t)?t:new e(t):t}function Zb(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const Bie=new WeakMap;function Hie(e){switch(e){case Number:return $o;case hi:return Wb;case Boolean:return qie;case String:return Ry;case Date:return Gie;default:return bP(Bie,e,()=>Rf.bind(null,e))}}function Ai(e,t){const i=Hie(e);return arguments.length===1?i:i(t)}function Fy(e,t,i){return arguments.length===1?Fy.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Wie(e,t){return arguments.length===1?Fy(Ai.bind(null,e)):Fy(Ai.bind(null,e),t)}function SP(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>SP(e,t-1,r)):e(i)}function Kb(e,t,i){if(arguments.length===2)return Kb.bind(null,e,t);if(!i)return i;let r=t,s=i=SP(e,t,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let l=0;l<r;l++)i=[i];return i}function Jie(e,t,i){return arguments.length===2?Kb(Ai.bind(null,e),t):Kb(Ai.bind(null,e),t,i)}function MP(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function P9(e,t){if(arguments.length===2)return P9(e).call(null,t);const i=new Set,r=e.filter(d=>typeof d!="function"),s=e.filter(d=>typeof d=="function");for(const d of e)typeof d!="string"&&typeof d!="number"||i.add(d);let l=null,y=null;return(d,v)=>{if(d==null)return d;const _=typeof d,M=_==="string"||_==="number";return M&&(i.has(d)||s.some(T=>_==="string"&&T===String||_==="number"&&T===Number))||_==="object"&&s.some(T=>!Jb(d,T))?d:(M&&r.length?(l||(l=r.map(T=>typeof T=="string"?`'${T}'`:`${T}`).join(", ")),kf.error("Accessor#set",`'${d}' is not a valid value for this property, only the following values are valid: ${l}`)):typeof d=="object"&&s.length?(y||(y=s.map(T=>Zb(T)).join(", ")),kf.error("Accessor#set",`'${d}' is not a valid value for this property, value must be one of ${y}`)):kf.error("Accessor#set",`'${d}' is not a valid value for this property`),v&&(v.valid=!1),null)}}function Za(e,t){if(arguments.length===2)return Za(e).call(null,t);const i={},r=[],s=[];for(const v in e.typeMap){const _=e.typeMap[v];i[v]=Ai(_),r.push(Zb(_)),s.push(v)}const l=()=>`'${r.join("', '")}'`,y=()=>`'${s.join("', '")}'`,d=typeof e.key=="string"?v=>v[e.key]:e.key;return v=>{if(e.base&&!Jb(e.base,v)||v==null)return v;const _=d(v)||e.defaultKeyValue,M=i[_];if(!M)return kf.error("Accessor#set",`Invalid property value, value needs to be one of ${l()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!Jb(e.typeMap[_],v))return v;if(typeof e.key=="string"&&!wP(v)){const T={};for(const A in v)A!==e.key&&(T[A]=v[A]);return M(T)}return M(v)}}class hi{}const B7e={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Zie(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function $P(e){switch(e.type){case"native":return Ai(e.value);case"array":return Fy($P(e.value));case"one-of":return Kie(e);default:return null}}function Kie(e){let t=null;return(i,r)=>k9(i,e)?i:(t==null&&(t=O9(e)),kf.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function O9(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case hi:return"integer";case Date:return"date";default:return Zb(e.value)}case"array":return`array of ${O9(e.value)}`;case"one-of":{const t=e.values.map(i=>O9(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function k9(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case hi:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!k9(i,t.value));case"one-of":return t.values.some(i=>k9(e,i))}}function Ly(e){return Zl(()=>e.forEach(t=>q(t)&&t.remove()))}function Zl(e){return{remove:()=>{e&&(e(),e=void 0)}}}function H7e(e){return Zl(()=>{const t=e();q(t)&&t.remove()})}function W7e(e){return Zl(q(e)?()=>e.destroy():void 0)}function Lr(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function Yie(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function Yb(e,t,i){return i?Xb(e,t,{policy:i,path:""}):Xb(e,t,null)}function Xb(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let l=null,y="merge";if(i&&(l=i.path?`${i.path}.${s}`:s,y=i.policy(l)),y==="replace")return r[s]=t[s],r;if(r[s]===void 0)return r[s]=me(t[s]),r;let d=r[s],v=t[s];if(d===v)return r;if(Array.isArray(v)||Array.isArray(r))d=d?Array.isArray(d)?r[s]=d.concat():r[s]=[d]:r[s]=[],v&&(Array.isArray(v)||(v=[v]),v.forEach(_=>{d.includes(_)||d.push(_)}));else if(v&&typeof v=="object")if(i){const _=i.path;i.path=Fr(l),r[s]=Xb(d,v,i),i.path=_}else r[s]=Xb(d,v,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=v);return r},e||{}):e}function EP(e){return Array.isArray(e)?e:e.split(".")}function IP(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Xie(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...IP(i));return t}return IP(e)}function TP(e,t,i,r){const s=Xie(t);if(s.length!==1){const l=s.map(y=>r(e,y,i));return Ly(l)}return r(e,s[0],i)}function CP(e){let t=!1;return()=>{t||(t=!0,e())}}function AP(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const r=Lr(t);return Yie(r,i)?r.get(i):t[i]}function PP(e,t,i){if(e==null)return e;const r=AP(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:PP(r,t,i+1)}function Ny(e,t,i=0){return typeof t!="string"||t.includes(".")?PP(e,EP(t),i):AP(t,e)}function Qb(e,t){return Ny(e,t)}function OP(e,t){return Ny(t,e)!==void 0}class kP{constructor(t){this.autoDestroy=!1,this.properties=t}}function jy(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),s=t.autoDestroy;for(const l in r)r[l]=me(r[l]);t=new kP(r),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new kP({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Fr(e.constructor.__accessorMetadata__)}function Qie(e){return jy(e).properties}function ew(e,t){const i=Qie(e);let r=i[t];return r||(r=i[t]={}),r}function ere(e,t){return Yb(e,t,ire)}const tre=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function ire(e){return tre.test(e)?"replace":"merge"}function rre(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=Of(r,t),l=s!=null?s:"";if(l===void 0)throw new Error(`could not find key "${r}" in template`);return l.toString()})}class tw{constructor(t,i,r){var s;this.name=t,this.details=r,this instanceof tw&&(this.message=(s=i&&rre(i,r))!=null?s:"")}toString(){return"["+this.name+"]: "+this.message}}class fe extends tw{constructor(t,i,r){if(super(t,i,r),!(this instanceof fe))return new fe(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return me(i)}catch{return"[object]"}}))}}catch(t){throw Ae.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new fe(t.name,t.message,t.details)}}fe.prototype.type="error";function iw(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))iw(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),l=s.splice(s.length-1,1)[0];return void iw(Qb(e,s),l,i)}const r=e.__accessor__;r!=null&&nre(t,r),e[t]=i}}function nre(e,t){if(Me("esri-unknown-property-errors")&&!sre(e,t))throw new fe("set:unknown-property",ore(e,t))}function sre(e,t){return t.metadatas[e]!=null}function ore(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function x(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=ew(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&Ae.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const l=e.aliasOf;if(l){const v=typeof l=="string"?l:l.source,_=typeof l=="string"?null:l.overridable===!0;let M;s.dependsOn=[v],s.get=function(){let T=Qb(this,v);if(typeof T=="function"){M||(M=v.split(".").slice(0,-1).join("."));const A=Qb(this,M);A&&(T=T.bind(A))}return T},s.readOnly||(s.set=_?function(T){this._override(i,T)}:function(T){iw(this,v,T)})}const y=e.type,d=e.types;s.cast||(y?s.cast=are(y):d&&(Array.isArray(d)?s.cast=Fy(Za(d[0])):s.cast=Za(d))),ere(s,e),e.range&&(s.cast=lre(s.cast,e.range))}}function RP(e,t,i){const r=ew(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function are(e){let t=0,i=e;if(Zie(e))return $P(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(MP(r))return t===0?P9(r):Kb(P9(r),t);if(t===1)return Wie(r);if(t>1)return Jie(r,t);const s=e;return s.from?s.from:Ai(s)}function lre(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}var Kl;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Kl||(Kl={}));var Ti;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ti||(Ti={}));const rw={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Dy=[];let Vy=rw;function Vt(e){Vy.onObservableAccessed(e)}let nw=!1,sw=!1;function Yl(e,t,i){if(nw)return R9(e,t,i);FP(e);const r=t.call(i);return LP(),r}function ure(e,t){return Yl(rw,e,t)}function R9(e,t,i){const r=nw;nw=!0,FP(e);let s=null;try{s=t.call(i)}catch(l){sw&&Ae.getLogger("esri.core.accessorSupport.tracking").error(l)}return LP(),nw=r,s}function FP(e){Vy=e,Dy.push(e)}function LP(){const e=Dy.length;if(e>1){const t=Dy.pop();Vy=Dy[e-2],t.onTrackingEnd()}else if(e===1){const t=Dy.pop();Vy=rw,t.onTrackingEnd()}else Vy=rw}function NP(e,t){if(t.flags&Ti.DepTrackingInitialized)return;const i=sw;sw=!1,t.flags&Ti.AutoTracked?R9(t,t.metadata.get,e):jP(e,t),sw=i}const cre=[];function jP(e,t){t.flags&Ti.ExplicitlyTracking||(t.flags|=Ti.ExplicitlyTracking,R9(t,()=>{const i=t.metadata.dependsOn||cre;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=EP(r);for(let l=0,y=e;l<s.length&&y!=null&&typeof y=="object";++l)y=DP(y,s[l],l!==s.length-1)}else DP(e,r,!1)}),t.flags&=~Ti.ExplicitlyTracking)}function DP(e,t,i){var l;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const y=parseInt(r,10);if(!isNaN(y))return Array.isArray(e)?e[y]:e.getItemAt(y)}const s=(l=Lr(e))==null?void 0:l.properties.get(r);return s&&(Vt(s),NP(e,s)),i?e[r]:void 0}function hre(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(l=>{t[l]=s}),delete t[r]}}}class rs extends tw{constructor(t,i,r){if(super(t,i,r),!(this instanceof rs))return new rs(t,i,r)}}rs.prototype.type="warning";function VP(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const F9=Ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function zP(e,t,i){var r,s;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((s=t.read)==null?void 0:s.enabled)===!1||fre(e)&&Nn("read.reader",$c(e),t))}function $c(e){var i,r,s;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return dre(e);if(t===1)return qP(e);if("type"in e&&UP(e.type)){const l=(s=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:s.Type,y=qP(typeof l=="function"?{type:l}:{types:l});return(d,v,_)=>{const M=y(d,v,_);return M&&new e.type(M)}}return L9(e)}function L9(e){return"type"in e?pre(e.type):yre(e.types)}function pre(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void F9.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const l=new e;return l.read(t,r),l}:e.fromJSON}function GP(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>GP(e,s,i,r-1)):e(t,void 0,i)}function dre(e){var s;const t=L9(e),i=GP.bind(null,t),r=(s=e.ndimArray)!=null?s:0;return(l,y,d)=>{if(l==null)return l;l=i(l,d,r);let v=r,_=l;for(;v>0&&Array.isArray(_);)v--,_=_[0];if(_!==void 0)for(let M=0;M<v;M++)l=[l];return l}}function qP(e){const t=L9(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const d of i){const v=t(d,void 0,s);v!==void 0&&y.push(v)}return y}const l=t(i,void 0,s);return l!==void 0?[l]:void 0}}function UP(e){if(!VP(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?N9(t.Type):BP(t.Type))}function fre(e){return"types"in e?BP(e.types):N9(e.type)}function N9(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||UP(e))}function BP(e){for(const t in e.typeMap)if(!N9(e.typeMap[t]))return!1;return!0}function yre(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(s,l,y)=>{if(s==null)return s;const d=typeof s;if(d!=="object")return void F9.error(`Expected JSON value of type 'object' to deserialize, but got '${d}'`);t||(t=gre(e));const v=e.key;if(typeof v!="string")return;const _=s[v],M=_?t[_]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!M){const A=`Type '${_||"unknown"}' is not supported`;return y&&y.messages&&s&&y.messages.push(new rs(`${i}:unsupported`,A,{definition:s,context:y})),void F9.error(A)}const T=new M;return T.read(s,y),T}}function gre(e){var i,r;const t={};for(const s in e.typeMap){const l=e.typeMap[s],y=jy(l.prototype);if(typeof e.key=="function")continue;const d=y.properties[e.key];if(!d)continue;((i=d.json)==null?void 0:i.type)&&Array.isArray(d.json.type)&&d.json.type.length===1&&typeof d.json.type[0]=="string"&&(t[d.json.type[0]]=l);const v=(r=d.json)==null?void 0:r.write;if(!v||!v.writer){t[s]=l;continue}const _=v.target,M=typeof _=="string"?_:e.key,T={};v.writer(s,T,M),T[M]&&(t[T[M]]=l)}return t}function mre(e){if(e.json||(e.json={}),WP(e.json),JP(e.json),HP(e.json),e.json.origins)for(const t in e.json.origins)WP(e.json.origins[t]),JP(e.json.origins[t]),HP(e.json.origins[t]);return!0}function HP(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function WP(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function JP(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function ZP(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&VP(e.type))?t.write.writer=wre:i>1?t.write.writer=_re(i):t.types?Array.isArray(t.types)?t.write.writer=bre(t.types[0]):t.write.writer=vre(t.types):t.write.writer=zy}function vre(e){return(t,i,r,s)=>t?KP(t,e,s)?zy(t,i,r,s):void 0:zy(t,i,r,s)}function KP(e,t,i){var r,s;for(const l in t.typeMap)if(e instanceof t.typeMap[l])return!0;if(i==null?void 0:i.messages){const l=(r=t.errorContext)!=null?r:"type",y=`Values of type '${(s=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?s:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new fe(`${l}:unsupported`,y,{definition:e,context:i})),Ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(y)}return!1}function bre(e){return(t,i,r,s)=>!t||!Array.isArray(t)?zy(t,i,r,s):zy(t.filter(l=>KP(l,e,s)),i,r,s)}function zy(e,t,i,r){Nn(i,ow(e,r),t)}function ow(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?aw(e):e}function aw(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function wre(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(l=>ow(l,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[ow(e,r)],Nn(i,s,t)}function YP(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>YP(r,t,i-1)):ow(e,t)}function _re(e){return(t,i,r,s)=>{let l;if(t===null)l=null;else{l=YP(t,s,e);let y=e,d=l;for(;y>0&&Array.isArray(d);)y--,d=d[0];if(d!==void 0)for(let v=0;v<y;v++)l=[l]}Nn(r,l,i)}}function j9(e,t){return D9(e,"read",t)}function XP(e,t){return D9(e,"write",t)}function D9(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const s=i.origin&&e.json.origins[i.origin];s&&(t==="any"||t in s)&&(r=s)}return r}function xre(e){const t=Sre(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?Mre(r):t;zP(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write=te({},e.json.write)),ZP(s,r)}zP(t,e.json,!0),ZP(t,e.json)}function Sre(e){return e.json.types?V9(e.json):e.type?QP(e):V9(e)}function Mre(e){return e.type?QP(e):V9(e)}function QP(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!MP(i);)i=i[0],t++;return{type:i,ndimArray:t}}function V9(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function $re(e){mre(e)&&(hre(e),xre(e))}const z9=new Set,G9=new Set;function Y(e){return t=>{t.prototype.declaredClass=e,Ire(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!z9.has(s.initialize)&&(z9.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!G9.has(s.destroy)&&(G9.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);z9.clear(),G9.clear();class l extends t{constructor(...d){if(super(...d),this.constructor===l&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let v=i.length-1;v>=0;v--)i[v].call(this)}}),r.length){let v=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!v){v=!0;for(let _=0;_<r.length;_++)r[_].call(this)}}})}this.postscript(...d)}}}return l.__accessorMetadata__=jy(t.prototype),l.prototype.declaredClass=e,l}}function Ere(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;Vt(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function Ire(e){const t=e.prototype,i=jy(t).properties,r={};for(const s of Object.getOwnPropertyNames(i)){const l=i[s];$re(l),r[s]={enumerable:!0,configurable:!0,get:Ere(s,l),set(y){const d=this.__accessor__;if(d!==void 0){if(!Object.isFrozen(this)){if(d.initialized&&l.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(d.lifecycle===Kl.CONSTRUCTED&&l.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);d.set(s,y)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,r)}function J7e(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function Tre(e,t){for(const i of e)if(i!=null&&t(i))return i}function lw(e){return e!=null&&typeof e[Symbol.iterator]=="function"}class Jr{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(lw(t)){const r=this._getOrCreateGroup(i);for(const s of t)this._isHandle(s)&&r.push(s)}else this._isHandle(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&lw(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&!!t.remove}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(this._ensureGroupKey(t),i),i}_getGroup(t){return Fr(this._groups.get(this._ensureGroupKey(t)))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){t.forEach(i=>i.remove())}}function Cre(e){return e&&e.release&&typeof e.release=="function"}function Are(e){return e&&e.acquire&&typeof e.acquire=="function"}class ra{constructor(t,i,r,s=1,l=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(l),this._initialSize=l,this._ctor)for(let y=0;y<l;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(ra.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):Are(i)&&i.acquire(...t),i}release(t){t&&!ra.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Cre(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}ra.test={disabled:!1};var nt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(nt||(nt={}));const q9=nt.USER+1;function xs(e){switch(e){case"defaults":return nt.DEFAULTS;case"service":return nt.SERVICE;case"portal-item":return nt.PORTAL_ITEM;case"web-scene":return nt.WEB_SCENE;case"web-map":return nt.WEB_MAP;case"user":return nt.USER;default:return null}}function Gy(e){switch(e){case nt.DEFAULTS:return"defaults";case nt.SERVICE:return"service";case nt.PORTAL_ITEM:return"portal-item";case nt.WEB_SCENE:return"web-scene";case nt.WEB_MAP:return"web-map";case nt.USER:return"user"}return Fr(void 0)}function Pre(e){return Gy(e)}class eO{constructor(t,i){this._observers=t,this._observer=i}remove(){sP(this._observers,this._observer)}}class tO{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=Ti.Dirty|(r.nonNullable?Ti.NonNullable:0)|(r.hasOwnProperty("value")?Ti.HasDefaultValue:0)|(r.get===void 0?Ti.DepTrackingInitialized:0)|(r.dependsOn===void 0?Ti.AutoTracked:0)}destroy(){if(this.flags&Ti.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Vt(this);const t=this.properties.store,i=this.propertyName,r=this.flags,s=t.get(i);if(r&Ti.Computing||~r&Ti.Dirty&&t.has(i))return s;this.flags|=Ti.Computing;const l=this.properties.host;let y;r&Ti.AutoTracked?y=Yl(this,this.metadata.get,l):(jP(l,this),y=this.metadata.get.call(l)),t.set(i,y,nt.COMPUTED);const d=t.get(i);return d===s?this.flags&=~Ti.Dirty:ure(this.commit,this),this.flags&=~Ti.Computing,d}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ti.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new eO(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Ti.Overriden&&(this.flags|=Ti.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Ti.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class U9{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new U9;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,me(r))}),i}get(t){return this._values.get(t)}originOf(){return nt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function uw(e,t,i){return e!==void 0}function iO(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Ti.NonNullable)||(r.lifecycle,Kl.INITIALIZING,!1))}function Ore(e){return e&&typeof e.destroy=="function"}Ae.getLogger("esri.core.accessorSupport.Properties");class kre{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Kl.INITIALIZING,this.store=new U9,this._origin=nt.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const s in r){const l=new tO(this,s,r[s]);this.properties.set(s,l)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=Kl.CONSTRUCTING}constructed(){this.lifecycle=Kl.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&Ore(r)&&(r.destroy(),~i.flags&Ti.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==Kl.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();Vt(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&Ti.HasDefaultValue)return"defaults"}return Gy(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(uw(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);uw(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.properties.get(i);if(!uw(s))return"";const l=new Set,y=Yl({onObservableAccessed:v=>l.add(v),onTrackingEnd:()=>{}},()=>{var v;return(v=s.metadata.get)==null?void 0:v.call(t)});let d=`${r}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;if(l.size===0)return d;r+="  ";for(const v of l){if(!(v instanceof tO))continue;const _=v.properties.host,M=v.propertyName,T=Lr(_);d+=T?T.getDependsInfo(_,M,r):`${r}${M}: undefined
`}return d}setAtOrigin(t,i,r){const s=this.properties.get(t);if(uw(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Ti.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Ti.Overriden&&(i.flags&=~Ti.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!iO(r,t,i,this))return;const s=r.metadata.cast;if(s){const l=this._cast(s,i),{valid:y,value:d}=l;if(B9.release(l),!y)return;i=d}r.flags|=Ti.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!iO(r,t,i,this))return;const s=r.metadata.cast;if(s){const y=this._cast(s,i),{valid:d,value:v}=y;if(B9.release(y),!d)return;i=v}const l=r.metadata.set;l?l.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=xs(t)}getDefaultOrigin(){return Gy(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Kl.INITIALIZING?this._origin:nt.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,l=t.propertyName;s.has(l,r)&&T9(i,s.get(l))&&~t.flags&Ti.Overriden&&r===s.originOf(l)||(t.invalidate(),s.set(l,i,r),t.commit(),NP(this.host,t))}_cast(t,i){const r=B9.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class Rre{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const B9=new ra(Rre);function Fre(e){e.length=0}class ns{constructor(t=50,i=50){this._pool=new ra(Array,void 0,Fre,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return H9.acquire()}static release(t){return H9.release(t)}static prune(){H9.prune()}}const H9=new ns(100);class rO extends ra{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=_ie(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const cw=[];function Ff(e){cw.push(e),cw.length===1&&queueMicrotask(()=>{const t=cw.slice();cw.length=0;for(const i of t)i()})}class qy{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){q(t)&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}var W9;(function(e){const t=(l,y,d,v)=>{let _=y,M=y;const T=d>>>1,A=l[_-1];for(;M<=T;){M=_<<1,M<d&&v(l[M-1],l[M])<0&&++M;const R=l[M-1];if(v(R,A)<=0)break;l[_-1]=R,_=M}l[_-1]=A},i=(l,y)=>l<y?-1:l>y?1:0;function r(l,y,d,v){y===void 0&&(y=0),d===void 0&&(d=l.length),v===void 0&&(v=i);for(let M=d>>>1;M>y;M--)t(l,M,d,v);const _=y+1;for(let M=d-1;M>y;M--){const T=l[y];l[y]=l[M],l[M]=T,t(l,_,M,v)}}function*s(l,y,d,v){y===void 0&&(y=0),d===void 0&&(d=l.length),v===void 0&&(v=i);for(let M=d>>>1;M>y;M--)t(l,M,d,v),yield;const _=y+1;for(let M=d-1;M>y;M--){const T=l[y];l[y]=l[M],l[M]=T,t(l,_,M,v),yield}}e.sort=r,e.iterableSort=s})(W9||(W9={}));const nO=W9,Lre=1.5,Nre=1.1;class hp{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new rP,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>sO(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,sO(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=E9(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(E9(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=Eie(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){nO.sort(this.data,0,this.length,t)}iterableSort(t){return nO.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const l=this.data[s];t.call(i,l,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=l,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,s=this.data;for(let l=0;l<r;++l)t.call(i,s[l],l,s)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}}function sO(e){e.data.length>Lre*e.length&&(e.data.length=Math.floor(e.length*Nre))}function jre(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const Uy=jre(globalThis),oO=new Set;function Dre(e,t,i=!1){i&&oO.has(t)||(i&&oO.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function Vre(e,t,i={}){if(Me("esri-deprecation-warnings")){const{moduleName:r}=i;aO(e,`Property: ${(r?r+"::":"")+t}`,i)}}function aO(e,t,i={}){if(Me("esri-deprecation-warnings")){const{replacement:r,version:s,see:l,warnOnce:y}=i;let d=t;r&&(d+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),s&&(d+=`
	\u2699\uFE0F Version: ${s}`),l&&(d+=`
	\u{1F517} See ${l} for more details.`),Dre(e,d,y)}}function hw(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function pw(e,t,i){if(!hw(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const s of r)e.addEventListener(s,i);return{remove(){for(const s of r)e.removeEventListener(s,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function lO(e,t,i){if(!hw(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=pw(e,t,s=>{r.remove(),i.call(e,s)});return{remove(){r.remove()}}}const zre={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function pp({key:e}){return zre[e]||e}function zi(e="Aborted"){return new fe("AbortError",e)}function fr(e,t="Aborted"){if(Eo(e))throw zi(t)}function dw(e){return q(e)?"aborted"in e?e:e.signal:e}function Eo(e){const t=dw(e);return q(t)&&t.aborted}function Lf(e){if(Zs(e))throw e}function J9(e){if(!Zs(e))throw e}function Io(e,t){const i=dw(e);if(!ae(i)){if(!i.aborted)return lO(i,"abort",()=>t());t()}}function Z9(e,t){const i=dw(e);if(!ae(i))return fr(i),lO(i,"abort",()=>t(zi()))}function uO(e,t){const i=dw(t);return ae(i)?e:new Promise((r,s)=>{let l=Io(t,()=>s(zi()));const y=()=>l=Tr(l);e.then(y,y),e.then(r,s)})}function Zs(e){return(e==null?void 0:e.name)==="AbortError"}async function Xl(e){try{return await e}catch(t){if(!Zs(t))throw t;return}}function Ql(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function Ss(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(y=>e[y]),s=await Ss(r),l={};return i.map((y,d)=>l[y]=s[d]),l}const t=e;return new Promise(i=>{const r=[];let s=t.length;s===0&&i(r),t.forEach(l=>{const y={promise:l||Promise.resolve(l)};r.push(y),y.promise.then(d=>{y.value=d}).catch(d=>{y.error=d}).then(()=>{--s,s===0&&i(r)})})})}async function cO(e){return(await Ss(e)).filter(t=>!!t.value).map(t=>t.value)}function fw(e,t,i){const r=new AbortController;return Io(i,()=>r.abort()),new Promise((s,l)=>{let y=setTimeout(()=>{y=0,s(t)},e);Io(r,()=>{y&&(clearTimeout(y),l(zi()))})})}function eu(e){return e&&typeof e.then=="function"}function K9(e){return eu(e)?e:Promise.resolve(e)}function yw(e,t=-1){let i,r,s,l,y=null;const d=(...v)=>{if(i){r=v,l&&l.reject(zi()),l=Ql();const A=Fr(l.promise);if(y){const R=y;y=null,R.abort()}return A}if(s=l||Ql(),l=null,t>0){const A=new AbortController;i=K9(e(...v,A.signal));const R=i;fw(t).then(()=>{i===R&&(l?A.abort():y=A)})}else i=1,i=K9(e(...v));const _=()=>{const A=r;r=s=i=y=null,A!=null&&d(...A)},M=i,T=s;return M.then(_,_),M.then(T.resolve,T.reject),Fr(T.promise)};return d}function hO(){let e,t;const i=new Promise((s,l)=>{e=s,t=l}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,l)=>Uy.setTimeout(()=>r.reject(l),s),r.promise=i,r}async function pO(e){await Promise.resolve(),fr(e)}function Sr(e){return e}function Gre(e){return e}function Z7e(e){return Gre(.001*e)}class qre{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class Ure{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let Y9=0;const By={time:Sr(0),deltaTime:Sr(0),elapsedFrameTime:Sr(0),frameDuration:Sr(0)},X9=["prepare","preRender","render","postRender","update","finish"],Q9=[],dp=new hp;class Bre{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const gw={frameTasks:dp,willDispatch:!1,clearFrameTasks:Hre,dispatch:yO,executeFrameTasks:Wre};function Nf(e){const t=new Ure(e);return Q9.push(t),gw.willDispatch||(gw.willDispatch=!0,Ff(yO)),t}function jf(e){const t=new qre(e);return dp.push(t),mw==null&&(Y9=performance.now(),mw=requestAnimationFrame(dO)),new Bre(t)}let mw=null;function Hre(e=!1){dp.forAll(t=>{t.removed=!0}),e&&fO()}function dO(){const e=performance.now();mw=null,mw=dp.length>0?requestAnimationFrame(dO):null,gw.executeFrameTasks(e)}function Wre(e){const t=Sr(e-Y9);Y9=e;const i=1e3/60,r=Math.max(0,t-i);for(let s=0;s<X9.length;s++){const l=performance.now(),y=X9[s];dp.forAll(d=>{var v;d.paused||d.removed||(s===0&&d.ticks++,d.phases[y]&&(By.time=e,By.deltaTime=d.ticks===0?Sr(0):t,By.elapsedFrameTime=Sr(performance.now()-e),By.frameDuration=Sr(i-r),(v=d.phases[y])==null||v.call(d,By)))}),Jre[s].record(performance.now()-l)}fO(),Zre.record(performance.now()-e)}const vw=new hp;function fO(){dp.forAll(e=>{e.removed&&vw.push(e)}),dp.removeUnorderedMany(vw.data,vw.length),vw.clear()}function yO(){for(;Q9.length;){const e=Fr(Q9.shift());e.isActive&&e.callback()}gw.willDispatch=!1}function K7e(e=1,t){const i=hO(),r=()=>{Eo(t)?i.reject(zi()):e===0?i():(--e,Ff(()=>r()))};return r(),i.promise}const Jre=X9.map(e=>new qy(e)),Zre=new qy("total");function Kre(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Yre=0;function Hy(){return++Yre}class bw{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let Df=!1;const ww=[];function gO(e,t){let i=new bw(l),r=null,s=!1;function l(){if(!i||s)return;if(Df)return void bO(l);const d=r;i.clear(),Df=!0,s=!0,r=Yl(i,e),s=!1,Df=!1,t(r,d),wO()}function y(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Yl(i,e),s=!1,{remove:y}}function mO(e,t){let i=new bw(s),r=null;function s(){t(r,y)}function l(){i&&(i.destroy(),i=null),r=null}function y(){return i?(i.clear(),r=Yl(i,e),r):null}return y(),{remove:l}}function vO(e){let t=new bw(r),i=!1;function r(){t&&!i&&(Df?bO(r):(t.clear(),Df=!0,i=!0,Yl(t,e),i=!1,Df=!1,wO()))}function s(){t&&(t.destroy(),t=null)}return i=!0,Yl(t,e),i=!1,{remove:s}}function bO(e){ww.includes(e)||ww.unshift(e)}function wO(){for(;ww.length;)ww.pop()()}var Wy;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Wy||(Wy={}));class Jy{constructor(){this.uid=Hy(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,l){return this.pool.acquire(Wy.Untracked,t,i,r,s,l,T9)}static acquireTracked(t,i,r,s){return this.pool.acquire(Wy.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===Wy.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,s,l,y,d){this.uid=Hy(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=l,this.path=y,this.equals=d}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Hy(),this.removed=!0}}Jy.pool=new rO(Jy);const _w=new ns,tu=new Set;let xw;function Sw(e){tu.delete(e),tu.add(e),xw||(xw=Nf(ene))}function Xre(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Qre(e){for(const t of tu.values())t.target===e&&(t.removed=!0)}function ene(){let e=10;for(;xw&&e--;){xw=null;const t=tne(),i=_w.acquire();for(const r of t){const s=r.uid;Xre(r),s===r.uid&&r.removed&&i.push(r)}for(const r of tu)r.removed&&(i.push(r),tu.delete(r));for(const r of i)Jy.pool.release(r);_w.release(i),_w.release(t),e4.forEach(r=>r())}}function tne(){const e=_w.acquire();e.length=tu.size;let t=0;for(const i of tu)e[t]=i,++t;return tu.clear(),e}const e4=new Set;function ine(e){return e4.add(e),{remove(){e4.delete(e)}}}function rne(e,t,i){let r=TP(e,t,i,(s,l,y)=>{let d,v,_=mO(()=>Ny(s,l),(M,T)=>{s.__accessor__.destroyed||d&&d.uid!==v?r.remove():(d||(d=Jy.acquireUntracked(M,y,T,s,l),v=d.uid),Sw(d))});return{remove:CP(()=>{_.remove(),d&&(d.uid!==v||d.removed||(d.removed=!0,Sw(d)),d=null),r=_=null})}});return r}function nne(e,t,i){const r=TP(e,t,i,(s,l,y)=>{let d=!1;return gO(()=>Ny(s,l),(v,_)=>{s.__accessor__.destroyed?r.remove():d||(d=!0,T9(_,v)||y.call(s,v,_,l,s),d=!1)})});return r}function sne(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?nne(e,t,i):rne(e,t,i)}function one(e,t,i){let r,s,l=mO(e,(y,d)=>{r&&r.uid!==s?l.remove():(r||(r=Jy.acquireTracked(y,t,d,i),s=r.uid),Sw(r))});return{remove:CP(()=>{l.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,Sw(r)),r=null),l=null})}}function ane(e,t,i){let r=!1;return gO(e,(s,l)=>{r||(r=!0,i(l,s)||t(s,l),r=!1)})}function lne(e,t,i=!1,r=Lie){return i?ane(e,t,r):one(e,t,r)}function _O(e){return Kre(tu,t=>t.oldValue===e)}var xO,SO;function une(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const fp=Symbol("Accessor-Handles"),t4=Symbol("Accessor-Initialized");class ot{constructor(...t){if(this[xO]=null,this[SO]=!1,this.constructor===ot)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new kre(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const l=this;class y extends l{constructor(...v){super(...v),this.inherited=null,s&&s.apply(this,v)}}jy(y.prototype);for(const d in t){const v=t[d];y.prototype[d]=typeof v=="function"?function(..._){const M=this.inherited;let T;this.inherited=function(...A){if(l.prototype[d])return l.prototype[d].apply(this,A)};try{T=v.apply(this,_)}catch(A){throw this.inherited=M,A}return this.inherited=M,T}:t[d]}for(const d in i){const v=une(i[d]);x(v)(y.prototype,d)}return Y(r)(y)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[t4]=!0}initialize(){}destroy(){this.destroyed||(this[fp]=oi(this[fp]),Qre(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[t4]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Qb(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return iw(this,t,i),this}watch(t,i,r){return sne(this,t,i,r)}own(t){this.addHandles(t)}addHandles(t,i){let r=this[fp];ae(r)&&(r=this[fp]=new Jr),r.add(t,i)}removeHandles(t){const i=this[fp];ae(i)||i.remove(t)}hasHandles(t){const i=this[fp];return!!q(i)&&i.has(t)}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}xO=fp,SO=t4;class i4{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new i4;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,me(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:nt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===nt.DEFAULTS){const s=this._values.get(t);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(t,new cne(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===nt.DEFAULTS?t:nt.USER}}class cne{constructor(t,i){this.value=t,this.origin=i}}function MO(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),nt.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),nt.DEFAULTS)})}function hne(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&OP(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&OP(s,i))return!0;return!1}function pne(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function dne(e,t,i,r,s){let l=j9(t[i],s);pne(l)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))l=j9(t[y],s),hne(l,i,r)&&(e[y]=!0)}function fne(e,t,i,r){const s=i.metadatas,l=D9(s[t],"any",r),y=l&&l.default;if(y===void 0)return;const d=typeof y=="function"?y.call(e,t,r):y;d!==void 0&&i.set(t,d)}const $O={origin:"service"};function EO(e,t,i=$O){if(!t||typeof t!="object")return;const r=Lr(e),s=r.metadatas,l={};for(const y of Object.getOwnPropertyNames(t))dne(l,s,y,t,i);r.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(l)){const d=j9(s[y],i).read,v=d&&d.source;let _;_=v&&typeof v=="string"?Ny(t,v):t[y],d&&d.reader&&(_=d.reader.call(e,_,t,i)),_!==void 0&&r.set(y,_)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(s))l[y]||fne(e,y,r,i)}r.setDefaultOrigin("user")}function yne(e,t,i,r=$O){var l;const s=De(te({},r),{messages:[]});i(s),(l=s.messages)==null||l.forEach(y=>{y.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(y):e.loadWarnings.push(y)})}function gne(e,t,i,r,s){var y,d;const l={};return(d=(y=t.write)==null?void 0:y.writer)==null||d.call(e,r,l,i,s),l}function IO(e,t,i,r,s,l){if(!r||!r.write)return!1;const y=e.get(i);if(!s&&r.write.overridePolicy){const d=r.write.overridePolicy.call(e,y,i,l);d!==void 0&&(s=d)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((y===null&&!s.allowNull&&!s.writerEnsuresNonNull||y===void 0)&&s.isRequired){const d=new fe("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return d&&l&&l.messages?l.messages.push(d):d&&!l&&Ae.getLogger("esri.core.accessorSupport.write").error(d.name,d.message),!1}return!(y===void 0||y===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===nt.DEFAULTS)&&mne(e,i,l,r,y)||!s.ignoreOrigin&&l&&l.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<xs(l.origin))}function mne(e,t,i,r,s){const l=r.default;if(l===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof l=="function"){if(Array.isArray(s)){const y=l.call(e,t,i);return Mc(y,s)}return!1}return l===s}function vne(e,t,i,r){const s=Lr(e),l=s.metadatas,y=XP(l[t],r);return!!y&&IO(e,s,t,y,i,r)}function TO(e,t,i){var l,y;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Yb(t,e.toJSON(i));const r=Lr(e),s=r.metadatas;for(const d in s){const v=XP(s[d],i);if(!IO(e,r,d,v,void 0,i))continue;const _=e.get(d),M=gne(e,v,v.write&&typeof v.write.target=="string"?v.write.target:d,_,i);Object.keys(M).length>0&&(t=Yb(t,M),((y=(l=i==null?void 0:i.resources)==null?void 0:l.pendingOperations)==null?void 0:y.length)&&Promise.all(i.resources.pendingOperations).then(()=>Yb(t,M)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:d,oldOrigin:Pre(r.store.originOf(d)),newOrigin:i.origin}))}return t}const Zy=e=>{let t=class extends e{constructor(...i){super(...i);const r=Fr(Lr(this)),s=r.store,l=new i4;r.store=l,MO(r,s,l)}read(i,r){EO(this,i,r)}write(i={},r){return TO(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return bne.call(this,i,r)}};return t=m([Y("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function bne(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let Ie=class extends Zy(ot){};Ie=m([Y("esri.core.JSONSupport")],Ie);function Be(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(l,y)=>{const d=l.constructor.prototype;r.forEach(v=>{const _=RP(l,v,s);_.read&&typeof _.read=="object"||(_.read={}),_.read.reader=d[y],i&&(_.read.source=(_.read.source||[]).concat(i))})}}function Ke(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(l,y)=>{const d=l.constructor.prototype;for(const v of r){const _=RP(l,v,s);_.write&&typeof _.write=="object"||(_.write={}),i&&(_.write.target=i),_.write.writer=d[y]}}}var yp;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(yp||(yp={}));let I;const X={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)X[I]=0;for(I=2056;I<=2065;I++)X[I]=0;for(I=2067;I<=2135;I++)X[I]=0;for(I=2137;I<=2154;I++)X[I]=0;for(I=2161;I<=2170;I++)X[I]=0;for(I=2172;I<=2193;I++)X[I]=0;for(I=2195;I<=2198;I++)X[I]=0;for(I=2200;I<=2203;I++)X[I]=0;for(I=2205;I<=2217;I++)X[I]=0;for(I=2222;I<=2224;I++)X[I]=1;for(I=2225;I<=2250;I++)X[I]=2;for(I=2251;I<=2253;I++)X[I]=1;for(I=2257;I<=2264;I++)X[I]=2;for(I=2274;I<=2279;I++)X[I]=2;for(I=2280;I<=2282;I++)X[I]=1;for(I=2283;I<=2289;I++)X[I]=2;for(I=2290;I<=2292;I++)X[I]=0;for(I=2308;I<=2313;I++)X[I]=0;for(I=2315;I<=2491;I++)X[I]=0;for(I=2494;I<=2866;I++)X[I]=0;for(I=2867;I<=2869;I++)X[I]=1;for(I=2870;I<=2888;I++)X[I]=2;for(I=2891;I<=2895;I++)X[I]=2;for(I=2896;I<=2898;I++)X[I]=1;for(I=2902;I<=2908;I++)X[I]=2;for(I=2915;I<=2920;I++)X[I]=2;for(I=2921;I<=2923;I++)X[I]=1;for(I=2924;I<=2930;I++)X[I]=2;for(I=2931;I<=2962;I++)X[I]=0;for(I=2964;I<=2968;I++)X[I]=2;for(I=2969;I<=2973;I++)X[I]=0;for(I=2975;I<=2991;I++)X[I]=0;for(I=2995;I<=3051;I++)X[I]=0;for(I=3054;I<=3079;I++)X[I]=0;for(I=3081;I<=3088;I++)X[I]=0;for(I=3092;I<=3101;I++)X[I]=0;for(I=3106;I<=3138;I++)X[I]=0;for(I=3146;I<=3151;I++)X[I]=0;for(I=3153;I<=3166;I++)X[I]=0;for(I=3168;I<=3172;I++)X[I]=0;for(I=3174;I<=3203;I++)X[I]=0;for(I=3294;I<=3358;I++)X[I]=0;for(I=3367;I<=3403;I++)X[I]=0;for(I=3408;I<=3416;I++)X[I]=0;for(I=3417;I<=3438;I++)X[I]=2;for(I=3441;I<=3446;I++)X[I]=2;for(I=3447;I<=3450;I++)X[I]=0;for(I=3451;I<=3459;I++)X[I]=2;for(I=3460;I<=3478;I++)X[I]=0;for(I=3554;I<=3559;I++)X[I]=0;for(I=3560;I<=3570;I++)X[I]=2;for(I=3571;I<=3581;I++)X[I]=0;for(I=3594;I<=3597;I++)X[I]=0;for(I=3601;I<=3604;I++)X[I]=0;for(I=3637;I<=3639;I++)X[I]=0;for(I=3665;I<=3667;I++)X[I]=0;for(I=3693;I<=3695;I++)X[I]=0;for(I=3701;I<=3727;I++)X[I]=0;for(I=3728;I<=3739;I++)X[I]=2;for(I=3740;I<=3751;I++)X[I]=0;for(I=3753;I<=3760;I++)X[I]=2;for(I=3761;I<=3773;I++)X[I]=0;for(I=3775;I<=3777;I++)X[I]=0;for(I=3779;I<=3781;I++)X[I]=0;for(I=3783;I<=3785;I++)X[I]=0;for(I=3788;I<=3791;I++)X[I]=0;for(I=3797;I<=3802;I++)X[I]=0;for(I=3814;I<=3816;I++)X[I]=0;for(I=3825;I<=3829;I++)X[I]=0;for(I=3832;I<=3841;I++)X[I]=0;for(I=3844;I<=3852;I++)X[I]=0;for(I=3873;I<=3885;I++)X[I]=0;for(I=3890;I<=3893;I++)X[I]=0;for(I=3907;I<=3912;I++)X[I]=0;for(I=3942;I<=3950;I++)X[I]=0;for(I=3968;I<=3970;I++)X[I]=0;for(I=3973;I<=3976;I++)X[I]=0;for(I=3986;I<=3989;I++)X[I]=0;for(I=3994;I<=3997;I++)X[I]=0;for(I=4048;I<=4051;I++)X[I]=0;for(I=4056;I<=4063;I++)X[I]=0;for(I=4093;I<=4096;I++)X[I]=0;for(I=4390;I<=4398;I++)X[I]=0;for(I=4399;I<=4413;I++)X[I]=2;for(I=4418;I<=4433;I++)X[I]=2;for(I=4455;I<=4457;I++)X[I]=2;for(I=4484;I<=4489;I++)X[I]=0;for(I=4491;I<=4554;I++)X[I]=0;for(I=4568;I<=4589;I++)X[I]=0;for(I=4652;I<=4656;I++)X[I]=0;for(I=4766;I<=4800;I++)X[I]=0;for(I=5014;I<=5016;I++)X[I]=0;for(I=5069;I<=5072;I++)X[I]=0;for(I=5105;I<=5130;I++)X[I]=0;for(I=5173;I<=5188;I++)X[I]=0;for(I=5253;I<=5259;I++)X[I]=0;for(I=5269;I<=5275;I++)X[I]=0;for(I=5292;I<=5311;I++)X[I]=0;for(I=5329;I<=5331;I++)X[I]=0;for(I=5343;I<=5349;I++)X[I]=0;for(I=5355;I<=5357;I++)X[I]=0;for(I=5387;I<=5389;I++)X[I]=0;for(I=5459;I<=5463;I++)X[I]=0;for(I=5479;I<=5482;I++)X[I]=0;for(I=5518;I<=5520;I++)X[I]=0;for(I=5530;I<=5539;I++)X[I]=0;for(I=5550;I<=5552;I++)X[I]=0;for(I=5562;I<=5583;I++)X[I]=0;for(I=5623;I<=5625;I++)X[I]=2;for(I=5631;I<=5639;I++)X[I]=0;for(I=5649;I<=5653;I++)X[I]=0;for(I=5663;I<=5680;I++)X[I]=0;for(I=5682;I<=5685;I++)X[I]=0;for(I=5875;I<=5877;I++)X[I]=0;for(I=5896;I<=5899;I++)X[I]=0;for(I=5921;I<=5940;I++)X[I]=0;for(I=6050;I<=6125;I++)X[I]=0;for(I=6244;I<=6275;I++)X[I]=0;for(I=6328;I<=6348;I++)X[I]=0;for(I=6350;I<=6356;I++)X[I]=0;for(I=6366;I<=6372;I++)X[I]=0;for(I=6381;I<=6387;I++)X[I]=0;for(I=6393;I<=6404;I++)X[I]=0;for(I=6480;I<=6483;I++)X[I]=0;for(I=6511;I<=6514;I++)X[I]=0;for(I=6579;I<=6581;I++)X[I]=0;for(I=6619;I<=6624;I++)X[I]=0;for(I=6625;I<=6627;I++)X[I]=2;for(I=6628;I<=6632;I++)X[I]=0;for(I=6634;I<=6637;I++)X[I]=0;for(I=6669;I<=6692;I++)X[I]=0;for(I=6707;I<=6709;I++)X[I]=0;for(I=6720;I<=6723;I++)X[I]=0;for(I=6732;I<=6738;I++)X[I]=0;for(I=6931;I<=6933;I++)X[I]=0;for(I=6956;I<=6959;I++)X[I]=0;for(I=7005;I<=7007;I++)X[I]=0;for(I=7057;I<=7070;I++)X[I]=2;for(I=7074;I<=7082;I++)X[I]=0;for(I=7109;I<=7118;I++)X[I]=0;for(I=7119;I<=7127;I++)X[I]=1;for(I=7374;I<=7376;I++)X[I]=0;for(I=7528;I<=7586;I++)X[I]=0;for(I=7587;I<=7645;I++)X[I]=2;for(I=7692;I<=7696;I++)X[I]=0;for(I=7755;I<=7787;I++)X[I]=0;for(I=7791;I<=7795;I++)X[I]=0;for(I=7799;I<=7801;I++)X[I]=0;for(I=7803;I<=7805;I++)X[I]=0;for(I=7825;I<=7831;I++)X[I]=0;for(I=7845;I<=7859;I++)X[I]=0;for(I=8013;I<=8032;I++)X[I]=0;for(I=8065;I<=8068;I++)X[I]=1;for(I=8518;I<=8529;I++)X[I]=2;for(I=8533;I<=8536;I++)X[I]=2;for(I=8538;I<=8540;I++)X[I]=2;for(I=8677;I<=8679;I++)X[I]=0;for(I=8836;I<=8840;I++)X[I]=0;for(I=8857;I<=8859;I++)X[I]=0;for(I=8908;I<=8910;I++)X[I]=0;for(I=9154;I<=9159;I++)X[I]=0;for(I=9205;I<=9218;I++)X[I]=0;for(I=9271;I<=9273;I++)X[I]=0;for(I=9295;I<=9297;I++)X[I]=0;for(I=9356;I<=9360;I++)X[I]=0;for(I=9404;I<=9407;I++)X[I]=0;for(I=9476;I<=9482;I++)X[I]=0;for(I=9487;I<=9494;I++)X[I]=0;for(I=9697;I<=9699;I++)X[I]=0;for(I=20002;I<=20032;I++)X[I]=0;for(I=20062;I<=20092;I++)X[I]=0;for(I=20135;I<=20138;I++)X[I]=0;for(I=20248;I<=20258;I++)X[I]=0;for(I=20348;I<=20358;I++)X[I]=0;for(I=20436;I<=20440;I++)X[I]=0;for(I=20822;I<=20824;I++)X[I]=0;for(I=20904;I<=20932;I++)X[I]=0;for(I=20934;I<=20936;I++)X[I]=0;for(I=21004;I<=21032;I++)X[I]=0;for(I=21035;I<=21037;I++)X[I]=0;for(I=21095;I<=21097;I++)X[I]=0;for(I=21148;I<=21150;I++)X[I]=0;for(I=21207;I<=21264;I++)X[I]=0;for(I=21307;I<=21364;I++)X[I]=0;for(I=21413;I<=21423;I++)X[I]=0;for(I=21453;I<=21463;I++)X[I]=0;for(I=21473;I<=21483;I++)X[I]=0;for(I=21780;I<=21782;I++)X[I]=0;for(I=21891;I<=21894;I++)X[I]=0;for(I=21896;I<=21899;I++)X[I]=0;for(I=22171;I<=22177;I++)X[I]=0;for(I=22181;I<=22187;I++)X[I]=0;for(I=22191;I<=22197;I++)X[I]=0;for(I=22234;I<=22236;I++)X[I]=0;for(I=22521;I<=22525;I++)X[I]=0;for(I=22991;I<=22994;I++)X[I]=0;for(I=23028;I<=23038;I++)X[I]=0;for(I=23830;I<=23853;I++)X[I]=0;for(I=23866;I<=23872;I++)X[I]=0;for(I=23877;I<=23884;I++)X[I]=0;for(I=23886;I<=23894;I++)X[I]=0;for(I=23946;I<=23948;I++)X[I]=0;for(I=24311;I<=24313;I++)X[I]=0;for(I=24342;I<=24347;I++)X[I]=0;for(I=24370;I<=24374;I++)X[I]=10;for(I=24375;I<=24381;I++)X[I]=0;for(I=24718;I<=24721;I++)X[I]=0;for(I=24817;I<=24821;I++)X[I]=0;for(I=24877;I<=24882;I++)X[I]=0;for(I=24891;I<=24893;I++)X[I]=0;for(I=25391;I<=25395;I++)X[I]=0;for(I=25828;I<=25838;I++)X[I]=0;for(I=26191;I<=26195;I++)X[I]=0;for(I=26391;I<=26393;I++)X[I]=0;for(I=26701;I<=26722;I++)X[I]=0;for(I=26729;I<=26799;I++)X[I]=2;for(I=26801;I<=26803;I++)X[I]=2;for(I=26811;I<=26813;I++)X[I]=2;for(I=26847;I<=26870;I++)X[I]=2;for(I=26891;I<=26899;I++)X[I]=0;for(I=26901;I<=26923;I++)X[I]=0;for(I=26929;I<=26946;I++)X[I]=0;for(I=26948;I<=26998;I++)X[I]=0;for(I=27037;I<=27040;I++)X[I]=0;for(I=27205;I<=27232;I++)X[I]=0;for(I=27258;I<=27260;I++)X[I]=0;for(I=27391;I<=27398;I++)X[I]=0;for(I=27561;I<=27564;I++)X[I]=0;for(I=27571;I<=27574;I++)X[I]=0;for(I=27581;I<=27584;I++)X[I]=0;for(I=27591;I<=27594;I++)X[I]=0;for(I=28191;I<=28193;I++)X[I]=0;for(I=28348;I<=28358;I++)X[I]=0;for(I=28402;I<=28432;I++)X[I]=0;for(I=28462;I<=28492;I++)X[I]=0;for(I=29118;I<=29122;I++)X[I]=0;for(I=29168;I<=29172;I++)X[I]=0;for(I=29177;I<=29185;I++)X[I]=0;for(I=29187;I<=29195;I++)X[I]=0;for(I=29900;I<=29903;I++)X[I]=0;for(I=30161;I<=30179;I++)X[I]=0;for(I=30491;I<=30494;I++)X[I]=0;for(I=30729;I<=30732;I++)X[I]=0;for(I=31251;I<=31259;I++)X[I]=0;for(I=31265;I<=31268;I++)X[I]=0;for(I=31275;I<=31279;I++)X[I]=0;for(I=31281;I<=31297;I++)X[I]=0;for(I=31461;I<=31469;I++)X[I]=0;for(I=31491;I<=31495;I++)X[I]=0;for(I=31917;I<=31922;I++)X[I]=0;for(I=31965;I<=32e3;I++)X[I]=0;for(I=32001;I<=32003;I++)X[I]=2;for(I=32005;I<=32031;I++)X[I]=2;for(I=32033;I<=32060;I++)X[I]=2;for(I=32064;I<=32067;I++)X[I]=2;for(I=32074;I<=32077;I++)X[I]=2;for(I=32081;I<=32086;I++)X[I]=0;for(I=32107;I<=32130;I++)X[I]=0;for(I=32133;I<=32158;I++)X[I]=0;for(I=32164;I<=32167;I++)X[I]=2;for(I=32180;I<=32199;I++)X[I]=0;for(I=32201;I<=32260;I++)X[I]=0;for(I=32301;I<=32360;I++)X[I]=0;for(I=32601;I<=32662;I++)X[I]=0;for(I=32664;I<=32667;I++)X[I]=2;for(I=32701;I<=32761;I++)X[I]=0;for(I=53001;I<=53004;I++)X[I]=0;for(I=53008;I<=53019;I++)X[I]=0;for(I=53021;I<=53032;I++)X[I]=0;for(I=53034;I<=53037;I++)X[I]=0;for(I=53042;I<=53046;I++)X[I]=0;for(I=53074;I<=53080;I++)X[I]=0;for(I=54001;I<=54004;I++)X[I]=0;for(I=54008;I<=54019;I++)X[I]=0;for(I=54021;I<=54032;I++)X[I]=0;for(I=54034;I<=54037;I++)X[I]=0;for(I=54042;I<=54046;I++)X[I]=0;for(I=54048;I<=54053;I++)X[I]=0;for(I=54074;I<=54080;I++)X[I]=0;for(I=54098;I<=54101;I++)X[I]=0;for(I=102001;I<=102040;I++)X[I]=0;for(I=102042;I<=102063;I++)X[I]=0;for(I=102065;I<=102067;I++)X[I]=0;for(I=102070;I<=102117;I++)X[I]=0;for(I=102122;I<=102216;I++)X[I]=0;for(I=102221;I<=102377;I++)X[I]=0;for(I=102382;I<=102388;I++)X[I]=0;for(I=102389;I<=102398;I++)X[I]=2;for(I=102399;I<=102444;I++)X[I]=0;for(I=102445;I<=102447;I++)X[I]=2;for(I=102448;I<=102458;I++)X[I]=0;for(I=102459;I<=102468;I++)X[I]=2;for(I=102469;I<=102499;I++)X[I]=0;for(I=102500;I<=102519;I++)X[I]=1;for(I=102520;I<=102524;I++)X[I]=0;for(I=102525;I<=102529;I++)X[I]=2;for(I=102530;I<=102588;I++)X[I]=0;for(I=102590;I<=102598;I++)X[I]=0;for(I=102601;I<=102603;I++)X[I]=0;for(I=102605;I<=102628;I++)X[I]=0;for(I=102629;I<=102646;I++)X[I]=2;for(I=102648;I<=102700;I++)X[I]=2;for(I=102701;I<=102703;I++)X[I]=0;for(I=102707;I<=102730;I++)X[I]=2;for(I=102733;I<=102758;I++)X[I]=2;for(I=102767;I<=102900;I++)X[I]=0;for(I=102901;I<=102933;I++)X[I]=2;for(I=102934;I<=102950;I++)X[I]=13;for(I=102951;I<=102955;I++)X[I]=0;for(I=102961;I<=102963;I++)X[I]=0;for(I=102965;I<=102969;I++)X[I]=0;for(I=102971;I<=102973;I++)X[I]=0;for(I=102975;I<=102989;I++)X[I]=0;for(I=102990;I<=102992;I++)X[I]=1;for(I=102997;I<=103002;I++)X[I]=0;for(I=103003;I<=103008;I++)X[I]=2;for(I=103009;I<=103011;I++)X[I]=0;for(I=103012;I<=103014;I++)X[I]=2;for(I=103019;I<=103021;I++)X[I]=0;for(I=103022;I<=103024;I++)X[I]=2;for(I=103029;I<=103031;I++)X[I]=0;for(I=103032;I<=103034;I++)X[I]=2;for(I=103065;I<=103068;I++)X[I]=0;for(I=103074;I<=103076;I++)X[I]=0;for(I=103077;I<=103079;I++)X[I]=1;for(I=103080;I<=103082;I++)X[I]=0;for(I=103083;I<=103085;I++)X[I]=2;for(I=103090;I<=103093;I++)X[I]=0;for(I=103097;I<=103099;I++)X[I]=0;for(I=103100;I<=103102;I++)X[I]=2;for(I=103107;I<=103109;I++)X[I]=0;for(I=103110;I<=103112;I++)X[I]=2;for(I=103113;I<=103116;I++)X[I]=0;for(I=103117;I<=103120;I++)X[I]=2;for(I=103153;I<=103157;I++)X[I]=0;for(I=103158;I<=103162;I++)X[I]=2;for(I=103163;I<=103165;I++)X[I]=0;for(I=103166;I<=103168;I++)X[I]=1;for(I=103169;I<=103171;I++)X[I]=2;for(I=103186;I<=103188;I++)X[I]=0;for(I=103189;I<=103191;I++)X[I]=2;for(I=103192;I<=103195;I++)X[I]=0;for(I=103196;I<=103199;I++)X[I]=2;for(I=103200;I<=103224;I++)X[I]=0;for(I=103225;I<=103227;I++)X[I]=1;for(I=103232;I<=103237;I++)X[I]=0;for(I=103238;I<=103243;I++)X[I]=2;for(I=103244;I<=103246;I++)X[I]=0;for(I=103247;I<=103249;I++)X[I]=2;for(I=103254;I<=103256;I++)X[I]=0;for(I=103257;I<=103259;I++)X[I]=2;for(I=103264;I<=103266;I++)X[I]=0;for(I=103267;I<=103269;I++)X[I]=2;for(I=103300;I<=103375;I++)X[I]=0;for(I=103381;I<=103383;I++)X[I]=0;for(I=103384;I<=103386;I++)X[I]=1;for(I=103387;I<=103389;I++)X[I]=0;for(I=103390;I<=103392;I++)X[I]=2;for(I=103397;I<=103399;I++)X[I]=0;for(I=103400;I<=103471;I++)X[I]=2;for(I=103476;I<=103478;I++)X[I]=0;for(I=103479;I<=103481;I++)X[I]=2;for(I=103486;I<=103488;I++)X[I]=0;for(I=103489;I<=103491;I++)X[I]=2;for(I=103492;I<=103495;I++)X[I]=0;for(I=103496;I<=103499;I++)X[I]=2;for(I=103528;I<=103543;I++)X[I]=0;for(I=103544;I<=103548;I++)X[I]=2;for(I=103549;I<=103551;I++)X[I]=0;for(I=103552;I<=103554;I++)X[I]=1;for(I=103555;I<=103557;I++)X[I]=2;for(I=103558;I<=103560;I++)X[I]=0;for(I=103571;I<=103573;I++)X[I]=0;for(I=103574;I<=103576;I++)X[I]=2;for(I=103577;I<=103580;I++)X[I]=0;for(I=103581;I<=103583;I++)X[I]=2;for(I=103595;I<=103694;I++)X[I]=0;for(I=103696;I<=103699;I++)X[I]=0;for(I=103700;I<=103793;I++)X[I]=2;for(I=103794;I<=103887;I++)X[I]=0;for(I=103900;I<=103971;I++)X[I]=2;const wne={102113:!0,102100:!0,3857:!0,3785:!0},_ne={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},CO='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Mw=[-20037508342788905e-9,20037508342788905e-9],$w=[-20037508342787e-6,20037508342787e-6],AO={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Mw,origin:$w,dx:1e-5},102100:{wkTemplate:CO,valid:Mw,origin:$w,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Mw,origin:$w,dx:1e-5},3857:{wkTemplate:CO,valid:Mw,origin:$w,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Xi(e,t){return e===t||!ae(e)&&!ae(t)&&(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Ka(e)&&Ka(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase())}function Ks(e){return Cr(e)&&e.wkid&&AO[e.wkid]||null}function Ew(e){return!!Cr(e)&&(e.wkid?X[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function xne(e){return!(Iw(e)||Tw(e))}function Ky(e){return Cr(e)&&e.wkid===4326}function Y7e(e){return Cr(e)&&e.wkid===yp.CGCS2000}function Ka(e){return Cr(e)&&e.wkid!=null&&wne[e.wkid]===!0}function Sne(e){return Cr(e)&&e.wkid===32662}function r4(e){return e===yp.GCSMARS2000||e===yp.GCSMARS2000_SPHERE}function Iw(e){return Cr(e)&&e.wkid!=null&&r4(e.wkid)}function n4(e){return e===yp.GCSMOON2000}function Tw(e){return Cr(e)&&e.wkid!=null&&n4(e.wkid)}function Mne(e){return Cr(e)&&e.wkid!=null&&_ne[e.wkid]===!0}function Cr(e){return q(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const s4={wkid:4326,wkt:Ja(AO[4326].wkTemplate,{Central_Meridian:"0.0"})},$ne={wkid:102100,latestWkid:3857},Ene={wkid:32662};var Ya;let Pi=Ya=class extends Ie{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Ya.WebMercator;if(e.wkid===4326)return Ya.WGS84}const t=new Ya;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Ky(this)}get isWebMercator(){return Ka(this)}get isGeographic(){return Ew(this)}get isWrappable(){return Mne(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Ya.WGS84)return Ya.WGS84;if(this===Ya.WebMercator)return Ya.WebMercator;const e=new Ya;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=me(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return Xi(this,e)}toJSON(e){return this.write(void 0,e)}};Pi.GCS_NAD_1927=null,Pi.WGS84=null,Pi.WebMercator=null,Pi.PlateCarree=null,m([x({readOnly:!0})],Pi.prototype,"isWGS84",null),m([x({readOnly:!0})],Pi.prototype,"isWebMercator",null),m([x({readOnly:!0})],Pi.prototype,"isGeographic",null),m([x({readOnly:!0})],Pi.prototype,"isWrappable",null),m([x({type:hi,json:{write:!0}})],Pi.prototype,"latestWkid",void 0),m([x({type:hi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Pi.prototype,"wkid",void 0),m([x({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Pi.prototype,"wkt",void 0),m([Ke("wkt"),Ke("web-scene","wkt")],Pi.prototype,"writeWkt",null),m([x({type:hi,json:{write:!0}})],Pi.prototype,"vcsWkid",void 0),m([x({type:hi,json:{write:!0}})],Pi.prototype,"latestVcsWkid",void 0),m([x()],Pi.prototype,"imageCoordinateSystem",void 0),Pi=Ya=m([Y("esri.geometry.SpatialReference")],Pi),Pi.prototype.toJSON.isDefaultToJSON=!0,Pi.GCS_NAD_1927=new Pi({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Pi.WGS84=new Pi(s4),Pi.WebMercator=new Pi($ne),Pi.PlateCarree=new Pi(Ene),Object.freeze&&(Object.freeze(Pi.GCS_NAD_1927),Object.freeze(Pi.WGS84),Object.freeze(Pi.WebMercator));const At=Pi;let Xa=class extends Ie{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=At.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof At)return e;if(e!=null){const i=new At;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};m([x()],Xa.prototype,"type",void 0),m([x({readOnly:!0})],Xa.prototype,"cache",null),m([x({readOnly:!0})],Xa.prototype,"extent",null),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xa.prototype,"hasM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xa.prototype,"hasZ",void 0),m([x({type:At,json:{write:!0}})],Xa.prototype,"spatialReference",void 0),m([Be("spatialReference")],Xa.prototype,"readSpatialReference",null),Xa=m([Y("esri.geometry.Geometry")],Xa);const Ec=Xa,Ine=Object.prototype.toString;function Tne(e){const t="__accessorMetadata__"in e?Ai(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Cne.apply(this,i)}}function Cne(e,t,i,r){ew(e,t).cast=r}function Ane(e){return(t,i)=>{ew(t,e).cast=t[i]}}function ri(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Ine.call(e[0])==="[object Function]"?Tne(e[0]):e.length===1&&typeof e[0]=="string"?Ane(e[0]):void 0}function Pne(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}class o4{constructor(t,i,r,s){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Bi=new o4(6378137,1/298.257223563,3e5,.006694379990137799),iu=new o4(3396190,1/169.8944472236118,23e4),Ic=new o4(1737400,0,0),One=57.29577951308232,kne=.017453292519943;function PO(e){return e*One}function OO(e){return e*kne}function X7e(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Bi.radius))}function a4(e){return e.wkid!=null||e.wkt!=null}const l4=[0,0];function Cw(e,t,i,r,s){const l=e,y=s;if(y.spatialReference=i,"x"in l&&"x"in y)[y.x,y.y]=t(l.x,l.y,l4,r);else if("xmin"in l&&"xmin"in y)[y.xmin,y.ymin]=t(l.xmin,l.ymin,l4,r),[y.xmax,y.ymax]=t(l.xmax,l.ymax,l4,r);else if("paths"in l&&"paths"in y||"rings"in l&&"rings"in y){const d="paths"in l?l.paths:l.rings,v=[];let _;for(let M=0;M<d.length;M++){const T=d[M];_=[],v.push(_);for(let A=0;A<T.length;A++)_.push(t(T[A][0],T[A][1],[0,0],r)),T[A].length>2&&_[A].push(T[A][2]),T[A].length>3&&_[A].push(T[A][3])}"paths"in y?y.paths=v:y.rings=v}else if("points"in l&&"points"in y){const d=l.points,v=[];for(let _=0;_<d.length;_++)v[_]=t(d[_][0],d[_][1],[0,0],r),d[_].length>2&&v[_].push(d[_][2]),d[_].length>3&&v[_].push(d[_][3]);y.points=v}return s}function Vf(e,t){const i=e&&(a4(e)?e:e.spatialReference),r=t&&(a4(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Xi(r,i)||Ka(r)&&Ky(i)||Ka(i)&&Ky(r))}function Aw(e,t){if(ae(e))return null;const i=e.spatialReference,r=t&&(a4(t)?t:t.spatialReference);return Vf(i,r)?Xi(i,r)?me(e):Ka(r)?Cw(e,gp,At.WebMercator,!1,me(e)):Ky(r)?Cw(e,zf,At.WGS84,!1,me(e)):null:null}function gp(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=OO(t);return i[0]=OO(e)*Bi.radius,i[1]=Bi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function zf(e,t,i=[0,0],r=!1){const s=PO(e/Bi.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=PO(Math.PI/2-2*Math.atan(Math.exp(-t/Bi.radius))),i}function ru(e,t=!1,i=me(e)){return Cw(e,gp,At.WebMercator,t,i)}function Gf(e,t=!1,i=me(e)){return Cw(e,zf,At.WGS84,t,i)}var Pw;const Yy=[0,0];function kO(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let ss=Pw=class extends Ec{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,s){let l;if(Array.isArray(e))l=e,s=t,e=l[0],t=l[1],i=l[2],r=l[3];else if(e&&typeof e=="object"){if(l=e,e=l.x!=null?l.x:l.longitude,t=l.y!=null?l.y:l.latitude,i=l.z,r=l.m,(s=l.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new At(s)),l.longitude!=null||l.latitude!=null){if(l.longitude==null)Ae.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(l.latitude==null)Ae.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!l.declaredClass&&s&&s.isWebMercator){const d=gp(l.longitude,l.latitude,Yy);e=d[0],t=d[1]}}}else kO(i)?(s=i,i=null):kO(r)&&(s=r,r=null);const y={x:e,y:t};return y.x==null&&y.y!=null?Ae.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&Ae.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(y.spatialReference=s),i!=null&&(y.z=i),r!=null&&(y.m=r),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return zf(t,i,Yy)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",gp(i,e,Yy)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return zf(e,t,Yy)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",gp(e,t,Yy)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Pw;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Pw.copy(e,this),this}equals(e){if(ae(e))return!1;const{x:t,y:i,z:r,m:s,spatialReference:l}=this,{z:y,m:d}=e;let{x:v,y:_,spatialReference:M}=e;if(!l.equals(M))if(l.isWebMercator&&M.isWGS84)[v,_]=gp(v,_),M=l;else{if(!l.isWGS84||!M.isWebMercator)return!1;[v,_]=zf(v,_),M=l}return t===v&&i===_&&r===y&&s===d&&l.wkid===M.wkid}offset(e,t,i){var r;return this.x+=e,this.y+=t,i!=null&&(this.z=((r=this.z)!=null?r:0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Ks(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let l;return t>r?(l=Math.ceil(Math.abs(t-r)/s),t-=l*s):t<i&&(l=Math.ceil(Math.abs(t-i)/s),t+=l*s),this._set("x",t),this}distance(e){return Pne(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};m([x({readOnly:!0})],ss.prototype,"cache",null),m([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ss.prototype,"hasM",null),m([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ss.prototype,"hasZ",null),m([x({type:Number})],ss.prototype,"latitude",null),m([x({type:Number})],ss.prototype,"longitude",null),m([x({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ri(e=>isNaN(e)?e:$o(e))],ss.prototype,"x",void 0),m([Ke("x")],ss.prototype,"writeX",null),m([Be("x")],ss.prototype,"readX",null),m([x({type:Number,json:{write:!0}})],ss.prototype,"y",void 0),m([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ss.prototype,"z",void 0),m([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ss.prototype,"m",void 0),ss=Pw=m([Y("esri.geometry.Point")],ss),ss.prototype.toJSON.isDefaultToJSON=!0;const dt=ss,u4=[0,0];function Ow(e,t){return!!q(t)&&os(e,t.x,t.y,t.z)}function Q7e(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!qf(e,i))return!1;return!0}function Rne(e,t){const{xmin:i,ymin:r,zmin:s,xmax:l,ymax:y,zmax:d}=t;return e.hasZ&&t.hasZ?os(e,i,r,s)&&os(e,i,y,s)&&os(e,l,y,s)&&os(e,l,r,s)&&os(e,i,r,d)&&os(e,i,y,d)&&os(e,l,y,d)&&os(e,l,r,d):os(e,i,r)&&os(e,i,y)&&os(e,l,y)&&os(e,l,r)}function qf(e,t){return os(e,t[0],t[1])}function Fne(e,t){return os(e,t[0],t[1],t[2])}function os(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function RO(e,t){return u4[1]=t.y,u4[0]=t.x,Lne(e,u4)}function Lne(e,t){return FO(e.rings,t)}function FO(e,t){if(!e)return!1;if(Nne(e))return LO(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=LO(i,e[r],t);return i}function Nne(e){return!Array.isArray(e[0][0])}function LO(e,t,i){const[r,s]=i;let l=e,y=0;for(let d=0,v=t.length;d<v;d++){y++,y===v&&(y=0);const[_,M]=t[d],[T,A]=t[y];(M<s&&A>=s||A<s&&M>=s)&&_+(s-M)/(A-M)*(T-_)<r&&(l=!l)}return l}function jne(e,t){return Ow(e,t)}function Dne(e,t){const i=e.hasZ&&t.hasZ;let r,s,l;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(l=t.zmin,e.zmax<l)return!1}else if(l=e.zmin,t.zmax<l)return!1}return!0}function Vne(e,t){const{points:i,hasZ:r}=t,s=r?Fne:qf;for(const l of i)if(s(e,l))return!0;return!1}const mp=[0,0],vp=[0,0],bp=[0,0],wp=[0,0],zne=[mp,vp,bp,wp],NO=[[bp,mp],[mp,vp],[vp,wp],[wp,bp]];function Gne(e,t){return qne(e,t.rings)}function qne(e,t){mp[0]=e.xmin,mp[1]=e.ymax,vp[0]=e.xmax,vp[1]=e.ymax,bp[0]=e.xmin,bp[1]=e.ymin,wp[0]=e.xmax,wp[1]=e.ymin;for(const i of zne)if(FO(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(qf(e,r))return!0;for(let s=1;s<i.length;s++){const l=i[s];if(qf(e,l)||jO(r,l,NO))return!0;r=l}}return!1}function Une(e,t){mp[0]=e.xmin,mp[1]=e.ymax,vp[0]=e.xmax,vp[1]=e.ymax,bp[0]=e.xmin,bp[1]=e.ymin,wp[0]=e.xmax,wp[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(qf(e,s))return!0;for(let l=1;l<r.length;l++){const y=r[l];if(qf(e,y)||jO(s,y,NO))return!0;s=y}}return!1}const pn=[0,0];function Bne(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const l=i[s],y=i[s+1];for(let d=t+1;d<e.length;d++)for(let v=0;v<e[d].length-1;v++){const _=e[d][v],M=e[d][v+1];if(c4(l,y,_,M,pn)&&!(pn[0]===l[0]&&pn[1]===l[1]||pn[0]===_[0]&&pn[1]===_[1]||pn[0]===y[0]&&pn[1]===y[1]||pn[0]===M[0]&&pn[1]===M[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let l=r-1;s===0&&(l=r-2);const y=i[s],d=i[s+1];for(let v=s+2;v<l;v++){const _=i[v],M=i[v+1];if(c4(y,d,_,M,pn)&&!(pn[0]===y[0]&&pn[1]===y[1]||pn[0]===_[0]&&pn[1]===_[1]||pn[0]===d[0]&&pn[1]===d[1]||pn[0]===M[0]&&pn[1]===M[1]))return!0}}}return!1}function jO(e,t,i){for(let r=0;r<i.length;r++)if(c4(e,t,i[r][0],i[r][1]))return!0;return!1}function c4(e,t,i,r,s){const[l,y]=e,[d,v]=t,[_,M]=i,[T,A]=r,R=T-_,F=l-_,V=d-l,z=A-M,W=y-M,Z=v-y,Q=z*V-R*Z;if(Q===0)return!1;const ee=(R*W-z*F)/Q,re=(V*W-Z*F)/Q;return ee>=0&&ee<=1&&re>=0&&re<=1&&(s&&(s[0]=l+ee*(d-l),s[1]=y+ee*(v-y)),!0)}function Hne(e){switch(e){case"esriGeometryEnvelope":case"extent":return Dne;case"esriGeometryMultipoint":case"multipoint":return Vne;case"esriGeometryPoint":case"point":return jne;case"esriGeometryPolygon":case"polygon":return Gne;case"esriGeometryPolyline":case"polyline":return Une}}var To;function Wne(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Tc(e,t,i){return t==null?i:i==null?t:e(t,i)}let Zr=To=class extends Ec{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return Wne(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?At.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s!=null?s:At.WGS84}}static fromBounds(e,t){return new To({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new To({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new dt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new To;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Vf(t,i)&&(e=t.isWebMercator?ru(e):Gf(e,!0)),e.type==="point"?Ow(this,e):e.type==="extent"&&Rne(this,e)}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Vf(t,i)&&(e=t.isWebMercator?ru(e):Gf(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(ae(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!Xi(t,i)&&Vf(t,i)&&(e=t.isWebMercator?ru(e):Gf(e,!0)),Hne(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Tc(Math.min,this.zmin,e.zmin),this.zmax=Tc(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Tc(Math.min,this.mmin,e.mmin),this.mmax=Tc(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ae(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Tc(Math.max,this.zmin,e.zmin),this.zmax=Tc(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Tc(Math.max,this.mmin,e.mmin),this.mmax=Tc(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Ks(this.spatialReference)){var r;if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?Gf(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new At(Ja((r=t.isWGS84?e.altTemplate:null)!=null?r:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,l=this.xmax;return s>=i&&s<=r&&l>=i&&l<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const s=i!=null?i:Ks(r);if(s==null)return this;const l=this._getParts(s).map(v=>v.extent);if(l.length<2)return l[0]||this;if(l.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return l;let y=!0,d=!0;return l.forEach(v=>{v.hasZ||(y=!1),v.hasM||(d=!1)}),{rings:l.map(v=>{const _=[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]];if(y){const M=(v.zmax-v.zmin)/2;for(let T=0;T<_.length;T++)_[T].push(M)}if(d){const M=(v.mmax-v.mmin)/2;for(let T=0;T<_.length;T++)_[T].push(M)}return _}),hasZ:y,hasM:d,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:l,spatialReference:y}=this,d=this.width,v=this.xmin,_=this.xmax;let M;e=e||Ks(y);const[T,A]=e.valid;M=this._normalizeX(this.xmin,e);const R=M.x,F=M.frameId;M=this._normalizeX(this.xmax,e);const V=M.x,z=M.frameId,W=R===V&&d>0;if(d>2*A){const Z=new To(v<_?R:V,s,A,l,y),Q=new To(T,s,v<_?V:R,l,y),ee=new To(0,s,A,l,y),re=new To(T,s,0,l,y),ie=[],he=[];Z.contains(ee)&&ie.push(F),Z.contains(re)&&he.push(F),Q.contains(ee)&&ie.push(z),Q.contains(re)&&he.push(z);for(let be=F+1;be<z;be++)ie.push(be),he.push(be);t.push({extent:Z,frameIds:[F]},{extent:Q,frameIds:[z]},{extent:ee,frameIds:ie},{extent:re,frameIds:he})}else R>V||W?t.push({extent:new To(R,s,A,l,y),frameIds:[F]},{extent:new To(T,s,V,l,y),frameIds:[z]}):t.push({extent:new To(R,s,V,l,y),frameIds:[F]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let l=0;l<t.length;l++)t[l].extent.set(s)}return t}_normalizeX(e,t){const[i,r]=t.valid,s=2*r;let l,y=0;return e>r?(l=Math.ceil(Math.abs(e-r)/s),e-=l*s,y=l):e<i&&(l=Math.ceil(Math.abs(e-i)/s),e+=l*s,y=-l),{x:e,frameId:y}}};m([x({readOnly:!0})],Zr.prototype,"cache",null),m([x({readOnly:!0})],Zr.prototype,"center",null),m([x({readOnly:!0})],Zr.prototype,"extent",null),m([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zr.prototype,"hasM",null),m([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Zr.prototype,"hasZ",null),m([x({readOnly:!0})],Zr.prototype,"height",null),m([x({readOnly:!0})],Zr.prototype,"width",null),m([x({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Zr.prototype,"xmin",void 0),m([x({type:Number,json:{write:!0}})],Zr.prototype,"ymin",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zr.prototype,"mmin",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zr.prototype,"zmin",void 0),m([x({type:Number,json:{write:!0}})],Zr.prototype,"xmax",void 0),m([x({type:Number,json:{write:!0}})],Zr.prototype,"ymax",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Zr.prototype,"mmax",void 0),m([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Zr.prototype,"zmax",void 0),Zr=To=m([Y("esri.geometry.Extent")],Zr),Zr.prototype.toJSON.isDefaultToJSON=!0;const ai=Zr;function Uf(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var h4;function DO(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function Jne(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Cc=h4=class extends Ec{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):Jne(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new ai,i=this.hasZ,r=this.hasM,s=i?3:2,l=e[0],y=DO(Math.min),d=DO(Math.max);let v,_,M,T,[A,R]=l,[F,V]=l;for(let z=0,W=e.length;z<W;z++){const Z=e[z],[Q,ee]=Z;if(A=y(A,Q),R=y(R,ee),F=d(F,Q),V=d(V,ee),i&&Z.length>2){const re=Z[2];v=y(v,re),M=d(M,re)}if(r&&Z.length>s){const re=Z[s];_=y(_,re),T=d(T,re)}}return t.xmin=A,t.ymin=R,t.xmax=F,t.ymax=V,t.spatialReference=this.spatialReference,i?(t.zmin=v,t.zmax=M):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=_,t.mmax=T):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=me(this.points)}addPoint(e){return Uf(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:me(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new h4(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new dt(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new dt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Uf(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};m([x({readOnly:!0})],Cc.prototype,"cache",null),m([x()],Cc.prototype,"extent",null),m([x({type:[[Number]],json:{write:{isRequired:!0}}})],Cc.prototype,"points",void 0),m([Ke("points")],Cc.prototype,"writePoints",null),Cc=h4=m([Y("esri.geometry.Multipoint")],Cc),Cc.prototype.toJSON.isDefaultToJSON=!0;const Xy=Cc;function Bf(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice(0);if(e.type==="polyline")return e.paths.slice(0);if(e.type==="multipoint")return e.points.slice(0);if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,l=!1;return r.forEach(y=>{y.hasZ&&(s=!0),y.hasM&&(l=!0)}),r.map(y=>{const d=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const v=.5*(y.zmax-y.zmin);for(let _=0;_<d.length;_++)d[_].push(v)}if(l&&y.hasM){const v=.5*(y.mmax-y.mmin);for(let _=0;_<d.length;_++)d[_].push(v)}return d})}return null}function p4(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function VO(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function Zne(e,t,i,r){const[s,l]=t,[y,d]=i[r],[v,_]=i[r+1],M=v-y,T=_-d,A=M*M+T*T,R=(s-y)*M+(l-d)*T,F=Math.min(1,Math.max(0,R/A));return e[0]=y+M*F,e[1]=d+T*F,e}function e8e(e,t,i){const r=i.rings;let s,l,y=!1,d=1/0;for(let v=0;v<r.length;v++){const _=r[v];for(let M=0,T=_.length-1;M<_.length;T=M++)s=_[M],l=_[T],s[1]>t!=l[1]>t&&e<(l[0]-s[0])*(t-s[1])/(l[1]-s[1])+s[0]&&(y=!y),d=Math.min(d,Kne(e,t,s,l))}return d===0?0:(y?1:-1)*Math.sqrt(d)}function Kne(e,t,i,r){let s=i[0],l=i[1],y=r[0]-s,d=r[1]-l;if(y!==0||d!==0){const v=((e-s)*y+(t-l)*d)/(y*y+d*d);v>1?(s=r[0],l=r[1]):v>0&&(s+=y*v,l+=d*v)}return y=e-s,d=t-l,y*y+d*d}function Yne(e,t){return VO(e,t,.5)}function t8e(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=p4(e[r],e[r+1]);return i}function i8e(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let s=0;s<i-1;++s){const l=p4(e[s],e[s+1]);if(t-r<l){const y=(t-r)/l;return VO(e[s],e[s+1],y)}r+=l}return e[i-1]}function zO(e,t,i){const r=e.length;let s=0,l=0,y=0;for(let d=0;d<r;d++){const v=e[d],_=e[(d+1)%r];let M=2;s+=v[0]*_[1]-_[0]*v[1],v.length>2&&_.length>2&&i&&(l+=v[0]*_[2]-_[0]*v[2],M=3),v.length>M&&_.length>M&&t&&(y+=v[0]*_[M]-_[0]*v[M])}return s<=0&&l<=0&&y<=0}function Xne(e){const t=e.length;return t>2&&Mc(e[0],e[t-1])}function r8e(e){var t,i;if("rings"in e&&(Qne(e),e.rings.length>0&&!zO(e.rings[0],(t=e.hasM)!=null?t:!1,(i=e.hasZ)!=null?i:!1)))for(const r of e.rings)r.reverse()}function Qne(e){if("rings"in e)for(const t of e.rings)Xne(t)||t.push(t[0].slice())}function n8e(e){return e.type!=="polygon"&&e.type!=="polyline"||ese(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function ese(e,t){const i=Ks(t);if(!i)return;const r=i.valid[0],s=i.valid[1],l=s-r;for(const y of e){let d=1/0,v=-1/0;for(const M of y){const T=tse(M[0],r,s);d=Math.min(d,T),v=Math.max(v,T),M[0]=T}const _=v-d;l-_<_&&y.forEach(M=>{M[0]<0&&(M[0]+=l)})}}function tse(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function GO(e){if(!e||e.length<3)return 0;let t=0;const i=e.length-1;for(let r=0;r<i;r++)t+=(e[r][0]-e[r+1][0])*(e[r][1]+e[r+1][1]);return t+=(e[i][0]-e[0][0])*(e[i][1]+e[0][1]),-.5*t}function ise(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function qO(e){var t;return e?UO(e.rings,(t=e.hasZ)!=null?t:!1):null}function UO(e,t){if(!e||!e.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let l=0,y=e.length;l<y;l++){const d=rse(e[l],t,s);d&&r.push(d)}if(r.sort((l,y)=>{let d=l[2]-y[2];return d===0&&t&&(d=l[4]-y[4]),d}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const l=e[0]&&e[0].length?nse(e[0],t):null;if(!l)return null;i[0]=l[0],i[1]=l[1],t&&l.length>2&&(i[2]=l[2])}return i}function rse(e,t,i){let r=0,s=0,l=0,y=0,d=0;const v=e.length?e[0][0]:0,_=e.length?e[0][1]:0,M=e.length&&t?e[0][2]:0;for(let A=0;A<e.length;A++){const R=e[A],F=e[(A+1)%e.length],[V,z,W]=R,Z=V-v,Q=z-_,[ee,re,ie]=F,he=ee-v,be=re-_,we=Z*be-he*Q;if(y+=we,r+=(Z+he)*we,s+=(Q+be)*we,t&&R.length>2&&F.length>2){const xe=W-M,$e=ie-M,je=Z*$e-he*xe;l+=(xe+$e)*je,d+=je}V<i[0]&&(i[0]=V),V>i[1]&&(i[1]=V),z<i[2]&&(i[2]=z),z>i[3]&&(i[3]=z),t&&(W<i[4]&&(i[4]=W),W>i[5]&&(i[5]=W))}if(y>0&&(y*=-1),d>0&&(d*=-1),!y)return null;y*=.5,d*=.5;const T=[r/(6*y)+v,s/(6*y)+_,y];return t&&(i[4]===i[5]||d===0?(T[3]=(i[4]+i[5])/2,T[4]=0):(T[3]=l/(6*d)+M,T[4]=d)),T}function nse(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,l=0,y=0,d=0;for(let v=0,_=e.length;v<_-1;v++){const M=e[v],T=e[v+1];if(M&&T){i[0]=M[0],i[1]=M[1],r[0]=T[0],r[1]=T[1],t&&M.length>2&&T.length>2&&(i[2]=M[2],r[2]=T[2]);const A=p4(i,r);if(A){s+=A;const R=Yne(M,T);l+=A*R[0],y+=A*R[1],t&&R.length>2&&(d+=A*R[2])}}}return s>0?t?[l/s,y/s,d/s]:[l/s,y/s]:e.length?e[0]:null}const sse=1e-6;function s8e(e){if(!e||!e.rings)return null;const{rings:t}=e;let i=0;for(let l=0;l<t.length;l++)i+=GO(t[l]);if(i<sse)return UO(t,!1);const r=[0,0],s=t[0][0];for(let l=0;l<t.length;l++)ase(r,s,t[l]);return r[0]*=1/i,r[1]*=1/i,r[0]+=s[0],r[1]+=s[1],r}const ose=1/3;function ase(e,t,i){if(!e||!i||i.length<3)return null;const r=i[0],s=[0,0],l=[i[1][0]-r[0],i[1][1]-r[1]];let y;for(let _=2;_<i.length;_++)s[0]=i[_][0]-r[0],s[1]=i[_][1]-r[1],y=.5*ose*(s[0]*l[1]-s[1]*l[0]),e[0]+=y*(l[0]+s[0]),e[1]+=y*(l[1]+s[1]),l[0]=s[0],l[1]=s[1];const d=GO(i),v=[r[0],r[1]];return v[0]-=t[0],v[1]-=t[1],v[0]*=d,v[1]*=d,e[0]+=v[0],e[1]+=v[1],e}function BO(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function HO(e){return e.points!==void 0}function WO(e){return e.x!==void 0&&e.y!==void 0}function JO(e){return e.paths!==void 0}function ZO(e){return e.rings!==void 0}function KO(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Ac=KO(Math.min),Pc=KO(Math.max);function o8e(e,t){return JO(t)?Oc(e,t.paths,!1,!1):ZO(t)?Oc(e,t.rings,!1,!1):HO(t)?d4(e,t.points,!1,!1,!1,!1):BO(t)?YO(e,t):(WO(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function a8e(e,t){return JO(t)?Oc(e,t.paths,!0,!1):ZO(t)?Oc(e,t.rings,!0,!1):HO(t)?d4(e,t.points,!0,!1,!0,!1):BO(t)?YO(e,t,!0,!1,!0,!1):(WO(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Oc(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let l,y,d,v,[_,M]=t[0][0],[T,A]=t[0][0];for(let R=0;R<t.length;R++){const F=t[R];for(let V=0;V<F.length;V++){const z=F[V],[W,Z]=z;if(_=Ac(_,W),M=Ac(M,Z),T=Pc(T,W),A=Pc(A,Z),i&&z.length>2){const Q=z[2];l=Ac(l,Q),y=Pc(y,Q)}if(r&&z.length>s){const Q=z[s];d=Ac(l,Q),v=Pc(y,Q)}}}return i?r?(e[0]=_,e[1]=M,e[2]=l,e[3]=d,e[4]=T,e[5]=A,e[6]=y,e[7]=v,e.length=8,e):(e[0]=_,e[1]=M,e[2]=l,e[3]=T,e[4]=A,e[5]=y,e.length=6,e):r?(e[0]=_,e[1]=M,e[2]=d,e[3]=T,e[4]=A,e[5]=v,e.length=6,e):(e[0]=_,e[1]=M,e[2]=T,e[3]=A,e.length=4,e)}function YO(e,t,i,r,s,l){const y=t.xmin,d=t.xmax,v=t.ymin,_=t.ymax;let M=t.zmin,T=t.zmax,A=t.mmin,R=t.mmax;return s?(M=M||0,T=T||0,l?(A=A||0,R=R||0,e[0]=y,e[1]=v,e[2]=M,e[3]=A,e[4]=d,e[5]=_,e[6]=T,e[7]=R,e):(e[0]=y,e[1]=v,e[2]=M,e[3]=d,e[4]=_,e[5]=T,e)):l?(A=A||0,R=R||0,e[0]=y,e[1]=v,e[2]=A,e[3]=d,e[4]=_,e[5]=R,e):(e[0]=y,e[1]=v,e[2]=d,e[3]=_,e)}function d4(e,t,i,r,s,l){const y=i?3:2,d=r&&l,v=i&&s;if(!t.length||!t[0].length)return null;let _,M,T,A,[R,F]=t[0],[V,z]=t[0];for(let W=0;W<t.length;W++){const Z=t[W],[Q,ee]=Z;if(R=Ac(R,Q),F=Ac(F,ee),V=Pc(V,Q),z=Pc(z,ee),v&&Z.length>2){const re=Z[2];_=Ac(_,re),M=Pc(M,re)}if(d&&Z.length>y){const re=Z[y];T=Ac(_,re),A=Pc(M,re)}}return s?(_=_||0,M=M||0,l?(T=T||0,A=A||0,e[0]=R,e[1]=F,e[2]=_,e[3]=T,e[4]=V,e[5]=z,e[6]=M,e[7]=A,e):(e[0]=R,e[1]=F,e[2]=_,e[3]=V,e[4]=z,e[5]=M,e)):l?(T=T||0,A=A||0,e[0]=R,e[1]=F,e[2]=T,e[3]=V,e[4]=z,e[5]=A,e):(e[0]=R,e[1]=F,e[2]=V,e[3]=z,e)}function lse(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function use(e){return e.points!==void 0}function cse(e){return e.x!==void 0&&e.y!==void 0}function hse(e){return e.paths!==void 0}function pse(e){return e.rings!==void 0}const f4=[];function XO(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function QO(e,t,i,r,s,l){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:l}}function ek(e,t,i,r,s,l){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:l}}function tk(e,t,i,r,s,l,y,d){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:l,zmax:y,mmax:d}}function y4(e,t=!1,i=!1){return t?i?tk(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):QO(e[0],e[1],e[2],e[3],e[4],e[5]):i?ek(e[0],e[1],e[2],e[3],e[4],e[5]):XO(e[0],e[1],e[2],e[3])}function g4(e){return e?lse(e)?e:cse(e)?fse(e):pse(e)?m4(e):hse(e)?ik(e):use(e)?dse(e):null:null}function dse(e){const{hasZ:t,hasM:i,points:r}=e;return y4(d4(f4,r,t!=null?t:!1,i!=null?i:!1),t,i)}function fse(e){const{x:t,y:i,z:r,m:s}=e,l=s!=null;return r!=null?l?tk(t,i,r,s,t,i,r,s):QO(t,i,r,t,i,r):l?ek(t,i,s,t,i,s):XO(t,i,t,i)}function m4(e){const{hasZ:t,hasM:i,rings:r}=e,s=Oc(f4,r,t!=null?t:!1,i!=null?i:!1);return s?y4(s,t,i):null}function ik(e){const{hasZ:t,hasM:i,paths:r}=e,s=Oc(f4,r,t!=null?t:!1,i!=null?i:!1);return s?y4(s,t,i):null}var kw;function rk(e){return!Array.isArray(e[0])}let Qa=kw=class extends Ec{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,s=!1;for(const y of t)y.hasZ&&(r=!0),y.hasM&&(s=!0);const l={rings:t.map(y=>{const d=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(r&&y.hasZ){const v=y.zmin+.5*(y.zmax-y.zmin);for(let _=0;_<d.length;_++)d[_].push(v)}if(s&&y.hasM){const v=y.mmin+.5*(y.mmax-y.mmin);for(let _=0;_<d.length;_++)d[_].push(v)}return d}),spatialReference:i};return r&&(l.hasZ=!0),s&&(l.hasM=!0),new kw(l)}normalizeCtorArgs(e,t){let i,r,s=null,l=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||At.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),l=s[0]&&s[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=l.length>3):i===void 0?i=r?l.length>3:l.length>2:r===void 0&&(r=i?l.length>3:l.length>2)),{rings:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=qO(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new dt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=m4(this);if(!t)return null;const i=new ai(t);return i.spatialReference=e,i}get isSelfIntersecting(){return Bne(this.rings)}writeRings(e,t){t.rings=me(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(rk(e)){const r=[];for(let s=0,l=e.length;s<l;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new kw;return e.spatialReference=this.spatialReference,e.rings=me(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(q(t)!==q(i)||q(t)&&q(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,l,y,d],[v,_,M,T])=>s===v&&l===_&&(y==null&&M==null||y===M)&&(d==null&&T==null||d===T);for(let s=0;s<this.rings.length;s++){const l=this.rings[s],y=e.rings[s];if(!Mc(l,y,r))return!1}return!0}contains(e){if(!e)return!1;const t=Aw(e,this.spatialReference);return RO(this,q(t)?t:e)}isClockwise(e){let t;return t=rk(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,zO(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new dt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new dt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new dt(i[0],i[1],i[2],i[3],this.spatialReference):new dt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Uf(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new dt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new dt(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Uf(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([x({readOnly:!0})],Qa.prototype,"cache",null),m([x({readOnly:!0})],Qa.prototype,"centroid",null),m([x({readOnly:!0})],Qa.prototype,"extent",null),m([x({readOnly:!0})],Qa.prototype,"isSelfIntersecting",null),m([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],Qa.prototype,"rings",void 0),m([Ke("rings")],Qa.prototype,"writeRings",null),Qa=kw=m([Y("esri.geometry.Polygon")],Qa),Qa.prototype.toJSON.isDefaultToJSON=!0;const jn=Qa;var v4;function yse(e){return!Array.isArray(e[0])}let kc=v4=class extends Ec{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,s=null,l=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||At.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),l=s[0]&&s[0][0],l&&(i===void 0&&r===void 0?(i=l.length>2,r=!1):i===void 0?i=!r&&l.length>3:r===void 0&&(r=!i&&l.length>3)),{paths:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=ik(this);if(!t)return null;const i=new ai(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=me(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(yse(e)){const r=[];for(let s=0,l=e.length;s<l;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new v4;return e.spatialReference=this.spatialReference,e.paths=me(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new dt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new dt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new dt(i[0],i[1],i[2],i[3],this.spatialReference):new dt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Uf(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new dt(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new dt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Uf(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};m([x({readOnly:!0})],kc.prototype,"cache",null),m([x({readOnly:!0})],kc.prototype,"extent",null),m([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],kc.prototype,"paths",void 0),m([Ke("paths")],kc.prototype,"writePaths",null),kc=v4=m([Y("esri.geometry.Polyline")],kc),kc.prototype.toJSON.isDefaultToJSON=!0;const Kr=kc;class bt{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,l)=>{const y=this.toJSON(r);y!==void 0&&Nn(l,y,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function $n(){return function(e,t){return new bt(e,te({ignoreUnknown:!0},t))}}const Rw=$n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Fw=$n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Qy(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Lw(e){return e.points!==void 0}function Nw(e){return e.x!==void 0&&e.y!==void 0}function eg(e){return e.paths!==void 0}function nu(e){return e.rings!==void 0}function dn(e){return ae(e)?null:e instanceof Ec?e:Nw(e)?dt.fromJSON(e):eg(e)?Kr.fromJSON(e):nu(e)?jn.fromJSON(e):Lw(e)?Xy.fromJSON(e):Qy(e)?ai.fromJSON(e):null}function su(e){return e?Nw(e)?"esriGeometryPoint":eg(e)?"esriGeometryPolyline":nu(e)?"esriGeometryPolygon":Qy(e)?"esriGeometryEnvelope":Lw(e)?"esriGeometryMultipoint":null:null}const gse={esriGeometryPoint:dt,esriGeometryPolyline:Kr,esriGeometryPolygon:jn,esriGeometryEnvelope:ai,esriGeometryMultipoint:Xy};function mse(e){return e&&gse[e]||null}const ou={base:Ec,key:"type",typeMap:{extent:ai,multipoint:Xy,point:dt,polyline:Kr,polygon:jn}};Za(ou);const yr=e=>{let t=class extends e{clone(){var v;const i=is(Lr(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,l={},y=new Map;for(const _ in r){const M=r[_],T=s==null?void 0:s.originOf(_),A=M.clonable;if(M.readOnly||A===!1||T!==nt.USER&&T!==nt.DEFAULTS&&T!==nt.WEB_MAP&&T!==nt.WEB_SCENE)continue;const R=this[_];let F=null;F=typeof A=="function"?A(R):A==="reference"?R:I9(R),R!=null&&F==null||(T===nt.DEFAULTS?y.set(_,F):l[_]=F)}const d=new(Object.getPrototypeOf(this)).constructor(l);if(y.size){const _=(v=Lr(d))==null?void 0:v.store;if(_)for(const[M,T]of y)_.set(M,T,nt.DEFAULTS)}return d}};return t=m([Y("esri.core.Clonable")],t),t};let nk=class extends yr(ot){};nk=m([Y("esri.core.Clonable")],nk);class Hf{constructor(){this._emitter=new Hf.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,l){const y=this._listenersMap&&this._listenersMap.get(s);if(!y)return!1;const d=this._target||this;return[...y].forEach(v=>{v.call(d,l)}),y.length>0}on(s,l){if(Array.isArray(s)){const d=s.map(v=>this.on(v,l));return Ly(d)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(s)||[];return y.push(l),this._listenersMap.set(s,y),{remove:()=>{const d=this._listenersMap&&this._listenersMap.get(s)||[],v=d.indexOf(l);v>=0&&d.splice(v,1)}}}once(s,l){const y=this.on(s,d=>{y.remove(),l.call(null,d)});return y}hasEventListener(s){const l=this._listenersMap&&this._listenersMap.get(s);return l!=null&&l.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(l,y){return this._emitter.emit(l,y)}on(l,y){return this._emitter.on(l,y)}once(l,y){return this._emitter.once(l,y)}hasEventListener(l){return this._emitter.hasEventListener(l)}};return s=m([Y("esri.core.Evented")],s),s};let i=class extends ot{constructor(){super(...arguments),this._emitter=new Hf.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=m([Y("esri.core.Evented")],i),e.EventedAccessor=i})(Hf||(Hf={}));const fn=Hf;var Mi;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Mi||(Mi={}));function b4(e){return(t,i)=>{t[i]=e}}class w4{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new eO(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var au;class vse{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Co=new ra(vse,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),bse=()=>{};function _4(e){return e?e instanceof _p?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function x4(e){if(e&&e.length)return e[0]}function wse(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let l=0;for(;l<s&&e[i+l]===t[r+l];)l++;return l}function sk(e,t,i,r){t&&t.forEach((s,l,y)=>{e.push(s),sk(e,i.call(r,s,l,y),i,r)})}const Rc=new Set,Fc=new Set,Lc=new Set,S4=new Map;let _se=0,_p=au=class extends fn.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new w4,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:_se++})}static isCollection(e){return e!=null&&e instanceof au}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof au?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Vt(this._observable),this._items}set items(e){this._emitBeforeChanges(Mi.ADD)||(this._splice(0,this.length,_4(e)),this._emitAfterChanges(Mi.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=bse,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(Vt(this._observable),this._emitBeforeChanges(Mi.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Mi.ADD),this}addMany(e,t=this._items.length){if(Vt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Mi.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,_4(e)),this._emitAfterChanges(Mi.ADD),this}at(e){if(Vt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Mi.REMOVE),e}clone(){return Vt(this._observable),this._createNewInstance({items:this._items.map(me)})}concat(...e){Vt(this._observable);const t=e.map(_4);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return;const i=Fr(this._splice(0,this.length)),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(Mi.REMOVE)}every(e,t){return Vt(this._observable),this._items.every(e,t)}filter(e,t){let i;return Vt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return Vt(this._observable),this._items.find(e,t)}findIndex(e,t){return Vt(this._observable),this._items.findIndex(e,t)}flatten(e,t){Vt(this._observable);const i=[];return sk(i,this,e,t),new au(i)}forEach(e,t){return Vt(this._observable),this._items.forEach(e,t)}getItemAt(e){return Vt(this._observable),this._items[e]}getNextIndex(e){Vt(this._observable);const t=this.length;return(e=e!=null?e:t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Vt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Vt(this._observable),this._items.indexOf(e,t)}join(e=","){return Vt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Vt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Vt(this._observable);const i=this._items.map(e,t);return new au({items:i})}reorder(e,t=this.length-1){Vt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Mi.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Mi.MOVE)}return e}}pop(){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return;const e=x4(this._splice(this.length-1,1));return this._emitAfterChanges(Mi.REMOVE),e}push(...e){return Vt(this._observable),this._emitBeforeChanges(Mi.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Mi.ADD)),this.length}reduce(e,t){Vt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Vt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Vt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Vt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Mi.REMOVE))return;const t=x4(this._splice(e,1));return this._emitAfterChanges(Mi.REMOVE),t}removeMany(e){if(Vt(this._observable),!e||!e.length||this._emitBeforeChanges(Mi.REMOVE))return[];const t=e instanceof au?e.toArray():e,i=this._items,r=[],s=t.length;for(let l=0;l<s;l++){const y=t[l],d=i.indexOf(y);if(d>-1){const v=1+wse(t,i,l+1,d+1),_=this._splice(d,v);_&&_.length>0&&r.push.apply(r,_),l+=v-1}}return this._emitAfterChanges(Mi.REMOVE),r}reverse(){if(Vt(this._observable),this._emitBeforeChanges(Mi.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Mi.MOVE),this}shift(){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.REMOVE))return;const e=x4(this._splice(0,1));return this._emitAfterChanges(Mi.REMOVE),e}slice(e=0,t=this.length){return Vt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Vt(this._observable),this._items.some(e,t)}sort(e){if(Vt(this._observable),!this.length||this._emitBeforeChanges(Mi.MOVE))return this;const t=Fr(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Mi.MOVE),this}splice(e,t,...i){Vt(this._observable);const r=(t?Mi.REMOVE:0)|(i.length?Mi.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return Vt(this._observable),this._items.slice()}toJSON(){return Vt(this._observable),this.toArray()}toLocaleString(){return Vt(this._observable),this._items.toLocaleString()}toString(){return Vt(this._observable),this._items.toString()}unshift(...e){return Vt(this._observable),!e.length||this._emitBeforeChanges(Mi.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Mi.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let l,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Nf(()=>this._dispatchChange())),t){if(y=r.splice(e,t),this.hasEventListener("before-remove")){const d=Co.acquire();d.target=this,d.cancellable=!0;for(let v=0,_=y.length;v<_;v++)l=y[v],d.reset(l),this.emit("before-remove",d),d.defaultPrevented&&(y.splice(v,1),r.splice(e,0,l),e+=1,v-=1,_-=1);Co.release(d)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const d=Co.acquire();d.target=this,d.cancellable=!1;const v=y.length;for(let _=0;_<v;_++)d.reset(y[_]),this.emit("after-remove",d);Co.release(d)}}if(i&&i.length){if(s){const M=[];for(const T of i){const A=s.ensureType(T);A==null&&T!=null||M.push(A)}i=M}const d=this.hasEventListener("before-add"),v=this.hasEventListener("after-add"),_=e===this.length;if(d||v){const M=Co.acquire();M.target=this,M.cancellable=!0;const T=Co.acquire();T.target=this,T.cancellable=!1;for(const A of i)d?(M.reset(A),this.emit("before-add",M),M.defaultPrevented||(_?r.push(A):r.splice(e++,0,A),this._set("length",r.length),v&&(T.reset(A),this.emit("after-add",T)))):(_?r.push(A):r.splice(e++,0,A),this._set("length",r.length),T.reset(A),this.emit("after-add",T));Co.release(T),Co.release(M)}else{if(_)for(const M of i)r.push(M);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Co.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Co.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Co.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Co.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Rc.clear(),Fc.clear(),Lc.clear();for(const{added:v,removed:_}of i){if(v)if(Lc.size===0&&Fc.size===0)for(const M of v)Rc.add(M);else for(const M of v)Fc.has(M)?(Lc.add(M),Fc.delete(M)):Lc.has(M)||Rc.add(M);if(_)if(Lc.size===0&&Rc.size===0)for(const M of _)Fc.add(M);else for(const M of _)Rc.has(M)?Rc.delete(M):(Lc.delete(M),Fc.add(M))}const r=ns.acquire();Rc.forEach(v=>{r.push(v)});const s=ns.acquire();Fc.forEach(v=>{s.push(v)});const l=this._items,y=t.items,d=ns.acquire();if(Lc.forEach(v=>{y.indexOf(v)!==l.indexOf(v)&&d.push(v)}),t.listeners&&(r.length||s.length||d.length)){const v={target:this,added:r,removed:s,moved:d},_=t.listeners.length;for(let M=0;M<_;M++){const T=t.listeners[M];T.removed||T.callback.call(this,v)}}ns.release(r),ns.release(s),ns.release(d)}Rc.clear(),Fc.clear(),Lc.clear()}};_p.ofType=e=>{if(!e)return au;if(S4.has(e))return S4.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends au{};return m([b4({Type:e,ensureType:typeof e=="function"?Ai(e):Za(e)})],i.prototype,"itemType",void 0),i=m([Y(`esri.core.Collection<${t}>`)],i),S4.set(e,i),i},m([x()],_p.prototype,"length",void 0),m([x()],_p.prototype,"items",null),_p=au=m([Y("esri.core.Collection")],_p);const gt=_p;var Wf;function xse(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(i!=null&&+t<i||r!=null&&+t>r)return Wf.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Wf.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Wf||(Wf={}));const Sse=Ae.getLogger("esri.support.arcadeOnDemand");let M4;function el(){return M4||(M4=(async()=>{const e=await import("./arcadeUtils.277de270.js").then(function(t){return t.ay});return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),M4}const l8e=(e,t,i)=>tg.create(e,t,i,null,["$feature"]),u8e=(e,t,i)=>tg.create(e,t,i,null,["$feature","$view"]),Mse=(e,t,i,r)=>tg.create(e,t,i,r,["$feature","$view"]);class tg{constructor(t,i,r,s,l,y,d,v){this.script=t,this.evaluate=l;const _=Array.isArray(d)?d:d.fields;this.fields=_,this._syntaxTree=s,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=y,this._spatialReference=v,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,l,y){const{arcade:d,Feature:v,Dictionary:_}=await el(),M=At.fromJSON(i);let T=null;try{T=d.parseScript(t,y)}catch(be){return Sse.error(new fe("arcade-bad-expression","Failed to parse arcade script",{script:t,error:be})),null}const A=l.reduce((be,we)=>De(te({},be),{[we]:null}),{});let R=null;q(s)&&(R=new _(s),R.immutable=!0,A.$config=null);const F=d.scriptUsesGeometryEngine(T),V=F&&d.enableGeometrySupport(),z=d.scriptUsesFeatureSet(T)&&d.enableFeatureSetSupport(),W=d.scriptIsAsync(T),Z=W&&d.enableAsyncSupport(),Q={vars:A,spatialReference:M,useAsync:!!Z};await Promise.all([V,z,Z]);const ee=new Set;await d.loadDependentModules(ee,T,null,W,F);const re=new _;re.immutable=!1,re.setField("scale",0);const ie=d.compileScript(T,Q),he=be=>("$view"in be&&be.$view&&(re.setField("scale",be.$view.scale),be.$view=re),R&&(be.$config=R),ie({vars:be,spatialReference:M}));return new tg(t,d,_,T,he,new v,r,M)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const $se=/^([0-9])/,Ese=/[^A-Za-z0-9_\u0080-\uffff]/g,Ise=/_{2,}/g,Tse=/^_/,Cse=/_$/;function Ase(e){return e?e.trim().replace(Ese,"_").replace(Ise,"_").replace(Tse,"").replace(Cse,"").replace($se,"F$1"):null}const Pse=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Ose=["field","normalizationField"];function ok(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(ak(Pse,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)ak(Ose,r,t)}}function ak(e,t,i){if(e)for(const r of e){const s=Of(r,t),l=s&&typeof s!="function"&&i.get(s);l&&Nn(r,l.name,t)}}function lk(e,t){var i,r,s,l,y;if(e!=null&&((i=t==null?void 0:t.fields)==null?void 0:i.length))if("startField"in e){const d=t.get(e.startField),v=t.get(e.endField);e.startField=(r=d==null?void 0:d.name)!=null?r:null,e.endField=(s=v==null?void 0:v.name)!=null?s:null}else{const d=t.get(e.startTimeField),v=t.get(e.endTimeField);e.startTimeField=(l=d==null?void 0:d.name)!=null?l:null,e.endTimeField=(y=v==null?void 0:v.name)!=null?y:null}}const $4=new Set;function uk(e,t){return e&&t?($4.clear(),ig($4,e,t),Array.from($4).sort()):[]}function ig(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)==null?void 0:r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)Ys(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function Ys(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function c8e(e,t){var i;return ae(t)||ae(e)?[]:t.includes("*")?((i=e.fields)!=null?i:[]).map(r=>r.name):t}async function as(e,t,i){var l;if(!i)return;const{arcadeUtils:r}=await el(),s=r.extractFieldNames(i,(l=t==null?void 0:t.fields)==null?void 0:l.map(y=>y.name));for(const y of s)Ys(e,t,y)}async function ck(e,t,i){if(i&&i!=="1=1"){const r=(await Promise.resolve().then(function(){return EJ})).WhereClause.create(i,t);if(!r.isStandardized)throw new fe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});ig(e,t,r.fieldNames)}}function kse({displayField:e,fields:t}){return e||(t&&t.length?E4(t,"name-or-title")||E4(t,"unique-identifier")||E4(t,"type-or-category")||Rse(t):null)}function Rse(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function E4(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function h8e(e,t){if(!t)return;const i=Of("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function Fse(e,t,i){i.onStatisticExpression?as(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function p8e(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(Lse(e,t,s)),i.fields&&r.push(...i.fields.map(async l=>Fse(e,t.fieldsIndex,l))),await Promise.all(r)}async function Lse(e,t,i){const r=[];(i==null?void 0:i.expressionInfos)&&r.push(...i.expressionInfos.map(l=>as(e,t.fieldsIndex,l.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const l of s)l.type==="expression"&&l.expressionInfo&&r.push(as(e,t.fieldsIndex,l.expressionInfo.expression));await Promise.all(r)}async function d8e(e,t,i){t&&(t.timeInfo&&q(i)&&i.timeExtent&&ig(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&ig(e,t.fieldsIndex,[t.floorInfo.floorField]),q(i)&&q(i.where)&&await ck(e,t.fieldsIndex,i.where))}async function f8e(e,t,i){t&&i&&await Promise.all(i.map(r=>Nse(e,t,r)))}async function Nse(e,t,i){t&&i&&(i.valueExpression?await as(e,t.fieldsIndex,i.valueExpression):i.field&&Ys(e,t.fieldsIndex,i.field))}function y8e(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?uk(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function g8e(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(s=>jse(e,r,s)))}async function jse(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await as(e,t,r.expression);else{const l=r.expression.match(/{[^}]*}/g);l&&l.forEach(y=>{Ys(e,t,y.slice(1,-1))})}await ck(e,t,s)}function Dse(e){const t=e.defaultValue;return t!==void 0&&dk(e,t)?t:e.nullable?null:void 0}function hk(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Vse(e){return e===null||hk(e)}const I4="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function zse(e){return e===null||I4(e)}function pk(e){return e!=null&&typeof e=="string"}function Gse(e){return e===null||pk(e)}function qse(){return!0}function dk(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?zse:I4;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?Vse:hk;break;case"string":case"esriFieldTypeString":i=e.nullable?Gse:pk;break;default:i=qse}return arguments.length===1?i:i(t)}const Use=["integer","small-integer","single","double"],Bse=new Set([...Use,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function T4(e){return e!=null&&Bse.has(e.type)}function fk(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var jw,Dw;function m8e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function v8e(e,t){return e.nullable&&t===null?null:T4(e)&&!Hse(e.type,Number(t))?jw.OUT_OF_RANGE:dk(e,t)?e.domain?xse(e.domain,t):null:Dw.INVALID_TYPE}function Hse(e,t){const i=typeof e=="string"?yk(e):e;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?I4(t)&&t>=r&&t<=s:t>=r&&t<=s}function yk(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Wse;case"esriFieldTypeInteger":case"integer":return Jse;case"esriFieldTypeSingle":case"single":return Zse;case"esriFieldTypeDouble":case"double":return Kse}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(jw||(jw={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Dw||(Dw={}));const Wse={min:-32768,max:32767,isInteger:!0},Jse={min:-2147483648,max:2147483647,isInteger:!0},Zse={min:-34e37,max:12e37,isInteger:!1},Kse={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function b8e(e,t,i){switch(e){case Wf.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Wf.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Dw.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case jw.OUT_OF_RANGE:{const{min:r,max:s}=yk(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function Yse(e,t){return!Xse(e,t,null)}function Xse(e,t,i){if(!t||!t.attributes||!e){if(q(i))for(const l of e!=null?e:[])i.add(l);return!0}const r=t.attributes;let s=!1;for(const l of e)if(!(l in r)){if(s=!0,!q(i))break;i.add(l)}return s}function gk(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let Vw=class extends Ie{constructor(e){super(e),this.type=null}};m([x({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Vw.prototype,"type",void 0),Vw=m([Y("esri.popup.content.Content")],Vw);const Nc=Vw;var C4;let xp=C4=class extends Nc{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new C4({description:this.description,displayType:this.displayType,title:this.title})}};m([x({type:String,json:{write:!0}})],xp.prototype,"description",void 0),m([x({type:["auto","preview","list"],json:{write:!0}})],xp.prototype,"displayType",void 0),m([x({type:String,json:{write:!0}})],xp.prototype,"title",void 0),m([x({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],xp.prototype,"type",void 0),xp=C4=m([Y("esri.popup.content.AttachmentsContent")],xp);const rg=xp;var A4;let Sp=A4=class extends Nc{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new A4({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?me(this.outFields):null})}};m([x()],Sp.prototype,"creator",void 0),m([x()],Sp.prototype,"destroyer",void 0),m([x()],Sp.prototype,"outFields",void 0),m([x({type:["custom"],readOnly:!0})],Sp.prototype,"type",void 0),Sp=A4=m([Y("esri.popup.content.CustomContent")],Sp);const Qse=Sp;var P4;let Jf=P4=class extends Ie{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new P4({title:this.title,expression:this.expression})}};m([x({type:String,json:{write:!0}})],Jf.prototype,"title",void 0),m([x({type:String,json:{write:!0}})],Jf.prototype,"expression",void 0),m([x({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Jf.prototype,"returnType",void 0),Jf=P4=m([Y("esri.popup.ElementExpressionInfo")],Jf);const mk=Jf;var O4;let ng=O4=class extends Nc{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new O4({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};m([x({type:mk,json:{write:!0}})],ng.prototype,"expressionInfo",void 0),m([x({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],ng.prototype,"type",void 0),ng=O4=m([Y("esri.popup.content.ExpressionContent")],ng);const k4=ng;function wt(e,t={}){var s;const i=e instanceof bt?e:new bt(e,t),r={type:((s=t==null?void 0:t.ignoreUnknown)!=null?s:1)?i.apiValues:String,json:{type:i.jsonValues,read:!(t==null?void 0:t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),x(r)}const sg=$n()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});sg.toJSON.bind(sg);sg.fromJSON.bind(sg);let og;var CZ,AZ,PZ;const R4=(PZ=(CZ=globalThis.esriConfig)==null?void 0:CZ.locale)!=null?PZ:(AZ=globalThis.dojoConfig)==null?void 0:AZ.locale;function vk(){var e,t;return(t=R4!=null?R4:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function na(){return og===void 0&&(og=vk()),og}const ag=[];function eoe(e){return ag.push(e),{remove(){ag.splice(ag.indexOf(e),1)}}}const F4=[];function L4(e){return F4.push(e),{remove(){ag.splice(F4.indexOf(e),1)}}}function toe(){const e=vk();og!==e&&(og=e,[...F4].forEach(t=>{t.call(null,e)}),[...ag].forEach(t=>{t.call(null,e)}))}var OZ;(OZ=globalThis.addEventListener)==null||OZ.call(globalThis,"languagechange",toe);const tl={year:"numeric",month:"numeric",day:"numeric"},lg={year:"numeric",month:"long",day:"numeric"},ug={year:"numeric",month:"short",day:"numeric"},cg={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ao={hour:"numeric",minute:"numeric"},sa=De(te({},Ao),{second:"numeric"}),N4={"short-date":tl,"short-date-short-time":te(te({},tl),Ao),"short-date-short-time-24":De(te(te({},tl),Ao),{hour12:!1}),"short-date-long-time":te(te({},tl),sa),"short-date-long-time-24":De(te(te({},tl),sa),{hour12:!1}),"short-date-le":tl,"short-date-le-short-time":te(te({},tl),Ao),"short-date-le-short-time-24":De(te(te({},tl),Ao),{hour12:!1}),"short-date-le-long-time":te(te({},tl),sa),"short-date-le-long-time-24":De(te(te({},tl),sa),{hour12:!1}),"long-month-day-year":lg,"long-month-day-year-short-time":te(te({},lg),Ao),"long-month-day-year-short-time-24":De(te(te({},lg),Ao),{hour12:!1}),"long-month-day-year-long-time":te(te({},lg),sa),"long-month-day-year-long-time-24":De(te(te({},lg),sa),{hour12:!1}),"day-short-month-year":ug,"day-short-month-year-short-time":te(te({},ug),Ao),"day-short-month-year-short-time-24":De(te(te({},ug),Ao),{hour12:!1}),"day-short-month-year-long-time":te(te({},ug),sa),"day-short-month-year-long-time-24":De(te(te({},ug),sa),{hour12:!1}),"long-date":cg,"long-date-short-time":te(te({},cg),Ao),"long-date-short-time-24":De(te(te({},cg),Ao),{hour12:!1}),"long-date-long-time":te(te({},cg),sa),"long-date-long-time-24":De(te(te({},cg),sa),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ao,"long-time":sa},hg=$n()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});hg.apiValues;hg.toJSON.bind(hg);hg.fromJSON.bind(hg);const ioe={ar:"ar-u-nu-latn-ca-gregory"};let j4=new WeakMap,bk=N4["short-date-short-time"];function roe(e){const t=e||bk;let i=j4.get(t);if(!i){const r=na(),s=ioe[na()]||r;i=new Intl.DateTimeFormat(s,t),j4.set(t,i)}return i}function D4(e){return e?N4[e]:null}function lu(e,t){return roe(t).format(e)}L4(()=>{j4=new WeakMap,bk=N4["short-date-short-time"]});const noe={ar:"ar-u-nu-latn"};let zw=new WeakMap,wk={};function soe(e){const t=e||wk;if(!zw.has(t)){const i=na(),r=noe[na()]||i;zw.set(t,new Intl.NumberFormat(r,e))}return Fr(zw.get(t))}function _k(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Po(e,t){return e===-0&&(e=0),soe(t).format(e)}L4(()=>{zw=new WeakMap,wk={}});var V4;let Mp=V4=class extends Ie{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new V4({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?lu(e,te(te({},D4(this.dateFormat)),this.dateTimeFormatOptions)):Po(e,_k(this))}formatRasterPixelValue(e){if(e.includes("-"))return e;let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(s=>this.format(Number(s))).join(i):e}};m([wt(sg)],Mp.prototype,"dateFormat",void 0),m([x({type:Object,json:{read:!1}})],Mp.prototype,"dateTimeFormatOptions",void 0),m([x({type:Boolean,json:{write:!0}})],Mp.prototype,"digitSeparator",void 0),m([x({type:hi,json:{write:!0}})],Mp.prototype,"places",void 0),Mp=V4=m([Y("esri.popup.support.FieldInfoFormat")],Mp);const Zf=Mp;var z4;let oa=z4=class extends Ie{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new z4({fieldName:this.fieldName,format:this.format?me(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};m([x({type:String,json:{write:!0}})],oa.prototype,"fieldName",void 0),m([x({type:Zf,json:{write:!0}})],oa.prototype,"format",void 0),m([x({type:Boolean,json:{write:!0,default:!1}})],oa.prototype,"isEditable",void 0),m([x({type:String,json:{write:!0}})],oa.prototype,"label",void 0),m([wt(new bt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],oa.prototype,"stringFieldOption",void 0),m([x({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],oa.prototype,"statisticType",void 0),m([x({type:String,json:{write:!0}})],oa.prototype,"tooltip",void 0),m([x({type:Boolean,json:{write:!0}})],oa.prototype,"visible",void 0),oa=z4=m([Y("esri.popup.FieldInfo")],oa);const pg=oa;var G4;let uu=G4=class extends Nc{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new G4(me({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};m([x({type:Object,json:{write:!0}})],uu.prototype,"attributes",void 0),m([x({type:String,json:{write:!0}})],uu.prototype,"description",void 0),m([x({type:[pg]})],uu.prototype,"fieldInfos",void 0),m([Ke("fieldInfos")],uu.prototype,"writeFieldInfos",null),m([x({type:String,json:{write:!0}})],uu.prototype,"title",void 0),m([x({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],uu.prototype,"type",void 0),uu=G4=m([Y("esri.popup.content.FieldsContent")],uu);const Kf=uu;let $p=class extends Ie{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};m([x({type:String,json:{write:!0}})],$p.prototype,"altText",void 0),m([x({type:String,json:{write:!0}})],$p.prototype,"caption",void 0),m([x({type:String,json:{write:!0}})],$p.prototype,"title",void 0),m([x({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],$p.prototype,"type",void 0),$p=m([Y("esri.popup.content.mixins.MediaInfo")],$p);const q4=$p;var U4;let Yf=U4=class extends ot{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new U4({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};m([x()],Yf.prototype,"fieldName",void 0),m([x()],Yf.prototype,"tooltip",void 0),m([x()],Yf.prototype,"value",void 0),Yf=U4=m([Y("esri.popup.content.support.ChartMediaInfoValueSeries")],Yf);const xk=Yf;var B4;let Ep=B4=class extends Ie{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new B4({fields:me(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};m([x({type:[String],json:{write:!0}})],Ep.prototype,"fields",void 0),m([x({type:String,json:{write:!0}})],Ep.prototype,"normalizeField",void 0),m([x({type:[xk],json:{read:!1}})],Ep.prototype,"series",void 0),m([x({type:String,json:{write:!0}})],Ep.prototype,"tooltipField",void 0),Ep=B4=m([Y("esri.popup.content.support.ChartMediaInfoValue")],Ep);const ooe=Ep;let dg=class extends q4{constructor(e){super(e),this.type=null,this.value=null}};m([x({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],dg.prototype,"type",void 0),m([x({type:ooe,json:{write:!0}})],dg.prototype,"value",void 0),dg=m([Y("esri.popup.content.mixins.ChartMediaInfo")],dg);const Gw=dg,qw=$n()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var H4;let Uw=H4=class extends Gw{constructor(e){super(e),this.type="bar-chart"}clone(){return new H4({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:qw.write}})],Uw.prototype,"type",void 0),Uw=H4=m([Y("esri.popup.content.BarChartMediaInfo")],Uw);const Sk=Uw;var W4;let Bw=W4=class extends Gw{constructor(e){super(e),this.type="column-chart"}clone(){return new W4({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:qw.write}})],Bw.prototype,"type",void 0),Bw=W4=m([Y("esri.popup.content.ColumnChartMediaInfo")],Bw);const Mk=Bw;var J4;let fg=J4=class extends Ie{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new J4({linkURL:this.linkURL,sourceURL:this.sourceURL})}};m([x({type:String,json:{write:!0}})],fg.prototype,"linkURL",void 0),m([x({type:String,json:{write:!0}})],fg.prototype,"sourceURL",void 0),fg=J4=m([Y("esri.popup.content.support.ImageMediaInfoValue")],fg);const aoe=fg;var Z4;let Xf=Z4=class extends q4{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new Z4({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};m([x({type:Number,json:{write:!0}})],Xf.prototype,"refreshInterval",void 0),m([x({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Xf.prototype,"type",void 0),m([x({type:aoe,json:{write:!0}})],Xf.prototype,"value",void 0),Xf=Z4=m([Y("esri.popup.content.ImageMediaInfo")],Xf);const $k=Xf;var K4;let Hw=K4=class extends Gw{constructor(e){super(e),this.type="line-chart"}clone(){return new K4({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:qw.write}})],Hw.prototype,"type",void 0),Hw=K4=m([Y("esri.popup.content.LineChartMediaInfo")],Hw);const Ek=Hw;var Y4;let Ww=Y4=class extends Gw{constructor(e){super(e),this.type="pie-chart"}clone(){return new Y4({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};m([x({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:qw.write}})],Ww.prototype,"type",void 0),Ww=Y4=m([Y("esri.popup.content.PieChartMediaInfo")],Ww);const Ik=Ww,Tk={base:q4,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Sk,"column-chart":Mk,"line-chart":Ek,"pie-chart":Ik,image:$k}};var X4;let aa=X4=class extends Nc{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?$k.fromJSON(t):t.type==="barchart"?Sk.fromJSON(t):t.type==="columnchart"?Mk.fromJSON(t):t.type==="linechart"?Ek.fromJSON(t):t.type==="piechart"?Ik.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new X4(me({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};m([x()],aa.prototype,"activeMediaInfoIndex",void 0),m([x({type:Object,json:{write:!0}})],aa.prototype,"attributes",void 0),m([x({type:String,json:{write:!0}})],aa.prototype,"description",void 0),m([x({types:[Tk]})],aa.prototype,"mediaInfos",void 0),m([Be("mediaInfos")],aa.prototype,"readMediaInfos",null),m([Ke("mediaInfos")],aa.prototype,"writeMediaInfos",null),m([x({type:String,json:{write:!0}})],aa.prototype,"title",void 0),m([x({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],aa.prototype,"type",void 0),aa=X4=m([Y("esri.popup.content.MediaContent")],aa);const yg=aa;var Q4;let gg=Q4=class extends Ie{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Q4({field:this.field,order:this.order})}};m([x({type:String,json:{write:!0}})],gg.prototype,"field",void 0),m([x({type:["asc","desc"],json:{write:!0}})],gg.prototype,"order",void 0),gg=Q4=m([Y("esri.popup.support.RelatedRecordsInfoFieldOrder")],gg);const eS=gg;let il=class extends yr(Nc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};m([x({type:String,json:{write:!0}})],il.prototype,"description",void 0),m([x({type:Number,json:{type:hi,write:!0}})],il.prototype,"displayCount",void 0),m([x({type:["list"],json:{write:!0}})],il.prototype,"displayType",void 0),m([x({type:[eS],json:{write:!0}})],il.prototype,"orderByFields",void 0),m([x({type:Number,json:{type:hi,write:!0}})],il.prototype,"relationshipId",void 0),m([x({type:String,json:{write:!0}})],il.prototype,"title",void 0),m([x({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],il.prototype,"type",void 0),il=m([Y("esri.popup.content.RelationshipContent")],il);const Jw=il;var tS;let mg=tS=class extends Nc{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new tS({text:this.text})}};m([x({type:String,json:{write:!0}})],mg.prototype,"text",void 0),m([x({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],mg.prototype,"type",void 0),mg=tS=m([Y("esri.popup.content.TextContent")],mg);const Qf=mg,loe={base:null,key:"type",typeMap:{attachment:rg,media:yg,text:Qf,expression:k4,field:Kf,relationship:Jw}};var iS;let Ip=iS=class extends Ie{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new iS({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([x({type:String,json:{write:!0}})],Ip.prototype,"name",void 0),m([x({type:String,json:{write:!0}})],Ip.prototype,"title",void 0),m([x({type:String,json:{write:!0}})],Ip.prototype,"expression",void 0),m([x({type:["string","number"],json:{write:!0}})],Ip.prototype,"returnType",void 0),Ip=iS=m([Y("esri.popup.ExpressionInfo")],Ip);const Ck=Ip;var rS;let vg=rS=class extends Ie{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new rS({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};m([x({type:Boolean,json:{write:!0}})],vg.prototype,"returnTopmostRaster",void 0),m([x({type:Boolean,json:{write:!0}})],vg.prototype,"showNoDataRecords",void 0),vg=rS=m([Y("esri.popup.LayerOptions")],vg);const uoe=vg;var nS;let bg=nS=class extends Ie{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new nS({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?me(this.orderByFields):null})}};m([x({type:Boolean,json:{write:!0}})],bg.prototype,"showRelatedRecords",void 0),m([x({type:[eS],json:{write:!0}})],bg.prototype,"orderByFields",void 0),bg=nS=m([Y("esri.popup.RelatedRecordsInfo")],bg);const coe=bg;let Ak=0;const e0=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Ak++})}};return t=m([Y("esri.core.Identifiable")],t),t},sS=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Ak++})}};return t=m([Y("esri.core.NumericIdentifiable")],t),t};let Pk=class extends e0(class{}){};Pk=m([Y("esri.core.Identifiable")],Pk);var oS;let la=oS=class extends e0(ot){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new oS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};m([x()],la.prototype,"active",void 0),m([x()],la.prototype,"className",void 0),m([x()],la.prototype,"disabled",void 0),m([x()],la.prototype,"id",void 0),m([x()],la.prototype,"indicator",void 0),m([x()],la.prototype,"title",void 0),m([x()],la.prototype,"type",void 0),m([x()],la.prototype,"visible",void 0),la=oS=m([Y("esri.support.actions.ActionBase")],la);const Zw=la;var aS;let Kw=aS=class extends Zw{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new aS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};m([x()],Kw.prototype,"image",void 0),Kw=aS=m([Y("esri.support.Action.ActionButton")],Kw);const t0=Kw;var lS;let wg=lS=class extends Zw{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new lS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};m([x()],wg.prototype,"image",void 0),m([x()],wg.prototype,"value",void 0),wg=lS=m([Y("esri.support.Action.ActionToggle")],wg);const Ok=wg,hoe="esri.PopupTemplate",poe=Ae.getLogger(hoe),_g="relationships/",kk="expression/",doe=gt.ofType({key:"type",defaultKeyValue:"button",base:Zw,typeMap:{button:t0,toggle:Ok}}),foe={base:Nc,key:"type",typeMap:{media:yg,custom:Qse,text:Qf,attachments:rg,fields:Kf,expression:k4,relationship:Jw}},yoe=["attachments","fields","media","text","expression","relationship"];let Yr=class extends yr(Ie){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>Za(foe,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||eu(e)?e:(poe.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>yoe.includes(s.type)).map(s=>s&&s.toJSON(r)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"?this._writeTextContent(s,t):s.type==="relationship"&&this._writeRelationshipContent(s,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:s}=this,l=Array.isArray(s)?s:null;if(e){const y=l?l.filter(v=>v.type==="fields"):[],d=y.length&&y.every(v=>{var _;return(_=v.fieldInfos)==null?void 0:_.length});t.fieldInfos=e.filter(Boolean).map(v=>{const _=v.toJSON(r);return d&&(_.visible=!1),_})}if(l)for(const y of l)y.type==="fields"&&this._writeFieldsContent(y,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),ig(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=me(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const s=t.fieldInfos.find(l=>l.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){var s,l;const i=((s=e.orderByFields)==null?void 0:s.map(y=>this._toFieldOrderJSON(y,e.relationshipId)))||[],r=[...((l=t.relatedRecordsInfo)==null?void 0:l.orderByFields)||[],...i];t.relatedRecordsInfo=te({showRelatedRecords:!0},(r==null?void 0:r.length)&&{orderByFields:r})}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=me(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const r={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!t||r.mediaInfos||(s.mediaInfos=t,r.mediaInfos=!0),yg.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),Qf.fromJSON(s)):s.type==="attachments"?rg.fromJSON(s):s.type==="fields"?Kf.fromJSON(s):s.type==="expression"?k4.fromJSON(s):s.type==="relationship"?Jw.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!(t==null?void 0:t.startsWith(_g)))return null;const r=t.replace(_g,"").split("/");if(r.length!==2)return null;const s=parseInt(r[0],10),l=r[1];return typeof s=="number"&&l?Jw.fromJSON({relationshipId:s,orderByFields:[{field:l,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:r}=e;return{field:`${_g}${t}/${r}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:r={showRelatedRecords:!1}}){const s=[];e?s.push(new Qf({text:e})):s.push(new Kf),Array.isArray(t)&&t.length&&s.push(yg.fromJSON({mediaInfos:t})),i&&s.push(rg.fromJSON({displayType:"auto"}));const{showRelatedRecords:l,orderByFields:y}=r;return l&&(y==null?void 0:y.length)&&y.forEach(d=>{const v=this._toRelationshipContent(d);v&&s.push(v)}),s.length?s:e}_getContentElementFields(e){var i;const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields((i=e.fieldInfos)!=null?i:this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,l)=>[...s,...this._getMediaInfoFields(l)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,s=r||{},{fields:l,normalizeField:y,tooltipField:d,sourceURL:v,linkURL:_}=s,M=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(v),...this._extractFieldNames(_),...l!=null?l:[]];return y&&M.push(y),d&&M.push(d),M}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>as(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.startsWith(_g)&&!t.startsWith(kk)):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,s=i.filter(l=>!(l.indexOf(`{${_g}`)===0||l.indexOf(`{${kk}`)===0)).map(l=>l.replace(r,"{$1}"));return s?s.map(l=>l.slice(1,-1)):[]}};m([x({type:doe})],Yr.prototype,"actions",void 0),m([x()],Yr.prototype,"content",void 0),m([ri("content")],Yr.prototype,"castContent",null),m([Be("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Yr.prototype,"readContent",null),m([Ke("content",{popupElements:{type:gt.ofType(loe)},showAttachments:{type:Boolean},mediaInfos:{type:gt.ofType(Tk)},description:{type:String},relatedRecordsInfo:{type:coe}})],Yr.prototype,"writeContent",null),m([x({type:[Ck],json:{write:!0}})],Yr.prototype,"expressionInfos",void 0),m([x({type:[pg]})],Yr.prototype,"fieldInfos",void 0),m([Ke("fieldInfos")],Yr.prototype,"writeFieldInfos",null),m([x({type:uoe})],Yr.prototype,"layerOptions",void 0),m([Ke("layerOptions")],Yr.prototype,"writeLayerOptions",null),m([x({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Yr.prototype,"lastEditInfoEnabled",void 0),m([x()],Yr.prototype,"outFields",void 0),m([x()],Yr.prototype,"overwriteActions",void 0),m([x()],Yr.prototype,"returnGeometry",void 0),m([x({json:{type:String}})],Yr.prototype,"title",void 0),m([Ke("title")],Yr.prototype,"writeTitle",null),Yr=m([Y("esri.PopupTemplate")],Yr);const i0=Yr,Yw={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Rk(e){return Yw[e]||Yw[e.toLowerCase()]}function uS(e){var t;return(t=Yw[e])!=null?t:Yw[e.toLowerCase()]}function goe(e){return[...uS(e)]}function cS(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function Fk(e,t,i,r=1){const s=(e%360+360)%360/360,l=i<=.5?i*(t+1):i+t-i*t,y=2*i-l;return[Math.round(255*cS(y,l,s+1/3)),Math.round(255*cS(y,l,s)),Math.round(255*cS(y,l,s-1/3)),r]}function moe(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,l=t?e.length===9:e.length===5;let y=Number("0x"+e.substr(1));if(isNaN(y))return null;const d=[0,0,0,1];let v;return l&&(v=y&r,y>>=i,d[3]=s*v/255),v=y&r,y>>=i,d[2]=s*v,v=y&r,y>>=i,d[1]=s*v,v=y&r,y>>=i,d[0]=s*v,d}function Qe(){return[0,0,0]}function jc(e){return[e[0],e[1],e[2]]}function Ar(e,t,i){return[e,t,i]}function Lk(e){const t=Qe(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Nk(e,t){return new Float64Array(e,t,3)}function jk(){return Qe()}function Dk(){return Ar(1,1,1)}function Vk(){return Ar(1,0,0)}function zk(){return Ar(0,1,0)}function Gk(){return Ar(0,0,1)}const voe=jk(),qk=Dk(),boe=Vk(),woe=zk(),_oe=Gk();Object.freeze(Object.defineProperty({__proto__:null,create:Qe,clone:jc,fromValues:Ar,fromArray:Lk,createView:Nk,zeros:jk,ones:Dk,unitX:Vk,unitY:zk,unitZ:Gk,ZEROS:voe,ONES:qk,UNIT_X:boe,UNIT_Y:woe,UNIT_Z:_oe},Symbol.toStringTag,{value:"Module"}));let hS=1e-6;function Ms(){return hS}function xoe(e){hS=e}const xg=Math.random,Soe=Math.PI/180,Moe=180/Math.PI;function pS(e){return e*Soe}function $oe(e){return e*Moe}function Eoe(e,t){return Math.abs(e-t)<=hS*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,getEpsilon:Ms,setEpsilon:xoe,RANDOM:xg,toRadian:pS,toDegree:$oe,equals:Eoe},Symbol.toStringTag,{value:"Module"}));function Oo(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function $s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Nr(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function Xs(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Xr(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Uk(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function Bk(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function Ioe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Toe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Coe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function Aoe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function Poe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function Ooe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function koe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Qs(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Tp(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function r0(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function Dc(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function dS(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function fS(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Roe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function En(e,t){const i=t[0],r=t[1],s=t[2];let l=i*i+r*r+s*s;return l>0&&(l=1/Math.sqrt(l),e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l),e}function pi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qr(e,t,i){const r=t[0],s=t[1],l=t[2],y=i[0],d=i[1],v=i[2];return e[0]=s*v-l*d,e[1]=l*y-r*v,e[2]=r*d-s*y,e}function Hk(e,t,i,r){const s=t[0],l=t[1],y=t[2];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e[2]=y+r*(i[2]-y),e}function Foe(e,t,i,r,s,l){const y=l*l,d=y*(2*l-3)+1,v=y*(l-2)+l,_=y*(l-1),M=y*(3-2*l);return e[0]=t[0]*d+i[0]*v+r[0]*_+s[0]*M,e[1]=t[1]*d+i[1]*v+r[1]*_+s[1]*M,e[2]=t[2]*d+i[2]*v+r[2]*_+s[2]*M,e}function Loe(e,t,i,r,s,l){const y=1-l,d=y*y,v=l*l,_=d*y,M=3*l*d,T=3*v*y,A=v*l;return e[0]=t[0]*_+i[0]*M+r[0]*T+s[0]*A,e[1]=t[1]*_+i[1]*M+r[1]*T+s[1]*A,e[2]=t[2]*_+i[2]*M+r[2]*T+s[2]*A,e}function Noe(e,t){t=t||1;const i=xg,r=2*i()*Math.PI,s=2*i()-1,l=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*l,e[1]=Math.sin(r)*l,e[2]=s*t,e}function Wk(e,t,i){const r=t[0],s=t[1],l=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*l+i[12],e[1]=i[1]*r+i[5]*s+i[9]*l+i[13],e[2]=i[2]*r+i[6]*s+i[10]*l+i[14],e}function joe(e,t,i){const r=t[0],s=t[1],l=t[2];return e[0]=r*i[0]+s*i[3]+l*i[6],e[1]=r*i[1]+s*i[4]+l*i[7],e[2]=r*i[2]+s*i[5]+l*i[8],e}function yS(e,t,i){const r=i[0],s=i[1],l=i[2],y=i[3],d=t[0],v=t[1],_=t[2];let M=s*_-l*v,T=l*d-r*_,A=r*v-s*d,R=s*A-l*T,F=l*M-r*A,V=r*T-s*M;const z=2*y;return M*=z,T*=z,A*=z,R*=2,F*=2,V*=2,e[0]=d+M+R,e[1]=v+T+F,e[2]=_+A+V,e}function Doe(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[0],l[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),l[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function Voe(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),l[1]=s[1],l[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function zoe(e,t,i,r){const s=[],l=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],l[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),l[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),l[2]=s[2],e[0]=l[0]+i[0],e[1]=l[1]+i[1],e[2]=l[2]+i[2],e}function Goe(e,t){$s(Xw,e),$s(Qw,t),En(Xw,Xw),En(Qw,Qw);const i=pi(Xw,Qw);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Xw=Qe(),Qw=Qe();function qoe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function e2(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function t2(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],l=t[0],y=t[1],d=t[2],v=Ms();return Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-y)<=v*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(s-d)<=v*Math.max(1,Math.abs(s),Math.abs(d))}function gS(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],l=i[2]-t[2];let y=r*r+s*s+l*l;return y>0?(y=1/Math.sqrt(y),e[0]=r*y,e[1]=s*y,e[2]=l*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const In=Xr,Uoe=Uk,Boe=Bk,Hoe=r0,Woe=Dc,i2=Oo,r2=dS;Object.freeze(Object.defineProperty({__proto__:null,length:Oo,copy:$s,set:Nr,add:Xs,subtract:Xr,multiply:Uk,divide:Bk,ceil:Ioe,floor:Toe,abs:Coe,sign:Aoe,min:Poe,max:Ooe,round:koe,scale:Qs,scaleAndAdd:Tp,distance:r0,squaredDistance:Dc,squaredLength:dS,negate:fS,inverse:Roe,normalize:En,dot:pi,cross:Qr,lerp:Hk,hermite:Foe,bezier:Loe,random:Noe,transformMat4:Wk,transformMat3:joe,transformQuat:yS,rotateX:Doe,rotateY:Voe,rotateZ:zoe,angle:Goe,str:qoe,exactEquals:e2,equals:t2,direction:gS,sub:In,mul:Uoe,div:Boe,dist:Hoe,sqrDist:Woe,len:i2,sqrLen:r2},Symbol.toStringTag,{value:"Module"}));function n2(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Jk(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function Zk(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function Kk(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function Yk(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function Xk(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function Joe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Zoe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Koe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function Yoe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Xoe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Qk(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Qoe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function eR(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],l=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+l*l)}function tR(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],l=t[3]-e[3];return i*i+r*r+s*s+l*l}function mS(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function vS(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function eae(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function tae(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function iR(e,t){const i=t[0],r=t[1],s=t[2],l=t[3];let y=i*i+r*r+s*s+l*l;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=r*y,e[2]=s*y,e[3]=l*y),e}function rR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function s2(e,t,i,r){const s=t[0],l=t[1],y=t[2],d=t[3];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e[2]=y+r*(i[2]-y),e[3]=d+r*(i[3]-d),e}function iae(e,t){const i=xg;let r,s,l,y,d,v;t=t||1;do r=2*i()-1,s=2*i()-1,d=r*r+s*s;while(d>=1);do l=2*i()-1,y=2*i()-1,v=l*l+y*y;while(v>=1);const _=Math.sqrt((1-d)/v);return e[0]=t*r,e[1]=t*s,e[2]=t*l*_,e[3]=t*y*_,e}function rae(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*l+i[12]*y,e[1]=i[1]*r+i[5]*s+i[9]*l+i[13]*y,e[2]=i[2]*r+i[6]*s+i[10]*l+i[14]*y,e[3]=i[3]*r+i[7]*s+i[11]*l+i[15]*y,e}function nae(e,t,i){const r=t[0],s=t[1],l=t[2],y=i[0],d=i[1],v=i[2],_=i[3],M=_*r+d*l-v*s,T=_*s+v*r-y*l,A=_*l+y*s-d*r,R=-y*r-d*s-v*l;return e[0]=M*_+R*-y+T*-v-A*-d,e[1]=T*_+R*-d+A*-y-M*-v,e[2]=A*_+R*-v+M*-d-T*-y,e[3]=t[3],e}function sae(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function nR(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function bS(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],y=t[0],d=t[1],v=t[2],_=t[3],M=Ms();return Math.abs(i-y)<=M*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-d)<=M*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-v)<=M*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-_)<=M*Math.max(1,Math.abs(l),Math.abs(_))}const oae=Kk,aae=Yk,lae=Xk,uae=eR,cae=tR,hae=mS,pae=vS;Object.freeze(Object.defineProperty({__proto__:null,copy:n2,set:Jk,add:Zk,subtract:Kk,multiply:Yk,divide:Xk,ceil:Joe,floor:Zoe,min:Koe,max:Yoe,round:Xoe,scale:Qk,scaleAndAdd:Qoe,distance:eR,squaredDistance:tR,length:mS,squaredLength:vS,negate:eae,inverse:tae,normalize:iR,dot:rR,lerp:s2,random:iae,transformMat4:rae,transformQuat:nae,str:sae,exactEquals:nR,equals:bS,sub:oae,mul:aae,div:lae,dist:uae,sqrDist:cae,len:hae,sqrLen:pae},Symbol.toStringTag,{value:"Module"}));const sR=new Float32Array(1);function w8e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Tn(e,t,i){return Math.min(Math.max(e,t),i)}function _8e(e){return(e&e-1)==0}function x8e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function S8e(e,t,i){return e+(t-e)*i}function oR(e){return e*Math.PI/180}function wS(e){return 180*e/Math.PI}function M8e(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function _S(e){return Math.acos(Tn(e,-1,1))}function aR(e){return Math.asin(Tn(e,-1,1))}function rl(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const o2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function dae(e){return o2.setFloat64(0,e),o2.getBigInt64(0)}function fae(e){return o2.setBigInt64(0,e),o2.getFloat64(0)}const xS=BigInt("1000000");yae(1);function yae(e){const t=dae(e=Math.abs(e)),i=fae(t<=xS?xS:t-xS);return Math.abs(e-i)}function $8e(e){return lR(Math.max(-cR,Math.min(e,cR)))}function lR(e){return sR[0]=e,sR[0]}function uR(e,t){const i=Oo(e),r=aR(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return Nr(t,i,r,s),t}function E8e(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(rl(t,1)&&rl(i,1)&&rl(r,1))}const cR=lR(34028234663852886e22);function a2(e){return Tn(Wb(e),0,255)}function l2(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Pr{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,s=new Pr){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),l=r[1];if(l==="rgb"&&s.length===3||l==="rgba"&&s.length===4){const y=s[0];if(y.charAt(y.length-1)==="%"){const d=s.map(v=>2.56*parseFloat(v));return s.length===4&&(d[3]=parseFloat(s[3])),Pr.fromArray(d,i)}return Pr.fromArray(s.map(d=>parseFloat(d)),i)}if(l==="hsl"&&s.length===3||l==="hsla"&&s.length===4)return Pr.fromArray(Fk(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new Pr){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,s=(1<<r)-1;let l=Number("0x"+t.substr(1));return isNaN(l)?null:(["b","g","r"].forEach(y=>{const d=l&s;l>>=r,i[y]=r===4?17*d:d}),i.a=1,i)}static fromArray(t,i=new Pr){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=Rk(t)?uS(t):null;return r&&Pr.fromArray(r,i)||Pr.fromRgb(t,i)||Pr.fromHex(t,i)}static fromJSON(t){return t&&new Pr([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return q(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return q(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,s,l;return typeof t=="string"?Pr.fromString(t,this):Array.isArray(t)?Pr.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(s=t.b)!=null?s:0,(l=t.a)!=null?l:1),t instanceof Pr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Pr.AlphaMode.ALWAYS){const i=a2(this.r),r=a2(this.g),s=a2(this.b);return t===Pr.AlphaMode.ALWAYS||this.a!==1?[i,r,s,a2(255*this.a)]:[i,r,s]}clone(){return new Pr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return q(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(l2(this.r,0,255)),this.g=Math.round(l2(this.g,0,255)),this.b=Math.round(l2(this.b,0,255)),this.a=l2(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}}Pr.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Pr||(Pr={}));const mt=Pr,hR=new bt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let gae=0,n0=class extends Ie{constructor(e){super(e),this.id="sym"+gae++,this.type=null,this.color=new mt([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};m([x({type:hR.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:hR.write}}})],n0.prototype,"type",void 0),m([x({type:mt,json:{write:{allowNull:!0}}})],n0.prototype,"color",void 0),m([Be("color")],n0.prototype,"readColor",null),n0=m([Y("esri.symbols.Symbol")],n0);const ls=n0;var SS;let Vc=SS=class extends ls{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(l=>{const y=l.valueExpressionInfo;return as(e,t,y.expression)});await Promise.all(s)}}}clone(){return new SS({data:me(this.data)})}hash(){return C9(JSON.stringify(this.data)).toString()}};m([x({json:{write:!1}})],Vc.prototype,"color",void 0),m([x({json:{write:!0}})],Vc.prototype,"data",void 0),m([Be("data",["symbol"])],Vc.prototype,"readData",null),m([Ke("data",{})],Vc.prototype,"writeData",null),m([wt({CIMSymbolReference:"cim"},{readOnly:!0})],Vc.prototype,"type",void 0),Vc=SS=m([Y("esri.symbols.CIMSymbol")],Vc);const zc=Vc;let s0=class extends Ie{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};m([x({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],s0.prototype,"enabled",void 0),m([Ke("enabled")],s0.prototype,"writeEnabled",null),m([x({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],s0.prototype,"type",void 0),s0=m([Y("esri.symbols.Symbol3DLayer")],s0);const nl=s0,mae=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,vae="screenUtils.toPt: input not recognized!",pR=96;function dR(e){return e?e/72*pR:0}function ko(e){return e?72*e/pR:0}function di(e){if(typeof e=="string"){const t=e.match(mae);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",l=r==="px"?ko(i):i;return s?-l:l}return console.warn(vae),null}return e}function Cn(e=0,t=0){return{x:e,y:t}}function Sg(e=0,t=0){return[e,t]}function I8e(e=0,t=0,i=0){return bae([e,t,i])}function T8e(e){return e}function bae(e){return e}function C8e(e){return e}function A8e(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function u2(e){const t=Wb(100*(1-e));return Math.max(0,Math.min(t,100))}function Mg(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function wae(e,t){const i=t.transparency!=null?Mg(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new mt([r[0]||0,r[1]||0,r[2]||0,i]):null}function _ae(e,t){t.color=e.toJSON().slice(0,3);const i=u2(e.a);i!==0&&(t.transparency=i)}const Gc={type:mt,json:{type:[hi],default:null,read:{source:["color","transparency"],reader:wae},write:{target:{color:{type:[hi]},transparency:{type:hi}},writer:_ae}}},sl={type:Number,cast:di,json:{write:!0}};let Cp=class extends Ie{constructor(e){super(e),this.color=new mt([0,0,0,1]),this.extensionLength=0,this.size=ko(1)}clone(){}cloneProperties(){return{color:me(this.color),size:this.size,extensionLength:this.extensionLength}}};m([x({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Cp.prototype,"type",void 0),m([x(Gc)],Cp.prototype,"color",void 0),m([x(De(te({},sl),{json:{write:{overridePolicy:e=>({enabled:!!e})}}}))],Cp.prototype,"extensionLength",void 0),m([x(sl)],Cp.prototype,"size",void 0),Cp=m([Y("esri.symbols.edges.Edges3D")],Cp);const MS=Cp;var $S;let c2=$S=class extends MS{constructor(e){super(e),this.type="sketch"}clone(){return new $S(this.cloneProperties())}};m([wt({sketch:"sketch"},{readOnly:!0})],c2.prototype,"type",void 0),c2=$S=m([Y("esri.symbols.edges.SketchEdges3D")],c2);const xae=c2;var ES;let h2=ES=class extends MS{constructor(e){super(e),this.type="solid"}clone(){return new ES(this.cloneProperties())}};m([wt({solid:"solid"},{readOnly:!0})],h2.prototype,"type",void 0),h2=ES=m([Y("esri.symbols.support.SolidEdges3D")],h2);const Sae=h2,fR={types:{key:"type",base:MS,typeMap:{solid:Sae,sketch:xae}},json:{write:!0}};var IS;let eo=IS=class extends Ie{constructor(e){super(e),this.color=null}clone(){const e={color:q(this.color)?this.color.clone():null};return new IS(e)}};m([x(Gc)],eo.prototype,"color",void 0),eo=IS=m([Y("esri.symbols.support.Symbol3DMaterial")],eo);var TS;let qc=TS=class extends nl{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new TS({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:q(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};m([wt({Extrude:"extrude"},{readOnly:!0})],qc.prototype,"type",void 0),m([x({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],qc.prototype,"size",void 0),m([x({type:eo,json:{write:!0}})],qc.prototype,"material",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],qc.prototype,"castShadows",void 0),m([x(fR)],qc.prototype,"edges",void 0),qc=TS=m([Y("esri.symbols.ExtrudeSymbol3DLayer")],qc);const yR=qc;let $g=class extends ls{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};m([wt({esriSLS:"simple-line"},{readOnly:!0})],$g.prototype,"type",void 0),m([x({type:Number,cast:di,json:{write:!0}})],$g.prototype,"width",void 0),$g=m([Y("esri.symbols.LineSymbol")],$g);const Mae=$g,$ae=["begin","end","begin-end"],gR=["arrow","circle","square","diamond","cross","x"];var CS;let ol=CS=class extends Ie{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new CS({color:me(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};m([x({type:["begin","end","begin-end"],json:{write:!0}})],ol.prototype,"placement",void 0),m([wt({"line-marker":"line-marker"},{readOnly:!0}),x({json:{origins:{"web-map":{write:!1}}}})],ol.prototype,"type",void 0),m([x({type:gR})],ol.prototype,"style",void 0),m([Ke("style")],ol.prototype,"writeStyle",null),m([x({type:mt,value:null,json:{write:{allowNull:!0}}})],ol.prototype,"color",null),m([Be("color")],ol.prototype,"readColor",null),m([Ke("color")],ol.prototype,"writeColor",null),ol=CS=m([Y("esri.symbols.LineSymbolMarker")],ol);const Eae=ol;var AS;const PS=new bt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let cu=AS=class extends Mae{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,l){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=di(i)),r!=null&&(y.cap=r),s!=null&&(y.join=s),l!=null&&(y.miterLimit=di(l)),y}clone(){var e;return new AS({color:me(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};m([wt({esriSLS:"simple-line"},{readOnly:!0})],cu.prototype,"type",void 0),m([x({type:PS.apiValues,json:{read:PS.read,write:PS.write}})],cu.prototype,"style",void 0),m([x({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],cu.prototype,"cap",void 0),m([x({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],cu.prototype,"join",void 0),m([x({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Eae}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],cu.prototype,"marker",void 0),m([x({type:Number,json:{read:!1,write:!1}})],cu.prototype,"miterLimit",void 0),cu=AS=m([Y("esri.symbols.SimpleLineSymbol")],cu);const us=cu;let Eg=class extends ls{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};m([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":us}},json:{default:null,write:!0}})],Eg.prototype,"outline",void 0),m([x({type:["simple-fill","picture-fill"],readOnly:!0})],Eg.prototype,"type",void 0),Eg=m([Y("esri.symbols.FillSymbol")],Eg);const mR=Eg;let p2=class extends Ie{constructor(e){super(e)}clone(){}};m([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],p2.prototype,"type",void 0),p2=m([Y("esri.symbols.patterns.LinePattern3D")],p2);const vR=p2,Iae=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var OS;const Tae=$n()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Ig=OS=class extends vR{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new OS(e)}};m([x({type:["style"]})],Ig.prototype,"type",void 0),m([wt(Tae),x({type:Iae})],Ig.prototype,"style",void 0),Ig=OS=m([Y("esri.symbols.patterns.LineStylePattern3D")],Ig);const kS=Ig;let d2=class extends Ie{constructor(e){super(e)}clone(){}};m([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],d2.prototype,"type",void 0),d2=m([Y("esri.symbols.patterns.Pattern3D")],d2);const bR=d2,Cae=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var RS;let Tg=RS=class extends bR{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new RS(e)}};m([x({type:["style"]})],Tg.prototype,"type",void 0),m([x({type:Cae,json:{read:!0,write:!0}})],Tg.prototype,"style",void 0),Tg=RS=m([Y("esri.symbols.patterns.StylePattern3D")],Tg);const wR=Tg,Aae={types:{key:"type",base:bR,typeMap:{style:wR}},json:{write:!0}},_R={types:{key:"type",base:vR,typeMap:{style:kS}},json:{write:!0}},Cg=new mt("white");new mt("black");const Pae=new mt([255,255,255,0]);function Oae(e){return e.r===0&&e.g===0&&e.b===0}var FS;let Ag=FS=class extends eo{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:q(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new FS(e)}};m([wt({multiply:"multiply",replace:"replace",tint:"tint"})],Ag.prototype,"colorMixMode",void 0),Ag=FS=m([Y("esri.symbols.support.Symbol3DFillMaterial")],Ag);function f2(e){return e}function Ro(e=Nae){return f2([e[0],e[1],e[2],e[3]])}function P8e(e){return f2([e[0],e[1],e[2],e[3]])}function LS(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function O8e(e,t,i,r,s=Ro()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function k8e(e,t=Ro()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function R8e(e,t){return new ai({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function F8e(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function L8e(e,t,i){if(ae(t))LS(i,e);else if("length"in t)jS(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}}function NS(e,t,i=e){const r=t.length;let s=e[0],l=e[1],y=e[2],d=e[3];for(let v=0;v<r;v++){const _=t[v];s=Math.min(s,_[0]),l=Math.min(l,_[1]),y=Math.max(y,_[0]),d=Math.max(d,_[1])}return i[0]=s,i[1]=l,i[2]=y,i[3]=d,i}function N8e(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function kae(e){return ae(e)||e[0]>=e[2]?0:e[2]-e[0]}function Rae(e){return e[1]>=e[3]?0:e[3]-e[1]}function j8e(e){return kae(e)*Rae(e)}function D8e(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function V8e(e,t){return xR(e,t[0],t[1])}function z8e(e,t){return xR(e,t.x,t.y)}function xR(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function G8e(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function q8e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Fae(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function U8e(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function Lae(e){return e?LS(e,SR):Ro(SR)}function jS(e){return e!=null&&e.length===4}function B8e(e,t){return jS(e)&&jS(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const SR=f2([1/0,1/0,-1/0,-1/0]),Nae=f2([0,0,0,0]);function DS(e){return e}function y2(e=zae){return DS([e[0],e[1],e[2],e[3],e[4],e[5]])}function VS(e,t,i,r,s,l,y=y2()){return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=s,y[5]=l,y}function H8e(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new ai(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function W8e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function J8e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function Z8e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function K8e(e,t,i=0,r=t.length/3){let s=e[0],l=e[1],y=e[2],d=e[3],v=e[4],_=e[5];for(let M=0;M<r;M++)s=Math.min(s,t[i+3*M]),l=Math.min(l,t[i+3*M+1]),y=Math.min(y,t[i+3*M+2]),d=Math.max(d,t[i+3*M]),v=Math.max(v,t[i+3*M+1]),_=Math.max(_,t[i+3*M+2]);e[0]=s,e[1]=l,e[2]=y,e[3]=d,e[4]=v,e[5]=_}function zS(e,t,i){const r=t.length;let s=e[0],l=e[1],y=e[2],d=e[3],v=e[4],_=e[5];if(i)for(let M=0;M<r;M++){const T=t[M];s=Math.min(s,T[0]),l=Math.min(l,T[1]),y=Math.min(y,T[2]),d=Math.max(d,T[0]),v=Math.max(v,T[1]),_=Math.max(_,T[2])}else for(let M=0;M<r;M++){const T=t[M];s=Math.min(s,T[0]),l=Math.min(l,T[1]),d=Math.max(d,T[0]),v=Math.max(v,T[1])}e[0]=s,e[1]=l,e[2]=y,e[3]=d,e[4]=v,e[5]=_}function Y8e(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Pg(e){return e[0]>=e[3]?0:e[3]-e[0]}function Og(e){return e[1]>=e[4]?0:e[4]-e[1]}function kg(e){return e[2]>=e[5]?0:e[5]-e[2]}function X8e(e){const t=Pg(e),i=kg(e),r=Og(e);return Math.sqrt(t*t+i*i+r*r)}function Q8e(e,t=[0,0,0]){return t[0]=e[0]+Pg(e)/2,t[1]=e[1]+Og(e)/2,t[2]=e[2]+kg(e)/2,t}function eEe(e,t=[0,0,0]){return t[0]=Pg(e),t[1]=Og(e),t[2]=kg(e),t}function tEe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function jae(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function iEe(e,t){return!!ae(t)||jae(e,t)}function rEe(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s}function nEe(e,t,i=e){const r=e[0]+Pg(e)/2,s=e[1]+Og(e)/2,l=e[2]+kg(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=l+(e[2]-l)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=l+(e[5]-l)*t,i}function sEe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function oEe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function aEe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function Dae(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Vae(e){return e?Dae(e,$R):y2($R)}function lEe(e,t){return t||(t=Ro()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function uEe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function MR(e){return e.length===6}function cEe(e){return Pg(e)===0&&Og(e)===0&&kg(e)===0}function hEe(e,t,i){if(ae(e)||ae(t))return e===t;if(!MR(e)||!MR(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const $R=DS([1/0,1/0,1/0,-1/0,-1/0,-1/0]),zae=DS([0,0,0,0,0,0]);y2();function pEe(e,{isPrimitive:t,width:i,depth:r,height:s}){const l=t?10:1;if(i==null&&s==null&&r==null)return[l*e[0],l*e[1],l*e[2]];const y=Ar(i,r,s);let d;for(let v=0;v<3;v++){const _=y[v];if(_!=null){d=_/e[v];break}}for(let v=0;v<3;v++)y[v]==null&&(y[v]=e[v]*d);return y}const Gae=VS(-.5,-.5,-.5,.5,.5,.5),qae=VS(-.5,-.5,0,.5,.5,1),Uae=VS(-.5,-.5,0,.5,.5,.5);function dEe(e){switch(e){case"sphere":case"cube":case"diamond":return Gae;case"cylinder":case"cone":case"inverted-cone":return qae;case"tetrahedron":return Uae;default:return}}const GS=["butt","square","round"],Bae=[...GS,"none"],ER=["miter","bevel","round"];var qS;let Ap=qS=class extends Ie{constructor(e){super(e),this.color=new mt([0,0,0,1]),this.size=ko(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:q(this.color)?this.color.clone():null,size:this.size,pattern:q(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new qS(e)}};m([x(Gc)],Ap.prototype,"color",void 0),m([x(sl)],Ap.prototype,"size",void 0),m([x(_R)],Ap.prototype,"pattern",void 0),m([x({type:GS,json:{default:"butt",write:{overridePolicy(){return{enabled:q(this.pattern)}}}}})],Ap.prototype,"patternCap",void 0),Ap=qS=m([Y("esri.symbols.support.Symbol3DOutline")],Ap);var g2;let hu=g2=class extends nl{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:q(this.edges)?this.edges.clone():null,enabled:this.enabled,material:q(this.material)?this.material.clone():null,pattern:q(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:q(this.outline)?this.outline.clone():null};return new g2(e)}static fromSimpleFillSymbol(e){var r,s,l,y,d,v;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new kS({style:e.outline.style}):null,i={size:(s=(r=e.outline)==null?void 0:r.width)!=null?s:0,color:((y=(l=e.outline)==null?void 0:l.color)!=null?y:Cg).clone(),pattern:t};return t&&((d=e.outline)==null?void 0:d.cap)&&(i.patternCap=e.outline.cap),new g2({material:new Ag({color:((v=e.color)!=null?v:Pae).clone()}),pattern:e.style&&e.style!=="solid"?new wR({style:e.style}):null,outline:i})}};m([wt({Fill:"fill"},{readOnly:!0})],hu.prototype,"type",void 0),m([x({type:Ag,json:{write:!0}})],hu.prototype,"material",void 0),m([x(Aae)],hu.prototype,"pattern",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],hu.prototype,"castShadows",void 0),m([x({type:Ap,json:{write:!0}})],hu.prototype,"outline",void 0),m([x(fR)],hu.prototype,"edges",void 0),hu=g2=m([Y("esri.symbols.FillSymbol3DLayer")],hu);const Rg=hu,Hae=["none","underline","line-through"],Wae=["normal","italic","oblique"],Jae=["normal","lighter","bold","bolder"],IR={type:Number,cast:e=>{const t=$o(e);return t===0?1:Tn(t,.1,4)},nonNullable:!0},Zae=["left","right","center"],Kae=["baseline","top","middle","bottom"],TR={type:Zae,nonNullable:!0},CR={type:Kae,nonNullable:!0};var US;let pu=US=class extends Ie{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return di(e)}clone(){return new US({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};m([x({type:Hae,json:{default:"none",write:!0}})],pu.prototype,"decoration",void 0),m([x({type:String,json:{write:!0}})],pu.prototype,"family",void 0),m([x({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],pu.prototype,"size",void 0),m([ri("size")],pu.prototype,"castSize",null),m([x({type:Wae,json:{default:"normal",write:!0}})],pu.prototype,"style",void 0),m([x({type:Jae,json:{default:"normal",write:!0}})],pu.prototype,"weight",void 0),pu=US=m([Y("esri.symbols.Font")],pu);const m2=pu,Yae=Ae.getLogger("esri.core.urlUtils"),o0=gi.request,AR="esri/config: esriConfig.request.proxyUrl is not set.",PR=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,OR=/^\s*http:/i,Xae=/^\s*https:/i,Qae=/^\s*file:/i,ele=/:\d+$/,tle=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ile=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),rle=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class a0{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=Fr(this.uri.match(ile));this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=Fr(this.authority.match(rle)),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const v2={},nle=new a0(gi.applicationUrl);let Dn=nle;const sle=ole();let BS=sle;const HS=()=>Dn,fEe=()=>BS;function ole(){const e=Fr(Dn.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Dn.scheme}://${Dn.host}${Dn.port!=null?`:${Dn.port}`:""}`}${t}`}function yn(e){if(!e)return null;const t={path:null,query:null},i=new a0(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=kR(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function kR(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let l,y;s<0?(l=decodeURIComponent(r),y=""):(l=decodeURIComponent(r.slice(0,s)),y=decodeURIComponent(r.slice(s+1)));let d=i[l];typeof d=="string"&&(d=i[l]=[d]),Array.isArray(d)?d.push(y):i[l]=y}return i}function RR(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function l0(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",l=t&&t[i];return l?s+encodeURIComponent(l(r)):Array.isArray(r)?r.map(y=>RR(y)?s+encodeURIComponent(JSON.stringify(y)):s+encodeURIComponent(y)).join("&"):RR(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function ale(e=!1){let t,i=o0.proxyUrl;if(typeof e=="string"){t=fle(e);const r=b2(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Yae.warn(AR),new fe("urlutils:proxy-not-set",AR);return t&&XS()&&(i=YS(i)),yn(i)}function lle(e){const t=b2(e);let i,r;if(t){const s=WS(t.proxyUrl);i=s.path,r=s.query?kR(s.query):null}if(i){const s=yn(e);e=i+"?"+s.path;const l=l0(te(te({},r),s.query));l&&(e=`${e}?${l}`)}return e}const Fg={path:"",query:""};function WS(e){const t=e.indexOf("?");return t!==-1?(Fg.path=e.slice(0,t),Fg.query=e.slice(t+1)):(Fg.path=e,Fg.query=null),Fg}function FR(e){return e=(e=_2(e=wle(e=WS(e).path),!0)).toLowerCase()}function ule(e){const t={proxyUrl:e.proxyUrl,urlPrefix:FR(e.urlPrefix)},i=o0.proxyRules,r=t.urlPrefix;let s=i.length;for(let l=0;l<i.length;l++){const y=i[l].urlPrefix;if(r.indexOf(y)===0){if(r.length===y.length)return-1;s=l;break}y.indexOf(r)===0&&(s=l+1)}return i.splice(s,0,t),s}function b2(e){const t=o0.proxyRules,i=FR(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function LR(e,t){return e=NR(e),t=NR(t),_2(e)===_2(t)}function NR(e){const t=(e=ua(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function jR(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=o0.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function Lg(e,t,i=!1){if(!e||!t)return!1;const r=e6(e),s=e6(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function JS(e){if(typeof e=="string"){if(!to(e))return!0;e=e6(e)}if(Lg(e,Dn))return!0;const t=o0.trustedServers||[];for(let i=0;i<t.length;i++){const r=cle(t[i]);for(let s=0;s<r.length;s++)if(Lg(e,r[s]))return!0}return!1}function cle(e){return v2[e]||(KS(e)||al(e)?v2[e]=[new a0(Fo(e))]:v2[e]=[new a0(`http://${e}`),new a0(`https://${e}`)]),v2[e]}function Fo(e,t=BS,i){return al(e)?i&&i.preserveProtocolRelative?e:Dn.scheme==="http"&&Dn.authority===ca(e).slice(2)?`http:${e}`:`https:${e}`:KS(e)?e:Fr(Uc(e[0]==="/"?vle(t):t,e))}function ZS(e,t=BS,i){if(e==null||!to(e))return e;const r=ua(e),s=r.toLowerCase(),l=ua(t).toLowerCase().replace(/\/+$/,""),y=i?ua(i).toLowerCase().replace(/\/+$/,""):null;if(y&&l.indexOf(y)!==0)return e;const d=(T,A,R)=>(R=T.indexOf(A,R))===-1?T.length:R;let v=d(s,"/",s.indexOf("//")+2),_=-1;for(;s.slice(0,v+1)===l.slice(0,v)+"/"&&(_=v+1,v!==s.length);)v=d(s,"/",v+1);if(_===-1||y&&_<y.length)return e;e=r.slice(_);const M=l.slice(_-1).replace(/[^/]+/g,"").length;if(M>0)for(let T=0;T<M;T++)e=`../${e}`;else e=`./${e}`;return e}function ua(e){return e=Sle(e=xle(e=_le(e=Fo(e=e.trim()))))}function Uc(...e){const t=e.filter(q);if(!t||!t.length)return;const i=[];if(to(t[0])){const s=t[0],l=s.indexOf("//");l!==-1&&(i.push(s.slice(0,l+1)),gle(t[0])&&(i[0]+="/"),t[0]=s.slice(l+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,l)=>l?s.concat(l.split("/")):s,[]);for(let s=0;s<r.length;s++){const l=r[s];l===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!l&&s===r.length-1||l&&(l!=="."||i.length===0))&&i.push(l)}return i.join("/")}function ca(e,t=!1){if(e==null||w2(e)||Pp(e))return null;let i=e.indexOf("://");if(i===-1&&al(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=_2(e,!0)),e}function to(e){return al(e)||KS(e)}function w2(e){return e!=null&&e.slice(0,5)==="blob:"}function Pp(e){return e!=null&&e.slice(0,5)==="data:"}function yEe(e){const t=DR(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function gEe(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const hle=/^data:(.*?)(;base64)?,(.*)$/;function DR(e){const t=e.match(hle);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function VR(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function mEe(e,t){ple(e,t)||dle(e,t)}function ple(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function dle(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function al(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function KS(e){return e!=null&&PR.test(e)}function fle(e){return e!=null&&Xae.test(e)||Dn.scheme==="https"&&al(e)}function yle(e){return e!=null&&OR.test(e)||Dn.scheme==="http"&&al(e)}function gle(e){return e!=null&&Qae.test(e)}function YS(e){return al(e)?`https:${e}`:e.replace(OR,"https:")}function mle(){return Dn.scheme==="http"}function XS(){return Dn.scheme==="https"}function _2(e,t=!1){return al(e)?e.slice(2):(e=e.replace(PR,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function vle(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function ble(e){let t=0;if(to(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function vEe(e,t){if(!e)return"";const i=yn(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t==null?void 0:t.length))return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function wle(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function zR(e){return e.replace(/\/+$/,"")}function _le(e){if(/^https?:\/\//i.test(e)){const t=WS(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function xle(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Sle(e){const t=o0.httpsDomains;if(!yle(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),ele.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return mle()&&r===Dn.authority&&!tle.test(e)||(XS()&&r===Dn.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||XS()&&!b2(e))&&(e=YS(e)),e}function QS(e,t,i){if(!(t&&i&&e&&to(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),l=e.indexOf(":",r+2),y=Math.min(s<0?e.length:s,l<0?e.length:l);return e.slice(r+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(y)}`}function e6(e){return typeof e=="string"?new a0(Fo(e)):(e.scheme||(e.scheme=Dn.scheme),e)}function bEe(e){return Mle.test(e)}function GR(e,t){const i=yn(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function qR(e,t,i){const r=yn(e),s=r.query||{};return s[t]=String(i),`${r.path}?${l0(s)}`}function t6(e,t){const i=yn(e),r=i.query||{};for(const l in t)r[l]=t[l];const s=l0(r);return s?`${i.path}?${s}`:i.path}function wEe(e){if(ae(e))return null;const t=e.match(BR);return t?t[2]:null}function UR(e){if(ae(e))return null;const t=e.match(BR);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}const BR=/([^.]*)\.([^\/]*)$/,Mle=/(^data:image\/svg|\.svg$)/i;function u0(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=Fo(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=ZS(e,t.portalItem.itemUrl);r!=null&&$le.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return r6(e,t&&t.portal)}function Ng(e,t,i=jg.YES){if(e==null)return e;!to(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=Fo(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const l=r6(s,t.portal);r=ZS(r6(r,t.portal),l,l),r!=null&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=WR(r,t==null?void 0:t.portal),to(r)&&(r=ua(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!to(r)&&!Pp(r)&&i===jg.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function i6(e,t,i){return u0(e,i)}function Op(e,t,i,r){const s=Ng(e,r);s!==void 0&&(t[i]=s)}const HR=/\/items\/([^\/]+)\/resources\/(.*)/,$le=/^\.\/resources\//;function Ele(e){var t,i,r;return(r=(i=(t=e==null?void 0:e.match(HR))!=null?t:null)==null?void 0:i[1])!=null?r:null}function Ile(e){var y;const t=(y=e==null?void 0:e.match(HR))!=null?y:null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:d,extension:v}=UR(i);return{prefix:null,filename:d,extension:Wt(v)}}const{path:s,extension:l}=UR(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:Wt(l)}}function WR(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?QS(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function r6(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=HS();return Lg(r,`${r.scheme}://${i}`)?QS(e,t.portalHostname,i):QS(e,i,t.portalHostname)}var jg;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(jg||(jg={}));const _Ee=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:u0,toJSON:Ng,read:i6,write:Op,itemIdFromResourceUrl:Ele,prefixAndFilenameFromResourceUrl:Ile,ensureMainOnlineDomain:WR,get MarkKeep(){return jg}},Symbol.toStringTag,{value:"Module"}));var n6;const Tle=$n()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let kp=n6=class extends Ie{constructor(e){super(e)}readHref(e,t,i){return e?u0(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Pp(e)?t.dataURI=e:(t.href=Ng(e,r),to(t.href)&&(t.href=ua(t.href))))}clone(){return new n6({href:this.href,primitive:this.primitive})}};m([x({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],kp.prototype,"href",void 0),m([Be("href")],kp.prototype,"readHref",null),m([Ke("href",{href:{type:String},dataURI:{type:String}})],kp.prototype,"writeHref",null),m([wt(Tle)],kp.prototype,"primitive",void 0),kp=n6=m([Y("esri.symbols.support.IconSymbol3DLayerResource")],kp);const xEe="circle";var s6;let c0=s6=class extends ot{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new s6({x:this.x,y:this.y})}};m([x({type:Number})],c0.prototype,"x",void 0),m([x({type:Number})],c0.prototype,"y",void 0),c0=s6=m([Y("esri.symbols.support.Symbol3DAnchorPosition2D")],c0);var o6;let Dg=o6=class extends Ie{constructor(e){super(e),this.color=new mt([0,0,0,1]),this.size=ko(1)}clone(){const e={color:q(this.color)?this.color.clone():null,size:this.size};return new o6(e)}};m([x(Gc)],Dg.prototype,"color",void 0),m([x(sl)],Dg.prototype,"size",void 0),Dg=o6=m([Y("esri.symbols.support.Symbol3DIconOutline")],Dg);var h0;const JR="esri.symbols.IconSymbol3DLayer";let ll=h0=class extends nl{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new h0({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:q(this.material)?this.material.clone():null,outline:q(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Cg,i=ZR(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Cg).clone()}:null;return new h0({size:e.size,resource:{primitive:Ale(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||Oae(e.color)?Cg:e.color,i=ZR(e);return new h0({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new h0({resource:{href:VR({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function ZR(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=KR(e.xoffset),s=KR(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function KR(e){return isFinite(e)?e:0}m([x({type:eo,json:{write:!0}})],ll.prototype,"material",void 0),m([x({type:kp,json:{write:!0}})],ll.prototype,"resource",void 0),m([wt({Icon:"icon"},{readOnly:!0})],ll.prototype,"type",void 0),m([x(sl)],ll.prototype,"size",void 0),m([wt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),x({json:{default:"center"}})],ll.prototype,"anchor",void 0),m([x({type:c0,json:{type:[Number],read:{reader:e=>new c0({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ll.prototype,"anchorPosition",void 0),m([x({type:Dg,json:{write:!0}})],ll.prototype,"outline",void 0),ll=h0=m([Y(JR)],ll);const Cle={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Ale(e){return Cle[e]||(Ae.getLogger(JR).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Rp=ll;function Fp(e,t,i=gt){return t||(t=new i),t===e||(t.removeAll(),Ple(e)?t.addMany(e):e&&t.add(e)),t}function YR(e){return e}function Ple(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const XR="20221121",QR="f520630575ed53cf8b49e5f1492799065ee366e5",eF="4.25",Ole={async request(e,t){var d,v;const{default:i}=await Promise.resolve().then(function(){return Qle}),r=e.options,s=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((d=jR(e.url))==null?void 0:d.after)?s:"array-buffer";const l=await i(e.url,r),y={data:l.data,ssl:l.ssl};switch((v=l.requestOptions)==null?void 0:v.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let gr;function SEe(e){gr=e}function kle(e){const t=gr&&gr.findCredential(e);return t&&t.token?qR(e,"token",t.token):e}Me("host-webworker");const Rle=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Fle={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function MEe(e){const t=e==null?void 0:e.match(Rle);if(!t)return null;const[,i,r,s]=t;if(!i)return null;let l=null,y=null,d=null;const{devext:v,qaext:_,www:M}=Fle;if(r)if(l=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:d}=v);break;case"qa":({customBaseUrl:y,portalHostname:d}=_);break;default:return null}else({customBaseUrl:y,portalHostname:d}=M);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:d}=v);break;case"qaext":({customBaseUrl:y,portalHostname:d}=_);break;case"www":({customBaseUrl:y,portalHostname:d}=M);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:d,urlKey:l}}function Lle(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}const Nle=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function tF(e){const t=ca(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Nle.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function jle(e,t,i=!1,r){return new Promise((s,l)=>{if(Eo(r))return void l(iF());let y=()=>{_(),l(new Error(`Unable to load ${t}`))},d=()=>{const M=e;_(),s(M)},v=()=>{if(!e)return;const M=e;_(),M.src="",l(iF())};const _=()=>{Me("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",d)),y=null,d=null,e=null,q(r)&&r.removeEventListener("abort",v),v=null,i&&URL.revokeObjectURL(t)};q(r)&&r.addEventListener("abort",v),Me("esri-image-decode")?e.decode().then(d,y):(e.addEventListener("error",y),e.addEventListener("load",d))})}function iF(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function Dle(e){var i,r,s;gi.request.crossOriginNoCorsDomains||(gi.request.crossOriginNoCorsDomains={});const t=gi.request.crossOriginNoCorsDomains;for(let l of e)l=l.toLowerCase(),/^https?:\/\//.test(l)?t[(i=ca(l))!=null?i:""]=0:(t[(r=ca("http://"+l))!=null?r:""]=0,t[(s=ca("https://"+l))!=null?s:""]=0)}function Vle(e){const t=gi.request.crossOriginNoCorsDomains;if(t){let i=ca(e);if(i)return i=i.toLowerCase(),!Lg(i,HS())&&t[i]<Date.now()-36e5}return!1}async function zle(e){var s;const t=gi.request.crossOriginNoCorsDomains,i=ca(e);t&&i&&(t[i.toLowerCase()]=Date.now());const r=yn(e);e=r.path,((s=r.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function li(e,t){var _;const i=Pp(e),r=w2(e);r||i||(e=ua(e));const s={url:e,requestOptions:te({},Wt(t))};let l=jR(e);if(l){const M=await Zle(l,s);if(M!=null)return{data:M,getHeader:a6,requestOptions:s.requestOptions,url:s.url};l.after||l.error||(l=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"){if(Me("host-webworker")||Me("host-node"))throw pa("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw pa("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),s);if(t.method==="head"){if(t.body)throw pa("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw pa("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Hle(),x2)return x2.execute(e,t);const y=new AbortController;Io(t,()=>y.abort());const d={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:ha.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=await Yle(d);return(_=l==null?void 0:l.after)==null||_.call(l,v),v}let x2;const ha=gi.request,rF="FormData"in globalThis,Gle=[499,498,403,401],qle=["COM_0056","COM_0057","SB_0008"],Ule=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],a6=()=>null,S2=Symbol();function Ble(e){const t=ca(e);t&&!li._corsServers.includes(t)&&li._corsServers.push(t)}function nF(e){const t=ca(e);return!t||t.endsWith(".arcgis.com")||li._corsServers.includes(t)||JS(t)}function pa(e,t,i,r){let s="Error";const l={url:i.url,requestOptions:i.requestOptions,getHeader:a6,ssl:!1};if(t instanceof fe)return t.details?(t.details=me(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=l,t;if(t){const y=r&&(_=>r.headers.get(_)),d=r&&r.status,v=t.message;v&&(s=v),y&&(l.getHeader=y),l.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||d||0,l.subCode=t.subcode,l.messageCode=t.messageCode,typeof t.details=="string"?l.messages=[t.details]:l.messages=t.details,l.raw=S2 in t?t[S2]:t}return Zs(t)?zi():new fe(e,s,l)}async function Hle(){Me("host-webworker")?x2||(x2=await import("./request.3704f928.js")):li._abortableFetch||(li._abortableFetch=globalThis.fetch.bind(globalThis))}async function l6(){gr||await import("./IdentityManager.a5c8b34b.js")}async function Wle(e){var d;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let l=null,y=null;if(rF&&"HTMLFormElement"in globalThis&&(s instanceof FormData?l=s:s instanceof HTMLFormElement&&(l=new FormData(s))),typeof s=="string"&&(y=s),e.fetchOptions={cache:i.cacheBust&&!li._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:ha.priority,redirect:"follow",signal:r},(l||y)&&(e.fetchOptions.body=l||y),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((d=i.query)==null?void 0:d.token)||(l==null?void 0:l.get("token"))),!e.hasToken&&gi.apiKey&&tF(t)&&(i.query||(i.query={}),i.query.token=gi.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!sF(t)&&!Eo(r)){let v;i.authMode==="immediate"?(await l6(),v=await gr.getCredential(t,{signal:r}),e.credential=v):i.authMode==="no-prompt"?(await l6(),v=await gr.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=v):gr&&(v=gr.findCredential(t)),v&&(e.credentialToken=v.token,e.useSSL=!!v.ssl)}}function sF(e){return Ule.some(t=>t.test(e))}async function Jle(e){var A,R;let t=e.params.url;const i=e.params.requestOptions,r=(A=e.fetchOptions)!=null?A:{},s=w2(t)||Pp(t),l=i.responseType||"json",y=s?0:i.timeout!=null?i.timeout:ha.timeout;let d=!1;if(!s){e.useSSL&&(t=YS(t)),i.cacheBust&&r.cache==="default"&&(t=qR(t,"request.preventCache",Date.now()));let F=te({},i.query);e.credentialToken&&(F.token=e.credentialToken);let V=l0(F);Me("esri-url-encodes-apostrophe")&&(V=V.replace(/'/g,"%27"));const z=t.length+1+V.length;let W;d=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||z>ha.maxUrlLength;const Z=i.useProxy||!!b2(t);if(Z){const Q=ale(t);W=Q.path,!d&&W.length+1+z>ha.maxUrlLength&&(d=!0),Q.query&&(F=te(te({},Q.query),F))}if(r.method==="HEAD"&&(d||Z)){if(d)throw z>ha.maxUrlLength?pa("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):pa("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(Z)throw pa("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(d?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=t6(t,F):(r.body=l0(F),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=t6(t,F),Z&&(e.useProxy=!0,t=`${W}?${t}`),F.token&&rF&&r.body instanceof FormData&&!Lle(t)&&r.body.set("token",F.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!Lg(t,HS())){if(JS(t))e.withCredentials=!0;else if(gr){const Q=gr.findServerInfo(t);Q&&Q.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",Vle(t)&&await zle(d?t6(t,F):t))}let v,_,M=0,T=!1;y>0&&(M=setTimeout(()=>{T=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")_=r,_.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||d||Kle(i.headers)||!s&&!e.useProxy&&ha.proxyUrl&&!nF(t)){if(v=await li._abortableFetch(t,r),e.useProxy||Ble(t),i.responseType==="native")_=v;else if(r.method!=="HEAD")if(v.ok){switch(l){case"array-buffer":_=await v.arrayBuffer();break;case"blob":case"image":_=await v.blob();break;default:_=await v.text()}if(M&&(clearTimeout(M),M=0),l==="json"||l==="xml"||l==="document")if(_)switch(l){case"json":_=JSON.parse(_);break;case"xml":_=oF(_,"application/xml");break;case"document":_=oF(_,"text/html")}else _=null;if(_){if(l==="array-buffer"||l==="blob"){const F=v.headers.get("Content-Type");if(F&&/application\/json|text\/plain/i.test(F)&&_[l==="blob"?"size":"byteLength"]<=750)try{const V=await new Response(_).json();V.error&&(_=V)}catch{}}l==="image"&&_ instanceof Blob&&(_=await aF(URL.createObjectURL(_),e,!0))}}else _=await v.text()}else _=await aF(t,e)}catch(F){if(F.name==="AbortError")throw T?new Error("Timeout exceeded"):zi("Request canceled");if(!(!v&&F instanceof TypeError&&ha.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||nF(t))throw F;e.redoRequest=!0,ule({proxyUrl:ha.proxyUrl,urlPrefix:(R=ca(t))!=null?R:""})}finally{M&&clearTimeout(M)}return[v,_]}async function Zle(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers=te(te({},t.requestOptions.headers),e.headers)),e.query&&(t.requestOptions.query=te(te({},t.requestOptions.query),e.query)),e.before){let i,r;try{r=await e.before(t)}catch(s){i=pa("request:interceptor",s,t)}if((r instanceof Error||r instanceof fe)&&(i=pa("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function Kle(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function oF(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function Yle(e){var l;let t,i;await Wle(e);try{do[t,i]=await Jle(e);while(!await Xle(e,t,i))}catch(y){const d=pa("request:server",y,e.params,t);throw d.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(d),d}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((l=i.user)==null?void 0:l.username)&&!JS(r)){const y=ca(r,!0);y&&ha.trustedServers.push(y)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Dle(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&gr){const y=gr.findServerInfo(s.server);let d=y&&y.owningSystemUrl;if(d){d=d.replace(/\/?$/,"/sharing");const v=gr.findCredential(d,s.userId);v&&gr._getIdenticalSvcIdx(d,v)===-1&&v.resources.unshift(d)}}return{data:i,getHeader:t?y=>t==null?void 0:t.headers.get(y):a6,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Xle(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,l;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[S2]=i,s;i&&(i.error?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s=te({},i),s[S2]=i,s.details=i.messages));let y,d=null;s&&(l=Number(s.code),d=s.hasOwnProperty("subcode")?Number(s.subcode):null,y=s.messageCode,y=y&&y.toUpperCase());const v=r.authMode;if(l===403&&(d===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(v!=="no-prompt"||l===498)&&l!==void 0&&Gle.includes(l)&&!sF(e.params.url)&&(l!==403||y&&!qle.includes(y)&&(d==null||d===2&&e.credentialToken))){await l6();try{const _=await gr.getCredential(e.params.url,{error:pa("request:server",s,e.params),prompt:v!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=_,e.credentialToken=_.token,e.useSSL=e.useSSL||_.ssl,!1}catch(_){if(v==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=_}}if(s)throw s;return!0}function aF(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=ha.priority,s.src=e,jle(s,e,i,r)}li._abortableFetch=null,li._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var Qle=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:li}),Bc;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Bc||(Bc={}));class eue{constructor(t){this.instance=t,this._resolver=Ql(),this._status=Bc.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Bc.RESOLVED,this._cleanUp()},()=>{this._status=Bc.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Bc.RESOLVED}isRejected(){return this._status===Bc.REJECTED}isFulfilled(){return this._status!==Bc.PENDING}abort(){this._resolver.reject(zi())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Ql(),i=[...this._resolvingPromises,Fr(t.promise)],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||Zs(s)||this._resolver.reject(s)}),t.resolve()}}const M2=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new eue(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,l)=>{this._promiseProps.when(s,l)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=m([Y("esri.core.Promise")],t),t};let $2=class extends M2(ot){};$2=m([Y("esri.core.Promise")],$2);const tue="not-loaded",iue="loading",rue="failed",lF="loaded",uF=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=l=>{const y=new Promise((d,v)=>{const _=Z9(l,v);this.destroyed&&v(new fe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(d,v).finally(()=>{_&&_.remove()})});if(this.loadStatus===tue){this._set("loadStatus",iue);const d=this._loadController=new AbortController;s({signal:d.signal}),Io(d.signal,()=>{this._promiseProps.abort()})}return r(),y}})),this.when(()=>{this._set("loadStatus",lF),this._loadController=null},r=>{this._set("loadStatus",rue),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===lF}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new fe("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return m([x({readOnly:!0})],t.prototype,"loaded",null),m([x({readOnly:!0})],t.prototype,"loadError",void 0),m([x({clonable:!1})],t.prototype,"loadStatus",void 0),m([x({type:[rs],readOnly:!0})],t.prototype,"loadWarnings",null),t=m([Y("esri.core.Loadable")],t),t};let Vg=class extends uF($2){};Vg=m([Y("esri.core.Loadable")],Vg),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=uF,e.isLoadable=t}(Vg||(Vg={}));const ul=Vg;var u6;const nue=new bt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Lo=u6=class extends ot{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new u6({categories:this.categories?me(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y)),this.extent){const y=Aw(this.extent,At.WGS84);q(y)&&(r=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const l={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(l.sortField=this.sortField.split(",").map(y=>nue.toJSON(y.trim())).join(","),l.sortOrder=this.sortOrder),{query:te(te({},t),l)}}};m([x()],Lo.prototype,"categories",void 0),m([x()],Lo.prototype,"disableExtraQuery",void 0),m([x({type:ai})],Lo.prototype,"extent",void 0),m([x()],Lo.prototype,"filter",void 0),m([x()],Lo.prototype,"num",void 0),m([x()],Lo.prototype,"query",void 0),m([x()],Lo.prototype,"sortField",void 0),m([x()],Lo.prototype,"sortOrder",null),m([x()],Lo.prototype,"start",void 0),Lo=u6=m([Y("esri.portal.PortalQueryParams")],Lo);const du=Lo;let Lp=class extends ot{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};m([x()],Lp.prototype,"nextQueryParams",void 0),m([x()],Lp.prototype,"queryParams",void 0),m([x()],Lp.prototype,"results",void 0),m([x()],Lp.prototype,"total",void 0),Lp=m([Y("esri.portal.PortalQueryResult")],Lp);const sue=Lp;let fu=class extends Ie{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new fe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};m([x({type:Date})],fu.prototype,"created",void 0),m([x()],fu.prototype,"id",void 0),m([x()],fu.prototype,"portal",void 0),m([x()],fu.prototype,"title",void 0),m([x({readOnly:!0})],fu.prototype,"url",null),m([x()],fu.prototype,"username",void 0),fu=m([Y("esri.portal.PortalFolder")],fu);const oue=fu;let en=class extends Ie{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return is(this.portal)._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return is(this.portal)._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new fe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=Ai(du,e);const r=is(this.portal);return parseFloat(r.currentVersion)>5?(i=i||new du,r._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new du,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=is(this.portal);return i._fetchSelf(i.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const l=new du;return l.disableExtraQuery=!0,l.num=1,l.query=s,i.queryGroups(l,t)}throw new fe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],l=new du;return l.num=1,l.query=`typekeywords:"${e}"`,s.queryItems(l,t)}throw new fe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const l=s&&s.categorySchema;return l&&l.length?l:[]}):[])}};m([x()],en.prototype,"access",void 0),m([x({type:Date})],en.prototype,"created",void 0),m([x()],en.prototype,"description",void 0),m([x()],en.prototype,"id",void 0),m([x()],en.prototype,"isInvitationOnly",void 0),m([x({type:Date})],en.prototype,"modified",void 0),m([x()],en.prototype,"owner",void 0),m([x()],en.prototype,"portal",void 0),m([x()],en.prototype,"snippet",void 0),m([x()],en.prototype,"sortField",void 0),m([x()],en.prototype,"sortOrder",void 0),m([x()],en.prototype,"tags",void 0),m([x()],en.prototype,"thumbnail",void 0),m([x({readOnly:!0})],en.prototype,"thumbnailUrl",null),m([x()],en.prototype,"title",void 0),m([x({readOnly:!0})],en.prototype,"url",null),en=m([Y("esri.portal.PortalGroup")],en);const c6=en;var aue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:c6}),h6;let Hi=h6=class extends Ie{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let l=this.userContentUrl;return r&&(l+="/"+(typeof r=="string"?r:r.id)),this.portal._request(l+"/addItem",s).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){var t;const e={query:{num:1}};return this.portal._request((t=this.userContentUrl)!=null?t:"",e).then(i=>{let r;return r=i&&i.folders?i.folders.map(s=>{const l=oue.fromJSON(s);return l.portal=this.portal,l}):[],r})}fetchGroups(){var e;return this.portal._request((e=this.url)!=null?e:"").then(t=>{let i;return i=t&&t.groups?t.groups.map(r=>{const s=c6.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchItems(e){var s;const t=e!=null?e:{};let i,r=(s=this.userContentUrl)!=null?s:"";return t.folder&&(r+="/"+t.folder.id),Promise.resolve().then(function(){return PF}).then(({default:l})=>{i=l;const y={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal._request(r,{query:y})}).then(l=>{let y;return l&&l.items?(y=l.items.map(d=>{const v=i.fromJSON(d);return v.portal=this.portal,v}),Promise.all(y.map(d=>d.load())).catch(d=>d).then(()=>({items:y,nextStart:l.nextStart,total:l.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new c6({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new fe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new fe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new h6;return t.sourceJSON=e,t.read(e),t}};m([x()],Hi.prototype,"access",void 0),m([x({type:Date})],Hi.prototype,"created",void 0),m([x()],Hi.prototype,"culture",void 0),m([x()],Hi.prototype,"description",void 0),m([x()],Hi.prototype,"email",void 0),m([x()],Hi.prototype,"favGroupId",void 0),m([x()],Hi.prototype,"fullName",void 0),m([x({type:Date})],Hi.prototype,"modified",void 0),m([x()],Hi.prototype,"orgId",void 0),m([x()],Hi.prototype,"portal",void 0),m([x()],Hi.prototype,"preferredView",void 0),m([x()],Hi.prototype,"privileges",void 0),m([x()],Hi.prototype,"region",void 0),m([x()],Hi.prototype,"role",void 0),m([x()],Hi.prototype,"roleId",void 0),m([x()],Hi.prototype,"sourceJSON",void 0),m([x()],Hi.prototype,"thumbnail",void 0),m([x({readOnly:!0})],Hi.prototype,"thumbnailUrl",null),m([x()],Hi.prototype,"units",void 0),m([x({readOnly:!0})],Hi.prototype,"userContentUrl",null),m([x({readOnly:!0})],Hi.prototype,"url",null),m([x()],Hi.prototype,"username",void 0),m([x()],Hi.prototype,"userType",void 0),Hi=h6=m([Y("esri.portal.PortalUser")],Hi);const p6=Hi;var lue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:p6}),io;let d6;const cF={PortalGroup:()=>Promise.resolve().then(function(){return aue}),PortalItem:()=>Promise.resolve().then(function(){return PF}),PortalUser:()=>Promise.resolve().then(function(){return lue})};let Xe=io=class extends Zy(ul){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=gi.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriIdCredentialCreateHandle=Tr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)gi.request.trustedServers.includes(t)||gi.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=p6.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(function(){return Wue}).then(({default:i})=>{fr(e),d6=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(gr){const r=gr;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==io.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn().catch(()=>{})}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import("./ElevationLayer.6fee45f9.js")).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new du;return i.query=e||(gi.apiKey&&tF(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,t)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(l=>l.type==="Web Map").map(l=>new d6({portalItem:l})):[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Eo(e)?Promise.reject(zi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new du;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return Eo(e)?Promise.reject(zi()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||na();return this._request(this.restUrl+"/portals/regions",De(te({},e),{query:{culture:t}}))}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||na();return this._request(this.restUrl+"/portals/self/settings",De(te({},e),{query:{culture:t}}))}static getDefault(){return io._default&&!io._default.destroyed||(io._default=new io),io._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new fe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new io({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new fe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!(t==null?void 0:t.url))throw new fe("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s=te({authMode:e,query:{culture:na().toLowerCase()}},i);return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(r,s)}_queryPortal(e,t,i,r){const s=Ai(du,t),l=y=>this._request(this.restUrl+e,te(te({},s.toRequestOptions(this)),r)).then(d=>{const v=s.clone();return v.start=d.nextStart,new sue({nextQueryParams:v,queryParams:s,total:d.total,results:io._resultsToTypedArray(y,{portal:this},d,r)})}).then(d=>Promise.all(d.results.map(v=>typeof v.when=="function"?v.when():d)).then(()=>d,v=>(Lf(v),d)));return i&&cF[i]?cF[i]().then(({default:y})=>(fr(r),l(y))):l()}_signIn(){if(this.authMode===io.AUTH_MODE_ANONYMOUS)return Promise.reject(new fe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return gr?gr.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const s=io._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(l=>typeof l.when=="function"?l.when():r)).then(()=>s,()=>s)})}_readBasemap(e){if(e){const t=d6.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i=te({f:"json"},t.query),{authMode:r=this.authMode===io.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:l=!1,method:y="auto",responseType:d="json",signal:v}=t,_={authMode:r,body:s,cacheBust:l,method:y,query:i,responseType:d,timeout:0,signal:v};return li(this._normalizeSSL(e),_).then(M=>M.data)}static _resultsToTypedArray(e,t,i,r){let s;if(i){const l=q(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(y=>{const d=Object.assign(e?e.fromJSON(y):y,t);return typeof d.load=="function"&&d.load(l),d}))}else s=[];return s}};Xe.AUTH_MODE_ANONYMOUS="anonymous",Xe.AUTH_MODE_AUTO="auto",Xe.AUTH_MODE_IMMEDIATE="immediate",m([x()],Xe.prototype,"access",void 0),m([x()],Xe.prototype,"allSSL",void 0),m([x()],Xe.prototype,"authMode",void 0),m([x()],Xe.prototype,"authorizedCrossOriginDomains",void 0),m([Be("authorizedCrossOriginDomains")],Xe.prototype,"readAuthorizedCrossOriginDomains",null),m([x()],Xe.prototype,"basemapGalleryGroupQuery",void 0),m([x()],Xe.prototype,"bingKey",void 0),m([x()],Xe.prototype,"canListApps",void 0),m([x()],Xe.prototype,"canListData",void 0),m([x()],Xe.prototype,"canListPreProvisionedItems",void 0),m([x()],Xe.prototype,"canProvisionDirectPurchase",void 0),m([x()],Xe.prototype,"canSearchPublic",void 0),m([x()],Xe.prototype,"canShareBingPublic",void 0),m([x()],Xe.prototype,"canSharePublic",void 0),m([x()],Xe.prototype,"canSignInArcGIS",void 0),m([x()],Xe.prototype,"canSignInIDP",void 0),m([x()],Xe.prototype,"colorSetsGroupQuery",void 0),m([x()],Xe.prototype,"commentsEnabled",void 0),m([x({type:Date})],Xe.prototype,"created",void 0),m([x()],Xe.prototype,"credential",void 0),m([x()],Xe.prototype,"culture",void 0),m([x()],Xe.prototype,"currentVersion",void 0),m([x()],Xe.prototype,"customBaseUrl",void 0),m([x()],Xe.prototype,"defaultBasemap",void 0),m([Be("defaultBasemap")],Xe.prototype,"readDefaultBasemap",null),m([x()],Xe.prototype,"defaultDevBasemap",void 0),m([Be("defaultDevBasemap")],Xe.prototype,"readDefaultDevBasemap",null),m([x({type:ai})],Xe.prototype,"defaultExtent",void 0),m([x()],Xe.prototype,"defaultVectorBasemap",void 0),m([Be("defaultVectorBasemap")],Xe.prototype,"readDefaultVectorBasemap",null),m([x()],Xe.prototype,"description",void 0),m([x()],Xe.prototype,"devBasemapGalleryGroupQuery",void 0),m([x()],Xe.prototype,"eueiEnabled",void 0),m([x({readOnly:!0})],Xe.prototype,"extraQuery",null),m([x()],Xe.prototype,"featuredGroups",void 0),m([x()],Xe.prototype,"featuredItemsGroupQuery",void 0),m([x()],Xe.prototype,"galleryTemplatesGroupQuery",void 0),m([x()],Xe.prototype,"livingAtlasGroupQuery",void 0),m([x()],Xe.prototype,"hasCategorySchema",void 0),m([x()],Xe.prototype,"helpBase",void 0),m([x()],Xe.prototype,"helperServices",void 0),m([x()],Xe.prototype,"helpMap",void 0),m([x()],Xe.prototype,"homePageFeaturedContent",void 0),m([x()],Xe.prototype,"homePageFeaturedContentCount",void 0),m([x()],Xe.prototype,"httpPort",void 0),m([x()],Xe.prototype,"httpsPort",void 0),m([x()],Xe.prototype,"id",void 0),m([x()],Xe.prototype,"ipCntryCode",void 0),m([x({readOnly:!0})],Xe.prototype,"isOrganization",null),m([x()],Xe.prototype,"isPortal",void 0),m([x()],Xe.prototype,"isReadOnly",void 0),m([x({readOnly:!0})],Xe.prototype,"itemPageUrl",null),m([x()],Xe.prototype,"layerTemplatesGroupQuery",void 0),m([x()],Xe.prototype,"maxTokenExpirationMinutes",void 0),m([x({type:Date})],Xe.prototype,"modified",void 0),m([x()],Xe.prototype,"name",void 0),m([x()],Xe.prototype,"portalHostname",void 0),m([x()],Xe.prototype,"portalMode",void 0),m([x()],Xe.prototype,"portalProperties",void 0),m([x()],Xe.prototype,"region",void 0),m([x({readOnly:!0})],Xe.prototype,"restUrl",null),m([x()],Xe.prototype,"rotatorPanels",void 0),m([x()],Xe.prototype,"showHomePageDescription",void 0),m([x()],Xe.prototype,"sourceJSON",void 0),m([x()],Xe.prototype,"staticImagesUrl",void 0),m([x({json:{name:"2DStylesGroupQuery"}})],Xe.prototype,"stylesGroupQuery2d",void 0),m([x({json:{name:"stylesGroupQuery"}})],Xe.prototype,"stylesGroupQuery3d",void 0),m([x()],Xe.prototype,"supportsHostedServices",void 0),m([x()],Xe.prototype,"symbolSetsGroupQuery",void 0),m([x()],Xe.prototype,"templatesGroupQuery",void 0),m([x()],Xe.prototype,"thumbnail",void 0),m([x({readOnly:!0})],Xe.prototype,"thumbnailUrl",null),m([x()],Xe.prototype,"units",void 0),m([x()],Xe.prototype,"url",void 0),m([x()],Xe.prototype,"urlKey",void 0),m([Be("urlKey")],Xe.prototype,"readUrlKey",null),m([x()],Xe.prototype,"user",void 0),m([Be("user")],Xe.prototype,"readUser",null),m([x()],Xe.prototype,"useStandardizedQuery",void 0),m([x()],Xe.prototype,"useVectorBasemaps",void 0),m([x()],Xe.prototype,"vectorBasemapGalleryGroupQuery",void 0),Xe=io=m([Y("esri.portal.Portal")],Xe);const Es=Xe;let Np=class extends yr(Ie){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return q(e)&&e.placement===this.placement&&e.style===this.style&&(ae(this.color)&&ae(e.color)||q(this.color)&&q(e.color)&&this.color.toJSON()===e.color.toJSON())}};m([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Np.prototype,"type",void 0),m([x({type:$ae,json:{default:"begin-end",write:!0}})],Np.prototype,"placement",void 0),m([x({type:gR,json:{default:"arrow",write:!0}})],Np.prototype,"style",void 0),m([x({type:mt,json:{type:[hi],default:null,write:!0}})],Np.prototype,"color",void 0),Np=m([Y("esri.symbols.LineStyleMarker3D")],Np);const f6=Np;var E2;let cl=E2=class extends nl{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ko(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:q(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:q(this.pattern)?this.pattern.clone():null,marker:q(this.marker)?this.marker.clone():null};return new E2(e)}static fromSimpleLineSymbol(e){var i,r,s;const t={enabled:!0,size:(i=e.width)!=null?i:ko(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new kS({style:e.style}):null,material:new eo({color:(e.color||Cg).clone()}),marker:e.marker?new f6({placement:e.marker.placement,style:e.marker.style,color:(s=(r=e.marker.color)==null?void 0:r.clone())!=null?s:null}):null};return new E2(t)}};m([x({type:eo,json:{write:!0}})],cl.prototype,"material",void 0),m([wt({Line:"line"},{readOnly:!0})],cl.prototype,"type",void 0),m([x({type:ER,json:{write:!0,default:"miter"}})],cl.prototype,"join",void 0),m([x({type:GS,json:{write:!0,default:"butt"}})],cl.prototype,"cap",void 0),m([x(sl)],cl.prototype,"size",void 0),m([x(_R)],cl.prototype,"pattern",void 0),m([x({types:{key:"type",base:f6,typeMap:{style:f6}},json:{write:!0}})],cl.prototype,"marker",void 0),cl=E2=m([Y("esri.symbols.LineSymbol3DLayer")],cl);const zg=cl;var y6;const uue=$n()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Gg=y6=class extends Ie{clone(){return new y6({href:this.href,primitive:this.primitive})}};m([x({type:String,json:{read:i6,write:Op}})],Gg.prototype,"href",void 0),m([wt(uue)],Gg.prototype,"primitive",void 0),Gg=y6=m([Y("esri.symbols.support.ObjectSymbol3DLayerResource")],Gg);const $Ee="sphere";var g6;let jp=g6=class extends ot{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new g6({x:this.x,y:this.y,z:this.z})}};m([x({type:Number})],jp.prototype,"x",void 0),m([x({type:Number})],jp.prototype,"y",void 0),m([x({type:Number})],jp.prototype,"z",void 0),jp=g6=m([Y("esri.symbols.support.Symbol3DAnchorPosition3D")],jp);var m6;let Vn=m6=class extends nl{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new m6({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:q(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};m([x({type:eo,json:{write:!0}})],Vn.prototype,"material",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Vn.prototype,"castShadows",void 0),m([x({type:Gg,json:{write:!0}})],Vn.prototype,"resource",void 0),m([wt({Object:"object"},{readOnly:!0})],Vn.prototype,"type",void 0),m([x({type:Number,json:{write:!0}})],Vn.prototype,"width",void 0),m([x({type:Number,json:{write:!0}})],Vn.prototype,"height",void 0),m([x({type:Number,json:{write:!0}})],Vn.prototype,"depth",void 0),m([wt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),x({json:{default:"origin"}})],Vn.prototype,"anchor",void 0),m([x({type:jp,json:{type:[Number],read:{reader:e=>new jp({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Vn.prototype,"anchorPosition",void 0),m([x({type:Number,json:{write:!0}})],Vn.prototype,"heading",void 0),m([x({type:Number,json:{write:!0}})],Vn.prototype,"tilt",void 0),m([x({type:Number,json:{write:!0}})],Vn.prototype,"roll",void 0),m([x({readOnly:!0})],Vn.prototype,"isPrimitive",null),Vn=m6=m([Y("esri.symbols.ObjectSymbol3DLayer")],Vn);const v6=Vn;var b6;let cs=b6=class extends nl{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new b6({enabled:this.enabled,material:q(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};m([x({type:eo,json:{write:!0}})],cs.prototype,"material",void 0),m([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],cs.prototype,"castShadows",void 0),m([wt({Path:"path"},{readOnly:!0})],cs.prototype,"type",void 0),m([x({type:["circle","quad"],json:{write:!0,default:"circle"}})],cs.prototype,"profile",void 0),m([x({type:ER,json:{write:!0,default:"miter"}})],cs.prototype,"join",void 0),m([x({type:Bae,json:{write:!0,default:"butt"}})],cs.prototype,"cap",void 0),m([x({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],cs.prototype,"width",void 0),m([Be("width",["width","size","height"])],cs.prototype,"readWidth",null),m([x({type:Number,json:{write:!0}})],cs.prototype,"height",void 0),m([Be("height",["height","size","width"])],cs.prototype,"readHeight",null),m([x({type:["center","bottom","top"],json:{write:!0,default:"center"}})],cs.prototype,"anchor",void 0),m([x({type:["heading","all"],json:{write:!0,default:"all"}})],cs.prototype,"profileRotation",void 0),cs=b6=m([Y("esri.symbols.PathSymbol3DLayer")],cs);const w6=cs;var _6;let p0=_6=class extends Ie{constructor(){super(...arguments),this.color=new mt([0,0,0,1]),this.size=0}clone(){const e={color:me(this.color),size:this.size};return new _6(e)}};m([x(Gc)],p0.prototype,"color",void 0),m([x(sl)],p0.prototype,"size",void 0),p0=_6=m([Y("esri.symbols.support.Symbol3DHalo")],p0);let qg=class extends yr(Ie){constructor(e){super(e),this.color=null}};m([x(Gc)],qg.prototype,"color",void 0),qg=m([Y("esri.symbols.support.Symbol3DTextBackground")],qg);var I2;let Is=I2=class extends nl{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){q(e)&&q(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s=De(te({},r),{textSymbol3D:!0});t.font=e.write({},s),delete t.font.size}get size(){return q(this._userSize)?this._userSize:q(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,q(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new I2({enabled:this.enabled,font:this.font&&me(this.font),halo:this.halo&&me(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:q(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:me(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new I2({font:q(e.font)?e.font.clone():new m2,halo:cue(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new eo({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new qg({color:e.backgroundColor.clone()}):null})}};function cue(e,t){return e&&t!=null&&t>0?new p0({color:me(e),size:t}):null}m([x({type:m2,json:{write:!0}})],Is.prototype,"font",null),m([Ke("font")],Is.prototype,"writeFont",null),m([x({type:p0,json:{write:!0}})],Is.prototype,"halo",void 0),m([x(De(te({},TR),{json:{default:"center",write:!0}}))],Is.prototype,"horizontalAlignment",void 0),m([x(De(te({},IR),{json:{default:1,write:!0}}))],Is.prototype,"lineHeight",void 0),m([x({type:eo,json:{write:!0}})],Is.prototype,"material",void 0),m([x({type:qg,json:{write:!0}})],Is.prototype,"background",void 0),m([x(sl)],Is.prototype,"size",null),m([x({type:String,json:{write:!0}})],Is.prototype,"text",void 0),m([wt({Text:"text"},{readOnly:!0})],Is.prototype,"type",void 0),m([x(De(te({},CR),{json:{default:"baseline",write:!0}}))],Is.prototype,"verticalAlignment",void 0),Is=I2=m([Y("esri.symbols.TextSymbol3DLayer")],Is);const d0=Is;var x6;let Hc=x6=class extends nl{constructor(e){super(e),this.color=S6.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new x6({color:me(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};m([x({type:mt,nonNullable:!0,json:{type:[hi],write:(e,t,i)=>t[i]=e.toArray(mt.AlphaMode.UNLESS_OPAQUE),default:()=>S6.clone(),defaultEquals:e=>e.toCss(!0)===S6.toCss(!0)}})],Hc.prototype,"color",void 0),m([wt({Water:"water"},{readOnly:!0})],Hc.prototype,"type",void 0),m([x({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Hc.prototype,"waterbodySize",void 0),m([x({type:Number,json:{write:!0,default:null}})],Hc.prototype,"waveDirection",void 0),m([x({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Hc.prototype,"waveStrength",void 0),Hc=x6=m([Y("esri.symbols.WaterSymbol3DLayer")],Hc);const S6=new mt([0,119,190]),hF=Hc;var M6;let Dp=M6=class extends ot{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new M6({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};m([x({type:String})],Dp.prototype,"name",void 0),m([x({type:String})],Dp.prototype,"styleUrl",void 0),m([x({type:String})],Dp.prototype,"styleName",void 0),m([x({type:Es})],Dp.prototype,"portal",void 0),Dp=M6=m([Y("esri.symbols.support.StyleOrigin")],Dp);const $6=Dp;var E6;let Ug=E6=class extends ot{constructor(){super(...arguments),this.url=""}clone(){return new E6({url:this.url})}};m([x({type:String})],Ug.prototype,"url",void 0),Ug=E6=m([Y("esri.symbols.support.Thumbnail")],Ug);const pF={icon:Rp,object:v6,line:zg,path:w6,fill:Rg,extrude:yR,text:d0,water:hF},hue=gt.ofType({base:nl,key:"type",typeMap:pF,errorContext:"symbol-layer"});let hl=class extends ls{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||gt;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&Ae.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Fp(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=u0(e.styleUrl,i);return new $6({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new $6({portal:i&&i.portal||Es.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new rs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let s=Ng(e.styleUrl,r);to(s)&&(s=ua(s)),t.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!LR(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new rs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof nl||e&&pF[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};m([x({json:{read:!1,write:!1}})],hl.prototype,"color",null),m([x({type:hue,nonNullable:!0,json:{write:!0}}),ri(YR)],hl.prototype,"symbolLayers",null),m([x({type:$6})],hl.prototype,"styleOrigin",void 0),m([Be("styleOrigin")],hl.prototype,"readStyleOrigin",null),m([Ke("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],hl.prototype,"writeStyleOrigin",null),m([x({type:Ug,json:{read:!1}})],hl.prototype,"thumbnail",void 0),m([x({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],hl.prototype,"type",void 0),hl=m([Y("esri.symbols.Symbol3D")],hl);const f0=hl;let Bg=class extends Ie{constructor(e){super(e),this.visible=!0}clone(){}};m([x({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Bg.prototype,"type",void 0),m([x({readOnly:!0})],Bg.prototype,"visible",void 0),Bg=m([Y("esri.symbols.callouts.Callout3D")],Bg);const dF=Bg;var I6;let T2=I6=class extends Ie{constructor(){super(...arguments),this.color=new mt("white")}clone(){return new I6({color:me(this.color)})}};m([x(Gc)],T2.prototype,"color",void 0),T2=I6=m([Y("esri.symbols.callouts.LineCallout3DBorder")],T2);const fF=T2;Object.freeze(Object.defineProperty({__proto__:null,default:fF},Symbol.toStringTag,{value:"Module"}));var T6;let Wc=T6=class extends dF{constructor(e){super(e),this.type="line",this.color=new mt([0,0,0,1]),this.size=ko(1),this.border=null}get visible(){return this.size>0&&q(this.color)&&this.color.a>0}clone(){return new T6({color:me(this.color),size:this.size,border:me(this.border)})}};m([wt({line:"line"},{readOnly:!0})],Wc.prototype,"type",void 0),m([x(Gc)],Wc.prototype,"color",void 0),m([x(sl)],Wc.prototype,"size",void 0),m([x({type:fF,json:{write:!0}})],Wc.prototype,"border",void 0),m([x({readOnly:!0})],Wc.prototype,"visible",null),Wc=T6=m([Y("esri.symbols.callouts.LineCallout3D")],Wc);const pue=Wc;function C6(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||q(t.maxWorldLength)&&t.maxWorldLength<=0)}function yF(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!C6(e)}function EEe(e){return e.type==="point-3d"||e.type==="label-3d"}function IEe(e){return e.horizontalAlignment==="center"}const gF={types:{key:"type",base:dF,typeMap:{line:pue}},json:{write:!0}};var A6;let y0=A6=class extends Ie{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new A6({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};m([x(sl)],y0.prototype,"screenLength",void 0),m([x({type:Number,nonNullable:!0,json:{write:!0,default:0}})],y0.prototype,"minWorldLength",void 0),m([x({type:Number,json:{write:!0}})],y0.prototype,"maxWorldLength",void 0),y0=A6=m([Y("esri.symbols.support.Symbol3DVerticalOffset")],y0);const mF=y0;var C2;const vF=gt.ofType({base:null,key:"type",typeMap:{text:d0}});let Jc=C2=class extends f0{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new vF,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return yF(this)}hasVisibleVerticalOffset(){return C6(this)}clone(){return new C2({styleOrigin:me(this.styleOrigin),symbolLayers:me(this.symbolLayers),thumbnail:me(this.thumbnail),callout:me(this.callout),verticalOffset:me(this.verticalOffset)})}static fromTextSymbol(e){return new C2({symbolLayers:[d0.fromTextSymbol(e)]})}};m([x({type:mF,json:{write:!0}})],Jc.prototype,"verticalOffset",void 0),m([x(gF)],Jc.prototype,"callout",void 0),m([x({json:{read:!1,write:!1}})],Jc.prototype,"styleOrigin",void 0),m([x({type:vF})],Jc.prototype,"symbolLayers",void 0),m([wt({LabelSymbol3D:"label-3d"},{readOnly:!0})],Jc.prototype,"type",void 0),Jc=C2=m([Y("esri.symbols.LabelSymbol3D")],Jc);const A2=Jc;var P2;const bF=gt.ofType({base:null,key:"type",typeMap:{line:zg,path:w6}}),due=gt.ofType({base:null,key:"type",typeMap:{line:zg,path:w6}});let Hg=P2=class extends f0{constructor(e){super(e),this.symbolLayers=new bF,this.type="line-3d"}clone(){return new P2({styleOrigin:me(this.styleOrigin),symbolLayers:me(this.symbolLayers),thumbnail:me(this.thumbnail)})}static fromSimpleLineSymbol(e){return new P2({symbolLayers:[zg.fromSimpleLineSymbol(e)]})}};m([x({type:bF,json:{type:due}})],Hg.prototype,"symbolLayers",void 0),m([wt({LineSymbol3D:"line-3d"},{readOnly:!0})],Hg.prototype,"type",void 0),Hg=P2=m([Y("esri.symbols.LineSymbol3D")],Hg);const O2=Hg;let Zc=class extends ls{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};m([x({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Zc.prototype,"angle",void 0),m([x({type:["simple-marker","picture-marker"],readOnly:!0})],Zc.prototype,"type",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Zc.prototype,"xoffset",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Zc.prototype,"yoffset",void 0),m([x({type:Number,cast:e=>e==="auto"?e:di(e),json:{write:!0}})],Zc.prototype,"size",void 0),Zc=m([Y("esri.symbols.MarkerSymbol")],Zc);const wF=Zc;var k2;const _F=gt.ofType({base:null,key:"type",typeMap:{fill:Rg}});let Wg=k2=class extends f0{constructor(e){super(e),this.symbolLayers=new _F,this.type="mesh-3d"}clone(){return new k2({styleOrigin:me(this.styleOrigin),symbolLayers:me(this.symbolLayers),thumbnail:me(this.thumbnail)})}static fromSimpleFillSymbol(e){return new k2({symbolLayers:[Rg.fromSimpleFillSymbol(e)]})}};m([x({type:_F})],Wg.prototype,"symbolLayers",void 0),m([wt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Wg.prototype,"type",void 0),Wg=k2=m([Y("esri.symbols.MeshSymbol3D")],Wg);const R2=Wg;function fue(e,t,i){return t.imageData?VR({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):xF(t.url,i)}function xF(e,t){var i;return gue(t)&&!to(e)&&((i=t==null?void 0:t.layer)==null?void 0:i.parsedUrl)?Uc(t.layer.parsedUrl.path,"images",e):u0(e,t)}function yue(e,t,i,r){if(Pp(e)){const s=DR(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&Op(i.url,t,"url",r)}else Op(e,t,"url",r)}const SF={json:{read:{source:["imageData","url"],reader:fue},write:{writer(e,t,i,r){yue(e,t,this.source,r)}}}},MF={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=xF(t.url,i)),r}}}};function gue(e){var t,i;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((i=e.layer)==null?void 0:i.type)!=="stream")}var P6;let No=P6=class extends mR{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=di(i)),r!=null&&(s.height=di(r)),s}clone(){const e=new P6({color:me(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",me(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};m([wt({esriPFS:"picture-fill"},{readOnly:!0})],No.prototype,"type",void 0),m([x(SF)],No.prototype,"url",void 0),m([x({type:Number,json:{write:!0}})],No.prototype,"xscale",void 0),m([x({type:Number,json:{write:!0}})],No.prototype,"yscale",void 0),m([x({type:Number,cast:di,json:{write:!0}})],No.prototype,"width",void 0),m([x({type:Number,cast:di,json:{write:!0}})],No.prototype,"height",void 0),m([x({type:Number,cast:di,json:{write:!0}})],No.prototype,"xoffset",void 0),m([x({type:Number,cast:di,json:{write:!0}})],No.prototype,"yoffset",void 0),m([x(MF)],No.prototype,"source",void 0),No=P6=m([Y("esri.symbols.PictureFillSymbol")],No);const $F=No;var O6;let da=O6=class extends wF{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=di(t)),i!=null&&(r.height=di(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new O6({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",me(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};m([x({json:{write:!1}})],da.prototype,"color",void 0),m([wt({esriPMS:"picture-marker"},{readOnly:!0})],da.prototype,"type",void 0),m([x(SF)],da.prototype,"url",void 0),m([x(MF)],da.prototype,"source",void 0),m([x({type:Number,cast:di,json:{write:!0}})],da.prototype,"height",void 0),m([Be("height",["height","size"])],da.prototype,"readHeight",null),m([x({type:Number,cast:di,json:{write:!0}})],da.prototype,"width",void 0),m([x({json:{write:!1}})],da.prototype,"size",void 0),da=O6=m([Y("esri.symbols.PictureMarkerSymbol")],da);const F2=da;var Vp;const EF=gt.ofType({base:null,key:"type",typeMap:{icon:Rp,object:v6,text:d0}});let zp=Vp=class extends f0{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new EF,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return yF(this)}hasVisibleVerticalOffset(){return C6(this)}clone(){return new Vp({verticalOffset:me(this.verticalOffset),callout:me(this.callout),styleOrigin:me(this.styleOrigin),symbolLayers:me(this.symbolLayers),thumbnail:me(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Vp({symbolLayers:[Rp.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Vp({symbolLayers:[Rp.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var r,s;if(((s=(r=e.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Vp((i==null?void 0:i.callout)?{symbolLayers:[Rp.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Rp.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Vp({symbolLayers:[d0.fromTextSymbol(e)]})}};m([x({type:mF,json:{write:!0}})],zp.prototype,"verticalOffset",void 0),m([x(gF)],zp.prototype,"callout",void 0),m([x({type:EF,json:{origins:{"web-scene":{write:!0}}}})],zp.prototype,"symbolLayers",void 0),m([wt({PointSymbol3D:"point-3d"},{readOnly:!0})],zp.prototype,"type",void 0),zp=Vp=m([Y("esri.symbols.PointSymbol3D")],zp);const Gp=zp;var Jg;const IF=gt.ofType({base:null,key:"type",typeMap:{extrude:yR,fill:Rg,icon:Rp,line:zg,object:v6,text:d0,water:hF}});let Zg=Jg=class extends f0{constructor(e){super(e),this.symbolLayers=new IF,this.type="polygon-3d"}clone(){return new Jg({styleOrigin:me(this.styleOrigin),symbolLayers:me(this.symbolLayers),thumbnail:me(this.thumbnail)})}static fromJSON(e){const t=new Jg;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:q(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Jg({symbolLayers:[Rg.fromSimpleFillSymbol(e)]})}};m([x({type:IF,json:{write:!0}})],Zg.prototype,"symbolLayers",void 0),m([wt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Zg.prototype,"type",void 0),Zg=Jg=m([Y("esri.symbols.PolygonSymbol3D")],Zg);const Kg=Zg;var k6;const R6=new bt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let qp=k6=class extends mR{constructor(...e){super(...e),this.color=new mt([0,0,0,.25]),this.outline=new us,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new k6({color:me(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};m([x()],qp.prototype,"color",void 0),m([x()],qp.prototype,"outline",void 0),m([wt({esriSFS:"simple-fill"},{readOnly:!0})],qp.prototype,"type",void 0),m([x({type:R6.apiValues,json:{read:R6.read,write:R6.write}})],qp.prototype,"style",void 0),qp=k6=m([Y("esri.symbols.SimpleFillSymbol")],qp);const pl=qp;var F6;const L6=new bt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let dl=F6=class extends wF{constructor(...e){super(...e),this.color=new mt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new us}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=di(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new F6({angle:this.angle,color:me(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};m([x()],dl.prototype,"color",void 0),m([Ke("color")],dl.prototype,"writeColor",null),m([wt({esriSMS:"simple-marker"},{readOnly:!0})],dl.prototype,"type",void 0),m([x()],dl.prototype,"size",void 0),m([x({type:L6.apiValues,json:{read:L6.read,write:L6.write}})],dl.prototype,"style",void 0),m([x({type:String,json:{write:!0}})],dl.prototype,"path",null),m([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":us}},json:{default:null,write:!0}})],dl.prototype,"outline",void 0),dl=F6=m([Y("esri.symbols.SimpleMarkerSymbol")],dl);const ro=dl;var N6;let Qi=N6=class extends ls{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new m2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return di(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new N6({angle:this.angle,backgroundColor:me(this.backgroundColor),borderLineColor:me(this.borderLineColor),borderLineSize:this.borderLineSize,color:me(this.color),font:this.font&&this.font.clone(),haloColor:me(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};m([x({type:mt,json:{write:!0}})],Qi.prototype,"backgroundColor",void 0),m([x({type:mt,json:{write:!0}})],Qi.prototype,"borderLineColor",void 0),m([x({type:Number,json:{write:!0}})],Qi.prototype,"borderLineSize",void 0),m([x({type:m2,json:{write:!0}})],Qi.prototype,"font",void 0),m([x(De(te({},TR),{json:{write:!0}}))],Qi.prototype,"horizontalAlignment",void 0),m([x({type:Boolean,json:{write:!0}})],Qi.prototype,"kerning",void 0),m([x({type:mt,json:{write:!0}})],Qi.prototype,"haloColor",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Qi.prototype,"haloSize",void 0),m([x({type:Boolean,json:{write:!0}})],Qi.prototype,"rightToLeft",void 0),m([x({type:Boolean,json:{write:!0}})],Qi.prototype,"rotated",void 0),m([x({type:String,json:{write:!0}})],Qi.prototype,"text",void 0),m([wt({esriTS:"text"},{readOnly:!0})],Qi.prototype,"type",void 0),m([x(De(te({},CR),{json:{write:!0}}))],Qi.prototype,"verticalAlignment",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Qi.prototype,"xoffset",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Qi.prototype,"yoffset",void 0),m([x({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Qi.prototype,"angle",void 0),m([x({type:Number,json:{write:!0}})],Qi.prototype,"width",void 0),m([x({type:Number})],Qi.prototype,"lineWidth",void 0),m([Ke("lineWidth")],Qi.prototype,"writeLineWidth",null),m([ri("lineWidth")],Qi.prototype,"castLineWidth",null),m([x(IR)],Qi.prototype,"lineHeight",void 0),m([Ke("lineHeight")],Qi.prototype,"writeLineHeight",null),Qi=N6=m([Y("esri.symbols.TextSymbol")],Qi);const g0=Qi;var j6;let fa=j6=class extends ls{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=q(this.portal)?this.portal:Es.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new j6({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=q(t)?t.cache:null,r=i?this._fetchCacheKey:null;if(q(i)){const d=r&&i.get(r);if(d)return d.clone()}const s=await mue();fr(t);const l=s.resolveWebStyleSymbol(this,{portal:this.portal},e,t);l.catch(d=>{Ae.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",d)});const y=await l;return e==="webRef"&&y.type==="point-3d"||e==="cimRef"&&y.type==="cim"?(q(i)&&i.set(r,y.clone()),y):null}};function mue(){return import("./webStyleSymbolUtils.dc0dda91.js")}m([x({json:{write:!1}})],fa.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],fa.prototype,"styleName",void 0),m([x({type:Es,json:{write:!1}})],fa.prototype,"portal",void 0),m([x({type:String,json:{read:i6,write:Op}})],fa.prototype,"styleUrl",void 0),m([x({type:Ug,json:{read:!1}})],fa.prototype,"thumbnail",void 0),m([x({type:String,json:{write:!0}})],fa.prototype,"name",void 0),m([wt({styleSymbolReference:"web-style"},{readOnly:!0})],fa.prototype,"type",void 0),m([x()],fa.prototype,"_fetchCacheKey",null),fa=j6=m([Y("esri.symbols.WebStyleSymbol")],fa);const Up=fa;function L2(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Bp(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Ts={base:ls,key:"type",typeMap:{"simple-fill":pl,"picture-fill":$F,"picture-marker":F2,"simple-line":us,"simple-marker":ro,text:g0,"label-3d":A2,"line-3d":O2,"mesh-3d":R2,"point-3d":Gp,"polygon-3d":Kg,"web-style":Up,cim:zc},errorContext:"symbol"},vue={base:ls,key:"type",typeMap:{"picture-marker":F2,"simple-marker":ro,text:g0,"web-style":Up,cim:zc},errorContext:"symbol"},bue=$c({types:Ts}),N2={base:ls,key:"type",typeMap:{"simple-fill":pl,"picture-fill":$F,"picture-marker":F2,"simple-line":us,"simple-marker":ro,text:g0,"line-3d":O2,"mesh-3d":R2,"point-3d":Gp,"polygon-3d":Kg,"web-style":Up,cim:zc},errorContext:"symbol"},wue={base:ls,key:"type",typeMap:{text:g0,"label-3d":A2},errorContext:"symbol"},TF={base:ls,key:"type",typeMap:{"line-3d":O2,"mesh-3d":R2,"point-3d":Gp,"polygon-3d":Kg,"web-style":Up,cim:zc},errorContext:"symbol"},_ue={base:ls,key:"type",typeMap:{"label-3d":A2},errorContext:"symbol"},CF=Za(Ts);function xue(e){if(!e)return null;const t={};for(const i in e){const r=dn(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function Sue(e){if(!q(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Cs=class extends yr(Ie){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Hy(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&q(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Sue(this.aggregateGeometries),geometry:q(this.geometry)?this.geometry.toJSON():null,symbol:q(this.symbol)?this.symbol.toJSON():null,attributes:te({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){q(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};m([x({value:null,json:{read:xue}})],Cs.prototype,"aggregateGeometries",null),m([x({value:null})],Cs.prototype,"attributes",null),m([x({value:null,types:ou,json:{read:dn}})],Cs.prototype,"geometry",null),m([x({type:Boolean})],Cs.prototype,"isAggregate",void 0),m([x({clonable:"reference"})],Cs.prototype,"layer",void 0),m([x({type:i0})],Cs.prototype,"popupTemplate",void 0),m([x({clonable:"reference"})],Cs.prototype,"sourceLayer",void 0),m([x({value:null,types:Ts})],Cs.prototype,"symbol",null),m([x({type:Boolean,value:!0})],Cs.prototype,"visible",null),Cs=m([Y("esri.Graphic")],Cs),function(e){e.generateUID=Hy}(Cs||(Cs={}));const jr=Cs;function Mue(e,t,i){return Ss(e.map((r,s)=>t.apply(i,[r,s])))}async function $ue(e,t,i){return(await Ss(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}function D6(e){return{ok:!0,value:e}}function V6(e){return{ok:!1,error:e}}function Eue(e){return q(e)&&e.ok===!0?e.value:null}function Iue(e){return q(e)&&e.ok===!1?e.error:null}async function j2(e){if(ae(e))return{ok:!1,error:new Error("no promise provided")};try{return D6(await e)}catch(t){return V6(t)}}async function TEe(e){try{return D6(await e)}catch(t){return Lf(t),V6(t)}}function AF(e,t){return new Kc(e,t)}let Kc=class extends ot{constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Wa(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(r=>{this._result=D6(r),this._cleanup()},r=>{this._result=V6(r),this._cleanup()}),this._abortHandle=Io(t,this.abort)}get value(){return Eue(this._result)}get error(){return Iue(this._result)}get finished(){return q(this._result)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Tr(this._abortHandle),this._abortController=null}};m([x()],Kc.prototype,"value",null),m([x()],Kc.prototype,"error",null),m([x()],Kc.prototype,"finished",null),m([x()],Kc.prototype,"promise",void 0),m([x()],Kc.prototype,"_result",void 0),Kc=m([Y("esri.core.asyncUtils.ReactiveTask")],Kc);async function z6(e,t){return await e.load(),Tue(e,t)}async function Tue(e,t){const i=[],r=(...l)=>{for(const y of l)ae(y)||(Array.isArray(y)?r(...y):gt.isCollection(y)?y.forEach(d=>r(d)):ul.isLoadable(y)&&i.push(y))};t(r);let s=null;if(await $ue(i,async l=>{(await j2(Cue(l)?l.loadAll():l.load())).ok!==!1||s||(s=l)}),s)throw s.loadError;return e}function Cue(e){return"loadAll"in e&&typeof e.loadAll=="function"}const Aue=Ae.getLogger("esri.assets");function mi(e){if(!gi.assetsPath)throw Aue.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new fe("assets:path-not-set","config.assetsPath is not set");return Uc(gi.assetsPath,e)}let Yc=class extends ot{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?De(te({},e),{path:this._normalizePath(e.path,e.portalItem)}):e}set path(e){q(e)&&to(e)?Ae.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(ae(i))throw new fe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:Hb(t,"signal")})}async update(e,t){return(await import("./resourceUtils.246e48bd.js")).addOrUpdateResource(this,"update",e,t)}hasPath(){return q(this.path)}_normalizePath(e,t){return ae(e)?e:(e=e.replace(/^\/+/,""),q(t)&&to(e)&&(e=ZS(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};m([x()],Yc.prototype,"portalItem",void 0),m([x({type:String,value:null})],Yc.prototype,"path",null),m([ri("path")],Yc.prototype,"_castPath",null),m([x({type:String,readOnly:!0})],Yc.prototype,"url",null),m([x({type:String,readOnly:!0})],Yc.prototype,"itemRelativeUrl",null),Yc=m([Y("esri.portal.PortalItemResource")],Yc);const Pue=Yc;let Yg=class extends ot{constructor(e){super(e),this.created=null,this.rating=null}};m([x()],Yg.prototype,"created",void 0),m([x()],Yg.prototype,"rating",void 0),Yg=m([Y("esri.portal.PortalRating")],Yg);const G6=Yg;var m0;const Oue=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),kue=new Set(["KML","GeoJson","CSV"]);let Gt=m0=class extends Zy(ul){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Rf(m0,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new ai(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,l=!1,y=!1,d=!1,v=!1,_=!1,M=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(l=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.includes("Table"),d=t.includes("Route Layer"),v=t.includes("Markup"),_=t.includes("Spatiotemporal"),M=t.includes("UtilityNetwork"),s=_&&y?"spatiotemporaltable":y?"table":d?"routelayer":v?"markup":_?"spatiotemporal":l?"featureshosted":M?"utilitynetwork":"features"):s=e==="map service"||e==="wms"||e==="wmts"?l||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):s=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="pro report template"?"proreporttemplate":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":e==="discussion"?"discussion":"maps",s?mi(i+s+r+".png"):null}get isLayer(){return this.type!=null&&Oue.has(this.type)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i,r;const e=this.itemUrl,t=this.thumbnail;return e&&t&&(r=(i=this.portal)==null?void 0:i._normalizeUrl(`${e}/info/${t}?f=json`))!=null?r:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){var r;const t=(r=this.portal)!=null?r:this.portal=Es.getDefault(),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t._request(this.itemUrl,{signal:q(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof G6&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal._request(this.itemUrl+"/addRating",t),new G6({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:me(this.applicationProxies),avgRating:this.avgRating,categories:me(this.categories),created:me(this.created),culture:this.culture,description:this.description,extent:me(this.extent),groupCategories:me(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:me(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:me(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:me(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:me(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new m0({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await is(this.portal)._request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return is(this.portal)._request(this.itemUrl+"/data",De(te({responseType:e},t),{query:{token:this.apiKey}}))}async fetchRating(e){const t=await is(this.portal)._request(this.itemUrl+"/rating",te({query:{token:this.apiKey}},e));return t.rating!=null?(t.created=new Date(t.created),new G6(t)):null}fetchRelatedItems(e,t){return is(this.portal)._requestToTypedArray(this.itemUrl+"/relatedItems",te({query:De(te({},e),{token:this.apiKey})},t),m0)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){var e;return is(this.portal)._request((e=this.itemUrl)!=null?e:"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(e){return this.id?this.load().then(()=>is(this.portal)._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new fe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Pp(t)?r.query={data:t}:r.query={url:Fo(t)},q(i)&&(r.query.filename=i);else{const s=new FormData;q(i)?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new fe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await import("./resourceUtils.246e48bd.js")).fetchResources(this,e,t)}async addResource(e,t,i){const r=await import("./resourceUtils.246e48bd.js");return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await import("./resourceUtils.246e48bd.js");if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new fe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await import("./resourceUtils.246e48bd.js")).removeAllResources(this,e)}resourceFromPath(e){return new Pue({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:me(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:me(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:me(this.typeKeywords),url:this.url};return lP(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new m0({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};m([x({type:["private","shared","org","public"]})],Gt.prototype,"access",void 0),m([x()],Gt.prototype,"accessInformation",void 0),m([x({type:String})],Gt.prototype,"apiKey",void 0),m([x({json:{read:{source:"appProxies"}}})],Gt.prototype,"applicationProxies",void 0),m([x()],Gt.prototype,"avgRating",void 0),m([x()],Gt.prototype,"categories",void 0),m([x({type:Date})],Gt.prototype,"created",void 0),m([x()],Gt.prototype,"culture",void 0),m([x()],Gt.prototype,"description",void 0),m([x({readOnly:!0})],Gt.prototype,"displayName",null),m([x({type:ai})],Gt.prototype,"extent",void 0),m([Be("extent")],Gt.prototype,"readExtent",null),m([x()],Gt.prototype,"groupCategories",void 0),m([x({readOnly:!0})],Gt.prototype,"iconUrl",null),m([x()],Gt.prototype,"id",void 0),m([x({readOnly:!0})],Gt.prototype,"isLayer",null),m([x()],Gt.prototype,"itemControl",void 0),m([x({readOnly:!0})],Gt.prototype,"itemPageUrl",null),m([x({readOnly:!0})],Gt.prototype,"itemUrl",null),m([x()],Gt.prototype,"licenseInfo",void 0),m([x({type:Date})],Gt.prototype,"modified",void 0),m([x()],Gt.prototype,"name",void 0),m([x()],Gt.prototype,"numComments",void 0),m([x()],Gt.prototype,"numRatings",void 0),m([x()],Gt.prototype,"numViews",void 0),m([x()],Gt.prototype,"owner",void 0),m([x()],Gt.prototype,"ownerFolder",void 0),m([x({type:Es})],Gt.prototype,"portal",void 0),m([x()],Gt.prototype,"screenshots",void 0),m([x()],Gt.prototype,"size",void 0),m([x()],Gt.prototype,"snippet",void 0),m([x()],Gt.prototype,"sourceJSON",void 0),m([x({type:String})],Gt.prototype,"spatialReference",void 0),m([x()],Gt.prototype,"tags",void 0),m([x()],Gt.prototype,"thumbnail",void 0),m([x({readOnly:!0})],Gt.prototype,"thumbnailUrl",null),m([x()],Gt.prototype,"title",void 0),m([x()],Gt.prototype,"type",void 0),m([x()],Gt.prototype,"typeKeywords",void 0),m([x({type:String,json:{read(e,t){var i;if(kue.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Gt.prototype,"url",void 0),m([x({readOnly:!0})],Gt.prototype,"userItemUrl",null),Gt=m0=m([Y("esri.portal.PortalItem")],Gt);const Xg=Gt;var PF=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xg});const OF=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Rue={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function kF(e){var t;return(t=Rue[e])!=null?t:!1}const Qg=[],v0=new Map;function RF(e){for(const t of v0.keys())LF(e.pattern,t)&&v0.delete(t)}function Fue(e){return Qg.includes(e)||(RF(e),Qg.unshift(e)),{remove(){const t=Qg.indexOf(e);t>-1&&(Qg.splice(t,1),RF(e))}}}async function FF(e){const t=na();v0.has(e)||v0.set(e,Nue(e,t));const i=v0.get(e);return i&&await jue.add(i),i}function Lue(e){if(!OF.test(e))return null;const t=OF.exec(e);if(t===null)return null;const[,i,r]=t,s=i+(r?"-"+r.toUpperCase():"");return kF(s)?s:kF(i)?i:null}async function Nue(e,t){const i=[];for(const r of Qg)if(LF(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new fe("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new fe("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function LF(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}L4(()=>{v0.clear()});const jue=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ql())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Due(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await FF("esri/t9n/basemaps");return i[e]||i[t]}const q6={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return mi("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return mi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return mi("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return mi("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return mi("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return mi("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return mi("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return mi("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return mi("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return mi("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return mi("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return mi("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function U6(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function CEe(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}const Vue=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),zue=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Gue(e){return e.layerContainerType==="basemap"?Vue:e.layerContainerType==="operational-layers"?zue:null}function que(e,t){if(t.restrictedWebMapWriting){const i=Gue(t);return!q(i)||i.has(e.type)&&!U6(e)}return!0}function Uue(e,t){if(U6(e)){const i=Of("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&B6(e,r)}else e.type==="stream"?B6(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&B6(e,t)}function B6(e,t){"maxScale"in e&&(t.maxScale=aw(e.maxScale)),"minScale"in e&&(t.minScale=aw(e.minScale))}function Bue(e,t){if(Uue(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=aw(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(U6(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function NF(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new fe("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(que(e,i)){const r={};return e.write(r,i)?r:null}return q(t)&&Bue(e,t=me(t)),t}var D2;let Hue=0;const jF="esri.Basemap";let jo=D2=class extends Zy(ul){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Hue++,this.baseLayers=new gt,this.referenceLayers=new gt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Ae.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Ae.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=te({},e)).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Fp(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i=De(te({},i),{layerContainerType:"basemap"}),this.baseLayers.forEach(s=>{const l=NF(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);q(l)&&r.push(l)}),this.referenceLayers.forEach(s=>{const l=NF(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);q(l)&&(l.isReference=!0,r.push(l))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Fp(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return z6(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new D2({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t=te({origin:"web-map"},t)),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=me(i);return r.url&&al(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&al(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;fr(e);const r=[];if(t){const s=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const l=t.data.id;r.push(Due(l).then(y=>{y&&this.read({title:y},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,l=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:y}=await import("./layersCreator.7c58ded3.js"),d=[];if(fr(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const v={context:{origin:l,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},_=y(this.baseLayers,e.baseMapLayers.filter(T=>!T.isReference),v);d.push(_);const M=y(this.referenceLayers,e.baseMapLayers.filter(T=>T.isReference),v);d.push(M)}await Ss(d)}async _loadFromItem(e,t){var l,y;const i=await e.load(t),r=await i.fetchData("json",t),s=yn((l=e.itemUrl)!=null?l:"");return this._set("resourceInfo",{data:(y=r.baseMap)!=null?y:{},context:{origin:"web-map",portal:e.portal||Es.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Es.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=q6[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),aO(Ae.getLogger(jF),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return D2.fromJSON(t)}return null}};m([x({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:gt}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],jo.prototype,"baseLayers",null),m([x({type:String,json:{origins:{"web-scene":{write:!0}}}})],jo.prototype,"id",void 0),m([x({type:Xg})],jo.prototype,"portalItem",void 0),m([x()],jo.prototype,"referenceLayers",null),m([x({readOnly:!0})],jo.prototype,"resourceInfo",void 0),m([x({type:At})],jo.prototype,"spatialReference",void 0),m([x()],jo.prototype,"thumbnailUrl",void 0),m([x({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],jo.prototype,"title",void 0),m([Ke("title")],jo.prototype,"writeTitle",null),jo=D2=m([Y(jF)],jo);const V2=jo;var Wue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:V2});function DF(e){}function Jue(e){return()=>e}var H6;let z2=H6=class extends Ie{constructor(e){super(e),this.type="none"}clone(){return new H6({type:this.type})}};m([wt({none:"none",stayAbove:"stay-above"})],z2.prototype,"type",void 0),z2=H6=m([Y("esri.ground.NavigationConstraint")],z2);let Wi=class extends ot{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};m([x()],Wi.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),m([x()],Wi.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),m([x()],Wi.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),m([x()],Wi.prototype,"DECONFLICTOR_SHOW_GRID",void 0),m([x()],Wi.prototype,"LABELS_SHOW_BORDER",void 0),m([x()],Wi.prototype,"TEXT_SHOW_BASELINE",void 0),m([x()],Wi.prototype,"TEXT_SHOW_BORDER",void 0),m([x()],Wi.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),m([x()],Wi.prototype,"OVERLAY_SHOW_CENTER",void 0),m([x()],Wi.prototype,"SHOW_POI",void 0),m([x()],Wi.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),m([x()],Wi.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),m([x()],Wi.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),m([x()],Wi.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),m([x()],Wi.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),m([x()],Wi.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),m([x()],Wi.prototype,"I3S_TREE_SHOW_TILES",void 0),m([x()],Wi.prototype,"I3S_SHOW_MODIFICATIONS",void 0),m([x()],Wi.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),m([x()],Wi.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),m([x()],Wi.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),m([x()],Wi.prototype,"LINE_WIREFRAMES",void 0),m([x()],Wi.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),Wi=m([Y("esri.views.3d.support.DebugFlags")],Wi);const Zue=new Wi;var W6;let fl=W6=class extends Zy(ul){constructor(e){super(e),this.opacity=1,this.shading=!Zue.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new gt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Ae.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Ae.getLogger(this.declaredClass).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=te({},e)).resourceInfo),e}set layers(e){this._set("layers",Fp(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r=De(te({},r),{layerContainerType:"ground"}),e.forEach(l=>{if("write"in l){const y={};Jue(l)().write(y,r)&&s.push(y)}else r&&r.messages&&r.messages.push(new fe("layer:unsupported",`Layers (${l.title}, ${l.id}) of type '${l.declaredClass}' cannot be persisted in the ground`,{layer:l}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return z6(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await import("./ElevationQuery.ce2bb2c4.js");fr(t);const r=new i,s=this.layers.filter(VF).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await import("./ElevationQuery.ce2bb2c4.js");fr(t);const r=new i,s=this.layers.filter(VF).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:me(this.surfaceColor),navigationConstraint:me(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new W6({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",s=t&&t.portal||null,l=t&&t.url||null;return import("./layersCreator.7c58ded3.js").then(({populateOperationalLayers:y})=>{fr(i);const d=[];if(e.layers&&Array.isArray(e.layers)){const v={context:{origin:r,url:l,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};d.push(y(this.layers,e.layers,v))}return Ss(d)}).then(()=>{})}};function Kue(e){return e&&"createElevationSampler"in e}function VF(e){return e.type==="elevation"||Kue(e)}m([x({json:{read:!1}})],fl.prototype,"layers",null),m([Ke("layers")],fl.prototype,"writeLayers",null),m([x({readOnly:!0})],fl.prototype,"resourceInfo",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:hi,read:{reader:Mg,source:"transparency"},write:{writer:(e,t)=>{t.transparency=u2(e)},target:"transparency"}}})],fl.prototype,"opacity",void 0),m([x({type:Boolean,nonNullable:!0,json:{read:!1}})],fl.prototype,"shading",void 0),m([x({type:mt,json:{type:[hi],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],fl.prototype,"surfaceColor",void 0),m([x({type:z2,json:{write:!0}})],fl.prototype,"navigationConstraint",void 0),fl=W6=m([Y("esri.Ground")],fl);const G2=fl;let b0=class extends gt{constructor(e){super(e),this.getCollections=null}initialize(){this.own(vO(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=q(this.getCollections)?this.getCollections():null;if(ae(e))return void this.removeAll();let t=0;for(const i of e)q(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new gt(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const l of s)e=this._processCollection(e,l);else e=this._processCollection(e,s)}}return e}};m([x()],b0.prototype,"getCollections",void 0),m([x()],b0.prototype,"getChildrenFunction",void 0),m([x()],b0.prototype,"itemFilterFunction",void 0),b0=m([Y("esri.core.CollectionFlattener")],b0);const w0=b0;function Yue(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const zF=Ae.getLogger("esri.support.basemapUtils");function Xue(){return{}}function Que(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function ece(e,t){let i;if(typeof e=="string"){if(!(e in q6)){const r=Object.entries(q6).filter(([s,l])=>gi.apiKey&&!l.classic||!gi.apiKey&&l.classic&&!l.deprecated).map(([s])=>`"${s}"`).join(", ");return zF.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=V2.fromId(e),t&&(t[e]=i))}else i=Ai(V2,e);return(i==null?void 0:i.destroyed)&&(zF.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function tce(e){return new w0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const GF={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function ice(e){let t=null;if(typeof e=="string")if(e in GF){const i=GF[e];t=new G2({resourceInfo:{data:{layers:[i]}}})}else Ae.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Ai(G2,e);return t}async function rce(e){const t="portalItem"in e?e:{portalItem:e},i=await import("./portalLayers.3e8a3e04.js");try{return await i.fromItem(t)}catch(r){const s=t&&t.portalItem,l=s&&s.id||"unset",y=s&&s.portal&&s.portal.url||gi.portalUrl;throw Ae.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+l+"')",r),r}}let nce=0,tn=class extends fn.EventedMixin(e0(ul)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ai(-180,-90,180,90,At.WGS84),this.id=Date.now().toString(16)+"-layer-"+nce++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=At.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await import("./arcgisLayers.74976538.js")).fromUrl(t)}static fromPortalItem(e){return rce(e)}initialize(){this.when().catch(e=>{var t,i;Zs(e)||Ae.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return yn(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await li(e,{query:{f:"json"},responseType:"json"})).data;throw new fe("layer:no-attribution-data","Layer does not have attribution data")}};m([x({type:String})],tn.prototype,"attributionDataUrl",void 0),m([x({type:ai})],tn.prototype,"fullExtent",void 0),m([x({readOnly:!0})],tn.prototype,"hasAttributionData",null),m([x({type:String,clonable:!1})],tn.prototype,"id",void 0),m([x({type:Boolean,nonNullable:!0})],tn.prototype,"legendEnabled",void 0),m([x({type:["show","hide","hide-children"]})],tn.prototype,"listMode",void 0),m([x({type:Number,range:{min:0,max:1},nonNullable:!0})],tn.prototype,"opacity",void 0),m([x({clonable:!1})],tn.prototype,"parent",void 0),m([x({readOnly:!0})],tn.prototype,"parsedUrl",null),m([x({type:Boolean})],tn.prototype,"popupEnabled",void 0),m([x({type:Boolean})],tn.prototype,"attributionVisible",void 0),m([x({type:At})],tn.prototype,"spatialReference",void 0),m([x({type:String})],tn.prototype,"title",void 0),m([x({readOnly:!0,json:{read:!1}})],tn.prototype,"type",void 0),m([x()],tn.prototype,"url",void 0),m([x({type:Boolean,nonNullable:!0})],tn.prototype,"visible",void 0),tn=m([Y("esri.layers.Layer")],tn);const _0=tn;function J6(e,t,i){let r,s;if(e)for(let l=0,y=e.length;l<y;l++){if(r=e.getItemAt(l),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(s=J6(r.layers,t,i),s))return s}}const sce=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new gt;const r=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},s=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||Ae.getLogger(this.declaredClass).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},l=y=>{y.parent=null,this.layerRemoved(y)};this.layers.on("before-add",y=>r(y.item)),this.layers.on("after-add",y=>s(y.item)),this.layers.on("after-remove",y=>l(y.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Fp(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof _0){const l=i;l.parent===this?this.reorder(l,r):s.add(l,r)}else eu(i)?i.then(l=>{this.destroyed||this.add(l,r)}):Ae.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;r=s.getNextIndex(r),i.slice().forEach(l=>{l.parent!==this?(s.add(l,r),r+=1):this.reorder(l,r)})}findLayerById(i){return J6(this.layers,"id",i)}findLayerByUid(i){return J6(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return m([x()],t.prototype,"layers",null),t=m([Y("esri.support.LayersMixin")],t),t};function Z6(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const l=e.getItemAt(r);if(l[t]===i)return l;if((l==null?void 0:l.type)==="group"){const y=Z6(l.tables,t,i);if(y)return y}}}const oce=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new gt,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&Ae.getLogger(this.declaredClass).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Fp(i,this._get("tables")))}findTableById(i){return Z6(this.tables,"id",i)}findTableByUid(i){return Z6(this.tables,"uid",i)}};return m([x()],t.prototype,"tables",null),t=m([Y("esri.support.TablesMixin")],t),t};let yl=class extends oce(sce(fn.EventedMixin(ot))){constructor(e){super(e),this.allLayers=new w0({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=tce(this),this.basemap=null,this.editableLayers=new w0({getCollections:()=>[this.allLayers],itemFilterFunction:Yue}),this.ground=new G2,this._basemapCache=Xue()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),Que(this._basemapCache),this._basemapCache=null}castBasemap(e){return ece(e,this._basemapCache)}castGround(e){const t=ice(e);return ae(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};m([x({readOnly:!0,dependsOn:[]})],yl.prototype,"allLayers",void 0),m([x({readOnly:!0})],yl.prototype,"allTables",void 0),m([x({type:V2})],yl.prototype,"basemap",void 0),m([ri("basemap")],yl.prototype,"castBasemap",null),m([x({readOnly:!0})],yl.prototype,"editableLayers",void 0),m([x({type:G2,nonNullable:!0})],yl.prototype,"ground",void 0),m([ri("ground")],yl.prototype,"castGround",null),yl=m([Y("esri.Map")],yl);const ace=yl;class K6{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,s=0,l=!1){return(r-=s)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),l&&r===i&&(r=t),r+s}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return Tn(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function Y6(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}Y6(new K6(0,2*Math.PI));const AEe=Y6(new K6(-Math.PI,Math.PI)),qF=Y6(new K6(0,360));let yu=class extends yr(Ie){constructor(...e){super(...e),this.position=new dt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return t!=null&&(s.heading=t),i!=null&&(s.tilt=i),r!=null&&(s.fov=r),s}return e}writePosition(e,t,i,r){const s=e.clone();s.x=$o(e.x||0),s.y=$o(e.y||0),s.z=e.hasZ?$o(e.z||0):e.z,t[i]=s.write({},r)}readPosition(e,t){const i=new dt;return i.read(e,t),i.x=$o(i.x||0),i.y=$o(i.y||0),i.z=i.hasZ?$o(i.z||0):i.z,i}equals(e){return!ae(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};m([x({type:dt,json:{write:{isRequired:!0}}})],yu.prototype,"position",void 0),m([Ke("position")],yu.prototype,"writePosition",null),m([Be("position")],yu.prototype,"readPosition",null),m([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ri(e=>qF.normalize($o(e)))],yu.prototype,"heading",void 0),m([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ri(e=>Tn($o(e),-180,180))],yu.prototype,"tilt",void 0),m([x({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"fov",void 0),yu=m([Y("esri.Camera")],yu);const lce=yu;var X6;let Xc=X6=class extends Ie{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new X6({rotation:this.rotation,scale:this.scale,targetGeometry:q(this.targetGeometry)?this.targetGeometry.clone():null,camera:q(this.camera)?this.camera.clone():null})}};function Q6(){return{enabled:!this.camera}}m([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Q6}}}}})],Xc.prototype,"rotation",void 0),m([ri("rotation")],Xc.prototype,"castRotation",null),m([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Q6}}}}})],Xc.prototype,"scale",void 0),m([x({types:ou,json:{read:dn,write:!0,origins:{"web-scene":{read:dn,write:{overridePolicy:Q6}}}}})],Xc.prototype,"targetGeometry",void 0),m([x({type:lce,json:{write:!0}})],Xc.prototype,"camera",void 0),Xc=X6=m([Y("esri.Viewpoint")],Xc);const gl=Xc;function Ve(e,t,i={}){return eM(e,t,i,UF)}function no(e,t,i={}){return eM(e,t,i,BF)}function eM(e,t,i={},r){let s=null;const l=i.once?(y,d)=>{r(y)&&(Tr(s),t(y,d))}:(y,d)=>{r(y)&&t(y,d)};if(s=lne(e,l,i.sync,i.equals),i.initial){const y=e();l(y,y)}return s}function hs(e,t,i,r={}){let s=null,l=null,y=null;function d(){var M;s&&l&&(l.remove(),(M=r.onListenerRemove)==null||M.call(r,s),s=null,l=null)}function v(M){r.once&&r.once&&Tr(y),i(M)}const _=Ve(e,(M,T)=>{var A;d(),hw(M)&&(s=M,l=pw(M,t,v),(A=r.onListenerAdd)==null||A.call(r,M))},{sync:r.sync,initial:!0});return y=Zl(()=>{_.remove(),d()}),y}function em(e,t){return uce(e,BF,t)}function uce(e,t,i){if(Eo(i))return Promise.reject(zi());const r=e();if(t==null?void 0:t(r))return Promise.resolve(r);let s=null;function l(){s=Tr(s)}return new Promise((y,d)=>{s=Ly([Io(i,()=>{l(),d(zi())}),eM(e,v=>{l(),y(v)},{sync:!1,once:!0},t!=null?t:UF)])})}function UF(e){return!0}function BF(e){return!!e}function PEe(e,t,i={}){let r=!1;const s=Ve(e,(l,y)=>{r||t(l,y)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const ml={sync:!0},fi={initial:!0},As={sync:!0,initial:!0};class q2{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(Fr(t)),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(Fr(t)),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var gn;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(gn||(gn={}));let cce=0;function HF(){return cce++}function hce(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function tm(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function tM(e,t,i,r){if(t.type===gn.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==gn.INVOKE&&t.type!==gn.RESPONSE)return void e.postMessage(t);let s;if(hce(i)?(s=WF(i.transferList),t.data=i.result):(s=WF(r),t.data=i),s){if(Me("ff")){for(const l of s)if("byteLength"in l&&l.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case gn.INVOKE:throw y;case gn.RESPONSE:return void tM(e,{type:gn.RESPONSE,jobId:t.jobId,error:tm(y)})}}}e.postMessage(t,s)}else e.postMessage(t)}function im(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function WF(e){if(!e||!e.length)return null;if(Me("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!pce(i));return t.length?t:null}function pce(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const dce={statsWorker:()=>import("./statsWorker.e668b30f.js"),geometryEngineWorker:()=>import("./geometryEngineWorker.81a9d9e7.js"),CSVSourceWorker:()=>import("./CSVSourceWorker.e587fdfa.js"),EdgeProcessingWorker:()=>import("./EdgeProcessingWorker.fa6b1c8b.js"),ElevationSamplerWorker:()=>import("./ElevationSamplerWorker.207b11dd.js"),FeatureServiceSnappingSourceWorker:()=>import("./FeatureServiceSnappingSourceWorker.ae8402e0.js"),GeoJSONSourceWorker:()=>import("./GeoJSONSourceWorker.fed275e7.js"),LercWorker:()=>import("./LercWorker.391fdfd5.js"),MemorySourceWorker:()=>import("./MemorySourceWorker.03c8e6cc.js"),PBFDecoderWorker:()=>import("./PBFDecoderWorker.a0c5540a.js"),Pipeline:()=>import("./Pipeline.d3c3f977.js"),PointCloudWorker:()=>import("./PointCloudWorker.a0267be8.js"),RasterWorker:()=>import("./RasterWorker.2523ecaa.js"),SceneLayerSnappingSourceWorker:()=>import("./SceneLayerSnappingSourceWorker.426c586c.js"),SceneLayerWorker:()=>import("./SceneLayerWorker.8d79f29c.js"),WFSSourceWorker:()=>import("./WFSSourceWorker.4485bb19.js"),WorkerTileHandler:()=>import("./WorkerTileHandler.c551fc3e.js")},{CLOSE:JF,ABORT:ZF,INVOKE:KF,RESPONSE:rm,OPEN_PORT:YF,ON:fce}=gn,yce=2;class gce{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===gn.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Ps{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new gce(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Ps(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),Ps.clients.set(s,r),i.port2}static loadWorker(t){const i=dce[t];return i?i():Promise.resolve(null)}close(){this._post({type:JF}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const s=r&&r.signal,l=r&&r.transferList;if(!this._port)return Promise.reject(new fe("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=HF();return new Promise((d,v)=>{if(Eo(s))return this._processWork(),void v(zi());const _=Io(s,()=>{const T=this._outJobs.get(y);T&&(this._outJobs.delete(y),this._processWork(),Tr(T.abortHandle),this._post({type:ZF,jobId:y}),v(zi()))}),M={resolve:d,reject:v,abortHandle:_,debugInfo:t};this._outJobs.set(y,M),this._post({type:KF,jobId:y,methodName:t,abortable:s!=null},i,l)})}on(t,i){const r=new MessageChannel;function s(l){i(l.data)}return this._port.postMessage({type:gn.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:gn.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:YF,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=yce)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:s,deferred:l}=t;this.invoke(i,r,s).then(y=>l.resolve(y)).catch(y=>l.reject(y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Tr(t.abortHandle),t.reject(zi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){q(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=im(t);if(i)switch(i.type){case rm:this._onResponseMessage(i);break;case KF:this._invokeQueue.push(i);break;case ZF:this._onAbortMessage(i);break;case JF:this._onCloseMessage();break;case YF:this._onOpenPortMessage(i);break;case fce:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Ps.clients.get(this)===t&&t.destroy(),Ps.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:l}=t,y=l?new AbortController:null,d=this._inJobs;let v,_=this._client,M=_[i];try{if(!M&&i&&i.includes(".")){const T=i.split(".");for(let A=0;A<T.length-1;A++)_=_[T[A]],M=_[T[A+1]]}if(typeof M!="function")throw new TypeError(`${i} is not a function`);v=M.call(_,s,{client:this,signal:y?y.signal:null})}catch(T){return void this._post({type:rm,jobId:r,error:tm(T)})}eu(v)?(d.set(r,{controller:y,promise:v}),v.then(T=>{d.has(r)&&(d.delete(r),this._post({type:rm,jobId:r},T))},T=>{d.has(r)&&(d.delete(r),Zs(T)||this._post({type:rm,jobId:r,error:tm(T||{message:`Error encountered at method ${i}`})}))})):this._post({type:rm,jobId:r},v)}_onOpenPortMessage(t){new Ps(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,l=>{i.postMessage(l)}),s=pw(t.port,"message",l=>{var y;((y=im(l))==null?void 0:y.type)===gn.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,l=this._outJobs;if(!l.has(i))return;const y=l.get(i);l.delete(i),this._processWork(),Tr(y.abortHandle),r?y.reject(fe.fromJSON(JSON.parse(r))):y.resolve(s)}_post(t,i,r){return tM(this._port,t,i,r)}}Ps.kernelInfo={revision:QR,version:eF,buildDate:XR},Ps.clients=new Map;class mce{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new q2}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,s)=>{let l=!0;const y=d=>{fr(i.signal),l&&(l=!1,d())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let d=0;d<t.length;++d){const v=t[d];eu(v)?this._clientPromises[d]=v.then(_=>(this._clients[d]=new Ps(_,i,()=>{var M;return(M=this._ongoingJobsQueue.pop())!=null?M:null}),y(r),this._clients[d]),()=>(y(s),null)):(this._clients[d]=new Ps(v,i,()=>{var _;return(_=this._ongoingJobsQueue.pop())!=null?_:null}),this._clientPromises[d]=Promise.resolve(this._clients[d]),y(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let l=0;l<this._clientPromises.length;++l){const y=this._clientPromises[l];s[l]=y.then(d=>d==null?void 0:d.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(zi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let s;Array.isArray(r)?(Ae.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const l=Ql();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:s,deferred:l});for(let y=0;y<this._clientPromises.length;y++){const d=this._clients[y];d?d.jobAdded():this._clientPromises[y].then(v=>v==null?void 0:v.jobAdded())}return l.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>Ly(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(l=>{l&&(i[s]=l.openPort()),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const XF=Ae.getLogger("esri.intl.substitute");function vl(e,t,i={}){const{format:r={}}=i;return Ja(e,s=>vce(s,t,r))}function vce(e,t,i){var v;let r,s;const l=e.indexOf(":");if(l===-1?r=e.trim():(r=e.slice(0,l).trim(),s=e.slice(l+1).trim()),!r)return"";const y=Of(r,t);if(y==null)return"";const d=(v=s?i==null?void 0:i[s]:null)!=null?v:i==null?void 0:i[r];return d?bce(y,d):s?wce(y,s):iM(y)}function bce(e,t){switch(t.type){case"date":return lu(e,t.intlOptions);case"number":return Po(e,t.intlOptions);default:return XF.warn("missing format descriptor for key {key}"),iM(e)}}function wce(e,t){switch(t.toLowerCase()){case"dateformat":return lu(e);case"numberformat":return Po(e);default:return XF.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?lu(e):/^numberformat/i.test(t)?Po(e):iM(e)}}function iM(e){switch(typeof e){case"string":return e;case"number":return Po(e);case"boolean":return""+e;default:return e instanceof Date?lu(e):""}}async function _ce(e,t,i,r){const s=t.exec(i);if(!s)throw new fe("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const l=s[1]?`${s[1]}/`:"",y=s[2],d=Lue(r),v=`${l}${y}.json`,_=d?`${l}${y}_${d}.json`:v;let M;try{M=await QF(e(_))}catch(T){if(_===v)throw new fe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:T});try{M=await QF(e(v))}catch(A){throw new fe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A})}}return M}async function QF(e){if(q(eL.fetchBundleAsset))return eL.fetchBundleAsset(e);const t=await li(e,{responseType:"text"});return JSON.parse(t.data)}class xce{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?l=>new URL(l,new URL(r,window.location.href)).href:r instanceof URL?l=>new URL(l,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return _ce(this.getAssetUrl,this.matcher,t,i)}}function Sce(e){return new xce(e)}const eL={};Fue(Sce({pattern:"esri/",location:mi}));const tL={};function Mce(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function $ce(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:te({},e.has),map:te({},e.map),packages:e.packages&&e.packages.concat()||[],paths:te({},e.paths)};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=tL.baseUrl),(i=tL.packages)==null||i.forEach(r=>{var s;Mce((s=t.packages)!=null?s:[],r)}),t}class Ece{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class U2{constructor(){this._dispatcher=new Ece,this._workerPostMessage({type:gn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Ff(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){Ff(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=im(t);if(i&&i.type===gn.OPEN){const{modulePath:r,jobId:s}=i;let l=await Ps.loadWorker(r);l||(l=await import(r));const y=Ps.connect(l);this._workerPostMessage({type:gn.OPENED,jobId:s,data:y})}}}const rM=Ae.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Ice}=gn,Tce='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let B2,H2;const iL="Failed to create Worker. Fallback to execute module in main thread";async function Cce(){if(!Me("esri-workers")||(Me("mozilla"),0))return rL(new U2);if(!B2&&!H2)try{const t=Tce.split('"{CONFIGURATION}"').join(`'${Ace()}'`);B2=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){H2=t||{}}let e;if(B2)try{e=new Worker(B2,{name:"esri-worker-"+Pce++})}catch{rM.warn(iL,H2),e=new U2}else rM.warn(iL,H2),e=new U2;return rL(e)}async function rL(e){return new Promise(t=>{function i(s){const l=im(s);l&&l.type===Ice&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),rM.warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new U2).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function Ace(){let e;if(gi.default!=null){const s=te({},gi);delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(gi));e.assetsPath=Fo(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Fo(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=na(),e.has={"esri-csp-restrictions":Me("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Me("esri-2d-update-debug"),"featurelayer-pbf":Me("featurelayer-pbf"),"featurelayer-simplify-thresholds":Me("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Me("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Me("featurelayer-simplify-mobile-factor"),"esri-atomics":Me("esri-atomics"),"esri-shared-array-buffer":Me("esri-shared-array-buffer"),"esri-tiles-debug":Me("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Me("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Me("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":Me("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=Fo(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Fo(e.workers.workerPath):e.workers.workerPath=Fo(mi("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=gi.workers.loaderConfig,i=$ce({baseUrl:t==null?void 0:t.baseUrl,locale:na(),has:te({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},t==null?void 0:t.has),map:te({},t==null?void 0:t.map),paths:te({},t==null?void 0:t.paths),packages:(t==null?void 0:t.packages)||[]}),r={version:eF,buildDate:XR,revision:QR};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let Pce=0;const{ABORT:nL,INVOKE:Oce,OPEN:kce,OPENED:Rce,RESPONSE:nm}=gn;class nM{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),Ae.getLogger("esri.core.workers.WorkerOwner").error(r)})}static async create(t){const i=await Cce();return new nM(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=HF();return new Promise((l,y)=>{const d={resolve:l,reject:y,abortHandle:Z9(r,()=>{this._outJobs.delete(s),this._post({type:nL,jobId:s})})};this._outJobs.set(s,d),this._post({type:kce,jobId:s,modulePath:t})})}_onMessage(t){const i=im(t);if(i)switch(i.type){case Rce:this._onOpenedMessage(i);break;case nm:this._onResponseMessage(i);break;case nL:this._onAbortMessage(i);break;case Oce:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:l}=t,y=l?new AbortController:null,d=this._inJobs,v=Ole[i];let _;try{if(typeof v!="function")throw new TypeError(`${i} is not a function`);_=v.call(null,s,{signal:y?y.signal:null})}catch(M){return void this._post({type:nm,jobId:r,error:tm(M)})}eu(_)?(d.set(r,{controller:y,promise:_}),_.then(M=>{d.has(r)&&(d.delete(r),this._post({type:nm,jobId:r},M))},M=>{d.has(r)&&(d.delete(r),M||(M={message:"Error encountered at method"+i}),Zs(M)||this._post({type:nm,jobId:r,error:tm(M||{message:`Error encountered at method ${i}`})}))})):this._post({type:nm,jobId:r},_)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Tr(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),Tr(l.abortHandle),r?l.reject(fe.fromJSON(JSON.parse(r))):l.resolve(s))}_post(t,i,r){return tM(this.worker,t,i,r)}}let Hp=Me("esri-workers-debug")?1:Me("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):Me("host-browser")?navigator.hardwareConcurrency-1:0;Hp||(Hp=Me("safari")&&Me("mac")||Me("trident")?7:2);let sL=0;const W2=[];function Fce(){oL()}async function J2(e,t){const i=new mce;return await i.open(e,t),i}async function Lce(e,t={}){if(typeof e!="string")throw new fe("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(Me("host-webworker")&&!Me("esri-workers")&&(i="local"),i==="local"){let r=await Ps.loadWorker(e);r||(r=await import(e)),fr(t.signal);const s=t.client||r;return J2([Ps.connect(r)],De(te({},t),{client:s}))}if(await oL(),fr(t.signal),i==="dedicated"){const r=sL++%Hp;return J2([await W2[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Hp);if(r<Hp){const s=new Array(r);for(let l=0;l<r;++l){const y=sL++%Hp;s[l]=W2[y].open(e,t)}return J2(s,t)}}return J2(W2.map(r=>r.open(e,t)),t)}let Z2=null;async function oL(){if(Z2)return Z2;new AbortController;const e=[];for(let t=0;t<Hp;t++){const i=nM.create(t).then(r=>(W2[t]=r,r));e.push(i)}return Z2=Promise.all(e),Z2}function sM(e){return new At({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const aL=sM(Bi),K2=sM(iu),Y2=sM(Ic),Nce=new At({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Bi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function OEe(e){return e&&(Iw(e)||e===K2)?K2:e&&(Tw(e)||e===Y2)?Y2:aL}function oM(e){return q(e)&&(Iw(e)||e===K2)?iu:q(e)&&(Tw(e)||e===Y2)?Ic:Bi}function kEe(e){return r4(e)?iu:n4(e)?Ic:Bi}const lL=39.37,jce=Bi.radius*Math.PI/200,uL=/UNIT\[([^\]]+)\]\]$/i,Wp=X,cL=/UNIT\[([^\]]+)\]/i,Dce=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Vce=$n()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),bl=e=>e*e,Qc=e=>e*e*e,sm={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:bl(.001)},"square-centimeters":{inBaseUnits:bl(.01)},"square-decimeters":{inBaseUnits:bl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:bl(1e3)},"square-inches":{inBaseUnits:bl(.0254)},"square-feet":{inBaseUnits:bl(.3048)},"square-yards":{inBaseUnits:bl(.9144)},"square-miles":{inBaseUnits:bl(1609.344)},"square-us-feet":{inBaseUnits:bl(1200/3937)},acres:{inBaseUnits:.0015625*bl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Qc(.001)},"cubic-centimeters":{inBaseUnits:1e3*Qc(.01)},"cubic-decimeters":{inBaseUnits:1e3*Qc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Qc(1e3)},"cubic-inches":{inBaseUnits:1e3*Qc(.0254)},"cubic-feet":{inBaseUnits:1e3*Qc(.3048)},"cubic-yards":{inBaseUnits:1e3*Qc(.9144)},"cubic-miles":{inBaseUnits:1e3*Qc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},zce=(()=>{const e={};for(const t in sm)for(const i in sm[t].units)e[i]=t;return e})();function Gce(e,t,i){return e*sm[i].units[t].inBaseUnits}function qce(e,t,i){return e/sm[i].units[t].inBaseUnits}const hL=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],Uce=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function aM(e){const t=zce[e];if(!t)throw new Error("unknown type");return t}function pL(e,t=null){return t=t||aM(e),sm[t].baseUnit===e}function vi(e,t,i){if(t===i)return e;const r=aM(t);if(r!==aM(i))throw new Error("incompatible units");const s=pL(t,r)?e:Gce(e,t,r);return pL(i,r)?s:qce(s,i,r)}function dL(e,t){const i=vi(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function fL(e,t){const i=vi(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function yL(e,t){const i=vi(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function gL(e,t){const i=vi(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Bce(e,t){const i=vi(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Hce(e,t){const i=vi(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function mL(e,t,i){return vi(e,t,"meters")/(i*Math.PI/180)}function vL(e){return Vce.fromJSON(e.toLowerCase())||null}function x0(e){if(q(e)&&!xne(e))return 1;const t=Jp(e);return t>1e5?1:t}function bL(e){return Jp(e)>=oM(e).metersPerDegree?"meters":om(e)}function Jp(e,t=Bi.metersPerDegree){return hn(Wce(e,!0),t)}function Wce(e,t=!1){const i=q(e)?e.wkid:null,r=q(e)?e.wkt:null;let s=null;if(i){if(r4(i))return iu.metersPerDegree;if(n4(i))return Ic.metersPerDegree;s=Wp.values[Wp[i]],!s&&t&&Dce.has(i)&&(s=jce)}else r&&(SL(r)?s=wL(uL.exec(r),s):xL(r)&&(s=wL(cL.exec(r),s)));return s}function wL(e,t){return e&&e[1]?_L(e[1]):t}function _L(e){return parseFloat(e.split(",")[1])}function om(e){const t=q(e)?e.wkid:null,i=q(e)?e.wkt:null;let r=null;if(t)r=Wp.units[Wp[t]];else if(i){const s=SL(i)?uL:xL(i)?cL:null;if(s){const l=s.exec(i);l&&l[1]&&(r=Zce(l[1]))}}return q(r)?vL(r):null}function REe(e){const t=om(e);return ae(t)||!hL.includes(t)?null:t}function FEe(e){const t=bL(e);return ae(t)||!hL.includes(t)?null:t}function LEe(e){const t=om(e);return ae(t)?null:Uce.get(t)}function xL(e){return/^GEOCCS/i.test(e)}function SL(e){return/^PROJCS/i.test(e)}const Jce=1e-7;function Zce(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!Wp.units.includes(i)){const r=_L(e);i=null;const s=Wp.values;for(let l=0;l<s.length;++l)if(Math.abs(r-s[l])<Jce){i=Wp.units[l];break}}return i}function Kce(e){const t=om(e);if(ae(t))return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}function NEe(e){var s,l,y;const t="metric";if(ae(e))return t;const i=e.map,r=i&&"portalItem"in i?(s=i.portalItem)==null?void 0:s.portal:null;if(r)switch((y=(l=r==null?void 0:r.user)==null?void 0:l.units)!=null?y:r.units){case t:return t;case"english":return"imperial"}return hn(Kce(e.spatialReference),t)}const ML={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Yce=$n()(ML),Xce=$n()($L);$n()(te(te({},ML),$L));function Qce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function eh(e,t,i,r,s,l,y,d,v,_,M,T,A,R,F,V,z){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=y,e[6]=d,e[7]=v,e[8]=_,e[9]=M,e[10]=T,e[11]=A,e[12]=R,e[13]=F,e[14]=V,e[15]=z,e}function X2(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gu(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],l=t[6],y=t[7],d=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=l,e[11]=t[14],e[12]=s,e[13]=y,e[14]=d}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function ehe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=t[9],A=t[10],R=t[11],F=t[12],V=t[13],z=t[14],W=t[15],Z=i*d-r*y,Q=i*v-s*y,ee=i*_-l*y,re=r*v-s*d,ie=r*_-l*d,he=s*_-l*v,be=M*V-T*F,we=M*z-A*F,xe=M*W-R*F,$e=T*z-A*V,je=T*W-R*V,it=A*W-R*z;let Ye=Z*it-Q*je+ee*$e+re*xe-ie*we+he*be;return Ye?(Ye=1/Ye,e[0]=(d*it-v*je+_*$e)*Ye,e[1]=(s*je-r*it-l*$e)*Ye,e[2]=(V*he-z*ie+W*re)*Ye,e[3]=(A*ie-T*he-R*re)*Ye,e[4]=(v*xe-y*it-_*we)*Ye,e[5]=(i*it-s*xe+l*we)*Ye,e[6]=(z*ee-F*he-W*Q)*Ye,e[7]=(M*he-A*ee+R*Q)*Ye,e[8]=(y*je-d*xe+_*be)*Ye,e[9]=(r*xe-i*je-l*be)*Ye,e[10]=(F*ie-V*ee+W*Z)*Ye,e[11]=(T*ee-M*ie-R*Z)*Ye,e[12]=(d*we-y*$e-v*be)*Ye,e[13]=(i*$e-r*we+s*be)*Ye,e[14]=(V*Q-F*re-z*Z)*Ye,e[15]=(M*re-T*Q+A*Z)*Ye,e):null}function the(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=t[9],A=t[10],R=t[11],F=t[12],V=t[13],z=t[14],W=t[15];return e[0]=d*(A*W-R*z)-T*(v*W-_*z)+V*(v*R-_*A),e[1]=-(r*(A*W-R*z)-T*(s*W-l*z)+V*(s*R-l*A)),e[2]=r*(v*W-_*z)-d*(s*W-l*z)+V*(s*_-l*v),e[3]=-(r*(v*R-_*A)-d*(s*R-l*A)+T*(s*_-l*v)),e[4]=-(y*(A*W-R*z)-M*(v*W-_*z)+F*(v*R-_*A)),e[5]=i*(A*W-R*z)-M*(s*W-l*z)+F*(s*R-l*A),e[6]=-(i*(v*W-_*z)-y*(s*W-l*z)+F*(s*_-l*v)),e[7]=i*(v*R-_*A)-y*(s*R-l*A)+M*(s*_-l*v),e[8]=y*(T*W-R*V)-M*(d*W-_*V)+F*(d*R-_*T),e[9]=-(i*(T*W-R*V)-M*(r*W-l*V)+F*(r*R-l*T)),e[10]=i*(d*W-_*V)-y*(r*W-l*V)+F*(r*_-l*d),e[11]=-(i*(d*R-_*T)-y*(r*R-l*T)+M*(r*_-l*d)),e[12]=-(y*(T*z-A*V)-M*(d*z-v*V)+F*(d*A-v*T)),e[13]=i*(T*z-A*V)-M*(r*z-s*V)+F*(r*A-s*T),e[14]=-(i*(d*z-v*V)-y*(r*z-s*V)+F*(r*v-s*d)),e[15]=i*(d*A-v*T)-y*(r*A-s*T)+M*(r*v-s*d),e}function ihe(e){const t=e[0],i=e[1],r=e[2],s=e[3],l=e[4],y=e[5],d=e[6],v=e[7],_=e[8],M=e[9],T=e[10],A=e[11],R=e[12],F=e[13],V=e[14],z=e[15];return(t*y-i*l)*(T*z-A*V)-(t*d-r*l)*(M*z-A*F)+(t*v-s*l)*(M*V-T*F)+(i*d-r*y)*(_*z-A*R)-(i*v-s*y)*(_*V-T*R)+(r*v-s*d)*(_*F-M*R)}function EL(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=t[9],R=t[10],F=t[11],V=t[12],z=t[13],W=t[14],Z=t[15];let Q=i[0],ee=i[1],re=i[2],ie=i[3];return e[0]=Q*r+ee*d+re*T+ie*V,e[1]=Q*s+ee*v+re*A+ie*z,e[2]=Q*l+ee*_+re*R+ie*W,e[3]=Q*y+ee*M+re*F+ie*Z,Q=i[4],ee=i[5],re=i[6],ie=i[7],e[4]=Q*r+ee*d+re*T+ie*V,e[5]=Q*s+ee*v+re*A+ie*z,e[6]=Q*l+ee*_+re*R+ie*W,e[7]=Q*y+ee*M+re*F+ie*Z,Q=i[8],ee=i[9],re=i[10],ie=i[11],e[8]=Q*r+ee*d+re*T+ie*V,e[9]=Q*s+ee*v+re*A+ie*z,e[10]=Q*l+ee*_+re*R+ie*W,e[11]=Q*y+ee*M+re*F+ie*Z,Q=i[12],ee=i[13],re=i[14],ie=i[15],e[12]=Q*r+ee*d+re*T+ie*V,e[13]=Q*s+ee*v+re*A+ie*z,e[14]=Q*l+ee*_+re*R+ie*W,e[15]=Q*y+ee*M+re*F+ie*Z,e}function rhe(e,t,i){const r=i[0],s=i[1],l=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*l+t[12],e[13]=t[1]*r+t[5]*s+t[9]*l+t[13],e[14]=t[2]*r+t[6]*s+t[10]*l+t[14],e[15]=t[3]*r+t[7]*s+t[11]*l+t[15];else{const y=t[0],d=t[1],v=t[2],_=t[3],M=t[4],T=t[5],A=t[6],R=t[7],F=t[8],V=t[9],z=t[10],W=t[11];e[0]=y,e[1]=d,e[2]=v,e[3]=_,e[4]=M,e[5]=T,e[6]=A,e[7]=R,e[8]=F,e[9]=V,e[10]=z,e[11]=W,e[12]=y*r+M*s+F*l+t[12],e[13]=d*r+T*s+V*l+t[13],e[14]=v*r+A*s+z*l+t[14],e[15]=_*r+R*s+W*l+t[15]}return e}function nhe(e,t,i){const r=i[0],s=i[1],l=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*l,e[9]=t[9]*l,e[10]=t[10]*l,e[11]=t[11]*l,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function she(e,t,i,r){let s,l,y,d,v,_,M,T,A,R,F,V,z,W,Z,Q,ee,re,ie,he,be,we,xe,$e,je=r[0],it=r[1],Ye=r[2],Lt=Math.sqrt(je*je+it*it+Ye*Ye);return Lt<Ms()?null:(Lt=1/Lt,je*=Lt,it*=Lt,Ye*=Lt,s=Math.sin(i),l=Math.cos(i),y=1-l,d=t[0],v=t[1],_=t[2],M=t[3],T=t[4],A=t[5],R=t[6],F=t[7],V=t[8],z=t[9],W=t[10],Z=t[11],Q=je*je*y+l,ee=it*je*y+Ye*s,re=Ye*je*y-it*s,ie=je*it*y-Ye*s,he=it*it*y+l,be=Ye*it*y+je*s,we=je*Ye*y+it*s,xe=it*Ye*y-je*s,$e=Ye*Ye*y+l,e[0]=d*Q+T*ee+V*re,e[1]=v*Q+A*ee+z*re,e[2]=_*Q+R*ee+W*re,e[3]=M*Q+F*ee+Z*re,e[4]=d*ie+T*he+V*be,e[5]=v*ie+A*he+z*be,e[6]=_*ie+R*he+W*be,e[7]=M*ie+F*he+Z*be,e[8]=d*we+T*xe+V*$e,e[9]=v*we+A*xe+z*$e,e[10]=_*we+R*xe+W*$e,e[11]=M*we+F*xe+Z*$e,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ohe(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[4],y=t[5],d=t[6],v=t[7],_=t[8],M=t[9],T=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=l*s+_*r,e[5]=y*s+M*r,e[6]=d*s+T*r,e[7]=v*s+A*r,e[8]=_*s-l*r,e[9]=M*s-y*r,e[10]=T*s-d*r,e[11]=A*s-v*r,e}function ahe(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[0],y=t[1],d=t[2],v=t[3],_=t[8],M=t[9],T=t[10],A=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s-_*r,e[1]=y*s-M*r,e[2]=d*s-T*r,e[3]=v*s-A*r,e[8]=l*r+_*s,e[9]=y*r+M*s,e[10]=d*r+T*s,e[11]=v*r+A*s,e}function lhe(e,t,i){const r=Math.sin(i),s=Math.cos(i),l=t[0],y=t[1],d=t[2],v=t[3],_=t[4],M=t[5],T=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*s+_*r,e[1]=y*s+M*r,e[2]=d*s+T*r,e[3]=v*s+A*r,e[4]=_*s-l*r,e[5]=M*s-y*r,e[6]=T*s-d*r,e[7]=A*s-v*r,e}function IL(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function uhe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function TL(e,t,i){if(t===0)return X2(e);let r,s,l,y=i[0],d=i[1],v=i[2],_=Math.sqrt(y*y+d*d+v*v);return _<Ms()?null:(_=1/_,y*=_,d*=_,v*=_,r=Math.sin(t),s=Math.cos(t),l=1-s,e[0]=y*y*l+s,e[1]=d*y*l+v*r,e[2]=v*y*l-d*r,e[3]=0,e[4]=y*d*l-v*r,e[5]=d*d*l+s,e[6]=v*d*l+y*r,e[7]=0,e[8]=y*v*l+d*r,e[9]=d*v*l-y*r,e[10]=v*v*l+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function che(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hhe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function phe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function CL(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=r+r,v=s+s,_=l+l,M=r*d,T=r*v,A=r*_,R=s*v,F=s*_,V=l*_,z=y*d,W=y*v,Z=y*_;return e[0]=1-(R+V),e[1]=T+Z,e[2]=A-W,e[3]=0,e[4]=T-Z,e[5]=1-(M+V),e[6]=F+z,e[7]=0,e[8]=A+W,e[9]=F-z,e[10]=1-(M+R),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function dhe(e,t){const i=fhe,r=-t[0],s=-t[1],l=-t[2],y=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=r*r+s*s+l*l+y*y;return T>0?(i[0]=2*(d*y+M*r+v*l-_*s)/T,i[1]=2*(v*y+M*s+_*r-d*l)/T,i[2]=2*(_*y+M*l+d*s-v*r)/T):(i[0]=2*(d*y+M*r+v*l-_*s),i[1]=2*(v*y+M*s+_*r-d*l),i[2]=2*(_*y+M*l+d*s-v*r)),CL(e,t,i),e}const fhe=Qe();function yhe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ghe(e,t){const i=t[0],r=t[1],s=t[2],l=t[4],y=t[5],d=t[6],v=t[8],_=t[9],M=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(l*l+y*y+d*d),e[2]=Math.sqrt(v*v+_*_+M*M),e}function mhe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function vhe(e,t,i,r){const s=t[0],l=t[1],y=t[2],d=t[3],v=s+s,_=l+l,M=y+y,T=s*v,A=s*_,R=s*M,F=l*_,V=l*M,z=y*M,W=d*v,Z=d*_,Q=d*M,ee=r[0],re=r[1],ie=r[2];return e[0]=(1-(F+z))*ee,e[1]=(A+Q)*ee,e[2]=(R-Z)*ee,e[3]=0,e[4]=(A-Q)*re,e[5]=(1-(T+z))*re,e[6]=(V+W)*re,e[7]=0,e[8]=(R+Z)*ie,e[9]=(V-W)*ie,e[10]=(1-(T+F))*ie,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function bhe(e,t,i,r,s){const l=t[0],y=t[1],d=t[2],v=t[3],_=l+l,M=y+y,T=d+d,A=l*_,R=l*M,F=l*T,V=y*M,z=y*T,W=d*T,Z=v*_,Q=v*M,ee=v*T,re=r[0],ie=r[1],he=r[2],be=s[0],we=s[1],xe=s[2],$e=(1-(V+W))*re,je=(R+ee)*re,it=(F-Q)*re,Ye=(R-ee)*ie,Lt=(1-(A+W))*ie,Dt=(z+Z)*ie,ft=(F+Q)*he,Ze=(z-Z)*he,Ct=(1-(A+V))*he;return e[0]=$e,e[1]=je,e[2]=it,e[3]=0,e[4]=Ye,e[5]=Lt,e[6]=Dt,e[7]=0,e[8]=ft,e[9]=Ze,e[10]=Ct,e[11]=0,e[12]=i[0]+be-($e*be+Ye*we+ft*xe),e[13]=i[1]+we-(je*be+Lt*we+Ze*xe),e[14]=i[2]+xe-(it*be+Dt*we+Ct*xe),e[15]=1,e}function whe(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=i+i,d=r+r,v=s+s,_=i*y,M=r*y,T=r*d,A=s*y,R=s*d,F=s*v,V=l*y,z=l*d,W=l*v;return e[0]=1-T-F,e[1]=M+W,e[2]=A-z,e[3]=0,e[4]=M-W,e[5]=1-_-F,e[6]=R+V,e[7]=0,e[8]=A+z,e[9]=R-V,e[10]=1-_-T,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _he(e,t,i,r,s,l,y){const d=1/(i-t),v=1/(s-r),_=1/(l-y);return e[0]=2*l*d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*l*v,e[6]=0,e[7]=0,e[8]=(i+t)*d,e[9]=(s+r)*v,e[10]=(y+l)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*l*2*_,e[15]=0,e}function xhe(e,t,i,r,s){const l=1/Math.tan(t/2);let y;return e[0]=l/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(y=1/(r-s),e[10]=(s+r)*y,e[14]=2*s*r*y):(e[10]=-1,e[14]=-2*r),e}function She(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),l=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),d=Math.tan(t.rightDegrees*Math.PI/180),v=2/(y+d),_=2/(s+l);return e[0]=v,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=_,e[6]=0,e[7]=0,e[8]=-(y-d)*v*.5,e[9]=(s-l)*_*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function Mhe(e,t,i,r,s,l,y){const d=1/(t-i),v=1/(r-s),_=1/(l-y);return e[0]=-2*d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(t+i)*d,e[13]=(s+r)*v,e[14]=(y+l)*_,e[15]=1,e}function $he(e,t,i,r){let s,l,y,d,v,_,M,T,A,R;const F=t[0],V=t[1],z=t[2],W=r[0],Z=r[1],Q=r[2],ee=i[0],re=i[1],ie=i[2],he=Ms();return Math.abs(F-ee)<he&&Math.abs(V-re)<he&&Math.abs(z-ie)<he?X2(e):(M=F-ee,T=V-re,A=z-ie,R=1/Math.sqrt(M*M+T*T+A*A),M*=R,T*=R,A*=R,s=Z*A-Q*T,l=Q*M-W*A,y=W*T-Z*M,R=Math.sqrt(s*s+l*l+y*y),R?(R=1/R,s*=R,l*=R,y*=R):(s=0,l=0,y=0),d=T*y-A*l,v=A*s-M*y,_=M*l-T*s,R=Math.sqrt(d*d+v*v+_*_),R?(R=1/R,d*=R,v*=R,_*=R):(d=0,v=0,_=0),e[0]=s,e[1]=d,e[2]=M,e[3]=0,e[4]=l,e[5]=v,e[6]=T,e[7]=0,e[8]=y,e[9]=_,e[10]=A,e[11]=0,e[12]=-(s*F+l*V+y*z),e[13]=-(d*F+v*V+_*z),e[14]=-(M*F+T*V+A*z),e[15]=1,e)}function Ehe(e,t,i,r){const s=t[0],l=t[1],y=t[2],d=r[0],v=r[1],_=r[2];let M=s-i[0],T=l-i[1],A=y-i[2],R=M*M+T*T+A*A;R>0&&(R=1/Math.sqrt(R),M*=R,T*=R,A*=R);let F=v*A-_*T,V=_*M-d*A,z=d*T-v*M;return R=F*F+V*V+z*z,R>0&&(R=1/Math.sqrt(R),F*=R,V*=R,z*=R),e[0]=F,e[1]=V,e[2]=z,e[3]=0,e[4]=T*z-A*V,e[5]=A*F-M*z,e[6]=M*V-T*F,e[7]=0,e[8]=M,e[9]=T,e[10]=A,e[11]=0,e[12]=s,e[13]=l,e[14]=y,e[15]=1,e}function Ihe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function The(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Che(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function AL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function Ahe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function Phe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function Ohe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function khe(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],l=e[3],y=e[4],d=e[5],v=e[6],_=e[7],M=e[8],T=e[9],A=e[10],R=e[11],F=e[12],V=e[13],z=e[14],W=e[15],Z=t[0],Q=t[1],ee=t[2],re=t[3],ie=t[4],he=t[5],be=t[6],we=t[7],xe=t[8],$e=t[9],je=t[10],it=t[11],Ye=t[12],Lt=t[13],Dt=t[14],ft=t[15],Ze=Ms();return Math.abs(i-Z)<=Ze*Math.max(1,Math.abs(i),Math.abs(Z))&&Math.abs(r-Q)<=Ze*Math.max(1,Math.abs(r),Math.abs(Q))&&Math.abs(s-ee)<=Ze*Math.max(1,Math.abs(s),Math.abs(ee))&&Math.abs(l-re)<=Ze*Math.max(1,Math.abs(l),Math.abs(re))&&Math.abs(y-ie)<=Ze*Math.max(1,Math.abs(y),Math.abs(ie))&&Math.abs(d-he)<=Ze*Math.max(1,Math.abs(d),Math.abs(he))&&Math.abs(v-be)<=Ze*Math.max(1,Math.abs(v),Math.abs(be))&&Math.abs(_-we)<=Ze*Math.max(1,Math.abs(_),Math.abs(we))&&Math.abs(M-xe)<=Ze*Math.max(1,Math.abs(M),Math.abs(xe))&&Math.abs(T-$e)<=Ze*Math.max(1,Math.abs(T),Math.abs($e))&&Math.abs(A-je)<=Ze*Math.max(1,Math.abs(A),Math.abs(je))&&Math.abs(R-it)<=Ze*Math.max(1,Math.abs(R),Math.abs(it))&&Math.abs(F-Ye)<=Ze*Math.max(1,Math.abs(F),Math.abs(Ye))&&Math.abs(V-Lt)<=Ze*Math.max(1,Math.abs(V),Math.abs(Lt))&&Math.abs(z-Dt)<=Ze*Math.max(1,Math.abs(z),Math.abs(Dt))&&Math.abs(W-ft)<=Ze*Math.max(1,Math.abs(W),Math.abs(ft))}function Rhe(e){const t=Ms(),i=e[0],r=e[1],s=e[2],l=e[4],y=e[5],d=e[6],v=e[8],_=e[9],M=e[10];return Math.abs(1-(i*i+l*l+v*v))<=t&&Math.abs(1-(r*r+y*y+_*_))<=t&&Math.abs(1-(s*s+d*d+M*M))<=t}const Fhe=EL,Lhe=AL;Object.freeze(Object.defineProperty({__proto__:null,copy:Qce,set:eh,identity:X2,transpose:gu,invert:ehe,adjoint:the,determinant:ihe,multiply:EL,translate:rhe,scale:nhe,rotate:she,rotateX:ohe,rotateY:ahe,rotateZ:lhe,fromTranslation:IL,fromScaling:uhe,fromRotation:TL,fromXRotation:che,fromYRotation:hhe,fromZRotation:phe,fromRotationTranslation:CL,fromQuat2:dhe,getTranslation:yhe,getScaling:ghe,getRotation:mhe,fromRotationTranslationScale:vhe,fromRotationTranslationScaleOrigin:bhe,fromQuat:whe,frustum:_he,perspective:xhe,perspectiveFromFieldOfView:She,ortho:Mhe,lookAt:$he,targetTo:Ehe,str:Ihe,frob:The,add:Che,subtract:AL,multiplyScalar:Ahe,multiplyScalarAndAdd:Phe,exactEquals:Ohe,equals:khe,isOrthoNormal:Rhe,mul:Fhe,sub:Lhe},Symbol.toStringTag,{value:"Module"}));let lM,ve=null;function PL(){return!!ve}function Nhe(){return!!Me("esri-wasm")}function OL(){return lM||(lM=import("./pe-wasm.031781a0.js").then(e=>e.p).then(({default:e})=>e({locateFile:t=>mi(`esri/geometry/support/${t}`)})).then(e=>{RL(e)}),lM)}var uM,er,cM;(function(e){function t(l,y,d){ve.ensureCache.prepare();const v=Zp(d),_=d===v,M=ve.ensureFloat64(v),T=ve._pe_geog_to_proj(ve.getPointer(l),y,M);return T&&th(d,y,M,_),T}function i(l,y,d,v){switch(v){case er.PE_TRANSFORM_P_TO_G:return r(l,y,d);case er.PE_TRANSFORM_G_TO_P:return t(l,y,d)}return 0}function r(l,y,d){return s(l,y,d,0)}function s(l,y,d,v){ve.ensureCache.prepare();const _=Zp(d),M=d===_,T=ve.ensureFloat64(_),A=ve._pe_proj_to_geog_center(ve.getPointer(l),y,T,v);return A&&th(d,y,T,M),A}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(uM||(uM={})),function(e){function t(){e.PE_BUFFER_MAX=ve.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=ve.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=ve.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=ve.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=ve.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=ve.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=ve.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=ve.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=ve.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=ve.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=ve.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=ve.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=ve.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=ve.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=ve.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=ve.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=ve.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=ve.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=ve.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=ve.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=ve.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=ve.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=ve.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=ve.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=ve.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=ve.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=ve.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=ve.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=ve.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=ve.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(er||(er={})),function(e){const t={},i={},r=R=>{if(R){const F=R.getType();switch(F){case er.PE_TYPE_GEOGCS:R=ve.castObject(R,ve.PeGeogcs);break;case er.PE_TYPE_PROJCS:R=ve.castObject(R,ve.PeProjcs);break;case er.PE_TYPE_GEOGTRAN:R=ve.castObject(R,ve.PeGeogtran);break;default:F&er.PE_TYPE_UNIT&&(R=ve.castObject(R,ve.PeUnit))}}return R};function s(){ve.PeFactory.prototype.initialize(null)}function l(R){return y(er.PE_TYPE_COORDSYS,R)}function y(R,F){let V=null,z=t[R];if(z||(z={},t[R]=z),z.hasOwnProperty(String(F)))V=z[F];else{const W=ve.PeFactory.prototype.factoryByType(R,F);ve.compare(W,ve.NULL)||(V=W,z[F]=V)}return V=r(V),V}function d(R,F){let V=null,z=i[R];if(z||(z={},i[R]=z),z.hasOwnProperty(F))V=z[F];else{const W=ve.PeFactory.prototype.fromString(R,F);ve.compare(W,ve.NULL)||(V=W,z[F]=V)}return V=r(V),V}function v(R){return y(er.PE_TYPE_GEOGCS,R)}function _(R){return y(er.PE_TYPE_GEOGTRAN,R)}function M(R){return ve.PeFactory.prototype.getCode(R)}function T(R){return y(er.PE_TYPE_PROJCS,R)}function A(R){return y(er.PE_TYPE_UNIT,R)}e.initialize=s,e.coordsys=l,e.factoryByType=y,e.fromString=d,e.geogcs=v,e.geogtran=_,e.getCode=M,e.projcs=T,e.unit=A}(cM||(cM={}));let kL=null;var Q2,hM,pM,dM,e3,fM,t3,i3,yM;function RL(e){function t(l,y,d){l[y]=d(l[y])}ve=e,er.init(),Q2.init(),e3.init(),t3.init(),i3.init(),kL=class extends ve.PeGCSExtent{destroy(){ve.destroy(this)}};const i=[ve.PeDatum,ve.PeGeogcs,ve.PeGeogtran,ve.PeObject,ve.PeParameter,ve.PePrimem,ve.PeProjcs,ve.PeSpheroid,ve.PeUnit];for(const l of i)t(l.prototype,"getName",y=>function(){return y.call(this,new Array(er.PE_NAME_MAX))});for(const l of[ve.PeGeogtran,ve.PeProjcs])t(l.prototype,"getParameters",y=>function(){const d=new Array(er.PE_PARM_MAX);let v=y.call(this);for(let _=0;_<d.length;_++){const M=ve.getValue(v,"*");d[_]=M?ve.wrapPointer(M,ve.PeParameter):null,v+=Int32Array.BYTES_PER_ELEMENT}return d});t(ve.PeHorizon.prototype,"getCoord",l=>function(){const y=this.getSize();if(!y)return null;const d=[];return th(d,y,l.call(this)),d}),t(ve.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const y=ve._pe_getPeGTlistExtendedGTsSize();return function(){let d=null;const v=l.call(this);if(!ve.compare(v,ve.NULL)){d=[v];const _=this.getSteps();if(_>1){const M=ve.getPointer(v);for(let T=1;T<_;T++)d.push(ve.wrapPointer(M+y*T,ve.PeGTlistExtendedGTs))}}return d}});const r=ve._pe_getPeHorizonSize(),s=l=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(l))return y.get(l);let d=null;const v=l.call(this);if(!ve.compare(v,ve.NULL)){d=[v];const _=v.getNump();if(_>1){const M=ve.getPointer(v);for(let T=1;T<_;T++)d.push(ve.wrapPointer(M+r*T,ve.PeHorizon))}}return y.set(l,d),d};t(ve.PeProjcs.prototype,"horizonGcsGenerate",s),t(ve.PeProjcs.prototype,"horizonPcsGenerate",s),ve.PeObject.prototype.toString=function(l=er.PE_STR_OPTS_NONE){ve.ensureCache.prepare();const y=ve.getPointer(this),d=ve.ensureInt8(new Array(er.PE_BUFFER_MAX));return ve.UTF8ToString(ve._pe_object_to_string_ext(y,l,d))}}function mu(e){if(!e)return;const t=ve.getClass(e);if(!t)return;const i=ve.getCache(t);if(!i)return;const r=ve.getPointer(e);r&&delete i[r]}function r3(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(ve.ensureInt8(r));return i}function Zp(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function th(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=ve.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let l=0;l<t;l++)s&&(e[l]=new Array(2)),e[l][0]=ve.getValue(i,"double"),e[l][1]=ve.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=ve.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=ve._pe_getPeGTlistExtendedEntrySize()}function r(s,l,y,d,v,_){let M=null;const T=new ve.PeInteger(_);try{const A=ve.PeGTlistExtended.prototype.getGTlist(s,l,y,d,v,T);if((_=T.val)&&(M=[A],_>1)){const R=ve.getPointer(A);for(let F=1;F<_;F++)M.push(ve.wrapPointer(R+t*F,ve.PeGTlistExtendedEntry))}}finally{ve.destroy(T)}return M}e.init=i,e.getGTlist=r})(Q2||(Q2={})),function(e){function t(i){if(i&&i.length){for(const r of i)mu(r),r.getEntries().forEach(s=>{mu(s);const l=s.getGeogtran();mu(l),l.getParameters().forEach(mu),[l.getGeogcs1(),l.getGeogcs2()].forEach(y=>{mu(y);const d=y.getDatum();mu(d),mu(d.getSpheroid()),mu(y.getPrimem()),mu(y.getUnit())})});ve.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(hM||(hM={})),function(e){function t(i,r,s,l,y){ve.ensureCache.prepare();const d=Zp(s),v=s===d,_=ve.ensureFloat64(d);let M=0;l&&(M=ve.ensureFloat64(l));const T=ve._pe_geog_to_geog(ve.getPointer(i),r,_,M,y);return T&&th(s,r,_,v),T}e.geogToGeog=t}(pM||(pM={})),function(e){const t=(_,M,T,A,R,F)=>{let V,z;switch(ve.ensureCache.prepare(),_){case"dd":V=ve._pe_geog_to_dd,z=er.PE_DD_MAX;break;case"ddm":V=ve._pe_geog_to_ddm,z=er.PE_DDM_MAX;break;case"dms":V=ve._pe_geog_to_dms,z=er.PE_DMS_MAX}let W=0;M&&(W=ve.getPointer(M));const Z=Zp(A),Q=ve.ensureFloat64(Z),ee=r3(T,z),re=V(W,T,Q,R,ve.ensureInt32(ee));if(re)for(let ie=0;ie<T;ie++)F[ie]=ve.UTF8ToString(ee[ie]);return re},i=(_,M,T,A,R)=>{let F;switch(ve.ensureCache.prepare(),_){case"dd":F=ve._pe_dd_to_geog;break;case"ddm":F=ve._pe_ddm_to_geog;break;case"dms":F=ve._pe_dms_to_geog}let V=0;M&&(V=ve.getPointer(M));const z=A.map(ee=>ve.ensureString(ee)),W=ve.ensureInt32(z),Z=ve.ensureFloat64(new Array(2*T)),Q=F(V,T,W,Z);return Q&&th(R,T,Z),Q};function r(_,M,T,A,R){return t("dms",_,M,T,A,R)}function s(_,M,T,A){return i("dms",_,M,T,A)}function l(_,M,T,A,R){return t("ddm",_,M,T,A,R)}function y(_,M,T,A){return i("ddm",_,M,T,A)}function d(_,M,T,A,R){return t("dd",_,M,T,A,R)}function v(_,M,T,A){return i("dd",_,M,T,A)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=l,e.ddmToGeog=y,e.geogToDd=d,e.ddToGeog=v}(dM||(dM={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=ve.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=ve.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=ve.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=ve.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=ve.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,l,y,d,v,_,M){ve.ensureCache.prepare();let T=0;s&&(T=ve.getPointer(s));const A=Zp(y),R=ve.ensureFloat64(A),F=r3(l,er.PE_MGRS_MAX),V=ve.ensureInt32(F),z=ve._pe_geog_to_mgrs_extended(T,l,R,d,v,_,V);if(z)for(let W=0;W<l;W++)M[W]=ve.UTF8ToString(F[W]);return z}function r(s,l,y,d,v){ve.ensureCache.prepare();let _=0;s&&(_=ve.getPointer(s));const M=y.map(F=>ve.ensureString(F)),T=ve.ensureInt32(M),A=ve.ensureFloat64(new Array(2*l)),R=ve._pe_mgrs_to_geog_extended(_,l,T,d,A);return R&&th(v,l,A),R}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(e3||(e3={})),function(e){function t(r,s,l,y,d,v,_){ve.ensureCache.prepare();let M=0;r&&(M=ve.getPointer(r));const T=Zp(l),A=ve.ensureFloat64(T),R=r3(s,er.PE_MGRS_MAX),F=ve.ensureInt32(R),V=ve._pe_geog_to_usng(M,s,A,y,d,v,F);if(V)for(let z=0;z<s;z++)_[z]=ve.UTF8ToString(R[z]);return V}function i(r,s,l,y){ve.ensureCache.prepare();let d=0;r&&(d=ve.getPointer(r));const v=l.map(A=>ve.ensureString(A)),_=ve.ensureInt32(v),M=ve.ensureFloat64(new Array(2*s)),T=ve._pe_usng_to_geog(d,s,_,M);return T&&th(y,s,M),T}e.geogToUsng=t,e.usngToGeog=i}(fM||(fM={})),function(e){function t(){e.PE_UTM_OPTS_NONE=ve.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=ve.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=ve.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,l,y,d,v){ve.ensureCache.prepare();let _=0;s&&(_=ve.getPointer(s));const M=Zp(y),T=ve.ensureFloat64(M),A=r3(l,er.PE_UTM_MAX),R=ve.ensureInt32(A),F=ve._pe_geog_to_utm(_,l,T,d,R);if(F)for(let V=0;V<l;V++)v[V]=ve.UTF8ToString(A[V]);return F}function r(s,l,y,d,v){ve.ensureCache.prepare();let _=0;s&&(_=ve.getPointer(s));const M=y.map(F=>ve.ensureString(F)),T=ve.ensureInt32(M),A=ve.ensureFloat64(new Array(2*l)),R=ve._pe_utm_to_geog(_,l,T,d,A);return R&&th(v,l,A),R}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(t3||(t3={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=ve.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=ve.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=ve.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=ve.PePCSInfo.prototype.PE_POLE_POINT}function r(s,l=e.PE_PCSINFO_OPTION_DOMAIN){let y=null,d=null;return t.has(s)&&(d=t.get(s),d[l]&&(y=d[l])),y||(y=ve.PePCSInfo.prototype.generate(s,l),d||(d=[],t.set(s,d)),d[l]=y),y}e.init=i,e.generate=r}(i3||(i3={})),function(e){function t(){return ve.PeVersion.prototype.version_string()}e.versionString=t}(yM||(yM={}));const jhe=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return ve},isLoaded:PL,isSupported:Nhe,load:OL,get PeCSTransformations(){return uM},get PeDefs(){return er},get PeFactory(){return cM},get PeGCSExtent(){return kL},get PeGTlistExtended(){return Q2},get PeGTlistExtendedEntry(){return hM},get PeGTTransformations(){return pM},get PeNotationDms(){return dM},get PeNotationMgrs(){return e3},get PeNotationUsng(){return fM},get PeNotationUtm(){return t3},get PePCSInfo(){return i3},get PeVersion(){return yM},_init:RL},Symbol.toStringTag,{value:"Module"})),Os=Math.PI/180,Dhe=/SPHEROID\[([^\]]+)]/i,ih=Bi.radius,ya=Bi.eccentricitySquared,Vhe={a1:ih*ya,a2:ih*ya*ih*ya,a3:ih*ya*ya/2,a4:ih*ya*ih*ya*2.5,a5:ih*ya+ih*ya*ya/2,a6:1-ya},zhe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Bi.radius,f:Bi.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Ic.radius,f:Ic.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:iu.radius,f:iu.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:iu.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let n3=0;class S0{constructor(t){this.uid=n3++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new S0;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=n3++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=n3++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=n3++}getInverse(){const t=new S0;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class rh{constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof S0?this.steps.push(i):this.steps.push(new S0({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new rh;let r="";for(const s of t.steps){const l=S0.fromGE(s);i.steps.push(l),r+=l.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new rh;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[rh.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const l of this.steps)r+=l.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[rh.cacheKey(t,i)];return s===void 0?null:s}}function gM(e,t,i){if(ae(t)||ae(i)||i.vcsWkid||Xi(t,i))return null;const r=x0(t)/x0(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>Ghe(s,r);case"polyline":case"esriGeometryPolyline":return s=>Uhe(s,r);case"polygon":case"esriGeometryPolygon":return s=>qhe(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>Bhe(s,r);case"extent":case"esriGeometryExtent":return s=>Hhe(s,r);default:return null}}function Ghe(e,t){e&&e.z!=null&&(e.z*=t)}function qhe(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function Uhe(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function Bhe(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function Hhe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let nh=null,am=null,mM=null,vM={};const FL=new w4;function sh(){return!!nh&&PL()}function oh(e){return ae(mM)&&(mM=Promise.all([OL(),Promise.resolve().then(function(){return r6e}).then(t=>t.g),Promise.resolve().then(function(){return c6e})])),mM.then(([,t,{hydratedAdapter:i}])=>{fr(e),am=i,nh=t.default,nh._enableProjection(jhe),FL.notify()})}function Do(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:s3(am,e,e[0].spatialReference,t,i,r):s3(am,[e],e.spatialReference,t,i,r)[0]}function s3(e,t,i,r,s=null,l=null){if(ae(i)||ae(r))return t;if(wl(i,r,s))return t.map(y=>Wt(Khe(y,i,r)));if(ae(s)){const y=rh.cacheKey(i,r);vM[y]!==void 0?s=vM[y]:(s=Jhe(i,r,void 0),ae(s)&&(s=new rh),vM[y]=s)}if(ae(nh)||ae(e))throw new bM;return q(l)?nh._project(e,t,i,r,s,l):nh._project(e,t,i,r,s)}function jEe(e,t){const i=Whe([e],t);return q(i.pending)?{pending:i.pending,geometry:null}:q(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Whe(e,t){if(!sh()){for(const i of e)if(q(i)&&!Xi(i.spatialReference,t)&&Cr(i.spatialReference)&&Cr(t)&&!wl(i.spatialReference,t))return Vt(FL),{pending:oh(),geometries:null}}return{pending:null,geometries:e.map(i=>ae(i)?null:Xi(i.spatialReference,t)?i:Cr(i.spatialReference)&&Cr(t)?Zhe(i,t):null)}}function Jhe(e,t,i=null){if(ae(e)||ae(t))return null;if(ae(nh)||ae(am))throw new bM;const r=nh._getTransformation(am,e,t,i,i==null?void 0:i.spatialReference);return r!==null?rh.fromGE(r):null}class bM extends fe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var de;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(de||(de={}));function Zhe(e,t){try{const i=Do(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=gM(i.type,e.spatialReference,t);return q(r)&&r(i),i}catch(i){if(!(i instanceof bM))throw i;return null}}function wl(e,t,i){return!i&&(!!Xi(e,t)||Cr(e)&&Cr(t)&&!!ZL(e,t,KL))}async function LL(e,t,i,r){if(sh())return pO(r);if(Array.isArray(e)){for(const{source:s,dest:l,geographicTransformation:y}of e)if(!wl(s,l,y))return oh(r)}else if(!wl(e,t,i))return oh(r);return pO(r)}function Khe(e,t,i){return e?"x"in e?NL(e,t,new dt,i,0):"xmin"in e?Qhe(e,t,new ai,i,0):"rings"in e?jL(e,t,new jn,i,0):"paths"in e?Xhe(e,t,new Kr,i,0):"points"in e?Yhe(e,t,new Xy,i,0):null:null}function DEe(e,t,i=t.spatialReference,r=0){return q(i)&&q(e.spatialReference)&&q(NL(e,e.spatialReference,t,i,r))}function NL(e,t,i,r,s){Ji[0]=e.x,Ji[1]=e.y;const l=e.z;return Ji[2]=l!==void 0?l:s,vu(Ji,t,0,Ji,r,0,1)?(i.x=Ji[0],i.y=Ji[1],i.spatialReference=r,l===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Ji[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function Yhe(e,t,i,r,s){const{points:l,hasZ:y,hasM:d}=e,v=[],_=l.length,M=[];for(const T of l)M.push(T[0],T[1],y?T[2]:s);if(!vu(M,t,0,M,r,0,_))return null;for(let T=0;T<_;++T){const A=3*T,R=M[A],F=M[A+1];y&&d?v.push([R,F,M[A+2],l[T][3]]):y?v.push([R,F,M[A+2]]):d?v.push([R,F,l[T][2]]):v.push([R,F])}return i.points=v,i.spatialReference=r,i.hasZ=y,i.hasM=d,i}function Xhe(e,t,i,r,s){const{paths:l,hasZ:y,hasM:d}=e,v=[];return VL(l,y!=null?y:!1,d!=null?d:!1,t,v,r,s)?(i.paths=v,i.spatialReference=r,i.hasZ=y,i.hasM=d,i):null}function VEe({hasZ:e,spatialReference:t,paths:i},r,s=0){const l=Kp(t,o3),y=ah[l][de.WGS84_COMPARABLE_LON_LAT];if(ae(y))return!1;const d=e?v=>v:v=>Nr(Ji,v[0],v[1],s);for(const v of i){const _=[];for(const M of v){const T=[0,0,s];y(d(M),0,T,0),_.push(T)}r.push(_)}return!0}function zEe({hasZ:e,spatialReference:t,rings:i},r,s=0){const l=Kp(t,o3),y=ah[l][de.WGS84_COMPARABLE_LON_LAT];if(ae(y))return!1;const d=e?v=>v:v=>Nr(Ji,v[0],v[1],s);for(const v of i){const _=[];for(const M of v){const T=[0,0,s];y(d(M),0,T,0),_.push(T)}r.push(_)}return!0}function GEe(e,t,i=t.spatialReference,r=0){return q(e.spatialReference)&&q(i)&&q(jL(e,e.spatialReference,t,i,r))}function jL(e,t,i,r,s){const{rings:l,hasZ:y,hasM:d}=e,v=[];return VL(l,y!=null?y:!1,d!=null?d:!1,t,v,r,s)?(i.rings=v,i.spatialReference=r,i.hasZ=y,i.hasM=d,i):null}function Qhe(e,t,i,r,s){const{xmin:l,ymin:y,xmax:d,ymax:v,hasZ:_,hasM:M}=e;return DL(l,y,_?e.zmin:s,t,Ji,r)?(i.xmin=Ji[0],i.ymin=Ji[1],_&&(i.zmin=Ji[2]),DL(d,v,_?e.zmax:s,t,Ji,r)?(i.xmax=Ji[0],i.ymax=Ji[1],_&&(i.zmax=Ji[2]),M&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function qEe(e,t,i){return vu(e,t,0,Ji,i.spatialReference,0,1)?(i.x=Ji[0],i.y=Ji[1],i.z=Ji[2],i):null}function UEe(e,t,i,r=0){Ji[0]=e.x,Ji[1]=e.y;const s=e.z;return Ji[2]=s!==void 0?s:r,vu(Ji,e.spatialReference,0,t,i,0,1)}function DL(e,t,i,r,s,l){return Gi[0]=e,Gi[1]=t,Gi[2]=i,vu(Gi,r,0,s,l,0,1)}function BEe(e,t,i,r){return!(ae(t)||ae(r)||e.length<2)&&(e.length===2&&(Gi[0]=e[0],Gi[1]=e[1],Gi[2]=0,e=Gi),vu(e,t,0,i,r,0,1))}function HEe(e,t,i){return epe(e,t,i)}function epe(e,t,i){if(ae(t))return!1;const r=Kp(t,o3),s=ah[r][de.WGS84_COMPARABLE_LON_LAT];return!ae(s)&&(s(e,0,Gi,0),i!==Gi&&(i[0]=Gi[0],i[1]=Gi[1],i.length>2&&(i[2]=Gi[2])),!0)}function vu(e,t,i,r,s,l,y=1){const d=ZL(t,s,KL);if(ae(d))return!1;if(d===Ri){if(e===r&&i===l)return!0;const _=i+3*y;for(let M=i,T=l;M<_;M++,T++)r[T]=e[M];return!0}const v=i+3*y;for(let _=i,M=l;_<v;_+=3,M+=3)d(e,_,r,M);return!0}function VL(e,t,i,r,s,l,y=0){const d=new Array;for(const _ of e)for(const M of _)d.push(M[0],M[1],t?M[2]:y);if(!vu(d,r,0,d,l,0,d.length/3))return!1;let v=0;s.length=0;for(const _ of e){const M=new Array;for(const T of _)t&&i?M.push([d[v++],d[v++],d[v++],T[3]]):t?M.push([d[v++],d[v++],d[v++]]):i?(M.push([d[v++],d[v++],T[2]]),v++):(M.push([d[v++],d[v++]]),v++);s.push(M)}return!0}function WEe(e,t,i,r){return e!=null&&(Xi(t,r)?(LS(i,e),!0):(Gi[0]=e[0],Gi[1]=e[1],Gi[2]=0,!!vu(Gi,t,0,Gi,r,0,1)&&(i[0]=Gi[0],i[1]=Gi[1],Gi[0]=e[2],Gi[1]=e[3],Gi[2]=0,!!vu(Gi,t,0,Gi,r,0,1)&&(i[2]=Gi[0],i[3]=Gi[1],!0))))}function JEe(e,t,i,r){if(ae(e)||ae(r))return!1;const s=Kp(e,o3),l=Kp(r,mpe);if(s===l&&!zL(l)&&(s!==de.UNKNOWN||Xi(e,r)))return IL(i,t),!0;if(zL(l)){const y=ah[s][de.LON_LAT],d=ah[de.LON_LAT][l];return!ae(y)&&!ae(d)&&(y(t,0,lh,0),d(lh,0,uh,0),GL(_l*lh[0],_l*lh[1],i),i[12]=uh[0],i[13]=uh[1],i[14]=uh[2],!0)}if((l===de.WEB_MERCATOR||l===de.PLATE_CARREE)&&(s===de.WGS84||s===de.CGCS2000&&l===de.PLATE_CARREE||s===de.SPHERICAL_ECEF||s===de.WEB_MERCATOR)){const y=ah[s][de.LON_LAT],d=ah[de.LON_LAT][l];return!ae(y)&&!ae(d)&&(y(t,0,lh,0),d(lh,0,uh,0),s===de.SPHERICAL_ECEF?tpe(_l*lh[0],_l*lh[1],i):X2(i),i[12]=uh[0],i[13]=uh[1],i[14]=uh[2],!0)}return!1}function zL(e){return e===de.SPHERICAL_ECEF||e===de.SPHERICAL_MARS_PCPF||e===de.SPHERICAL_MOON_PCPF}function GL(e,t,i){const r=Math.sin(e),s=Math.cos(e),l=Math.sin(t),y=Math.cos(t),d=i;return d[0]=-r,d[4]=-l*s,d[8]=y*s,d[12]=0,d[1]=s,d[5]=-l*r,d[9]=y*r,d[13]=0,d[2]=0,d[6]=y,d[10]=l,d[14]=0,d[3]=0,d[7]=0,d[11]=0,d[15]=1,d}function tpe(e,t,i){return GL(e,t,i),gu(i,i),i}function Kp(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Jp(e,1)),e.wkt===aL.wkt?t.spatialReferenceId=de.SPHERICAL_ECEF:Ky(e)?t.spatialReferenceId=de.WGS84:Ka(e)?t.spatialReferenceId=de.WEB_MERCATOR:Sne(e)?t.spatialReferenceId=de.PLATE_CARREE:e.wkt===Nce.wkt?t.spatialReferenceId=de.WGS84_ECEF:e.wkid===yp.CGCS2000?t.spatialReferenceId=de.CGCS2000:e.wkt===K2.wkt?t.spatialReferenceId=de.SPHERICAL_MARS_PCPF:e.wkt===Y2.wkt?t.spatialReferenceId=de.SPHERICAL_MOON_PCPF:Iw(e)?t.spatialReferenceId=de.GCSMARS2000:Tw(e)?t.spatialReferenceId=de.GCSMOON2000:t.spatialReferenceId=de.UNKNOWN):de.UNKNOWN}function Ri(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function M0(e,t,i,r){i[r++]=$0*(e[t++]/Bi.radius),i[r++]=$0*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Bi.radius))),i[r]=e[t]}function ipe(e,t,i,r){M0(e,t,i,r),Qp(i,r,i,r)}function rpe(e,t,i,r){M0(e,t,i,r),td(i,r,i,r)}function npe(e,t,i,r,s){const l=.4999999*Math.PI,y=Tn(_l*e[t+1],-l,l),d=Math.sin(y);i[r++]=_l*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+d)/(1-d)),i[r]=e[t+2]}function lm(e,t,i,r){npe(e,t,i,r,Bi)}const qL=Bi.radius*Math.PI/180,UL=180/(Bi.radius*Math.PI);function Yp(e,t,i,r){i[r]=e[t]*qL,i[r+1]=e[t+1]*qL,i[r+2]=e[t+2]}function Xp(e,t,i,r){i[r]=e[t]*UL,i[r+1]=e[t+1]*UL,i[r+2]=e[t+2]}function spe(e,t,i,r){M0(e,t,i,r),Yp(i,r,i,r)}function ope(e,t,i,r){id(e,t,i,r),Yp(i,r,i,r)}function ape(e,t,i,r){ed(e,t,i,r),Yp(i,r,i,r)}function lpe(e,t,i,r){Xp(e,t,i,r),Qp(i,r,i,r)}function upe(e,t,i,r){Xp(e,t,i,r),lm(i,r,i,r)}function cpe(e,t,i,r){Xp(e,t,i,r),td(i,r,i,r)}function wM(e,t,i,r,s){const l=s+e[t+2],y=_l*e[t+1],d=_l*e[t],v=Math.cos(y);i[r++]=Math.cos(d)*v*l,i[r++]=Math.sin(d)*v*l,i[r]=Math.sin(y)*l}function BL(e,t,i,r){wM(e,t,i,r,Ic.radius)}function HL(e,t,i,r){wM(e,t,i,r,iu.radius)}function Qp(e,t,i,r){wM(e,t,i,r,Bi.radius)}function _M(e,t,i,r,s){const l=e[t],y=e[t+1],d=e[t+2],v=Math.sqrt(l*l+y*y+d*d),_=aR(d/(v===0?1:v)),M=Math.atan2(y,l);i[r++]=$0*M,i[r++]=$0*_,i[r]=v-s}function WL(e,t,i,r){_M(e,t,i,r,Ic.radius)}function JL(e,t,i,r){_M(e,t,i,r,iu.radius)}function ed(e,t,i,r){_M(e,t,i,r,Bi.radius)}function hpe(e,t,i,r){ed(e,t,i,r),lm(i,r,i,r)}function ppe(e,t,i,r){ed(e,t,i,r),td(i,r,i,r)}function dpe(e,t,i,r,s){const l=_l*e[t],y=_l*e[t+1],d=e[t+2],v=Math.sin(y),_=Math.cos(y),M=s.radius/Math.sqrt(1-s.eccentricitySquared*v*v);i[r++]=(M+d)*_*Math.cos(l),i[r++]=(M+d)*_*Math.sin(l),i[r++]=(M*(1-s.eccentricitySquared)+d)*v}function td(e,t,i,r){dpe(e,t,i,r,Bi)}function id(e,t,i,r){const s=Vhe,l=e[t],y=e[t+1],d=e[t+2];let v,_,M,T,A,R,F,V,z,W,Z,Q,ee,re,ie,he,be,we,xe,$e,je;v=Math.abs(d),_=l*l+y*y,M=Math.sqrt(_),T=_+d*d,A=Math.sqrt(T),$e=Math.atan2(y,l),R=d*d/T,F=_/T,re=s.a2/A,ie=s.a3-s.a4/A,F>.3?(V=v/A*(1+F*(s.a1+re+R*ie)/A),xe=Math.asin(V),W=V*V,z=Math.sqrt(1-W)):(z=M/A*(1-R*(s.a5-re-F*ie)/A),xe=Math.acos(z),W=1-z*z,V=Math.sqrt(W)),Z=1-Bi.eccentricitySquared*W,Q=Bi.radius/Math.sqrt(Z),ee=s.a6*Q,re=M-Q*z,ie=v-ee*V,be=z*re+V*ie,he=z*ie-V*re,we=he/(ee/Z+be),xe+=we,je=be+he*we/2,d<0&&(xe=-xe),i[r++]=$0*$e,i[r++]=$0*xe,i[r]=je}function fpe(e,t,i,r){id(e,t,i,r),Qp(i,r,i,r)}function ype(e,t,i,r){id(e,t,i,r),lm(i,r,i,r)}const ah={[de.WGS84]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:Qp,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:lm,[de.PLATE_CARREE]:Yp,[de.WGS84]:Ri,[de.WGS84_ECEF]:td},[de.CGCS2000]:{[de.CGCS2000]:Ri,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:Qp,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:Yp,[de.WGS84]:null,[de.WGS84_ECEF]:td},[de.GCSMARS2000]:{[de.CGCS2000]:null,[de.GCSMARS2000]:Ri,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:HL,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.GCSMOON2000]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:Ri,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:BL,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.WEB_MERCATOR]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:M0,[de.WGS84_COMPARABLE_LON_LAT]:M0,[de.SPHERICAL_ECEF]:ipe,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:Ri,[de.PLATE_CARREE]:spe,[de.WGS84]:M0,[de.WGS84_ECEF]:rpe},[de.WGS84_ECEF]:{[de.CGCS2000]:id,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:id,[de.WGS84_COMPARABLE_LON_LAT]:id,[de.SPHERICAL_ECEF]:fpe,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:ype,[de.PLATE_CARREE]:ope,[de.WGS84]:id,[de.WGS84_ECEF]:Ri},[de.SPHERICAL_ECEF]:{[de.CGCS2000]:ed,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:ed,[de.WGS84_COMPARABLE_LON_LAT]:ed,[de.SPHERICAL_ECEF]:Ri,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:hpe,[de.PLATE_CARREE]:ape,[de.WGS84]:ed,[de.WGS84_ECEF]:ppe},[de.SPHERICAL_MARS_PCPF]:{[de.CGCS2000]:null,[de.GCSMARS2000]:JL,[de.GCSMOON2000]:null,[de.LON_LAT]:JL,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:Ri,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.SPHERICAL_MOON_PCPF]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:WL,[de.LON_LAT]:WL,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:Ri,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.UNKNOWN]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:null,[de.WGS84_COMPARABLE_LON_LAT]:null,[de.SPHERICAL_ECEF]:null,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:Ri,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:null,[de.WGS84]:null,[de.WGS84_ECEF]:null},[de.LON_LAT]:{[de.CGCS2000]:Ri,[de.GCSMARS2000]:Ri,[de.GCSMOON2000]:Ri,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:Qp,[de.SPHERICAL_MARS_PCPF]:HL,[de.SPHERICAL_MOON_PCPF]:BL,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:lm,[de.PLATE_CARREE]:Yp,[de.WGS84]:Ri,[de.WGS84_ECEF]:td},[de.WGS84_COMPARABLE_LON_LAT]:{[de.CGCS2000]:null,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Ri,[de.WGS84_COMPARABLE_LON_LAT]:Ri,[de.SPHERICAL_ECEF]:Qp,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:null,[de.PLATE_CARREE]:Yp,[de.WGS84]:Ri,[de.WGS84_ECEF]:td},[de.PLATE_CARREE]:{[de.CGCS2000]:Xp,[de.GCSMARS2000]:null,[de.GCSMOON2000]:null,[de.LON_LAT]:Xp,[de.WGS84_COMPARABLE_LON_LAT]:Xp,[de.SPHERICAL_ECEF]:lpe,[de.SPHERICAL_MARS_PCPF]:null,[de.SPHERICAL_MOON_PCPF]:null,[de.UNKNOWN]:null,[de.WEB_MERCATOR]:upe,[de.PLATE_CARREE]:Ri,[de.WGS84]:Xp,[de.WGS84_ECEF]:cpe}};function ZL(e,t,i=xM()){return ae(e)||ae(t)?null:gpe(e,t,i).projector}function gpe(e,t,i){if(ae(e)||ae(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=Kp(e,i.source),s=Kp(t,i.dest);return r===de.UNKNOWN&&s===de.UNKNOWN?Xi(e,t)?i.projector=Ri:i.projector=null:i.projector=ah[r][s],i}function xM(){return{source:{spatialReference:null,spatialReferenceId:de.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:de.UNKNOWN,metersPerUnit:1},projector:Ri}}const o3={spatialReference:null,spatialReferenceId:de.UNKNOWN},mpe={spatialReference:null,spatialReferenceId:de.UNKNOWN},KL=xM();xM();const _l=oR(1),$0=wS(1),Gi=Qe(),lh=Qe(),uh=Qe(),Ji=Qe();var SM;let xl=SM=class extends Ie{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new SM({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};m([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],xl.prototype,"cols",void 0),m([x({type:hi,json:{write:!0}})],xl.prototype,"level",void 0),m([x({type:String,json:{write:!0}})],xl.prototype,"levelValue",void 0),m([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],xl.prototype,"origin",void 0),m([x({type:Number,json:{write:!0}})],xl.prototype,"resolution",void 0),m([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],xl.prototype,"rows",void 0),m([x({type:Number,json:{write:!0}})],xl.prototype,"scale",void 0),xl=SM=m([Y("esri.layers.support.LOD")],xl);const MM=xl;class vpe{constructor(t,i,r,s,l){this.id=t,this.level=i,this.row=r,this.col=s,this.extent=l}}var ch;const YL=new bt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let rn=ch=class extends Ie{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=At.WebMercator,numLODs:l=24}=e;if(!Cr(s)){const T=[];if(i)for(let A=0;A<i.length;A++){const R=i[A];T.push({level:A,scale:R,resolution:R})}else{let A=5e-4;for(let R=l-1;R>=0;R--)T.unshift({level:R,scale:A,resolution:A}),A*=2}return new ch({dpi:96,lods:T,origin:new dt(0,0,s),size:[r,r],spatialReference:s})}const y=Ks(s),d=e.origin?new dt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new dt(y?{x:y.origin[0],y:y.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),v=96,_=1/(Jp(s)*39.37*v),M=[];if(i)for(let T=0;T<i.length;T++){const A=i[T],R=A*_;M.push({level:T,scale:A,resolution:R})}else{let T=Ew(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const A=Math.ceil(l/t);M.push({level:0,scale:T,resolution:T*_});for(let R=1;R<A;R++){const F=T/2**t,V=F*_;M.push({level:R,scale:F,resolution:V}),T=F}}return new ch({dpi:v,lods:M,origin:d,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Ks(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return dt.fromJSON(te({spatialReference:t.spatialReference},e))}set lods(e){let t=0,i=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(l=>{r.push(l.scale),t=l.scale>t?l.scale:t,i=l.scale<i?l.scale:i,s[l.level]=l})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],l=t[r+1];if(s<=e)return r;if(l===e)return r+1;if(s>e&&l<e)return r+Math.log(s/e)/Math.log(s/l)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let l,y;if(typeof t=="number")l=t,y=i;else if(Xi(t.spatialReference,this.spatialReference))l=t.x,y=t.y,r=i;else{const _=Aw(t,this.spatialReference);if(ae(_))return null;l=_.x,y=_.y,r=i}const d=s.resolution*this.size[0],v=s.resolution*this.size[1];return r||(r=new vpe(null,0,0,0,Ro())),r.level=e,r.row=Math.floor((this.origin.y-y)/v+.001),r.col=Math.floor((l-this.origin.x)/d+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=ch.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===ch.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,l=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Ro()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*l,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+l}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],l=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*l,e[2]=e[0]+s,e[3]=e[1]+l,e}lodAt(e){var t,i;return(i=(t=this._levelToLOD)==null?void 0:t[e])!=null?i:null}clone(){return ch.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const l=this.lods[s],y=l.resolution*t;i.push(new MM({level:l.level,scale:l.scale,resolution:y}))}return new ch({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};m([x({type:Number,json:{write:!0}})],rn.prototype,"compressionQuality",void 0),m([x({type:Number,json:{write:!0}})],rn.prototype,"dpi",void 0),m([x({type:String,json:{read:YL.read,write:YL.write,origins:{"web-scene":{read:!1,write:!1}}}})],rn.prototype,"format",void 0),m([x({readOnly:!0})],rn.prototype,"isWrappable",null),m([x({type:dt,json:{write:!0}})],rn.prototype,"origin",void 0),m([Be("origin")],rn.prototype,"readOrigin",null),m([x({type:[MM],value:null,json:{write:!0}})],rn.prototype,"lods",null),m([x({readOnly:!0})],rn.prototype,"minScale",void 0),m([x({readOnly:!0})],rn.prototype,"maxScale",void 0),m([x({readOnly:!0})],rn.prototype,"scales",void 0),m([x({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],rn.prototype,"size",void 0),m([Be("size",["rows","cols"])],rn.prototype,"readSize",null),m([Ke("size",{cols:{type:hi},rows:{type:hi}})],rn.prototype,"writeSize",null),m([x({type:At,json:{write:!0}})],rn.prototype,"spatialReference",void 0),rn=ch=m([Y("esri.layers.support.TileInfo")],rn),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(rn||(rn={}));const bpe=rn,a3={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},$M={xsmall:544,small:768,medium:992,large:1200};function wpe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function EM(e,t){return t?a3[e].valueToClassName[t].split(" "):[]}const _pe=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Jr,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=$M}initialize(){this._breakpointsHandles.add(Ve(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),fi))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=oi(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=wpe(i);if(!r){const s=JSON.stringify($M,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:$M,this._set("breakpoints",te({},i))}_updateClassNames(){if(!this.container)return;const i=ns.acquire(),r=ns.acquire();let s,l=!1;for(s in a3){const y=this[s],d=a3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==d&&(l=!0,this[s]=d,EM(s,y).forEach(v=>r.push(v)),EM(s,d).forEach(v=>i.push(v)))}l&&(this._applyClassNameChanges(i,r),ns.release(i),ns.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(l=>s.classList.remove(l)),i.forEach(l=>s.classList.add(l)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in a3)EM(r,this[r]).forEach(s=>i.classList.remove(s))}};return m([x()],t.prototype,"breakpoints",null),m([x()],t.prototype,"orientation",void 0),m([x()],t.prototype,"widthBreakpoint",void 0),m([x()],t.prototype,"heightBreakpoint",void 0),t=m([Y("esri.views.BreakpointsOwner")],t),t};function IM(e){return typeof e=="string"?document.getElementById(e):e!=null?e:null}function XL(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function QL(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function eN(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let E0=class extends ot{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Jr,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,Ve)}addWhen(e,t,i={}){return this._installWatch(e,t,i,no)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const s=++this._handleId;return this._handles.add([hs(e,"after-changes",this._createSyncUpdatingCallback(),ml),hs(e,"change",t,{onListenerAdd:i?l=>t({added:l.toArray(),removed:[]}):void 0,onListenerRemove:r?l=>t({added:[],removed:l.toArray()}):void 0})],s),{remove:()=>this._handles.remove(s)}}addPromise(e){if(ae(e))return e;const t=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(l3)||this._set("updating",!1))}},t),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this._handles.remove(t);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,s);const l=r(e,t,i);return this._handles.add(l,s),{remove:()=>this._handles.remove(s)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=Ve(e,i,{sync:!0,equals:()=>!1});return this._handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this._handles.remove(l3),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Nf(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(l3))}),l3)}}};m([x({readOnly:!0})],E0.prototype,"updating",void 0),E0=m([Y("esri.core.support.WatchUpdatingTracking")],E0);const l3=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var xpe=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},rd={exports:{}},mr={},um={exports:{}},nd={};function tN(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Spe(e,t,i){}function Mpe(e,t,i){}var $pe=/javascript\s*\:/img;function Epe(e,t){return $pe.test(t)?"":t}nd.whiteList=tN();nd.getDefaultWhiteList=tN;nd.onAttr=Spe;nd.onIgnoreAttr=Mpe;nd.safeAttrValue=Epe;var Ipe={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},cm=Ipe;function Tpe(e,t){e=cm.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,l=0,y="";function d(){if(!r){var M=cm.trim(e.slice(s,l)),T=M.indexOf(":");if(T!==-1){var A=cm.trim(M.slice(0,T)),R=cm.trim(M.slice(T+1));if(A){var F=t(s,y.length,A,R,M);F&&(y+=F+"; ")}}}s=l+1}for(;l<i;l++){var v=e[l];if(v==="/"&&e[l+1]==="*"){var _=e.indexOf("*/",l+2);if(_===-1)break;l=_+1,s=l+1,r=!1}else v==="("?r=!0:v===")"?r=!1:v===";"?r||d():v===`
`&&d()}return cm.trim(y)}var Cpe=Tpe,u3=nd,Ape=Cpe;function iN(e){return e==null}function Ppe(e){var t={};for(var i in e)t[i]=e[i];return t}function rN(e){e=Ppe(e||{}),e.whiteList=e.whiteList||u3.whiteList,e.onAttr=e.onAttr||u3.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||u3.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||u3.safeAttrValue,this.options=e}rN.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,l=i.onIgnoreAttr,y=i.safeAttrValue,d=Ape(e,function(v,_,M,T,A){var R=r[M],F=!1;if(R===!0?F=R:typeof R=="function"?F=R(T):R instanceof RegExp&&(F=R.test(T)),F!==!0&&(F=!1),T=y(M,T),!!T){var V={position:_,sourcePosition:v,source:A,isWhite:F};if(F){var z=s(M,T,V);return iN(z)?M+":"+T:z}else{var z=l(M,T,V);if(!iN(z))return z}}});return d};var Ope=rN;(function(e,t){var i=nd,r=Ope;function s(y,d){var v=new r(d);return v.process(y)}t=e.exports=s,t.FilterCSS=r;for(var l in i)t[l]=i[l]})(um,um.exports);var TM={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},kpe=um.exports.FilterCSS,Rpe=um.exports.getDefaultWhiteList,c3=TM;function nN(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var sN=new kpe;function Fpe(e,t,i){}function Lpe(e,t,i){}function Npe(e,t,i){}function jpe(e,t,i){}function oN(e){return e.replace(Vpe,"&lt;").replace(zpe,"&gt;")}function Dpe(e,t,i,r){if(i=fN(i),t==="href"||t==="src"){if(i=c3.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(h3.lastIndex=0,h3.test(i))return""}else if(t==="style"){if(aN.lastIndex=0,aN.test(i)||(lN.lastIndex=0,lN.test(i)&&(h3.lastIndex=0,h3.test(i))))return"";r!==!1&&(r=r||sN,i=r.process(i))}return i=yN(i),i}var Vpe=/</g,zpe=/>/g,Gpe=/"/g,qpe=/&quot;/g,Upe=/&#([a-zA-Z0-9]*);?/gim,Bpe=/&colon;?/gim,Hpe=/&newline;?/gim,h3=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,aN=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,lN=/u\s*r\s*l\s*\(.*/gi;function uN(e){return e.replace(Gpe,"&quot;")}function cN(e){return e.replace(qpe,'"')}function hN(e){return e.replace(Upe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function pN(e){return e.replace(Bpe,":").replace(Hpe," ")}function dN(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return c3.trim(t)}function fN(e){return e=cN(e),e=hN(e),e=pN(e),e=dN(e),e}function yN(e){return e=uN(e),e=oN(e),e}function Wpe(){return""}function Jpe(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(y){return i?!0:c3.indexOf(e,y)!==-1}var s=[],l=!1;return{onIgnoreTag:function(y,d,v){if(r(y))if(v.isClosing){var _="[/removed]",M=v.position+_.length;return s.push([l!==!1?l:v.position,M]),l=!1,_}else return l||(l=v.position),"[removed]";else return t(y,d,v)},remove:function(y){var d="",v=0;return c3.forEach(s,function(_){d+=y.slice(v,_[0]),v=_[1]}),d+=y.slice(v),d}}}function Zpe(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function Kpe(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}mr.whiteList=nN();mr.getDefaultWhiteList=nN;mr.onTag=Fpe;mr.onIgnoreTag=Lpe;mr.onTagAttr=Npe;mr.onIgnoreTagAttr=jpe;mr.safeAttrValue=Dpe;mr.escapeHtml=oN;mr.escapeQuote=uN;mr.unescapeQuote=cN;mr.escapeHtmlEntities=hN;mr.escapeDangerHtml5Entities=pN;mr.clearNonPrintableCharacter=dN;mr.friendlyAttrValue=fN;mr.escapeAttrValue=yN;mr.onIgnoreTagStripAll=Wpe;mr.StripTagBody=Jpe;mr.stripCommentTag=Zpe;mr.stripBlankChar=Kpe;mr.cssFilter=sN;mr.getDefaultCSSWhiteList=Rpe;var p3={},hh=TM;function Ype(e){var t=hh.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=hh.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Xpe(e){return e.slice(0,2)==="</"}function Qpe(e,t,i){var r="",s=0,l=!1,y=!1,d=0,v=e.length,_="",M="";e:for(d=0;d<v;d++){var T=e.charAt(d);if(l===!1){if(T==="<"){l=d;continue}}else if(y===!1){if(T==="<"){r+=i(e.slice(s,d)),l=d,s=d;continue}if(T===">"){r+=i(e.slice(s,l)),M=e.slice(l,d+1),_=Ype(M),r+=t(l,r.length,_,M,Xpe(M)),s=d+1,l=!1;continue}if(T==='"'||T==="'")for(var A=1,R=e.charAt(d-A);R.trim()===""||R==="=";){if(R==="="){y=T;continue e}R=e.charAt(d-++A)}}else if(T===y){y=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var ede=/[^a-zA-Z0-9\\_:.-]/gim;function tde(e,t){var i=0,r=0,s=[],l=!1,y=e.length;function d(A,R){if(A=hh.trim(A),A=A.replace(ede,"").toLowerCase(),!(A.length<1)){var F=t(A,R||"");F&&s.push(F)}}for(var v=0;v<y;v++){var _=e.charAt(v),M,T;if(l===!1&&_==="="){l=e.slice(i,v),i=v+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:rde(e,v+1);continue}if(l!==!1&&v===r){if(T=e.indexOf(_,v+1),T===-1)break;M=hh.trim(e.slice(r+1,T)),d(l,M),l=!1,v=T,i=v+1;continue}if(/\s|\n|\t/.test(_))if(e=e.replace(/\s|\n|\t/g," "),l===!1)if(T=ide(e,v),T===-1){M=hh.trim(e.slice(i,v)),d(M),l=!1,i=v+1;continue}else{v=T-1;continue}else if(T=nde(e,v-1),T===-1){M=hh.trim(e.slice(i,v)),M=gN(M),d(l,M),l=!1,i=v+1;continue}else continue}return i<e.length&&(l===!1?d(e.slice(i)):d(l,gN(hh.trim(e.slice(i))))),hh.trim(s.join(" "))}function ide(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function rde(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function nde(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function sde(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function gN(e){return sde(e)?e.substr(1,e.length-2):e}p3.parseTag=Qpe;p3.parseAttr=tde;var ode=um.exports.FilterCSS,ga=mr,mN=p3,ade=mN.parseTag,lde=mN.parseAttr,d3=TM;function f3(e){return e==null}function ude(e){var t=d3.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=d3.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=d3.trim(e.slice(0,-1))),{html:e,closing:i}}function cde(e){var t={};for(var i in e)t[i]=e[i];return t}function hde(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function vN(e){e=cde(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=ga.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=hde(e.whiteList||e.allowList):e.whiteList=ga.whiteList,e.onTag=e.onTag||ga.onTag,e.onTagAttr=e.onTagAttr||ga.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||ga.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||ga.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||ga.safeAttrValue,e.escapeHtml=e.escapeHtml||ga.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new ode(e.css))}vN.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,l=i.onIgnoreTag,y=i.onTagAttr,d=i.onIgnoreTagAttr,v=i.safeAttrValue,_=i.escapeHtml,M=t.cssFilter;i.stripBlankChar&&(e=ga.stripBlankChar(e)),i.allowCommentTag||(e=ga.stripCommentTag(e));var T=!1;i.stripIgnoreTagBody&&(T=ga.StripTagBody(i.stripIgnoreTagBody,l),l=T.onIgnoreTag);var A=ade(e,function(R,F,V,z,W){var Z={sourcePosition:R,position:F,isClosing:W,isWhite:Object.prototype.hasOwnProperty.call(r,V)},Q=s(V,z,Z);if(!f3(Q))return Q;if(Z.isWhite){if(Z.isClosing)return"</"+V+">";var ee=ude(z),re=r[V],ie=lde(ee.html,function(he,be){var we=d3.indexOf(re,he)!==-1,xe=y(V,he,be,we);return f3(xe)?we?(be=v(V,he,be,M),be?he+'="'+be+'"':he):(xe=d(V,he,be,we),f3(xe)?void 0:xe):xe});return z="<"+V,ie&&(z+=" "+ie),ee.closing&&(z+=" /"),z+=">",z}else return Q=l(V,z,Z),f3(Q)?_(z):Q},_);return T&&(A=T.remove(A)),A};var pde=vN;(function(e,t){var i=mr,r=p3,s=pde;function l(d,v){var _=new s(v);return _.process(d)}t=e.exports=l,t.filterXSS=l,t.FilterXSS=s,function(){for(var d in i)t[d]=i[d];for(var v in r)t[v]=r[v]}();function y(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=e.exports)})(rd,rd.exports);var dde=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(l,y,d,v){return l==="a"&&y==="href"||(l==="img"||l==="source")&&y==="src"?r.sanitizeUrl(d):rd.exports.safeAttrValue(l,y,d,v)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(l){l==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):s[l]=t[l]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new rd.exports.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,s=r===void 0?!0:r,l=this._trim(t.substring(0,t.indexOf(":"))),y=t==="/",d=/^#/.test(t),v=l&&this.allowedProtocols.indexOf(l.toLowerCase())>-1;return y||d||v?rd.exports.escapeAttrValue(t):!l&&!s?rd.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):rd.exports.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,l=void 0;if(Array.isArray(t))l=t.reduce(function(d,v){var _=r.validate(v,i);return _.isValid?d.concat([v]):(s=!0,d.concat([_.sanitized]))},[]);else if(xpe(t)){var y=Object.keys(t);l=y.reduce(function(d,v){var _=t[v],M=r.validate(_,i);return M.isValid?d[v]=_:(s=!0,d[v]=M.sanitized),d},{})}else return i.allowUndefined&&typeof t=="undefined"?void 0:null;return s?l:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const y3=new Map;function bN(){y3.clear()}function fde(e){return y3.get(e)}function yde(e,t){y3.set(e,t)}function CM(e){y3.delete(e)}var sd,I0,gde=function(e){if("WebkitTransition"in e.style)sd="webkitTransitionEnd",I0="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");sd="transitionend",I0="animationend"}},wN=function(e){sd||gde(e)},mde=function(e,t){return t===void 0&&(t=e+"-active"),function(i){wN(i);var r=!1,s=function(l){r||(r=!0,i.removeEventListener(sd,s),i.removeEventListener(I0,s),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(sd,s),i.addEventListener(I0,s),requestAnimationFrame(function(){i.classList.add(t)})}},vde=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){wN(i);var s=!1,l=function(y){s||(s=!0,i.removeEventListener(sd,l),i.removeEventListener(I0,l),r())};i.classList.add(e),i.addEventListener(sd,l),i.addEventListener(I0,l),requestAnimationFrame(function(){i.classList.add(t)})}};const bde=Ae.getLogger("esri.widgets.support.widgetUtils");function _N(e){const t=ns.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],l=typeof s;if(l==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(l==="object")for(const y in s)s[y]&&t.push(y)}const i=t.join(" ");return ns.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{var r;bN();for(const s of i)(r=e.get(s.target))==null||r(s)});return(i,r,s)=>(e.has(i)&&bde.error("Already observing element",i),e.set(i,r),t.observe(i,s),Zl(()=>{t.unobserve(i),e.delete(i)}))})();function Sl(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function xN(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function g3(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function wde(e,t){return(e==="enter"?mde:vde)(t)}const _de=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],xde=_de.reduce((e,t)=>(e[t]=[],e),{}),Sde=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],SN=new dde({whiteList:xde,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(Sde.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Mde(e){return e==="Enter"||e===" "}const MN="http://www.w3.org/",m3=`${MN}2000/svg`,$N=`${MN}1999/xlink`;let v3,EN=[],AM=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},PM=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),IN=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},$de=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(PM(e[r],t))return r}return-1},OM=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let l=s.properties;if(!(l?l.key===void 0?l.bind:l.key:void 0)){for(let y=0;y<e.length;y++)if(y!==t){let d=e[y];if(PM(d,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Ede=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},kM=[],RM=!1,TN=e=>{(e.children||[]).forEach(TN),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},CN=()=>{RM=!1,kM.forEach(TN),kM.length=0},AN=e=>{kM.push(e),RM||(RM=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(CN,{timeout:16}):setTimeout(CN,16))},PN=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),AN(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),AN(e))},Ide=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),l=s.length;for(let y=0;y<l;y++){let d=s[y],v=t[d];if(d==="className")throw new Error('Property "className" is not supported, use "class".');if(d==="class")FM(e,v,!0);else if(d==="classes"){let _=Object.keys(v),M=_.length;for(let T=0;T<M;T++){let A=_[T];v[A]&&e.classList.add(A)}}else if(d==="styles"){let _=Object.keys(v),M=_.length;for(let T=0;T<M;T++){let A=_[T],R=v[A];R&&(IN(R),i.styleApplyer(e,A,R))}}else if(d!=="key"&&v!=null){let _=typeof v;_==="function"?(d.lastIndexOf("on",0)===0&&(r&&(v=r(d,v,e,t)),d==="oninput"&&function(){let M=v;v=function(T){M.apply(this,[T]),T.target["oninput-value"]=T.target.value}}()),e[d]=v):i.namespace===m3?d==="href"?e.setAttributeNS($N,d,v):e.setAttribute(d,v):_==="string"&&d!=="value"?d==="innerHTML"?e[d]=SN.sanitize(v):e.setAttribute(d,v):e[d]=v}}},Tde=(e,t,i)=>{if(t)for(let r of t)T0(r,e,void 0,i)},ON=(e,t,i)=>{Tde(e,t.children,i),t.text&&(e.textContent=t.text),Ide(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},T0=(e,t,i,r)=>{let s,l=0,y=e.vnodeSelector,d=t.ownerDocument;if(y==="")s=e.domNode=d.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let v=0;v<=y.length;++v){let _=y.charAt(v);if(v===y.length||_==="."||_==="#"){let M=y.charAt(l-1),T=y.slice(l,v);M==="."?s.classList.add(T):M==="#"?s.id=T:(T==="svg"&&(r=AM(r,{namespace:m3})),r.namespace!==void 0?s=e.domNode=d.createElementNS(r.namespace,T):(s=e.domNode=e.domNode||d.createElement(T),T==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),l=v+1}}ON(s,e,r)}},FM=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},Cde=(e,t,i,r)=>{if(!i)return;let s=!1,l=Object.keys(i),y=l.length;for(let d=0;d<y;d++){let v=l[d],_=i[v],M=t[v];if(v==="class")M!==_&&(FM(e,M,!1),FM(e,_,!0));else if(v==="classes"){let T=e.classList,A=Object.keys(_),R=A.length;for(let F=0;F<R;F++){let V=A[F],z=!!_[V];z!==!!M[V]&&(s=!0,z?T.add(V):T.remove(V))}}else if(v==="styles"){let T=Object.keys(_),A=T.length;for(let R=0;R<A;R++){let F=T[R],V=_[F];V!==M[F]&&(s=!0,V?(IN(V),r.styleApplyer(e,F,V)):r.styleApplyer(e,F,""))}}else if(_||typeof M!="string"||(_=""),v==="value"){let T=e[v];T!==_&&(e["oninput-value"]?T===e["oninput-value"]:_!==M)&&(e[v]=_,e["oninput-value"]=void 0),_!==M&&(s=!0)}else if(_!==M){let T=typeof _;T==="function"&&r.eventHandlerInterceptor||(r.namespace===m3?v==="href"?e.setAttributeNS($N,v,_):e.setAttribute(v,_):T==="string"?v==="innerHTML"?e[v]=SN.sanitize(_):v==="role"&&_===""?e.removeAttribute(v):e.setAttribute(v,_):e[v]!==_&&(e[v]=_),s=!0)}}return s},Ade=(e,t,i,r,s)=>{if(i===r)return!1;r=r||EN;let l,y=(i=i||EN).length,d=r.length,v=0,_=0,M=!1;for(;_<d;){let T=v<y?i[v]:void 0,A=r[_];if(T!==void 0&&PM(T,A))M=v3(T,A,s)||M,v++;else{let R=$de(i,A,v+1);if(R>=0){for(l=v;l<R;l++)PN(i[l]),OM(i,l,e,"removed");M=v3(i[R],A,s)||M,v=R+1}else T0(A,t,v<y?i[v].domNode:void 0,s),Ede(A),OM(r,_,e,"added")}_++}if(y>v)for(l=v;l<y;l++)PN(i[l]),OM(i,l,e,"removed");return M};v3=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let l=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(y,r),t.domNode=y,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=AM(i,{namespace:m3})),e.text!==t.text&&(l=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,l=Ade(t,r,e.children,t.children,i)||l,l=Cde(r,e.properties,t.properties,i)||l,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return l&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let hm=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,v3(r,i,t)},domNode:e.domNode});const Pde={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let C0=e=>AM(Pde,e),ph={create:(e,t)=>(t=C0(t),T0(e,document.createElement("div"),void 0,t),hm(e,t)),append:(e,t,i)=>(i=C0(i),T0(t,e,void 0,i),hm(t,i)),insertBefore:(e,t,i)=>(i=C0(i),T0(t,e.parentNode,e,i),hm(t,i)),merge:(e,t,i)=>(i=C0(i),t.domNode=e,ON(e,t,i),hm(t,i)),replace:(e,t,i)=>(i=C0(i),T0(t,e.parentNode,e,i),e.parentNode.removeChild(e),hm(t,i))},kN,Ode=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};kN=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let kde=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?kN(i.children,s=>s.domNode===r):void 0}),i},Rde=(e,t,i)=>{let r=function(s){i("domEvent",s);let l=t(),y=Ode(s.currentTarget,l.domNode);y.reverse();let d,v=kde(l.getLastRender(),y);return e.scheduleRender(),v&&(d=v.properties[`on${s.type}`].apply(v.properties.bind||this,arguments)),i("domEventProcessed",s),d};return(s,l,y,d)=>r},LM=e=>{let t,i,r=C0(e),s=r.performanceLogger,l=!0,y=!1,d=[],v=[],_=(T,A,R)=>{let F,V=()=>F;r.eventHandlerInterceptor=Rde(t,V,s),F=T(A,R(),r),d.push(F),v.push(R)},M=()=>{if(i=void 0,l){l=!1,s("renderStart",void 0);for(let T=0;T<d.length;T++){let A=v[T]();s("rendered",void 0),d[T].update(A),s("patched",void 0)}s("renderDone",void 0),l=!0}};return t={renderNow:M,scheduleRender:()=>{i||y||(i=requestAnimationFrame(M))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,l=!0,t.scheduleRender()},append:(T,A)=>{_(ph.append,T,A)},insertBefore:(T,A)=>{_(ph.insertBefore,T,A)},merge:(T,A)=>{_(ph.merge,T,A)},replace:(T,A)=>{_(ph.replace,T,A)},detach:T=>{for(let A=0;A<v.length;A++)if(v[A]===T)return v.splice(A,1),d.splice(A,1)[0];throw new Error("renderFunction was not found")}},t},dh=class extends ot{constructor(){super(...arguments),this.items=new gt,this._watchUpdatingTracking=new E0,this._callbacks=new Map,this._projector=LM(),this._hiddenProjector=LM()}get needsRender(){return this.items.length>0}get updating(){var e,t;return(t=(e=this._watchUpdatingTracking)==null?void 0:e.updating)!=null?t:!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const s=()=>(r=e.render(),r);i.append(t,s),i.renderNow();const l={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const y=r.domNode.getBoundingClientRect();l.left=y.left,l.top=y.top,l.right=y.right,l.bottom=y.bottom}for(i.detach(s);t.firstChild;)t.removeChild(t.firstChild);return l}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};m([x({readOnly:!0})],dh.prototype,"surface",void 0),m([x({readOnly:!0})],dh.prototype,"items",void 0),m([x({readOnly:!0})],dh.prototype,"needsRender",null),m([x({readOnly:!0})],dh.prototype,"_watchUpdatingTracking",void 0),m([x({readOnly:!0})],dh.prototype,"updating",null),dh=m([Y("esri.views.overlay.ViewOverlay")],dh);const RN=dh;function A0(e,t,i,r){let s=null,l=1e3;typeof t=="number"?(l=t,r=i):(s=t!=null?t:null,l=i);let y,d=0;const v=()=>{d=0,e.apply(r,y)},_=(...M)=>{s&&s.apply(r,M),y=M,l?d||(d=setTimeout(v,l)):v()};return _.remove=()=>{d&&(clearTimeout(d),d=0)},_.forceUpdate=()=>{d&&(clearTimeout(d),v())},_.hasPendingUpdates=()=>!!d,_}const Fde="randomUUID"in crypto;function Lde(){if(Fde)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const Nde={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},jde={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},Dde=e=>te(te({},jde),e),Vde=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},zde=(e,t)=>e.find(t),FN=(e,t,i=!1)=>{let r=e;return t.forEach((s,l)=>{const y=(r==null?void 0:r.children)?zde(r.children,d=>d.domNode===s):void 0;i&&!y&&l!==t.length-1||(r=y)}),r},Gde=e=>{let t;const i=te(te({},Nde),e),r=Dde(i),s=r.performanceLogger;let l,y=!0,d=!1;const v=[],_=[],M=(A,R,F)=>{var W;let V;r.eventHandlerInterceptor=(Z,Q,ee,re)=>function(ie){let he;s("domEvent",ie);const be=Vde(ie.currentTarget,V.domNode),we=be.some($e=>{var je;return customElements.get((je=$e==null?void 0:$e.tagName)==null?void 0:je.toLowerCase())});if(ie.eventPhase===Event.CAPTURING_PHASE||!we)be.reverse(),he=FN(V.getLastRender(),be);else{const $e=ie.composedPath(),je=$e.slice($e.indexOf(ie.currentTarget),$e.indexOf(V.domNode)).filter(it=>it.getRootNode()===it.ownerDocument).reverse();he=FN(V.getLastRender(),je,!0)}let xe;return he&&(xe=i.handleInterceptedEvent(t,he,this,ie)),s("domEventProcessed",ie),xe},(W=i.postProcessProjectionOptions)==null||W.call(i,r);const z=F();V=A(R,z,r),v.push(V),_.push(F),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(V,z)};let T=()=>{if(l=void 0,y){y=!1,s("renderStart",void 0);for(let A=0;A<v.length;A++){const R=_[A]();s("rendered",void 0),v[A].update(R),s("patched",void 0)}s("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(T=i.modifyDoRenderImplementation(T,v,_)),t={renderNow:T,scheduleRender:()=>{l||d||(l=requestAnimationFrame(T))},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),d=!0},resume:()=>{d=!1,y=!0,t.scheduleRender()},append:(A,R)=>{M(ph.append,A,R)},insertBefore:(A,R)=>{M(ph.insertBefore,A,R)},merge:(A,R)=>{M(ph.merge,A,R)},replace:(A,R)=>{M(ph.replace,A,R)},detach:A=>{for(let R=0;R<_.length;R++)if(_[R]===A)return _.splice(R,1),v.splice(R,1)[0];throw new Error("renderFunction was not found")}},t},Bt={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let P0,LN,b3,NN=!1,w3=!1,NM=!1,so=!1,jN=null,jM=!1;const ZEe={isDev:!!Bt.isDev,isBrowser:!0,isServer:!1,isTesting:!!Bt.isTesting},KEe=e=>{const t=new URL(e,An.$resourcesUrl$);return t.origin!==F0.location.origin?t.href:t.pathname},qde=e=>An.$resourcesUrl$=e,od=(e,t="")=>()=>{},DN="http://www.w3.org/1999/xlink",VN={},Ude="http://www.w3.org/2000/svg",Bde="http://www.w3.org/1999/xhtml",Hde=e=>e!=null,DM=e=>(e=typeof e,e==="object"||e==="function"),zN=(e,t,...i)=>{let r=null,s=null,l=null,y=!1,d=!1;const v=[],_=T=>{for(let A=0;A<T.length;A++)r=T[A],Array.isArray(r)?_(r):r!=null&&typeof r!="boolean"&&((y=typeof e!="function"&&!DM(r))&&(r=String(r)),y&&d?v[v.length-1].$text$+=r:v.push(y?_3(null,r):r),d=y)};if(_(i),t&&(Bt.isDev&&e==="input"&&Kde(t),Bt.vdomKey&&t.key&&(s=t.key),Bt.slotRelocation&&t.name&&(l=t.name),Bt.vdomClass)){const T=t.className||t.class;T&&(t.class=typeof T!="object"?T:Object.keys(T).filter(A=>T[A]).join(" "))}if(Bt.isDev&&v.some(GN)&&Mfe(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),Bt.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,v,Jde);const M=_3(e,null);return M.$attrs$=t,v.length>0&&(M.$children$=v),Bt.vdomKey&&(M.$key$=s),Bt.slotRelocation&&(M.$name$=l),M},_3=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Bt.vdomAttribute&&(i.$attrs$=null),Bt.vdomKey&&(i.$key$=null),Bt.slotRelocation&&(i.$name$=null),i},Wde={},GN=e=>e&&e.$tag$===Wde,Jde={forEach:(e,t)=>e.map(qN).forEach(t),map:(e,t)=>e.map(qN).map(t).map(Zde)},qN=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Zde=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),zN(e.vtag,i,...e.vchildren||[])}const t=_3(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Kde=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),s=t.indexOf("min"),l=t.indexOf("max"),y=t.indexOf("step");(i<r||i<s||i<l||i<y)&&aj('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},Yde=e=>$fe.map(t=>t(e)).find(t=>!!t),Xde=(e,t)=>e!=null&&!DM(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Qde=e=>Bt.lazyLoad?R0(e).$hostElement$:e,YEe=(e,t,i)=>{const r=Qde(e);return{emit:s=>(Bt.isDev&&!r.isConnected&&aj(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),efe(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s}))}},efe=(e,t,i)=>{const r=An.ce(t,i);return e.dispatchEvent(r),r},UN=new WeakMap,tfe=(e,t,i)=>{let r=M3.get(e);Tfe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,M3.set(e,r)},ife=(e,t,i,r)=>{let s=BN(t,i);const l=M3.get(s);if(e=e.nodeType===11?e:va,l)if(typeof l=="string"){e=e.head||e;let y=UN.get(e),d;y||UN.set(e,y=new Set),y.has(s)||(d=va.createElement("style"),d.innerHTML=l,e.insertBefore(d,e.querySelector("link")),y&&y.add(s))}else e.adoptedStyleSheets.includes(l)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,l]);return s},rfe=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=od("attachStyles",t.$tagName$),l=ife($3&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=l,i.classList.add(l+"-h"),r&2&&i.classList.add(l+"-s")),s()},BN=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),HN=(e,t,i,r,s,l)=>{if(i!==r){let y=sj(e,t),d=t.toLowerCase();if(t==="class"){const v=e.classList,_=WN(i),M=WN(r);v.remove(..._.filter(T=>T&&!M.includes(T))),v.add(...M.filter(T=>T&&!_.includes(T)))}else if(t==="style"){for(const v in i)(!r||r[v]==null)&&(v.includes("-")?e.style.removeProperty(v):e.style[v]="");for(const v in r)(!i||r[v]!==i[v])&&(v.includes("-")?e.style.setProperty(v,r[v]):e.style[v]=r[v])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):sj(F0,d)?t=d.slice(2):t=d[2]+t.slice(3),i&&An.rel(e,t,i,!1),r&&An.ael(e,t,r,!1);else{const v=DM(r);if((y||v&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const M=r==null?"":r;t==="list"?y=!1:(i==null||e[t]!=M)&&(e[t]=M)}}catch{}let _=!1;d!==(d=d.replace(/^xlink\:?/,""))&&(t=d,_=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(_?e.removeAttributeNS(DN,t):e.removeAttribute(t)):(!y||l&4||s)&&!v&&(r=r===!0?"":r,_?e.setAttributeNS(DN,t,r):e.setAttribute(t,r))}}},nfe=/\s/,WN=e=>e?e.split(nfe):[],JN=(e,t,i,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,l=e&&e.$attrs$||VN,y=t.$attrs$||VN;for(r in l)r in y||HN(s,r,l[r],void 0,i,t.$flags$);for(r in y)HN(s,r,l[r],y[r],i,t.$flags$)},x3=(e,t,i,r)=>{const s=t.$children$[i];let l=0,y,d,v;if(NN||(NM=!0,s.$tag$==="slot"&&(P0&&r.classList.add(P0+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)y=s.$elm$=va.createTextNode(s.$text$);else if(s.$flags$&1)y=s.$elm$=va.createTextNode("");else{if(so||(so=s.$tag$==="svg"),y=s.$elm$=va.createElementNS(so?Ude:Bde,s.$flags$&2?"slot-fb":s.$tag$),so&&s.$tag$==="foreignObject"&&(so=!1),JN(null,s,so),Hde(P0)&&y["s-si"]!==P0&&y.classList.add(y["s-si"]=P0),s.$children$)for(l=0;l<s.$children$.length;++l)d=x3(e,s,l,y),d&&y.appendChild(d);s.$tag$==="svg"?so=!1:y.tagName==="foreignObject"&&(so=!0)}return y["s-hn"]=b3,s.$flags$&(2|1)&&(y["s-sr"]=!0,y["s-cr"]=LN,y["s-sn"]=s.$name$||"",v=e&&e.$children$&&e.$children$[i],v&&v.$tag$===s.$tag$&&e.$elm$&&pm(e.$elm$,!1)),y},pm=(e,t)=>{An.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==b3&&s["s-ol"]&&(YN(s).insertBefore(s,VM(s)),s["s-ol"].remove(),s["s-ol"]=void 0,NM=!0),t&&pm(s,t)}An.$flags$&=~1},ZN=(e,t,i,r,s,l)=>{let y=e["s-cr"]&&e["s-cr"].parentNode||e,d;for(y.shadowRoot&&y.tagName===b3&&(y=y.shadowRoot);s<=l;++s)r[s]&&(d=x3(null,i,s,e),d&&(r[s].$elm$=d,y.insertBefore(d,VM(t))))},KN=(e,t,i,r,s)=>{for(;t<=i;++t)(r=e[t])&&(s=r.$elm$,tj(r),w3=!0,s["s-ol"]?s["s-ol"].remove():pm(s,!0),s.remove())},sfe=(e,t,i,r)=>{let s=0,l=0,y=0,d=0,v=t.length-1,_=t[0],M=t[v],T=r.length-1,A=r[0],R=r[T],F,V;for(;s<=v&&l<=T;)if(_==null)_=t[++s];else if(M==null)M=t[--v];else if(A==null)A=r[++l];else if(R==null)R=r[--T];else if(S3(_,A))O0(_,A),_=t[++s],A=r[++l];else if(S3(M,R))O0(M,R),M=t[--v],R=r[--T];else if(S3(_,R))(_.$tag$==="slot"||R.$tag$==="slot")&&pm(_.$elm$.parentNode,!1),O0(_,R),e.insertBefore(_.$elm$,M.$elm$.nextSibling),_=t[++s],R=r[--T];else if(S3(M,A))(_.$tag$==="slot"||R.$tag$==="slot")&&pm(M.$elm$.parentNode,!1),O0(M,A),e.insertBefore(M.$elm$,_.$elm$),M=t[--v],A=r[++l];else{for(y=-1,d=s;d<=v;++d)if(t[d]&&t[d].$key$!==null&&t[d].$key$===A.$key$){y=d;break}y>=0?(V=t[y],V.$tag$!==A.$tag$?F=x3(t&&t[l],i,y,e):(O0(V,A),t[y]=void 0,F=V.$elm$),A=r[++l]):(F=x3(t&&t[l],i,l,e),A=r[++l]),F&&YN(_.$elm$).insertBefore(F,VM(_.$elm$))}s>v?ZN(e,r[T+1]==null?null:r[T+1].$elm$,i,r,l,T):l>T&&KN(t,s,v)},S3=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,VM=e=>e&&e["s-ol"]||e,YN=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,O0=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,l=t.$tag$,y=t.$text$;let d;y===null?(so=l==="svg"?!0:l==="foreignObject"?!1:so,l==="slot"||JN(e,t,so),r!==null&&s!==null?sfe(i,r,t,s):s!==null?(e.$text$!==null&&(i.textContent=""),ZN(i,null,t,s,0,s.length-1)):r!==null&&KN(r,0,r.length-1),so&&l==="svg"&&(so=!1)):(d=i["s-cr"])?d.parentNode.textContent=y:e.$text$!==y&&(i.data=y)},XN=e=>{const t=e.childNodes;let i,r,s,l,y,d;for(r=0,s=t.length;r<s;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,l=0;l<s;l++)if(d=t[l].nodeType,t[l]["s-hn"]!==i["s-hn"]||y!==""){if(d===1&&y===t[l].getAttribute("slot")){i.hidden=!0;break}}else if(d===1||d===3&&t[l].textContent.trim()!==""){i.hidden=!0;break}}XN(i)}},ma=[],QN=e=>{let t,i,r,s,l,y,d=0;const v=e.childNodes,_=v.length;for(;d<_;d++){if(t=v[d],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=t["s-sn"],y=r.length-1;y>=0;y--)i=r[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(ej(i,s)?(l=ma.find(M=>M.$nodeToRelocate$===i),w3=!0,i["s-sn"]=i["s-sn"]||s,l?l.$slotRefNode$=t:ma.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&ma.map(M=>{ej(M.$nodeToRelocate$,i["s-sn"])&&(l=ma.find(T=>T.$nodeToRelocate$===i),l&&!M.$slotRefNode$&&(M.$slotRefNode$=l.$slotRefNode$))})):ma.some(M=>M.$nodeToRelocate$===i)||ma.push({$nodeToRelocate$:i}));t.nodeType===1&&QN(t)}},ej=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",tj=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(tj)},ofe=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,s=e.$vnode$||_3(null,null),l=GN(t)?t:zN(null,null,t);b3=i.tagName,r.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},r.$attrsToReflect$.map(([y,d])=>l.$attrs$[d]=i[y])),l.$tag$=null,l.$flags$|=4,e.$vnode$=l,l.$elm$=s.$elm$=i.shadowRoot||i,P0=i["s-sc"],LN=i["s-cr"],NN=$3&&(r.$flags$&1)!=0,w3=!1,O0(s,l);{if(An.$flags$|=1,NM){QN(l.$elm$);let y,d,v,_,M,T,A=0;for(;A<ma.length;A++)y=ma[A],d=y.$nodeToRelocate$,d["s-ol"]||(v=va.createTextNode(""),v["s-nr"]=d,d.parentNode.insertBefore(d["s-ol"]=v,d));for(A=0;A<ma.length;A++)if(y=ma[A],d=y.$nodeToRelocate$,y.$slotRefNode$){for(_=y.$slotRefNode$.parentNode,M=y.$slotRefNode$.nextSibling,v=d["s-ol"];v=v.previousSibling;)if(T=v["s-nr"],T&&T["s-sn"]===d["s-sn"]&&_===T.parentNode&&(T=T.nextSibling,!T||!T["s-nr"])){M=T;break}(!M&&_!==d.parentNode||d.nextSibling!==M)&&d!==M&&(!d["s-hn"]&&d["s-ol"]&&(d["s-hn"]=d["s-ol"].parentNode.nodeName),_.insertBefore(d,M))}else d.nodeType===1&&(d.hidden=!0)}w3&&XN(l.$elm$),An.$flags$&=~1,ma.length=0}},afe=(e,t)=>{},zM=(e,t)=>{Bt.taskQueue&&Bt.updatable&&(e.$flags$|=16),afe(e,e.$ancestorComponent$);const i=()=>lfe(e,t);return Bt.taskQueue?Pfe(i):i()},lfe=(e,t)=>{const i=e.$hostElement$,r=od("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;let l;return t?l=k0(s,"componentWillLoad"):l=k0(s,"componentWillUpdate"),l=ij(l,()=>k0(s,"componentWillRender")),r(),ij(l,()=>ufe(e,s,t))},ufe=async(e,t,i)=>{const r=e.$hostElement$,s=od("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&rfe(e);const l=od("render",e.$cmpMeta$.$tagName$);cfe(e,t,r),l(),s(),hfe(e)},cfe=(e,t,i)=>{const r=!1,s=!1,l=!0,y=!0;try{jN=t,t=(r||t.render)&&t.render(),y&&l&&(e.$flags$&=~16),(y||s)&&(e.$flags$|=2),(Bt.hasRenderFn||Bt.reflect)&&(Bt.vdomRender||Bt.reflect)&&(Bt.hydrateServerSide||ofe(e,t))}catch(d){dm(d,e.$hostElement$)}return jN=null,null},hfe=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=od("postUpdate",t),s=i;e.$ancestorComponent$,k0(s,"componentDidRender"),e.$flags$&64?(k0(s,"componentDidUpdate"),r()):(e.$flags$|=64,k0(s,"componentDidLoad"),r())},XEe=e=>{if(Bt.updatable){const t=R0(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&(2|16))==2&&zM(t,!1),i}return!1},k0=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){dm(r)}},ij=(e,t)=>e&&e.then?e.then(t):t(),pfe=(e,t)=>R0(e).$instanceValues$.get(t),dfe=(e,t,i,r)=>{const s=R0(e),l=e,y=s.$instanceValues$.get(t),d=s.$flags$,v=l;i=Xde(i,r.$members$[t][0]);const _=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!_){s.$instanceValues$.set(t,i);{if(r.$watchers$&&d&128){const T=r.$watchers$[t];T&&T.map(A=>{try{v[A](i,y,t)}catch(R){dm(R,l)}})}if((d&(2|16))==2){if(v.componentShouldUpdate&&v.componentShouldUpdate(i,y,t)===!1)return;zM(s,!1)}}}},ffe=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),s=e.prototype;r.map(([l,[y]])=>{(y&31||y&32)&&Object.defineProperty(s,l,{get(){return pfe(this,l)},set(d){dfe(this,l,d,t)},configurable:!0,enumerable:!0})});{const l=new Map;s.attributeChangedCallback=function(y,d,v){An.jmp(()=>{const _=l.get(y);if(this.hasOwnProperty(_))v=this[_],delete this[_];else if(s.hasOwnProperty(_)&&typeof this[_]=="number"&&this[_]==v)return;this[_]=v===null&&typeof this[_]=="boolean"?!1:v})},e.observedAttributes=r.filter(([y,d])=>d[0]&15).map(([y,d])=>{const v=d[1]||y;return l.set(v,y),d[0]&512&&t.$attrsToReflect$.push([y,v]),v})}}return e},yfe=async(e,t,i,r,s)=>{if((t.$flags$&32)==0&&(s=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),s.style)){let y=s.style;typeof y!="string"&&(y=y[t.$modeName$=Yde(e)]);const d=BN(i,t.$modeName$);if(!M3.has(d)){const v=od("registerStyles",i.$tagName$);tfe(d,y,!!(i.$flags$&1)),v()}}t.$ancestorComponent$,(()=>zM(t,!0))()},gfe=e=>{},mfe=e=>{if((An.$flags$&1)==0){const t=R0(e),i=t.$cmpMeta$,r=od("connectedCallback",i.$tagName$);t.$flags$&1?(rj(e,t,i.$listeners$),gfe(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&(4|8)&&vfe(e),i.$members$&&Object.entries(i.$members$).map(([s,[l]])=>{if(l&31&&e.hasOwnProperty(s)){const y=e[s];delete e[s],e[s]=y}}),yfe(e,t,i)),r()}},vfe=e=>{const t=e["s-cr"]=va.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},bfe=e=>{if((An.$flags$&1)==0){const t=R0(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},QEe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};Bt.member&&(i.$members$=t[2]),Bt.hostListener&&(i.$listeners$=t[3]),Bt.watchCallback&&(i.$watchers$=e.$watchers$),Bt.reflect&&(i.$attrsToReflect$=[]),Bt.shadowDom&&!$3&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Sfe(this,i)},connectedCallback(){mfe(this),Bt.connectedCallback&&r&&r.call(this)},disconnectedCallback(){bfe(this),Bt.disconnectedCallback&&s&&s.call(this)},__attachShadow(){$3?Bt.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,ffe(e,i)},eIe=(e,t)=>t,rj=(e,t,i,r)=>{i&&i.map(([s,l,y])=>{const d=_fe(e,s),v=wfe(t,y),_=xfe(s);An.ael(d,l,v,_),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>An.rel(d,l,v,_))})},wfe=(e,t)=>i=>{try{Bt.lazyLoad||e.$hostElement$[t](i)}catch(r){dm(r)}},_fe=(e,t)=>t&4?va:t&8?F0:t&16?va.body:e,xfe=e=>Efe?{passive:(e&1)!=0,capture:(e&2)!=0}:(e&2)!=0,nj=new WeakMap,R0=e=>nj.get(e),Sfe=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Bt.isDev&&(i.$renderCount$=0),Bt.method&&Bt.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),Bt.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),rj(e,i,t.$listeners$),nj.set(e,i)},sj=(e,t)=>t in e,dm=(e,t)=>(0,console.error)(e,t),oj=Bt.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],Mfe=(...e)=>console.error(...oj,...e),aj=(...e)=>console.warn(...oj,...e),M3=new Map,$fe=[],F0=typeof window!="undefined"?window:{};Bt.cssVarShim&&F0.CSS;const va=F0.document||{head:{}},tIe=F0.HTMLElement||class{},An={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},$3=Bt.shadowDomShim&&Bt.shadowDom?(()=>(va.head.attachShadow+"").indexOf("[native")>-1)():!0,Efe=(()=>{let e=!1;try{va.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Ife=e=>Promise.resolve(e),Tfe=Bt.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})():!1,lj=[],uj=[],Cfe=(e,t)=>i=>{e.push(i),jM||(jM=!0,t&&An.$flags$&4?Afe(GM):An.raf(GM))},cj=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){dm(i)}e.length=0},GM=()=>{cj(lj),cj(uj),(jM=lj.length>0)&&An.raf(GM)},Afe=e=>Ife().then(e),Pfe=Cfe(uj,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function Ofe(e){return e.map(t=>{let i="";for(let r=0;r<t;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const iIe=()=>Ofe([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */const kfe="calcite-theme-auto",Rfe="calcite-theme-dark";function rIe(e){const t="dir",i=`[${t}]`,r=Ffe(e,i);return r?r.getAttribute(t):"ltr"}function hj(e){return e.getRootNode()}function pj(e){return e.host||null}function nIe(e,{selector:t,id:i}){function r(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);const l=hj(s),y=i?"getElementById"in l?l.getElementById(i):null:t?l.querySelector(t):null,d=pj(l);return y||(d?r(d):null)}return r(e)}function Ffe(e,t){function i(r){return r?r.closest(t)||i(pj(hj(r))):null}return i(e)}function Lfe(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function sIe(e){if(!!e)return Lfe(e)?e.setFocus():e.focus()}const fm=":not([slot])";function oIe(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(s=>`[slot="${s}"]`).join(","):`[slot="${t}"]`:fm;return(i==null?void 0:i.all)?Nfe(e,r,i):jfe(e,r,i)}function dj(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function Nfe(e,t,i){let r=t===fm?dj(e,fm):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(l=>l.parentElement===e),r=(i==null?void 0:i.matches)?r.filter(l=>l==null?void 0:l.matches(i.matches)):r;const s=i==null?void 0:i.selector;return s?r.map(l=>Array.from(l.querySelectorAll(s))).reduce((l,y)=>[...l,...y],[]).filter(l=>!!l):r}function jfe(e,t,i){let r=t===fm?dj(e,fm)[0]||null:e.querySelector(t);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===e?r:null,r=(i==null?void 0:i.matches)?(r==null?void 0:r.matches(i.matches))?r:null:r;const s=i==null?void 0:i.selector;return s?r==null?void 0:r.querySelector(s):r}function aIe(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function lIe(e){return Boolean(e).toString()}function uIe(e){return!!(e.isPrimary&&e.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function fj(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(Rfe)||e.contains(kfe)&&t?"dark":"light",r=y=>document.body.dispatchEvent(new CustomEvent("calciteThemeChange",{bubbles:!0,detail:{theme:y}})),s=y=>{l!==y&&r(y),l=y};let l=i();r(l),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>s(y.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Dfe(){typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?fj():document.addEventListener("DOMContentLoaded",()=>fj(),{once:!0}))}const Vfe=Dfe;Vfe();let yj;function zfe(){qde(Fo(mi(yj)))}yj="components/assets";const gj=Symbol("widget"),Gfe=[],qfe={},E3=new WeakMap;function mj(e,t){let i=t.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=mj(e,i[s]);else i=Gfe;const r=t.vnodeSelector;if(qM(r)){const s=t.properties||qfe,l=s.key||r;return{vnodeSelector:"div",properties:{key:l,afterCreate:Ufe,afterUpdate:Bfe,afterRemoved:vj,parentWidget:e,widgetConstructor:r,widgetProperties:De(te({},s),{key:l,children:i})},children:void 0,text:void 0,domNode:null}}return t}function Ufe(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:l}){var d;const y=new s(l);y.container=e,E3.set(e,y),(d=y.afterCreate)==null||d.call(y,y,e),r._internalHandles.add(Zl(()=>vj(e)))}function Bfe(e,t,i,{widgetProperties:r}){var l;const s=E3.get(e);s&&(s.set(r),(l=s.afterUpdate)==null||l.call(s,s,e))}function vj(e){const t=E3.get(e);t&&(t.destroy(),E3.delete(e))}function qM(e){return typeof e=="function"&&e[gj]}const bj=new Set;function Hfe(e){bj.add(e),e.finally(()=>bj.delete(e))}const Wfe="esri.widgets.Widget";let Jfe=0;const Zfe={widgetIcon:"esri-icon-checkbox-unchecked"};function wj(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?wj(e[i],t==null?void 0:t[i]):e[i]=t[i]);return e}const Kfe=Gde({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,l,y)=>{const d=t==null?void 0:t(r,s,l,y),v=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in l)||v){const _=r[2].toLowerCase()+r.slice(3),M=R=>d==null?void 0:d.call(l,R);l.addEventListener(_,M,v);const T=()=>l.removeEventListener(_,M,v),A=y.afterRemoved;y.afterRemoved=R=>{A==null||A(R),T()}}return d}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:l}=r,y=s===Event.CAPTURING_PHASE;let d=`on${l}${y?"capture":""}`;const v=t.properties;(v&&d in v||(d=`on${l[0].toUpperCase()}${l.slice(1)}${y?"Capture":""}`,v&&d in v))&&(bN(),e.scheduleRender(),v[d].call(v.bind||i,r))}});let UM=!1,Dr=class extends M2(fn.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Jr,this._projector=Kfe,this._readyForTrueRender=!1,this.iconClass=Zfe.widgetIcon,this.key=this,this._loadLocale=yw(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const l=await Ss(this._messageBundleProps.map(async({bundlePath:y,propertyName:d})=>{let v=await FF(y);this.uiStrings&&Object.keys(this.uiStrings)&&(v=wj(me(v),this.uiStrings)),this[d]=v}));for(const y of l)y.error&&Ae.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,y.error)}await this.loadLocale()}),zfe();const i="esri-widget-uid-"+Lde(),r=this.render.bind(this);this._trackingTarget=new bw(()=>this.scheduleRender());const s=()=>{var M;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const l=r();let{properties:y}=l;y||(l.properties=y={});let{key:d,styles:v}=y;d||(y.key=i),v||(y.styles=v={}),v.display||(v.display="");let _=0;return(M=l.children)==null||M.forEach(T=>{if(qM(T.vnodeSelector))return;let{properties:A}=T;A||(T.properties=A={}),A.key||(A.key=`${this.id}--${_++}`)}),mj(this,l)};this.render=()=>{var y;if(UM)return s();let l=(y=fde(this))!=null?y:null;if(l)return l;this._trackingTarget.clear(),UM=!0;try{l=Yl(this._trackingTarget,s)}catch(d){throw console.error(d),d}finally{UM=!1}return l&&yde(this,l),l},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Hfe(this._resourcesFetch)}normalizeCtorArgs(e,t){const i=te({},e);return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(J9)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(oi(this._trackingTarget),oi(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,CM(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return IM(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Jfe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(CM(this),this._projector.scheduleRender())}classes(...e){return _N.apply(this,e)}renderNow(){CM(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),((t=this._delegatedEventNames)==null?void 0:t.length)&&this._internalHandles.add(Ve(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&hw(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>pw(i,s,l=>{this.emit(s,l)})),"delegated-events")},fi)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(J9),this.scheduleRender()};this._internalHandles.add([eoe(e),Ve(()=>this.uiStrings,e),no(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),(t=e==null?void 0:e.parentNode)==null||t.removeChild(e)}};Dr[gj]=!0,m([x()],Dr.prototype,"_readyForTrueRender",void 0),m([x({value:null})],Dr.prototype,"container",null),m([ri("container")],Dr.prototype,"castContainer",null),m([x()],Dr.prototype,"domNode",null),m([x()],Dr.prototype,"iconClass",void 0),m([x()],Dr.prototype,"id",null),m([x()],Dr.prototype,"label",null),m([x()],Dr.prototype,"renderable",null),m([x()],Dr.prototype,"uiStrings",void 0),m([x()],Dr.prototype,"viewModel",void 0),m([x({value:!0})],Dr.prototype,"visible",null),m([x()],Dr.prototype,"key",void 0),m([x()],Dr.prototype,"children",void 0),m([x()],Dr.prototype,"afterCreate",void 0),m([x()],Dr.prototype,"afterUpdate",void 0),m([x()],Dr.prototype,"afterRemoved",void 0),Dr=m([Y(Wfe)],Dr);const zn=Dr;function _j(e){return 32+e.length}function xj(e){return 16}function cIe(e){if(!e)return 0;let t=Mj;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=_j(r);break;case"number":t+=xj();break;case"boolean":t+=4}}return t}function Yfe(e){if(!e)return 0;if(Array.isArray(e))return Xfe(e);let t=Mj;for(const i in e)e.hasOwnProperty(i)&&(t+=Sj(e[i]));return t}function Xfe(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=$j;for(let r=0;r<t;r++)i+=Sj(e[r]);return i}function Sj(e){switch(typeof e){case"object":return Yfe(e);case"string":return _j(e);case"number":return xj();case"boolean":return 4;default:return 8}}function hIe(e,t){return $j+e.length*t}const Mj=32,$j=32;var ym;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(ym||(ym={}));function Ej(e,t,i){return e.units[t][i]}function L0(e,t,i,r=2,s="abbr"){return`${Po(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${Ej(e,i,s)}`}function I3(e,t,i,r=2,s="abbr"){return`${Po(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${Ej(e,i,s)}`}function pIe(e,t,i,r=2,s="abbr"){const l=dL(t,i);return L0(e,vi(t,i,l),l,r,s)}function dIe(e,t,i,r=2,s="abbr"){const l=dL(t,i);return I3(e,vi(t,i,l),l,r,s)}function fIe(e,t,i,r=2,s="abbr"){const l=fL(t,i);return L0(e,vi(t,i,l),l,r,s)}function yIe(e,t,i,r=2,s="abbr"){const l=fL(t,i);return I3(e,vi(t,i,l),l,r,s)}function gIe(e,t,i,r=2,s="abbr"){const l=yL(t,i);return L0(e,vi(t,i,l),l,r,s)}function mIe(e,t,i,r=2,s="abbr"){const l=yL(t,i);return I3(e,vi(t,i,l),l,r,s)}function vIe(e,t,i,r=2,s="abbr"){const l=gL(t,i);return L0(e,vi(t,i,l),l,r,s)}function bIe(e,t,i,r=2,s="abbr"){const l=gL(t,i);return I3(e,vi(t,i,l),l,r,s)}function wIe(e,t,i,r=2,s="abbr"){const l=Bce(t,i);return L0(e,vi(t,i,l),l,r,s)}function _Ie(e,t,i,r=2,s="abbr"){const l=Hce(t,i);return L0(e,vi(t,i,l),l,r,s)}function xIe(e,t,i,r,s){s=hn(s,2);let l=qF.normalize(Qfe(vi(e,t,"degrees"),i,r),0,!0);const y={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s,signDisplay:l>0?"never":"exceptZero"};return l=Tj(l,y),Po(l,y)}function SIe(e,t,i,r,s){i!==r&&(e=-e);const l={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s=hn(s,2),minimumFractionDigits:s,signDisplay:"exceptZero"};let y=vi(e,t,"degrees")%360;return y=Tj(y,l),Po(y,l)}const Ij=new Map;function Tj(e,t){const i=JSON.stringify(t);let r=Ij.get(i);return r||(r=new Intl.NumberFormat("en-US",t),Ij.set(i,r)),/\-?\+?360/.test(r.format(e))?0:e}function Qfe(e,t,i){if(t===i)return e;switch(i){case"arithmetic":return e0e(e);case"geographic":return t0e(e)}}function e0e(e){return 90-e}function t0e(e){return-e-90}const Cj=["B","kB","MB","GB","TB"];function i0e(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(ym.KILOBYTES));i=Tn(i,0,Cj.length-1);const r=Po(t/ym.KILOBYTES**i,{maximumFractionDigits:2});return Ja(e.units.bytes[Cj[i]],{fileSize:r})}function r0e(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(l=>l.name===i);return s?n0e({tagName:r,tags:s.tags}):null}function n0e(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(s=>s.name===t);return r&&r.value||null}var BM;const s0e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let ks=BM=class extends Ie{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=r0e({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return s0e[t]||null}clone(){return new BM({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};m([x({type:String})],ks.prototype,"contentType",void 0),m([x()],ks.prototype,"exifInfo",void 0),m([x({readOnly:!0})],ks.prototype,"orientationInfo",null),m([x({type:hi})],ks.prototype,"id",void 0),m([x({type:String})],ks.prototype,"globalId",void 0),m([x({type:String})],ks.prototype,"keywords",void 0),m([x({type:String})],ks.prototype,"name",void 0),m([x({json:{read:!1}})],ks.prototype,"parentGlobalId",void 0),m([x({json:{read:!1}})],ks.prototype,"parentObjectId",void 0),m([x({type:hi})],ks.prototype,"size",void 0),m([x({json:{read:!1}})],ks.prototype,"url",void 0),ks=BM=m([Y("esri.layers.support.AttachmentInfo")],ks);const Aj=ks;var HM;let mn=HM=class extends Ie{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new HM(me({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};m([x({type:[String],json:{write:!0}})],mn.prototype,"attachmentTypes",void 0),m([x({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],mn.prototype,"attachmentsWhere",void 0),m([x({type:Boolean,json:{write:!0}})],mn.prototype,"cacheHint",void 0),m([x({type:[String],json:{write:!0}})],mn.prototype,"keywords",void 0),m([x({type:[Number],json:{write:!0}})],mn.prototype,"globalIds",void 0),m([x({json:{write:!0}})],mn.prototype,"name",void 0),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],mn.prototype,"num",void 0),m([x({type:[Number],json:{write:!0}})],mn.prototype,"objectIds",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],mn.prototype,"returnMetadata",void 0),m([x({type:[Number],json:{write:!0}})],mn.prototype,"size",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],mn.prototype,"start",void 0),m([Ke("start"),Ke("num")],mn.prototype,"writeStart",null),m([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],mn.prototype,"where",void 0),mn=HM=m([Y("esri.rest.support.AttachmentQuery")],mn),mn.from=Ai(mn);const T3=mn,o0e="esri.widgets.Feature.support.featureUtils",Pj=Ae.getLogger(o0e),a0e=/href=(""|'')/gi,l0e=/(\{([^\{\r\n]+)\})/g,u0e=/\'/g,Oj=/^\s*expression\//i,c0e=/(\n)/gi,h0e=/[\u00A0-\u9999<>\&]/gim,p0e=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,d0e=/^(?:mailto:|tel:)/,kj="relationships/",WM=D4("short-date-short-time");function Rj(e){if(!ae(e))return e.get("sourceLayer")||e.get("layer")}async function C3(e,t){return typeof e=="function"?e.call(null,t):e}function Fj(e=""){if(e)return!d0e.test(e.trim().toLowerCase())}function JM(e){return!!e&&Oj.test(e)}function f0e(e,t){if(!JM(t)||!e)return null;const i=t.replace(Oj,"").toLowerCase();let r;return e.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function Lj(e,t){const i=f0e(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function y0e(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function g0e(e){return e.replace(a0e,"")}function gm(e,t){const i=ZM(t,e);return i?i.name:e}function m0e(e,t){return e&&e.map(i=>gm(i,t))}function ZM(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function Nj(e){return`${e}`.trim()}function ad({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:l}){return r?KM({formattedAttributes:t,template:_0e(r,te(te(te({},t),s),e),i),fieldInfoMap:l}):""}function KM({formattedAttributes:e,template:t,fieldInfoMap:i}){return Nj(g0e(Ja(Ja(t,r=>y0e(r,i)),e)))}function v0e(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",l=(i?encodeURIComponent(r):r).replace(u0e,s);t[e]=l}}function b0e(e,t=!1){const i=te({},e);return Object.keys(i).forEach(r=>v0e(r,i,t)),i}function w0e(e,t,i){const r=(t=Nj(t))&&t[0]!=="{";return Ja(e,b0e(i,r))}function YM(e,t){return e.replace(l0e,(i,r,s)=>{const l=ZM(t,s);return l?`{${l.name}}`:r})}function _0e(e,t,i){const r=YM(e,i);return r&&r.replace(p0e,(s,l,y)=>w0e(s,l||y,t))}function x0e(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function S0e(e){return(e==null?void 0:e.type)==="feature"}function jj(e){return!!(e==null?void 0:e.layer)}function M0e(e){return(e==null?void 0:e.type)==="map-image"}function $0e(e,t){var _;const i=t.fieldInfos,r=t.fieldName,s=(_=Dj(i,r))==null?void 0:_.clone(),l=t.preventPlacesFormatting,y=t.layer,d=ZM(y,r);if(s&&(d==null?void 0:d.type)==="date"){const M=s.format||new Zf;M.dateFormat=M.dateFormat||"short-date-short-time",M.dateTimeFormatOptions=!jj(y)&&S0e(y)&&y.datesInUnknownTimezone||jj(y)&&M0e(y.layer)&&y.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=M}const v=s&&s.format;return typeof e=="string"&&gk(r)&&v?v.formatRasterPixelValue(e):typeof(e=x0e(e,v))=="string"||e==null||v==null?mm(e):l?Po(e,De(te({},_k(v)),{minimumFractionDigits:0,maximumFractionDigits:20})):v.format(e)}function Dj(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function E0e({fieldName:e,graphic:t,layer:i}){if(bu(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function I0e({fieldName:e,value:t,graphic:i,layer:r}){if(bu(e)||!r||typeof r.getFieldDomain!="function")return null;const s=r.getFieldDomain(e,{feature:i});return s&&s.type==="coded-value"?s.getName(t):null}function T0e(e,t){const{creatorField:i,creationDateField:r,editorField:s,editDateField:l}=e;if(!t)return;const y=t[l];if(typeof y=="number"){const v=t[s];return{type:"edit",date:lu(y,WM),user:v}}const d=t[r];if(typeof d=="number"){const v=t[i];return{type:"create",date:lu(d,WM),user:v}}return null}function C0e(e,t){const i=new Map;return e&&e.forEach(r=>{const s=gm(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function Vj(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const l=s&&s.fieldInfos;l&&t.push(...l)}}),t}function XM(e){return e.replace(h0e,t=>`&#${t.charCodeAt(0)};`)}function mm(e){return typeof e=="string"?e.replace(c0e,'<br class="esri-text-new-line" />'):e}function zj(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:l,graphic:y}=e;if(t==null)return"";const d=I0e({fieldName:i,value:t,graphic:y,layer:l});if(d)return d;const v=E0e({fieldName:i,graphic:y,layer:l});if(v)return v;if(s.get(i.toLowerCase()))return $0e(t,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:l});const _=l&&l.fieldsIndex;return _&&_.isDateField(i)?lu(t,WM):mm(t)}function QM({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:l}){const y={};return l==null||l.forEach(d=>R0e({attributes:y,relatedInfo:d,fieldInfoMap:s,fieldInfos:e,layer:i})),Object.keys(t).forEach(d=>{const v=t[d];y[d]=zj({fieldName:d,fieldInfos:e,fieldInfoMap:s,layer:i,value:v,graphic:r})}),y}async function A0e(e,t){var M,T;const{layer:i,graphic:r,outFields:s,objectIds:l,returnGeometry:y,spatialReference:d}=e,v=l[0];if(typeof v!="number"&&typeof v!="string"){const A="Could not query required fields for the specified feature. The feature's ID is invalid.",R={layer:i,graphic:r,objectId:v,requiredFields:s};return Pj.warn(A,R),null}if(!((T=(M=i.capabilities)==null?void 0:M.operations)==null?void 0:T.supportsQuery)){const A="The specified layer cannot be queried. The following fields will not be available.",R={layer:i,graphic:r,requiredFields:s,returnGeometry:y};return Pj.warn(A,R),null}const _=i.createQuery();return _.objectIds=l,_.outFields=(s==null?void 0:s.length)?s:[i.objectIdField],_.returnGeometry=!!y,_.returnZ=!!y,_.returnM=!!y,_.outSpatialReference=d,(await i.queryFeatures(_,t)).features[0]}async function P0e(e){var r;if(!((r=e.expressionInfos)==null?void 0:r.length))return!1;const t=await el(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function O0e({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const l=e.attributes[i.objectIdField];if(l==null)return;const y=[l],d=await t.getRequiredFields(i.fieldsIndex),v=Yse(d,e),_=v?[]:d,M=t.returnGeometry||await P0e(t);if(v&&!M)return;const T=await A0e({layer:i,graphic:e,outFields:_,objectIds:y,returnGeometry:M,spatialReference:r},s);T&&(T.geometry&&(e.geometry=T.geometry),T.attributes&&(e.attributes=te(te({},e.attributes),T.attributes)))}function bu(e=""){return!!e&&e.includes(kj)}function k0e(e){return e?`${kj}${e.layerId}/${e.fieldName}`:""}function Gj({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:l}){e&&t&&i&&Object.keys(t.attributes).forEach(y=>{const d=k0e({layerId:i.relation.id.toString(),fieldName:y}),v=t.attributes[y];e[d]=zj({fieldName:d,fieldInfos:r,fieldInfoMap:s,layer:l,value:v,graphic:t})})}function R0e({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(l=>Gj({attributes:e,graphic:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(l=>Gj({attributes:e,graphic:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})))}const qj=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},Uj=({layer:e,method:t,query:i,definitionExpression:r})=>{var y,d;if(!((d=(y=e.capabilities)==null?void 0:y.query)==null?void 0:d.supportsCacheHint)||t==="attachments")return;const s=q(i.where)&&i.where,l=q(i.geometry)&&i.geometry;qj(r)||qj(s)||(l==null?void 0:l.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},F0e=({query:e,layer:t,method:i})=>{Uj({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},L0e=({queryPayload:e,layer:t,method:i})=>{Uj({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})};function N0e(e,t,i){return e&&t&&i?Bj(e.allLayers,t,i)||Bj(e.allTables,t,i):null}function Bj(e,t,i){return e.find(r=>r!==t&&r.type==="feature"&&r.url===t.url&&r.layerId===i.relatedTableId)}const Hj={editing:!1,operations:{add:!0,update:!0,delete:!0}},Wj=gt.ofType(Aj);let Rs=class extends ot{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=te({},Hj),this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Wj,this.fileInfos=new gt,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(Ve(()=>this.graphic,()=>this._graphicChanged(),fi))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return te(te({},Hj),e)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new fe("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getObjectId(),r=new T3({objectIds:[i],returnMetadata:!0}),s=[],l=e.queryAttachments(r).then(d=>d[i]||s).catch(()=>s);this._getAttachmentsPromise=l,this.notifyChange("state");const y=await l;return t.removeAll(),y.length&&t.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(e,t=this.graphic){const{_attachmentLayer:i,attachmentInfos:r,abilities:s}=this;if(!t)throw new fe("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new fe("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!s.operations.add)throw new fe("invalid-abilities","addAttachment(): add abilities are required.");if(!i||typeof i.addAttachment!="function")throw new fe("invalid-layer","addAttachment(): A valid layer is required.");const l=i.addAttachment(t,e).then(d=>this._queryAttachment(d.objectId,t)),y=await l;return r.add(y),y}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new fe("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.delete)throw new fe("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new fe("invalid-layer","deleteAttachment(): A valid layer is required.");const l=t.deleteAttachments(r,[e.id]).then(()=>e),y=await l;return i.remove(y),y}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:l}=this;if(!e)throw new fe("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new fe("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!l.operations.update)throw new fe("invalid-abilities","updateAttachment(): Update abilities are required.");const y=r.findIndex(_=>_===t);if(!i||typeof i.updateAttachment!="function")throw new fe("invalid-layer","updateAttachment(): A valid layer is required.");const d=i.updateAttachment(s,t.id,e).then(_=>this._queryAttachment(_.objectId)),v=await d;return r.splice(y,1,v),v}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const i={file:e,form:t};return this.fileInfos.add(i),i}updateFile(e,t,i=this.activeFileInfo){if(!e||!t||!i)return null;const r=this.fileInfos.findIndex(s=>i===s);return r>-1&&this.fileInfos.splice(r,1,{file:e,form:t}),this.fileInfos.items[r]}deleteFile(e){var i;const t=this.fileInfos.find(r=>r.file===e);return(i=this.fileInfos.remove(t))!=null?i:null}async _queryAttachment(e,t){if(!e)throw new fe("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:i}=this,r=this._getObjectId(t),s=new T3({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return i.queryAttachments(s).then(l=>l[r][0])}_getObjectId(e=this.graphic){var t;return(t=e==null?void 0:e.getObjectId())!=null?t:null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=Rj(e);this._attachmentLayer=t?t.type==="scene"&&q(t.associatedLayer)?t.associatedLayer:t:null}};m([x()],Rs.prototype,"abilities",void 0),m([ri("abilities")],Rs.prototype,"castAbilities",null),m([x()],Rs.prototype,"activeAttachmentInfo",void 0),m([x()],Rs.prototype,"activeFileInfo",void 0),m([x({readOnly:!0,type:Wj})],Rs.prototype,"attachmentInfos",void 0),m([x()],Rs.prototype,"fileInfos",void 0),m([x({type:jr})],Rs.prototype,"graphic",void 0),m([x()],Rs.prototype,"mode",void 0),m([x({readOnly:!0})],Rs.prototype,"state",null),m([x()],Rs.prototype,"filesEnabled",void 0),m([x({readOnly:!0})],Rs.prototype,"supportsResizeAttachments",null),Rs=m([Y("esri.widgets.Attachments.AttachmentsViewModel")],Rs);const e$=Rs;function Jj(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function j0e(e){const t=mi("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Gn(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var D0e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},Zj=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?Zj(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=D0e(s)),t.push(s))}},V0e=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return Zj(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function ge(e,t,...i){return typeof e!="function"||qM(e)?V0e(e,t,...i):e(t,...i)}const Kj={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},tt={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},t$=window.CSS;let qn=class extends zn{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new e$,this.visibleElements=te({},Kj),this._supportsImageOrientation=t$&&t$.supports&&t$.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.addHandles([hs(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),hs(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),fi)])}loadDependencies(){return Promise.all([import("./calcite-icon.c89564fd.js")])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return te(te({},Kj),e)}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new fe("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new fe("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new fe("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){const t=this.viewModel.deleteFile(e||this.viewModel.activeFileInfo.file);return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return ge("div",{class:this.classes(tt.base,tt.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?ge("div",{key:"error-message",class:tt.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:i}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(i||e):this.renderAttachmentContainer()}renderLoading(){return ge("div",{class:tt.loaderContainer,key:"loader"},ge("div",{class:tt.loader}))}renderProgressBar(){return this.visibleElements.progressBar?ge("div",{class:tt.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?ge("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(tt.esriButton,tt.esriButtonTertiary,tt.esriButtonSmall,tt.esriButtonHalf,e&&tt.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?ge("button",{type:"submit",disabled:i,class:this.classes(tt.esriButton,tt.esriButtonSecondary,tt.esriButtonSmall,tt.esriButtonHalf,{[tt.buttonDisabled]:i})},this.messages.add):null,l=t?ge("span",{key:"file-name",class:tt.fileName},t.name):null,y=ge("form",{bind:this,afterCreate:g3,afterRemoved:xN,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},ge("fieldset",{class:tt.fileFieldset},l,ge("label",{class:this.classes(tt.fileLabel,tt.esriButton,tt.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,ge("input",{class:tt.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return ge("div",{key:"add-form-container",class:tt.formNode},y)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:s}=this,{abilities:l}=i,y=s||!r;let d,v,_,M;r?(d=r.type,v=r.name,_=r.size):"file"in e?(d=e.file.type,v=e.file.name,_=e.file.size):(d=e.contentType,v=e.name,_=e.size,M=e.url);const T=l.editing&&l.operations.delete&&t.deleteButton?ge("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:Q=>this._submitDeleteAttachment(Q,e),class:this.classes(tt.esriButton,tt.esriButtonSmall,tt.esriButtonTertiary,tt.deleteButton,{[tt.buttonDisabled]:s})},this.messages.delete):void 0,A=l.editing&&l.operations.update&&t.updateButton?ge("button",{disabled:y,key:"update-button",type:"submit",class:this.classes(tt.esriButton,tt.esriButtonSmall,tt.esriButtonThird,{[tt.buttonDisabled]:y})},this.messages.update):void 0,R=this.visibleElements.cancelUpdateButton?ge("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(tt.esriButton,tt.esriButtonSmall,tt.esriButtonTertiary,tt.esriButtonThird,{[tt.buttonDisabled]:s})},this.messages.cancel):void 0,F=l.editing&&l.operations.update?ge("fieldset",{key:"file",class:tt.fileFieldset},ge("span",{key:"file-name",class:tt.fileName},v),ge("label",{class:this.classes(tt.fileLabel,tt.esriButton,tt.esriButtonSecondary)},this.messages.changeFile,ge("input",{class:tt.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,V=ge("fieldset",{key:"size",class:tt.metadataFieldset},ge("label",null,i0e(this.messagesUnits,_))),z=ge("fieldset",{key:"content-type",class:tt.metadataFieldset},ge("label",null,d)),W=q(M)?ge("a",{class:tt.itemLink,href:M,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),ge("div",{class:tt.itemLinkOverlay},ge("span",{class:tt.itemLinkOverlayIcon},ge("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),Z=ge("form",{bind:this,afterCreate:g3,afterRemoved:xN,"data-node-ref":"_updateAttachmentForm",onsubmit:Q=>this._submitUpdateAttachment(Q,e)},ge("div",{class:tt.metadata},V,z),F,ge("div",{class:tt.actions},T,R,A));return ge("div",{key:"edit-form-container",class:tt.formNode},W,Z)}renderImageMask(e,t){return"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t)}renderGenericImageMask(e,t){const{supportsResizeAttachments:i}=this.viewModel,r=j0e(t),s={[tt.itemImageResizable]:i};return ge("div",{class:this.classes(tt.itemMaskIcon,tt.itemMask)},ge("img",{title:e,alt:e,src:r,class:this.classes(s,tt.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:s,url:l}=e;if(!i||!Jj(r))return this.renderGenericImageMask(s,r);const y=this._getCSSTransform(e),d=y?{transform:y,"image-orientation":"none"}:{},v=`${l}${l.includes("?")?"&":"?"}w=${t}`,_={[tt.itemImageResizable]:i};return ge("div",{class:this.classes(tt.itemMask)},ge("img",{styles:d,alt:s,title:s,src:v,class:this.classes(_,tt.itemImage)}))}renderFile(e){const{file:t}=e;return ge("li",{class:tt.item,key:t},ge("button",{key:"details-button",bind:this,class:tt.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),ge("label",{class:tt.itemLabel},ge("span",{class:tt.itemFilename},t.name||this.messages.noTitle),ge("span",{"aria-hidden":"true",class:this.classes(tt.itemChevronIcon,Sl(this.container)?tt.iconLeft:tt.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i,effectiveDisplayType:r}=this,{abilities:s,supportsResizeAttachments:l}=i,{contentType:y,name:d,url:v}=e,_=this.renderImageMask(e,t==="list"?48:400),M=s.editing?ge("span",{"aria-hidden":"true",class:this.classes(tt.itemChevronIcon,Sl(this.container)?tt.iconLeft:tt.iconRight)}):null,T=[_,r==="preview"&&l&&Jj(y)?null:ge("label",{class:tt.itemLabel},ge("span",{class:tt.itemFilename},d||this.messages.noTitle),M)],A=s.editing?ge("button",{key:"details-button",bind:this,class:tt.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},T):ge("a",{key:"details-link",class:tt.itemButton,href:v,target:"_blank"},T);return ge("li",{class:tt.item,key:e},A)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:s,fileInfos:l}=t,y=!!(r==null?void 0:r.length),d=!!(l==null?void 0:l.length),v={[tt.containerList]:e!=="preview",[tt.containerPreview]:e==="preview"},_=s.editing&&s.operations.add&&i.addButton?ge("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(tt.esriButton,tt.esriButtonTertiary,tt.addAttachmentButton),type:"button"},ge("span",{"aria-hidden":"true",class:this.classes(tt.itemAddIcon,tt.iconPlus)}),this.messages.add):void 0,M=y?ge("ul",{key:"attachments-list",class:tt.items},r.toArray().map(R=>this.renderAttachmentInfo({attachmentInfo:R,displayType:e}))):void 0,T=d?ge("ul",{key:"file-list",class:tt.items},l.toArray().map(R=>this.renderFile(R))):void 0,A=d||y?void 0:ge("div",{class:tt.empty},this.messages.noAttachments);return ge("div",{key:"attachments-container",class:this.classes(tt.container,v)},M,T,A,_)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),"file"in t?this.deleteFile(t.file):this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};m([x()],qn.prototype,"abilities",null),m([x()],qn.prototype,"displayType",void 0),m([x({readOnly:!0})],qn.prototype,"effectiveDisplayType",null),m([x()],qn.prototype,"graphic",null),m([x()],qn.prototype,"label",null),m([x(),Gn("esri/widgets/Attachments/t9n/Attachments")],qn.prototype,"messages",void 0),m([x(),Gn("esri/core/t9n/Units")],qn.prototype,"messagesUnits",void 0),m([x({readOnly:!0})],qn.prototype,"selectedFile",void 0),m([x({readOnly:!0})],qn.prototype,"submitting",void 0),m([x({readOnly:!0})],qn.prototype,"error",void 0),m([x({type:e$})],qn.prototype,"viewModel",void 0),m([x()],qn.prototype,"visibleElements",void 0),m([ri("visibleElements")],qn.prototype,"castVisibleElements",null),qn=m([Y("esri.widgets.Attachments")],qn);const z0e=qn;let vm=class extends e${constructor(e){super(e),this.description=null,this.title=null}};m([x()],vm.prototype,"description",void 0),m([x()],vm.prototype,"title",void 0),vm=m([Y("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],vm);const i$=vm,G0e={heading:"esri-widget__heading"};function r$(e,t){const i=q0e(e.level),r=`h${i}`;return delete e.level,ge(r,De(te({},e),{class:_N(G0e.heading,e.class),role:"heading","aria-level":String(i)}),t)}function q0e(e){return Tn(Math.ceil(e),1,6)}const n$={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let N0=class extends zn{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return ge("div",{class:n$.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?ge(r$,{level:this.headingLevel,class:n$.title},e):null}renderDescription(){const{description:e}=this;return e?ge("div",{key:"description",class:n$.description},e):null}};m([x()],N0.prototype,"description",void 0),m([x()],N0.prototype,"headingLevel",void 0),m([x()],N0.prototype,"title",void 0),N0=m([Y("esri.widgets.Feature.support.FeatureElementInfo")],N0);const A3=N0,U0e={base:"esri-feature-attachments"};let Ml=class extends zn{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new z0e,this.headingLevel=2,this.viewModel=new i$}initialize(){this._featureElementInfo=new A3,this.addHandles([Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),fi),Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,fi)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return ge("div",{class:U0e.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};m([x({readOnly:!0})],Ml.prototype,"attachmentsWidget",void 0),m([x()],Ml.prototype,"description",null),m([x()],Ml.prototype,"displayType",null),m([x()],Ml.prototype,"graphic",null),m([x()],Ml.prototype,"headingLevel",void 0),m([x()],Ml.prototype,"title",null),m([x({type:i$})],Ml.prototype,"viewModel",void 0),Ml=m([Y("esri.widgets.Feature.FeatureAttachments")],Ml);const B0e=Ml,ba=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new Jr}get updatingHandles(){return this._get("updatingHandles")||new E0}};return m([x({readOnly:!0})],t.prototype,"handles",null),m([x({readOnly:!0})],t.prototype,"updatingHandles",null),t=m([Y("esri.core.HandleOwner")],t),t};let ld=class extends ba(ot){};ld=m([Y("esri.core.HandleOwner")],ld);let fh=class extends ba(ot){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Ve(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},fi))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(C3(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=C3(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};m([x({readOnly:!0})],fh.prototype,"created",void 0),m([x()],fh.prototype,"creator",void 0),m([x()],fh.prototype,"destroyer",void 0),m([x({type:jr})],fh.prototype,"graphic",void 0),m([x({readOnly:!0})],fh.prototype,"state",null),fh=m([Y("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],fh);const P3=fh;function Vo(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:W0e(e[t])}}}function H0e(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function W0e(e){return function(t,...i){H0e(t)?Mde(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function J0e(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:Z0e(e);i.push(...r)}}function Z0e(e){return e.split(",").map(t=>t.trim())}const Yj="calcite-theme-";function K0e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function O3(){return K0e().startsWith("dark")}function Y0e(){return`${Yj}${O3()?"dark":"light"}`}function X0e(e){Q0e(e),e.classList.add(Y0e())}function Q0e(e){Array.from(e.classList).forEach(t=>{t.startsWith(Yj)&&e.classList.remove(t)})}function Xj(e){return e&&typeof e.render=="function"}function e1e(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const s$={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let j0=class extends zn{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{Fj(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}get creator(){return this.viewModel.creator}set creator(e){this.viewModel.creator=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}renderLoading(){return ge("div",{class:s$.loaderContainer,key:"loader"},ge("div",{class:s$.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?ge("div",{key:e,bind:e,afterCreate:this._attachToNode}):Xj(e)?ge("div",{key:e},!e.destroyed&&e.render()):ge("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return ge("div",{class:s$.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};m([x()],j0.prototype,"creator",null),m([x()],j0.prototype,"graphic",null),m([x({type:P3})],j0.prototype,"viewModel",void 0),j0=m([Y("esri.widgets.Feature.FeatureContent")],j0);const k3=j0;let wu=class extends ot{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=Lj(s,e),i.push(s)}),i}};m([x()],wu.prototype,"attributes",void 0),m([x({type:[Ck]})],wu.prototype,"expressionInfos",void 0),m([x()],wu.prototype,"description",void 0),m([x({type:[pg]})],wu.prototype,"fieldInfos",void 0),m([x({readOnly:!0})],wu.prototype,"formattedFieldInfos",null),m([x()],wu.prototype,"title",void 0),wu=m([Y("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],wu);const R3=wu,t1e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function i1e(e){let t=null;return t1e.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function r1e(e,t){if(typeof t!="string"||!t)return t;const i=i1e(t);if(!i)return t;const r=t.match(i.pattern),s=r&&r[2],l=Ja(Ja(i.label,{messages:e,hierPart:s}),{appName:i.appName}),y=i.target?` target="${i.target}"`:"",d=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${y} href="$1"${d}>${l}</a>`)}const bm={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let wa=class extends zn{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new R3,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new A3,this.addHandles(Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),fi))}destroy(){this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,s=e.label||r,l=i?i[r]==null?"":i[r]:"",y=!(!e.format||!e.format.dateFormat),d=typeof l=="number"&&!y?this._forceLTR(l):r1e(this.messagesURIUtils,l),v={[bm.fieldDataDate]:y};return ge("tr",{key:`fields-element-info-row-${r}-${t}`},ge("th",{key:`fields-element-info-row-header-${r}-${t}`,class:bm.fieldHeader,innerHTML:s}),ge("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(bm.fieldData,v),innerHTML:d}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return(e==null?void 0:e.length)?ge("table",{class:bm.esriTable,summary:this.messages.fieldsSummary},ge("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return ge("div",{class:bm.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};m([x()],wa.prototype,"attributes",null),m([x()],wa.prototype,"description",null),m([x()],wa.prototype,"expressionInfos",null),m([x()],wa.prototype,"fieldInfos",null),m([x()],wa.prototype,"title",null),m([x({type:R3,nonNullable:!0})],wa.prototype,"viewModel",void 0),m([x(),Gn("esri/widgets/Feature/t9n/Feature")],wa.prototype,"messages",void 0),m([x(),Gn("esri/widgets/support/t9n/uriUtils")],wa.prototype,"messagesURIUtils",void 0),wa=m([Y("esri.widgets.Feature.FeatureFields")],wa);const Qj=wa,n1e={maximumFractionDigits:20};function s1e(e){return Po(e,n1e)}var o$;let ud=o$=class extends Ie{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e!=null?e:0}clone(){return new o$({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};m([x({type:mt,json:{type:[hi],write:!0}})],ud.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],ud.prototype,"label",void 0),m([x({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],ud.prototype,"value",void 0),m([Ke("value")],ud.prototype,"writeValue",null),ud=o$=m([Y("esri.renderers.visualVariables.support.ColorStop")],ud);const o1e=ud;function F3(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a1e(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l1e(e,t,i,r,s,l,y,d,v,_,M,T,A,R,F,V){const z=new Float32Array(16);return z[0]=e,z[1]=t,z[2]=i,z[3]=r,z[4]=s,z[5]=l,z[6]=y,z[7]=d,z[8]=v,z[9]=_,z[10]=M,z[11]=T,z[12]=A,z[13]=R,z[14]=F,z[15]=V,z}function u1e(e,t){return new Float32Array(e,t,16)}const c1e=F3();Object.freeze(Object.defineProperty({__proto__:null,create:F3,clone:a1e,fromValues:l1e,createView:u1e,IDENTITY:c1e},Symbol.toStringTag,{value:"Module"}));const h1e=(e,t)=>{const i=eh(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return gu(i,i)},p1e=(e,t)=>{const i=eh(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return gu(i,i)},d1e=(e,t)=>{const i=1-t,r=eh(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return gu(r,r)},f1e=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=eh(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return gu(s,s)},y1e=(e,t)=>{const i=1-2*t,r=eh(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return gu(r,r)},g1e=(e,t)=>{const i=eh(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return gu(i,i)},m1e=(e,t)=>{const i=1-t,r=eh(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return gu(r,r)};class L3{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Fs(t.strength,i.strength,r),this.radius=Fs(t.radius,i.radius,r),this.threshold=Fs(t.threshold,i.threshold,r)}clone(){return new L3(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:_m(this.radius),strength:this.strength,threshold:this.threshold}}}class N3{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Fs(t.radius,i.radius,r))}clone(){return new N3(this.radius)}toJSON(){return{type:"blur",radius:_m(this.radius)}}}class wm{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Fs(t.amount,i.amount,r),this._updateMatrix()}clone(){return new wm(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||F3();switch(this.type){case"brightness":this._colorMatrix=h1e(t,this.amount);break;case"contrast":this._colorMatrix=p1e(t,this.amount);break;case"grayscale":this._colorMatrix=d1e(t,this.amount);break;case"invert":this._colorMatrix=y1e(t,this.amount);break;case"saturate":this._colorMatrix=g1e(t,this.amount);break;case"sepia":this._colorMatrix=m1e(t,this.amount)}}}class j3{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Fs(t.offsetX,i.offsetX,r),this.offsetY=Fs(t.offsetY,i.offsetY,r),this.blurRadius=Fs(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Fs(t.color[0],i.color[0],r)),this.color[1]=Math.round(Fs(t.color[1],i.color[1],r)),this.color[2]=Math.round(Fs(t.color[2],i.color[2],r)),this.color[3]=Fs(t.color[3],i.color[3],r)}clone(){return new j3(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:_m(this.offsetX),yoffset:_m(this.offsetY),blurRadius:_m(this.blurRadius),color:t}}}class D3{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Fs(t.angle,i.angle,r),this._updateMatrix()}clone(){return new D3(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||F3();this._colorMatrix=f1e(t,this.angle)}}class V3{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Fs(t.amount,i.amount,r)}clone(){return new V3(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Fs(e,t,i){return e+(t-e)*i}function _m(e){return Math.round(1e3*ko(e))/1e3}function v1e(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new wm(e.type,0);case"saturate":case"brightness":case"contrast":return new wm(e.type,1);case"opacity":return new V3(1);case"hue-rotate":return new D3(0);case"blur":return new N3(0);case"drop-shadow":return new j3(0,0,0,[...uS("transparent")]);case"bloom":return new L3(0,0,1)}}var MIe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function $Ie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function EIe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function b1e(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function w1e(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(v1e(i[s]))}function _1e(e){const t=e[0];return!!t&&"type"in t}var eD,tD,iD={exports:{}};function rD(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=nD(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new fe("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:nD(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!b1e(t[i].effects,t[i+1].effects))throw new fe("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});w1e(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function nD(e){let t;if(!e)return[];try{t=iD.exports.parse(e)}catch(i){throw new fe("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>x1e(i))}function x1e(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return S1e(e);case"opacity":return M1e(e);case"hue-rotate":return $1e(e);case"blur":return E1e(e);case"drop-shadow":return I1e(e);case"bloom":return T1e(e)}}catch(t){throw t.details.filter=e,t}throw new fe("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function S1e(e){let t=1;return D0(e.parameters,1),e.parameters.length===1&&(t=_a(e.parameters[0])),new wm(e.name,t)}function M1e(e){let t=1;return D0(e.parameters,1),e.parameters.length===1&&(t=_a(e.parameters[0])),new V3(t)}function $1e(e){let t=0;return D0(e.parameters,1),e.parameters.length===1&&(t=R1e(e.parameters[0])),new D3(t)}function E1e(e){let t=0;return D0(e.parameters,1),e.parameters.length===1&&(t=u$(e.parameters[0]),xm(t,e.parameters[0])),new N3(t)}function I1e(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new fe("effect:type-error","Accepts only one color",{});i=F1e(r)}else{const s=u$(r);if(Object.isFrozen(t))throw new fe("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&xm(s,r)}if(t.length<2||t.length>3)throw new fe("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new j3(t[0],t[1],t[2]||0,i||sD("black"))}function T1e(e){let t=1,i=0,r=0;return D0(e.parameters,3),e.parameters[0]&&(t=_a(e.parameters[0])),e.parameters[1]&&(i=u$(e.parameters[1]),xm(i,e.parameters[1])),e.parameters[2]&&(r=_a(e.parameters[2])),new L3(t,i,r)}function D0(e,t){if(e.length>t)throw new fe("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function z3(e){if(e.type==="color")return"<color>";if(e.unit){if(l$[e.unit])return"<length>";if(a$[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function xm(e,t){if(e<0)throw new fe("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function C1e(e){if(e.type!=="quantity"||e.unit!==null)throw new fe("effect:type-error",`Expected <double>, Actual: ${z3(e)}`,{term:e})}function A1e(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new fe("effect:type-error",`Expected <double> or <percentage>, Actual: ${z3(e)}`,{term:e})}tD=function(){function e(s,l){function y(){this.constructor=s}y.prototype=l.prototype,s.prototype=new y}function t(s,l,y,d){var v=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(v,t.prototype),v.expected=l,v.found=y,v.location=d,v.name="SyntaxError",v}function i(s,l,y){return y=y||" ",s.length>l?s:(l-=s.length,s+(y+=y.repeat(l)).slice(0,l))}function r(s,l){var y,d={},v=(l=l!==void 0?l:{}).grammarSource,_={start:nr},M=nr,T="none",A=")",R=",",F="(",V="%",z="px",W="cm",Z="mm",Q="in",ee="pt",re="pc",ie="deg",he="rad",be="grad",we="turn",xe="#",$e=".",je="e",it=/^[ \t\n\r]/,Ye=/^[a-z\-]/,Lt=/^[0-9a-fA-F]/,Dt=/^[+\-]/,ft=/^[0-9]/,Ze=qe("none"),Ct=Oe("none",!1),Oi=Oe(")",!1),Ui=Oe(",",!1),_i=qe("whitespace"),pr=Ce([" ","	",`
`,"\r"],!1,!1),Rr=qe("function"),Ne=Oe("(",!1),ct=qe("identifier"),We=Ce([["a","z"],"-"],!1,!1),yt=qe("percentage"),ni=Oe("%",!1),si=qe("length"),Rt=Oe("px",!1),Ft=Oe("cm",!1),ue=Oe("mm",!1),ye=Oe("in",!1),Ee=Oe("pt",!1),Ge=Oe("pc",!1),ke=qe("angle"),B=Oe("deg",!1),Je=Oe("rad",!1),He=Oe("grad",!1),Re=Oe("turn",!1),Le=qe("number"),ht=qe("color"),ut=Oe("#",!1),pt=Ce([["0","9"],["a","f"],["A","F"]],!1,!1),St=Ce(["+","-"],!1,!1),Nt=Ce([["0","9"]],!1,!1),$i=Oe(".",!1),Xt=Oe("e",!1),Fe=function(){return[]},xr=function(le,Pe){return{type:"function",name:le,parameters:Pe||[]}},h=function(le,Pe){return Pe.length>0?m5(le,Pe,3):[le]},O=function(le){return{type:"quantity",value:le.value,unit:le.unit}},w=function(le){return{type:"color",colorType:le.type,value:le.value}},c=function(le){return le},a=function(){return _e()},n=function(le){return{value:le,unit:"%"}},o=function(le){return{value:le,unit:"px"}},u=function(le){return{value:le,unit:"cm"}},p=function(le){return{value:le,unit:"mm"}},f=function(le){return{value:le,unit:"in"}},g=function(le){return{value:le,unit:"pt"}},b=function(le){return{value:le,unit:"pc"}},S=function(le){return{value:le,unit:"deg"}},$=function(le){return{value:le,unit:"rad"}},E=function(le){return{value:le,unit:"grad"}},C=function(le){return{value:le,unit:"turn"}},k=function(le){return{value:le,unit:null}},L=function(){return{type:"hex",value:_e()}},N=function(le){return{type:"function",value:le}},U=function(){return{type:"named",value:_e()}},H=function(){return parseFloat(_e())},j=0,K=0,se=[{line:1,column:1}],ne=0,pe=[],ce=0;if("startRule"in l){if(!(l.startRule in _))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');M=_[l.startRule]}function _e(){return s.substring(K,j)}function Oe(le,Pe){return{type:"literal",text:le,ignoreCase:Pe}}function Ce(le,Pe,Ue){return{type:"class",parts:le,inverted:Pe,ignoreCase:Ue}}function st(){return{type:"end"}}function qe(le){return{type:"other",description:le}}function Et(le){var Pe,Ue=se[le];if(Ue)return Ue;for(Pe=le-1;!se[Pe];)Pe--;for(Ue={line:(Ue=se[Pe]).line,column:Ue.column};Pe<le;)s.charCodeAt(Pe)===10?(Ue.line++,Ue.column=1):Ue.column++,Pe++;return se[le]=Ue,Ue}function xt(le,Pe){var Ue=Et(le),qt=Et(Pe);return{source:v,start:{offset:le,line:Ue.line,column:Ue.column},end:{offset:Pe,line:qt.line,column:qt.column}}}function et(le){j<ne||(j>ne&&(ne=j,pe=[]),pe.push(le))}function xi(le,Pe,Ue){return new t(t.buildMessage(le,Pe),le,Pe,Ue)}function nr(){var le;return(le=Ei())===d&&(le=ei()),le}function Ei(){var le,Pe;return ce++,le=j,jt(),s.substr(j,4)===T?(Pe=T,j+=4):(Pe=d,ce===0&&et(Ct)),Pe!==d?(jt(),K=le,le=Fe()):(j=le,le=d),ce--,le===d&&ce===0&&et(Ze),le}function ei(){var le,Pe;if(le=[],(Pe=ti())!==d)for(;Pe!==d;)le.push(Pe),Pe=ti();else le=d;return le}function ti(){var le,Pe,Ue,qt;return le=j,jt(),(Pe=dr())!==d?(jt(),(Ue=zt())===d&&(Ue=null),jt(),s.charCodeAt(j)===41?(qt=A,j++):(qt=d,ce===0&&et(Oi)),qt!==d?(jt(),K=le,le=xr(Pe,Ue)):(j=le,le=d)):(j=le,le=d),le}function zt(){var le,Pe,Ue,qt,Hr,Yi,bs,df;if(le=j,(Pe=ki())!==d){for(Ue=[],qt=j,Hr=jt(),s.charCodeAt(j)===44?(Yi=R,j++):(Yi=d,ce===0&&et(Ui)),Yi===d&&(Yi=null),bs=jt(),(df=ki())!==d?qt=Hr=[Hr,Yi,bs,df]:(j=qt,qt=d);qt!==d;)Ue.push(qt),qt=j,Hr=jt(),s.charCodeAt(j)===44?(Yi=R,j++):(Yi=d,ce===0&&et(Ui)),Yi===d&&(Yi=null),bs=jt(),(df=ki())!==d?qt=Hr=[Hr,Yi,bs,df]:(j=qt,qt=d);K=le,le=h(Pe,Ue)}else j=le,le=d;return le}function ki(){var le,Pe;return le=j,(Pe=Br())===d&&(Pe=ui())===d&&(Pe=pc())===d&&(Pe=dc()),Pe!==d&&(K=le,Pe=O(Pe)),(le=Pe)===d&&(le=j,(Pe=fc())!==d&&(K=le,Pe=w(Pe)),le=Pe),le}function jt(){var le,Pe;for(ce++,le=[],it.test(s.charAt(j))?(Pe=s.charAt(j),j++):(Pe=d,ce===0&&et(pr));Pe!==d;)le.push(Pe),it.test(s.charAt(j))?(Pe=s.charAt(j),j++):(Pe=d,ce===0&&et(pr));return ce--,Pe=d,ce===0&&et(_i),le}function dr(){var le,Pe,Ue;return ce++,le=j,(Pe=Ut())!==d?(s.charCodeAt(j)===40?(Ue=F,j++):(Ue=d,ce===0&&et(Ne)),Ue!==d?(K=le,le=c(Pe)):(j=le,le=d)):(j=le,le=d),ce--,le===d&&(Pe=d,ce===0&&et(Rr)),le}function Ut(){var le,Pe,Ue;if(ce++,le=j,Pe=[],Ye.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,ce===0&&et(We)),Ue!==d)for(;Ue!==d;)Pe.push(Ue),Ye.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,ce===0&&et(We));else Pe=d;return Pe!==d&&(K=le,Pe=a()),ce--,(le=Pe)===d&&(Pe=d,ce===0&&et(ct)),le}function Br(){var le,Pe,Ue;return ce++,le=j,jt(),(Pe=un())!==d?(s.charCodeAt(j)===37?(Ue=V,j++):(Ue=d,ce===0&&et(ni)),Ue!==d?(K=le,le=n(Pe)):(j=le,le=d)):(j=le,le=d),ce--,le===d&&ce===0&&et(yt),le}function ui(){var le,Pe,Ue;return ce++,le=j,jt(),(Pe=un())!==d?(s.substr(j,2)===z?(Ue=z,j+=2):(Ue=d,ce===0&&et(Rt)),Ue!==d?(K=le,le=o(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,jt(),(Pe=un())!==d?(s.substr(j,2)===W?(Ue=W,j+=2):(Ue=d,ce===0&&et(Ft)),Ue!==d?(K=le,le=u(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,jt(),(Pe=un())!==d?(s.substr(j,2)===Z?(Ue=Z,j+=2):(Ue=d,ce===0&&et(ue)),Ue!==d?(K=le,le=p(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,jt(),(Pe=un())!==d?(s.substr(j,2)===Q?(Ue=Q,j+=2):(Ue=d,ce===0&&et(ye)),Ue!==d?(K=le,le=f(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,jt(),(Pe=un())!==d?(s.substr(j,2)===ee?(Ue=ee,j+=2):(Ue=d,ce===0&&et(Ee)),Ue!==d?(K=le,le=g(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,jt(),(Pe=un())!==d?(s.substr(j,2)===re?(Ue=re,j+=2):(Ue=d,ce===0&&et(Ge)),Ue!==d?(K=le,le=b(Pe)):(j=le,le=d)):(j=le,le=d)))))),ce--,le===d&&ce===0&&et(si),le}function pc(){var le,Pe,Ue;return ce++,le=j,(Pe=un())!==d?(s.substr(j,3)===ie?(Ue=ie,j+=3):(Ue=d,ce===0&&et(B)),Ue!==d?(K=le,le=S(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,(Pe=un())!==d?(s.substr(j,3)===he?(Ue=he,j+=3):(Ue=d,ce===0&&et(Je)),Ue!==d?(K=le,le=$(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,(Pe=un())!==d?(s.substr(j,4)===be?(Ue=be,j+=4):(Ue=d,ce===0&&et(He)),Ue!==d?(K=le,le=E(Pe)):(j=le,le=d)):(j=le,le=d),le===d&&(le=j,(Pe=un())!==d?(s.substr(j,4)===we?(Ue=we,j+=4):(Ue=d,ce===0&&et(Re)),Ue!==d?(K=le,le=C(Pe)):(j=le,le=d)):(j=le,le=d)))),ce--,le===d&&(Pe=d,ce===0&&et(ke)),le}function dc(){var le,Pe;return ce++,le=j,jt(),(Pe=un())!==d?(K=le,le=k(Pe)):(j=le,le=d),ce--,le===d&&ce===0&&et(Le),le}function fc(){var le,Pe,Ue,qt;if(ce++,le=j,s.charCodeAt(j)===35?(Pe=xe,j++):(Pe=d,ce===0&&et(ut)),Pe!==d){if(Ue=[],Lt.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,ce===0&&et(pt)),qt!==d)for(;qt!==d;)Ue.push(qt),Lt.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,ce===0&&et(pt));else Ue=d;Ue!==d?(K=le,le=L()):(j=le,le=d)}else j=le,le=d;return le===d&&(le=j,(Pe=ti())!==d&&(K=le,Pe=N(Pe)),(le=Pe)===d&&(le=j,(Pe=Ut())!==d&&(K=le,Pe=U()),le=Pe)),ce--,le===d&&(Pe=d,ce===0&&et(ht)),le}function un(){var le,Pe,Ue,qt,Hr,Yi,bs;for(le=j,Dt.test(s.charAt(j))?(s.charAt(j),j++):ce===0&&et(St),Pe=j,Ue=[],ft.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,ce===0&&et(Nt));qt!==d;)Ue.push(qt),ft.test(s.charAt(j))?(qt=s.charAt(j),j++):(qt=d,ce===0&&et(Nt));if(s.charCodeAt(j)===46?(qt=$e,j++):(qt=d,ce===0&&et($i)),qt!==d){if(Hr=[],ft.test(s.charAt(j))?(Yi=s.charAt(j),j++):(Yi=d,ce===0&&et(Nt)),Yi!==d)for(;Yi!==d;)Hr.push(Yi),ft.test(s.charAt(j))?(Yi=s.charAt(j),j++):(Yi=d,ce===0&&et(Nt));else Hr=d;Hr!==d?Pe=Ue=[Ue,qt,Hr]:(j=Pe,Pe=d)}else j=Pe,Pe=d;if(Pe===d)if(Pe=[],ft.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,ce===0&&et(Nt)),Ue!==d)for(;Ue!==d;)Pe.push(Ue),ft.test(s.charAt(j))?(Ue=s.charAt(j),j++):(Ue=d,ce===0&&et(Nt));else Pe=d;if(Pe!==d){if(Ue=j,s.charCodeAt(j)===101?(qt=je,j++):(qt=d,ce===0&&et(Xt)),qt!==d){if(Dt.test(s.charAt(j))?(Hr=s.charAt(j),j++):(Hr=d,ce===0&&et(St)),Hr===d&&(Hr=null),Yi=[],ft.test(s.charAt(j))?(bs=s.charAt(j),j++):(bs=d,ce===0&&et(Nt)),bs!==d)for(;bs!==d;)Yi.push(bs),ft.test(s.charAt(j))?(bs=s.charAt(j),j++):(bs=d,ce===0&&et(Nt));else Yi=d;Yi!==d?Ue=qt=[qt,Hr,Yi]:(j=Ue,Ue=d)}else j=Ue,Ue=d;Ue===d&&(Ue=null),K=le,le=H()}else j=le,le=d;return le}function g5(le,Pe){return le.map(function(Ue){return Ue[Pe]})}function m5(le,Pe,Ue){return[le].concat(g5(Pe,Ue))}if((y=M())!==d&&j===s.length)return y;throw y!==d&&j<s.length&&et(st()),xi(pe,ne<s.length?s.charAt(ne):null,ne<s.length?xt(ne,ne+1):xt(ne,ne))}return e(t,Error),t.prototype.format=function(s){var l="Error: "+this.message;if(this.location){var y,d=null;for(y=0;y<s.length;y++)if(s[y].source===this.location.source){d=s[y].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,_=this.location.source+":"+v.line+":"+v.column;if(d){var M=this.location.end,T=i("",v.line.toString().length," "),A=d[v.line-1],R=(v.line===M.line?M.column:A.length+1)-v.column||1;l+=`
 --> `+_+`
`+T+` |
`+v.line+" | "+A+`
`+T+" | "+i("",v.column-1," ")+i("",R,"^")}else l+=`
 at `+_}return l},t.buildMessage=function(s,l){var y={literal:function(R){return'"'+v(R.text)+'"'},class:function(R){var F=R.parts.map(function(V){return Array.isArray(V)?_(V[0])+"-"+_(V[1]):_(V)});return"["+(R.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function d(R){return R.charCodeAt(0).toString(16).toUpperCase()}function v(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function _(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function M(R){return y[R.type](R)}function T(R){var F,V,z=R.map(M);if(z.sort(),z.length>0){for(F=1,V=1;F<z.length;F++)z[F-1]!==z[F]&&(z[V]=z[F],V++);z.length=V}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function A(R){return R?'"'+v(R)+'"':"end of input"}return"Expected "+T(s)+" but "+A(l)+" found."},{SyntaxError:t,parse:r}},(eD=iD).exports&&(eD.exports=tD());const a$={deg:1,grad:.9,rad:180/Math.PI,turn:360};function P1e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&a$[e.unit]!=null))throw new fe("effect:type-error",`Expected <angle>, Actual: ${z3(e)}`,{term:e})}const l$={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function O1e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&l$[e.unit]!=null))throw new fe("effect:type-error",`Expected <length>, Actual: ${z3(e)}`,{term:e})}function _a(e){A1e(e);const t=e.value;return xm(t,e),e.unit==="%"?.01*t:t}function k1e(e){return C1e(e),xm(e.value,e),e.value}function R1e(e){return P1e(e),e.value*a$[e.unit]||0}function u$(e){return O1e(e),e.value*l$[e.unit]||0}function F1e(e){switch(e.colorType){case"hex":return moe(e.value);case"named":return sD(e.value);case"function":return j1e(e.value)}}function sD(e){if(!Rk(e))throw new fe("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return goe(e)}const L1e=/^rgba?/i,N1e=/^hsla?/i;function j1e(e){if(D0(e.parameters,4),L1e.test(e.name))return[_a(e.parameters[0]),_a(e.parameters[1]),_a(e.parameters[2]),e.parameters[3]?_a(e.parameters[3]):1];if(N1e.test(e.name))return Fk(k1e(e.parameters[0]),_a(e.parameters[1]),_a(e.parameters[2]),e.parameters[3]?_a(e.parameters[3]):1);throw new fe("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function c$(e,t,i){var r;try{return V1e(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function h$(e,t,i,r){try{const s=D1e(e);Nn(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function D1e(e){const t=rD(e);return t?_1e(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function V1e(e){if(!e||e.length===0)return null;if(z1e(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:oD(i.value)});return t}return oD(e)}function z1e(e){const t=e[0];return!!t&&"scale"in t}function oD(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[_u(i,"amount")];break;case"blur":r=[_u(i,"radius","pt")];break;case"hue-rotate":r=[_u(i,"angle","deg")];break;case"drop-shadow":r=[_u(i,"xoffset","pt"),_u(i,"yoffset","pt"),_u(i,"blurRadius","pt"),G1e(i,"color")];break;case"bloom":r=[_u(i,"strength"),_u(i,"radius","pt"),_u(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;rD(s),t.push(s)}return t.join(" ")}function _u(e,t,i){if(e[t]==null)throw new fe("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function G1e(e,t){if(e[t]==null)throw new fe("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const p$=-3;var yh;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(yh||(yh={}));class IIe{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,s=0){this._storage.put(this._namespace+t,i,r,s)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class aD{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new hp,this._users=new hp}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,s){const l=this._db.get(t);if(l&&(this._size-=l.size,this._db.delete(t),l.entry!==i&&this._notifyRemove(t,l.entry,yh.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,yh.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const y=1+Math.max(s,p$)-p$;this._db.set(t,{entry:i,size:r,lifetime:y,lives:y}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const l=this._notifyRemove(t,i,yh.SOME);if(!(q(l)&&l>0))return void this._db.delete(t);r=l}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((y,d)=>{const v=y.lifetime;r[v]=(r[v]||0)+y.size,this._users.forAll(_=>{const M=_.namespace;if(d.startsWith(M)){const T=i[M]||0;i[M]=T+y.size}})});const s={};this._users.forAll(y=>{const d=y.namespace;if(!isNaN(y.hitRate)&&y.hitRate>0){const v=i[d]||0;i[d]=v,s[d]=Math.round(100*y.hitRate)+"%"}else s[d]="0%"});const l=Object.keys(i);l.sort((y,d)=>i[d]-i[y]),l.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+s[y]);for(let y=r.length-1;y>=0;--y){const d=r[y];d&&(t["Priority "+(y+p$-1)]=Math.round(d/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,yh.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,yh.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let s;return this._removeFuncs.some(l=>{if(t.startsWith(l[0])){const y=l[1](i,r);return typeof y=="number"&&(s=y),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,yh.SOME);q(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class d${constructor(t,i){this._storage=new aD,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function q1e(e){return typeof e=="function"}function TIe(e,t,i,r){return q1e(e)?e(t,i,r):e}function CIe(e){return[e.r,e.g,e.b,e.a]}const U1e=` /-,
`;function lD(e){let t=e.length;for(;t--;)if(!U1e.includes(e.charAt(t)))return!1;return!0}function B1e(e,t){const i=[];let r=0,s=-1;do if(s=e.indexOf("[",r),s>=r){if(s>r){const l=e.substr(r,s-r);i.push([l,null,lD(l)])}if(r=s+1,s=e.indexOf("]",r),s>=r){if(s>r){const l=t[e.substr(r,s-r)];l&&i.push([null,l,!1])}r=s+1}}while(s!==-1);if(r<e.length-1){const l=e.substr(r);i.push([l,null,lD(l)])}return i}function H1e(e,t,i){let r="",s=null;for(const l of t){const[y,d,v]=l;if(y)v?s=y:(s&&(r+=s,s=null),r+=y);else{const _=e.attributes[d];_&&(s&&(r+=s,s=null),r+=_)}}return W1e(r,i)}function AIe(e,t,i){const r=B1e(t,e);return s=>H1e(s,r,i)}function W1e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function PIe(e,t,i,r,s,l,y=!0){const d=t/s,v=i/l,_=Math.ceil(d/2),M=Math.ceil(v/2);for(let T=0;T<l;T++)for(let A=0;A<s;A++){const R=4*(A+(y?l-T-1:T)*s);let F=0,V=0,z=0,W=0,Z=0,Q=0,ee=0;const re=(T+.5)*v;for(let ie=Math.floor(T*v);ie<(T+1)*v;ie++){const he=Math.abs(re-(ie+.5))/M,be=(A+.5)*d,we=he*he;for(let xe=Math.floor(A*d);xe<(A+1)*d;xe++){let $e=Math.abs(be-(xe+.5))/_;const je=Math.sqrt(we+$e*$e);je>=-1&&je<=1&&(F=2*je*je*je-3*je*je+1,F>0&&($e=4*(xe+ie*t),ee+=F*e[$e+3],z+=F,e[$e+3]<255&&(F=F*e[$e+3]/250),W+=F*e[$e],Z+=F*e[$e+1],Q+=F*e[$e+2],V+=F))}}r[R]=W/V,r[R+1]=Z/V,r[R+2]=Q/V,r[R+3]=ee/z}}function OIe(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function J1e(e){return e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices"}const kIe=(e,t=0)=>isNaN(e)||e==null?t:e,RIe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function FIe(){return import("./geometryEngineJSON.73d941f4.js")}function LIe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function NIe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function jIe(e){let t="",i="";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function DIe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function uD(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=uD(t);if(i!=null)return i}break;case"CIMTextSymbol":return uD(e.symbol);case"CIMSolidFill":return e.color}}function cD(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=cD(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return cD(e.symbol);case"CIMSolidStroke":case"CIMSolidFill":return e.color}}function hD(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=hD(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return hD(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function VIe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function zIe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function GIe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const qIe=e=>e.includes("data:image/svg+xml");function UIe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function pD(e,t,i,r){if(e)if(e.type!=="CIMTextSymbol"){if(i&&e.effects)for(const s of e.effects)Y1e(s,t);if(e.symbolLayers)for(const s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":Z1e(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r==null?void 0:r.preserveOutlineWidth)&&s.width&&(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":pD(s.lineSymbol,t,!0,De(te({},r),{preserveOutlineWidth:!1})),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}}else e.height!=null&&(e.height*=t)}function Z1e(e,t,i){if(e&&(e.markerPlacement&&K1e(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||pD(r.symbol,t,!0,i)}function K1e(e,t){switch(J1e(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function Y1e(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}new d$(1e3);new mt([128,128,128]);const dD=/\/resource\/(.*?)\.svg$/,X1e=new mt("white");function BIe(e){if(ae(e)||!("symbolLayers"in e)||ae(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function HIe(e,t){const i=is(t.resource).href;return!Me("esri-canvas-svg-support")&&e.styleOrigin&&dD.test(i)?i.replace(dD,"/resource/png/$1.png"):i}function V0(e,t){if(!e)return null;let i=null;return Bp(e)?i=Q1e(e):L2(e)&&(i=e.color?new mt(e.color):null),i?Sm(i,t):null}function Q1e(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var s;r.type==="object"&&((s=r.resource)==null?void 0:s.href)!=null||(i=r.type==="water"?Wt(r.color):q(r.material)?Wt(r.material.color):null)}),i?new mt(i):null}function Sm(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new mt(i)}function eye(e,t,i){const r=e.symbolLayers;if(!r)return;const s=l=>{var d;const y=q(l)?l:null;return Sm(t=(d=t!=null?t:y)!=null?d:i!=null?X1e:null,i)};r.forEach(l=>{var y;if(l.type!=="object"||((y=l.resource)==null?void 0:y.href)==null||t)if(l.type==="water")l.color=s(l.color);else{const d=q(l.material)?l.material.color:null,v=s(d);ae(l.material)?l.material=new eo({color:v}):l.material.color=v,i!=null&&"outline"in l&&q(l.outline)&&q(l.outline.color)&&(l.outline.color=Sm(l.outline.color,i))}})}function tye(e,t,i){(t=t!=null?t:e.color)&&(e.color=Sm(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=Sm(e.outline.color,i))}function f$(e,t,i){e&&(t||i!=null)&&(t&&(t=new mt(t)),Bp(e)?eye(e,t,i):L2(e)&&tye(e,t,i))}async function iye(e,t){const i=e.symbolLayers;i&&await Mue(i,async r=>rye(r,t))}async function rye(e,t){switch(e.type){case"extrude":sye(e,t);break;case"icon":case"line":case"text":nye(e,t);break;case"path":aye(e,t);break;case"object":await oye(e,t)}}function nye(e,t){const i=fD(t);q(i)&&(e.size=i)}function fD(e){for(const t of e)if(typeof t=="number")return t;return null}function sye(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function oye(e,t){const{resourceSize:i,symbolSize:r}=await lye(e),s=yD(t,i,r);e.width=Mm(t[0],r[0],i[0],s),e.depth=Mm(t[1],r[1],i[1],s),e.height=Mm(t[2],r[2],i[2],s)}function aye(e,t){const i=yD(t,qk,[e.width,void 0,e.height]);e.width=Mm(t[0],e.width,1,i),e.height=Mm(t[2],e.height,1,i)}function yD(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":{const l=i[r];return l!=null?l/t[r]:1}case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function lye(e){const t=await import("./symbolLayerUtils.2e9f5922.js"),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:s,depth:l}=e,y=[r,l,s];let d=1;for(let v=0;v<3;v++){const _=y[v];if(_!=null){d=_/i[v];break}}for(let v=0;v<3;v++)y[v]==null&&(y[v]=i[v]*d);return{resourceSize:i,symbolSize:y}}function Mm(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function uye(e,t){const i=fD(t);if(!ae(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function cye(e,t){if(e&&t)return Bp(e)?iye(e,t):void(L2(e)&&uye(e,t))}function hye(e,t,i){if(e&&t!=null)if(Bp(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=t;break;case"roll":s.roll=t;break;default:s.heading=t}})}else L2(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function WIe(e){return q(e)&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}const pye="<",dye=">",fye=D4("short-date");function yye(e,t,i,r){let s="";t===0?s=`${pye} `:t===i&&(s=`${dye} `);let l=null;return l=r?lu(e,fye):s1e(e),s+l}const gye=new mt([64,64,64]);function mye(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,l)=>i.includes(l)?yye(s,l,r,t):null)}async function vye(e,t,i){let r=!1,s=[],l=[];if(e.stops){const _=e.stops;s=_.map(M=>M.value),r=_.some(M=>!!M.label),r&&(l=_.map(M=>M.label))}const y=s[0],d=s[s.length-1];if(y==null&&d==null)return null;const v=r?null:mye(s,i);return(await Promise.all(s.map(async(_,M)=>({value:_,color:e.type==="opacity"?await bye(_,e,t):(await Promise.resolve().then(function(){return $7})).getColor(e,_),label:r?l[M]:v[M]})))).reverse()}async function bye(e,t,i=gye){const r=new mt(i),s=(await Promise.resolve().then(function(){return $7})).getOpacity(t,e);return s!=null&&(r.a=s),r}var y$;let $m=y$=class extends Ie{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new y$({color:this.color,ratio:this.ratio})}};m([x({type:mt,json:{type:[hi],default:null,write:!0}})],$m.prototype,"color",void 0),m([x({type:Number,json:{write:!0}})],$m.prototype,"ratio",void 0),$m=y$=m([Y("esri.renderers.support.HeatmapColorStop")],$m);const Em=$m;function wye(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Em({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var y,d;let l="";return s===0?l=((y=e.legendOptions)==null?void 0:y.minLabel)||"low":s===i&&(l=((d=e.legendOptions)==null?void 0:d.maxLabel)||"high"),{color:r.color,label:l,ratio:r.ratio}}).reverse()}Ae.getLogger("esri.renderers.support.utils");async function oo(e,t,i){bP(e,t,()=>[]).push(...i)}async function _ye(e){var i,r,s,l;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const y=e.visualVariables.filter(d=>d.type==="color");for(const d of y){const v=(await vye(d)).map(_=>_.color);await oo(t,d.field||d.valueExpression,v)}}if(e.type==="heatmap"){const y=wye(e).map(d=>d.color);await oo(t,e.field||e.valueExpression,y)}else if(e.type==="pie-chart"){for(const y of e.attributes)await oo(t,y.field||y.valueExpression,[y.color]);await oo(t,"default",[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,V0(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const y of e.attributes)await oo(t,y.field||y.valueExpression,[y.color]);await oo(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const y of(s=e.uniqueValueInfos)!=null?s:[])await oo(t,y.value.toString(),[V0(y.symbol,null)]);else{const y=((l=e.uniqueValueInfos)!=null?l:[]).map(T=>V0(T.symbol,null)),{field:d,field2:v,field3:_,valueExpression:M}=e;(d||M)&&await oo(t,d||M,y),v&&await oo(t,v,y),_&&await oo(t,_,y)}else if(e.type==="class-breaks"){const y=e.classBreakInfos.map(_=>V0(_.symbol,null)),{field:d,valueExpression:v}=e;await oo(t,d!=null?d:v,y)}else e.type==="simple"&&await oo(t,"default",[V0(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await oo(t,"default",[V0(e.defaultSymbol,null)]),t.forEach((y,d)=>{const v=Sie(y.filter(Boolean),(_,M)=>JSON.stringify(_)===JSON.stringify(M));t.set(d,v)}),t}var g$;let Im=g$=class extends Ie{constructor(e){super(e),this.name=null,this.code=null}clone(){return new g$({name:this.name,code:this.code})}};m([x({type:String,json:{write:!0}})],Im.prototype,"name",void 0),m([x({type:[String,Number],json:{write:!0}})],Im.prototype,"code",void 0),Im=g$=m([Y("esri.layers.support.CodedValue")],Im);const xye=new bt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Tm=class extends Ie{constructor(e){super(e),this.name=null,this.type=null}};m([x({type:String,json:{write:!0}})],Tm.prototype,"name",void 0),m([wt(xye)],Tm.prototype,"type",void 0),Tm=m([Y("esri.layers.support.Domain")],Tm);const G3=Tm;var m$;let Cm=m$=class extends G3{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new m$({codedValues:me(this.codedValues),name:this.name})}};m([x({type:[Im],json:{write:!0}})],Cm.prototype,"codedValues",void 0),m([wt({codedValue:"coded-value"})],Cm.prototype,"type",void 0),Cm=m$=m([Y("esri.layers.support.CodedValueDomain")],Cm);const gD=Cm;var v$;let q3=v$=class extends G3{constructor(e){super(e),this.type="inherited"}clone(){return new v$}};m([wt({inherited:"inherited"})],q3.prototype,"type",void 0),q3=v$=m([Y("esri.layers.support.InheritedDomain")],q3);const mD=q3;var b$;let z0=b$=class extends G3{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new b$({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};m([x({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],z0.prototype,"maxValue",void 0),m([x({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],z0.prototype,"minValue",void 0),m([wt({range:"range"})],z0.prototype,"type",void 0),z0=b$=m([Y("esri.layers.support.RangeDomain")],z0);const vD=z0,bD={key:"type",base:G3,typeMap:{range:vD,"coded-value":gD,inherited:mD}};function w$(e){if(!e||!e.type)return null;switch(e.type){case"range":return vD.fromJSON(e);case"codedValue":return gD.fromJSON(e);case"inherited":return mD.fromJSON(e)}return null}const Sye=new bt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var _$;const Mye=new bt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Un=_$=class extends Ie{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){var r;let i=null;try{i=t?JSON.parse(t):null}catch{}return(r=i==null?void 0:i.value)!=null?r:null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?Mye.fromJSON(i.fieldValueType):null}clone(){return new _$({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};m([x({type:String,json:{write:!0}})],Un.prototype,"alias",void 0),m([x({type:[String,Number],json:{write:{allowNull:!0}}})],Un.prototype,"defaultValue",void 0),m([x()],Un.prototype,"description",void 0),m([Be("description")],Un.prototype,"readDescription",null),m([x({types:bD,json:{read:{reader:w$},write:!0}})],Un.prototype,"domain",void 0),m([x({type:Boolean,json:{write:!0}})],Un.prototype,"editable",void 0),m([x({type:hi,json:{write:!0}})],Un.prototype,"length",void 0),m([x({type:String,json:{write:!0}})],Un.prototype,"name",void 0),m([x({type:Boolean,json:{write:!0}})],Un.prototype,"nullable",void 0),m([wt(Sye)],Un.prototype,"type",void 0),m([x()],Un.prototype,"valueType",void 0),m([Be("valueType",["description"])],Un.prototype,"readValueType",null),m([x({type:Boolean,json:{read:!1}})],Un.prototype,"visible",void 0),Un=_$=m([Y("esri.layers.support.Field")],Un);const G0=Un;var x$;let xu=x$=class extends Ie{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new x$({mapLayerId:e,gdbVersion:t})}};m([wt({mapLayer:"map-layer"})],xu.prototype,"type",void 0),m([x({type:hi,json:{write:!0}})],xu.prototype,"mapLayerId",void 0),m([x({type:String,json:{write:!0}})],xu.prototype,"gdbVersion",void 0),xu=x$=m([Y("esri.layers.support.source.MapLayerSource")],xu);var S$;let Su=S$=class extends Ie{constructor(e){super(e),this.type="query-table"}clone(){var y;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,l={workspaceId:e,query:t,oidFields:i,spatialReference:(y=r==null?void 0:r.clone())!=null?y:void 0,geometryType:s};return new S$(l)}};m([wt({queryTable:"query-table"})],Su.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Su.prototype,"workspaceId",void 0),m([x({type:String,json:{write:!0}})],Su.prototype,"query",void 0),m([x({type:String,json:{write:!0}})],Su.prototype,"oidFields",void 0),m([x({type:At,json:{write:!0}})],Su.prototype,"spatialReference",void 0),m([wt(Rw)],Su.prototype,"geometryType",void 0),Su=S$=m([Y("esri.layers.support.source.QueryTableDataSource")],Su);var M$;let q0=M$=class extends Ie{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new M$({workspaceId:e,dataSourceName:t})}};m([wt({raster:"raster"})],q0.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],q0.prototype,"dataSourceName",void 0),m([x({type:String,json:{write:!0}})],q0.prototype,"workspaceId",void 0),q0=M$=m([Y("esri.layers.support.source.RasterDataSource")],q0);var $$;let cd=$$=class extends Ie{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new $$({workspaceId:e,gdbVersion:t,dataSourceName:i})}};m([wt({table:"table"})],cd.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],cd.prototype,"workspaceId",void 0),m([x({type:String,json:{write:!0}})],cd.prototype,"gdbVersion",void 0),m([x({type:String,json:{write:!0}})],cd.prototype,"dataSourceName",void 0),cd=$$=m([Y("esri.layers.support.source.TableDataSource")],cd);var E$,I$;const $ye=$n()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ao=E$=class extends Ie{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return wD()(e,t,i)}castLeftTableSource(e){return Za(A$(),e)}readRightTableSource(e,t,i){return wD()(e,t,i)}castRightTableSource(e){return Za(A$(),e)}clone(){var y,d;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,l={leftTableKey:e,rightTableKey:t,leftTableSource:(y=i==null?void 0:i.clone())!=null?y:void 0,rightTableSource:(d=r==null?void 0:r.clone())!=null?d:void 0,joinType:s};return new E$(l)}};m([wt({joinTable:"join-table"})],ao.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],ao.prototype,"leftTableKey",void 0),m([x({type:String,json:{write:!0}})],ao.prototype,"rightTableKey",void 0),m([x({json:{write:!0}})],ao.prototype,"leftTableSource",void 0),m([Be("leftTableSource")],ao.prototype,"readLeftTableSource",null),m([ri("leftTableSource")],ao.prototype,"castLeftTableSource",null),m([x({json:{write:!0}})],ao.prototype,"rightTableSource",void 0),m([Be("rightTableSource")],ao.prototype,"readRightTableSource",null),m([ri("rightTableSource")],ao.prototype,"castRightTableSource",null),m([wt($ye)],ao.prototype,"joinType",void 0),ao=E$=m([Y("esri.layers.support.source.JoinTableDataSource")],ao);let T$=null;function wD(){return T$||(T$=$c({types:A$()})),T$}let C$=null;function A$(){return C$||(C$={key:"type",base:null,typeMap:{"data-layer":lo,"map-layer":xu}}),C$}const Eye={key:"type",base:null,typeMap:{"join-table":ao,"query-table":Su,raster:q0,table:cd}};let lo=I$=class extends Ie{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new I$({fields:e,dataSource:t})}};m([wt({dataLayer:"data-layer"})],lo.prototype,"type",void 0),m([x({type:[G0],json:{write:!0}})],lo.prototype,"fields",void 0),m([x({types:Eye,json:{write:!0}})],lo.prototype,"dataSource",void 0),lo=I$=m([Y("esri.layers.support.source.DataLayerSource")],lo),lo.from=Ai(lo);function _D(e,t){return t?De(te({},t),{query:te(te({},e),t.query)}):{query:e}}function Vr(e){return typeof e=="string"?yn(e):me(e)}function P$(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const l=e[s];if(l!=null&&typeof l!="function")if(Array.isArray(l)){r[s]=[];for(let y=0;y<l.length;y++)r[s][y]=P$(l[y])}else if(typeof l=="object")if(l.toJSON){const y=l.toJSON(i&&i[s]);r[s]=t?y:JSON.stringify(y)}else r[s]=t?l:JSON.stringify(l);else r[s]=l}return r}const U3={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Kr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:At.WebMercator}),minus180Line:new Kr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:At.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Kr({paths:[[[180,-180],[180,180]]],spatialReference:At.WGS84}),minus180Line:new Kr({paths:[[[-180,-180],[-180,180]]],spatialReference:At.WGS84})}};function hd(e,t){return Math.ceil((e-t)/(2*t))}function xD(e,t){const i=Am(e);for(const r of i)for(const s of r)s[0]+=t;return e}function Am(e){return nu(e)?e.rings:e.paths}async function Iye(e,t,i,r){const s=Vr(e),l=t[0].spatialReference,y=De(te({},r),{query:De(te({},s.query),{f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:su(t[0]),geometries:t}),cutter:JSON.stringify(i)})}),d=await li(s.path+"/cut",y),{cutIndexes:v,geometries:_=[]}=d.data;return{cutIndexes:v,geometries:_.map(M=>{const T=dn(M);return T.spatialReference=l,T})}}function Tye(e){return{geometryType:su(e[0]),geometries:e.map(t=>t.toJSON())}}function SD(e,t,i){const r=mse(t);return e.map(s=>{const l=r.fromJSON(s);return l.spatialReference=i,l})}async function Cye(e,t,i){const r=typeof e=="string"?yn(e):e,s=t[0].spatialReference,l=su(t[0]),y=De(te({},i),{query:De(te({},r.query),{f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(Tye(t))})}),{data:d}=await li(r.path+"/simplify",y);return SD(d.geometries,l,s)}const MD=Ae.getLogger("esri.geometry.support.normalizeUtils");function Aye(e){return e.type==="polygon"}function Pye(e){return e[0].type==="polygon"}function Oye(e){return e[0].type==="polyline"}function kye(e,t){if(!(e instanceof Kr||e instanceof jn)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw MD.error(s),new fe(s)}const i=Am(e),r=[];for(const s of i){const l=[];r.push(l),l.push([s[0][0],s[0][1]]);for(let y=0;y<s.length-1;y++){const d=s[y][0],v=s[y][1],_=s[y+1][0],M=s[y+1][1],T=Math.sqrt((_-d)*(_-d)+(M-v)*(M-v)),A=(M-v)/T,R=(_-d)/T,F=T/t;if(F>1){for(let Z=1;Z<=F-1;Z++){const Q=Z*t,ee=R*Q+d,re=A*Q+v;l.push([ee,re])}const V=(T+Math.floor(F-1)*t)/2,z=R*V+d,W=A*V+v;l.push([z,W])}l.push([_,M])}}return Aye(e)?new jn({rings:r,spatialReference:e.spatialReference}):new Kr({paths:r,spatialReference:e.spatialReference})}function $D(e,t,i){if(t){const r=kye(e,1e6);e=Gf(r,!0)}return i&&(e=xD(e,i)),e}function ED(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=hd(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=hd(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=hd(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=hd(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function Rye(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],l=t.geometries[r],y=Am(l);for(let d=0;d<y.length;d++){const v=y[d];v.some(_=>{if(_[0]<180)return!0;{let M=0;for(let A=0;A<v.length;A++){const R=v[A][0];M=R>M?R:M}M=Number(M.toFixed(9));const T=-360*hd(M,180);for(let A=0;A<v.length;A++){const R=l.getPoint(d,A);l.setPoint(d,A,R.clone().offset(T,0))}return!0}})}if(s===i){if(Pye(e))for(const d of Am(l))e[s]=e[s].addRing(d);else if(Oye(e))for(const d of Am(l))e[s]=e[s].addPath(d)}else i=s,e[s]=l}return e}async function Pm(e,t,i){var ee;if(!Array.isArray(e))return Pm([e],t);t&&typeof t!="string"&&MD.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(ee=t==null?void 0:t.url)!=null?ee:gi.geometryServiceUrl;let s,l,y,d,v,_,M,T,A=0;const R=[],F=[];for(const re of e)if(ae(re))F.push(re);else if(s||(s=re.spatialReference,l=Ks(s),y=s.isWebMercator,_=y?102100:4326,d=U3[_].maxX,v=U3[_].minX,M=U3[_].plus180Line,T=U3[_].minus180Line),l)if(re.type==="mesh")F.push(re);else if(re.type==="point")F.push(ED(re.clone(),d,v));else if(re.type==="multipoint"){const ie=re.clone();ie.points=ie.points.map(he=>ED(he,d,v)),F.push(ie)}else if(re.type==="extent"){const ie=re.clone()._normalize(!1,!1,l);F.push(ie.rings?new jn(ie):ie)}else if(re.extent){const ie=re.extent,he=hd(ie.xmin,v)*(2*d);let be=he===0?re.clone():xD(re.clone(),he);ie.offset(he,0),ie.intersects(M)&&ie.xmax!==d?(A=ie.xmax>A?ie.xmax:A,be=$D(be,y),R.push(be),F.push("cut")):ie.intersects(T)&&ie.xmin!==v?(A=ie.xmax*(2*d)>A?ie.xmax*(2*d):A,be=$D(be,y,360),R.push(be),F.push("cut")):F.push(be)}else F.push(re.clone());else F.push(re);let V=hd(A,d),z=-90;const W=V,Z=new Kr;for(;V>0;){const re=360*V-180;Z.addPath([[re,z],[re,-1*z]]),z*=-1,V--}if(R.length>0&&W>0){const re=Rye(R,await Iye(r,R,Z,i)),ie=[],he=[];for(let xe=0;xe<F.length;xe++){const $e=F[xe];if($e!=="cut")he.push($e);else{const je=re.shift(),it=e[xe];q(it)&&it.type==="polygon"&&it.rings&&it.rings.length>1&&je.rings.length>=it.rings.length?(ie.push(je),he.push("simplify")):he.push(y?ru(je):je)}}if(!ie.length)return he;const be=await Cye(r,ie,i),we=[];for(let xe=0;xe<he.length;xe++){const $e=he[xe];$e!=="simplify"?we.push($e):we.push(y?ru(be.shift()):be.shift())}return we}const Q=[];for(let re=0;re<F.length;re++){const ie=F[re];if(ie!=="cut")Q.push(ie);else{const he=R.shift();Q.push(y===!0?ru(he):he)}}return Q}function JIe(e,t){const i=Ks(t);if(i){const[r,s]=i.valid,l=s-r;if(e<r)for(;e<r;)e+=l;if(e>s)for(;e>s;)e-=l}return e}function Om(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=Om(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var gh;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(gh||(gh={}));const ID=4294967296,Fye=new TextDecoder("utf-8"),Lye=Me("safari")||Me("ios")?6:Me("ff")?12:32;class pd{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=gh.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}asUnsafe(){return this}clone(){return new pd(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(t!==void 0)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*ID;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*ID;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const l=this.getMessage(),y=t(l,i,r,s);return l.release(),y}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=pd.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){pd.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case gh.varint:this._decodeVarint();break;case gh.fixed64:this._skip(8);break;case gh.delimited:this._skip(this._getLength());break;case gh.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=t[i++],r|=127&s,(128&s)==0||(s=t[i++],r|=(127&s)<<7,(128&s)==0)||(s=t[i++],r|=(127&s)<<14,(128&s)==0)||(s=t[i++],r|=(127&s)<<21,(128&s)==0)||(s=t[i++],r+=268435456*(127&s),(128&s)==0)||(s=t[i++],r+=34359738368*(127&s),(128&s)==0)||(s=t[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=t[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=t[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=t[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let l=1;for(;i!==this._end&&(s=t[i],(128&s)!=0);)++i,r+=(127&s)*l,l*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*l}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i=this._pos,r=0,s=0;const l=1&t[i];if(this._end-i>=10)do{if(s=t[i++],r|=127&s,(128&s)==0||(s=t[i++],r|=(127&s)<<7,(128&s)==0)||(s=t[i++],r|=(127&s)<<14,(128&s)==0)||(s=t[i++],r|=(127&s)<<21,(128&s)==0)||(s=t[i++],r+=268435456*(127&s),(128&s)==0)||(s=t[i++],r+=34359738368*(127&s),(128&s)==0)||(s=t[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=t[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=t[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=t[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let y=1;for(;i!==this._end&&(s=t[i],(128&s)!=0);)++i,r+=(127&s)*y,y*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*y}return this._pos=i,l?-(r+1)/2:r/2}_getLength(){if(this._dataType!==gh.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>Lye){const y=t.subarray(i,r);return Fye.decode(y)}let s="",l="";for(let y=i;y<r;++y){const d=t[y];128&d?l+="%"+d.toString(16):(s+=decodeURIComponent(l)+String.fromCharCode(d),l="")}return l.length&&(s+=decodeURIComponent(l)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}pd.pool=new ra(pd,void 0,e=>{e._data=null,e._dataView=null});class vn{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,s,l]=t,y=s-i,d=l-r;return new vn([5],[i,r,y,0,0,d,-y,0,0,-d])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let l=0;l<s;l++)t(this.coords[2*(l+i)],this.coords[2*(l+i)+1]);i+=s}}clone(t){return t?(t.set(this.coords),new vn(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new vn(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class $l{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new $l(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function Nye(e){return!(ae(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class ZIe extends $l{}class B3{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new B3;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const TD=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class KIe{constructor(t){this._options=t,this.geometryTypes=TD,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new B3}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||Xi(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=x0(this._options.sourceSpatialReference)/x0(t.spatialReference);if(i!==1)for(const r of t.features){if(!Nye(r))continue;const s=r.geometry.coords;for(let l=2;l<s.length;l+=3)s[l]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new $l}createSpatialReference(){return{wkid:0}}createGeometry(){return new vn}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new vn}}const CD=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],AD=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],PD=["upperLeft","lowerLeft"];function OD(e){return e>=CD.length?null:CD[e]}function jye(e){return e>=AD.length?null:AD[e]}function kD(e){return e>=PD.length?null:PD[e]}function RD(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Dye(e,t,i){const r=3,s=e.asUnsafe(),l=t.createPointGeometry(i);for(;s.next();)switch(s.tag()){case r:{const y=s.getUInt32(),d=s.pos()+y;let v=0;for(;s.pos()<d;)t.addCoordinatePoint(l,s.getSInt64(),v++);break}default:s.skip()}return l}function Vye(e,t,i){const r=2,s=3,l=e.asUnsafe(),y=t.createGeometry(i),d=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;l.next();)switch(l.tag()){case r:{const v=l.getUInt32(),_=l.pos()+v;let M=0;for(;l.pos()<_;)t.addLength(y,l.getUInt32(),M++);break}case s:{const v=l.getUInt32(),_=l.pos()+v;let M=0;for(t.allocateCoordinates(y);l.pos()<_;)t.addCoordinate(y,l.getSInt64(),M),M++,M===d&&(M=0);break}default:l.skip()}return y}function zye(e){const t=1,i=2,r=3,s=e.asUnsafe(),l=new vn;let y="esriGeometryPoint";for(;s.next();)switch(s.tag()){case i:{const d=s.getUInt32(),v=s.pos()+d;for(;s.pos()<v;)l.lengths.push(s.getUInt32());break}case r:{const d=s.getUInt32(),v=s.pos()+d;for(;s.pos()<v;)l.coords.push(s.getSInt64());break}case t:y=TD[s.getEnum()];break;default:s.skip()}return{queryGeometry:l,queryGeometryType:y}}function Gye(e){const t=1,i=2,r=3,s=4,l=5,y=6,d=7,v=8,_=9,M=e.asUnsafe();for(;M.next();)switch(M.tag()){case t:return M.getString();case i:return M.getFloat();case r:return M.getDouble();case s:return M.getSInt32();case l:return M.getUInt32();case y:return M.getInt64();case d:return M.getUInt64();case v:return M.getSInt64();case _:return M.getBool();default:return M.skip(),null}return null}function qye(e){const t=1,i=2,r=3,s=4,l=5,y=6,d=e.asUnsafe(),v={type:OD(0)};for(;d.next();)switch(d.tag()){case t:v.name=d.getString();break;case i:v.type=OD(d.getEnum());break;case r:v.alias=d.getString();break;case s:v.sqlType=jye(d.getEnum());break;case l:d.skip();break;case y:v.defaultValue=d.getString();break;default:d.skip()}return v}function Uye(e){const t=1,i=2,r={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case t:r.name=s.getString();break;case i:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function Bye(e,t,i,r){const s=1,l=2,y=4,d=t.createFeature(i);let v=0;for(;e.next();)switch(e.tag()){case s:{const _=r[v++].name;d.attributes[_]=e.processMessage(Gye);break}case l:d.geometry=e.processMessageWithArgs(Vye,t,i);break;case y:d.centroid=e.processMessageWithArgs(Dye,t,i);break;default:e.skip()}return d}function Hye(e){const t=1,i=2,r=3,s=4,l=[1,1,1,1],y=e.asUnsafe();for(;y.next();)switch(y.tag()){case t:l[0]=y.getDouble();break;case i:l[1]=y.getDouble();break;case s:l[2]=y.getDouble();break;case r:l[3]=y.getDouble();break;default:y.skip()}return l}function Wye(e){const t=1,i=2,r=3,s=4,l=[0,0,0,0],y=e.asUnsafe();for(;y.next();)switch(y.tag()){case t:l[0]=y.getDouble();break;case i:l[1]=y.getDouble();break;case s:l[2]=y.getDouble();break;case r:l[3]=y.getDouble();break;default:y.skip()}return l}function Jye(e){const t=1,i=2,r=3,s={originPosition:kD(0)},l=e.asUnsafe();for(;l.next();)switch(l.tag()){case t:s.originPosition=kD(l.getEnum());break;case i:s.scale=l.processMessage(Hye);break;case r:s.translate=l.processMessage(Wye);break;default:l.skip()}return s}function Zye(e){const t=1,i=2,r=3,s={},l=e.asUnsafe();for(;l.next();)switch(l.tag()){case t:s.shapeAreaFieldName=l.getString();break;case i:s.shapeLengthFieldName=l.getString();break;case r:s.units=l.getString();break;default:l.skip()}return s}function Kye(e,t){const i=1,r=2,s=3,l=4,y=5,d=t.createSpatialReference();for(;e.next();)switch(e.tag()){case i:d.wkid=e.getUInt32();break;case y:d.wkt=e.getString();break;case r:d.latestWkid=e.getUInt32();break;case s:d.vcsWkid=e.getUInt32();break;case l:d.latestVcsWkid=e.getUInt32();break;default:e.skip()}return d}function Yye(e,t){const i=1,r=2,s=3,l=4,y=5,d=7,v=8,_=9,M=10,T=11,A=12,R=13,F=15,V=t.createFeatureResult(),z=e.asUnsafe();V.geometryType=RD(t,0);let W=!1;for(;z.next();)switch(z.tag()){case i:V.objectIdFieldName=z.getString();break;case s:V.globalIdFieldName=z.getString();break;case l:V.geohashFieldName=z.getString();break;case y:V.geometryProperties=z.processMessage(Zye);break;case d:V.geometryType=RD(t,z.getEnum());break;case v:V.spatialReference=z.processMessageWithArgs(Kye,t);break;case M:V.hasZ=z.getBool();break;case T:V.hasM=z.getBool();break;case A:V.transform=z.processMessage(Jye);break;case _:{const Z=z.getBool();V.exceededTransferLimit=Z;break}case R:t.addField(V,z.processMessage(qye));break;case F:W||(t.prepareFeatures(V),W=!0),t.addFeature(V,z.processMessageWithArgs(Bye,t,V,V.fields));break;case r:V.uniqueIdField=z.processMessage(Uye);break;default:z.skip()}return t.finishFeatureResult(V),V}function Xye(e,t){const i=1,r=4,s={};let l=null;for(;e.next();)switch(e.tag()){case r:l=e.processMessageWithArgs(zye);break;case i:s.featureResult=e.processMessageWithArgs(Yye,t);break;default:e.skip()}return q(l)&&s.featureResult&&t.addQueryGeometry(s,l),s}function Qye(e,t){try{const i=2,r=new pd(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===i?s.queryResult=r.processMessageWithArgs(Xye,t):r.skip();return s}catch(i){throw new fe("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function ege(e,t){const i=Qye(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,l=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const y=r.objectIdFieldName;for(const d of r.features)d.attributes&&(d.objectId=d.attributes[y])}return r&&(r.queryGeometry=s,r.queryGeometryType=l),r}function H3(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=gM(i.geometryType,t,e.outSpatialReference);if(!ae(r))for(const s of i.features)r(s.geometry)}const FD="Layer does not support extent calculation.";function LD(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function ND(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let l,y,d;if(q(i)&&(y=i.spatialReference,d=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=su(i),s.geometry=LD(i,e.compactGeometryEnabled),s.inSR=d),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),l=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,l=y),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&q(y)&&q(e.quantizationParameters)&&q(e.quantizationParameters.extent)&&y.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const v=r.timeExtent,{start:_,end:M}=v;_==null&&M==null||(s.time=_===M?_:`${_!=null?_:"null"},${M!=null?M:"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&q(y)&&q(l)&&y.equals(l)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function jD(e,t,i,r){const s=q(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await U0(e,t,"json",r);return H3(t,i,s.data),s}async function DD(e,t,i,r){if(q(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await VD(e,t,r),l=s;return l.data=ege(s.data,i),l}function VD(e,t,i){return U0(e,t,"pbf",i)}function zD(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):U0(e,t,"json",i,{returnIdsOnly:!0})}function GD(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):U0(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function qD(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):U0(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(FD);if(s.hasOwnProperty("count"))throw new Error(FD);return r})}function U0(e,t,i,r={},s={}){const l=typeof e=="string"?yn(e):e,y=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",Pm(y,null,r).then(d=>{const v=d&&d[0];q(v)&&((t=t.clone()).geometry=v);const _=Om(te(te(De(te({},l.query),{f:i}),s),ND(t,s)));return li(Uc(l.path,"query"),De(te({},r),{query:te(te({},_),r.query)}))})}var tge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",encodeGeometry:LD,executeQuery:jD,executeQueryForCount:GD,executeQueryForExtent:qD,executeQueryForIds:zD,executeQueryPBF:DD,executeQueryPBFBuffer:VD,queryToQueryStringParameters:ND,runQuery:U0}),O$;const k$=new bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let bn=O$=class extends Ie{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var s;const i=At.fromJSON(t.spatialReference),r=[];for(let l=0;l<e.length;l++){const y=e[l],d=jr.fromJSON(y),v=y.geometry&&y.geometry.spatialReference;q(d.geometry)&&!v&&(d.geometry.spatialReference=i);const _=y.aggregateGeometries,M=d.aggregateGeometries;if(_&&q(M))for(const T in M){const A=M[T],R=(s=_[T])==null?void 0:s.spatialReference;q(A)&&!R&&(A.spatialReference=i)}r.push(d)}return r}writeGeometryType(e,t,i,r){if(e)return void k$.write(e,t,i,r);const{features:s}=this;if(s){for(const l of s)if(l&&q(l.geometry))return void k$.write(l.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=dn(e);return r&&!i&&t.spatialReference&&(r.spatialReference=At.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&q(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new O$(this.cloneProperties())}cloneProperties(){return me({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e&&e[i];r.geometry=s&&s.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,l=_=>Math.round((_-r)/t),y=_=>Math.round((s-_)/i),d=this.features,v=this._getQuantizationFunction(this.geometryType,l,y);for(let _=0,M=d.length;_<M;_++)(v==null?void 0:v(Wt(d[_].geometry)))||(d.splice(_,1),_--,M--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[l,y]}=i,d=M=>M*l+r,v=M=>s-M*y,_=this._getHydrationFunction(e,d,v);for(const{geometry:M}of t)q(M)&&_&&_(M);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const l=[];for(let y=0,d=e.length;y<d;y++){const v=e[y];if(y>0){const _=t(v[0]),M=i(v[1]);_===r&&M===s||(l.push([_-r,M-s]),r=_,s=M)}else r=t(v[0]),s=i(v[1]),l.push([r,s])}return l.length>0?l:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=nu(r)?r.rings:r.paths,l=[];for(let y=0,d=s.length;y<d;y++){const v=s[y],_=this._quantizePoints(v,t,i);_&&l.push(_)}return l.length>0?(nu(r)?r.rings=l:r.paths=l,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s&&s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const s=nu(r)?r.rings:r.paths;let l,y;for(let d=0,v=s.length;d<v;d++){const _=s[d];for(let M=0,T=_.length;M<T;M++){const A=_[M];M>0?(l+=A[0],y+=A[1]):(l=A[0],y=A[1]),A[0]=t(l),A[1]=i(y)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const s=r.points;let l,y;for(let d=0,v=s.length;d<v;d++){const _=s[d];d>0?(l+=_[0],y+=_[1]):(l=_[0],y=_[1]),_[0]=t(l),_[1]=i(y)}}:null}};m([x({type:String,json:{write:!0}})],bn.prototype,"displayFieldName",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bn.prototype,"exceededTransferLimit",void 0),m([x({type:[jr],json:{write:!0}})],bn.prototype,"features",void 0),m([Be("features")],bn.prototype,"readFeatures",null),m([x({type:[G0],json:{write:!0}})],bn.prototype,"fields",void 0),m([x({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:k$.read}}})],bn.prototype,"geometryType",void 0),m([Ke("geometryType")],bn.prototype,"writeGeometryType",null),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bn.prototype,"hasM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bn.prototype,"hasZ",void 0),m([x({types:ou,json:{write:!0}})],bn.prototype,"queryGeometry",void 0),m([Be("queryGeometry")],bn.prototype,"readQueryGeometry",null),m([x({type:At,json:{write:!0}})],bn.prototype,"spatialReference",void 0),m([Ke("spatialReference")],bn.prototype,"writeSpatialReference",null),m([x({json:{write:!0}})],bn.prototype,"transform",void 0),bn=O$=m([Y("esri.rest.support.FeatureSet")],bn),bn.prototype.toJSON.isDefaultToJSON=!0;const mh=bn;var ige=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:mh});const UD={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},rge={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function nge(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function dd(e,t,i){const r=new Date(e.getTime());if(t&&i){const s=rge[i],{getter:l,setter:y,multiplier:d}=s;if(i==="months"){const v=nge(r.getFullYear(),r.getMonth()+t);r.getDate()>v&&r.setDate(v)}r[y](r[l]()+t*d)}return r}function BD(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function sge(e,t,i){return e===0?0:e*UD[t]/UD[i]}var xa;let uo=xa=class extends Ie{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return HD}static get empty(){return oge}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(xa.allTime)}get isEmpty(){return this.equals(xa.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new xa({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=q(this.start)?this.start.getTime():this.start,i=q(this.end)?this.end.getTime():this.end,r=q(e.start)?e.start.getTime():e.start,s=q(e.end)?e.end.getTime():e.end;return t===r&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Jl(this.start,r=>BD(r,e)),i=Jl(this.end,r=>{const s=BD(r,e);return r.getTime()===s.getTime()?s:dd(s,1,e)});return new xa({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return xa.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Oy(this.start,-1/0,d=>d.getTime()),i=Oy(this.end,1/0,d=>d.getTime()),r=Oy(e.start,-1/0,d=>d.getTime()),s=Oy(e.end,1/0,d=>d.getTime());let l,y;if(r>=t&&r<=i?l=r:t>=r&&t<=s&&(l=t),i>=r&&i<=s?y=i:s>=t&&s<=i&&(y=s),l!=null&&y!=null&&!isNaN(l)&&!isNaN(y)){const d=new xa;return d.start=l===-1/0?null:new Date(l),d.end=y===1/0?null:new Date(y),d}return xa.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new xa,{start:r,end:s}=this;return q(r)&&(i.start=dd(r,e,t)),q(s)&&(i.end=dd(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return HD.clone();const t=q(this.start)&&q(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=q(this.end)&&q(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new xa({start:t,end:i})}};m([x({type:Date,json:{write:{allowNull:!0}}})],uo.prototype,"end",void 0),m([Be("end")],uo.prototype,"readEnd",null),m([Ke("end")],uo.prototype,"writeEnd",null),m([x({readOnly:!0,json:{read:!1}})],uo.prototype,"isAllTime",null),m([x({readOnly:!0,json:{read:!1}})],uo.prototype,"isEmpty",null),m([x({type:Date,json:{write:{allowNull:!0}}})],uo.prototype,"start",void 0),m([Be("start")],uo.prototype,"readStart",null),m([Ke("start")],uo.prototype,"writeStart",null),uo=xa=m([Y("esri.TimeExtent")],uo);const HD=new uo,oge=new uo({start:void 0,end:void 0}),zo=uo;let fd=class extends yr(Ie){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};m([x({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:q(this.onFields)&&this.onFields.length>0}}}}})],fd.prototype,"onFields",void 0),m([x({type:String,json:{write:!0}})],fd.prototype,"operator",void 0),m([x({type:String,json:{write:!0}})],fd.prototype,"searchTerm",void 0),m([x({type:String,json:{write:!0}})],fd.prototype,"searchType",void 0),fd=m([Y("esri.rest.support.FullTextSearch")],fd);const age=fd;var R$;const WD=new bt({upperLeft:"upper-left",lowerLeft:"lower-left"});let yd=R$=class extends Ie{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new R$(me({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};m([x({type:ai,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],yd.prototype,"extent",void 0),m([x({type:["view","edit"],json:{write:!0}})],yd.prototype,"mode",void 0),m([x({type:String,json:{read:WD.read,write:WD.write}})],yd.prototype,"originPosition",void 0),m([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],yd.prototype,"tolerance",void 0),yd=R$=m([Y("esri.rest.support.QuantizationParameters")],yd);const JD=yd;var F$;const ZD=new bt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Sa=F$=class extends Ie{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=me(e))}clone(){return new F$({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:me(this.statisticParameters)})}};m([x({type:Number,json:{write:!0}})],Sa.prototype,"maxPointCount",void 0),m([x({type:Number,json:{write:!0}})],Sa.prototype,"maxRecordCount",void 0),m([x({type:Number,json:{write:!0}})],Sa.prototype,"maxVertexCount",void 0),m([x({type:String,json:{write:!0}})],Sa.prototype,"onStatisticField",void 0),m([x({type:String,json:{write:!0}})],Sa.prototype,"outStatisticFieldName",void 0),m([x({type:String,json:{read:{source:"statisticType",reader:ZD.read},write:{target:"statisticType",writer:ZD.write}}})],Sa.prototype,"statisticType",void 0),m([x({type:Object})],Sa.prototype,"statisticParameters",void 0),m([Ke("statisticParameters")],Sa.prototype,"writeStatisticParameters",null),Sa=F$=m([Y("esri.rest.support.StatisticDefinition")],Sa);const KD=Sa;var B0;const lge=new bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),uge=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let $t=B0=class extends Ie{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Rf(B0,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(l=>l instanceof Date?l.getTime():l):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new B0(me({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:q(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};$t.MAX_MAX_RECORD_COUNT_FACTOR=5,m([x({json:{write:!0}})],$t.prototype,"aggregateIds",void 0),m([x({type:Boolean,json:{write:!0}})],$t.prototype,"cacheHint",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"compactGeometryEnabled",void 0),m([x({json:{write:!0}})],$t.prototype,"datumTransformation",void 0),m([ri("datumTransformation")],$t.prototype,"castDatumTransformation",null),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"defaultSpatialReferenceEnabled",void 0),m([x({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],$t.prototype,"distance",void 0),m([x({type:lo,json:{write:!0}})],$t.prototype,"dynamicDataSource",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"formatOf3DObjects",void 0),m([x({type:[age],json:{write:{enabled:!0,overridePolicy(){return{enabled:q(this.fullText)&&this.fullText.length>0}}}}})],$t.prototype,"fullText",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"gdbVersion",void 0),m([x({types:ou,json:{read:dn,write:!0}})],$t.prototype,"geometry",void 0),m([x({type:Number,json:{write:!0}})],$t.prototype,"geometryPrecision",void 0),m([x({type:[String],json:{write:!0}})],$t.prototype,"groupByFieldsForStatistics",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"having",void 0),m([x({type:Date})],$t.prototype,"historicMoment",void 0),m([Ke("historicMoment")],$t.prototype,"writeHistoricMoment",null),m([x({type:Number,json:{write:!0}})],$t.prototype,"maxAllowableOffset",void 0),m([x({type:Number,cast:e=>e<1?1:e>B0.MAX_MAX_RECORD_COUNT_FACTOR?B0.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],$t.prototype,"maxRecordCountFactor",void 0),m([x({type:["xyFootprint"],json:{write:!0}})],$t.prototype,"multipatchOption",void 0),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],$t.prototype,"num",void 0),m([x({json:{write:!0}})],$t.prototype,"objectIds",void 0),m([x({type:[String],json:{write:!0}})],$t.prototype,"orderByFields",void 0),m([x({type:[String],json:{write:!0}})],$t.prototype,"outFields",void 0),m([x({type:At,json:{name:"outSR",write:!0}})],$t.prototype,"outSpatialReference",void 0),m([x({type:[KD],json:{write:{enabled:!0,overridePolicy(){return{enabled:q(this.outStatistics)&&this.outStatistics.length>0}}}}})],$t.prototype,"outStatistics",void 0),m([x({json:{write:!0}})],$t.prototype,"parameterValues",void 0),m([Ke("parameterValues")],$t.prototype,"writeParameterValues",null),m([x({type:dt,json:{write:!0}})],$t.prototype,"pixelSize",void 0),m([x({type:JD,json:{write:!0}})],$t.prototype,"quantizationParameters",void 0),m([x({type:[Object],json:{write:!0}})],$t.prototype,"rangeValues",void 0),m([x({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],$t.prototype,"relationParameter",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"resultType",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnCentroid",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnDistinctValues",void 0),m([x({type:Boolean,json:{default:!0,write:!0}})],$t.prototype,"returnExceededLimitFeatures",void 0),m([x({type:Boolean,json:{write:!0}})],$t.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnQueryGeometry",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],$t.prototype,"returnZ",void 0),m([x({type:At,json:{write:!0}})],$t.prototype,"sourceSpatialReference",void 0),m([wt(lge,{ignoreUnknown:!1,name:"spatialRel"})],$t.prototype,"spatialRelationship",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],$t.prototype,"start",void 0),m([Ke("start"),Ke("num")],$t.prototype,"writeStart",null),m([x({type:String,json:{write:!0}})],$t.prototype,"sqlFormat",void 0),m([x({type:String,json:{write:!0}})],$t.prototype,"text",void 0),m([x({type:zo,json:{write:!0}})],$t.prototype,"timeExtent",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],$t.prototype,"timeReferenceUnknownClient",void 0),m([wt(uge,{ignoreUnknown:!1}),x({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],$t.prototype,"units",void 0),m([x({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],$t.prototype,"where",void 0),m([Ke("where")],$t.prototype,"writeWhere",null),$t=B0=m([Y("esri.rest.support.Query")],$t);const Bn=$t;async function L$(e,t,i){const r=await cge(e,t,i);return mh.fromJSON(r)}async function cge(e,t,i){const r=Vr(e),s=te({},i),l=Bn.from(t),{data:y}=await jD(r,l,l.sourceSpatialReference,s);return y}function Pn(e,t){return e?t?4:3:t?3:2}const H0=Ae.getLogger("esri.layers.graphics.featureConversionUtils"),YD={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},hge=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l},XD=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+2]},pge=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+3]},dge=(e,t,i,r,s,l)=>{e[i]=s,e[i+1]=l,e[i+2]=t[r+2],e[i+3]=t[r+3]};function N$(e,t,i,r){if(e){if(i)return t&&r?dge:XD;if(t&&r)return pge}else if(t&&r)return XD;return hge}function j$({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function D$({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function V$({scale:e,translate:t},i,r){return i*e[r]+t[r]}function z$(e,t,i){return e?t?i?U$(e):G$(e):i?q$(e):W3(e):null}function W3(e){const t=e.coords;return{x:t[0],y:t[1]}}function QD(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function G$(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function fge(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function q$(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function yge(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function U$(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function gge(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function mge(e,t,i,r){let s=W3;i&&r?s=U$:i?s=G$:r&&(s=q$);for(const l of t){const{geometry:y,attributes:d}=l,v=q(y)?s(y):null;e.push({attributes:d,geometry:v})}return e}function B$(e,t){return e&&t?gge:e?fge:t?yge:QD}function eV(e,t,i,r,s){const l=B$(i,r);for(const{geometry:y,attributes:d}of t){const v=q(y)?l(new vn,y):null;e.push(new $l(v,d,null,s?d[s]:void 0))}return e}function YIe(e,t,i=B$(t.z!=null,t.m!=null)){return i(e,t)}function vge(e,t,i,r){for(const{geometry:s,attributes:l}of t)e.push({attributes:l,geometry:q(s)?H$(s,i,r):null});return e}function H$(e,t,i){if(ae(e))return null;const r=Pn(t,i),s=[];for(let l=0;l<e.coords.length;l+=r){const y=[];for(let d=0;d<r;d++)y.push(e.coords[l+d]);s.push(y)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function tV(e,t,i,r,s){const l=Pn(i,r);for(const{geometry:y,attributes:d}of t){const v=q(y)?iV(new vn,y,l):null;e.push(new $l(v,d,null,s?d[s]:void 0))}return e}function iV(e,t,i=Pn(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const l of t.points)for(let y=0;y<i;y++)r[s++]=l[y];return e}function bge(e,t,i,r){for(const{geometry:s,attributes:l}of t)e.push({attributes:l,geometry:q(s)?W$(s,i,r):null});return e}function W$(e,t,i){if(!e)return null;const r=Pn(t,i),{coords:s,lengths:l}=e,y=[];let d=0;for(const v of l){const _=[];for(let M=0;M<v;M++){const T=[];for(let A=0;A<r;A++)T.push(s[d++]);_.push(T)}y.push(_)}return t?i?{paths:y,hasZ:t,hasM:i}:{paths:y,hasZ:t}:i?{paths:y,hasM:i}:{paths:y}}function rV(e,t,i,r,s){const l=Pn(i,r);for(const{geometry:y,attributes:d}of t){const v=q(y)?nV(new vn,y,l):null;e.push(new $l(v,d,null,s?d[s]:void 0))}return e}function nV(e,t,i=Pn(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let l=0;for(const y of t.paths){for(const d of y)for(let v=0;v<i;v++)s[l++]=d[v];r.push(y.length)}return e}function wge(e,t,i,r){for(const{geometry:s,attributes:l,centroid:y}of t){const d=q(s)?J$(s,i,r):null;if(q(y)){const v=W3(y);e.push({attributes:l,centroid:v,geometry:d})}else e.push({attributes:l,geometry:d})}return e}function J$(e,t,i){if(!e)return null;const r=Pn(t,i),{coords:s,lengths:l}=e,y=[];let d=0;for(const v of l){const _=[];for(let M=0;M<v;M++){const T=[];for(let A=0;A<r;A++)T.push(s[d++]);_.push(T)}y.push(_)}return t?i?{rings:y,hasZ:t,hasM:i}:{rings:y,hasZ:t}:i?{rings:y,hasM:i}:{rings:y}}function sV(e,t,i,r,s){for(const{geometry:l,centroid:y,attributes:d}of t){const v=q(l)?oV(new vn,l,i,r):null,_=s?d[s]:void 0;q(y)?e.push(new $l(v,d,QD(new vn,y),_)):e.push(new $l(v,d,null,_))}return e}function oV(e,t,i=t.hasZ,r=t.hasM){return _ge(e,t.rings,i,r),e}function _ge(e,t,i,r){const s=Pn(i,r),{lengths:l,coords:y}=e;let d=0;Mu(e);for(const v of t){for(const _ of v)for(let M=0;M<s;M++)y[d++]=_[M];l.push(v.length)}return e}const W0=[],km=[];function XIe(e,t,i,r,s){W0[0]=e;const[l]=aV(km,W0,t,i,r,s);return Ma(W0),Ma(km),l}function aV(e,t,i,r,s,l){if(Ma(e),!i){for(const y of t){const d=l?y.attributes[l]:void 0;e.push(new $l(null,y.attributes,null,d))}return e}switch(i){case"esriGeometryPoint":return eV(e,t,r,s,l);case"esriGeometryMultipoint":return tV(e,t,r,s,l);case"esriGeometryPolyline":return rV(e,t,r,s,l);case"esriGeometryPolygon":return sV(e,t,r,s,l);default:H0.error("convertToFeatureSet:unknown-geometry",new fe(`Unable to parse unknown geometry type '${i}'`)),Ma(e)}return e}function QIe(e,t,i,r,s,l){const y=e.length;switch(i){case"esriGeometryPoint":eV(e,t,r,s,l);break;case"esriGeometryMultipoint":tV(e,t,r,s,l);break;case"esriGeometryPolyline":rV(e,t,r,s,l);break;case"esriGeometryPolygon":sV(e,t,r,s,l);break;default:H0.error("convertToFeatureSet:unknown-geometry",new fe(`Unable to parse unknown geometry type '${i}'`))}for(let d=0;d<t.length;d++)e[d+y].geometryType=i,e[d+y].insertAfter=t[d].insertAfter,e[d+y].groupId=t[d].groupId;return e}function eTe(e,t,i,r){km[0]=e,uV(W0,km,t,i,r);const s=W0[0];return Ma(W0),Ma(km),s}function tTe(e,t,i){if(ae(e))return null;const r=new vn;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),Nw(e)?B$(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):nu(e)?oV(r,e,t,i):eg(e)?nV(r,e,Pn(t,i)):Lw(e)?iV(r,e,Pn(t,i)):void H0.error("convertFromGeometry:unknown-geometry",new fe(`Unable to parse unknown geometry type '${e}'`))}function lV(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(ae(s))return null;switch(t){case"esriGeometryPoint":{let l=W3;return i&&r?l=U$:i?l=G$:r&&(l=q$),l(s)}case"esriGeometryMultipoint":return H$(s,i,r);case"esriGeometryPolyline":return W$(s,i,r);case"esriGeometryPolygon":return J$(s,i,r);default:return H0.error("convertToGeometry:unknown-geometry",new fe(`Unable to parse unknown geometry type '${t}'`)),null}}function xge(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function uV(e,t,i,r,s){if(Ma(e),ae(i))return xge(e,t);switch(i){case"esriGeometryPoint":return mge(e,t,r,s);case"esriGeometryMultipoint":return vge(e,t,r,s);case"esriGeometryPolyline":return bge(e,t,r,s);case"esriGeometryPolygon":return wge(e,t,r,s);default:H0.error("convertToFeatureSet:unknown-geometry",new fe(`Unable to parse unknown geometry type '${i}'`))}return e}function iTe(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:l,hasZ:y,features:d,geometryType:v,exceededTransferLimit:_,uniqueIdField:M,queryGeometry:T,queryGeometryType:A}=e,R={features:uV([],d,v,y,l),fields:s,geometryType:v,objectIdFieldName:t,spatialReference:i,uniqueIdField:M,queryGeometry:lV(T,A,!1,!1)};return r&&(R.transform=r),_&&(R.exceededTransferLimit=_),l&&(R.hasM=l),y&&(R.hasZ=y),R}function rTe(e,t){var A;const i=new B3,{hasM:r,hasZ:s,features:l,objectIdFieldName:y,spatialReference:d,geometryType:v,exceededTransferLimit:_,transform:M,fields:T}=e;return T&&(i.fields=T),i.geometryType=v!=null?v:null,i.objectIdFieldName=(A=y!=null?y:t)!=null?A:null,i.spatialReference=d!=null?d:null,i.objectIdFieldName?(l&&aV(i.features,l,v,s,r,i.objectIdFieldName),_&&(i.exceededTransferLimit=_),r&&(i.hasM=r),s&&(i.hasZ=s),M&&(i.transform=M),i):(H0.error(new fe("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function nTe(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const l of i)q(l.geometry)&&K$(l.geometry,l.geometry,r,s,t),q(l.centroid)&&K$(l.centroid,l.centroid,r,s,t);return e.transform=null,e}function sTe(e,t){const{geometryType:i,features:r,hasM:s,hasZ:l}=t;if(!e)return t;for(let y=0;y<r.length;y++){const d=r[y],v=d.weakClone();v.geometry=new vn,Rm(v.geometry,d.geometry,s,l,i,e),d.centroid&&(v.centroid=new vn,Rm(v.centroid,d.centroid,s,l,"esriGeometryPoint",e)),r[y]=v}return t.transform=e,t}function Rm(e,t,i,r,s,l,y=i,d=r){if(Mu(e),ae(t)||!t.coords.length)return null;const v=YD[s],{coords:_,lengths:M}=t,T=Pn(i,r),A=Pn(i&&y,r&&d),R=N$(i,r,y,d);if(!M.length)return R(e.coords,_,0,0,j$(l,_[0]),D$(l,_[1])),Mu(e,T,0),e;let F,V,z,W,Z=0,Q=0,ee=Q;for(const re of M){if(re<v)continue;let ie=0;Q=ee,z=F=j$(l,_[Z]),W=V=D$(l,_[Z+1]),R(e.coords,_,Q,Z,z,W),ie++,Z+=T,Q+=A;for(let he=1;he<re;he++,Z+=T)z=j$(l,_[Z]),W=D$(l,_[Z+1]),z===F&&W===V||(R(e.coords,_,Q,Z,z-F,W-V),Q+=A,ie++,F=z,V=W);ie>=v&&(e.lengths.push(ie),ee=Q)}return Ma(e.coords,ee),e.coords.length?e:null}function Sge(e,t,i,r,s,l,y=i,d=r){if(Mu(e),!t||!t.coords.length)return null;const v=YD[s],{coords:_,lengths:M}=t,T=Pn(i,r),A=Pn(i&&y,r&&d),R=N$(i,r,y,d);if(!M.length)return R(e.coords,_,0,0,_[0],_[1]),Mu(e,T,0),e;let F=0;const V=l*l;for(const z of M){if(z<v){F+=z*T;continue}const W=e.coords.length/A,Z=F,Q=F+(z-1)*T;R(e.coords,_,e.coords.length,Z,_[Z],_[Z+1]),Z$(e.coords,_,T,V,R,Z,Q),R(e.coords,_,e.coords.length,Q,_[Q],_[Q+1]);const ee=e.coords.length/A-W;ee>=v?e.lengths.push(ee):Ma(e.coords,W*A),F+=z*T}return e.coords.length?e:null}function Mge(e,t,i,r){const s=e[t],l=e[t+1],y=e[i],d=e[i+1],v=e[r],_=e[r+1];let M=y,T=d,A=v-M,R=_-T;if(A!==0||R!==0){const F=((s-M)*A+(l-T)*R)/(A*A+R*R);F>1?(M=v,T=_):F>0&&(M+=A*F,T+=R*F)}return A=s-M,R=l-T,A*A+R*R}function Z$(e,t,i,r,s,l,y){let d,v=r,_=0;for(let M=l+i;M<y;M+=i)d=Mge(t,M,l,y),d>v&&(_=M,v=d);v>r&&(_-l>i&&Z$(e,t,i,r,s,l,_),s(e,t,e.length,_,t[_],t[_+1]),y-_>i&&Z$(e,t,i,r,s,_,y))}function oTe(e,t,i,r){if(ae(t)||!t.coords||!t.coords.length)return null;const s=Pn(i,r);let l=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;if(t&&t.coords){const _=t.coords;for(let M=0;M<_.length;M+=s){const T=_[M],A=_[M+1];l=Math.min(l,T),d=Math.max(d,T),y=Math.min(y,A),v=Math.max(v,A)}}return e[0]=l,e[1]=y,e[2]=d,e[3]=v,e}function K$(e,t,i,r,s){var V,z,W,Z,Q,ee,re,ie;const{coords:l,lengths:y}=t,d=Pn(i,r);if(!l.length)return e!==t&&Mu(e),e;$9(s);const{originPosition:v,scale:_,translate:M}=s,T=Ige;T.originPosition=v;const A=T.scale;A[0]=(V=_[0])!=null?V:1,A[1]=-((z=_[1])!=null?z:1),A[2]=(W=_[2])!=null?W:1,A[3]=(Z=_[3])!=null?Z:1;const R=T.translate;if(R[0]=(Q=M[0])!=null?Q:0,R[1]=(ee=M[1])!=null?ee:0,R[2]=(re=M[2])!=null?re:0,R[3]=(ie=M[3])!=null?ie:0,!y.length){for(let he=0;he<d;++he)e.coords[he]=V$(T,l[he],he);return e!==t&&Mu(e,d,0),e}let F=0;for(let he=0;he<y.length;he++){const be=y[he];e.lengths[he]=be;for(let $e=0;$e<d;++$e)e.coords[F+$e]=V$(T,l[F+$e],$e);let we=e.coords[F],xe=e.coords[F+1];F+=d;for(let $e=1;$e<be;$e++,F+=d){we+=l[F]*A[0],xe+=l[F+1]*A[1],e.coords[F]=we,e.coords[F+1]=xe;for(let je=2;je<d;++je)e.coords[F+je]=V$(T,l[F+je],je)}}return e!==t&&Mu(e,l.length,y.length),e}function $ge(e,t,i,r,s,l){if(Mu(e),e.lengths.push(...t.lengths),i===s&&r===l)for(let y=0;y<t.coords.length;y++)e.coords.push(t.coords[y]);else{const y=Pn(i,r),d=N$(i,r,s,l),v=t.coords;for(let _=0;_<v.length;_+=y)d(e.coords,v,e.coords.length,_,v[_],v[_+1])}return e}function Ege(e,t,i,r){let s=0,l=e[r*t],y=e[r*(t+1)];for(let d=1;d<i;d++){const v=l+e[r*(t+d)],_=y+e[r*(t+d)+1],M=(v-l)*(_+y);l=v,y=_,s+=M}return .5*s}function aTe(e,t){const{coords:i,lengths:r}=e;let s=0,l=0;for(let y=0;y<r.length;y++){const d=r[y];l+=Ege(i,s,d,t),s+=d}return Math.abs(l)}function lTe(e,t){if(ae(e))return null;const i=e.clone(),r=e.coords,s=e.lengths;let l=0;for(let y=0;y<s.length;y++){const d=s[y];let v=r[t*l],_=r[t*l+1];for(let M=1;M<d;M++){const T=v+r[t*(l+M)],A=_+r[t*(l+M)+1];i.coords[t*(l+M)]=T,i.coords[t*(l+M)+1]=A,v=T,_=A}l+=d}return i}function Mu(e,t=0,i=0){Ma(e.lengths,i),Ma(e.coords,t)}function Ma(e,t=0){e.length!==t&&(e.length=t)}const Ige={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var Y$;let or=Y$=class extends Ie{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new Y$(me({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};m([x({type:Boolean,json:{write:!0}})],or.prototype,"cacheHint",void 0),m([x({type:lo,json:{write:!0}})],or.prototype,"dynamicDataSource",void 0),m([x({type:String,json:{write:!0}})],or.prototype,"gdbVersion",void 0),m([x({type:Number,json:{write:!0}})],or.prototype,"geometryPrecision",void 0),m([x({type:Date})],or.prototype,"historicMoment",void 0),m([Ke("historicMoment")],or.prototype,"_writeHistoricMoment",null),m([x({type:Number,json:{write:!0}})],or.prototype,"maxAllowableOffset",void 0),m([x({type:[Number],json:{write:!0}})],or.prototype,"objectIds",void 0),m([x({type:[String],json:{write:!0}})],or.prototype,"orderByFields",void 0),m([x({type:[String],json:{write:!0}})],or.prototype,"outFields",void 0),m([x({type:At,json:{read:{source:"outSR"},write:{target:"outSR"}}})],or.prototype,"outSpatialReference",void 0),m([x({json:{write:!0}})],or.prototype,"relationshipId",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],or.prototype,"start",void 0),m([Ke("start"),Ke("num")],or.prototype,"writeStart",null),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],or.prototype,"num",void 0),m([x({json:{write:!0}})],or.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],or.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],or.prototype,"returnZ",void 0),m([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],or.prototype,"where",void 0),or=Y$=m([Y("esri.rest.support.RelationshipQuery")],or),or.from=Ai(or);const gd=or;var X$;let J0=X$=class extends Ie{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new X$({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};m([x({type:[String],json:{write:!0}})],J0.prototype,"groupByFields",void 0),m([x({type:Number,json:{write:!0}})],J0.prototype,"topCount",void 0),m([x({type:[String],json:{write:!0}})],J0.prototype,"orderByFields",void 0),J0=X$=m([Y("esri.rest.support.TopFilter")],J0);const Tge=J0;var Q$;const cV=new bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),hV=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Zi=Q$=class extends Ie{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Q$(me({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};m([x({type:Boolean,json:{write:!0}})],Zi.prototype,"cacheHint",void 0),m([x({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Zi.prototype,"distance",void 0),m([x({types:ou,json:{read:dn,write:!0}})],Zi.prototype,"geometry",void 0),m([x({type:Number,json:{write:!0}})],Zi.prototype,"geometryPrecision",void 0),m([x({type:Number,json:{write:!0}})],Zi.prototype,"maxAllowableOffset",void 0),m([x({type:Number,json:{read:{source:"resultRecordCount"}}})],Zi.prototype,"num",void 0),m([x({json:{write:!0}})],Zi.prototype,"objectIds",void 0),m([x({type:[String],json:{write:!0}})],Zi.prototype,"orderByFields",void 0),m([x({type:[String],json:{write:!0}})],Zi.prototype,"outFields",void 0),m([x({type:At,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Zi.prototype,"outSpatialReference",void 0),m([x({type:String,json:{write:!0}})],Zi.prototype,"resultType",void 0),m([x({json:{write:!0}})],Zi.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Zi.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Zi.prototype,"returnZ",void 0),m([x({type:Number,json:{read:{source:"resultOffset"}}})],Zi.prototype,"start",void 0),m([Ke("start"),Ke("num")],Zi.prototype,"writeStart",null),m([x({type:String,json:{read:{source:"spatialRel",reader:cV.read},write:{target:"spatialRel",writer:cV.write}}})],Zi.prototype,"spatialRelationship",void 0),m([x({type:zo,json:{write:!0}})],Zi.prototype,"timeExtent",void 0),m([x({type:Tge,json:{write:!0}})],Zi.prototype,"topFilter",void 0),m([x({type:String,json:{read:hV.read,write:{writer:hV.write,overridePolicy(e){return{enabled:q(e)&&q(this.distance)&&this.distance>0}}}}})],Zi.prototype,"units",void 0),m([x({type:String,json:{write:!0}})],Zi.prototype,"where",void 0),Zi=Q$=m([Y("esri.rest.support.TopFeaturesQuery")],Zi),Zi.from=Ai(Zi);const vh=Zi,Cge="esri.widgets.Feature.support.relatedFeatureUtils",pV=Ae.getLogger(Cge),dV=new Map;function e7(e){if(!bu(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function Age(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function Pge({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(s=>(`${s.relatedTableId}`===i&&s.id===e.id&&(r=s),!!r)),r}function Oge(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function kge(e,t){const i=Age(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function Rge(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i&&i.value;t.relatedFeatures=s?s.features:[];const l=r&&r.value;t.relatedStatsFeatures=l?l.features:[]}function Fge(e,t,i,r){const s=new gd;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(s,r)}function Lge(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function Nge(e,t,i,r){const s=i.layerId.toString(),{layerInfo:l,relation:y,relatedFields:d,outStatistics:v,url:_,sourceSpatialReference:M}=t,T=Pge({originRelationship:y,relationships:l.relationships,layerId:s});if(T.relationshipTableId&&T.keyFieldInRelationshipTable){const R=(await Fge(e,T,i,r))[e.attributes[i.objectIdField]];if(!R)return null;const F=R.features.map(V=>V.attributes[l.objectIdField]);if((v==null?void 0:v.length)>0&&l.supportsStatistics){const V=new Bn;V.where=Lge(l.objectIdField,F,1e3),V.outFields=d,V.outStatistics=v,V.sourceSpatialReference=M;const z={features:Promise.resolve(R),statsFeatures:L$(_,V)};return Ss(z)}}const A=T==null?void 0:T.keyField;if(A){const R=T4(Gge(l.fields,A)),F=Oge(e.attributes,y.keyField),V=R?`${A}=${F}`:`${A}='${F}'`,z=L$(_,new Bn({where:V,outFields:t.relatedFields,sourceSpatialReference:M}),r),W=t.outStatistics&&t.outStatistics.length>0&&l.supportsStatistics?L$(_,new Bn({where:V,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:M}),r):null,Z={features:z};return W&&(Z.statsFeatures=W),Ss(Z)}return null}function jge(e,t){return li(e,{query:{f:"json"},signal:t&&t.signal})}function Dge({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,l)=>{const{relation:y}=s;if(!y){const T=new fe("relation-required","A relation is required on a layer to retrieve related records.");throw pV.error(T),T}const{relatedTableId:d}=y;if(typeof d!="number"){const T=new fe("A related table ID is required on a layer to retrieve related records.");throw pV.error(T),T}const v=`${t.url}/${d}`,_=dV.get(v),M=_||jge(v,i);_||dV.set(v,M),r[l]=M}),Ss(r)}function Vge({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((l,y)=>{l.layerInfo&&(s[y]=Nge(e,l,i,r))}),Ss(s)}function zge({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new KD({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function Gge(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const fV={chartAnimation:!0};let nn=class extends ot{constructor(e){super(e),this.abilities=te({},fV),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return te(te({},fV),e)}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:s,layer:l}=this;return t==null?void 0:t.map(y=>{const d=y==null?void 0:y.clone();if(!d)return null;if(d.title=ad({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:d.title}),d.caption=ad({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:d.caption}),d.altText=ad({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:l,text:d.altText}),d.type==="image"){const{value:v}=d;return this._setImageValue({value:v,formattedAttributes:i,layer:l}),d.value.sourceURL?d:void 0}if(d.type==="pie-chart"||d.type==="line-chart"||d.type==="column-chart"||d.type==="bar-chart"){const{value:v}=d;return this._setChartValue({value:v,chartType:d.type,attributes:e,formattedAttributes:i,layer:l,expressionAttributes:r}),d}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:s}=e,{linkURL:l,sourceURL:y}=i;if(y){const d=YM(y,s);i.sourceURL=KM({formattedAttributes:r,template:d,fieldInfoMap:t})}if(l){const d=YM(l,s);i.linkURL=KM({formattedAttributes:r,template:d,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:s,layer:l,expressionAttributes:y}=e,{popupTemplate:d,relatedInfos:v}=this,{fields:_,normalizeField:M}=t;if(t.fields=m0e(_,l),M&&(t.normalizeField=gm(M,l)),!_.some(A=>!!(r[A]!=null||bu(A)&&v.size)))return;const T=d==null?void 0:d.fieldInfos;_.forEach(A=>{if(bu(A))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:T,fieldName:A,formattedAttributes:r,chartType:s,value:t})]);const R=this._getChartOption({value:t,attributes:i,chartType:s,formattedAttributes:r,expressionAttributes:y,fieldName:A,fieldInfos:T});t.series.push(R)})}_getRelatedChartInfos(e){var F;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:s,value:l}=e,y=[],d=e7(i),{layerId:v,fieldName:_}=d,M=(F=this.relatedInfos)==null?void 0:F.get(v.toString());if(!M)return y;const{relatedFeatures:T,relation:A}=M;if(!A||!T)return y;const{cardinality:R}=A;return T.forEach(V=>{const{attributes:z}=V;z&&Object.keys(z).forEach(W=>{W===_&&y.push(this._getChartOption({value:l,attributes:z,formattedAttributes:r,fieldName:i,chartType:s,relatedFieldName:W,fieldInfos:t}))})}),R==="one-to-many"||R==="many-to-many"?y:[y[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var ee,re,ie,he,be,we;const{value:t,attributes:i,formattedAttributes:r,expressionAttributes:s,fieldName:l,relatedFieldName:y,fieldInfos:d,chartType:v}=e,{layer:_,fieldInfoMap:M}=this,{normalizeField:T,tooltipField:A}=t,R=T?bu(T)?i[e7(T).fieldName]:i[T]:null,F=JM(l)&&s&&s[l]!==void 0?s[l]:y&&i[y]!==void 0?i[y]:i[l]!==void 0?i[l]:r[l],V=new xk({fieldName:l,value:F===void 0?null:F&&R?F/R:F});if(bu(l)){const xe=M.get(l.toLowerCase()),$e=M.get(A.toLowerCase()),je=(ee=xe==null?void 0:xe.fieldName)!=null?ee:l,it=(be=(he=(ie=r[(re=$e==null?void 0:$e.fieldName)!=null?re:A])!=null?ie:xe==null?void 0:xe.label)!=null?he:xe==null?void 0:xe.fieldName)!=null?be:y,Ye=r[je];return V.tooltip=this._getTooltip({label:it,value:Ye,chartType:v}),V}const z=Dj(d,l),W=gm(l,_),Z=A&&r[A]!==void 0?r[A]:Lj(z||new pg({fieldName:W}),(we=this.popupTemplate)==null?void 0:we.expressionInfos),Q=r[W];return V.tooltip=this._getTooltip({label:Z,value:Q,chartType:v}),V}};m([x()],nn.prototype,"abilities",void 0),m([ri("abilities")],nn.prototype,"castAbilities",null),m([x()],nn.prototype,"activeMediaInfoIndex",void 0),m([x({readOnly:!0})],nn.prototype,"activeMediaInfo",null),m([x()],nn.prototype,"attributes",void 0),m([x()],nn.prototype,"description",void 0),m([x()],nn.prototype,"fieldInfoMap",void 0),m([x()],nn.prototype,"formattedAttributes",void 0),m([x()],nn.prototype,"expressionAttributes",void 0),m([x({readOnly:!0})],nn.prototype,"formattedMediaInfos",null),m([x()],nn.prototype,"layer",void 0),m([x({readOnly:!0})],nn.prototype,"formattedMediaInfoCount",null),m([x()],nn.prototype,"mediaInfos",void 0),m([x()],nn.prototype,"popupTemplate",void 0),m([x()],nn.prototype,"relatedInfos",void 0),m([x()],nn.prototype,"title",void 0),nn=m([Y("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],nn);const md=nn;var yV=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],qge=[].concat(yV.slice(30,39),yV.slice(28,30).reverse()),Uge=[{name:"default",colors:qge},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const gV="en-us",t7=new Map([["ar",()=>import("./ar.49b0c68b.js").then(e=>e.a)],["bg-bg",()=>import("./bg_BG.11eb8098.js").then(e=>e.b)],["bs-ba",()=>import("./bs_BA.d64b6d60.js").then(e=>e.b)],["ca-es",()=>import("./ca_ES.1c83052f.js").then(e=>e.c)],["cs-cz",()=>import("./cs_CZ.2c1d832e.js").then(e=>e.c)],["da-dk",()=>import("./da_DK.7768e8c9.js").then(e=>e.d)],["de-de",()=>import("./de_DE.afa64a61.js").then(e=>e.d)],["de-ch",()=>import("./de_CH.93fbcc11.js").then(e=>e.d)],["el-gr",()=>import("./el_GR.5d1d5773.js").then(e=>e.e)],["en-us",()=>import("./en_US.c2aaaaf2.js").then(e=>e.e)],["en-ca",()=>import("./en_CA.1d79bbc1.js").then(e=>e.e)],["es-es",()=>import("./es_ES.46ffd0dd.js").then(e=>e.e)],["et-ee",()=>import("./et_EE.1a55e3f5.js").then(e=>e.e)],["fi-fi",()=>import("./fi_FI.e627f42c.js").then(e=>e.f)],["fr-fr",()=>import("./fr_FR.8878accd.js").then(e=>e.f)],["he-il",()=>import("./he_IL.c4726521.js").then(e=>e.h)],["hr-hr",()=>import("./hr_HR.f6e9c2f5.js").then(e=>e.h)],["hu-hu",()=>import("./hu_HU.e50423d0.js").then(e=>e.h)],["id-id",()=>import("./id_ID.647cf9f3.js").then(e=>e.i)],["it-it",()=>import("./it_IT.9b2ed631.js").then(e=>e.i)],["ja-jp",()=>import("./ja_JP.59dec7ad.js").then(e=>e.j)],["ko-kr",()=>import("./ko_KR.31f2fcfa.js").then(e=>e.k)],["lt-lt",()=>import("./lt_LT.f55eed9e.js").then(e=>e.l)],["lv-lv",()=>import("./lv_LV.fbd90ff6.js").then(e=>e.l)],["nb-no",()=>import("./nb_NO.999bf74b.js").then(e=>e.n)],["nl-nl",()=>import("./nl_NL.eaf853e4.js").then(e=>e.n)],["pl-pl",()=>import("./pl_PL.b9c9f47f.js").then(e=>e.p)],["pt-br",()=>import("./pt_BR.9de8cfe1.js").then(e=>e.p)],["pt-pt",()=>import("./pt_PT.366da6be.js").then(e=>e.p)],["ro-ro",()=>import("./ro_RO.23b2317e.js").then(e=>e.r)],["ru-ru",()=>import("./ru_RU.a4752790.js").then(e=>e.r)],["sk-sk",()=>import("./sk_SK.2556c1ed.js").then(e=>e.s)],["sl-sl",()=>import("./sl_SL.1d54b9c0.js").then(e=>e.s)],["sr-rs",()=>import("./sr_RS.11b6a6f2.js").then(e=>e.s)],["sv-se",()=>import("./sv_SE.8de637ad.js").then(e=>e.s)],["th-th",()=>import("./th_TH.62c4dc57.js").then(e=>e.t)],["tr-tr",()=>import("./tr_TR.aa062d30.js").then(e=>e.t)],["uk-ua",()=>import("./uk_UA.84a073eb.js").then(e=>e.u)],["vi-vn",()=>import("./vi_VN.18d7f7ae.js").then(e=>e.v)],["zh-cn",()=>import("./zh_Hans.82eb6169.js").then(e=>e.z)],["zh-hk",()=>import("./zh_Hant.b79c66d1.js").then(e=>e.z)],["zh-tw",()=>import("./zh_Hant.b79c66d1.js").then(e=>e.z)]]);function Bge(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of t7.keys())if(r.startsWith(t)){i=r;break}return i}function Hge(e){return e?t7.has(e.toLowerCase())?e.toLowerCase():Bge(e)||gV:gV}let Z0,Fm;async function Wge(e=na()){if(e=Hge(e),Z0&&e===Fm)return Z0;Z0=import("./index.d9253d88.js").then(t=>t.i),Fm=e;try{const[t,i]=await Promise.all([Z0,t7.get(Fm)()]);Fm===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Z0=null,Fm=null,null}return Z0}function Jge(e,t="default"){const i=Uge.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const vr={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},i7=.05,r7=.95,n7=15,$u="color",bh="tooltip",Lm="value",mV="default-line-value";let Ls=class extends zn{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new md,this.messages=null,this._getChartDependencies=async i=>{const r=await Wge(),{destroyed:s,viewModel:l}=this;if(s||!l||!i)return;const{activeMediaInfo:y}=l,d=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:y,chartsModule:r,colorMap:d})}}initialize(){this._featureElementInfo=new A3,this.addHandles([Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),fi),Ve(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),fi)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return ge("div",{bind:this,class:vr.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?ge("div",{key:"media-element-container",class:vr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:l,altText:y,title:d,type:v}=e,{sourceURL:_,linkURL:M}=s,T=Fj(M)?"_blank":"_self",A=T==="_blank"?"noreferrer":"",R=l?t:null,F=R?R.timestamp:0,V=R?R.sourceURL:_,z=ge("img",{alt:y||d,key:`media-${v}-${i}-${r}-${F}`,src:V});return(M?ge("a",{title:d,href:M,rel:A,target:T},z):null)||z}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return ge("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:vr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?ge("div",{key:"media-title",class:vr.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?ge("div",{key:"media-caption",class:vr.mediaItemCaption,innerHTML:e.caption}):null;return ge("div",{key:"media-container",class:vr.mediaItemContainer},ge("div",{key:"media-item-container",class:vr.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(vr.mediaButton,vr.mediaPrevious):this.classes(vr.mediaButton,vr.mediaNext),s=t?this.classes(vr.mediaIcon,vr.mediaPreviousIconLTR,vr.iconLeftTriangleArrow):this.classes(vr.mediaIcon,vr.mediaNextIconLTR,vr.iconRightTriangleArrow),l=t?this.classes(vr.mediaIcon,vr.mediaPreviousIconRTL,vr.iconRightTriangleArrow):this.classes(vr.mediaIcon,vr.mediaNextIconRTL,vr.iconLeftTriangleArrow),y=t?"media-previous":"media-next",d=t?this._previous:this._next;return ge("button",{type:"button",key:y,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:d},ge("span",{"aria-hidden":"true",class:s}),ge("span",{"aria-hidden":"true",class:l}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var y,d;const{am4core:t}=e,i=new Map,r=(d=(y=this.viewModel)==null?void 0:y.layer)==null?void 0:d.renderer,s="default";if(!r)return i;const l=await _ye(r);return l.delete(s),Array.from(l.values()).every(v=>(v==null?void 0:v.length)===1)&&(i.set(mV,t.color({r:50,g:50,b:50,a:1})),Array.from(l.keys()).forEach(v=>{v&&i.set(v,t.color(l.get(v)[0].toCss(!0)))})),i}_handleMediaKeyup(e){const t=pp(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:l}=e,{value:y,type:d}=s,{am4core:v}=i,_=Jge(v);function M(R){R instanceof v.ColorSet&&_&&(R.list=_)}O3()&&v.useTheme(i.am4themes_dark);const T=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!T.matches?v.useTheme(i.am4themes_animated):v.unuseTheme(i.am4themes_animated),v.useTheme(M);const A=d==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),A.data=y.series.map(R=>({[bh]:R.tooltip,[Lm]:R.value,[$u]:l.get(R.fieldName)})).filter(R=>d!=="pie-chart"||R.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,l=r.create(t,s.PieChart);l.rtl=Sl(this.container);const y=l.series.push(new s.PieSeries);return y.labels.template.disabled=!0,y.ticks.template.disabled=!0,y.dataFields.value=Lm,y.dataFields.category=bh,this._customizeChartTooltip(y.tooltip,r),y.slices.template.propertyFields.fill=$u,y.slices.template.propertyFields.stroke=$u,l}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:l,am4charts:y}=i,d=e.xAxes.push(new y.CategoryAxis);d.dataFields.category=bh,d.renderer.labels.template.disabled=!0,this._customizeChartTooltip(d.tooltip,l),d.tooltip.events.on("sizechanged",()=>{d.tooltip.dy=-d.tooltip.contentHeight});const v=e.yAxes.push(new y.ValueAxis),_=v.renderer.labels.template;v.renderer.minLabelPosition=i7,v.renderer.maxLabelPosition=r7,v.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(v.tooltip,l),_.wrap=!0;const M=e.series.push(new y.ColumnSeries);M.dataFields.valueY=Lm,M.dataFields.categoryX=bh,M.columns.template.propertyFields.fill=$u,M.columns.template.propertyFields.stroke=$u,e.cursor=new y.XYCursor,s.series.length>n7&&(e.scrollbarX=new l.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:l,am4charts:y}=i,d=e.yAxes.push(new y.CategoryAxis);d.dataFields.category=bh,d.renderer.inversed=!0,d.renderer.labels.template.disabled=!0,this._customizeChartTooltip(d.tooltip,l),d.tooltip.events.on("sizechanged",()=>{d.tooltip.dx=d.tooltip.contentWidth});const v=e.xAxes.push(new y.ValueAxis),_=v.renderer.labels.template;v.renderer.minLabelPosition=i7,v.renderer.maxLabelPosition=r7,v.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(v.tooltip,l),_.wrap=!0;const M=e.series.push(new y.ColumnSeries);M.dataFields.valueX=Lm,M.dataFields.categoryY=bh,M.columns.template.propertyFields.fill=$u,M.columns.template.propertyFields.stroke=$u,e.cursor=new y.XYCursor,s.series.length>n7&&(e.scrollbarY=new l.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:l}=r,{am4core:y,am4charts:d}=i,v=e.xAxes.push(new d.CategoryAxis);v.dataFields.category=bh,v.renderer.labels.template.disabled=!0,this._customizeChartTooltip(v.tooltip,y),v.tooltip.events.on("sizechanged",()=>{v.tooltip.dy=-v.tooltip.contentHeight});const _=e.yAxes.push(new d.ValueAxis),M=_.renderer.labels.template;_.renderer.minLabelPosition=i7,_.renderer.maxLabelPosition=r7,_.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(_.tooltip,y),M.wrap=!0;const T=e.series.push(new d.LineSeries);T.dataFields.categoryX=bh,T.dataFields.valueY=Lm,T.strokeWidth=1;const A=s.get(mV);A&&(T.stroke=A);const R=T.bullets.push(new d.CircleBullet);R.propertyFields.fill=$u,R.propertyFields.stroke=$u,e.cursor=new d.XYCursor,l.series.length>n7&&(e.scrollbarX=new y.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:l,am4charts:y}=i,d=l.create(t,y.XYChart);return d.rtl=Sl(this.container),s==="column-chart"&&this._createColumnChart(d,e),s==="bar-chart"&&this._createBarChart(d,e),s==="line-chart"&&this._createLineChart(d,e),d}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,s=""]=e.split("#");return`${r}${i}timestamp=${t}${s?"#":""}${s}`}};m([x()],Ls.prototype,"attributes",null),m([x()],Ls.prototype,"activeMediaInfoIndex",null),m([x()],Ls.prototype,"description",null),m([x()],Ls.prototype,"fieldInfoMap",null),m([x()],Ls.prototype,"layer",null),m([x()],Ls.prototype,"mediaInfos",null),m([x()],Ls.prototype,"popupTemplate",null),m([x()],Ls.prototype,"relatedInfos",null),m([x()],Ls.prototype,"title",null),m([x({type:md})],Ls.prototype,"viewModel",void 0),m([x(),Gn("esri/widgets/Feature/t9n/Feature")],Ls.prototype,"messages",void 0),Ls=m([Y("esri.widgets.Feature.FeatureMedia")],Ls);const vV=Ls;var s7;let Nm=s7=class extends Ie{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new s7({minValue:this.minValue,maxValue:this.maxValue})}};m([x({type:Number,json:{write:!0}})],Nm.prototype,"minValue",void 0),m([x({type:Number,json:{write:!0}})],Nm.prototype,"maxValue",void 0),Nm=s7=m([Y("esri.renderer.support.AuthoringInfoClassBreakInfo")],Nm);var o7;let wh=o7=class extends Ie{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new o7({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:me(this.classBreakInfos)})}};m([x({type:String,json:{write:!0}})],wh.prototype,"field",void 0),m([x({type:String,json:{write:!0}})],wh.prototype,"normalizationField",void 0),m([x({type:String,json:{write:!0}})],wh.prototype,"label",void 0),m([x({type:[Nm],json:{write:!0}})],wh.prototype,"classBreakInfos",void 0),wh=o7=m([Y("esri.renderers.support.AuthoringInfoFieldInfo")],wh);var a7;const J3=new bt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Z3=new bt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),bV={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},wV=["high-to-low","above-and-below","centered-on","extremes"],_V=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],xV=["seconds","minutes","hours","days","months","years"];let Ns=a7=class extends Ie{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new a7({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};m([x({types:bV,json:{write:!0}})],Ns.prototype,"endTime",void 0),m([ri("endTime")],Ns.prototype,"castEndTime",null),m([x({type:String,json:{write:!0}})],Ns.prototype,"field",void 0),m([x({type:Number,json:{write:!0}})],Ns.prototype,"maxSliderValue",void 0),m([x({type:Number,json:{write:!0}})],Ns.prototype,"minSliderValue",void 0),m([x({types:bV,json:{write:!0}})],Ns.prototype,"startTime",void 0),m([ri("startTime")],Ns.prototype,"castStartTime",null),m([x({type:J3.apiValues,value:null,json:{type:J3.jsonValues,read:J3.read,write:J3.write}})],Ns.prototype,"style",null),m([x({type:_V,value:null,json:{type:_V,origins:{"web-scene":{type:wV,write:{writer:(e,t)=>{wV.includes(e)&&(t.theme=e)}}}},write:!0}})],Ns.prototype,"theme",null),m([x({type:Z3.apiValues,json:{type:Z3.jsonValues,read:Z3.read,write:Z3.write}})],Ns.prototype,"type",void 0),m([x({type:xV,json:{type:xV,write:!0}})],Ns.prototype,"units",void 0),Ns=a7=m([Y("esri.renderers.support.AuthoringInfoVisualVariable")],Ns);const Zge=Ns;let K3=class extends Ie{constructor(e){super(e),this.type=null}};m([x({readOnly:!0,json:{read:!1,write:!0}})],K3.prototype,"type",void 0),K3=m([Y("esri.rest.support.ColorRamp")],K3);const l7=K3;var u7;let vd=u7=class extends l7{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new u7({fromColor:me(this.fromColor),toColor:me(this.toColor),algorithm:this.algorithm})}};m([wt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],vd.prototype,"algorithm",void 0),m([x({type:mt,json:{type:[hi],write:!0}})],vd.prototype,"fromColor",void 0),m([x({type:mt,json:{type:[hi],write:!0}})],vd.prototype,"toColor",void 0),m([x({type:["algorithmic"]})],vd.prototype,"type",void 0),vd=u7=m([Y("esri.rest.support.AlgorithmicColorRamp")],vd);const c7=vd;var h7;let jm=h7=class extends l7{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new h7({colorRamps:me(this.colorRamps)})}};m([x({type:[c7],json:{write:!0}})],jm.prototype,"colorRamps",void 0),m([x({type:["multipart"]})],jm.prototype,"type",void 0),jm=h7=m([Y("esri.rest.support.MultipartColorRamp")],jm);const SV=jm,MV={key:"type",base:l7,typeMap:{algorithmic:c7,multipart:SV}};function $V(e){return e&&e.type?e.type==="algorithmic"?c7.fromJSON(e):e.type==="multipart"?SV.fromJSON(e):null:null}var p7;const bd=new bt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Y3=new bt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),EV=new bt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),IV=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Kge=["high-to-low","above-and-below","above","below","90-10"],Yge=["flow-line","wave-front"],Xge=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let br=p7=class extends Ie{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?$V(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new p7({classificationMethod:this.classificationMethod,colorRamp:me(this.colorRamp),fadeRatio:me(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:me(this.field1),field2:me(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};m([x({type:bd.apiValues,value:null,json:{type:bd.jsonValues,read:bd.read,write:bd.write,origins:{"web-document":{default:"manual",type:bd.jsonValues,read:bd.read,write:bd.write}}}})],br.prototype,"classificationMethod",null),m([x({types:MV,json:{write:!0}})],br.prototype,"colorRamp",void 0),m([Be("colorRamp")],br.prototype,"readColorRamp",null),m([x({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"fadeRatio",void 0),m([x({type:[String],value:null,json:{write:!0}})],br.prototype,"fields",null),m([x({type:wh,value:null,json:{write:!0}})],br.prototype,"field1",null),m([x({type:wh,value:null,json:{write:!0}})],br.prototype,"field2",null),m([x({type:Yge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"flowTheme",null),m([x({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],br.prototype,"focus",null),m([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],br.prototype,"isAutoGenerated",void 0),m([x({type:Number,value:null,json:{type:hi,write:!0}})],br.prototype,"numClasses",null),m([x({type:IV,json:{type:IV,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],br.prototype,"lengthUnit",void 0),m([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"maxSliderValue",void 0),m([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"minSliderValue",void 0),m([x({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],br.prototype,"statistics",null),m([x({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],br.prototype,"standardDeviationInterval",null),m([x({type:Y3.apiValues,value:null,json:{type:Y3.jsonValues,read:Y3.read,write:Y3.write,origins:{"web-scene":{type:EV.jsonValues,write:{writer:EV.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],br.prototype,"type",null),m([x({type:[Zge],json:{write:!0}})],br.prototype,"visualVariables",void 0),m([x({type:Xge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"univariateSymbolStyle",null),m([x({type:Kge,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],br.prototype,"univariateTheme",null),br=p7=m([Y("esri.renderers.support.AuthoringInfo")],br);const d7=br,f7=new bt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Dm=class extends Ie{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};m([x({type:d7,json:{write:!0}})],Dm.prototype,"authoringInfo",void 0),m([x({type:f7.apiValues,readOnly:!0,json:{type:f7.jsonValues,read:!1,write:{writer:f7.write,ignoreOrigin:!0}}})],Dm.prototype,"type",void 0),Dm=m([Y("esri.renderers.Renderer")],Dm);const Eu=Dm;function Qge(e){var t,i,r;return(r=(i=(t=e.match(eme))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))!=null?r:null}const eme=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var y7;let K0=y7=class extends Ie{constructor(){super(...arguments),this.title=null}clone(){return new y7({title:this.title})}};m([x({type:String,json:{write:!0}})],K0.prototype,"title",void 0),K0=y7=m([Y("esri.renderers.support.LegendOptions")],K0);var g7;let X3=g7=class extends K0{constructor(){super(...arguments),this.showLegend=null}clone(){return new g7({title:this.title,showLegend:this.showLegend})}};m([x({type:Boolean,json:{write:!0}})],X3.prototype,"showLegend",void 0),X3=g7=m([Y("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],X3);const TV=X3,m7=new bt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let $a=class extends Ie{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Ae.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Ry(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};m([x()],$a.prototype,"index",void 0),m([x({type:m7.apiValues,readOnly:!0,json:{read:m7.read,write:m7.write}})],$a.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],$a.prototype,"field",void 0),m([ri("field")],$a.prototype,"castField",null),m([x({type:String,json:{write:!0}})],$a.prototype,"valueExpression",void 0),m([x({type:String,json:{write:!0}})],$a.prototype,"valueExpressionTitle",void 0),m([x({readOnly:!0})],$a.prototype,"arcadeRequired",null),m([x({type:TV,json:{write:!0}})],$a.prototype,"legendOptions",void 0),$a=m([Y("esri.renderers.visualVariables.VisualVariable")],$a);const Vm=$a;var v7;let wd=v7=class extends Vm{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new v7({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([x({readOnly:!0})],wd.prototype,"cache",null),m([x({type:["color"],json:{type:["colorInfo"]}})],wd.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],wd.prototype,"normalizationField",void 0),m([x({type:[o1e],json:{write:!0}})],wd.prototype,"stops",null),wd=v7=m([Y("esri.renderers.visualVariables.ColorVariable")],wd);const CV=wd;var b7;let _h=b7=class extends Ie{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Mg(t.transparency)}writeOpacity(e,t,i){t[i]=u2(e)}clone(){return new b7({label:this.label,opacity:this.opacity,value:this.value})}};m([x({type:String,json:{write:!0}})],_h.prototype,"label",void 0),m([x({type:Number,json:{type:hi,write:{target:"transparency"}}})],_h.prototype,"opacity",void 0),m([Be("opacity",["transparency"])],_h.prototype,"readOpacity",null),m([Ke("opacity")],_h.prototype,"writeOpacity",null),m([x({type:Number,json:{write:!0}})],_h.prototype,"value",void 0),_h=b7=m([Y("esri.renderers.visualVariables.support.OpacityStop")],_h);const tme=_h;var w7;let _d=w7=class extends Vm{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new w7({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([x({readOnly:!0})],_d.prototype,"cache",null),m([x({type:["opacity"],json:{type:["transparencyInfo"]}})],_d.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],_d.prototype,"normalizationField",void 0),m([x({type:[tme],json:{write:!0}})],_d.prototype,"stops",null),_d=w7=m([Y("esri.renderers.visualVariables.OpacityVariable")],_d);const AV=_d;var _7;let Iu=_7=class extends Vm{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new fe("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new _7({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};m([x({readOnly:!0})],Iu.prototype,"cache",null),m([x({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Iu.prototype,"axis",void 0),m([x({type:["rotation"],json:{type:["rotationInfo"]}})],Iu.prototype,"type",void 0),m([x({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Iu.prototype,"rotationType",void 0),m([x({type:String,json:{write:!0}})],Iu.prototype,"valueExpressionTitle",void 0),m([Ke("web-scene","valueExpressionTitle")],Iu.prototype,"writeValueExpressionTitleWebScene",null),Iu=_7=m([Y("esri.renderers.visualVariables.RotationVariable")],Iu);const PV=Iu;var x7;let Y0=x7=class extends Ie{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new x7({label:this.label,size:this.size,value:this.value})}};m([x({type:String,json:{write:!0}})],Y0.prototype,"label",void 0),m([x({type:Number,cast:di,json:{write:!0}})],Y0.prototype,"size",void 0),m([x({type:Number,json:{write:!0}})],Y0.prototype,"value",void 0),Y0=x7=m([Y("esri.renderers.visualVariables.support.SizeStop")],Y0);const X0=Y0;var S7;let Q3=S7=class extends TV{constructor(){super(...arguments),this.customValues=null}clone(){return new S7({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};m([x({type:[Number],json:{write:!0}})],Q3.prototype,"customValues",void 0),Q3=S7=m([Y("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Q3);const ime=Q3;var Tu,sn;function xh(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function zm(e){return e!=null&&!isNaN(e)&&isFinite(e)}function OV(e){return e.valueExpression?Tu.Expression:e.field&&typeof e.field=="string"?Tu.Field:Tu.Unknown}function rme(e,t){const i=t||OV(e),r=e.valueUnit||"unknown";return i===Tu.Unknown?sn.Constant:e.stops?sn.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?sn.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?sn.Proportional:sn.Additive:sn.Identity:sn.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Tu||(Tu={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(sn||(sn={}));const e_={inches:vi(1,"meters","inches"),feet:vi(1,"meters","feet"),"us-feet":vi(1,"meters","us-feet"),yards:vi(1,"meters","yards"),miles:vi(1,"meters","miles"),"nautical-miles":vi(1,"meters","nautical-miles"),millimeters:vi(1,"meters","millimeters"),centimeters:vi(1,"meters","centimeters"),decimeters:vi(1,"meters","decimeters"),meters:vi(1,"meters","meters"),kilometers:vi(1,"meters","kilometers"),"decimal-degrees":1/mL(1,"meters",Bi.radius)},Sh=Ae.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),kV=new jr,t_=Math.PI,RV=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function FV(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(F=>F.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Sh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof t=="number",l=s?null:t,y=l&&l.attributes;let d=s?t:null;const v=r.field,{ipData:_,hasExpression:M}=r.cache;let T=r.cache.compiledFunc;if(!v&&!M){const F=r.stops;return F&&F[0]&&F[0].color}if(typeof d!="number")if(M){if(ae(i)||ae(i.arcade))return void Sh.error("Use of arcade expressions requires an arcade context");const F={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},V=i.arcade.arcadeUtils,z=V.getViewInfo(F),W=V.createExecContext(l,z);if(!T){const Z=V.createSyntaxTree(r.valueExpression);T=V.createFunction(Z),r.cache.compiledFunc=T}d=V.executeFunction(T,W)}else y&&(d=y[v]);const A=r.normalizationField,R=y!=null&&A!=null?parseFloat(y[A]):void 0;if(d!=null&&(!A||s||!isNaN(R)&&R!==0)){isNaN(R)||s||(d/=R);const F=M7(d,_);if(F){const V=F[0],z=F[1],W=V===z?r.stops[V].color:mt.blendColors(r.stops[V].color,r.stops[z].color,F[2],q(i)?i.color:void 0);return new mt(W)}}}function LV(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(F=>F.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Sh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof t=="number",l=s?null:t,y=l&&l.attributes;let d=s?t:null;const v=r.field,{ipData:_,hasExpression:M}=r.cache;let T=r.cache.compiledFunc;if(!v&&!M){const F=r.stops;return F&&F[0]&&F[0].opacity}if(typeof d!="number")if(M){if(ae(i)||ae(i.arcade))return void Sh.error("Use of arcade expressions requires an arcade context");const F={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},V=i.arcade.arcadeUtils,z=V.getViewInfo(F),W=V.createExecContext(l,z);if(!T){const Z=V.createSyntaxTree(r.valueExpression);T=V.createFunction(Z),r.cache.compiledFunc=T}d=V.executeFunction(T,W)}else y&&(d=y[v]);const A=r.normalizationField,R=y!=null&&A!=null?parseFloat(y[A]):void 0;if(d!=null&&(!A||s||!isNaN(R)&&R!==0)){isNaN(R)||s||(d/=R);const F=M7(d,_);if(F){const V=F[0],z=F[1];if(V===z)return r.stops[V].opacity;{const W=r.stops[V].opacity;return W+(r.stops[z].opacity-W)*F[2]}}}}function NV(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Sh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",l=s==="heading"&&r.rotationType==="arithmetic"?90:0,y=s==="heading"&&r.rotationType==="arithmetic"?-1:1,d=typeof t=="number"?null:t,v=d&&d.attributes,_=r.field,{hasExpression:M}=r.cache;let T=r.cache.compiledFunc,A=0;if(!_&&!M)return A;if(M){if(ae(i)||ae(i.arcade))return void Sh.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,V=F.getViewInfo(R),z=F.createExecContext(d,V);if(!T){const W=F.createSyntaxTree(r.valueExpression);T=F.createFunction(W),r.cache.compiledFunc=T}A=F.executeFunction(T,z)}else v&&(A=v[_]||0);return A=typeof A!="number"||isNaN(A)?null:l+y*A,A}function nme(e,t,i){const r=typeof t=="number",s=r?null:t,l=s&&s.attributes;let y=r?t:null;const{isScaleDriven:d}=e.cache;let v=e.cache.compiledFunc;if(d){const M=q(i)?i.scale:void 0,T=q(i)?i.view:void 0;y=M==null||T==="3d"?sme(e):M}else if(!r)switch(e.inputValueType){case Tu.Expression:{if(ae(i)||ae(i.arcade))return void Sh.error("Use of arcade expressions requires an arcade context");const M={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},T=i.arcade.arcadeUtils,A=T.getViewInfo(M),R=T.createExecContext(s,A);if(!v){const F=T.createSyntaxTree(e.valueExpression);v=T.createFunction(F),e.cache.compiledFunc=v}y=T.executeFunction(v,R);break}case Tu.Field:l&&(y=l[e.field]);break;case Tu.Unknown:y=null}if(!zm(y))return null;if(r||!e.normalizationField)return y;const _=l?parseFloat(l[e.normalizationField]):null;return zm(_)&&_!==0?y/_:null}function sme(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function i_(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(l=>l.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Sh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=DV(nme(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function js(e,t,i){return e==null?null:xh(e)?i_(e,t,i):zm(e)?e:null}function jV(e,t,i){return zm(i)&&e>i?i:zm(t)&&e<t?t:e}function ome(e,t,i,r){var s;return e+((s=js(t.minSize,i,r)||t.minDataValue)!=null?s:0)}function ame(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=e.minSize),js(s,t,i)}function lme(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),l=js(t.minSize,i,r),y=js(t.maxSize,i,r),d=q(r)?r.shape:void 0;if(e<=t.minDataValue)return l;if(e>=t.maxDataValue)return y;if(l==null||y==null)return null;if(t.scaleBy==="area"&&d){const v=d==="circle",_=v?t_*(l/2)**2:l*l,M=_+s*((v?t_*(y/2)**2:y*y)-_);return v?2*Math.sqrt(M/t_):Math.sqrt(M)}return l+s*(y-l)}function ume(e,t,i,r){const s=q(r)?r.shape:void 0,l=e/t.minDataValue,y=js(t.minSize,i,r),d=js(t.maxSize,i,r);let v=null;return v=s==="circle"?2*Math.sqrt(l*(y/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(l*y**2):l*y,jV(v,y,d)}function cme(e,t,i,r,s){var v,_,M;const[l,y,d]=M7(e,s);if(l===y)return js((v=t.stops)==null?void 0:v[l].size,i,r);{const T=js((_=t.stops)==null?void 0:_[l].size,i,r);return T+(js((M=t.stops)==null?void 0:M[y].size,i,r)-T)*d}}function hme(e,t,i,r){const s=(q(r)&&r.resolution?r.resolution:1)*e_[t.valueUnit],l=js(t.minSize,i,r),y=js(t.maxSize,i,r),{valueRepresentation:d}=t;let v=null;return v=d==="area"?2*Math.sqrt(e/t_)/s:d==="radius"||d==="distance"?2*e/s:e/s,jV(v,l,y)}function pme(e){return e}function DV(e,t,i,r,s){switch(t.transformationType){case sn.Additive:return ome(e,t,i,r);case sn.Constant:return ame(t,i,r);case sn.ClampedLinear:return lme(e,t,i,r);case sn.Proportional:return ume(e,t,i,r);case sn.Stops:return cme(e,t,i,r,s);case sn.RealWorldSize:return hme(e,t,i,r);case sn.Identity:return pme(e);case sn.Unknown:return null}}function dme(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let l=js(e.minSize,kV,s),y=js(e.maxSize,kV,s);if(l!=null||y!=null){if(l>y){const d=y;y=l,l=d}return{minSize:l,maxSize:y}}}function fme(e,t,i){if(!e.visualVariables)return;const r=[],s=[],l=[],y=[],d=[];for(const v of e.visualVariables)switch(v.type){case"color":s.push(v);break;case"opacity":l.push(v);break;case"rotation":d.push(v);break;case"size":y.push(v)}return s.forEach(v=>{const _=FV(v,t,i);r.push({variable:v,value:_})}),l.forEach(v=>{const _=LV(v,t,i);r.push({variable:v,value:_})}),d.forEach(v=>{const _=NV(v,t,i);r.push({variable:v,value:_})}),y.forEach(v=>{const _=i_(v,t,i);r.push({variable:v,value:_})}),r.filter(v=>v.value!=null)}function M7(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,l)=>e<s?(r=l,!0):(i=l,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function yme(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const l=s.useSymbolValue?"symbol-value":i_(s,t,i);switch(s.axis){case"width":r[0]=l;break;case"depth":r[1]=l;break;case"height":r[2]=l;break;case"width-and-depth":r[0]=l,r[1]=l;break;case"all":case void 0:case null:r[0]=l,r[1]=l,r[2]=l;break;default:DF(s.axis)}}return r}var $7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getAllSizes:yme,getColor:FV,getOpacity:LV,getRotationAngle:NV,getSize:i_,getSizeForValue:DV,getSizeFromNumberOrVariable:js,getSizeRangeAtScale:dme,getVisualVariableValues:fme,viewScaleRE:RV}),E7;const r_=new bt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),I7=new bt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function VV(e){if(e!=null)return typeof e=="string"||typeof e=="number"?di(e):e.type==="size"?xh(e)?e:(delete(e=te({},e)).type,new bi(e)):void 0}function zV(e,t,i){if(typeof e!="object")return e;const r=new bi;return r.read(e,i),r}let bi=E7=class extends Vm{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&RV.test(this.valueExpression)}}set expression(e){Ae.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){xh(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),xh(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return OV(this)}set maxDataValue(e){e&&this.stops&&(Ae.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Ae.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return VV(e)}readMaxSize(e,t,i){return zV(e,t,i)}set minDataValue(e){e&&this.stops&&(Ae.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Ae.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return VV(e)}readMinSize(e,t,i){return zV(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Ae.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return rme(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const s=this.index,l=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new fe("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?I7.read(e):null}clone(){return new E7({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:xh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:xh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===sn.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===sn.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};m([x({readOnly:!0})],bi.prototype,"cache",null),m([x({type:r_.apiValues,json:{type:r_.jsonValues,origins:{"web-map":{read:!1}},read:r_.read,write:r_.write}})],bi.prototype,"axis",void 0),m([x({type:String,value:null,json:{read:!1}})],bi.prototype,"expression",null),m([x()],bi.prototype,"index",null),m([x({type:String,readOnly:!0})],bi.prototype,"inputValueType",null),m([x({type:ime,json:{write:!0}})],bi.prototype,"legendOptions",void 0),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"maxDataValue",null),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"maxSize",null),m([ri("maxSize")],bi.prototype,"castMaxSize",null),m([Be("maxSize")],bi.prototype,"readMaxSize",null),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"minDataValue",null),m([x({type:Number,value:null,json:{write:!0}})],bi.prototype,"minSize",null),m([ri("minSize")],bi.prototype,"castMinSize",null),m([Be("minSize")],bi.prototype,"readMinSize",null),m([x({type:String,json:{write:!0}})],bi.prototype,"normalizationField",void 0),m([x({readOnly:!0})],bi.prototype,"arcadeRequired",null),m([x({type:String})],bi.prototype,"scaleBy",void 0),m([x({type:[X0],value:null,json:{write:!0}})],bi.prototype,"stops",null),m([x({type:["outline"],json:{write:!0}})],bi.prototype,"target",void 0),m([x({type:String,readOnly:!0})],bi.prototype,"transformationType",null),m([x({type:["size"],json:{type:["sizeInfo"]}})],bi.prototype,"type",void 0),m([x({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],bi.prototype,"useSymbolValue",void 0),m([x({type:String,json:{write:!0}})],bi.prototype,"valueExpression",void 0),m([Be("valueExpression",["valueExpression","expression"])],bi.prototype,"readValueExpression",null),m([Ke("web-scene","valueExpression")],bi.prototype,"writeValueExpressionWebScene",null),m([x({type:["radius","diameter","area","width","distance"],json:{write:!0}})],bi.prototype,"valueRepresentation",void 0),m([x({type:I7.apiValues,json:{write:I7.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],bi.prototype,"valueUnit",void 0),m([Be("valueUnit")],bi.prototype,"readValueUnit",null),bi=E7=m([Y("esri.renderers.visualVariables.SizeVariable")],bi);const n_=bi,gme={color:CV,size:n_,opacity:AV,rotation:PV},mme=new bt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),vme=/^\[([^\]]+)\]$/i;let s_=class extends ot{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:s}=t,l=r&&r.match(vme),y=l&&l[1];if(y&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:y})),e)return e.map(d=>{const v=mme.read(d.type),_=gme[v];_||(Ae.getLogger(this.declaredClass).warn(`Unknown variable type: ${v}`),i&&i.messages&&i.messages.push(new rs("visual-variable:unsupported",`visualVariable of type '${v}' is not supported`,{definition:d,context:i})));const M=new _;return M.read(d,i),M})}writeVariables(e,t){const i=[];for(const r of e){const s=r.toJSON(t);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};m([x()],s_.prototype,"visualVariables",null),s_=m([Y("esri.renderers.visualVariables.VisualVariableFactory")],s_);const bme=s_,wme={base:Vm,key:"type",typeMap:{opacity:AV,color:CV,rotation:PV,size:n_}},Q0=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new bme}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,l){r[s]=this._vvFactory.writeVariables(i,l)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(l=>l.type===i&&(typeof r=="string"?l.target===r:r!==!1||!l.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const l of s)l&&(l.field&&Ys(i,r,l.field),l.normalizationField&&Ys(i,r,l.normalizationField),l.valueExpression&&(_me(l.valueExpression,i,r)||await as(i,r,l.valueExpression)))}};return m([x({types:[wme],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),m([Be("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),m([Ke("visualVariables")],t.prototype,"writeVisualVariables",null),t=m([Y("esri.renderers.mixins.VisualVariablesMixin")],t),t};function _me(e,t,i){const r=Qge(e);return!!q(r)&&(Ys(t,i,r),!0)}const Gm={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function xme(e,t=Gm){var d,v;if(!e)return{symbol:null};const{retainId:i=Gm.retainId,ignoreDrivers:r=Gm.ignoreDrivers,hasLabelingContext:s=Gm.hasLabelingContext,retainCIM:l=Gm.retainCIM}=t;let y=null;if(Bp(e)||e instanceof Up)y=e.clone();else if(e.type==="cim"){const _=(v=(d=e.data)==null?void 0:d.symbol)==null?void 0:v.type;if(_!=="CIMPointSymbol")return{error:new fe("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${_||"unknown"}' is unsupported in 3D`,{symbol:e})};y=l?e.clone():Gp.fromCIMSymbol(e)}else if(e instanceof us)y=O2.fromSimpleLineSymbol(e);else if(e instanceof ro)y=Gp.fromSimpleMarkerSymbol(e);else if(e instanceof F2)y=Gp.fromPictureMarkerSymbol(e);else if(e instanceof pl)y=t.geometryType&&t.geometryType==="mesh"?R2.fromSimpleFillSymbol(e):Kg.fromSimpleFillSymbol(e);else{if(!(e instanceof g0))return{error:new fe("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=s?A2.fromTextSymbol(e):Gp.fromTextSymbol(e)}if(i&&y&&y.type!=="cim"&&(y.id=e.id),r&&Bp(y))for(let _=0;_<y.symbolLayers.length;++_)y.symbolLayers.getItemAt(_)._ignoreDrivers=!0;return{symbol:y}}const Sme=["building-scene","integrated-mesh","point-cloud","scene"];function o_(e,t,i,r){const s=UV(e,{},{context:r,isLabelSymbol:!1});q(s)&&(t[i]=s)}function GV(e,t,i,r){const s=UV(e,{},{context:r,isLabelSymbol:!0});q(s)&&(t[i]=s)}function qV(e){return e instanceof f0||e instanceof Up}function UV(e,t,i){var v;if(ae(e))return null;const{context:r,isLabelSymbol:s}=i,l=r==null?void 0:r.origin,y=r==null?void 0:r.messages;if(l==="web-scene"&&!qV(e)){const _=xme(e,{retainCIM:!0,hasLabelingContext:s});return q(_.symbol)?_.symbol.write(t,r):(y==null||y.push(new fe("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:_.error})),null)}const d=(v=r==null?void 0:r.layer)==null?void 0:v.type;return l!=="web-map"&&(l!=="portal-item"||d&&Sme.includes(d))||!qV(e)?e.write(t,r):(y==null||y.push(new fe("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null)}function uTe(e,t){return bue(e,null,t)}const e1={types:N2,json:{write:{writer:o_},origins:{"web-scene":{types:TF,write:{writer:o_},read:{reader:$c({types:TF})}}}}},BV={types:{base:ls,key:"type",typeMap:{"simple-fill":Ts.typeMap["simple-fill"],"picture-fill":Ts.typeMap["picture-fill"],"polygon-3d":Ts.typeMap["polygon-3d"]}},json:{write:{writer:o_},origins:{"web-scene":{type:Kg,write:{writer:o_}}}}},a_={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var T7;let Mh=T7=class extends Ie{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new T7({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};m([x({type:String,json:{write:!0}})],Mh.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Mh.prototype,"label",void 0),m([x({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Mh.prototype,"minValue",void 0),m([x({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Mh.prototype,"maxValue",void 0),m([x(e1)],Mh.prototype,"symbol",void 0),Mh=T7=m([Y("esri.renderers.support.ClassBreakInfo")],Mh);const l_=Mh;var C7;const HV="log",u_="percent-of-total",c_="field",h_=new bt({esriNormalizeByLog:HV,esriNormalizeByPercentOfTotal:u_,esriNormalizeByField:c_}),Mme=Ai(l_);let zr=C7=class extends Q0(Eu){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const l=new l_;return l.read(s,i),l.minValue==null&&(l.minValue=r),l.maxValue==null&&(l.maxValue=l.minValue),r=l.maxValue,l})}writeClassBreakInfos(e,t,i,r){const s=e.map(l=>l.write({},r));this._areClassBreaksConsecutive()&&s.forEach(l=>delete l.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(Ae.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Ry(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&c_||i&&u_||null,t&&i&&Ae.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):e!==c_&&e!==u_||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new l_({minValue:e,maxValue:t,symbol:CF(i)}):Mme(me(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ae(t)||ae(t.arcade))&&Ae.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(ae(t)||ae(t.arcade))&&(i=De(te({},i),{arcade:await el()}));const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void Ae.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ae(t)||ae(t.arcade))){const s=await el(),{arcadeUtils:l}=s;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i=De(te({},i),{arcade:s})}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new C7({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:me(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:me(this.visualVariables),legendOptions:me(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),as(e,t,this.valueExpression)];Ys(e,t,this.field),Ys(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=hn(t,{}),{valueExpression:y}=this;let d=this._compiledValueExpression.valueExpression===y?this._compiledValueExpression.compiledFunction:null;const v=Wt(l).arcadeUtils;if(!d){const M=v.createSyntaxTree(y);d=v.createFunction(M),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=y;const _=v.executeFunction(d,v.createExecContext(e,v.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(_)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const l=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===HV)s=Math.log(s)*Math.LOG10E;else if(r!==u_||l==null||isNaN(l)){if(r===c_&&!isNaN(y)){if(isNaN(s)||isNaN(y))return-1;s/=y}}else s=s/l*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};m([x(BV)],zr.prototype,"backgroundFillSymbol",void 0),m([x({type:[l_]})],zr.prototype,"classBreakInfos",void 0),m([Be("classBreakInfos")],zr.prototype,"readClassBreakInfos",null),m([Ke("classBreakInfos")],zr.prototype,"writeClassBreakInfos",null),m([x({type:String,json:{write:!0}})],zr.prototype,"defaultLabel",void 0),m([x(e1)],zr.prototype,"defaultSymbol",void 0),m([x({type:String,json:{write:!0}})],zr.prototype,"field",void 0),m([ri("field")],zr.prototype,"castField",null),m([x({type:Boolean})],zr.prototype,"isMaxInclusive",void 0),m([x({type:K0,json:{write:!0}})],zr.prototype,"legendOptions",void 0),m([x({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],zr.prototype,"minValue",null),m([x({type:String,json:{write:!0}})],zr.prototype,"normalizationField",void 0),m([x({type:Number,cast:e=>$o(e),json:{write:!0}})],zr.prototype,"normalizationTotal",void 0),m([x({type:h_.apiValues,value:null,json:{type:h_.jsonValues,read:h_.read,write:h_.write}})],zr.prototype,"normalizationType",null),m([wt({classBreaks:"class-breaks"})],zr.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],zr.prototype,"valueExpression",void 0),m([x({type:String,json:{write:!0}})],zr.prototype,"valueExpressionTitle",void 0),zr=C7=m([Y("esri.renderers.ClassBreaksRenderer")],zr);const WV=zr;class $me{constructor(t,i){this._storage=new aD,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const JV="esri.renderers.support.DictionaryLoader",Eme={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class A7{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new $me(100),this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(R){if(Zs(R))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const R of this._symbolFields){const F=this.fieldMap[R];if(F&&t.attributes[F]!=null){const V=""+t.attributes[F];s[R]=V}else s[R]=""}const l=r==null?void 0:r(s,i);if(!l||typeof l!="string")return null;const y=C9(l).toString(),d=this._symbolCache.get(y);if(d)return d.catch(()=>{this._symbolCache.pop(y)}),d;const v=l.split(";"),_=[],M=[];for(const R of v)if(R)if(R.includes("po:")){const F=R.substr(3).split("|");if(F.length===3){const V=F[0],z=F[1];let W=F[2];if(z==="DashTemplate")W=W.split(" ").map(Z=>Number(Z));else if(z==="Color"){const Z=new mt(W).toRgba();W=[Z[0],Z[1],Z[2],255*Z[3]]}else W=Number(W);M.push({primitiveName:V,propertyName:z,value:W})}}else if(R.includes("|")){for(const F of R.split("|"))if(this._itemNames.has(F)){_.push(F);break}}else this._itemNames.has(R)&&_.push(R);const T=!q(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",A=this._cimPartsToCIMSymbol(_,M,T,i);return this._symbolCache.put(y,A,1),A}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Ae.getLogger(JV).error("no valid URL!");const i=li(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:q(t)?t.signal:null}),[{data:r}]=await Promise.all([i,el()]);if(!r)throw this._dictionaryPromise=null,new fe("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,l=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=l.symbol;const y={};if(this.config){const _=this.config;for(const M in _)y[M]=_[M]}if(l.configuration)for(const _ of l.configuration)y.hasOwnProperty(_.name)||(y[_.name]=_.value);const d=[];if(q(t)&&t.fields&&this.fieldMap)for(const _ of this._symbolFields){const M=this.fieldMap[_],T=t.fields.filter(A=>A.name===M);T.length>0&&d.push(De(te({},T[0]),{name:_}))}const v=Mse(s,q(t)?t.spatialReference:null,d,y).then(_=>{const M={scale:0};return(T,A)=>{if(ae(_))return null;const R=_.repurposeFeature({geometry:null,attributes:T});return M.scale=q(A)?A.scale:void 0,_.evaluate({$feature:R,$view:M})}}).catch(_=>(Ae.getLogger(JV).error("Creating dictinoary expression failed:",_),null));return this._dictionaryPromise=v,v}async _cimPartsToCIMSymbol(t,i,r,s){const l=new Array(t.length);for(let v=0;v<t.length;v++)l[v]=this._getSymbolPart(t[v],s);const y=await Promise.all(l),d=this.fieldMap;if(d)for(const v of y)ZV(v,d);return new zc({data:this._combineSymbolParts(y,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(l=>l.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=li(r,te({responseType:"json",query:{f:"json"}},i));this._ongoingRequests.set(t,s);try{return(await s).data}catch(l){throw this._ongoingRequests.delete(t),l}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const s=te({},t[0]);if(t.length>1){s.symbolLayers=[];for(const l of t){const y=l;s.symbolLayers.unshift(...y.symbolLayers)}}return r&&(s.callout=Eme),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}}function ZV(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&Ime(s,t)}}function Ime(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":ZV(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}var cTe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",DictionaryLoader:A7}),P7;let Ea=P7=class extends Q0(Eu){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new A7(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){(r==null?void 0:r.origin)||super.writeVisualVariables(e,t,i,r)}clone(){return new P7({config:me(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:me(this.fieldMap),url:me(this.url),visualVariables:me(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await as(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};m([x({type:A7})],Ea.prototype,"_loader",null),m([x({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ea.prototype,"config",void 0),m([x({type:Object,json:{write:!0}})],Ea.prototype,"fieldMap",void 0),m([x({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ea.prototype,"scaleExpression",void 0),m([Ke("scaleExpression")],Ea.prototype,"writeData",null),m([x({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Ea.prototype,"scaleExpressionTitle",void 0),m([x({type:String,json:{write:!0}})],Ea.prototype,"url",void 0),m([Ke("visualVariables")],Ea.prototype,"writeVisualVariables",null),Ea=P7=m([Y("esri.renderers.DictionaryRenderer")],Ea);const Tme=Ea;var O7;let Cu=O7=class extends Ie{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Ae.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Ry(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new O7({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([x({type:mt,json:{type:[Number],write:!0}})],Cu.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],Cu.prototype,"field",void 0),m([ri("field")],Cu.prototype,"castField",null),m([x({type:String,json:{write:!0}})],Cu.prototype,"label",void 0),m([x({type:String,json:{write:!0}})],Cu.prototype,"valueExpression",void 0),m([x({type:String,json:{write:!0}})],Cu.prototype,"valueExpressionTitle",void 0),Cu=O7=m([Y("esri.renderers.support.AttributeColorInfo")],Cu);const KV=Cu;var k7;let p_=k7=class extends Ie{constructor(){super(...arguments),this.unit=null}clone(){return new k7({unit:this.unit})}};m([x({type:String,json:{write:!0}})],p_.prototype,"unit",void 0),p_=k7=m([Y("esri.renderers.support.DotDensityLegendOptions")],p_);const Cme=p_;var R7;let Ds=R7=class extends Q0(Eu){constructor(e){super(e),this.attributes=null,this.backgroundColor=new mt([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new us,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new pl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e,t;return(t=(e=this.attributes)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))!=null?t:""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new R7({attributes:me(this.attributes),backgroundColor:me(this.backgroundColor),dotBlendingEnabled:me(this.dotBlendingEnabled),dotShape:me(this.dotShape),dotSize:me(this.dotSize),dotValue:me(this.dotValue),legendOptions:me(this.legendOptions),outline:me(this.outline),referenceScale:me(this.referenceScale),visualVariables:me(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){var i;await this.collectVVRequiredFields(e,t);for(const r of(i=this.attributes)!=null?i:[])r.valueExpression&&await as(e,t,r.valueExpression),r.field&&e.add(r.field)}};m([x({type:[KV],json:{write:!0}})],Ds.prototype,"attributes",void 0),m([x({type:mt,json:{write:!0}})],Ds.prototype,"backgroundColor",void 0),m([x({type:Boolean,json:{write:!0}})],Ds.prototype,"dotBlendingEnabled",void 0),m([x({type:String,json:{write:!1}})],Ds.prototype,"dotShape",void 0),m([x({type:Number,json:{write:!0}})],Ds.prototype,"dotSize",void 0),m([x({type:Cme,json:{write:!0}})],Ds.prototype,"legendOptions",void 0),m([x({type:us,json:{default:null,write:!0}})],Ds.prototype,"outline",void 0),m([x({type:Number,json:{write:!0}})],Ds.prototype,"dotValue",void 0),m([x({type:Number,json:{write:!0}})],Ds.prototype,"referenceScale",void 0),m([x({type:Number,json:{write:!0}})],Ds.prototype,"seed",void 0),m([wt({dotDensity:"dot-density"})],Ds.prototype,"type",void 0),Ds=R7=m([Y("esri.renderers.DotDensityRenderer")],Ds);const Ame=Ds;let t1=class extends yr(Ie){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};m([x({type:String,json:{write:!0}})],t1.prototype,"minLabel",void 0),m([x({type:String,json:{write:!0}})],t1.prototype,"maxLabel",void 0),m([x({type:String,json:{write:!0}})],t1.prototype,"title",void 0),t1=m([Y("esri.renderers.support.HeatmapLegendOptions")],t1);function i1(){return[0,0,0,0]}function Pme(e){return[e[0],e[1],e[2],e[3]]}function Ia(e,t,i,r){return[e,t,i,r]}function YV(e){const t=i1(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function XV(e,t){return new Float64Array(e,t,4)}function QV(){return i1()}function ez(){return Ia(1,1,1,1)}function tz(){return Ia(1,0,0,0)}function iz(){return Ia(0,1,0,0)}function rz(){return Ia(0,0,1,0)}function nz(){return Ia(0,0,0,1)}const Ome=QV(),kme=ez(),Rme=tz(),Fme=iz(),Lme=rz(),Nme=nz();Object.freeze(Object.defineProperty({__proto__:null,create:i1,clone:Pme,fromValues:Ia,fromArray:YV,createView:XV,zeros:QV,ones:ez,unitX:tz,unitY:iz,unitZ:rz,unitW:nz,ZEROS:Ome,ONES:kme,UNIT_X:Rme,UNIT_Y:Fme,UNIT_Z:Lme,UNIT_W:Nme},Symbol.toStringTag,{value:"Module"}));const F7=2.4;function jme(e){return ko(e*F7)}function Dme(e){return dR(e)/F7}function Vme(e,t,i,r){let{color:s,ratio:l}=t,{color:y,ratio:d}=i;if(d===l){const _=1e-6;d===1?l-=_:d+=_}const v=Tn((r-l)/(d-l),0,1);s2(e,s.toArray(),y.toArray(),v)}function hTe(e){const t=512,i=new Uint8ClampedArray(4*t);if(e=e.filter(({ratio:d})=>d>=0&&d<=1).sort((d,v)=>d.ratio-v.ratio).map(({color:d,ratio:v})=>({color:d,ratio:Math.max(v,.001)})),e.length<1)return i;let r=e[0],s=e[0],l=1;const y=i1();for(let d=0;d<t;d++){const v=(d+.5)/t;for(;v>s.ratio&&l<e.length;)r=s,s=e[l++];Vme(y,r,s,v),i.set(y,4*d)}return i}function pTe(e,t,i,r){const{radius:s,fieldOffset:l,field:y}=t,d=Math.round(dR(s)),v=new Float64Array(i*r);let _,M=Number.NEGATIVE_INFINITY;const T=qme(y,l),A=new Set;for(const R of e){const F=R.getCursor();for(;F.next();){const V=F.getObjectId();if(A.has(V))continue;A.add(V);const z=F.readLegacyPointGeometry(),W=128;if(z.x<-W||z.x>=i+W||z.y<-W||z.y>r+W)continue;const Z=+T(F),Q=Math.max(0,Math.round(z.x)-d),ee=Math.max(0,Math.round(z.y)-d),re=Math.min(r,Math.round(z.y)+d),ie=Math.min(i,Math.round(z.x)+d);for(let he=ee;he<re;he++)for(let be=Q;be<ie;be++){const we=he*i+be,xe=Gme(z.x-be,z.y-he,d);_=v[we]+=xe*Z,_>M&&(M=_)}}}return{matrix:v.buffer,max:M}}function dTe(e,t,i,r,s,l){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const y=e.getImageData(0,0,t,t);i&&r&&y.data.set(new Uint8ClampedArray(zme(t,i,r,s,l))),e.putImageData(y,0,0)}function zme(e,t,i,r,s){const l=new Uint32Array(e*e),y="buffer"in t?t:new Float64Array(t),d="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),v=d.length/(s-r);for(let _=0;_<y.length;_++){const M=y[_],T=Math.floor((M-r)*v);l[_]=d[Tn(T,0,d.length-1)]}return l.buffer}function Gme(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function fTe(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function qme(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var L7;const sz="esri.renderers.HeatmapRenderer",Ume=Ae.getLogger(sz);function oz(e){if(e!=null){const{maxDensity:i,minDensity:r,radius:s}=e;if(i!=null||r!=null||s!=null){const t=e,{blurRadius:l,maxPixelIntensity:y,minPixelIntensity:d}=t;return YT(t,["blurRadius","maxPixelIntensity","minPixelIntensity"])}}return e}let on=L7=class extends Eu{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Em({ratio:0,color:new mt("rgba(255, 140, 0, 0)")}),new Em({ratio:.75,color:new mt("rgba(255, 140, 0, 1)")}),new Em({ratio:.9,color:new mt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return oz(e)}get blurRadius(){return Dme(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",jme(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(F7**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Lr(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,Nf(()=>{Vre(Ume,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=oz(e),super.read(e,t)}getSymbol(){return new ro}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Ys(e,t,i),r&&typeof r=="string"&&await as(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new L7({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:me(this.colorStops),field:this.field,legendOptions:me(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};m([x({type:d7,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],on.prototype,"authoringInfo",void 0),m([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],on.prototype,"blurRadius",null),m([x({type:[Em],json:{write:!0}})],on.prototype,"colorStops",void 0),m([x({type:String,json:{write:!0}})],on.prototype,"field",void 0),m([x({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],on.prototype,"fieldOffset",void 0),m([x({type:t1,json:{write:!0}})],on.prototype,"legendOptions",void 0),m([x({type:Number,json:{write:!0}})],on.prototype,"maxDensity",void 0),m([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],on.prototype,"maxPixelIntensity",null),m([x({type:Number,json:{write:!0}})],on.prototype,"minDensity",void 0),m([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],on.prototype,"minPixelIntensity",null),m([x({type:Number,cast:di,json:{write:!0}})],on.prototype,"radius",void 0),m([x({type:Number,range:{min:0},json:{default:0,write:!0}})],on.prototype,"referenceScale",void 0),m([wt({heatmap:"heatmap"})],on.prototype,"type",void 0),m([x({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],on.prototype,"valueExpression",void 0),m([x({type:String})],on.prototype,"valueExpressionTitle",void 0),m([x({readOnly:!0})],on.prototype,"_pixelIntensityToDensity",null),on=L7=m([Y(sz)],on);const az=on;let xd=class extends yr(Ie){constructor(){super(...arguments),this.color=new mt([0,0,0,0]),this.label=null,this.threshold=0}};m([x({type:mt,json:{write:!0}})],xd.prototype,"color",void 0),m([x({type:String,json:{write:!0}})],xd.prototype,"label",void 0),m([x({type:Number,range:{min:0,max:1},json:{write:!0}})],xd.prototype,"threshold",void 0),xd=m([Y("esri.renderers.support.OthersCategory")],xd);let d_=class extends yr(Ie){constructor(){super(...arguments),this.title=null}};m([x({type:String,json:{write:!0}})],d_.prototype,"title",void 0),d_=m([Y("esri.renderers.support.PieChartLegendOptions")],d_);let co=class extends Q0(yr(Eu)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new mt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new xd,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new ro({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(q)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await as(e,t,i.valueExpression),i.field&&e.add(i.field)}};m([x({type:[KV],json:{write:!0}})],co.prototype,"attributes",void 0),m([x({type:pl,json:{default:null,write:!0}})],co.prototype,"backgroundFillSymbol",void 0),m([x({type:mt,json:{write:!0}})],co.prototype,"defaultColor",void 0),m([x({type:String,json:{write:!0}})],co.prototype,"defaultLabel",void 0),m([x({type:Number,range:{min:0,max:1},json:{write:!0}})],co.prototype,"holePercentage",void 0),m([x({type:xd,json:{write:!0}})],co.prototype,"othersCategory",void 0),m([x({type:d_,json:{write:!0}})],co.prototype,"legendOptions",void 0),m([x({type:us,json:{default:null,write:!0}})],co.prototype,"outline",void 0),m([x({type:Number,cast:di,json:{write:!0}})],co.prototype,"size",void 0),m([wt({pieChart:"pie-chart"})],co.prototype,"type",void 0),co=m([Y("esri.renderers.PieChartRenderer")],co);const Bme=co;var N7;let Sd=N7=class extends Q0(Eu){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new N7({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:me(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};m([x({type:String,json:{write:!0}})],Sd.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Sd.prototype,"label",void 0),m([x(e1)],Sd.prototype,"symbol",void 0),m([wt({simple:"simple"})],Sd.prototype,"type",void 0),Sd=N7=m([Y("esri.renderers.SimpleRenderer")],Sd);const r1=Sd,Hme=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function j7(e){return e instanceof ot}function lz(e){return e instanceof gt?Object.keys(e.items):j7(e)?Lr(e).keys():e?Object.keys(e):[]}function f_(e,t){return e instanceof gt?e.items[t]:e[t]}function Wme(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function qm(e){return e?e.declaredClass:null}function uz(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=lz(e),s=lz(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||Wme(e,t))return{type:"complete",oldValue:e,newValue:t};const l=s.filter(T=>!r.includes(T)),y=r.filter(T=>!s.includes(T)),d=r.filter(T=>s.includes(T)&&f_(e,T)!==f_(t,T)).concat(l,y).sort(),v=qm(e);if(v&&Hme.includes(v)&&d.length)return{type:"complete",oldValue:e,newValue:t};let _;const M=j7(e)&&j7(t);for(const T of d){const A=f_(e,T),R=f_(t,T);let F;if((M||typeof A!="function"&&typeof R!="function")&&A!==R&&(A!=null||R!=null)){if(i&&i[T]&&typeof i[T]=="function")F=i[T](A,R);else if(A instanceof Date&&R instanceof Date){if(A.getTime()===R.getTime())continue;F={type:"complete",oldValue:A,newValue:R}}else F=typeof A=="object"&&typeof R=="object"&&qm(A)===qm(R)?uz(A,R):{type:"complete",oldValue:A,newValue:R};q(F)&&(q(_)?_.diff[T]=F:_={type:"partial",diff:{[T]:F}})}}return _}function Jme(e,t){if(ae(e))return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const l=r.diff[s];if(!l)return!1;r=l}}return!0}function yTe(e,t){for(const i of t)if(Jme(e,i))return!0;return!1}function Zme(e,t){if(!(typeof e=="function"||typeof t=="function"||ae(e)&&ae(t)))return ae(e)||ae(t)||typeof e=="object"&&typeof t=="object"&&qm(e)!==qm(t)?{type:"complete",oldValue:e,newValue:t}:uz(e,t)}function y_(e){if(ae(e))return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!y_(i))return!1;for(const i of t.removed)if(!y_(i))return!1;for(const i of t.changed)if(!y_(i))return!1;return!0}case"partial":for(const t in e.diff)if(!y_(e.diff[t]))return!1;return!0}}let n1=class extends yr(Ie){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};m([x(a_)],n1.prototype,"value",void 0),m([x(a_)],n1.prototype,"value2",void 0),m([x(a_)],n1.prototype,"value3",void 0),n1=m([Y("esri.renderers.support.UniqueValue")],n1);const s1=n1;let $h=class extends yr(Ie){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return t==="string"||t==="number"?e.map(i=>new s1({value:i})):t==="object"?e[0]instanceof s1?e:e.map(i=>new s1(i)):null}};m([x({type:String,json:{write:!0}})],$h.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],$h.prototype,"label",void 0),m([x(e1)],$h.prototype,"symbol",void 0),m([x({type:[s1],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new s1({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const s=[r.value,r.value2,r.value3].filter(q).map(l=>l.toString());i.push(s)}t.values=i}}}})],$h.prototype,"values",void 0),m([ri("values")],$h.prototype,"castValues",null),$h=m([Y("esri.renderers.support.UniqueValueClass")],$h);const cz=$h;let Um=class extends yr(Ie){constructor(e){super(e),this.heading=null,this.classes=null}};m([x({type:String,json:{write:!0}})],Um.prototype,"heading",void 0),m([x({type:[cz],json:{write:!0}})],Um.prototype,"classes",void 0),Um=m([Y("esri.renderers.support.UniqueValueGroup")],Um);const D7=Um;var V7;let Md=V7=class extends Ie{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new V7({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};m([x({type:String,json:{write:!0}})],Md.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Md.prototype,"label",void 0),m([x(e1)],Md.prototype,"symbol",void 0),m([x(a_)],Md.prototype,"value",void 0),Md=V7=m([Y("esri.renderers.support.UniqueValueInfo")],Md);const Bm=Md,Kme=()=>!!Me("enable-feature:force-wosr"),gTe=()=>!!Me("enable-feature:SceneLayer-editing"),z7={};async function Yme(e,t){try{return{data:(await tve(e,t)).data,baseUrl:ble(e),styleUrl:e}}catch(i){return Lf(i),null}}function Xme(e,t,i){const r=q(t.portal)?t.portal:Es.getDefault();let s;const l=`${r.url} - ${r.user&&r.user.username} - ${e}`;return z7[l]||(z7[l]=Qme(e,r,i).then(y=>(s=y,y.fetchData())).then(y=>{var d;return{data:y,baseUrl:(d=s.itemUrl)!=null?d:"",styleName:e}})),z7[l]}function Qme(e,t,i){return t.load(i).then(()=>{const r=new du({disableExtraQuery:!0,query:`owner:${hz} AND type:${pz} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var y;let s=null;const l=e.toLowerCase();if(r&&Array.isArray(r)){for(const d of r)if(((y=d.typeKeywords)==null?void 0:y.some(_=>_.toLowerCase()===l))&&d.type===pz&&d.owner===hz){s=d;break}}if(!s)throw new fe("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function eve(e,t,i){return e&&q(e.styleUrl)?Yme(e.styleUrl,i):e&&q(e.styleName)?Xme(e.styleName,t,i):Promise.reject(new fe("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function mTe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function vTe(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Kme()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function tve(e,t){const i=te({responseType:"json",query:{f:"json"}},t);return li(ua(e),i)}const hz="esri_en",pz="Style",bTe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Hm;const dz="esri.renderers.UniqueValueRenderer",Eh=Ae.getLogger(dz),fz="uvInfos-watcher",yz="uvGroups-watcher",ive=",",rve=Ai(Bm);function nve(e){const{field1:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:l,valueExpression:y}=e,d=!(!t||!i);return[{classes:(l!=null?l:[]).map(v=>{var W;const{symbol:_,label:M,value:T,description:A}=v,[R,F,V]=d?((W=T==null?void 0:T.toString())==null?void 0:W.split(s||""))||[]:[T],z=[];return(t||y)&&z.push(R),i&&z.push(F),r&&z.push(V),{symbol:_,label:M,values:[z],description:A}})}]}let ar=Hm=class extends Q0(Eu){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let l=0;l<i.length;l++){const y=t.find(d=>d.value===i[l].value);y?Zme(y,i[l])?(s.changed.push({type:"complete",oldValue:y,newValue:i[l]}),r=!0):s.unchanged.push({oldValue:y,newValue:i[l]}):(s.added.push(i[l]),r=!0)}for(let l=0;l<t.length;l++)i.find(y=>y.value===t[l].value)||(s.removed.push(t[l]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:Ry(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new fe("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Eh.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Es.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=u0(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Ng(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Eh.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Eh.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Eh.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?rve(e):new Bm({value:e,symbol:CF(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Eh.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t){for(let i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(ae(t)||ae(t.arcade))&&(i=De(te({},i),{arcade:await el()})),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void Eh.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ae(i)||ae(i.arcade))){const s=await el(),{arcadeUtils:l}=s;l.hasGeometryOperations(this.valueExpression)&&await l.enableGeometryOperations(),i=De(te({},i),{arcade:s})}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){var t;const e=[];for(const i of(t=this.uniqueValueInfos)!=null?t:[])i.symbol&&e.push(i.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((s,l)=>s+l.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Hm({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:me(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:me(this.visualVariables),legendOptions:me(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:me(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=me(this.uniqueValueInfos),i=me(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(me(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),as(e,t,this.valueExpression)];Ys(e,t,this.field),Ys(e,t,this.field2),Ys(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return eve(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new Up({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const l=new Bm({value:r.name,symbol:s});t.push(l),this._valueInfoMap[r.name]=l}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)==null?void 0:i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",ive)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(fz);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(Ve(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,fz)}}_watchUniqueValueGroups(){this.removeHandles(yz);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(Ve(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes)t.push(Ve(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,l)=>{s!==l&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,yz)}}_updateInfosFromGroups(){var v;if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:l,valueExpression:y}=this;if(!t&&!y)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const d=!(!t||!i);for(const _ of l)for(const M of(v=_.classes)!=null?v:[]){const{symbol:T,label:A,values:R,description:F}=M;for(const V of R!=null?R:[]){const{value:z,value2:W,value3:Z}=V,Q=[z];i&&Q.push(W),r&&Q.push(Z);const ee=d?Q.join(s||""):Q[0];e.push(new Bm({symbol:T,label:A,value:ee,description:F}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:l}=this;if(!t&&!r||!l.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!t||!i),d=l.map(_=>{var W;const{symbol:M,label:T,value:A,description:R}=_,[F,V,z]=y?((W=A==null?void 0:A.toString())==null?void 0:W.split(s||""))||[]:[A];return new cz({symbol:M,label:T,description:R,values:[new s1({value:F,value2:V,value3:z})]})}),v=[new D7({classes:d})];e&&Object.freeze(v),this._set("uniqueValueGroups",v),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=hn(t,{});let y=this._cache.compiledFunc;const d=Wt(l).arcadeUtils;if(!y){const _=d.createSyntaxTree(this.valueExpression);y=d.createFunction(_),this._cache.compiledFunc=y}const v=d.executeFunction(y,d.createExecContext(e,d.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[v+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const s=this.field2,l=this.field3,y=[];t&&y.push(i[t]),s&&y.push(i[s]),l&&y.push(i[l]),r=y.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new Hm(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Es.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Eh.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new Hm(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Eh.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};m([x({readOnly:!0})],ar.prototype,"_cache",null),m([wt({uniqueValue:"unique-value"})],ar.prototype,"type",void 0),m([x(BV)],ar.prototype,"backgroundFillSymbol",void 0),m([x({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ar.prototype,"field",null),m([ri("field")],ar.prototype,"castField",null),m([Ke("field")],ar.prototype,"writeField",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"field2",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"field3",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"valueExpression",null),m([x({type:String,json:{write:!0}})],ar.prototype,"valueExpressionTitle",void 0),m([x({type:K0,json:{write:!0}})],ar.prototype,"legendOptions",void 0),m([x({type:String,json:{write:!0}})],ar.prototype,"defaultLabel",void 0),m([x(fP(te({},e1),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ar.prototype,"defaultSymbol",null),m([x({type:String,value:null,json:{write:!0}})],ar.prototype,"fieldDelimiter",null),m([x({type:Es,readOnly:!0})],ar.prototype,"portal",void 0),m([Be("portal",["styleName"])],ar.prototype,"readPortal",null),m([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ar.prototype,"styleOrigin",void 0),m([Be("styleOrigin",["styleName","styleUrl"])],ar.prototype,"readStyleOrigin",null),m([Ke("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ar.prototype,"writeStyleOrigin",null),m([x({type:[D7],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||nve(t)).map(r=>D7.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ar.prototype,"uniqueValueGroups",null),m([x({type:[Bm],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ar.prototype,"uniqueValueInfos",null),ar=Hm=m([Y(dz)],ar);const Wm=ar,Jm={key:"type",base:Eu,typeMap:{heatmap:az,simple:r1,"unique-value":Wm,"class-breaks":WV,"dot-density":Ame,dictionary:Tme,"pie-chart":Bme},errorContext:"renderer"},gz={key:"type",base:Eu,typeMap:{simple:r1,"unique-value":Wm,"class-breaks":WV,heatmap:az},errorContext:"renderer"};function wTe(e,t){return Zm(e,null,t)}const sve=$c({types:Jm});function Zm(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new rs("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):sve(e,t,i):null}class G7{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(q9),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new G7,r=this._originStores[nt.DEFAULTS];r&&r.forEach((s,l)=>{i.set(l,me(s),nt.DEFAULTS)});for(let s=nt.SERVICE;s<q9;s++){const l=this._originStores[s];l&&l.forEach((y,d)=>{t&&t.has(d)||i.set(d,me(y),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=nt.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||Fr(this._propertyOriginMap.get(t))<=r){const l=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),l!==i}return!1}delete(t,i=nt.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let l=i-1;l>=0;l--){const y=this._originStores[l];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,l);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r&&r.get(t),l=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),l!==s}originOf(t){return this._propertyOriginMap.get(t)||nt.DEFAULTS}forEach(t){this._values.forEach(t)}}const mz=e=>{let t=class extends e{constructor(...i){super(...i);const r=Fr(Lr(this)),s=r.store,l=new G7;r.store=l,MO(r,s,l)}read(i,r){EO(this,i,r)}getAtOrigin(i,r){const s=q7(this),l=xs(r);if(typeof i=="string")return s.get(i,l);const y={};return i.forEach(d=>{y[d]=s.get(d,l)}),y}originOf(i){return Gy(this.originIdOf(i))}originIdOf(i){return q7(this).originOf(i)}revert(i,r){const s=q7(this),l=xs(r),y=Lr(this);let d;d=typeof i=="string"?i==="*"?s.keys(l):[i]:i,d.forEach(v=>{y.invalidate(v),s.revert(v,l),y.commit(v)})}};return t=m([Y("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function q7(e){return Lr(e).store}let vz=class extends mz(ot){};vz=m([Y("esri.core.ReadOnlyMultiOriginJSONSupport")],vz);const ove=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return U7(this).delete(i,xs(r))}write(i={},r){return TO(this,i=i||{},r),i}setAtOrigin(i,r,s){Lr(this).setAtOrigin(i,r,xs(s))}removeOrigin(i){const r=U7(this),s=xs(i),l=r.keys(s);for(const y of l)r.originOf(y)===s&&r.set(y,r.get(y,s),nt.USER)}updateOrigin(i,r){const s=U7(this),l=xs(r),y=this.get(i);for(let d=l+1;d<q9;++d)s.delete(i,d);s.set(i,y,l)}toJSON(i){return this.write({},i)}};return t=m([Y("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function U7(e){return Lr(e).store}const g_=e=>{let t=class extends ove(mz(e)){constructor(...i){super(...i)}};return t=m([Y("esri.core.MultiOriginJSONSupport")],t),t};let bz=class extends g_(ot){};bz=m([Y("esri.core.MultiOriginJSONSupport")],bz);async function ave(e,t){const{WhereClause:i}=await Promise.resolve().then(function(){return EJ});return i.create(e,t)}function m_(e,t){return q(e)?q(t)?`(${e}) AND (${t})`:e:t}var B7;let $d=B7=class extends Ie{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new B7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};m([x({type:String,json:{write:!0}})],$d.prototype,"expression",void 0),m([x({type:String,json:{write:!0}})],$d.prototype,"name",void 0),m([x({type:["boolean","date","number","string"],json:{write:!0}})],$d.prototype,"returnType",void 0),m([x({type:String,json:{write:!0}})],$d.prototype,"title",void 0),$d=B7=m([Y("esri.form.ExpressionInfo")],$d);const lve=$d;let Ed=class extends Ie{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};m([x({type:String,json:{write:!0}})],Ed.prototype,"description",void 0),m([x({type:String,json:{write:!0}})],Ed.prototype,"label",void 0),m([x()],Ed.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Ed.prototype,"visibilityExpression",void 0),Ed=m([Y("esri.form.elements.Element")],Ed);const o1=Ed;var H7;let v_=H7=class extends Ie{constructor(e){super(e),this.type=null}clone(){return new H7({type:this.type})}};m([x({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],v_.prototype,"type",void 0),v_=H7=m([Y("esri.form.elements.inputs.AttachmentInput")],v_);const uve=v_;var W7;let Id=W7=class extends o1{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new W7({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};m([x({type:String,json:{write:!0}})],Id.prototype,"attachmentKeyword",void 0),m([x({type:Boolean,json:{write:!0}})],Id.prototype,"editable",void 0),m([x({type:uve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Id.prototype,"input",void 0),m([x({type:["attachment"],json:{read:!1,write:!0}})],Id.prototype,"type",void 0),Id=W7=m([Y("esri.form.elements.AttachmentElement")],Id);const wz=Id;let b_=class extends Ie{constructor(e){super(e),this.type=null}};m([x()],b_.prototype,"type",void 0),b_=m([Y("esri.form.elements.inputs.Input")],b_);const a1=b_;let Km=class extends a1{constructor(e){super(e),this.maxLength=null,this.minLength=0}};m([x({type:Number,json:{write:!0}})],Km.prototype,"maxLength",void 0),m([x({type:Number,json:{write:!0}})],Km.prototype,"minLength",void 0),Km=m([Y("esri.form.elements.inputs.TextInput")],Km);const J7=Km;var Z7;let w_=Z7=class extends J7{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new Z7({maxLength:this.maxLength,minLength:this.minLength})}};m([x({type:["barcode-scanner"],json:{read:!1,write:!0}})],w_.prototype,"type",void 0),w_=Z7=m([Y("esri.form.elements.inputs.BarcodeScannerInput")],w_);const cve=w_;var K7;let l1=K7=class extends a1{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new K7({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};m([x({type:String,json:{write:!0}})],l1.prototype,"noValueOptionLabel",void 0),m([x({type:Boolean,json:{write:!0}})],l1.prototype,"showNoValueOption",void 0),m([x({type:["combo-box"],json:{read:!1,write:!0}})],l1.prototype,"type",void 0),l1=K7=m([Y("esri.form.elements.inputs.ComboBoxInput")],l1);const hve=l1;var Y7;function _z(e){return e!=null?new Date(e):null}function xz(e){return e?e.getTime():null}let Ta=Y7=class extends a1{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return _z(t.max)}writeMax(e,t){t.max=xz(e)}readMin(e,t){return _z(t.min)}writeMin(e,t){t.min=xz(e)}clone(){return new Y7({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};m([x({type:Boolean,json:{write:!0}})],Ta.prototype,"includeTime",void 0),m([x({type:Date,json:{type:Number,write:!0}})],Ta.prototype,"max",void 0),m([Be("max")],Ta.prototype,"readMax",null),m([Ke("max")],Ta.prototype,"writeMax",null),m([x({type:Date,json:{type:Number,write:!0}})],Ta.prototype,"min",void 0),m([Be("min")],Ta.prototype,"readMin",null),m([Ke("min")],Ta.prototype,"writeMin",null),m([x({type:["datetime-picker"],json:{read:!1,write:!0}})],Ta.prototype,"type",void 0),Ta=Y7=m([Y("esri.form.elements.inputs.DateTimePickerInput")],Ta);const pve=Ta;var X7;let u1=X7=class extends a1{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new X7({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};m([x({type:String,json:{write:!0}})],u1.prototype,"noValueOptionLabel",void 0),m([x({type:Boolean,json:{write:!0}})],u1.prototype,"showNoValueOption",void 0),m([x({type:["radio-buttons"],json:{read:!1,write:!0}})],u1.prototype,"type",void 0),u1=X7=m([Y("esri.form.elements.inputs.RadioButtonsInput")],u1);const dve=u1;var Q7;let c1=Q7=class extends a1{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Q7({offValue:this.offValue,onValue:this.onValue})}};m([x({type:[String,Number],json:{write:!0}})],c1.prototype,"offValue",void 0),m([x({type:[String,Number],json:{write:!0}})],c1.prototype,"onValue",void 0),m([x({type:["switch"],json:{read:!1,write:!0}})],c1.prototype,"type",void 0),c1=Q7=m([Y("esri.form.elements.inputs.SwitchInput")],c1);const fve=c1;var e8;let __=e8=class extends J7{constructor(e){super(e),this.type="text-area"}clone(){return new e8({maxLength:this.maxLength,minLength:this.minLength})}};m([x({type:["text-area"],json:{read:!1,write:!0}})],__.prototype,"type",void 0),__=e8=m([Y("esri.form.elements.inputs.TextAreaInput")],__);const yve=__;var t8;let x_=t8=class extends J7{constructor(e){super(e),this.type="text-box"}clone(){return new t8({maxLength:this.maxLength,minLength:this.minLength})}};m([x({type:["text-box"],json:{read:!1,write:!0}})],x_.prototype,"type",void 0),x_=t8=m([Y("esri.form.elements.inputs.TextBoxInput")],x_);const gve=x_,mve={base:a1,key:"type",typeMap:{"barcode-scanner":cve,"combo-box":hve,"datetime-picker":pve,"radio-buttons":dve,switch:fve,"text-area":yve,"text-box":gve}};var i8;let Go=i8=class extends o1{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new i8({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};m([x({types:bD,json:{read:{reader:w$},write:!0}})],Go.prototype,"domain",void 0),m([x({type:Boolean,json:{write:!0}})],Go.prototype,"editable",void 0),m([x({type:String,json:{write:!0}})],Go.prototype,"editableExpression",void 0),m([x({type:String,json:{write:!0}})],Go.prototype,"fieldName",void 0),m([x({type:String,json:{write:!0}})],Go.prototype,"hint",void 0),m([x({types:mve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Go.prototype,"input",void 0),m([x({type:String,json:{write:!0}})],Go.prototype,"requiredExpression",void 0),m([x({type:String,json:{read:!1,write:!0}})],Go.prototype,"type",void 0),m([x({type:String,json:{write:!0}})],Go.prototype,"valueExpression",void 0),Go=i8=m([Y("esri.form.elements.FieldElement")],Go);const Sz=Go;var r8;let Au=r8=class extends o1{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new r8({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:me(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};m([x({type:Number,json:{write:!0}})],Au.prototype,"displayCount",void 0),m([x({type:["list"],json:{write:!0}})],Au.prototype,"displayType",void 0),m([x({type:Boolean,json:{write:!0}})],Au.prototype,"editable",void 0),m([x({type:[eS],json:{write:!0}})],Au.prototype,"orderByFields",void 0),m([x({type:Number,json:{write:!0}})],Au.prototype,"relationshipId",void 0),m([x({type:["relationship"],json:{read:!1,write:!0}})],Au.prototype,"type",void 0),Au=r8=m([Y("esri.form.elements.RelationshipElement")],Au);const Mz=Au;function $z(e){return{typesWithGroup:{base:o1,key:"type",typeMap:{attachment:wz,field:Sz,group:e,relationship:Mz}},typesWithoutGroup:{base:o1,key:"type",typeMap:{attachment:wz,field:Sz,relationship:Mz}}}}function Ez(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function Iz(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function Tz(e,t,i=!0){return e?e.map(r=>Za(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var n8;let El=n8=class extends o1{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Tz(e,s8,!1)}readElements(e,t){return Ez(t.formElements,s8,!1)}writeElements(e,t){t.formElements=Iz(e,s8,!1)}clone(){return new n8({description:this.description,elements:me(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};m([x({json:{write:!0}})],El.prototype,"elements",void 0),m([ri("elements")],El.prototype,"castElements",null),m([Be("elements",["formElements"])],El.prototype,"readElements",null),m([Ke("elements")],El.prototype,"writeElements",null),m([x({type:["collapsed","expanded"],json:{write:!0}})],El.prototype,"initialState",void 0),m([x({type:String,json:{read:!1,write:!0}})],El.prototype,"type",void 0),El=n8=m([Y("esri.form.elements.GroupElement")],El);const s8=$z(El),vve=El;var o8;const a8=$z(vve);let Ca=o8=class extends Ie{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Tz(e,a8)}readElements(e,t){return Ez(t.formElements,a8)}writeElements(e,t){t.formElements=Iz(e,a8)}clone(){return new o8({description:this.description,expressionInfos:me(this.expressionInfos),elements:me(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};m([x({type:String,json:{write:!0}})],Ca.prototype,"description",void 0),m([x({json:{write:!0}})],Ca.prototype,"elements",void 0),m([ri("elements")],Ca.prototype,"castElements",null),m([Be("elements",["formElements"])],Ca.prototype,"readElements",null),m([Ke("elements")],Ca.prototype,"writeElements",null),m([x({type:[lve],json:{write:!0}})],Ca.prototype,"expressionInfos",void 0),m([x({type:Boolean,json:{default:!1,write:!0}})],Ca.prototype,"preserveFieldValuesWhenHidden",void 0),m([x({type:String,json:{write:!0}})],Ca.prototype,"title",void 0),Ca=o8=m([Y("esri.form.FormTemplate")],Ca);const bve=Ca;function Cz(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function wve(e,t,i){if(!e&&!t||!i)return;const r=x0(i);Az(e,i,r),Az(t,i,r)}function Az(e,t,i){if(e)for(const r of e)_ve(r.geometry,t,i)}function _ve(e,t,i){if(ae(e)||!e.spatialReference||Xi(e.spatialReference,t))return;const r=x0(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)Cz(e,e.rings,r);else if("paths"in e)Cz(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}let xve=0;const Pz="esri.layers.graphics.sources.MemorySource",l8=Ae.getLogger(Pz);let Pu=class extends ul.LoadableMixin(M2(ba(gt))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=q(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);H3(e,this.layer.spatialReference,i);const r=mh.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const l of r.features){const y=l.attributes[s],d=this._idToClientGraphic.get(y);d&&(l.geometry=d.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new fe("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return H3(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:ai.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new fe("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const l=_=>"objectId"in _&&_.objectId!=null?_.objectId:"attributes"in _&&_.attributes[t]!=null?_.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const _ of e.deleteFeatures){const M=l(_);M!=null&&r.push(M)}const y=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const _ of e.updateFeatures)if(s.push(this._serializeFeature(_)),y){const M=l(_);M!=null&&y.set(M,_)}}wve(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:d,featureEditResults:v}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:r});return this.fullExtent=d,i&&i.finish(v.uidToObjectId),this._updateClientGraphicIds(y,v),this._createEditsResult(v)}async _prepareClientMapping(e,t){if(this._layerOrSourceGeometryType!=="mesh"||ae(e))return;const i=[];for(const{geometry:r}of e)!q(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new fe("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let l=0;l<e.length;l++){const y=e[l],d=this._serializeFeature(y);!r&&q(y.geometry)&&(r=y.geometry.type),i[l]=d,t.set(`${d.uid}`,y)}const s=this;return{features:i,inferredGeometryType:r,finish(l){const y=s.sourceJSON.objectIdField;for(const d in l){const v=l[d],_=t.get(d);_&&(_.attributes||(_.attributes={}),v===-1?delete _.attributes[y]:_.attributes[y]=v,s._addIdToClientGraphic(_))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get _layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(xve++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ae(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?jn.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await Lce("MemorySourceWorker",{strategy:Me("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:s,hasZ:l,timeInfo:y}=this.layer,d=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const v=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",A=>{l8.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),A.preventDefault()}));const _={features:v.features,fields:t&&t.map(A=>A.toJSON()),geometryType:Fw.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||l,objectIdField:r,spatialReference:d?null:i&&i.toJSON(),timeInfo:y?y.toJSON():null},M=await this._connection.invoke("load",_,{signal:e});for(const A of M.warnings)l8.warn(A.message,{layer:this.layer,warning:A});M.featureErrors.length&&l8.warn(`Encountered ${M.featureErrors.length} validation errors while loading features`,M.featureErrors);const T=M.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(v.inferredGeometryType)&&(T.geometryType=Fw.toJSON(v.inferredGeometryType)),this.sourceJSON=T,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),v.finish(M.assignedObjectIds)}};m([b4({Type:jr,ensureType:Ai(jr)})],Pu.prototype,"itemType",void 0),m([x()],Pu.prototype,"type",void 0),m([x({constructOnly:!0})],Pu.prototype,"layer",void 0),m([x({readOnly:!0})],Pu.prototype,"_workerGeometryType",null),m([x()],Pu.prototype,"sourceJSON",void 0),Pu=m([Y(Pz)],Pu);function Sve(e){return"portalItem"in e}const Oz=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Sve(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return m([x({type:String})],t.prototype,"apiKey",null),t=m([Y("esri.layers.mixins.APIKeyMixin")],t),t},kz={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},Rz=Object.values(kz),Fz=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Rz.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Mve=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${Rz.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),$ve=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function _Te(e){return!!Fz.test(e)}function Td(e){if(ae(e))return null;const t=yn(e),i=t.path.match(Fz)||t.path.match(Mve);if(!i)return null;const[,r,s,l,y]=i,d=s.indexOf("/");return{title:u8(d!==-1?s.slice(d+1):s),serverType:kz[l.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:r}}}function Eve(e){const t=yn(e).path.match($ve);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function u8(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Ive(e,t){const i=[];if(e){const r=Td(e);q(r)&&r.title&&i.push(r.title)}if(t){const r=u8(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function Lz(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",s="//features",l=(e=e.toLowerCase()).includes(t),y=e.includes(i)||e.includes(r)||e.includes(s);return l&&y}function Tve(e,t){return e&&zR(GR(e,t))}function Cve(e){let{url:t}=e;if(!t)return{url:t};t=GR(t,e.logger);const i=yn(t),r=Td(i.path);let s;if(q(r))r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const l=Eve(i.path);q(l)&&(t=l.serviceUrl,s=l.sublayerId)}return{url:zR(t),layerId:s}}function Ave(e,t,i,r,s){Op(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=Uc(r.url,i,e.layerId.toString()))}function xTe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),l=t.includes("/wmsserver");return i&&(r||s||l)}const Nz=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Td(this.url);if(q(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Tve(i,Ae.getLogger(this.declaredClass)))}};return m([x()],t.prototype,"title",null),m([x({type:String})],t.prototype,"url",null),t=m([Y("esri.layers.mixins.ArcGISService")],t),t},jz={read:{reader:c$},write:{allowNull:!0,writer:h$}},c8=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return m([x({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),m([x({json:{read:!1,write:!1,origins:{"web-map":jz,"portal-item":jz}}})],t.prototype,"effect",void 0),t=m([Y("esri.layers.mixins.BlendLayer")],t),t},Dz=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return m([x({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=m([Y("esri.layers.mixins.CustomParametersMixin")],t),t},Pve=new fn.EventEmitter,Vz="esri.layers.mixins.EditBusLayer",zz=Symbol(Vz);function STe(e){return e!=null&&typeof e=="object"&&zz in e}const Ove=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this.when().then(()=>{this.own([Pve.on("edits",s=>{var M,T,A;const l="layer"in s?s.layer:null,y="layer"in s?(M=s.layer)==null?void 0:M.url:s.serviceUrl,d="layer"in s?(T=s.layer)==null?void 0:T.layerId:s.layerId,v=s.event;if(l===this||y!==this.url)return;if(d!=null&&this.layerId!=null&&d===this.layerId)return void this.emit("edits",me(v));const _=(A=v.editedFeatures)==null?void 0:A.find(({layerId:R})=>R===this.layerId);if(_){const{adds:R,updates:F,deletes:V}=_.editedFeatures,z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:R?R.map(({attributes:W})=>({objectId:this.objectIdField&&W[this.objectIdField],globalId:this.globalIdField&&W[this.globalIdField]})):[],deletedFeatures:V?V.map(({attributes:W})=>({objectId:this.objectIdField&&W[this.objectIdField],globalId:this.globalIdField&&W[this.globalIdField]})):[],updatedFeatures:F?F.map(({current:{attributes:W}})=>({objectId:this.objectIdField&&W[this.objectIdField],globalId:this.globalIdField&&W[this.globalIdField]})):[],editedFeatures:me(v.editedFeatures)};this.emit("edits",z)}})])},()=>{})}};return t=zz,i=m([Y(Vz)],i),i};var h8;const p8=new bt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),d8=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Il=h8=class extends Ie{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:l,units:y,distance:d}=this;return new Bn(te({geometry:me(i),objectIds:me(l),spatialRelationship:r,timeExtent:me(s),where:t,units:y,distance:d},e))}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:l,distance:y}=this;return new h8({geometry:me(t),objectIds:me(s),spatialRelationship:i,timeExtent:me(r),where:e,units:l,distance:y})}};m([x({type:String,json:{write:!0}})],Il.prototype,"where",void 0),m([x({types:ou,json:{write:!0}})],Il.prototype,"geometry",void 0),m([x({type:p8.apiValues,json:{name:"spatialRel",read:{reader:p8.read},write:{allowNull:!1,writer:p8.write,overridePolicy(){return{enabled:q(this.geometry)}}}}})],Il.prototype,"spatialRelationship",void 0),m([x({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Il.prototype,"distance",void 0),m([x({type:[Number],json:{write:!0}})],Il.prototype,"objectIds",void 0),m([x({type:d8.apiValues,json:{read:d8.read,write:{writer:d8.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Il.prototype,"units",void 0),m([x({type:zo,json:{write:!0}})],Il.prototype,"timeExtent",void 0),Il=h8=m([Y("esri.layers.support.FeatureFilter")],Il);const kve=Il;var f8;const Gz={read:{reader:c$},write:{writer:h$,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},qz={read:{reader:c$},write:{writer:h$,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Uz={name:"showExcludedLabels",default:!0};let Cd=f8=class extends Ie{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t==null?void 0:t.origin){if(i.filter){const l=Object.keys(i.filter);if(l.length>1||l[0]!=="where")return(r=t.messages)==null||r.push(new fe("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new fe("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new f8({filter:q(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};m([x({type:kve,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?Nn(i,s,t):Nn(i,null,t)}}}})],Cd.prototype,"filter",void 0),m([x({json:{write:!0,origins:{"web-map":Gz,"portal-item":Gz}}})],Cd.prototype,"includedEffect",void 0),m([x({json:{write:!0,origins:{"web-map":qz,"portal-item":qz}}})],Cd.prototype,"excludedEffect",void 0),m([x({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Uz,"portal-item":Uz}}})],Cd.prototype,"excludedLabelsVisible",void 0),Cd=f8=m([Y("esri.layers.support.FeatureEffect")],Cd);const Rve=Cd,Bz={write:{allowNull:!0}},Fve=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return m([x({type:Rve,json:{origins:{"web-map":Bz,"portal-item":Bz}}})],t.prototype,"featureEffect",void 0),t=m([Y("esri.layers.mixins.FeatureEffectLayer")],t),t};var Ym;const S_=$n()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Hz=S_.jsonValues.slice();$ie(Hz,"orthometric");const Xm=$n()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Aa=Ym=class extends Ie{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return S_.write(e,t,i)}readHeightModel(e,t,i){return S_.read(e)||(i&&i.messages&&i.messages.push(Lve(e,{context:i})),null)}readHeightUnit(e,t,i){return Xm.read(e)||(i&&i.messages&&i.messages.push(Wz(e,{context:i})),null)}readHeightUnitService(e,t,i){return vL(e)||Xm.read(e)||(i&&i.messages&&i.messages.push(Wz(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Ym({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=bL(t);return new Ym({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t=te({origin:"web-scene"},t),super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Ym;return t.read(e,{origin:"web-scene"}),t}};function Wz(e,t){return new rs("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Lve(e,t){return new rs("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}m([x({type:S_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Hz,default:"ellipsoidal"}}}})],Aa.prototype,"heightModel",void 0),m([Ke("web-scene","heightModel")],Aa.prototype,"writeHeightModel",null),m([Be(["web-scene","service"],"heightModel")],Aa.prototype,"readHeightModel",null),m([x({type:Xm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Xm.jsonValues,write:Xm.write}}}})],Aa.prototype,"heightUnit",void 0),m([Be("web-scene","heightUnit")],Aa.prototype,"readHeightUnit",null),m([Be("service","heightUnit")],Aa.prototype,"readHeightUnitService",null),m([x({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Aa.prototype,"vertCRS",void 0),m([Be("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Aa.prototype,"readVertCRS",null),Aa=Ym=m([Y("esri.geometry.HeightModelInfo")],Aa);const Qm=Aa;function Nve(e){if(!e)return e;const{start:t,end:i}=e;return new zo({start:q(t)?dd(t,-t.getTimezoneOffset(),"minutes"):t,end:q(i)?dd(i,-i.getTimezoneOffset(),"minutes"):i})}function jve(e){if(!e)return e;const{start:t,end:i}=e;return new zo({start:q(t)?dd(t,t.getTimezoneOffset(),"minutes"):t,end:q(i)?dd(i,i.getTimezoneOffset(),"minutes"):i})}var y8;let ev=y8=class extends Ie{constructor(e){super(e)}async collectRequiredFields(e,t){return as(e,t,this.expression)}clone(){return new y8({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};m([x({type:String,json:{write:!0}})],ev.prototype,"expression",void 0),m([x({type:String,json:{write:!0}})],ev.prototype,"title",void 0),ev=y8=m([Y("esri.layers.support.FeatureExpressionInfo")],ev);const Jz=ev;function MTe(e){return e_[e]!=null}function Dve(e){return 1/(e_[e]||1)}function Vve(){const e=Object.keys(e_);return e.sort(),e}const zve=Vve();var g8;const M_=$n()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Zz=new bt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Ou=g8=class extends Ie{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):q(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new g8({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&iP(this.featureExpressionInfo,e.featureExpressionInfo)}};m([x({type:Jz,json:{write:!0}})],Ou.prototype,"featureExpressionInfo",void 0),m([Be("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Ou.prototype,"readFeatureExpressionInfo",null),m([Ke("featureExpressionInfo",{featureExpressionInfo:{type:Jz},"featureExpression.value":{type:[0]}})],Ou.prototype,"writeFeatureExpressionInfo",null),m([x({type:M_.apiValues,nonNullable:!0,json:{type:M_.jsonValues,read:M_.read,write:{writer:M_.write,isRequired:!0}}})],Ou.prototype,"mode",null),m([x({type:Number,json:{write:!0}})],Ou.prototype,"offset",void 0),m([x({type:zve,json:{type:String,read:Zz.read,write:Zz.write}})],Ou.prototype,"unit",null),Ou=g8=m([Y("esri.layers.support.ElevationInfo")],Ou);const Kz=Ou,Gve={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},$_={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},m8={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},Yz={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Op}}},qve={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Uve={value:null,type:Kz,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function $Te(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const E_={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},Bve=De(te({},E_),{json:De(te({},E_.json),{origins:{"web-document":De(te({},E_.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Mg(t.layerDefinition.drawingInfo.transparency):void 0:Mg(t.drawingInfo.transparency)}})}),Hve={type:zo,readOnly:!0,get(){var d,v;if(!((d=this.layer)==null?void 0:d.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(v=this.view)==null?void 0:v.timeExtent;let s=this.layer.timeExtent;e&&(s=jve(s));let l=i?r&&s?r.intersection(s):r||s:s;if(!l||l.isEmpty||l.isAllTime)return l;t&&(l=l.offset(-t.value,t.unit)),e&&(l=Nve(l));const y=this._get("timeExtent");return l.equals(y)?y:l}},ETe={type:ai,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=ai.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=At.fromJSON(t.spatialReference)),i}}}},read:!1}},Xz={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Wve={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Jve={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Qz={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};let Tl=class extends yr(Ie){constructor(e){super(e)}};m([x({constructOnly:!0,json:{write:!0}})],Tl.prototype,"name",void 0),m([x({constructOnly:!0,json:{write:!0}})],Tl.prototype,"fields",void 0),m([x({constructOnly:!0,json:{write:!0}})],Tl.prototype,"isAscending",void 0),m([x({constructOnly:!0,json:{write:!0}})],Tl.prototype,"indexType",void 0),m([x({constructOnly:!0,json:{write:!0}})],Tl.prototype,"isUnique",void 0),m([x({constructOnly:!0,json:{write:!0}})],Tl.prototype,"description",void 0),Tl=m([Y("esri.layers.support.FeatureIndex")],Tl);const v8=new bt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Zve={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Pt(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function I_(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function Kve(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t==null?void 0:t.includes("envelopeaggregate")),centroid:!!(t==null?void 0:t.includes("centroidaggregate")),convexHull:!!(t==null?void 0:t.includes("convexhullaggregate"))}}function tv(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i==null?void 0:i.includes(t.toLowerCase()))}function eG(e,t,i){return{analytics:Yve(t),attachment:Xve(t),data:Qve(t),metadata:ebe(t),operations:tbe(t.capabilities||e,t,i),query:ibe(t,i),queryRelated:rbe(t),queryTopFeatures:nbe(t),editing:sbe(t)}}function Yve(e){return{supportsCacheHint:tv(e.advancedQueryCapabilities,"queryAnalytics")}}function Xve(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:tv(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Pt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=Zve[r.name];s&&(i[s]=!!r.isEnabled)}),i}function Qve(e){return{isVersioned:Pt(e,"isDataVersioned",!1),supportsAttachment:Pt(e,"hasAttachments",!1),supportsM:Pt(e,"hasM",!1),supportsZ:Pt(e,"hasZ",!1)}}function ebe(e){return{supportsAdvancedFieldProperties:Pt(e,"supportsFieldDescriptionProperty",!1)}}function tbe(e,t,i){const r=e?e.toLowerCase().split(",").map(A=>A.trim()):[],s=i?Td(i):null,l=r.includes(q(s)&&s.serverType==="MapServer"?"data":"query"),y=r.includes("editing")&&!t.datesInUnknownTimezone;let d=y&&r.includes("create"),v=y&&r.includes("delete"),_=y&&r.includes("update");const M=r.includes("changetracking"),T=t.advancedQueryCapabilities;return y&&!(d||v||_)&&(d=v=_=!0),{supportsCalculate:Pt(t,"supportsCalculate",!1),supportsTruncate:Pt(t,"supportsTruncate",!1),supportsValidateSql:Pt(t,"supportsValidateSql",!1),supportsAdd:d,supportsDelete:v,supportsEditing:y,supportsChangeTracking:M,supportsQuery:l,supportsQueryAnalytics:Pt(T,"supportsQueryAnalytic",!1),supportsQueryAttachments:Pt(T,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Pt(T,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Pt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:_,supportsExceedsLimitStatistics:Pt(t,"supportsExceedsLimitStatistics",!1)}}function ibe(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,l=rG(e),y=t==null?void 0:t.includes("MapServer"),d=!Me("mapserver-pbf-enabled")&&y&&(l!=null?l:0)<10.81,v=Lz(t),_=(e.supportedQueryFormats||"").split(",").reduce((M,T)=>{const A=T.toLowerCase().trim();return A&&M.add(A),M},new Set);return{supportsStatistics:Pt(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Pt(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Pt(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Kve(i),supportsCentroid:Pt(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Pt(i,"supportsQueryWithDistance",!1),supportsDistinct:Pt(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Pt(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Pt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Pt(i,"supportsHavingClause",!1),supportsOrderBy:Pt(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Pt(i,"supportsPagination",!1),supportsQuantization:Pt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Pt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Pt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Pt(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Pt(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Pt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Pt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Pt(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Pt(r,"allowOthersToQuery",!0),supportsHistoricMoment:Pt(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!d&&_.has("pbf"),supportsDisjointSpatialRelationship:Pt(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Pt(i,"supportsQueryWithCacheHint",!1)||tv(i,"query"),supportsDefaultSpatialReference:Pt(i,"supportsDefaultSR",!1),supportsCompactGeometry:v,supportsFullTextSearch:Pt(i,"supportsFullTextSearch",!1),maxRecordCountFactor:I_(e,"maxRecordCountFactor",void 0),maxRecordCount:I_(e,"maxRecordCount",void 0),standardMaxRecordCount:I_(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:I_(e,"tileMaxRecordCount",void 0)}}function rbe(e){const t=e.advancedQueryCapabilities,i=Pt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Pt(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:tv(t,"queryRelated")}}function nbe(e){return{supportsCacheHint:tv(e.advancedQueryCapabilities,"queryTopFilter")}}function sbe(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Pt(e,"allowGeometryUpdates",!0),supportsGlobalId:Pt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Pt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Pt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Pt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Pt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Pt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Pt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Pt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Pt(t,"allowOthersToUpdate",!0)}}async function obe(e,t,i,r){const{source:s}=await e.load();if(await b8(e,t,r),!s.addAttachment)throw new fe(r,"Layer source does not support addAttachment capability");return s.addAttachment(t,i)}function b8(e,t,i){const{attributes:r}=t,{objectIdField:s}=e;return e.get("capabilities.data.supportsAttachment")?t?r?s&&r[s]?Promise.resolve():Promise.reject(new fe(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new fe(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new fe(i,"A feature is required to add/delete/update attachments")):Promise.reject(new fe(i,"this layer doesn't support attachments"))}async function abe(e,t,i,r,s){const{source:l}=await e.load();if(await b8(e,t,s),!l.updateAttachment)throw new fe(s,"Layer source does not support updateAttachment capability");return l.updateAttachment(t,i,r)}async function lbe(e,t,i){const r=await import("./editingSupport.4fbb45f1.js"),s=await e.load();return r.applyEdits(s,s.source,t,i)}async function ube(e,t,i,r){const{source:s}=await e.load();if(await b8(e,t,r),!s.deleteAttachments)throw new fe(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,i)}async function cbe(e,t,i){const{source:r}=await e.load({signal:t==null?void 0:t.signal});if(!r.fetchRecomputedExtents)throw new fe(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function hbe(e,t,i,r){var R,F;t=T3.from(t);const{source:s,capabilities:l}=await e.load();if(!((R=l==null?void 0:l.data)==null?void 0:R.supportsAttachment))throw new fe(r,"this layer doesn't support attachments");const{attachmentTypes:y,objectIds:d,globalIds:v,num:_,size:M,start:T,where:A}=t;if(!((F=l==null?void 0:l.operations)==null?void 0:F.supportsQueryAttachments)){const V=d&&d.length>1,z=y&&y.length,W=v&&v.length,Z=M&&M.length;if(V||z||W||Z||_||T||A)throw new fe(r,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",t)}if(!(d==null?void 0:d.length)&&!A)throw new fe(r,"'objectIds' or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new fe(r,"Layer source does not support queryAttachments capability",t);return s.queryAttachments(t)}async function pbe(e,t,i,r){var l;const{source:s}=await e.load();if(!s.queryObjectIds)throw new fe(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds((l=Bn.from(t))!=null?l:e.createQuery(),i)}async function dbe(e,t,i,r){var l;const{source:s}=await e.load();if(!s.queryFeatureCount)throw new fe(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount((l=Bn.from(t))!=null?l:e.createQuery(),i)}async function fbe(e,t,i,r){var l;const{source:s}=await e.load();if(!s.queryExtent)throw new fe(r,"Layer source does not support queryExtent capability");return s.queryExtent((l=Bn.from(t))!=null?l:e.createQuery(),i)}async function ybe(e,t,i,r){const{source:s}=await e.load();if(!s.queryRelatedFeatures)throw new fe(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(gd.from(t),i)}async function gbe(e,t,i,r){const{source:s}=await e.load();if(!s.queryRelatedFeaturesCount)throw new fe(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(gd.from(t),i)}async function mbe(e){const t=e.source;if(t==null?void 0:t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(q(r)&&(e.sourceJSON=te(te({},e.sourceJSON),r),e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await ave(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function vbe(e){const t=new Bn,i=e.get("capabilities.data"),r=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:l}=e;return t.timeExtent=s!=null&&l!=null?l.offset(-s.value,s.unit):l||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function tG(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function iG(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function rG(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}let h1=class extends yr(Ie){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};m([x({type:String,json:{read:{source:"shapeAreaFieldName"}}})],h1.prototype,"shapeAreaField",void 0),m([x({type:String,json:{read:{source:"shapeLengthFieldName"}}})],h1.prototype,"shapeLengthField",void 0),m([x({type:String,json:{read:e=>Yce.read(e)||Xce.read(e)}})],h1.prototype,"units",void 0),h1=m([Y("esri.layers.support.GeometryFieldsInfo")],h1);const bbe=h1;var w8;let p1=w8=class extends Ie{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new gt}clone(){return new w8({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};m([x({type:String,json:{write:!0}})],p1.prototype,"floorField",void 0),m([x({json:{read:!1,write:!1}})],p1.prototype,"viewAllMode",void 0),m([x({json:{read:!1,write:!1}})],p1.prototype,"viewAllLevelIds",void 0),p1=w8=m([Y("esri.layers.support.LayerFloorInfo")],p1);const nG=p1,sG=new bt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),oG=new bt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let qo=class extends yr(Ie){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};m([x({json:{read:sG.read,write:sG.write}})],qo.prototype,"cardinality",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"composite",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"id",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"keyField",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"keyFieldInRelationshipTable",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"name",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"relatedTableId",void 0),m([x({json:{read:!0,write:!0}})],qo.prototype,"relationshipTableId",void 0),m([x({json:{read:oG.read,write:oG.write}})],qo.prototype,"role",void 0),qo=m([Y("esri.layers.support.Relationship")],qo);const wbe=qo,_be=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.spatialReference=At.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(gt.ofType(Tl)),this.userIsAdmin=!1,this.version=void 0}readCapabilitiesFromService(i,r){return eG(i,r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return tG(r)}readObjectIdFieldFromService(i,r){return iG(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=Cve({layer:this,url:i,nonStandardUrlAllowed:!0,logger:Ae.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,l){Ave(this,i,null,r,l)}readVersion(i,r){return rG(r)}};return m([x({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),m([Be("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),m([x({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),m([x({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),m([x({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),m([x({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),m([x({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),m([x({readOnly:!0})],t.prototype,"editingInfo",void 0),m([Be("editingInfo")],t.prototype,"readEditingInfo",null),m([x((()=>{const i=me(Uve),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),m([x({type:nG,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],t.prototype,"floorInfo",void 0),m([x({type:ai,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),m([x()],t.prototype,"gdbVersion",void 0),m([x({readOnly:!0,type:bbe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),m([x({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:v8.read}}}})],t.prototype,"geometryType",void 0),m([x({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),m([x({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),m([x({readOnly:!0,type:Qm})],t.prototype,"heightModelInfo",void 0),m([x({type:Date})],t.prototype,"historicMoment",void 0),m([x({readOnly:!0})],t.prototype,"isTable",void 0),m([Be("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),m([x({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),m([x(Wve)],t.prototype,"minScale",void 0),m([Be("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),m([x(Jve)],t.prototype,"maxScale",void 0),m([Be("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),m([x({type:String})],t.prototype,"globalIdField",void 0),m([Be("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),m([x({type:String})],t.prototype,"objectIdField",void 0),m([Be("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),m([x({type:[wbe],readOnly:!0})],t.prototype,"relationships",void 0),m([x()],t.prototype,"sourceJSON",void 0),m([x({type:Boolean})],t.prototype,"returnM",void 0),m([x({type:Boolean})],t.prototype,"returnZ",void 0),m([x({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),m([Be("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),m([x({type:At,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),m([x({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),m([x({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),m([x({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),m([x({type:gt.ofType(Tl),readOnly:!0})],t.prototype,"indexes",void 0),m([x(Yz)],t.prototype,"url",null),m([Ke("url")],t.prototype,"writeUrl",null),m([x({readOnly:!0})],t.prototype,"userIsAdmin",void 0),m([x({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),m([Be("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=m([Y("esri.layers.mixins.FeatureLayerBase")],t),t};let d1=class extends yr(Ie){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};m([x({type:String,json:{write:!0}})],d1.prototype,"expression",void 0),m([x({type:String,json:{write:!0}})],d1.prototype,"title",void 0),m([x({type:String,json:{write:!0}})],d1.prototype,"returnType",void 0),d1=m([Y("esri.layers.support.ExpressionInfo")],d1);const _8=d1;var x8;let ku=x8=class extends Ie{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new x8({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:me(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};m([x({type:Boolean,json:{write:!0}})],ku.prototype,"isAutoGenerated",void 0),m([x({type:String,json:{write:!0}})],ku.prototype,"name",void 0),m([x({type:String,json:{write:!0}})],ku.prototype,"alias",void 0),m([x({type:String,json:{write:!0}})],ku.prototype,"onStatisticField",void 0),m([x({type:_8,json:{write:!0}})],ku.prototype,"onStatisticExpression",void 0),m([x({type:String,json:{write:!0}})],ku.prototype,"statisticType",void 0),ku=x8=m([Y("esri.layers.support.AggregateField")],ku);const Ad=ku;let Ih=class extends Ie{constructor(){super(...arguments),this.type=null}};m([x({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Ih.prototype,"type",void 0),Ih=m([Y("esri.layers.support.FeatureReduction")],Ih);const S8="__begin__",M8="__end__",xbe=new RegExp(S8,"ig"),Sbe=new RegExp(M8,"ig"),aG=new RegExp("^"+S8,"i"),lG=new RegExp(M8+"$","i"),T_='"',Mbe=T_+" + ",$be=" + "+T_;function Ebe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function Ibe(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function $8(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Ebe(e.labelExpression),t.type="conventional"),t}function Tbe(e){const t=$8(e);if(!t)return null;switch(t.type){case"conventional":return E8(t.expression);case"arcade":return t.expression}return null}function Cbe(e){const t=$8(e);if(!t)return null;switch(t.type){case"conventional":return Pbe(t.expression);case"arcade":return uG(t.expression)}return null}function E8(e){let t;return e?(t=Ja(e,i=>S8+'$feature["'+i+'"]'+M8),t=aG.test(t)?t.replace(aG,""):T_+t,t=lG.test(t)?t.replace(lG,""):t+T_,t=t.replace(xbe,Mbe).replace(Sbe,$be)):t='""',t}const Abe=/^\s*\{([^}]+)\}\s*$/i;function Pbe(e){const t=e.match(Abe);return t&&t[1].trim()||null}const Obe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,kbe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Rbe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function uG(e){if(!e)return null;let t=Obe.exec(e)||kbe.exec(e);return t?t[1]||t[3]:(t=Rbe.exec(e),t?t[2]:null)}var I8;let Th=I8=class extends Ie{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?E8(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=E8(this.value)),e!=null&&(t[i]=e)}clone(){return new I8({expression:this.expression,title:this.title,value:this.value})}};m([x({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Th.prototype,"expression",void 0),m([Be("expression",["expression","value"])],Th.prototype,"readExpression",null),m([Ke("expression")],Th.prototype,"writeExpression",null),m([x({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Th.prototype,"title",void 0),m([x({json:{read:!1,write:!1}})],Th.prototype,"value",void 0),Th=I8=m([Y("esri.layers.support.LabelExpressionInfo")],Th);const cG=Th,hG=[252,146,31,255],ITe=[153,153,153,255],Fbe={type:"esriSMS",style:"esriSMSCircle",size:6,color:hG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Lbe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:hG},Nbe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},jbe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Dbe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Vbe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},zbe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Gbe=ro.fromJSON(Fbe),qbe=us.fromJSON(Lbe),Ube=pl.fromJSON(Nbe),Bbe=g0.fromJSON(jbe);function TTe(e){if(ae(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return Gbe;case"polyline":return qbe;case"polygon":case"extent":return Ube}return null}const CTe=ro.fromJSON(Dbe),ATe=us.fromJSON(Vbe),PTe=pl.fromJSON(zbe);var T8;const C_=new bt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function pG(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function Hbe(e){return(e==null?void 0:e.type)==="map-image"}function dG(e){var t,i;return!!Hbe(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)==null?void 0:i.supportsArcadeExpressionForLabeling)}function Wbe(e){return pG(e)||dG(e.layer)}let Mr=T8=class extends Ie{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Bbe,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,s,l)=>{switch(s){case"=":return r==l;case"<>":return r!=l;case">":return r>l;case">=":return r>=l;case"<":return r<l;case"<=":return r<=l}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),l=r[3],y=i(t[r[4]],r[5],r[6]);switch(l){case"AND":return s&&y;case"OR":return s||y}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Ibe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=uG(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&pG(r))e=new cG({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return $8(this)}getLabelExpressionArcade(){return Tbe(this)}getLabelExpressionSingleField(){return Cbe(this)}hash(){return JSON.stringify(this)}clone(){return new T8({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:me(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:me(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};m([x({type:String,json:{write:!0}})],Mr.prototype,"name",void 0),m([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Mr.prototype,"allowOverrun",void 0),m([x({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Mr.prototype,"deconflictionStrategy",void 0),m([x({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&dG(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Mr.prototype,"labelExpression",void 0),m([Be("labelExpression")],Mr.prototype,"readLabelExpression",null),m([Ke("labelExpression")],Mr.prototype,"writeLabelExpression",null),m([x({type:cG,json:{write:{overridePolicy:(e,t,i)=>Wbe(i)?{allowNull:!0}:{enabled:!1}}}})],Mr.prototype,"labelExpressionInfo",void 0),m([Ke("labelExpressionInfo")],Mr.prototype,"writeLabelExpressionInfo",null),m([x({type:C_.apiValues,json:{type:C_.jsonValues,read:C_.read,write:C_.write}})],Mr.prototype,"labelPlacement",void 0),m([x({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Mr.prototype,"labelPosition",void 0),m([x({type:Number})],Mr.prototype,"maxScale",void 0),m([Ke("maxScale")],Mr.prototype,"writeMaxScale",null),m([x({type:Number})],Mr.prototype,"minScale",void 0),m([Ke("minScale")],Mr.prototype,"writeMinScale",null),m([x({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Mr.prototype,"repeatLabel",void 0),m([x({type:Number,cast:di,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Mr.prototype,"repeatLabelDistance",void 0),m([x({types:wue,json:{origins:{"web-scene":{types:_ue,write:GV,default:null}},write:GV,default:null}})],Mr.prototype,"symbol",void 0),m([x({type:Boolean,json:{write:!0}})],Mr.prototype,"useCodedValues",void 0),m([x({type:String,json:{write:!0}})],Mr.prototype,"where",void 0),Mr=T8=m([Y("esri.layers.support.LabelClass")],Mr);const iv=Mr;var C8;const A8=$c({types:N2}),Jbe="esri.layers.support.FeatureReductionBinning";let Vs=C8=class extends Ih{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Nn(i,r,t)}readRenderer(e,t,i){var s,l;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return r?(l=Zm(r,t,i))!=null?l:void 0:t.defaultSymbol?t.types&&t.types.length?new Wm({defaultSymbol:A8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(y=>({id:y.id,symbol:A8(y.symbol,y,i)}))}):new r1({symbol:A8(t.defaultSymbol,t,i)}):null}clone(){return new C8({fields:me(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:me(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:me(this.popupTemplate),renderer:me(this.renderer)})}};m([wt({binning:"binning"})],Vs.prototype,"type",void 0),m([wt({geohash:"geohash"})],Vs.prototype,"binType",void 0),m([x({type:Number,range:{min:1,max:9},json:{write:!0}})],Vs.prototype,"fixedBinLevel",void 0),m([x({type:[iv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Vs.prototype,"labelingInfo",void 0),m([x(m8)],Vs.prototype,"labelsVisible",void 0),m([x($_)],Vs.prototype,"popupEnabled",void 0),m([x({type:i0,json:{name:"popupInfo",write:!0}})],Vs.prototype,"popupTemplate",void 0),m([x({type:[Ad],json:{write:!0}})],Vs.prototype,"fields",void 0),m([Ke("fields")],Vs.prototype,"writeFields",null),m([x({types:Jm,json:{write:{target:"drawingInfo.renderer"}}})],Vs.prototype,"renderer",void 0),m([Be("renderer",["drawingInfo.renderer"])],Vs.prototype,"readRenderer",null),Vs=C8=m([Y(Jbe)],Vs);const fG=Vs;var P8;const O8=$c({types:N2}),Zbe="esri.layers.support.FeatureReductionCluster";function yG(e){var t;return e.type==="simple"&&!((t=e.visualVariables)==null?void 0:t.length)}let an=P8=class extends Ie{constructor(e){super(e),this.type="cluster",this.clusterRadius=di("80px"),this.clusterMinSize=di("12px"),this.clusterMaxSize=di("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){var s,l,y;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return((l=r==null?void 0:r.authoringInfo)==null?void 0:l.isAutoGenerated)?null:r?yG(r)?null:(y=Zm(r,t,i))!=null?y:void 0:t.defaultSymbol?t.types&&t.types.length?new Wm({defaultSymbol:O8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(d=>({id:d.id,symbol:O8(d.symbol,d,i)}))}):new r1({symbol:O8(t.defaultSymbol,t,i)}):null}readSymbol(e,t,i){var s,l,y;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return((l=r==null?void 0:r.authoringInfo)==null?void 0:l.isAutoGenerated)?null:r&&yG(r)?(y=Zm(r,t,i))==null?void 0:y.symbol:null}writeSymbol(e,t,i,r){var l,y;const s=(y=(l=this.renderer)==null?void 0:l.authoringInfo)==null?void 0:y.isAutoGenerated;if(!this.renderer||s){const d=new r1({symbol:e});t.drawingInfo={renderer:d.write({},r)}}}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Nn(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>Ad.fromJSON(r))}clone(){return new P8({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:me(this.labelingInfo),labelsVisible:this.labelsVisible,fields:me(this.fields),renderer:me(this.renderer),symbol:me(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:me(this.popupTemplate)})}};m([x({type:["cluster"],readOnly:!0,json:{write:!0}})],an.prototype,"type",void 0),m([x({type:Number,cast:e=>e==="auto"?e:di(e),json:{write:!0}})],an.prototype,"clusterRadius",void 0),m([x({type:Number,cast:di,json:{write:!0}})],an.prototype,"clusterMinSize",void 0),m([x({type:Number,cast:di,json:{write:!0}})],an.prototype,"clusterMaxSize",void 0),m([x($_)],an.prototype,"popupEnabled",void 0),m([x({type:i0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],an.prototype,"popupTemplate",void 0),m([x({types:Jm,json:{write:{target:"drawingInfo.renderer"}}})],an.prototype,"renderer",void 0),m([Be("renderer",["drawingInfo.renderer"])],an.prototype,"readRenderer",null),m([x({types:vue})],an.prototype,"symbol",void 0),m([Be("symbol",["drawingInfo.renderer"])],an.prototype,"readSymbol",null),m([Ke("symbol")],an.prototype,"writeSymbol",null),m([x({type:[iv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],an.prototype,"labelingInfo",void 0),m([x(m8)],an.prototype,"labelsVisible",void 0),m([x({type:[Ad],json:{write:!0}})],an.prototype,"fields",void 0),m([Ke("fields")],an.prototype,"writeFields",null),m([Be("fields")],an.prototype,"readFields",null),an=P8=m([Y(Zbe)],an);const gG=an;var k8;let A_=k8=class extends Ih{constructor(e){super(e),this.type="selection"}clone(){return new k8}};m([x({type:["selection"]})],A_.prototype,"type",void 0),A_=k8=m([Y("esri.layers.support.FeatureReductionSelection")],A_);const mG=A_,vG={key:"type",base:Ih,typeMap:{cluster:gG,binning:fG}},Kbe={types:{key:"type",base:Ih,typeMap:{selection:mG,cluster:gG,binning:fG}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:vG},"portal-item":{types:vG},"web-scene":{types:{key:"type",base:Ih,typeMap:{selection:mG}}}}}},f1={Base64:0,Hex:1,String:2,Raw:3},y1=8,bG=(1<<y1)-1;function Ch(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function Ybe(e){const t=[];for(let i=0,r=e.length*y1;i<r;i+=y1)t[i>>5]|=(e.charCodeAt(i/y1)&bG)<<i%32;return t}function Xbe(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=y1)t.push(String.fromCharCode(e[i>>5]>>>i%32&bG));return t.join("")}function Qbe(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function ewe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,l=4*e.length;s<l;s+=3){const y=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let d=0;d<4;d++)8*s+6*d>32*e.length?r.push(t):r.push(i.charAt(y>>6*(3-d)&63))}return r.join("")}function twe(e,t){return e<<t|e>>>32-t}function P_(e,t,i,r,s,l){return Ch(twe(Ch(Ch(t,e),Ch(r,l)),s),i)}function Hn(e,t,i,r,s,l,y){return P_(t&i|~t&r,e,t,s,l,y)}function Wn(e,t,i,r,s,l,y){return P_(t&r|i&~r,e,t,s,l,y)}function Jn(e,t,i,r,s,l,y){return P_(t^i^r,e,t,s,l,y)}function Zn(e,t,i,r,s,l,y){return P_(i^(t|~r),e,t,s,l,y)}function iwe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,l=271733878;for(let y=0;y<e.length;y+=16){const d=i,v=r,_=s,M=l;i=Hn(i,r,s,l,e[y+0],7,-680876936),l=Hn(l,i,r,s,e[y+1],12,-389564586),s=Hn(s,l,i,r,e[y+2],17,606105819),r=Hn(r,s,l,i,e[y+3],22,-1044525330),i=Hn(i,r,s,l,e[y+4],7,-176418897),l=Hn(l,i,r,s,e[y+5],12,1200080426),s=Hn(s,l,i,r,e[y+6],17,-1473231341),r=Hn(r,s,l,i,e[y+7],22,-45705983),i=Hn(i,r,s,l,e[y+8],7,1770035416),l=Hn(l,i,r,s,e[y+9],12,-1958414417),s=Hn(s,l,i,r,e[y+10],17,-42063),r=Hn(r,s,l,i,e[y+11],22,-1990404162),i=Hn(i,r,s,l,e[y+12],7,1804603682),l=Hn(l,i,r,s,e[y+13],12,-40341101),s=Hn(s,l,i,r,e[y+14],17,-1502002290),r=Hn(r,s,l,i,e[y+15],22,1236535329),i=Wn(i,r,s,l,e[y+1],5,-165796510),l=Wn(l,i,r,s,e[y+6],9,-1069501632),s=Wn(s,l,i,r,e[y+11],14,643717713),r=Wn(r,s,l,i,e[y+0],20,-373897302),i=Wn(i,r,s,l,e[y+5],5,-701558691),l=Wn(l,i,r,s,e[y+10],9,38016083),s=Wn(s,l,i,r,e[y+15],14,-660478335),r=Wn(r,s,l,i,e[y+4],20,-405537848),i=Wn(i,r,s,l,e[y+9],5,568446438),l=Wn(l,i,r,s,e[y+14],9,-1019803690),s=Wn(s,l,i,r,e[y+3],14,-187363961),r=Wn(r,s,l,i,e[y+8],20,1163531501),i=Wn(i,r,s,l,e[y+13],5,-1444681467),l=Wn(l,i,r,s,e[y+2],9,-51403784),s=Wn(s,l,i,r,e[y+7],14,1735328473),r=Wn(r,s,l,i,e[y+12],20,-1926607734),i=Jn(i,r,s,l,e[y+5],4,-378558),l=Jn(l,i,r,s,e[y+8],11,-2022574463),s=Jn(s,l,i,r,e[y+11],16,1839030562),r=Jn(r,s,l,i,e[y+14],23,-35309556),i=Jn(i,r,s,l,e[y+1],4,-1530992060),l=Jn(l,i,r,s,e[y+4],11,1272893353),s=Jn(s,l,i,r,e[y+7],16,-155497632),r=Jn(r,s,l,i,e[y+10],23,-1094730640),i=Jn(i,r,s,l,e[y+13],4,681279174),l=Jn(l,i,r,s,e[y+0],11,-358537222),s=Jn(s,l,i,r,e[y+3],16,-722521979),r=Jn(r,s,l,i,e[y+6],23,76029189),i=Jn(i,r,s,l,e[y+9],4,-640364487),l=Jn(l,i,r,s,e[y+12],11,-421815835),s=Jn(s,l,i,r,e[y+15],16,530742520),r=Jn(r,s,l,i,e[y+2],23,-995338651),i=Zn(i,r,s,l,e[y+0],6,-198630844),l=Zn(l,i,r,s,e[y+7],10,1126891415),s=Zn(s,l,i,r,e[y+14],15,-1416354905),r=Zn(r,s,l,i,e[y+5],21,-57434055),i=Zn(i,r,s,l,e[y+12],6,1700485571),l=Zn(l,i,r,s,e[y+3],10,-1894986606),s=Zn(s,l,i,r,e[y+10],15,-1051523),r=Zn(r,s,l,i,e[y+1],21,-2054922799),i=Zn(i,r,s,l,e[y+8],6,1873313359),l=Zn(l,i,r,s,e[y+15],10,-30611744),s=Zn(s,l,i,r,e[y+6],15,-1560198380),r=Zn(r,s,l,i,e[y+13],21,1309151649),i=Zn(i,r,s,l,e[y+4],6,-145523070),l=Zn(l,i,r,s,e[y+11],10,-1120210379),s=Zn(s,l,i,r,e[y+2],15,718787259),r=Zn(r,s,l,i,e[y+9],21,-343485551),i=Ch(i,d),r=Ch(r,v),s=Ch(s,_),l=Ch(l,M)}return[i,r,s,l]}function wG(e,t=f1.Hex){const i=t||f1.Base64,r=iwe(Ybe(e),e.length*y1);switch(i){case f1.Raw:return r;case f1.Hex:return Qbe(r);case f1.String:return Xbe(r);case f1.Base64:return ewe(r)}}var R8;let rv=R8=class extends n_{writeLevels(e,t,i){for(const r in e){const s=this.levels[r];return void(t.stops=s)}}clone(){return new R8({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:xh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:xh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:me(this.levels)})}};m([x()],rv.prototype,"levels",void 0),m([Ke("levels")],rv.prototype,"writeLevels",null),rv=R8=m([Y("esri.views.2d.engine.LevelDependentSizeVariable")],rv);const rwe=Ae.getLogger("esri.views.2d.layers.support.clusterUtils");Me.add("esri-cluster-arcade-enabled",!0);const nwe=Me("esri-cluster-arcade-enabled"),swe=(e,t,i,r,s)=>{const l=t.clone();if(!awe(l))return l;if(l.authoringInfo||(l.authoringInfo=new d7),l.authoringInfo.isAutoGenerated=!0,"visualVariables"in l){const y=(l.visualVariables||[]).filter(v=>v.valueExpression!=="$view.scale"),d=_G(y);y.forEach(v=>{v.type==="rotation"?v.field?v.field=Pd(e,v.field,"avg_angle","number"):v.valueExpression&&(v.field=nv(e,v.valueExpression,"avg_angle","number"),v.valueExpression=null):v.normalizationField?(v.field=Pd(e,v.field,"avg_norm","number",v.normalizationField),v.normalizationField=null):v.field?v.field=Pd(e,v.field,"avg","number"):v.valueExpression&&(v.field=nv(e,v.valueExpression,"avg","number"),v.valueExpression=null)}),ae(d)&&!owe(y)&&s&&(y.push(xG(i,r)),l.dynamicClusterSize=!0),l.visualVariables=y}switch(l.type){case"simple":break;case"pie-chart":for(const y of l.attributes)y.field?y.field=Pd(e,y.field,"sum","number"):y.valueExpression&&(y.field=nv(e,y.valueExpression,"sum","number"),y.valueExpression=null);break;case"unique-value":l.field?l.field=Pd(e,l.field,"mode","string"):l.valueExpression&&(l.field=nv(e,l.valueExpression,"mode","string"),l.valueExpression=null);break;case"class-breaks":l.normalizationField?(l.field=Pd(e,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=Pd(e,l.field,"avg","number"):l.valueExpression&&(l.field=nv(e,l.valueExpression,"avg","number"),l.valueExpression=null)}return l},_G=e=>{for(const t of e)if(t.type==="size")return t;return null};function OTe(e,t,i){const r=e.clone();let s=!1;if("visualVariables"in r){const l=(r.visualVariables||[]).filter(d=>d.valueExpression!=="$view.scale"),y=_G(l);ae(y)&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(xG(t,i)),r.dynamicClusterSize=!0,s=!0)}return{renderer:r,didInject:s}}const owe=e=>{for(const t of e)if(t.field==="cluster_count")return!0;return!1},xG=(e,t)=>{const i=[new X0({value:0,size:0}),new X0({value:1})];if(ae(t))return new n_({field:"cluster_count",stops:[...i,new X0({value:2,size:0})]});const r=Object.keys(t).reduce((s,l)=>De(te({},s),{[l]:[...i,new X0({value:Math.max(2,t[l].minValue),size:e.clusterMinSize}),new X0({value:Math.max(3,t[l].maxValue),size:e.clusterMaxSize})]}),{});return new rv({field:"cluster_count",levels:r})},awe=e=>{const t=i=>rwe.error(new fe("Unsupported-renderer",i,{renderer:e}));switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1;break}case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!nwe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function lwe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,s="field",l=t.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+wG(l)}}}function nv(e,t,i,r){const s=wG(t),l=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(y=>y.name===l)||e.push(new Ad({name:l,isAutoGenerated:!0,onStatisticExpression:new _8({expression:t,returnType:r}),statisticType:i})),l}function Pd(e,t,i,r,s){if(t==="cluster_count"||e.some(y=>y.name===t))return t;const l=lwe(i,t,s);return e.some(y=>y.name===l)||(i==="avg_norm"?e.push(new Ad({name:l,isAutoGenerated:!0,onStatisticExpression:new _8({expression:`$feature.${t} / $feature.${s}`,returnType:r}),statisticType:"avg"})):e.push(new Ad({name:l,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),l}const uwe=e=>{let t=class extends e{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var d,v;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new Ad({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],l=((d=r.fields)!=null?d:[]).filter(_=>!_.isAutoGenerated);if(i.renderer&&!((v=i.renderer.authoringInfo)==null?void 0:v.isAutoGenerated))return r.fields=[...s,...l],r;if(i.symbol)return r.fields=[...s,...l],r.renderer=null,r;if(!this.renderer)return i;const y=swe(s,this.renderer,i,null,!1);return r.fields=[...s,...l],r.renderer=y,r}};return m([x(Kbe)],t.prototype,"featureReduction",null),t=m([Y("esri.layers.mixins.FeatureReductionLayer")],t),t},cwe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},SG=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,l){(l&&l.layerContainerType==="ground"||i&&vne(this,s,{},l))&&(r[s]=i)}writeOperationalLayerType(i,r,s,l){!i||l&&l.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i!=null?i:"Layer"}read(i,r){r&&(r.layer=this),yne(this,i,s=>super.read(i,s),r)}write(i,r){var y,d;if(r==null?void 0:r.origin){const v=`${r.origin}/${r.layerContainerType||"operational-layers"}`,_=cwe[v];let M=_&&_[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&v==="web-scene/operational-layers"&&(M=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&v==="web-map/operational-layers"&&(M=!1),!M)return(y=r.messages)==null||y.push(new fe("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${v}'`,{layer:this})),null}const s=super.write(i,De(te({},r),{layer:this})),l=!!r&&!!r.messages&&!!r.messages.filter(v=>v instanceof fe&&v.name==="web-document-write:property-required").length;return w2(s==null?void 0:s.url)?((d=r==null?void 0:r.messages)==null||d.push(new fe("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:s}beforeSave(){}};return m([x({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),m([x(Qz)],t.prototype,"listMode",void 0),m([Ke("listMode")],t.prototype,"writeListMode",null),m([x({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),m([Ke("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),m([x(E_)],t.prototype,"opacity",void 0),m([x({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),m([Ke("title"),Ke(["web-scene"],"title")],t.prototype,"writeTitle",null),m([x({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=m([Y("esri.layers.mixins.OperationalLayer")],t),t};var F8;const L8=new bt({asc:"ascending",desc:"descending"});let g1=F8=class extends Ie{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new F8({field:this.field,valueExpression:this.valueExpression,order:this.order})}};m([x({type:String,json:{write:!0}})],g1.prototype,"field",void 0),m([x({type:String,json:{write:!0}})],g1.prototype,"valueExpression",void 0),m([x({type:L8.apiValues,json:{read:L8.read,write:L8.write}})],g1.prototype,"order",void 0),g1=F8=m([Y("esri.layers.support.OrderByInfo")],g1);const MG=g1;function hwe(e,t,i){if(!e)return null;const r=e.find(l=>!!l.field);if(!r)return null;const s=new MG;return s.read(r,i),[s]}function pwe(e,t,i,r){const s=e.find(l=>!!l.field);s&&Nn(i,[s.toJSON()],t)}const dwe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return m([x({type:[MG],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:hwe},write:{target:"layerDefinition.orderBy",writer:pwe}}})],t.prototype,"orderBy",void 0),t=m([Y("esri.layers.mixins.OrderedLayer")],t),t},$G=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem=oi(this.portalItem)}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new Xg({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await import("./layersLoader.a27bf882.js").then(function(l){return l.l});return fr(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw Zs(s)||Ae.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Lf(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?gr==null?void 0:gr.findCredential(this.url):null;if(!r)return!0;const s=O_.credential===r?O_.user:await this._fetchEditingUser(i);return O_.credential=r,O_.user=s,ae(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var M,T,A;const r=(T=(M=this.portalItem)==null?void 0:M.portal)==null?void 0:T.user;if(r)return r;const s=gr.findServerInfo((A=this.url)!=null?A:"");if(!(s==null?void 0:s.owningSystemUrl))return null;const l=`${s.owningSystemUrl}/sharing/rest`,y=Es.getDefault();if(y&&y.loaded&&ua(y.restUrl)===ua(l))return y.user;const d=`${l}/community/self`,v=q(i)?i.signal:null,_=await j2(li(d,{authMode:"no-prompt",query:{f:"json"},signal:v}));return _.ok?p6.fromJSON(_.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,l=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Es.getDefault());return s&&l&&!LR(l.restUrl,s.restUrl)?(r.messages&&r.messages.push(new fe("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,De(te({},r),{layer:this}))}};return m([x({type:Xg})],t.prototype,"portalItem",null),m([Be("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),m([Ke("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),m([x({clonable:!1})],t.prototype,"resourceReferences",void 0),m([x({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=m([Y("esri.layers.mixins.PortalLayer")],t),t},O_={credential:null,user:null};let sv=class extends ot{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};m([x()],sv.prototype,"updating",void 0),m([x()],sv.prototype,"status",void 0),sv=m([Y("esri.layers.support.PublishingInfo")],sv);const fwe=sv,ywe="esri.layers.mixins.PublishableLayer",gwe=e=>{let t=class extends e{get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const r=new fwe;return this._checkPublishingStatus(r),r}_checkPublishingStatus(i){const r=250,s=125;let l=0;const y=async v=>{let _;i.updating=!0;try{_=await this.fetchPublishingStatus()}catch{_="unavailable"}_!=="published"&&_!=="unavailable"||(i.status==="publishing"&&this.refresh(),d.remove()),i.status=_,i.updating=!1,d.removed||(l=setTimeout(y,v,v+s))},d={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch(()=>d.remove()),y(r),this.own(d)}};return m([x({readOnly:!0,clonable:!1})],t.prototype,"publishingInfo",null),t=m([Y(ywe)],t),t},ov=new gt,av=new WeakMap;function mwe(e){EG(e)&&ov.push(e)}function vwe(e){EG(e)&&ov.includes(e)&&ov.remove(e)}function EG(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function IG(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:IG(t,e%t):0}let N8=0,k_=0;function bwe(){var t;const e=Date.now();for(const i of ov)i.refreshInterval&&e-((t=av.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(av.set(i,e),i.refresh(e))}vO(()=>{const e=Date.now();let t=0;for(const i of ov)t=IG(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?av.get(i)||av.set(i,e):av.delete(i);if(t!==k_){if(k_=t,clearInterval(N8),k_===0)return void(N8=0);N8=setInterval(bwe,k_)}});const TG=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=yw(()=>this.hasDataChanged()),this.when().then(()=>{mwe(this)},()=>{})}destroy(){vwe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Xl(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{Ae.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return m([x({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),m([x({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),m([x()],t.prototype,"refreshParameters",null),t=m([Y("esri.layers.mixins.RefreshableLayer")],t),t},j8=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&wwe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return m([x({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),m([x({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),m([x({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=m([Y("esri.layers.mixins.ScaleRangeLayer")],t),t};function wwe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Od=$n()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var D8;let lv=D8=class extends Ie{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return sge(this.value,this.unit,"milliseconds")}clone(){return new D8({value:this.value,unit:this.unit})}};m([x({type:Number,json:{write:!0},nonNullable:!0})],lv.prototype,"value",void 0),m([x({type:Od.apiValues,json:{type:Od.jsonValues,read:Od.read,write:Od.write},nonNullable:!0})],lv.prototype,"unit",void 0),lv=D8=m([Y("esri.TimeInterval")],lv);const uv=lv;var V8;let m1=V8=class extends Ie{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new V8({respectsDaylightSaving:e,timezone:t})}};m([x({type:Boolean,json:{write:!0}})],m1.prototype,"respectsDaylightSaving",void 0),m([Be("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],m1.prototype,"readRespectsDaylightSaving",null),m([x({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],m1.prototype,"timezone",void 0),m1=V8=m([Y("esri.layers.support.TimeReference")],m1);const _we=m1;var z8;let Kn=z8=class extends Ie{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new zo({start:i,end:r})}writeFullTimeExtent(e,t){e&&q(e.start)&&q(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new uv({value:t.timeInterval,unit:Od.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new uv({value:t.defaultTimeInterval,unit:Od.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:l,fullTimeExtent:y,trackIdField:d,useTime:v}=this;return new z8({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:me(l),fullTimeExtent:me(y),trackIdField:d,useTime:v})}};m([x({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Kn.prototype,"cumulative",void 0),m([x({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Kn.prototype,"endField",void 0),m([x({type:zo,json:{write:{enabled:!0,allowNull:!0}}})],Kn.prototype,"fullTimeExtent",void 0),m([Be("fullTimeExtent",["timeExtent"])],Kn.prototype,"readFullTimeExtent",null),m([Ke("fullTimeExtent")],Kn.prototype,"writeFullTimeExtent",null),m([x({type:Boolean,json:{write:!0}})],Kn.prototype,"hasLiveData",void 0),m([x({type:uv,json:{write:{enabled:!0,allowNull:!0}}})],Kn.prototype,"interval",void 0),m([Be("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Kn.prototype,"readInterval",null),m([Ke("interval")],Kn.prototype,"writeInterval",null),m([x({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Kn.prototype,"startField",void 0),m([x({type:_we,json:{write:{enabled:!0,allowNull:!0}}})],Kn.prototype,"timeReference",void 0),m([x({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Kn.prototype,"trackIdField",void 0),m([x({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Kn.prototype,"useTime",void 0),Kn=z8=m([Y("esri.layers.support.TimeInfo")],Kn);const CG=Kn,AG=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const l=s.timeOffset,y=Od.fromJSON(s.timeOffsetUnits);return l&&y?new uv({value:l,unit:y}):null}set timeInfo(i){lk(i,this.fieldsIndex),this._set("timeInfo",i)}};return m([x({type:zo,json:{write:!1}})],t.prototype,"timeExtent",void 0),m([x({type:uv})],t.prototype,"timeOffset",void 0),m([Be("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),m([x({value:null,type:CG,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),m([x({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=m([Y("esri.layers.mixins.TemporalLayer")],t),t},PG=new bt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ah=class extends yr(Ie){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};m([x({json:{write:!0}})],Ah.prototype,"name",void 0),m([x({json:{write:!0}})],Ah.prototype,"description",void 0),m([x({json:{read:PG.read,write:PG.write}})],Ah.prototype,"drawingTool",void 0),m([x({json:{write:!0}})],Ah.prototype,"prototype",void 0),m([x({json:{write:!0}})],Ah.prototype,"thumbnail",void 0),Ah=m([Y("esri.layers.support.FeatureTemplate")],Ah);const G8=Ah;let Ru=class extends yr(Ie){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=w$(e[i]);return t}writeDomains(e,t){var r;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON());t.domains=i}};m([x({json:{write:!0}})],Ru.prototype,"id",void 0),m([x({json:{write:!0}})],Ru.prototype,"name",void 0),m([x({json:{write:!0}})],Ru.prototype,"domains",void 0),m([Be("domains")],Ru.prototype,"readDomains",null),m([Ke("domains")],Ru.prototype,"writeDomains",null),m([x({type:[G8],json:{write:!0}})],Ru.prototype,"templates",void 0),Ru=m([Y("esri.layers.support.FeatureType")],Ru);const q8=Ru;function xwe(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function OG(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function kG(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class RG{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;const i=[];for(const r of t){const s=r&&r.name;if(s){const l=FG(s),y=LG(s);this._fieldsMap.set(s,r),this._fieldsMap.set(l,r),this._normalizedFieldsMap.set(y,r),i.push(l),xwe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):T4(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),OG(r)||kG(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)OG(t)||kG(t)||t.nullable||Dse(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){var r;if(!t)return;let i=this._fieldsMap.get(t);return i||(i=(r=this._fieldsMap.get(FG(t)))!=null?r:this._normalizedFieldsMap.get(LG(t)),i&&this._fieldsMap.set(t,i),i)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;const i=this.get(t);if(i)return(r=i.name)!=null?r:void 0}}function FG(e){return e.trim().toLowerCase()}function LG(e){return Ase(e).toLowerCase()}function Swe(){return{fields:{type:[G0],value:null},fieldsIndex:{readOnly:!0,get(){return new RG(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||Ae.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return uk(this.fieldsIndex,e)}}}}const U8=Ae.getLogger("esri.layers.support.labelingInfo"),Mwe=/\[([^\[\]]+)\]/gi;function NG(e,t,i){return e?e.map(r=>{const s=new iv;if(s.read(r,i),s.labelExpression){const l=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(Mwe,(y,d)=>`[${$we(d,l)}]`)}return s}):null}function $we(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}const Ewe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function Iwe(e,t){const i=me(e);return i.some(r=>Twe(r,t))?[]:i}function Twe(e,t){const i=e.labelPlacement,r=Ewe[t];if(!e.symbol)return U8.warn("No ILabelClass symbol specified."),!0;if(!r)return U8.error(new fe("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!r.includes(i)){const s=r[0];i&&U8.warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${s}`),e.labelPlacement=s}return!1}const Pa=[];function jG(e,t){var r,s;if(Lz((r=e.url)!=null?r:""))return!0;const{wkid:i}=t;for(const l of Pa){if(((s=e.version)!=null?s:0)>=l[0])return!0;if(typeof l[1]=="function"&&(l[1]=l[1]()),l[1].has(i))return!1}return!0}Pa.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),Pa.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Pa.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Pa.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Pa.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),Pa.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Pa.push([10.61,()=>new Set([102497])]),Pa.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Pa.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Pa.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function Cwe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await j2(r.populateFromStyle());if(fr(i),s.ok===!1){const l=s.error;t&&t.messages&&t.messages.push(new rs("renderer:style-reference",`Failed to create unique value renderer from style reference: ${l.message}`,{error:l,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}const Awe=["oid","global-id"],Pwe=["oid","global-id","guid"];function DG({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},l){if(!i)return null;const y=Nwe({editFieldsInfo:t,fields:i,objectIdField:r},l);if(!y.length)return null;const d=Vwe({titleBase:s,fields:i,displayField:e}),v=Dwe();return new i0({title:d,content:v,fieldInfos:y})}const Owe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],kwe=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!VG(e.name,t)&&(!i||e.name!==i)&&!Awe.includes(e.type)&&!Owe.some(s=>s.test(e.name));function Rwe(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(Fwe),e}function Fwe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:zG(e)?-1:zG(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function VG(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:l}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),l&&l.toLowerCase()].includes(e.toLowerCase())}function Lwe(e,t){return e.editable&&!Pwe.includes(e.type)&&!VG(e.name,t)}function Nwe({editFieldsInfo:e,fields:t,objectIdField:i},r){return Rwe(t!=null?t:[],(r==null?void 0:r.ignoreFieldTypes)||zwe).map(s=>new pg({fieldName:s.name,isEditable:Lwe(s,e),label:s.alias,format:jwe(s),visible:kwe(s,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function jwe(e){switch(e.type){case"small-integer":case"integer":case"single":return new Zf({digitSeparator:!0,places:0});case"double":return new Zf({digitSeparator:!0,places:2});case"date":return new Zf({dateFormat:"long-month-day-year"});default:return e.type==="string"&&gk(e.name)?new Zf({digitSeparator:!0,places:0}):null}}function Dwe(){return[new Kf,new rg]}function Vwe(e){const t=kse(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i!=null?i:""}function zG(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const zwe=["geometry","blob","raster","guid","xml"],ps="FeatureLayer",GG="esri.layers.FeatureLayer",Gwe=Ae.getLogger(GG);function R_(e,t){return new fe("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function qG(e){return e&&e instanceof gt}const B8=Swe();function H8(e,t,i){const r=!!(i==null?void 0:i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let vt=class extends _be(uwe(Fve(gwe(Ove(c8(dwe(AG(j8(TG(Nz(SG($G(g_(Dz(Oz(yr(_0))))))))))))))))){constructor(...e){super(...e),this._handles=new Jr,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=At.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=oi(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?te({url:e},t):e}load(e){var r;const t=q(e)?e.signal:null;if(((r=this.portalItem)==null?void 0:r.loaded)&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Lf).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new fe("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,eG(e,t,this.url)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),((e=this._get("createQueryVersion"))!=null?e:0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)==null?void 0:e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readIsTable(e,t){var i;return(t=(i=t==null?void 0:t.layerDefinition)!=null?i:t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){(r==null?void 0:r.writeLayerSchema)&&Nn(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return tG(t.layerDefinition||t)}readObjectIdField(e,t){return iG(t.layerDefinition||t)}get parsedUrl(){const e=yn(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Uc(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Uc(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){ok(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var s,l;const r=(s=(t=t.layerDefinition||t).drawingInfo)==null?void 0:s.renderer;if(r){const y=(l=Zm(r,t,i))!=null?l:void 0;return y||Gwe.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),y}if(t.defaultSymbol)return t.types&&t.types.length?new Wm({defaultSymbol:W8(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(y=>({id:y.id,symbol:W8(y.symbol,y,i)}))}):new r1({symbol:W8(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(qG(t)&&this._resetMemorySource(t),qG(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof gt?new Pu({layer:this,items:e}):e:null}readSource(e,t){var r;const i=mh.fromJSON(t.featureSet);return new Pu({layer:this,items:(r=i==null?void 0:i.features)!=null?r:[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e=e&&e.map(l=>G8.fromJSON(l)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){var s,l;const i=(l=(s=t.layerDefinition)==null?void 0:s.name)!=null?l:t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const y=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Ive(this.url,i):i;let d=i;if(!d&&this.url){const v=Td(this.url);q(v)&&(d=v.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&y&&y!==d&&(d=y+" - "+d),u8(d)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e&&e.map(l=>(l=q8.fromJSON(l),this._fixTemplates(l.templates,r),this._fixTemplates(l.templates,s),l))}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return obe(this,e,t,ps)}async updateAttachment(e,t,i){return abe(this,e,t,i,ps)}async applyEdits(e,t){return lbe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return DG(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await uO(import("./FeatureLayerSource.736e55f4.js"),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=vbe(this);e.dynamicDataSource=this.dynamicDataSource;const t=q(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,i=m_(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return ube(this,e,t,ps)}async fetchRecomputedExtents(e){return cbe(this,e,ps)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i==null||i.some(l=>{const{id:y}=l;return y!=null&&(y.toString()===r.toString()&&(s=l),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return hbe(this,e,t,ps)}async queryFeatures(e,t){var s;const i=await this.load(),r=await i.source.queryFeatures((s=Bn.from(e))!=null?s:i.createQuery(),t);if(r==null?void 0:r.features)for(const l of r.features)l.layer=l.sourceLayer=i;return r}async queryObjectIds(e,t){return pbe(this,e,t,ps)}async queryFeatureCount(e,t){return dbe(this,e,t,ps)}async queryExtent(e,t){return fbe(this,e,t,ps)}async queryRelatedFeatures(e,t){return ybe(this,e,t,ps)}async queryRelatedFeaturesCount(e,t){return gbe(this,e,t,ps)}async queryTopFeatures(e,t){var l;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((l=r==null?void 0:r.query)==null?void 0:l.supportsTopFeaturesQuery))throw new fe(ps,"Layer source does not support queryTopFeatures capability");const s=await i.queryTopFeatures(vh.from(e),t);if(s==null?void 0:s.features)for(const y of s.features)y.layer=y.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r==null?void 0:r.query.supportsTopFeaturesQuery))throw new fe(ps,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(vh.from(e),t)}async queryTopFeaturesExtent(e,t){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((s=r==null?void 0:r.query)==null?void 0:s.supportsTopFeaturesQuery))throw new fe(ps,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(vh.from(e),t)}async queryTopFeatureCount(e,t){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((s=r==null?void 0:r.query)==null?void 0:s.supportsTopFeaturesQuery))throw new fe(ps,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(vh.from(e),t)}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var l,y;t=De(te({},t),{origin:(l=t==null?void 0:t.origin)!=null?l:void 0,writeLayerSchema:(y=t==null?void 0:t.writeLayerSchema)!=null?y:this._hasMemorySource()});const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(R_(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return s==null||s.push(R_(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(R_(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return s==null||s.push(R_(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new fe(ps,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||jG(this,e))}async save(e){return(await import("./featureLayerUtils.3542f27a.js")).save(this,e)}async saveAs(e,t){return(await import("./featureLayerUtils.3542f27a.js")).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var s,l;if(!e){const y=((l=(s=this.capabilities)==null?void 0:s.operations)==null?void 0:l.supportsSync)?"Query,Sync":"Query";Nn("layerDefinition.capabilities",y,t),i&&!(r==null?void 0:r.writeLayerSchema)&&(t.capabilities=y)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return li(this.url,{query:De(te({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),ok(this.renderer,this.fieldsIndex),lk(this.timeInfo,this.fieldsIndex),Cwe(this,{origin:"service"})}async hasDataChanged(){return mbe(this)}async fetchPublishingStatus(){const e=this.source;return(e==null?void 0:e.fetchPublishingStatus)?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i,r;const e=(i=(t=this.parsedUrl)==null?void 0:t.path)!=null?i:"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((r=this.fields)==null?void 0:r.some(s=>s.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new fe("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new fe("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};m([Be("service","capabilities")],vt.prototype,"readCapabilities",null),m([x({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],vt.prototype,"charts",void 0),m([x({readOnly:!0})],vt.prototype,"createQueryVersion",null),m([x({json:{read:{source:"layerDefinition.copyrightText"}}})],vt.prototype,"copyright",void 0),m([x({json:{read:{source:"layerDefinition.displayField"}}})],vt.prototype,"displayField",void 0),m([x({types:Ts,readOnly:!0})],vt.prototype,"defaultSymbol",void 0),m([x({type:lo})],vt.prototype,"dynamicDataSource",void 0),m([x({type:Boolean})],vt.prototype,"editingEnabled",null),m([Be(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],vt.prototype,"readEditingEnabled",null),m([Be("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],vt.prototype,"readEditingEnabledFromWebMap",null),m([Ke(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],vt.prototype,"writeEditingEnabled",null),m([Ke("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],vt.prototype,"writeEditingEnabledToWebMap",null),m([x(De(te({},B8.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:H8}}}}}))],vt.prototype,"fields",void 0),m([x(B8.fieldsIndex)],vt.prototype,"fieldsIndex",void 0),m([x({type:bve,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],vt.prototype,"formTemplate",void 0),m([x({json:{read:{source:"layerDefinition.extent"}}})],vt.prototype,"fullExtent",void 0),m([x({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:H8,writer(e,t,i){const r=e?v8.toJSON(e):null;r&&Nn(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:v8.read}}})],vt.prototype,"geometryType",void 0),m([x({json:{read:{source:"layerDefinition.hasM"}}})],vt.prototype,"hasM",void 0),m([x({json:{read:{source:"layerDefinition.hasZ"}}})],vt.prototype,"hasZ",void 0),m([x(Xz)],vt.prototype,"id",void 0),m([x({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],vt.prototype,"infoFor3D",void 0),m([x({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],vt.prototype,"isTable",void 0),m([Be("service","isTable",["type","geometryType"]),Be("isTable",["layerDefinition.type","layerDefinition.geometryType"])],vt.prototype,"readIsTable",null),m([Ke("web-map","isTable")],vt.prototype,"writeIsTable",null),m([x(m8)],vt.prototype,"labelsVisible",void 0),m([x({type:[iv],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:NG},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:NG},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],vt.prototype,"labelingInfo",void 0),m([x((()=>{const e=me(Bve);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Nn(r,u2(t),i)}}},e})())],vt.prototype,"opacity",void 0),m([x(qve)],vt.prototype,"legendEnabled",void 0),m([x({type:["show","hide"],json:(()=>{const e=me(Qz.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],vt.prototype,"listMode",void 0),m([Be("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],vt.prototype,"readGlobalIdField",null),m([x({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:H8}}}}})],vt.prototype,"objectIdField",void 0),m([Be("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],vt.prototype,"readObjectIdField",null),m([x({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],vt.prototype,"operationalLayerType",void 0),m([x(B8.outFields)],vt.prototype,"outFields",void 0),m([x({readOnly:!0})],vt.prototype,"parsedUrl",null),m([x({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],vt.prototype,"path",void 0),m([x($_)],vt.prototype,"popupEnabled",void 0),m([x({type:i0,json:{name:"popupInfo",write:!0}})],vt.prototype,"popupTemplate",void 0),m([x({readOnly:!0})],vt.prototype,"defaultPopupTemplate",null),m([x({types:Jm,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:gz,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],vt.prototype,"renderer",null),m([Be("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Be("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],vt.prototype,"readRenderer",null),m([x((()=>{const e=me(Gve);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],vt.prototype,"screenSizePerspectiveEnabled",void 0),m([x({clonable:!1})],vt.prototype,"source",null),m([ri("source")],vt.prototype,"castSource",null),m([Be("portal-item","source",["featureSet"]),Be("web-map","source",["featureSet"])],vt.prototype,"readSource",null),m([x({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],vt.prototype,"spatialReference",void 0),m([x({type:Number})],vt.prototype,"subtypeCode",void 0),m([x({type:[G8]})],vt.prototype,"templates",void 0),m([Be("templates",["editFieldsInfo","creatorField","editorField","templates"])],vt.prototype,"readTemplates",null),m([x({type:CG})],vt.prototype,"timeInfo",void 0),m([x()],vt.prototype,"title",void 0),m([Be("service","title",["name"]),Be("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],vt.prototype,"readTitle",null),m([Be("web-map","title",["layerDefinition.name","title"])],vt.prototype,"readTitleFromWebMap",null),m([x({type:String})],vt.prototype,"sublayerTitleMode",void 0),m([x({json:{read:!1}})],vt.prototype,"type",void 0),m([x({type:String})],vt.prototype,"typeIdField",void 0),m([Be("service","typeIdField"),Be("typeIdField",["layerDefinition.typeIdField"])],vt.prototype,"readTypeIdField",null),m([x({type:[q8]})],vt.prototype,"types",void 0),m([Be("service","types",["types"]),Be("types",["layerDefinition.types"])],vt.prototype,"readTypes",null),m([x({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],vt.prototype,"visible",void 0),m([Be("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],vt.prototype,"readVisible",null),vt=m([Y(GG)],vt);const W8=$c({types:N2}),UG=vt;var qwe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:UG});const Uwe=["$datastore","$map","$layer","$aggregatedfeatures"],Bwe="esri.widgets.Feature.support.arcadeFeatureUtils",Hwe=Ae.getLogger(Bwe);function Wwe(e){return typeof e=="string"?mm(XM(e)):Array.isArray(e)?Jwe(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?Zwe(e):e}function Jwe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?mm(XM(t)):t}</li>`).join("")}</ul>`}function Zwe(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?mm(XM(i)):i}</td></tr>`}).join("")}</table>`}function Kwe({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:s,map:l,graphic:y,interceptor:d}){i.forEach(v=>{const _=v.toLowerCase(),M={map:l,spatialReference:s.sr,interceptor:d};if(_==="$map"&&(r.vars[_]=t.convertMapToFeatureSetCollection(M)),_==="$layer"&&(r.vars[_]=t.convertFeatureLayerToFeatureSet({layer:y.sourceLayer,spatialReference:s.sr,interceptor:d})),_==="$datastore"&&(r.vars[_]=t.convertServiceUrlToWorkspace({url:y.sourceLayer.url,spatialReference:s.sr,interceptor:d})),_==="$aggregatedfeatures"){const T=y.layer,{fields:A,objectIdField:R,geometryType:F,spatialReference:V,displayField:z}=T,W=new UG(De(te({fields:A,objectIdField:R,geometryType:F,spatialReference:V,displayField:z},T.type==="feature"?{templates:T.templates,typeIdField:T.typeIdField,types:T.types}:null),{source:e}));r.vars[_]=t.convertFeatureLayerToFeatureSet({layer:W,spatialReference:s.sr,interceptor:d})}})}function BG(){return import("./arcadeUtils.277de270.js").then(function(e){return e.ay})}function Ywe(e){return"createQuery"in e&&"queryFeatures"in e}async function Xwe({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const s=await t.whenLayerView(r);if(!Ywe(s))return[];const l=s.createQuery();l.aggregateIds=[e.getObjectId()];const{features:y}=await s.queryFeatures(l);return y}async function HG({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:s,graphic:l,view:y}){if(!e||!e.expression)return null;const d=t.createSyntaxTree(e.expression),v=Uwe.filter(R=>t.hasVariable(d,R)),[_]=await Promise.all([Xwe({graphic:l,view:y}),t.loadScriptDependencies(d,!0,v)]),M=t.getViewInfo({spatialReference:r}),T=t.createExecContext(l,M);T.interceptor=i,T.useAsync=!0,Kwe({aggregatedFeatures:_,arcadeUtils:t,featureSetVars:v,context:T,viewInfo:M,map:s,graphic:l,interceptor:i});const A=t.createFunction(d,T);return t.executeAsyncFunction(A,T).catch(R=>Hwe.error("arcade-execution-error",{error:R,graphic:l,expressionInfo:e}))}async function Qwe({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:s,view:l}){if(!e||!e.length)return{};const y=await BG(),d={};for(const M of e)d[`expression/${M.name}`]=HG({expressionInfo:M,arcadeUtils:y,interceptor:r,spatialReference:t,map:s,graphic:i,view:l});const v=await Ss(d),_={};for(const M in v)_[M]=Wwe(v[M].value);return _}const e2e=1;let ho=class extends ba(ot){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,s;const t=(r=this.contentElement)==null?void 0:r.type;(s=this.contentElementViewModel)==null||s.destroy();const i=t==="fields"?new R3:t==="media"?new md:t==="text"?new P3:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=A0(this._compile,e2e,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:s,map:l,view:y,_abortController:d}=this;if(!(t&&i&&s&&l))return void this._set("contentElement",null);const v=await BG();if(d!==this._abortController)return;const _=await HG({arcadeUtils:v,expressionInfo:t,graphic:i,interceptor:r,map:l,spatialReference:s,view:y});if(!_||_.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const M=await _.castAsJsonAsync(d.signal),T=M==null?void 0:M.type,A=T==="media"?yg.fromJSON(M):T==="text"?Qf.fromJSON(M):T==="fields"?Kf.fromJSON(M):null;this._set("contentElement",A)},this.handles.add([Ve(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),fi),Ve(()=>[this.contentElement],()=>this._createVM(),fi)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e,t;return(t=(e=this.view)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e,t;return(t=(e=this.view)==null?void 0:e.map)!=null?t:null}set map(e){this._override("map",e)}};m([x()],ho.prototype,"_abortController",void 0),m([x({type:mk})],ho.prototype,"expressionInfo",void 0),m([x({type:jr})],ho.prototype,"graphic",void 0),m([x({readOnly:!0})],ho.prototype,"contentElement",void 0),m([x({readOnly:!0})],ho.prototype,"contentElementViewModel",void 0),m([x()],ho.prototype,"interceptor",void 0),m([x()],ho.prototype,"spatialReference",null),m([x({readOnly:!0})],ho.prototype,"state",null),m([x()],ho.prototype,"map",null),m([x()],ho.prototype,"view",void 0),ho=m([Y("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],ho);const J8=ho,F_={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let L_=class extends zn{constructor(e,t){super(e,t),this.viewModel=new J8}initialize(){this.addHandles(Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),fi))}destroy(){this._destroyContentWidget()}renderLoading(){return ge("div",{key:"loading-container",class:F_.loadingSpinnerContainer},ge("span",{class:this.classes(F_.iconLoading,F_.spinner)}))}render(){var t;const{state:e}=this.viewModel;return ge("div",{class:F_.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new Qj({viewModel:e}):i==="media"?new vV({viewModel:e}):i==="text"?new k3({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};m([x({type:J8})],L_.prototype,"viewModel",void 0),L_=m([Y("esri.widgets.Feature.FeatureExpression")],L_);const t2e=L_,Z8=100;let qi=class extends yr(e0(ba(ot))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await Xl(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await Xl(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await Xl(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=A0(this._queryController,Z8,this),this._queryFeatureCountThrottled=A0(this._queryFeatureCountController,Z8,this),this._queryPageThrottled=A0(this._queryPageController,Z8,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:i}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,i.removeAll(),i.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([Ve(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled],()=>this._queryThrottled(),fi),Ve(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),Ve(()=>[this.layer,this.relationshipId,this.objectId],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:i}=this,r=1,s=Math.ceil(i/t)||1;this._set("featurePage",Math.min(Math.max(e,r),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t==null?void 0:t.loaded)?e.map(i=>{const r=i.clone(),s=gm(i.field,t);return r.field=s,r}):e}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){const t=0,i=10;this._set("displayCount",Math.min(Math.max(e,t),i))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t,i;return(i=(t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField])!=null?i:null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new gt}get relatedLayer(){const{layer:e,map:t,relationship:i}=this;return(e==null?void 0:e.loaded)?N0e(t,e,i):null}get relationship(){var i,r;const{relationshipId:e,layer:t}=this;return typeof e=="number"&&(r=(i=t==null?void 0:t.relationships)==null?void 0:i.find(({id:s})=>s===e))!=null?r:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new gt}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:i,graphic:r,relatedLayer:s}=this;return t?"loading":e||i?"querying":r&&s?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){var _,M,T,A,R;const{layer:e,relatedLayer:t,relationshipId:i,objectId:r,_queryFeatureCountAbortController:s}=this;if(await(e==null?void 0:e.load()),!t||typeof r!="number"||!((M=(_=e==null?void 0:e.capabilities)==null?void 0:_.queryRelated)==null?void 0:M.supportsCount))return void this._set("featureCount",0);await t.load();const l=t.createQuery(),y=(R=(A=(T=e.capabilities)==null?void 0:T.queryRelated)==null?void 0:A.supportsCacheHint)!=null?R:!1,d=new gd({cacheHint:y,relationshipId:i,returnGeometry:!1,objectIds:[r],where:l.where}),v=await e.queryRelatedFeaturesCount(d,{signal:s==null?void 0:s.signal});this._set("featureCount",v[r]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:i}=this;return t?e:i?e.slice(0,i):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:i,_queryPageAbortController:r}=this;!i||t<2||e.addMany(await this._queryRelatedFeatures({signal:r==null?void 0:r.signal}))}async _queryRelatedFeatures(e){var re,ie,he,be,we;const{orderByFieldsFixedCasing:t,showAllEnabled:i,featuresPerPage:r,displayCount:s,layer:l,relationshipId:y,featurePage:d,featureCount:v,relatedLayer:_}=this;await(l==null?void 0:l.load());const{relationship:M,objectId:T}=this;if(!M||typeof T!="number"||!((ie=(re=l==null?void 0:l.capabilities)==null?void 0:re.queryRelated)==null?void 0:ie.supportsPagination))return[];const A=i?((d-1)*r+v)%v:0,R=i?r:s;if(!_)return[];await _.load();const F=_.objectIdField,V=[...t==null?void 0:t.map(xe=>xe.field),F],z=t==null?void 0:t.map(xe=>`${xe.field} ${xe.order}`),W=((be=(he=l.capabilities)==null?void 0:he.queryRelated)==null?void 0:be.supportsCacheHint)||!1,Z=_.createQuery(),Q=new gd({orderByFields:z,start:A,num:R,outFields:V,cacheHint:W,relationshipId:y,returnGeometry:!1,objectIds:[T],where:Z.where}),ee=((we=(await l.queryRelatedFeatures(Q,{signal:e==null?void 0:e.signal}))[T])==null?void 0:we.features)||[];return ee.forEach(xe=>xe.sourceLayer=_),ee}};m([x()],qi.prototype,"_queryAbortController",void 0),m([x()],qi.prototype,"_queryPageAbortController",void 0),m([x()],qi.prototype,"_queryFeatureCountAbortController",void 0),m([x({value:1})],qi.prototype,"featurePage",null),m([x()],qi.prototype,"featuresPerPage",void 0),m([x({readOnly:!0})],qi.prototype,"orderByFieldsFixedCasing",null),m([x()],qi.prototype,"description",void 0),m([x({readOnly:!0})],qi.prototype,"itemDescriptionFieldName",null),m([x({value:3})],qi.prototype,"displayCount",null),m([x({type:jr})],qi.prototype,"graphic",void 0),m([x()],qi.prototype,"layer",void 0),m([x()],qi.prototype,"map",void 0),m([x({readOnly:!0})],qi.prototype,"objectId",null),m([x({readOnly:!0})],qi.prototype,"objectIdField",null),m([x()],qi.prototype,"orderByFields",void 0),m([x({readOnly:!0})],qi.prototype,"relatedFeatures",null),m([x({readOnly:!0})],qi.prototype,"relatedLayer",null),m([x({readOnly:!0})],qi.prototype,"relationship",null),m([x({readOnly:!0})],qi.prototype,"featureCount",void 0),m([x({readOnly:!0})],qi.prototype,"relatedFeatureViewModels",null),m([x()],qi.prototype,"relationshipId",void 0),m([x()],qi.prototype,"showAllEnabled",void 0),m([x({readOnly:!0})],qi.prototype,"state",null),m([x()],qi.prototype,"title",void 0),qi=m([Y("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],qi);const K8=qi,Fu={base:"esri-feature-relationship",esriWidget:"esri-widget",listContainer:"esri-feature-relationship__list",listContainerQuerying:"esri-feature-relationship__list--querying",featureObserver:"esri-feature__feature-observer",stickySpinnerContainer:"esri-feature__sticky-loading-container",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner",iconLoading:"esri-icon-loading-indicator esri-rotating"},WG={title:!0,description:!0};let ds=class extends zn{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{(i==null?void 0:i.isIntersecting)&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new K8,this.messages=null,this.messagesCommon=null,this.visibleElements=te({},WG),this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:s,featuresPerPage:l,featurePage:y}=this.viewModel;i==="ready"&&r&&s.length>=l*y&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new A3,this.addHandles([Ve(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),fi),Ve(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),hs(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([import("./calcite-list.fe8176a3.js"),import("./calcite-list-item.e5fa479b.js"),import("./calcite-icon.c89564fd.js"),import("./calcite-notice.dad18115.js")])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=oi(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i}=this.viewModel;return!e&&(t>i||i===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return vl(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return te(te({},WG),e)}renderStickyLoading(){return this.viewModel.state==="querying"?ge("div",{key:"sticky-loader",class:Fu.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return ge("span",{class:this.classes(Fu.iconLoading,Fu.spinner)})}renderLoading(){return ge("div",{key:"loading-container",class:Fu.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return ge("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Sl(this.container)?"chevron-left":"chevron-right";return ge("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var s,l;const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&((s=e.formattedAttributes)==null?void 0:s.global[t]);const r=e.state==="loading";return ge("calcite-list-item",{key:e.uid,label:r?`${(l=this.messagesCommon)==null?void 0:l.loading}\u2026`:i,description:r?"\u2026":e.description,onclick:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?ge("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return ge("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,color:"blue",scale:"s",width:"full"},ge("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return ge("div",{key:"feature-observer",class:Fu.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return ge("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return ge("div",{key:"list-container",class:this.classes(Fu.listContainer,{[Fu.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return ge("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,color:"red",scale:"s",width:"full"},ge("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return ge("div",{class:this.classes(Fu.base,Fu.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(i=>{this.addHandles(Ve(()=>[i.title,i.state],()=>this.scheduleRender(),fi),t)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,r=t.title&&this.title;this._featureElementInfo.set({description:i,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await fw(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};m([x()],ds.prototype,"_relatedFeatureIntersectionObserverNode",void 0),m([x({readOnly:!0})],ds.prototype,"displayShowAllButton",null),m([x({readOnly:!0})],ds.prototype,"displayListItems",null),m([x()],ds.prototype,"description",null),m([x({readOnly:!0})],ds.prototype,"featureCountDescription",null),m([x()],ds.prototype,"headingLevel",void 0),m([x()],ds.prototype,"title",null),m([x({type:K8})],ds.prototype,"viewModel",void 0),m([x(),Gn("esri/widgets/Feature/t9n/Feature")],ds.prototype,"messages",void 0),m([x(),Gn("esri/t9n/common")],ds.prototype,"messagesCommon",void 0),m([x()],ds.prototype,"visibleElements",void 0),m([ri("visibleElements")],ds.prototype,"castVisibleElements",null),ds=m([Y("esri.widgets.Feature.FeatureRelationship")],ds);const JG=ds;class i2e{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var cv;const r2e=1,ZG="content-view-models",KG="relationship-view-models",YG={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let tr=cv=class extends e0(ot){constructor(e){super(e),this._handles=new Jr,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=A0(this._graphicChanged,r2e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities=te({},YG),this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent||t.type==="relationship"&&i.relationshipContent},this._handles.add(Ve(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),fi))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return q(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return C0e(Vj(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Rj(this.graphic)}castAbilities(e){return te(te({},YG),e)}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){var e,t;return(t=(e=this.view)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof md&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof md&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof md&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){Zs(i)||(this._error=i,Ae.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new Qf({text:e}),0).text:e}_destroyContentViewModels(){var e,t;(e=this._handles)==null||e.remove(KG),(t=this._handles)==null||t.remove(ZG),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var s;const i=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),r=t==null?void 0:t.getObjectId();return q(i)&&q(r)&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){t==null||t.filter(Boolean).forEach(r=>{e.find(s=>this._matchesFeature(s,r))||e.add(new cv({abilities:{relationshipContent:!1},map:i,graphic:r}))}),e.forEach(r=>{(t==null?void 0:t.find(l=>this._matchesFeature(r,l)))||e.remove(r)})}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:s}=e,l=r==null?void 0:r.type;s&&l&&(l==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),l==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),l==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:s,title:l,description:y}=e,{_sourceLayer:d,graphic:v,map:_}=this,M=new K8(te({displayCount:i,graphic:v,orderByFields:r,relationshipId:s,layer:d,map:_},this._compileTitleAndDesc({title:l,description:y})));return this.contentViewModels[t]=M,this._handles.add(hs(()=>M.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(M)),KG),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:l,view:y}=this,d=new J8({expressionInfo:i,graphic:r,interceptor:cv.interceptor,map:s,spatialReference:l,view:y});return this.contentViewModels[t]=d,this._handles.add(Ve(()=>d.contentElementViewModel,()=>this._setExpressionContentVM(d,t),fi),ZG),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s}=e;return this.contentViewModels[t]=new i$(te({graphic:i},this._compileTitleAndDesc({title:s,description:r}))),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new P3({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:l,_expressionAttributes:y}=this,{attributes:d}=s,v=l.global;return{title:ad({attributes:d,fieldInfoMap:i,globalAttributes:v,expressionAttributes:y,layer:r,text:e}),description:ad({attributes:d,fieldInfoMap:i,globalAttributes:v,expressionAttributes:y,layer:r,text:t})}}_createFieldsVMParams(e,t){var _;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,s=te(te({},r.global),r.content[t]),l=(_=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:_.filter(({fieldName:M})=>JM(M)||bu(M)||s.hasOwnProperty(M)),y=i==null?void 0:i.expressionInfos,{description:d,title:v}=e;return te({attributes:s,expressionInfos:y,fieldInfos:l},this._compileTitleAndDesc({title:v,description:d}))}_compileFields(e,t){const i=e.clone(),r=new R3(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:s,formattedAttributes:l,_effectivePopupTemplate:y,relatedInfos:d,_sourceLayer:v,_expressionAttributes:_}=this,{attributes:M}=r,{description:T,mediaInfos:A,title:R}=e;return te({abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:M,layer:v,fieldInfoMap:s,formattedAttributes:te(te({},l.global),l.content[t]),expressionAttributes:_,mediaInfos:A,popupTemplate:y,relatedInfos:d},this._compileTitleAndDesc({title:R,description:T}))}_compileMedia(e,t){const i=e.clone(),r=new md(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const{attributes:l}=t,y=this.formattedAttributes.global;e.text=ad({attributes:l,fieldInfoMap:i,globalAttributes:y,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new P3(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,s=t==null?void 0:t.editFieldsInfo;return r&&s?T0e(s,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,{attributes:l}=r,y=this.formattedAttributes.global;return ad({attributes:l,fieldInfoMap:t,globalAttributes:y,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return C3(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return C3(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s,spatialReference:l,map:y,view:d}=this;if(t!==this._featureAbortController||!r)return;await O0e({graphic:r,popupTemplate:s,layer:i,spatialReference:l},e);const{content:{value:v},title:{value:_}}=await Ss({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:M}}=await Ss({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:Qwe({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:l,graphic:r,map:y,interceptor:cv.interceptor,view:d})});t===this._featureAbortController&&r&&(this._expressionAttributes=M,this._graphicExpressionAttributes=te(te({},r.attributes),M),this._set("formattedAttributes",this._createFormattedAttributes(v)),this._set("title",this._compileTitle(_)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(v)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:l,_sourceLayer:y,_fieldInfoMap:d,_graphicExpressionAttributes:v}=this;i.content[t]=QM({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:te(te({},v),e.attributes),layer:y,fieldInfoMap:d,relatedInfos:l})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:l,_fieldInfoMap:y,_graphicExpressionAttributes:d}=this;i.content[t]=QM({fieldInfos:e.fieldInfos,graphic:r,attributes:te(te({},d),e.attributes),layer:l,fieldInfoMap:y,relatedInfos:s})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:l,_graphicExpressionAttributes:y}=this,d=t==null?void 0:t.fieldInfos,v={global:QM({fieldInfos:d,graphic:i,attributes:y,layer:s,fieldInfoMap:l,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((_,M)=>{_.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:_,contentElementIndex:M,formattedAttributes:v}),_.type==="media"&&this._createMediaFormattedAttributes({contentElement:_,contentElementIndex:M,formattedAttributes:v})}),v}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,Vj(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const l=q(s.associatedLayer)?await s.associatedLayer.load(i):s;if(!l)return;const y=t.filter(_=>_&&bu(_.fieldName));if(!y||!y.length)return;t.forEach(_=>this._configureRelatedInfo(_,l));const d=await Dge({relatedInfos:r,layer:l},i);Object.keys(d).forEach(_=>{var A;const M=r.get(_.toString()),T=(A=d[_])==null?void 0:A.value;M&&T&&(M.layerInfo=T.data)});const v=await Vge({graphic:e,relatedInfos:r,layer:l},i);Object.keys(v).forEach(_=>{var M;Rge((M=v[_])==null?void 0:M.value,r.get(_.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=e7(e.fieldName);if(!r)return;const{layerId:s,fieldName:l}=r;if(!s)return;const y=i.get(s.toString())||kge(s,t);y&&(zge({relatedInfo:y,fieldName:l,fieldInfo:e}),this.relatedInfos.set(s,y))}};tr.interceptor=new i2e(F0e,L0e),m([x()],tr.prototype,"_error",void 0),m([x()],tr.prototype,"_featureAbortController",void 0),m([x({readOnly:!0})],tr.prototype,"_effectivePopupTemplate",null),m([x({readOnly:!0})],tr.prototype,"_fieldInfoMap",null),m([x({readOnly:!0})],tr.prototype,"_sourceLayer",null),m([x()],tr.prototype,"abilities",void 0),m([ri("abilities")],tr.prototype,"castAbilities",null),m([x({readOnly:!0})],tr.prototype,"content",void 0),m([x({readOnly:!0})],tr.prototype,"contentViewModels",void 0),m([x()],tr.prototype,"description",void 0),m([x({type:Boolean})],tr.prototype,"defaultPopupTemplateEnabled",void 0),m([x({readOnly:!0})],tr.prototype,"state",null),m([x({readOnly:!0})],tr.prototype,"formattedAttributes",void 0),m([x({type:jr,value:null})],tr.prototype,"graphic",null),m([x({readOnly:!0})],tr.prototype,"lastEditInfo",void 0),m([x({readOnly:!0})],tr.prototype,"relatedInfos",void 0),m([x()],tr.prototype,"spatialReference",null),m([x({readOnly:!0})],tr.prototype,"title",void 0),m([x()],tr.prototype,"map",null),m([x({readOnly:!0})],tr.prototype,"waitingForContent",null),m([x()],tr.prototype,"view",void 0),tr=cv=m([Y("esri.widgets.FeatureViewModel")],tr);const Y8=tr,lr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},XG=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>Xj(i)&&!i.destroyed?ge("div",{class:lr.contentNode,key:i},i.render()):i instanceof HTMLElement?ge("div",{class:lr.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):e1e(i)?ge("div",{class:lr.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=m([Y("esri.widgets.Feature.ContentMixin")],t),t};var X8;const QG={title:!0,content:!0,lastEditedInfo:!0},eq="relationship-handles";let wn=X8=class extends XG(zn){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements=te({},QG),this.viewModel=new Y8}initialize(){this.addHandles(Ve(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),fi))}loadDependencies(){return import("./calcite-notice.dad18115.js")}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}castVisibleElements(e){return te(te({},QG),e)}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{state:e}=this.viewModel,t=ge("div",{class:lr.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return ge("div",{class:this.classes(lr.base,lr.esriWidget)},t)}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return ge("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?ge("div",{key:"error-title",slot:"title"},e.errorMessage):null,ge("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return ge("div",{key:"loading-container",class:lr.loadingSpinnerContainer},ge("span",{class:this.classes(lr.iconLoading,lr.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?ge("div",{class:lr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?ge(r$,{level:this.headingLevel,class:lr.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?ge("div",{class:lr.contentNode,key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:ge("div",{class:lr.contentNode,key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);case"relationship":return this.renderRelationship(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?ge("div",{key:this._buildKey("attachments-element",e),class:this.classes(lr.contentElement)},t.render()):null}renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?ge("div",{key:this._buildKey("relationship-element",e),class:lr.contentElement},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ge("div",{key:this._buildKey("expression-element",e),class:lr.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?ge("div",{key:this._buildKey("custom-element",t),class:lr.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ge("div",{key:this._buildKey("fields-element",e),class:lr.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ge("div",{key:this._buildKey("media-element",e),class:lr.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:s}=i,l=i.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,y=vl(l,{date:r,user:s});return ge("div",{key:"edit-info-element",class:this.classes(lr.lastEditedInfo,lr.contentElement)},y)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?ge("div",{key:this._buildKey("text-element",t),class:this.classes(lr.contentElement,lr.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this.removeHandles(eq),this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_addFeatureRelationshipHandles(e){const{flowItems:t,visibleElements:i}=this;this.addHandles([hs(()=>e,"select-record",({featureViewModel:r})=>{t&&(r.abilities={relationshipContent:!0},t.push(new X8({flowItems:t,viewModel:r,visibleElements:i})))}),hs(()=>e,"show-all-records",()=>{if(!t)return;const{viewModel:r}=e;r.showAllEnabled=!0;const s=new JG({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(s),t.push(s)})],eq)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,l)=>{if(s.type==="attachments"&&(this._contentWidgets[l]=new B0e({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:r[l]})),s.type==="fields"&&(this._contentWidgets[l]=new Qj({viewModel:r[l]})),s.type==="media"&&(this._contentWidgets[l]=new vV({viewModel:r[l]})),s.type==="text"&&(this._contentWidgets[l]=new k3({viewModel:r[l]})),s.type==="custom"&&(this._contentWidgets[l]=new k3({viewModel:r[l]})),s.type==="expression"&&(this._contentWidgets[l]=new t2e({viewModel:r[l]})),s.type==="relationship"){const y=new JG({viewModel:r[l]});this._addFeatureRelationshipHandles(y),this._contentWidgets[l]=y}},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new k3({viewModel:s}))}this.scheduleRender()}};m([x()],wn.prototype,"graphic",null),m([x()],wn.prototype,"defaultPopupTemplateEnabled",null),m([x()],wn.prototype,"flowItems",void 0),m([x()],wn.prototype,"headingLevel",void 0),m([x()],wn.prototype,"label",null),m([x(),Gn("esri/widgets/Feature/t9n/Feature")],wn.prototype,"messages",void 0),m([x(),Gn("esri/t9n/common")],wn.prototype,"messagesCommon",void 0),m([x(),Gn("esri/widgets/support/t9n/uriUtils")],wn.prototype,"messagesURIUtils",void 0),m([x()],wn.prototype,"spatialReference",null),m([x({readOnly:!0})],wn.prototype,"title",null),m([x()],wn.prototype,"visibleElements",void 0),m([ri("visibleElements")],wn.prototype,"castVisibleElements",null),m([x()],wn.prototype,"map",null),m([x()],wn.prototype,"view",null),m([x({type:Y8})],wn.prototype,"viewModel",void 0),wn=X8=m([Y("esri.widgets.Feature")],wn);const n2e=wn;var tq;const N_=Symbol("anchorHandles");let kd=class extends fn.EventedAccessor{constructor(e){super(e),this[tq]=new Jr,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[N_].add([no(()=>Jl(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),Ve(()=>this.screenLocation,(t,i)=>{q(t)&&q(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[N_]=oi(this[N_])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&q(e)&&q(t)&&t.ready?t.toScreen(e):null}};tq=N_,m([x()],kd.prototype,"location",void 0),m([x()],kd.prototype,"screenLocation",null),m([x()],kd.prototype,"screenLocationEnabled",void 0),m([x()],kd.prototype,"view",void 0),kd=m([Y("esri.widgets.support.AnchorElementViewModel")],kd);const iq=kd,s2e="esri.widgets.CompassViewModel";let j_=class extends iq{constructor(e){super(e),this.visible=!1}};m([x()],j_.prototype,"visible",void 0),j_=m([Y(s2e)],j_);const rq=j_,Q8={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Rd=class extends zn{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new rq}initialize(){this.addHandles(Ve(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,s=!e&&i,l={[Q8.spinnerStart]:r,[Q8.spinnerFinish]:s},y=this._getPositionStyles();return ge("div",{class:this.classes(Q8.base,l),styles:y})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=fw(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(ae(t)||ae(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};m([x()],Rd.prototype,"location",null),m([x()],Rd.prototype,"view",null),m([x({type:rq})],Rd.prototype,"viewModel",void 0),m([x()],Rd.prototype,"visible",null),Rd=m([Y("esri.widgets.Spinner")],Rd);const o2e=Rd,a2e="OBJECTID";var nq;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(nq||(nq={}));function l2e(e){return"r"in e&&"g"in e&&"b"in e}function sq(e){return"h"in e&&"s"in e&&"v"in e}function oq(e){return"l"in e&&"a"in e&&"b"in e}function aq(e){return"l"in e&&"c"in e&&"h"in e}function u2e(e){return"x"in e&&"y"in e&&"z"in e}const c2e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h2e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function lq(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw"dimensions do not match";const l=e.length,y=e[0].length;let d=0;for(r=0;r<l;r++){for(d=0,s=0;s<y;s++)d+=e[r][s]*t[s];i.push(d)}return i}function uq(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=lq(c2e,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function eE(e){const t=lq(h2e,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**(1/2.4)-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function cq(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>(6/29)**3?i**(1/3):1/3*(29/6)**2*i+4/29);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function hq(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function p2e(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let l=Math.atan2(r,i);return l=l>0?l:l+2*Math.PI,{l:t,c:s,h:l}}function d2e(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function pq(e){return cq(uq(e))}function dq(e){return eE(hq(e))}function f2e(e){return p2e(cq(uq(e)))}function y2e(e){return eE(hq(d2e(e)))}function g2e(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),l=s-Math.min(t,i,r);let y=s,d=l===0?0:s===t?(i-r)/l%6:s===i?(r-t)/l+2:(t-i)/l+4,v=l===0?0:l/y;return d<0&&(d+=6),d*=60,v*=100,y*=100/255,{h:d,s:v,v:y}}function m2e(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,l=s*(1-Math.abs(t%2-1));let y;switch(Math.floor(t)){case 0:y={r:s,g:l,b:0};break;case 1:y={r:l,g:s,b:0};break;case 2:y={r:0,g:s,b:l};break;case 3:y={r:0,g:l,b:s};break;case 4:y={r:l,g:0,b:s};break;case 5:case 6:y={r:s,g:0,b:l};break;default:y={r:0,g:0,b:0}}return y.r=Math.round(y.r+r-s),y.g=Math.round(y.g+r-s),y.b=Math.round(y.b+r-s),y}function tE(e){return l2e(e)?e:aq(e)?y2e(e):oq(e)?dq(e):u2e(e)?eE(e):sq(e)?m2e(e):e}function kTe(e){return sq(e)?e:g2e(tE(e))}function RTe(e){return oq(e)?e:pq(tE(e))}function FTe(e){return aq(e)?e:f2e(tE(e))}function LTe(e,t){const i=pq(e);return i.l*=1-t,dq(i)}function fq(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function v2e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function b2e(e,t,i,r,s,l){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=s,y[5]=l,y}function w2e(e,t){return new Float32Array(e,t,6)}function yq(e,t,i,r){const s=t[r],l=t[r+1];e[r]=i[0]*s+i[2]*l+i[4],e[r+1]=i[1]*s+i[3]*l+i[5]}function _2e(e,t,i,r=0,s=0,l=2){const y=s||t.length/l;for(let d=r;d<y;d++)yq(e,t,i,d*l)}Object.freeze(Object.defineProperty({__proto__:null,create:fq,clone:v2e,fromValues:b2e,createView:w2e,transform:yq,transformMany:_2e},Symbol.toStringTag,{value:"Module"}));function x2e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function S2e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function M2e(e,t,i,r,s,l,y){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=y,e}function D_(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=t[4],d=t[5];let v=i*l-r*s;return v?(v=1/v,e[0]=l*v,e[1]=-r*v,e[2]=-s*v,e[3]=i*v,e[4]=(s*d-l*y)*v,e[5]=(r*y-i*d)*v,e):null}function $2e(e){return e[0]*e[3]-e[1]*e[2]}function gq(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=i[0],M=i[1],T=i[2],A=i[3],R=i[4],F=i[5];return e[0]=r*_+l*M,e[1]=s*_+y*M,e[2]=r*T+l*A,e[3]=s*T+y*A,e[4]=r*R+l*F+d,e[5]=s*R+y*F+v,e}function V_(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=Math.sin(i),M=Math.cos(i);return e[0]=r*M+l*_,e[1]=s*M+y*_,e[2]=r*-_+l*M,e[3]=s*-_+y*M,e[4]=d,e[5]=v,e}function iE(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=i[0],M=i[1];return e[0]=r*_,e[1]=s*_,e[2]=l*M,e[3]=y*M,e[4]=d,e[5]=v,e}function hv(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=i[0],M=i[1];return e[0]=r,e[1]=s,e[2]=l,e[3]=y,e[4]=r*_+l*M+d,e[5]=s*_+y*M+v,e}function mq(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function vq(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function rE(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function E2e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function I2e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function T2e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function bq(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function C2e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function A2e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function P2e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function O2e(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],y=e[4],d=e[5],v=t[0],_=t[1],M=t[2],T=t[3],A=t[4],R=t[5],F=Ms();return Math.abs(i-v)<=F*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-_)<=F*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(s-M)<=F*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-T)<=F*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(y-A)<=F*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(d-R)<=F*Math.max(1,Math.abs(d),Math.abs(R))}const k2e=gq,R2e=bq;Object.freeze(Object.defineProperty({__proto__:null,copy:x2e,identity:S2e,set:M2e,invert:D_,determinant:$2e,multiply:gq,rotate:V_,scale:iE,translate:hv,fromRotation:mq,fromScaling:vq,fromTranslation:rE,str:E2e,frob:I2e,add:T2e,subtract:bq,multiplyScalar:C2e,multiplyScalarAndAdd:A2e,exactEquals:P2e,equals:O2e,mul:k2e,sub:R2e},Symbol.toStringTag,{value:"Module"}));const wq=Me("android");Me("chrome")||wq&&wq>=4;LM();function _q(e){return e&&"opacity"in e?e.opacity*_q(e.parent):1}async function F2e(e,t){var z,W;if(!e)return;const i=e.sourceLayer,r=(z=q(t)&&t.useSourceLayer?i:e.layer)!=null?z:i,s=_q(r);if(q(e.symbol)&&(!q(t)||t.ignoreGraphicSymbol!==!0)){const Z=e.symbol.type==="web-style"?await e.symbol.fetchSymbol(De(te({},t),{cache:q(t)?t.webStyleCache:null})):e.symbol.clone();return f$(Z,null,s),Z}const l=(W=q(t)?t.renderer:null)!=null?W:r&&"renderer"in r?r.renderer:null;let y=l&&"getSymbolAsync"in l?await l.getSymbolAsync(e,t):null;if(!y)return;if(y=y.type==="web-style"?await y.fetchSymbol(De(te({},t),{cache:q(t)?t.webStyleCache:null})):y.clone(),!(l&&"visualVariables"in l&&l.visualVariables&&l.visualVariables.length))return f$(y,null,s),y;if("arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&(ae(t)||ae(t.arcade))){const Z=te({},Wt(t));Z.arcade=await el(),t=Z}const d=await Promise.resolve().then(function(){return $7}),v=[],_=[],M=[],T=[];for(const Z of l.visualVariables)switch(Z.type){case"color":v.push(Z);break;case"opacity":_.push(Z);break;case"rotation":T.push(Z);break;case"size":Z.target||M.push(Z)}const A=!!v.length&&v[v.length-1],R=A?d.getColor(A,e,t):null,F=!!_.length&&_[_.length-1];let V=F?d.getOpacity(F,e,t):null;if(s!=null&&(V=V!=null?V*s:s),f$(y,R,V),M.length){const Z=d.getAllSizes(M,e,t);await cye(y,Z)}for(const Z of T)hye(y,d.getRotationAngle(Z,e,t),Z.axis);return y}class L2e{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const s=t[r],l=new rO(s,void 0,void 0,2,2);this._properties[r]={pool:l,acquired:[]}}this._afterDispatchHandle=ine(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)_O(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const s of i.acquired)_O(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}}const N2e=Me("mac")?"Meta":"Ctrl",z_={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)z_[e]=String.fromCharCode(e);for(let e=1;e<25;e++)z_[111+e]=`F${e}`;for(let e=65;e<91;e++)z_[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function j2e(e){if(e.key!==void 0)return pp(e);const t=z_[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function D2e(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class V2e{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const xq=Ae.getLogger("esri.views.input.InputHandler");class ln{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?xq.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const l=typeof t=="string"?new V2e(t,s):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},d=M=>{const T=this._incoming[M.match.eventType];if(T){const A=T.indexOf(M);T.splice(A,1),y(),this._manager&&this._manager.updateDependencies()}},v=new z2e(l,r,{onPause:d,onRemove:d,onResume:M=>{const T=this._incoming[M.match.eventType];T&&!T.includes(M)&&(T.push(M),y(),this._manager&&this._manager.updateDependencies())}});let _=this._incoming[l.eventType];return _||(_=[],this._incoming[l.eventType]=_),_.push(v),y(),this._manager&&this._manager.updateDependencies(),v}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new G2e(t,{onEmit:(r,s,l,y)=>{var d;(d=this._manager)==null||d.emit(r.eventType,s,l,y)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):xq.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&((r=s.callback)==null||r.call(s,t),t.shouldStopPropagation()))break}}}class z2e{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class G2e{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class q2e extends ln{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=t;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}}class G_{constructor(t){this._observable=new w4,this._value=t}get(){return Vt(this._observable),this._value}set(t){t!==this._value&&(this._value=t,this._observable.notify())}}class U2e extends ln{constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new G_(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}get multiTouchActive(){return this._multiTouchActive.get()}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}}let Cl=class extends ot{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=N2e,this._latestPointerType="mouse",this._propertiesPool=new L2e({latestPointerLocation:H2e},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,i=rt.INTERNAL){if(this._nameToGroup[e])return void Ae.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void Ae.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const l=r.handlers[s];this._handlers.push(l),l.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,d,v,_,M)=>{this._emitInputEvent(l.priorityIndex+1,y,d,v,M,_)},setPointerCapture:(y,d)=>{this._setPointerCapture(r,l,y,d)},setEventCallback:y=>{l.eventCallback=y},setUninstallCallback:y=>{l.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{var r;i.removed=!0,(r=i.uninstallCallback)==null||r.call(i)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ae.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let s=r.handler.hasSideEffects;if(!s){for(const l of r.handler.outgoingEventTypes)if(e.has(l)){s=!0;break}}if(s)for(const l of r.handler.incomingEventMatches){e.add(l.eventType);for(const y of l.keyModifiers)D2e(y)||t.add(y)}r.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._latestPointerType=e;const r=this._get("latestPointerLocation");if(ae(r)||r.x!==t||r.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=t,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const s=t;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const y=new Set;this._activeKeyModifiers.forEach(d=>{y.add(d)}),this._activeKeyModifiers=y,i=!0}},s=(y,d)=>{d&&!this._activeKeyModifiers.has(y)?(r(),this._activeKeyModifiers.add(y)):!d&&this._activeKeyModifiers.has(y)&&(r(),this._activeKeyModifiers.delete(y))};if(e==="key-down"||e==="key-up"){const y=t.key;this._keyModifiers.has(y)&&s(y,e==="key-down")}const l=t.native;s("Alt",!(!l||!l.altKey)),s("Ctrl",!(!l||!l.ctrlKey)),s("Shift",!(!l||!l.shiftKey)),s("Meta",!(!l||!l.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new q2e((e,t,i)=>this._setLatestPointer(e,t,i)),this._multiTouchHandler=new U2e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],rt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,rt.INTERNAL)}_setPointerCapture(e,t,i,r){const s=e.name+"-"+t.priorityIndex,l=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,l),r?(l.add(s),l.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):l.has(s)&&(l.delete(s),l.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,s,l){const y=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=s!==void 0&&s,v={event:new B2e(t,i,y,l||this._activeKeyModifiers,d),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(v):this._doNewPropagation(v)}_doNewPropagation(e){this._currentPropagation={events:new q2,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,i;const e=is(this._currentPropagation);for(;e.events.length>0;){const{event:r,priorityIndex:s}=e.events.pop(),l=r.data&&r.data.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((i=(t=e.currentHandler).eventCallback)==null||i.call(t,r)),r.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new q2;t.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)t.push(i.events.pop());i.events=t,i.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const s=i.keyModifiers.filter(l=>r.keyModifiers.includes(l));if(s.length===i.keyModifiers.length!=(s.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};m([x({readOnly:!0})],Cl.prototype,"hasPendingInputs",null),m([x({constructOnly:!0})],Cl.prototype,"eventSource",void 0),m([x({constructOnly:!0})],Cl.prototype,"recognizers",void 0),m([x()],Cl.prototype,"_latestPointerType",void 0),m([x()],Cl.prototype,"latestPointerType",null),m([x()],Cl.prototype,"multiTouchActive",null),m([x({readOnly:!0})],Cl.prototype,"latestPointerLocation",void 0),Cl=m([Y("esri.views.input.InputManager")],Cl);class B2e{constructor(t,i,r,s,l){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=l,this._propagationState=Ph.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Ph.STOPPED}shouldStopPropagation(){return(this._propagationState&Ph.STOPPED)!=0}async(t){this._propagationState|=Ph.PAUSED;const i=(r,s)=>{this._propagationState&=~Ph.PAUSED;const l=this._resumeCallback;if(this._resumeCallback=null,l&&l(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Ph.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Ph;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Ph||(Ph={}));const rt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class H2e{}function Sq(e){return e&&typeof e.highlight=="function"}function NTe(e,t,i){return ae(e)||e>i&&(t===0||e<t)}const q_={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Fd=new t0({id:"zoom-to-feature",title:"{messages.zoom}",className:q_.iconZoom}),Mq=new t0({id:"remove-selected-feature",title:"{messages.remove}",className:q_.iconTrash}),v1=new t0({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:q_.iconZoom}),b1=new t0({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:q_.iconBrowseClusteredFeatures}),W2e="esri.widgets.Popup.PopupViewModel",U_=Ae.getLogger(W2e),J2e=e=>{const{event:t,view:i}=e,{action:r}=t,s=i&&i.popup;if(!r)return Promise.reject(new fe("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new fe("trigger-action:missing-arguments","view.popup is missing"));const{disabled:l,id:y}=r;if(!y)return Promise.reject(new fe("trigger-action:invalid-action","action.id is missing"));if(l)return Promise.reject(new fe("trigger-action:invalid-action","Action is disabled"));if(y===Fd.id)return K2e(s.viewModel).catch(J9);if(y===v1.id)return Y2e(s.viewModel);if(y===b1.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,y===Mq.id){s.close();const{selectedFeature:d}=s;if(!d)return Promise.reject(new fe(`trigger-action:${Mq.id}`,"selectedFeature is required",{selectedFeature:d}));const{sourceLayer:v}=d;return v?v.remove(d):i.graphics.remove(d),Promise.resolve()}return Promise.resolve()};function $q(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function Ld(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}async function Z2e(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function K2e(e){const{location:t,selectedFeature:i,view:r,zoomFactor:s}=e,l=$q(e);if(!l){const _=new fe("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:r});throw U_.error(_),_}const y=r.scale/s,d=e.get("selectedFeature.geometry")||t,v=d&&d.type==="point"&&await Z2e(i,r);Fd.active=!0,Fd.disabled=!0;try{await e.zoomTo({target:{target:l,scale:v?y:void 0}})}catch{const M=new fe("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});U_.error(M)}finally{Fd.active=!1,Fd.disabled=!1,e.zoomToLocation=null,v&&(e.location=d)}}async function Y2e(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const d=new fe("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw U_.error(d),d}if(!Ld(t)){const d=new fe("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw U_.error(d),d}const r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()],v1.active=!0,v1.disabled=!0;const{extent:y}=await s.queryExtent(l);await e.zoomTo({target:y}),v1.active=!1,v1.disabled=!1}async function X2e(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()];const{extent:y}=await s.queryExtent(l);e.selectedClusterBoundaryFeature.geometry=y,i.graphics.add(e.selectedClusterBoundaryFeature)}async function Q2e(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),l=s.createQuery();l.aggregateIds=[t.getObjectId()],b1.active=!0,b1.disabled=!0;const{features:y}=await s.queryFeatures(l);b1.active=!1,b1.disabled=!1,i.popup.open({features:[t].concat(y),featureMenuOpen:!0})}function e3e(e){const t=e.features.filter(i=>Ld(i));t.length&&(e.features=t)}const Eq=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return m([x()],t.prototype,"goToOverride",void 0),m([x()],t.prototype,"view",void 0),t=m([Y("esri.widgets.support.GoTo")],t),t},pv=gt.ofType({key:"type",defaultKeyValue:"button",base:Zw,typeMap:{button:t0,toggle:Ok}}),t3e=()=>[Fd.clone()],i3e=()=>[v1.clone(),b1.clone()];let Qt=class extends Eq(iq){constructor(e){super(e),this._handles=new Jr,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new pv,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new jr({symbol:new pl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([Ve(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Ve(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),Ve(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),Ve(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),Ve(()=>this.location,e=>this._locationChange(e)),Ve(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),Ve(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),Ve(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),Ve(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>J2e({event:e,view:this.view})),no(()=>!this.waitingForResult,()=>this._waitingForResultChange(),ml),Ve(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),Ve(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),no(()=>!this.visible,()=>this.browseClusterEnabled=!1),Ve(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new pv;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:l}=this,y=s?i.concat(t):t,d=l&&(typeof l.getEffectivePopupTemplate=="function"&&l.getEffectivePopupTemplate(r)||l.popupTemplate),v=d&&d.actions,_=d&&d.overwriteActions?v:v?v.concat(y):y;return _&&_.filter(Boolean).forEach(M=>e.add(M)),e}get defaultActions(){const e=this._get("defaultActions")||new pv;return e.removeAll(),e.addMany(Ld(this.selectedFeature)?i3e():t3e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:s}=this,l=r&&t.length;l&&i&&s===-1?this.selectedFeatureIndex=0:l&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=ru(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=s=>{this._pendingPromises.has(t)&&this._updateFeatures(s),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=$q(this);return t?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new fe("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e)throw new fe("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t=De(te({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{visible:!0}),{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){e3e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Ld(t)?(await X2e(this),await Q2e(this)):Ae.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):Ae.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Fd.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Ld(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:s}=this;if(i===null)return;const l=((i-1)*r+t)%t,y=l+r;s.slice(l,y).forEach((d,v)=>{d&&!d.graphic&&(d.graphic=e[l+v])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Ld(e)?void 0:(e.symbol=await F2e(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=Wt(this._getPointFromGeometry(e.geometry))}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,s=Promise.resolve(i),l=r.map(y=>y.promise);this.promises=[s,...l]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(Ld(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),s=[];t.forEach((l,y)=>{var v,_;if(!l)return;let d=null;if(r.some((M,T)=>(M&&M.graphic===l&&(d=M,r.splice(T,1)),!!d)),d)s[y]=d;else{const M=new Y8({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(v=this.view)==null?void 0:v.spatialReference,graphic:l===e?l:null,map:(_=this.view)==null?void 0:_.map,view:this.view});s[y]=M}}),r.forEach(l=>l&&!l.destroyed&&l.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},rt.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(s=>{const{clientOnlyGraphics:l,promisesPerLayerView:y,location:d}=s,v=[Promise.resolve(l),...y.map(_=>_.promise)];return r.popup.open({location:d||i,promises:v}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){var t;return ae(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?(t=e.extent)==null?void 0:t.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return i&&"layer"in i&&i.layer?i.layer:(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||a2e:null,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:s}=this;if(!(r&&i&&t&&s))return;const l=this._getHighlightLayer(r);if(!(l&&l instanceof _0))return;const y=this._getLayerView(i,l);this._highlightActiveFeaturePromise=y;const d=await y;if(!(d&&Sq(d)&&this._highlightActiveFeaturePromise===y&&this.activeFeature&&this.highlightEnabled))return;const v=d.highlight(this._getHighlightTarget(r,l));this._handles.add(v,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:s}=this;if(!(t&&r&&i&&s))return;const l=this._getHighlightLayer(t);if(!(l&&l instanceof _0))return;const y=this._getLayerView(r,l);this._highlightSelectedFeaturePromise=y;const d=await y;if(!(d&&Sq(d)&&this._highlightSelectedFeaturePromise===y&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const v=d.highlight(this._getHighlightTarget(t,l));this._handles.add(v,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};m([x()],Qt.prototype,"featurePage",void 0),m([x()],Qt.prototype,"isLoadingFeature",null),m([x({type:pv})],Qt.prototype,"actions",void 0),m([x({readOnly:!0})],Qt.prototype,"active",null),m([x()],Qt.prototype,"activeFeature",void 0),m([x({readOnly:!0})],Qt.prototype,"allActions",null),m([x({type:Boolean})],Qt.prototype,"defaultPopupTemplateEnabled",void 0),m([x()],Qt.prototype,"autoCloseEnabled",void 0),m([x()],Qt.prototype,"autoOpenEnabled",void 0),m([x()],Qt.prototype,"browseClusterEnabled",void 0),m([x()],Qt.prototype,"content",void 0),m([x({type:pv,readOnly:!0})],Qt.prototype,"defaultActions",null),m([x({readOnly:!0})],Qt.prototype,"featureCount",null),m([x()],Qt.prototype,"features",null),m([x()],Qt.prototype,"featuresPerPage",void 0),m([x()],Qt.prototype,"featureViewModelAbilities",void 0),m([x({readOnly:!0})],Qt.prototype,"featureViewModels",void 0),m([x()],Qt.prototype,"highlightEnabled",void 0),m([x()],Qt.prototype,"includeDefaultActions",void 0),m([x({type:dt})],Qt.prototype,"location",null),m([x({readOnly:!0})],Qt.prototype,"pendingPromisesCount",null),m([x({readOnly:!0})],Qt.prototype,"selectedClusterBoundaryFeature",void 0),m([x({readOnly:!0})],Qt.prototype,"waitingForResult",null),m([x({readOnly:!0})],Qt.prototype,"promiseCount",null),m([x()],Qt.prototype,"promises",null),m([x({value:null,readOnly:!0})],Qt.prototype,"selectedFeature",null),m([x({value:-1})],Qt.prototype,"selectedFeatureIndex",null),m([x({readOnly:!0})],Qt.prototype,"selectedFeatureViewModel",null),m([x({readOnly:!0})],Qt.prototype,"state",null),m([x()],Qt.prototype,"title",void 0),m([x()],Qt.prototype,"updateLocationEnabled",void 0),m([x()],Qt.prototype,"view",void 0),m([x()],Qt.prototype,"visible",void 0),m([x()],Qt.prototype,"zoomFactor",void 0),m([x()],Qt.prototype,"zoomToLocation",void 0),m([x()],Qt.prototype,"centerAtLocation",null),Qt=m([Y("esri.widgets.Popup.PopupViewModel")],Qt);const Iq=Qt,Tq="selected-index",r3e=0,Cq="popup-spinner",ze={calciteThemeLight:"calcite-theme-light",calciteThemeDark:"calcite-theme-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",collapseIcon:"esri-popup__collapse-icon"},Aq={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Pq="esri-popup";function Lu(e,t){return t===void 0?`${Pq}__${e}`:`${Pq}__${e}-${t}`}const Oq={closeButton:!0,featureNavigation:!0};let _t=class extends XG(zn){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Jr,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{(i==null?void 0:i.isIntersecting)&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=A0(()=>this._displaySpinner(),r3e),this._exitRelatedRecordsActions=new WeakMap,this._flowItems=new gt,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new Iq,this.visibleElements=te({},Oq),this._addSelectedFeatureIndexHandle(),this.addHandles([Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),Ve(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),Ve(()=>{var i,r,s,l,y,d;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.size,(y=this.viewModel)==null?void 0:y.active,(d=this.viewModel)==null?void 0:d.location,this.alignment]},()=>this.reposition()),Ve(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),Ve(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),Ve(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),Ve(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Ve(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),Ve(()=>{var i,r,s,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.state]},()=>this._setTitleFromFeatureWidget()),Ve(()=>{var i,r,s,l;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(l=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:l.state]},()=>this._setContentFromFeatureWidget()),no(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),hs(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),fi),Ve(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),hs(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),Ve(()=>{var i,r,s,l;return[(r=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:r.state,(l=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:l.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([import("./calcite-flow.858a3725.js"),import("./calcite-flow-item.a903230b.js"),import("./calcite-action.96da5a1c.js"),import("./calcite-tooltip.11361d19.js"),import("./calcite-icon.c89564fd.js")])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t==null?void 0:t.content);const i=e.viewModel;if((i==null?void 0:i.waitingForContent)||(i==null?void 0:i.state)==="error")return!0;const r=i==null?void 0:i.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Aq}set dockOptions(e){const t=te({},Aq),i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const s=te(te({},t),e),l=te(te({},t.breakpoint),r),{breakpoint:y}=s;y===!0?s.breakpoint=l:typeof y=="object"&&(s.breakpoint=te(te({},l),y)),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i,_flowItems:r}=this,{selectedFeatureViewModel:s}=this.viewModel,l=De(te({},t),{title:!1});return s?(e?(e.viewModel=s,e.visibleElements=l):this._feature=new n2e({flowItems:r,headingLevel:i+1,viewModel:s,visibleElements:l}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return te(te({},Oq),e)}blur(){const{active:e}=this.viewModel;e||Ae.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||Ae.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var s,l;this._handles.remove(Tq);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var F,V,z,W;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:s,currentDockPosition:l}=this,{active:y}=this.viewModel,{menuActions:d}=r,v=y&&d.length>1&&e,_=y&&t,M=y&&!t,T=(V=(F=this.selectedFeature)==null?void 0:F.layer)==null?void 0:V.title,A=(W=(z=this.selectedFeature)==null?void 0:z.layer)==null?void 0:W.id,R={[ze.alignTopCenter]:s==="top-center",[ze.alignBottomCenter]:s==="bottom-center",[ze.alignTopLeft]:s==="top-left",[ze.alignBottomLeft]:s==="bottom-left",[ze.alignTopRight]:s==="top-right",[ze.alignBottomRight]:s==="bottom-right",[ze.isDocked]:_,[ze.shadow]:M,[ze.isDockedTopLeft]:l==="top-left",[ze.isDockedTopCenter]:l==="top-center",[ze.isDockedTopRight]:l==="top-right",[ze.isDockedBottomLeft]:l==="bottom-left",[ze.isDockedBottomCenter]:l==="bottom-center",[ze.isDockedBottomRight]:l==="bottom-right",[ze.isFeatureMenuOpen]:i,[ze.isActionsMenuOpen]:v};return ge("div",{class:this.classes(ze.base,R),role:"presentation","data-layer-title":T,"data-layer-id":A,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},y?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,ze.iconLoading,ze.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?ge("div",{key:Lu("loading-container"),role:"presentation",class:ze.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Sl(this.container),t={[ze.iconRightTriangleArrow]:e,[ze.paginationPreviousIconRTL]:e,[ze.iconLeftTriangleArrow]:!e,[ze.paginationPreviousIconLTR]:!e};return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,t)})}renderPreviousButton(){const{messages:e}=this;return ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ze.button,ze.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Sl(this.container),t={[ze.iconLeftTriangleArrow]:e,[ze.paginationNextIconRTL]:e,[ze.iconRightTriangleArrow]:!e,[ze.paginationNextIconLTR]:!e};return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,t)})}renderNextButton(){const{messages:e}=this;return ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ze.button,ze.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ze.button,ze.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[ze.iconUndock]:e,[ze.iconDock]:!e,[ze.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[ze.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[ze.iconDockToTop]:!e&&t==="top-center",[ze.iconDockToBottom]:!e&&t==="bottom-center"};return ge("span",{"aria-hidden":"true",class:this.classes(i,ze.icon)})}renderDockButton(){var s,l,y;const{dockEnabled:e,messages:t}=this,i=(l=(s=this.viewModel)==null?void 0:s.view)==null?void 0:l.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((y=this.dockOptions)==null?void 0:y.buttonEnabled)?ge("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ze.button,ze.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:s}=this,l={[ze.headerContainerButton]:i},y=ge(r$,{level:this.headingLevel,class:ze.headerTitle,innerHTML:e}),d=i?ge("button",{key:`${e}--collapsible`,id:t,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ze.headerContainer,l),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},y,ge("calcite-icon",{class:ze.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):ge("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ze.headerContainer,l)},y);return e?d:null}renderCloseIcon(){return ge("span",{"aria-hidden":"true",class:this.classes(ze.icon,ze.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?ge("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ze.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return ge("header",{class:ze.header},this.renderTitle(),ge("div",{class:ze.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i,_flowItems:r,messagesCommon:s}=this,{content:l}=this.viewModel,y=r.toArray(),d={[ze.contentHasFlows]:!!y.length};return t&&!i?ge("div",{key:l,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(ze.content,d)},ge("calcite-flow",{bind:this,onCalciteFlowItemBack:this._handleBackClick},ge("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode","intl-back":s.back,afterCreate:g3,key:"root-flow-item"},this.renderContent()),y.map(v=>this.renderFlowItem(v))),y.map(v=>this.renderFlowItemTooltip(v))):null}renderFlowItem(e){const{messages:t,messagesCommon:i}=this,r=O3();return ge("calcite-flow-item",{class:this.classes({[ze.calciteThemeDark]:!r,[ze.calciteThemeLight]:r}),heading:e.title,"intl-back":i.back,description:this._getFlowItemDescription(e),key:`flow-item-${e.viewModel.uid}`},ge("calcite-action",{class:ze.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:s=>this._storeExitRelatedRecordsAction(e,s),onclick:this._destroyFlowItemWidgets}),ge("div",{class:this.classes(ze.contentFlowItem,{[ze.calciteThemeDark]:r,[ze.calciteThemeLight]:!r})},e.render()))}renderFlowItemTooltip(e){const{messages:t,_exitRelatedRecordsActions:i}=this,r=O3();return ge("calcite-tooltip",{class:this.classes({[ze.calciteThemeDark]:!r,[ze.calciteThemeLight]:r}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords)}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:s}=this,l=i?s.close:s.open,{menuActions:y}=r;return y.length?ge("div",{key:Lu("actions-menu-button"),class:this.classes(ze.button,ze.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":l,title:l},ge("span",{"aria-hidden":"true",class:ze.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:s}=r;return s.length&&i?ge("ul",{id:e,role:"menu","aria-labelledby":t,key:Lu("actions"),class:ze.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(l=>this.renderAction({action:l,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?ge("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:ze.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?ge("section",{key:Lu("navigation"),class:this.classes(ze.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,s=!!i.length,l=!!r.length,y={[ze.footerHasPagination]:e,[ze.footerHasActions]:s,[ze.footerHasActionsMenu]:l};return e||s?ge("div",{key:Lu("feature-buttons"),class:this.classes(ze.footer,y)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=vl(e.selectedFeatures,{total:t.length});return ge("section",{key:Lu("menu"),class:ze.featureMenu},ge("strong",{class:ze.featureMenuHeader},r),ge("nav",{bind:this,class:ze.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:g3},this.renderFeatureMenu(),ge("div",{class:ze.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?ge("div",{class:ze.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:ge("div",{key:Lu("pointer"),class:ze.pointer,role:"presentation"},ge("div",{class:this.classes(ze.pointerDirection,ze.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:s,collapsible:l,hasContent:y,contentCollapsed:d,visibleElements:v}=this,{title:_}=this.viewModel,M=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",T=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",A={[ze.shadow]:e,[ze.isCollapsible]:l,[ze.isCollapsed]:d};return ge("div",{class:this.classes(ze.main,ze.widget,A),tabIndex:v.closeButton?null:-1,role:"dialog","aria-labelledby":_?r:"","aria-describedby":y&&!d?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},M?this.renderFooter():null,M?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),T?this.renderFooter():null,T?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?ge("div",{class:lr.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return ge("span",{key:"text",class:ze.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[ze.iconLoading]:e.active,[ze.rotating]:e.active,[ze.icon]:!!t,[ze.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),ge("span",{key:"icon","aria-hidden":"true",class:this.classes(ze.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),s={[ze.action]:t.type!=="toggle",[ze.actionToggle]:t.type==="toggle",[ze.actionToggleOn]:t.type==="toggle"&&t.value,[ze.buttonDisabled]:t.disabled},l=[this.renderActionIcon(t),this.renderActionText(r)],y=i==="menu-item"?ge("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(ze.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l):ge("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(ze.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},l);return t.visible?y:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:l}=this.viewModel,y=e===l,d={[ze.featureMenuSelected]:y},v=y?ge("span",{key:Lu(`feature-menu-selected-feature-${s}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:ze.iconCheckMark}):null,_=ge("span",{innerHTML:e.title||r.untitled});return ge("li",{role:"menuitem",tabIndex:-1,key:Lu(`feature-menu-feature-${s}`),class:this.classes(d,ze.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},ge("span",{class:ze.featureMenuTitle},_,v))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?ge("ol",{class:ze.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();this._exitRelatedRecordsActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy())}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:s}=e,l=i==null?void 0:i.attributes,y=s==="zoom-to-feature"?vl(e.title,{messages:t}):s==="remove-selected-feature"?vl(e.title,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?vl(e.title,{messages:t}):e.title;return y&&l?vl(y,l):y}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:s}=e,l=s||r?r:ze.iconDefaultAction;return l&&i?vl(l,i):l}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?vl(r,i):r}_createFeatureUpdatedAnimation(){return wde("enter",ze.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Ve(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(l=>l.visible),i=this._getInlineActionCount(),r=i===null,s=i===0;return{inlineActions:r?t.slice(0):s?new gt:t.slice(0,i),menuActions:r?new gt:s?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){pp(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){pp(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=pp(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const s=i.querySelectorAll("li"),l=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+l)%l].focus()):(e.stopPropagation(),s[(r-1+l)%l].focus())}_handleActionMenuItemKeyup(e){const t=pp(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,l=s.findIndex(v=>v.uid===r);if(!i)return;const y=i.querySelectorAll("li"),d=y.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),y[y.length-1].focus()):(e.stopPropagation(),y[0].focus()):(e.stopPropagation(),y[(l+1+d)%d].focus()):(e.stopPropagation(),y[(l-1+d)%d].focus())}_handleMainKeyup(e){const t=pp(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await em(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Ve(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,Tq)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:s,view:l}=e;if(isNaN(i)||isNaN(t)||!l||!r)return!1;const y=l.padding;return s==="right"&&r.x+i/2>l.width-y.right||s==="left"&&r.x-i/2<y.left||s==="top"&&r.y-t<y.top||s==="bottom"&&r.y+t>l.height-y.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:s}=this,{screenLocation:l,view:y}=s;if(ae(l)||!y||!i)return"top-center";if(!this._isScreenLocationWithinView(l,y))return this._get("currentAlignment")||"top-center";function d(Q){return parseInt(Q.replace(/[^-\d\.]/g,""),10)}const v=r?window.getComputedStyle(r,null):null,_=v?d(v.getPropertyValue("max-height")):0,M=v?d(v.getPropertyValue("height")):0,{height:T,width:A}=i.getBoundingClientRect(),R=A+t,F=Math.max(T,_,M)+t,V=this._isOutsideView({popupHeight:F,popupWidth:R,screenLocation:l,side:"right",view:y}),z=this._isOutsideView({popupHeight:F,popupWidth:R,screenLocation:l,side:"left",view:y}),W=this._isOutsideView({popupHeight:F,popupWidth:R,screenLocation:l,side:"top",view:y}),Z=this._isOutsideView({popupHeight:F,popupWidth:R,screenLocation:l,side:"bottom",view:y});return z?W?"bottom-right":"top-right":V?W?"bottom-left":"top-left":W?Z?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return Sl(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var y;if(e!=="auto")return e;const t=(y=this.viewModel)==null?void 0:y.view,i=Sl(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},s=t.width-r.left-r.right,{breakpoints:l}=t;return l&&s<=l.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:s,_pointerOffsetInPx:l}=this,y=r/2,d=i.height-t,v=i.width-e,{padding:_}=this.view;return s==="bottom-center"?{top:t+l-_.top,left:e-y-_.left}:s==="top-left"?{bottom:d+l-_.bottom,right:v+l-_.right}:s==="bottom-left"?{top:t+l-_.top,right:v+l-_.right}:s==="top-right"?{bottom:d+l-_.bottom,left:e+l-_.left}:s==="bottom-right"?{top:t+l-_.top,left:e+l-_.left}:s==="top-center"?{bottom:d+l-_.bottom,left:e-y-_.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(ae(e)||!t)return;const s=this._calculateFullWidth(t),l=this._calculateAlignmentPosition(e.x,e.y,r,s);return l?{top:l.top!==void 0?`${l.top}px`:"auto",left:l.left!==void 0?`${l.left}px`:"auto",bottom:l.bottom!==void 0?`${l.bottom}px`:"auto",right:l.right!==void 0?`${l.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,s]=e,[l,y]=t,{width:d,height:v}=i;return r<=d&&l>d||r>d&&l<=d||s<=v&&y>v||s>v&&y<=v}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,s=i.top+i.bottom,l=[],y=[];l[0]=e[0]-r,l[1]=e[1]-s,y[0]=t[0]-r,y[1]=t[1]-s;const{dockOptions:d}=this,v=d.breakpoint;this._dockingThresholdCrossed(l,y,v)&&this._setDockEnabledForViewSize(d),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var d,v;const t=e.breakpoint,i=(v=(d=this.viewModel)==null?void 0:d.view)==null?void 0:v.ui;if(!i)return!1;const{width:r,height:s}=i;if(isNaN(r)||isNaN(s))return!1;const l=t.hasOwnProperty("width")&&r<=t.width,y=t.hasOwnProperty("height")&&s<=t.height;return l||y}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?vl(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,Cq),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new o2e({view:e}),e.ui.add(this._spinner,{key:Cq,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(l=>l.uid===t),s=i.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};m([x({readOnly:!0})],_t.prototype,"actionsMenuId",null),m([x({readOnly:!0})],_t.prototype,"actionsMenuButtonId",null),m([x({readOnly:!0})],_t.prototype,"featureMenuId",null),m([x({readOnly:!0})],_t.prototype,"titleId",null),m([x({readOnly:!0})],_t.prototype,"contentId",null),m([x({readOnly:!0})],_t.prototype,"hasContent",null),m([x({readOnly:!0})],_t.prototype,"featureNavigationVisible",null),m([x({readOnly:!0})],_t.prototype,"collapsible",null),m([x({readOnly:!0})],_t.prototype,"featureMenuVisible",null),m([x({readOnly:!0})],_t.prototype,"contentCollapsed",null),m([x({readOnly:!0})],_t.prototype,"dividedActions",null),m([x({readOnly:!0,dependsOn:["_flowItems.length"]})],_t.prototype,"_activeFlowItemWidget",null),m([x()],_t.prototype,"actions",null),m([x()],_t.prototype,"actionsMenuOpen",null),m([x()],_t.prototype,"alignment",void 0),m([x()],_t.prototype,"autoCloseEnabled",null),m([x()],_t.prototype,"autoOpenEnabled",null),m([x()],_t.prototype,"defaultPopupTemplateEnabled",null),m([x()],_t.prototype,"content",null),m([x()],_t.prototype,"collapsed",void 0),m([x()],_t.prototype,"collapseEnabled",void 0),m([x({readOnly:!0})],_t.prototype,"currentAlignment",null),m([x({readOnly:!0})],_t.prototype,"currentDockPosition",null),m([x()],_t.prototype,"dockOptions",null),m([x()],_t.prototype,"dockEnabled",void 0),m([x({readOnly:!0})],_t.prototype,"featureCount",null),m([x()],_t.prototype,"featureMenuOpen",void 0),m([x()],_t.prototype,"features",null),m([x()],_t.prototype,"goToOverride",null),m([x()],_t.prototype,"headingLevel",void 0),m([x()],_t.prototype,"highlightEnabled",null),m([x()],_t.prototype,"location",null),m([x()],_t.prototype,"label",null),m([x()],_t.prototype,"maxInlineActions",void 0),m([x(),Gn("esri/widgets/Popup/t9n/Popup")],_t.prototype,"messages",void 0),m([x(),Gn("esri/t9n/common")],_t.prototype,"messagesCommon",void 0),m([x()],_t.prototype,"promises",null),m([x({readOnly:!0})],_t.prototype,"selectedFeature",null),m([x()],_t.prototype,"selectedFeatureIndex",null),m([x({readOnly:!0})],_t.prototype,"selectedFeatureWidget",null),m([x()],_t.prototype,"spinnerEnabled",void 0),m([x()],_t.prototype,"title",null),m([x()],_t.prototype,"updateLocationEnabled",null),m([x()],_t.prototype,"view",null),m([x({type:Iq}),J0e(["triggerAction","trigger-action"])],_t.prototype,"viewModel",void 0),m([x()],_t.prototype,"visible",null),m([x()],_t.prototype,"visibleElements",void 0),m([ri("visibleElements")],_t.prototype,"castVisibleElements",null),m([Vo()],_t.prototype,"_close",null),m([Vo()],_t.prototype,"_toggleDockEnabled",null),m([Vo()],_t.prototype,"_toggleFeatureMenu",null),m([Vo()],_t.prototype,"_toggleActionsMenu",null),m([Vo()],_t.prototype,"_triggerAction",null),m([Vo()],_t.prototype,"_selectFeature",null),m([Vo()],_t.prototype,"_next",null),m([Vo()],_t.prototype,"_previous",null),_t=m([Y("esri.widgets.Popup")],_t);const kq=_t,nE=[0,0];function n3e(e){var r,s;const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return nE[0]=i.left+((r=t==null?void 0:t.pageXOffset)!=null?r:0),nE[1]=i.top+((s=t==null?void 0:t.pageYOffset)!=null?s:0),nE}function Rq(e){e&&(XL(e),e.parentNode&&e.parentNode.removeChild(e))}function s3e(e){const t=document.createElement("div");return e.appendChild(t),t}const dv=16,B_=750,o3e=512,a3e=2,l3e=e=>{let t=class extends e{constructor(...i){var r;super(...i),this._freqInfo={freq:dv,time:B_},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&((r=i[0])==null?void 0:r.popup)!==void 0||(this.popup=new kq({view:this})),this.handles.add([Ve(()=>this.cursor,s=>{const{surface:l}=this;l&&l.setAttribute("data-cursor",s)}),Ve(()=>this.interacting,s=>{const{surface:l}=this;l&&l.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(Ve(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=oi(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){var i;return(i=this._get("container"))!=null?i:null}set container(i){const r=this._get("container"),s=IM(i),l=s instanceof HTMLDivElement?s:null;if(l||typeof i!="string"||Ae.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),r===l)return;const y="dom-size";if(this.handles.remove(y),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Rq(this.root),this._set("root",null)),this.userContent&&(eN(this.userContent,r),Rq(this.userContent),this._set("userContent",null))),!l)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);l.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",eN(l,d),l.appendChild(d),this._set("userContent",d);const v=document.createElement("div");v.className="esri-view-root",l.insertBefore(v,l.firstChild),this._set("root",v);const _=document.createElement("div");_.className="esri-view-surface",_.setAttribute("role","application"),_.tabIndex=0,v.appendChild(_),this._set("surface",_);const M=new RN;v.appendChild(M.surface),this._set("overlay",M),Ve(()=>M.needsRender,T=>{T&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=jf({render:()=>{var A;return(A=this.overlay)==null?void 0:A.render()}}):this._overlayRenderTaskHandle=Tr(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(Ve(()=>this.size,T=>{const[A,R]=T,F="esri-view-surface--inset-outline";A>=document.body.clientWidth||R>=document.body.clientHeight?_.classList.add(F):_.classList.remove(F)},fi),y),this._set("container",l),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const l=this.position;return i-=l?l[0]:0,r-=l?l[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const l=this.position;return i+=l?l[0]:0,r+=l?l[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([Ve(()=>this.root,r=>{i.container=r?s3e(r):null},fi),Ve(()=>this.popup,(r,s)=>{const l="popup",y="manual";s&&i.remove(s,l),r&&(r.view=i.view,i.add(r,{key:l,position:y}))},fi)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=dv,i.time=B_,this.handles.add([(()=>{const r=()=>{i.freq=dv,i.time=B_};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),jf({prepare:r=>{const s=this._measure(),l=this._freqInfo;if(l.time+=r.deltaTime,s&&(l.freq=dv,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const y=this._position();l.freq=y||s?dv:Math.min(B_,l.freq*a3e),!s&&l.freq>=o3e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const l=this.width,y=this.height;return r===l&&s===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:l,oldHeight:y,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&n3e(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return m([x()],t.prototype,"container",null),m([x({readOnly:!0})],t.prototype,"focused",null),m([x({readOnly:!0})],t.prototype,"height",void 0),m([x({type:kq})],t.prototype,"popup",null),m([x({type:RN})],t.prototype,"overlay",void 0),m([x({readOnly:!0})],t.prototype,"position",void 0),m([x({readOnly:!0})],t.prototype,"resizing",void 0),m([x({readOnly:!0})],t.prototype,"root",void 0),m([x({value:null,readOnly:!0})],t.prototype,"size",null),m([x({readOnly:!0})],t.prototype,"surface",void 0),m([x({readOnly:!0})],t.prototype,"suspended",void 0),m([x()],t.prototype,"ui",void 0),m([x({readOnly:!0})],t.prototype,"userContent",void 0),m([x({readOnly:!0})],t.prototype,"width",void 0),m([x()],t.prototype,"widthBreakpoint",void 0),t=m([Y("esri.views.DOMContainer")],t),t},u3e=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:l,layerViewsAndGraphics:y,clientOnlyGraphics:d}=await this._prepareFetchPopupFeatures(i,r),v=Promise.resolve(d),_=this._queryLayerPopupFeatures(l,y,r),M=_.map(T=>T.promise);return{location:s,clientOnlyGraphics:d,allGraphicsPromise:cO([v,...M]).then(T=>Array.from(new Set(T.flat()))),promisesPerLayerView:_}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:l,graphics:y})=>{const d={clientGraphics:y,event:q(s)?s.event:null,signal:q(s)?s.signal:null,defaultPopupTemplateEnabled:!!q(s)&&!!s.defaultPopupTemplateEnabled},v=l.fetchPopupFeatures(i,d);return{layerView:l,promise:v}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(q(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:l,location:y}=await this._popupHitTestGraphics(i,r),d=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:v,clientOnlyGraphics:_}=this._graphicsPerFetchPopupLayerView(s,d);return{clientOnlyGraphics:_,layerViewsAndGraphics:v,queryArea:l,location:y}}async _popupHitTestGraphics(i,r){const{results:s,mapPoint:l}=await this.popupHitTest(i),y=s.filter(v=>v.type==="graphic"&&this._isValidPopupGraphic(v.graphic,r)),d=y.length?y[0].mapPoint:null;return{clientGraphics:y.map(v=>v.graphic),queryArea:l,location:l||d}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),q(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return q(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],l=new Map,y=r.map(d=>{const v=[];return"layer"in d?l.set(d.layer,v):l.set(d.graphics,v),{layerView:d,graphics:v}});for(const d of i){const v=l.get(d.layer)||l.get(d.sourceLayer)||null;v?v.push(d):s.push(d)}return{layerViewsAndGraphics:y,clientOnlyGraphics:s}}};return t=m([Y("esri.views.PopupView")],t),t};let fv=class extends ba(gt){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{ae(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(gt.ofType(this.itemType.Type))(e):new gt(e)}};function sE(e,t){return{type:e,cast:YR,set(i){const r=Fp(i,this._get(t),e);r.owner=this,this._set(t,r)}}}m([x()],fv.prototype,"owner",null),fv=m([Y("esri.core.support.OwningCollection")],fv);let H_=class extends fv{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{ae(t.item)||t.item.parent===this.owner&&(Ae.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};H_=m([Y("esri.support.AnalysesCollection")],H_);let Nd=class extends fv{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};m([b4({Type:jr,ensureType:Ai(jr)})],Nd.prototype,"itemType",void 0),Nd=m([Y("esri.support.GraphicsCollection")],Nd);let Oh=class extends ot{constructor(e){super(e),this.view=null,this.baseLayerViews=new gt,this.referenceLayerViews=new gt,this._loadingHandle=Ve(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},fi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};m([x({constructOnly:!0})],Oh.prototype,"view",void 0),m([x({readOnly:!0})],Oh.prototype,"baseLayerViews",void 0),m([x({readOnly:!0})],Oh.prototype,"referenceLayerViews",void 0),m([x({readOnly:!0})],Oh.prototype,"suspended",null),m([x({type:Boolean,readOnly:!0})],Oh.prototype,"updating",null),Oh=m([Y("esri.views.BasemapView")],Oh);class c3e{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Ql(),this._started=!1,this.done=!1,Io(this._controller.signal,()=>{const s=new fe("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,l;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let y,d;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)y=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new fe("layer:view-not-supported","No layerview implementation was found");const M=await this.layerViewImporter.importLayerView(i);fr(t),y="default"in M?new M.default({layer:i,view:r}):new M({layer:i,view:r})}const v=()=>{d=Tr(d),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};d=Io(t,v),fr(t);try{await y.when()}catch(M){throw v(),M}if(!((l=(s=this._map)==null?void 0:s.allLayers)==null?void 0:l.includes(i)))return v(),void this._deferred.reject(new fe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:r,layerView:y}),r.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:r,error:y}),r.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new fe("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}}let Uo=class extends ot{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new E0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(ae(this._workPromise)&&(this._workPromise=Ql(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Nf(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var y,d,v;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),ae(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=[],r=_=>{if(!ae(_))for(const M of _)M&&(i.push(M),this._createLayerView(M),"layers"in M&&M.layers&&r(M.layers))};for(const _ of this._rootCollectionNames)r(this.get(_));this._refreshCollections();for(const[_,M]of this._layerLayerViewInfoMap)i.includes(_)||(this._layerLayerViewInfoMap.delete(M.layer),M.destroy());const s=i.filter(_=>_.type==="group").map(_=>_.layers),l=[(y=t==null?void 0:t.ground)==null?void 0:y.layers,(d=t==null?void 0:t.basemap)==null?void 0:d.baseLayers,(v=t==null?void 0:t.basemap)==null?void 0:v.referenceLayers,t==null?void 0:t.layers,...s].filter(_=>!!_);this.addHandles(l.map(_=>this._watchUpdatingTracking.addOnCollectionChange(()=>_,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([hs(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ve(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),As)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,q(this._workPromise)&&(this._workPromise.reject(zi()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return q(this._workPromise)||this._watchUpdatingTracking.updating||ky(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new fe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const s of e){const l=this._layerLayerViewInfoMap.get(s);if(!l||!l.layerView)continue;const y=l.layerView;y.layer=s,y.parent=i,t.getItemAt(r)!==y&&t.splice(r,0,y),s.layers&&this._populateLayerViewsOwners(s.layers,y.layerViews,y),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new c3e(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,s;i&&(Zs(i)||i.name==="cancelled:layerview-create")||Ae.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(s=e.id)!=null?s:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};m([x()],Uo.prototype,"_workPromise",void 0),m([x({readOnly:!0})],Uo.prototype,"_watchUpdatingTracking",void 0),m([x({readOnly:!0})],Uo.prototype,"_layersToLayerViews",null),m([x({readOnly:!0})],Uo.prototype,"_rootCollectionNames",null),m([x()],Uo.prototype,"layerViewImporter",void 0),m([x()],Uo.prototype,"supportsGround",void 0),m([x({readOnly:!0})],Uo.prototype,"updating",null),m([x({readOnly:!0})],Uo.prototype,"updatingRemaining",null),m([x({constructOnly:!0})],Uo.prototype,"view",void 0),Uo=m([Y("esri.views.LayerViewManager")],Uo);const h3e=Uo;let po=class extends ot{constructor(e){super(e),this.factor=1.5,this.offset=Cn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};m([x({type:Number})],po.prototype,"factor",void 0),m([x({nonNullable:!0})],po.prototype,"offset",void 0),m([x()],po.prototype,"position",void 0),m([x({type:Number,range:{min:0}})],po.prototype,"size",void 0),m([x()],po.prototype,"maskUrl",void 0),m([x()],po.prototype,"maskEnabled",void 0),m([x()],po.prototype,"overlayUrl",void 0),m([x()],po.prototype,"overlayEnabled",void 0),m([x({readOnly:!0})],po.prototype,"version",null),m([x({type:Boolean})],po.prototype,"visible",void 0),po=m([Y("esri.views.Magnifier")],po);const Fq=po;class p3e{constructor(){this._tasks=new Array,this._running=new G_(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return this._running.set(!0),new Promise((s,l)=>this._tasks.push(new Lq(s,l,t,i,r)))}unshift(t,i,r){return this._running.set(!0),new Promise((s,l)=>this._tasks.unshift(new Lq(s,l,t,i,r)))}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=Eo(i.signal);if(s&&!i.abortCallback)i.reject(zi());else{const l=s?(r=i.abortCallback)==null?void 0:r.call(i,zi()):i.callback(t);eu(l)?l.then(i.resolve,i.reject):i.resolve(l)}}catch(s){i.reject(s)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const t=zi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0,this._running.set(!1)}}class Lq{constructor(t,i,r,s,l){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=l}}let yv=class extends ot{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};m([x()],yv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),m([x()],yv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),yv=m([Y("esri.views.support.DebugFlags")],yv);const d3e=new yv;var fo;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(fo||(fo={}));var Yt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Yt||(Yt={}));const Al=0,Nq=new Map([[Yt.RESOURCE_CONTROLLER,Al],[Yt.SLIDE,Al],[Yt.STREAM_DATA_LOADER,Al],[Yt.ELEVATION_QUERY,Al],[Yt.TERRAIN_SURFACE,1],[Yt.SURFACE_GEOMETRY_UPDATES,1],[Yt.GRAPHICS_CORE,2],[Yt.I3S_CONTROLLER,2],[Yt.POINT_CLOUD_LAYER,2],[Yt.FEATURE_TILE_FETCHER,2],[Yt.OVERLAY,4],[Yt.STAGE,4],[Yt.GRAPHICS_DECONFLICTOR,4],[Yt.FILTER_VISIBILITY,4],[Yt.SCALE_VISIBILITY,4],[Yt.FRUSTUM_VISIBILITY,4],[Yt.CLOUDS_GENERATOR,4],[Yt.POINT_OF_INTEREST_FREQUENT,6],[Yt.POINT_OF_INTEREST_INFREQUENT,30],[Yt.LABELER,8],[Yt.FEATURE_QUERY_ENGINE,8],[Yt.FEATURE_TILE_TREE,16],[Yt.FEATURE_TILE_TREE_ACTIVE,Al],[Yt.ELEVATION_ALIGNMENT,12],[Yt.TEXT_TEXTURE_ATLAS,12],[Yt.TEXTURE_UNLOAD,12],[Yt.LINE_OF_SIGHT_TOOL,16],[Yt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Al],[Yt.SNAPPING,Al],[Yt.SHADOW_ACCUMULATOR,30]]),oE=32;function jq(e){return Nq.has(e)?Nq.get(e):typeof e=="number"?e:1}const Dq=Sr(6.5),Vq=Sr(1),f3e=Sr(30),zq=Sr(1e3/30),Gq=Sr(100),qq=.9;var aE,jd;(function(e){class t{constructor(){this._updating=new G_(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new qy("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=fo.INTERACTING,this._tasks=new hp,this._runQueue=new hp,this._load=0,this._idleStateCallbacks=new hp,this._idleUpdatesStartFired=!1,this._maxReschedule=oE,this._forceTask=!1,this._debug=!1,this._debugHandle=Ve(()=>d3e.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,fi);for(const y of Object.keys(Yt))this.performanceInfo.tasks.set(Yt[y],new qy(Yt[y]));const l=this;this._test={FRAME_SAFETY_BUDGET:Dq,INTERACTING_BUDGET:zq,IDLE_BUDGET:Gq,get availableBudget(){return l._budget.budget},usedBudget:0,getBudget:()=>l._budget,setBudget:y=>l._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}get updating(){return this._updating.get()}set updating(l){this._updating.set(l)}destroy(){this._tasks.toArray().forEach(l=>l.remove()),this._tasks.clear(),Tr(this._debugHandle),this._microTaskQueued=!1,this._updating.set(!1)}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=oE,this._schedule(),this.frame()))}))}registerTask(l,y){const d=jq(l),v=new i(this,l,y,d);return this._tasks.push(v),this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new qy(l)),v}registerIdleStateCallbacks(l,y){const d={idleBegin:l,idleEnd:y};this._idleStateCallbacks.push(d),this.state===fo.IDLE&&this._idleUpdatesStartFired&&d.idleBegin();const v=this;return{remove:()=>this._removeIdleStateCallbacks(d),set idleBegin(_){v._idleUpdatesStartFired&&(d.idleEnd(),v._state===fo.IDLE&&_()),d.idleBegin=_},set idleEnd(_){d.idleEnd=_}}}get load(){return this._load}set state(l){this._state!==l&&(this._state=l,this.state!==fo.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}updateBudget(l){this._test.usedBudget=0,++this._frameNumber;let y=Dq,d=l.frameDuration,v=Vq;switch(this.state){case fo.IDLE:y=Sr(0),d=Sr(Math.max(Gq,l.frameDuration)),v=f3e;break;case fo.INTERACTING:d=Sr(Math.max(zq,l.frameDuration));case fo.ANIMATING:}return d=Sr(d-l.elapsedFrameTime-y),this.state!==fo.IDLE&&d<Vq&&!this._forceTask?(this._forceTask=!0,!1):(d=Sr(Math.max(d,v)),this._budget.reset(d,this.state),this._maxReschedule=oE,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case fo.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin())),this._runIdle();break;case fo.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(Sr(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd(),this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l),this._runQueue.removeUnordered(l)}_updateTask(l){this._tasks.forAll(y=>{y.name===l&&y.setPriority(l)})}_getState(l){if(this._runQueue.some(d=>d.name===l))return jd.SCHEDULED;let y=jd.IDLE;return this._tasks.forAll(d=>{d.name===l&&d.needsUpdate&&(d.schedulePriority<=1?y=jd.READY:y!==jd.READY&&(y=jd.WAITING))}),y}_getRuntime(l){let y=0;return this._tasks.forAll(d=>{d.name===l&&(y+=d.runtime)}),y}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;if(this._tasks.forAll(d=>{d.needsUpdate&&l.set(d.name,(l.get(d.name)||0)+1)}),l.size===0)return null;let y="";return l.forEach((d,v)=>{y+=d>1?` ${d}x ${v}`:` ${v}`}),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=this._tasks.reduce((y,d)=>d.needsUpdate?++y:y,0);this._load=this._load*qq+l*(1-qq)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(l=>!!l.needsUpdate||(l.schedulePriority=l.basePriority,!1)),this._tasks.forAll(l=>{l.basePriority===Al&&l.needsUpdate&&!this._runQueue.includes(l)&&this._runQueue.unshift(l)});this._runQueue.length===0;){let l=!1,y=0;if(this._tasks.forAll(d=>{d.needsUpdate&&d.schedulePriority!==0&&d.basePriority!==Al&&(!d.task.runOncePerFrame||d.lastFrameRun!==this._frameNumber)&&(l=!0,y=Math.max(y,d.basePriority),d.schedulePriority===1?(d.schedulePriority=0,this._runQueue.push(d)):--d.schedulePriority)}),!l)return this._updating.set(!1),!1;--this._maxReschedule}return this._updating.set(!0),!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const y=this._budget.now(),d=this._runQueue.pop();this._budget.resetProgress();try{d.task.runTask(this._budget)}catch(_){Ae.getLogger("esri.views.support.Scheduler").error(`Exception in task "${d.name}"`,_)}d.schedulePriority=d.basePriority,d.lastFrameRun=this._frameNumber;const v=this._budget.now()-y;if(d.runtime+=v,this._frameTaskTimes.set(d.priority,this._frameTaskTimes.get(d.priority)+v),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",d.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updating.set(this._tasks.some(_=>_.needsUpdate)),void this._recordFrameTaskTimes(this._budget.now()-l)}while(this._schedule());this._updating.set(this._tasks.some(y=>y.needsUpdate)),this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(Yt))this._frameTaskTimes.set(Yt[l],0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((y,d)=>this.performanceInfo.tasks.get(d).record(y)),this.performanceInfo.total.record(l)}get test(){return this._test}}e.Scheduler=t;class i{constructor(l,y,d,v){this._scheduler=l,this.name=y,this._basePriority=v,this.lastFrameRun=0,this.runtime=0,this._queue=new p3e,this._handles=new Jr,this.schedulePriority=this._basePriority,this._task=new G_(q(d)?d:this._queue),this._handles.add(no(()=>this.task.running,()=>l.activate()))}get task(){return this._task.get()}get updating(){return this._queue.running}remove(){this.processQueue(Uq),this._scheduler.removeTask(this),this.schedule=gv.schedule,this.reschedule=gv.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){this.name=l;const y=jq(l);this._basePriority!==Al&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,y,d){return this._queue.push(l,y,d)}reschedule(l,y,d){return this._queue.unshift(l,y,d)}processQueue(l){this._queue.runTask(l)}}class r{constructor(){this._begin=typeof performance!="undefined"?performance.now():0,this._budget=0,this._state=fo.IDLE,this._done=!1,this._enabled=!0}run(l){return!this.done&&(l()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(l){this._enabled=l}reset(l,y){this._begin=this.now(),this._budget=l,this._state=y,this._done=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=!1}get hasProgressed(){return this._done}}e.Budget=r})(aE||(aE={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(jd||(jd={}));const Uq=(()=>{const e=new aE.Budget;return e.enabled=!1,e})();class y3e{remove(){}processQueue(){}schedule(t,i,r){try{if(Eo(i)){const s=zi();return r?Promise.resolve(r(s)):Promise.reject(s)}return K9(t(Uq))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const gv=new y3e;let mv=class extends ot{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Yt.TEXTURE_UNLOAD))!=null?i:gv}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(s.texture),this._stage.loadImmediate(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return q(t)?`${e}.${t}px`:e}};m([x()],mv.prototype,"_frameTask",void 0),m([x()],mv.prototype,"updating",null),mv=m([Y("esri.views.3d.support.TextureCollection")],mv);var Bq;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(Bq||(Bq={}));const Hq=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Wq={};function Jq(e){return!!Wq[e]}function g3e(e){for(const t of e)if(!Jq(t))return!1;return!0}Hq.forEach(e=>{Wq[e]=!0});class m3e{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,s){const l=Array.isArray(t)?t:t.split(",");if(!g3e(l))return l.some(Jq)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,d;Array.isArray(i)?d=i:(y=i,d=[]),typeof r=="function"?y=r:s=r,s=s!=null?s:rt.DEFAULT;const v=this._createUniqueGroupName(),_=new v3e(this.view,l,d,y);this._handlers.set(v,{handler:_,priority:s});for(const M of l){const T=this._handlerCounts.get(M)||0;this._handlerCounts.set(M,T+1)}return this.inputManager&&this.inputManager.installHandlers(v,[_],s),{remove:()=>this._removeHandler(v,l)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const s=this._handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class v3e extends ln{constructor(t,i,r,s){super(!0),this.view=t;for(const l of i)switch(l){case"click":this.registerIncoming("click",r,y=>s(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",r,y=>s(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",r,y=>s(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,y=>s(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",r,y=>s(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",r,y=>{const d=this._wrapDrag(y);d&&s(d)});break;case"key-down":this.registerIncoming("key-down",r,y=>s(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",r,y=>s(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",r,y=>s(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,y=>s(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,y=>s(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,y=>s(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,y=>s(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,y=>s(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,y=>s(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,y=>{s(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",r,y=>{s(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",r,y=>{s(this._wrapBlur(y))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:s,x:l,y,native:d,eventId:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:l,y,native:d,timestamp:M,screenPoint:Cn(l,y),mapPoint:this._getMapPoint(l,y),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:T=>t.async(T),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:l,y,native:d,eventId:v}=t.data,{cancelable:_,timestamp:M}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:l,y,native:d,timestamp:M,mapPoint:this._getMapPoint(l,y),eventId:v,cancelable:_,stopPropagation:()=>t.stopPropagation(),async:T=>t.async(T),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:s,x:l,y,native:d,eventId:v}=t.data,_=d.pointerId,{cancelable:M,timestamp:T}=t;return{type:"immediate-click",pointerId:_,pointerType:i,button:r,buttons:s,x:l,y,native:d,timestamp:T,mapPoint:this._getMapPoint(l,y),eventId:v,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:l,y,native:d,eventId:v}=t.data,_=d.pointerId,{cancelable:M,timestamp:T}=t;return{type:"immediate-double-click",pointerId:_,pointerType:i,button:r,buttons:s,x:l,y,native:d,timestamp:T,mapPoint:this._getMapPoint(l,y),eventId:v,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:s,x:l,y,native:d}=t.data,{cancelable:v,timestamp:_}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:l,y,native:d,timestamp:_,mapPoint:this._getMapPoint(l,y),cancelable:v,stopPropagation:()=>t.stopPropagation(),async:M=>t.async(M),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(Cn(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:l,pointerType:y,button:d}=i;if(l==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const v=i.pointer.native,_=i.buttons,{cancelable:M,timestamp:T}=t,A={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return l==="end"&&(this._latestDragStart=void 0),{type:"drag",action:l,x:r,y:s,origin:A,pointerType:y,button:d,buttons:_,radius:i.radius,angle:wS(i.angle),native:v,timestamp:T,cancelable:M,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:s}=t.data,{cancelable:l,timestamp:y}=t;return{type:"key-down",key:i,repeat:r,native:s,timestamp:y,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:s,timestamp:l}=t;return{type:"key-up",key:i,native:r,timestamp:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:s,button:l,buttons:y,native:d,eventId:v}=t.data,_=d.pointerId,M=d.pointerType,{cancelable:T,timestamp:A}=t;return{type:i,x:r,y:s,pointerId:_,pointerType:M,button:l,buttons:y,native:d,timestamp:A,eventId:v,cancelable:T,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:s,native:l,eventId:y}=t.data.currentEvent,{button:d}=t.data.startEvent,v=t.data.startEvent.native.pointerId,_=t.data.startEvent.native.pointerType,M=t.data.action,T={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:A,timestamp:R}=t;return{type:"pointer-drag",x:i,y:r,pointerId:v,pointerType:_,button:d,buttons:s,action:M,origin:T,native:l,timestamp:R,eventId:y,cancelable:A,stopPropagation:()=>t.stopPropagation(),async:F=>t.async(F),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:s}=t,{x:l,y,deltaY:d,native:v}=r;return{type:"mouse-wheel",x:l,y,deltaY:d,native:v,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:s}=t.data,{cancelable:l,timestamp:y}=t,{buttons:d,axes:v}=r;return{type:"gamepad",device:s,timestamp:y,action:i,buttons:d,axes:v,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:_=>t.async(_),preventDefault:()=>t.preventDefault()}}}var Bo,Zq,Kq;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Bo||(Bo={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(Zq||(Zq={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(Kq||(Kq={}));function b3e(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Ae.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function lE(e){return e.visible&&e.getEditableFlag(Bo.USER)&&e.getEditableFlag(Bo.MANAGER)}function Li(e){return Cn(e.x,e.y)}function Yq(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Cn(t.clientX-i.left,t.clientY-i.top)}function Xq(e,t){return t instanceof Event?Yq(e,t):Li(t)}function Qq(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class w3e{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":eU(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!tU(t))break;const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool);if(ae(l))break;const y=l.manipulator,d=l.tool;!(q(y)&&q(d)&&y.interactive)||y.grabbable&&y.grabbableForEvent(t)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,t,i),q(y)&&q(d)&&y.interactive&&y.grabbable&&y.grabbableForEvent(t)&&!y.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:y,tool:d,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&ae(i.activeTool)&&(this._revertToNullActiveTool=!0,i.setActiveTool(l.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!tU(t))break;const s=this._grabbedManipulators.get(t.pointerId),l=Jl(s,({manipulator:M})=>M),y=Jl(s,({tool:M})=>M);if(ae(l)||ae(y))break;const d=Li(t);d.x=Tn(d.x,0,i.view.width),d.y=Tn(d.y,0,i.view.height);const v=Wt(s).start,_=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(l.dragging=!0,_?l.events.emit("drag",{action:"update",start:v,screenPoint:d}):l.events.emit("drag",{action:"start",start:v,screenPoint:d,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:y,manipulator:l,start:v}));break;case"end":l.dragging=!1,_&&l.events.emit("drag",{action:"end",start:v,screenPoint:d}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool);if(_3e(t)||i.forEachTool(_=>{if((!q(l)||l.tool!==_||_.automaticManipulatorSelection)&&_.manipulators){let M=!1;_.manipulators.forEach(({manipulator:T})=>{T.selected&&(T.selected=!1,M=!0)}),M&&_.onManipulatorSelectionChanged&&_.onManipulatorSelectionChanged()}}),ae(l))break;const{manipulator:y,tool:d}=l;if(!y.interactive)break;y.selectable&&d.automaticManipulatorSelection&&(y.selected=!y.selected,d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged());const v=t.native.shiftKey;y.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:v,stopPropagation:r});break}case"click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool),y=q(l)?l.manipulator:null;if(ae(y)||!y.interactive)break;const d=t.native.shiftKey;y.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d}),r();break}case"double-click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool),y=q(l)?l.manipulator:null;if(ae(y)||!y.interactive)break;const d=t.native.shiftKey;y.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r});break}case"immediate-double-click":{const s=Li(t),l=this._intersect(s,t.pointerType,i.forEachTool),y=q(l)?l.manipulator:null;if(ae(y)||!y.interactive)break;const d=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Li(i)}),this._grabbedManipulators.forEach(({manipulator:s},l)=>{s===t&&this._grabbedManipulators.delete(l)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(t,i){const r=Jl(this._grabbedManipulators.get(t.pointerId),({manipulator:s})=>s);ae(r)||r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Li(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(t){let i=null;return ky(t,({manipulator:r})=>!(ae(r)||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),t(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const l=this._grabbedManipulators.values(),y=Tre(l,({tool:d})=>d===s);s.firstGrabbedManipulator=q(y)?y.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},s=!0,l){const y=(d,v)=>d===t&&(ae(l)||l===v);this._grabbedManipulators.forEach(({tool:d,manipulator:v,pointerType:_},M)=>{y(d,v)&&(this._grabbedManipulators.delete(M),v.grabbing=!1,v.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:_}))}),this._draggedManipulators.forEach(({tool:d,manipulator:v},_)=>{y(d,v)&&(this._draggedManipulators.delete(_),v.dragging=!1,v.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:d,manipulator:v},_)=>{y(d,v)&&(this._hoveredManipulators.delete(_),v.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(t,i,r){let s=null;return r(l=>{if(l.manipulators==null||!lE(l))return!1;const y=l.manipulators.intersect(t,i);return!ae(y)&&(s={tool:l,manipulator:y},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Cn(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!eU(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Li(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){let l=this._intersect(t,r,s);const y=Jl(this._hoveredManipulators.get(i),({manipulator:d})=>d);q(l)&&!l.manipulator.interactive&&(l=null),q(l)&&y===l.manipulator||(q(y)&&(y.hovering=!1),q(l)?(l.manipulator.hovering=!0,this._hoveredManipulators.set(i,l)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}}function eU(e){return e==="mouse"}function tU(e){return e.pointerType!=="mouse"||e.button===0}function _3e(e){return!!e.native.shiftKey}const iU="attached",uE="tools";let Nu=class extends ld{constructor(e){super(e),this._manipulatorState=new w3e,this.tools=new gt,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(Hq,e=>{this._handleInputEvent(e)},rt.TOOL),...b3e(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(q(e)&&!this.view.ready)return void Ae.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),q(t)&&t.deactivate(),q(e)&&e.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const r=lE(i);!ae(this.activeTool)&&r||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new mv(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Ve(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),Zl(()=>this._set("textures",oi(this.textures)))],iU)):this.handles.add(Ve(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){q(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(iU)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i=De(te({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});q(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),!t&&q(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(uE),this._forEachTool(e=>{if(e instanceof ot){const t=Ve(()=>[e.cursor,e.visible,e.editable],()=>{lE(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,uE)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],uE)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag(Bo.MANAGER,ae(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;ae(e)&&this._forEachTool(t=>!(!q(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(ae(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};m([x({constructOnly:!0,nonNullable:!0})],Nu.prototype,"view",void 0),m([x({readOnly:!0,nonNullable:!0})],Nu.prototype,"textures",void 0),m([x({value:null})],Nu.prototype,"activeTool",null),m([x({readOnly:!0,type:gt})],Nu.prototype,"tools",void 0),m([x({readOnly:!0})],Nu.prototype,"cursor",void 0),m([x({readOnly:!0})],Nu.prototype,"updating",null),Nu=m([Y("esri.views.ToolViewManager")],Nu);const x3e=Nu;let w1=class extends ot{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":S3e.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return M3e[this.deviceType]}};m([x({nonNullable:!0,readOnly:!0})],w1.prototype,"nativeIndex",void 0),m([x({type:String,readOnly:!0})],w1.prototype,"deviceType",null),m([x({type:Number,readOnly:!0})],w1.prototype,"axisThreshold",null),w1=m([Y("esri.views.input.gamepad.GamepadInputDevice")],w1);const S3e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),M3e={standard:.15,spacemouse:.025,unknown:0},cE=w1;let vv=class extends ot{constructor(...e){super(...e),this.devices=new gt,this.enabledFocusMode="document"}};m([x({type:gt.ofType(cE),readOnly:!0})],vv.prototype,"devices",void 0),m([x({type:["document","view","none"]})],vv.prototype,"enabledFocusMode",void 0),vv=m([Y("esri.views.input.gamepad.GamepadSettings")],vv);const $3e=vv;let W_=class extends ot{constructor(){super(...arguments),this.gamepad=new $3e}};m([x({readOnly:!0})],W_.prototype,"gamepad",void 0),W_=m([Y("esri.views.input.Input")],W_);const E3e=W_;let kh=class extends ot{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};m([x({type:Boolean,nonNullable:!0})],kh.prototype,"enabled",void 0),m([x({type:cE})],kh.prototype,"device",void 0),m([x({type:["pan","zoom"],nonNullable:!0})],kh.prototype,"mode",void 0),m([x({type:["forward-down","forward-up"],nonNullable:!0})],kh.prototype,"tiltDirection",void 0),m([x({type:Number,nonNullable:!0})],kh.prototype,"velocityFactor",void 0),kh=m([Y("esri.views.navigation.gamepad.GamepadSettings")],kh);const rU=kh;let Dd=class extends ot{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new rU,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};m([x({type:Boolean})],Dd.prototype,"browserTouchPanEnabled",void 0),m([x({type:rU,nonNullable:!0})],Dd.prototype,"gamepad",void 0),m([x({type:Boolean})],Dd.prototype,"momentumEnabled",void 0),m([x({type:Boolean})],Dd.prototype,"mouseWheelZoomEnabled",void 0),Dd=m([Y("esri.views.navigation.Navigation")],Dd);const nU=Dd;function jTe(e,t,i){const r=oU(e),s=t,l=I3e(r,s,i);if(r){const y=Qm.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&y!==r.heightUnit){const d=new fe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${y})`,{horizontalUnit:y});return new fe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:d})}}if(!T3e(e)||l===zs.Unsupported)return new fe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(l){case zs.Units:{const y=(r==null?void 0:r.heightUnit)||"unknown",d=(s==null?void 0:s.heightUnit)||"unknown",v=new fe("layerview:incompatible-height-unit",`The vertical units of the layer (${y}) must match the vertical units of the scene (${d})`,{layerUnit:y,sceneUnit:d});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:v})}case zs.HeightModel:{const y=(r==null?void 0:r.heightModel)||"unknown",d=(s==null?void 0:s.heightModel)||"unknown",v=new fe("layerview:incompatible-height-model",`The height model of the layer (${y}) must match the height model of the scene (${d})`,{layerHeightModel:y,sceneHeightModel:d});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:v})}case zs.CRS:{const y=(r==null?void 0:r.vertCRS)||"unknown",d=(s==null?void 0:s.vertCRS)||"unknown",v=new fe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${y}) must match the vertical datum of the scene (${d})`,{layerDatum:y,sceneDatum:d});return new fe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:v})}}return null}function I3e(e,t,i){if(!sU(e)||!sU(t))return zs.Unsupported;if(e==null||t==null)return zs.Ok;if(!i&&e.heightUnit!==t.heightUnit)return zs.Units;if(e.heightModel!==t.heightModel)return zs.HeightModel;switch(e.heightModel){case"gravity-related-height":return zs.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?zs.Ok:zs.CRS;default:return zs.Unsupported}}var zs;function sU(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function T3e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!uU(e)}function oU(e){var r;const t=e.url?Td(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&q(t)&&t.serverType==="ImageServer")&&aU(e)&&e.heightModelInfo?e.heightModelInfo:uU(e)?Qm.deriveUnitFromSR(A3e,e.spatialReference):null}function aU(e){return"heightModelInfo"in e}function lU(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":return!0;default:return!1}}function uU(e){return lU(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):cU(e)}function C3e(e){return e.layers!=null||cU(e)||lU(e)||aU(e)}function cU(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(zs||(zs={}));const A3e=new Qm({heightModel:"gravity-related-height"});var ju;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(ju||(ju={}));let hE,pE=null;async function P3e(e){pE||(pE=import("./geometryServiceUtils.8ca5a19c.js").then(t=>hE=t)),await pE,fr(e)}async function hU(e,t,i,r){if(!e)return null;const s=e.spatialReference;return sh()||wl(s,t)?Do(e,t):hE?hE.projectGeometry(e,t,i,r):(await Promise.race([P3e(r),oh(r)]),hU(e,t,i,r))}let Fi=class extends ot{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Wa(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return q(this.userSpatialReference)?this.userSpatialReference:Wt(this._spatialReferenceTask.spatialReference)}get extent(){return Wt(this._extentTask.extent)}get heightModelInfo(){return Wt(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return Wt(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return Wt(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return ae(this.userSpatialReference)||this.userSpatialReference.equals(Wt(this._spatialReferenceTask.spatialReference))?Wt(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return Wt(this._tileInfoTask.tileInfo)}get mapCollections(){var i,r,s,l;const e=(i=this.map)==null?void 0:i.call(this),t=[];return q(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(l=e==null?void 0:e.basemap)==null?void 0:l.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var s;if(this.suspended)return(s=this._get("_spatialReferenceTask"))!=null?s:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const l of e){const y=this._getSupportedSpatialReferences(l);if(y.length>0){const d=this._narrowDownSpatialReferenceCandidates(i,y);q(d)&&(i=d)}if(q(i)&&i.length===1)break}if(t&&(ae(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:q(r)?r.spatialReference:null,viewingMode:q(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,s,l,y,d,v,_;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(s=(r=this.map)==null?void 0:r.call(this))==null?void 0:s.basemap,layers:(d=(y=(l=this.map)==null?void 0:l.call(this))==null?void 0:y.basemap)==null?void 0:d.baseLayers},{layers:(_=(v=this.map)==null?void 0:v.call(this))==null?void 0:_.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const M=e[0].tileInfo;return{tileInfo:M&&M.spatialReference.equals(this.spatialReference)?M:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,s,l;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const y of e)if(C3e(y)){const d=oU(y);if(d)return{heightModelInfo:d,vcsWkid:(s=y.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(l=y.spatialReference)==null?void 0:l.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,s;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const l of e.layers){const y="fullExtents"in l&&l.fullExtents||(q(l.fullExtent)?[l.fullExtent]:[]),d=this.requiresExtentInSpatialReference?null:y[0],v=(s=y.find(_=>_.spatialReference.equals(this.spatialReference)))!=null?s:d;if(v)return{candidates:[{extent:v,layer:l}],updating:!1};if(this._getSupportedSpatialReferences(l).length>0)for(const _ of y)i.push({extent:_,layer:l})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(ae(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:q(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(q(this._projectExtentTask.task)&&(this._projectExtentTask.task=Wa(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:AF(async s=>{try{const l=await hU(i.extent,r,i.layer.portalItem,s);this._projectExtentTask=De(te({},this._projectExtentTask),{task:null,output:l})}catch{if(Eo(s))return;this._projectExtentTask=De(te({},this._projectExtentTask),{task:null})}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(ae(e))return t;const i=[],r=(s,l)=>q(s)?q(l)?s===l&&s:s:l;for(const s of e)for(const l of t){if(!s.spatialReference.equals(l.spatialReference))continue;const y=r(s.viewingMode,l.viewingMode);if(y!==!1){i.push({spatialReference:s.spatialReference,viewingMode:y});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return ae(e)||e.length<1?q(t)?{spatialReference:t,viewingMode:null}:null:(q(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==ju.Local)&&(e=e.filter(({viewingMode:i})=>i!==ju.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(q(s)){const l=q(s.constraints)?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:y,viewingMode:d}of l)(!this.requiresExtentInSpatialReference||ae(this.userSpatialReference)||y.equals(this.userSpatialReference))&&i.push({spatialReference:y,viewingMode:d})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};m([x()],Fi.prototype,"required",void 0),m([x({constructOnly:!0})],Fi.prototype,"map",void 0),m([x({constructOnly:!0})],Fi.prototype,"getSpatialReferenceSupport",void 0),m([x()],Fi.prototype,"defaultSpatialReference",void 0),m([x()],Fi.prototype,"userSpatialReference",void 0),m([x()],Fi.prototype,"sourcePreloadCount",void 0),m([x()],Fi.prototype,"priorityCollection",void 0),m([x()],Fi.prototype,"requiresExtentInSpatialReference",void 0),m([x()],Fi.prototype,"suspended",void 0),m([x({readOnly:!0})],Fi.prototype,"ready",null),m([x({readOnly:!0})],Fi.prototype,"heightModelInfoReady",null),m([x({readOnly:!0})],Fi.prototype,"spatialReference",null),m([x({readOnly:!0})],Fi.prototype,"extent",null),m([x({readOnly:!0})],Fi.prototype,"heightModelInfo",null),m([x({readOnly:!0})],Fi.prototype,"vcsWkid",null),m([x({readOnly:!0})],Fi.prototype,"latestVcsWkid",null),m([x({readOnly:!0})],Fi.prototype,"viewingMode",null),m([x({readOnly:!0})],Fi.prototype,"tileInfo",null),m([x({readOnly:!0})],Fi.prototype,"mapCollections",null),m([x({readOnly:!0})],Fi.prototype,"_allLayers",null),m([x({readOnly:!0})],Fi.prototype,"_spatialReferenceTask",null),m([x({readOnly:!0})],Fi.prototype,"_tileInfoTask",null),m([x({readOnly:!0})],Fi.prototype,"_heightModelInfoTask",null),m([x({readOnly:!0})],Fi.prototype,"_extentCandidatesTask",null),m([x()],Fi.prototype,"_extentTask",null),m([x()],Fi.prototype,"_projectExtentTask",void 0),Fi=m([Y("esri.views.support.DefaultsFromMap")],Fi);var J_;let Tt=J_=class extends ba(fn.EventedMixin(M2(ot))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new w0({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Nd,this.analyses=new H_,this.typeSpecificPreconditionsReady=!0,this.layerViews=new gt,this.magnifier=new Fq,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new E3e,this.navigation=new nU,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new m3e(this),this.persistableViewModels=new gt,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(Ve(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,J_.views.add(this)):(this._currentSpatialReference=null,J_.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.toolViewManager)==null||i.detach(),q(this.analysisViewManager)&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):t&&!this.ready&&(this._startup(),q(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},ml))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,em(()=>this.ready)))),this.basemapView=new Oh({view:this}),this.layerViewManager=new h3e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new x3e({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Ve(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=De(te({},this.defaultsFromMap.required),{extent:e}),{sync:!0,initial:!0}),Ve(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Ve(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Ve(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(q(e))return;const s=Zl(()=>e=Wa(e));e=AF(async l=>{try{await fw(this.spatialReferenceWarningDelay,null,l)}catch{return}finally{e=null}Ae.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=oi(this.graphics),this.analyses=oi(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),oi(this.analysisViewManager),this.toolViewManager=oi(this.toolViewManager),this.layerViewManager=oi(this.layerViewManager),this.basemapView=oi(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ae.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Fi(te({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ul.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)==null?void 0:e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&((e==null?void 0:e.destroyed)&&(Ae.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:e}),e=null),ul.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Xi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return q(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new fe("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return q(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&Ae.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(no(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Tt.views=new gt,m([x()],Tt.prototype,"_userSpatialReference",void 0),m([x()],Tt.prototype,"activeTool",null),m([x({readOnly:!0})],Tt.prototype,"allLayerViews",void 0),m([x()],Tt.prototype,"groundView",void 0),m([x()],Tt.prototype,"animation",null),m([x()],Tt.prototype,"basemapView",void 0),m([x({readOnly:!0})],Tt.prototype,"_defaultsFromMapSettings",null),m([x()],Tt.prototype,"defaultsFromMap",null),m([x()],Tt.prototype,"fatalError",void 0),m([x({type:ai})],Tt.prototype,"extent",null),m([x(sE(Nd,"graphics"))],Tt.prototype,"graphics",void 0),m([x(sE(H_,"analyses"))],Tt.prototype,"analyses",void 0),m([x({readOnly:!0,type:Qm})],Tt.prototype,"heightModelInfo",null),m([x({readOnly:!0})],Tt.prototype,"interacting",null),m([x({readOnly:!0})],Tt.prototype,"navigating",null),m([x({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Tt.prototype,"preconditionsReady",null),m([x({readOnly:!0})],Tt.prototype,"typeSpecificPreconditionsReady",void 0),m([x({type:gt,readOnly:!0})],Tt.prototype,"layerViews",void 0),m([x({type:Fq})],Tt.prototype,"magnifier",void 0),m([x({value:null,type:ace})],Tt.prototype,"map",null),m([x()],Tt.prototype,"padding",void 0),m([x({readOnly:!0})],Tt.prototype,"ready",void 0),m([x({type:At})],Tt.prototype,"spatialReference",null),m([x()],Tt.prototype,"spatialReferenceWarningDelay",void 0),m([x()],Tt.prototype,"stationary",null),m([x({readOnly:!0})],Tt.prototype,"supportsGround",void 0),m([x({type:zo})],Tt.prototype,"timeExtent",void 0),m([x()],Tt.prototype,"tools",null),m([x()],Tt.prototype,"toolViewManager",void 0),m([x({readOnly:!0})],Tt.prototype,"type",void 0),m([x({type:Number})],Tt.prototype,"scale",void 0),m([x({readOnly:!0})],Tt.prototype,"updating",void 0),m([x({readOnly:!0})],Tt.prototype,"initialExtentRequired",void 0),m([x({readOnly:!0})],Tt.prototype,"initialExtent",null),m([x()],Tt.prototype,"cursor",null),m([x({readOnly:!0})],Tt.prototype,"input",void 0),m([x({type:nU,nonNullable:!0})],Tt.prototype,"navigation",void 0),m([x()],Tt.prototype,"layerViewManager",void 0),m([x()],Tt.prototype,"analysisViewManager",void 0),m([x()],Tt.prototype,"width",void 0),m([x()],Tt.prototype,"height",void 0),m([x({readOnly:!0})],Tt.prototype,"resizing",void 0),m([x({value:null,readOnly:!0})],Tt.prototype,"size",null),m([x({readOnly:!0})],Tt.prototype,"suspended",void 0),m([x({readOnly:!0})],Tt.prototype,"viewEvents",void 0),m([x({readOnly:!0})],Tt.prototype,"persistableViewModels",void 0),m([x()],Tt.prototype,"_isValid",void 0),m([x()],Tt.prototype,"_readyCycleForced",void 0),m([x()],Tt.prototype,"_currentSpatialReference",void 0),Tt=J_=m([Y("esri.views.View")],Tt);const O3e=Tt;let Rh=class extends $2{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new fe("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=eu(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};m([x({readOnly:!0})],Rh.prototype,"done",null),m([x({readOnly:!0,type:String})],Rh.prototype,"state",void 0),m([x()],Rh.prototype,"target",void 0),Rh=m([Y("esri.views.ViewAnimation")],Rh),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Rh||(Rh={}));const dE=Rh;function Vd(e,t,i,r){const s=3*e,l=3*(i-e)-s,y=1-s-l,d=3*t,v=3*(r-t)-d,_=1-d-v;function M(F){return((y*F+l)*F+s)*F}function T(F){return((_*F+v)*F+d)*F}function A(F){return(3*y*F+2*l)*F+s}function R(F,V){let z,W,Z,Q,ee,re;for(Z=F,re=0;re<8;re++){if(Q=M(Z)-F,Math.abs(Q)<V)return Z;if(ee=A(Z),Math.abs(ee)<1e-6)break;Z-=Q/ee}if(z=0,W=1,Z=F,Z<z)return z;if(Z>W)return W;for(;z<W;){if(Q=M(Z),Math.abs(Q-F)<V)return Z;F>Q?z=Z:W=Z,Z=.5*(W-z)+z}return Z}return function(F,V=1e-6){return T(R(F,V))}}const k3e=/^cubic-bezier\((.*)\)/,Ho={};function R3e(e){let t=Ho[e]||null;if(!t){const i=k3e.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=Vd.apply(Vd,r))}}return t}Ho.ease=Vd(.25,.1,.25,1),Ho.linear=Vd(0,0,1,1),Ho.easeIn=Ho["ease-in"]=Vd(.42,0,1,1),Ho.easeOut=Ho["ease-out"]=Vd(0,0,.58,1),Ho.easeInOut=Ho["ease-in-out"]=Vd(.42,0,.58,1);function Pl(){return[1,0,0,1,0,0]}function pU(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function F3e(e,t,i,r,s,l){return[e,t,i,r,s,l]}function L3e(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:Pl,clone:pU,fromValues:F3e,createView:L3e},Symbol.toStringTag,{value:"Module"}));function _1(e,t){return e[0]=t[0],e[1]=t[1],e}function _n(e,t,i){return e[0]=t,e[1]=i,e}function fE(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function ur(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function dU(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function fU(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function N3e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function j3e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function D3e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function V3e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function z3e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function x1(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Oa(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function Du(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function S1(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function bv(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Fh(e){const t=e[0],i=e[1];return t*t+i*i}function yU(e,t){return e[0]=-t[0],e[1]=-t[1],e}function G3e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Z_(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function Vu(e,t){return e[0]*t[0]+e[1]*t[1]}function yE(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function K_(e,t,i,r){const s=t[0],l=t[1];return e[0]=s+r*(i[0]-s),e[1]=l+r*(i[1]-l),e}function q3e(e,t){t=t||1;const i=2*xg()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function U3e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Ol(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function B3e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function H3e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function gU(e,t,i,r){const s=t[0]-i[0],l=t[1]-i[1],y=Math.sin(r),d=Math.cos(r);return e[0]=s*d-l*y+i[0],e[1]=s*y+l*d+i[1],e}function W3e(e,t){const i=e[0],r=e[1],s=t[0],l=t[1];let y=i*i+r*r;y>0&&(y=1/Math.sqrt(y));let d=s*s+l*l;d>0&&(d=1/Math.sqrt(d));const v=(i*s+r*l)*y*d;return v>1?0:v<-1?Math.PI:Math.acos(v)}function J3e(e){return"vec2("+e[0]+", "+e[1]+")"}function Z3e(e,t){return e[0]===t[0]&&e[1]===t[1]}function gE(e,t){const i=e[0],r=e[1],s=t[0],l=t[1],y=Ms();return Math.abs(i-s)<=y*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-l)<=y*Math.max(1,Math.abs(r),Math.abs(l))}function mE(e,t,i,r,s){let l=t[0]-i[0],y=t[1]-i[1];const d=(r[0]*l+r[1]*y)*(s-1);return l=r[0]*d,y=r[1]*d,e[0]=t[0]+l,e[1]=t[1]+y,e}const K3e=bv,Y_=ur,Y3e=dU,X3e=fU,Q3e=Du,e_e=S1,t_e=Fh;Object.freeze(Object.defineProperty({__proto__:null,copy:_1,set:_n,add:fE,subtract:ur,multiply:dU,divide:fU,ceil:N3e,floor:j3e,min:D3e,max:V3e,round:z3e,scale:x1,scaleAndAdd:Oa,distance:Du,squaredDistance:S1,length:bv,squaredLength:Fh,negate:yU,inverse:G3e,normalize:Z_,dot:Vu,cross:yE,lerp:K_,random:q3e,transformMat2:U3e,transformMat2d:Ol,transformMat3:B3e,transformMat4:H3e,rotate:gU,angle:W3e,str:J3e,exactEquals:Z3e,equals:gE,projectAndScale:mE,len:K3e,sub:Y_,mul:Y3e,div:X3e,dist:Q3e,sqrDist:e_e,sqrLen:t_e},Symbol.toStringTag,{value:"Module"}));function Ht(){return[0,0]}function mU(e){return[e[0],e[1]]}function zu(e,t){return[e,t]}function vU(e){const t=Ht(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function bU(e,t){return new Float64Array(e,t,2)}function wU(){return Ht()}function _U(){return zu(1,1)}function xU(){return zu(1,0)}function SU(){return zu(0,1)}const i_e=wU(),r_e=_U(),n_e=xU(),s_e=SU();Object.freeze(Object.defineProperty({__proto__:null,create:Ht,clone:mU,fromValues:zu,fromArray:vU,createView:bU,zeros:wU,ones:_U,unitX:xU,unitY:SU,ZEROS:i_e,ONES:r_e,UNIT_X:n_e,UNIT_Y:s_e},Symbol.toStringTag,{value:"Module"}));const MU=96,$U=39.37,o_e=180/Math.PI;function EU(e){return e.wkid?e:e.spatialReference||At.WGS84}function vE(e,t){return t.type?_n(e,t.x,t.y):_1(e,t)}function IU(e){return Jp(e)}function wv(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*y_e(e.spatialReference)}async function _v(e,t,i,r){let s,l;if(!e||Array.isArray(e)&&!e.length)return null;if(gt.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const d=e.every(M=>"attributes"in M),v=e.some(M=>!M.geometry);let _=e;if(d&&v&&t&&t.allLayerViews){const M=new Map;for(const F of e){const V=F.layer,z=M.get(V)||[],W=F.attributes[V.objectIdField];W!=null&&z.push(W),M.set(V,z)}const T=[];M.forEach((F,V)=>{const z=t.allLayerViews.find(W=>W.layer.id===V.id);if("queryFeatures"in z){const W=V.createQuery();W.objectIds=F,W.returnGeometry=!0,T.push(z.queryFeatures(W))}});const A=await Promise.all(T),R=[];for(const F of A)if(F&&F.features&&F.features.length)for(const V of F.features)q(V.geometry)&&R.push(V.geometry);_=R}for(const M of _)r=await _v(M,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new dt(e);else if(e instanceof Ec)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const d=e.layer,v=t.allLayerViews.find(_=>_.layer.id===d.id);if("queryFeatures"in v){const _=d.createQuery();_.objectIds=[e.attributes[d.objectIdField]],_.returnGeometry=!0;const M=await v.queryFeatures(_);s=Hb(M,"features",0,"geometry")}}}if(ae(s)||(l=s.type==="point"?new ai({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!l))return null;sh()||wl(l.spatialReference,i)||await oh();const y=Do(l,i);return y?r=r?r.union(y):y:null}function a_e(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s&&s.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function bE(e,t){return Xi(EU(e),t)?e:Do(e,t)}async function l_e(e,t){if(!e||!t)return new gl({targetGeometry:new dt,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:l,size:y}=t,d=[s?y[0]-s.left-s.right:y[0],s?y[1]-s.top-s.bottom:y[1]];let v=null;e instanceof gl?v=e:e.viewpoint?v=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(v=e.target);let _=null;v&&v.targetGeometry?_=v.targetGeometry:e instanceof ai?_=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(_=await _v(e.center,t,i)||await _v(e.extent,t,i)||await _v(e.target,t,i)||await _v(e,t,i)),!_&&l&&l.targetGeometry?_=l.targetGeometry:!_&&t.extent&&(_=t.extent),i||(i=EU(t.spatialReference||t.extent||_)),sh()||Xi(_.spatialReference,i)||wl(_,i)||await oh();const M=bE(_.center?_.center:_,i);let T=null;if(v&&q(v.targetGeometry)&&v.targetGeometry.type==="point")T=v.scale;else if("scale"in e&&e.scale)T=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)T=r.zoomToScale(e.zoom);else if(Array.isArray(_)||_.type==="point"||_.type==="extent"&&_.width===0&&_.height===0){const V=bE(t.extent,i);T=q(V)?wv(V,d):t.extent?wv(t.extent,d):l.scale}else T=wv(bE(_.extent,i),d);const A=a_e(e);A&&(A.min&&A.min>T?T=A.min:A.max&&A.max<T&&(T=A.max));let R=0;v?R=v.rotation:e.hasOwnProperty("rotation")?R=e.rotation:l&&(R=l.rotation);let F=new gl({targetGeometry:M,scale:T,rotation:R});return r&&(F=r.fit(F),r.constrainByGeometry(F),r.rotationEnabled||(F.rotation=R)),F}function ka(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function u_e(e,t,i){return i?_n(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):x1(e,t,.5)}const c_e=function(){const e=Ht();return function(t,i,r){const s=i.targetGeometry;vE(e,s);const l=.5*M1(i);return t.xmin=e[0]-l*r[0],t.ymin=e[1]-l*r[1],t.xmax=e[0]+l*r[0],t.ymax=e[1]+l*r[1],t.spatialReference=s.spatialReference,t}}();function h_e(e,t,i,r,s){return SE(e,t,i.center),e.scale=wv(i,r),s&&s.constraints&&s.constraints.constrain(e),e}function p_e(e,t,i,r){return xE(e,t,i,r),D_(e,e)}const TU=function(){const e=Ht();return function(t,i,r){return Y_(t,g_e(t,i),u_e(e,i,r))}}(),d_e=function(){const e=Pl(),t=Ht();return function(i,r,s,l){const y=M1(r),d=wE(r);return _n(t,y,y),vq(e,t),V_(e,e,d),hv(e,e,TU(t,s,l)),hv(e,e,[0,l.top-l.bottom]),_n(i,e[4],e[5])}}();function M1(e){return e.scale*f_e(e.targetGeometry)}function f_e(e){return q(e)&&Cr(e.spatialReference)?1/(IU(e.spatialReference)*$U*MU):1}function wE(e){return pS(e.rotation)||0}function y_e(e){return Cr(e)?IU(e)*$U*MU:1}function g_e(e,t){return x1(e,t,.5)}const _E=function(){const e=Ht(),t=Ht(),i=Ht();return function(r,s,l,y,d,v){return yU(e,s),x1(t,l,.5*v),_n(i,1/y*v,-1/y*v),rE(r,t),d&&V_(r,r,d),iE(r,r,i),hv(r,r,e),r}}(),xE=function(){const e=Ht();return function(t,i,r,s){const l=M1(i),y=wE(i);return vE(e,i.targetGeometry),_E(t,e,r,l,y,s)}}(),m_e=function(){const e=Ht();return function(t,i,r,s){const l=M1(i);return vE(e,i.targetGeometry),_E(t,e,r,l,0,s)}}();function v_e(e){const t=Ks(e);return t?t.valid[1]-t.valid[0]:0}function b_e(e,t){return Math.round(v_e(e)/t)}const w_e=function(){const e=Ht(),t=Ht(),i=[0,0,0];return function(r,s,l){ur(e,r,s),Z_(e,e),ur(t,r,l),Z_(t,t),yE(i,e,t);let y=Math.acos(Vu(e,t)/(bv(e)*bv(t)))*o_e;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),__e=function(){const e=Ht();return function(t,i,r,s){const l=t.targetGeometry;return ka(t,i),d_e(e,i,r,s),l.x+=e[0],l.y+=e[1],t}}(),SE=function(e,t,i){ka(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},x_e=function(){const e=Ht();return function(t,i,r,s,l){l||(l="center"),Y_(e,r,s),x1(e,e,.5);const y=e[0],d=e[1];switch(l){case"center":_n(e,0,0);break;case"left":_n(e,-y,0);break;case"top":_n(e,0,d);break;case"right":_n(e,y,0);break;case"bottom":_n(e,0,-d);break;case"top-left":_n(e,-y,d);break;case"bottom-left":_n(e,-y,-d);break;case"top-right":_n(e,y,d);break;case"bottom-right":_n(e,y,-d)}return X_(t,i,e),t}}();function DTe(e,t,i){return ka(e,t),e.rotation+=i,e}function S_e(e,t,i){return ka(e,t),e.rotation=i,e}const M_e=function(){const e=Ht();return function(t,i,r,s,l){return ka(t,i),isNaN(r)||r===0||(PU(e,s,i,l),t.scale=i.scale*r,OU(e,e,t,l),X_(t,t,_n(e,e[0]-s[0],s[1]-e[1]))),t}}();function CU(e,t,i){return ka(e,t),e.scale=i,e}const AU=function(){const e=Ht();return function(t,i,r,s,l,y){return ka(t,i),isNaN(r)||r===0||(PU(e,l,i,y),t.scale=i.scale*r,t.rotation+=s,OU(e,e,t,y),X_(t,t,_n(e,e[0]-l[0],l[1]-e[1]))),t}}(),VTe=function(){const e=Ht(),t=Ht();return function(i,r,s,l,y,d,v){return TU(t,d,v),fE(e,y,t),l?AU(i,r,s,l,e,d):M_e(i,r,s,e,d)}}(),PU=function(){const e=Pl();return function(t,i,r,s){return Ol(t,i,p_e(e,r,s,1))}}(),OU=function(){const e=Pl();return function(t,i,r,s){return Ol(t,i,xE(e,r,s,1))}}(),X_=function(){const e=Ht(),t=Pl();return function(i,r,s){ka(i,r);const l=M1(r),y=i.targetGeometry;return mq(t,wE(r)),iE(t,t,zu(l,l)),Ol(e,s,t),y.x+=e[0],y.y+=e[1],i}}();class $_e{constructor(t,i,r,s){const l=t.targetGeometry,y=i.targetGeometry;s?typeof s=="string"&&(s=R3e(s)||Ho.ease):s=Ho.ease,this.easing=s,this.duration=r,this.sCenterX=l.x,this.sCenterY=l.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let s,l,y,d;i>=1?(s=this.tCenterX,l=this.tCenterY,y=this.tRotation,d=this.tScale):(s=this.sCenterX+r*this.dCenterX,l=this.sCenterY+r*this.dCenterY,y=this.sRotation+r*this.dRotation,d=this.sScale+r*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=l,t.scale=d,t.rotation=y}}let Gu=class extends ot{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=Ho.ease,this.view=null,this.viewpoint=null,this.viewpoint=new gl({targetGeometry:new dt,scale:0,rotation:0}),this._updateTask=jf({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;ka(r,t),this.transition=new $_e(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new dE({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==dE.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};m([x()],Gu.prototype,"animation",void 0),m([x()],Gu.prototype,"duration",void 0),m([x()],Gu.prototype,"transition",void 0),m([x()],Gu.prototype,"easing",void 0),m([x()],Gu.prototype,"view",void 0),m([x()],Gu.prototype,"viewpoint",void 0),Gu=m([Y("esri.views.2d.AnimationManager")],Gu);const E_e=Gu;class I_e{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:l,state:{id:y}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),l.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),q(s)&&(s.lastUpdateId!==y&&(s.viewChange(),s.lastUpdateId=y),s.updateRequested&&s.processUpdate(this._updateParameters)),q(r)&&(r.lastUpdateId!==y&&(r.viewChange(),r.lastUpdateId=y),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Ve(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=jf(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function Gr(){return Promise.all([import("./webglDeps.fa2a2dfe.js"),import("./mapViewDeps.1596d6b5.js")])}const xv=()=>Gr().then(()=>import("./TileLayerView2D.dbf60e27.js")),Sv=()=>Gr().then(()=>import("./FeatureLayerView2D.6b256f5a.js")),kU={"base-dynamic":()=>Gr().then(()=>import("./BaseDynamicLayerView2D.5f20a933.js")),"base-tile":xv,"bing-maps":xv,csv:Sv,"geo-rss":()=>Gr().then(()=>import("./GeoRSSLayerView2D.dba43b5a.js")),feature:Sv,geojson:Sv,graphics:()=>Gr().then(()=>import("./GraphicsLayerView2D.50a8c324.js")),group:()=>Gr().then(()=>import("./GroupLayerView2D.ae9a7ef1.js")),imagery:()=>Gr().then(()=>import("./ImageryLayerView2D.afffb5a4.js")),"imagery-tile":()=>Gr().then(()=>import("./ImageryTileLayerView2D.71baa09e.js")),kml:()=>Gr().then(()=>import("./KMLLayerView2D.2523eca4.js")),"map-image":()=>Gr().then(()=>import("./MapImageLayerView2D.e9c78d25.js")),"map-notes":()=>Gr().then(()=>import("./MapNotesLayerView2D.9e11076b.js")),media:()=>Gr().then(()=>import("./MediaLayerView2D.25ef3b6d.js")),"ogc-feature":()=>Gr().then(()=>import("./OGCFeatureLayerView2D.dfd6a6f8.js")),"open-street-map":xv,"oriented-imagery":Sv,route:()=>Gr().then(()=>import("./RouteLayerView2D.566058f4.js")),stream:()=>Gr().then(()=>import("./StreamLayerView2D.d79fa534.js")),"subtype-group":()=>Gr().then(()=>import("./SubtypeGroupLayerView2D.428f112c.js")),tile:xv,"vector-tile":()=>Gr().then(()=>import("./VectorTileLayerView2D.ae53073b.js")),wcs:()=>Gr().then(()=>import("./ImageryTileLayerView2D.71baa09e.js")),"web-tile":xv,wfs:Sv,wms:()=>Gr().then(()=>import("./WMSLayerView2D.deb00e84.js")),wmts:()=>Gr().then(()=>import("./WMTSLayerView2D.8445b93a.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function T_e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new fe(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const RU={hasLayerViewModule:e=>q(kU[e.type]),importLayerView:e=>{const t=kU[e.type];if(ae(t))throw T_e(e);return t(e)}};function C_e(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,l=0,y=0;const d=[0,0],v=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const _ of v)for(let M=0;M<_.length-1;M++){Zne(d,r,_,M);const T=Du(r,d);T<s&&(s=T,l=d[0],y=d[1])}return{coordinate:new dt({x:l,y,spatialReference:i}),distance:s}}var ME;let zd=ME=class extends sS(ot){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(ae(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Do(this.geometry,this.spatialReference)}catch(e){return Ae.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(ae(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Ow(this.normalizedGeometry,i):RO(this.normalizedGeometry,i))return e;const{coordinate:r}=C_e(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new ME({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};m([x({constructOnly:!0})],zd.prototype,"geometry",void 0),m([x({readOnly:!0})],zd.prototype,"normalizedGeometry",null),m([x({constructOnly:!0})],zd.prototype,"spatialReference",void 0),zd=ME=m([Y("esri.views.2d.constraints.GeometryConstraint")],zd);var $E;let Mv=$E=class extends sS(ot){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new $E({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};m([x()],Mv.prototype,"enabled",void 0),m([x()],Mv.prototype,"rotationEnabled",void 0),Mv=$E=m([Y("esri.views.2d.constraints.RotationConstraint")],Mv);const FU=Mv;var EE;let Gs=EE=class extends sS(ot){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:l}=this,y=-1,d=-1,v=!1,_=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(M=>M.clone()),t.sort((M,T)=>T.scale-M.scale),t.forEach((M,T)=>M.level=T);for(const M of t)!v&&i>0&&i>=M.scale&&(y=M.level,v=!0),!_&&r>0&&r>=M.scale&&(d=e?e.level:-1,_=!0),e=M;s===-1&&(s=i===0?0:y),l===-1&&(l=r===0?t.length-1:d),s=Math.max(s,0),s=Math.min(s,t.length-1),l=Math.max(l,0),l=Math.min(l,t.length-1),s>l&&([s,l]=[l,s]),i=t[s].scale,r=t[l].scale,t.splice(0,s),t.splice(l-s+1,t.length),t.forEach((M,T)=>{this._lodByScale[M.scale]=M,this._scales[T]=M.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",l),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,l=t&&t.targetGeometry,y=r!==0&&e.scale<r,d=i!==0&&e.scale>i;if(y||d){const v=d?i:r;if(t&&l){const _=(v-t.scale)/(e.scale-t.scale);s.x=l.x+(s.x-l.x)*_,s.y=l.y+(s.y-l.y)*_}e.scale=v}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new EE({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};m([x({readOnly:!0})],Gs.prototype,"effectiveLODs",void 0),m([x({readOnly:!0})],Gs.prototype,"effectiveMinZoom",void 0),m([x({readOnly:!0})],Gs.prototype,"effectiveMaxZoom",void 0),m([x({readOnly:!0})],Gs.prototype,"effectiveMinScale",void 0),m([x({readOnly:!0})],Gs.prototype,"effectiveMaxScale",void 0),m([x()],Gs.prototype,"lods",void 0),m([x()],Gs.prototype,"minZoom",void 0),m([x()],Gs.prototype,"maxZoom",void 0),m([x()],Gs.prototype,"minScale",void 0),m([x()],Gs.prototype,"maxScale",void 0),m([x()],Gs.prototype,"snapToZoom",void 0),Gs=EE=m([Y("esri.views.2d.constraints.ZoomConstraint")],Gs);const LU=Gs,A_e={base:null,key:"type",typeMap:{extent:ai,polygon:jn}};let $r=class extends ot{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,i;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _defaultLODs(){var i,r,s;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(s=this.view)==null?void 0:s.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new zd({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new FU({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,s=this.minScale,l=this.maxScale,y=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===s&&e.maxScale===l&&e.snapToZoom===y?e:new LU({lods:t,minZoom:i,maxZoom:r,minScale:s,maxScale:l,snapToZoom:y})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};m([x({readOnly:!0})],$r.prototype,"effectiveLODs",null),m([x({readOnly:!0})],$r.prototype,"effectiveMinScale",null),m([x({readOnly:!0})],$r.prototype,"effectiveMaxScale",null),m([x({readOnly:!0})],$r.prototype,"effectiveMinZoom",null),m([x({readOnly:!0})],$r.prototype,"effectiveMaxZoom",null),m([x({types:A_e,value:null})],$r.prototype,"geometry",null),m([x({type:[MM]})],$r.prototype,"lods",void 0),m([x()],$r.prototype,"minScale",void 0),m([x()],$r.prototype,"maxScale",void 0),m([x()],$r.prototype,"minZoom",void 0),m([x()],$r.prototype,"maxZoom",void 0),m([x()],$r.prototype,"rotationEnabled",void 0),m([x()],$r.prototype,"snapToZoom",void 0),m([x()],$r.prototype,"view",void 0),m([x({readOnly:!0})],$r.prototype,"version",null),m([x()],$r.prototype,"_defaultLODs",null),m([x({type:zd})],$r.prototype,"_geometry",null),m([x({type:FU})],$r.prototype,"_rotation",null),m([x({readOnly:!0,type:LU})],$r.prototype,"_zoom",null),$r=m([Y("esri.views.2d.MapViewConstraints")],$r);const NU=$r;function P_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function O_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function jU(e,t,i,r,s,l,y,d,v,_){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=l,e[5]=y,e[6]=d,e[7]=v,e[8]=_,e}function DU(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function k_e(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function R_e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=M*y-d*_,A=-M*l+d*v,R=_*l-y*v;let F=i*T+r*A+s*R;return F?(F=1/F,e[0]=T*F,e[1]=(-M*r+s*_)*F,e[2]=(d*r-s*y)*F,e[3]=A*F,e[4]=(M*i-s*v)*F,e[5]=(-d*i+s*l)*F,e[6]=R*F,e[7]=(-_*i+r*v)*F,e[8]=(y*i-r*l)*F,e):null}function F_e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=t[4],d=t[5],v=t[6],_=t[7],M=t[8];return e[0]=y*M-d*_,e[1]=s*_-r*M,e[2]=r*d-s*y,e[3]=d*v-l*M,e[4]=i*M-s*v,e[5]=s*l-i*d,e[6]=l*_-y*v,e[7]=r*v-i*_,e[8]=i*y-r*l,e}function L_e(e){const t=e[0],i=e[1],r=e[2],s=e[3],l=e[4],y=e[5],d=e[6],v=e[7],_=e[8];return t*(_*l-y*v)+i*(-_*s+y*d)+r*(v*s-l*d)}function IE(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=i[0],R=i[1],F=i[2],V=i[3],z=i[4],W=i[5],Z=i[6],Q=i[7],ee=i[8];return e[0]=A*r+R*y+F*_,e[1]=A*s+R*d+F*M,e[2]=A*l+R*v+F*T,e[3]=V*r+z*y+W*_,e[4]=V*s+z*d+W*M,e[5]=V*l+z*v+W*T,e[6]=Z*r+Q*y+ee*_,e[7]=Z*s+Q*d+ee*M,e[8]=Z*l+Q*v+ee*T,e}function TE(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=i[0],R=i[1];return e[0]=r,e[1]=s,e[2]=l,e[3]=y,e[4]=d,e[5]=v,e[6]=A*r+R*y+_,e[7]=A*s+R*d+M,e[8]=A*l+R*v+T,e}function VU(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=t[4],v=t[5],_=t[6],M=t[7],T=t[8],A=Math.sin(i),R=Math.cos(i);return e[0]=R*r+A*y,e[1]=R*s+A*d,e[2]=R*l+A*v,e[3]=R*y-A*r,e[4]=R*d-A*s,e[5]=R*v-A*l,e[6]=_,e[7]=M,e[8]=T,e}function N_e(e,t,i){const r=i[0],s=i[1],l=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=l*t[6],e[7]=l*t[7],e[8]=l*t[8],e}function j_e(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function D_e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function V_e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function z_e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function G_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function q_e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=i+i,d=r+r,v=s+s,_=i*y,M=r*y,T=r*d,A=s*y,R=s*d,F=s*v,V=l*y,z=l*d,W=l*v;return e[0]=1-T-F,e[3]=M-W,e[6]=A+z,e[1]=M+W,e[4]=1-_-F,e[7]=R-V,e[2]=A-z,e[5]=R+V,e[8]=1-_-T,e}function U_e(e,t){const i=t[0],r=t[1],s=t[2],l=t[4],y=t[5],d=t[6],v=t[8],_=t[9],M=t[10],T=M*y-d*_,A=-M*l+d*v,R=_*l-y*v,F=i*T+r*A+s*R;if(!F)return null;const V=1/F;return e[0]=T*V,e[1]=(-M*r+s*_)*V,e[2]=(d*r-s*y)*V,e[3]=A*V,e[4]=(M*i-s*v)*V,e[5]=(-d*i+s*l)*V,e[6]=R*V,e[7]=(-_*i+r*v)*V,e[8]=(y*i-r*l)*V,e}function B_e(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=t[4],d=t[5],v=t[6],_=t[7],M=t[8],T=t[9],A=t[10],R=t[11],F=t[12],V=t[13],z=t[14],W=t[15],Z=i*d-r*y,Q=i*v-s*y,ee=i*_-l*y,re=r*v-s*d,ie=r*_-l*d,he=s*_-l*v,be=M*V-T*F,we=M*z-A*F,xe=M*W-R*F,$e=T*z-A*V,je=T*W-R*V,it=A*W-R*z;let Ye=Z*it-Q*je+ee*$e+re*xe-ie*we+he*be;return Ye?(Ye=1/Ye,e[0]=(d*it-v*je+_*$e)*Ye,e[1]=(v*xe-y*it-_*we)*Ye,e[2]=(y*je-d*xe+_*be)*Ye,e[3]=(s*je-r*it-l*$e)*Ye,e[4]=(i*it-s*xe+l*we)*Ye,e[5]=(r*xe-i*je-l*be)*Ye,e[6]=(V*he-z*ie+W*re)*Ye,e[7]=(z*ee-F*he-W*Q)*Ye,e[8]=(F*ie-V*ee+W*Z)*Ye,e):null}function H_e(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function W_e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function J_e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Z_e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function zU(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function K_e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Y_e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function X_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Q_e(e,t){const i=e[0],r=e[1],s=e[2],l=e[3],y=e[4],d=e[5],v=e[6],_=e[7],M=e[8],T=t[0],A=t[1],R=t[2],F=t[3],V=t[4],z=t[5],W=t[6],Z=t[7],Q=t[8],ee=Ms();return Math.abs(i-T)<=ee*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(r-A)<=ee*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(s-R)<=ee*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-F)<=ee*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(y-V)<=ee*Math.max(1,Math.abs(y),Math.abs(V))&&Math.abs(d-z)<=ee*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(v-W)<=ee*Math.max(1,Math.abs(v),Math.abs(W))&&Math.abs(_-Z)<=ee*Math.max(1,Math.abs(_),Math.abs(Z))&&Math.abs(M-Q)<=ee*Math.max(1,Math.abs(M),Math.abs(Q))}function exe(e){const t=Ms(),i=e[0],r=e[1],s=e[2],l=e[3],y=e[4],d=e[5],v=e[6],_=e[7],M=e[8];return Math.abs(1-(i*i+l*l+v*v))<=t&&Math.abs(1-(r*r+y*y+_*_))<=t&&Math.abs(1-(s*s+d*d+M*M))<=t}const txe=IE,ixe=zU;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:P_e,copy:O_e,set:jU,identity:DU,transpose:k_e,invert:R_e,adjoint:F_e,determinant:L_e,multiply:IE,translate:TE,rotate:VU,scale:N_e,scaleByVec2:j_e,fromTranslation:D_e,fromRotation:V_e,fromScaling:z_e,fromMat2d:G_e,fromQuat:q_e,normalFromMat4Legacy:U_e,normalFromMat4:B_e,projection:H_e,str:W_e,frob:J_e,add:Z_e,subtract:zU,multiplyScalar:K_e,multiplyScalarAndAdd:Y_e,exactEquals:X_e,equals:Q_e,isOrthoNormal:exe,mul:txe,sub:ixe},Symbol.toStringTag,{value:"Module"}));function Q_(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function rxe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function nxe(e,t,i,r,s,l,y,d,v){const _=new Float32Array(9);return _[0]=e,_[1]=t,_[2]=i,_[3]=r,_[4]=s,_[5]=l,_[6]=y,_[7]=d,_[8]=v,_}function sxe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:Q_,clone:rxe,fromValues:nxe,createView:sxe},Symbol.toStringTag,{value:"Module"}));function GU(){return new Float32Array(2)}function oxe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function $1(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function axe(e,t){return new Float32Array(e,t,2)}function qU(){return GU()}function UU(){return $1(1,1)}function BU(){return $1(1,0)}function HU(){return $1(0,1)}const lxe=qU(),uxe=UU(),cxe=BU(),hxe=HU();Object.freeze(Object.defineProperty({__proto__:null,create:GU,clone:oxe,fromValues:$1,createView:axe,zeros:qU,ones:UU,unitX:BU,unitY:HU,ZEROS:lxe,ONES:uxe,UNIT_X:cxe,UNIT_Y:hxe},Symbol.toStringTag,{value:"Module"}));function pxe(e){return e instanceof Float32Array&&e.length>=2}function dxe(e){return Array.isArray(e)&&e.length>=2}function CE(e){return pxe(e)||dxe(e)}var AE;const qu=[0,0];let Lh=AE=class extends Ie{constructor(e){super(e),this._viewpoint2D={center:Ht(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new ai,this.id=0,this.inverseTransform=Pl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Pl(),this.transformNoRotation=Pl(),this.displayMat3=Q_(),this.displayViewMat3=Q_(),this.viewMat3=Q_(),this.viewMat2d=fq(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=ka(i,e.viewpoint),this._set("size",_1(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new AE({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return CE(t)?Ol(e,t,this.inverseTransform):(qu[0]=t,qu[1]=i,Ol(e,qu,this.inverseTransform))}toScreen(e,t,i){return CE(t)?Ol(e,t,this.transform):(qu[0]=t,qu[1]=i,Ol(e,qu,this.transform))}toScreenNoRotation(e,t,i){return CE(t)?Ol(e,t,this.transformNoRotation):(qu[0]=t,qu[1]=i,Ol(e,qu,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return _E(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,l=this._get("size"),y=new gl({targetGeometry:new dt(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",y),!l||!t||!i)return;this.resolution=M1(y),this.rotation=r,this.scale=i,this.spatialReference=t,_1(this.center,e);const d=l[0]!==0?2/l[0]:0,v=l[1]!==0?-2/l[1]:0;jU(this.displayMat3,d,0,0,0,v,0,-1,1,1);const _=DU(this.viewMat3),M=$1(l[0]/2,l[1]/2),T=$1(-l[0]/2,-l[1]/2),A=pS(r);TE(_,_,M),VU(_,_,A),TE(_,_,T),IE(this.displayViewMat3,this.displayMat3,_);const R=rE(this.viewMat2d,M);return V_(R,R,A),hv(R,R,T),c_e(this.extent,y,l),xE(this.transform,y,l,s),D_(this.inverseTransform,this.transform),m_e(this.transformNoRotation,y,l,s),this.worldScreenWidth=b_e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};m([x({readOnly:!0})],Lh.prototype,"id",void 0),m([x({value:1,json:{write:!0}})],Lh.prototype,"pixelRatio",null),m([x({json:{write:!0}})],Lh.prototype,"size",null),m([x()],Lh.prototype,"spatialReference",void 0),m([x({type:gl,json:{write:!0}})],Lh.prototype,"viewpoint",null),Lh=AE=m([Y("esri.views.2d.ViewState")],Lh);const WU=Lh;var PE,OE;let Uu=PE=class extends ot{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new PE({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};m([x()],Uu.prototype,"left",void 0),m([x()],Uu.prototype,"top",void 0),m([x()],Uu.prototype,"right",void 0),m([x()],Uu.prototype,"bottom",void 0),Uu=PE=m([Y("esri.views.2d.PaddedViewState.Padding")],Uu);let E1=OE=class extends WU{constructor(...e){super(...e),this.paddedViewState=new WU,this._updateContent=(()=>{const t=Ht();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;_n(t,r.left+r.right,r.top+r.bottom),ur(t,i,t),_1(s.size,t);const l=s.viewpoint;l&&(this.viewpoint=l)}})(),this.addHandles(Ve(()=>[this.size,this.padding],()=>this._updateContent(),ml)),this.padding=new Uu,this.size=[0,0]}set padding(e){this._set("padding",e||new Uu)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,__e(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new OE({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};m([x()],E1.prototype,"paddedViewState",void 0),m([x({type:Uu})],E1.prototype,"padding",null),m([x()],E1.prototype,"viewpoint",null),E1=OE=m([Y("esri.views.2d.PaddedViewState")],E1);const fxe=E1;class yxe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class JU{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new q2(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&q(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let l=null;i&&(l=Io(i,()=>s.abort()));const y=()=>{const M=this._processingItems.get(t);M&&M.controller.abort(),d(),_.reject(zi())},d=()=>{v.remove(),q(l)&&l.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},v=Z9(s.signal,y),_=Ql();return this._deferreds.set(t,_),this._controllers.set(t,s),_.promise.then(d,d),this._queue.push(t),this._scheduleNext(),_.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Nf(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(ae(t))return;let i;const r=new AbortController,s=new yxe(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(l){this._processError(s,l)}eu(i)?(s.promise=i,i.then(l=>this._processResult(s,l),l=>this._processError(s,l))):this._processResult(s,i)}get test(){return{update:t=>this.runTask(t)}}}function gxe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const kE=new Set,ex=[],I1=new Map,ZU=[0,0];let Nh=class extends ot{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new JU({concurrency:e,process:(i,r)=>{const s=this._keyToItem.get(i);return t(s,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue=oi(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(_=>{const M=this._keyToItem.get(_),T=this.tileInfoView.getTileScale(M.key);I1.has(T)||(I1.set(T,[]),i=Math.max(T,i),r=Math.min(T,r)),I1.get(T).push(M.key),kE.add(T)});let s=this.state.scale;I1.has(s)||(gxe(ex,kE),ex.sort((_,M)=>_-M),s=ex.reduce((_,M)=>Math.abs(M-s)<Math.abs(_-s)?M:_,ex[0])),s=Math.min(s,i),s=Math.max(s,r);const l=I1.get(s),y=t.getClosestInfoForScale(s),d=y.getColumnForX(this.state.center[0]),v=y.getRowForY(this.state.center[1]);return l.sort((_,M)=>{const T=y.denormalizeCol(_.col,_.world),A=y.denormalizeCol(M.col,M.world);return Math.sqrt((d-T)*(d-T)+(v-_.row)*(v-_.row))-Math.sqrt((d-A)*(d-A)+(v-M.row)*(v-M.row))}),kE.clear(),I1.clear(),l[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(l=>{const y=this._keyToItem.get(l);t.getTileCoords(ZU,y.key);const d=Du(ZU,i);d<s&&(s=d,r=y.key)}),r.id}};m([x({constructOnly:!0})],Nh.prototype,"concurrency",void 0),m([x({constructOnly:!0})],Nh.prototype,"process",void 0),m([x()],Nh.prototype,"state",void 0),m([x({constructOnly:!0})],Nh.prototype,"strategy",void 0),m([x({constructOnly:!0})],Nh.prototype,"tileInfoView",void 0),m([x({readOnly:!0})],Nh.prototype,"updating",null),Nh=m([Y("esri.views.2d.tiling.PagedTileQueue")],Nh);class qs{constructor(t,i,r,s){this.set(t,i,r,s)}static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new qs(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[l,y,d,v]=t.split("/");this.level=parseFloat(l),this.row=parseFloat(y),this.col=parseFloat(d),this.world=parseFloat(v)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new qs(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new qs(t,i,r,s),new qs(t,i,r+1,s),new qs(t,i+1,r,s),new qs(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}qs.pool=new ra(qs,null,null,25,50);function jh(e,t){return[e,t]}function Gd(e,t,i){return e[0]=t,e[1]=i,e}function mxe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const Ra=new qs("0/0/0/0");class RE{constructor(t,i,r,s,l,y,d,v,_,M,T,A){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=l,this.last=y,this.size=d,this.norm=v,this.worldStart=_,this.worldEnd=M,this.worldSize=T,this.wrap=A}static create(t,i,r=null){const s=Ks(t.spatialReference),l=i.origin||jh(t.origin.x,t.origin.y),y=jh(t.size[0]*i.resolution,t.size[1]*i.resolution),d=jh(-1/0,-1/0),v=jh(1/0,1/0),_=jh(1/0,1/0);q(r)&&(Gd(d,Math.max(0,Math.floor((r.xmin-l[0])/y[0])),Math.max(0,Math.floor((l[1]-r.ymax)/y[1]))),Gd(v,Math.max(0,Math.floor((r.xmax-l[0])/y[0])),Math.max(0,Math.floor((l[1]-r.ymin)/y[1]))),Gd(_,v[0]-d[0]+1,v[1]-d[1]+1));const{cols:M,rows:T}=i;let A,R,F,V;return!r&&M&&T&&(Gd(d,M[0],T[0]),Gd(v,M[1],T[1]),Gd(_,M[1]-M[0]+1,T[1]-T[0]+1)),t.isWrappable?(A=jh(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),_[1]),R=jh(Math.floor((s.origin[0]-l[0])/y[0]),d[1]),F=jh(A[0]+R[0]-1,v[1]),V=!0):(R=d,F=v,A=_,V=!1),new RE(i.level,i.resolution,i.scale,l,d,v,_,y,R,F,A,V)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Ra.set(i);const s=r?Ra.col:this.denormalizeCol(Ra.col,Ra.world),l=Ra.row;return mxe(t,this.getXForColumn(s),this.getYForRow(l+1),this.getXForColumn(s+1),this.getYForRow(l)),t}getTileCoords(t,i,r=!1){Ra.set(i);const s=r?Ra.col:this.denormalizeCol(Ra.col,Ra.world);return Array.isArray(t)?Gd(t,this.getXForColumn(s),this.getYForRow(Ra.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(Ra.row)),t}}class T1{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:l}=s;if(r.length!==0)for(const{row:y,colFrom:d,colTo:v}of r)for(let _=d;_<=v;_++)t.call(i,l,y,s.normalizeCol(_),s.getWorldForColumn(_))}}T1.pool=new ra(T1);class FE{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const ir=new qs("0/0/0/0");class LE{constructor(t,i,r,s,l,y,d,v){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=l,this.rightAdjust=y,this.leftBound=d,this.rightBound=v}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[l,y]=i,d=l-r,v=y-s,_=v!==0?d/v:0,M=(Math.ceil(s)-s)*_,T=(Math.floor(s)-s)*_;return new LE(r,Math.floor(s),Math.ceil(y),_,d<0?M:T,d<0?T:M,d<0?l:r,d<0?r:l)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const yo=[[0,0],[0,0],[0,0],[0,0]],vxe=1e-6;class bxe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((l,y)=>y.scale-l.scale);const s=this._lodInfos=r.map(l=>RE.create(t,l,i));r.forEach((l,y)=>{this._infoByLevel[l.level]=s[y],this._infoByScale[l.scale]=s[y],this.scales[y]=l.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){ir.set(i);const s=this._infoByLevel[ir.level];return s?s.getTileBounds(t,ir,r):t}getTileCoords(t,i,r=!1){ir.set(i);const s=this._infoByLevel[ir.level];return s?s.getTileCoords(t,ir,r):t}getTileCoverage(t,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),l=T1.pool.acquire(s),y=this._wrap;let d,v,_,M=1/0,T=-1/0;const A=l.spans;yo[0][0]=yo[0][1]=yo[1][1]=yo[3][0]=-i,yo[1][0]=yo[2][0]=t.size[0]+i,yo[2][1]=yo[3][1]=t.size[1]+i;for(const z of yo)t.toMap(z,z),z[0]=s.getColumnForX(z[0]),z[1]=s.getRowForY(z[1]);const R=[];let F=3;for(let z=0;z<4;z++){if(yo[z][1]===yo[F][1]){F=z;continue}const W=LE.create(yo[z],yo[F]);M=Math.min(W.ymin,M),T=Math.max(W.ymax,T),R[W.ymin]===void 0&&(R[W.ymin]=[]),R[W.ymin].push(W),F=z}if(M==null||T==null||T-M>100)return null;let V=[];for(d=M;d<T;){R[d]!=null&&(V=V.concat(R[d])),v=1/0,_=-1/0;for(let z=V.length-1;z>=0;z--){const W=V[z];v=Math.min(v,W.getLeftCol()),_=Math.max(_,W.getRightCol())}if(v=Math.floor(v),_=Math.floor(_),d>=s.first[1]&&d<=s.last[1])if(y)if(s.size[0]<s.worldSize[0]){const z=Math.floor(_/s.worldSize[0]);for(let W=Math.floor(v/s.worldSize[0]);W<=z;W++)A.push(new FE(d,Math.max(s.getFirstColumnForWorld(W),v),Math.min(s.getLastColumnForWorld(W),_)))}else A.push(new FE(d,v,_));else v>s.last[0]||_<s.first[0]||(v=Math.max(v,s.first[0]),_=Math.min(_,s.last[0]),A.push(new FE(d,v,_)));d+=1;for(let z=V.length-1;z>=0;z--){const W=V[z];W.ymax>=d?W.incrRow():V.splice(z,1)}}return l}getTileParentId(t){ir.set(t);const i=this._infoByLevel[ir.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ir,this._lodInfos[r],ir),ir.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){ir.set(i);const r=this._infoByLevel[ir.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(ir,s,ir);const y=s.denormalizeCol(ir.col,ir.world);for(const d of t.spans)if(d.row===ir.row&&d.colFrom<=y&&d.colTo>=y)return!0}if(s.resolution<r.resolution){const[y,d,v,_]=t.spans.reduce((V,z)=>(V[0]=Math.min(V[0],z.row),V[1]=Math.max(V[1],z.row),V[2]=Math.min(V[2],z.colFrom),V[3]=Math.max(V[3],z.colTo),V),[1/0,-1/0,1/0,-1/0]),M=r.denormalizeCol(ir.col,ir.world),T=s.getColumnForX(r.getXForColumn(M)),A=s.getRowForY(r.getYForRow(ir.row)),R=s.getColumnForX(r.getXForColumn(M+1))-1,F=s.getRowForY(r.getYForRow(ir.row+1))-1;return!(T>_||R<v||A>d||F<y)}const l=s.denormalizeCol(ir.col,ir.world);return t.spans.some(y=>y.row===ir.row&&y.colFrom<=l&&y.colTo>=l)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=Ks(this.tileInfo.spatialReference),l=-r*(s.valid[1]-s.valid[0]);t[0]+=l,t[2]+=l}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+vxe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}}function wxe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const NE=new Set,tx=[],C1=new Map,KU=[0,0];let Bu=class extends ot{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new JU({concurrency:e,process:(r,s)=>{const l=this._keyToItem.get(r);return t(l,{signal:s})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue=oi(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(_=>{const M=this._keyToItem.get(_),T=this.tileInfoView.getTileScale(M.key);C1.has(T)||(C1.set(T,[]),i=Math.max(T,i),r=Math.min(T,r)),C1.get(T).push(M.key),NE.add(T)});let s=this.state.scale;C1.has(s)||(wxe(tx,NE),tx.sort((_,M)=>_-M),s=tx.reduce((_,M)=>Math.abs(M-s)<Math.abs(_-s)?M:_,tx[0])),s=Math.min(s,i),s=Math.max(s,r);const l=C1.get(s),y=t.getClosestInfoForScale(s),d=y.getColumnForX(this.state.center[0]),v=y.getRowForY(this.state.center[1]);return l.sort((_,M)=>{const T=y.denormalizeCol(_.col,_.world),A=y.denormalizeCol(M.col,M.world);return Math.sqrt((d-T)*(d-T)+(v-_.row)*(v-_.row))-Math.sqrt((d-A)*(d-A)+(v-M.row)*(v-M.row))}),NE.clear(),C1.clear(),l[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(l=>{const y=this._keyToItem.get(l);t.getTileCoords(KU,y.key);const d=Du(KU,i);d<s&&(s=d,r=y.key)}),r.id}};m([x({constructOnly:!0})],Bu.prototype,"concurrency",void 0),m([x({constructOnly:!0})],Bu.prototype,"process",void 0),m([x()],Bu.prototype,"state",void 0),m([x({constructOnly:!0})],Bu.prototype,"strategy",void 0),m([x({constructOnly:!0})],Bu.prototype,"tileInfoView",void 0),m([x({readOnly:!0})],Bu.prototype,"updating",null),Bu=m([Y("esri.views.2d.tiling.TileQueue")],Bu);const zTe=Bu;class _xe{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];YU(this._tilePerId,t);for(let l=0;l<s.length;l++)if(s[l].id===t){s.splice(l,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let l=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&l>=0;)l!==t&&(s=this._pruneAroundCenterTile(s,i,r,l)),l--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const l=this._tileKeysPerLevel[s];if(!l||l.length===0)return t;const{size:y,origin:d}=this._tileInfoView.tileInfo,v=r*y[0],_=r*y[1],M=[0,0],T=[0,0];for(l.sort((A,R)=>(M[0]=d.x+v*(A.col+.5),M[1]=d.y-_*(A.row+.5),T[0]=d.x+v*(R.col+.5),T[1]=d.y-_*(R.row+.5),S1(M,i)-S1(T,i)));l.length>0;){const A=l.pop();if(this._removeTile(A.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),YU(this._tilePerId,t)}}function YU(e,t){e.delete(t)}const qd=new qs(0,0,0,0),Wo=new Map,A1=[],ix=[];class GTe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new _xe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(ix.length=0,A1.length=0,Wo.clear(),!s)return;const{minScale:l,maxScale:y}=this.tileInfoView.tileInfo,{spans:d,lodInfo:v}=s,{level:_}=v,{scale:M,center:T,resolution:A}=t.state,R=!t.stationary&&M>this._previousScale;if(this._previousScale=M,this.tiles.length=0,!i&&(M>l||M<y))return this.tiles.length=0,Wo.clear(),r.forEach(W=>{this.releaseTile(W)}),r.clear(),ix.length=0,A1.length=0,Wo.clear(),T1.pool.release(s),!0;r.forEach(W=>W.visible=!0);let F=0,V=0;if(d.length>0)for(const{row:W,colFrom:Z,colTo:Q}of d)for(let ee=Z;ee<=Q;ee++){F++;const re=qd.set(_,W,v.normalizeCol(ee),v.getWorldForColumn(ee)).id;if(r.has(re)){const ie=r.get(re);ie.isReady?(Wo.set(re,ie),V++):R||this._addParentTile(re,Wo)}else{let ie;if(this._tileCache&&this._tileCache.has(re)){if(ie=this._tileCache.pop(re),this.tileIndex.set(re,ie),ie.isReady){Wo.set(re,ie),V++;continue}}else ie=this.acquireTile(qd),this.tileIndex.set(re,ie);R||this._addParentTile(re,Wo)}}const z=V===F;r.forEach((W,Z)=>{if(qd.set(Z),Wo.has(Z))return;const Q=this.tileInfoView.intersects(s,qd),ee=this.cachePolicy==="purge"?qd.level!==_:qd.level>_;!Q||!R&&z?!ee&&Q||A1.push(Z):W.isReady?ee&&this.cachePolicy==="purge"&&this._hasReadyAncestor(qd,_)?A1.push(Z):ix.push(Z):ee&&A1.push(Z)});for(const W of ix){const Z=r.get(W);Z&&Z.isReady&&Wo.set(W,Z)}for(const W of A1){const Z=r.get(W);this._tileCache?this._tileCache.add(Z):this.releaseTile(Z),r.delete(W)}return Wo.forEach(W=>this.tiles.push(W)),r.forEach(W=>{Wo.has(W.key.id)||(W.visible=!1)}),this._tileCache&&this._tileCache.prune(_,T,A),T1.pool.release(s),Wo.clear(),z}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=Ro();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const l=Ro();if(this.tileInfoView.getTileBounds(l,s.key,!0),Fae(l,r))return!0}return!1}}function jE(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class XU extends ln{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){jE(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class xxe extends ln{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:l}=i,{view:y}=this,{mapViewNavigation:d}=y;switch(s){case"begin":{const{scale:v}=y;this._startScale=v,this._currentScale=v,this._previousDelta=l,d.begin();break}case"update":{if(this._previousDelta.y===l.y)return;this._previousDelta=l;const v=1.015**l.y,_=this._startScale*v,M=_/this._currentScale;d.setViewpointImmediate(M),this._currentScale=_;break}case"end":{const{constraints:v}=y,{effectiveLODs:_,snapToZoom:M}=v;if(!M||!_)return void d.end();const T=v.snapScale(this._currentScale),A=(l.y>0?Math.max(T,v.snapToPreviousScale(this._startScale)):Math.min(T,v.snapToNextScale(this._startScale)))/this._currentScale;d.zoom(A);break}}}}class rx{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,((r=(i=this._callbacks).condition)==null?void 0:r.call(i,this._currentCount,t))&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;((r=(i=this._callbacks).condition)==null?void 0:r.call(i,this._currentCount,t))&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;((r=(i=this._callbacks).condition)==null?void 0:r.call(i,this._currentCount,t))&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class Sxe extends ln{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new rx({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&jE(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Mxe extends ln{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new rx({start:(l,y)=>{s.rotate.begin(this._view,y.data),y.stopPropagation()},update:(l,y)=>{s.rotate.update(this._view,y.data),y.stopPropagation()},end:(l,y)=>{s.rotate.end(),y.stopPropagation()},condition:(l,y)=>l===1&&jE(y.data,this.pointerAction)}),this.registerIncoming("drag",r,l=>this._dragEventSeparator.handle(l))}}function Fa(e){let t=e*e;return e<0&&(t*=-1),t}function $xe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Exe(e,t,i){const r=i,s=e.state,l=e.device,y=t.tiltDirection==="forward-down"?1:-1,d=1;return l.deviceType==="standard"?(r.translation[0]=Fa(s.axes[0]),r.translation[1]=Fa(s.axes[1]),r.translation[2]=Fa(s.buttons[7])-Fa(s.buttons[6]),r.heading=Fa(s.axes[2]),r.tilt=Fa(s.axes[3])):l.deviceType==="spacemouse"&&(r.translation[0]=1.2*Fa(s.axes[0]),r.translation[1]=1.2*Fa(s.axes[1]),r.translation[2]=2*-Fa(s.axes[2]),r.heading=1.2*Fa(s.axes[5]),r.tilt=1.2*Fa(s.axes[3])),r.tilt*=y,Qs(r.translation,r.translation,d),r}function Ixe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class Txe extends ln{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Jr,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Ve(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=jf({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},fi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,$xe(this._transformation)):(this._currentDevice=t.data.device,Exe(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(Ixe(i))return;const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,l=Axe*s*t;X_(r,r,[i.translation[0]*l,-i.translation[1]*l]);const y=1+i.translation[2]*Pxe*t,d=this._view.constraints.rotationEnabled?-i.heading*Cxe*t:0,v=this._view.size,_=[v[0]/2,v[1]];AU(r,r,y,d,_,v);const M=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=M}}const Cxe=.06,Axe=.7,Pxe=6e-4;class Oxe extends ln{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class kxe extends ln{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var P1;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(P1||(P1={}));class Rxe extends ln{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=P1.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=P1.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:l}=this.view;let y=null;switch(s){case P1.IN:y=l.zoomIn();break;case P1.OUT:y=l.zoomOut();break;default:return}l.begin(),y.then(()=>l.end()),t.stopPropagation()}}const Fxe=.6;class Lxe extends ln{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:l}=t.data,y=1/Fxe**(1/60*l),d=i.zoom(y,[r,s]);d&&(this._canZoom=!1,d.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class Nxe extends ln{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new rx({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function QU(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>Vxe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function jxe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Dxe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Vxe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class zxe{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=l=>{this._connectGamepad(l.gamepad)},this._onDisconnectGamepad=l=>{const y=l.gamepad,d=y.index,v=this._inputDevices[d];v&&(this._emitGamepadEvent(y,QU(v),!1),this._inputDevices.splice(d,1),this._latestUpdate.splice(d,1),this._input.gamepad.devices.remove(v),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(l=>this._connectGamepad(l)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new cE(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=jf({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const l=this._inputDevices[s.index];if(!l)return;const y=this._latestUpdate[s.index],d=QU(l),v=r||Dxe(d);y&&(y.timestamp===s.timestamp||!y.active&&v||jxe(y.state,d))||this._emitGamepadEvent(s,d,!v)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&t(s)}}_emitGamepadEvent(t,i,r){const s=this._latestUpdate[t.index],l=s&&s.active;if(!l&&!r)return;const y=!l&&r?"start":l&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:y})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const eB=Me("trident"),tB=Me("edge"),Gxe=Me("chrome"),qxe=Me("ff"),Uxe=Me("safari"),O1={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class nx{constructor(t,i){this._input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new zxe(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=oi(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(DE[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&DE[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(DE[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?O1.touchNone:O1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?O1.touchPan:O1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(O1.touchNone),this._element.classList.remove(O1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=Yq(this._element,t);return nx.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=j2e(i);r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(eB||tB)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}eB||tB?r*=.7:Gxe||Uxe?r*=.6:qxe&&(r*=1.375);const s=100,l=Math.abs(r);if(l>s){const d=.02;r=r/l*200/(1+Math.exp(-d*(l-s)))}const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}nx.test={disableSubpixelCoordinates:!1};const DE={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Bxe extends ln{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function VE(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Hxe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function Wxe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Cn()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[Q,ee]=e,[re,ie]=[ee.x-Q.x,ee.y-Q.y];return t.radius=Math.sqrt(re*re+ie*ie)/2,t.center.x=(Q.x+ee.x)/2,t.center.y=(Q.y+ee.y)/2,t}let i=0,r=0;for(let Q=0;Q<e.length;Q++)i+=e[Q].x,r+=e[Q].y;i/=e.length,r/=e.length;const s=e.map(Q=>Q.x-i),l=e.map(Q=>Q.y-r);let y=0,d=0,v=0,_=0,M=0,T=0,A=0;for(let Q=0;Q<s.length;Q++){const ee=s[Q],re=l[Q],ie=ee*ee,he=re*re;y+=ie,d+=he,v+=ee*re,_+=ie*ee,M+=he*re,T+=ee*he,A+=re*ie}const R=.5*(_+T),F=.5*(M+A),V=y*d-v*v,z=(R*d-F*v)/V,W=(y*F-v*R)/V,Z=Cn(z+i,W+r);return{radius:Math.sqrt(z*z+W*W+(y+d)/e.length),center:Z}}function Ud(e){const{native:t}=e,{pointerId:i,button:r,pointerType:s}=t;return s==="mouse"?`${i}:${r}`:`${s}`}const Jo={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class Jxe extends ln{constructor(t=Jo.maximumDoubleClickDelay,i=Jo.maximumDoubleClickDistance,r=Jo.maximumDoubleTouchDelay,s=Jo.maximumDoubleTouchDistance,l=Uy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Tr(t.doubleClickTimer))}get hasPendingInputs(){return ky(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=Tr(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:i,pointerType:r,button:s}=t.native;return r==="mouse"?`${i}:${s}`:`${r}`}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,s=this._getPointerId(i);if(!this._pointerState.has(s))return void this._startClick(t);const l=this._pointerState.get(s),{data:y,modifiers:d}=l.event,v=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;VE(y,i)>v?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),l.pointerDownCount===2&&this._doubleClick.emit(y,void 0,d))}_handlePointerDown(t){const i=Ud(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,s=Ud(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),l),d=1;this._pointerState.set(s,{event:t,doubleClickTimer:y,pointerDownCount:d}),this.refreshHasPendingInputs()}}class Zxe extends ln{constructor(t=Jo.maximumDoubleClickDelay,i=Jo.maximumDoubleClickDistance,r=Jo.maximumDoubleTouchDelay,s=Jo.maximumDoubleTouchDistance,l=Uy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=l,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Cn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new rx({start:(y,d)=>this._dragStart(y,d),update:(y,d)=>this._dragUpdate(d),end:(y,d)=>this._dragEnd(d)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Tr(t.doubleTapTimeout)})}get hasPendingInputs(){return ky(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Tr(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:s,buttons:l,pointer:y,pointers:d,pointerType:v,timestamp:_}=r;return{action:t,delta:i,button:s,buttons:l,pointer:y,pointers:d,pointerType:v,timestamp:_}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:l}=r;this._dragStartCenter=l;const y=this._createDoubleTapDragData("begin",Cn(0,0),r);this._doubleTapDrag.emit(y,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,l=Cn(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",l,i);this._doubleTapDrag.emit(y,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,l=Cn(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",l,i);this._doubleTapDrag.emit(y,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=Ud(i),s=this._pointerState.get(r),{pointerType:l}=i.native;if(s){const y=l==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),VE(s.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=Ud(i),l=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(s),l);this._pointerState.set(s,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}}class Kxe extends ln{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:Yxe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=sx(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const l=ox(s,iB(this._activePointerMap));s.initialAngle=l,s.lastAngle=l,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=sx(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=sx(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=ox(r,i)-t,r.lastAngle=ox(r,i)-t})}_emitEvent(t,i,r){const s=sx(this._activePointerMap);this._drag.emit(this._createPayload(t,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=Sr(t.timestamp);this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,Sr(t.timestamp))))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=Sr(t.timestamp);switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}}function iB(e){const t=[];return e.forEach(i=>{t.push(Cn(i.event.x,i.event.y))}),Wxe(t)}function sx(e){const t=iB(e);let i=0;return e.forEach(r=>{let s=ox(r,t),l=s-r.lastAngle;for(;l>Math.PI;)l-=2*Math.PI;for(;l<-Math.PI;)l+=2*Math.PI;s=r.lastAngle+l,r.lastAngle=s,i+=s-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Yxe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function ox(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var rB;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(rB||(rB={}));class Xxe extends ln{constructor(t=Jo.maximumDoubleClickDelay,i=Jo.maximumDoubleClickDistance,r=Jo.maximumDoubleTouchDelay,s=Jo.maximumDoubleTouchDistance,l=Uy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=Ud(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=Ud(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const l=s.immediateDoubleClick;if(l){l.timeoutHandle.remove();const y=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;VE(l,t.data)>y?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,l.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=Ud(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const $v={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class Qxe extends ln{constructor(t=$v.maximumClickDelay,i=$v.movementUntilMouseDrag,r=$v.movementUntilPenDrag,s=$v.movementUntilTouchDrag,l=$v.holdDelay,y=Uy){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=l,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",d=>{this._handlePointerLoss(d,"pointer-up")}),this.registerIncoming("pointer-capture-lost",d=>{this._handlePointerLoss(d,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",d=>{this._handlePointerLoss(d,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Tr(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const y=this._pointerState.get(r);if(y){if(!y.isDragging){const d=y.previousEvent;this._pointerHold.emit(d,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const l={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,l),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):Hxe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,l=this._pointerState.get(s);l&&(l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",l,i==="pointer-up"?r:l.previousEvent),void 0,l.modifiers):i==="pointer-up"&&l.downButton===r.native.button&&t.timestamp-l.startTimestamp<=this._maximumClickDelay&&!l.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const ax={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Bd=class extends ot{constructor(){super(...arguments),this._handles=new Jr}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([no(()=>!e(),()=>this._disconnect()),no(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e,t;return(t=(e=this._inputManager)==null?void 0:e.multiTouchActive)!=null?t:!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=oi(this._inputManager)}_connect(){const e=this.view.surface,t=new nx(e,this.view.input),i=[new Xxe,new Qxe,new Jxe,new Kxe(this.view.navigation),new Zxe],r=new Cl({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new Bxe],rt.INTERNAL),r.installHandlers("navigation",[new Nxe(this.view),new Txe(this.view),new Lxe(this.view),new XU(this.view),new XU(this.view,[ax.counter]),new Sxe(this.view,"primary"),new Oxe(this.view,ax.pan),new Rxe(this.view,ax.zoom),new kxe(this.view,ax.rotate),new Mxe(this.view,"secondary"),new xxe(this.view,"touch")],rt.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,Ve(()=>{var s,l;return(l=(s=this.view)==null?void 0:s.navigation)==null?void 0:l.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},fi)}get test(){return{inputManager:this._inputManager}}};m([x()],Bd.prototype,"view",void 0),m([x()],Bd.prototype,"latestPointerType",null),m([x()],Bd.prototype,"latestPointerLocation",null),m([x()],Bd.prototype,"multiTouchActive",null),Bd=m([Y("esri.views.2d.input.MapViewInputManager")],Bd);const e5e=Bd;var nB,sB,oB,aB={exports:{}};nB=aB,sB=function(){function e(s,l,y,d,v){t(s,l,y||0,d||s.length-1,v||r)}function t(s,l,y,d,v){for(;d>y;){if(d-y>600){var _=d-y+1,M=l-y+1,T=Math.log(_),A=.5*Math.exp(2*T/3),R=.5*Math.sqrt(T*A*(_-A)/_)*(M-_/2<0?-1:1);t(s,l,Math.max(y,Math.floor(l-M*A/_+R)),Math.min(d,Math.floor(l+(_-M)*A/_+R)),v)}var F=s[l],V=y,z=d;for(i(s,y,l),v(s[d],F)>0&&i(s,y,d);V<z;){for(i(s,V,z),V++,z--;v(s[V],F)<0;)V++;for(;v(s[z],F)>0;)z--}v(s[y],F)===0?i(s,y,z):i(s,++z,d),z<=l&&(y=z+1),l<=z&&(d=z-1)}}function i(s,l,y){var d=s[l];s[l]=s[y],s[y]=d}function r(s,l){return s<l?-1:s>l?1:0}return e},(oB=sB())!==void 0&&(nB.exports=oB);const t5e=aB.exports;function lx(e,t){if(!(this instanceof lx))return new lx(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function i5e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function k1(e,t){Ev(e,0,e.children.length,t,e)}function Ev(e,t,i,r,s){s||(s=R1(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var l,y=t;y<i;y++)l=e.children[y],Iv(s,e.leaf?r(l):l);return s}function Iv(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function lB(e,t){return e.minX-t.minX}function uB(e,t){return e.minY-t.minY}function zE(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ux(e){return e.maxX-e.minX+(e.maxY-e.minY)}function r5e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function n5e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),l=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,l-r)}function GE(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function cx(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function R1(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cB(e,t,i,r,s){for(var l,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=r||(l=t+Math.ceil((i-t)/r/2)*r,t5e(e,l,t,i,s),y.push(t,l,l,i))}lx.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!cx(e,t))return i;for(var s,l,y,d,v=[];t;){for(s=0,l=t.children.length;s<l;s++)y=t.children[s],cx(e,d=t.leaf?r(y):y)&&(t.leaf?i.push(y):GE(e,d)?this._all(y,i):v.push(y));t=v.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!cx(e,t))return!1;for(var r,s,l,y,d=[];t;){for(r=0,s=t.children.length;r<s;r++)if(l=t.children[r],cx(e,y=t.leaf?i(l):l)){if(t.leaf||GE(e,y))return!0;d.push(l)}t=d.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=R1([]),this},remove:function(e,t){if(!e)return this;for(var i,r,s,l,y=this.data,d=this.toBBox(e),v=[],_=[];y||v.length;){if(y||(y=v.pop(),r=v[v.length-1],i=_.pop(),l=!0),y.leaf&&(s=i5e(e,y.children,t))!==-1)return y.children.splice(s,1),v.push(y),this._condense(v),this;l||y.leaf||!GE(y,d)?r?(i++,y=r.children[i],l=!1):y=null:(v.push(y),_.push(i),i=0,r=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:lB,compareMinY:uB,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,l=i-t+1,y=this._maxEntries;if(l<=y)return k1(s=R1(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(l)/Math.log(y)),y=Math.ceil(l/Math.pow(y,r-1))),(s=R1([])).leaf=!1,s.height=r;var d,v,_,M,T=Math.ceil(l/y),A=T*Math.ceil(Math.sqrt(y));for(cB(e,t,i,A,this.compareMinX),d=t;d<=i;d+=A)for(cB(e,d,_=Math.min(d+A-1,i),T,this.compareMinY),v=d;v<=_;v+=T)M=Math.min(v+T-1,_),s.children.push(this._build(e,v,M,r-1));return k1(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,l,y,d,v,_,M,T;r.push(t),!t.leaf&&r.length-1!==i;){for(M=T=1/0,s=0,l=t.children.length;s<l;s++)v=zE(y=t.children[s]),(_=r5e(e,y)-v)<T?(T=_,M=v<M?v:M,d=y):_===T&&v<M&&(M=v,d=y);t=d||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),l=[],y=this._chooseSubtree(s,this.data,t,l);for(y.children.push(e),Iv(y,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var l=this._chooseSplitIndex(i,s,r),y=R1(i.children.splice(l,i.children.length-l));y.height=i.height,y.leaf=i.leaf,k1(i,this.toBBox),k1(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=R1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,k1(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,l,y,d,v,_,M;for(v=_=1/0,r=t;r<=i-t;r++)y=n5e(s=Ev(e,0,r,this.toBBox),l=Ev(e,r,i,this.toBBox)),d=zE(s)+zE(l),y<v?(v=y,M=r,_=d<_?d:_):y===v&&d<_&&(_=d,M=r);return M},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:lB,s=e.leaf?this.compareMinY:uB;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,l,y=this.toBBox,d=Ev(e,0,t,y),v=Ev(e,i-t,i,y),_=ux(d)+ux(v);for(s=t;s<i-t;s++)l=e.children[s],Iv(d,e.leaf?y(l):l),_+=ux(d);for(s=i-t-1;s>=t;s--)l=e.children[s],Iv(v,e.leaf?y(l):l),_+=ux(v);return _},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Iv(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():k1(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class hx{constructor(t,i){this.key=new qs(0,0,0,0),this.bounds=Ro(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return ai.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=ns.acquire();for(let r=0;r<t.length;r++)i[r]=new hx(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return JD.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Hd={added:[],removed:[]},qE=new Set,s5e=new qs(0,0,0,0);class o5e extends fn{constructor(t){super(),this._tiles=new Map,this._index=lx(9,Me("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new hx(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:l}=s;if(r.length>0)for(const{row:y,colFrom:d,colTo:v}of r)for(let _=d;_<=v;_++){const M=s5e.set(l,y,s.normalizeCol(_),s.getWorldForColumn(_)).id;if(qE.add(M),!this.has(M)){const T=new hx(this.tileScheme,M);this._tiles.set(M,T),this._index.insert(T),this.tiles.push(T),Hd.added.push(T)}}for(let y=this.tiles.length-1;y>=0;y--){const d=this.tiles[y];qE.has(d.id)||(this._tiles.delete(d.id),this.tiles.splice(y,1),this._index.remove(d),Hd.removed.push(d))}(Hd.added.length||Hd.removed.length)&&this.emit("update",Hd),T1.pool.release(i),qE.clear(),Hd.added.length=0,Hd.removed.length=0}}let a5e=0,Dh=class extends ot{constructor(){super(...arguments),this.color=new mt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return a5e++}};m([x({readOnly:!0})],Dh.prototype,"version",null),m([x({type:mt})],Dh.prototype,"color",void 0),m([x({type:mt})],Dh.prototype,"haloColor",void 0),m([x()],Dh.prototype,"haloOpacity",void 0),m([x()],Dh.prototype,"fillOpacity",void 0),Dh=m([Y("esri.views.2d.support.HighlightOptions")],Dh);const hB=Dh,l5e=e=>e.includes("Brush");class pB{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),l5e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function u5e(e,t,i,r,s,l,y,d){let v;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?v=[e.width,e.height]:e.width==null&&e.height!=null?v=[e.height,e.height]:e.width!=null&&e.height==null?v=[e.width,e.width]:e.width==null&&e.height==null&&(v=null);const _=i[0]-(r.left+r.right),M=i[1]-(r.top+r.bottom);let T,A,R=e.area||{x:0,y:0,width:_,height:M};if(v){const F=_/M,V=v[0]/v[1];if(V>F){const z=R.width/V;R={x:R.x,y:Math.round(R.y+(R.height-z)/2),width:R.width,height:Math.round(z)}}else{const z=R.height*V;R={x:Math.round(R.x+(R.width-z)/2),y:R.y,width:Math.round(z),height:R.height}}}else v=[R.width,R.height];return v[0]>R.width?(T=Math.min(v[0]/R.width,t),A=v[0]/R.width/T):(T=1,A=v[0]/R.width),{resolutionScale:T,cropArea:{x:Math.round((R.x+r.left)*T),y:Math.round((R.y+r.top)*T),width:Math.round(R.width*T),height:Math.round(R.height*T)},outputScale:A,format:s,quality:l,children:y,rotation:d}}let Tv=null,px=!0;function qTe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(px)try{return new ImageData(e,t)}catch{px=!1}return dB(e,t,i)}function UTe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(px)try{return new ImageData(e,t,i)}catch{px=!1}const s=dB(t,i,r);return s.data.set(e,0),s}function c5e(){return Tv||(Tv=document.createElement("canvas"),Tv.width=1,Tv.height=1),Tv}function dB(e,t,i){return i||(i=c5e()),i.getContext("2d").createImageData(e,t)}function h5e(e,t,i){const{ctx:r,canvas:s}=fB(e,i),l=r.getImageData(0,0,e.width,e.height),y=f5e(s,t);return yB(s),{dataUrl:y,data:l}}function p5e(e,t){const{ctx:i,canvas:r}=fB(e,t),s=i.getImageData(0,0,e.width,e.height);return yB(r),s}function fB(e,t){const i=d5e();t.premultipliedAlpha&&b5e(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&v5e(r),{ctx:r,canvas:i}}function yB(e){e.width=0,e.height=0}function d5e(){return ae(UE)&&(UE=document.createElement("canvas")),UE}let UE=null;function f5e(e,t){const i=w5e[t.format],r=t.quality/100;return e.toDataURL(i,r)}function y5e(e,t){const i=m5e(e),r=x5e[i];return{format:i,quality:Tn(t!=null?t:r,0,100)}}function g5e(e,t){return t/Math.max(e[0],e[1])}function BTe(e,t,i,r=0,s=0,l=e.width-r,y=e.height-s,d=!1){const{data:v}=e,{width:_,height:M,data:T}=t,A=l/_,R=y/M,F=Math.ceil(A/2),V=Math.ceil(R/2),z=e.width;for(let W=0;W<M;W++)for(let Z=0;Z<_;Z++){const Q=4*(Z+(d?M-W-1:W)*_);let ee=0,re=0,ie=0,he=0,be=0,we=0;const xe=(W+.5)*R;for(let $e=Math.floor(W*R);$e<(W+1)*R;$e++){const je=Math.abs(xe-($e+.5))/V,it=(Z+.5)*A,Ye=je*je;for(let Lt=Math.floor(Z*A);Lt<(Z+1)*A;Lt++){const Dt=Math.abs(it-(Lt+.5))/F,ft=Math.sqrt(Ye+Dt*Dt);if(ft>=1)continue;let Ze=2*ft*ft*ft-3*ft*ft+1;const Ct=4*(r+Lt+(s+$e)*z);we+=Ze*v[Ct+3],re+=Ze,!i&&v[Ct+3]<255&&(Ze=Ze*v[Ct+3]/255),ie+=Ze*v[Ct],he+=Ze*v[Ct+1],be+=Ze*v[Ct+2],ee+=Ze}}T[Q]=ie/ee,T[Q+1]=he/ee,T[Q+2]=be/ee,T[Q+3]=we/re}return t}function m5e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return _5e}}function v5e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function b5e(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const l=255/s;t[r+0]=t[r+0]*l,t[r+1]=t[r+1]*l,t[r+2]=t[r+2]*l}}}const w5e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},gB=98,_5e="png",x5e={png:100,jpg:gB,jpeg:gB};var Or;function HTe(e,t,i={}){const r=mB(e);for(;r.length>1;){const s=dx(t,r.shift(),i);if(q(s))return s}return S5e(t,r.shift(),i)}function mB(e){const t=Me("esri-force-webgl");if(t===Or.WEBGL1||t===Or.WEBGL2)return[t];switch(e){case"2d":return Me("mac")&&Me("chrome")?[Or.WEBGL1,Or.WEBGL2]:[Or.WEBGL2,Or.WEBGL1];case"3d":return[Or.WEBGL2,Or.WEBGL1]}}function S5e(e,t,i={}){if(!window.WebGLRenderingContext)return vB(e,M5e),null;const r=dx(e,t,i);return ae(r)&&vB(e,$5e),r}function dx(e,t,i={}){const r=t===Or.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const l of r){try{s=e.getContext(l,i)}catch{}if(s)break}return s}function vB(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Or||(Or={}));const M5e='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',$5e=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let BE,HE;function E5e(e){const t=mB(e);for(;t.length>1;){const i=bB(t.shift());if(i.available)return i}return bB(t.shift())}function bB(e){switch(e){case Or.WEBGL1:return I5e();case Or.WEBGL2:return T5e()}}function I5e(){return BE||(BE=P5e()),BE}function T5e(){return HE||(HE=O5e()),HE}class wB{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class C5e extends wB{constructor(){super(...arguments),this.type=Or.WEBGL1}}class A5e extends wB{constructor(){super(...arguments),this.type=Or.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function _B(e,t){var l;if(e===Or.WEBGL1&&typeof WebGLRenderingContext=="undefined"||e===Or.WEBGL2&&typeof WebGL2RenderingContext=="undefined")return null;const i=document.createElement("canvas");if(!i)return null;let r=dx(i,e,{failIfMajorPerformanceCaveat:!0});if(ae(r)&&(r=dx(i,e),q(r)&&(t.majorPerformanceCaveat=!0)),ae(r))return r;if(e===Or.WEBGL1){const y=(l=r.getParameter(r.VERSION))==null?void 0:l.match(/^WebGL\s+([\d.]*)/);if(y){const d=parseFloat(y[1]);t.available=d>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),r}function P5e(){const e=new C5e,t=_B(Or.WEBGL1,e);return ae(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function O5e(){const e=new A5e,t=_B(Or.WEBGL2,e);return ae(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function k5e(e){const t=E5e(e);if(!t.available)return new fe("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new fe("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new fe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new fe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Or.WEBGL1){if(!t.supportsElementIndexUint)return new fe("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new fe("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new fe("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function R5e(e){return e&&"nodeType"in e}function F5e(e){return e&&typeof e.render=="function"}const xB={component:"esri-component"};let Wd=class extends ot{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(xB.component),t&&t.classList.remove(xB.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||R5e(e)?(this._set("widget",null),IM(e)):(F5e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};m([x({dependsOn:[]})],Wd.prototype,"id",null),m([x()],Wd.prototype,"node",null),m([ri("node")],Wd.prototype,"castNode",null),m([x({readOnly:!0})],Wd.prototype,"widget",void 0),Wd=m([Y("esri.views.ui.Component")],Wd);const fx=Wd,L5e={left:0,top:0,bottom:0,right:0},SB={bottom:30,top:15,right:15,left:15},WE="manual",fs={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function N5e(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function JE(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function ZE(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Hu=class extends fn.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Jr,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&ZE(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&ZE(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([Ve(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,fi),Ve(()=>this.padding,this._applyUIPadding,fi)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(fs.ui),X0e(e),this._attachContainers(e)),t&&(t.classList.remove(fs.ui),ZE(t,{top:"",bottom:"",left:"",right:""}),XL(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:te(te({},SB),e)}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(l=>this.add(l,t));const s=JE(e);s&&({index:i,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const s=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||WE)===WE?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(fs.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(l=>this.move(l,t)),!e)return;let i;const r=JE(e)||JE(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof fx||(e=new fx({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof fx?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||L5e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(fs.innerContainer),e.classList.add(fs.cornerContainer);const t=document.createElement("div");t.classList.add(fs.innerContainer),t.classList.add(fs.manualContainer);const i=document.createElement("div");i.classList.add(fs.topLeft),i.classList.add(fs.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(fs.topRight),r.classList.add(fs.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(fs.bottomLeft),s.classList.add(fs.corner),e.appendChild(s);const l=document.createElement("div");l.classList.add(fs.bottomRight),l.classList.add(fs.corner),e.appendChild(l),this._innerContainer=e,this._manualContainer=t;const y=Sl();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":l,"top-leading":y?r:i,"top-trailing":y?i:r,"bottom-leading":y?l:s,"bottom-trailing":y?s:l},this._positionNameToContainerLookup=te({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||WE,r=e.index,s=this._positionNameToContainerLookup[i],l=r>-1;if(N5e(t.widget)&&t.widget.startup(),!l)return void s.appendChild(t.node);const y=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?QL(t.node,s.firstChild):s.appendChild(t.node));r>=y.length?s.appendChild(t.node):QL(t.node,y[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};m([x()],Hu.prototype,"container",null),m([x()],Hu.prototype,"height",null),m([x({value:SB})],Hu.prototype,"padding",null),m([ri("padding")],Hu.prototype,"castPadding",null),m([x()],Hu.prototype,"view",void 0),m([x()],Hu.prototype,"width",null),Hu=m([Y("esri.views.ui.UI")],Hu);const j5e=Hu;function MB(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function D5e(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function yx(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function V5e(e){return e.type==="bing-maps"}const Vh=[];let F1=class extends ld{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new gt,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>Ve(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([hs(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),no(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");Vh.length=0,e?(e.forEach(t=>{var s;if(t.suspended||!((s=t.layer)==null?void 0:s.attributionVisible))return;const i=t.layer;if(MB(i,"user"))return void yx(Vh,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const l=this._fetchedAttributionData.get(t);return void(l?yx(Vh,t,this._getDynamicAttribution(l,this.view,i)):MB(i)&&yx(Vh,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");yx(Vh,t,r||i.copyright)}),D5e(this.items,Vh)&&(this.items.removeAll(),this.items.addMany(Vh)),Vh.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await j2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,V5e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const l=i[s],y=l.coverageAreas;if(!y)return;for(const d of y){const v=d.bbox,_=d.zoomMin-(t&&d.zoomMin?1:0),M=d.zoomMax-(t&&d.zoomMax?1:0),T={xmin:v[1],ymin:v[0],xmax:v[3],ymax:v[2],spatialReference:At.WGS84},A={extent:ru(T),attribution:l.attribution||"",score:d.score!=null?d.score:100,id:s};for(let R=_;R<=M;R++)r[R]=r[R]||[],r[R].push(A)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:s}=t;let l=i.tileInfo.scaleToZoom(s);if(l=Math.min(e.maxKey,Math.round(l)),!r||l==null||l<=-1)return"";const y=e[l],d=Aw(r.center.clone().normalize(),t.spatialReference),v={};return y?y.filter(_=>{const M=!v[_.id]&&d&&Ow(_.extent,d);return M&&(v[_.id]=!0),M}).sort((_,M)=>M.score-_.score||_.objectId-M.objectId).map(_=>_.attribution).join(", "):""}};m([x({readOnly:!0,type:gt})],F1.prototype,"items",void 0),m([x({readOnly:!0})],F1.prototype,"state",null),m([x()],F1.prototype,"view",void 0),F1=m([Y("esri.widgets.Attribution.AttributionViewModel")],F1);const $B=F1,zh={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ys=class extends zn{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=zh.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new $B}initialize(){this.addHandles(hs(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[zh.open]:this._isOpen};return ge("div",{bind:this,class:this.classes(zh.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return ge("div",{class:zh.poweredBy},"Powered by"," ",ge("a",{class:zh.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,s={[zh.sourcesOpen]:e,[zh.interactive]:t};return ge("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(zh.sources,s),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,l=s>r,y=this._attributionTextOverflowed!==l;if(this._attributionTextOverflowed=l,y&&(t=!0),this._isOpen){const d=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,d&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};m([x()],ys.prototype,"_isOpen",void 0),m([x()],ys.prototype,"_isInteractive",null),m([x()],ys.prototype,"_attributionTextOverflowed",void 0),m([x()],ys.prototype,"_prevSourceNodeHeight",void 0),m([x({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ys.prototype,"attributionText",null),m([x()],ys.prototype,"iconClass",void 0),m([x()],ys.prototype,"itemDelimiter",void 0),m([x()],ys.prototype,"label",null),m([x(),Gn("esri/widgets/Attribution/t9n/Attribution")],ys.prototype,"messages",void 0),m([x()],ys.prototype,"view",null),m([x({type:$B})],ys.prototype,"viewModel",void 0),m([Vo()],ys.prototype,"_toggleState",null),ys=m([Y("esri.widgets.Attribution")],ys);const z5e=ys,G5e="esri.widgets.CompassViewModel";let Jd=class extends Eq(ot){constructor(e){super(e),this._handles=new Jr,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Ve(()=>this.view,this._updateRotationWatcher,fi))}destroy(){this._handles=Tr(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Ve(()=>e==null?void 0:e.rotation,this._updateForRotation,fi):Ve(()=>e==null?void 0:e.camera,this._updateForCamera,fi))}};m([x({readOnly:!0})],Jd.prototype,"canShowNorth",null),m([x()],Jd.prototype,"orientation",void 0),m([x({readOnly:!0})],Jd.prototype,"state",null),m([x()],Jd.prototype,"view",void 0),Jd=m([Y(G5e)],Jd);const EB=Jd,Gh={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let kl=class extends zn{constructor(e,t){super(e,t),this.iconClass=Gh.widgetIcon,this.messages=null,this.viewModel=new EB}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",s=i?-1:0,l={[Gh.disabled]:i,[Gh.interactive]:!i},y={[Gh.northIcon]:r,[Gh.rotationIcon]:!r},{messages:d}=this;return ge("div",{bind:this,class:this.classes(Gh.base,l),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":d.reset,title:d.reset},ge("span",{"aria-hidden":"true",class:this.classes(Gh.icon,y),styles:this._toRotationTransform(e)}),ge("span",{class:Gh.text},d.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};m([x()],kl.prototype,"goToOverride",null),m([x()],kl.prototype,"iconClass",void 0),m([x()],kl.prototype,"label",null),m([x(),Gn("esri/widgets/Compass/t9n/Compass")],kl.prototype,"messages",void 0),m([x()],kl.prototype,"view",null),m([x({type:EB})],kl.prototype,"viewModel",void 0),m([Vo()],kl.prototype,"_reset",null),kl=m([Y("esri.widgets.Compass")],kl);const q5e=kl;let L1=class extends ot{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(no(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};m([x({readOnly:!0})],L1.prototype,"state",null),m([x()],L1.prototype,"navigationMode",void 0),m([x()],L1.prototype,"view",void 0),L1=m([Y("esri.widgets.NavigationToggleViewModel")],L1);const IB=L1,Zo={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Rl=class extends zn{constructor(e,t){super(e,t),this.iconClass=Zo.widgetIcon,this.messages=null,this.viewModel=new IB}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Zo.disabled]:e,[Zo.isLayoutHorizontal]:this.layout==="horizontal"},r={[Zo.activeButton]:t},s={[Zo.activeButton]:!t},l=e?-1:0,y=this.messages.toggle;return ge("div",{bind:this,class:this.classes(Zo.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:l,"aria-label":y,title:y},ge("div",{class:this.classes(Zo.button,Zo.panButton,r)},ge("span",{class:Zo.panIcon})),ge("div",{class:this.classes(Zo.button,Zo.rotateButton,s)},ge("span",{class:Zo.rotationIcon})))}_toggle(){this.toggle()}};m([x()],Rl.prototype,"iconClass",void 0),m([x()],Rl.prototype,"label",null),m([x({value:"vertical"})],Rl.prototype,"layout",null),m([x(),Gn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Rl.prototype,"messages",void 0),m([x()],Rl.prototype,"view",null),m([x({type:IB})],Rl.prototype,"viewModel",void 0),m([Vo()],Rl.prototype,"_toggle",null),Rl=m([Y("esri.widgets.NavigationToggle")],Rl);const U5e=Rl,Cv={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let qh=class extends zn{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Cv.disabled]:!this.enabled,[Cv.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return ge("div",{bind:this,class:this.classes(Cv.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},ge("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Cv.icon,i)}),ge("span",{class:Cv.iconText},this.title))}_triggerAction(){this.action.call(this)}};m([x()],qh.prototype,"action",void 0),m([x()],qh.prototype,"enabled",void 0),m([x()],qh.prototype,"iconClass",void 0),m([x()],qh.prototype,"title",void 0),m([Vo()],qh.prototype,"_triggerAction",null),qh=m([Y("esri.widgets.IconButton")],qh);const TB=qh;let N1=class extends ot{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};m([x({readOnly:!0})],N1.prototype,"canZoomIn",null),m([x({readOnly:!0})],N1.prototype,"canZoomOut",null),m([x()],N1.prototype,"view",void 0),N1=m([Y("esri.widgets.Zoom.ZoomConditions2D")],N1);const B5e=N1;let j1=class extends ot{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};m([x({readOnly:!0})],j1.prototype,"canZoomIn",null),m([x({readOnly:!0})],j1.prototype,"canZoomOut",null),m([x()],j1.prototype,"view",void 0),j1=m([Y("esri.widgets.Zoom.ZoomConditions3D")],j1);const H5e=j1;let Uh=class extends ot{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return q(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return q(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return((e=this.view)==null?void 0:e.ready)?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new B5e({view:e}):e.type==="3d"&&(this._zoomConditions=new H5e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Xl(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Xl(e.goTo({zoomFactor:.5}))}};m([x()],Uh.prototype,"_zoomConditions",void 0),m([x()],Uh.prototype,"canZoomIn",null),m([x()],Uh.prototype,"canZoomOut",null),m([x({readOnly:!0})],Uh.prototype,"state",null),m([x()],Uh.prototype,"view",null),Uh=m([Y("esri.widgets.Zoom.ZoomViewModel")],Uh);const CB=Uh,Av={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Wu=class extends zn{constructor(e,t){super(e,t),this.iconClass=Av.widgetIcon,this.messages=null,this.viewModel=new CB}initialize(){this._zoomInButton=new TB({action:this.zoomIn.bind(this),iconClass:Av.zoomInIcon}),this._zoomOutButton=new TB({action:this.zoomOut.bind(this),iconClass:Av.zoomOutIcon})}destroy(){this._zoomInButton=oi(this._zoomInButton),this._zoomOutButton=oi(this._zoomOutButton)}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[Av.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=e;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=r;const{zoomIn:s,zoomOut:l}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=l,ge("div",{class:this.classes(Av.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};m([x()],Wu.prototype,"iconClass",void 0),m([x()],Wu.prototype,"label",null),m([x({value:"vertical"})],Wu.prototype,"layout",null),m([x(),Gn("esri/widgets/Zoom/t9n/Zoom")],Wu.prototype,"messages",void 0),m([x()],Wu.prototype,"view",null),m([x({type:CB})],Wu.prototype,"viewModel",void 0),Wu=m([Y("esri.widgets.Zoom")],Wu);const W5e=Wu;function J5e(e){return e&&e.view!==void 0}let gx=class extends j5e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([Ve(()=>this.components,this._componentsWatcher.bind(this),fi),Ve(()=>this.view,this._updateViewAwareWidgets.bind(this),fi)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;J5e(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new fx({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new z5e({view:this.view})}_createCompass(){return new q5e({view:this.view})}_createNavigationToggle(){return new U5e({view:this.view})}_createZoom(){return new W5e({view:this.view})}};m([x()],gx.prototype,"components",void 0),gx=m([Y("esri.views.ui.DefaultUI")],gx);const Z5e=gx;let mx=class extends Z5e{constructor(e){super(e),this.components=["attribution","zoom"]}};m([x()],mx.prototype,"components",void 0),mx=m([Y("esri.views.ui.2d.DefaultUI2D")],mx);const AB=mx;var KE;let vx=KE=class extends Ie{constructor(e){super(e),this.color=new mt([0,0,0,1])}clone(){return new KE(me({color:this.color}))}};m([x({type:mt,json:{write:!0}})],vx.prototype,"color",void 0),vx=KE=m([Y("esri.webmap.background.ColorBackground")],vx);const K5e=vx;let PB,OB,kB,RB,FB,LB;async function Y5e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:l}]=await Promise.all([import("./webglDeps.fa2a2dfe.js"),import("./mapViewDeps.1596d6b5.js")]);OB=e,kB=t,RB=i,FB=r,LB=s,PB=l}const NB=160;function X5e(e){return e&&e.declaredClass==="esri.Viewpoint"}let Ot=class extends _pe(l3e(u3e(O3e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new w0({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new I_e(this),this._pePromise=null,this.floors=new gt,this.highlightOptions=new hB,this.inputManager=new e5e({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new pB,this.type="2d",this.ui=new AB,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new NU,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([Ve(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(NB)},ml),this.on("resize",t=>this._resizeHandler(t)),Ve(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),Fce()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new o5e(this.featuresTilingScheme)}get initialExtentRequired(){var y;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let l=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)==null?void 0:y.viewpoint))&&!s&&((t==null?void 0:t.effectiveLODs)||(l=-1),(!i||e===0&&l===-1)&&(!r||!q(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!sh()||(this._pePromise||(this._pePromise=oh().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=Wt(e.targetGeometry);return!!wl(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var r;e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return Q5e(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new dt({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Ae.getLogger(this.declaredClass).error(new fe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;SE(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Ve(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},ml),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ae.getLogger(this.declaredClass).error(new fe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Ae.getLogger(this.declaredClass).error(new fe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;h_e(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;S_e(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;CU(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,i,r;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(Me("esri-2d-log-updating")){const s=this.allLayerViews.reduce((l,y)=>De(te({},l),{[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new fe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):ae(e.targetGeometry)&&(i=new fe("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new fe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void Ae.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new gl({targetGeometry:new dt,scale:0,rotation:0});ka(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;CU(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),em(()=>this.ready,t).then(()=>{const i=te({animate:!0},t),r=l_e(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});Ae.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=Qq(e)?Xq(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,l=null,y=null;(t==null?void 0:t.include)?DB(t.include,jB(this,M=>r.add(M),M=>{l||(l=new Set),l.add(M)},M=>r.add(M),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),(t==null?void 0:t.exclude)&&DB(t.exclude,jB(this,M=>r.delete(M),M=>{y||(y=new Set),y.add(M)}));const d=this.allLayerViews.filter(M=>!M.suspended&&r.has(M)).reverse(),v=this.toMap(i);let _=[...s?this.graphicsView.hitTest(v).map(M=>({type:"graphic",graphic:M,layer:null,mapPoint:v})):[],...await Promise.all(d.map(M=>M.hitTest(v,i)).toArray())].filter(q).flat().filter(q);return l&&(_=_.filter(M=>!("graphic"in M)||!M.graphic||l.has(YE(M.graphic)))),y&&(_=_.filter(M=>!("graphic"in M)||!M.graphic||y.has(YE(M.graphic)))),{screenPoint:i,results:_}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return h5e(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return p5e(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,g5e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(l=>{const y=this.allLayerViews.find(d=>d.layer.id===l.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:r,quality:s}=y5e(e.format,e.quality);return u5e(e,t,this.size,this.padding,r,s,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=Qq(e)?Xq(this,e):e,i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),l=this.spatialReference;return new dt({x:r,y:s,spatialReference:l})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Cn(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return RU.hasLayerViewModule(e)}importLayerView(e){return RU.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Ae.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>De(te({},t),{mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=k5e(this.type);return Me("safari")&&Me("safari")<9&&(e=new fe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Me("safari")})),q(e)?(Ae.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):Y5e()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new dE),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(y=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),y}),l=new Promise(y=>y(s));return t.when().catch(()=>{r()&&l.cancel&&l.cancel()}),l}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,s=e.then(l=>{if(fr(t),i!==this._gotoTask)throw new fe("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=l,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<NB&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var z,W,Z,Q;const{constraints:e,initialExtent:t,map:i,padding:r,size:s}=this;if(!e)return null;const l=i&&"initialViewProperties"in i&&i.initialViewProperties,y={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?y.zoom!==-1&&(y.scale=e.zoomToScale(y.zoom)):y.zoom=-1;let d=null,v=null,_=0;const M=y.viewpoint&&y.viewpoint.rotation,T=y.viewpoint&&y.viewpoint.targetGeometry;q(T)&&(T.type==="extent"?d=T:T.type==="point"&&(v=T,_=y.viewpoint.scale));const A=y.extent||d||((W=Wt((z=l==null?void 0:l.viewpoint)==null?void 0:z.targetGeometry))==null?void 0:W.extent)||t,R=y.center||v||(A==null?void 0:A.center),F=y.scale||_||((Z=l==null?void 0:l.viewpoint)==null?void 0:Z.scale)||A&&wv(A,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),V=y.rotation||M||((Q=l==null?void 0:l.viewpoint)==null?void 0:Q.rotation)||0;return R&&F?new gl({targetGeometry:R,scale:F,rotation:V}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,s=e.then(l=>{if(fr(t),i!==this._gotoTask)throw new fe("view:goto-interrupted","Goto was interrupted");return r.update(l),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(e,t){var s;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((s=i.spatialReference)==null?void 0:s.imageCoordinateSystem)||Xi(t,i.spatialReference))return e;const r=Do(i,t);if(!r)throw new fe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return X5e(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],x_e(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var d,v;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(_){Ae.getLogger(this.declaredClass).warn(new rs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:_})),e.targetGeometry=((d=this.defaultsFromMap.extent)==null?void 0:d.center)||new dt({x:0,y:0,spatialReference:this.spatialReference})}(v=this.constraints)==null||v.fit(e),this._set("state",new fxe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new PB(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new LB,this._magnifierView.magnifier=this.magnifier;const r=new RB({view:this});this._set("labelManager",r);const s=new E_e({view:this});this._set("animationManager",s);const l=new FB({view:this,animationManager:s});this._set("mapViewNavigation",l),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",_=>this.fatalError=_.error),Ve(()=>this.stationary,_=>i.stationary=_,As),Ve(()=>this.background,_=>{i.background=_,this._magnifierView.background=_},As),Ve(()=>this.magnifier,_=>this._magnifierView.magnifier=_,As),Ve(()=>this.renderingOptions,_=>i.renderingOptions=_,As),Ve(()=>this.highlightOptions,_=>i.highlightOptions=_,As),Ve(()=>this.state.id,()=>i.state=this.state,As)],"map-view"),this._updateStageChildren();const y=this._resolveWhenReady;this._resolveWhenReady=[],y.forEach(_=>_(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,l=new dt({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",l),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new bxe(bpe.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new OB({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new kB(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const d of this.allLayerViews)d.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(ae(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const d=t.viewpoint.clone();d.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=d}const i=t.clone(),[r,s]=t.center;let l=null;try{l=this._project(new dt({x:r,y:s,spatialReference:t.spatialReference}),e)}catch(d){sh()||Ae.getLogger(this.declaredClass).warn(new rs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:l.toJSON(),spatialReference:e,error:d}))}l||(l=new dt({x:0,y:0,spatialReference:e}));const y=SE(new gl({targetGeometry:new dt,scale:0,rotation:0}),t.viewpoint,l);i.viewpoint=y;try{const d=20,v=[t.size[0]/2,t.size[1]/2],_=[v[0]+d,v[1]],M=t.toMap([0,0],_),{x:T,y:A}=this._project(new dt({x:M[0],y:M[1],spatialReference:t.spatialReference}),e);M[0]=T,M[1]=A,i.toScreen(M,M);const R=w_e(v,M,_),F=Math.hypot(M[0]-v[0],M[1]-v[1])/d;!Number.isFinite(F)||Math.abs(F)>4?(y.rotation=0,y.targetGeometry=new dt({x:0,y:0,spatialReference:e})):(y.scale*=F,y.scale>Me("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(R)?R:0)}catch{}this._get("constraints").constrain(y,null),this._get("state").viewpoint=y,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const d of this.allLayerViews)d.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Ot.type="2d",m([x({readOnly:!0})],Ot.prototype,"animationManager",void 0),m([x({constructOnly:!0})],Ot.prototype,"deactivatedWebGLExtensions",void 0),m([x({constructOnly:!0})],Ot.prototype,"debugWebGLExtensions",void 0),m([x({readOnly:!0})],Ot.prototype,"featuresTilingScheme",void 0),m([x({readOnly:!0})],Ot.prototype,"fullOpacity",void 0),m([x({readOnly:!0})],Ot.prototype,"graphicsTileStore",null),m([x()],Ot.prototype,"graphicsView",void 0),m([x({readOnly:!0})],Ot.prototype,"state",void 0),m([x()],Ot.prototype,"initialExtentRequired",null),m([x()],Ot.prototype,"labelManager",void 0),m([x({readOnly:!0})],Ot.prototype,"resourceManager",null),m([x({readOnly:!0})],Ot.prototype,"textureManager",null),m([x({readOnly:!0})],Ot.prototype,"mapViewNavigation",void 0),m([x({constructOnly:!0})],Ot.prototype,"renderCanvas",void 0),m([x()],Ot.prototype,"renderingOptions",void 0),m([x({readOnly:!0})],Ot.prototype,"rendering",void 0),m([x({constructOnly:!0})],Ot.prototype,"supersampleScreenshotsEnabled",void 0),m([x({readOnly:!0})],Ot.prototype,"supportsGround",void 0),m([x()],Ot.prototype,"_stationaryTimer",void 0),m([x()],Ot.prototype,"_defaultsFromMapSettings",null),m([x()],Ot.prototype,"_pePromise",void 0),m([x({readOnly:!0})],Ot.prototype,"typeSpecificPreconditionsReady",null),m([x()],Ot.prototype,"animation",null),m([x({type:K5e})],Ot.prototype,"background",null),m([x({value:null,type:dt,dependsOn:["state.id","ready"]})],Ot.prototype,"center",null),m([x({type:NU})],Ot.prototype,"constraints",null),m([x({value:null,type:ai,dependsOn:["state.id","ready"]})],Ot.prototype,"extent",null),m([x()],Ot.prototype,"floors",void 0),m([x({type:hB})],Ot.prototype,"highlightOptions",void 0),m([x({readOnly:!0})],Ot.prototype,"inputManager",void 0),m([x()],Ot.prototype,"map",void 0),m([x({value:{top:0,right:0,bottom:0,left:0},cast:e=>te({top:0,right:0,bottom:0,left:0},e)})],Ot.prototype,"padding",null),m([x()],Ot.prototype,"resizeAlign",void 0),m([x({readOnly:!0,dependsOn:["state.id"]})],Ot.prototype,"resolution",null),m([x({value:0,type:Number,dependsOn:["state.id","ready"]})],Ot.prototype,"rotation",null),m([x({value:0,type:Number,dependsOn:["state.id","ready"]})],Ot.prototype,"scale",null),m([x({constructOnly:!0})],Ot.prototype,"spatialReferenceLocked",void 0),m([x()],Ot.prototype,"stationary",null),m([x({type:pB,readOnly:!0})],Ot.prototype,"timeline",void 0),m([x({readOnly:!0})],Ot.prototype,"type",void 0),m([x({readOnly:!0})],Ot.prototype,"updating",null),m([x({value:null,type:gl,dependsOn:["state.id","ready"]})],Ot.prototype,"viewpoint",null),m([x({value:-1,dependsOn:["state.id","ready"]})],Ot.prototype,"zoom",null),m([x({readOnly:!0})],Ot.prototype,"navigating",null),m([x({type:AB})],Ot.prototype,"ui",void 0),Ot=m([Y("esri.views.MapView")],Ot);const WTe=Ot;function YE(e){var i,r,s,l;const t=e.getObjectId();return t?`${(l=(s=(i=e.layer)==null?void 0:i.uid)!=null?s:(r=e.sourceLayer)==null?void 0:r.uid)!=null?l:"MapView"}/${t}`:`"MapView/${e.uid}`}function jB(e,t,i,r,s){return l=>{if(l instanceof jr){if(l.layer===e)s==null||s();else{const y=e.allLayerViews.find(d=>d.layer===l.layer);y&&(r==null||r(y))}i(YE(l))}else{const y=e.allLayerViews.find(d=>d.layer===l);y&&t(y)}}}function DB(e,t){if(e)if(lw(e))for(const i of e)if(lw(i))for(const r of i)t(r);else t(i);else t(e)}function Q5e(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}var XE;let wr=XE=class extends Ie{constructor(e){super(e),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}static from(e){return Rf(XE,e)}};m([x({type:Number,json:{write:!0}})],wr.prototype,"dpi",void 0),m([x()],wr.prototype,"floors",void 0),m([x({type:String,json:{write:!0}})],wr.prototype,"gdbVersion",void 0),m([x({types:ou,json:{read:dn,write:!0}})],wr.prototype,"geometry",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"geometryPrecision",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"height",void 0),m([x({type:[Number],json:{write:!0}})],wr.prototype,"layerIds",void 0),m([x({type:["top","visible","all","popup"],json:{write:!0}})],wr.prototype,"layerOption",void 0),m([x({type:ai,json:{write:!0}})],wr.prototype,"mapExtent",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"maxAllowableOffset",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnFieldName",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnGeometry",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnM",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnUnformattedValues",void 0),m([x({type:Boolean,json:{write:!0}})],wr.prototype,"returnZ",void 0),m([x({type:At,json:{write:!0}})],wr.prototype,"spatialReference",void 0),m([x()],wr.prototype,"sublayers",void 0),m([x({type:zo,json:{write:!0}})],wr.prototype,"timeExtent",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"tolerance",void 0),m([x({type:Number,json:{write:!0}})],wr.prototype,"width",void 0),wr=XE=m([Y("esri.rest.support.IdentifyParameters")],wr);const e9e=wr,VB=96;function zB(e,t){const i=t||e.extent,r=e.width,s=Jp(i&&i.spatialReference);return i&&r?i.width/r*s*lL*VB:0}function JTe(e,t){return e/(Jp(t)*lL*VB)}function ZTe(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)==null?void 0:i.floorField)&&"floors"in e.view?GB(e.view.floors,t.floorInfo.floorField):null}function bx(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)==null?void 0:i.floorField)?GB(e,t.floorInfo.floorField):null}function GB(e,t){if(!(e==null?void 0:e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function qB(e,t,i){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!BB(e,t)}function UB(e,t,i){return!!e.some(r=>{const s=r.source;return!(!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(ae(s.gdbVersion)||s.gdbVersion===i))||r.originIdOf("renderer")>nt.SERVICE||r.originIdOf("labelingInfo")>nt.SERVICE||r.originIdOf("opacity")>nt.SERVICE||r.originIdOf("labelsVisible")>nt.SERVICE})||!BB(e,t)}function BB(e,t){if(!e||!e.length||ae(t))return!0;const i=t.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).map(l=>l.id).toArray();if(e.length>i.length)return!1;let r=0;const s=i.length;for(const{id:l}of e){for(;r<s&&i[r]!==l;)r++;if(r>=s)return!1}return!0}function t9e(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const HB=e=>e.spatialReference.wkid||JSON.stringify(e.spatialReference);function i9e(e,t){const{dpi:i,gdbVersion:r,geometry:s,geometryPrecision:l,height:y,layerOption:d,mapExtent:v,maxAllowableOffset:_,returnFieldName:M,returnGeometry:T,returnUnformattedValues:A,returnZ:R,spatialReference:F,timeExtent:V,tolerance:z,width:W}=e.toJSON(),{dynamicLayers:Z,layerDefs:Q,layerIds:ee}=r9e(e),re=t&&q(t.geometry)?t.geometry:null,ie={geometryPrecision:l,maxAllowableOffset:_,returnFieldName:M,returnGeometry:T,returnUnformattedValues:A,returnZ:R,tolerance:z},he=re&&re.toJSON()||s;if(ie.imageDisplay=`${W},${y},${i}`,r&&(ie.gdbVersion=r),he&&(delete he.spatialReference,ie.geometry=JSON.stringify(he),ie.geometryType=su(he)),F?ie.sr=F.wkid||JSON.stringify(F):he&&he.spatialReference?ie.sr=HB(he):v&&v.spatialReference&&(ie.sr=HB(v)),ie.time=V?[V.start,V.end].join(","):null,v){const{xmin:be,ymin:we,xmax:xe,ymax:$e}=v;ie.mapExtent=`${be},${we},${xe},${$e}`}return Q&&(ie.layerDefs=Q),Z&&!Q&&(ie.dynamicLayers=Z),ie.layers=d==="popup"?"visible":d,ee&&!Z&&(ie.layers+=`:${ee.join(",")}`),ie}function r9e(e){var F,V;const{mapExtent:t,floors:i,width:r,sublayers:s,layerIds:l,layerOption:y,gdbVersion:d}=e,v=(V=(F=s==null?void 0:s.find(z=>z.layer!=null))==null?void 0:F.layer)==null?void 0:V.serviceSublayers,_=y==="popup",M={},T=zB({extent:t,width:r,spatialReference:t==null?void 0:t.spatialReference}),A=[],R=z=>{const W=T===0,Z=z.minScale===0||T<=z.minScale,Q=z.maxScale===0||T>=z.maxScale;if(z.visible&&(W||Z&&Q))if(z.sublayers)z.sublayers.forEach(R);else{if((l==null?void 0:l.includes(z.id))===!1||_&&(!z.popupTemplate||!z.popupEnabled))return;A.unshift(z)}};if(s==null||s.forEach(R),s&&!A.length)M.layerIds=[];else{const z=UB(A,v,d),W=A.map(Z=>{const Q=bx(i,Z);return Z.toExportImageJSON(Q)});if(z)M.dynamicLayers=JSON.stringify(W);else{if(s){let Q=A.map(({id:ee})=>ee);l&&(Q=Q.filter(ee=>l.includes(ee))),M.layerIds=Q}else(l==null?void 0:l.length)&&(M.layerIds=l);const Z=n9e(i,A);if(q(Z)&&Z.length){const Q={};for(const ee of Z)ee.definitionExpression&&(Q[ee.id]=ee.definitionExpression);Object.keys(Q).length&&(M.layerDefs=JSON.stringify(Q))}}}return M}function n9e(e,t){const i=!!(e==null?void 0:e.length),r=t.filter(s=>s.definitionExpression!=null||i&&s.floorInfo!=null);return r.length?r.map(s=>{const l=bx(e,s),y=m_(l,s.definitionExpression);return{id:s.id,definitionExpression:y}}):null}let Ju=class extends Ie{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,t){return jr.fromJSON({attributes:te({},t.attributes),geometry:te({},t.geometry)})}writeFeature(e,t){if(!e)return;const{attributes:i,geometry:r}=e;i&&(t.attributes=te({},i)),q(r)&&(t.geometry=r.toJSON(),t.geometryType=Fw.toJSON(r.type))}};m([x({type:String,json:{write:!0}})],Ju.prototype,"displayFieldName",void 0),m([x({type:jr})],Ju.prototype,"feature",void 0),m([Be("feature",["attributes","geometry"])],Ju.prototype,"readFeature",null),m([Ke("feature")],Ju.prototype,"writeFeature",null),m([x({type:Number,json:{write:!0}})],Ju.prototype,"layerId",void 0),m([x({type:String,json:{write:!0}})],Ju.prototype,"layerName",void 0),Ju=m([Y("esri.rest.support.IdentifyResult")],Ju);const s9e=Ju;async function KTe(e,t,i){const r=(t=a9e(t)).geometry?[t.geometry]:[],s=Vr(e);return s.path+="/identify",Pm(r).then(l=>{const y=i9e(t,{geometry:l&&l[0]}),d=P$(te(De(te({},s.query),{f:"json"}),y)),v=_D(d,i);return li(s.path,v).then(o9e).then(_=>l9e(_,t.sublayers))})}function o9e(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=Boolean(t.exceededTransferLimit),t.results=t.results.map(i=>s9e.fromJSON(i)),t}function a9e(e){return e=e9e.from(e)}function l9e(e,t){if(!(t==null?void 0:t.length))return e;const i=new Map;function r(s){i.set(s.id,s),s.sublayers&&s.sublayers.forEach(r)}t.forEach(r);for(const s of e.results)s.feature.sourceLayer=i.get(s.layerId);return e}let Zu=class extends c8(j8(_0)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Nd,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};m([x({type:Kz})],Zu.prototype,"elevationInfo",void 0),m([x(sE(Nd,"graphics"))],Zu.prototype,"graphics",void 0),m([x({type:["show","hide"]})],Zu.prototype,"listMode",void 0),m([x()],Zu.prototype,"screenSizePerspectiveEnabled",void 0),m([x({readOnly:!0})],Zu.prototype,"type",void 0),m([x({constructOnly:!0})],Zu.prototype,"internal",void 0),Zu=m([Y("esri.layers.GraphicsLayer")],Zu);const WB=Zu,D1=(e,t,i)=>[t,i],Ko=(e,t,i)=>[t,i,e[2]],V1=(e,t,i)=>[t,i,e[2],e[3]];function JB(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:q(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function Pv({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function Ov({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function QE(e,t,i){const r=[];let s,l,y,d;for(let v=0;v<i.length;v++){const _=i[v];v>0?(y=Pv(e,_[0]),d=Ov(e,_[1]),y===s&&d===l||(r.push(t(_,y-s,d-l)),s=y,l=d)):(s=Pv(e,_[0]),l=Ov(e,_[1]),r.push(t(_,s,l)))}return r.length>0?r:null}function u9e(e,t,i,r){return QE(e,i?r?V1:Ko:r?Ko:D1,t)}function c9e(e,t,i,r){const s=[],l=i?r?V1:Ko:r?Ko:D1;for(let y=0;y<t.length;y++){const d=QE(e,l,t[y]);d&&d.length>=3&&s.push(d)}return s.length?s:null}function h9e(e,t,i,r){const s=[],l=i?r?V1:Ko:r?Ko:D1;for(let y=0;y<t.length;y++){const d=QE(e,l,t[y]);d&&d.length>=2&&s.push(d)}return s.length?s:null}function ZB({scale:e,translate:t},i){return i*e[0]+t[0]}function KB({scale:e,translate:t},i){return t[1]-i*e[1]}function YB(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[s,l]=e.scale;let y=ZB(e,i[0][0]),d=KB(e,i[0][1]);r[0]=t(i[0],y,d);for(let v=1;v<i.length;v++){const _=i[v];y+=_[0]*s,d-=_[1]*l,r[v]=t(_,y,d)}return r}function XB(e,t,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=YB(e,t,i[s]);return r}function p9e(e,t,i,r){return YB(e,i?r?V1:Ko:r?Ko:D1,t)}function d9e(e,t,i,r){return XB(e,i?r?V1:Ko:r?Ko:D1,t)}function f9e(e,t,i,r){return XB(e,i?r?V1:Ko:r?Ko:D1,t)}function y9e(e,t,i,r,s){return t.xmin=Pv(e,i.xmin),t.ymin=Ov(e,i.ymin),t.xmax=Pv(e,i.xmax),t.ymax=Ov(e,i.ymax),t!==i&&(r&&(t.zmin=i.zmin,t.zmax=i.zmax),s&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}function g9e(e,t,i,r,s){var l;return t.points=(l=u9e(e,i.points,r,s))!=null?l:[],t}function m9e(e,t,i,r,s){return t.x=Pv(e,i.x),t.y=Ov(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m)),t}function v9e(e,t,i,r,s){const l=c9e(e,i.rings,r,s);return l?(t.rings=l,t):null}function b9e(e,t,i,r,s){const l=h9e(e,i.paths,r,s);return l?(t.paths=l,t):null}function YTe(e,t){return e&&t?Nw(t)?m9e(e,{},t,!1,!1):eg(t)?b9e(e,{},t,!1,!1):nu(t)?v9e(e,{},t,!1,!1):Lw(t)?g9e(e,{},t,!1,!1):Qy(t)?y9e(e,{},t,!1,!1):null:null}function XTe(e,t,i,r,s){return q(i)&&(t.points=p9e(e,i.points,r,s)),t}function QTe(e,t,i,r,s){return ae(i)||(t.x=ZB(e,i.x),t.y=KB(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m))),t}function eCe(e,t,i,r,s){return q(i)&&(t.rings=f9e(e,i.rings,r,s)),t}function tCe(e,t,i,r,s){return q(i)&&(t.paths=d9e(e,i.paths,r,s)),t}function eI(e,t){return e===t||q(e)&&q(t)&&Xi(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}class iCe{constructor(t,i,r){this.uid=t,this.geometry=i,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}}function rCe(e){return q(e.geometry)}class nCe{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function wx(e,t,i,r){return{x:e,y:t,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}function sCe(e){if(ae(e))return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const i of e.paths)t+=i.length;return t}case"polygon":{let t=0;for(const i of e.rings)t+=i.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function oCe(e,t){switch(Vae(t),e.type==="mesh"&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let i=0;i<e.paths.length;i++)zS(t,e.paths[i],e.hasZ);break;case"polygon":for(let i=0;i<e.rings.length;i++)zS(t,e.rings[i],e.hasZ);break;case"multipoint":zS(t,e.points,e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,e.zmin!=null&&(t[2]=e.zmin),e.zmax!=null&&(t[5]=e.zmax)}}function aCe(e,t){switch(Lae(t),e.type==="mesh"&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let i=0;i<e.paths.length;i++)NS(t,e.paths[i]);break;case"polygon":for(let i=0;i<e.rings.length;i++)NS(t,e.rings[i]);break;case"multipoint":NS(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function lCe(e,t){return e.objectId!=null?e.objectId:e.attributes&&t?e.attributes[t]:null}y2();Ro();var QB,eH,tH,iH,rH,nH,sH,oH,aH,lH,uH,cH,hH,pH,dH,fH,yH,gH,mH,vH,bH,wH,_H,xH,SH,MH,$H,EH,IH,TH,CH,AH,PH,OH,kH,tI,RH,FH,LH,iI,NH,jH,DH,VH,zH,GH,qH,UH,BH,HH,WH,JH,ZH,KH,YH,XH,QH,eW,tW,iW,rW;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(QB||(QB={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(eH||(eH={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(tH||(tH={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(iH||(iH={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(rH||(rH={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(nH||(nH={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(sH||(sH={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(oH||(oH={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(aH||(aH={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(lH||(lH={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(uH||(uH={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(cH||(cH={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(hH||(hH={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(pH||(pH={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(dH||(dH={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(fH||(fH={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(yH||(yH={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(gH||(gH={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(mH||(mH={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(vH||(vH={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(bH||(bH={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(wH||(wH={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(_H||(_H={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(xH||(xH={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(SH||(SH={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(MH||(MH={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}($H||($H={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(EH||(EH={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(IH||(IH={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(TH||(TH={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(CH||(CH={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(AH||(AH={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(PH||(PH={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(OH||(OH={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(kH||(kH={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(tI||(tI={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(RH||(RH={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(FH||(FH={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(LH||(LH={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(iI||(iI={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(NH||(NH={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(jH||(jH={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(DH||(DH={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(VH||(VH={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(zH||(zH={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(GH||(GH={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(qH||(qH={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(UH||(UH={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(BH||(BH={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(HH||(HH={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(WH||(WH={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(JH||(JH={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(ZH||(ZH={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(KH||(KH={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(YH||(YH={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(XH||(XH={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(QH||(QH={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(eW||(eW={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(tW||(tW={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(iW||(iW={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(rW||(rW={}));const cr={main:new mt([255,127,0]),selected:new mt([255,255,255]),outline:new mt([0,0,0,.5]),selectedOutline:new mt([255,255,255]),hoverOutline:new mt([255,255,255]),secondary:new mt([255,255,255]),secondaryOutline:new mt([100,100,100]),transparent:new mt([0,0,0,0])};function z1(e,t){if(t)for(const i in t)e[i]=t[i]}class kv{constructor(t){this.size=8,this.hoverSize=10,this.color=cr.main,this.hoverColor=cr.main,this.outlineColor=cr.outline,this.hoverOutlineColor=cr.hoverOutline,z1(this,t)}}class w9e{constructor(t){this.color=cr.secondary,this.hoverColor=cr.main,z1(this,t)}}class _9e{constructor(t){this.color=cr.transparent,this.hoverColor=cr.transparent,this.outlineColor=cr.main,this.hoverOutlineColor=cr.main,this.stagedColor=cr.transparent,this.stagedOutlineColor=cr.secondary,z1(this,t)}}class x9e{constructor(t){this.vertex=new kv,this.midpoint=new kv({color:cr.secondary,outlineColor:cr.secondaryOutline,size:6}),this.selected=new kv({color:cr.selected,hoverColor:cr.selected,hoverOutlineColor:cr.hoverOutline}),z1(this,t)}}class S9e{constructor(t){this.center=new kv({color:cr.secondaryOutline}),this.fill=new _9e,this.line=new w9e,this.vertex=new kv({color:cr.selected,outlineColor:cr.main,hoverColor:cr.selected,hoverOutlineColor:cr.secondaryOutline}),z1(this,t)}}class M9e{constructor(t){this.reshapeGraphics=new x9e,this.transformGraphics=new S9e,z1(this,t)}}const uCe=new M9e;let La=class extends Ie{constructor(){super(...arguments),this.enabled=!0}};m([x({type:Boolean})],La.prototype,"enabled",void 0),La=m([Y("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],La);let _r=class extends Ie{constructor(e){super(e),this.lineSnapper=new La,this.parallelLineSnapper=new La,this.rightAngleSnapper=new La,this.rightAngleTriangleSnapper=new La,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new mt([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};m([x({type:La,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"lineSnapper",void 0),m([x({type:La,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"parallelLineSnapper",void 0),m([x({type:La,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"rightAngleSnapper",void 0),m([x({type:La,constructOnly:!0,nonNullable:!0,json:{write:!0}})],_r.prototype,"rightAngleTriangleSnapper",void 0),m([x({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],_r.prototype,"shortLineThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],_r.prototype,"distance",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"pointThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"intersectionParallelLineThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"parallelLineThreshold",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"touchSensitivityMultiplier",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],_r.prototype,"pointOnLineThreshold",void 0),m([x({type:mt,nonNullable:!0})],_r.prototype,"orange",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"lineHintWidthReference",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"lineHintWidthTarget",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],_r.prototype,"lineHintFadedExtensions",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],_r.prototype,"parallelLineHintWidth",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],_r.prototype,"parallelLineHintLength",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],_r.prototype,"parallelLineHintOffset",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],_r.prototype,"rightAngleHintSize",void 0),m([x({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],_r.prototype,"rightAngleHintOutlineSize",void 0),_r=m([Y("esri.views.interactive.snapping.Settings.Defaults")],_r);const go=new _r;var xn;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(xn||(xn={}));function nW(e){return e?Ki:T9e}function $9e(e,t){return ae(t)||!t.mode?nW(e).mode:t.mode}function rI(e,t){return q(t)?t:nW(e)}function sW(e,t){return $9e(!!q(e)&&e.hasZ,t)}function cCe(e,t){return rI(!!q(e)&&e.hasZ,t)}function _x(e){const t=sI(e);return sW(e.geometry,t)}function hCe(e){const t=sI(e),i=sW(e.geometry,t);return{mode:i,offset:q(t)&&i!=="on-the-ground"?hn(t.offset,0)*Dve(hn(t.unit,"meters")):0}}function nI(e){if(_x(e)==="on-the-ground")return!1;const t=sI(e),i=q(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||i==="0")}function sI(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function oI(e,t,i){if(ae(i)||!i.mode)return;const r=e.hasZ?e.z:0,s=q(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return r-s;case"on-the-ground":return 0;case"relative-to-ground":return r-(hn(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+s);case"relative-to-scene":return r-(hn(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+s)}}function aI(e,t,i,r=null){return oW(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function G1(e,t,i,r,s=null){return oW(e,t[0],t[1],t.length>2?t[2]:0,i,r,s)}function oW(e,t,i,r,s,l,y=null){if(ae(l))return;const d=q(y)?y.mode:"absolute-height";if(d==="on-the-ground")return 0;const{absoluteZ:v}=E9e(t,i,r,s,e,l);return I9e(v,t,i,r,s,e,y,d)}function E9e(e,t,i,r,s,l){const y=q(l.offset)?l.offset:0;switch(l.mode){case"absolute-height":return{absoluteZ:i+y,elevation:0};case"on-the-ground":{const d=hn(s.elevationProvider.getElevation(e,t,0,r,"ground"),0);return{absoluteZ:d,elevation:d}}case"relative-to-ground":{const d=hn(s.elevationProvider.getElevation(e,t,i,r,"ground"),0);return{absoluteZ:i+d+y,elevation:d}}case"relative-to-scene":{const d=hn(s.elevationProvider.getElevation(e,t,i,r,"scene"),0);return{absoluteZ:i+d+y,elevation:d}}}}function I9e(e,t,i,r,s,l,y,d){const v=q(y)&&q(y.offset)?y.offset:0;switch(d){case"absolute-height":return e-v;case"relative-to-ground":return e-(hn(l.elevationProvider.getElevation(t,i,r,s,"ground"),0)+v);case"relative-to-scene":return e-(hn(l.elevationProvider.getElevation(t,i,r,s,"scene"),0)+v)}}function pCe(e,t){if(ae(t))return!1;const{mode:i}=t;return q(i)&&(e==="scene"&&i==="relative-to-scene"||e==="ground"&&i!=="absolute-height")}const Ki={mode:"absolute-height",offset:0},T9e={mode:"on-the-ground",offset:null};function C9e(e,t){return e===t||q(e)&&q(t)&&e.mode===t.mode&&e.offset===t.offset}function Yn(e,t){const i=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return i;case 3:return i&&e[2]===t[2];case 4:return i&&e[2]===t[2]&&e[3]===t[3]}return!1}function Zd(e,t){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function A9e(e,t){return Math.sqrt(Zd(e,t))}function lI(e,t,i){const r=i.toXYZ(e,P9e);t.sort((s,l)=>{const y=i.toXYZ(s.targetPoint,aW),d=Dc(y,r),v=i.toXYZ(l.targetPoint,aW);return d-Dc(v,r)})}const P9e=Qe(),aW=Qe();var Na;function dCe(e,t){return{point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),distance:e.distance,types:e.types,query:q(t)?t.toJSON():{where:"1=1"}}}function Er(e,t,i,r){const{coordinateHelper:s,elevationInfo:l}=i;if(!s.hasZ()||ae(t)||t.type!=="3d"||ae(e)||C9e(l,r))return e;const y=G1(t,e,s.spatialReference,l,r),d=s.clone(e);return d[2]=y,d}function Fl(e,t,i,r=Ki){return{left:Er(e.leftVertex.pos,t,i,r),right:Er(e.rightVertex.pos,t,i,r)}}function fCe(e){return e.createQuery()}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Na||(Na={}));class Rv{constructor(t,i){this.elevationInfo=t,this.domain=i}}class xx extends Rv{constructor(t,i,r=xn.ALL){super(i,r),this.intersectionPoint=t}equals(t){return t instanceof xx&&Yn(this.intersectionPoint,t.intersectionPoint)}}class Yo extends Rv{constructor(t,i,r,s,l=xn.ALL,y=!0,d=!0){super(s,l),this.type=t,this.lineStart=i,this.lineEnd=r,this.fadeLeft=y,this.fadeRight=d}equals(t){return t instanceof Yo&&this.type===t.type&&Yn(this.lineStart,t.lineStart)&&Yn(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}}class Sx extends Rv{constructor(t,i,r,s=xn.ALL){super(r,s),this.lineStart=t,this.lineEnd=i}equals(t){return t instanceof Sx&&Yn(this.lineStart,t.lineStart)&&Yn(this.lineEnd,t.lineEnd)}}class uI extends Rv{constructor(t,i,r){super(i,r),this.point=t}equals(t){return t instanceof uI&&Yn(this.point,t.point)}}class Fv extends Rv{constructor(t,i,r,s,l=xn.ALL){super(s,l),this.previousVertex=t,this.centerVertex=i,this.nextVertex=r}equals(t){return t instanceof Fv&&Yn(this.previousVertex,t.previousVertex)&&Yn(this.centerVertex,t.centerVertex)&&Yn(this.nextVertex,t.nextVertex)}}class O9e{draw(t,i){const r=this._getUniqueHints(t),s=[];for(const l of r)l instanceof xx&&s.push(this.visualizeIntersectionPoint(l,i)),l instanceof Yo&&s.push(this.visualizeLine(l,i)),l instanceof Sx&&s.push(this.visualizeParallelSign(l,i)),l instanceof Fv&&s.push(this.visualizeRightAngleQuad(l,i)),l instanceof uI&&s.push(this.visualizePoint(l,i));return Ly(s)}_getUniqueHints(t){const i=[];for(const r of t){let s=!0;for(const l of i)if(r.equals(l)){s=!1;break}s&&i.push(r)}return i}}class k9e extends O9e{constructor(t){super(),this._graphicsLayer=t}visualizeIntersectionPoint(t,i){return this._visualizeSnappingIndicator(new dt({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:i.coordinateHelper.spatialReference}),F9e)}visualizePoint(t,i){return this._visualizeSnappingIndicator(new dt({x:t.point[0],y:t.point[1],spatialReference:i.coordinateHelper.spatialReference}),L9e)}visualizeLine(t,i){return this._visualizeSnappingIndicator(new Kr({paths:[[t.lineStart,t.lineEnd]],spatialReference:i.coordinateHelper.spatialReference}),N9e)}visualizeParallelSign(t,i){return this._visualizeSnappingIndicator(new Kr({paths:[[t.lineStart,t.lineEnd]],spatialReference:i.coordinateHelper.spatialReference}),j9e)}visualizeRightAngleQuad(t,i){return this._visualizeSnappingIndicator(new Kr({paths:[[t.previousVertex,t.centerVertex,t.nextVertex]],spatialReference:i.coordinateHelper.spatialReference}),z9e(t))}_visualizeSnappingIndicator(t,i){const r=new jr({geometry:t,symbol:i});return this._graphicsLayer.add(r),Zl(()=>{this._graphicsLayer.remove(r)})}}const q1=cr.main.toArray(),R9e=[...cr.main.toRgb(),100],F9e=new ro({outline:new us({width:1.5,color:q1}),size:15,color:[0,0,0,0]}),L9e=new ro({outline:{width:.5,color:[0,0,0,1]},size:10,color:q1}),N9e=new zc({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:tI.Butt,joinStyle:iI.Round,miterLimit:10,width:ko(go.lineHintWidthTarget),color:q1}]}}}),j9e=new zc({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:q1}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:q1}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),lW=e=>new zc({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:ko(go.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:ko(go.rightAngleHintOutlineSize),color:q1},{type:"CIMSolidFill",enable:!0,color:R9e}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),D9e=lW(45),V9e=lW(225),z9e=(()=>{const e=Ht(),t=Ht(),i=Qe();return r=>(ur(e,r.centerVertex,r.previousVertex),ur(t,r.nextVertex,r.previousVertex),yE(i,e,t),i[2]<0?D9e:V9e)})();var qr;(function(e){e[e.Z=0]="Z",e[e.M=1]="M"})(qr||(qr={}));class G9e{constructor(t){this.spatialReference=t}createVector(){return this._tag(Ht())}pointToVector(t){return this._tag(zu(t.x,t.y))}arrayToVector(t){return this._tag(zu(t[0],t[1]))}vectorToArray(t){return[t[0],t[1]]}pointToArray(t){return[t.x,t.y]}vectorToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return i.x=t[0],i.y=t[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return K_(s,t,i,r)}addDelta(t,i,r){t[0]+=i,t[1]+=r}distance(t,i){return Du(t,i)}getZ(t,i){return i}hasZ(){return!1}getM(t,i){return i}hasM(){return!1}clone(t){return this._tag(vU(t))}copy(t,i){return _1(i,t)}fromXYZ(t){return this._tag(zu(t[0],t[1]))}toXYZ(t,i=Qe()){return Nr(i,t[0],t[1],0)}equals(t,i){return gE(t,i)}_tag(t){return t}}class uW{constructor(t,i){this._valueType=t,this.spatialReference=i}createVector(){return this._tag(Qe())}pointToVector(t){return this._tag(Ar(t.x,t.y,this._valueType===qr.Z?t.z:t.m))}arrayToVector(t){return this._tag(Ar(t[0],t[1],t[2]||0))}vectorToArray(t){return[t[0],t[1],t[2]]}pointToArray(t){return this._valueType===qr.Z?[t.x,t.y,t.z]:[t.x,t.y,t.m]}vectorToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=this._valueType===qr.Z?t[2]:void 0,i.m=this._valueType===qr.M?t[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=this._valueType===qr.Z?t[2]:void 0,i.m=this._valueType===qr.M?t[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){const r=this._valueType===qr.Z,s=this._valueType===qr.M;return i.x=t[0],i.y=t[1],i.z=r?t[2]:void 0,i.m=s?t[2]:void 0,i.hasZ=r,i.hasM=s,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return Hk(s,t,i,r)}addDelta(t,i,r,s){t[0]+=i,t[1]+=r,this._valueType===qr.Z&&(t[2]+=s)}distance(t,i){return this._valueType===qr.Z?r0(t,i):Du(t,i)}getZ(t,i){return this._valueType===qr.Z?t[2]:i}hasZ(){return this._valueType===qr.Z}getM(t,i){return this._valueType===qr.M?t[2]:i}hasM(){return this._valueType===qr.M}clone(t){return this._tag(Lk(t))}copy(t,i){return $s(i,t)}fromXYZ(t,i=0,r=0){return this._tag(Ar(t[0],t[1],this._valueType===qr.Z?t.length>2?t[2]:i:r))}toXYZ(t,i=Qe()){return Nr(i,t[0],t[1],this._valueType===qr.Z?t[2]:0)}equals(t,i){return t2(t,i)}_tag(t){return t}}class q9e{constructor(t){this.spatialReference=t}createVector(){return this._tag(i1())}pointToVector(t){return this._tag(Ia(t.x,t.y,t.z,t.m))}arrayToVector(t){return this._tag(Ia(t[0],t[1],t[2]||0,t[3]||0))}vectorToArray(t){return[t[0],t[1],t[2],t[3]]}pointToArray(t){return[t.x,t.y,t.z,t.m]}vectorToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.spatialReference=this.spatialReference,i}arrayToPoint(t,i=new dt){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(t,i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return i.x=t[0],i.y=t[1],i.z=t[2],i.m=t[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(t,i,r,s){return s2(s,t,i,r)}addDelta(t,i,r,s){t[0]+=i,t[1]+=r,t[2]+=s}distance(t,i){return r0(t,i)}getZ(t){return t[2]}hasZ(){return!0}getM(t){return t[3]}hasM(){return!0}clone(t){return this._tag(YV(t))}copy(t,i){return n2(i,t)}fromXYZ(t,i=0,r=0){return this._tag(Ia(t[0],t[1],t.length>2?t[2]:i,r))}toXYZ(t,i=Qe()){return Nr(i,t[0],t[1],t[2])}equals(t,i){return bS(t,i)}_tag(t){return t}}function cI(e,t,i){return e&&t?new q9e(i):t?new uW(qr.M,i):e?new uW(qr.Z,i):new G9e(i)}function U9e(e,t){if(!t.supported)return;let i=1/0,r=-1/0;const s=t.upperBoundX-t.lowerBoundX;e.forEach(y=>{let d=y.pos[0];for(;d<t.lowerBoundX;)d+=s;for(;d>t.upperBoundX;)d-=s;i=Math.min(i,d),r=Math.max(r,d),y.pos[0]=d});const l=r-i;s-l<l&&e.forEach(y=>{y.pos[0]<0&&(y.pos[0]+=s)})}function B9e(e,t){const i=Ks(e);return t===ju.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}class Lv{constructor(t){this.component=t,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(t){this._pos=t,this.component.unnormalizeVertexPositions()}}class Ku{constructor(t,i,r){this.component=t,this.leftVertex=i,this.rightVertex=r,this.type="edge",i.rightEdge=this,r.leftEdge=this}}class U1{constructor(t,i){this._spatialReference=t,this._viewingMode=i,this.vertices=[],this.edges=[]}unnormalizeVertexPositions(){this.vertices.length<=1||U9e(this.vertices,B9e(this._spatialReference,this._viewingMode))}updateVertexIndex(t,i){if(this.vertices.length===0)return;const r=this.vertices[0];let s=null,l=t,y=i;do s=l,s.index=y++,l=s.rightEdge?s.rightEdge.rightVertex:null;while(l!=null&&l!==r);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.length===0?null:this.vertices[0]}getLastVertex(){return this.vertices.length===0?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(t,i){const r=this.vertices[t];this.vertices[t]=this.vertices[i],this.vertices[i]=r}iterateVertices(t){if(this.vertices.length===0)return;const i=this.vertices[0];let r=i;do t(r,r.index),r=q(r.rightEdge)?r.rightEdge.rightVertex:null;while(r!==i&&r!=null)}}class B1 extends fn{constructor(t,i){super(),this.type=t,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(t){this._dirty=!0,this.emit("change",t)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const t=[],i=this.coordinateHelper.vectorToArray;for(const r of this.components){if(r.vertices.length<1)continue;const s=[];let l=r.vertices.find(d=>d.leftEdge==null);const y=l;do s.push(i(l.pos)),l=l.rightEdge?l.rightEdge.rightVertex:null;while(l&&l!==y);t.push(s)}return new Kr({paths:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const t=[],i=this.coordinateHelper.vectorToArray;for(const r of this.components){if(r.vertices.length<1)continue;const s=[],l=r.vertices[0];let y=l;const d=y;do s.push(i(y.pos)),y=q(y.rightEdge)?y.rightEdge.rightVertex:null;while(y&&y!==d);r.isClosed()&&s.push(i(l.pos)),t.push(s)}return new jn({rings:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(t,i){const r=t.spatialReference,s=cI(t.hasZ,t.hasM,r),l=new B1(t.type,s);switch(t.type){case"polygon":{const y=t.rings;for(let d=0;d<y.length;++d){const v=y[d],_=new U1(r,i),M=v.length>2&&Mc(v[0],v[v.length-1]),T=M?v.length-1:v.length;for(let R=0;R<T;++R){const F=s.arrayToVector(v[R]),V=new Lv(_);_.vertices.push(V),V.pos=F,V.index=R}const A=_.vertices.length-1;for(let R=0;R<A;++R){const F=_.vertices[R],V=_.vertices[R+1],z=new Ku(_,F,V);_.edges.push(z)}if(M){const R=new Ku(_,_.vertices[_.vertices.length-1],_.vertices[0]);_.edges.push(R)}l.components.push(_)}break}case"polyline":for(const y of t.paths){const d=new U1(r,i),v=y.length;for(let M=0;M<v;++M){const T=s.arrayToVector(y[M]),A=new Lv(d);d.vertices.push(A),A.pos=T,A.index=M}const _=d.vertices.length-1;for(let M=0;M<_;++M){const T=d.vertices[M],A=d.vertices[M+1],R=new Ku(d,T,A);d.edges.push(R)}l.components.push(d)}break;case"point":{const y=new U1(r,i),d=new Lv(y);d.index=0,d.pos=s.pointToVector(t),y.vertices.push(d),l.components.push(y);break}}return l}}var Yu;(function(e){e[e.NEW_STEP=0]="NEW_STEP",e[e.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Yu||(Yu={}));class H9e{constructor(t,i,r){this._editGeometry=t,this._component=i,this._pos=r,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let t="redo";ae(this._addedVertex)&&(t="apply",this._addedVertex=new Lv(this._component));const i=this._component.getLastVertex();if(ae(i))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let r=null;i.rightEdge&&(this._originalEdge=i.rightEdge,r=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,ae(this._left)&&(this._left=new Ku(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,q(this._originalEdge)&&q(r)&&(ae(this._right)&&(this._right=new Ku(this._component,this._addedVertex,r)),this._component.edges.push(this._right),r.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:t,addedVertices:[this._addedVertex]})}undo(){ae(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),q(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),q(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),q(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),q(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}class hI{constructor(t,i,r){this._editGeometry=t,this._vertices=i,this.operation=r,this._undone=!1}apply(){this._vertices.forEach(t=>this.operation.apply(t)),this._editGeometry.components.forEach(t=>t.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(t=>this.operation.undo(t)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(t){if(this._undone||t._vertices.length!==this._vertices.length)return!1;for(let i=0;i<t._vertices.length;++i)if(t._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(t.operation)}accumulate(t){return!!(t instanceof hI&&this.canAccumulate(t))&&(this._vertices.forEach(i=>this.operation.accumulate(i,t.operation)),this.operation.accumulateParams(t.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}var Ll;(function(e){e[e.CUMULATIVE=0]="CUMULATIVE",e[e.REPLACE=1]="REPLACE"})(Ll||(Ll={}));class W9e{constructor(t,i,r=0){this._editGeometry=t,this._vertices=i,this._minNumberOfVertices=r,this.removedVertices=null}apply(){let t="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(r=>{const s=this._removeVertex(r);q(s)&&i.push(s)}),t="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:t,removedVertices:this._vertices})}undo(){var t;(t=this.removedVertices)==null||t.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(t){const i=t.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const r={removedVertex:t,createdEdge:null},s=t.leftEdge,l=t.rightEdge;return i.vertices.splice(i.vertices.indexOf(t),1),s&&(i.edges.splice(i.edges.indexOf(s),1),s.leftVertex.rightEdge=null),l&&(i.edges.splice(i.edges.indexOf(l),1),l.rightVertex.leftEdge=null),t.index===0&&l&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(l.rightVertex),0),s&&l&&(r.createdEdge=new Ku(i,s.leftVertex,l.rightVertex),i.edges.push(r.createdEdge)),l&&i.updateVertexIndex(l.rightVertex,l.rightVertex.index-1),r}_undoRemoveVertex(t){const i=t.removedVertex,r=t.removedVertex.component,s=i.leftEdge,l=i.rightEdge;t.createdEdge&&r.edges.splice(r.edges.indexOf(t.createdEdge),1),r.vertices.push(i),s&&(r.edges.push(s),s.leftVertex.rightEdge=s),l&&(r.edges.push(l),l.rightVertex.leftEdge=l),r.updateVertexIndex(i,i.index)}}class J9e{constructor(t,i,r){this._editGeometry=t,this._edge=i,this._t=r,this.createdVertex=null,this._left=null,this._right=null}apply(){let t="redo";const i=this._edge,r=i.component,s=i.leftVertex,l=i.rightVertex;r.edges.splice(r.edges.indexOf(i),1),ae(this.createdVertex)&&(t="apply",this.createdVertex=new Lv(i.component)),r.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),ae(this._left)&&(this._left=new Ku(r,s,this.createdVertex)),this._left.leftVertex.leftEdge?r.edges.push(this._left):r.edges.unshift(this._left),s.rightEdge=this._left,ae(this._right)&&(this._right=new Ku(r,this.createdVertex,l)),r.edges.push(this._right),l.leftEdge=this._right,r.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:t,addedVertices:[this.createdVertex]})}undo(){if(ae(this.createdVertex)||ae(this._left)||ae(this._right))return null;const t=this._edge,i=t.component,r=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,l=r==null?void 0:r.leftVertex,y=s==null?void 0:s.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),l&&(l.rightEdge=t),y&&(y.leftEdge=t),l&&i.updateVertexIndex(l,l.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class pI{constructor(t,i,r){this._editGeometry=t,this._vertex=i,this._pos=r}apply(){const t=ae(this._originalPosition);t&&(this._originalPosition=this._vertex.pos),this._apply(t?"apply":"redo")}undo(){this._vertex.pos=Wt(this._originalPosition),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(t){return t instanceof pI&&t._vertex===this._vertex&&(this._pos=t._pos,this._apply("apply"),!0)}_apply(t){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:t,updatedVertices:[this._vertex]})}}class Z9e{constructor(t,i){this._editGeometry=t,this._component=i,this._createdEdge=null}apply(){let t="redo";if(ae(this._createdEdge)){t="apply";const i=this._component.getFirstVertex(),r=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||ae(i)||ae(r))return;this._createdEdge=new Ku(this._component,r,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:t})}undo(){ae(this._createdEdge)||(sP(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class dI{constructor(t,i,r,s){this._helper=t,this.dx=i,this.dy=r,this.dz=s}_move(t,i,r,s){this._helper.addDelta(t.pos,i,r,s)}apply(t){this._move(t,this.dx,this.dy,this.dz)}undo(t){this._move(t,-this.dx,-this.dy,-this.dz)}canAccumulate(t){return t instanceof dI}accumulate(t,i){this._move(t,i.dx,i.dy,i.dz)}accumulateParams(t){this.dx+=t.dx,this.dy+=t.dy,this.dz+=t.dz}}var Xu;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Xu||(Xu={}));class K9e{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Ff(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*cW);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,cW));t++)this._items.push(this._allocator())}}const cW=1024;function hW(){return[1,0,0,0,1,0,0,0,1]}function Y9e(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function X9e(e,t,i,r,s,l,y,d,v){return[e,t,i,r,s,l,y,d,v]}function pW(e,t){return new Float64Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:hW,clone:Y9e,fromValues:X9e,createView:pW},Symbol.toStringTag,{value:"Module"}));function dW(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Q9e(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function e4e(e,t,i,r,s,l,y,d,v,_,M,T,A,R,F,V){return[e,t,i,r,s,l,y,d,v,_,M,T,A,R,F,V]}function fW(e,t){return new Float64Array(e,t,16)}const t4e=dW();Object.freeze(Object.defineProperty({__proto__:null,create:dW,clone:Q9e,fromValues:e4e,createView:fW,IDENTITY:t4e},Symbol.toStringTag,{value:"Module"}));function H1(){return[0,0,0,1]}function i4e(e){return[e[0],e[1],e[2],e[3]]}function r4e(e,t,i,r){return[e,t,i,r]}function yW(e,t){return new Float64Array(e,t,4)}const n4e=H1();Object.freeze(Object.defineProperty({__proto__:null,create:H1,clone:i4e,fromValues:r4e,createView:yW,IDENTITY:n4e},Symbol.toStringTag,{value:"Module"}));class mo{constructor(t,i,r){this._itemByteSize=t,this._itemCreate=i,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this._itemByteSize)}get(){this._itemsPtr===0&&Ff(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const i=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let r=0;r<this._itemsPerBuffer;++r)this._items.push(this._itemCreate(i,r*this._itemByteSize));this._buffers.push(i)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=W1){return new mo(16,bU,t)}static createVec3f64(t=W1){return new mo(24,Nk,t)}static createVec4f64(t=W1){return new mo(32,XV,t)}static createMat3f64(t=W1){return new mo(72,pW,t)}static createMat4f64(t=W1){return new mo(128,fW,t)}static createQuatf64(t=W1){return new mo(32,yW,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const W1=4*ym.KILOBYTES,yCe=mo.createVec2f64(),Sn=mo.createVec3f64(),s4e=mo.createVec4f64();mo.createMat3f64();const o4e=mo.createMat4f64(),gCe=mo.createQuatf64();function Mx(e){return e?gW(jc(e.origin),jc(e.direction)):gW(Qe(),Qe())}function gW(e,t){return{origin:e,direction:t}}function mCe(e,t){const i=u4e.get();return i.origin=e,i.direction=t,i}function vCe(e,t=Mx()){return a4e(e.origin,e.direction,t)}function bCe(e,t,i=Mx()){return $s(i.origin,e),Xr(i.direction,t,e),i}function a4e(e,t,i=Mx()){return $s(i.origin,e),$s(i.direction,t),i}function wCe(e,t){const i=Qr(Sn.get(),En(Sn.get(),e.direction),Xr(Sn.get(),t,e.origin));return pi(i,i)}function l4e(e,t,i){const r=pi(e.direction,Xr(i,t,e.origin));return Xs(i,e.origin,Qs(i,e.direction,r)),i}const u4e=new K9e(()=>Mx());function _Ce(e,t,i){const r=pi(e,t)/pi(e,e);return Qs(i,e,r)}function Nv(e,t){return pi(e,t)/Oo(e)}function mW(e,t){const i=pi(e,t)/(Oo(e)*Oo(t));return-_S(i)}function xCe(e,t,i){En($x,e),En(fI,t);const r=pi($x,fI),s=_S(r),l=Qr($x,$x,fI);return pi(l,i)<0?2*Math.PI-s:s}const $x=Qe(),fI=Qe();function yI(){return i1()}function vW(e,t=yI()){return n2(t,e)}function c4e(e,t){return Ia(e[0],e[1],e[2],t)}function h4e(e){return e}function p4e(e){e[0]=e[1]=e[2]=e[3]=0}function d4e(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e}function Ex(e){return e[3]}function Qu(e){return e}function f4e(e,t,i,r){return Ia(e,t,i,r)}function y4e(e,t,i){return e!==i&&$s(i,e),i[3]=e[3]+t,i}function g4e(e,t,i){return Ae.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e===i?i:vW(e,i)}function Ix(e,t,i){if(ae(t))return!1;const{origin:r,direction:s}=t,l=m4e;l[0]=r[0]-e[0],l[1]=r[1]-e[1],l[2]=r[2]-e[2];const y=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(y===0)return!1;const d=2*(s[0]*l[0]+s[1]*l[1]+s[2]*l[2]),v=d*d-4*y*(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]-e[3]*e[3]);if(v<0)return!1;const _=Math.sqrt(v);let M=(-d-_)/(2*y);const T=(-d+_)/(2*y);return(M<0||T<M&&T>0)&&(M=T),!(M<0)&&(i&&(i[0]=r[0]+s[0]*M,i[1]=r[1]+s[1]*M,i[2]=r[2]+s[2]*M),!0)}const m4e=Qe();function v4e(e,t){return Ix(e,t,null)}function b4e(e,t,i){if(Ix(e,t,i))return i;const r=bW(e,t,Sn.get());return Xs(i,t.origin,Qs(Sn.get(),t.direction,r0(t.origin,r)/Oo(t.direction))),i}function bW(e,t,i){const r=Sn.get(),s=o4e.get();Qr(r,t.origin,t.direction);const l=Ex(e);Qr(i,r,t.origin),Qs(i,i,1/Oo(i)*l);const y=_W(e,t.origin),d=mW(t.origin,i);return TL(s,d+y,r),Wk(i,i,s),i}function w4e(e,t,i){return Ix(e,t,i)?i:(l4e(t,Qu(e),i),wW(e,i,i))}function wW(e,t,i){const r=Xr(Sn.get(),t,Qu(e)),s=Qs(Sn.get(),r,e[3]/Oo(r));return Xs(i,s,Qu(e))}function _4e(e,t){const i=Xr(Sn.get(),t,Qu(e)),r=dS(i),s=e[3]*e[3];return Math.sqrt(Math.abs(r-s))}function _W(e,t){const i=Xr(Sn.get(),t,Qu(e)),r=Oo(i),s=Ex(e),l=s+Math.abs(s-r);return _S(s/l)}const gI=Qe();function xW(e,t,i,r){const s=Xr(gI,t,Qu(e));switch(i){case Xu.X:{const l=uR(s,gI)[2];return Nr(r,-Math.sin(l),Math.cos(l),0)}case Xu.Y:{const l=uR(s,gI),y=l[1],d=l[2],v=Math.sin(y);return Nr(r,-v*Math.cos(d),-v*Math.sin(d),Math.cos(y))}case Xu.Z:return En(r,s);default:return}}function SW(e,t){const i=Xr(mI,t,Qu(e));return Oo(i)-e[3]}function x4e(e,t,i,r){const s=SW(e,t),l=xW(e,t,Xu.Z,mI),y=Qs(mI,l,i-s);return Xs(r,t,y)}function S4e(e,t){const i=Dc(Qu(e),t),r=Ex(e);return i<=r*r}const mI=Qe(),M4e=yI();Object.freeze(Object.defineProperty({__proto__:null,create:yI,copy:vW,fromCenterAndRadius:c4e,wrap:h4e,clear:p4e,fromRadius:d4e,getRadius:Ex,getCenter:Qu,fromValues:f4e,elevate:y4e,setExtent:g4e,intersectRay:Ix,intersectsRay:v4e,intersectRayClosestSilhouette:b4e,closestPointOnSilhouette:bW,closestPoint:w4e,projectPoint:wW,distanceToSilhouette:_4e,angleToSilhouette:_W,axisAt:xW,altitudeAt:SW,setAltitudeAt:x4e,containsPoint:S4e,tmpSphere:M4e},Symbol.toStringTag,{value:"Module"}));function SCe(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],i=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}function MCe(e,t){const i=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),r=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),s=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return Nr(e,i,r,s),e}function $4e(e,t,i){Math.abs(e[0])>Math.abs(e[1])?Nr(t,0,1,0):Nr(t,1,0,0),Qr(i,e,t),En(t,t),Qr(t,i,e),En(i,i)}function Tx(e=Dv){return[e[0],e[1],e[2],e[3]]}function $Ce(e=Dv[0],t=Dv[1],i=Dv[2],r=Dv[3]){return MW(e,t,i,r,s4e.get())}function Cx(e,t){return MW(t[0],t[1],t[2],t[3],e)}function MW(e,t,i,r,s=Tx()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function $W(e,t,i){const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=-(i[0]*e[0]+i[1]*e[1]+i[2]*e[2]),i}function E4e(e,t,i,r=Tx()){const s=i[0]-t[0],l=i[1]-t[1],y=i[2]-t[2],d=e[0]-t[0],v=e[1]-t[1],_=e[2]-t[2],M=l*_-y*v,T=y*d-s*_,A=s*v-l*d,R=M*M+T*T+A*A,F=Math.abs(R-1)>1e-5&&R>1e-12?1/Math.sqrt(R):1;return r[0]=M*F,r[1]=T*F,r[2]=A*F,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function I4e(e,t,i,r,s){if(e.count<3)return!1;e.getVec(i,jv);let l=r,y=!1;for(;l<e.count-1&&!y;)e.getVec(l,J1),l++,y=!e2(jv,J1);if(!y)return!1;for(l=Math.max(l,s),y=!1;l<e.count&&!y;)e.getVec(l,Kd),l++,Xr(Ax,jv,J1),En(Ax,Ax),Xr(Px,J1,Kd),En(Px,Px),y=!e2(jv,Kd)&&!e2(J1,Kd)&&Math.abs(pi(Ax,Px))<T4e;return y?(E4e(jv,J1,Kd,t),!0):(i!==0||r!==1||s!==2)&&I4e(e,t,0,1,2)}const T4e=.99619469809,jv=Qe(),J1=Qe(),Kd=Qe(),Ax=Qe(),Px=Qe();function ECe(e,t,i){return t!==e&&Cx(e,t),e[3]=-pi(Xo(e),i),e}function ICe(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function TCe(e,t,i,r){return Qr(Kd,t,e),$W(i,Kd,r)}function C4e(e,t,i,r){return Ox(e,t,Xr(Sn.get(),i,t),O4e,r)}function CCe(e,t,i){return!!q(t)&&Ox(e,t.origin,t.direction,k4e,i)}function ACe(e,t,i){return Ox(e,t.origin,t.vector,Nl.NONE,i)}function PCe(e,t,i){return Ox(e,t.origin,t.vector,Nl.CLAMP,i)}function A4e(e,t){return Z1(e,t)>=0}function OCe(e,t){const i=pi(Xo(e),t.ray.direction),r=-Z1(e,t.ray.origin);if(i>-1e-6&&i<1e-6)return r>0;const s=r/i;return i>0?s<t.c1&&(t.c1=s):s>t.c0&&(t.c0=s),t.c0<=t.c1}function kCe(e,t,i){const r=Qs(Sn.get(),Xo(e),-e[3]),s=P4e(e,Xr(Sn.get(),t,r),Sn.get());return Xs(i,s,r),i}function RCe(e,t,i,r){const s=Xo(e),l=Sn.get(),y=Sn.get();$4e(s,l,y);const d=Xr(Sn.get(),i,t),v=Nv(l,d),_=Nv(y,d),M=Nv(s,d);return Nr(r,v,_,M)}function P4e(e,t,i){const r=Qs(Sn.get(),Xo(e),pi(Xo(e),t));return Xr(i,t,r),i}function Z1(e,t){return pi(Xo(e),t)+e[3]}function Ox(e,t,i,r,s){const l=pi(Xo(e),i);if(l===0)return!1;let y=-(pi(Xo(e),t)+e[3])/l;return r&Nl.CLAMP&&(y=Tn(y,0,1)),!(!(r&Nl.INFINITE_MIN)&&y<0||!(r&Nl.INFINITE_MAX)&&y>1)&&(Xs(s,t,Qs(s,i,y)),!0)}function Xo(e){return e}const Dv=[0,0,1,0];var Nl;(function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.INFINITE_MIN=4]="INFINITE_MIN",e[e.INFINITE_MAX=8]="INFINITE_MAX"})(Nl||(Nl={}));const O4e=Nl.INFINITE_MIN|Nl.INFINITE_MAX,k4e=Nl.INFINITE_MAX;function vI(e,t){return e[0]*t[1]-e[1]*t[0]}function R4e(e,t,i){const r=Vu(i,t)/Fh(i);return x1(e,i,r)}function bI(e,t,i,r,s=i){return ur(K1,r,i),ur(wI,t,s),R4e(kx,wI,K1),fE(e,s,kx)}function F4e(e,t,i,r){ur(K1,t,i);const s=r/bv(K1);return Oa(e,i,K1,s)}function L4e(e,t){const i=e.start,r=e.end,s=t.start,l=t.end,y=ur(K1,r,i),d=ur(j4e,l,s),v=vI(y,d);if(Math.abs(v)<=N4e)return[];const _=ur(wI,i,s),M=vI(d,_)/v,T=vI(y,_)/v;if(M>=0){if(T>=0||t.type===hr.LINE)return[Oa(kx,i,y,M)]}else if(e.type===hr.LINE&&(T>=0||t.type===hr.LINE))return[Oa(kx,i,y,M)];return[]}var hr;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(hr||(hr={}));const N4e=1e-6,K1=Ht(),j4e=Ht(),wI=Ht(),kx=Ht();class Rx{constructor(t,i,r,s=0,l=Vv.IMMEDIATE){this._helper=t,this._planeType=i,this._edge=r,this.distance=s,this._plane=Tx(),this._offsetPlane=Tx(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,l===Vv.IMMEDIATE&&this._initialize()}get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var l,y,d,v;const t=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((y=(l=this._edge.leftVertex.leftEdge)==null?void 0:l.leftVertex)==null?void 0:y.pos),r=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ((v=(d=this._edge.rightVertex.rightEdge)==null?void 0:d.rightVertex)==null?void 0:v.pos);this._edgeDirection=gS(Qe(),t,r),this._left=this._computeNeighbor(t,i,this._edgeDirection),this._right=this._computeNeighbor(r,s,this._edgeDirection)}_toXYZ(t){return q(t)?this._helper.toXYZ(t):null}_pointToXYZ(t){return this._toXYZ(this._helper.pointToVector(t))}_computeNeighbor(t,i,r){if(ae(i))return{start:t,end:i,direction:Ar(-r[1],r[0],0),isOriginalDirection:!0};const s=gS(Qe(),t,i),l=!this._passesBisectingAngleThreshold(s,r);return{start:t,end:i,direction:l?this._bisectVectorsPerpendicular(r,s):s,isOriginalDirection:!l}}_passesBisectingAngleThreshold(t,i){const r=Math.abs(mW(i,t));return r>=EW&&r<=Math.PI-EW}_bisectVectorsPerpendicular(t,i){const r=pi(t,i)<0?t:fS(Qe(),t),s=Math.abs(pi(r,i));if(!(s<IW||s>1-IW))return this._bisectDirection(r,i);const l=Qr(Qe(),r,[0,0,1]);return En(l,l)}_bisectDirection(t,i){const r=Xs(Qe(),t,i);return En(r,r)}_initializePlane(){const t=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);pi(t,i)<0&&fS(i,i),$W(this._left.start,this._bisectDirection(t,i),this._plane)}_computeNormalDirection(t){const i=Qr(Qe(),t.direction,this._edgeDirection);En(i,i);const r=Qr(Qe(),this._edgeDirection,i);return this._planeType===_I.XY&&(r[2]=0),En(r,r)}_initializeDistanceConstraints(){q(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(Z1(this._plane,this._left.end)),q(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(Z1(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(t){t<=0&&(this._minDistance=Math.max(this._minDistance,t)),t>=0&&(this._maxDistance=Math.min(this._maxDistance,t))}_updateIntersectDistanceConstraint(t){const i=Xo(t),r=this._edgeDirection,s=Xs(Qe(),this._left.start,this._left.direction),l=Xs(Qe(),this._right.start,this._right.direction),y=this._pointInBasis2D(Ht(),i,r,this._left.start),d=this._pointInBasis2D(Ht(),i,r,s),v=this._pointInBasis2D(Ht(),i,r,this._right.start),_=this._pointInBasis2D(Ht(),i,r,l),[M]=L4e({start:d,end:y,type:hr.LINE},{start:_,end:v,type:hr.LINE});if(!M)return;const T=ur(Ht(),y,d);Z_(T,T);const A=ur(Ht(),M,d),R=Vu(T,A),F=Xs(Qe(),s,Qs(Qe(),this._left.direction,-R)),V=Z1(t,F);this._updateDistanceConstraint(V)}_pointInBasis2D(t,i,r,s){return t[0]=Nv(i,s),t[1]=Nv(r,s),t}_offset(t,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),Cx(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const r=(l,y,d)=>q(y)&&C4e(this._offsetPlane,l,Xs(Qe(),l,y),d),s=Qe();(t===this._edge.leftVertex?r(this._left.start,this._left.direction,s):r(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(t.pos)),t.pos)}selectArrowFromStartPoint(t){this._selectedArrow=A4e(this.plane,this._pointToXYZ(t))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(t){return Z1(this.plane,this._pointToXYZ(t))}apply(t){this._offset(t,this.distance)}undo(t){this._offset(t,0)}canAccumulate(t){return t instanceof Rx&&this._edge.leftVertex.index===t._edge.leftVertex.index&&this._edge.rightVertex.index===t._edge.rightVertex.index&&this._edge.component===t._edge.component&&this._maybeEqualsVec3(this._left.direction,t._left.direction)&&this._maybeEqualsVec3(this._right.direction,t._right.direction)&&t2(Xo(this._plane),Xo(t._plane))}accumulate(t,i){const r=this._plane[3]-i._plane[3]+i.distance;this._offset(t,r)}accumulateParams(t){const i=t.distance-t._plane[3];this.distance=i+this._plane[3]}clone(){const t=new Rx(this._helper,this._planeType,this._edge,this.distance,Vv.DEFERRED);return Cx(t._plane,this._plane),Cx(t._offsetPlane,this._offsetPlane),t._maxDistance=this._maxDistance,t._minDistance=this._minDistance,t._left=this._cloneNeighbor(this._left),t._right=this._cloneNeighbor(this._right),t._edgeDirection=$s(Qe(),this._edgeDirection),t}_maybeEqualsVec3(t,i){return ae(t)&&ae(i)||q(t)&&q(i)&&t2(t,i)}_cloneNeighbor({start:t,end:i,direction:r,isOriginalDirection:s}){return{start:$s(Qe(),t),end:q(i)?$s(Qe(),i):null,direction:$s(Qe(),r),isOriginalDirection:s}}}const EW=oR(15),IW=.001;var _I,Vv;(function(e){e[e.XYZ=0]="XYZ",e[e.XY=1]="XY"})(_I||(_I={})),function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.DEFERRED=1]="DEFERRED"}(Vv||(Vv={}));class xI{constructor(t,i,r=Ll.CUMULATIVE){this.origin=t,this.angle=i,this._accumulationType=r}_rotate(t,i){gU(t.pos,t.pos,this.origin,i)}apply(t){this._rotate(t,this.angle)}undo(t){this._rotate(t,-this.angle)}canAccumulate(t){return t instanceof xI&&Mc(this.origin,t.origin)}accumulate(t,i){const r=i._accumulationType===Ll.REPLACE;this._rotate(t,r?i.angle-this.angle:i.angle)}accumulateParams(t){const i=t._accumulationType===Ll.REPLACE;this.angle=i?t.angle:this.angle+t.angle}}class SI{constructor(t,i,r,s,l=Ll.CUMULATIVE){this.origin=t,this.axis1=i,this.factor1=r,this.factor2=s,this._accumulationType=l,this.axis2=zu(i[1],-i[0])}_scale(t,i,r){mE(t.pos,t.pos,this.origin,this.axis1,i),mE(t.pos,t.pos,this.origin,this.axis2,r)}apply(t){this._scale(t,this.factor1,this.factor2)}undo(t){this._scale(t,1/this.factor1,1/this.factor2)}canAccumulate(t){return t instanceof SI&&Mc(this.origin,t.origin)&&Mc(this.axis1,t.axis1)}accumulate(t,i){i._accumulationType===Ll.REPLACE?this._scale(t,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(t,i.factor1,i.factor2)}accumulateParams(t){const i=t._accumulationType===Ll.REPLACE;this.factor1=i?t.factor1:this.factor1*t.factor1,this.factor2=i?t.factor2:this.factor2*t.factor2}}class D4e{constructor(){this._operations=[],this._closed=!1}close(){this._closed=!0}apply(){for(const t of this._operations)t.apply()}undo(){for(let t=this._operations.length-1;t>=0;t--)this._operations[t].undo()}accumulate(t){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(t)||(this._operations.push(t),t.apply()),!0}}class zv extends fn{constructor(t){super(),this.data=t,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",i=>{i.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:i.addedVertices,operation:i.operation}),i.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:i.removedVertices,operation:i.operation}),i.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:i.updatedVertices,operation:i.operation})})}destroy(){this._listener.remove()}splitEdge(t,i){return this._apply(new J9e(this.data,t,i))}updateVertices(t,i,r=Yu.ACCUMULATE_STEPS){return this._apply(new hI(this.data,t,i),r)}moveVertices(t,i,r,s,l=Yu.ACCUMULATE_STEPS){return this.updateVertices(t,new dI(this.data.coordinateHelper,i,r,s),l)}scaleVertices(t,i,r,s,l,y=Yu.ACCUMULATE_STEPS,d=Ll.CUMULATIVE){return this.updateVertices(t,new SI(i,r,s,l,d),y)}rotateVertices(t,i,r,s=Yu.ACCUMULATE_STEPS,l=Ll.CUMULATIVE){return this.updateVertices(t,new xI(i,r,l),s)}removeVertices(t){return this._apply(new W9e(this.data,t,this._minNumVerticesPerType))}appendVertex(t){return this.data.components.length===0?null:this._apply(new H9e(this.data,this.data.components[0],t))}setVertexPosition(t,i){return this._apply(new pI(this.data,t,i))}offsetEdge(t,i,r,s=Yu.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new Rx(this.data.coordinateHelper,t,i,r),s)}closeComponent(t){return this.data.components.includes(t)?this._apply(new Z9e(this.data,t)):null}canRemoveVertex(){return this.data.components[0].vertices.length>this._minNumVerticesPerType}createUndoGroup(){const t=new D4e;return this._apply(t),{remove:()=>t.close()}}undo(){if(this._undoStack.length>0){const t=this._undoStack.pop();return t.undo(),this._redoStack.push(t),t}return null}redo(){if(this._redoStack.length>0){const t=this._redoStack.pop();return t.apply(),this._undoStack.push(t),t}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(t,i=Yu.ACCUMULATE_STEPS){return i!==Yu.NEW_STEP&&!ae(this.lastOperation)&&this.lastOperation.accumulate(t)||(t.apply(),this._undoStack.push(t),this._redoStack=[]),t}static fromGeometry(t,i){return new zv(B1.fromGeometry(t,i))}}class Fx{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}}let Bh=class extends ot{constructor(e){super(e),this.constrainResult=t=>t,this._snapPoints=null,this._abortController=null,this._stagedPoint=null,this._snap=yw(async(t,i,r,s)=>{const l=await this._frameTask.schedule(()=>i.snap(De(te({},t),{context:r,signal:s})),s);l.valid&&await this._frameTask.schedule(()=>{this.stagedPoint=l.apply(),t!==this._snapPoints&&q(this._snapPoints)&&(this.stagedPoint=i.update(De(te({},this._snapPoints),{context:r})))},s)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var t,i;const e=this.view.type==="3d"?(i=(t=this.view)==null?void 0:t.resourceController)==null?void 0:i.scheduler:null;this._frameTask=q(e)?e.registerTask(Yt.SNAPPING):gv}destroy(){this._abortController=Wa(this._abortController),this._frameTask=Tr(this._frameTask)}async snap(e,t,i){const{point:r,scenePoint:s}=e;return this.stagedPoint=t.update({point:r,scenePoint:s,context:i}),this._snapPoints=e,ae(this._abortController)&&(this._abortController=new AbortController),this._snap(e,t,i,this._abortController.signal)}abort(){this._abortController=Wa(this._abortController)}};m([x({constructOnly:!0})],Bh.prototype,"view",void 0),m([x()],Bh.prototype,"stagedPoint",null),m([x()],Bh.prototype,"constrainResult",void 0),m([x()],Bh.prototype,"_stagedPoint",void 0),Bh=m([Y("esri.views.interactive.snapping.SnappingOperation")],Bh);var MI;let gs=MI=class extends fn.EventedAccessor{constructor(e){var t;super(e),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new Jr,this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=cI(e.hasZ,!1,e.view.spatialReference),this._snappingManager=e.snappingManager,this._editGeometryOperations=new zv(new B1((t=e.editGeometryType)!=null?t:"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new WB({id:MI.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new Fx({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new k9e(this._snappingGraphicsLayer)}),this._activeComponent=new U1(e.view.spatialReference,ju.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(e){const t=te({},e);return delete t.editGeometryType,t}initialize(){this._snappingOperation=new Bh({view:this.view}),this.view.type==="2d"&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=oi(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map(e=>e.pos)}get vertices(){return q(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return q(this._hasZ)?this._hasZ:this.view.type==="3d"}set hasZ(e){this._hasZ=e,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(e){this._snappingOperation.stagedPoint=me(e)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(e){const t=this.screenToMap(e);return ae(t)?null:t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]}getCoordsAndPointFromScreenPoint(e){const t=this.screenToMap(e);return ae(t)?null:t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}}screenToMap(e){let t=null;if(this.view.type==="3d")if(this.hasZ){const i=hn(this.elevationInfo,V4e);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Sg(e.x,e.y),i,this._getGeometryZValue())}else{const i=hn(this.elevationInfo,z4e);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Sg(e.x,e.y),i,0),q(t)&&(t.z=void 0)}else t=this.view.toMap(e),q(t)&&(t.z=this.hasZ?this._getGeometryZValue():void 0);return t}_pushCursorVertex(e,t){const i=wx(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=i;const r=this._snappingManager;if(ae(r))return this._stagedVertex=i,void t();Xl(this._snappingOperation.snap({point:i},r,this._snappingContext)).then(()=>{t()})}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(e){const t=this._editGeometryOperations.data.components[0].getLastVertex();if(q(t)&&e[0]===t[0]&&e[1]===t[1])return!0;const{x:i,y:r}=this._coordinateHelper.vectorToDehydratedPoint(e);return!(!q(this._lastVertexUnsnapped)||i!==this._lastVertexUnsnapped.x||r!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(e){return this._isPrimaryPointerAction(e)&&(ae(this._activePointerId)||this._activePointerId===e.pointerId)}_vertexAddHandler(e){const t=q(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);q(t)&&this._addVertex(t,e.native)}_drawCompleteHandler(e){this._completeDrawing(e.native)}_isPrimaryPointerAction(e){return e.pointerType!=="mouse"||e.button===0}};gs.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",m([x({readOnly:!0})],gs.prototype,"vertices",null),m([x({type:Boolean,nonNullable:!0})],gs.prototype,"interactiveUndoDisabled",void 0),m([x({readOnly:!0})],gs.prototype,"history",void 0),m([x({readOnly:!0})],gs.prototype,"redoHistory",void 0),m([x()],gs.prototype,"snapToScene",void 0),m([x()],gs.prototype,"view",void 0),m([x()],gs.prototype,"elevationInfo",void 0),m([x({nonNullable:!0})],gs.prototype,"defaultZ",void 0),m([x()],gs.prototype,"hasZ",null),m([x()],gs.prototype,"_snappingOperation",void 0),m([x()],gs.prototype,"_stagedVertex",null),gs=MI=m([Y("esri.views.draw.DrawAction")],gs);const V4e={mode:"absolute-height",offset:0},z4e={mode:"on-the-ground",offset:0},Gv=gs;class jl{constructor(t,i,r,s){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}class $I{constructor(t,i,r,s){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}}class ec{constructor(t,i,r,s,l=null){this.view=t,this.native=i,this.vertexIndex=r,this.vertices=s,this.mapPoint=l,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=s.length===1?s[0]:null}preventDefault(){this.defaultPrevented=!0}}class tc{constructor(t,i){this.native=t,this.vertices=i,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=i.length===1?i[0]:null}preventDefault(){this.defaultPrevented=!0}}const It={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};let EI=class extends Gv{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===It.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==It.complete||i?t!==It.undo||this.interactiveUndoDisabled||i?t!==It.redo||this.interactiveUndoDisabled||i?t!==It.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},rt.TOOL),this.view.on("key-up",e=>{e.key===It.pan&&e.stopPropagation()},rt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new $I(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new jl(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new jl(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new ec(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new tc(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};EI=m([Y("esri.views.draw.MultipointDrawAction")],EI);const TW=["freehand","hybrid","click"],Lx="click";class G4e{constructor({grabbableForEvent:t}){this.events=new fn,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,i){return 0}attach(){}detach(){}}function q4e(e){return"declaredClass"in e}function CW(e){return"declaredClass"in e}function U4e(e){return"declaredClass"in e}function FCe(e,t){if(!e)return null;if(U4e(e))return e;const i=new jr({layer:t,sourceLayer:t});return i.visible=e.visible,i.symbol=me(e.symbol),i.attributes=me(e.attributes),i.geometry=B4e(e.geometry),i}function B4e(e){return ae(e)?null:q4e(e)?e:dn(H4e(e))}function H4e(e){const{wkid:t,wkt:i,latestWkid:r}=e.spatialReference,s={wkid:t,wkt:i,latestWkid:r};switch(e.type){case"point":{const{x:l,y,z:d,m:v}=e;return{x:l,y,z:d,m:v,spatialReference:s}}case"polygon":{const{rings:l,hasZ:y,hasM:d}=e;return{rings:AW(l),hasZ:y,hasM:d,spatialReference:s}}case"polyline":{const{paths:l,hasZ:y,hasM:d}=e;return{paths:AW(l),hasZ:y,hasM:d,spatialReference:s}}case"extent":{const{xmin:l,xmax:y,ymin:d,ymax:v,zmin:_,zmax:M,mmin:T,mmax:A,hasZ:R,hasM:F}=e;return{xmin:l,xmax:y,ymin:d,ymax:v,zmin:_,zmax:M,mmin:T,mmax:A,hasZ:R,hasM:F,spatialReference:s}}case"multipoint":{const{points:l,hasZ:y,hasM:d}=e;return{points:OW(l)?PW(l):l,hasZ:y,hasM:d,spatialReference:s}}default:return}}function AW(e){return W4e(e)?e.map(t=>PW(t)):e}function PW(e){return e.map(t=>Fie(t))}function W4e(e){for(const t of e)if(t.length!==0)return OW(t);return!1}function OW(e){return e.length&&(oP(e[0])||aP(e[0]))}function II(e,t){if(!e)return null;let i;if(CW(e)){if(t==null)return e.clone();if(CW(t))return t.copy(e)}return t!=null?(i=t,i.x=e.x,i.y=e.y,i.spatialReference=e.spatialReference,e.hasZ?(i.z=e.z,i.hasZ=e.hasZ):(i.z=null,i.hasZ=!1),e.hasM?(i.m=e.m,i.hasM=!0):(i.m=null,i.hasM=!1)):(i=wx(e.x,e.y,e.z,e.spatialReference),e.hasM&&(i.m=e.m,i.hasM=!0)),i}function J4e(e){const{wkid:t,wkt:i,latestWkid:r}=e,s={wkid:t,wkt:i,latestWkid:r};return At.fromJSON(s)}function Y1(e,t,i,r){if(r==null||e.hasZ||(r=void 0),e.type==="point")return e.x+=t,e.y+=i,e.hasZ&&r!=null&&(e.z+=r),e;if(e.type==="multipoint"){const y=e.points;for(let d=0;d<y.length;d++)y[d]=kW(y[d],t,i,r);return e}if(e.type==="extent")return e.xmin+=t,e.xmax+=t,e.ymin+=i,e.ymax+=i,r!=null&&(e.zmin+=r,e.zmax+=r),e;const s=Bf(e),l=e.type==="polyline"?e.paths:e.rings;for(let y=0;y<s.length;y++){const d=s[y];for(let v=0;v<d.length;v++)d[v]=kW(d[v],t,i,r)}return"paths"in e?e.paths=l:e.rings=l,e}function LCe(e,t,i,r,s){const l=e.clone(),y=r.resolution;if(l.type==="point"){if(s)Y1(l,t*y,-i*y);else{const d=r.state.transform,v=r.state.inverseTransform,_=d[0]*l.x+d[2]*l.y+d[4],M=d[1]*l.x+d[3]*l.y+d[5];l.x=v[0]*(_+t)+v[2]*(M+i)+v[4],l.y=v[1]*(_+t)+v[3]*(M+i)+v[5]}return l}if(l.type==="multipoint"){if(s)Y1(l,t*y,-i*y);else{const d=l.points,v=r.state.transform,_=r.state.inverseTransform;for(let M=0;M<d.length;M++){const T=d[M],A=v[0]*T[0]+v[2]*T[1]+v[4],R=v[1]*T[0]+v[3]*T[1]+v[5],F=_[0]*(A+t)+_[2]*(R+i)+_[4],V=_[1]*(A+t)+_[3]*(R+i)+_[5];d[M]=qv(T,F,V,void 0)}}return l}if(l.type==="extent"){if(s)Y1(l,t*y,-i*y);else{const d=r.state.transform,v=r.state.inverseTransform,_=d[0]*l.xmin+d[2]*l.ymin+d[4],M=d[1]*l.xmin+d[3]*l.ymin+d[5],T=d[0]*l.xmax+d[2]*l.ymax+d[4],A=d[1]*l.xmax+d[3]*l.ymax+d[5];l.xmin=v[0]*(_+t)+v[2]*(M+i)+v[4],l.ymin=v[1]*(_+t)+v[3]*(M+i)+v[5],l.xmax=v[0]*(T+t)+v[2]*(A+i)+v[4],l.ymax=v[1]*(T+t)+v[3]*(A+i)+v[5]}return l}if(s)Y1(l,t*y,-i*y);else{const d=Bf(l),v=l.type==="polyline"?l.paths:l.rings,_=r.state.transform,M=r.state.inverseTransform;for(let T=0;T<d.length;T++){const A=d[T];for(let R=0;R<A.length;R++){const F=A[R],V=_[0]*F[0]+_[2]*F[1]+_[4],z=_[1]*F[0]+_[3]*F[1]+_[5],W=M[0]*(V+t)+M[2]*(z+i)+M[4],Z=M[1]*(V+t)+M[3]*(z+i)+M[5];A[R]=qv(F,W,Z,void 0)}}"paths"in l?l.paths=v:l.rings=v}return l}function NCe(e,t,i,r){if(e.type==="point"){const{x:F,y:V}=e,z=r?r[0]:F,W=r?r[1]:V,Z=e.clone(),Q=(F-z)*t+z,ee=(V-W)*i+W;return Z.x=Q,Z.y=ee,Z}if(e.type==="multipoint"){const F=Bf(e),V=Ro(),[z,W,Z,Q]=Oc(V,[F]),ee=r?r[0]:(z+Z)/2,re=r?r[1]:(Q+W)/2,ie=e.clone(),he=ie.points;for(let be=0;be<he.length;be++){const we=he[be],[xe,$e]=we,je=(xe-ee)*t+ee,it=($e-re)*i+re;he[be]=qv(we,je,it,void 0)}return ie}if(e.type==="extent"){const{xmin:F,xmax:V,ymin:z,ymax:W}=e,Z=r?r[0]:(F+V)/2,Q=r?r[1]:(W+z)/2,ee=e.clone();if(ee.xmin=(F-Z)*t+Z,ee.ymax=(W-Q)*i+Q,ee.xmax=(V-Z)*t+Z,ee.ymin=(z-Q)*i+Q,ee.xmin>ee.xmax){const re=ee.xmin,ie=ee.xmax;ee.xmin=ie,ee.xmax=re}if(ee.ymin>ee.ymax){const re=ee.ymin,ie=ee.ymax;ee.ymin=ie,ee.ymax=re}return ee}const s=Bf(e),l=Ro(),[y,d,v,_]=Oc(l,s),M=r?r[0]:(y+v)/2,T=r?r[1]:(_+d)/2,A=e.clone(),R=A.type==="polyline"?A.paths:A.rings;for(let F=0;F<s.length;F++){const V=s[F];for(let z=0;z<V.length;z++){const W=V[z],[Z,Q]=W,ee=(Z-M)*t+M,re=(Q-T)*i+T;R[F][z]=qv(W,ee,re,void 0)}}return"paths"in A?A.paths=R:A.rings=R,A}function jCe(e,t,i,r,s,l){const y=Math.sqrt((i-e)*(i-e)+(r-t)*(r-t));return Math.sqrt((s-e)*(s-e)+(l-t)*(l-t))/y}function DCe(e,t,i){const r=Math.atan2(t.y-i.y,t.x-i.x)-Math.atan2(e.y-i.y,e.x-i.x),s=Math.atan2(Math.sin(r),Math.cos(r));return wS(s)}function kW(e,t,i,r){return qv(e,e[0]+t,e[1]+i,e[2]!=null&&r!=null?e[2]+r:void 0)}function qv(e,t,i,r){const s=[t,i];return e.length>2&&s.push(r!=null?r:e[2]),e.length>3&&s.push(e[3]),s}function Z4e(e,t){let i=null,r=null;return s=>{if(s.action==="cancel")return void(q(r)&&(r.execute({action:"cancel"}),i=null,r=null));const l={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&ae(i)&&(i=new X1,r=new X1,t(e,i,r,s.pointerType,l)),q(i)&&i.execute(l),s.action==="end"&&q(i)&&(i=null,r=null)}}function TI(e,t){return e.events.on("drag",Z4e(e,t))}function VCe(e,t){const i=[e.x,e.y,e.z],r=t,s=[Math.cos(r),Math.sin(r)],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(l===0)return null;s[0]/=l,s[1]/=l;const y=d=>{const v=(d.x-i[0])*s[0]+(d.y-i[1])*s[1];d.x=i[0]+v*s[0],d.y=i[1]+v*s[1]};return d=>(y(d.mapStart),y(d.mapEnd),De(te({},d),{axis:s}))}function K4e(e,t){let i=null;return r=>{if(r.action==="start"&&(i=Y4e(e,r.mapStart.spatialReference,t)),ae(i))return null;const s=r.mapEnd.x-r.mapStart.x,l=r.mapEnd.y-r.mapStart.y,y=r.mapEnd.z-r.mapStart.z;return i.move(s,l,y),De(te({},r),{translationX:s,translationY:l,translationZ:y})}}function RW(e,t){return ae(e)?null:e.spatialReference.equals(t)?e.clone():Do(e,t)}function Y4e(e,t,i){const r=e.geometry,s=J4e(t);if(ae(r))return null;if(r.type==="mesh")return X4e(e,r,s,i);const l=RW(r,s),y=r.spatialReference;return ae(l)?null:{move:(d,v,_)=>{const M=Y1(l.clone(),d,v,_);M.spatialReference.equals(y)?e.geometry=M:e.geometry=Do(M,y)}}}function X4e(e,t,i,r){if(q(t.transform))return Q4e(e,t,t.transform,i);if(!t.spatialReference.equals(i))return null;let s=0,l=0,y=0;return{move:(d,v,_)=>{const M=d-s,T=v-l,A=_-y;if(M||T||A){const R=new dt(t.origin.x+M,t.origin.y+T,t.origin.z+A,t.origin.spatialReference);t.centerAt(R,{geographic:r===ju.Global}),e.notifyGeometryChanged(),s=d,l=v,y=_}}}}function Q4e(e,t,i,r){const s=RW(i.getOriginPoint(t.spatialReference),r),l=t.spatialReference;return ae(s)?null:{move:(y,d,v)=>{const _=Y1(s.clone(),y,d,v);if(_.spatialReference.equals(l))i.origin=Ar(_.x,_.y,_.z);else{const M=Do(_,l);q(M)&&(i.origin=Ar(M.x,M.y,M.z))}e.notifyMeshTransformChanged(),e.notifyGeometryChanged()}}}function zCe(e,t){const i=e.map(r=>Wt(K4e(r,t))).filter(r=>q(r));return r=>{const s=r.mapEnd.x-r.mapStart.x,l=r.mapEnd.y-r.mapStart.y,y=r.mapEnd.z-r.mapStart.z;return i.forEach(d=>d(r)),De(te({},r),{translationX:s,translationY:l,translationZ:y})}}function eSe(e,t){const i=new Map;for(const r of t)i.set(r,me(e[r]));return r=>(i.forEach((s,l)=>{e[l]=s}),r)}function tSe(e){return q(e.geometry)&&e.geometry.type==="mesh"?iSe(e,e.geometry):eSe(e,["geometry"])}function iSe(e,t){const i=q(t.transform)?t.transform.clone():null,r=t.vertexAttributes.clonePositional();return s=>(t.transform=i,t.vertexAttributes=r,e.notifyGeometryChanged(),s)}function GCe(e){const t=e.map(i=>Wt(tSe(i))).filter(i=>q(i));return i=>(t.forEach(r=>r(i)),i)}function qCe(){let e=0,t=0,i=0;return r=>{r.action==="start"&&(e=r.mapStart.x,t=r.mapStart.y,i=r.mapStart.z);const s=r.mapEnd.x-e,l=r.mapEnd.y-t,y=r.mapEnd.z-i;return e=r.mapEnd.x,t=r.mapEnd.y,i=r.mapEnd.z,De(te({},r),{mapDeltaX:s,mapDeltaY:l,mapDeltaZ:y,mapDeltaSpatialReference:r.mapStart.spatialReference})}}function UCe(){let e=0,t=0;return i=>{i.action==="start"&&(e=i.screenStart.x,t=i.screenStart.y);const r=i.screenEnd.x-e,s=i.screenEnd.y-t;return e=i.screenEnd.x,t=i.screenEnd.y,De(te({},i),{screenDeltaX:r,screenDeltaY:s})}}function BCe(e,t){let i=null,r=0,s=0;return l=>{if(l.action==="start"&&(i=e.toScreen(t),i.x<0||i.x>e.width||i.y<0||i.y>e.height?i=null:(r=l.screenStart.x-i.x,s=l.screenStart.y-i.y)),i==null)return null;const y=Tn(l.screenEnd.x-r,0,e.width),d=Tn(l.screenEnd.y-s,0,e.height),v=Cn(y,d);return l.screenStart=i,l.screenEnd=v,l}}class X1{constructor(){this.execute=()=>{}}next(t,i=new X1){return q(t)&&(this.execute=r=>{const s=t(r);q(s)&&i.execute(s)}),i}}function rSe(e,t,i=[]){if(e.type==="2d")return s=>s;let r=null;return s=>{s.action==="start"&&(r=e.toMap(s.screenStart,{exclude:i}),q(r)&&(r.z=oI(r,e,t)));const l=e.toMap(s.screenEnd,{exclude:i});q(l)&&(l.z=oI(l,e,t));const y=q(r)&&q(l)?{sceneStart:r,sceneEnd:l}:null;return De(te({},s),{scenePoints:y})}}let Nx=class extends ot{constructor(e){super(e),this.enabled=!1}};m([x({type:Boolean,nonNullable:!0})],Nx.prototype,"enabled",void 0),Nx=m([Y("esri.views.interactive.sketch.SketchLabelOptions")],Nx);const jx=Nx;let Uv=class extends ot{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};m([x({type:String,nonNullable:!0})],Uv.prototype,"mode",void 0),Uv=m([Y("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],Uv);let vo=class extends ot{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};m([x({type:Boolean,nonNullable:!0})],vo.prototype,"distance",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"elevation",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"size",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"scale",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"rotation",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"orientation",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"totalLength",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"area",void 0),m([x({type:Boolean,nonNullable:!0})],vo.prototype,"radius",void 0),vo=m([Y("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],vo);let Yd=class extends ot{constructor(e){super(e),this.enabled=!1,this.elevation=new Uv,this.visibleElements=new vo,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};m([x({type:Boolean,nonNullable:!0})],Yd.prototype,"enabled",void 0),m([x({type:Uv,nonNullable:!0})],Yd.prototype,"elevation",void 0),m([x({type:vo,nonNullable:!0})],Yd.prototype,"visibleElements",void 0),m([x()],Yd.prototype,"visualVariables",void 0),Yd=m([Y("esri.widgets.Sketch.SketchTooltipOptions")],Yd);const Dx=Yd;class nSe{constructor(){this.next=new X1}createSnapDragEventPipelineStep({predicate:t=()=>!0,cancel:i,snappingManager:r,snappingContext:s,updatingHandles:l,useZ:y=!0}){if(ae(r))return F=>F;let d=null,v=null;const _=()=>{d=Wa(d),r.doneSnapping(),q(v)&&v.frameTask.remove(),v=null};i.next(F=>(_(),F)),this.next=new X1;const M=this._createSnapFunction(r,y);let T=null,A=null,R=null;return F=>{if(!t(F))return F;if(F.action==="start"){const V=this._createFrameTask(r.view);if(v=this._createSnappingInfo(s,F,V),v.context.selfSnappingZ=null,!y&&q(F.info)){const z=this._extractSelfSnappingZ(s.coordinateHelper,F.info.handle.component);q(z)&&(v.context.selfSnappingZ={value:z,elevationInfo:s.elevationInfo})}}if(q(v)){const{context:V,originalScenePos:z,originalPos:W}=v,{mapEnd:Z,mapStart:Q,action:ee,scenePoints:re}=F,ie=this._updatePosition(W,this._computeMapDelta(Z,Q)),he=this._computeMapDelta(Q,W),be=De(te({},F),{action:"update"}),we=v.context,xe=this._updateScenePosition(z,re),$e=r.update({point:ie,scenePoint:xe,context:V});if(R=$e,this._applySnappedUpdate(Z,$e,he,y),T=ie,A=xe,ee!=="end"){const{frameTask:je}=v;ae(d)&&(d=new AbortController),l.addPromise(Xl(M({frameTask:je,event:be,context:we,point:ie,scenePoint:xe,delta:he,lastPos:T,lastScenePos:A,lastUpdate:R},d.signal)))}}return F.action==="end"&&_(),F}}_createSnapFunction(t,i){return yw(async({frameTask:r,point:s,scenePoint:l,context:y,event:d,delta:v,lastPos:_,lastScenePos:M,lastUpdate:T},A)=>{const R=await r.schedule(()=>t.snap({point:s,scenePoint:l,context:y,signal:A}),A);if(R.valid){let F=await r.schedule(()=>R.apply(),A);s!==_&&q(_)&&(F=t.update({point:_,scenePoint:M,context:y})),eI(F,T)||(this._applySnappedUpdate(d.mapEnd,F,v,i),this.next.execute(d))}})}_createFrameTask(t){return t.type==="3d"?t.resourceController.scheduler.registerTask(Yt.SNAPPING):gv}_createSnappingInfo(t,i,r){return{context:new Fx({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:q(i.info)?i.info.handle:null,excludeFeature:t.excludeFeature,visualizer:t.visualizer}),originalPos:q(i.snapOrigin)?t.coordinateHelper.vectorToDehydratedPoint(i.snapOrigin):i.mapStart,originalScenePos:q(i.scenePoints)?i.scenePoints.sceneStart:null,frameTask:r}}_updatePosition(t,[i,r,s]){const l=II(t);return l.x+=i,l.y+=r,l.hasZ&&(l.z+=s),l}_updateScenePosition(t,i){return ae(t)||ae(i)?null:this._updatePosition(t,this._computeMapDelta(i.sceneEnd,i.sceneStart))}_computeMapDelta(t,i){const r=t.hasZ&&i.hasZ?t.z-i.z:0;return[t.x-i.x,t.y-i.y,r]}_applySnappedUpdate(t,i,[r,s,l],y){t.x=i.x+r,t.y=i.y+s,y&&t.hasZ&&i.hasZ&&(t.z=i.z+l)}_extractSelfSnappingZ(t,i){if(!t.hasZ())return null;const r=i.vertices;let s=null;for(const l of r){const y=t.getZ(l.pos);if(q(s)&&Math.abs(y-s)>1e-6)return null;ae(s)&&(s=y)}return s}}let rr=class extends fn.EventedMixin(ld){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new nSe,this.isDraped=!0,this.labelOptions=new jx,this.tooltipOptions=new Dx,this.snapToSceneEnabled=null,this.lastVertex=null,ae(e.elevationInfo)&&(this.elevationInfo=rI(e.hasZ))}initialize(){const{geometryType:e,view:t}=this,{spatialReference:i}=t,r="viewingMode"in t.state?t.state.viewingMode:ju.Local,s=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=cI(this.hasZ,this.hasM,i),this._editGeometryOperations=new zv(new B1(s,this.coordinateHelper)),this._snappingOperation=new Bh({view:t,constrainResult:y=>ae(y)?y:this._getEffectiveDrawSurface().constrainZ(y)}),this.handles.add(Ve(()=>this.stagedVertex,y=>{ae(y)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(y)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(y,d)=>iP(y,d,eI)})),this._activeComponent=new U1(i,r),this._editGeometryOperations.data.components.push(this._activeComponent);const l=this.segmentLabels;q(l)&&(l.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([Ve(()=>this.labelOptions.enabled,y=>{l.visible=y},As),this.on("cursor-update",()=>{const y=this.stagedVertex;l.stagedVertex=q(y)?this.coordinateHelper.pointToVector(y):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],y=>{const d=y.vertices.map(T=>({componentIndex:0,vertexIndex:T.index,coordinates:this.coordinateHelper.vectorToArray(T.pos)})),v=d.map(T=>T.coordinates);switch(y.type){case"vertex-add":this.emit(y.type,De(te({},y),{added:v,vertices:d}));break;case"vertex-update":this.emit(y.type,De(te({},y),{updated:v,vertices:d}));break;case"vertex-remove":this.emit(y.type,De(te({},y),{removed:v,vertices:d}))}const _=this._activeComponent.getLastVertex(),M=q(_)?this.coordinateHelper.vectorToDehydratedPoint(_.pos):null;(ae(M)||ae(this.lastVertex)||!eI(this.lastVertex,M))&&(this.lastVertex=M)})),this._manipulator=new G4e({grabbableForEvent:y=>this.drawingMode!=="click"||y.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1}),this.manipulators.add(this._manipulator),this._manipulator.grabbable=e!=="point",this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",y=>this._onImmediateClick(y)),this._manipulator.events.on("immediate-double-click",y=>this._onImmediateDoubleClick(y))])}destroy(){oi(this.segmentLabels),oi(this._snappingOperation),this._editGeometryOperations=oi(this._editGeometryOperations)}get _snappingEnabled(){return q(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._getEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}set drawingMode(e){this._set("drawingMode",e!=null?e:Lx)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return q(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=me(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return q(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),q(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),q(this.snappingManager)&&this.snappingManager.doneSnapping(),this.geometryType==="segment"||this.geometryType==="point"?this.commitStagedVertex():this.stagedVertex=null;const i=this.geometryType==="multipoint"&&this.numVertices===0||this.geometryType==="polyline"&&this.numVertices<2||this.geometryType==="polygon"&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map((r,s)=>({componentIndex:0,vertexIndex:s,coordinates:r})),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){q(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if(this.geometryType==="polygon"&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(Wt(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return TI(e,(t,i,r,s)=>{const l=s==="touch"&&this._snappingEnabled;!this.isCompleted&&l&&(r=r.next(y=>(l&&q(this.snappingManager)&&this.snappingManager.doneSnapping(),y)),i.next(this._screenToMapDragEventStep()).next(y=>(y.action==="start"&&(this.stagedVertex=y.mapStart,(this.geometryType==="segment"||l&&this.numVertices===0)&&this.commitStagedVertex()),y)).next(rSe(this.view,this.elevationInfo)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>l,cancel:r,snappingManager:this.snappingManager,snappingContext:new Fx({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:s,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint}),this._snappingPipeline.next).next(y=>(l&&(this.stagedVertex=y.mapEnd,y.action==="end"&&this.commitStagedVertex()),y)).next(y=>(y.action==="end"&&(this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),y)))})}_createManipulatorDragPipelineFreehand(e){return TI(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(ae(this.stagedVertex)&&(this.stagedVertex=r.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),r)).next(r=>{switch(r.action){case"start":case"update":this.stagedVertex=r.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return r})})}_createManipulatorDragPipelineHybrid(e){return TI(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(ae(this.stagedVertex)&&(this.stagedVertex=r.mapStart),this.commitStagedVertex()),r)).next(r=>{switch(r.action){case"start":case"update":this.stagedVertex=r.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return r})})}get _drawAtFixedElevation(){return(this.geometryType==="segment"||this.geometryType==="polygon")&&this.numCommittedVertices>0}_getEffectiveDrawSurface(){if(ae(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;return q(this.elevationInfo)&&this.elevationInfo.mode==="absolute-height"&&(t=!0),q(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),q(this.elevationInfo)&&this.elevationInfo.mode==="on-the-ground"&&(t=!1),this._drawAtFixedElevation&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getEffectiveDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(q(i))return e.stopPropagation(),void this.complete();const r=this._screenToMap(e.screenPoint);if(q(r))switch(this.drawingMode){case"freehand":this.geometryType==="point"&&(q(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),q(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),(this.geometryType==="point"||this.geometryType==="segment"&&t.vertices.length===2||this.geometryType==="segment"&&this.drawingMode==="hybrid"&&t.vertices.length===1)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=Cn(e.x,e.y),i=this._snappingOperation;if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void i.abort();e.stopPropagation();const r=this._closeOnClickVertexIndex(t);if(q(r))return this._closeOnVertex(r),void i.abort();const s=this._screenToMap(t),l=this._requiresScenePoint?this.drawSurface.screenToMap(t):null;if(this._manipulator.cursor=q(s)?"crosshair":null,ae(s))return void i.abort();const y=this.snappingManager;if(ae(y))return this.stagedVertex=s,void i.abort();const d=this._drawAtFixedElevation?Jl(this.elevationDrawSurface,({defaultZ:_})=>_):null,v=new Fx({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer,selfSnappingZ:q(d)?{value:d,elevationInfo:this.elevationInfo}:null});this.updatingHandles.addPromise(Xl(i.snap({point:s,scenePoint:l},y,v)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getEffectiveDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if(t.action==="start"&&(e=this._screenToMap(t.screenStart)),ae(e))return null;const i=this._screenToMap(t.screenEnd);return q(i)?De(te({},t),{mapStart:e,mapEnd:i}):null}}_vertexWithinPointerDistance(e,t){const i=25,r=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!q(r)&&sSe(r,t,i)}};function sSe(e,t,i){const r=e.x-t.x,s=e.y-t.y;return r*r+s*s<=i}m([x()],rr.prototype,"_snappingEnabled",null),m([x()],rr.prototype,"defaultZ",void 0),m([x()],rr.prototype,"isDraped",void 0),m([x({value:Lx})],rr.prototype,"drawingMode",null),m([x({constructOnly:!0})],rr.prototype,"elevationDrawSurface",void 0),m([x({constructOnly:!0})],rr.prototype,"elevationInfo",void 0),m([x({constructOnly:!0,type:jx})],rr.prototype,"labelOptions",void 0),m([x({constructOnly:!0,type:Dx})],rr.prototype,"tooltipOptions",void 0),m([x({constructOnly:!0})],rr.prototype,"geometryType",void 0),m([x({constructOnly:!0})],rr.prototype,"hasM",void 0),m([x({constructOnly:!0})],rr.prototype,"hasZ",void 0),m([x({constructOnly:!0})],rr.prototype,"manipulators",void 0),m([x({constructOnly:!0})],rr.prototype,"drawSurface",void 0),m([x({constructOnly:!0})],rr.prototype,"segmentLabels",void 0),m([x({constructOnly:!0})],rr.prototype,"snappingManager",void 0),m([x({constructOnly:!0})],rr.prototype,"snappingVisualizer",void 0),m([x()],rr.prototype,"snapToSceneEnabled",void 0),m([x()],rr.prototype,"_snappingOperation",void 0),m([x()],rr.prototype,"stagedVertex",null),m([x()],rr.prototype,"lastVertex",void 0),m([x()],rr.prototype,"updating",null),m([x({constructOnly:!0})],rr.prototype,"view",void 0),rr=m([Y("esri.views.draw.DrawOperation")],rr);class oSe{constructor(t,i,r,s=null){this._elevationInfo=t,this.defaultZ=i,this._view=r,this._excludeGraphics=s}screenToMap(t){if(q(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen(Sg(t.x,t.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const i=this._view.sceneIntersectionHelper.intersectElevationFromScreen(Sg(t.x,t.y),this._elevationInfo,0,this._excludeGraphics);return q(i)&&(i.z=void 0),i}mapToScreen(t){const i=wx(t.x,t.y,aI(this._view,t,this._elevationInfo),t.spatialReference);return this._view.toScreen(i)}constrainZ(t){const{defaultZ:i}=this;return q(i)&&t.z!==i&&((t=II(t)).z=i),t}}class aSe{constructor(t,i,r=[]){this.view=t,this.elevationInfo=i,this.exclude=r}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return q(i)&&(i.z=oI(i,this.view,this.elevationInfo)),i}mapToScreen(t){let i=t;return q(this.elevationInfo)&&(i=wx(t.x,t.y,aI(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(i)}constrainZ(t){return t}}class HCe{constructor(t,i=!1,r=0){this.view=t,this.hasZ=i,this.defaultZ=r,this.mapToScreen=s=>t.toScreen(s),this.screenToMap=i?s=>{const l=t.toMap(s);return l.z=r,l}:s=>t.toMap(s)}constrainZ(t){const{defaultZ:i}=this;return this.hasZ&&t.z!==i&&((t=II(t)).z=i),t}}var Xd;(function(e){e[e.WhenToolEditable=0]="WhenToolEditable",e[e.WhenToolNotEditable=1]="WhenToolNotEditable",e[e.Always=2]="Always"})(Xd||(Xd={}));class lSe{constructor(){this._isToolEditable=!0,this._manipulators=new gt,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,i=Xd.WhenToolEditable){this.addMany([t],i)}addMany(t,i=Xd.WhenToolEditable){for(const r of t){const s={manipulator:r,visibilityPredicate:i,attached:!1};this._manipulators.add(s),this._attached&&this._updateManipulatorAttachment(s)}}remove(t){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.getItemAt(i).manipulator===t){const r=this._manipulators.splice(i,1)[0];this._detachManipulator(r);break}}removeAll(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(t=>{this._updateManipulatorAttachment(t)}),this._attached=!0}detach(){this._manipulators.forEach(t=>{this._detachManipulator(t)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:t})=>{t.destroy&&t.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(t,i){return this._manipulators.on(t,r=>{i(r)})}forEach(t){for(const i of this._manipulators.items)t(i)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach(i=>t.push(i.manipulator)),t}intersect(t,i){let r=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:l,attached:y})=>{if(!y||!l.interactive)return;const d=l.intersectionDistance(t,i);q(d)&&d<s&&(s=d,r=l)}),r}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const i=t.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===Xd.Always||(this._isToolEditable?t.visibilityPredicate===Xd.WhenToolEditable:t.visibilityPredicate===Xd.WhenToolNotEditable)}}let On=class extends ot{constructor(e){super(e),this.manipulators=new lSe,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Bo.MANAGER,!0],[Bo.USER,!0]]),this._creationFinishedResolver=hO()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Bo.USER)}set editable(e){this.setEditableFlag(Bo.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){ae(this.view)?Ae.getLogger(this.declaredClass).error("Can't activate tool if view is not defined."):(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Bo.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Bo.USER)&&this.getEditableFlag(Bo.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};m([x({constructOnly:!0})],On.prototype,"view",void 0),m([x({readOnly:!0})],On.prototype,"active",null),m([x({value:!0})],On.prototype,"visible",null),m([x({value:!0})],On.prototype,"editable",null),m([x({readOnly:!0})],On.prototype,"manipulators",void 0),m([x({readOnly:!0})],On.prototype,"updating",null),m([x()],On.prototype,"cursor",null),m([x({readOnly:!0})],On.prototype,"automaticManipulatorSelection",void 0),m([x()],On.prototype,"hasFocusedManipulators",null),m([x()],On.prototype,"hasGrabbedManipulators",void 0),m([x()],On.prototype,"hasHoveredManipulators",void 0),m([x()],On.prototype,"firstGrabbedManipulator",void 0),m([x({readOnly:!0})],On.prototype,"created",void 0),m([x({readOnly:!0})],On.prototype,"removeIncompleteOnCancel",void 0),On=m([Y("esri.views.interactive.InteractiveToolBase")],On);let kn=class extends ba(fn.EventedMixin(On)){constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=this.view,t=rI(this.hasZ,this.elevationInfo);this.drawOperation=new rr({view:e,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:e.type==="3d"?new aSe(e,t):null,elevationDrawSurface:e.type==="3d"?new oSe(t,this.defaultZ,e):null,hasM:!1,elevationInfo:t}),this.handles.add([this.drawOperation.on("vertex-add",i=>this.onVertexAdd(i)),this.drawOperation.on("vertex-remove",i=>this.onVertexRemove(i)),this.drawOperation.on("vertex-update",i=>this.onVertexUpdate(i)),this.drawOperation.on("cursor-update",i=>this.onCursorUpdate(i)),this.drawOperation.on("complete",i=>this.onComplete(i))]),this.finishToolCreation()}destroy(){this.drawOperation=oi(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){var e,t;return(t=(e=this.drawOperation)==null?void 0:e.updating)!=null?t:!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};m([x({constructOnly:!0,nonNullable:!0})],kn.prototype,"defaultZ",void 0),m([x()],kn.prototype,"drawOperation",void 0),m([x({constructOnly:!0})],kn.prototype,"elevationInfo",void 0),m([x({value:!0})],kn.prototype,"enabled",null),m([x({constructOnly:!0})],kn.prototype,"geometryType",void 0),m([x({constructOnly:!0})],kn.prototype,"hasZ",void 0),m([x({constructOnly:!0})],kn.prototype,"mode",void 0),m([x()],kn.prototype,"snapToScene",void 0),m([x({readOnly:!0})],kn.prototype,"type",void 0),m([x({readOnly:!0})],kn.prototype,"updating",null),m([x({constructOnly:!0,nonNullable:!0})],kn.prototype,"view",void 0),kn=m([Y("esri.views.draw.DrawTool")],kn);let CI=class extends Gv{constructor(e){super(e),this._addVertexOnPointerUp=!1}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)e.stopPropagation(),this._vertexAddHandler(e);else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("key-down",e=>{e.key===It.complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(e))},rt.TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new kn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new ec(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new tc(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e){const t=this._coordinateHelper.arrayToVector(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(t),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new ec(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new tc(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};CI=m([Y("esri.views.draw.PointDrawAction")],CI);let Q1=class extends Gv{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=Lx}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=Li(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",e=>{this._dragEnabled&&q(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===It.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==It.complete||i?t!==It.undo||this.interactiveUndoDisabled||i?t!==It.redo||this.interactiveUndoDisabled||i?t!==It.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},rt.TOOL),this.view.on("key-up",e=>{e.key===It.pan&&(e.stopPropagation(),this._panEnabled=!1)},rt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new $I(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new jl(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new jl(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new kn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new jl(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new ec(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new tc(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new ec(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new tc(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};m([x()],Q1.prototype,"_dragEnabled",null),m([x()],Q1.prototype,"_clickEnabled",null),m([x({type:TW})],Q1.prototype,"mode",void 0),Q1=m([Y("esri.views.draw.PolygonDrawAction")],Q1);let ey=class extends Gv{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=Lx}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),e.pointerType==="touch"&&this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=Li(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=Li(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},rt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const t=e.pointerType==="touch";this._updateCursor(e.native,t)}},rt.TOOL),this.view.on("drag",e=>{this._dragEnabled&&q(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},rt.TOOL),this.view.on("key-down",e=>{const{key:t,repeat:i}=e;t===It.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):t!==It.complete||i?t!==It.undo||this.interactiveUndoDisabled||i?t!==It.redo||this.interactiveUndoDisabled||i?t!==It.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},rt.TOOL),this.view.on("key-up",e=>{e.key===It.pan&&(e.stopPropagation(),this._panEnabled=!1)},rt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const t=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new $I(this.view,t,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const t=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,r=new jl(this.view,t,i,this.vertices);this.emit("vertex-add",r),r.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const t=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(t);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new jl(this.view,t,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new kn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new jl(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new ec(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new tc(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}_updateCursor(e,t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!t&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new ec(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const t=new tc(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}};m([x()],ey.prototype,"_clickEnabled",null),m([x()],ey.prototype,"_dragEnabled",null),m([x({type:TW})],ey.prototype,"mode",void 0),ey=m([Y("esri.views.draw.PolylineDrawAction")],ey);function uSe(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function FW(e,t,i){i*=.5;const r=Math.sin(i);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function cSe(e,t){const i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>Ms()?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function LW(e,t,i){const r=t[0],s=t[1],l=t[2],y=t[3],d=i[0],v=i[1],_=i[2],M=i[3];return e[0]=r*M+y*d+s*_-l*v,e[1]=s*M+y*v+l*d-r*_,e[2]=l*M+y*_+r*v-s*d,e[3]=y*M-r*d-s*v-l*_,e}function hSe(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],y=t[3],d=Math.sin(i),v=Math.cos(i);return e[0]=r*v+y*d,e[1]=s*v+l*d,e[2]=l*v-s*d,e[3]=y*v-r*d,e}function pSe(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],y=t[3],d=Math.sin(i),v=Math.cos(i);return e[0]=r*v-l*d,e[1]=s*v+y*d,e[2]=l*v+r*d,e[3]=y*v-s*d,e}function dSe(e,t,i){i*=.5;const r=t[0],s=t[1],l=t[2],y=t[3],d=Math.sin(i),v=Math.cos(i);return e[0]=r*v+s*d,e[1]=s*v-r*d,e[2]=l*v+y*d,e[3]=y*v-l*d,e}function fSe(e,t){const i=t[0],r=t[1],s=t[2];return e[0]=i,e[1]=r,e[2]=s,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-s*s)),e}function Vx(e,t,i,r){const s=t[0],l=t[1],y=t[2],d=t[3];let v,_,M,T,A,R=i[0],F=i[1],V=i[2],z=i[3];return _=s*R+l*F+y*V+d*z,_<0&&(_=-_,R=-R,F=-F,V=-V,z=-z),1-_>Ms()?(v=Math.acos(_),M=Math.sin(v),T=Math.sin((1-r)*v)/M,A=Math.sin(r*v)/M):(T=1-r,A=r),e[0]=T*s+A*R,e[1]=T*l+A*F,e[2]=T*y+A*V,e[3]=T*d+A*z,e}function ySe(e){const t=xg,i=t(),r=t(),s=t(),l=Math.sqrt(1-i),y=Math.sqrt(i);return e[0]=l*Math.sin(2*Math.PI*r),e[1]=l*Math.cos(2*Math.PI*r),e[2]=y*Math.sin(2*Math.PI*s),e[3]=y*Math.cos(2*Math.PI*s),e}function NW(e,t){const i=t[0],r=t[1],s=t[2],l=t[3],y=i*i+r*r+s*s+l*l,d=y?1/y:0;return e[0]=-i*d,e[1]=-r*d,e[2]=-s*d,e[3]=l*d,e}function gSe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function jW(e,t){const i=t[0]+t[4]+t[8];let r;if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);const l=(s+1)%3,y=(s+2)%3;r=Math.sqrt(t[3*s+s]-t[3*l+l]-t[3*y+y]+1),e[s]=.5*r,r=.5/r,e[3]=(t[3*l+y]-t[3*y+l])*r,e[l]=(t[3*l+s]+t[3*s+l])*r,e[y]=(t[3*y+s]+t[3*s+y])*r}return e}function mSe(e,t,i,r){const s=.5*Math.PI/180;t*=s,i*=s,r*=s;const l=Math.sin(t),y=Math.cos(t),d=Math.sin(i),v=Math.cos(i),_=Math.sin(r),M=Math.cos(r);return e[0]=l*v*M-y*d*_,e[1]=y*d*M+l*v*_,e[2]=y*v*_-l*d*M,e[3]=y*v*M+l*d*_,e}function vSe(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const bSe=n2,wSe=Jk,_Se=Zk,xSe=LW,SSe=Qk,MSe=rR,$Se=s2,DW=mS,ESe=DW,VW=vS,ISe=VW,AI=iR,TSe=nR,CSe=bS;function zW(e,t,i){const r=pi(t,i);return r<-.999999?(Qr(Dl,ASe,t),i2(Dl)<1e-6&&Qr(Dl,PSe,t),En(Dl,Dl),FW(e,Dl,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Qr(Dl,t,i),e[0]=Dl[0],e[1]=Dl[1],e[2]=Dl[2],e[3]=1+r,AI(e,e))}const Dl=Qe(),ASe=Ar(1,0,0),PSe=Ar(0,1,0);function OSe(e,t,i,r,s,l){return Vx(GW,t,s,l),Vx(qW,i,r,l),Vx(e,GW,qW,2*l*(1-l)),e}const GW=H1(),qW=H1();function kSe(e,t,i,r){const s=RSe;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=r[0],s[4]=r[1],s[7]=r[2],s[2]=-t[0],s[5]=-t[1],s[8]=-t[2],AI(e,jW(e,s))}const RSe=hW();Object.freeze(Object.defineProperty({__proto__:null,identity:uSe,setAxisAngle:FW,getAxisAngle:cSe,multiply:LW,rotateX:hSe,rotateY:pSe,rotateZ:dSe,calculateW:fSe,slerp:Vx,random:ySe,invert:NW,conjugate:gSe,fromMat3:jW,fromEuler:mSe,str:vSe,copy:bSe,set:wSe,add:_Se,mul:xSe,scale:SSe,dot:MSe,lerp:$Se,length:DW,len:ESe,squaredLength:VW,sqrLen:ISe,normalize:AI,exactEquals:TSe,equals:CSe,rotationTo:zW,sqlerp:OSe,setAxes:kSe},Symbol.toStringTag,{value:"Module"}));function zx(e,t,i=null){return q(i)?[e,t,i]:[e,t]}function UW(e,t,i=null){return q(i)?{x:e,y:t,z:i}:{x:e,y:t}}class BW{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return xie(t.map(i=>this.mapToLocal(i)))}get doUnnormalization(){return!1}}class FSe extends BW{constructor(t,i,r=null){super(i),this._defaultZ=r,this.transform=Pl(),this.transformInv=Pl(),this.transform=pU(t),D_(this.transformInv,this.transform)}makeMapPoint(t,i){return zx(t,i,this._defaultZ)}mapToLocal(t){return UW(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return zx(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class LSe extends BW{constructor(t,i){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=Qe(),this.tangentFrameUpWS=Qe(),this.tangentFrameRightWS=Qe(),this.tangentFrameForwardWS=Qe(),this.localFrameRightWS=Qe(),this.localFrameUpWS=Qe(),this.worldToLocalTransform=H1(),this.localToWorldTransform=H1(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const r=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Xu.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Xu.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Xu.Z,this.tangentFrameForwardWS);const s=Qe();Qs(s,this.tangentFrameForwardWS,pi(r,this.tangentFrameForwardWS)),Xr(this.localFrameRightWS,r,s),En(this.localFrameRightWS,this.localFrameRightWS),Qr(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),zW(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),NW(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(t,i){return zx(t,i,this.defaultZ)}mapToLocal(t){const i=Qe();this.view.renderCoordsHelper.toRenderCoords(new dt({x:t[0],y:t[1],spatialReference:this.spatialReference}),i),yS(i,i,this.worldToLocalTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return q(r)?UW(r.x/this.scale,r.y/this.scale):null}localToMap(t){const i=Qe();this.view.renderCoordsHelper.toRenderCoords(new dt({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),i),yS(i,i,this.localToWorldTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return q(r)?zx(r.x,r.y,this.defaultZ):null}}function NSe(e,t){if(e.type==="2d")return new FSe(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if(e.type==="3d"){const i=t.length>2?new dt({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new dt({x:t[0],y:t[1],spatialReference:e.spatialReference});return new LSe(e,i)}return null}const jSe=["freehand","click"];let Gx=class extends Gv{constructor(e){super(e),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this.mode==="click"?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",e=>{if(e.stopPropagation(),e.mapPoint&&!this._panEnabled){const t=this.getCoordsFromScreenPoint(Li(e));q(t)&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))}},rt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=Li(e),this._activePointerId=e.pointerId,this._vertexAddHandler(e),this._isDragging=!1,e.pointerType==="touch"&&this._updateCursor(e.native)))},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),ae(this._activePointerId)&&e.pointerType!=="touch"&&(this._cursorScreenPoint=Li(e),this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=Li(e),this._updateCursor(e.native))},rt.TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(e),this._committedVertices.length===2&&this._drawCompleteHandler(e),this._isDragging=!1)},rt.TOOL),this.view.on("key-down",e=>{e.key===It.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(e),this._drawCompleteHandler(e)):e.key===It.pan&&(this._panEnabled=!0)},rt.TOOL),this.view.on("key-up",e=>{e.key===It.pan&&(this._panEnabled=!1)},rt.TOOL),this.view.on("drag",e=>{q(this._activePointerId)&&e.stopPropagation()},rt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},rt.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",e=>{this._abortSnapping(),this._cursorScreenPoint=Li(e),this._activePointerId=e.pointerId,this._isDragging=!1,e.pointerType==="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._cursorScreenPoint=Li(e),ae(this._activePointerId)&&e.pointerType!=="touch"&&this._updateCursor(e.native)},rt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._isDragging=!0)},rt.TOOL),this.view.on("pointer-up",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=null,e.stopPropagation(),this._isDragging||this._vertexAddHandler(e),this.vertices.length!==2||this._isDragging||this._drawCompleteHandler(e),this._isDragging=!1)},rt.TOOL),this.view.on("key-down",e=>{e.key===It.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(e),this.vertices.length===2&&this._drawCompleteHandler(e)),e.key===It.complete&&this._cursorScreenPoint&&this.vertices.length===2&&(this._vertexAddHandler(e),this._drawCompleteHandler(e))},rt.TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new kn({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new jl(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new ec(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new tc(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=oi(this._drawTool)}_addVertex(e,t){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i),this._committedVertices.length===1&&(this.viewAlignedCoordinateSystem=NSe(this.view,this._committedVertices[0]));const r=this._committedVertices.length-1,s=new jl(this.view,t,r,this.vertices);this.emit("vertex-add",s)}_updateCursor(e){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const t=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(t)&&this._pushCursorVertex(t.vertex,()=>this.emit("cursor-update",new ec(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new dt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const t=new tc(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new zv(new B1("polygon",this._coordinateHelper)),this._activeComponent=new U1(this._coordinateHelper.spatialReference,ju.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};m([x({type:jSe})],Gx.prototype,"mode",void 0),Gx=m([Y("esri/views/2d/engine/markup/SegmentDrawAction")],Gx);let Bv=class extends ot{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(e,t){this.reset();const i=te({view:this.view},t);switch(e){case"point":i.editGeometryType="point",this.activeAction=new CI(i);break;case"polyline":i.editGeometryType="polyline",this.activeAction=new ey(i);break;case"multipoint":i.editGeometryType="polygon",this.activeAction=new EI(i);break;case"polygon":i.editGeometryType="polygon",this.activeAction=new Q1(i);break;case"rectangle":case"circle":case"ellipse":case"triangle":i.editGeometryType="polygon",this.activeAction=new Gx(i)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};m([x()],Bv.prototype,"activeAction",void 0),m([x({readOnly:!0})],Bv.prototype,"type",void 0),m([x()],Bv.prototype,"view",void 0),Bv=m([Y("esri.views.draw.Draw")],Bv);function DSe(e,t){return t}function PI(e,t,i,r){switch(i){case 0:return Hv(e,t+r,0);case 1:return e.originPosition==="lowerLeft"?Hv(e,t+r,1):GSe(e,t+r,1)}}function HW(e,t,i,r){return i===2?Hv(e,t,2):PI(e,t,i,r)}function VSe(e,t,i,r){return i===2?Hv(e,t,3):PI(e,t,i,r)}function zSe(e,t,i,r){return i===3?Hv(e,t,3):HW(e,t,i,r)}function Hv({translate:e,scale:t},i,r){return e[r]+i*t[r]}function GSe({translate:e,scale:t},i,r){return e[r]-i*t[r]}class qSe{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=DSe,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const i=gM(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(!ae(i))for(const r of t.features)i(r.geometry)}createSpatialReference(){return{}}addField(t,i){const r=t.fields;$9(r),r.push(i);const s=r.map(l=>l.name);this._attributesConstructor=function(){for(const l of s)this[l]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,s)=>this.addCoordinatePoint(i,r,s),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,s)=>this._addCoordinatePolygon(i,r,s),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,s)=>this._addCoordinatePolyline(i,r,s),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,s)=>this._addCoordinateMultipoint(i,r,s),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:r,queryGeometryType:s}=i,l=K$(r.clone(),r,!1,!1,this._transform),y=lV(l,s,!1,!1);t.queryGeometryType=s,t.queryGeometry=te({},y)}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,r){const s=is(this._transform,"transform");switch(i=this._applyTransform(s,i,r,0),r){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=t);const s=is(this._transform,"transform");return this._applyTransform(s,t,i,r)}_addCoordinatePolyline(t,i,r){this._dehydratedAddPointsCoordinate(t.paths,i,r)}_addCoordinatePolygon(t,i,r){this._dehydratedAddPointsCoordinate(t.rings,i,r)}_addCoordinateMultipoint(t,i,r){r===0&&t.points.push([]);const s=this._transformPathLikeValue(i,r);t.points[t.points.length-1].push(s)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,r){r===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(i,r),l=t[t.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),l.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(t){const{hasZ:i,hasM:r}=t;return i&&r?zSe:i?HW:r?VSe:PI}}async function WCe(e,t,i){const r=Vr(e),s=te({},i),l=Bn.from(t),y=!l.quantizationParameters,{data:d}=await DD(r,l,new qSe({sourceSpatialReference:l.sourceSpatialReference,applyTransform:y}),s);return d}function USe(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function BSe(e,t){const i={};for(const r of e){const{parentObjectId:s,parentGlobalId:l,attachmentInfos:y}=r;for(const d of y){const{id:v}=d,_=lle(kle(`${t}/${s}/attachments/${v}`)),M=Aj.fromJSON(d);M.set({url:_,parentObjectId:s,parentGlobalId:l}),i[s]?i[s].push(M):i[s]=[M]}}return i}function HSe(e,t,i){let r={query:Om(te(De(te({},e.query),{f:"json"}),USe(t)))};return i&&(r=De(te(te({},i),r),{query:te(te({},i.query),r.query)})),li(e.path+"/queryAttachments",r)}async function JCe(e,t,i){const r=Vr(e);return HSe(r,T3.from(t),te({},i)).then(s=>BSe(s.data.attachmentGroups,r.path))}async function ZCe(e,t,i){const r=Vr(e);return GD(r,Bn.from(t),te({},i)).then(s=>s.data.count)}async function KCe(e,t,i){const r=Vr(e);return qD(r,Bn.from(t),te({},i)).then(s=>({count:s.data.count,extent:ai.fromJSON(s.data.extent)}))}async function YCe(e,t,i){const r=Vr(e);return zD(r,Bn.from(t),te({},i)).then(s=>s.data.objectIds)}function WSe(e,t){const i=e.toJSON();return i.objectIds&&(i.objectIds=i.objectIds.join(",")),i.orderByFields&&(i.orderByFields=i.orderByFields.join(",")),i.outFields&&!(t==null?void 0:t.returnCountOnly)?i.outFields.includes("*")?i.outFields="*":i.outFields=i.outFields.join(","):delete i.outFields,i.outSpatialReference&&(i.outSR=i.outSR.wkid||JSON.stringify(i.outSR.toJSON()),delete i.outSpatialReference),i.dynamicDataSource&&(i.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i}async function JSe(e,t,i){const r=await WW(e,t,i),s=r.data,l=s.geometryType,y=s.spatialReference,d={};for(const v of s.relatedRecordGroups){const _={fields:void 0,objectIdFieldName:void 0,geometryType:l,spatialReference:y,hasZ:!!s.hasZ,hasM:!!s.hasM,features:v.relatedRecords};if(v.objectId!=null)d[v.objectId]=_;else for(const M in v)v.hasOwnProperty(M)&&M!=="relatedRecords"&&(d[v[M]]=_)}return De(te({},r),{data:d})}async function ZSe(e,t,i){const r=await WW(e,t,i,{returnCountOnly:!0}),s=r.data,l={};for(const y of s.relatedRecordGroups)y.objectId!=null&&(l[y.objectId]=y.count);return De(te({},r),{data:l})}async function WW(e,t,i={},r){const s=Om(te(te(De(te({},e.query),{f:"json"}),r),WSe(t,r)));return li(e.path+"/queryRelatedRecords",De(te({},i),{query:te(te({},i.query),s)}))}async function XCe(e,t,i){t=gd.from(t);const r=Vr(e);return JSe(r,t,i).then(s=>{const l=s.data,y={};return Object.keys(l).forEach(d=>y[d]=mh.fromJSON(l[d])),y})}async function QCe(e,t,i){t=gd.from(t);const r=Vr(e);return ZSe(r,t,te({},i)).then(s=>s.data)}const JW="Layer does not support extent calculation.";function KSe(e,t){var l,y;const i=e.geometry,r=e.toJSON(),s=r;if(q(i)&&(s.geometry=JSON.stringify(i),s.geometryType=su(i),s.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference)),((l=r.topFilter)==null?void 0:l.groupByFields)&&(s.topFilter.groupByFields=r.topFilter.groupByFields.join(",")),((y=r.topFilter)==null?void 0:y.orderByFields)&&(s.topFilter.orderByFields=r.topFilter.orderByFields.join(",")),r.topFilter&&(s.topFilter=JSON.stringify(s.topFilter)),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),r.outFields&&!((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","):delete s.outFields,r.outSR?s.outSR=r.outSR.wkid||JSON.stringify(r.outSR):i&&r.returnGeometry&&(s.outSR=s.inSR),r.returnGeometry&&delete r.returnGeometry,r.timeExtent){const d=r.timeExtent,{start:v,end:_}=d;v==null&&_==null||(s.time=v===_?v:`${v!=null?v:"null"},${_!=null?_:"null"}`),delete r.timeExtent}return s}async function YSe(e,t,i,r){const s=await qx(e,t,"json",r);return H3(t,i,s.data),s}async function XSe(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?{data:{objectIds:[]}}:qx(e,t,"json",i,{returnIdsOnly:!0})}async function QSe(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?{data:{count:0,extent:null}}:qx(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(JW);if(s.hasOwnProperty("count"))throw new Error(JW);return r})}function e6e(e,t,i){return q(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):qx(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function qx(e,t,i,r={},s={}){const l=typeof e=="string"?yn(e):e,y=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",Pm(y,null,r).then(d=>{const v=d&&d[0];q(v)&&((t=t.clone()).geometry=v);const _=Om(te(te(De(te({},l.query),{f:i}),s),KSe(t,s)));return li(Uc(l.path,"queryTopFeatures"),De(te({},r),{query:te(te({},_),r.query)}))})}async function eAe(e,t,i,r){const s=Vr(e),l=te({},r),{data:y}=await YSe(s,vh.from(t),i,l);return mh.fromJSON(y)}async function tAe(e,t,i){const r=Vr(e);return(await XSe(r,vh.from(t),te({},i))).data.objectIds}async function iAe(e,t,i){const r=Vr(e),s=await QSe(r,vh.from(t),te({},i));return{count:s.data.count,extent:ai.fromJSON(s.data.extent)}}async function rAe(e,t,i){const r=Vr(e);return(await e6e(r,vh.from(t),te({},i))).data.count}function t6e(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var OI={exports:{}};(function(e,t){function i(){function s(h){if(typeof h=="number")return B.Uc.ah(h);if(h==null)return null;if(Nt[h]!=null)return B.Uc.ah(Nt[h]);throw Error("Unrecognised Unit Type")}function l(h){if(typeof h=="number")return B.Uc.ah(h);if(h==null)return null;if($i[h]!=null)return B.Uc.ah($i[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function d(h,O,w,c){if(w==null||w.B())return null;switch(w.K()){case B.sn.Point:return h.exportPoint(O,w,c);case B.sn.Polygon:return h.exportPolygon(O,w,c);case B.sn.Polyline:return h.exportPolyline(O,w,c);case B.sn.MultiPoint:return h.exportMultipoint(O,w,c);case B.sn.Envelope:return h.exportExtent(O,w,c)}return null}function v(h,O,w,c){if(w.K()!==B.sn.Point)throw Error("Geometry not Point");return h.exportPoint(O,w,c)}function _(h,O,w){return h.convertToGEGeometry(O,w)}function M(h){var O=h.wkid;h=h.wkt;var w=Xt.get(O||h);return w==null&&(O!==-1&&O!=null?(w=B.Gg.create(O),Xt.set(O,w)):h&&(w=B.Gg.lP(h),Xt.set(h,w)),xr.has(O||h)&&w.QW(xr.get(O||h))),w}function T(h){var O;if(h==null)return null;var w=M(h);return h=w.Id(),w=w.Mn(),(O={}).tolerance=w,O.unitType=h==null?-1:h.pd,O.unitID=h==null?-1:h.Fc(),O.unitBaseFactor=h==null?0:h.ci,O.unitSquareDerivative=h==null?0:B.Uc.WF(h).Fc(),O}function A(h,O,w,c){return w==null?null:(w=B.ac.clip(_(h,Fe,w),_(h,Fe,c),M(O)),d(h,Fe,w,O))}function R(h,O,w,c){w=B.ac.fl(_(h,Fe,w),_(h,Fe,c),M(O)),c=[];for(var a=0;a<w.length;a++)c.push(d(h,Fe,w[a],O));return c}function F(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.contains(_(h,Fe,w),_(h,Fe,c),M(O))}function V(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.wP(_(h,Fe,w),_(h,Fe,c),M(O))}function z(h,O,w,c,a){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.ub(_(h,Fe,w),_(h,Fe,c),M(O),s(a))}function W(h,O,w,c){return!(w==null&&c!=null||c==null&&w!=null)&&B.ac.Nb(_(h,Fe,w),_(h,Fe,c),M(O))}function Z(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.OS(_(h,Fe,w),_(h,Fe,c),M(O))}function Q(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.touches(_(h,Fe,w),_(h,Fe,c),M(O))}function ee(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.mY(_(h,Fe,w),_(h,Fe,c),M(O))}function re(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.OP(_(h,Fe,w),_(h,Fe,c),M(O))}function ie(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.yU(_(h,Fe,w),_(h,Fe,c),M(O))}function he(h,O,w,c,a){if(w==null||c==null)throw Error("Illegal Argument Exception");return B.ac.tB(_(h,Fe,w),_(h,Fe,c),M(O),a)}function be(h,O,w){if(w==null)throw Error("Illegal Argument Exception");return B.ac.ZS(_(h,Fe,w),M(O))}function we(h,O,w){if(w==null)throw Error("Illegal Argument Exception");return w=B.ac.$B(_(h,Fe,w),M(O)),d(h,Fe,w,O)}function xe(h,O,w,c){if(c===void 0&&(c=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var a=c,n=[];for(c=0;c<w.length;c++)n.push(_(h,Fe,w[c]));for(w=B.ac.eP(n,a),a=Array(w.length),c=0;c<w.length;c++)a[c]=d(h,Fe,w[c],O);return a}return c=B.ac.dP(_(h,Fe,w),M(O)),d(h,Fe,c,O)}function $e(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(_(h,Fe,w[n]));for(w=B.ac.LP(a,_(h,Fe,c),M(O)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Fe,w[n],O);return c}return n=B.ac.km(_(h,Fe,w),_(h,Fe,c),M(O)),d(h,Fe,n,O)}function je(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(_(h,Fe,w[n]));for(w=B.ac.RX(a,_(h,Fe,c),M(O)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Fe,w[n],O);return c}return n=B.ac.gp(_(h,Fe,w),_(h,Fe,c),M(O)),d(h,Fe,n,O)}function it(h,O,w,c){if(w==null||c==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var a=[],n=0;n<w.length;n++)a.push(_(h,Fe,w[n]));for(w=B.ac.MS(a,_(h,Fe,c),M(O)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Fe,w[n],O);return c}return n=B.ac.Fa(_(h,Fe,w),_(h,Fe,c),M(O)),d(h,Fe,n,O)}function Ye(h,O,w,c){if(w==null)return null;var a=[];if(Array.isArray(w)){if(w.length===0)return null;for(c=0;c<w.length;c++)a.push(_(h,Fe,w[c]))}else a.push(_(h,Fe,w)),c!=null&&a.push(_(h,Fe,c));return d(h,Fe,B.ac.fY(a,M(O)),O)}function Lt(h,O,w,c,a,n,o,u){var p=0;if(n!=null)switch(n){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(w)){if(w==null)h=null;else if(w.length===0)h=[];else{var f=[];for(n=0;n<w.length;n++)f.push(_(h,Fe,w[n]));for(w=B.ac.wU(f,M(O),c,p,o,u,s(a)),c=Array(w.length),n=0;n<w.length;n++)c[n]=d(h,Fe,w[n],O);h=c}return h}return w=B.ac.offset(_(h,Fe,w),M(O),c,p,o,u,s(a)),d(h,Fe,w,O)}function Dt(h,O,w,c,a,n){if(n===void 0&&(n=!1),Array.isArray(w)){if(!Array.isArray(c)){for(var o=[],u=0;u<w.length;u++)o.push(c);c=o}if(c.length!=w.length){if(c.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(u=0;u<w.length;u++)c[u]===void 0?o.push(p):(o.push(c[u]),p=c[u]);c=o}return Ze(h,O,w,c,a,!1,n,"geodesic",NaN)}return w=B.ac.buffer(_(h,Fe,w),M(O),c,s(a),!1,0,NaN),d(h,Fe,w,O)}function ft(h,O,w,c,a,n,o,u){if(Array.isArray(w)){if(!Array.isArray(c)){for(var p=[],f=0;f<w.length;f++)p.push(c);c=p}if(c.length!==w.length){if(c.length===0)throw Error("Illegal Argument Exception");p=[];var g=0;for(f=0;f<w.length;f++)c[f]===void 0?p.push(g):(p.push(c[f]),g=c[f]);c=p}return Ze(h,O,w,c,a,!0,n,o,u)}return o===void 0&&(o=NaN),w=B.ac.buffer(_(h,Fe,w),M(O),c,s(a),!0,y(n),o),d(h,Fe,w,O)}function Ze(h,O,w,c,a,n,o,u,p){if(p===void 0&&(p=NaN),w==null)return null;if(w.length===0)return[];for(var f=[],g=0;g<w.length;g++)f.push(_(h,Fe,w[g]));for(w=B.ac.HN(f,M(O),c,s(a),n,o,y(u),p),c=Array(w.length),g=0;g<w.length;g++)c[g]=d(h,Fe,w[g],O);return c}function Ct(h,O,w,c,a){var n;return a===void 0&&(a=!0),w=B.ac.iz(_(h,Fe,w),_(h,Fe,c),a),(n={}).coordinate=v(h,Fe,w.az(),O),n.distance=w.cz(),n.isRightSide=w.Nz(),n.vertexIndex=w.Va(),n.isEmpty=w.B(),n}function Oi(h,O,w,c){var a;return w=B.ac.jz(_(h,Fe,w),_(h,Fe,c)),(a={}).coordinate=v(h,Fe,w.az(),O),a.distance=w.cz(),a.isRightSide=w.Nz(),a.vertexIndex=w.Va(),a.isEmpty=w.B(),a}function Ui(h,O,w,c,a,n){var o;for(w=B.ac.kz(_(h,Fe,w),_(h,Fe,c),a,n),c=[],a=0;a<w.length;a++)w[a].B()===!1&&c.push(((o={}).coordinate=v(h,Fe,w[a].az(),O),o.distance=w[a].cz(),o.isRightSide=w[a].Nz(),o.vertexIndex=w[a].Va(),o.isEmpty=w[a].B(),o));return c}function _i(h,O,w,c,a,n){return w=B.ac.LQ(_(h,Fe,w),M(O),c,a,s(n)),d(h,Fe,w,O)}function pr(h,O,w,c,a){return w=B.ac.Sr(_(h,Fe,w),M(O),c,s(a)),d(h,Fe,w,O)}function Rr(h,O,w,c,a,n){return n===void 0&&(n=0),w=B.ac.Ry(_(h,Fe,w),M(O),c,s(a),n),d(h,Fe,w,O)}function Ne(h,O,w,c){if(w==null)throw Error("Illegal Argument Exception");return B.ac.EU(_(h,Fe,w),M(O),l(c))}function ct(h,O,w,c){if(w==null)throw Error("Illegal Argument Exception");return B.ac.FU(_(h,Fe,w),M(O),s(c))}function We(h,O,w,c,a){if(w==null)throw Error("Illegal Argument Exception");return B.ac.RQ(_(h,Fe,w),M(O),l(c),y(a))}function yt(h,O,w,c,a){if(w==null)throw Error("Illegal Argument Exception");return B.ac.UQ(_(h,Fe,w),M(O),s(c),y(a))}function ni(h){B.IL.bind(h)}function si(h,O,w,c,a){var n=null,o=null;if(c){if(!a)throw B.i.O("AOI missing Spatial Reference");n=_(h,Fe,c),o=M(a).hh()}return(h=B.iu.SR(M(O).hh(),M(w).hh(),n,o))!==null?h:null}function Rt(h,O,w,c,a){var n=null,o=null;if(c){if(!a)throw B.i.O("AOI missing Spatial Reference");n=_(h,Fe,c),o=M(a).hh()}return B.iu.TR(M(O).hh(),M(w).hh(),n,o)}function Ft(h,O,w,c,a,n){if(a===void 0&&(a=null),n===void 0&&(n=null),n){var o=new B.tC;o.Xu=n.densificationStep,o.Lr=n.centralMeridianOfOutputGCS,n.clipWithInputHorizon&&o.KW(n.clipWithInputHorizon),n.clipWithOutputHorizon&&o.LW(n.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(O.length===0)return[];if(a){if(!(n=a.getCachedGeTransformation(w,c)))e:{if(n=a,a=null,n){var u=n.getGTListEntry();if(u!==null){a=new B.rC(null);for(var p=0,f=u.steps;p<f.length;p++){u=f[p];var g=new B.Cx(u.geogtran);u.isInverse&&g.Lz(),a.add(g)}o=B.xr.Pr(M(w).hh(),M(c).hh(),a,o),n.assignCachedGe(w,c,o),n=o;break e}}if(a===null&&n&&n.steps&&0<n.steps.length){for(a=new B.rC(null),p=0,f=n.steps;p<f.length;p++)(u=f[p]).wkid!=-1&&u.wkid!=null?a.add(B.Cx.create(u.wkid,u.isInverse)):a.add(B.Cx.pP(u.wkt,u.isInverse));o=B.xr.Pr(M(w).hh(),M(c).hh(),a,o),n.assignCachedGe(w,c,o),n=o}else n=B.xr.Pr(M(w).hh(),M(c).hh(),a,o)}for(w=[],a=0;a<O.length;a++)o=O[a],w.push(ue(h,o,c,n))}else for(n=B.xr.Pr(M(w).hh(),M(c).hh(),null),w=[],a=0;a<O.length;a++)o=O[a],w.push(ue(h,o,c,n));return w}function ue(h,O,w,c){return O=B.ac.Bh(_(h,Fe,O),c),d(h,Fe,O,w)}function ye(h,O){h!=null&&(h=h.wkid||h.wkt,xr.has(h),xr.set(h,O),Xt.has(h)&&Xt.delete(h))}function Ee(h){h!=null&&(h=h.wkid||h.wkt,xr.has(h)&&(xr.delete(h),Xt.has(h)&&Xt.delete(h)))}function Ge(h,O,w,c){if(w==null||c==null)return[];var a=[],n=0;for(w=B.ac.LS(_(h,Fe,w),_(h,Fe,c),M(O))||[];n<w.length;n++)a.push(d(h,Fe,w[n],O));return a}var ke,B,Je,He,Re=this&&this.__extends||function(){function h(O,w){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var n in a)a.hasOwnProperty(n)&&(c[n]=a[n])})(O,w)}return function(O,w){function c(){this.constructor=O}h(O,w),O.prototype=w===null?Object.create(w):(c.prototype=w.prototype,new c)}}();(function(h){var O;(O=h.sn||(h.sn={}))[O.Unknown=0]="Unknown",O[O.Point=33]="Point",O[O.Line=322]="Line",O[O.Envelope=197]="Envelope",O[O.MultiPoint=550]="MultiPoint",O[O.Polyline=1607]="Polyline",O[O.Polygon=1736]="Polygon",function(c){c[c.enumMild=0]="enumMild",c[c.enumMedium=1]="enumMedium",c[c.enumHot=2]="enumHot"}(h.TK||(h.TK={}));var w=function(){function c(){this.description=null,this.QA=0}return c.prototype.K=function(){return 0},c.prototype.Eb=function(){return-1},c.prototype.Pf=function(a){this.wc(),a!=this.description&&this.un(a)},c.prototype.un=function(){},c.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=h.fe.xR(this.description,a))!=this.description&&this.un(a)},c.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},c.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=h.fe.wR(this.description,a),this.un(a))},c.prototype.Vg=function(){return null},c.prototype.dn=function(){},c.prototype.A=function(){},c.prototype.So=function(){},c.prototype.yc=function(a){this.A(a)},c.prototype.B=function(){return!0},c.prototype.Pa=function(){},c.prototype.Pc=function(){},c.prototype.Ja=function(){return null},c.prototype.copyTo=function(){},c.prototype.He=function(){return 0},c.prototype.Rb=function(){return 0},c.prototype.dG=function(){return this.hasAttribute(1)},c.uf=function(a){return 1+((192&a)>>6)>>1},c.Tn=function(a){return(32&a)!=0},c.PS=function(a){return(128&a)!=0},c.zd=function(a){return(256&a)!=0},c.zj=function(a){return(512&a)!=0},c.Ic=function(a){return(1024&a)!=0},c.prototype.Qf=function(){var a=this.Ja();return this.copyTo(a),a},c.prototype.ng=function(){return null},c.kg=function(a){var n=a.Ja();return a.copyTo(n),n},c.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},c.zx=function(a){var n=a.K();if(c.zj(n))return a.I();if(a.B())return 0;if(n==197)return 4;if(n==33)return 1;if(c.zd(n))return 2;throw h.i.ga("missing type")},c}();h.ba=w})(B||(B={})),Je=B||(B={}),He=function(){function h(){this.y=this.x=0}return h.construct=function(O,w){var c=new h;return c.x=O,c.y=w,c},h.cl=function(O){var w=new h;return w.x=O.x,w.y=O.y,w},h.prototype.na=function(O,w){this.x=O,this.y=w},h.prototype.N=function(O){this.x=O.x,this.y=O.y},h.prototype.hq=function(O,w){return this.x===O&&this.y===w},h.prototype.Mz=function(O){return 2220446049250313e-31>=Math.abs(this.x-O.x)&&2220446049250313e-31>=Math.abs(this.y-O.y)},h.prototype.rb=function(O){return this.x===O.x&&this.y===O.y},h.prototype.Nb=function(O){return O==this||O instanceof h&&this.x==O.x&&this.y==O.y},h.prototype.sub=function(O){this.x-=O.x,this.y-=O.y},h.prototype.vc=function(O,w){this.x=O.x-w.x,this.y=O.y-w.y},h.prototype.add=function(O,w){w!==void 0?(this.x=O.x+w.x,this.y=O.y+w.y):(this.x+=O.x,this.y+=O.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(O){this.x=-O.x,this.y=-O.y},h.prototype.IS=function(O,w,c){this.x=O.x*(1-c)+w.x*c,this.y=O.y*(1-c)+w.y*c},h.prototype.Dt=function(O,w){this.x=this.x*O+w.x,this.y=this.y*O+w.y},h.prototype.BW=function(O,w,c){this.x=w.x*O+c.x,this.y=w.y*O+c.y},h.prototype.scale=function(O){this.x*=O,this.y*=O},h.prototype.compare=function(O){return this.y<O.y?-1:this.y>O.y?1:this.x<O.x?-1:this.x>O.x?1:0},h.prototype.normalize=function(){var O=this.length();O==0&&(this.x=1,this.y=0),this.x/=O,this.y/=O},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Uk=function(){return this.x*this.x+this.y*this.y},h.ub=function(O,w){return Math.sqrt(this.zc(O,w))},h.Jy=function(O,w,c,a){return O-=c,w-=a,Math.sqrt(O*O+w*w)},h.prototype.Sh=function(O){return this.x*O.x+this.y*O.y},h.prototype.aD=function(O){return Math.abs(this.x*O.x)+Math.abs(this.y*O.y)},h.prototype.yi=function(O){return this.x*O.y-this.y*O.x},h.prototype.Ct=function(O,w){var c=-this.x*w+this.y*O;this.x=this.x*O+this.y*w,this.y=c},h.prototype.Jv=function(){var O=this.x;this.x=-this.y,this.y=O},h.prototype.HG=function(O){this.x=-O.y,this.y=O.x},h.prototype.cr=function(){var O=this.x;this.x=this.y,this.y=-O},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(O,w){var c=O.su(),a=w.su();return a==c?0>(O=O.yi(w))?1:0<O?-1:0:c<a?-1:1},h.zc=function(O,w){var c=O.x-w.x;return c*c+(O=O.y-w.y)*O},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(O,w){var c=h.ub(O,w),a=h.construct(this.x,this.y);if(c==0)return h.ub(a,O);var n=new h;return n.N(w),n.sub(O),a.sub(O),a.yi(n)/c},h.Wq=function(O,w,c){var a=new Je.Xb;a.set(w.x),a.sub(O.x);var n=new Je.Xb;n.set(c.y),n.sub(O.y);var o=new Je.Xb;o.set(w.y),o.sub(O.y);var u=new Je.Xb;return u.set(c.x),u.sub(O.x),a.Bg(n),o.Bg(u),a.sub(o),a.rs()?(a=new Je.jp(w.x),n=new Je.jp(O.x),o=new Je.jp(O.y),a=a.kt(n),O=(O=new Je.jp(c.y)).kt(o),w=(w=new Je.jp(w.y)).kt(o),c=(c=new Je.jp(c.x)).kt(n),a=a.nr(O),w=w.nr(c),(a=a.nr(w)).iT()?-1:a.aS()?1:0):0>(c=a.value())?-1:0<c?1:0},h.prototype.dc=function(){return Je.P.wj(Je.P.wj())},h}(),Je.h=He,function(h){var O=function(){function w(c){this.Ay=this.Ot=0,this.KX=c}return w.prototype.reset=function(){this.Ay=this.Ot=0},w.prototype.add=function(c){c-=this.Ay;var a=this.Ot+c;this.Ay=a-this.Ot-c,this.Ot=a},w.prototype.sub=function(c){this.add(-c)},w.prototype.tm=function(){return this.KX+this.Ot},w}();h.Ex=O,h.mc=function(){function w(){}return w.En=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)},w.sign=function(c){return 0>c?-1:0<c?1:0},w.MK=function(c){return c-360*Math.floor(c/360)},w.round=function(c){return Math.floor(c+.5)},w.ox=function(c){return c*c},w.jq=function(c,a,n){return .5>=n?c+(a-c)*n:a-(a-c)*(1-n)},w.JG=function(c,a,n,o){.5>=n?(o.x=c.x+(a.x-c.x)*n,o.y=c.y+(a.y-c.y)*n):(o.x=a.x-(a.x-c.x)*(1-n),o.y=a.y-(a.y-c.y)*(1-n))},w.gT=function(c,a,n,o,u,p){.5>=u?(p.x=c+(n-c)*u,p.y=a+(o-a)*u):(p.x=n-(n-c)*(1-u),p.y=o-(o-a)*(1-u))},w}()}(B||(B={})),function(h){var O=function(w){function c(){var a=w.call(this)||this;return a.ta=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return Re(c,w),c.prototype.bc=function(){return h.h.construct(this.ta,this.oa)},c.prototype.$p=function(a){a.x=this.ta,a.y=this.oa},c.prototype.Ec=function(a){this.gm(0,a)},c.prototype.UB=function(a,n){this.gm(0,h.h.construct(a,n))},c.prototype.Vo=function(a){this.cD(0,a)},c.prototype.setStart=function(a){this.pD(0,a)},c.prototype.yv=function(a,n){return this.Pd(0,a,n)},c.prototype.TB=function(a,n,o){this.vn(0,a,n,o)},c.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},c.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},c.prototype.Rc=function(a){this.gm(1,a)},c.prototype.Sl=function(a,n){this.gm(1,h.h.construct(a,n))},c.prototype.Ro=function(a){this.cD(1,a)},c.prototype.setEnd=function(a){this.pD(1,a)},c.prototype.jv=function(a,n){return this.Pd(1,a,n)},c.prototype.JB=function(a,n,o){this.vn(1,a,n,o)},c.prototype.Eb=function(){return 1},c.prototype.B=function(){return this.Bc()},c.prototype.Pa=function(){},c.prototype.He=function(){return 0},c.prototype.Fa=function(a,n,o,u,p){return this.FM(a,n,o,u,p)},c.prototype.isIntersecting=function(a,n){return this.Br(a,n,!1)!=0},c.prototype.ss=function(a,n){return this.tu(a,n,!1)},c.prototype.tu=function(){return null},c.prototype.Bc=function(){return!1},c.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=h.P.mg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var n=this.la.slice(0),o=this.la.length;o<2*a;o++)n[o]=0;this.la=n}},c.bM=function(a,n,o){if(0<o)var u=0;for(var p=0;p<o;p++)n[0+u]=a[0],u++},c.prototype.gm=function(a,n){a!=0?(this.qa=n.x,this.ma=n.y):(this.ta=n.x,this.oa=n.y)},c.prototype.un=function(a){if(this.la!=null){for(var n=h.fe.Kw(a,this.description),o=[],u=c.Ig(this.description,0),p=c.Ig(this.description,1),f=c.Ig(a,0),g=c.Ig(a,1),b=0,S=1,$=a.Ba;S<$;S++){var E=a.ld(S),C=h.sa.Wa(E);if(n[S]==-1){var k=h.sa.te(E);for(E=0;E<C;E++)o[f+b]=k,o[g+b]=k,b++}else for(k=this.description.bk(n[S])-2,E=0;E<C;E++)o[f+b]=this.la[u+k],o[g+b]=this.la[p+k],b++,k++}this.la=o}this.description=a},c.prototype.cD=function(a,n){if(this.Bc())throw h.i.ga("empty geometry");n.Pf(this.description),n.Bc()&&n.wn();for(var o=0;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=0,f=h.sa.Wa(u);p<f;p++){var g=this.Pd(a,u,p);n.setAttribute(u,p,g)}},c.prototype.pD=function(a,n){if(this.wc(),n.Bc())throw h.i.ga("empty geometry");for(var o=n.description,u=0,p=o.Ba;u<p;u++)for(var f=o.Fd(u),g=h.sa.Wa(f),b=0;b<g;b++){var S=n.Vc(f,b);this.vn(a,f,b,S)}},c.prototype.Pd=function(a,n,o){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.ta;if(o>=h.sa.Wa(n))throw h.i.de();var u=this.description.Rf(n);return 0<=u?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.bk(u)-2+o]):h.sa.te(n)},c.prototype.vn=function(a,n,o,u){if(this.wc(),o>=h.sa.Wa(n))throw h.i.de();var p=this.description.Rf(n);0>p&&(this.se(n),p=this.description.Rf(n)),n==0?a!=0?o!=0?this.ma=u:this.qa=u:o!=0?this.oa=u:this.ta=u:(this.la==null&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.bk(p)-2+o]=u)},c.prototype.copyTo=function(a){if(a.K()!=this.K())throw h.i.O();a.description=this.description,a.$x(this.description.Be.length-2),c.bM(this.la,a.la,2*(this.description.Be.length-2)),a.ta=this.ta,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.qp(a)},c.prototype.Vg=function(a,n){var o=new h.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,n),o.wa=o.pa,o.Nk(this.Pd(1,a,n)),o)},c.prototype.UI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Nk(this.Pd(1,0,0)))},c.prototype.Vw=function(a,n){n.Pf(this.description),n.Db(this.ic(a));for(var o=1,u=this.description.Ba;o<u;o++)for(var p=this.description.Fd(o),f=h.sa.Wa(p),g=0;g<f;g++){var b=this.Vc(a,p,g);n.setAttribute(p,g,b)}},c.prototype.AM=function(a){if(this.description!=a.description||this.ta!=a.ta||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var n=0;n<2*(this.description.Be.length-2);n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},c.prototype.reverse=function(){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var n=this.description.Ba;a<n;a++)for(var o=this.description.ld(a),u=0,p=h.sa.Wa(o);u<p;u++){var f=this.Pd(0,o,u),g=this.Pd(1,o,u);this.vn(0,o,u,g),this.vn(1,o,u,f)}},c.prototype.Br=function(a,n,o){var u=a.K();if(this.K()===322){if(u==322)return h.zb.JM(this,a,n,o);throw h.i.Ra()}throw h.i.Ra()},c.prototype.FM=function(a,n,o,u,p){var f=a.K();if(this.K()===322){if(f==322)return h.zb.Yx(this,a,n,o,u,p);throw h.i.Ra()}throw h.i.Ra()},c.prototype.Sx=function(){return null},c.Ig=function(a,n){return n*(a.Be.length-2)},c.prototype.ic=function(a,n){if(n===void 0)return n=new h.h,this.ic(a,n),n;h.mc.gT(this.ta,this.oa,this.qa,this.ma,a,n)},c.prototype.ge=function(){return null},c.prototype.$F=function(){return null},c.prototype.fq=function(){return null},c.prototype.Di=function(){return null},c.prototype.Rn=function(){return null},c.prototype.lg=function(){return null},c.prototype.Tx=function(a,n){return n!==void 0?this.ux(n)-this.ux(a):this.ux(a)},c.prototype.qp=function(){},c.prototype.fl=function(){return null},c.prototype.dh=function(){},c.prototype.Vc=function(){return null},c.prototype.Me=function(){return null},c.prototype.ux=function(){return null},c.prototype.IG=function(){return null},c.prototype.ub=function(a,n){if(!n&&this.Br(a,0,!1)!=0)return 0;n=17976931348623157e292;var o=this.bc(),u=a.ge(o,!1);return o.sub(a.ic(u)),(o=o.length())<n&&(n=o),o=this.xc(),u=a.ge(o,!1),o.sub(a.ic(u)),(o=o.length())<n&&(n=o),o=a.bc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<n&&(n=o),o=a.xc(),u=this.ge(o,!1),o.sub(this.ic(u)),(o=o.length())<n&&(n=o),n},c.prototype.ng=function(){return h.si.im(this,null)},c}(h.ba);h.NC=O}(B||(B={})),new B.h,function(h){var O;(O=h.VK||(h.VK={}))[O.Unknown=-1]="Unknown",O[O.Not=0]="Not",O[O.Weak=1]="Weak",O[O.Strong=2]="Strong",function(c){c[c.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",c[c.IsWeakSimple=2]="IsWeakSimple",c[c.IsStrongSimple=4]="IsStrongSimple",c[c.DirtyOGCFlags=8]="DirtyOGCFlags",c[c.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",c[c.DirtyExactIntervals=64]="DirtyExactIntervals",c[c.DirtyLooseIntervals=128]="DirtyLooseIntervals",c[c.DirtyIntervals=192]="DirtyIntervals",c[c.DirtyIsEnvelope=256]="DirtyIsEnvelope",c[c.DirtyLength2D=512]="DirtyLength2D",c[c.DirtyRingAreas2D=1024]="DirtyRingAreas2D",c[c.DirtyCoordinates=1993]="DirtyCoordinates",c[c.DirtyAllInternal=65535]="DirtyAllInternal",c[c.DirtyAll=16777215]="DirtyAll"}(h.HK||(h.HK={}));var w=function(c){function a(){var n=c.call(this)||this;return n.Jm=65535,n.xa=0,n.Rg=-1,n.Cb=null,n}return Re(a,c),a.prototype.qp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.ck=function(n){return(this.Jm&n)!=0},a.prototype.Nf=function(n,o){this.Jm=o?this.Jm|n:this.Jm&~n},a.prototype.oc=function(){this.ck(32)&&this.XM()},a.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(n,o){if(0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.oc(),o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.Fd(u),f=0,g=h.sa.Wa(p);f<g;f++){var b=this.Aa[u].gg(g*n+f);o.setAttribute(p,f,b)}},a.prototype.It=function(n,o){this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.Fd(p),g=h.sa.Wa(f),b=0;b<g;b++){var S=o.Vc(f,b);this.setAttribute(f,n,b,S)}},a.prototype.D=function(n,o){if(0>n||n>=this.I())throw h.i.de();this.oc(),this.Aa[0].uc(2*n,o)},a.prototype.Oa=function(n){var o=new h.h;return this.D(n,o),o},a.prototype.Hc=function(n,o){this.Aa[0].uc(2*n,o)},a.prototype.Db=function(n,o,u){if(0>n||n>=this.xa)throw h.i.de();this.oc();var p=this.Aa[0];u!==void 0?(p.write(2*n,o),p.write(2*n+1,u)):p.Vt(2*n,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw h.i.de();this.oc();var n=this.Aa[0],o=new h.Od;return o.x=n.read(NaN),o.y=n.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):h.sa.te(1),o},a.prototype.ZB=function(n){if(0>n||n>=this.I())throw h.i.de();this.se(1),this.oc(),this.Qc(1993);var o=this.Aa[0];o.write(2*n,(void 0).x),o.write(2*n+1,(void 0).y),this.Aa[1].rr(n,(void 0).z)},a.prototype.Vc=function(n,o,u){if(0>o||o>=this.xa)throw h.i.de();var p=h.sa.Wa(n);if(u>=p)throw h.i.de();this.oc();var f=this.description.Rf(n);return 0<=f?this.Aa[f].gg(o*p+u):h.sa.te(n)},a.prototype.tF=function(n,o){return this.Vc(n,o,void 0)},a.prototype.setAttribute=function(n,o,u,p){if(0>o||o>=this.xa)throw h.i.de();var f=h.sa.Wa(n);if(u>=f)throw h.i.de();this.se(n),this.oc(),n=this.description.Rf(n),this.Qc(1993),this.Aa[n].rr(o*f+u,p)},a.prototype.vb=function(n){return this.vx(),this.se(n),this.oc(),this.Aa[this.description.Rf(n)]},a.prototype.kn=function(n,o){if(o!=null&&h.sa.Vp(n)!=o.Vp())throw h.i.O();this.se(n),n=this.description.Rf(n),this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Aa[n]=o,this.Qc(16777215)},a.prototype.un=function(n){var o=null;if(this.Aa!=null){var u=h.fe.Kw(n,this.description);o=[];for(var p=0,f=n.Ba;p<f;p++)u[p]!=-1&&(o[p]=this.Aa[u[p]])}this.description=n,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.vD=function(n){this.yu(!0),n instanceof h.l?this.aa.A(n):this.aa.So(n)},a.prototype.WM=function(n){this.yu(!1),n instanceof h.l?this.aa.A(n):this.aa.So(n)},a.prototype.dn=function(n){this.yu(!0),this.aa.copyTo(n)},a.prototype.A=function(n){this.vD(n)},a.prototype.So=function(n){this.vD(n)},a.prototype.yc=function(n){this.WM(n)},a.prototype.Vg=function(n,o){var u=new h.Oc;return this.Bc()?(u.Pa(),u):(this.yu(!0),this.aa.Vg(n,o))},a.prototype.dc=function(){var n=this.description.dc();if(!this.Bc())for(var o=this.I(),u=0,p=this.description.Ba;u<p;u++)n=this.Aa[u].Cn(n,0,o*h.sa.Wa(this.description.Fd(u)));return n},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&this.description.Nb(n.description))||this.Bc()!=n.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=n.I())return!1;for(var u=0;u<this.description.Ba;u++){var p=this.description.ld(u),f=this.vb(p),g=n.vb(p);if(!f.Nb(g,0,o*h.sa.Wa(p)))return!1}return!0},a.prototype.copyTo=function(n){if(n.K()!=this.K())throw h.i.O();this.ZC(n)},a.prototype.ZC=function(n){this.oc(),n.description=this.description,n.Aa=null;var o=this.description.Ba,u=null;if(this.Aa!=null){u=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(u[p]=this.Aa[p].BB(this.I()*h.sa.Wa(this.description.Fd(p))))}this.aa!=null?(n.aa=this.aa.Ja(),this.aa.copyTo(n.aa)):n.aa=null,n.xa=this.xa,n.Jm=this.Jm,n.Aa=u;try{this.qp(n)}catch{throw n.Pa(),h.i.hu()}},a.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(n){n==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=n,this.gM(),this.wc()},a.prototype.yu=function(n){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(n);for(var o=1;o<this.description.Ba;o++)for(var u=this.description.Fd(o),p=h.sa.Wa(u),f=this.Aa[o],g=0;g<p;g++){var b=new h.Oc;b.Pa();for(var S=0;S<this.xa;S++){var $=f.gg(S*p+g);b.$b($)}this.aa.setInterval(u,g,b)}n&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var n=this.Aa[0],o=new h.h,u=0;u<this.xa;u++)n.uc(2*u,o),this.aa.$b(o)},a.prototype.Ap=function(n){n.Pa();for(var o=this.Aa[0],u=new h.h,p=0;p<this.xa;p++)o.uc(2*p,u),n.$b(u)},a.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var n=0;n<this.description.Ba;n++){var o=this.description.Fd(n);if(this.Aa[n]!=null){var u=h.sa.Wa(o),p=h.P.truncate(this.Aa[n].size/u);p<this.xa&&(p=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[n].resize(p*u,h.sa.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[n]=h.Zc.TE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(n){if(0>n)throw h.i.O();n!=this.xa&&(this.xa=n,this.Qc(65535))},a.prototype.qm=function(n){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=n)return this.ck(8)?1:2}return-1},a.prototype.Eh=function(n,o){if(this.LT=o,n==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),n==0)this.Nf(2,!1),this.Nf(4,!1);else if(n==1)this.Nf(2,!0),this.Nf(4,!1);else{if(n!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.fD=function(n,o,u,p){if(0>n||n>=this.xa||0>o||o>=this.xa)throw h.i.ga("index out of bounds");this.oc(),p.Pf(this.description),p.B()&&p.wn();for(var f=0;f<this.description.Ba;f++)for(var g=this.description.Fd(f),b=0,S=h.sa.Wa(g);b<S;b++){var $=this.Aa[f].gg(S*n+b),E=this.Aa[f].gg(S*o+b);p.setAttribute(g,b,h.mc.jq($,E,u))}},a.prototype.Ar=function(n,o){var u=this.Aa[0].o,p=u[2*n]-u[2*o];return n=u[2*n+1]-u[2*o+1],Math.sqrt(p*p+n*n)},a.prototype.FR=function(n){if(0>n||n>=this.xa)throw h.i.de();this.oc();var o=new h.Ta;o.Pf(this.description),o.B()&&o.wn();for(var u=0;u<this.description.Ba;u++)for(var p=this.description.ld(u),f=0,g=h.sa.Wa(p);f<g;f++){var b=this.Aa[u].gg(g*n+f);o.setAttribute(p,f,b)}return o},a.prototype.Fh=function(n,o){if(0>n||n>=this.xa)throw h.i.de();if(o.B())throw h.i.O();this.oc();for(var u=o.description,p=0;p<u.Ba;p++)for(var f=u.ld(p),g=h.sa.Wa(f),b=0;b<g;b++){var S=o.Vc(f,b);this.setAttribute(f,n,b,S)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(h.ba);h.Fx=w}(B||(B={})),function(h){var O=function(){function w(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.ao=null}return w.prototype.Xo=function(c){this.ao=c},w.prototype.MP=function(){this.Tv=!1},w.prototype.Ee=function(c){this.ob.Ee(c)},w.prototype.Rr=function(c){var a=this.ob.De();return this.nX(a),this.qX(c,a),a},w.prototype.HP=function(c){this.ob.kd(c)},w.prototype.addElement=function(c,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.AD(c,0,a)},w.prototype.ED=function(c){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(c,1,this.Ne)},w.prototype.zn=function(c){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,n=this.ob.o;if(a==-1||n[7*a]==-1)return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),(n=this.ob.o)[7*a]=c,this.xp(-1,c,a,n),c;var o=a==-1?-1:n[7*a+2];return c=this.ob.Nl([-1,-1,o,c,this.il(),-1,-1]),(n=this.ob.o)[7*o+1]=c,this.ky(c,n),n[7*c+2]===-1&&(n[7*a]=c),this.xp(-1,c,a,n),c},w.prototype.Bu=function(c,a,n,o){var u=-1;u==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),u=this.Ne);var p=this.ob.o;if(u==-1||p[7*u]==-1)return n=this.ob.Nl([-1,-1,-1,n,this.il(),-1,-1]),(p=this.ob.o)[7*u]=n,this.xp(-1,n,u,p),n;if(o){o=a!=-1?this.ao.compare(this,n,a):-1;var f=c!=-1?this.ao.compare(this,n,c):1}else o=-1,f=1;if(o==0||f==0)return p[7*u+3]=o==0?a:c,-1;for((a!=-1&&c!=-1?this.Vm>h.P.XA(this.Vm)>>1:a!=-1)?c=a:o=f,a=!0;;){if(0>o){if((f=p[7*c])==-1){o=c,n=this.ob.Nl([-1,-1,c,n,this.il(),-1,-1]),(p=this.ob.o)[7*c]=n;break}c=f}else{if((f=p[7*c+1])==-1){o=p[7*c+6],n=this.ob.Nl([-1,-1,c,n,this.il(),-1,-1]),(p=this.ob.o)[7*c+1]=n;break}c=f}a&&(o*=-1,a=!1)}return this.ky(n,p),p[7*n+2]===-1&&(p[7*u]=n),this.xp(o,n,u,p),n},w.prototype.AF=function(){return this.dR(this.Ne)},w.prototype.wd=function(c,a){a=a==-1?this.Ne:a,this.Tv?this.GP(c,a):this.eY(c,a)},w.prototype.search=function(c,a){for(a=this.uv(a);a!=-1;){var n=this.ao.compare(this,c,a);if(n==0)return a;a=0>n?this.nl(a):this.Zp(a)}return-1},w.prototype.DW=function(c){for(var a=this.uv(-1),n=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(n=a,a=this.Zp(a))}return n},w.prototype.pJ=function(c){for(var a=this.uv(-1),n=-1;a!=-1;){var o=c.compare(this,a);if(o==0)return a;0>o?(n=a,a=this.nl(a)):a=this.Zp(a)}return n},w.prototype.ka=function(c){return this.ob.U(c,3)},w.prototype.nl=function(c){return this.ob.U(c,0)},w.prototype.Zp=function(c){return this.ob.U(c,1)},w.prototype.getParent=function(c){return this.ob.U(c,2)},w.prototype.lb=function(c){return this.ob.U(c,6)},w.prototype.xe=function(c){return this.ob.U(c,5)},w.prototype.sc=function(c){return c==-1?this.ml(this.Ne):this.ml(c)},w.prototype.Gc=function(c){return c==-1?this.bs(this.Ne):this.bs(c)},w.prototype.UR=function(c){return c==-1?this.XF(this.Ne):this.XF(c)},w.prototype.Uj=function(c,a){this.IB(c,a)},w.prototype.uv=function(c){return c==-1?this.TF(this.Ne):this.TF(c)},w.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},w.prototype.size=function(c){return c==-1?this.VF(this.Ne):this.VF(c)},w.prototype.FN=function(c,a){for(var n=a[7*c],o=a[7*c+1],u=a[7*c+4];n!=-1||o!=-1;){var p=n!=-1?a[7*n+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,u<=Math.min(p,o))break;p<=o?this.nJ(n,a):this.mJ(c,a),n=a[7*c],o=a[7*c+1]}},w.prototype.ky=function(c,a){if(this.Tv)for(var n=a[7*c+4],o=a[7*c+2];o!=-1&&a[7*o+4]>n;)a[7*o]==c?this.nJ(c,a):this.mJ(o,a),o=a[7*c+2]},w.prototype.mJ=function(c,a){var n=a[7*c+1];a[7*n+2]=a[7*c+2],a[7*c+2]=n;var o=a[7*n];a[7*c+1]=o,o!=-1&&(a[7*o+2]=c),a[7*n]=c,(o=a[7*n+2])!=-1&&(a[7*o]==c?a[7*o]=n:a[7*o+1]=n)},w.prototype.nJ=function(c,a){var n=a[7*c+2];a[7*c+2]=a[7*n+2],a[7*n+2]=c;var o=a[7*c+1];a[7*n]=o,o!=-1&&(a[7*o+2]=n),a[7*c+1]=n,(o=a[7*c+2])!=-1&&(a[7*o]===n?a[7*o]=c:a[7*o+1]=c)},w.prototype.Rk=function(c,a){this.ob.T(c,2,a)},w.prototype.OB=function(c,a){this.ob.T(c,0,a)},w.prototype.SB=function(c,a){this.ob.T(c,1,a)},w.prototype.RB=function(c,a){this.ob.T(c,5,a)},w.prototype.fx=function(c,a){this.ob.T(c,6,a)},w.prototype.SJ=function(c,a){this.ob.T(a,0,c)},w.prototype.nX=function(c){this.ob.T(c,4,0)},w.prototype.qX=function(c,a){this.ob.T(a,5,c)},w.prototype.TF=function(c){return c==-1?-1:this.ob.U(c,0)},w.prototype.ml=function(c){return c==-1?-1:this.ob.U(c,1)},w.prototype.bs=function(c){return c==-1?-1:this.ob.U(c,2)},w.prototype.dR=function(c){return c==-1?-1:this.ob.U(c,3)},w.prototype.VF=function(c){return c==-1?0:this.ob.U(c,4)},w.prototype.XF=function(c){return this.ob.U(c,5)},w.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},w.prototype.hl=function(c){c!=-1&&this.ob.kd(c)},w.prototype.il=function(){return this.Vm=h.P.XA(this.Vm),1073741823&this.Vm},w.prototype.AD=function(c,a,n){var o=this.ob.o;if(n==-1||o[7*n]==-1)return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),(o=this.ob.o)[7*n]=c,this.xp(-1,c,n,o),c;for(var u=n==-1?-1:o[7*n];;){var p=a==-1?1:this.ao.compare(this,c,u);if(0>p){if((p=this.nl(u))==-1){a=u,c=this.ob.Nl([-1,-1,u,c,this.il(),-1,-1]),(o=this.ob.o)[7*u]=c;break}u=p}else{if(a==1&&p==0)return o[7*n+3]=u,-1;if((p=o[7*u+1])==-1){a=o[7*u+6],c=this.ob.Nl([-1,-1,u,c,this.il(),-1,-1]),(o=this.ob.o)[7*u+1]=c;break}u=p}}return this.ky(c,o),o[7*c+2]===-1&&(o[7*n]=c),this.xp(a,c,n,o),c},w.prototype.xp=function(c,a,n,o){if(c!=-1){var u=o[7*c+5];o[7*c+5]=a}else u=n==-1?-1:o[7*n+2];o[7*a+5]=u,u!=-1&&(o[7*u+6]=a),o[7*a+6]=c,c==(n==-1?-1:o[7*n+1])&&(o[7*n+1]=a),c==-1&&(o[7*n+2]=a),o[7*n+4]=(n==-1?0:o[7*n+4])+1},w.prototype.vB=function(c,a){var n=this.ob.o,o=n[7*c+5];c=n[7*c+6],o!=-1?n[7*o+6]=c:n[7*a+1]=c,c!=-1?n[7*c+5]=o:n[7*a+2]=o,n[7*a+4]=a===-1?-1:n[7*a+4]-1},w.prototype.eY=function(c,a){this.vB(c,a);var n=this.nl(c),o=this.Zp(c),u=this.getParent(c),p=c;if(n!=-1&&o!=-1){this.Vm=h.P.XA(this.Vm);var f=1073741823<this.Vm?this.lb(c):this.xe(c),g=this.getParent(f)==c;this.ob.bC(c,f,0),this.ob.bC(c,f,1),this.ob.bC(c,f,2),u!=-1?this.nl(u)==c?this.OB(u,f):this.SB(u,f):this.SJ(f,a),g?(n==f?(this.OB(f,c),this.Rk(o,f)):o==f&&(this.SB(f,c),this.Rk(n,f)),this.Rk(c,f),u=f):(this.Rk(n,f),this.Rk(o,f),u=this.getParent(c),p=f),n=this.nl(c),o=this.Zp(c),n!=-1&&this.Rk(n,c),o!=-1&&this.Rk(o,c)}n=n!=-1?n:o,u==-1?this.SJ(n,a):this.nl(u)==p?this.OB(u,n):this.SB(u,n),n!=-1&&this.Rk(n,u),this.hl(c)},w.prototype.GP=function(c,a){var n=this.ob.o;n[7*c+4]=2147483647;var o=-1,u=-1,p=a===-1?-1:n[7*a],f=p==c;if(f&&(o=n[7*p],u=n[7*p+1],o==-1&&u==-1))return this.vB(p,a),this.hl(p),void(n[7*a]=-1);this.FN(c,n),(p=n[7*c+2])!=-1&&(n[7*p]==c?n[7*p]=-1:n[7*p+1]=-1),this.vB(c,a),this.hl(c),f&&(n[7*a]=o==-1||n[7*o+2]!=-1?u:o)},w.prototype.IB=function(c,a){this.ob.T(c,3,a)},w}();h.$j=O}(B||(B={})),function(h){var O=function(){function w(c,a){c!==void 0&&this.L(c,a)}return w.prototype.L=function(c,a){this.pa=c,this.wa=a,this.normalize()},w.prototype.isIntersecting=function(c){return this.pa<=c.pa?this.wa>=c.pa:c.wa>=this.pa},w.prototype.move=function(c){this.B()||(this.pa+=c,this.wa+=c)},w.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var c=this.pa;this.pa=this.wa,this.wa=c}isNaN(this.wa)&&this.Pa()}},w.prototype.Pa=function(){this.wa=this.pa=NaN},w.prototype.B=function(){return isNaN(this.pa)},w.prototype.$b=function(c){typeof c=="number"?this.B()?this.wa=this.pa=c:this.Nk(c):c.B()||(this.B()?(this.pa=c.pa,this.wa=c.wa):(this.pa>c.pa&&(this.pa=c.pa),this.wa<c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa()))},w.prototype.Nk=function(c){c<this.pa?this.pa=c:c>this.wa&&(this.wa=c)},w.prototype.contains=function(c){return typeof c=="number"?c>=this.pa&&c<=this.wa:c.pa>=this.pa&&c.wa<=this.wa},w.prototype.Fa=function(c){this.B()||c.B()?this.Pa():(this.pa<c.pa&&(this.pa=c.pa),this.wa>c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa())},w.prototype.X=function(c){this.B()||(this.pa-=c,this.wa+=c,this.wa<this.pa&&this.Pa())},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},w.prototype.FB=function(c,a){c>a?(this.pa=a,this.wa=c):(this.pa=c,this.wa=a)},w.prototype.Kt=function(c){return h.P.Tk(c,this.pa,this.wa)},w.prototype.S=function(){return this.wa-this.pa},w.prototype.tf=function(){return .5*(this.pa+this.wa)},w.prototype.Nb=function(c){return c==this||c instanceof w&&(!(!this.B()||!c.B())||this.pa==c.pa&&this.wa==c.wa)},w.prototype.dc=function(){return h.P.wj(h.P.wj())},w}();h.Oc=O}(B||(B={})),function(h){var O=new h.Oc,w=new h.Oc,c=function(){this.oe=null,this.pb=-1,this.tb=new h.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new h.Oc,this.Wf.FB(0,0)};h.EY=c;var a=function(){function n(o,u,p){this.g=o,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=u,this.Pq=10*u,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=p,this.OA=new c,this.TH=new c,h.P.truncate(3*o.gd/2)}return n.prototype.hG=function(o,u,p,f){o.oe=f===null?null:f[p[5*u]],o.Vv=o.oe!=null,o.Vv||((f=p[5*u+2])!==-1&&this.g.hW(p[5*u],p[5*f],o.tb),o.oe=o.tb,o.Wf.FB(o.tb.ta,o.tb.qa),o.Wf.wa+=this.ra,o.tb.mI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.lA=(o.tb.qa-o.tb.ta)/(o.tb.ma-o.tb.oa)))},n.prototype.JO=function(o,u){var p=o.Br(u,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(ht),o.Vr(ut),u.$p(pt),u.Vr(St),Le.na(this.Mq,this.Jk),ht.rb(pt)&&this.Jk==ht.y?0>ut.compare(St)?Le.N(ut):Le.N(St):ht.rb(St)&&this.Jk==ht.y?0>ut.compare(pt)?Le.N(ut):Le.N(pt):pt.rb(ut)&&this.Jk==pt.y?0>ht.compare(St)?Le.N(ht):Le.N(St):ut.rb(St)&&this.Jk==ut.y&&(0>ht.compare(pt)?Le.N(ht):Le.N(pt)),o.Me(Le.y,Le.x)<u.Me(Le.y,Le.x)?-1:1)},n.prototype.HO=function(o,u){if(o.tb.oa==u.tb.oa&&o.tb.ta==u.tb.ta)return o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa?this.bA?this.Ly():0:this.KE(o,u);if(o.tb.ma==u.tb.ma&&o.tb.qa==u.tb.qa)return this.JE(o,u);var p=this.JE(o,u);return o=this.KE(o,u),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},n.prototype.DO=function(o,u){if(o.qa>u.qa){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.qa-o.ta)<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 1},n.prototype.EO=function(o,u){if(o.ta<u.ta){if(u.qa>u.ta&&u.ma-u.oa<2*this.ra&&o.xi(u.qa,u.ma,this.ra))return this.zi()}else if((u.ma-u.oa)/(u.qa-u.ta)*(o.ta-o.qa)<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi();return-1},n.prototype.FO=function(o,u){var p=new h.h;p.vc(u.xc(),u.bc()),p.cr(),p.normalize();var f=new h.h;f.vc(o.bc(),u.bc());var g=new h.h;g.vc(o.xc(),u.bc()),f=f.Sh(p),p=g.Sh(p),g=Math.abs(f);var b=Math.abs(p);if(g<b){if(g<this.Pq&&u.xi(o.ta,o.oa,this.ra))return this.zi()}else if(b<this.Pq&&u.xi(o.qa,o.ma,this.ra))return this.zi();return 0>f&&0>p?-1:0<f&&0<p?1:this.zi()},n.prototype.IE=function(o,u){return o.oa==u.oa&&o.ta==u.ta?this.DO(o,u):o.ma==u.ma&&o.qa==u.qa?this.EO(o,u):this.FO(o,u)},n.prototype.GO=function(o,u){return o.ma==u.ma&&o.qa==u.qa&&o.oa==u.oa&&o.ta==u.ta?this.bA?this.Ly():0:this.zi()},n.prototype.JE=function(o,u){var p=1;if(o.tb.oa<u.tb.oa){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var g=o.ta-f.ta;u=u.lA*(o.oa-f.oa);var b=this.Pq;return g<u-b?-p:g>u+b?p:f.xi(o.ta,o.oa,this.ra)?this.zi():g<u?-p:p},n.prototype.KE=function(o,u){var p=1;if(u.tb.ma<o.tb.ma){p=-1;var f=o;o=u,u=f}o=o.tb,f=u.tb;var g=o.qa-f.ta;u=u.lA*(o.ma-f.oa);var b=this.Pq;return g<u-b?-p:g>u+b?p:f.xi(o.qa,o.ma,this.ra)?this.zi():g<u?-p:p},n.prototype.Ly=function(){return this.sg=!0,this.Pi=new h.Nd(5,this.No,this.ht),-1},n.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new h.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},n.prototype.IO=function(o,u,p,f){if(this.sg)return-1;var g=this.JH==this.Jk&&this.IH==this.Mq;if(g&&o==this.Ys)var b=this.KH;else b=NaN,this.Ys=-1;return g&&u==this.Zs?g=this.LH:(g=NaN,this.Zs=-1),p.oe.UI(O),f.oe.UI(w),O.wa<w.pa?-1:w.wa<O.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(b)&&(this.Ys=o,this.KH=b=o=p.oe.Me(this.Jk,this.Mq)),isNaN(g)&&(this.Zs=u,this.LH=g=o=f.oe.Me(this.Jk,this.Mq)),Math.abs(b-g)<=this.ra?this.JO(p.oe,f.oe):b<g?-1:b>g?1:0)},n.prototype.Mr=function(){this.sg=!1},n.prototype.tm=function(){return this.Pi},n.prototype.VJ=function(o,u){this.Jk=o,this.Mq=u,this.ht=this.No=this.Zs=this.Ys=-1},n.prototype.compare=function(o,u,p){return this.sg?-1:(o=o.ka(p),this.Fm=p,this.ME(u,u,o,o))},n.prototype.ME=function(o,u,p,f){if(this.No==u)var g=this.OA;else this.No=u,g=this.OA,this.OA.pb=o,this.hG(g,u,this.g.ud.o,this.g.Te);if(b==null){this.ht=f;var b=this.TH;this.TH.pb=p,this.hG(b,f,this.g.ud.o,this.g.Te)}return g.Vv||b.Vv?this.IO(u,f,g,b):g.Wf.wa<b.Wf.pa?-1:b.Wf.wa<g.Wf.pa?1:(o=g.Xv?1:0,(o|=b.Xv?2:0)==0?this.HO(g,b):o==1?this.IE(g.tb,b.tb):o==2?-1*this.IE(b.tb,g.tb):this.GO(g.tb,b.tb))},n}();h.PC=a}(B||(B={})),function(h){var O=function(){function w(c,a){this.g=c,this.ra=a,this.sg=!1,this.No=-1,this.Wf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.je=new h.zb,this.Fm=-1,this.wA=17976931348623157e292}return w.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},w.prototype.Fh=function(c){this.Iq.N(c)},w.prototype.compare=function(c,a){return this.NE(a,c.ka(a))},w.prototype.NE=function(c,a){var n=this.g.cc(a)!=null;if(n||(this.g.fd(a,this.je),this.Wf.FB(this.je.ta,this.je.qa)),n)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=c,this.sg=!0,0;this.je.mI(),n=this.je.bc(),(a=new h.h).vc(this.je.xc(),n),a.cr();var o=new h.h;return o.vc(this.Iq,n),n=a.Sh(o),(n/=a.length())<10*-this.ra?-1:n>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((a=Math.abs(n))<this.wA&&(this.Fm=c,this.wA=a),this.sg=!0,a<.25*this.ra)?0:0>n?-1:1},w}();h.WL=O}(B||(B={})),function(h){function O(c,a,n,o){n=new Float64Array(c.subarray(n,o)),c.set(n,a)}var w=function(){function c(a){this.Pb=this.rk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Float64Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Dn=function(a){var n=new c(0);return n.o=new Float64Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Float64Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.BB=function(a){return c.Nr(this,a)},c.prototype.gg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Cn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.wj(this.read(n));return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(n,n+o),f);else{u=o;for(var g=0;g<o;g+=p){u-=p;for(var b=0;b<p;b++)this.o[f+g+b]=a.o[n+u+b]}}},c.prototype.On=function(a,n,o,u,p,f,g){if(this.Pb)throw h.i.Hb();if(!p&&(1>f||u%f!=0))throw h.i.O();var b=this.size-g;if(b<u&&this.resize(this.size+u-b),O(this.o,a+u,a,a+(g-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,g=0;g<u;g+=f)for(p-=f,b=0;b<f;b++)this.o[a+g+b]=n.o[o+p+b]},c.prototype.Dz=function(a,n,o,u,p,f){if(this.Pb)throw h.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,O(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=n[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var g=u-1;p<u;++p)f=n[o+g],this.o[a++]=f.x,this.o[a++]=f.y,g--}},c.prototype.Nn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,O(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();O(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,f){if(0>a||0>n||0>u||!p&&(0>=f||n%f!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,f);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-f,f==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/f);p<n;p++){for(var g=0;g<f;g++)this.o[a+g]=o.o[u+g];a+=f,u-=f}},c.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&O(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var f=0;f<o;f++){var g=this.o[a+p+f];this.o[a+p+f]=this.o[a+n+f],this.o[a+n+f]=g}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var f=0;f<p;f++){var g=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=g}o+=p,a-=p}},c.prototype.qC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.pC=function(a,n,o){if(0>a||0>n)throw h.i.O();if(n!=0){this.size<(n<<1)+a&&this.resize((n<<1)+a),n+=0;for(var u=0;u<n;u++)this.o[a]=o[u][0],this.o[a+1]=o[u][1],a+=2}},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.pB=function(a,n,o){if(0>a||0>n||this.size<(n>>1)+a)throw h.i.O();if(n!=0){n=0+n;for(var u=0;u<n;u++)o[u][0]=this.o[a],o[u][1]=this.o[a+1],a+=2}},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.rk=this.Pb=!0},c.prototype.Wd=function(a,n,o){Array.prototype.sort.call(this.o.subarray(a,n),o)},c.prototype.Vp=function(){return 1},c}();h.ce=w}(B||(B={})),function(h){function O(c,a,n,o){n=new Int32Array(c.subarray(n,o)),c.set(n,a)}h.nY=function(){this.random=1973};var w=function(){function c(a){this.Pb=this.rk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Int32Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Dn=function(a){var n=new c(0);return n.o=new Int32Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int32Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.BB=function(a){return c.Nr(this,a)},c.prototype.gg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Cn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.Vh(this.read(n),a);return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(n,n+o),f);else{u=o;for(var g=0;g<o;g+=p){u-=p;for(var b=0;b<p;b++)this.o[f+g+b]=a.o[n+u+b]}}},c.prototype.On=function(a,n,o,u,p,f,g){if(this.Pb)throw h.i.Hb();if(!p&&(1>f||u%f!=0))throw h.i.O();if(O(this.o,a+u,a,a+(g-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,g=0;g<u;g+=f){p-=f;for(var b=0;b<f;b++)this.o[a+g+b]=n.o[o+p+b]}},c.prototype.Dz=function(a,n,o,u,p,f){if(this.Pb)throw h.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,O(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=n[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var g=u-1;p<u;++p)f=n[o+g],this.o[a++]=f.x,this.o[a++]=f.y,g--}},c.prototype.Nn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,O(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();O(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,f){if(0>a||0>n||0>u||!p&&(0>=f||n%f!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,f);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-f,f==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/f);p<n;p++){for(var g=0;g<f;g++)this.o[a+g]=o.o[u+g];a+=f,u-=f}},c.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&O(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var f=0;f<o;f++){var g=this.o[a+p+f];this.o[a+p+f]=this.o[a+n+f],this.o[a+n+f]=g}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var f=0;f<p;f++){var g=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=g}o+=p,a-=p}},c.prototype.qC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.rk=this.Pb=!0},c.prototype.Wd=function(a,n,o){10>n-a?c.mG(this.o,a,n,o):c.lB(this.o,a,n-1,o)},c.prototype.Vp=function(){return 2},c.prototype.Gc=function(){return this.o[this.size-1]},c.prototype.Jf=function(){this.resize(this.size-1)},c.prototype.XW=function(a){this.o[this.size-1]=a},c.prototype.NV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},c.prototype.gF=function(a){for(var n=0,o=this.size;n<o;n++)if(this.o[n]==a)return n;return-1},c.prototype.cG=function(a){return 0<=this.gF(a)},c.mG=function(a,n,o,u){for(var p=n;p<o;p++){for(var f=a[p],g=p-1;g>=n&&0<u(a[g],f);)a[g+1]=a[g],g--;a[g+1]=f}},c.sx=function(a,n,o){var u=a[o];a[o]=a[n],a[n]=u},c.lB=function(a,n,o,u){if(!(n>=o))for(;;){if(9>o-n){c.mG(a,n,o+1,u);break}var p=a[n];c.sx(a,n,o);for(var f=n,g=n;g<o;g++)0>=u(a[g],p)&&(c.sx(a,f,g),f+=1);c.sx(a,f,o),f-n<o-f?(c.lB(a,n,f-1,u),n=f+1):(c.lB(a,f+1,o,u),o=f-1)}},c}();h.ja=w}(B||(B={})),function(h){function O(c,a,n,o){n=new Int8Array(c.subarray(n,o)),c.set(n,a)}var w=function(){function c(a){this.o=null;var n=a;2>n&&(n=2),this.o=new Int8Array(n),this.size=a}return c.prototype.rotate=function(a,n,o){if(this.Pb)throw h.i.ga("invalid_call");if(n<a||n>o||a>o)throw h.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},c.rf=function(a,n){var o=new c(a),u=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)u[p]=n;return o},c.Dn=function(a){var n=new c(0);return n.o=new Int8Array(a.o),n.size=a.size,n},c.Nr=function(a,n){var o=new c(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int8Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},c.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},c.prototype.read=function(a){return this.o[a]},c.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},c.prototype.get=function(a){return this.o[a]},c.prototype.write=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.set=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n},c.prototype.Vt=function(a,n){if(this.Pb)throw h.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},c.prototype.BB=function(a){return c.Nr(this,a)},c.prototype.gg=function(a){return this.read(a)},c.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=h.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var u=this.size;u<a;u++)o[u]=n}this.size=a},c.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},c.prototype.rr=function(a,n){this.write(a,n)},c.prototype.Cn=function(a,n,o){for(var u=this.size;n<u&&n<o;n++)a=h.P.Vh(this.read(n),a);return a},c.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof c))return!1;var u=this.size,p=a.size;if(o>u||o>p&&u!=p)return!1;for(o>u&&(o=u);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},c.prototype.addRange=function(a,n,o,u,p){if(this.Pb)throw h.i.Hb();if(!u&&(1>p||o%p!=0))throw h.i.O();var f=this.size;if(this.resize(f+o),u)this.o.set(a.o.subarray(n,n+o),f);else{u=o;for(var g=0;g<o;g+=p){u-=p;for(var b=0;b<p;b++)this.o[f+g+b]=a.o[n+u+b]}}},c.prototype.On=function(a,n,o,u,p,f,g){if(this.Pb)throw h.i.Hb();if(!p&&(1>f||u%f!=0))throw h.i.O();if(O(this.o,a+u,a,a+(g-a)),this.o==n.o&&a<o&&(o+=u),p)this.o.set(n.o.subarray(o,o+u),a);else for(p=u,g=0;g<u;g+=f){p-=f;for(var b=0;b<f;b++)this.o[a+g+b]=n.o[o+p+b]}},c.prototype.Nn=function(a,n,o,u){if(this.Pb)throw h.i.Hb();for(u-=a,O(this.o,a+u,a,a+u),u=0;u<o;u++)this.o[a+u]=n},c.prototype.Dz=function(a,n,o,u,p,f){if(this.Pb)throw h.i.Hb();if(0>f&&(f=this.size),this.size+2*u>this.o.length?this.resize(this.size+2*u):this.size+=2*u,O(this.o,a+2*u,a,a+(f-a)),p)for(p=0;p<u;p++)f=n[o++],this.o[a++]=f.x,this.o[a++]=f.y;else{p=0;for(var g=u-1;p<u;++p)f=n[o+g],this.o[a++]=f.x,this.o[a++]=f.y,g--}},c.prototype.xj=function(a,n,o){if(this.Pb)throw h.i.Hb();O(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},c.prototype.Wt=function(a,n,o,u,p,f){if(0>a||0>n||0>u||!p&&(0>=f||n%f!=0)||o.size<u+n)throw h.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,u,p,f);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u++;else if(u=u+n-f,f==1)for(p=0;p<n;p++)this.o[a]=o.o[u],a++,u--;else for(p=0,n=h.P.truncate(n/f);p<n;p++){for(var g=0;g<f;g++)this.o[a+g]=o.o[u+g];a+=f,u-=f}},c.prototype.Gn=function(a,n,o){if(this.Pb||a+n>this.size)throw h.i.Hb();0<o-(a+n)&&O(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},c.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw h.i.Hb();for(var u=n>>1,p=0;p<u;p+=o){n-=o;for(var f=0;f<o;f++){var g=this.o[a+p+f];this.o[a+p+f]=this.o[a+n+f],this.o[a+n+f]=g}}},c.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw h.i.O();for(var u=n;u<n+o;u++)this.o[u]=a},c.prototype.Cr=function(a,n,o,u,p){if(!(u&&a==o||(this.o.set(this.o.subarray(o,o+n),a),u)))for(o=a,a=a+n-p,u=0,n=h.P.truncate(n/2);u<n;u++){for(var f=0;f<p;f++){var g=this.o[o+f];this.o[o+f]=this.o[a+f],this.o[a+f]=g}o+=p,a-=p}},c.prototype.qC=function(a,n,o,u,p){if(0>a||0>n||0>u)throw h.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=u;u<n;u++)this.o[a]=o[u].x,this.o[a+1]=o[u].y,a+=p},c.prototype.Xw=function(a,n,o,u,p){if(0>a||0>n||0>u||this.size<n+a)throw h.i.O();if(p)for(p=0;p<n;p++)o[u+p]=this.o[a+p];else for(u=u+n-1;a<n;a++)o[u]=this.o[a],u--},c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},c.prototype.ix=function(){this.rk=this.Pb=!0},c.prototype.Wd=function(a,n,o){n=this.o.subarray(a,n),Array.prototype.sort.call(n,o),this.o.set(n,a)},c.prototype.uJ=function(a,n){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=n},c.prototype.FE=function(a,n){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~n},c.prototype.Vp=function(){return 1},c}();h.rn=w}(B||(B={})),function(h){h.Zc=function(){function O(){}return O.Or=function(w,c){return h.rn.rf(w,c)},O.Fn=function(w,c){return h.ce.rf(w,c)},O.kP=function(w,c,a){switch(w){case 1:w=h.ce.rf(c,a);break;case 2:w=h.ja.rf(c,a);break;case 4:w=h.rn.rf(c,a);break;default:throw h.i.Ra()}return w},O.TE=function(w,c){return O.kP(h.sa.Vp(w),c*h.sa.Wa(w),h.sa.te(w))},O.Qh=function(w,c){return h.ja.rf(w,c)},O.lI=function(w){var c,a=[];for(c=0;c<w;c++)a.push(null);return a},O}()}(B||(B={})),function(h){h.ha=function(O){O===void 0&&(O=0),this.u=O}}(B||(B={})),function(h){h.IL=function(){function O(){}return O.bind=function(w){h.Tc=w.PeDefs,h.qf=w.PeFactory,h.IC=w.PeVertcs,h.gj=w.PeCSTransformations,h.HC=w.PeGTTransformations,h.GL=w.PeGeogtran,h.FL=w.PeFactoryCodechange,h.GC=w.PeGCSExtent,h.Eg=w.PePCSInfo,h.HL=w.PeHorizon,h.EL=w.PeCoordsys,h.np=w.PeGTlistExtended,h.np.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=w.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},O}(),h.qf=null,h.IC=null,h.EL=null,h.HL=null,h.Eg=null,h.np=null,h.Lx=null,h.GC=null,h.FL=null,h.GL=null,h.Tc=null,h.HC=null,h.gj=null}(B||(B={})),function(h){var O=function(){function w(){}return w.Mb=function(c,a){return 0<=a?w.R(c):-w.R(c)},w.R=function(c){return 0>c?-c:c},w.vi=function(c){return 3552713678800501e-30>c},w.FC=function(c,a,n){return w.R(c-a)<=n*(1+(w.R(c)+w.R(a))/2)},w.$=function(c,a){return w.FC(c,a,3552713678800501e-30)},w.AL=function(c){return 3552713678800501e-30>=w.R(c)},w.Dd=function(c){return w.AL(c)},w}();h.s=O,h.F=function(){function w(){}return w.ip=function(c,a){var n=0;return(c=O.R(c))+(a=O.R(a))!=0&&(c>a?(n=a/c,n=c*Math.sqrt(1+n*n)):(n=c/a,n=a*Math.sqrt(1+n*n))),n},w.Yq=function(c,a,n,o,u){for(var p=[0,0,0],f=[0,0,0],g=0;2>=g;g++)a[g]-=c[g],n[g]-=a[g];n=p[1]*f[2]-p[2]*f[1],a=p[2]*f[0]-p[0]*f[2],p=p[0]*f[1]-p[1]*f[0],c=-1*(n*c[0]+a*c[1]+p*c[2]),o[0]=n,o[1]=a,o[2]=p,o[3]=c,f=w.qn(o),o[0]/=f,o[1]/=f,o[2]/=f,o[3]/=f,u!=0&&(f=O.Dd(p)?O.Dd(c)?O.Mb(1,a):-O.Mb(1,c):O.Mb(1,p),f*=O.Mb(1,u),o[0]*=f,o[1]*=f,o[2]*=f,o[3]*=f)},w.yx=function(c,a,n){n[0]=c[1]*a[2]-a[1]*c[2],n[1]=c[2]*a[0]-a[2]*c[0],n[2]=c[0]*a[1]-a[0]*c[1]},w.Ut=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},w.qn=function(c){return w.ip(w.ip(c[0],c[1]),c[2])},w.el=function(c,a,n,o,u,p,f,g){c=w.n(c,a,n);var b=Math.cos(n);p.u=(c+u)*b*Math.cos(o),f.u=(c+u)*b*Math.sin(o),g.u=(c*(1-a)+u)*Math.sin(n)},w.eO=function(c,a,n,o,u,p,f){var g=w.ip(a,n),b=1*Math.sqrt(1-c),S=b/1;if(O.$(g,0))p.u=0,u.u=O.Mb(1.570796326794897,o),f.u=O.R(o)-b;else{p.u=Math.atan2(n,a),n=Math.atan2(1*o,b*g),p=Math.cos(n);var $=Math.sin(n);a=b*c/(1-c),c*=1,n=Math.atan2(o+a*$*$*$,g-c*p*p*p),3.141592653589793<O.R(n)&&(n=O.Mb(3.141592653589793,n)-n),n=Math.atan(S*Math.tan(n)),$=Math.sin(n),p=Math.cos(n),u.u=Math.atan2(o+a*$*$*$,g-c*p*p*p),1.570796326794897<O.R(u.u)&&(u.u=O.Mb(3.141592653589793,u.u)-u.u),n=Math.atan(S*Math.tan(u.u)),$=Math.sin(n),p=Math.cos(n),f.u=(o-b*$)*Math.sin(u.u)+(g-1*p)*Math.cos(u.u)}},w.n=function(c,a,n){return n=Math.sin(n),c/Math.sqrt(1-a*n*n)},w.pt=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))},w.Sj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))},w.Tq=function(c,a){if(O.vi(c)||a==0||O.$(O.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=Math.sqrt(1-c),o=(1-n)/(1+n),u=o*o,p=o*u,f=o*p,g=o*f,b=o*g,S=o*b,$=1.572916666666667*p-3.2578125*g+4.295068359375*S;c=2.142578125*f-6.071484375*b,n=3.129296875*g-11.249837239583334*S;var E=4.775276692708333*b,C=7.958636765252976*S,k=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*g-.2688395182291667*S-$+n-C+k*(2*(1.3125*u-1.71875*f+1.650146484375*b)-4*c+6*E+k*(4*$-12*n+24*C+k*(8*c-32*E+k*(16*n-80*C+k*(32*E+64*k*C))))))}for(n=1-c,o=c/2,p=(u=O.R(a))*w.av(c)/(1.570796326794897*n),f=9999,b=u,u=0;1e-16<f&&50>u;u++)S=w.w(c,b),g=b-($=(g=(w.fG(b,c)-o*Math.sin(2*b)/S)/n-p)/(S=1/(S*S*S))),f=O.R($),b=g;return 0<=a?b:-b},w.lW=function(c,a){return O.vi(a)?c:c*w.av(a)/1.570796326794897},w.ca=function(c){return 0>(c=w.kF(c,6.283185307179586))?c+6.283185307179586:3.141592653589793>O.R(c)||O.$(O.R(c),3.141592653589793)?c:c-6.283185307179586},w.kF=function(c,a){return c-Math.floor(c/a)*a},w.Ch=function(c,a){if(.006884661117170036>a){var n=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=n*n;return c/(1+a)*(1+.25*n+.015625*o+.00390625*n*o)*1.570796326794897}return c*w.av(a)},w.Xq=function(c,a){var n=O.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=O.R(w.kF(a,3.141592653589793)))?a:3.141592653589793-a,(O.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*n},w.q=function(c,a,n){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,u=a*o,p=a*u,f=a*p,g=a*f,b=a*g,S=-.7291666666666666*u+.2278645833333333*f+.03987630208333334*b,$=.615234375*p-.21533203125*g,E=-.54140625*f+.20302734375*b,C=.48876953125*g,k=-.4488699776785715*b,L=Math.cos(2*n);return c/(1+a)*((1+.25*o+.015625*p+.00390625*g)*n+Math.sin(2*n)*(-1.5*a+.1875*u+.0234375*f+.00732421875*b-S+E-k+L*(2*(.9375*o-.234375*p-.03662109375*g)-4*$+6*C+L*(4*S-12*E+24*k+L*(8*$-32*C+L*(16*E-80*k+L*(32*C+64*L*k)))))))}return c*(w.fG(n,a)-.5*a*Math.sin(2*n)/w.w(a,n))},w.w=function(c,a){return a=Math.sin(a),Math.sqrt(1-c*a*a)},w.av=function(c){return O.FC(c,1,2220446049250313e-31)?1:1>c?w.Zw(0,1-c)-c/3*w.Ww(0,1-c):NaN},w.fG=function(c,a){var n=O.Mb(1,c);c=O.R(c);var o=Math.floor(c/1.570796326794897);if(1<a)a=c==0?0:NaN;else if(O.Dd(o))a=(c=w.sin(c))*w.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*w.Ww(1-c*c,1-a*c*c);else{var u=h.P.truncate(o%2),p=w.av(a);0<u?a=p*(o+1)-(a=(c=Math.sin(1.570796326794897*(o+1)-c))*w.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*w.Ww(1-c*c,1-a*c*c)):a=p*o+(a=(c=Math.sin(c-1.570796326794897*o))*w.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*w.Ww(1-c*c,1-a*c*c))}return a*n},w.sin=function(c){c=w.ca(c);var a=O.Mb(1,c);return c=O.R(c),O.$(c,3.141592653589793)?0:O.$(c,1.570796326794897)?1*a:Math.sin(c)*a},w.Ww=function(c,a){var n,o,u,p,f=c,g=a,b=1;for(a=0,c=1;o=((n=.2*(f+g+3*b))-f)/n,u=(n-g)/n,p=(n-b)/n,!(1e-4>O.R(o)&&1e-4>O.R(u)&&1e-4>O.R(p));)p=Math.sqrt(g),a+=c/((n=Math.sqrt(b))*(b+(p=Math.sqrt(f)*(p+n)+p*n))),c*=.25,f=.25*(f+p),g=.25*(g+p),b=.25*(b+p);return g=(f=o*u)-(b=p*p),3*a+c*(1+(b=f-6*b)*(.10227272727272728*b-.2142857142857143-.1730769230769231*p*(o=b+g+g))+p*(.1666666666666667*o+p*(-.4090909090909091*g+.1153846153846154*p*f)))/(n*Math.sqrt(n))},w.Zw=function(c,a){for(var n,o,u,p,f=1;o=2-((n=(c+a+f)/3)+c)/n,u=2-(n+a)/n,p=2-(n+f)/n,!(1e-4>O.R(o)&&1e-4>O.R(u)&&1e-4>O.R(p));f=.25*(f+n))n=Math.sqrt(a),o=Math.sqrt(f),c=.25*(c+(n=Math.sqrt(c)*(n+o)+n*o)),a=.25*(a+n);return(1+(.04166666666666666*(c=o*u-p*p)-.1-.06818181818181818*(a=o*u*p))*c+.07142857142857142*a)/Math.sqrt(n)},w.Sw=function(c,a){if(O.vi(c)||a==0||O.$(O.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=c*c,o=c*n,u=c*o,p=c*u,f=c*p,g=c*f,b=-(.02708333333333333*o+.03430059523809524*u+.03149181547619048*p+.02634359154541446*f+.02156896735835538*g),S=.007669890873015873*u+.01299603174603175*p+.0148051353064374*f+.01454454953803912*g,$=-(.002275545634920635*p+.004830845032667949*f+.006558395368616723*g),E=.0006957236677288761*f+.001775193002406544*g,C=-.000217324089394402*g,k=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*n+.09375*o+.04878472222222222*u+.02916666666666667*p+.01938905423280423*f+.01388255931712963*g)-b+$-C+k*(2*(.1041666666666667*n+.0875*o+.06050347222222222*u+.04151785714285714*p+.02958958540013228*f+.02203667534722222*g)-4*S+6*E+k*(4*b-12*$+24*C+k*(8*S-32*E+k*(16*$-80*C+k*(32*E+64*k*C))))))}return a==0||O.$(O.R(a),1.570796326794897)?n=a:(u=(o=Math.sqrt(c))*Math.sin(a),n=Math.tan(.7853981633974483+a/2)*Math.pow((1-u)/(1+u),o/2),n=2*Math.atan(n)-1.570796326794897),n},w.tO=function(c,a){if(O.vi(c)||a==0||O.$(O.R(a),1.570796326794897))return a;if(.006884661117170036>c){var n=c*(E=c*($=c*(k=c*c))),o=c*(C=c*n),u=.05833333333333333*$+.07232142857142858*E+.05634300595238095*n+.0355325796406526*C+.020235546186067*o,p=.02653149801587302*E+.04379960317460317*n+.0429211791776896*C+.03255384637546096*o,f=.01294022817460318*n+.02668104344536636*C+.03155651254609588*o,g=.00659454790965208*C+.0163075268674227*o,b=.003463473736911237*o,S=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*k+.08333333333333333*$+.03611111111111111*E+.01875*n+.01195601851851852*C+.008863673941798942*o-u+f-b+S*(2*(.1458333333333333*k+.1208333333333333*$+.07039930555555556*E+.03616071428571429*n+.01839451058201058*C+.01017113095238095*o)-4*p+6*g+S*(4*u-12*f+24*b+S*(8*p-32*g+S*(16*f-80*b+S*(32*g+64*S*b))))))}var $=Math.sqrt(c),E=$/2,C=Math.tan(.7853981633974483+a/2);c=0,u=1;for(var k=a;u!=0;k=o)n=$*Math.sin(k),o=C*Math.pow((1+n)/(1-n),E),o=2*Math.atan(o)-1.570796326794897,c++,(O.$(o,k)||3e4<c)&&(u=0);return k},w}()}(B||(B={})),function(h){var O=function(){function w(c){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new h.h,this.SH=new h.h,this.FA=!1,this.xq=new h.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=c,this.Cs=h.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var a=c.getCode();0<a?(this.Mk=a,h.qf.getCode(c)):this.Mk=h.qf.getCode(c),0>this.Mk&&(this.Mk=0);var n=this.Re.getType();if(this.eH=n==h.Tc.PE_TYPE_PROJCS?2:1,n==h.Tc.PE_TYPE_PROJCS&&!c.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");a=n==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),n!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(a),this.Go=c.getUnit(),this.MH=a.getPrimem().getLongitude(),this.rH=c=a.getUnit().getUnitFactor(),c=Math.PI/(180*c),1e-10>Math.abs(c-1)&&(c=1),this.BA=c,(n&h.Tc.PE_TYPE_PROJCS)!=0?(a=this.Re,this.CA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(a,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,n=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*n,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return w.prototype.cs=function(){return this.Mk},w.prototype.mk=function(){return this.vw},w.Ky=function(c,a){return c==a||c!=null&&a!=null&&c.Mk==0&&a.Mk==0&&c.Cs===a.Cs},w.prototype.Xc=function(){return this.Bl},w.prototype.ih=function(c){c.L(this.uo)},w.prototype.rv=function(){return this.uo.v},w.prototype.qv=function(){return this.uo.C},w.prototype.BR=function(c){c.L(this.ww)},w.prototype.hY=function(){var c=this.Re.getType();if(c==h.Tc.PE_TYPE_PROJCS){c=this.Re;var a=this.mk().getCentralMeridian(),n=c.getGeogcs();if(n==null)throw h.i.ga("internal error");a=[[a+(n=1/n.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(c,1,a),a=a[0][0],n=c.getParameters()[h.Tc.PE_PARM_X0].getValue();var o=this.ol();c=new h.l,o.A(c),a=(o=Math.abs(a-n))+n,n=-1*o+n,o=c.H,c=c.G;var u=new h.l;u.L(n,c,a,o),this.uo==null&&(this.uo=u)}else{if(c!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");n=1/this.Re.getUnit().getUnitFactor()*Math.PI,(c=new h.l).L(-n,-n/2,n,n/2),this.uo==null&&(this.uo=c)}},w.prototype.iY=function(){var c=this.Re.getType();if(c==h.Tc.PE_TYPE_PROJCS){var a=this.Re;if(c=this.mk().getCentralMeridian(),(a=a.getGeogcs())==null)throw h.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var n=this.Xr(),o=new h.l;n.A(o),(n=new h.l).L(c-a,o.G,c+a,o.H),this.ww==null&&(this.ww=n)}else{if(c!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(c=new h.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=c)}},w.prototype.bf=function(){return this.BA},w.prototype.rm=function(){return this.CA},w.prototype.Xr=function(){if(this.Bl)return this.wl;var c=this.wl;return c!=null?c:(this.wx(),this.wl)},w.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},w.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var c=this.Re,a=c.getGeogcs(),n=c.horizonGcsGenerate();if(n!=null){var o=n[0].getNump(),u=n[0].getKind();c=0<n[0].getInclusive();var p=this.bf(),f=90*p,g=360*p,b=370*p,S=180*p*h.Tc.PE_HORIZON_DELTA/Math.PI,$=new h.l,E=null;if(1<o){for(var C=1;C<o;C++)if(n[C].getKind()==h.Tc.PE_HORIZON_LINE){E==null&&(E=new h.Ua);var k=n[C].getCoord();E.rx(k[0][0],k[0][1]),E.Aj(k[1][0],k[1][1])}}if(u==h.Tc.PE_HORIZON_RECT)n=n[0].getCoord(),$.L(n[0][0],n[0][1]),$.$b(n[1][0],n[1][1]),Math.abs($.H-f)<1e-7*S&&($.H=f),Math.abs($.G+f)<1e-7*S&&($.G=-f),$.S()>b&&(n=-400*p,$.L(n,$.G,n+5*g,$.H)),n=new h.Hh($),this.wl==null&&(this.wl=n,this.Kv=c);else{if(b=new h.Ea,g=this.mk().isGcsHorizonMultiOverlap(),$=h.iu.XE(a,h.ju.Integer64),g){for(b=new h.bL,S=h.Ih.local().W(b,$,null),C=0;C<o;C++)if(n[C].getKind()==h.Tc.PE_HORIZON_POLY){for(a=n[C].getSize(),p=n[C].getCoord(),u=[],f=0;f<a;f++)u[f]=h.h.construct(p[f][0],p[f][1]);n[C].getInclusive(),g&&((p=new h.Ea).$k(u,a-1),b.VX(p),S.re())}b=S.next()}else for(C=0;C<o;C++)if(n[C].getKind()==h.Tc.PE_HORIZON_POLY){for(a=n[C].getSize(),p=n[C].getCoord(),g=[],f=0;f<a;f++)g[f]=h.h.construct(p[f][0],p[f][1]);n[C].getInclusive(),b.$k(g,a-1)}c?h.Zj.local().yn(b,$,1):h.mp.local().yn(b,$,1),h.fj.local().yn(b,$,1),this.wl==null&&(this.wl=b,this.Kv=c,this.TG=E)}}}},w.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},w.prototype.yK=function(){if(this.eH==2){var c=this.Re.horizonPcsGenerate();if(c!=null){var a=c[0].getKind();c[0].getInclusive();var n=c[0].getNump(),o=!1;if(a==h.Tc.PE_HORIZON_RECT)c=c[0].getCoord(),(n=new h.l).L(c[0][0],c[0][1]),n.$b(c[1][0],c[1][1]),c=new h.Hh(n);else{for(a=-1,o=0;o<n;o++)c[o].getKind()==h.Tc.PE_HORIZON_POLY&&(a=o);for(o=c[a].getSize()-1,c=c[a].getCoord(),n=[],a=0;a<o;a++)n[a]=h.h.construct(c[a][0],c[a][1]);c=a=new h.Ea,a.$k(n,o),o=!0}this.mk().isDensificationNeeded()&&(n=1e5*this.rm(),c=h.Zl.local().W(c,n,null)),o&&(o=new h.Hh,c.dn(o),c.He(),c.Rb(),c.kR(),h.Zj.local().yn(c,null,1)),this.Ws==null&&(this.Ws=c)}}},w.prototype.ol=function(){if(this.Bl)return this.Ws;var c=this.Ws;return c!=null?c:(this.yK(),this.Ws)},w.prototype.jY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]],h.gj.geogToProj(this.Re,2,c);var a=this.mk(),n=a.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(n&&this.CH.na(c[0][0],c[0][1]),a&&this.SH.na(c[1][0],c[1][1]))}this.FA=!0},w.prototype.xK=function(){if(this.eH==1){var c=400*this.bf();this.xq.L(-c,-c,c,c)}else c=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),c=h.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.xq.B()&&this.xq.L(c)},w.prototype.cR=function(c){this.Bl&&c.L(this.xq),this.xq.B()&&this.xK(),c.L(this.xq)},w.prototype.Wp=function(){return this.MH},w.prototype.Bi=function(){return this.Xz},w.prototype.Id=function(){return this.Go},w.prototype.Zr=function(){return this.rH},w}();h.JC=O}(B||(B={})),function(h){var O=function(){function w(c){this.FT=c,this.Cs=h.Ab.zv(c,0,!0);var a=c.getCode();this.us=0<a?a:h.qf.getCode(c),0>this.us&&(this.us=0),this.Go=a=this.FT.getUnit(),this.DH=1/a.getUnitFactor(),h.qf.getCode(c)}return w.Ky=function(c,a){return c==a||c!=null&&a!=null&&c.us==0&&a.us==0&&c.Cs===a.Cs},w.prototype.cs=function(){return this.us},w}();h.KL=O}(B||(B={})),function(h){h.$g=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,f){if(u!=null||p!=null||f!=null){n=h.F.ca(n),c=h.F.ca(c),a=h.F.ca(a),o=h.F.ca(o),1.570796326794897<h.s.R(a)&&(a=h.s.Mb(3.141592653589793,a)-a,c=h.F.ca(c+3.141592653589793)),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,n=h.F.ca(n+3.141592653589793));var g=h.F.ca(n-c);if(h.s.$(a,o)&&(h.s.$(c,n)||h.s.$(h.s.R(a),1.570796326794897)))u!=null&&(u.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(a,-o)){if(h.s.$(h.s.R(a),1.570796326794897))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0<a?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<a?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));if(h.s.$(h.s.R(g),3.141592653589793))return u!=null&&(u.u=3.141592653589793*w),p!=null&&(p.u=0),void(f!=null&&(f.u=0))}var b=h.s.R(a)==1.570796326794897?0:Math.cos(a),S=Math.sin(a),$=h.s.R(o)==1.570796326794897?0:Math.cos(o),E=Math.sin(o),C=h.s.R(g)==1.570796326794897?0:Math.cos(g),k=h.s.R(g)==3.141592653589793?0:Math.sin(g);if(u!=null){var L=Math.sin((o-a)/2);g=Math.sin(g/2),u.u=2*Math.asin(Math.sqrt(L*L+b*$*g*g))*w}p!=null&&(p.u=h.s.$(h.s.R(a),1.570796326794897)?0>a?n:h.F.ca(3.141592653589793-n):Math.atan2($*k,b*E-S*$*C)),f!=null&&(h.s.$(h.s.R(o),1.570796326794897)?f.u=0>o?c:h.F.ca(3.141592653589793-c):(f.u=Math.atan2(b*k,E*b*C-$*S),f.u=h.F.ca(f.u+3.141592653589793)))}}},O.sf=function(w,c,a,n,o,u,p){if(u!=null||p!=null){c=h.F.ca(c),a=h.F.ca(a),1.570796326794897<h.s.R(a)&&(a=h.s.Mb(3.141592653589793,a)-a,c=h.F.ca(c+3.141592653589793)),h.s.$(h.s.R(a),1.570796326794897)&&(c=0),o=h.F.ca(o);var f=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),g=h.s.$(h.s.R(o),3.141592653589793)?0:Math.sin(o),b=h.s.$(h.s.R(a),1.570796326794897)?0:Math.cos(a),S=Math.sin(a);w=n/w,n=h.s.$(h.s.R(w),1.570796326794897)?0:Math.cos(w);var $=h.s.$(h.s.R(w),3.141592653589793)?0:Math.sin(w),E=Math.asin(S*n+b*$*f);p!=null&&(p.u=E),u!=null&&(u.u=h.s.$(h.s.R(E),1.570796326794897)?h.s.$(a,-E)?0>E?o:h.F.ca(3.141592653589793-o):c:h.s.$(h.s.R(a),1.570796326794897)&&h.s.$(w,3.141592653589793)?0>a?o:h.F.ca(3.141592653589793-o):h.F.ca(c+Math.atan2($*g,b*n-S*$*f)))}},O}()}(B||(B={})),function(h){h.Yk=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,f,g){var b=new h.ha(0),S=new h.ha(0),$=[0,0,0],E=[0,0,0],C=[0,0,0],k=new h.ha(0),L=new h.ha(0),N=new h.ha(0),U=new h.ha(0),H=new h.ha(0);if(p!=null||f!=null||g!=null)if(h.s.vi(c))h.$g.ub(w,a,n,o,u,p,f,g);else{o=h.F.ca(o),a=h.F.ca(a);var j=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.$(a,o)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(w,c)),f!=null&&(f.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(g!=null&&(g.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(j),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(w,c)),f!=null&&(f.u=0),g!=null&&(g.u=0))}else(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897))&&(h.s.$(h.s.R(n),1.570796326794897)?a=o:o=a);var K=0;if(0>j){K=1;var se=a;a=o,o=se,se=n,n=u,u=se}j=h.F.pt(c,n);var ne=h.F.pt(c,u);f==null&&g==null||(h.$g.ub(w,a,j,o,ne,null,b,S),b=Math.atan2(Math.sin(b.u)*Math.cos(n-j),Math.cos(b.u)),S=Math.atan2(Math.sin(S.u)*Math.cos(u-ne),Math.cos(S.u)),K!=0&&(se=b,b=S,S=se),f!=null&&(f.u=b),g!=null&&(g.u=S)),p!=null&&(h.F.el(1,c,n,a,0,N,U,H),$[0]=N.u,$[1]=U.u,$[2]=H.u,h.F.el(1,c,u,o,0,N,U,H),E[0]=N.u,E[1]=U.u,E[2]=H.u,C[0]=$[1]*E[2]-E[1]*$[2],C[1]=-($[0]*E[2]-E[0]*$[2]),C[2]=$[0]*E[1]-E[0]*$[1],c=1-h.F.w(c,h.F.Xq(c,h.F.Sj(c,Math.acos(C[2]/Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]))))),c*=2-c,f=Math.atan2(-C[1],-C[0]),C=h.F.ca(f-1.570796326794897),f=h.F.ca(f+1.570796326794897),C=h.s.R(h.F.ca(a-C))<=h.s.R(h.F.ca(a-f))?C:f,h.$g.ub(1,C,0,a,j,k,null,null),h.$g.ub(1,C,0,o,ne,L,null,null),3.141592653589793<k.u+L.u&&(C=h.F.ca(C+3.141592653589793),h.$g.ub(1,C,0,a,j,k,null,null),h.$g.ub(1,C,0,o,ne,L,null,null)),k.u*=h.s.Mb(1,n),L.u*=h.s.Mb(1,u),k.u=h.F.Sj(c,k.u),L.u=h.F.Sj(c,L.u),a=h.F.q(w,c,k.u),w=h.F.q(w,c,L.u),p.u=h.s.R(w-a))}}},O.sf=function(w,c,a,n,o,u,p,f){var g=0,b=new h.ha(0),S=new h.ha(0),$=[0,0,0],E=[0,0,0],C=new h.ha(0),k=new h.ha(0),L=new h.ha(0);if(p!=null||f!=null)if(h.s.vi(c))h.$g.sf(w,a,n,o,u,p,f);else if(h.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=n);else if(u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),a=h.F.ca(a),n=h.F.ca(n),1.570796326794897<h.s.R(n)&&(a=h.F.ca(a+3.141592653589793),n=h.s.Mb(3.141592653589793,n)-n),h.s.$(h.s.R(n),1.570796326794897)&&(a=0),h.s.Dd(n)){var N=h.s.R(1.570796326794897-h.s.R(u));N=h.F.Sj(c,N),N=1-h.F.w(c,h.F.Xq(c,N)),N*=2-N,w=o/h.F.Ch(w,N)*1.570796326794897,w=h.F.Tq(N,w),w=h.F.pt(N,w),h.$g.sf(1,a,n,w,u,p,b),f!=null&&(g=b.u),f!=null&&(f.u=h.F.Sj(c,g))}else if(h.s.$(h.s.R(n),1.570796326794897))b=2*(g=h.F.Ch(w,c)),u=0<(w=h.s.Mb(1.570796326794897,n))?h.F.ca(3.141592653589793-u):u,n=g-o,h.s.R(n)<=g?p!=null&&(p.u=u):(n=Math.floor(o/b),h.P.truncate(n%2)==0?(p!=null&&(p.u=u),o-=n*b):(p!=null&&(p.u=h.F.ca(u+3.141592653589793)),o=(n+1)*b-o),n=g-o),f!=null&&(f.u=h.F.Tq(c,n/g*w));else{N=h.F.pt(c,n),u=Math.atan2(Math.sin(u),Math.cos(u)*Math.cos(n-N));var U=h.P.truncate(h.s.Mb(1,N))*(1.570796326794897>=h.s.R(u)?1:-1);u=h.F.ca(a+Math.atan(Math.tan(u)*-Math.sin(N))),h.$g.ub(w,u,0,a,N,null,S,null),N=h.s.R(1.570796326794897-h.s.R(S.u)),N=h.F.Sj(c,N),N=1-h.F.w(c,h.F.Xq(c,N)),N*=2-N,h.F.el(1,c,0,u,0,C,k,L),$[0]=C.u,$[1]=k.u,$[2]=L.u,h.F.el(1,c,n,a,0,C,k,L),E[0]=C.u,E[1]=k.u,E[2]=L.u,n=Math.acos(($[0]*E[0]+$[1]*E[1]+$[2]*E[2])/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2])),n=h.F.Sj(N,n),o=0<(n=h.F.q(w,N,n)+o*U)?S.u:h.F.ca(S.u+3.141592653589793),w=h.s.R(n)/h.F.Ch(w,N)*1.570796326794897,w=h.F.Tq(N,w),w=h.F.pt(N,w),h.$g.sf(1,u,0,w,o,p,b),f!=null&&(g=b.u),f!=null&&(f.u=h.F.Sj(c,g))}},O}()}(B||(B={})),function(h){h.eu=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,f,g){var b=0,S=0,$=0;if(p!=null||f!=null||g!=null)if(h.s.vi(c))h.$g.ub(w,a,n,o,u,p,f,g);else{var E=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.Dd(E)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(w,c)),f!=null&&(f.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(g!=null&&(g.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(E),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(w,c)),f!=null&&(f.u=0),g!=null&&(g.u=0))}else if(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897)||h.s.Dd(E)||h.s.$(h.s.R(E),3.141592653589793))return void h.Yk.ub(w,c,a,n,o,u,p,f,g);var C=1-Math.sqrt(1-c),k=c/(1-c),L=w*(1-C);w=h.F.Xq(c,n);var N=h.F.Xq(c,u);c=h.s.R(w)==1.570796326794897?0:Math.cos(w);var U=Math.sin(w),H=h.s.R(N)==1.570796326794897?0:Math.cos(N),j=Math.sin(N),K=E,se=Math.cos(K),ne=Math.sin(K),pe=1,ce=0;do{var _e=K,Oe=Math.sqrt(Math.pow(H*ne,2)+Math.pow(c*j-U*H*se,2)),Ce=U*j+c*H*se,st=Math.atan2(Oe,Ce);if(Oe==0){pe=0;break}var qe=c*H*ne/Oe;if(b=Math.cos(Math.asin(qe)),S=Ce-2*U*j/(b*=b),1<h.s.R(S)&&(S=h.s.Mb(1,S)),K=E+(1-(K=C/16*b*(4+C*(4-3*b))))*C*qe*(st+K*Oe*(S+K*Ce*(2*($=S*S)-1))),se=Math.cos(K),ne=Math.sin(K),ce++,3.141592653589793<h.s.R(K)&&30<ce){pe=0;break}}while(5e3>=ce&&!h.s.$(_e,K));if(pe!=0)C=(k*=b)*(256+k*(k*(74-47*k)-128))/1024,p!=null&&(p.u=L*(1+k*(4096+k*(k*(320-175*k)-768))/16384)*(st-C*Oe*(S+C/4*(Ce*(2*$-1)-C/6*S*(4*Oe*Oe-3)*(4*$-3))))),f!=null&&(f.u=h.s.$(h.s.R(n),1.570796326794897)?0>n?o:h.F.ca(3.141592653589793-o):Math.atan2(H*ne,c*j-U*H*se)),g!=null&&(h.s.$(h.s.R(u),1.570796326794897)?g.u=0>u?a:h.F.ca(3.141592653589793-a):(g.u=Math.atan2(c*ne,c*j*se-U*H),g.u=h.F.ca(g.u+3.141592653589793)));else{K=h.s.Mb(3.141592653589793,E),Ce=U*j-c*H,st=Math.acos(Ce),Oe=Math.sin(st),b=1,ce=qe=0;do $=qe,se=1-.25*(qe=C*(b*=b)*(1+C+C*C))+.1875*(S=C*C*(se=b*b)*(1+2.25*C))-.1953125*(pe=C*C*C*se*b),qe=.25*qe-.25*S+.29296875*pe,ne=.03125*S-.05859375*pe,pe*=.00651041666666667,S=Ce-2*U*j/b,1<h.s.R(S)&&(S=h.s.Mb(1,S)),b=Math.acos(S),Ce=Math.cos(2*b),_e=Math.cos(3*b),ne=(qe=h.s.$(n,-u)?h.F.ca(3.141592653589793-E)/(3.141592653589793*C*se):h.F.ca(K-E)/(C*(se*st+qe*Oe*S+ne*Math.sin(2*st)*Ce+pe*Math.sin(3*st)*_e)))*Oe/(c*H),K=1.570796326794897<h.s.R(E)?h.s.Mb(3.141592653589793,ne)-Math.asin(ne):Math.asin(ne),se=Math.cos(K),Oe=Math.sqrt(Math.pow(H*ne,2)+Math.pow(c*j-U*H*se,2)),st=3.141592653589793-Math.asin(h.s.R(Oe)),Ce=Math.cos(st),b=Math.cos(Math.asin(qe)),ce++;while(70>=ce&&!h.s.$($,qe));p!=null&&(se=1+(k*=b*=b)*(4096+k*(k*(320-175*k)-768))/16384,h.s.$(n,-u)?p.u=3.141592653589793*L*se:(S=Ce-2*U*j/b,b=Math.acos(S),Ce=Math.cos(2*b),_e=Math.cos(3*b),p.u=L*(se*st+k*(k*(128+k*(35*k-60))-512)/2048*Oe*S+k*(5*k-4)/6144*k*k*Math.sin(2*st)*Ce+pe*Math.sin(3*st)*_e+-762939453125e-16*k*k*k*k*Math.sin(4*st)*Math.cos(4*b)))),f!=null&&(h.s.Dd(n)&&h.s.Dd(u)?(b=Math.sqrt(1-qe*qe),f.u=Math.acos(b),0>E&&(f.u*=-1)):h.s.$(h.s.R(n),1.570796326794897)?f.u=0>n?o:h.F.ca(3.141592653589793-o):(p=qe/c,L=Math.sqrt(1-p*p),0>c*j-U*H*Math.cos(K)&&(L*=-1),f.u=Math.atan2(p,L),h.s.$(n,-u)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-C*Math.cos(n))&&(0<n&&1.570796326794897>h.s.R(f.u)||0>n&&1.570796326794897<h.s.R(f.u))&&(f.u=h.s.Mb(3.141592653589793,f.u)-f.u))),g!=null&&(h.s.Dd(n)&&h.s.Dd(u)?(b=Math.sqrt(1-qe*qe),g.u=Math.acos(b),0<=E&&(g.u*=-1)):h.s.$(h.s.R(u),1.570796326794897)?g.u=0>u?a:h.F.ca(3.141592653589793-a):(E=qe/H,p=Math.sqrt(1-E*E),L=Math.sin(K/2),0>Math.sin(N-w)-2*c*j*L*L&&(p*=-1),g.u=Math.atan2(E,p),g.u=h.F.ca(g.u+3.141592653589793),h.s.$(n,-u)&&!h.s.Dd(n)&&!h.s.$(h.s.R(n),1.570796326794897)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-C*Math.cos(n))&&(f!=null?L=f.u:(p=qe/c,L=Math.sqrt(1-p*p),0>c*j-U*H*Math.cos(K)&&(L*=-1),L=Math.atan2(p,L),h.s.$(n,-u)&&h.s.R(h.F.ca(a-o))>3.141592653589793*(1-C*Math.cos(n))&&(0<n&&1.570796326794897>h.s.R(L)||0>n&&1.570796326794897<h.s.R(L))&&(L=h.s.Mb(3.141592653589793,L)-L)),1.570796326794897>=h.s.R(L)&&1.570796326794897<h.s.R(g.u)||1.570796326794897<=h.s.R(L)&&1.570796326794897>h.s.R(g.u))&&(g.u=-1*h.F.ca(g.u+3.141592653589793))))}}}},O.sf=function(w,c,a,n,o,u,p,f){if(p!=null||f!=null)if(h.s.vi(c))h.$g.sf(w,a,n,o,u,p,f);else if(u=h.F.ca(u),h.s.$(h.s.R(n),1.570796326794897)||h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))h.Yk.sf(w,c,a,n,o,u,p,f);else{var g=h.s.R(u)==1.570796326794897?0:Math.cos(u),b=h.s.R(u)==3.141592653589793?0:Math.sin(u);h.s.$(h.s.R(n),1.570796326794897)&&(a=0),u=1-Math.sqrt(1-c);var S=h.F.Xq(c,n);n=h.s.R(S)==1.570796326794897?0:Math.cos(S);var $=Math.sin(S);S=Math.atan2(Math.tan(S),g);var E=n*b,C=E*E,k=1-C,L=c/(1-c)*k,N=(c=L*(256+L*(L*(74-47*L)-128))/1024)/4,U=c/6,H=o/(w*(1-u)*(1+L*(4096+L*(L*(320-175*L)-768))/16384)),j=H;do{var K=j;o=h.s.R(j)==1.570796326794897?0:Math.cos(j);var se=(L=h.s.R(j)==3.141592653589793?0:Math.sin(j))*L;j=c*L*((w=Math.cos(2*S+j))+N*(o*(2*(j=w*w)-1)-U*w*(4*se-3)*(4*j-3)))+H}while(!h.s.$(K,j));o=h.s.R(j)==1.570796326794897?0:Math.cos(j),L=h.s.R(j)==3.141592653589793?0:Math.sin(j),p!=null&&(b=Math.atan2(L*b,n*o-$*L*g),k=u/16*k*(4+u*(4-3*k)),w=Math.cos(2*S+j),p.u=h.F.ca(a+(b-(1-k)*u*E*(j+k*L*(w+k*o*(2*w*w-1)))))),f!=null&&(k=$*L-n*o*g,k=(1-u)*Math.sqrt(C+k*k),f.u=Math.atan2($*o+n*L*g,k))}},O}()}(B||(B={})),function(h){h.KC=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,f,g){var b=h.F.ca(o-a),S=h.s.$(h.s.R(n),1.570796326794897),$=h.s.$(h.s.R(u),1.570796326794897);if(h.s.$(n,u)&&(h.s.Dd(b)||S))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(h.s.vi(c)){var E=Math.sin(n),C=Math.sin(u);E=Math.sqrt((1+E)/(1-E)),C=Math.sqrt((1+C)/(1-C)),E=Math.log(C)-Math.log(E),E=Math.atan2(b,E),p!=null&&(p.u=h.s.$(n,u)?h.s.R(w*Math.cos(n)*b):h.s.R((w*u-w*n)/Math.cos(E)))}else C=h.F.Sw(c,u),E=Math.sin(h.F.Sw(c,n)),C=Math.sin(C),E=Math.sqrt((1+E)/(1-E)),C=Math.sqrt((1+C)/(1-C)),E=Math.log(C)-Math.log(E),E=Math.atan2(b,E),p!=null&&(h.s.$(n,u)?p.u=h.s.R(w*b*Math.cos(n)/h.F.w(c,n)):(b=h.F.q(w,c,n),w=h.F.q(w,c,u),p.u=h.s.R((w-b)/Math.cos(E))));f==null&&g==null||(p=h.F.ca(E+3.141592653589793),S&&$||!S&&!$||(S?E=0>n?o:h.F.ca(3.141592653589793-o):$&&(p=0>u?a:h.F.ca(3.141592653589793-a))),f!=null&&(f.u=E),g!=null&&(g.u=p))}},O.sf=function(w,c,a,n,o,u,p,f){u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),h.s.vi(c)?h.s.$(h.s.R(n),1.570796326794897)?(a=0>n?u:h.F.ca(3.141592653589793-u),3.141592653589793>=(u=o/w%6.283185307179586)?w=n-h.s.Mb(u,n):(a=h.F.ca(a+3.141592653589793),w=-n+h.s.Mb(u-3.141592653589793,n))):h.s.$(h.s.R(u),1.570796326794897)?(a=h.F.ca(a+h.s.Mb(o,u)/(w*Math.cos(n))),w=n):(w=n+o*Math.cos(u)/w,1.570796326794897<h.s.R(w)&&(w=1.570796326794897),h.s.$(h.s.R(w),1.570796326794897)&&(h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))||(1.570796316258184<h.s.R(w)&&(w=h.s.Mb(1.570796316258184,w)),c=Math.sin(n),n=Math.sin(w),c=Math.sqrt((1+c)/(1-c)),n=Math.sqrt((1+n)/(1-n)),c=Math.log(n)-Math.log(c),a=h.F.ca(a+Math.tan(u)*c))):h.s.$(h.s.R(n),1.570796326794897)?(a=0>n?u:h.F.ca(3.141592653589793-u),u=o/h.F.lW(w,c),3.141592653589793>=(u%=6.283185307179586)?w=n-h.s.Mb(u,n):(a=h.F.ca(a+3.141592653589793),w=-n+h.s.Mb(u-3.141592653589793,n)),w=h.F.Tq(c,w)):h.s.$(h.s.R(u),1.570796326794897)?(a=h.F.ca(a+h.s.Mb(o,u)*h.F.w(c,n)/(w*Math.cos(n))),w=n):(w=1.570796326794897*(o*Math.cos(u)+h.F.q(w,c,n))/h.F.Ch(w,c),1.570796326794897<h.s.R(w)&&(w=h.s.Mb(1.570796326794897,w)),w=h.F.Tq(c,w),h.s.$(h.s.R(w),1.570796326794897)&&(h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))||(o=h.F.Sw(c,n),n=h.F.Sw(c,w),1.570796316258184<h.s.R(n)&&(n=h.s.Mb(1.570796316258184,w),w=h.F.tO(c,n)),c=Math.sin(o),n=Math.sin(n),c=Math.sqrt((1+c)/(1-c)),n=Math.sqrt((1+n)/(1-n)),c=Math.log(n)-Math.log(c),a=h.F.ca(a+Math.tan(u)*c))),p!=null&&(p.u=a),f!=null&&(f.u=w)},O}()}(B||(B={})),function(h){h.kb=function(){function O(){}return O.Sy=function(w,c,a,n,o,u,p){h.eu.ub(w,c,a,n,o,u,null,p,null)},O.Ai=function(w,c,a,n,o,u,p,f){h.eu.sf(w,c,a,n,o,u,p,f)},O.xd=function(w,c,a,n,o,u,p,f,g,b){switch(b){case 2:h.Yk.ub(w,c,a,n,o,u,p,f,g);break;case 3:h.LC.ub(w,c,a,n,o,u,p,f,g);break;case 1:h.KC.ub(w,c,a,n,o,u,p,f,g);break;default:h.eu.ub(w,c,a,n,o,u,p,f,g)}},O.qj=function(w,c,a,n,o,u,p,f,g){switch(g){case 2:h.Yk.sf(w,c,a,n,o,u,p,f);break;case 3:h.LC.sf(w,c,a,n,o,u,p,f);break;case 1:h.KC.sf(w,c,a,n,o,u,p,f);break;default:h.eu.sf(w,c,a,n,o,u,p,f)}},O}()}(B||(B={})),function(h){var O=function(){function c(){this.y=this.x=null}return c.construct=function(a){var n=new c;return n.x=new h.Xb,n.x.set(a.x),n.y=new h.Xb,n.y.set(a.y),n},c.QE=function(a,n){var o=new c;return o.x=new h.Xb,o.x.set(a),o.y=new h.Xb,o.y.set(n),o},c.prototype.rg=function(){return this.x.rg()&&this.y.rg()},c.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},c}();h.rY=O;var w=function(){function c(){this.z=this.y=this.x=null}return c.construct=function(a){var n=new c;return n.x=new h.Xb,n.x.set(a.x),n.y=new h.Xb,n.y.set(a.y),n.z=new h.Xb,n.z.set(a.z),n},c.QE=function(a,n,o){var u=new c;return u.x=new h.Xb,u.x.set(a),u.y=new h.Xb,u.y.set(n),u.z=new h.Xb,u.z.set(o),u},c.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},c.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},c.prototype.Sh=function(a){var n=new h.Xb,o=new h.Xb,u=new h.Xb;return n.Ml(this.x,a.x),o.Ml(this.y,a.y),u.Ml(this.z,a.z),(a=new h.Xb).ZM(n,o),a.add(u),a},c.prototype.YE=function(a){var n=new c;n.x.Ml(this.y,a.z),n.y.Ml(this.z,a.x),n.z.Ml(this.x,a.y);var o=new h.Xb,u=new h.Xb,p=new h.Xb;return o.Ml(this.z,a.y),u.Ml(this.x,a.z),p.Ml(this.y,a.x),n.x.sub(o),n.y.sub(u),n.z.sub(p),n},c}();h.sY=w,h.Nx=function(){function c(){}return c.zP=function(a,n,o){var u=n.x;n=n.y,c.el(1,a,Math.cos(u),Math.sin(u),Math.cos(n),Math.sin(n),o)},c.yP=function(a,n){var o=new h.Od;return c.zP(a,n,o),o},c.el=function(a,n,o,u,p,f,g){a/=Math.sqrt(1-n*f*f),g.L(a*p*o,a*p*u,a*(1-n)*f)},c.$u=function(a,n){var o=new h.Xb,u=new h.Xb,p=new h.Xb,f=new h.Xb;o.cos(n.x),u.sin(n.x),p.cos(n.y),f.sin(n.y);var g=new h.Xb;return g.set(f),g.Bg(f),g.Po(a),g.Po(-1),g.fN(),g.sqrt(),(n=new h.Xb).set(1),n.lm(g),(g=new h.Xb).set(n),g.Bg(p),g.Bg(o),(o=new h.Xb).set(n),o.Bg(p),o.Bg(u),(u=new h.Xb).set(n),u.Po(1-a),u.Bg(f),w.QE(g,o,u)},c.NS=function(a,n,o,u){if(Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x)return NaN;if(u=c.YA(u,Math.min(n.x,o.x),Math.max(n.x,o.x)),!new h.Oc(n.x,o.x).contains(u))return NaN;var p=O.construct(n);if(o=O.construct(o),p=c.$u(a,p),o=c.$u(a,o),(o=p.YE(o)).z.rg())return n.y;var f=new h.Xb;f.set(o.x),f.lm(o.z),f.Po(-1);var g=new h.Xb;g.set(o.y),g.lm(o.z),g.Po(-1);var b=new h.Xb;return b.set(g),b.Bg(g),(p=new h.Xb).set(f),p.Bg(f),p.add(b),p.sqrt(),p.rg()||f.rg()&&g.rg()?n.y:(n=Math.atan2(g.value(),f.value()),n=Math.atan2(p.value()*Math.cos(n-u),1-a),u=c.yP(a,h.h.construct(u,n)),a=new h.Od(u.x,u.y,-u.z),u=o.value().Sh(u),a=o.value().Sh(a),Math.abs(a)<Math.abs(u)&&(n=-n),n)},c.Jz=function(a,n,o,u,p){if(p[0]=NaN,p[1]=NaN,Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x||Math.abs(u)>=.5*Math.PI||0<n.y&&0<o.y&&n.y>u&&o.y>u||0>n.y&&0>o.y&&n.y<u&&o.y<u)return 0;var f=O.construct(n),g=O.construct(o);f=c.$u(a,f),g=c.$u(a,g);var b=f.YE(g);if(b.z.rg())return new h.Oc(n.y,o.y).contains(u)?(p[0]=n.x,1):0;(g=new h.Xb).set(b.x),g.lm(b.z),g.Po(-1),(f=new h.Xb).set(b.y),f.lm(b.z),f.Po(-1),(b=new h.Xb).set(f),b.Bg(f);var S=new h.Xb;return S.set(g),S.Bg(g),S.add(b),S.sqrt(),S.rg()||g.rg()&&f.rg()?u==0?(p[0]=n.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(u)/S.value(),1<Math.abs(a)?0:(a=Math.acos(a),b=Math.atan2(f.value(),g.value()),g=Math.min(n.x,o.x),f=Math.max(n.x,o.x),o=c.YA(b-a,g,f),a=u!=0?c.YA(b+a,g,f):o,u=0,g<=o&&o<=f&&(p[u]=o,u++),a!=o&&g<=a&&a<=f&&(p[u]=a,++u==2&&Math.abs(p[0]-n.x)>Math.abs(p[1]-n.x)&&(n=p[0],p[0]=p[1],p[1]=n)),u))},c.YA=function(a,n,o){return a>o?a-=2*(n=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<n&&(a+=2*(n=Math.ceil((n-a)/(2*Math.PI)))*Math.PI),a},c}()}(B||(B={})),function(h){h.SK=function(){function O(){}return O.WX=function(w,c){var a=8,n=[0,0,0,0],o=new h.h;o.N(c),o.scale(h.cb.tc(w).Id().Fc()==9102?1:h.cb.tc(w).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var u=-180,p=180,f=(w=5*a)-1,g=(c=(w+31)/32)-1;0<=g;g--)for(var b=f-32*g,S=Math.min(32,w-32*g),$=1;$<S;$+=2){var E=.5*(p+u);o.x>=E?(n[g]|=1<<b,u=E):p=E,b-=2,f-=2}for(u=-90,p=90,f=w-2,g=c-1;0<=g;g--)for(b=f-32*g,S=Math.min(32,w-32*g),$=0;$<S;$+=2)E=.5*(p+u),o.y>=E?(n[g]|=1<<b,u=E):p=E,b-=2,f-=2;return O.VP(n,a,a)},O.VP=function(w,c,a){for(var n=[],o=0;o<c;o++)n[o]="";for(var u=o=0,p=0;p<c;p++){var f=w[o]>>u&31;if(31<(u+=5)){var g=37-u;f&=(1<<g)-1,u-=32,f|=(w[++o]&(1<<u)-1)<<g}n[c-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[f]}if(a>c)for(p=0;p<a-c;p++)n.push("0");else a<c&&(n.length=a);return n.join("")},O}()}(B||(B={})),function(h){var O={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function c(){}return c.Ny=function(a){c.zp===!1&&c.zt();var n=c.AQ(a);if(n==-1){var o=c.Ax(a);o!=a&&(n=c.Ny(o))}return n==-1&&(o=c.AK(a))!=a&&(n=c.Ny(o)),n},c.AQ=function(a){return c.Hw[a]!==void 0?c.Hw[a]:-1},c.xQ=function(a){c.zp===!1&&c.zt();var n=c.iF(a);if(n==1e38){var o=c.Ax(a);if(o!=a&&(n=c.iF(o)),n==1e38)return 1e-10}return n},c.US=function(a){if(c.Ks[a]!==void 0)return!0;var n=c.Ax(a);return n!=a&&c.Ks[n]!==void 0},c.WS=function(a){if(c.zo[a]!==void 0)return!0;var n=c.Ax(a);return n!=a&&c.zo[n]!==void 0},c.iF=function(a){return c.zp===!1&&c.zt(),c.Ks[a]!==void 0?c.Ks[a]:c.zo[a]!==void 0?c.zo[a]:1e38},c.AK=function(a){return c.zp===!1&&c.zt(),c.RA[a]!==void 0?c.RA[a]:a},c.Ax=function(a){return c.zp===!1&&c.zt(),c.SA[a]!==void 0?c.SA[a]:a},c.zt=function(){for(var a,n=O,o=0;o<n.pcsid.length;o+=2)c.zo[n.pcsid[o]]=n.pcstol[2*n.pcsid[o+1]+1];for(o=0;o<n.pcsidc.length;o+=1)for(var u=(a=n.pcsidc[o])[0];u<=a[1];u++)c.zo[u]=n.pcstol[2*a[2]+1];for(o=0;o<n.gcsid.length;o+=2)c.Ks[n.gcsid[o]]=n.gcstol[2*n.gcsid[o+1]+1];for(o=0;o<n.gcsidc.length;o+=1)for(u=(a=n.gcsidc[o])[0];u<=a[1];u++)c.zo[u]=n.gcstol[2*a[2]+1];for(o=0;o<w.c.length;o+=1)for(u=(a=w.c[o])[0];u<=a[1];u++)c.Hw[u]=a[2];for(o=0;o<w.nc.length;o+=2)c.Hw[w.nc[o]]=w.nc[o+1];for(w=null,o=0;o<n.newtoold.length;o+=2)c.RA[n.newtoold[o+1]]=n.newtoold[o],c.SA[n.newtoold[o]]=n.newtoold[o+1];O=null,c.zp=!0},c.zp=!1,c.Ks=[],c.zo=[],c.RA=[],c.SA=[],c.Hw=[],c}()}(B||(B={})),function(h){function O(c){return c.length===0?'""':c[0]=='"'||c[0]=="."||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var w=[];h.SC=function(){function c(){}return c.zQ=function(a){try{for(var n=0;n<w.length;n++)if(w[n].wkttext===a)return w[n].unit;for(var o,u=n="",p=!1,f=0;f<a.length;f++){var g=a[f];p===!0?g=='"'?a[f+1]=='"'?n+=g:p=p=!1:n+=g:/[\s]/.test(g)||(g==","?(u=n!==""?u+(O(n)+","):u+",",n=""):g==")"||g=="]"?(u=n!==""?u+(O(n)+"]}"):u+"]}",n=""):g=="("||g=="["?(u+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):g=='"'?(p=!0,n=""):n+=g)}o=JSON.parse(u);var b=c.hF(o);if(b===null)return null;for(o=null,g=0;g<b.values.length;g++)if(typeof b.values[g]=="object"&&b.values[g].entity==="UNIT"){o=b.values[g];break}if(o===null)return null;var S=h.Uc.UO(b.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return w.push({wkttext:a,unit:S}),10<w.length&&w.shift(),S}catch{return null}},c.hF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var n=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];n.push(a.values[o])}for(a=0;a<n.length;a++)if((o=c.hF(n[a]))!==null)return o;return null},c.yQ=function(a){var n=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var u=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<u&&(n=.001/u)}else if(0<=(o=a.indexOf("GEOGCS"))){var f=0;if(u=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{f=parseFloat(a.substring(o,p))}catch{f=0}if(0<f&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{u=parseFloat(a.substring(o,p))}catch{u=0}}0<f&&0<u&&(n=.001/(f*u))}}return n},c}()}(B||(B={})),function(h){var O;(O=h.$K||(h.$K={}))[O.NONE=0]="NONE",O[O.LINEAR=1]="LINEAR",O[O.ANGULAR=2]="ANGULAR",function(c){c[c.enumFloat=0]="enumFloat",c[c.enumDouble=1]="enumDouble",c[c.enumInt32=2]="enumInt32",c[c.enumInt64=3]="enumInt64",c[c.enumInt8=4]="enumInt8",c[c.enumInt16=5]="enumInt16"}(h.LL||(h.LL={})),function(c){c[c.POSITION=0]="POSITION",c[c.Z=1]="Z",c[c.M=2]="M",c[c.ID=3]="ID",c[c.NORMAL=4]="NORMAL",c[c.TEXTURE1D=5]="TEXTURE1D",c[c.TEXTURE2D=6]="TEXTURE2D",c[c.TEXTURE3D=7]="TEXTURE3D",c[c.ID2=8]="ID2",c[c.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var w=function(){function c(a,n){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,n!==void 0){for(this.Ba=n.Ba,this.Qq=n.Qq,this.dg=n.dg.slice(0),this.wh=n.wh.slice(0),this.yl=n.yl,this.Xs=[],a=n=0;a<this.Ba;a++)this.Xs[a]=n,n+=c.Wa(this.dg[a]);for(this.Qq=n,this.Be=[],a=0;a<this.Ba;a++){n=c.Wa(this.ld(a));for(var o=c.te(this.ld(a)),u=0;u<n;u++)this.Be[this.Xs[a]+u]=o}}else this.Qq=this.Ba=0}return c.prototype.ld=function(a){if(0>a||a>this.Ba)throw h.i.O();return this.dg[a]},c.prototype.Rf=function(a){return this.wh[a]},c.gz=function(a){return c.EM[a]},c.Vp=function(a){return c.NM[a]},c.Wa=function(a){return c.mM[a]},c.prototype.hasAttribute=function(a){return 0<=this.wh[a]},c.prototype.dG=function(){return this.hasAttribute(1)},c.te=function(a){return c.$C[a]},c.prototype.GR=function(a){return this.Xs[a]},c.yG=function(a,n){return c.$C[a]===n},c.prototype.Nb=function(a){return this===a},c.prototype.Cn=function(){for(var a=h.P.Vh(this.dg[0]),n=1;n<this.Ba;n++)a=h.P.Vh(this.dg[n],a);return a},c.prototype.bk=function(a){return this.Xs[a]},c.prototype.dc=function(){return this.yl},c.prototype.Fd=function(a){return this.dg[a]},c.$C=[0,0,NaN,0,0,0,0,0,0],c.EM=[1,1,1,0,2,1,1,1,0],c.NM=[1,1,1,2,0,0,0,0,2],c.mM=[2,1,1,1,3,1,2,3,2],c}();h.sa=w}(B||(B={})),function(h){function O(p,f,g){var b=f-(p=new u(p)).e,S=p.c;for(S.length>++f&&w(p,b,u.gu),S[0]?g?b=f:(S=p.c,b=p.e+b+1):++b;S.length<b;S.push(0));return b=p.e,g===1||g&&(f<=b||b<=a)?(0>p.Cd&&S[0]?"-":"")+(1<S.length?S[0]+"."+S.join("").slice(1):S[0])+(0>b?"e":"e+")+b:p.toString()}function w(p,f,g,b){var S=p.c,$=p.e+f+1;if(g===1?b=5<=S[$]:g===2?b=5<S[$]||S[$]==5&&(b||0>$||S[$+1]!==void 0||1&S[$-1]):g===3?b=b||S[$]!==void 0||0>$:(b=!1,g!==0&&c("!Big.RM!")),1>$||!S[0])b?(p.e=-f,p.c=[1]):p.c=[p.e=0];else{if(S.length=$--,b)for(;9<++S[$];)S[$]=0,$--||(++p.e,S.unshift(1));for($=S.length;!S[--$];S.pop());}return p}function c(p){throw(p=Error(p)).name="BigError",p}var a=-7,n=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=function(){function p(f){if(f instanceof p)this.Cd=f.Cd,this.e=f.e,this.c=f.c.slice();else{var g,b,S;for(f===0&&0>1/f?f="-0":o.test(f+="")||c(NaN),this.Cd=f.charAt(0)=="-"?(f=f.slice(1),-1):1,-1<(g=f.indexOf("."))&&(f=f.replace(".","")),0<(b=f.search(/e/i))?(0>g&&(g=b),g+=+f.slice(b+1),f=f.substring(0,b)):0>g&&(g=f.length),b=0;f.charAt(b)=="0";b++);if(b==(S=f.length))this.c=[this.e=0];else{for(;f.charAt(--S)=="0";);for(this.e=g-b-1,this.c=[],g=0;b<=S;this.c[g++]=+f.charAt(b++));}}}return p.prototype.abs=function(){var f=new p(this);return f.Cd=1,f},p.prototype.cmp=function(f){var g=this.c,b=(f=new p(f)).c,S=this.Cd,$=f.Cd,E=this.e,C=f.e;if(!g[0]||!b[0])return g[0]?S:b[0]?-$:0;if(S!=$)return S;if(f=0>S,E!=C)return E>(C^f)?1:-1;for(S=-1,$=(E=g.length)<(C=b.length)?E:C;++S<$;)if(g[S]!=b[S])return g[S]>(b[S]^f)?1:-1;return E==C?0:E>(C^f)?1:-1},p.prototype.lm=function(f){var g=this.c,b=(f=new p(f)).c,S=this.Cd==f.Cd?1:-1,$=p.tr;if(($!==~~$||0>$||1e6<$)&&c("!Big.DP!"),!g[0]||!b[0])return g[0]==b[0]&&c(NaN),b[0]||c(S/0),new p(0*S);var E,C,k=b.slice(),L=E=b.length,N=g.length,U=g.slice(0,E),H=U.length,j=f,K=j.c=[],se=0,ne=$+(j.e=this.e-f.e)+1;for(j.Cd=S,S=0>ne?0:ne,k.unshift(0);H++<E;U.push(0));do{for(C=0;10>C;C++){if(E!=(H=U.length))var pe=E>H?1:-1;else{var ce=-1;for(pe=0;++ce<E;)if(b[ce]!=U[ce]){pe=b[ce]>U[ce]?1:-1;break}}if(!(0>pe))break;for(f=H==E?b:k;H;){if(U[--H]<f[H]){for(ce=H;ce&&!U[--ce];U[ce]=9);--U[ce],U[H]+=10}U[H]-=f[H]}for(;!U[0];U.shift());}K[se++]=pe?C:++C,U[0]&&pe?U[H]=g[L]||0:U=[g[L]]}while((L++<N||U[0]!==void 0)&&S--);return K[0]||se==1||(K.shift(),j.e--),se>ne&&w(j,$,p.gu,U[0]!==void 0),j},p.prototype.aS=function(){return 0<this.cmp(0)},p.prototype.iT=function(){return 0>this.cmp(0)},p.prototype.kt=function(f){var g,b=this.Cd,S=(f=new p(f)).Cd;if(b!=S)return f.Cd=-S,this.oI(f);var $=this.c.slice(),E=this.e,C=f.c,k=f.e;if(!$[0]||!C[0])return C[0]?(f.Cd=-S,f):new p($[0]?this:0);if(b=E-k){for((g=0>b)?(b=-b,E=$):(k=E,E=C),E.reverse(),S=b;S--;E.push(0));E.reverse()}else for(E=((g=$.length<C.length)?$:C).length,b=S=0;S<E;S++)if($[S]!=C[S]){g=$[S]<C[S];break}if(g&&(E=$,$=C,C=E,f.Cd=-f.Cd),0<(S=(E=C.length)-(g=$.length)))for(;S--;$[g++]=0);for(S=g;E>b;){if($[--E]<C[E]){for(g=E;g&&!$[--g];$[g]=9);--$[g],$[E]+=10}$[E]-=C[E]}for(;$[--S]==0;$.pop());for(;$[0]==0;)$.shift(),--k;return $[0]||(f.Cd=1,$=[k=0]),f.c=$,f.e=k,f},p.prototype.oI=function(f){var g=this.Cd,b=(f=new p(f)).Cd;if(g!=b)return f.Cd=-b,this.kt(f);b=this.e;var S=this.c,$=f.e,E=f.c;if(!S[0]||!E[0])return E[0]?f:new p(S[0]?this:0*g);if(S=S.slice(),g=b-$){for(0<g?($=b,b=E):(g=-g,b=S),b.reverse();g--;b.push(0));b.reverse()}for(0>S.length-E.length&&(b=E,E=S,S=b),g=E.length,b=0;g;)b=(S[--g]=S[g]+E[g]+b)/10|0,S[g]%=10;for(b&&(S.unshift(b),++$),g=S.length;S[--g]==0;S.pop());return f.c=S,f.e=$,f},p.prototype.pow=function(f){var g=this,b=new p(1),S=b,$=0>f;for((f!==~~f||-1e6>f||1e6<f)&&c("!pow!"),f=$?-f:f;1&f&&(S=S.nr(g)),f>>=1;)g=g.nr(g);return $?b.lm(S):S},p.prototype.round=function(f,g){var b=this;return f==null?f=0:(f!==~~f||0>f||1e6<f)&&c("!round!"),w(b=new p(b),f,g!=null?g:p.gu),b},p.prototype.sqrt=function(){var f=this.c,g=this.Cd,b=this.e,S=new p("0.5");if(!f[0])return new p(this);0>g&&c(NaN),(g=Math.sqrt(this.toString()))==0||g==1/0?((g=f.join("")).length+b&1||(g+="0"),(f=new p(Math.sqrt(g).toString())).e=((b+1)/2|0)-(0>b||1&b)):f=new p(g.toString()),g=f.e+(p.tr+=4);do b=f,f=S.nr(b.oI(this.lm(b)));while(b.c.slice(0,g).join("")!==f.c.slice(0,g).join(""));return w(f,p.tr-=4,p.gu),f},p.prototype.nr=function(f){var g=this.c,b=(f=new p(f)).c,S=g.length,$=b.length,E=this.e,C=f.e;if(f.Cd=this.Cd==f.Cd?1:-1,!g[0]||!b[0])return new p(0*f.Cd);if(f.e=E+C,S<$){var k=g;g=b,b=k,C=S,S=$,$=C}for(k=Array(C=S+$);C--;k[C]=0);for(E=$;E--;){for($=0,C=S+E;C>E;)$=k[C]+b[E]*g[C-E-1]+$,k[C--]=$%10,$=$/10|0;k[C]=(k[C]+$)%10}for($&&++f.e,k[0]||k.shift(),E=k.length;!k[--E];k.pop());return f.c=k,f},p.prototype.toString=function(){var f=this.e,g=this.c.join(""),b=g.length;if(f<=a||f>=n)g=g.charAt(0)+(1<b?"."+g.slice(1):"")+(0>f?"e":"e+")+f;else if(0>f){for(;++f;g="0"+g);g="0."+g}else if(0<f)if(++f>b)for(f-=b;f--;g+="0");else f<b&&(g=g.slice(0,f)+"."+g.slice(f));else 1<b&&(g=g.charAt(0)+"."+g.slice(1));return 0>this.Cd&&this.c[0]?"-"+g:g},p.prototype.toExponential=function(f){return f==null?f=this.c.length-1:(f!==~~f||0>f||1e6<f)&&c("!toExp!"),O(this,f,1)},p.prototype.toFixed=function(f){var g=a,b=n;if(a=-(n=1/0),f==null)var S=this.toString();else f===~~f&&0<=f&&1e6>=f&&(S=O(this,this.e+f),0>this.Cd&&this.c[0]&&0>S.indexOf("-")&&(S="-"+S));return a=g,n=b,S||c("!toFix!"),S},p.prototype.toPrecision=function(f){return f==null?this.toString():((f!==~~f||1>f||1e6<f)&&c("!toPre!"),O(this,f-1,2))},p.tr=20,p.gu=1,p}();h.jp=u}(B||(B={})),function(h){var O=function(){function w(c){this.lf=c}return w.prototype.qr=function(c,a,n){var o=new h.h,u=new h.h,p=this.lf;n.Wd(c,a,function(f,g){return p.uc(2*f,o),p.uc(2*g,u),o.compare(u)})},w.prototype.bq=function(c){return this.lf.read(2*c+1)},w}();h.si=function(){function w(){}return w.cq=function(c){if(c.B())return!1;var a=c.K();return a==1736?c.He()!=0:a==1607?(a=[!1],w.nE(c,!0,a),a[0]):!(a!=197&&(!h.ba.zd(a)||c.wG()))},w.im=function(c){var a=c.K();if(a==1736)return a=new h.Ua(c.description),c.B()||c.ZC(a),a;if(a==1607)return w.nE(c,!1,null);if(a==197)return a=new h.Ua(c.description),c.B()||a.bd(c,!1),a;if(h.ba.zd(a)){if(a=new h.ee(c.description),!c.B()&&!c.wG()){var n=new h.Ta;c.Vo(n),a.add(n),c.Ro(n),a.add(n)}return a}if(h.ba.Tn(a))return null;throw h.i.O()},w.nE=function(c,a,n){n!=null&&(n[0]=!1);var o=null;if(a||(o=new h.ee(c.description)),!c.B()){var u=new h.ja(0);u.Jb(2*c.ea());for(var p=0,f=c.ea();p<f;p++)if(0<c.Ka(p)&&!c.Pn(p)){var g=c.Ca(p);u.add(g),g=c.Wc(p)-1,u.add(g)}if(0<u.size){f=new h.Zt,p=c.vb(0),f.sort(u,0,u.size,new O(p)),f=new h.h,p.uc(2*u.get(0),f),g=0;for(var b=1,S=new h.Ta,$=new h.h,E=1,C=u.size;E<C;E++)if(p.uc(2*u.get(E),$),$.rb(f))u.get(g)>u.get(E)?(u.set(g,2147483647),g=E):u.set(E,2147483647),b++;else{if((1&b)==0)u.set(g,2147483647);else if(a)return n!=null&&(n[0]=!0),null;f.N($),g=E,b=1}if((1&b)==0)u.set(g,2147483647);else if(a)return n!=null&&(n[0]=!0),null;if(!a)for(u.Wd(0,u.size,function(k,L){return k-L}),E=0,C=u.size;E<C&&u.get(E)!=2147483647;E++)c.we(u.get(E),S),o.add(S)}}return a?null:o},w}()}(B||(B={})),function(h){var O=function(){function w(){this.zf=new h.ja(0),this.As=new h.ja(0),this.zH=1,this.Gs=NaN}return w.prototype.sort=function(c,a,n,o){if(32>n-a)o.qr(a,n,c);else{var u=!0;try{for(var p=1/0,f=-1/0,g=a;g<n;g++){var b=o.bq(c.get(g));b<p&&(p=b),b>f&&(f=b)}if(this.reset(n-a,p,f,n-a)){for(g=a;g<n;g++){var S=c.get(g);b=o.bq(S);var $=this.uF(b);this.zf.set($,this.zf.get($)+1),this.As.write(g-a,S)}var E=this.zf.get(0);this.zf.set(0,0),g=1;for(var C=this.zf.size;g<C;g++){var k=this.zf.get(g);this.zf.set(g,E),E+=k}for(g=a;g<n;g++){S=this.As.read(g-a),b=o.bq(S),$=this.uF(b);var L=this.zf.get($);c.set(L+a,S),this.zf.set($,L+1)}u=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(u)o.qr(a,n,c);else{for(g=n=0,C=this.zf.size;g<C;g++)u=n,(n=this.zf.get(g))>u&&o.qr(a+u,a+n,c);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},w.prototype.reset=function(c,a,n,o){return!(2>c||n==a)&&(c=Math.min(w.cL,c),this.zf.Jb(c),this.zf.resize(c),this.zf.Yj(0,0,this.zf.size),this.zH=a,this.As.resize(o),this.Gs=(n-a)/(c-1),!0)},w.prototype.uF=function(c){return h.P.truncate((c-this.zH)/this.Gs)},w.cL=65536,w}();h.Zt=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var c=function(){function p(){}return p.Su=function(f,g,b,S,$,E){var C=new p;return C.Km=new h.h,C.Xm=new h.h,C.cw=new h.h,C.Km.N(f),C.Xm.N(g),C.cw.N(b),C.Eo=S,C.sh=$,C.uh=E,C},p.construct=function(f,g,b,S){var $=new p;return $.Km=new h.h,$.Xm=new h.h,$.cw=new h.h,$.Km.N(f),$.Xm.N(g),$.cw.Sc(),$.Eo=4,$.sh=b,$.uh=S,$},p}(),a=function(){function p(f,g,b,S,$,E){this.$v=null,this.za=0,this.zA=f,this.XH=this.VH=0,this.La=g,this.Oj=b,this.xk=S,this.Fq=$,this.Vb=E}return p.prototype.next=function(){for(var f=new h.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,f),this.za++,!f.B())break}var g=!1;if(this.$v==null&&(this.VH=f.Ng(),this.XH=f.kh(),this.$v=u.buffer(f,this.La,this.Oj,this.xk,this.Fq,this.Vb),g=!0),this.za<this.zA.I()){var b=new h.Ea;this.$v.copyTo(b)}else b=this.$v;if(!g){g=new h.Ed;var S=f.Ng()-this.VH;f=f.kh()-this.XH,g.ig(S,f),b.Pc(g)}return b},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),n=function(){function p(f,g){this.Xa=f,this.za=0,this.qq=g}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var g=this.za;if(this.za++,!f.Pn(g))for(var b=f.Oa(f.Wc(g)-1);this.za<f.ea();){var S=f.Oa(f.Ca(this.za));if(f.Pn(this.za)||S!=b)break;b=f.Oa(f.Wc(this.za)-1),this.za++}if(this.za-g==1)return this.Xa.fE(this.Xa.Y,g,this.qq);for((b=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,g,!0),g+=1;g<this.za;g++)b.Fr(this.Xa.Y,g,0,f.tv(g),!1);return this.Xa.fE(b,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),o=function(){function p(f){this.Xa=f,this.za=0}return p.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var g=this.za;for(f.Kr(this.za),this.za++;this.za<f.ea()&&!(0<f.Kr(this.za));)this.za++;return g==0&&this.za==f.ea()?this.Xa.ly(f,0,f.ea()):this.Xa.ly(f,g,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.re=function(){},p}(),u=function(){function p(f){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=f,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return p.buffer=function(f,g,b,S,$,E){if(f==null||0>S)throw h.i.O();if(f.B())return new h.Ea(f.description);var C=new h.l;return f.yc(C),0<g&&C.X(g,g),(E=new p(E)).Oj=b,E.Y=f,E.ra=h.ua.Xd(b,C,!0),E.dt=h.ua.Xd(null,C,!0),E.La=g,E.ET=f.K(),0>=$&&($=96),E.sb=Math.abs(E.La),E.Mv=E.sb!=0?1/E.sb:0,isNaN(S)||S==0?S=1e-5*E.sb:S>.5*E.sb&&(S=.5*E.sb),12>$&&($=12),(f=Math.abs(g)*(1-Math.cos(Math.PI/$)))>S?S=f:(f=Math.PI/Math.acos(1-S/Math.abs(g)))<$-1&&12>($=h.P.truncate(f))&&($=12,S=Math.abs(g)*(1-Math.cos(Math.PI/$))),E.xk=S,E.Fq=$,E.oA=Math.min(E.dt,.25*S),E.gE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var f=this.lE();f=h.P.truncate((f+3)/4);var g=.5*Math.PI/f;this.jA=g;for(var b=0;b<4*f;b++)this.Jd.push(null);var S=Math.cos(g);g=Math.sin(g);var $=h.h.construct(0,1);for(b=0;b<f;b++)this.Jd[b+0*f]=h.h.construct($.y,-$.x),this.Jd[b+1*f]=h.h.construct(-$.x,-$.y),this.Jd[b+2*f]=h.h.construct(-$.y,$.x),this.Jd[b+3*f]=$,($=h.h.construct($.x,$.y)).Ct(S,g)},p.prototype.gE=function(){var f=this.Y.K();if(h.ba.zd(f))return(f=new h.Ua(this.Y.description)).pc(this.Y,!0),this.Y=f,this.gE();if(this.La<=this.ra){if(!h.ba.PS(f))return new h.Ea(this.Y.description);if(0>=this.La&&(f=new h.l,this.Y.A(f),f.S()<=2*-this.La||f.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw h.i.Ra()}},p.prototype.MN=function(){if(this.zG(this.Y)){var f=new h.Ta;this.Y.we(0,f);var g=new h.l;return this.Y.A(g),f.Db(g.tf()),this.Iu(f)}return this.Y=this.RV(this.Y),f=new n(this,this.qq),h.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.LN=function(){if(this.La==0)return this.Y;var f=h.$l.local();if(this.ev(),this.Y=f.W(this.Y,null,!1,this.Vb),0>this.La){var g=this.Y;return g=this.ly(g,0,g.ea()),f.W(g,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(f=new h.Ta,this.Y.we(0,f),g=new h.l,this.Y.A(g),f.Db(g.tf()),this.Iu(f)):(f=new o(this),h.Ih.local().W(f,this.Oj,this.Vb).next())},p.prototype.ly=function(f,g,b){for(var S=new h.Ea(f.description);g<b;g++)if(!(1>f.Ka(g))){var $=f.Kr(g),E=new h.l;if(f.Tj(g,E),0<this.La){if(0<$)if(this.AG(f,g))$=new h.Ta,f.we(f.Ca(g),$),$.Db(E.tf()),this.Au(S,$);else{var C=$=new h.Ua(f.description);C=h.au.EG(this.Y,g)||this.Bn(this.Y,g,C,!0,1)==2?this.eE(f,g):this.An($),S.add(C,!1)}else if(!(E.S()+this.ra<=2*this.sb||E.da()+this.ra<=2*this.sb||(C=$=new h.Ua(f.description),this.Bn(this.Y,g,C,!0,1),$.B()))){var k=new h.l;for(k.L(E),k.X(this.sb,this.sb),C.vp(k),E=1,$=(C=this.An($)).ea();E<$;E++)S.addPath(C,E,!0)}}else if(0<$){if(!(E.S()+this.ra<=2*this.sb||E.da()+this.ra<=2*this.sb||(C=$=new h.Ua(f.description),this.Bn(this.Y,g,C,!0,-1),$.B())))for(k=new h.l,C.yc(k),k.X(this.sb,this.sb),C.vp(k),E=1,$=(C=this.An($)).ea();E<$;E++)S.addPath(C,E,!0)}else for(C=$=new h.Ua(f.description),this.Bn(this.Y,g,C,!0,-1),E=0,$=(C=this.An($)).ea();E<$;E++)S.addPath(C,E,!0)}if(0<this.La)return 1<S.ea()?S=this.An(S):p.kx(S);if(f=new h.l,S.yc(f),S.B())return p.kx(S);for(f.X(this.sb,this.sb),S.vp(f),S=this.An(S),f=new h.Ea(S.description),E=1,$=S.ea();E<$;E++)f.addPath(S,E,!1);return p.kx(f)},p.prototype.KN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(f){var g=new h.Ea(this.Y.description);return this.Au(g,f),this.oX(g)},p.prototype.JN=function(){var f=new a(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return h.Ih.local().W(f,this.Oj,this.Vb).next()},p.prototype.GN=function(){var f=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)f.bd(this.Y,!1);else{var g=new h.Hh;this.Y.dn(g),g.X(this.La,this.La),f.bd(g,!1)}return f}return f.bd(this.Y,!1),this.Y=f,this.eE(f,0)},p.prototype.eE=function(f,g){this.ev();var b=new h.Ea(f.description),S=new h.h,$=new h.h,E=new h.h,C=new h.h,k=new h.h,L=new h.h,N=new h.h,U=new h.h,H=f.Ka(g),j=f.Ca(g),K=0;for(g=f.Ka(g);K<g;K++){if(f.D(j+K,$),f.D(j+(K+1)%H,C),f.D(j+(K+2)%H,L),N.vc(C,$),N.length()==0||(N.Jv(),N.normalize(),N.scale(this.sb),S.add(N,$),E.add(N,C),K==0?b.Nt(S):b.Ei(S),b.Ei(E),U.vc(L,C),U.length()==0))throw h.i.Ra();U.Jv(),U.normalize(),U.scale(this.sb),k.add(U,C),this.BD(b,C,E,k,!1)}return p.kx(b)},p.prototype.fE=function(f,g,b){if(this.ev(),1>f.Ka(g))return null;if(this.AG(f,g)&&0<this.La){b=new h.Ta,f.we(f.Ca(g),b);var S=new h.l;return f.Tj(g,S),b.Db(S.tf()),this.Iu(b)}if(S=new h.Ua(f.description),f.Pn(g))this.Bn(f,g,S,b,1),this.Bn(f,g,S,b,-1);else{var $=new h.Ua(f.description);$.addPath(f,g,!1),$.Fr(f,g,0,f.tv(g),!1),this.Bn($,0,S,b,1)}return this.An(S)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},p.prototype.An=function(f){return h.Hg.Ok(f,this.dt,!0,!0,this.Vb)},p.prototype.lE=function(){if(this.xk==0)return this.Fq;var f=1-this.xk*Math.abs(this.Mv);return 4>(f=-1>f?4:2*Math.PI/Math.acos(f)+.5)?f=4:f>this.Fq&&(f=this.Fq),h.P.truncate(f)},p.prototype.BD=function(f,g,b,S,$){this.ev();var E=new h.h;E.vc(b,g),E.scale(this.Mv);var C=new h.h;C.vc(S,g),C.scale(this.Mv),0>(E=Math.atan2(E.y,E.x)/this.jA)&&(E=this.Jd.length+E),E=this.Jd.length-E,0>(C=Math.atan2(C.y,C.x)/this.jA)&&(C=this.Jd.length+C),(C=this.Jd.length-C)<E&&(C+=this.Jd.length);var k=h.P.truncate(C);C=h.P.truncate(Math.ceil(E)),(E=new h.h).N(this.Jd[C%this.Jd.length]),E.Dt(this.sb,g);var L=10*this.ra;for(E.sub(b),E.length()<L&&(C+=1),E.N(this.Jd[k%this.Jd.length]),E.Dt(this.sb,g),E.sub(S),E.length()<L&&--k,b=k-C,b++,k=0,C%=this.Jd.length;k<b;k++,C=(C+1)%this.Jd.length)E.N(this.Jd[C]),E.Dt(this.sb,g),f.Ei(E),this.Zq();$&&f.Ei(S)},p.prototype.Bn=function(f,g,b,S,$){var E=new h.hd,C=E.hN(f,g);if(E.Ip(this.oA,!1,!1),2>E.I(C))return 0>$||($=f,E=new h.Ta,$.we($.Ca(g),E),this.Au(b,E)),1;var k=E.Oa(E.Ya(E.Ob(C))),L=new h.Ed;if(L.ig(-k.x,-k.y),E.Pc(L),S&&(this.oQ(E,C,$),2>E.I(C)))return 0>$||($=f,E=new h.Ta,$.we($.Ca(g),E),this.Au(b,E)),1;this.$d.length=0;var N=E.Ob(C);g=E.Ya(N);var U=$==1?E.Na(g):E.V(g);f=$==1?E.V(g):E.Na(g);var H=!0;S=new h.h,C=new h.h;var j=new h.h,K=new h.h,se=new h.h,ne=new h.h,pe=new h.h,ce=new h.h,_e=new h.h,Oe=new h.h,Ce=this.sb;N=E.Ka(N);for(var st=0;st<N;st++)E.D(f,C),H&&(E.D(g,S),E.D(U,j),ce.vc(S,j),ce.normalize(),Oe.HG(ce),Oe.scale(Ce),K.add(Oe,S)),pe.vc(C,S),pe.normalize(),_e.HG(pe),_e.scale(Ce),se.add(S,_e),U=ce.yi(pe),H=ce.Sh(pe),0>U||0>H&&U==0?this.$d.push(c.Su(K,se,S,2,this.$d.length+1,this.$d.length-1)):K.rb(se)||(this.$d.push(c.construct(K,S,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(c.construct(S,se,this.$d.length+1,this.$d.length-1,"dummy"))),ne.add(C,_e),this.$d.push(c.Su(se,ne,S,1,this.$d.length+1,this.$d.length-1)),K.N(ne),Oe.N(_e),j.N(S),S.N(C),ce.N(pe),U=g,g=f,H=!1,f=$==1?E.V(g):E.Na(g);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(b),L.ig(k.x,k.y),b.TD(L,b.ea()-1),1},p.prototype.TV=function(f){for(var g=this.uO(),b=!0,S=g+1,$=g;S!=g;$=S){var E=this.$d[$];S=E.sh!=-1?E.sh:($+1)%this.$d.length,E.Eo!=0&&(b&&f.Nt(E.Km),E.Eo==2?this.BD(f,E.cw,E.Km,E.Xm,!0):f.Ei(E.Xm),b=!1)}},p.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var f=0,g=0,b=this.$d.length;g<b;){var S=this.$d[g];if((3&S.Eo)!=0){f=g;break}g=S.sh}for(b=f+1,g=f;b!=f;g=b){b=(S=this.$d[g]).sh;for(var $=1,E=null;b!=g&&(3&(E=this.$d[b]).Eo)==0;)b=E.sh,$++;$!=1&&(S.Eo&E.Eo)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(S.Km),this.Ns.Rc(S.Xm),this.nw.Ec(E.Km),this.nw.Rc(E.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(S.Xm.N(this.Ms[0]),E.Km.N(this.Ms[0]),S.sh=b,E.uh=g))}return f},p.prototype.Hv=function(f,g,b){var S=new h.h;if(S.vc(b,f),b=S.length(),0<(b=this.sb*this.sb-b*b*.25)){b=Math.sqrt(b),S.normalize(),S.cr();var $=new h.h;if($.vc(g,f),$.Sh(S)+b>=this.sb)return!0}return!1},p.prototype.oQ=function(f,g,b){for(var S=0;1>S;S++){var $=!1,E=f.Ob(g),C=f.Ka(E);if(C==0)break;var k=C;if(3>C)break;!f.ec(E)&&(k=C-1),E=f.Ya(E),C=0<b?f.Na(E):f.V(E);for(var L=0<b?f.V(E):f.Na(E),N=C,U=!0,H=new h.h,j=new h.h,K=new h.h,se=new h.h,ne=new h.h,pe=h.h.construct(0,0),ce=new h.h,_e=new h.h,Oe=new h.h,Ce=new h.h,st=this.sb,qe=0,Et=0;Et<k&&(f.D(L,j),U&&(f.D(E,H),f.D(C,K),N=C),_e.vc(H,K),_e.normalize(),ce.vc(j,H),ce.normalize(),N!=L);){var xt=_e.yi(ce),et=_e.Sh(ce),xi=!0;if(0>xt||0>et&&xt==0||!this.Hv(K,H,j)||(pe.N(j),xi=!1,++qe,$=!0),xi){if(0<qe)for(;(xt=0<b?f.Na(N):f.V(N))!=E;){if(f.D(xt,se),!this.Hv(se,K,pe)){xt!=L&&this.Hv(se,K,j)&&this.Hv(se,H,j)&&(K.N(se),N=xt,xi=!1,++qe);break}K.N(se),N=xt,xi=!1,++qe}if(!xi)continue;if(0<qe){for(N=0<b?f.Na(C):f.V(C),U=1;U<qe;U++)xi=0<b?f.Na(N):f.V(N),f.qd(N,!0),N=xi;Oe.vc(H,K),qe=st*st-(qe=Oe.length())*qe*.25,st-(qe=Math.sqrt(qe))>.5*this.xk?(ne.add(K,H),ne.scale(.5),Oe.normalize(),Oe.cr(),Ce.N(Oe),Ce.scale(st-qe),ne.add(Ce),f.mf(C,ne)):f.qd(C,!0),qe=0}K.N(H),N=E}H.N(j),C=E,E=L,L=0<b?f.V(E):f.Na(E),Et++,U=!1}if(0<qe){for(N=0<b?f.Na(C):f.V(C),U=1;U<qe;U++)xi=0<b?f.Na(N):f.V(N),f.qd(N,!0),N=xi;ne.add(K,H),ne.scale(.5),Oe.vc(H,K),qe=st*st-(qe=Oe.length())*qe*.25,qe=Math.sqrt(qe),Oe.normalize(),Oe.cr(),Ce.N(Oe),Ce.scale(st-qe),ne.add(Ce),f.mf(C,ne)}if(f.Ip(this.oA,!1,!1),!$)break}},p.prototype.AG=function(f,g){if(f.Ka(g)==1)return!0;var b=new h.l;return f.Tj(g,b),Math.max(b.S(),b.da())<.5*this.xk},p.prototype.zG=function(f){var g=new h.l;return f.A(g),Math.max(g.S(),g.da())<.5*this.xk},p.prototype.RV=function(f){for(var g=0,b=0,S=(f=h.zC.local().W(f,.25*this.xk,!1,this.Vb)).ea();b<S;b++)g=Math.max(f.Ka(b),g);return 32>g?(this.qq=!1,f):(this.qq=!0,h.Hg.Ok(f,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(f,g){if(g=g.D(),this.Jd!=null&&this.Jd.length!==0){var b=new h.h;b.N(this.Jd[0]),b.Dt(this.sb,g),f.Nt(b);for(var S=1,$=this.Jd.length;S<$;S++)b.N(this.Jd[S]),b.Dt(this.sb,g),f.Ei(b)}else{S=this.lE(),b=h.P.truncate((S+3)/4),S=.5*Math.PI/b,$=Math.cos(S);for(var E=Math.sin(S),C=new h.h,k=3;0<=k;k--){switch(C.na(0,this.sb),k){case 0:for(S=0;S<b;S++)f.Aj(C.x+g.x,C.y+g.y),C.Ct($,E);break;case 1:for(S=0;S<b;S++)f.Aj(-C.y+g.x,C.x+g.y),C.Ct($,E);break;case 2:for(S=0;S<b;S++)f.Aj(-C.x+g.x,-C.y+g.y),C.Ct($,E);break;default:for(f.rx(C.y+g.x,-C.x+g.y),S=1;S<b;S++)C.Ct($,E),f.Aj(C.y+g.x,-C.x+g.y)}this.Zq()}}},p.kx=function(f){return f.Eh(1,0),f},p.prototype.oX=function(f){return f.Eh(2,this.ra),f.hm(),f},p}();h.CK=u}(B||(B={})),function(h){var O=function(){function w(c){this.Da=c,this.g=new h.hd,this.ed=new h.ja(0)}return w.prototype.Nh=function(c,a,n){switch(a){case 0:if(c.v<n&&c.C<=n)break;return c.v>=n?1:-1;case 1:if(c.G<n&&c.H<=n)break;return c.G>=n?1:-1;case 2:if(c.v>=n&&c.C>n)break;return c.C<=n?1:-1;case 3:if(!(c.G>=n&&c.H>n))return c.H<=n?1:-1}return 0},w.prototype.vy=function(c,a){return c.K()==1736?this.xy(c,a):this.yy(c)},w.prototype.xy=function(c,a){if(this.Da.S()==0||this.Da.da()==0)return c.Ja();var n=new h.l;c.yc(n),this.Y=this.g.Ib(c);var o=new h.l,u=new h.l,p=new h.h,f=new h.h,g=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0];new h.jg;var S=new h.zb,$=new h.ja(0);$.Jb(Math.min(100,c.I()));for(var E=!1,C=0;!E&&4>C;C++){var k=!1,L=(1&C)!=0,N=0;switch(C){case 0:N=this.Da.v,k=n.v<=N&&n.C>=N;break;case 1:N=this.Da.G,k=n.G<=N&&n.H>=N;break;case 2:N=this.Da.C,k=n.v<=N&&n.C>=N;break;case 3:N=this.Da.H,k=n.G<=N&&n.H>=N}if(k)for(E=!0,k=this.g.Ob(this.Y);k!=-1;){var U=-1,H=-1,j=this.g.Ya(k),K=j;do{var se=this.g.cc(K);se==null&&(se=S,this.g.D(K,p),se.Ec(p),this.g.D(this.g.V(K),f),se.Rc(f)),se.A(o);var ne=this.Nh(o,C,N),pe=0,ce=-1;if(ne==-1){pe=0<(se=se.fq(L,N,g,b))?this.g.Wl(K,b,se):0,pe+=1;var _e=K,Oe=this.g.V(_e);for(se=0;se<pe;se++){if(this.g.D(_e,p),this.g.D(Oe,f),(ce=this.g.cc(_e))==null&&((ce=S).Ec(p),ce.Rc(f)),ce.A(u),(ce=this.Nh(u,C,N))==-1){if(L)(ce=Math.abs(p.y-N))<(Ce=Math.abs(f.y-N))?(p.y=N,this.g.mf(_e,p)):(f.y=N,this.g.mf(Oe,f));else{ce=Math.abs(p.x-N);var Ce=Math.abs(f.x-N);ce<Ce?(p.x=N,this.g.mf(_e,p)):(f.x=N,this.g.mf(Oe,f))}(ce=this.g.cc(_e))==null&&((ce=S).Ec(p),ce.Rc(f)),ce.A(u),ce=this.Nh(u,C,N)}Ce=U,U=ce,H==-1&&(H=U),Ce==0&&U==1||Ce==1&&U==0||Ce!=0||U!=0||$.add(_e),U==1&&(E=!1),ce=_e=Oe,Oe=this.g.V(Oe)}}pe==0&&(Ce=U,U=ne,H==-1&&(H=U),Ce==0&&U==1||Ce==1&&U==0||Ce!=0||U!=0||$.add(K),U==1&&(E=!1),ce=this.g.V(K)),K=ce}while(K!=j);for(H==0&&U==0&&$.add(j),se=0,U=$.size;se<U;se++)H=$.get(se),this.g.qd(H,!1);$.clear(!1),k=3>this.g.Ka(k)?this.g.ar(k):this.g.Sb(k)}}return E?c.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(c){var a=new h.l,n=new h.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new h.jg,f=c,g=new h.l;c.yc(g);for(var b=0;4>b;b++){var S=!1,$=(1&b)!=0,E=0;switch(b){case 0:E=this.Da.v,S=g.v<=E&&g.C>=E;break;case 1:E=this.Da.G,S=g.G<=E&&g.H>=E;break;case 2:E=this.Da.C,S=g.v<=E&&g.C>=E;break;case 3:E=this.Da.H,S=g.G<=E&&g.H>=E}if(S){S=f,f=c.Ja(),(S=S.Ha()).aj();for(var C,k=new h.h;S.ab();)for(var L,N=!0;S.Ia();){var U=S.ia();U.A(a);var H=this.Nh(a,b,E);if(H==-1){if(0<(H=U.fq($,E,o,u))){var j=0;C=U.bc();for(var K=0;K<=H;K++)if(j!=(L=K<H?u[K]:1)){U.dh(j,L,p);var se=p.get();se.Ec(C),K<H&&($?(k.x=o[K],k.y=E):(k.x=E,k.y=o[K]),se.Rc(k)),se.A(n);var ne=this.Nh(n,b,E);if(ne==-1){if(C=se.bc(),j=se.xc(),$)(ne=Math.abs(C.y-E))<(pe=Math.abs(j.y-E))?(C.y=E,se.Ec(C)):(j.y=E,se.Rc(j));else{ne=Math.abs(C.x-E);var pe=Math.abs(j.x-E);ne<pe?(C.x=E,se.Ec(C)):(j.x=E,se.Rc(j))}se.A(n),ne=this.Nh(n,b,E)}C=se.xc(),j=L,(L=ne)==1?(f.pc(se,N),N=!1):N=!0}}}else(L=H)==1?(f.pc(U,N),N=!1):N=!0}}}return f},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var c=new h.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,n=this.g.V(n))this.g.D(n,c),(this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(c){for(var a=new h.h,n=new h.h,o=h.P.mg(2048,0),u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u)){var p=this.g.Ya(u),f=p;do{var g=this.g.V(f);this.g.D(f,a);var b=-1;if(a.x==this.Da.v?(this.g.D(g,n),n.x==this.Da.v&&(b=1)):a.x==this.Da.C&&(this.g.D(g,n),n.x==this.Da.C&&(b=1)),a.y==this.Da.G?(this.g.D(g,n),n.y==this.Da.G&&(b=0)):a.y==this.Da.H&&(this.g.D(g,n),n.y==this.Da.H&&(b=0)),b!=-1&&(b=h.h.ub(a,n),!(1>=(b=h.P.truncate(Math.min(Math.ceil(b/c),2048)))))){for(var S=1;S<b;S++)o[S-1]=1*S/b;this.g.Wl(f,o,b-1)}f=g}while(f!=p)}},w.prototype.Xl=function(c,a){var n=this.g.Hd(),o=new h.h,u=new h.ja(0);u.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),g=0,b=this.g.Ka(p);g<b;g++){var S=this.g.V(f);this.g.D(f,o),(c?o.y==a:o.x==a)&&(this.g.D(S,o),(c?o.y==a:o.x==a)&&(this.g.Qa(f,n)!=1&&(u.add(f),this.g.Sa(f,n,1)),this.g.Qa(S,n)!=1&&(u.add(S),this.g.Sa(S,n,1)))),f=S}if(this.g.Ud(n),!(3>u.size)){var $=this;u.Wd(0,u.size,function(ne,pe){return $.Oh(ne,pe)}),n=new h.h,p=new h.h,f=new h.h,p.Sc();var E=-1;g=new h.ja(0),b=new h.ja(0),S=this.g.Hd();for(var C=this.g.Hd(),k=0,L=u.size;k<L;k++){var N=u.get(k);if(this.g.D(N,o),!o.rb(p)){if(E!=-1){for(var U=E;U<k;U++){E=u.get(U);var H=this.g.V(E);N=this.g.Na(E);var j=!1;0>this.Oh(E,H)&&(this.g.D(H,n),c?n.y==a:n.x==a)&&(g.add(E),j=!0,this.g.Sa(E,C,1)),0>this.Oh(E,N)&&(this.g.D(N,n),c?n.y==a:n.x==a)&&(j||g.add(E),this.g.Sa(E,S,1))}for(U=0,j=g.size;U<j;U++){if(E=g.get(U),N=this.g.Qa(E,S),H=this.g.Qa(E,C),N==1){N=this.g.Na(E),this.g.D(N,f);var K=[0];if(K[0]=0,!f.rb(o)){var se=h.h.ub(p,f);K[0]=h.h.ub(f,o)/se,K[0]==0?K[0]=2220446049250313e-31:K[0]==1&&(K[0]=.9999999999999998),this.g.Wl(N,K,1),N=this.g.Na(E),this.g.mf(N,o),b.add(N),this.g.Sa(N,S,1),this.g.Sa(N,C,-1)}}H==1&&(H=this.g.V(E),this.g.D(H,f),(K=[0])[0]=0,f.rb(o)||(se=h.h.ub(p,f),K[0]=h.h.ub(p,o)/se,K[0]==0?K[0]=2220446049250313e-31:K[0]==1&&(K[0]=.9999999999999998),this.g.Wl(E,K,1),N=this.g.V(E),this.g.mf(N,o),b.add(N),this.g.Sa(N,S,-1),this.g.Sa(N,C,1)))}E=g,g=b,(b=E).clear(!1)}E=k,p.N(o)}}this.g.Ud(S),this.g.Ud(C)}},w.prototype.Pl=function(c,a){var n=new h.h,o=new h.ja(0);o.Jb(100);for(var u=this.g.Hd(),p=0,f=this.ed.size;p<f;p++){var g=this.ed.get(p);if(g!=-1){var b=this.g.V(g);this.g.D(g,n),(c?n.y==a:n.x==a)&&(this.g.D(b,n),(c?n.y==a:n.x==a)&&(this.g.Qa(g,u)!=-2&&(o.add(g),this.g.Sa(g,u,-2)),this.g.Qa(b,u)!=-2&&(o.add(b),this.g.Sa(b,u,-2))))}}if(o.size!=0){var S=this;for(o.Wd(0,o.size,function(pe,ce){return S.Oh(pe,ce)}),p=0,f=o.size;p<f;p++){var $=o.get(p);this.g.Sa($,u,p)}g=new h.h,(b=new h.h).Sc();var E=-1;for(p=0,f=o.size;p<f;p++)if(($=o.get(p))!=-1&&(this.g.D($,n),!n.rb(b))){if(E!=-1)for(;;){$=!1;for(var C=1<p-E?p-1:p,k=E;k<C;k++){var L=o.get(k);if(L!=-1){var N=-1,U=this.g.V(L);0>this.Oh(L,U)&&(this.g.D(U,g),c?g.y==a:g.x==a)&&(N=U),U=-1;var H=this.g.Na(L);if(0>this.Oh(L,H)&&(this.g.D(H,g),c?g.y==a:g.x==a)&&(U=H),N!=-1&&U!=-1)this.Mh(L,o,u),this.g.qd(L,!1),this.Mh(N,o,u),this.g.qd(N,!1),$=!0;else if(N!=-1||U!=-1){for(H=k+1;H<p;H++){var j=o.get(H);if(j!=-1){var K=this.g.V(j),se=-1;0>this.Oh(j,K)&&(this.g.D(K,g),c?g.y==a:g.x==a)&&(se=K),K=this.g.Na(j);var ne=-1;if(0>this.Oh(j,K)&&(this.g.D(K,g),c?g.y==a:g.x==a)&&(ne=K),se!=-1&&ne!=-1){this.Mh(j,o,u),this.g.qd(j,!1),this.Mh(se,o,u),this.g.qd(se,!1),$=!0;break}if(N!=-1&&ne!=-1){this.At(o,L,N,j,ne,u),$=!0;break}if(U!=-1&&se!=-1){this.At(o,j,se,L,U,u),$=!0;break}}}if($)break}}}if(!$)break}E=p,b.N(n)}}this.g.Ud(u)},w.prototype.Mh=function(c,a,n){n=this.g.Qa(c,n),a.set(n,-1),n=this.g.Qa(c,this.li),this.ed.set(n,-1),(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(c,a,n,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,u),this.g.Cc(u,n),this.Mh(o,c,p),this.g.oi(o,!1),this.Mh(u,c,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var n=this.ed.get(c);n!=-1&&this.g.cj(n,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var g=p;p=this.g.Sb(p),this.g.Kf(g,-1),this.g.br(g)}else{n=f,g=0;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=f);2>=g?(n=this.g.Qa(f,this.li),this.ed.set(n,-1),f=this.g.qd(f,!1),g==2&&(n=this.g.Qa(f,this.li),this.ed.set(n,-1),this.g.qd(f,!1)),g=p,p=this.g.Sb(p),this.g.Kf(g,-1),this.g.br(g)):(this.g.fp(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,g),u+=g,o++,p=this.g.Sb(p))}}for(c=0,a=this.ed.size;c<a;c++)if((n=this.ed.get(c))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),g=0,f=n;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=f);2>=g?(n=this.g.Qa(f,this.li),this.ed.set(n,-1),f=this.g.qd(f,!1),g==2&&(0<=(n=this.g.Qa(f,this.li))&&this.ed.set(n,-1),this.g.qd(f,!1)),g=p,this.g.Kf(g,-1),this.g.br(g)):(this.g.mn(p,!0),this.g.Xj(p,g),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.fp(p,!1),u+=g,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),c=0,a=this.g.md;a!=-1;a=this.g.ve(a))c+=this.g.I(a);this.g.XB(c)},w.wy=function(c,a,n){return new w(a).vy(c,n)},w.clip=function(c,a,n,o){if(c.B())return c;if(a.B())return c.Ja();if((n=c.K())==33)return o=c.D(),a.contains(o)?c:c.Ja();if(n==197)return o=new h.l,c.A(o),o.Fa(a)?(a=new h.Hh,c.copyTo(a),a.Zo(o),a):c.Ja();var u=new h.l;if(c.yc(u),a.contains(u))return c;if(!a.isIntersecting(u))return c.Ja();if((u=c.Cb)!=null&&(u=u.Hk)!=null){if((u=u.To(a))==1){if(n!=1736)throw h.i.Ra();return(c=new h.Ea(c.description)).vp(a),c}if(u==0)return c.Ja()}switch(n){case 550:n=null,u=c.I();for(var p=c.vb(0),f=0,g=0;g<u;g++)o=new h.h,p.uc(2*g,o),a.contains(o)||(f==0&&(n=c.Ja()),f<g&&n.Gd(c,f,g),f=g+1);return 0<f&&n.Gd(c,f,u),f==0?c:n;case 1736:case 1607:return w.wy(c,a,o);default:throw h.i.Ra()}},w.prototype.Oh=function(c,a){var n=new h.h;return this.g.D(c,n),c=new h.h,this.g.D(a,c),n.compare(c)},w}();h.Vd=O}(B||(B={})),function(h){var O=function(){function w(c,a){this.Da=c,this.g=new h.hd,this.ed=new h.ja(0),this.od=a}return w.prototype.Nh=function(c,a,n){switch(a){case 0:if(c.v<n&&c.C<=n)break;return c.v>=n?1:-1;case 1:if(c.G<n&&c.H<=n)break;return c.G>=n?1:-1;case 2:if(c.v>=n&&c.C>n)break;return c.C<=n?1:-1;case 3:if(!(c.G>=n&&c.H>n))return c.H<=n?1:-1}return 0},w.prototype.vy=function(c,a){return c.K()==1736?this.xy(c,a):this.yy(c)},w.prototype.xy=function(c,a){if(this.Da.S()==0||this.Da.da()==0)return c.Ja();var n=new h.l;c.yc(n),this.Y=this.g.Ib(c);var o=new h.l,u=new h.l,p=new h.h,f=new h.h,g=[0,0,0,0,0,0,0,0,0],b=[0,0,0,0,0,0,0,0,0],S=new h.zb,$=new h.ja(0);$.Jb(256);for(var E=!1,C=0;!E&&4>C;C++){var k=!1,L=(1&C)!=0,N=0;switch(C){case 0:N=this.Da.v,k=n.v<=N&&n.C>=N;break;case 1:N=this.Da.G,k=n.G<=N&&n.H>=N;break;case 2:N=this.Da.C,k=n.v<=N&&n.C>=N;break;case 3:N=this.Da.H,k=n.G<=N&&n.H>=N}if(k)for(E=!0,k=this.g.Ob(this.Y);k!=-1;){var U=!0,H=-1,j=-1,K=this.g.Ya(k),se=K;do{var ne=this.g.cc(se);ne==null&&(ne=S,this.g.D(se,p),ne.Ec(p),this.g.D(this.g.V(se),f),ne.Rc(f)),ne.A(o);var pe=this.Nh(o,C,N),ce=0,_e=-1;if(pe==-1){ce=0<(ne=ne.fq(L,N,g,b))?this.g.HX(se,b,ne):0,ce+=1;var Oe=se,Ce=this.g.V(Oe);for(ne=0;ne<ce;ne++){if(this.g.D(Oe,p),this.g.D(Ce,f),(_e=this.g.cc(Oe))==null&&((_e=S).Ec(p),_e.Rc(f)),_e.A(u),(_e=this.Nh(u,C,N))==-1){if(L)(_e=Math.abs(p.y-N))<(st=Math.abs(f.y-N))?(p.y=N,this.g.mf(Oe,p)):(f.y=N,this.g.mf(Ce,f));else{_e=Math.abs(p.x-N);var st=Math.abs(f.x-N);_e<st?(p.x=N,this.g.mf(Oe,p)):(f.x=N,this.g.mf(Ce,f))}(_e=this.g.cc(Oe))==null&&((_e=S).Ec(p),_e.Rc(f)),_e.A(u),_e=this.Nh(u,C,N)}st=H,H=_e,j==-1&&(j=H),st==0&&H==1||st==1&&H==0||st!=0||H!=0||$.add(Oe),H==1&&(U=E=!1),_e=Oe=Ce,Ce=this.g.V(Ce)}}if(ce==0&&(st=H,H=pe,j==-1&&(j=H),st==0&&H==1||st==1&&H==0||st!=0||H!=0||$.add(se),H==1&&(U=E=!1),_e=this.g.V(se)),se=_e,256<=$.size){for(ne=1,pe=$.size-1;ne<pe;ne++)ce=$.get(ne),this.g.qd(ce,!1);$.set(1,$.Gc()),$.Dh(2)}}while(se!=K);if(!U)for(j==0&&H==0&&$.add(K),ne=0,pe=$.size;ne<pe;ne++)ce=$.get(ne),this.g.qd(ce,!1);$.clear(!1),k=U||this.g.Ka(k)==0?this.g.ar(k):this.g.Sb(k)}}return E?c.Ja():(this.AB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},w.prototype.yy=function(c){var a=new h.l,n=new h.l,o=[0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0],p=new h.jg,f=c,g=new h.l;c.yc(g);for(var b=new h.h,S=new h.h,$=null,E=null,C=0;4>C;C++){var k=!1,L=(1&C)!=0,N=0;switch(C){case 0:N=this.Da.v,k=g.v<=N&&g.C>=N;break;case 1:N=this.Da.G,k=g.G<=N&&g.H>=N;break;case 2:N=this.Da.C,k=g.v<=N&&g.C>=N;break;case 3:N=this.Da.H,k=g.G<=N&&g.H>=N}if(k)for(k=f,f=c.Ja(),(k=k.Ha()).aj();k.ab();)for(var U,H=!0;k.Ia();){var j=k.ia();j.A(a);var K=this.Nh(a,C,N);if(K==-1){if(0<(K=j.fq(L,N,o,u))){var se=0;j.$p(b);for(var ne=0;ne<=K;ne++)if(se!=(U=ne<K?u[ne]:1)){j.dh(se,U,p);var pe=p.get();pe.Ec(b),ne<K&&(L?(S.x=o[ne],S.y=N):(S.x=N,S.y=o[ne]),pe.Rc(S)),pe.A(n);var ce=this.Nh(n,C,N);ce==-1&&($==null&&($=new h.h),E==null&&(E=new h.h),pe.$p($),pe.Vr(E),L?(se=Math.abs($.y-N))<(ce=Math.abs(E.y-N))?($.y=N,pe.Ec($)):(E.y=N,pe.Rc(E)):(se=Math.abs($.x-N))<(ce=Math.abs(E.x-N))?($.x=N,pe.Ec($)):(E.x=N,pe.Rc(E)),pe.A(n),ce=this.Nh(n,C,N)),pe.Vr(b),se=U,(U=ce)==1?(f.pc(pe,H),H=!1):H=!0}}}else(U=K)==1?(f.pc(j,H),H=!1):H=!0}}return f},w.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var c=new h.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++,n=this.g.V(n))this.g.D(n,c),(this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(c){for(var a=new h.h,n=new h.h,o=null,u=null,p=h.P.mg(2048,0),f=this.g.Ob(this.Y);f!=-1;f=this.g.Sb(f)){var g=this.g.Ya(f),b=g;do{var S=this.g.V(b);this.g.D(b,a);var $=-1;if(a.x==this.Da.v?(this.g.D(S,n),n.x==this.Da.v&&($=1)):a.x==this.Da.C&&(this.g.D(S,n),n.x==this.Da.C&&($=1)),a.y==this.Da.G?(this.g.D(S,n),n.y==this.Da.G&&($=0)):a.y==this.Da.H&&(this.g.D(S,n),n.y==this.Da.H&&($=0)),$!=-1){if(o==null&&(o=new h.h),u==null&&(u=new h.h),o.N(a),u.na(0,0),$==0){var E=a.x-this.Da.v;u.x=h.mc.sign(n.x-a.x),o.x=c*h.mc.En(Math.floor(Math.abs(E/c)),E)+this.Da.v,0>o.x&&(o.x+=c)}else E=a.y-this.Da.G,u.y=h.mc.sign(n.y-a.y),o.y=c*h.mc.En(Math.floor(Math.abs(E/c)),E)+this.Da.G,0>o.y&&(o.y+=c);E=$!=0?n.y-a.y:n.x-a.x;var C=Math.abs(E);if(65536<C/c)throw h.i.ga("internal error");if(0<C){C=h.P.truncate(C/c)+2,p.length<C&&(p=h.P.mg(C));for(var k=C=0;;k++){var L=new h.h;if(L.x=o.x+u.x*k*c,L.y=o.y+u.y*k*c,1<=(L=($!=0?L.y-a.y:L.x-a.x)/E))break;0>=L||(p[C]=L,C++)}C!=0&&this.g.Wl(b,p,C)}}b=S}while(b!=g)}},w.prototype.Xl=function(c,a){for(var n=-1,o=new h.h,u=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var f=this.g.Ya(p),g=0,b=this.g.Ka(p);g<b;g++){var S=this.g.V(f);this.g.D(f,o),(c?o.y==a:o.x==a)&&(this.g.D(S,o),(c?o.y==a:o.x==a)&&(n==-1&&(n=this.g.Hd()),u==null&&(u=new h.ja(0)).Jb(100),this.g.Qa(f,n)!=1&&(u.add(f),this.g.Sa(f,n,1)),this.g.Qa(S,n)!=1&&(u.add(S),this.g.Sa(S,n,1)))),f=S}if(n!=-1&&this.g.Ud(n),!(u==null||3>u.size)){var $=this;u.Wd(0,u.size,function(ne,pe){return $.Oh(ne,pe)}),n=new h.h,p=new h.h,f=new h.h,p.Sc();var E=-1;g=new h.ja(0),b=new h.ja(0),S=null;for(var C=this.g.Hd(),k=this.g.Hd(),L=0,N=u.size;L<N;L++){var U=u.get(L);if(this.g.D(U,o),!o.rb(p)){if(E!=-1){for(var H=E;H<L;H++){E=u.get(H);var j=this.g.V(E);U=this.g.Na(E);var K=!1;this.g.D(j,n),0>p.compare(n)&&(c?n.y==a:n.x==a)&&(g.add(E),K=!0,this.g.Sa(E,k,1)),this.g.D(U,n),0>p.compare(n)&&(c?n.y==a:n.x==a)&&(K||g.add(E),this.g.Sa(E,C,1))}for(H=0,K=g.size;H<K;H++){if(E=g.get(H),U=this.g.Qa(E,C),j=this.g.Qa(E,k),U==1&&(U=this.g.Na(E),this.g.D(U,f),!f.rb(o))){S==null&&(S=[]);var se=h.h.ub(p,f);S[0]=h.h.ub(f,o)/se,S[0]==0?S[0]=2220446049250313e-31:S[0]==1&&(S[0]=.9999999999999998),this.g.Wl(U,S,1),U=this.g.Na(E),this.g.mf(U,o),b.add(U),this.g.Sa(U,C,1),this.g.Sa(U,k,-1)}j==1&&(j=this.g.V(E),this.g.D(j,f),f.rb(o)||(S==null&&(S=[]),se=h.h.ub(p,f),S[0]=h.h.ub(p,o)/se,S[0]==0?S[0]=2220446049250313e-31:S[0]==1&&(S[0]=.9999999999999998),this.g.Wl(E,S,1),U=this.g.V(E),this.g.mf(U,o),b.add(U),this.g.Sa(U,C,-1),this.g.Sa(U,k,1)))}E=g,g=b,(b=E).clear(!1)}E=L,p.N(o)}}this.g.Ud(C),this.g.Ud(k)}},w.prototype.Pl=function(c,a){for(var n=new h.h,o=null,u=-1,p=0,f=this.ed.size;p<f;p++){var g=this.ed.get(p);if(g!=-1){var b=this.g.V(g);this.g.D(g,n),(c?n.y==a:n.x==a)&&(this.g.D(b,n),(c?n.y==a:n.x==a)&&(u==-1&&(u=this.g.Hd()),o==null&&(o=new h.ja(0)).Jb(100),this.g.Qa(g,u)!=-2&&(o.add(g),this.g.Sa(g,u,-2)),this.g.Qa(b,u)!=-2&&(o.add(b),this.g.Sa(b,u,-2))))}}if(o==null)u!=-1&&this.g.Ud(u);else{var S=this;for(o.Wd(0,o.size,function(pe,ce){return S.Oh(pe,ce)}),p=0,f=o.size;p<f;p++){var $=o.get(p);this.g.Sa($,u,p)}g=new h.h,(b=new h.h).Sc();var E=-1;for(p=0,f=o.size;p<f;p++)if(($=o.get(p))!=-1&&(this.g.D($,n),!n.rb(b))){if(E!=-1)for(;;){$=!1;for(var C=1<p-E?p-1:p,k=E;k<C;k++){var L=o.get(k);if(L!=-1){var N=-1,U=this.g.V(L);this.g.D(U,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(N=U),U=-1;var H=this.g.Na(L);if(this.g.D(H,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(U=H),N!=-1&&U!=-1)this.Mh(L,o,u),this.g.qd(L,!1),this.Mh(N,o,u),this.g.qd(N,!1),$=!0;else if(N!=-1||U!=-1){for(H=k+1;H<p;H++){var j=o.get(H);if(j!=-1){var K=this.g.V(j),se=-1;this.g.D(K,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(se=K),K=this.g.Na(j);var ne=-1;if(this.g.D(K,g),0>b.compare(g)&&(c?g.y==a:g.x==a)&&(ne=K),se!=-1&&ne!=-1){this.Mh(j,o,u),this.g.qd(j,!1),this.Mh(se,o,u),this.g.qd(se,!1),$=!0;break}if(N!=-1&&ne!=-1){this.At(o,L,N,j,ne,u),$=!0;break}if(U!=-1&&se!=-1){this.At(o,j,se,L,U,u),$=!0;break}}}if($)break}}}if(!$)break}E=p,b.N(n)}this.g.Ud(u)}},w.prototype.Mh=function(c,a,n){n=this.g.Qa(c,n),a.set(n,-1),n=this.g.Qa(c,this.li),this.ed.set(n,-1),(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},w.prototype.At=function(c,a,n,o,u,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,u),this.g.Cc(u,n),this.Mh(o,c,p),this.g.oi(o,!1),this.Mh(u,c,p),this.g.oi(u,!0)},w.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var n=this.ed.get(c);n!=-1&&this.g.cj(n,-1)}for(var o=0,u=0,p=this.g.Ob(this.Y);p!=-1;){var f=this.g.Ya(p);if(f==-1||p!=this.g.cd(f)){var g=p;p=this.g.Sb(p),this.g.Kf(g,-1),this.g.br(g)}else{n=f,g=0;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=f);this.g.fp(p,!1),this.g.Yg(p,this.g.Na(f)),this.g.Xj(p,g),u+=g,o++,p=this.g.Sb(p)}}for(c=0,a=this.ed.size;c<a;c++)if((n=this.ed.get(c))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),g=0,f=n;do this.g.cj(n,p),g++,n=this.g.V(n);while(n!=f);2>=g?(n=this.g.Qa(f,this.li),this.ed.set(n,-1),f=this.g.qd(f,!1),g==2&&(0<=(n=this.g.Qa(f,this.li))&&this.ed.set(n,-1),this.g.qd(f,!1)),g=p,this.g.Kf(g,-1),this.g.br(g)):(this.g.mn(p,!0),this.g.Xj(p,g),this.g.Kf(p,f),this.g.Yg(p,this.g.Na(f)),this.g.fp(p,!1),u+=g,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,u),c=0,a=this.g.md;a!=-1;a=this.g.ve(a))c+=this.g.I(a);this.g.XB(c)},w.wy=function(c,a,n,o){return new w(a,o).vy(c,n)},w.clip=function(c,a,n,o,u){return w.Pu(c,a,null,n,o,u)},w.Pu=function(c,a,n,o,u,p){var f=c.K();if(f==33)return u=c.D(),a.contains(u)?c:c.Ja();if(f==197)return u=new h.l,c.A(u),u.Fa(a)?(a=new h.Hh,c.copyTo(a),a.Zo(u),a):c.Ja();if(c.B())return c;if(a.B())return c.Ja();var g=new h.l;if(c.yc(g),a.contains(g))return c;if(!a.isIntersecting(g))return c.Ja();if((n!=null||isNaN(o))&&h.ua.oy(n,a,!1),!h.ba.zj(f))throw h.i.O();if((n=c.Cb)!=null&&(n=n.Hk)!=null){if((n=n.To(a))==1){if(f!=1736)throw h.i.ga("internal error");return(c=new h.Ea(c.description)).vp(a),c}if(n==0)return c.Ja()}switch(f){case 550:for(p=null,f=c.I(),n=c.vb(0),o=0,u=new h.h,g=0;g<f;g++)n.uc(2*g,u),a.contains(u)||(o==0&&(p=c.Ja()),o<g&&p.Gd(c,o,g),o=g+1);return 0<o&&p.Gd(c,o,f),o==0?c:p;case 1736:case 1607:return w.wy(c,a,u,p);default:throw h.i.ga("internal error")}},w.prototype.Oh=function(c,a){var n=new h.h;return this.g.D(c,n),c=new h.h,this.g.D(a,c),n.compare(c)},w}();h.ti=O}(B||(B={})),function(h){var O=new h.h,w=function(){function a(n,o,u,p,f){this.Rm=new h.h,this.Fk=new h.h,this.Ri=new h.h,this.g=n,this.Cw=u,this.po=p,this.Rm=o,this.Al=f,this.Fk.Sc(),this.Ri.Sc()}return a.prototype.sE=function(n){this.g.D(n,this.Fk),n=h.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var o=h.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return c.eG(n,o)},a.prototype.ez=function(n){return this.g.Qa(n,this.Al)},a.prototype.Ky=function(n,o){return this.g.D(n,this.Fk),this.g.D(o,this.Ri),c.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},a}();h.oY=function(){};var c=function(){function a(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return a.dQ=function(n,o){var u=new a;return u.g=n,u.ra=o,u.Cw=o*o,u.bw=2*o,u.po=1/u.bw,u.wO()},a.Ev=function(n,o,u,p,f){return(n-=u)*n+(o-=p)*o<=f},a.eG=function(n,o){return h.P.Vh(o,h.P.Vh(n))},a.prototype.yO=function(n,o){this.g.Hc(n,O);for(var u=(O.y-this.Rm.y)*this.po,p=h.P.truncate((O.x-this.Rm.x)*this.po),f=h.P.truncate(u),g=u=0;1>=g;g+=1)for(var b=0;1>=b;b+=1){var S=a.eG(p+g,f+b),$=this.zl.lR(S);$!=-1&&(this.rq[u]=$,this.zs[u]=S,u++)}for(p=u-1;1<=p;p--)for($=this.rq[p],f=p-1;0<=f;f--)if($==this.rq[f]){this.zs[f]=-1,p!=--u&&(this.zs[p]=this.zs[u],this.rq[p]=this.rq[u]);break}for(f=0;f<u;f++)this.zO(n,this.zs[f],O,this.rq[f],o)},a.prototype.zO=function(n,o,u,p,f){for(var g=new h.h;p!=-1;p=this.zl.zR(p)){var b=this.zl.ka(p);n==b||o!=-1&&this.g.Qa(b,this.Al)!=o||(this.g.Hc(b,g),a.Ev(u.x,u.y,g.x,g.y,this.Cw)&&f.add(p))}},a.prototype.Zm=function(n,o,u){var p=this.g.Qa(n,this.so),f=this.g.Qa(o,this.so);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,n),this.g.Sa(n,this.so,p)),f==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,f),this.g.Sa(o,this.so,-2),o=this.TT(n,o),u&&(u=this.mw.sE(n),this.g.Sa(n,this.Al,u)),o},a.RT=function(n,o,u){n.Nb(o),u=n;var p=new h.h;a.ST(n.D(),o.D(),p),u.Db(p)},a.ST=function(n,o,u){var p=n.x;n.x!=o.x&&(p=(1*n.x+1*o.x)/2);var f=n.y;n.y!=o.y&&(f=(1*n.y+1*o.y)/2),u.na(p,f)},a.prototype.TT=function(n,o){var u=new h.h;this.g.D(n,u);var p=new h.h;this.g.D(o,p);var f=this.g.YF(n),g=f+(o=this.g.YF(o)),b=0,S=u.x;u.x!=p.x&&(S=(u.x*f+p.x*o)/g,b++);var $=u.y;return u.y!=p.y&&($=(u.y*f+p.y*o)/g,b++),0<b&&this.g.Db(n,S,$),this.g.rX(n,g),b!=0},a.prototype.wO=function(){var n=this.g.gd,o=this.g.DF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.po=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new w(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new h.ZK(h.P.truncate(4*n/3),this.mw),this.zl.vW(this.g.gd),n=!1,o=this.g.md;o!=-1;o=this.g.ve(o))for(var u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,g=this.g.Ka(u);f<g;f++){var b=this.mw.sE(p);this.g.Sa(p,this.Al,b),this.zl.addElement(p,b),p=this.g.V(p)}var S=new h.ja(0);for(S.Jb(10),o=this.g.md;o!=-1;o=this.g.ve(o))for(u=this.g.Ob(o);u!=-1;u=this.g.Sb(u))for(p=this.g.Ya(u),f=0,g=this.g.Ka(u);f<g;f++){if(this.g.Qa(p,this.so)!=-2)for(b=this.g.Qa(p,this.Al),this.zl.kd(p,b);this.yO(p,S),S.size!=0;){b=!1;for(var $=0,E=S.size;$<E;$++){var C=S.get($),k=this.zl.ka(C);this.zl.wd(C),b=this.Zm(p,k,$+1==E)||b}if(n=n||b,S.clear(!1),!b)break}p=this.g.V(p)}return n&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),n},a.prototype.qN=function(){for(var n=new h.h,o=this.Ad.ke;o!=-1;o=this.Ad.lz(o)){var u=this.Ad.sc(o);for(this.g.D(this.Ad.ka(u),n),u=this.Ad.lb(u);u!=-1;u=this.Ad.lb(u))this.g.mf(this.Ad.ka(u),n)}},a}();h.$t=c}(B||(B={})),function(h){var O=function(){function w(c){c===void 0&&(c=null),this.zg=null,this.Pb=!1,this.zg=c===null?[]:c}return w.prototype.copyTo=function(c){if(c.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.zg.length;a++)c.zg.push(this.zg[a].Qf())},w.prototype.count=function(){return this.zg.length},w.prototype.add=function(c){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(c.Qf())},w.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},w.prototype.remove=function(c){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(c,1)},w.prototype.kg=function(){var c=new w;return this.copyTo(c),c},w.prototype.Qf=function(){return this.kg()},w.prototype.transform=function(c,a,n,o){if(c.length<a)throw h.i.ga("invalid Argument");var u=n;for(n=0;n<this.zg.length;n++){var p=this.zg[n];if(p.sm()!=null){var f=p.Wn,g=f?1:0,b=f?p.sm().getGeogcs2():p.sm().getGeogcs1();if(b=u/(b=b.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(b-1))for(u=0;u<a;u++)c[u][0]*=b,c[u][1]*=b;h.HC.geogToGeog(p.sm(),a,c,null,g),u=(f?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(b=u/o,3552713678800501e-30<Math.abs(b-1))for(u=0;u<a;u++)c[u][0]*=b,c[u][1]*=b;return a},w.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof w)||this.zg.length!=c.zg.length)return!1;for(var a=0;a<this.zg.length;a++)if(!this.zg[a].Nb(c.zg[a]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var c="CGT ("+this.count()+") ",a=0,n=this.count();a<n;++a)c+=this.zg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c},w.create=function(){return new w},w}();h.rC=O}(B||(B={})),function(h){var O,w=Math.PI,c=2*Math.PI,a=Math.PI/2,n=function(){function p(){}return p.OO=function(f,g){var b=new p;return b.x=f,b.y=g,b.type=0,b.Wh=0,b},p.cl=function(f){var g=new p;return g.x=f.x,g.y=f.y,g.type=0,g.Wh=0,g},p.NO=function(f){var g=new p;return g.x=f.x,g.y=f.y,g.type=f.type,g.Wh=f.Wh,g},p.Qd=function(f,g,b){var S=new p;return S.x=f.x+g*Math.cos(b),S.y=f.y+g*Math.sin(b),S.type=f.type,S.Wh=f.Wh,S},p.Ru=function(f,g){var b=new p;return b.x=.5*(f.x+g.x),b.y=.5*(f.y+g.y),b.type=f.type,b.Wh=f.Wh,b},p.OE=function(f,g){var b=new p;return b.x=f.x+.001*(g.x-f.x),b.y=f.y+.001*(g.y-f.y),b.type=f.type,b.Wh=f.Wh,b},p}(),o=function(){};(O=h.aL||(h.aL={}))[O.Round=0]="Round",O[O.Bevel=1]="Bevel",O[O.Miter=2]="Miter",O[O.Square=3]="Square";var u=function(){function p(f){this.IA=this.Zb=this.xg=null,this.od=f}return p.W=function(f,g,b,S,$,E){if(f==null||1>f.Eb())throw h.i.O();return g==0||f.B()?f:((E=new p(E)).mo=f,E.La=g,E.ra=$,E.Mi=b,E.xA=S,E.Qx())},p.prototype.$L=function(){var f=this.mo,g=f.bc(),b=f.xc(),S=new h.h;return S.vc(b,g),S.normalize(),S.Jv(),S.scale(this.La),g.add(S),b.add(S),S=f.Ja(),f.Ec(g),f.Rc(b),S},p.prototype.ZL=function(){var f=this.mo;if(0<this.La&&this.Mi!=2){var g=new h.Ea;return g.bd(f,!1),this.mo=g,this.Qx()}return(f=new h.Hh(f.aa)).X(this.La,this.La),f},p.prototype.oJ=function(f,g,b,S){return(g.x-f.x)*(S.x-b.x)+(g.y-f.y)*(S.y-b.y)},p.prototype.hc=function(f,g){if(g===void 0)this.Zb.push(f),this.gf++;else if(this.gf==0)this.hc(f);else{var b=this.Dw,S=this.xg[g==0?b-1:g-1],$=this.xg[g],E=this.oJ(S,$,this.Zb[this.gf-1],f);0<E?this.hc(f):0>E&&(0<this.oJ(S,$,$,this.Zb[this.gf-1])?($=this.xg[g==0?b-2:g==1?b-1:g-2],b=n.Qd(S,this.La,Math.atan2(S.y-$.y,S.x-$.x)-a),this.Zb[this.gf-1]=b,this.Mi==1||this.Mi==2?(b=n.Ru(b,S),this.hc(b),b=n.Qd(S,this.La,this.Lv+a),(S=n.Ru(b,S)).type|=256,this.hc(S)):(b=n.Qd(S,this.La,this.Lv+a)).type|=256,this.hc(b),this.hc(f,g)):(b=n.Qd($,this.La,this.Lv+a),this.hc(b),this.Mi==1||this.Mi==2?(b=n.Ru(b,$),this.hc(b),b=n.Qd($,this.La,this.Wz-a),(S=n.Ru(b,$)).type|=256,this.hc(S)):(b=n.Qd($,this.La,this.Wz-a)).type|=256,this.hc(b)))}},p.prototype.hE=function(){var f,g=this.Dw;this.gf=0;var b=.5*this.ra,S=0,$=0;for(f=0;f<g;f++){var E=this.xg[f],C=f==0?this.xg[g-1]:this.xg[f-1],k=f==g-1?this.xg[0]:this.xg[f+1],L=C.x-E.x,N=C.y-E.y,U=k.x-E.x,H=k.y-E.y,j=Math.atan2(N,L),K=Math.atan2(H,U);if(this.Lv=j,this.Wz=K,f==0&&(S=j,$=K),L=L*H-U*N,N=K,K<j&&(K+=c),0<L*this.La)this.Mi==1||this.Mi==2?(j=n.Qd(E,this.La,j+a),this.hc(j),j=n.OE(E,j),this.hc(j),j=n.Qd(E,this.La,K-a),(E=n.OE(E,j)).type|=256,this.hc(E),this.hc(j)):(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),j=n.Qd(E,L,.5*(j+K)),this.hc(j,f));else if((512&E.type)!=0){for(L=1-b/Math.abs(this.La),C=1,k=0>this.La?-w:w,-1<L&&1>L&&(.017453292519943295>(N=2*Math.acos(L))&&(N=.017453292519943295),1<(C=h.P.truncate(w/N+1.5))&&(k/=C)),N=j+a,j=n.Qd(E,this.La,N),f==0&&(j.type|=1024),this.hc(j,f),L=this.La/Math.cos(k/2),N+=k/2,(j=n.Qd(E,L,N)).type|=1024,this.hc(j);0<--C;)N+=k,(j=n.Qd(E,L,N)).type|=1024,this.hc(j);(j=n.Qd(E,this.La,K-a)).type|=1024,this.hc(j)}else if(this.Mi==1)j=n.Qd(E,this.La,j+a),this.hc(j,f),j=n.Qd(E,this.La,K-a),this.hc(j);else if(this.Mi==0)for(L=1-b/Math.abs(this.La),C=1,k=K-a-(j+a),-1<L&&1>L&&(.017453292519943295>(N=2*Math.acos(L))&&(N=.017453292519943295),1<(C=h.P.truncate(Math.abs(k)/N+1.5))&&(k/=C)),L=this.La/Math.cos(.5*k),N=j+a+.5*k,j=n.Qd(E,L,N),this.hc(j,f);0<--C;)N+=k,j=n.Qd(E,L,N),this.hc(j);else this.Mi==2?(L=C.x-E.x,N=C.y-E.y,.99999999<(C=(L*(U=k.x-E.x)+N*(H=k.y-E.y))/Math.sqrt(L*L+N*N)/Math.sqrt(U*U+H*H))?(j=n.Qd(E,1.4142135623730951*this.La,K-.25*w),this.hc(j,f),j=n.Qd(E,1.4142135623730951*this.La,K+.25*w),this.hc(j)):(C=Math.abs(this.La/Math.sin(.5*Math.acos(C))))>(k=Math.abs(this.xA*this.La))?(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),j=n.Qd(E,L,.5*(j+K)),K=h.h.construct(j.x,j.y),j=h.h.construct(E.x,E.y),(E=new h.h).vc(K,j),(K=new h.h).BW(k/E.length(),E,j),j=(C-k)*Math.abs(this.La)/Math.sqrt(C*C-this.La*this.La),0<this.La?E.Jv():E.cr(),E.scale(j/E.length()),(j=new h.h).add(K,E),(C=new h.h).vc(K,E),j=n.cl(j),this.hc(j,f),j=n.cl(C),this.hc(j)):(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),j=n.Qd(E,L,.5*(j+K)),this.hc(j,f))):(K=N,0<this.La?(K>j&&(K-=c),C=j-K<a):(K<j&&(K+=c),C=K-j<a),C?(N=0>(L=1.4142135623730951*this.La)?j+.25*w:j+.75*w,j=n.Qd(E,L,N),this.hc(j,f),N=0>L?K-.25*w:K-.75*w,j=n.Qd(E,L,N),this.hc(j)):(L=.5*(K-j),L=this.La/Math.abs(Math.sin(L)),K<j&&(K+=c),j=n.Qd(E,L,(j+K)/2),this.hc(j,f)))}return this.Lv=S,this.Wz=$,this.hc(this.Zb[0],0),E=n.NO(this.Zb[this.gf-1]),this.Zb[0]=E,this.rW()},p.prototype.Cu=function(f,g){if(!(2>g))for(var b=0;b<g;b++){var S=this.Zb[f+b];b!=0?this.IA.Ei(h.h.construct(S.x,S.y)):this.IA.Nt(h.h.construct(S.x,S.y))}},p.prototype.aM=function(f,g,b){var S=f.Ca(g),$=f.Wc(g);if(this.Zb=[],this.IA=b,f.ec(g)){for(g=f.Oa(S);f.Oa($-1).rb(g);)$--;if(2<=$-S){for(this.Dw=$-S,this.xg=[],g=S;g<$;g++)this.xg.push(n.cl(f.Oa(g)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(g=f.Oa(S);S<$&&f.Oa(S+1).rb(g);)S++;for(g=f.Oa($-1);S<$&&f.Oa($-2).rb(g);)$--;if(2<=$-S){for(this.Dw=2*($-S)-2,this.xg=[],(b=n.cl(f.Oa(S))).type|=1536,this.xg.push(b),g=S+1;g<$-1;g++)b=n.cl(f.Oa(g)),this.xg.push(b);for((b=n.cl(f.Oa($-1))).type|=512,this.xg.push(b),g=$-2;g>=S+1;g--)(b=n.cl(f.Oa(g))).type|=1024,this.xg.push(b);if(this.hE())if(2<=this.Zb.length){for(f=-1,($=(1024&this.Zb[this.gf-1].type)!=0)||(f=0),g=1;g<this.gf;g++)(S=(1024&this.Zb[g].type)!=0)?$||1<($=g-1)-f+1&&this.Cu(f,$-f+1):$&&(f=g-1),$=S;$||1<($=this.gf-1)-f+1&&this.Cu(f,$-f+1)}else f=0,$=this.gf-1,0<=f&&1<=$-f&&this.Cu(f,$-f+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.rW=function(){for(var f=!1,g=0;g<this.gf;g++){var b=this.Zb[g];b.sh=g+1,b.uh=g-1,this.Zb[g]=b}for((b=this.Zb[0]).uh=this.gf-2,this.Zb[0]=b,(b=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=b,g=b=0;g<this.gf;g++)if((256&this.Zb[b].type)!=0){var S=this.BP(b);if(S==-1){f=!0;break}b=S}else b=this.Zb[b].sh;return!f&&(this.LO(b),!0)},p.prototype.BP=function(f){for(var g,b,S=this.gf-1,$=f,E=1;E<=S-2;E++){g=$=this.Zb[$].sh,b=f;for(var C=1;C<=E;C++){if(b=this.Zb[b].uh,(256&this.Zb[b].type)==0&&(256&this.Zb[g].type)==0){var k=this.bS(b,g);if(k!=-1)return k}g=this.Zb[g].uh}}return-1},p.prototype.bS=function(f,g){var b=this.Zb[this.Zb[f].uh],S=this.Zb[f],$=this.Zb[this.Zb[g].uh],E=this.Zb[g];if(!this.EW(b,S,$,E))return-1;var C=new o;return this.sQ(b,S,$,E,C)&&!C.XD&&h.P.XJ((S.x-b.x)*(E.y-$.y)-(S.y-b.y)*(E.x-$.x))!=h.P.XJ(this.La)?(b=this.Zb[f].uh,C.cn.type=S.type,C.cn.sh=g,C.cn.uh=b,this.Zb[f]=C.cn,C.cn=this.Zb[g],C.cn.uh=f,this.Zb[g]=C.cn,g):-1},p.prototype.EW=function(f,g,b,S){return Math.max(f.x,g.x)>=Math.min(b.x,S.x)&&Math.max(b.x,S.x)>=Math.min(f.x,g.x)&&Math.max(f.y,g.y)>=Math.min(b.y,S.y)&&Math.max(b.y,S.y)>=Math.min(f.y,g.y)},p.prototype.sQ=function(f,g,b,S,$){$.XD=!1;var E=(g.y-f.y)*(S.x-b.x)-(g.x-f.x)*(S.y-b.y),C=(b.y-f.y)*(g.x-f.x)-(b.x-f.x)*(g.y-f.y);if(0<=(E=E==0?2:C/E)&&1>=E){var k=E;if(E=(S.y-b.y)*(g.x-f.x)-(S.x-b.x)*(g.y-f.y),C=(f.y-b.y)*(S.x-b.x)-(f.x-b.x)*(S.y-b.y),0<=(E=E==0?2:C/E)&&1>=E)return $.cn=n.OO(f.x+E*(g.x-f.x),f.y+E*(g.y-f.y)),$.cn.Wh=b.Wh+k*(S.Wh-b.Wh),k!=0&&k!=1||E!=0&&E!=1||($.XD=!0),$.RY=E,$.SY=k,!((k==0||k==1)&&0<E&&1>E||(E==0||E==1)&&0<k&&1>k)}return!1},p.prototype.LO=function(f){for(;this.Zb[f].uh<f;)f=this.Zb[f].uh;var g=0,b=f;do b=this.Zb[b],this.Zb[g]=b,b=b.sh,g++;while(b!=f);this.Zb[g]=this.Zb[0],this.gf=g+1},p.prototype.VC=function(f){var g=this.mo,b=g.Ha();if(b!=null){b.aj();for(var S=-1;b.ab();)S++,this.aM(g,S,f)}},p.prototype.Qx=function(){var f=this.mo.K();return f==322?this.$L():f==197?this.ZL():h.ba.zd(f)?((f=new h.Ua).pc(this.mo,!0),this.mo=f,this.Qx()):f==1607?(f=new h.Ua,this.VC(f),f):f==1736?(f=new h.Ea,this.VC(f),f):null},p}();h.DK=u}(B||(B={})),function(h){var O=function(){function n(o){this.sk=o}return n.prototype.D=function(o,u){this.sk.g.D(o,u)},n.prototype.wd=function(o){var u=this.sk.Ga.ka(o);this.sk.Ga.wd(o,-1),this.sk.g.qd(u,!1)},n}(),w=function(){function n(o){this.sk=o}return n.prototype.D=function(o,u){this.sk.DT.D(o,u)},n.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},n}(),c=function(){function n(o){this.sk=o}return n.prototype.D=function(o,u){u.N(this.sk.GT[o])},n.prototype.wd=function(o){this.sk.Ga.wd(o,-1)},n}(),a=function(){function n(o){o===void 0?(this.Ga=new h.$j,this.Ga.Ee(20),this.g=new h.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new O(this)):o instanceof Array?(this.Ga=new h.$j,this.Ga.Ee(20),this.GT=o,this.Zh=new c(this)):(this.Ga=new h.$j,this.Ga.Ee(20),this.DT=o,this.Zh=new w(this))}return n.prototype.Ib=function(o){var u=o.K();if(h.Fx.zj(u))this.eN(o);else if(h.Xk.zd(u))this.jN(o);else if(u==197)this.bN(o);else{if(u!=33)throw h.i.O("invalid shape type");this.iN(o)}},n.prototype.YQ=function(){var o=new h.Ta,u=this.Ga.sc(-1),p=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(u),o),p.nf(o),u=this.Ga.lb(u);u!=-1;u=this.Ga.lb(u))this.g.Xi(this.Ga.ka(u),o),p.lineTo(o);return p},n.MO=function(o){var u=new n(o),p=o.I(),f=1,g=new h.h,b=new h.h,S=new h.h;for(o.D(0,g);o.D(f,b),b.Mz(g)&&f<p-1;)f++;for(u.Ga.addElement(0,-1),u.Ga.zn(f),p=f+1;p<o.I();p++)o.D(p,S),(f=u.kC(S))!=-1&&u.Ga.Uj(f,p);for(S=new h.Ta,f=u.Ga.sc(-1),p=new h.Ea(o.description),o.we(u.Ga.ka(f),S),p.nf(S),f=u.Ga.lb(f);f!=-1;f=u.Ga.lb(f))o.we(u.Ga.ka(f),S),p.lineTo(S);return p},n.construct=function(o,u,p){for(var f=new n(o),g=1,b=o[0];o[g].Mz(b)&&g<u-1;)g++;for(f.Ga.addElement(0,-1),f.Ga.zn(g),g+=1;g<u;g++)(b=f.kC(o[g]))!=-1&&f.Ga.Uj(b,g);for(o=0,u=f.Ga.sc(-1);u!=-1;u=f.Ga.lb(u))p[o++]=f.Ga.ka(u);return o},n.EG=function(o,u){var p=o.Ca(u),f=o.Wc(u);if(u=!o.ec(u)&&o.Pn(u),o=o.vb(0),f*=2,u&&(f-=2),6>f-(p*=2))return!0;u=new h.h;var g=new h.h,b=new h.h;o.uc(p,u),o.uc(p+2,g),o.uc(p+4,b);var S=n.Yu(g,b,u);if(S.rs()||!n.wm(S.value()))return!1;var $=h.h.construct(g.x,g.y),E=new h.h;for(p+=6;p<f;p+=2)if(E.N(g),g.N(b),o.uc(p,b),(S=n.Yu(g,b,u)).rs()||!n.wm(S.value())||(S=n.Yu($,b,u)).rs()||!n.wm(S.value())||(S=n.Yu(g,b,E)).rs()||!n.wm(S.value()))return!1;return!0},n.prototype.eN=function(o){for(var u=new h.Ta,p=new h.h,f=0;f<o.I();f++){o.D(f,p);var g=this.Er(p);if(g!=-1){o.we(f,u);var b=this.g.hc(this.Us,u);this.Ga.Uj(g,b)}}},n.prototype.bN=function(o){for(var u=new h.Ta,p=new h.h,f=0;4>f;f++){o.hB(f,p);var g=this.Er(p);if(g!=-1){o.If(f,u);var b=this.g.hc(this.Us,u);this.Ga.Uj(g,b)}}},n.prototype.jN=function(o){var u=new h.Ta,p=o.bc();if((p=this.Er(p))!=-1){o.Vo(u);var f=this.g.hc(this.Us,u);this.Ga.Uj(p,f)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Ro(u),o=this.g.hc(this.Us,u),this.Ga.Uj(p,o))},n.prototype.iN=function(o){var u=o.D();(u=this.Er(u))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(u,o))},n.prototype.Er=function(o){var u=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(u=this.Ga.zn(-5)),u}return this.kC(o)},n.prototype.kC=function(o){var u=-1;do{var p=this.Ga.sc(-1),f=this.Ga.Gc(-1),g=this.Ga.ka(p),b=this.Ga.ka(f),S=new h.h,$=new h.h;if(this.Zh.D(g,S),this.Zh.D(b,$),g=h.h.Wq($,o,S),n.wm(g))u=this.Ga.zn(-1),(S=this.iC(o,f,p))!=p&&this.jC(o,p,this.Ga.xe(S));else if(n.xG(g)){$=this.Ga.uv(-1);var E=this.Ga.sc(-1),C=this.Ga.Gc(-1);for(g=new h.h,b=new h.h;E!=this.Ga.xe(C);){var k=this.Ga.ka($);this.Zh.D(k,g),k=h.h.Wq(g,o,S),n.xG(k)?(C=$,$=this.Ga.nl($)):(E=$,$=this.Ga.Zp($))}if($=C,S=E,k=this.Ga.ka($),E=this.Ga.ka(S),this.Zh.D(k,g),this.Zh.D(E,b),S!=p&&(g=h.h.Wq(b,o,g),!n.wm(g)))continue;u=this.Ga.Bu(S,$,-2,!1),this.jC(o,$,f),this.iC(o,S,p)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec($),this.tb.Rc(S),0>(S=this.tb.ge(o,!0))?(S=this.Ga.xe(f),this.Ga.wd(f,-1),u=this.Ga.zn(-3),this.iC(o,S,p)):1<S&&(S=this.Ga.lb(p),this.Ga.wd(p,-1),u=this.Ga.Bu(-1,S,-3,!1),this.jC(o,S,f))}while(0);return u},n.prototype.jC=function(o,u,p){if(u!=p){var f=this.Ga.ka(u),g=this.Ga.lb(u),b=new h.h,S=new h.h;for(this.Zh.D(f,b);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(g),S),f=h.h.Wq(S,o,b),!n.wm(f));)f=u,u=g,b.N(S),g=this.Ga.lb(u),this.Zh.wd(f)}},n.prototype.iC=function(o,u,p){if(u==p)return p;var f=this.Ga.ka(u),g=this.Ga.xe(u),b=new h.h,S=new h.h;for(this.Zh.D(f,b);u!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(g),S),f=h.h.Wq(b,o,S),!n.wm(f));)f=u,u=g,b.N(S),g=this.Ga.xe(u),this.Zh.wd(f);return u},n.Yu=function(o,u,p){var f=new h.Xb;f.set(u.x),f.sub(o.x);var g=new h.Xb;g.set(p.y),g.sub(o.y);var b=new h.Xb;return b.set(u.y),b.sub(o.y),(u=new h.Xb).set(p.x),u.sub(o.x),f.Bg(g),b.Bg(u),f.sub(b),f},n.wm=function(o){return 0>o},n.xG=function(o){return 0<o},n}();h.au=a}(B||(B={})),function(h){var O=function(){function w(c){this.g=null,this.oH=!0,this.od=c}return w.uU=function(c,a,n){return c=h.ua.Gr(c),h.$t.Ev(a.Ng(),a.kh(),n.Ng(),n.kh(),h.mc.ox(c))},w.xO=function(c,a){var n=new h.Ta;return h.$t.RT(c,a,n),n},w.W=function(c,a,n,o){return(n=new w(n)).g=c,n.ra=a,n.oH=o,n.zM()},w.prototype.iM=function(c){return h.$t.dQ(this.g,c)},w.prototype.nM=function(c){return h.bu.W(this.g,c,this.od)},w.prototype.zM=function(){var c=this.ra,a=h.ua.Gr(c),n=1.00001*(c=h.ua.mN(c));c*=1.000001;for(var o=!1,u=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,f=this.g.eS();;p++){if(p>u)throw h.i.ga("Internal Error: max number of iterations exceeded");var g=this.iM(a);if(o=o||g,this.oH&&(g=this.g.Ip(a,!0,!1)!=0,o=o||g),g=!1,(p==0||f||h.bu.fI(!0,this.g,c,null,this.od))&&(g=this.nM(n),o=o||g),!g)break;h.op.Bp(this.od)}return o},w}();h.Vk=O}(B||(B={})),function(h){var O=function(){function c(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return c.prototype.wv=function(a,n){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,n))return null;o=n}return o},c.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||(4095&this.$s)==0)&&(this.$s=0,h.op.Bp(this.Vb))},c.prototype.iP=function(){var a=this.g.$q(!1),n=!1,o=new h.zb,u=new h.zb,p=new h.l;p.Pa();var f=new h.l;f.Pa();for(var g=new h.Ta,b=new h.OC,S=a.next();S!=-1;S=a.next()){h.op.Bp(this.Vb);var $=null,E=!1;if(!h.ba.Tn(this.g.jc(a.ek))){if(($=this.wv(S,o))==null)continue;if($.A(p),p.X(this.ra,this.ra),$.Di(this.ra)){if(!$.Di(0))continue;E=!0,$=null}}var C=this.g.$q(a),k=C.next();for(k!=-1&&(k=C.next());k!=-1;k=C.next()){var L=null,N=!1;if(!h.ba.Tn(this.g.jc(C.ek))){if((L=this.wv(k,u))==null)continue;if(L.A(f),L.Di(this.ra)){if(!L.Di(0))continue;N=!0,L=null}}var U=0,H=0;if($!=null&&L!=null)p.CG(f)&&(b.Qo($),b.Qo(L),b.Fa(this.ra,!1),0<(U=b.ql(0))+(H=b.ql(1))&&(this.g.lr(S,b,0,!0),this.g.lr(k,b,1,!0)),b.clear());else if($!=null){var j=new h.h;if(this.g.D(k,j),p.contains(j)){if(b.Qo($),this.g.Xi(k,g),b.Fz(this.ra,g,!1),0<(U=b.ql(0)))if(this.g.lr(S,b,0,!0),N){for(N=-1,j=this.g.V(k);j!=-1&&j!=k&&(N=j,(L=this.wv(j,u))!=null&&L.Di(0));j=this.g.V(j));for(j=k;j!=-1&&(this.g.Fh(j,b.Cf),j!=N);j=this.g.V(j));}else this.g.Fh(k,b.Cf);b.clear()}}else{if(L==null)continue;if(j=new h.h,this.g.D(S,j),f.X(this.ra,this.ra),f.contains(j)){if(b.Qo(L),this.g.Xi(S,g),b.Fz(this.ra,g,!1),0<(H=b.ql(0)))if(this.g.lr(k,b,0,!0),E){for(N=-1,j=this.g.V(S);j!=-1&&j!=S&&(N=j,(L=this.wv(j,u))!=null&&L.Di(0));j=this.g.V(j));for(j=S;j!=-1&&(this.g.Fh(j,b.Cf),j!=N);j=this.g.V(j));}else this.g.Fh(S,b.Cf);b.clear()}}if(U+H!=0){if(U!=0){if(($=this.g.cc(S))==null){if(!this.g.fd(S,o))continue;$=o,o.A(p)}else $.A(p);if($.Di(this.ra))break}n=!0}}}return n},c.prototype.jP=function(){return this.LU()},c.prototype.LU=function(){return new h.MC().LX(this.g,this.ra)},c.prototype.gI=function(){var a=!1;this.Nc==null&&(this.Nc=new h.$j);var n=new h.ja(0);n.Jb(this.g.gd+1);for(var o=this.g.$q(),u=o.next();u!=-1;u=o.next())n.add(u);this.g.nx(n,n.size),n.add(-1),o=this.g.Hd(),u=this.g.Hd(),this.ae=new h.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var p=new h.ja(0),f=new h.ja(0),g=0;new h.h;var b=this.g.ud;this.g.wb.oc();for(var S,$,E=this.g.wb.Aa[0].o,C=n.get(g++);C!=-1;){var k=S=E[2*($=b.U(C,0))],L=$=E[2*$+1];do{var N=b.U(C,2),U=b.U(C,1);if(N!=-1){var H=b.U(N,0),j=E[2*H];0>(L<(H=E[2*H+1])?-1:L>H?1:k<j?-1:k>j?1:0)&&(f.add(C),f.add(N))}U!=-1&&(j=E[2*(H=b.U(U,0))],0>(L<(H=E[2*H+1])?-1:L>H?1:k<j?-1:k>j?1:0)&&(f.add(U),f.add(U))),(j=this.g.Qa(C,o))!=-1&&(p.add(j),this.g.Sa(C,o,-1)),(j=this.g.Qa(C,u))!=-1&&(p.add(j),this.g.Sa(C,u,-1)),(C=n.get(g++))!==-1&&(k=E[2*(L=b.U(C,0))],L=E[2*L+1])}while(C!=-1&&k===S&&L===$);for(k=p.size==1&&f.size==2,j=L=-1,N=0,U=p.size;N<U;N++){H=p.get(N);var K=this.Nc.xe(H);if(K==-1||p.cG(K)||(L=K),(H=this.Nc.lb(H))==-1||p.cG(H)||(j=H),L!=-1&&j!=-1)break}for(this.ae.VJ($,S),N=0,U=p.size;N<U;N++)H=p.get(N),this.Nc.wd(H,-1);if(p.clear(!1),!k&&L!=-1&&j!=-1&&this.lO(L,j)){a=!0,this.Pi=this.ae.tm();break}for(N=0,U=f.size;N<U;N+=2){if($=f.get(N),S=f.get(N+1),k?($=this.Nc.Bu(L,j,$,!0),k=!1):$=this.Nc.addElement($,-1),this.ae.sg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(S,o)==-1?this.g.Sa(S,o,$):this.g.Sa(S,u,$)}if(a)break;f.Dh(0)}return this.g.Ud(o),this.g.Ud(u),a},c.prototype.lO=function(a,n){return this.ae.compare(this.Nc,this.Nc.ka(a),n),a=this.ae.sg,this.ae.Mr(),a},c.tE=function(a){for(var n=a.md;n!=-1;n=a.ve(n))if(h.ba.Ic(a.jc(n)))return!0;return!1},c.aQ=function(a,n,o,u){return!!c.tE(a)&&((n=new c(u)).g=a,n.ra=o,15>a.gd?a=n.iP():n.jP())},c.W=function(a,n,o){return c.aQ(a,a.DF(),n,o)},c.fI=function(a,n,o,u,p){if(!c.tE(n))return!1;var f=new c(p);if(f.g=n,f.ra=o,f.Yz=a,f.gI())return u!=null&&u.Yt(f.Pi),!0;var g=new h.Ed;return g.VB(),n.Pc(g),(f=new c(p)).g=n,f.ra=o,f.Yz=a,a=f.gI(),g.VB(),n.Pc(g),!!a&&(u!=null&&u.Yt(f.Pi),!0)},c.Ol=function(a,n){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*n<1*a*n},c.gP=function(a,n,o,u){if(h.ba.Ic(n.K()))return new c(u).hP(a,n,o);throw h.i.ga("crack_A_with_B")},c.prototype.hP=function(a,n,o){var u=new h.l;a.yc(u);var p=new h.l;if(n.yc(p),p.X(o,o),!p.isIntersecting(u))return a;var f=a.Cb,g=null;f!=null&&(g=f.Gb),c.Ol(a,a.I())&&(g=h.ua.lj(a,p));var b=g!=null?g.getIterator():null,S=n.Ha();n=a.Ha();var $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];S.ab();)for(;S.Ia();){var E=S.ia();if(g!=null){for(b.Wo(E,o),f=b.next();f!=-1;f=b.next())if(this.Zq(),n.Wb(g.ka(f),-1),n.Ia()){var C=(f=n.ia()).Fa(E,null,$,null,o);for(f=0;f<C;++f){var k=$[f];if(k!=0&&k!=1){var L=n.xb(),N=new w;N.t=k,N.index=L,p.push(N)}}}}else{var U=new h.l;if(E.yc(U),U.X(o,o),u.isIntersecting(U)){for(n.aj();n.ab();)for(;n.Ia();)if(this.Zq(),f=n.ia(),k=new h.l,f.yc(k),k.isIntersecting(U))for(C=f.Fa(E,null,$,null,o),f=0;f<C;++f)(k=$[f])!=0&&k!=1&&(L=n.xb(),(N=new w).t=k,N.index=L,p.push(N))}}}if(p.length==0)return a;for(p=p.sort(w.zy),a=a.Ja(),n.aj();n.ab()&&!n.Ia(););for(o=n.ia(),u=new h.jg,g=-1,f=0,b=p.length;f<b;){for($=p[f].index,S=f+1;S<b&&p[S].index==$;)++S;for(;n.xb()<$;){if(this.Zq(),E=n.Ia(),k=n.gb,(U=E||!n.Qn()||n.Rn())&&a.pc(o,g!=k),g=k,!E)for(;n.ab()&&!n.Ia(););o=n.ia()}for($=0;f<S;f++)(k=p[f].t)!=$&&(o.dh($,k,u),$=k,k=n.gb,a.pc(u.get(),g!=k),g=k);if((U=(E=n.Ia())||!n.Qn()||n.Rn())&&(o.dh($,1,u),a.pc(u.get(),!1)),E)o=n.ia();else{for(;n.ab()&&!n.Ia(););o=n.Ia()?n.ia():null}f=S}for(o!=null&&(k=n.gb,(U=(E=n.Ia())||!n.Qn()||n.Rn())&&a.pc(o,g!=k),g=k),E=n.Ia();;){if(!E){for(;n.ab()&&!(E=n.Ia()););if(!E)break}o=n.ia(),k=n.gb,(U=(E=n.Ia())||!n.Qn()||n.Rn())&&a.pc(o,g!=k),g=k}return a},c}();h.bu=O;var w=function(){function c(){}return c.zy=function(a,n){return a.index==n.index?a.t>n.t?1:a.t<n.t?-1:0:a.index>n.index?1:-1},c}()}(B||(B={})),function(h){var O;(O=h.FK||(h.FK={}))[O.Left=0]="Left",O[O.Right=1]="Right",O[O.Coincident=2]="Coincident",O[O.Undefined=3]="Undefined",O[O.Uncut=4]="Uncut";var w=function(n,o,u,p,f,g,b,S,$,E,C){this.Y=n,this.ct=o,this.Ps=u,this.ug=p,this.Nm=E,this.Cl=C};h.qY=w;var c=function(){function n(o,u){this.EH=o,this.Ji=u}return n.prototype.lM=function(o,u){var p=new h.h;this.Ji.D(o,p);var f=new h.h;return this.Ji.D(u,f),(p=p.compare(f))!=0?p:(o=this.Ji.Qa(o,this.EH))<(u=this.Ji.Qa(u,this.EH))?-1:o==u?0:1},n}(),a=function(n,o,u,p,f,g,b,S,$){this.ug=n,this.Ps=o,this.JA=u,this.PH=p,this.Gi=f,this.Cl=g,this.Nm=b,this.QH=S,this.JT=$};h.pY=a,h.GK=function(){function n(){}return n.EK=function(o,u,p,f,g,b){if(u.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(o);else if(p.B())o=new w(u,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(o);else{var S=new h.hd;if(S.Ib(u),S.Ib(p),h.Vk.W(S,f,b,!0),S.gd==0)o=new w(u.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(o);else{for(u=0,p=S.Hd(),f=S.md;f!=-1;f=S.ve(f))for(b=S.Ob(f);b!=-1;b=S.Sb(b))for(var $=S.Ya(b),E=0,C=S.Ka(b);E<C;$=S.V($),E++)S.Sa($,p,u++);u=n.CM(p,S),n.YL(o,u,S,g)}}},n.CM=function(o,u){for(var p=u.gd,f=new h.ja(0),g=u.md;g!=-1;g=u.ve(g))for(var b=u.Ob(g);b!=-1;b=u.Sb(b))for(var S=u.Ya(b),$=0,E=u.Ka(b);$<E;S=u.V(S),$++)f.add(S);var C=new c(o,u);f.Wd(0,p,function(Oe,Ce){return C.lM(Oe,Ce)}),o=[];var k=[],L=u.Hd(),N=u.Hd();g=u.md,b=u.ve(g),E=new h.h;var U=new h.h,H=f.get(0),j=u.cd(H),K=u.Sf(j);u.D(H,E);var se=1;for(S=0;se<p-1;){var ne=!1;for($=se;$<p;$++)if($!=S){var pe=f.get($),ce=u.cd(pe),_e=u.Sf(ce);if(u.D(pe,U),!E.rb(U))break;K==g&&_e==b&&(ne=n.pM(L,N,u,o,k,j,H,ce,pe))}if(ne||S==se-1){if(ne&&S==se-1&&se--,++S==p)break;H=f.get(S),j=u.cd(H),K=u.Sf(j),u.D(H,E)}ne||(se=S+1)}for(p=[],g=u.md;g!=-1;g=u.ve(g))for(b=u.Ob(g);b!=-1;b=u.Sb(b))for(f=u.Ya(b),$=0,E=u.Ka(b);$<E;f=u.V(f),$++){if(0<=(S=u.Qa(f,N)))for(;S<k.length&&k[S].ug==f;)p.push(k[S++]);if(0<=(S=u.Qa(f,L)))for(;S<o.length&&o[S].ug==f;)p.push(o[S++])}return u.Ud(L),u.Ud(N),p},n.pM=function(o,u,p,f,g,b,S,$,E){var C=p.tj(b),k=p.tj($),L=p.Ya(b),N=p.Ya($),U=p.Na(S),H=p.Na(E),j=!1,K=!1,se=!1,ne=!1;return S!=L&&(E!=N&&(j=n.qM(o,p,f,b,U,$,H)),E!=k&&(K=n.rM(o,p,f,b,U,$,E))),S!=C&&(E!=N&&(se=n.sM(u,p,g,b,S,$,H,L)),E!=k&&(ne=n.tM(u,p,g,b,S,$,E,L))),j&&K&&se?(o=f.length-1,g[ne?g.length-2:g.length-1].Gi==2&&(f[o-1]=f[o],--f.length)):j&&K&&ne&&g[g.length-1].Gi==2&&(g=f[f.length-1],--f.length,p.Qa(g.ug,o)==f.length&&p.Sa(g.ug,o,-1)),j||K||se||ne},n.qM=function(o,u,p,f,g,b,S){var $=new h.zb,E=new h.zb,C=[0,0],k=[0,0],L=u.cc(g);return L==null&&(u.fd(g,$),L=$),($=u.cc(S))==null&&(u.fd(S,E),$=E),2>(L=L.Fa($,null,C,k,0))&&(f=new a(g,f,C[0],NaN,L,S,b,k[0],NaN),p.push(f),0>(f=u.Qa(g,o))&&u.Sa(g,o,p.length-1)),!0},n.rM=function(o,u,p,f,g,b,S){var $=new h.zb,E=new h.zb,C=[0,0],k=[0,0],L=u.cc(g);return L==null&&(u.fd(g,$),L=$),($=u.cc(S))==null&&(u.fd(S,E),$=E),2>(L=L.Fa($,null,C,k,0))&&(f=new a(g,f,C[0],NaN,L,S,b,k[0],NaN),p.push(f),0>(f=u.Qa(g,o))&&u.Sa(g,o,p.length-1),!0)},n.sM=function(o,u,p,f,g,b,S,$){var E=new h.zb,C=new h.zb,k=[0,0],L=[0,0],N=u.cc(g);return N==null&&(u.fd(g,E),N=E),(E=u.cc(S))==null&&(u.fd(S,C),E=C),(N=N.Fa(E,null,k,L,0))==2?(f=new a(g,f,k[0],k[1],N,S,b,L[0],L[1]),p.push(f),0>(f=u.Qa(g,o))&&u.Sa(g,o,p.length-1),!0):(C=!1,g==$&&(f=new a(g,f,k[0],NaN,N,S,b,L[0],NaN),p.push(f),0>(f=u.Qa(g,o))&&u.Sa(g,o,p.length-1),C=!0),C)},n.tM=function(o,u,p,f,g,b,S,$){var E=new h.zb,C=new h.zb,k=[0,0],L=[0,0],N=u.cc(g);return N==null&&(u.fd(g,E),N=E),(E=u.cc(S))==null&&(u.fd(S,C),E=C),(N=N.Fa(E,null,k,L,0))==2?(f=new a(g,f,k[0],k[1],N,S,b,L[0],L[1]),p.push(f),0>(f=u.Qa(g,o))&&u.Sa(g,o,p.length-1),!0):(C=!1,g==$&&(f=new a(g,f,k[0],NaN,N,S,b,L[0],NaN),p.push(f),0>(f=u.Qa(g,o))&&u.Sa(g,o,p.length-1),C=!0),C)},n.YL=function(o,u,p,f){var g=[];g[0]=new h.h,g[1]=new h.h,g[2]=new h.h,g[3]=new h.h;var b=new h.h,S=new h.h,$=new h.h,E=new h.h,C=null;f!=null&&(C=new h.jg).Qr();var k=0,L=null,N=new h.zb;new h.zb;for(var U=p.Ob(p.md);U!=-1;U=p.Sb(U)){for(var H=4,j=-1,K=-1,se=-1,ne=-1,pe=NaN,ce=!0,_e=!1,Oe=!0,Ce=!0,st=!0,qe=0,Et=U,xt=0,et=p.Ya(U),xi=p.Ka(U),nr=0;nr<xi;et=p.V(et),nr++){var Ei=p.cc(et);if(Ei==null){if(!p.fd(et,N))continue;Ei=N}K==-1&&(K=et);for(var ei=0;k<u.length&&et==u[k].ug;){j=u[k].Ps;var ti=u[k].ug,zt=u[k].JA,ki=u[k].Nm,jt=u[k].Cl,dr=u[k].QH;if(u[k].Gi==2){if(_e||(Et=j,K=ti,xt=zt,se=ki,ne=jt,pe=dr,H=2,f!=null?L=new h.Ua:qe=0,st=!1,Ce=!0),zt=u[k].PH,dr=u[k].JT,f!=null?(Ei.dh(ei,u[k].PH,C),L.pc(C.get(),Ce)):qe++,ei=zt,_e=!0,Ce=ce=!1,k+1==u.length||u[k+1].Gi!=2||u[k+1].ug==ti&&u[k+1].JA!=ei){if(f!=null){var Ut=new w(L,2,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe);f.push(Ut)}else null.add(qe);Et=j,K=ti,xt=zt,se=ki,ne=jt,pe=dr,H=2,_e=ce=!1,Ce=st=!0}}else{var Br=p.V(ti);if(k<u.length-1&&u[k+1].ug==Br&&u[k+1].Cl==jt&&u[k+1].Gi==2)zt!=ei&&(st&&(f!=null?L=new h.Ua:qe=0),ce=0<k&&u[k-1].Ps==j?H==1?0:H==0?1:3:3,f!=null?(Ei.dh(ei,zt,C),L.pc(C.get(),Ce),Ut=new w(L,ce,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):(qe++,null.add(qe)),ei=zt,Et=j,K=ti,xt=zt,se=ki,ne=jt,pe=dr,H=ce,ce=Oe=!1,Ce=st=!0);else if(!n.xM(o,p,u,k,b,S)){n.uM(p,u,k,U,et,$,E);var ui=!1;if(Br=!1,Ut=!0,!(b.rb($)||S.rb($)||b.rb(E)||S.rb(E))){g[0].N(b),g[1].N(S),g[2].N($),g[3].N(E),g.sort(h.h.pu);var pc=g[0],dc=g[1],fc=g[2],un=g[3];pc.rb(b)?dc.rb(S)?o?(Br=ui=!0,Ut=!1):ui=!1:un.rb(S)?o?Ut=Br=ui=!0:ui=!1:(ui=!0,Ut=dc.rb($)):dc.rb(b)?fc.rb(S)?o?(Br=ui=!0,Ut=!1):ui=!1:pc.rb(S)?o?Ut=Br=ui=!0:ui=!1:(ui=!0,Ut=fc.rb($)):fc.rb(b)?un.rb(S)?o?(Br=ui=!0,Ut=!1):ui=!1:dc.rb(S)?o?Ut=Br=ui=!0:ui=!1:(ui=!0,Ut=un.rb($)):pc.rb(S)?o?(Br=ui=!0,Ut=!1):ui=!1:fc.rb(S)?o?Ut=Br=ui=!0:ui=!1:(ui=!0,Ut=pc.rb($))}ui&&(ui=et==ti,(zt!=ei||ui&&ei==0)&&(st&&(f!=null?L=new h.Ua:qe=0),f!=null?(Ei.dh(ei,zt,C),L.pc(C.get(),Ce)):qe++),Ut?H!=1?((zt!=ei||ui&&ei==0)&&(f!=null?(Ut=new w(L,1,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):null.add(qe)),Br?(k>=u.length-2||u[k+2].Ps!=j)&&(H=0):H=1):((zt!=ei||ui&&ei==0)&&(f!=null?(Ut=new w(L,3,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):null.add(qe)),H=1):H!=0?((zt!=ei||ui&&ei==0)&&(f!=null?(Ut=new w(L,0,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):null.add(qe)),Br?(k>=u.length-2||u[k+2].Ps!=j)&&(H=1):H=0):((zt!=ei||ui&&ei==0)&&(f!=null?(Ut=new w(L,3,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):null.add(qe)),H=0),(zt!=ei||ui&&ei==0)&&(ei=zt,Et=j,K=ti,xt=zt,se=ki,ne=jt,pe=dr,ce=Oe=!1,Ce=st=!0))}}k++}ei!=1&&(st&&(f!=null?L=new h.Ua:qe=0),f!=null?(Ei.dh(ei,1,C),L.pc(C.get(),Ce)):qe++,Ce=st=!1,Oe=!0)}Oe&&(zt=1,ti=p.tj(U),ti=p.Na(ti),jt=ki=-1,dr=NaN,ce?f!=null?(Ut=new w(L,4,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):null.add(qe):(ce=H==1?0:H==0?1:3,f!=null?(Ut=new w(L,ce,j,ti,zt,H,Et,K,xt,ki,jt,dr,se,ne,pe),f.push(Ut)):null.add(qe)))}},n.xM=function(o,u,p,f,g,b){var S=p[f].QH;if(S==1)return n.vM(o,u,p,f,g,b);if(S==0)return n.wM(o,u,p,f,g,b);throw h.i.Ra()},n.vM=function(o,u,p,f,g,b){var S=new h.zb,$=p[f].ug,E=p[f].Nm,C=p[f].Cl,k=-1,L=-1,N=-1,U=-1;if(!o&&0<f){var H=p[f-1];k=H.ug,L=H.Nm,N=H.Cl,U=H.Gi}var j=-1,K=-1,se=-1,ne=-1;f<p.length-1&&(j=(H=p[f+1]).ug,K=H.Nm,se=H.Cl,ne=H.Gi);var pe=u.V($);return H=u.V(C),o?f==p.length-1||j!=$||K!=E||se!=H||ne==2?((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1):((o=u.cc(C))==null&&(u.fd(C,S),o=S),g.N(o.lg()),(o=u.cc(H))==null&&(u.fd(H,S),o=S),b.N(o.lg()),g.Uq(),b.normalize(),g.normalize(),!1):0<f&&k==$&&L==E&&N==H&&U==2||f<p.length-1&&j==pe&&K==E&&se==H&&ne==2?((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1):!(f<p.length-1&&j==$&&K==E&&se==H)||((o=u.cc(C))==null&&(u.fd(C,S),o=S),g.N(o.lg()),(o=u.cc(H))==null&&(u.fd(H,S),o=S),b.N(o.lg()),g.Uq(),b.normalize(),g.normalize(),!1)},n.wM=function(o,u,p,f,g,b){var S=new h.zb,$=p[f].ug,E=p[f].Nm,C=p[f].Cl,k=-1,L=-1,N=-1,U=-1;if(!o&&f<p.length-1){var H=p[f+1];k=H.ug,L=H.Nm,N=H.Cl,U=H.Gi}var j=-1,K=-1,se=-1;H=-1,0<f&&(j=(H=p[f-1]).ug,K=H.Nm,se=H.Cl,H=H.Gi);var ne=u.V($),pe=u.Na(C);return o?f!=0&&j==$&&K==E&&se==pe&&H!=2||((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1):!(0<f&&j==$&&K==E&&se==pe&&H==2||f<p.length-1&&k==ne&&L==E&&N==pe&&U==2)||((o=u.cc(C))==null&&(u.fd(C,S),o=S),b.N(o.lg()),g.nt(b),b.normalize(),g.normalize(),!1)},n.uM=function(o,u,p,f,g,b,S){var $=new h.zb,E=o.cc(g);if(E==null&&(o.fd(g,$),E=$),u=(p=u[p]).ug,p=p.JA,g=o.V(u),p==1)b.N(E.lg()),g!=-1&&g!=o.tj(f)?((E=o.cc(g))==null&&(o.fd(g,$),E=$),S.N(E.lg()),(E=o.cc(u))==null&&o.fd(u,$)):S.N(b),b.Uq(),S.normalize(),b.normalize();else{if(p!=0)throw h.i.Ra();S.N(E.lg()),b.nt(S),S.normalize(),b.normalize()}},n}()}(B||(B={})),function(h){var O;(O=h.XL||(h.XL={}))[O.Linear=0]="Linear",O[O.Angular=1]="Angular",O[O.Area=2]="Area";var w=function(){function f(g,b,S){this.pd=b,this.ci=S,this.qA=g}return f.prototype.Nb=function(g){return g instanceof f&&this.ci===g.ci},f.WF=function(g){return g.pd!==0?null:g.qA===-1?new f(-1,2,g.ci*g.ci):f.ah(u[g.qA])},f.ah=function(g){return(g=o[g])===void 0?null:g},f.UO=function(g,b,S){var $=null;if(S!=null)try{S.values[0]==="EPSG"&&($=f.ah(parseInt(S.values[1])))}catch{}return $===null&&($=new f(-1,g,b)),$},f.prototype.Fc=function(){return this.qA},f.prototype.xF=function(g){if(g.pd!=this.pd)throw h.i.Hb();return this.ci/g.ci},f.Ph=function(g,b,S){return b.xF(S)*g},f.SE=function(g,b,S,$,E){for(S=S.xF($),$=0;$<b;$++)E[$]=g[$]*S},f}();h.Uc=w;for(var c=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],n=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],u=[],p=0;p<c.length;p+=2)o[c[p]]=new w(c[p],2,c[p+1]);for(c=null,p=0;p<a.length;p+=2)o[a[p]]=new w(a[p],1,a[p+1]);for(a=null,p=0;p<n.length;p+=3)o[n[p]]=new w(n[p],0,n[p+1]),u[n[p]]=n[p+2];n=null}(B||(B={})),function(h){var O=function(){function w(){this.yb=this.pb=0}return w.prototype.set=function(c,a){a!==void 0?(this.pb=c,this.yb=a):typeof c=="number"?(this.pb=c,this.yb=0):(this.pb=c.pb,this.yb=c.yb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(c){var a=this.pb+c.pb;c=this.yb+c.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=c},w.prototype.fN=function(){var c=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(c);this.pb=c,this.yb=a},w.prototype.ZM=function(c,a){this.pb=c.pb+a.pb,this.yb=c.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(c){if(typeof c=="number"){var a=this.pb-c;c=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-c.pb,c=this.yb+c.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=c},w.prototype.Bg=function(c){var a=this.pb*c.pb;this.yb=this.yb*Math.abs(c.pb)+c.yb*Math.abs(this.pb)+this.yb*c.yb+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Po=function(c){var a=this.pb*c;this.yb=this.yb*Math.abs(c)+2220446049250313e-31*Math.abs(a),this.pb=a},w.prototype.Ml=function(c,a){var n=Math.abs(c.pb)*Math.abs(a.pb);this.yb=c.yb*Math.abs(a.pb)+a.yb*Math.abs(c.pb)+c.yb*a.yb+2220446049250313e-31*Math.abs(n),this.pb=n},w.prototype.lm=function(c){var a=Math.abs(c.pb),n=this.pb/c.pb,o=(this.yb+Math.abs(n)*c.yb)/a;c.yb>.01*a&&(o*=1+(1+(c=c.yb/a))*c),this.pb=n,this.yb=o+2220446049250313e-31*Math.abs(n)},w.prototype.sqrt=function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/c:this.pb>this.yb?c-Math.sqrt(this.pb-this.yb):Math.max(c,Math.sqrt(this.pb+this.yb)-c);a+=2220446049250313e-31*Math.abs(c)}else this.pb<-1*this.yb?a=c=NaN:(c=0,a=Math.sqrt(this.yb));this.pb=c,this.yb=a},w.prototype.sin=function(c){var a=Math.sin(c.pb),n=Math.cos(c.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(n)+.5*a*c.yb)*c.yb+2220446049250313e-31*a},w.prototype.cos=function(c){var a=Math.sin(c.pb),n=Math.cos(c.pb);this.pb=n,n=Math.abs(n),this.yb=(Math.abs(a)+.5*n*c.yb)*c.yb+2220446049250313e-31*n},w.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},w.prototype.rs=function(){return this.rg()&&this.yb!=0},w}();h.Xb=O}(B||(B={}));var Le=new B.h,ht=new B.h,ut=new B.h,pt=new B.h,St=new B.h;(function(h){var O,w;(w=O||(O={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var c=function(){function a(n,o,u,p,f,g,b){o!==void 0?(this.ib=n,this.ek=o,this.dl=u,this.ki=p,this.za=g,this.cA=b,this.gw=f):(this.ib=n.ib,this.ek=n.ek,this.dl=n.dl,this.ki=n.ki,this.za=n.za,this.cA=n.cA,this.gw=n.gw),this.XG=!0}return a.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},a.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},a.vP=function(n,o,u,p,f,g,b){return new a(n,o,u,p,f,g,b)},a}();h.vY=c,O=function(){function a(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(n){return this.Te!=null?this.Te[n]:null},a.prototype.Zg=function(n,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var u=0,p=this.wb.I();u<p;u++)this.Te.push(null)}this.Te[n]=o},a.prototype.ep=function(n,o){this.nd.T(n,1,o)},a.prototype.cp=function(n,o){this.nd.T(n,2,o)},a.prototype.QB=function(n,o){this.nd.T(n,6,o)},a.prototype.Up=function(n){return this.nd.U(n,6)},a.prototype.gx=function(n,o){this.nd.T(n,7,o)},a.prototype.sv=function(n){return this.nd.U(n,0)},a.prototype.JJ=function(n,o){this.dd.T(n,1,o)},a.prototype.NJ=function(n,o){this.dd.T(n,0,o)},a.prototype.EF=function(n){return this.dd.U(n,7)},a.prototype.ap=function(n,o){this.dd.T(n,3,o)},a.prototype.bp=function(n,o){this.dd.T(n,4,o)},a.prototype.pU=function(n){this.dd==null&&(this.dd=new h.ad(8));var o=this.dd.De();return this.dd.T(o,2,n),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.JQ=function(n){this.dd.kd(n)},a.prototype.rU=function(n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var o=this.nd.De();return this.nd.T(o,0,o),this.nd.T(o,3,0),this.nd.T(o,6,0),this.gx(o,n),o>=this.Qi.size&&(n=16>o?16:h.P.truncate(3*o/2),this.Qi.resize(n),this.xo.resize(n)),this.Qi.set(o,0),this.xo.set(o,0),o},a.prototype.nF=function(n){this.nd.kd(n)},a.prototype.Qy=function(n){this.ud.kd(n),this.gd--},a.prototype.jI=function(n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var o=this.ud.De(),u=0<=n?n:o;if(this.ud.T(o,0,u),0>n){if(u>=this.wb.I()){if(n=16>u?16:h.P.truncate(3*u/2),this.wb.resize(n),this.Te!=null)for(var p=0;p<n;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(n),this.jt=this.wb.vb(0)}this.wb.Db(u,-1e38,-1e38),this.Te!=null&&(this.Te[u]=null),this.Ug!=null&&this.Ug.write(u,1)}return this.ud.T(o,4,2*u),this.gd++,o},a.prototype.yj=function(n,o,u){var p=o!=-1?this.Na(o):this.tj(n),f=p!=-1?this.V(p):-1,g=this.jI(u==null?this.gd:-1),b=this.Va(g);return u!=null&&this.wb.It(b,u),this.cj(g,n),this.Cc(g,f),this.Dc(g,p),f!=-1&&this.Dc(f,g),p!=-1&&this.Cc(p,g),u=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,g),o==p&&this.Kf(n,g),u&&f==-1&&(this.Cc(g,g),this.Dc(g,g)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),g},a.prototype.pm=function(){return this.lo==null&&(this.lo=new h.Ta(this.wb.description)),this.lo},a.prototype.$o=function(n,o){this.dd.T(n,2,-134217729&this.dd.U(n,2)||(o==1?134217728:0))},a.prototype.Kn=function(n){return(134217728&this.dd.U(n,2))!=0?1:0},a.prototype.cN=function(n){var o=this.Kg(n.K(),n.description);return n.K()==1736&&this.$o(o,n.Kn()),this.PD(o,n),o},a.prototype.dN=function(n){var o=this.Kg(n.K(),n.description);return this.QD(o,n),o},a.prototype.SV=function(n,o){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0)),this.nd.Ee(this.nd.Jg+n),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+n),this.xo.Jb(this.xo.size+n)},a.prototype.PD=function(n,o){this.SV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var u=this.Te!=null&&o.Se!=null,p=0,f=o.ea();p<f;p++)if(!(2>o.Ka(p))){var g=this.wf(n,-1);this.mn(g,o.ec(p));for(var b=o.Ca(p),S=o.Wc(p);b<S;b++){var $=this.yj(g,-1,null);if(u)if($=this.Va($),(1&o.UF(b))!=0)this.Zg($,null);else{var E=new h.jg;o.cc(b,E,!0),this.Zg($,E.get())}}}},a.prototype.QD=function(n,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),n=this.wf(n,-1);var u=0;for(o=o.I();u<o;u++)this.yj(n,-1,null)},a.prototype.JX=function(n,o,u){var p=this.V(n);if(p==-1)throw h.i.Ra();for(var f=this.pm(),g=this.cd(n),b=0,S=o.ql(u);b<S;b++){var $=this.Va(n),E=this.V(n),C=o.Xp(u,b);b==0&&(C.Vo(f),this.Fh(n,f)),C.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(C)),C.Ro(f),b<S-1?n=this.yj(g,E,f):this.Fh(p,f)}},a.prototype.IX=function(n,o,u){var p=this.V(n);if(p==-1)throw h.i.Ra();for(var f=this.pm(),g=this.cd(n),b=0,S=o.ql(u);b<S;b++){var $=this.Va(n),E=this.V(n),C=o.Xp(u,S-b-1);b==0&&(C.Ro(f),this.Fh(n,f)),C.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(C)),C.Vo(f),b<S-1?n=this.yj(g,E,f):this.Fh(p,f)}},a.prototype.DF=function(){var n=new h.l;n.Pa();for(var o=this.$q(),u=new h.h,p=!0,f=o.next();f!=-1;f=o.next())this.D(f,u),p?n.$b(u.x,u.y):n.Nk(u.x,u.y),p=!1;return n},a.prototype.Ib=function(n){var o=n.K();if(h.ba.Ic(o))return this.cN(n);if(o==550)return this.dN(n);throw h.i.Ra()},a.prototype.pN=function(n,o){var u=o.K();if(h.ba.Ic(u))this.PD(n,o);else{if(u!=550)throw h.i.Ra();this.QD(n,o)}},a.prototype.hN=function(n,o){var u=this.Kg(1736,n.description);if(2>n.Ka(o))return u;this.Kl.Gd(n,n.Ca(o),n.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(u,-1);this.mn(p,n.ec(o)||!0);var f=this.Te!=null&&n.Se!=null,g=n.Ca(o);for(o=n.Wc(o);g<o;g++){var b=this.yj(p,-1,null);if(f)if(b=this.Va(b),(1&n.UF(g))!=0)this.Zg(b,null);else{var S=new h.jg;n.cc(g,S,!0),this.Zg(b,S.get())}}return u},a.prototype.Ke=function(n){var o=this.jc(n),u=h.UK.Kg(o,this.Kl.description),p=this.I(n);if(p==0)return u;if(h.ba.Ic(o)){o=this.ea(n);for(var f=h.Zc.Qh(o+1),g=h.Zc.Or(o+1,0),b=u.description,S=0,$=b.Ba;S<$;S++){for(var E=b.ld(S),C=h.sa.Wa(E),k=h.Zc.TE(E,p),L=this.wb.vb(E),N=0,U=0,H=0,j=this.Ob(n);j!=-1;j=this.Sb(j)){var K=0;this.ec(j)&&(K|=1),this.TS(j)&&(K|=4),K!=0&&g.uJ(U,K);var se=this.Ka(j);if(f.write(U++,H),H+=se,E==0){se=L;var ne=k,pe=new h.h;for(K=this.Ya(j);N<H;K=this.V(K),N++){var ce=this.Va(K);se.uc(2*ce,pe),ne.Vt(2*N,pe)}}else for(K=this.Ya(j);N<H;K=this.V(K),N++)for(ce=this.Va(K),ne=0;ne<C;ne++)pe=L.gg(ce*C+ne),k.rr(N*C+ne,pe)}u.kn(E,k),f.write(o,p)}u.KJ(g),u.LJ(f),u.Qc(16777215)}else if(o==550){for(b=u.description,u.resize(p),S=0,$=b.Ba;S<$;S++){for(E=b.ld(S),C=h.sa.Wa(E),k=u.vb(E),L=this.wb.vb(E),N=0,j=this.Ob(n),se=this.Ka(j),K=this.Ya(j);N<se;K=this.V(K),N++)for(ce=this.Va(K),ne=0;ne<C;ne++)pe=L.gg(ce*C+ne),k.rr(N*C+ne,pe);u.kn(E,k)}u.Qc(16777215)}return u},a.prototype.wB=function(n){for(var o=this.Ob(n);o!=-1;o=this.ar(o));o=this.KR(n);var u=this.ve(n);o!=-1?this.JJ(o,u):this.md=u,u!=-1?this.NJ(u,o):this.sw=o,this.JQ(n)},a.prototype.Kg=function(n,o){return o===void 0?this.VE(n,h.fe.pg()):this.VE(n,o)},a.prototype.VE=function(n,o){return n=this.pU(n),this.wb==null?this.wb=this.Kl=new h.ee(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=n:(this.NJ(n,this.sw),this.JJ(this.sw,n)),this.sw=n},a.prototype.ve=function(n){return this.dd.U(n,1)},a.prototype.KR=function(n){return this.dd.U(n,0)},a.prototype.jc=function(n){return 2147483647&this.dd.U(n,2)},a.prototype.CJ=function(n,o,u){o=this.yk[o],(n=this.EF(n))>=o.size&&o.resize(Math.max(h.P.truncate(1.25*n),16),-1),o.write(n,u)},a.prototype.FF=function(n,o){return(n=this.EF(n))<(o=this.yk[o]).size?o.read(n):-1},a.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var n=0;n<this.yk.length;n++)if(this.yk[n]==null)return this.yk[n]=h.Zc.Qh(0),n;return this.yk.push(h.Zc.Qh(0)),this.yk.length-1},a.prototype.sW=function(n){this.yk[n]=null},a.prototype.Ob=function(n){return this.dd.U(n,3)},a.prototype.mv=function(n){return this.dd.U(n,4)},a.prototype.I=function(n){return this.dd.U(n,5)},a.prototype.ea=function(n){return this.dd.U(n,6)},a.prototype.Ip=function(n,o,u){for(var p=0,f=this.md;f!=-1;f=this.ve(f)){var g=this.jc(f);if(h.ba.Ic(g)&&(!u||g==1736)){g=this.jc(f)==1736;for(var b=this.Ob(f);b!=-1;){for(var S=0,$=this.Ya(b);S<h.P.truncate(this.Ka(b)/2);){var E=this.V($);if(E==-1)break;var C=this.Va($),k=this.Uh(C);k!=null?C=k.Rb():(k=this.Va(E),C=this.wb.Ar(C,k)),C<=n?(C==0?p==0&&(p=-1):p=1,E!=this.tj(b)&&(this.gC(E,$),this.qd(E,!0))):$=this.V($),S++}for(S=this.Ya(b),$=this.ec(b)?S:this.tj(b);0<this.Ka(b);){if((E=this.Na($))==-1){this.qd($,!0),p==0&&(p=-1);break}var L=this.Va(E);if((k=this.Uh(L))!=null?C=k.Rb():(C=this.Va($),C=this.wb.Ar(C,L)),C<=n)C==0?p==0&&(p=-1):p=1,this.gC(E,$),this.qd(E,!1),S==E&&(S=this.Ya(b));else if(($=this.Na($))==S)break}$=this.Ka(b),o&&(g?3>$:2>$)?(b=this.ar(b),p=0<$?1:p==0?-1:p):b=this.Sb(b)}}}return p},a.prototype.gC=function(n,o){var u=this.Va(n),p=this.Va(o);if(this.Ug!=null&&(u=this.Ug.read(u),this.Ug.write(p,u)),this.di!=null){for(p=0,u=this.di.length;p<u;p++)if(this.di[p]!=null){var f=this.Qa(n,p);f!=-1&&this.Sa(o,p,f)}}},a.prototype.Wl=function(n,o,u){var p=0,f=this.V(n);if(f==-1)throw h.i.Ra();for(var g=this.Va(n),b=this.Va(f),S=this.Uh(g),$=S==null?this.wb.Ar(g,b):S.Rb(),E=0;E<u;E++){var C=o[E];if(0<C&&1>C){var k=C;S!=null&&(k=0<$?S.Tx(C)/$:0),this.wb.fD(g,b,k,this.pm());var L=this.yj(this.cd(n),f,this.pm());if(p++,S!=null){var N=S.fl(0,C);k=this.Va(this.Na(L)),this.Zg(k,N),this.mf(L,N.xc()),E!=u-1&&o[E+1]!=1||(C=S.fl(C,1),this.Zg(k,C))}}}return p},a.prototype.HX=function(n,o,u){var p=0,f=this.V(n);if(f==-1)throw h.i.ga("internal error");var g=this.Va(n),b=this.Va(f),S=this.Uh(g),$=S==null?this.wb.Ar(g,b):S.Rb(),E=0;n=this.cd(n);for(var C=0;C<u;C++){var k=o[C];if(E<k&&1>k){var L=k;if(S!=null&&(L=0<$?S.Tx(k)/$:0),this.wb.fD(g,b,L,this.pm()),L=this.tS(n,f,this.pm()),p++,S!=null){E=S.fl(E,k);var N=this.Va(this.Na(L));this.Zg(N,E),this.Db(L,E.qa,E.ma),C!=u-1&&o[C+1]!=1||(E=S.fl(k,1),L=this.Va(L),this.Zg(L,E))}}E=k}return p},a.prototype.tS=function(n,o,u){var p=o!=-1?this.Na(o):this.tj(n),f=p!=-1?this.V(p):-1,g=this.jI(u==null?this.gd:-1),b=this.Va(g);return u!=null&&this.wb.It(b,u),this.cj(g,n),this.Cc(g,f),this.Dc(g,p),f!=-1&&this.Dc(f,g),p!=-1&&this.Cc(p,g),u=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,g),o==p&&(u&&p!=-1||this.Kf(n,g)),u&&f==-1&&(this.Cc(g,g),this.Dc(g,g)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),g},a.prototype.pE=function(n,o,u){var p=this.Va(o),f=this.Va(u);if(0>p||f>this.gd-1)throw h.i.O("invalid call");if(p>f&&!this.ec(n))throw h.i.O("cannot iterate across an open path");for(n=0;o!=u;o=this.V(o))p=this.Va(o),(f=this.Uh(p))!=null?n+=f.Rb():(f=this.Va(this.V(o)),n+=this.wb.Ar(p,f));return n},a.prototype.Fh=function(n,o){var u=this.Va(n);this.wb.It(u,o),(u=this.Uh(u))!=null&&u.setStart(o),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&u.setEnd(o))},a.prototype.Xi=function(n,o){n=this.Va(n),this.wb.we(n,o)},a.prototype.mf=function(n,o){this.Db(n,o.x,o.y)},a.prototype.Db=function(n,o,u){var p=this.Va(n);this.wb.Db(p,o,u),(p=this.Uh(p))!=null&&p.UB(o,u),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&p.Sl(o,u))},a.prototype.D=function(n,o){this.wb.D(this.ud.U(n,0),o)},a.prototype.Hc=function(n,o){this.wb.Aa[0].uc(2*this.ud.U(n,0),o)},a.prototype.Oa=function(n){var o=new h.h;return this.wb.D(this.ud.U(n,0),o),o},a.prototype.ZF=function(n,o){this.jt.uc(2*n,o)},a.prototype.Vc=function(n,o,u){return this.wb.Vc(n,this.Va(o),u)},a.prototype.setAttribute=function(n,o,u,p){this.wb.setAttribute(n,this.Va(o),u,p)},a.prototype.Va=function(n){return this.ud.U(n,0)},a.prototype.kh=function(){var n=new h.h;return this.D(void 0,n),n.y},a.prototype.hq=function(n,o){n=this.Va(n),o=this.Va(o);var u=this.wb.Aa[0].o;return u[2*n]===u[2*o]&&u[2*n+1]===u[2*o+1]},a.prototype.Fv=function(n,o){n=this.Va(n);var u=this.wb.Aa[0].o;return u[2*n]===o.x&&u[2*n+1]===o.y},a.prototype.rX=function(n,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=h.Zc.Fn(this.wb.I(),1)}(n=this.Va(n))>=this.Ug.size&&this.Ug.resize(n+1,1),this.Ug.write(n,o)},a.prototype.YF=function(n){return n=this.Va(n),this.Ug==null||n>=this.Ug.size?1:this.Ug.read(n)},a.prototype.Sa=function(n,o,u){o=this.di[o],n=this.Va(n),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(n,u)},a.prototype.Qa=function(n,o){return(n=this.Va(n))<(o=this.di[o]).size?o.read(n):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var n=0;n<this.di.length;n++)if(this.di[n]==null)return this.di[n]=h.Zc.Qh(0,-1),n;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(n){this.di[n]=null},a.prototype.cc=function(n){return this.Te!=null?(n=this.Va(n),this.Te[n]):null},a.prototype.fd=function(n,o){var u=this.ud.U(n,2);if(u==-1)return!1;if(this.aA){var p=new h.Ta;this.Xi(n,p),o.setStart(p),this.Xi(u,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(n,0),Le),o.gm(0,Le),this.wb.Hc(this.ud.U(u,0),Le),o.gm(1,Le);return!0},a.prototype.hW=function(n,o,u){if(this.aA){var p=new h.Ta;this.Xi(n,p),u.setStart(p),this.Xi(o,p),u.setEnd(p)}else this.wb.Hc(n,Le),u.gm(0,Le),this.wb.Hc(o,Le),u.gm(1,Le)},a.prototype.wf=function(n,o){if(o!=-1){if(n!=this.Sf(o))throw h.i.Ra();var u=this.es(o)}else u=this.mv(n);var p=this.rU(n);return o!=-1&&this.ep(o,p),this.cp(p,o),this.ep(p,u),u!=-1?this.cp(u,p):this.ap(n,p),o==-1&&this.bp(n,p),this.Tl(n,this.ea(n)+1),p},a.prototype.iG=function(n,o,u,p){n=this.wf(n,-1);for(var f=0,g=o,b=!1;g==u&&(b=!0),this.cj(g,n),f++,(g=this.V(g))!=o;);return this.mn(n,!0),this.Xj(n,f),b&&(o=u),this.Kf(n,o),this.Yg(n,this.Na(o)),this.fp(n,!1),p!=null&&(p[0]=b),n},a.prototype.ar=function(n){var o=this.es(n),u=this.Sb(n),p=this.Sf(n);return o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.vO(n),this.Tl(p,this.ea(p)-1),this.nF(n),u},a.prototype.vO=function(n){var o=this.Ya(n);if(o!=-1){for(var u=0,p=this.Ka(n);u<p;u++){var f=o;o=this.V(o),this.Qy(f)}o=this.Sf(n),this.Vj(o,this.I(o)-this.Ka(n))}this.Xj(n,0)},a.prototype.Sb=function(n){return this.nd.U(n,2)},a.prototype.es=function(n){return this.nd.U(n,1)},a.prototype.Ka=function(n){return this.nd.U(n,3)},a.prototype.ec=function(n){return(1&this.Up(n))!=0},a.prototype.mn=function(n,o){if(this.ec(n)!=o){if(0<this.Ka(n)){var u=this.Ya(n),p=this.tj(n);o?(this.Cc(p,u),this.Dc(u,p),u=this.Va(p)):(this.Cc(p,-1),this.Dc(u,-1),u=this.Va(p)),this.Zg(u,null)}this.QB(n,(1|this.Up(n))-1|(o?1:0))}},a.prototype.Sf=function(n){return this.nd.U(n,7)},a.prototype.TS=function(n){return(2&this.Up(n))!=0},a.prototype.KB=function(n,o){this.QB(n,(2|this.Up(n))-2|(o?2:0))},a.prototype.qz=function(n){if(this.YS(n))return this.Qi.get(this.sv(n));var o=new h.zb,u=this.Ya(n);if(u==-1)return 0;var p=new h.h;this.D(u,p);for(var f=0,g=0,b=this.Ka(n);g<b;g++,u=this.V(u)){var S=this.cc(u);if(S==null){if(!this.fd(u,o))continue;S=o}f+=S.Sx(p.x,p.y)}return this.fp(n,!0),this.Qi.set(this.sv(n),f),f},a.prototype.ir=function(n,o,u){o=this.Ek[o],n=this.sv(n),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(n,u)},a.prototype.uj=function(n,o){return(n=this.sv(n))<(o=this.Ek[o]).size?o.read(n):-1},a.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var n=0;n<this.Ek.length;n++)if(this.Ek[n]==null)return this.Ek[n]=h.Zc.Qh(0),n;return this.Ek.push(h.Zc.Qh(0)),this.Ek.length-1},a.prototype.xB=function(n){this.Ek[n]=null},a.prototype.UT=function(n,o,u){if(u==-1)throw h.i.O();if(o!=u){var p=this.Sb(u),f=this.es(u),g=this.Sf(u);f==-1?this.ap(g,p):this.cp(f,p),p==-1?this.bp(g,f):this.ep(p,f),this.Vj(g,this.I(g)-this.Ka(u)),this.Tl(g,this.ea(g)-1),f=o==-1?this.mv(n):this.es(o),this.ep(u,f),this.cp(u,o),o==-1?this.bp(n,u):this.ep(o,u),f==-1?this.ap(n,u):this.cp(f,u),this.Vj(n,this.I(n)+this.Ka(u)),this.Tl(n,this.ea(n)+1),this.gx(u,n)}},a.prototype.kj=function(n,o){this.wb.we(this.Va(o),this.pm()),this.yj(n,-1,this.pm())},a.prototype.qd=function(n,o){var u=this.cd(n),p=this.Na(n),f=this.V(n);p!=-1&&this.Cc(p,f);var g=this.Ka(u);if(n==this.Ya(u)&&this.Kf(u,1<g?f:-1),f!=-1&&this.Dc(f,p),n==this.tj(u)&&this.Yg(u,1<g?p:-1),p!=-1&&f!=-1){p=this.Va(p);var b=this.Va(f);o?(o=this.Uh(p))!=null&&(p=new h.h,this.wb.D(b,p),o.Rc(p)):(b=this.Va(n),o=this.Uh(b),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(u,g-1),u=this.Sf(u),this.Vj(u,this.I(u)-1),this.Qy(n),f},a.prototype.Ya=function(n){return this.nd.U(n,4)},a.prototype.tj=function(n){return this.nd.U(n,5)},a.prototype.V=function(n){return this.ud.U(n,2)},a.prototype.Na=function(n){return this.ud.U(n,1)},a.prototype.cd=function(n){return this.ud.U(n,3)},a.prototype.hc=function(n,o){return this.yj(n,-1,o)},a.prototype.$q=function(n){if(n===void 0)return this.$q(!1);if(n instanceof c)return new c(n);var o,u=-1,p=-1,f=-1,g=0,b=!1;for(o=this.md;o!=-1;o=this.ve(o))if(!n||h.ba.Ic(this.jc(o))){for(u=this.Ob(o);u!=-1;u=this.Sb(u))if(f=p=this.Ya(u),g=0,p!=-1){b=!0;break}if(b)break}return c.vP(this,o,u,p,f,g,n)},a.prototype.Pc=function(n){if(this.Kl.Pc(n),this.Te!=null)for(var o=0,u=this.Te.length;o<u;o++)this.Te[o]!=null&&this.Te[o].Pc(n)},a.prototype.lr=function(n,o,u,p){p?this.JX(n,o,u):this.IX(n,o,u)},a.prototype.Dc=function(n,o){this.ud.T(n,1,o)},a.prototype.Cc=function(n,o){this.ud.T(n,2,o)},a.prototype.cj=function(n,o){this.ud.T(n,3,o)},a.prototype.Xj=function(n,o){this.nd.T(n,3,o)},a.prototype.Kf=function(n,o){this.nd.T(n,4,o)},a.prototype.Yg=function(n,o){this.nd.T(n,5,o)},a.prototype.Tl=function(n,o){this.dd.T(n,6,o)},a.prototype.Vj=function(n,o){this.dd.T(n,5,o)},a.prototype.kJ=function(n){var o=n;do{var u=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,u),o=u}while(o!=n)},a.prototype.XB=function(n){this.gd=n},a.prototype.br=function(n){var o=this.es(n),u=this.Sb(n),p=this.Sf(n);o!=-1?this.cp(o,u):this.ap(p,u),u!=-1?this.ep(u,o):this.bp(p,o),this.Kf(n,-1),this.Yg(n,-1),this.nF(n)},a.prototype.oi=function(n,o){var u=this.Na(n),p=this.V(n);if(u!=-1&&this.Cc(u,p),p!=-1&&this.Dc(p,u),u!=-1&&p!=-1)if(u=this.Va(u),p=this.Va(p),o){if((o=this.Uh(u))!=null){var f=new h.h;this.wb.D(p,f),o.Rc(f)}}else o=this.Va(n),o=this.Uh(o),this.Zg(u,o),o!=null&&(f=new h.h,this.wb.D(u,f),o.Ec(f));this.Qy(n)},a.prototype.YS=function(n){return(4&this.Up(n))!=0},a.prototype.fp=function(n,o){this.QB(n,(4|this.Up(n))-4|(o?4:0))},a.prototype.nx=function(n,o){var u=this.ud.o;this.wb.oc();var p=this.wb.Aa[0].o;n.Wd(0,o,function(f,g){var b=u[5*f];f=u[5*g],g=p[2*b],b=p[2*b+1];var S=p[2*f];return b<(f=p[2*f+1])?-1:b>f?1:g<S?-1:g>S?1:0})},a.prototype.eS=function(){for(var n=this.md;n!=-1;n=this.ve(n))if(!h.ba.Ic(this.jc(n)))return!0;return!1},a.prototype.cC=function(n,o){for(var u=this.Ob(n),p=this.Ob(o),f=this.mv(n),g=this.mv(o),b=this.Ob(n);b!=-1;b=this.Sb(b))this.gx(b,o);for(b=this.Ob(o);b!=-1;b=this.Sb(b))this.gx(b,n);this.ap(n,p),this.ap(o,u),this.bp(n,g),this.bp(o,f),u=this.I(n),p=this.ea(n),f=this.ea(o),this.Vj(n,this.I(o)),this.Vj(o,u),this.Tl(n,f),this.Tl(o,p),u=this.dd.U(n,2),this.dd.T(n,2,this.dd.U(o,2)),this.dd.T(o,2,u)},a}(),h.hd=O})(B||(B={})),function(h){var O=function(w){function c(a,n,o,u){var p=w.call(this)||this;return p.aa=new h.l,a===void 0?p.PE():typeof a=="number"?p.QO(a,n,o,u):a instanceof h.Ta?n!==void 0?p.Su(a,n,o):p.RO(a):a instanceof h.sa?n!==void 0?p.TO(a,n):p.SO(a):a instanceof h.l?p.PO(a):p.PE(),p}return Re(c,w),c.prototype.Su=function(a,n,o){this.description=h.fe.pg(),this.aa.Pa(),a.B()||this.vu(a,n,o)},c.prototype.PO=function(a){this.description=h.fe.pg(),this.aa.L(a),this.aa.normalize()},c.prototype.SO=function(a){if(a==null)throw h.i.O();this.description=a,this.aa.Pa()},c.prototype.TO=function(a,n){if(a==null)throw h.i.O();this.description=a,this.aa.L(n),this.aa.normalize()},c.prototype.PE=function(){this.description=h.fe.pg(),this.aa.Pa()},c.prototype.RO=function(a){this.description=h.fe.pg(),this.aa.Pa(),a.B()||this.vu(a)},c.prototype.QO=function(a,n,o,u){this.description=h.fe.pg(),this.L(a,n,o,u)},c.prototype.L=function(a,n,o,u){if(this.wc(),typeof a=="number")this.aa.L(a,n,o,u);else for(this.Pa(),n=0,o=a.length;n<o;n++)this.$b(a[n])},c.prototype.Zo=function(a){if(this.wc(),!a.aT())throw h.i.O();this.aa.L(a)},c.prototype.Pa=function(){this.wc(),this.aa.Pa()},c.prototype.B=function(){return this.aa.B()},c.prototype.S=function(){return this.aa.S()},c.prototype.da=function(){return this.aa.da()},c.prototype.ik=function(){return this.aa.ik()},c.prototype.Lp=function(){return this.aa.Lp()},c.prototype.Kp=function(){return this.aa.tf()},c.prototype.$b=function(a){if(a instanceof h.h)this.wc(),this.aa.$b(a);else if(a instanceof h.l)this.wc(),this.aa.$b(a);else if(a instanceof h.Ta){if(this.wc(),!a.Bc()){var n=a.description;if(this.description!=n&&this.Ll(n),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,u=n.Ba;o<u;o++)for(var p=n.Fd(o),f=h.sa.Wa(p),g=0;g<f;g++){var b=a.Vc(p,g),S=this.Vg(p,g);S.$b(b),this.setInterval(p,g,S)}}}}else if(a instanceof c&&!a.B())for((n=a.description)!=this.description&&this.Ll(n),this.aa.$b(a.aa),o=1,u=n.Ba;o<u;o++)for(p=n.ld(o),f=h.sa.Wa(p),g=0;g<f;g++)b=a.Vg(p,g),(S=this.Vg(p,g)).$b(b),this.setInterval(p,g,S)},c.prototype.vu=function(a,n,o){if(n!==void 0){this.aa.L(a.D(),n,o),o=1;for(var u=(n=a.description).Ba;o<u;o++)for(var p=n.Fd(o),f=h.sa.Wa(p),g=0;g<f;g++){var b=a.Vc(p,g);this.setInterval(p,g,b,b)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,u=(n=a.description).Ba;o<u;o++)for(p=n.Fd(o),f=h.sa.Wa(p),g=0;g<f;g++)b=a.Vc(p,g),this.setInterval(p,g,b,b)},c.prototype.setInterval=function(a,n,o,u){if(o=typeof o=="number"?new h.Oc(o,u):o,this.wc(),a==0)if(n==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(n!=1)throw h.i.de();this.aa.G=o.pa,this.aa.H=o.wa}else this.qD(0,a,n,o.pa),this.qD(1,a,n,o.wa)},c.prototype.X=function(a,n){this.wc(),this.aa.X(a,n)},c.prototype.Pc=function(a){if(a instanceof h.Ed)this.wc(),a.hC(this.aa);else if(this.wc(),!this.aa.B()){var n=new h.JK;this.So(n),n.SS()?n.Pa():a.hC(n)}},c.prototype.copyTo=function(a){if(a.K()!=this.K())throw h.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var n=0;n<2*(this.description.Be.length-2);n++)a.la[n]=this.la[n]}},c.prototype.Ja=function(){return new c(this.description)},c.prototype.He=function(){return this.aa.rF()},c.prototype.Rb=function(){return this.aa.tR()},c.prototype.K=function(){return 197},c.prototype.Eb=function(){return 2},c.prototype.dn=function(a){this.copyTo(a)},c.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},c.prototype.So=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},c.prototype.Vg=function(a,n){var o=new h.Oc;return o.L(this.Pd(0,a,n),this.Pd(1,a,n)),o},c.prototype.If=function(a,n){n.Pf(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var u=this.description.ld(a),p=h.sa.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(0,u,f));n.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(u=this.description.ld(a),p=h.sa.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(1,u,f));n.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(u=this.description.ld(a),p=h.sa.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(0,u,f));n.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(u=this.description.ld(a),p=h.sa.Wa(u),f=0;f<p;f++)n.setAttribute(u,f,this.Pd(1,u,f));n.Db(this.aa.C,this.aa.G);break;default:throw h.i.de()}},c.prototype.hB=function(a,n){a=this.aa.hB(a),n.na(a.x,a.y)},c.prototype.fR=function(a,n){return n*(a.Qq-2)},c.prototype.sF=function(a,n,o){if(this.aa.B())throw h.i.ga("empty geometry");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=h.sa.Wa(n))throw h.i.O();var u=this.description.Rf(n);return this.qu(),0<=u?this.la[this.fR(this.description,a)+this.description.GR(u)-2+o]:h.sa.te(n)},c.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=c.Ig(this.description,0),n=c.Ig(this.description,1),o=0,u=1,p=this.description.Ba;u<p;u++){var f=this.description.ld(u),g=h.sa.Wa(f);f=h.sa.te(f);for(var b=0;b<g;b++)this.la[a+o]=f,this.la[n+o]=f,o++}}},c.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var n=h.fe.Kw(a,this.description),o=[],u=c.Ig(this.description,0),p=c.Ig(this.description,1),f=c.Ig(a,0),g=c.Ig(a,1),b=0,S=1,$=a.Ba;S<$;S++){var E=a.ld(S),C=h.sa.Wa(E);if(n[S]==-1){var k=h.sa.te(E);for(E=0;E<C;E++)o[f+b]=k,o[g+b]=k,b++}else for(k=this.description.bk(n[S])-2,E=0;E<C;E++)o[f+b]=this.la[u+k],o[g+b]=this.la[p+k],b++,k++}this.la=o}else this.la=null;this.description=a},c.prototype.Pd=function(a,n,o){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=h.sa.Wa(n))throw h.i.de();var u=this.description.Rf(n);return 0<=u?(this.qu(),this.la[c.Ig(this.description,a)+this.description.bk(u)-2+o]):h.sa.te(n)},c.prototype.qD=function(a,n,o,u){if(this.wc(),n==0)a!=0?o!=0?this.aa.H=u:this.aa.C=u:o!=0?this.aa.G=u:this.aa.v=u;else{if(o>=h.sa.Wa(n))throw h.i.de();if(!this.hasAttribute(n)){if(h.sa.yG(n,u))return;this.se(n)}n=this.description.Rf(n),this.qu(),this.la[c.Ig(this.description,a)+this.description.bk(n)-2+o]=u}},c.Ig=function(a,n){return n*(a.Be.length-2)},c.prototype.Fa=function(a){this.wc();var n=new h.l;return a.A(n),this.aa.Fa(n)},c.prototype.isIntersecting=function(a){return a instanceof h.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},c.prototype.Lu=function(a,n){this.wc(),a.B()?this.Pa():n!==void 0?this.vu(a,n,void 0):this.aa.Lu(a.Ng(),a.kh())},c.prototype.offset=function(a,n){this.wc(),this.aa.offset(a,n)},c.prototype.normalize=function(){this.wc(),this.aa.normalize()},c.prototype.tf=function(a){if(a===void 0){if(a=new h.Ta(this.description),this.B())return a;for(n=this.description.Ba,o=1;o<n;o++)for(u=this.description.Fd(o),p=h.sa.Wa(u),f=0;f<p;f++)g=.5*(this.Pd(0,u,f)+this.Pd(1,u,f)),a.setAttribute(u,f,g);return a.Db(this.aa.ik(),this.aa.Lp()),a}if(a.Pf(this.description),this.B())a.Pa();else{for(var n=this.description.Ba,o=1;o<n;o++)for(var u=this.description.ld(o),p=h.sa.Wa(u),f=0;f<p;f++){var g=.5*(this.sF(0,u,f)+this.sF(1,u,f));a.setAttribute(u,f,g)}a.Db(this.aa.tf())}},c.prototype.hz=function(){return new h.Ta(this.aa.hz())},c.prototype.contains=function(a){return a instanceof h.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},c.prototype.ZO=function(a){return this.aa.contains(a)},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.dc=function(){var a=this.description.dc();if(a=h.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)a=h.P.Vh(a,this.la[n]);return a},c.prototype.gs=function(){return this.aa.v},c.prototype.js=function(){return this.aa.G},c.prototype.fs=function(){return this.aa.C},c.prototype.hs=function(){return this.aa.H},c.prototype.ng=function(){return h.si.im(this,null)},c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},c}(h.ba);h.Hh=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){c===void 0?this.Pa():(this.v=c,this.G=a,this.C=n,this.H=o)}return w.construct=function(c,a,n,o){var u=new w;return u.v=c,u.G=a,u.C=n,u.H=o,u},w.prototype.L=function(c,a,n,o){typeof c=="number"?n!==void 0?(this.v=c,this.G=a,this.C=n,this.H=o,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof h.h?a!==void 0?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof w?this.L(c.v,c.G,c.C,c.H):c instanceof h.Oc&&(c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa))},w.prototype.bx=function(c,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=c[0].x,this.G=c[0].y,this.C=this.v,this.H=this.G;for(var n=1;n<a;n++){var o=c[n];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(c==null||c.length==0)this.Pa();else for(o=c[0],this.L(o.x,o.y),n=1;n<c.length;n++)a=c[n],this.Nk(a.x,a.y)},w.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.$b=function(c,a){typeof c=="number"?this.B()?(this.v=c,this.G=a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof h.h||c instanceof h.Od?this.$b(c.x,c.y):c instanceof w&&!c.B()&&(this.$b(c.v,c.G),this.$b(c.C,c.H))},w.prototype.Nk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)},w.prototype.X=function(c,a){this.B()||(this.v-=c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},w.prototype.scale=function(c){0>c&&this.Pa(),this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)},w.prototype.zoom=function(c,a){this.B()||this.L(this.tf(),c*this.S(),a*this.da())},w.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},w.prototype.CG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)},w.prototype.Fa=function(c){return!this.B()&&!c.B()&&(c.v>this.v&&(this.v=c.v),c.C<this.C&&(this.C=c.C),c.G>this.G&&(this.G=c.G),c.H<this.H&&(this.H=c.H),(c=this.v<=this.C&&this.G<=this.H)||this.Pa(),c)},w.prototype.hB=function(c){switch(c){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.de()}},w.prototype.iB=function(c){if(c==null||4>c.length)throw h.i.O();c[0]!=null?c[0].na(this.v,this.G):c[0]=h.h.construct(this.v,this.G),c[1]!=null?c[1].na(this.v,this.H):c[1]=h.h.construct(this.v,this.H),c[2]!=null?c[2].na(this.C,this.H):c[2]=h.h.construct(this.C,this.H),c[3]!=null?c[3].na(this.C,this.G):c[3]=h.h.construct(this.C,this.G)},w.prototype.rF=function(){return this.B()?0:this.S()*this.da()},w.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},w.prototype.ik=function(){return(this.C+this.v)/2},w.prototype.Lp=function(){return(this.H+this.G)/2},w.prototype.S=function(){return this.C-this.v},w.prototype.da=function(){return this.H-this.G},w.prototype.move=function(c,a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)},w.prototype.Lu=function(c,a){if(a!==void 0)this.move(c-this.ik(),a-this.Lp());else if(c instanceof h.h)this.Lu(c.x,c.y);else{if(!(c instanceof h.Ta))throw h.i.O();a=(this.C-this.v)/2;var n=(this.H-this.G)/2;this.v=c.Ng()-a,this.C=c.Ng()+a,this.G=c.kh()-n,this.H=c.kh()+n}},w.prototype.offset=function(c,a){this.v+=c,this.C+=c,this.G+=a,this.H+=a},w.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=c,this.C=a,c=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=c,this.H=a}},w.prototype.fn=function(c){c.na(this.v,this.G)},w.prototype.VI=function(c){c.na(this.C,this.G)},w.prototype.YI=function(c){c.na(this.v,this.H)},w.prototype.gn=function(c){c.na(this.C,this.H)},w.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.hz=function(){return h.h.construct(this.v,this.G)},w.prototype.contains=function(c,a){if(a!==void 0)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof h.Ta)return this.contains(c.Ng(),c.kh());if(c instanceof h.h)return this.contains(c.x,c.y);if(c instanceof w)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw h.i.O()},w.prototype.jm=function(c,a){if(a!==void 0)return c>this.v&&c<this.C&&a>this.G&&a<this.H;if(c instanceof h.h)return this.jm(c.x,c.y);if(c instanceof w)return c.v>this.v&&c.C<this.C&&c.G>this.G&&c.H<this.H;throw h.i.O()},w.prototype.Nb=function(c){return c==this||c instanceof w&&(!(!this.B()||!c.B())||this.v==c.v&&this.G==c.G&&this.C==c.C&&this.H==c.H)},w.prototype.dc=function(){var c=this.v;c=h.P.truncate(c^c>>>32);var a=h.P.Vh(c);return c=this.C,c=h.P.truncate(c^c>>>32),a=h.P.Vh(c,a),c=this.G,c=h.P.truncate(c^c>>>32),a=h.P.Vh(c,a),c=this.H,c=h.P.truncate(c^c>>>32),h.P.Vh(c,a)},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.uy=function(c,a){var n=this.ak(c),o=this.ak(a);if((n&o)!=0)return 0;if((n|o)==0)return 4;var u=(n!=0?1:0)|(o!=0?2:0);do{var p=a.x-c.x,f=a.y-c.y;if(p>f?(n&w.TC)!=0?((n&w.lu)!=0?(c.y+=f*(this.v-c.x)/p,c.x=this.v):(c.y+=f*(this.C-c.x)/p,c.x=this.C),n=this.ak(c)):(o&w.TC)!=0?((o&w.lu)!=0?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)):n!=0?((n&w.mu)!=0?(c.x+=p*(this.G-c.y)/f,c.y=this.G):(c.x+=p*(this.H-c.y)/f,c.y=this.H),n=this.ak(c)):((o&w.mu)!=0?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.ak(a)):(n&w.UC)!=0?((n&w.mu)!=0?(c.x+=p*(this.G-c.y)/f,c.y=this.G):(c.x+=p*(this.H-c.y)/f,c.y=this.H),n=this.ak(c)):(o&w.UC)!=0?((o&w.mu)!=0?(a.x+=p*(this.G-a.y)/f,a.y=this.G):(a.x+=p*(this.H-a.y)/f,a.y=this.H),o=this.ak(a)):n!=0?((n&w.lu)!=0?(c.y+=f*(this.v-c.x)/p,c.x=this.v):(c.y+=f*(this.C-c.x)/p,c.x=this.C),n=this.ak(c)):((o&w.lu)!=0?(a.y+=f*(this.v-a.x)/p,a.x=this.v):(a.y+=f*(this.C-a.x)/p,a.x=this.C),o=this.ak(a)),(n&o)!=0)return 0}while((n|o)!=0);return u},w.prototype.ak=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3},w.prototype.Di=function(c){return!this.B()&&(this.S()<=c||this.da()<=c)},w.prototype.ub=function(c){return c instanceof h.h?Math.sqrt(this.dK(c)):Math.sqrt(this.px(c))},w.prototype.px=function(c){var a=0,n=0,o=this.v-c.C;return o>a&&(a=o),(o=this.G-c.H)>n&&(n=o),(o=c.v-this.C)>a&&(a=o),(o=c.G-this.H)>n&&(n=o),a*a+n*n},w.prototype.dK=function(c){var a=0,n=0,o=this.v-c.x;return o>a&&(a=o),(o=this.G-c.y)>n&&(n=o),(o=c.x-this.C)>a&&(a=o),(o=c.y-this.H)>n&&(n=o),a*a+n*n},w.prototype.en=function(c){this.B()?c.Pa():c.L(this.v,this.C)},w.lu=1,w.mu=4,w.TC=3,w.UC=12,w}();h.l=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var c=function(){function a(n,o){this.ei=n,this.ZG=o}return a.prototype.qr=function(n,o,u){this.ei.FX(u,n,o,this.ZG)},a.prototype.bq=function(n){return this.ei.Tr(n,this.ZG)},a}();O=function(){function a(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return a.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.bd=function(n,o){if(!this.Rv)throw h.i.Hb();var u=new h.l;u.L(o),this.io.add(n),this.Fb.push(u)},a.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},a.prototype.DD=function(n,o){if(!this.Qv)throw h.i.Hb();var u=new h.l;u.L(o),this.io.add(n),this.Fb.push(u)},a.prototype.dF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.zD=function(n,o){if(!this.Pv)throw h.i.Hb();var u=new h.l;u.L(o),this.ew.add(n),this.rd.push(u)},a.prototype.cF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var n=!0;n;)switch(this.Yb){case 0:n=this.Bz();break;case 1:n=this.mS();break;case 2:n=this.jS();break;case 3:n=this.lS();break;case 4:n=this.QX();break;case 5:n=this.MX();break;case 6:n=this.NX();break;case 7:n=this.OX();break;case 8:n=this.tx();break;case 9:n=this.dC();break;case 10:n=this.Pz();break;case 11:n=this.eT();break;case 12:n=this.bT();break;case 13:n=this.cT();break;case 14:n=this.dT();break;case 15:n=this.fJ();break;case 16:n=this.eJ();break;default:throw h.i.Ra()}return!this.Jc},a.prototype.WB=function(n){this.ra=n},a.prototype.oz=function(n){return this.Fb[n]},a.prototype.Wy=function(n){return this.rd[n]},a.prototype.pl=function(n){return this.io.read(n)},a.prototype.jl=function(n){return this.ew.read(n)},a.Oz=function(n){return(1&n)==1},a.gq=function(n){return(1&n)==0},a.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},a.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var n=0;n<this.rd.length;n++){var o=this.rd[n];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},a.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),n=0;n<this.rd.length;n++)o=this.rd[n],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);for(n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.QX=function(){var n=this.Md.get(--this.qe),o=n>>1;return a.gq(n)?(this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=10,!0)},a.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},a.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.OX=function(){var n=this.Md.get(this.qe-1),o=this.Ff.get(this.Tg-1),u=this.Tr(n,!0),p=this.Tr(o,!1);return u>p?this.tx():u<p?this.dC():a.Oz(n)?this.tx():a.Oz(o)?this.dC():this.tx()},a.prototype.tx=function(){var n=this.Md.get(--this.qe),o=n>>1;if(a.gq(n))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(n=this.Bd.sc(this.Df);n!=-1;){var u=this.Bd.getData(n);this.ff.xj(u),this.Jj.set(u,-1),u=this.Bd.lb(n),this.Bd.kd(this.Df,n),n=u}return 0<this.ff.size()?(this.qw.zB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Xf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.dC=function(){var n=this.Ff.get(--this.Tg),o=n>>1;if(a.gq(n))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(n=this.Bd.sc(this.Ef);n!=-1;){var u=this.Bd.getData(n);this.sd.xj(u),this.Kj.set(u,-1),u=this.Bd.lb(n),this.Bd.kd(this.Ef,n),n=u}return 0<this.sd.size()?(this.qo.zB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=4,!0},a.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var n=this.Ff.get(this.Tg)>>1;return this.ff.xj(n),this.Yb=7,!0},a.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=7,!0},a.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var n=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var n=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(n,o,u){this.Cm==null&&(this.Cm=new h.Zt),u=new c(this,u),this.Cm.sort(n,0,o,u)},a.prototype.FX=function(n,o,u,p){var f=this;n.Wd(o,u,function(g,b){var S=f.Tr(g,p),$=f.Tr(b,p);return S<$||S==$&&a.gq(g)&&a.Oz(b)?-1:1})},a.prototype.Tr=function(n,o){var u=.5*this.ra;return o?(o=this.Fb[n>>1],a.gq(n)?o.G-u:o.H+u):(o=this.rd[n>>1],a.gq(n)?o.G-u:o.H+u)},a}(),h.sC=O}(B||(B={})),function(h){var O=function(){function w(){}return w.construct=function(c,a,n,o,u,p){var f=new w;return f.v=c,f.G=a,f.Xe=n,f.C=o,f.H=u,f.Dg=p,f},w.prototype.Pa=function(){this.Xe=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.SS=function(){return isNaN(this.Xe)},w.prototype.L=function(c,a,n,o,u,p){o!==void 0?typeof c=="number"?(this.v=c,this.G=a,this.Xe=n,this.C=o,this.H=u,this.Dg=p):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*n,this.H=this.G+n,this.Xe=c.z-.5*o,this.Dg=this.Xe+o):(this.v=c,this.G=a,this.Xe=n,this.C=c,this.H=a,this.Dg=n)},w.prototype.move=function(c){this.v+=c.x,this.G+=c.y,this.Xe+=c.z,this.C+=c.x,this.H+=c.y,this.Dg+=c.z},w.prototype.copyTo=function(c){c.v=this.v,c.G=this.G,c.C=this.C,c.H=this.H},w.prototype.Nk=function(c,a,n){this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>n?this.Xe=n:this.Dg<n&&(this.Dg=n):this.Dg=this.Xe=n},w.prototype.$b=function(c,a,n){if(typeof c=="number")this.B()?(this.v=c,this.G=a,this.Xe=n,this.C=c,this.H=a,this.Dg=n):this.Nk(c,a,n);else if(c instanceof h.Od)this.$b(c.x,c.y,c.z);else{if(!(c instanceof w))throw h.i.O();c.B()||(this.$b(c.v,c.G,c.Xe),this.$b(c.C,c.H,c.Dg))}},w.prototype.construct=function(c,a,n){c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa,this.Xe=n.pa,this.Dg=n.wa)},w.prototype.iB=function(c){if(c==null||8>c.length)throw h.i.O();c[0]=new h.Od(this.v,this.G,this.Xe),c[1]=new h.Od(this.v,this.H,this.Xe),c[2]=new h.Od(this.C,this.H,this.Xe),c[3]=new h.Od(this.C,this.G,this.Xe),c[4]=new h.Od(this.v,this.G,this.Dg),c[5]=new h.Od(this.v,this.H,this.Dg),c[6]=new h.Od(this.C,this.H,this.Dg),c[7]=new h.Od(this.C,this.G,this.Dg)},w.prototype.bx=function(c){if(c==null||c.length==0)this.Pa();else{var a=c[0];for(this.L(a.x,a.y,a.z),a=1;a<c.length;a++){var n=c[a];this.Nk(n.x,n.y,n.z)}}},w}();h.JK=O}(B||(B={})),function(h){(function(O){O.Ra=function(){var w=Error();return w.message="Internal Error",w},O.Fe=function(){var w=Error();return w.message="Not Implemented",w},O.Zk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},O.Hb=function(){var w=Error();return w.message="Invalid Call",w},O.O=function(w){var c=Error();return c.message="Illegal Argument Exception",w!==void 0&&(c.message+=": "+w),c},O.hu=function(w){var c=Error();return c.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",c},O.ga=function(w){var c=Error();return c.message="Geometry Exception: "+w,c},O.BK=function(){var w=Error();return w.message="Assert Failed Exception",w},O.de=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},O.RC=function(){var w=Error();return w.message="UserCancelException",w}})(h.i||(h.i={}))}(B||(B={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(B||(B={})),function(h){var O=function(){function a(n,o){this.Xa=n,this.AH=o,this.GH=-1,this.ul=!1}return a.prototype.re=function(){},a.prototype.next=function(){if(++this.GH==this.AH.I())return null;var n=this.AH.Oa(this.GH);n.scale(this.Xa.fc);var o=new h.Ea;return this.Xa.ny(n,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),w=function(){function a(n,o,u){this.Xa=n,this.tw=o,this.Zn=!1,this.fo=u,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.wk=[]}return a.prototype.re=function(){},a.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var n=h.ba.kg(this.sq);return h.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}n=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var o=this.wk.length=0,u=new h.h,p=new h.h,f=[0];this.td.Ia()&&8>this.AA;){var g=this.td.ia();if(u.N(g.bc()),p.N(g.xc()),u.scale(this.Xa.fc),p.scale(this.Xa.fc),h.ej.Ou(u,p)?u.x=p.x:h.ej.Mu(u,p)&&(p.x=u.x),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,u,p,this.Xa.LA,this.Xa.at,f,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(g=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,g,g.length-1)),h.ej.Nu(u,p)?(this.sq.Pa(),this.Xa.ny(u,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(f[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}n==null&&(n=new h.Ea).$k(null,0),this.JD(n),o++}if(this.dw[0]=0,0<o){for(f=this.td.xb();0<o;)this.td.ni(),u.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.kk())),u.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(h.ej.Ou(u,p)?u.x=p.x:h.ej.Mu(u,p)&&(p.x=u.x)),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,u,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(n),o--;return u.N(this.tw.Oa(this.td.xb())),u.scale(this.Xa.fc),c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,u,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.td.Wb(f),this.td.ia(),o=h.ua.mj(null,n,!0),h.Hg.Ok(n,o,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),n=h.ba.kg(this.sq),h.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.JD=function(n){var o=this.wk[0],u=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var f=this.fi+1.570796326794897;u=f+3.141592653589793-(this.fi-this.Pj[0])}else u=(f=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var g=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),b=!1;if(Math.abs(u-f)<=.5*this.Xa.co)if(g){var S=n.Oa(n.I()-2);S.scale(this.Xa.fc);var $=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,S.x,S.y,$),S=$.u;S<=f;)S+=6.283185307179586;for(;S>f;)S-=6.283185307179586;S<u&&(b=!0)}else b=!0;b?(n.yB(0,n.I()-1),this.ul||((o=new h.h).N(n.Oa(n.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<o.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),g||(u=.5*(u+f))):(g?((f=new h.h).N(o),f.scale(1/this.Xa.fc),n.xf(0,-1,f)):c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],f,u,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.AA+=1)}c.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,u,p,this.ul,this.uk,n),this.fi=this.Is[0]},a.prototype.sy=function(n,o){return this.Xa.sy(this.wk,n,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),c=function(){function a(){}return a.buffer=function(n,o,u,p,f,g){if(n==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(n.B())return new h.Ea(n.description);var b=new a;b.Sg=o,b.Kc=h.cb.tc(o);var S=h.cb.xv(b.Kc);if(b.Vb=g,b.Ub=h.cb.gv(b.Kc),b.lc=S*(2-S),b.fc=b.Kc.Id().ci,b.ra=b.Sg.Mn(),b.Cq=b.Kc.Mn(),b.at=b.Cq*b.fc,b.Bq=1.570796326794897/b.fc,b.KY=3.141592653589793/b.fc,b.Ls=6.283185307179586/b.fc,b.LY=b.Ls/6,b.GA=0,b.JY=1.5707963267948966*b.Ub/b.GA,u==4?(b.Ae=2,b.Yv=!0):(b.Ae=u,b.Yv=!1),b.La=p,b.sb=Math.abs(p),isNaN(f)||.001>f?b.tX():b.bo=f,u=n.K(),h.ba.zd(u)?((u=new h.Ua(n.description)).pc(n,!0),n=u,u=1607):u==197&&(u=new h.l,n.A(u),u.S()<=b.ra||u.da()<=b.ra?((u=new h.Ua(n.description)).bd(n,!1),n=u,u=1607):((u=new h.Ea(n.description)).bd(n,!1),n=u,u=1736)),b.uX(),h.ba.Tn(u)||b.vX(),b.sb<=.5*b.bo)return u!=1736?new h.Ea(n.description):b.Yv?n:h.ej.Sr(n,b.Sg,b.Ae,b.LA,-1,g);if(0>b.La&&u!=1736)return new h.Ea(n.description);if(b.Yv&&h.ba.Ic(u)?(o=h.ej.Sr(n,o,4,NaN,b.bo,g),n=h.cb.Bh(o,b.Sg,b.Kc)):n=h.cb.Bh(n,b.Sg,b.Kc),(n=h.Jh.nj(n,b.Kc)).B())return new h.Ea(n.description);switch(!b.Yv&&h.ba.Ic(u)&&(n=h.ej.kI(b.fc,n)),n=a.GX(n,b.Kc),u){case 1736:o=b.PN(n);break;case 1607:o=b.QN(n);break;case 550:o=b.NN(n);break;case 33:o=b.ON(n);break;default:throw h.i.ga("corrupted_geometry")}return(b=h.cb.Bh(o,b.Kc,b.Sg)).Ll(n.description),b},a.prototype.PN=function(n){var o=new h.Ea;n=new w(this,n,o),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),n=h.kp.pj(n,this.Kc,2);var u=new h.Ed;return u.scale(1/this.fc,1/this.fc),o.Pc(u),o=h.kp.pj(o,this.Kc,2),0<=this.La?h.Ih.local().W(o,n,this.Kc,this.Vb):h.mp.local().W(o,n,this.Kc,this.Vb)},a.prototype.QN=function(n){return n=new w(this,n,null),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),h.kp.pj(n,this.Kc,2)},a.prototype.NN=function(n){return n=new O(this,n),n=h.Ih.local().W(n,this.Kc,this.Vb).next(),h.kp.pj(n,this.Kc,2)},a.prototype.ON=function(n){(n=n.D()).scale(this.fc);var o=new h.Ea;return this.ny(n,!1,o),h.kp.pj(o,this.Kc,2)},a.prototype.sy=function(n,o,u,p,f,g){var b=n[0],S=n[n.length-1],$=b.y>S.y?b.y:S.y,E=h.F.q(this.Ub,this.lc,b.y<S.y?b.y:S.y);if($=h.F.q(this.Ub,this.lc,$),.001<this.GA-(E+o+this.sb)&&.001<this.GA+($-o-this.sb))return!1;E=(o=u-1.570796326794897)-3.141592653589793,$=o+3.141592653589793;var C=(u=p+1.570796326794897)+3.141592653589793,k=[NaN],L=[NaN],N=[NaN],U=[NaN];if(p=!1,a.ZI(this.Ub,this.lc,this.sb,b,o,E,S,u,k,L),a.ZI(this.Ub,this.lc,this.sb,S,C,u,b,E,N,U),(u<k[0]&&k[0]<C||u<L[0]&&L[0]<C)&&(p=!0),p||(E<N[0]&&N[0]<o||E<U[0]&&U[0]<o)&&(p=!0),!p&&f)return!1;for(var H=[],j=n.length-1;0<=j;j--)H.push(n[j]);return g.Pa(),g.$k(null,0),j=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,n,o,u,f,j,g),a.Jr(this.Ub,this.lc,this.fc,this.sb,S,u,C,this.co,f,j,g,k[0],L[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,H,C,$,f,j,g),a.Jr(this.Ub,this.lc,this.fc,this.sb,b,E,o,this.co,f,j,g,N[0],U[0]),n=!1,f||(n=this.DE(this.fc,g)),p||n},a.prototype.ny=function(n,o,u){u.Pa(),u.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,n,-this.co,6.283185307179586,this.co,o,[0],u,NaN,NaN),o||this.DE(this.fc,u)},a.prototype.DE=function(n,o){var u=this.qO(n,o);return n=this.rO(n,o),u||n},a.prototype.qO=function(n,o){var u=o.I(),p=!1,f=new h.l;if(o.A(f),!h.s.$(f.H*n,1.570796326794897)&&!h.s.$(f.G*n,-1.570796326794897))return!1;var g=new h.h;for(--u;0<=u;u--)o.D(u,g),(g.y==f.H&&h.s.$(g.y*n,1.570796326794897)||g.y==f.G&&h.s.$(g.y*n,-1.570796326794897))&&(p=!0,this.JI(g,u,o));return p},a.prototype.rO=function(n,o){var u=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(u.x-p.x)*n?(this.QV(o),!0):this.pO(o)},a.prototype.pO=function(n){return 0>n.He()&&(this.PV(n),!0)},a.prototype.JI=function(n,o,u){var p=u.I(),f=0<o?o-1:p-1;if(p=u.Oa(o<p-1?o+1:0),f=u.Oa(f),!h.s.$(p.y,n.y)&&!h.s.$(p.x,n.x)){var g=new h.h;g.na(p.x,n.y),u.Db(o,g)}h.s.$(f.y,n.y)||h.s.$(f.x,n.x)||((p=new h.h).na(f.x,n.y),u.xf(0,o,p))},a.prototype.QV=function(n){var o=new h.Ea,u=new h.Ea,p=new h.Ed,f=n.Oa(0),g=n.Oa(n.I()-1),b=new h.h;f.x>g.x?(g=this.Bq,p.ig(-this.Ls,0)):(g=-this.Bq,p.ig(this.Ls,0)),o.add(n,!1),n.Pa(),u.add(o,!1),u.Pc(p),f=new h.l,u.A(f),f.X((this.Ls-f.S())/2,0),f.G=-this.Bq,f.H=this.Bq;for(var S=0;S<u.I();S++)u.D(S,b),o.xf(0,-1,b);for(u.Pc(p),S=0;S<u.I();S++)u.D(S,b),o.xf(0,-1,b);u=o.Oa(0),p=o.Oa(o.I()-1),b.na(p.x,g),o.xf(0,-1,b),b.na(.5*(p.x+u.x),g),o.xf(0,-1,b),b.na(u.x,g),o.xf(0,-1,b),o=h.Jh.ms(o,this.Kc,2,!0,f.v),o=h.Jh.ms(o,this.Kc,2,!0,f.C),o=h.Vd.clip(o,f,this.Cq,NaN),n.add(o,!1)},a.prototype.PV=function(n){var o=new h.l;n.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,n.$k(null,0);var u=new h.h;u.na(o.v,o.G),n.xf(1,-1,u),u.na(o.v,o.H),n.xf(1,-1,u),u.na(.5*(o.v+o.C),o.H),n.xf(1,-1,u),u.na(o.C,o.H),n.xf(1,-1,u),u.na(o.C,o.G),n.xf(1,-1,u),u.na(.5*(o.v+o.C),o.G),n.xf(1,-1,u)},a.my=function(n,o,u,p,f,g,b,S,$,E,C){var k=null;$||((k=new h.h).Sc(),0<C.I()&&(k.N(C.Oa(C.I()-1)),k.scale(u)));var L=new h.ha(0),N=new h.ha(0),U=new h.ha(0),H=new h.h,j=new h.h,K=g[g.length-1];u=1/u;for(var se=0;se<g.length;se++){var ne=g[se];if(se==0)var pe=b;else se==g.length-1?pe=S:(h.kb.xd(n,o,K.x,K.y,ne.x,ne.y,null,null,L,f),pe=L.u-1.570796326794897);h.kb.Ai(n,o,ne.x,ne.y,p,pe,N,U),$?j.na(N.u,U.u):(H.na(N.u,U.u),a.bJ(ne.x,H.x,k.x,E),j.na(E[0]+H.x,H.y),k.N(j)),j.scale(u),C.xf(0,-1,j)}},a.Jr=function(n,o,u,p,f,g,b,S,$,E,C,k,L){if(!(b-g<S)){var N=new h.ha(0),U=new h.ha(0),H=new h.h,j=new h.h,K=null;$||((K=new h.h).Sc(),0<C.I()&&(K.N(C.Oa(C.I()-1)),K.scale(u)));var se=h.P.truncate(Math.ceil(g/S)),ne=se++*S;for(ne==g&&(ne=se++*S),u=1/u;ne<b+S&&(g<k&&k<ne?(ne=k,se--):g<L&&L<ne&&(ne=L,se--),!(ne>=b));)h.kb.Ai(n,o,f.x,f.y,p,ne,N,U),$?j.na(N.u,U.u):(H.na(N.u,U.u),a.bJ(f.x,H.x,K.x,E),j.na(E[0]+H.x,H.y),K.N(j)),j.scale(u),C.xf(0,-1,j),g=ne,ne=se++*S}},a.ZI=function(n,o,u,p,f,g,b,S,$,E){var C=new h.h,k=new h.h,L=new h.ha(0),N=new h.ha(0);for(h.kb.Ai(n,o,p.x,p.y,u,f,L,N),C.na(L.u,N.u),h.kb.Ai(n,o,p.x,p.y,u,g,L,N),k.na(L.u,N.u),u=new h.ha(0),h.kb.Sy(n,o,b.x,b.y,C.x,C.y,u),$[0]=u.u,h.kb.Sy(n,o,b.x,b.y,k.x,k.y,u),E[0]=u.u;$[0]<=E[0];)$[0]+=6.283185307179586;for(;$[0]>E[0];)$[0]-=6.283185307179586;for(;$[0]>=S;)$[0]-=6.283185307179586,E[0]-=6.283185307179586;for(;$[0]<S;)$[0]+=6.283185307179586,E[0]+=6.283185307179586},a.bJ=function(n,o,u,p){if(isNaN(u)){for(;3.141592653589793<p[0]+o-n;)p[0]-=6.283185307179586;for(;3.141592653589793<n-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-u?p[0]-=6.283185307179586:3.141592653589793<u-(p[0]+o)&&(p[0]+=6.283185307179586)},a.GX=function(n,o){var u=n.K(),p=h.ba.Ic(u)?n.ea():u==550?n.I():1;if(p==1)return n;var f=new h.ja(0);f.resize(p);for(var g=[],b=new h.l,S=0;S<p;S++){if(f.write(S,S),h.ba.Ic(u)){n.Tj(S,b);var $=b.tf()}else $=n.Oa(S);$=h.SK.WX(o,$),g[S]=$}for(f.Wd(0,f.size,function(E,C){return g[E]<g[C]?-1:g[E]>g[C]?1:0}),o=n.Ja(),S=0;S<p;S++)b=f.read(S),h.ba.Ic(u)?o.addPath(n,b,!0):o.Gd(n,b,b+1);return o},a.prototype.uX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new h.h;o.na(0,10*this.fc);var u=45*this.fc,p=new h.ha(0),f=new h.ha(0),g=new h.ha(0),b=new h.ha(0),S=new h.ha(0),$=new h.ha(0),E=new h.ha(0),C=new h.ha(0),k=new h.h,L=new h.h,N=new h.h,U=new h.h;h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,0,p,f),k.na(p.u,f.u),h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,u,g,b),L.na(g.u,b.u),p=new h.ha(0),f=new h.ha(0);for(var H=new h.ha(0);h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,.5*(0+u),S,$),N.na(S.u,$.u),h.kb.xd(this.Ub,this.lc,k.x,k.y,L.x,L.y,p,f,null,2),h.kb.qj(this.Ub,this.lc,k.x,k.y,.5*p.u,f.u,E,C,2),U.na(E.u,C.u),h.kb.xd(this.Ub,this.lc,N.x,N.y,U.x,U.y,H,null,null,2),!(H.u<=this.bo);)u*=.9,h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,u,g,b),L.na(g.u,b.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(u-0))},a.prototype.vX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new h.h,u=new h.h;o.na(0,10*this.fc),u.na(10*this.fc,10*this.fc);var p=new h.ha(0),f=new h.ha(0),g=new h.ha(0);h.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,g,p,f,this.Ae);var b=new h.ha(0),S=new h.ha(0),$=new h.ha(0),E=new h.ha(0),C=new h.h,k=new h.ha(0),L=new h.ha(0),N=new h.ha(0),U=new h.ha(0),H=new h.ha(0),j=new h.ha(0),K=new h.ha(0),se=new h.ha(0),ne=new h.ha(0),pe=new h.h,ce=new h.h,_e=new h.h,Oe=new h.h,Ce=1;p=p.u,f=f.u+1.570796326794897,g=g.u,h.kb.Ai(this.Ub,this.lc,o.x,o.y,n,p-1.570796326794897,L,N),pe.na(L.u,N.u),h.kb.Ai(this.Ub,this.lc,u.x,u.y,n,f,U,H),ce.na(U.u,H.u),L=new h.ha(0),N=new h.ha(0),f=new h.ha(0);for(var st=new h.ha(0);h.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+Ce)*g,p,b,S,this.Ae),C.na(b.u,S.u),h.kb.xd(this.Ub,this.lc,o.x,o.y,C.x,C.y,null,null,k,this.Ae),h.kb.Ai(this.Ub,this.lc,C.x,C.y,n,k.u+1.570796326794897,j,K),_e.na(j.u,K.u),h.kb.xd(this.Ub,this.lc,pe.x,pe.y,ce.x,ce.y,L,N,null,2),h.kb.qj(this.Ub,this.lc,pe.x,pe.y,.5*L.u,N.u,se,ne,2),Oe.na(se.u,ne.u),h.kb.xd(this.Ub,this.lc,_e.x,_e.y,Oe.x,Oe.y,f,null,null,2),!(f.u<=this.bo);)Ce*=.9,h.kb.qj(this.Ub,this.lc,o.x,o.y,Ce*g,p,$,E,this.Ae),u.na($.u,E.u),h.kb.xd(this.Ub,this.lc,o.x,o.y,u.x,u.y,null,null,st,this.Ae),h.kb.Ai(this.Ub,this.lc,u.x,u.y,n,st.u+1.570796326794897,U,H),ce.na(U.u,H.u);1e5<(n=Ce*g)&&(n=1e5),this.LA=n},a.prototype.tX=function(){var n=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/n&&(n=this.sb/500),.01>n&&(n=.01),this.bo=n},a}();h.QK=c}(B||(B={})),function(h){var O=function(){function w(){}return w.Of=function(c,a){var n=new h.h;n.N(a),c.push(n)},w.wp=function(c,a){c.add(a.x),c.add(a.y)},w.cB=function(c){c.Dh(c.size-2)},w.jB=function(c,a){a.na(c.get(c.size-2),c.get(c.size-1))},w.Sr=function(c,a,n,o,u,p){if(c==null)throw h.i.O();var f=c.K();if(c.B()||h.ba.Tn(f))return c;var g=new w;g.Sg=a,g.Kc=h.cb.tc(a);var b=h.cb.xv(g.Kc);if(g.Vb=p,g.Ub=h.cb.gv(g.Kc),g.lc=b*(2-b),g.fc=g.Kc.Id().ci,g.Cq=g.Kc.Mn(),g.at=g.Cq*g.fc,g.vA=o,g.uA=u,g.Ae=n,f==197?(n=new h.Ea(c.description)).bd(c,!1):h.ba.zd(f)?(n=new h.Ua(c.description)).pc(c,!0):n=c,g.Ae!=4){if((a=g.Sg.Nb(g.Kc)==0?h.cb.Bh(n,g.Sg,g.Kc):h.Jh.nj(n,g.Kc)).B())return a;a=w.kI(g.fc,a),a=g.Uy(a),a=h.kp.pj(a,g.Kc,g.Ae),g=h.cb.Bh(a,g.Kc,g.Sg)}else{if(h.Gg.Tb(a)==2?(c=h.cb.ol(),(a=h.Zj.local().W(n,c,a,p))==c&&(a=new h.Ea,c.copyTo(a))):a=h.Jh.nj(n,g.Kc),a.B())return a;g=g.yX(a)}return g},w.kI=function(c,a){var n=new h.l;if(a.yc(n),3.141592653589793>n.S()*c)return a;var o=!1;n=a.Ha();for(var u=new h.h,p=new h.h;n.ab();)for(;n.Ia();){var f=n.ia();if(u.N(f.bc()),p.N(f.xc()),u.scale(c),p.scale(c),3.141592653589793<Math.abs(u.x-p.x)){var g=w.Nu(u,p);if(!g){o=!0;break}if(6.283185307179586<Math.abs(u.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var b=1<a.description.Ba,S=new h.h,$=new h.h,E=new h.h,C=new h.h,k=new h.Ta;for(n.aj();n.ab();)for(var L=NaN,N=[0];n.Ia();){if(f=n.ia(),u.N(f.bc()),p.N(f.xc()),u.scale(c),p.scale(c),isNaN(L)?(w.Yi(u.x,NaN,N),$.N(u)):$.N(E),L=$.x,g=w.Nu(u,p)){if(6.283185307179586<p.x-u.x)for(;6.283185307179586<p.x-u.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-u.x)for(;-6.283185307179586>p.x-u.x;)p.x+=6.283185307179586;w.Yi(p.x,NaN,N),E.N(p)}else S.N(p),w.vU(S),w.Yi(S.x,L,N),E.na(N[0]+S.x,S.y);.5>Math.abs(E.x-p.x)&&E.N(p),b?(f.Vw(0,k),C.N($),C.scale(1/c),k.Db(C),(g=n.xm())?o.nf(k):o.lineTo(k),n.Sn()&&!a.ec(n.gb)&&(f.Vw(1,k),C.N(E),C.scale(1/c),k.Db(C),o.lineTo(k))):((g=n.xm())&&o.Cz(null,0),f=o.ea()-1,C.N($),C.scale(1/c),o.xf(f,-1,C),n.Sn()&&!a.ec(n.gb)&&(C.N(E),C.scale(1/c),o.xf(f,-1,C)))}return o},w.oF=function(c,a,n,o,u,p,f,g,b,S,$,E){var C=new h.h,k=new h.h,L=0<o.compare(u);w.aJ(L,o,u,C,k),w.pF(c,a,n,C,k,p,NaN,f,g,b,S,null,$,E),L&&w.aC(b,S,null,$)},w.prototype.Uy=function(c){var a=c.Ja(),n=c.Ha(),o=[],u=null,p=null,f=1<c.description.Ba;f&&(u=new h.ce(0),p=new h.jg);for(var g=[0],b=new h.h,S=new h.h,$=new h.h,E=new h.h;n.ab();)for(g[0]=0;n.Ia();){var C=n.ia();b.N(C.bc()),S.N(C.xc()),b.scale(this.fc),S.scale(this.fc);var k=0<b.compare(S);w.aJ(k,b,S,$,E),o.length=0,u!=null&&u.Dh(0),0<this.vA?w.pF(this.Ub,this.lc,this.Ae,$,E,this.vA,this.uA,this.at,null,null,null,f?u:null,o,g):w.WQ(this.Ub,this.lc,this.Ae,$,E,this.uA,this.at,f?u:null,o,g),k&&w.aC(null,null,f?u:null,o),o[0].N(C.bc()),o[o.length-1].N(C.xc());for(var L=1;L<o.length-1;L++)o[L].scale(1/this.fc);f?(k=w.$I(k,C,p),w.OD(n.xm(),n.Sn()&&!c.ec(n.gb),C,k,u,o,a)):w.ND(n.xm(),n.Sn()&&!c.ec(n.gb),o,a)}return a},w.prototype.yX=function(c){var a=c.Ja(),n=c.Ha(),o=[],u=null,p=new h.jg,f=1<c.description.Ba;for(f&&(u=new h.ce(0));n.ab();)for(;n.Ia();){var g=n.ia(),b=g.bc(),S=g.xc();b=0<b.compare(S),S=w.$I(b,g,p),o.length=0,u!=null&&u.Dh(0),w.xX(this.Ub,this.lc,this.fc,S,this.Sg,this.vA,this.uA,f?u:null,o),b&&w.aC(null,null,f?u:null,o),f?w.OD(n.xm(),n.Sn()&&!c.ec(n.gb),g,S,u,o,a):w.ND(n.xm(),n.Sn()&&!c.ec(n.gb),o,a)}return a},w.ND=function(c,a,n,o){c&&o.Cz(null,0),c=o.ea()-1;var u=n.slice(0);o.lG(c,u,u.length-1),a&&o.xf(c,-1,n[n.length-1])},w.OD=function(c,a,n,o,u,p,f){var g=new h.Ta;if(n.Vo(g),c?f.nf(g):f.lineTo(g),2<p.length){c=o.Rb();for(var b=1;b<p.length-1;b++){var S=o.IG(u.get(b)*c);o.Vw(S,g),g.Db(p[b]),f.lineTo(g)}}a&&(n.Ro(g),f.lineTo(g))},w.pF=function(c,a,n,o,u,p,f,g,b,S,$,E,C,k){var L=new h.ha(0),N=new h.ha(0),U=new h.ha(0);h.kb.xd(c,a,o.x,o.y,u.x,u.y,U,L,N,n),U=U.u;var H=L=L.u;0>H&&(H+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),b!=null&&(b[0]=U),S!=null&&(S[0]=H),$!=null&&($[0]=N),S=b=NaN,E!=null&&(b=((S=h.F.Ch(c,a))-($=h.F.q(c,a,o.y)))/U,S=(S+$)/U),$=w.Ou(o,u),N=w.Mu(o,u),H=$||N;var j=w.AE(o,u,g),K=new h.ha(0),se=new h.ha(0),ne=new h.h,pe=new h.h,ce=new h.h;w.Yi(o.x,NaN,k);var _e=[k[0]];if(U<=p)w.Of(C,o),w.Yi(u.x,NaN,k),E!=null&&E.add(0),H?($&&w.fB(o,u,E,C),N&&w.dB(o,u,E,C)):j?w.eB(o,u,L,b,S,E,C):0<f&&(pe.na(o.x-_e[0],o.y),ne.na(u.x-k[0],u.y),w.Ty(c,a,n,o,U,L,pe,ne,0,1,f,E,C,_e)),w.Of(C,u);else{var Oe=U/((p=1+h.P.truncate(Math.ceil(U/p)))-1),Ce=new h.h,st=0;w.Of(C,o),Ce.N(o),pe.na(o.x-k[0],o.y),E!=null&&E.add(0);for(var qe=1;qe<p;qe++){if(qe<p-1){h.kb.qj(c,a,o.x,o.y,qe*Oe,L,K,se,n),ne.na(K.u,se.u),w.Yi(ne.x,Ce.x,k),ce.na(k[0]+ne.x,ne.y);var Et=qe/(p-1)}else w.Yi(u.x,NaN,k),ne.na(u.x-k[0],u.y),ce.N(u),Et=1;H?(qe==1&&$&&w.fB(o,ce,E,C),qe==p-1&&N&&w.dB(Ce,u,E,C)):j?w.zE(Ce,ce,g)&&(o.x<u.x?Ce.x>ce.x&&(k[0]+=6.283185307179586,ce.na(k[0]+ne.x,ne.y)):Ce.x<ce.x&&(k[0]-=6.283185307179586,ce.na(k[0]+ne.x,ne.y)),w.eB(Ce,ce,L,b,S,E,C)):0<f&&w.Ty(c,a,n,o,U,L,pe,ne,st,Et,f,E,C,_e),w.Of(C,ce),E!=null&&E.add(Et),Ce.N(ce),pe.N(ne),_e[0]=k[0],st=Et}}},w.WQ=function(c,a,n,o,u,p,f,g,b,S){var $=new h.ha(0),E=new h.ha(0),C=new h.ha(0);h.kb.xd(c,a,o.x,o.y,u.x,u.y,C,$,E,n),E=C.u,$=$.u;var k=C=NaN;if(g!=null){k=h.F.Ch(c,a);var L=h.F.q(c,a,o.y);C=(k-L)/E,k=(k+L)/E}L=w.Ou(o,u);var N=w.Mu(o,u),U=L||N;f=w.AE(o,u,f);var H=w.Nu(o,u);H=U||f||H,w.Yi(o.x,NaN,S);var j=new h.h;w.Of(b,o),j.N(o),g!=null&&g.add(0),H?(U?(L&&w.fB(o,u,g,b),N&&w.dB(o,u,g,b)):f&&w.eB(o,u,$,C,k,g,b),w.Yi(u.x,NaN,S),w.Of(b,u)):E<=p?(w.Yi(u.x,NaN,S),w.Of(b,u)):(C=new h.h,f=new h.h,C.N(o),f.N(u),C.x-=S[0],f.x-=S[0],-3.141592653589793>f.x?f.x+=6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),w.Ty(c,a,n,o,E,$,C,f,0,1,p,g,b,S),w.Of(b,u),w.Yi(u.x,NaN,S)),g!=null&&g.add(1)},w.Ty=function(c,a,n,o,u,p,f,g,b,S,$,E,C,k){var L=new h.h,N=new h.h;L.na(f.x+k[0],f.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var U=new h.ha(0),H=new h.ha(0),j=new h.ha(0),K=new h.h,se=new h.h,ne=new h.h,pe=new h.h;K.N(f),se.N(g),f=new h.ce(0),g=new h.ce(0),w.wp(f,se),g.add(S);var ce=new h.h,_e=new h.zb,Oe=[];for(w.TJ(4,Oe);0<f.size;){for(var Ce,st=!1,qe=NaN,Et=0;3>Et;Et++)if(Ce=Oe[Et]*S+(1-Oe[Et])*b,h.kb.qj(c,a,o.x,o.y,Ce*u,p,U,H,n),ne.na(U.u,H.u),Et==0&&(qe=Ce,pe.N(ne)),w.RW(K,ne,se,_e),_e.ic(_e.ge(ne,!0),ce),h.kb.xd(c,a,ne.x,ne.y,ce.x,ce.y,j,null,null,2),j.u>$){st=!0;break}st?(se.N(pe),S=qe,w.wp(f,se),g.add(S)):(w.cB(f),g.Gn(g.size-1,1,g.size-1),0<f.size&&(w.Yi(se.x,L.x,k),N.na(k[0]+se.x,se.y),w.Of(C,N),L.N(N),E!=null&&E.add(S),K.N(se),b=S,w.jB(f,se),S=g.get(g.size-1)))}},w.xX=function(c,a,n,o,u,p,f,g,b){var S=new h.h,$=new h.h,E=new h.h,C=new h.h,k=new h.h,L=new h.h,N=new h.h,U=new h.h,H=new h.h,j=new h.h,K=new h.ha(0),se=new h.ha(0),ne=new h.h,pe=[[],[]],ce=h.Gg.Tb(u)==1;u=u.Yd(0);var _e=o.bc(),Oe=o.xc();ce?(L.na(_e.x*n,_e.y*n),N.na(Oe.x*n,Oe.y*n)):(pe[0][0]=_e.x,pe[0][1]=_e.y,pe[1][0]=Oe.x,pe[1][1]=Oe.y,h.cb.wt(),L.x=pe[0][0]*n,L.y=pe[0][1]*n,N.x=pe[1][0]*n,N.y=pe[1][1]*n);var Ce=0,st=0,qe=1,Et=o.Rn();S.N(_e),$.N(Oe),Oe=new h.ce(0);var xt=new h.ce(0),et=new h.ce(0);w.wp(Oe,$),w.wp(xt,N),et.add(qe),w.Of(b,S),g!=null&&g.add(st);var xi=[],nr=0<f?Et?5:3:Et?5:1;w.TJ(nr,xi);for(var Ei=new h.ha(0),ei=new h.ha(0),ti=new h.ha(0),zt=new h.ha(0),ki=new h.ha(0),jt=new h.ha(0),dr=new h.ha(0);0<xt.size;){var Ut=!1,Br=NaN;for(h.kb.xd(c,a,L.x,L.y,N.x,N.y,Ei,ei,null,2),_e=0;_e<nr&&!(_e==0&&(!Et&&0>=f&&Ei.u<=p&&3.141592653589793>Math.abs(L.x-N.x)||o.Tx(st,qe)<=u));_e++){var ui=xi[_e]*qe+(1-xi[_e])*st;if(o.ic(ui,E),ce?U.na(E.x*n,E.y*n):(pe[0][0]=E.x,pe[0][1]=E.y,h.cb.wt(),U.x=pe[0][0]*n,U.y=pe[0][1]*n),_e==0&&(Br=ui,k.N(E),j.N(U),0<p&&(Ei.u>p||3.141592653589793<=Math.abs(L.x-N.x)))){Ut=!0;break}if(Et&&0<p){if(h.kb.xd(c,a,L.x,L.y,U.x,U.y,ti,null,null,2),ti.u>p||3.141592653589793<=Math.abs(L.x-U.x)){Ut=!0;break}}else if(0<f){if(Et?(C.IS(S,$,xi[_e]),ce?H.na(C.x*n,C.y*n):(pe[0][0]=C.x,pe[0][1]=C.y,h.cb.wt(),H.x=pe[0][0]*n,H.y=pe[0][1]*n)):(C.N(E),H.N(U)),h.kb.xd(c,a,L.x,L.y,H.x,H.y,zt,null,null,2),!(zt.u<=Ei.u)){Ut=!0;break}if(h.kb.qj(c,a,L.x,L.y,zt.u,ei.u,K,se,2),ne.na(K.u,se.u),h.kb.xd(c,a,ne.x,ne.y,U.x,U.y,ki,null,null,2),ki.u>f){Ut=!0;break}if(Et){if(h.kb.xd(c,a,ne.x,ne.y,H.x,H.y,jt,null,null,2),jt.u>f){Ut=!0;break}if(h.kb.xd(c,a,H.x,H.y,U.x,U.y,dr,null,null,2),dr.u>f){Ut=!0;break}}}}Ut?($.N(k),N.N(j),qe=Br,w.wp(Oe,$),w.wp(xt,N),et.add(qe)):(w.cB(Oe),w.cB(xt),et.Gn(et.size-1,1,et.size-1),w.Of(b,$),Ce+=Ei.u,g!=null&&g.add(Ce),0<xt.size&&(S.N($),L.N(N),st=qe,w.jB(Oe,$),w.jB(xt,N),qe=et.get(et.size-1)))}if(g!=null)for(c=1/Ce,_e=0;_e<g.size;_e++)g.write(_e,g.read(_e)*c)},w.aC=function(c,a,n,o){o.reverse(),n!=null&&n.pi(0,n.size,1),n=c!=null?c[0]:NaN,o=a!=null?a[0]:NaN,c!=null&&(c[0]=o),a!=null&&(a[0]=n)},w.aJ=function(c,a,n,o,u){c?(o.N(n),u.N(a)):(o.N(a),u.N(n))},w.$I=function(c,a,n){return c?(n.create(a.K()),a.copyTo(n.get()),n.get().reverse(),n.get()):a},w.Yi=function(c,a,n){if(isNaN(a)){for(;3.141592653589793<n[0]-c;)n[0]-=6.283185307179586;for(;3.141592653589793<c-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+c-a?n[0]-=6.283185307179586:3.141592653589793<a-(n[0]+c)&&(n[0]+=6.283185307179586)},w.RW=function(c,a,n,o){3.141592653589793>Math.abs(a.x-c.x)?(o.Ec(c),3.141592653589793<=n.x-c.x?o.Sl(n.x-6.283185307179586,n.y):3.141592653589793<=c.x-n.x?o.Sl(n.x+6.283185307179586,n.y):o.Sl(n.x,n.y)):(o.Ec(n),3.141592653589793<=c.x-n.x?o.Sl(c.x-6.283185307179586,c.y):3.141592653589793<=n.x-c.x?o.Sl(c.x+6.283185307179586,c.y):o.Sl(c.x,c.y))},w.TJ=function(c,a){for(var n=0;n<c;n++){var o=Math.ceil(n/2)/(c+1);n%2!=0&&(o=-o),a[n]=.5+o}},w.Ou=function(c,a){return!!(h.s.$(c.y,1.570796326794897)&&!h.s.$(a.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)&&!h.s.$(a.y,-1.570796326794897))},w.Mu=function(c,a){return!!(h.s.$(a.y,1.570796326794897)&&!h.s.$(c.y,1.570796326794897)||h.s.$(a.y,-1.570796326794897)&&!h.s.$(c.y,-1.570796326794897))},w.AE=function(c,a,n){return!(!w.zE(c,a,n)||h.s.$(c.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)||h.s.$(a.y,1.570796326794897)||h.s.$(a.y,-1.570796326794897))},w.zE=function(c,a,n){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=n},w.Nu=function(c,a){return!!(h.s.$(c.y,1.570796326794897)&&h.s.$(a.y,1.570796326794897)||h.s.$(c.y,-1.570796326794897)&&h.s.$(a.y,-1.570796326794897))},w.fB=function(c,a,n,o){if(0<c.y){var u=new h.h;u.na(a.x,1.570796326794897)}else(u=new h.h).na(a.x,-1.570796326794897);h.s.$(c.x,u.x)||h.s.$(a.y,u.y)||(w.Of(o,u),n!=null&&n.add(0))},w.dB=function(c,a,n,o){if(0<a.y){var u=new h.h;u.na(c.x,1.570796326794897)}else(u=new h.h).na(c.x,-1.570796326794897);h.s.$(a.x,u.x)||h.s.$(c.y,u.y)||(w.Of(o,u),n!=null&&n.add(1))},w.eB=function(c,a,n,o,u,p,f){h.s.Dd(n)?(0<1.570796326794897-c.y&&((n=new h.h).na(c.x,1.570796326794897),w.Of(f,n),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((n=new h.h).na(a.x,1.570796326794897),w.Of(f,n),p!=null&&p.add(o))):(0<1.570796326794897+c.y&&((n=new h.h).na(c.x,-1.570796326794897),w.Of(f,n),p!=null&&p.add(u)),0<1.570796326794897+a.y&&((n=new h.h).na(a.x,-1.570796326794897),w.Of(f,n),p!=null&&p.add(u)))},w.vU=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586},w}();h.ej=O}(B||(B={})),function(h){h.kp=function(){function O(){}return O.pj=function(w,c,a){if(w==null||c==null||!h.cb.Xc(c))throw h.i.O();if(w.B())return w;var n=w,o=n.K();if(h.ba.Ic(o)){n=h.Jh.nj(w,c),w=new h.l,n.A(w),o=h.ua.Xd(c,w,!1);for(var u=h.cb.ih(c),p=Math.floor((w.v-u.v)/u.S())*u.S()+u.v;p<w.C;)p>w.v+o&&p<w.C-o&&(n=h.Jh.ms(n,c,a,!0,p)),p+=u.S()}else{if(o==197)return(w=new h.Ea(n.description)).bd(n,!1),O.pj(w,c,a);if(h.ba.zd(o))return(w=new h.Ua(n.description)).pc(n,!0),O.pj(w,c,a)}return O.Py(n,c)},O.Py=function(w,c){if(w==null||c==null||!h.cb.Xc(c))throw h.i.O();if(w.B())return w;var a=w.K();return a==197?(a=new h.Ea(w.description)).bd(w,!1):h.ba.zd(a)?(a=new h.Ua(w.description)).pc(w,!0):a=w,(a=h.Jh.nj(a,c)).B()?a:h.Gg.Tb(c)==1?h.Jh.Hn(a,c,0,a!=w,0):O.IQ(a,c,a!=w)},O.IQ=function(w,c,a){if(!h.cb.Xc(c))throw h.i.O();if(w.B())return w;var n=h.cb.bf(c),o=-180*n;return n*=360,h.Gg.Tb(c)==2&&(n=(o=h.cb.ih(c)).C,n-=o=o.v),h.Jh.Jp(w,o,n,c,a,0,!0)},O}()}(B||(B={})),function(h){h.xY=function(){function O(){}return O.R=function(w){return 0>w?-w:w},O.Mb=function(w,c){return 0<=c?O.R(w):-O.R(w)},O.$=function(w,c){return w==c||O.R(w-c)<=O.EC*(1+(O.R(w)+O.R(c))/2)},O.Dd=function(w){return w==0||O.R(w)<=O.EC},O.Ch=function(w,c){var a=(c=(1-(c=Math.sqrt(1-c)))/(1+c))*c;return w/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*O.zL},O.zL=1.5707963267948966,O.EC=3552713678800501e-30,O}()}(B||(B={})),function(h){var O=function(c){this.Yf=c,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};h.zY=O;var w=function(){function c(a){a===void 0&&(a=null),this.Ej=null,this.Wn=!1,a!==null&&(this.Ej=new O(a))}return c.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},c.prototype.Qf=function(){var a=new c;return this.copyTo(a),a},c.prototype.copyTo=function(a){a.Ej=this.Ej,a.Wn=this.Wn},c.prototype.Lz=function(){this.Wn=!this.Wn},c.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},c.prototype.GJ=function(a){if(0>=a)throw h.i.O();if(a!=this.Fc()){if((a=h.qf.geogtran(a))==null)throw h.i.O("Geogtran not found.");this.Ej=new O(a)}},c.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},c.prototype.pX=function(a){if(a==null)throw h.i.O();var n=null;try{n=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw h.i.O()}this.Ej=new O(n)},c.prototype.Nb=function(a){return a==this||!(!(a instanceof c)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Wn==a.Wn},c.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},c.create=function(a,n){var o=new c;return o.GJ(a),n&&o.Lz(),o},c.pP=function(a,n){var o=new c;return o.pX(a),n&&o.Lz(),o},c}();h.Cx=w}(B||(B={})),function(h){var O=function(){function c(){}return c.construct=function(a,n,o,u){var p=new c;return p.jw=a,p.kw=n,p.MY=o,p.NY=u,p},c.zy=function(a,n){return a.jw==n.jw?a.kw==n.kw?0:a.kw<n.kw?-1:1:a.jw<n.jw?-1:1},c}(),w=function(){function c(){this.tT=[],this.uT=[],this.sp()}return c.fz=function(){return c.eK==null&&(c.eK=new c),c.eK},c.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},c.prototype.dD=function(a){try{var n=[];n=n.sort(O.zy);for(var o=0;o<n.length;o++)a.push(n[o])}catch{}},c}();h.yY=w}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.tD=function(c){this.Hk=c},w.prototype.RM=function(c){this.Gb=c},w.prototype.sD=function(c){this.Bo=c},w.xE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736)},w.vE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736||20>c.I())},w.wE=function(c){return!(c.B()||c.K()!=1607&&c.K()!=1736||20>c.I())},w}();h.Wk=O}(B||(B={})),function(h){h.ac=function(){function O(){}return O.OT=function(w){var c=new h.Ea;return c.rx(w.gs(),w.js()),c.Aj(w.gs(),w.hs()),c.Aj(w.fs(),w.hs()),c.Aj(w.fs(),w.js()),c},O.Bh=function(w,c){return w===null?null:h.Gx.local().W(w,c,null)},O.fY=function(w,c){var a=h.Ih.local();return w=new h.$c(w),a.W(w,c,null).next()},O.km=function(w,c,a){return h.mp.local().W(w,c,a,null)},O.gp=function(w,c,a){return h.Jx.local().W(w,c,a,null)},O.RX=function(w,c,a){var n=h.Jx.local();for(w=new h.$c(w),c=new h.$c(c),a=n.W(w,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},O.Nb=function(w,c,a){return h.fj.local().W(3,w,c,a,null)},O.OP=function(w,c,a){return h.fj.local().W(4,w,c,a,null)},O.MS=function(w,c,a){var n=h.Zj.local();for(w=new h.$c(w),c=new h.$c(c),a=n.W(w,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},O.LP=function(w,c,a){var n=h.mp.local();for(w=new h.$c(w),c=new h.$c(c),a=n.W(w,c,a,null),n=[];(c=a.next())!=null;)n.push(c);return n},O.Fa=function(w,c,a){return h.Zj.local().W(w,c,a,null)},O.LS=function(w,c,a){if((w=h.Zj.local().W(w,c,a,null,1))===null)return[];if(w.K()===550){for(c=[],a=0;a<w.xa;a++)c.push(w.FR(a));return c}return w.K()===33?[w]:[]},O.mY=function(w,c,a){return h.fj.local().W(2,w,c,a,null)},O.contains=function(w,c,a){return h.fj.local().W(1,w,c,a,null)},O.wP=function(w,c,a){return h.fj.local().W(16,w,c,a,null)},O.touches=function(w,c,a){return h.fj.local().W(8,w,c,a,null)},O.yU=function(w,c,a){return h.fj.local().W(32,w,c,a,null)},O.OS=function(w,c,a){return h.fj.local().W(1073741824,w,c,a,null)},O.tB=function(w,c,a,n){return h.uL.local().W(w,c,a,n,null)},O.ub=function(w,c,a,n){var o=null;if(a!=null){if(o=a.Id(),n!=null&&o.Fc()!=n.Fc()&&o.pd!=n.pd)throw h.i.Zk()}else if(n!=null)throw h.i.O();return w=h.lL.local().W(w,c,null),o!==null&&n!==null&&(w=h.Uc.Ph(w,o,n)),w},O.clip=function(w,c,a){return h.fL.local().W(w,h.l.construct(c.gs(),c.js(),c.fs(),c.hs()),a,null)},O.fl=function(w,c,a){if(w==null||c==null)return null;for(w=h.hL.local().W(!0,w,c,a,null),c=[];(a=w.next())!=null;)a.B()||c.push(a);return c.slice(0)},O.HN=function(w,c,a,n,o,u,p,f){if(o===!0)return O.IN(w,c,a,n,u,p,f);if(o=a,c!=null){if(p=c.Id(),n!=null&&p.Fc()!=n.Fc()){if(p.pd!=n.pd)throw h.i.Zk();o=[],h.Uc.SE(a,a.length,n,p,o)}}else if(n!=null)throw h.i.O();if(a=h.vC.local(),u){for(w=new h.$c(w),c=a.W(w,c,o,u,null),w=[];(u=c.next())!=null;)w.push(u);u=w.slice(0)}else for(u=[],n=0;n<w.length;n++)u[n]=a.W(w[n],c,o[n],null);return u},O.IN=function(w,c,a,n,o,u,p){if(c===null||(n==null&&(n=c.Fc()!==4326?c.Id():h.Uc.ah(9001)),n.pd!==0))throw h.i.O();if(h.Uc.SE(a,a.length,n,h.Uc.ah(9001),a),n=h.AC.local(),o){for(w=new h.$c(w),c=n.W(w,c,u,a,p,!1,o,null),a=[];(u=c.next())!=null;)a.push(u);o=a.slice(0)}else{o=[];for(var f=0;f<w.length;f++)o[f]=n.W(w[f],c,u,a[f],p,!1,null)}return o},O.buffer=function(w,c,a,n,o,u,p){var f=a;if(o===!1){if(c!=null){if(o=c.Id(),n!=null&&o.Fc()!=n.Fc()){if(o.pd!=n.pd)throw h.i.Zk();f=h.Uc.Ph(a,n,o)}}else if(n!=null)throw h.i.O();w=h.vC.local().W(w,c,f,null)}else{if(c===null||(n==null&&(n=c.Fc()!==4326?c.Id():h.Uc.ah(9001)),n.pd!==0))throw h.i.O();f=h.Uc.Ph(a,n,h.Uc.ah(9001)),w=h.AC.local().W(w,c,u,f,p,!1,null)}return w},O.wU=function(w,c,a,n,o,u,p){if(c!=null){var f=c.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.pd!=p.pd)throw h.i.Zk();a=h.Uc.Ph(a,p,f)}}else if(p!=null)throw h.i.O();for(w=new h.$c(w),c=h.DC.local().W(w,c,a,n,o,u,null),a=[];(n=c.next())!=null;)a.push(n);return a.slice(0)},O.offset=function(w,c,a,n,o,u,p){if(c!=null){var f=c.Id();if(p!=null&&f.Fc()!=p.Fc()){if(f.pd!=p.pd)throw h.i.Zk();a=h.Uc.Ph(a,p,f)}}else if(p!=null)throw h.i.O();return h.DC.local().W(w,c,a,n,o,u,null)},O.dP=function(w){return h.xC.local().W(w,null)},O.eP=function(w,c){var a=h.xC.local();for(w=new h.$c(w),c=a.W(w,c,null),a=[];(w=c.next())!=null;)a.push(w);return a},O.iz=function(w,c,a){return h.Hx.local().iz(w,c,a)},O.jz=function(w,c){return h.Hx.local().jz(w,c)},O.kz=function(w,c,a,n){return h.Hx.local().kz(w,c,a,n)},O.$B=function(w,c){return h.$l.local().W(w,c,!1,null)},O.ZS=function(w,c){return h.$l.local().ts(w,c,null)},O.LQ=function(w,c,a,n,o){var u=h.zC.local();if(c!=null){if(c=c.Id(),o!=null&&c.Fc()!=o.Fc()){if(c.pd!=o.pd)throw h.i.Zk();a=h.Uc.Ph(a,o,c)}}else if(o!=null)throw h.i.O();return u.W(w,a,n,null)},O.Sr=function(w,c,a,n){var o=h.Zl.local();if(c!=null){if(c=c.Id(),n!=null&&c.Fc()!=n.Fc()){if(c.pd!=n.pd)throw h.i.Zk();a=h.Uc.Ph(a,n,c)}}else if(n!=null)throw h.i.O();return o.W(w,a,null)},O.Ry=function(w,c,a,n,o){o===void 0&&(o=0);var u=h.nL.local();if(o==4||o!==0)throw h.i.Fe();if(n!==null){if(n.pd!==0)throw h.i.O("Unit must be a linear unit type");a=h.Uc.Ph(a,n,h.Uc.ah(9001))}return u.W(w,a,c,o,null)},O.RQ=function(w,c,a,n){if(w===null)return 0;if(n==4||n!==0)throw h.i.Fe();if(w.K()==197)w=O.OT(w);else if(w.K()!=1736)return 0;if(n=h.cb.tc(c),w=h.cb.Bh(w,c,n),w=h.PK.SQ([w])[0],a!==null){if(a.pd!==2)throw h.i.O("Unit must be a area unit type");w=h.Uc.Ph(w,h.Uc.ah(109404),a)}return w},O.UQ=function(w,c,a,n){if(w=h.qL.local().W(w,c,n,null),a!==null){if(a.pd!==0)throw h.i.O("Unit must be a linear unit type");w=h.Uc.Ph(w,h.Uc.ah(9001),a)}return w},O.EU=function(w,c,a){if(w===null)return 0;var n=null;if(c!=null){if((n=c.Id()).pd==0&&(n=h.Uc.WF(n))==null&&a!==null)throw h.i.O();if(a!=null&&n.Fc()!=a.Fc()&&n.pd!=a.pd)throw h.i.Zk()}else if(a!=null)throw h.i.O();return w.K()==1736||w.K()==197?(w=w.He(),a!==null?h.Uc.Ph(w,n,a):w):0},O.FU=function(w,c,a){if(w===null||w.B()||1>w.Eb())return 0;var n=null;if(c!=null){if(n=c.Id(),a!=null&&n.Fc()!=a.Fc()&&n.pd!=a.pd)throw h.i.Zk()}else if(a!=null)throw h.i.O();w.K()==1736||w.K()==197?c=w.ng():h.ba.zd(w.K())?(c=new h.Ua(w.description)).pc(w,!0):c=w,w=0,c=c.Ha();for(var o=new h.h,u=new h.h;c.ab();)for(;c.Ia();){var p=c.ia();p.$p(o),p.Vr(u),w+=h.h.ub(o,u)}return n!==null&&a!==null&&(w=h.Uc.Ph(w,n,a)),w},O.aP=function(w){return w.points!==void 0?O.hS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?O.gG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?O.gG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?O.iS(w):w.xmin!==void 0?O.gS(w):null},O.iS=function(w){if(w.x==null||w.x=="NaN")return new h.Ta;var c=new h.Ta(w.x,w.y);return w.z!==void 0&&w.z!==null&&c.sX(w.z),w.m!==void 0&&w.m!==null&&c.cX(w.m),c},O.gS=function(w){if(w.xmin==null||w.xmin=="NaN")return new h.Hh;var c=new h.Hh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&c.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&c.setInterval(2,0,w.mmin,w.mmax),c},O.hS=function(w,c,a){var n=0,o=new h.ee,u=3*w.points.length;u%2!=0&&u++,2>u&&(u=2);var p=h.P.truncate(3*w.points.length/2);4>p?p=4:16>p&&(p=16),u=h.Zc.Fn(u,0);var f=h.Zc.Fn(p);p=h.Zc.Fn(p);for(var g=0;g<w.points.length;g++)u.write(2*g,w.points[g][0]),u.write(2*g+1,w.points[g][1]),f.write(g,c||a?w.points[g][2]:NaN),p.write(g,a&&c?w.points[g][3]:NaN),n++;return n!=0&&(o.resize(n),o.kn(0,u)),c&&(o.se(1),o.kn(1,f)),a&&(o.se(2),o.kn(2,c==0?f:p)),o.Qc(16777215),o},O.gG=function(w,c,a,n){var o=0,u=2;if(n=="P"){var p=new h.Ea;o=1,u=3}else p=new h.Ua;for(var f=h.Zc.Qh(0),g=h.Zc.Or(0),b=0,S=0,$=[],E=[],C=0;C<w.length;C++){var k=w[C].length;if($[C]=!1,n==="P"&&w[C][0][0]===w[C][w[C].length-1][0]&&w[C][0][1]===w[C][w[C].length-1][1]){var L=a==0||w[C][0][3]===w[C][w[C].length-1][3]||w[C][0][3]===void 0&&w[C][w[C].length-1][3]===void 0;(c==0||w[C][0][2]===w[C][w[C].length-1][2]||w[C][0][2]===void 0&&w[C][w[C].length-1][2]===void 0)&&L&&($[C]=!0,--k)}k>=u?(E[C]=!1,S+=1,f.add(b),g.add(o),b+=k):E[C]=!0}for((n=3*b)%2!=0&&n++,2>n&&(n=2),4>(C=h.P.truncate(3*b/2))?C=4:16>C&&(C=16),n=h.Zc.Fn(n,0),o=h.Zc.Fn(C),u=h.Zc.Fn(C),C=k=0;C<w.length;C++)if(E[C]===!1)for(L=0;L<w[C].length;L++){var N=!1;L===w[C].length-1&&$[C]===!0&&(N=!0),N||(n.write(2*k,w[C][L][0]),n.write(2*k+1,w[C][L][1]),o.write(k,c||a?w[C][L][2]:NaN),u.write(k,a&&c?w[C][L][3]:NaN),k++)}return b!=0&&(w=p,f.resize(S),g.resize(S),0<b&&(f.add(b),g.add(0)),w.kn(0,n),w.KJ(g),w.LJ(f)),c&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,c==0?o:u)),p.Qc(16777215),p},O}()}(B||(B={})),function(h){h.Dx=function(){function O(){}return O.dr=function(w){var c,a=0,n=w.length,o=w[0];for(c=0;c<n-1;c++){var u=w[c+1];a+=(u[0]-o[0])*(u[1]+o[1]),o=u}return 0<=a},O.rotate=function(w,c,a){c=c*Math.PI/180;var n=Math.cos(c),o=Math.sin(c);if(w.paths!==void 0){c={paths:[]};for(var u=0;u<w.paths.length;u++){for(var p=w.paths[u],f=[],g=0;g<p.length;g++){var b=p[g].slice(0);f.push(b);var S=n*(p[g][0]-a.x)-o*(p[g][1]-a.y)+a.x,$=o*(p[g][0]-a.x)+n*(p[g][1]-a.y)+a.y;b[0]=S,b[1]=$}c.paths.push(f),w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM)}return c}if(w.rings!==void 0){for(c={rings:[]},u=0;u<w.rings.length;u++){p=w.rings[u],f=[];var E=O.dr(p);for(g=0;g<p.length;g++)b=p[g].slice(0),f.push(b),S=n*(p[g][0]-a.x)-o*(p[g][1]-a.y)+a.x,$=o*(p[g][0]-a.x)+n*(p[g][1]-a.y)+a.y,b[0]=S,b[1]=$;O.dr(f)!==E&&f.reverse(),c.rings.push(f),w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM)}return c}if(w.x!==void 0)return c={x:n*(w.x-a.x)-o*(w.y-a.y)+a.x,y:o*(w.x-a.x)+n*(w.y-a.y)+a.y},w.z!==void 0&&(c.z=w.z),w.m!==void 0&&(c.m=w.m),w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM),c;if(w.points!==void 0){for(c={points:[]},u=w.points,g=0;g<u.length;g++)(p=u[g].slice(0))[0]=n*(u[g][0]-a.x)-o*(u[g][1]-a.y)+a.x,p[1]=o*(u[g][0]-a.x)+n*(u[g][1]-a.y)+a.y,c.points.push(p);return w.hasZ!==void 0&&(c.hasZ=w.hasZ),w.hasM!==void 0&&(c.hasM=w.hasM),c}return null},O.EQ=function(w,c){if(w.paths!==void 0){for(var a={paths:[]},n=0;n<w.paths.length;n++){for(var o=w.paths[n],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var g=c.x-o[p][0];f[0]=o[p][0]+2*g}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},n=0;n<w.rings.length;n++){o=w.rings[n];var b=O.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),g=c.x-o[p][0],f[0]=o[p][0]+2*g;O.dr(u)!==b&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return g=c.x-w.x,a={x:w.x+2*g,y:w.y},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},n=w.points,p=0;p<n.length;p++)o=n[p].slice(0),g=c.x-o[0],o[0]+=2*g,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),g=c.x-w.xmin,a.xmax=w.xmin+2*g,g=c.x-w.xmax,a.xmin=w.xmax+2*g,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},O.FQ=function(w,c){if(w.paths!==void 0){for(var a={paths:[]},n=0;n<w.paths.length;n++){for(var o=w.paths[n],u=[],p=0;p<o.length;p++){var f=o[p].slice(0);u.push(f);var g=c.y-o[p][1];f[1]=o[p][1]+2*g}a.paths.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.rings!==void 0){for(a={rings:[]},n=0;n<w.rings.length;n++){o=w.rings[n];var b=O.dr(o);for(u=[],p=0;p<o.length;p++)f=o[p].slice(0),u.push(f),g=c.y-o[p][1],f[1]=o[p][1]+2*g;O.dr(u)!==b&&u.reverse(),a.rings.push(u)}return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}if(w.x!==void 0)return g=c.y-w.y,a={y:w.y+2*g,x:w.x},w.z!==void 0&&(a.z=w.z),w.m!==void 0&&(a.m=w.m),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a;if(w.points!==void 0){for(a={points:[]},n=w.points,p=0;p<n.length;p++)o=n[p].slice(0),g=c.y-o[1],o[1]+=2*g,a.points.push(o);return w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a}return w.xmin!==void 0?(a={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(a.zmin=w.zmin,a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin,a.mmax=w.mmax),g=c.y-w.ymin,a.ymax=w.ymin+2*g,g=c.y-w.ymax,a.ymin=w.ymax+2*g,w.zmin!==void 0&&(a.zmin=w.zmin),w.zmax!==void 0&&(a.zmax=w.zmax),w.mmin!==void 0&&(a.mmin=w.mmin),w.mmax!==void 0&&(a.mmax=w.mmax),w.hasZ!==void 0&&(a.hasZ=w.hasZ),w.hasM!==void 0&&(a.hasM=w.hasM),a):null},O}()}(B||(B={})),function(h){h.UK=function(){function O(){}return O.Kg=function(w,c){switch(c==null&&(c=h.fe.pg()),w){case 33:return new h.Ta(c);case 322:return new h.zb(c);case 197:return new h.Hh(c);case 550:return new h.ee(c);case 1607:return new h.Ua(c);case 1736:return new h.Ea(c);default:throw h.i.ga("invalid argument.")}},O}()}(B||(B={})),function(h){var O=function(){function w(c,a){this.Qe=h.ja.rf(c,-1),this.va=new h.cu,this.yl=a}return w.prototype.vW=function(c){this.va.Bt(Math.min(this.Qe.size,c)),this.va.hn(c)},w.prototype.addElement=function(c,a){if(a===void 0)return this.$M(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,c)},w.prototype.$M=function(c){var a=this.yl.ez(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,c)},w.prototype.kd=function(c,a){if(a===void 0)this.FP(c);else{a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==c?(this.va.kd(n,u,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):u=o,o=p}}},w.prototype.FP=function(c){var a=this.yl.ez(c);a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==c?(this.va.kd(n,u,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):u=o,o=p}},w.prototype.lR=function(c){return c=h.P.truncate(c%this.Qe.size),(c=this.Qe.get(c))==-1?-1:this.va.sc(c)},w.prototype.zR=function(c){return this.va.lb(c)},w.prototype.wd=function(c){var a=this.yl.ez(this.ka(c));a=h.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw h.i.O();for(var o=this.va.sc(n),u=-1;o!=-1;){if(o==c)return this.va.kd(n,u,o),void(this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1)));u=o,o=this.va.lb(o)}throw h.i.O()},w.prototype.ka=function(c){return this.va.ka(c)},w.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},w.prototype.size=function(){return this.va.OF()},w}();h.ZK=O}(B||(B={})),function(h){var O=function(){function w(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.mT=!1,this.ke=-1}return w.prototype.hl=function(c){this.Ni.kd(c)},w.prototype.Rw=function(){return this.Ni.De()},w.prototype.dv=function(c){this.va.kd(c)},w.prototype.VA=function(){return this.va.De()},w.prototype.RB=function(c,a){this.Ni.T(c,1,a)},w.prototype.fx=function(c,a){this.Ni.T(c,2,a)},w.prototype.bX=function(c,a){this.Ni.T(c,3,a)},w.prototype.PB=function(c,a){this.va.T(c,4,a)},w.prototype.eX=function(c,a){this.va.T(c,3,a)},w.prototype.OJ=function(c,a){this.va.T(c,2,a)},w.prototype.Rh=function(c){var a=this.VA();return this.va.T(a,3,this.ke),this.va.T(a,4,0),this.va.T(a,5,c),this.ke!=-1&&this.OJ(this.ke,a),this.ke=a},w.prototype.eh=function(c){this.GE(c);var a=this.va.U(c,2),n=this.va.U(c,3);return a!=-1?this.eX(a,n):this.ke=n,n!=-1&&this.OJ(n,a),this.dv(c),n},w.prototype.Bt=function(c){this.va.Ee(c)},w.prototype.KF=function(c){return this.va.U(c,5)},w.prototype.aX=function(c,a){this.va.T(c,5,a)},w.prototype.addElement=function(c,a){return this.oS(c,a)},w.prototype.oS=function(c,a){var n=this.Rw();this.fx(n,-1),this.va.U(c,0)==-1&&this.va.T(c,0,n);var o=this.va.U(c,1);return this.RB(n,o),o!=-1&&this.fx(o,n),this.va.T(c,1,n),this.setData(n,a),this.PB(c,this.ds(c)+1),this.mT&&this.bX(n,c),n},w.prototype.kd=function(c,a){var n=this.xe(a),o=this.lb(a);return n!=-1?this.fx(n,o):this.va.T(c,0,o),o!=-1?this.RB(o,n):this.va.T(c,1,n),this.hl(a),this.PB(c,this.ds(c)-1),o},w.prototype.hn=function(c){this.Ni.Ee(c)},w.prototype.getData=function(c){return this.Ni.U(c,0)},w.prototype.setData=function(c,a){this.Ni.T(c,0,a)},w.prototype.lb=function(c){return this.Ni.U(c,2)},w.prototype.xe=function(c){return this.Ni.U(c,1)},w.prototype.sc=function(c){return this.va.U(c,0)},w.prototype.Gc=function(c){return this.va.U(c,1)},w.prototype.clear=function(){for(var c=this.ke;c!=-1;)c=this.eh(c)},w.prototype.GE=function(c){for(var a=this.Gc(c);a!=-1;){var n=a;a=this.xe(n),this.hl(n)}this.va.T(c,0,-1),this.va.T(c,1,-1),this.PB(c,0)},w.prototype.B=function(){return this.Ni.size==0},w.prototype.OF=function(){return this.Ni.size},w.prototype.ds=function(c){return this.va.U(c,4)},w.prototype.lz=function(c){return this.va.U(c,3)},w}();h.lp=O}(B||(B={})),function(h){var O=function(){function w(c){c===void 0?(this.vg=new h.ad(2),this.va=new h.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new h.ad(2),this.va=new h.ad(c?4:2),this.ke=-1,this.Sv=c)}return w.prototype.hl=function(c){this.vg.kd(c)},w.prototype.Rw=function(){return this.vg.De()},w.prototype.dv=function(c){this.va.kd(c)},w.prototype.VA=function(){return this.va.De()},w.prototype.Rh=function(){var c=this.VA();return this.Sv&&(this.va.T(c,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,c),this.ke=c),c},w.prototype.eh=function(c){for(var a=this.sc(c);a!=-1;){var n=a;a=this.lb(a),this.hl(n)}this.Sv&&(a=this.va.U(c,2),n=this.va.U(c,3),a!=-1?this.va.T(a,3,n):this.ke=n,n!=-1&&this.va.T(n,2,a)),this.dv(c)},w.prototype.Bt=function(c){this.va.Ee(c)},w.prototype.addElement=function(c,a){var n=this.va.U(c,1),o=this.Rw();return n!=-1?this.vg.T(n,1,o):this.va.T(c,0,o),this.va.T(c,1,o),this.vg.T(o,0,a),o},w.prototype.hn=function(c){this.vg.Ee(c)},w.prototype.kd=function(c,a,n){a!=-1?(this.vg.T(a,1,this.vg.U(n,1)),this.va.U(c,1)==n&&this.va.T(c,1,a)):(this.va.T(c,0,this.vg.U(n,1)),this.va.U(c,1)==n&&this.va.T(c,1,-1)),this.hl(n)},w.prototype.Cy=function(c,a){var n=this.va.U(c,1),o=this.va.U(a,0);o!=-1&&(n!=-1?this.vg.T(n,1,o):this.va.T(c,0,o),this.va.T(c,1,this.va.U(a,1))),this.Sv&&(c=this.va.U(a,2),n=this.va.U(a,3),c!=-1?this.va.T(c,3,n):this.ke=n,n!=-1&&this.va.T(n,2,c)),this.dv(a)},w.prototype.ka=function(c){return this.vg.U(c,0)},w.prototype.Uj=function(c,a){this.vg.T(c,0,a)},w.prototype.lb=function(c){return this.vg.U(c,1)},w.prototype.sc=function(c){return this.va.U(c,0)},w.prototype.Ln=function(c){return this.ka(this.sc(c))},w.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},w.prototype.B=function(){return this.vg.size==0},w.prototype.OF=function(){return this.vg.size},w.prototype.lz=function(c){return this.va.U(c,3)},w}();h.cu=O}(B||(B={})),function(h){h.ua=function(){function O(){}return O.Xd=function(w,c,a){return c=c.zr(),w=w!=null&&w.Yd!==void 0?w.Yd(0):0,a&&(c*=4,w*=1.1),Math.max(w,c)},O.Gr=function(w){return 2*Math.sqrt(2)*w},O.mN=function(w){return Math.sqrt(2)*w},O.mj=function(w,c,a){var n=new h.l;return c.A(n),O.Xd(w,n,a)},O.rE=function(w,c,a){return c=c.Vg(1,0).zr(),w=w!=null?w.Yd(1):0,a&&(c*=4,w*=1.1),Math.max(w,c)},O.ov=function(w,c){var a=new h.l;return w.yc(a),w=new h.l,c.yc(w),a.$b(w),a},O.TN=function(w){var c=new h.l;if(w.yc(c),c.B())return null;var a=new h.fu(c,8),n=-1,o=new h.l,u=!1;do for(var p=0,f=w.ea();p<f;p++){if(w.Tj(p,o),(n=a.Ez(p,o,n))==-1){if(u)throw h.i.ga("internal error");w.Ap(c,!1),u=!0,a.reset(c,8);break}u=!1}while(u);return a},O.iE=function(w){var c=new h.l;w.yc(c);for(var a=new h.fu(c,8),n=-1,o=w.Ha(),u=new h.l,p=!1;o.ab();)for(;o.Ia();){var f=o.ia(),g=o.xb();if(f.A(u),(n=a.Ez(g,u,n))==-1){if(p)throw h.i.Ra();w.Ap(c,!1),p=!0,a.reset(c,8),o.aj();break}}return a},O.lj=function(w,c){var a=new h.l;w.yc(a);for(var n=new h.fu(a,8),o=-1,u=new h.l,p=w.Ha(),f=!1;p.ab();)for(;p.Ia();){var g=p.ia(),b=p.xb();if(g.A(u),u.isIntersecting(c)&&(o=n.Ez(b,u,o))==-1){if(f)throw h.i.ga("internal error.");w.Ap(a,!1),f=!0,n.reset(a,8),p.aj();break}}return n},O.jE=function(w,c){for(var a=new h.fu(c,8),n=new h.h,o=!1,u=new h.l,p=0;p<w.I();p++)if(w.D(p,n),c.contains(n)&&(u.L(n),a.xj(p,u)==-1)){if(o)throw h.i.Ra();o=!0,p=new h.l,w.Ap(p,!1),a.reset(p,8),p=-1}return a},O.gR=function(w,c,a){var n=new h.l,o=new h.l;w.yc(n),c.yc(o),n.X(a,a),o.X(a,a);var u=new h.l;u.L(n),u.Fa(o),w=w.Ha(),c=c.Ha();var p=new h.sC;p.WB(a);var f=!1;for(p.kK();w.ab();)for(;w.Ia();)w.ia().A(n),n.isIntersecting(u)&&(f=!0,(a=new h.l).L(n),p.DD(w.xb(),a));if(p.dF(),!f)return null;for(n=!1,p.jK();c.ab();)for(;c.Ia();)c.ia().A(o),o.isIntersecting(u)&&(n=!0,(a=new h.l).L(o),p.zD(c.xb(),a));return p.cF(),n?p:null},O.hR=function(w,c,a,n,o){var u=w.K(),p=c.K(),f=new h.l,g=new h.l;w.yc(f),c.yc(g),f.X(a,a),g.X(a,a);var b=new h.l;b.L(f),b.Fa(g);var S=new h.sC;S.WB(a);var $=!1;S.kK();var E=0;for(a=w.ea();E<a;E++)n&&u==1736&&!w.Gv(E)||(w.Tj(E,f),f.isIntersecting(b)&&($=!0,S.DD(E,f)));if(S.dF(),!$)return null;for(w=!1,S.jK(),n=0,a=c.ea();n<a;n++)o&&p==1736&&!c.Gv(n)||(c.Tj(n,g),g.isIntersecting(b)&&(w=!0,S.zD(n,g)));return S.cF(),w?S:null},O.Tu=function(w,c,a){if(w!=c)for(var n=0;n<a;n++)w[n]==null?w[n]=h.h.cl(c[n]):w[n].N(c[n])},O.Ey=function(w,c,a,n){var o=0;for(n+=0;o<n;a++,o++)w[o]==null&&(w[o]=[0,0]),w[o][0]=c[a].x,w[o][1]=c[a].y},O.Dy=function(w,c,a,n){var o=c,u=0;for(c=n+c;o<c;u++,o++)w[o]==null?w[o]=h.h.construct(a[u][0],a[u][1]):w[o].na(a[u][0],a[u][1])},O.fP=function(w,c,a){if(w!=c)for(var n=0;n<a;n++)w[n]==null?w[n]=new h.Ta(c[n]):c[n].copyTo(w[n])},O.qE=function(w,c,a,n){var o=0;return w!=null&&(o=w.Yd(0),n&&!a||w==null||(o+=1.01*w.pz(0))),a&&(c*=4,o*=1.01),Math.max(o,c)},O.oy=function(w,c,a){return O.qE(w,c.zr(),a,!1)},O.bO=function(w,c){var a=new h.l;return c.A(a),O.oy(w,a,!0)},O.py=function(w,c){return O.qE(w,c.zr(),!1,!0)},O.Ju=function(w,c){var a=new h.l;return c.A(a),O.py(w,a)},O.vG=function(w,c,a,n){n*=n;var o=new h.h;if(o.vc(w,c),(w=new h.h).vc(a,c),c=o.Uk(),a=w.Uk(),c<=n&&a<=n)return!0;var u=h.mc.ox(o.yi(w));return(u<=n*c||u<=n*a)&&0<=o.Sh(w)},O.ZJ=function(w,c,a,n){for(var o=0;o<c;o++){var u=w[o].y,p=h.P.Tk(u,a,n);p!=u&&(w[o].y=p)}},O}()}(B||(B={})),function(h){var O,w,c=function(){function u(p){this.Za=p}return u.prototype.compare=function(p,f,g){p=p.ka(g),g=this.Za.qk(f);var b=this.Za.qk(p);return g<b?-1:g==b?o.iq(f)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(f)?1:0:1},u}(),a=function(){function u(p){this.Za=p}return u.prototype.qr=function(p,f,g){this.Za.CX(g,p,f)},u.prototype.bq=function(p){return this.Za.qk(p)},u}();(w=O||(O={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var n=function(){function u(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.tg=[0,0]}return u.prototype.Zi=function(p,f){this.Si.pa=p.pa-f,this.Si.wa=p.wa+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.zB=function(p,f,g){if(p>f)throw h.i.O();this.Si.pa=p-g,this.Si.wa=f+g,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.Wo=function(p,f){this.Si.pa=p-f,this.Si.wa=p+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},u.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.ie)return-1;for(var p=!0;p;)switch(this.tg[this.ie]){case 1:p=this.AU();break;case 2:p=this.BU();break;case 3:p=this.CU();break;case 4:p=this.DU();break;case 5:p=this.AW();break;case 6:p=this.fT();break;case 7:p=this.oN();break;case 0:p=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},u.construct=function(p){var f=new u;return f.Za=p,f.ji.Jb(20),f.ie=-1,f},u.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},u.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0):p<this.Si.pa?(p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),!0)},u.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.tg[++this.ie]=5),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.nk(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=6),!0}return p=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},u.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.pk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},u.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},u.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},u.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},u.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},u.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},u}();h.AY=n;var o=function(){function u(p){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=p,this.nq=this.Uv=!1}return u.prototype.mr=function(){this.Pk(!0)},u.prototype.Dr=function(p,f){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(p,f))},u.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},u.prototype.xj=function(p){if(!this.Uf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var f=this.Hj.length;if(this.dA){var g=new h.ja(0);g.Jb(2*f),this.XI(g),this.bi.Jb(2*f),this.bi.resize(0),this.WI(g),this.Mm.resize(f,-1),this.Mm.Yj(-1,0,f),this.dA=!1}else this.Mm.Yj(-1,0,f);this.kf=this.Vu()}f=this.kG(p<<1,this.kf),g=this.bg.addElement(1+(p<<1),this.rz(f)),this.QJ(f,g),this.Mm.set(p,f),this.aw++},u.prototype.remove=function(p){if(!this.Uf||!this.nq)throw h.i.ga("invalid call");var f=this.Mm.get(p);if(f==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var g=this.rz(f),b=this.bg.UR(g);this.bg.wd(this.rR(f),g),this.bg.wd(this.OR(f),g),(p=this.bg.size(g))==0&&(this.bg.HP(g),this.UJ(b,-1)),this.Gj.kd(f),g=this.PF(b);var S=this.sj(b),$=this.nk(b);for(f=0;!(0<p||b==this.kf||S!=-1&&$!=-1);)b==this.sj(g)?S!=-1?(this.Qk(g,S),this.Wj(S,g),this.Qk(b,-1)):$!=-1?(this.Qk(g,$),this.Wj($,g),this.Sk(b,-1)):this.Qk(g,-1):S!=-1?(this.Sk(g,S),this.Wj(S,g),this.Qk(b,-1)):$!=-1?(this.Sk(g,$),this.Wj($,g),this.Sk(b,-1)):this.Sk(g,-1),this.Wj(b,-1),f++,b=g,p=(g=this.pk(b))!=-1?this.bg.size(g):0,S=this.sj(b),$=this.nk(b),g=this.PF(b)},u.prototype.reset=function(){if(!this.Uf||!this.nq)throw h.i.O("invalid call");this.Pk(!1)},u.prototype.size=function(){return this.aw},u.prototype.getIterator=function(){return n.construct(this)},u.prototype.XI=function(p){for(var f=this.Hj.length,g=0;g<2*f;g++)p.add(g);this.DX(p,2*f)},u.prototype.WI=function(p){for(var f=NaN,g=0;g<p.size;g++){var b=p.get(g),S=this.qk(b);S!=f&&(this.bi.add(b),f=S)}},u.prototype.qS=function(){var p=this.Hj.length,f=new h.ja(0);f.Jb(2*p),this.XI(f),this.bi.Jb(2*p),this.bi.resize(0),this.WI(f),this.Gj.Ee(p),this.Vi.hn(2*p);var g=h.Zc.Qh(p);for(g.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<f.size;p++){var b=f.get(p),S=g.get(b>>1);S!=-1?this.QJ(S,this.Vi.addElement(this.rz(S),b)):(S=this.kG(b,this.kf),g.set(b>>1,S))}},u.prototype.kG=function(p,f){var g=f,b=f,S=-1,$=0,E=this.bi.size-1,C=0,k=p>>1,L=NaN,N=NaN,U=!0,H=this.yR(k);for(k=this.vR(k);U;){$<E?(C=$+h.P.truncate((E-$)/2),this.bz(g)==-1&&this.AJ(g,this.bi.get(C),this.bi.get(C+1))):this.bz(g)==-1&&this.AJ(g,this.bi.get($),this.bi.get($));var j=this.Pp(g);if(k<j)f!=-1&&(f==g?(b=g,L=j,N=(f=this.sj(g))!=-1?this.Pp(f):NaN):N>j&&(j<L?this.Qk(b,g):this.Sk(b,g),this.Sk(g,f),this.Uf&&(this.Wj(g,b),this.Wj(f,g)),b=g,L=j,f=-1,N=NaN)),(E=this.sR(g))==-1&&(E=this.Vu(),this.ZW(g,E)),g=E,E=C;else if(H>j)f!=-1&&(f==g?(b=g,L=j,N=(f=this.nk(g))!=-1?this.Pp(f):NaN):N<j&&(j<L?this.Qk(b,g):this.Sk(b,g),this.Qk(g,f),this.Uf&&(this.Wj(g,b),this.Wj(f,g)),b=g,L=j,f=-1,N=NaN)),($=this.PR(g))==-1&&($=this.Vu(),this.jX(g,$)),g=$,$=C+1;else{(U=this.pk(g))==-1&&(U=this.uP(g),this.UJ(g,U));var K=this.aN(U,p);S=this.sP(),this.mX(S,U),this.YW(S,K),g!=f&&(j<L?this.Qk(b,g):this.Sk(b,g),this.Uf&&this.Wj(g,b),f!=-1&&(N<j?this.Qk(g,f):this.Sk(g,f),this.Uf&&this.Wj(f,g))),U=!1}}return S},u.prototype.Vu=function(){return this.ne.De()},u.prototype.uP=function(p){return this.Uf?this.bg.Rr(p):this.Vi.Rh(p)},u.prototype.sP=function(){return this.Gj.De()},u.prototype.Pk=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.bg=new h.$j,this.bg.Xo(new c(this))):this.bg.clear():this.Vi==null?this.Vi=new h.lp:this.Vi.clear(),this.ne==null?(this.Gj=new h.ad(3),this.ne=new h.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},u.prototype.AJ=function(p,f,g){this.SW(p,f),this.TW(p,g)},u.prototype.Pp=function(p){var f=this.bz(p);return f==-1?NaN:(f=this.qk(f))==(p=this.qk(this.bR(p)))?f:.5*(f+p)},u.prototype.SW=function(p,f){this.ne.T(p,0,f)},u.prototype.TW=function(p,f){this.ne.T(p,1,f)},u.prototype.ZW=function(p,f){this.ne.T(p,3,f)},u.prototype.jX=function(p,f){this.ne.T(p,4,f)},u.prototype.UJ=function(p,f){this.ne.T(p,2,f)},u.prototype.Qk=function(p,f){this.ne.T(p,5,f)},u.prototype.Sk=function(p,f){this.ne.T(p,6,f)},u.prototype.Wj=function(p,f){this.ne.T(p,7,f)},u.prototype.mX=function(p,f){this.Gj.T(p,0,f)},u.prototype.aN=function(p,f){return this.Uf?this.bg.addElement(f,p):this.Vi.addElement(p,f)},u.prototype.YW=function(p,f){this.Gj.T(p,1,f)},u.prototype.QJ=function(p,f){this.Gj.T(p,2,f)},u.prototype.ml=function(p){return this.Uf?this.bg.sc(p):this.Vi.sc(p)},u.prototype.bs=function(p){return this.Uf?this.bg.Gc(p):this.Vi.Gc(p)},u.iq=function(p){return(1&p)==0},u.Iv=function(p){return(1&p)==1},u.prototype.bz=function(p){return this.ne.U(p,0)},u.prototype.bR=function(p){return this.ne.U(p,1)},u.prototype.pk=function(p){return this.ne.U(p,2)},u.prototype.sR=function(p){return this.ne.U(p,3)},u.prototype.PR=function(p){return this.ne.U(p,4)},u.prototype.sj=function(p){return this.ne.U(p,5)},u.prototype.nk=function(p){return this.ne.U(p,6)},u.prototype.PF=function(p){return this.ne.U(p,7)},u.prototype.rz=function(p){return this.Gj.U(p,0)},u.prototype.rR=function(p){return this.Gj.U(p,1)},u.prototype.OR=function(p){return this.Gj.U(p,2)},u.prototype.yR=function(p){return this.Hj[p].pa},u.prototype.vR=function(p){return this.Hj[p].wa},u.prototype.DX=function(p,f){this.Cm==null&&(this.Cm=new h.Zt);var g=new a(this);this.Cm.sort(p,0,f,g)},u.prototype.CX=function(p,f,g){var b=this;p.Wd(f,g,function(S,$){var E=b.qk(S),C=b.qk($);return E<C||E==C&&u.iq(S)&&u.Iv($)?-1:1})},u.prototype.qk=function(p){var f=this.Hj[p>>1];return u.iq(p)?f.pa:f.wa},u}();h.ur=o}(B||(B={})),function(h){var O=function(){function w(c){if(c==null)throw h.i.ga("Invalid arguement");this.hf=c;var a=c.iR();a.cS()?c.ef.DG()?this.no=h.ui.PannableFold:this.no=h.ui.Clip:this.no=h.ui.DontClip,a.dS()?c.$f.DG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=a.Lr,this.hH=a.Xu,c=this.hf.nH,this.WG=c.ks(2147483648),this.Wv=c.ks(1073741824)}return w.Bh=function(c,a,n){return a.yw.Bh(c,n)},w.Tt=function(c,a,n,o){return c.yw.Tt(a,n,o)},w.St=function(c,a,n,o){if(n=0>n?a.length:n,(c=c.yw.Tt(a,n,o))==n)return c;for(var u=a=0;u<n;u++){var p=o[u];p.isNaN()||(a<u&&o[a].N(p),a++)}for(;a<n;a++)o[a].Sc();return c},w.transform=function(c,a,n,o,u){if(c.isIdentity())return h.ua.fP(o,a,n),n;for(var p=[],f=0,g=0;g<n;){for(var b=Math.min(p.length,n-g),S=g,$=0;S<b;S++,$++)p[$]==null?p[$]=a[S].D():a[S].D(p[$]);var E=u?w.St(c,p,b,p):w.Tt(c,p,b,p);for($=S=0;S<E;S++,$++)o[g]==null&&(o[g]=new h.Ta(a[g])),o[g].Db(p[$]);g+=b,f+=E}return f},w.prototype.Tt=function(c,a,n){if(this.hf.isIdentity())return c!=n&&h.ua.Tu(n,c,a),a;var o=this.hf.ef,u=this.hf.$f,p=o.Tb(),f=u.Tb();if(p==0&&p===f){var g=o.Sp();return u=g/(u=u.Sp()),(g=new h.Ed).Jt(u,u),g.aY(c,a,n),a}if(g=h.P.Hu(Math.min(a,64)),p==3){var b=o.Li;p=(o=b.hk()).Tb(),n!=c&&h.ua.Tu(n,c,a),h.Ab.bl(b,n,a,!0),b.St(h.dm.forward,n,a),h.Ab.al(b,n,a,!0)}if(p==3||f===3)throw h.i.ga("image: transform_in_place_");if(p==2)this.no==h.ui.Clip?(n!=c&&h.ua.Tu(n,c,a),c=o.ol(),h.Ab.JS(c,o,n,a)):(n!=c&&h.ua.Tu(n,c,a),o.Xc()&&(p=o.Yd(0),b=o.Le(),h.Ab.AX(n,a,b,p),h.Ab.lF(n,a,o,0))),h.Ab.DL(o,n,a,g);else for(p=o.Yd(0),b=o.Le(),o=0;o<a;o++)h.Ab.BX(c[o],b,p,n[o]);for(h.Ab.BL(this.hf,n,a,g),c=0,(f=f==2)?c=u.Bi():isNaN(this.Dm)||(c=this.Dm),f&&this.Sm!=h.ui.Clip||h.Ab.lF(n,a,u.tc(),c),f&&(h.Ab.tG(n,a,u,this.Sm),h.Ab.CL(u,n,a,g)),c=a,o=0;o<a;++o)n[o].isNaN()&&c--;return c},w.prototype.Bh=function(c,a){if(this.hf.isIdentity()||c.B())return c;if(c.K()==33)return this.SI(c);var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb();if(u==0&&u==p)return a=n.Sp(),a/=o=o.Sp(),(o=new h.Ed).Jt(a,a),(c=h.ba.kg(c)).Pc(o),c;switch(c.K()){case 1607:case 1736:c=this.QI(c,a);break;case 550:c=this.aW(c,a);break;case 197:c=this.$V(c,a);break;default:throw h.i.ga("")}return c},w.prototype.SI=function(c){var a=c.D(),n=[];return n[0]=a,this.Tt(n,1,n),(c=new h.Ta(c)).Db(n[0]),c},w.prototype.QI=function(c,a){if(c.vm())throw h.i.ga("curves not supported");var n=c.K();if(n==1736)return this.bW(c,a);if(n==1607)return this.cW(c,a);throw h.i.ga("projectMultiPath")},w.prototype.bW=function(c,a){var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb(),f=h.P.Hu(Math.min(c.I(),64)),g=h.Ea.kg(c);u==3&&(u=(n=(c=n.Li).hk()).Tb(),g=c.bl(g,!0),this.yp(c,h.dm.forward,g),g=c.al(g,!0)),c=null,p==3&&(p=(o=(c=o.Li).hk()).Tb());var b=u==2,S=p==2,$=S?o.tc():o,E=!S&&!this.Wv;p=!1;var C=g;if(b){if((C=h.Ab.OI(C,n,this.no,a)).B())return C}else{if(g=new h.l,C.yc(g),u=n.Le(),g.G<u.G||g.H>u.H){var k=h.l.construct(g.v-1,u.G,g.C+1,u.H);if((C=h.ti.Pu(C,k,n,NaN,0,a)).B())return C}g.S()>2*u.S()&&(C=h.Ab.Jp(C,-2*u.S(),2*u.S(),n,!0,0,!0,a))}g=this.hH,(u=!isNaN(g))&&(C=h.Zl.local().W(C,g,a)),k=S?o.mk():null;var L=NaN;b&&(L=n.Bi());var N=o.Yr()!=null;if(this.WG)b&&(h.Ab.wr(n,L,C,f),u&&(b=n.jh(),g*=(L=n.tc().jh())/b)),h.Ab.vr(this.hf,C,E,f),u&&(b=n.tc().jh(),g*=(L=o.tc().jh())/b),n=C;else{var U=new h.Ua(C.description);U.yD(C),b&&(h.Ab.wr(n,L,U,f),u&&(b=n.jh(),g*=(L=n.tc().jh())/b)),h.Ab.vr(this.hf,U,E,f),u&&(b=n.tc().rm(),g*=(L=o.tc().rm())/b),E=NaN,S?(k=o.mk(),E=o.Bi()):isNaN(this.Dm)||(E=this.Dm),b=w.vv(n)|w.vv(o),L=10*$.Yd(0),this.Wv&&(b=3,L=0),n=h.Ab.PQ(C,n,U,$,E,a,b,L)}return N&&(n=h.Ab.SD(n,o,a)),S&&(p||(S=$.Le().S(),n.Vg(0,0).S()>=S-$.Yd(0)&&($=k.getNorthPoleLocation(),S=k.getSouthPoleLocation(),C=k.getNorthPoleGeometry(),k=k.getSouthPoleGeometry(),E=0,C==h.Eg.PE_POLE_POINT&&$!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(E=1),k==h.Eg.PE_POLE_POINT&&S!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(E|=2),E!==0&&(p=!0))),n=h.Ab.Hz(n,o,this.Sm,a),u&&(n=h.Zl.local().W(n,g,a)),h.Ab.Kx(o,n,f)),n.B()||(p&&(n=h.$l.local().W(n,o,!1,a)),c!=null&&(n=c.al(n,!1),this.yp(c,h.dm.reverse,n),n=c.bl(n,!1))),n},w.vv=function(c){if(c.Tb()!=2)return 0;var a=0,n=c.mk();c=n.getNorthPoleLocation();var o=n.getSouthPoleLocation(),u=n.getNorthPoleGeometry();return n=n.getSouthPoleGeometry(),u==h.Eg.PE_POLE_POINT&&c!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),n==h.Eg.PE_POLE_POINT&&o!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},w.prototype.cW=function(c,a){var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb(),f=h.P.Hu(Math.min(c.I(),64)),g=h.Ua.kg(c);u==3&&(u=(n=(c=n.Li).hk()).Tb(),g=c.bl(g,!0),this.yp(c,h.dm.forward,g),g=c.al(g,!0)),c=null,p==3&&(p=(o=(c=o.Li).hk()).Tb());var b=u==2;u=(p=p==2)?o.tc():o;var S=!p&&!this.Wv;if(b){if((g=h.Ab.OI(g,n,this.no,a)).B())return g}else{var $=new h.l;g.yc($);var E=n.Le();if(($.G<E.G||$.H>E.H)&&($=h.l.construct($.v-1,E.G,$.C+1,E.H),(g=h.ti.Pu(g,$,n,NaN,0,a)).B()))return g}var C=NaN;b&&(C=n.Bi()),$=o.Yr()!=null,E=this.hH;var k=!isNaN(E);if(k&&(g=h.Zl.local().W(g,E,a)),this.WG)b&&h.Ab.wr(n,C,g,f),k&&(b=n.jh(),E*=(C=n.tc().jh())/b),h.Ab.vr(this.hf,g,S,f),k&&(b=n.tc().jh(),E*=(C=o.tc().jh())/b),n=g;else{var L=new h.Ua(g.description);L.yD(g),b&&(h.Ab.wr(n,C,L,f),k&&(b=n.jh(),E*=(C=n.tc().jh())/b)),h.Ab.vr(this.hf,L,S,f),k&&(b=n.tc().jh(),E*=(C=o.tc().jh())/b),S=NaN,p?S=o.Bi():isNaN(this.Dm)||(S=this.Dm),b=w.vv(n)|w.vv(o),C=10*u.Yd(0),this.Wv&&(b=3,C=0),n=h.Ab.QQ(g,n,L,u,S,a,b,C)}return $&&(n=h.Ab.SD(n,o,a)),p&&(n=h.Ab.Hz(n,o,this.Sm,a),k&&(n=h.Zl.local().W(n,E,a)),h.Ab.Kx(o,n,f)),n.B()||c!=null&&(n=c.al(n,!1),this.yp(c,h.dm.reverse,n),n=c.bl(n,!1)),n},w.prototype.$V=function(c,a){var n=(c.da()+c.S())/400;return n!=0?(n=h.Zl.local().W(c,n,a),n=this.QI(n,a),a=c.Ja(),n.dn(a)):(a=new h.Ta(c.Kp()),n=this.SI(a),a=c.Ja(),n.B()?a.Pa():(c.copyTo(a),c=n.D(),a.L(c.x,c.y,c.x,c.y))),a},w.prototype.aW=function(c,a){c=h.ba.kg(c);var n=this.hf.ef,o=this.hf.$f,u=n.Tb(),p=o.Tb(),f=h.P.Hu(Math.min(c.I(),64));if(u==3){var g=n.Li;u=(n=g.hk()).Tb(),c=g.al(c,!0),this.yp(g,h.dm.forward,c),c=g.bl(c,!0)}if(u==2){if(this.no==h.ui.Clip?c=h.Zj.local().W(c,n.ol(),n,a):n.Xc()&&(u=new h.l,c.yc(u),n.Le().contains(u)||(this.no==h.ui.PannableFold&&(c=h.Ab.nj(c,n)),h.Ab.Lt(c,n.Le(),n.Yd(0),!0),c=h.Ab.Hn(c,n,0,!0,0,a))),c.B())return c;h.Ab.wr(n,0,c,f)}else h.Ab.Lt(c,n.Le(),n.Yd(0),!0);return h.Ab.vr(this.hf,c,!1,f),n=0,u=!1,g=null,p==3&&(u=!0,p=(o=(g=o.Li).hk()).Tb()),(p=p==2)?n=o.Bi():isNaN(this.Dm)||(n=this.Dm),p&&this.Sm!=h.ui.Clip||(c=h.Ab.Hn(c,o.tc(),n,!1,0,a)),p&&(c=h.Ab.Hz(c,o,this.Sm,a),h.Ab.Kx(o,c,f),c.B())||u&&(c=g.al(c,!0),this.yp(g,h.dm.reverse,c),c=g.bl(c,!0)),c},w.prototype.yp=function(c,a,n){var o=n.I();if(o!=0){for(var u=n.vb(0),p=h.P.mg(200,0),f=[],g=0;g<o;){var b=Math.min(100,o-g);u.Xw(2*g,2*b,p,2,!0);for(var S=0;S<b;++S)f[S]=h.h.construct(p[2*g],p[2*g+1]);c.St(a,f,b),g+=b}n.Qc(1993)}},w.Py=function(c,a,n){if(c==null||a==null||!a.Xc())throw h.i.ga("Invalid Arguement");if(c.B())return c;var o=c.K();return o==197?(o=new h.Ea(c.description)).bd(c,!1):h.ba.zd(o)?(o=new h.Ua(c.description)).pc(c,!0):o=c,(o=h.Ab.nj(o,a)).B()?o:h.Ab.Hn(o,a,0,o!=c,0,n)},w.pj=function(c,a,n,o){if(c==null||a==null||!a.Xc())throw h.i.ga("Invalid Arguement");if(c.B())return c;var u=c.K();if(h.ba.Ic(u)){c=h.Ab.nj(c,a),u=new h.l,c.A(u);for(var p=h.ua.oy(a,u,!1),f=a.ih(),g=Math.floor((u.v-f.v)/f.S())*f.S()+f.v;g<u.C;)g>u.v+p&&g<u.C-p&&(c=h.Ab.pS(c,a,n,g)),g+=f.S()}else{if(u==197)return(u=new h.Ea(c.description)).bd(c,!1),w.pj(u,a,n,o);if(h.ba.zd(u))return(u=new h.Ua(c.description)).pc(c,!0),w.pj(u,a,n,o)}return w.Py(c,a,o)},w}();h.du=O}(B||(B={})),function(h){var O=function(w){function c(a,n,o,u){var p=w.call(this)||this;return a===void 0?p.description=h.fe.pg():o===void 0?p.description=a:(p.description=h.fe.pg(),p.UB(a,n),p.Sl(o,u)),p}return Re(c,w),c.prototype.K=function(){return 322},c.prototype.Rb=function(){var a=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(a*a+n*n)},c.prototype.Di=function(a){var n=this.ta-this.qa,o=this.oa-this.ma;return Math.sqrt(n*n+o*o)<=a},c.prototype.Rn=function(){return!1},c.prototype.lg=function(){var a=new h.h;return a.vc(this.xc(),this.bc()),a},c.YO=function(a,n){return new c(a.x,a.y,n.x,n.y)},c.prototype.dn=function(a){a.Pa(),a.Pf(this.description);var n=new h.l;this.A(n),a.Zo(n),n=1;for(var o=this.description.Ba;n<o;n++)for(var u=this.description.ld(n),p=h.sa.Wa(u);n<p;n++){var f=this.Vg(u,0);a.setInterval(u,0,f)}},c.prototype.A=function(a){a.L(this.ta,this.oa,this.qa,this.ma),a.normalize()},c.prototype.So=function(a){a.Pa(),a.$b(this.ta,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},c.prototype.Pc=function(a){if(a instanceof h.Ed){this.wc();var n=new h.h;n.x=this.ta,n.y=this.oa,a.Gh(n,n),this.ta=n.x,this.oa=n.y,n.x=this.qa,n.y=this.ma,a.Gh(n,n),this.qa=n.x,this.ma=n.y}else this.wc(),(n=new h.Od).x=this.ta,n.y=this.oa,n.z=this.Pd(0,1,0),n=a.hp(n),this.ta=n.x,this.oa=n.y,this.vn(0,1,0,n.z),n.x=this.qa,n.y=this.ma,n.z=this.Pd(1,1,0),n=a.hp(n),this.qa=n.x,this.ma=n.y,this.vn(1,1,0,n.z)},c.prototype.Ja=function(){return new c(this.description)},c.prototype.Sx=function(a,n){return(this.qa-a-(this.ta-a))*(this.ma-n+(this.oa-n))*.5},c.prototype.ux=function(a){return a*this.Rb()},c.prototype.IG=function(a){return a/this.Rb()},c.prototype.yF=function(a){return h.mc.jq(this.ta,this.qa,a)},c.prototype.aR=function(a){return h.mc.jq(this.oa,this.ma,a)},c.prototype.fl=function(a,n){var o=new h.jg;return this.dh(a,n,o),o.get()},c.prototype.dh=function(a,n,o){if(o==null)throw h.i.O();o.Qr(),(o=o.get()).Pf(this.description);var u=new h.h;this.ic(a,u),o.UB(u.x,u.y),this.ic(n,u),o.Sl(u.x,u.y),u=1;for(var p=this.description.Ba;u<p;u++)for(var f=this.description.Fd(u),g=h.sa.Wa(f),b=0;b<g;b++){var S=this.Vc(a,f,b);o.TB(f,b,S),S=this.Vc(n,f,b),o.JB(f,b,S)}},c.prototype.Vc=function(a,n,o){if(n==0)return o==0?this.ic(a).x:this.ic(a).y;switch(h.sa.gz(n)){case 0:return .5>a?this.yv(n,o):this.jv(n,o);case 1:var u=this.yv(n,o);return n=this.jv(n,o),h.mc.jq(u,n,a);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},c.prototype.ge=function(a,n){var o=this.qa-this.ta,u=this.ma-this.oa,p=o*o+u*u;return p==0?.5:(a=((a.x-this.ta)*o+(a.y-this.oa)*u)/p,n||(0>a?a=0:1<a&&(a=1)),a)},c.prototype.fq=function(a,n,o,u){if(a){if((a=this.ma-this.oa)==0)return n==this.ma?-1:0;if(0>(n=(n-this.oa)/a)||1<n)return 0;o!=null&&(o[0]=this.yF(n))}else{if((a=this.qa-this.ta)==0)return n==this.qa?-1:0;if(0>(n=(n-this.ta)/a)||1<n)return 0;o!=null&&(o[0]=this.aR(n))}return u!=null&&(u[0]=n),1},c.prototype.Me=function(a,n){var o=this.ma-this.oa;return o==0?a==this.ma?n:NaN:(a=(a-this.oa)/o,n=this.yF(a),a==1&&(n=this.qa),n)},c.prototype.tu=function(a,n,o){return 0<=this.tp(a.x,a.y,n,o)},c.prototype.xi=function(a,n,o){return 0<=this.tp(a,n,o,!0)},c.prototype.ss=function(a,n){return this.tu(a,n,!1)},c.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var a=this.ta;this.ta=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var n=this.description.Qq-2;a<n;a++){var o=this.la[a];this.la[a]=this.la[a+n],this.la[a+n]=o}}},c.prototype.wu=function(a,n){(n=h.h.construct(a,n)).sub(this.bc());var o=new h.h;return o.vc(this.xc(),this.bc()),(a=o.yi(n))>(n=8881784197001252e-31*(Math.abs(o.x*n.y)+Math.abs(o.y*n.x)))?-1:a<-n?1:0},c.prototype.tp=function(a,n,o,u){var p=this.ta,f=this.oa,g=a-p,b=n-f;if((g=Math.sqrt(g*g+b*b))<=Math.max(o,6661338147750939e-31*g))return u&&g==0?NaN:0;if(g=a-this.qa,b=n-this.ma,(g=Math.sqrt(g*g+b*b))<=Math.max(o,6661338147750939e-31*g))return u&&g==0?NaN:1;if(g=this.qa-this.ta,b=this.ma-this.oa,0<(u=Math.sqrt(g*g+b*b))){var S=1/u,$=a-p,E=n-f,C=$*(g*=S)+E*(b*=S),k=17763568394002505e-31*(Math.abs($*g)+Math.abs(E*b)),L=g;if(g=-b,b=L,C<-(k=Math.max(o,k))||C>u+k)return NaN;if(Math.abs($*g+E*b)<=Math.max(o,17763568394002505e-31*(Math.abs($*g)+Math.abs(E*b)))&&(.5>=(g=h.P.Tk(C*S,0,1))?(b=this.ta+(this.qa-this.ta)*g,u=this.oa+(this.ma-this.oa)*g):(b=this.qa-(this.qa-this.ta)*(1-g),u=this.ma-(this.ma-this.oa)*(1-g)),h.h.Jy(b,u,a,n)<=o)){if(.5>g){if(h.h.Jy(b,u,p,f)<=o)return 0}else if(h.h.Jy(b,u,this.qa,this.ma)<=o)return 1;return g}}return NaN},c.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.AM(a))},c.prototype.mD=function(a,n,o){var u=o?this.ta:this.qa;o=o?this.oa:this.ma;var p=new h.h;return p.x=a.qa-u,p.y=a.ma-o,!(n.Sh(p)>6661338147750939e-31*n.aD(p))||(p.x=a.ta-u,p.y=a.oa-o,n.Sh(p)<=6661338147750939e-31*n.aD(p))},c.prototype.lD=function(a){var n=new h.h;return n.x=this.qa-this.ta,n.y=this.ma-this.oa,!!this.mD(a,n,!1)&&(n.Uq(),!!this.mD(a,n,!0))},c.IM=function(a,n){var o=a.wu(n.ta,n.oa),u=a.wu(n.qa,n.ma);return!(0>o&&0>u||0<o&&0<u)&&(o=n.wu(a.ta,a.oa),u=n.wu(a.qa,a.ma),!(0>o&&0>u||0<o&&0<u)&&((o=a.Rb())>(u=n.Rb())?a.lD(n):n.lD(a)))},c.GM=function(a,n,o){var u=h.h.construct(NaN,NaN),p=a.qa-a.ta,f=a.ma-a.oa,g=n.qa-n.ta,b=n.ma-n.oa,S=g*f-p*b;if(S==0)return u;var $=8881784197001252e-31*(Math.abs(g*f)+Math.abs(p*b)),E=n.ta-a.ta,C=n.oa-a.oa,k=g*C-E*b,L=k/S,N=Math.abs(S);return L<-(g=(8881784197001252e-31*(Math.abs(g*C)+Math.abs(E*b))*N+$*Math.abs(k))/(S*S)+2220446049250313e-31*Math.abs(L))||L>1+g||(g=(b=p*C-E*f)/S)<-(p=(8881784197001252e-31*(Math.abs(p*C)+Math.abs(E*f))*N+$*Math.abs(b))/(S*S)+2220446049250313e-31*Math.abs(g))||g>1+p||(L=h.P.Tk(L,0,1),p=h.P.Tk(g,0,1),f=a.ic(L),S=n.ic(p),($=new h.h).vc(f,S),$.length()>o&&($.add(f,S),$.scale(.5),L=a.ge($,!1),p=n.ge($,!1),a=a.ic(L),n=n.ic(p),a.sub(n),a.length()>o)||u.na(L,p)),u},c.JM=function(a,n,o,u){var p=0;if((a.ta==n.ta&&a.oa==n.oa||a.ta==n.qa&&a.oa==n.ma)&&(p++,!u))return 1;if(a.qa==n.ta&&a.ma==n.oa||a.qa==n.qa&&a.ma==n.ma){if(++p==2)return 2;if(!u)return 1}return n.xi(a.ta,a.oa,o)||n.xi(a.qa,a.ma,o)||a.xi(n.ta,n.oa,o)||a.xi(n.qa,n.ma,o)?1:u&&p!=0||c.IM(a,n)==0?0:1},c.Yx=function(a,n,o,u,p,f){var g=0,b=a.tp(n.ta,n.oa,f,!1),S=a.tp(n.qa,n.ma,f,!1),$=n.tp(a.ta,a.oa,f,!1),E=n.tp(a.qa,a.ma,f,!1);return isNaN(b)||(u!=null&&(u[g]=b),p!=null&&(p[g]=0),o!=null&&(o[g]=h.h.construct(n.ta,n.oa)),g++),isNaN(S)||(u!=null&&(u[g]=S),p!=null&&(p[g]=1),o!=null&&(o[g]=h.h.construct(n.qa,n.ma)),g++),g==2||isNaN($)||b==0&&$==0||S==0&&$==1||(u!=null&&(u[g]=0),p!=null&&(p[g]=$),o!=null&&(o[g]=h.h.construct(a.ta,a.oa)),g++),g==2||isNaN(E)||b==1&&E==0||S==1&&E==1||(u!=null&&(u[g]=1),p!=null&&(p[g]=E),o!=null&&(o[g]=h.h.construct(n.qa,n.ma)),g++),0<g?(g==2&&u!=null&&u[0]>u[1]&&(a=u[0],u[0]=u[1],u[1]=a,p!=null&&(u=p[0],p[0]=p[1],p[1]=u),o!=null&&(p=h.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),g):(g=c.GM(a,n,f),isNaN(g.x)?0:(o!=null&&(o[0]=a.ic(g.x)),u!=null&&(u[0]=g.x),p!=null&&(p[0]=g.y),1))},c.prototype.$F=function(){return 0},c.prototype.qp=function(){},c.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},c}(h.NC);h.zb=O}(B||(B={})),function(h){var O=function(){function w(){this.Lm=[],this.za=-1}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var c=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),c}return this.Lm=null},w.prototype.VX=function(c){this.Lm.push(c)},w.prototype.re=function(){},w}();h.bL=O}(B||(B={})),function(h){var O;(O=h.NL||(h.NL={}))[O.enumFillRuleOddEven=0]="enumFillRuleOddEven",O[O.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(c){function a(n,o){var u=c.call(this)||this;if(u.yf=!1,u.Gq=null,u.uq=0,u.tq=0,u.Cj=null,u.Og=!1,u.nb=null,u.mb=null,u.Se=null,u.Nj=null,u.Td=null,u.vq=0,u.gb=0,u.zq=0,o===void 0)u.yf=n,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=h.fe.pg();else{if(o==null)throw h.i.O();u.yf=n,u.Og=!1,u.vq=0,u.uq=0,u.tq=0,u.xa=0,u.description=o}return u.Cj=null,u.gb=0,u}return Re(a,c),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.Pf(this.description)},a.prototype.rx=function(n,o){var u=new h.h;u.x=n,u.y=o,this.Nt(u)},a.prototype.Nt=function(n){this.Xx(),this.Gq.Db(n),this.Og=!0},a.prototype.nf=function(n){if(n.B())throw h.i.O();this.Ll(n.description),this.Xx(),n.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var n=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),n++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+n),this.fm(o+n),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(n,o){this.Rx(),this.Db(this.xa-1,n,o)},a.prototype.Ei=function(n){this.Rx(),this.Db(this.xa-1,n)},a.prototype.lineTo=function(n){this.Rx(),this.It(this.xa-1,n)},a.prototype.xU=function(n){if(this.wc(),this.yf)throw h.i.Ra();var o=this.ea();if(n>o)throw h.i.Ra();if(this.ec(n)){if(this.mb==null)throw h.i.Ra();var u=this.xa,p=this.Ca(n),f=this.Wc(n);this.fm(this.xa+1),this.oc();for(var g=0,b=this.description.Ba;g<b;g++)if(this.Aa[g]!=null){var S=h.sa.Wa(this.description.Fd(g));this.Aa[g].On(S*f,this.Aa[g],S*p,S,!0,1,S*u)}for(;o>n;o--)u=this.nb.read(o),this.nb.write(o,u+1);this.mb.FE(n,1)}},a.prototype.Cp=function(){if(this.vx(),n===void 0){this.Og=!1;var n=this.ea()-1}var o=this.mb.read(n);this.mb.write(n,1|o),this.Se!=null&&(n=this.Wc(n)-1,this.Se.write(n,1),this.Nj.write(n,-1))},a.prototype.ec=function(n){return(1&this.mb.read(n))!=0},a.prototype.Pn=function(n){if(this.ec(n))return!0;var o=this.Ca(n);return!(o>(n=this.Wc(n)-1))&&(o=this.Oa(o),n=this.Oa(n),o.rb(n))},a.prototype.Av=function(n){return(2&this.mb.read(n))!=0},a.prototype.pc=function(n,o){if(this.Ll(n.description),n.K()!=322)throw h.i.Ra();var u=new h.Ta;(o||this.B())&&(n.Vo(u),this.nf(u)),n.Ro(u),this.lineTo(u)},a.prototype.vp=function(n){var o=this.xa==0;this.rx(n.v,n.G),this.Aj(n.v,n.H),this.Aj(n.C,n.H),this.Aj(n.C,n.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(n,o){if(!n.B()){for(var u=this.xa==0,p=new h.Ta(this.description),f=0;4>f;f++)n.If(o?4-f-1:f,p),f==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,u&&!o&&this.Nf(256,!1)}},a.prototype.add=function(n,o){for(var u=0;u<n.ea();u++)this.addPath(n,u,!o)},a.prototype.addPath=function(n,o,u){this.wf(-1,n,o,u)},a.prototype.$k=function(n,o){this.Cz(n,o)},a.prototype.Fr=function(n,o,u,p,f){if(f||this.ea()!=0||(f=!0),0>o&&(o=n.ea()-1),o>=n.ea()||0>u||0>p||p>n.tv(o))throw h.i.ga("index out of bounds");if(p!=0){var g=n.ec(o)&&u+p==n.tv(o);if(!g||p!=1){if(this.Og=!1,this.Ll(n.description),u=n.Ca(o)+u+1,f&&(p++,u--),g&&p--,g=this.xa,this.fm(this.xa+p),this.oc(),f){if(p==0)return;this.nb.add(this.xa),f=n.mb.read(o),f&=-5,this.yf&&(f|=1),this.mb.write(this.mb.size-1,f),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);f=0;for(var b=this.description.Ba;f<b;f++){var S=this.description.ld(f),$=h.sa.Wa(S),E=n.description.Rf(S);0>E||n.Aa[E]==null?this.Aa[f].Nn($*g,h.sa.te(S),p*$,$*g):this.Aa[f].On($*g,n.Aa[E],$*u,p*$,!0,$,$*g)}if(this.vm()||n.Av(o))throw h.i.Ra();this.Qc(1993)}}},a.prototype.jJ=function(){for(var n=0,o=this.ea();n<o;n++)this.zW(n)},a.prototype.zW=function(n){if(this.oc(),n>=this.ea())throw h.i.O();var o=this.Ca(n),u=this.Ka(n);n=this.ec(n)?1:0;for(var p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var g=h.sa.Wa(this.description.Fd(p));this.Aa[p].pi(g*(o+n),g*(u-n),g)}this.Qc(1993)},a.prototype.ar=function(n){this.oc();var o=this.ea();if(0>n&&(n=o-1),n>=o)throw h.i.O();for(var u=this.Ca(n),p=this.Ka(n),f=0,g=this.description.Ba;f<g;f++)if(this.Aa[f]!=null){var b=h.sa.Wa(this.description.Fd(f));this.Aa[f].Gn(b*u,b*p,b*this.xa)}for(u=n+1;u<=o;u++)f=this.nb.read(u),this.nb.write(u-1,f-p);if(this.mb==null)for(u=n+1;u<=o;u++)n=this.mb.read(u),this.mb.write(u-1,n);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(n,o,u,p){if(o==this||u>=o.ea())throw h.i.O();var f=this.ea();if(n>f)throw h.i.O();0>n&&(n=f),0>u&&(u=o.ea()-1),this.Og=!1,this.Ll(o.description),o.oc();var g=o.Ca(u),b=o.Ka(u),S=this.xa,$=o.ec(u)&&!p?1:0;this.fm(this.xa+b),this.oc();for(var E=n<f?this.Ca(n):S,C=0,k=this.description.Ba;C<k;C++){var L=this.description.Fd(C),N=o.description.Rf(L),U=h.sa.Wa(L);0<=N&&o.Aa[N]!=null?($!=0&&this.Aa[C].On(E*U,o.Aa[N],U*g,U,!0,U,U*S),this.Aa[C].On((E+$)*U,o.Aa[N],U*(g+$),U*(b-$),p,U,U*(S+$))):this.Aa[C].Nn(E*U,h.sa.te(L),U*b,U*S)}for(this.nb.add(S+b),p=f;p>=n+1;p--)g=this.nb.read(p-1),this.nb.write(p,g+b);for(o.Av(u),this.mb.add(0),p=f-1;p>=n+1;p--)f=this.mb.read(p),f&=-5,this.mb.write(p+1,f);f=o.ER().read(u),f&=-5,this.yf&&(f|=1),this.mb.write(n,f)},a.prototype.Cz=function(n,o){var u=-1,p=this.ea();if(u>p)throw h.i.O();0>u&&(u=p),this.Og=!1;var f=this.xa;this.fm(this.xa+o),this.oc();var g=u<p?this.Ca(u):f;if(n!=null)this.Aa[0].Dz(2*g,n,0,o,!0,2*f);else{var b=h.sa.te(0);this.Aa[0].Nn(2*g,b,2*o,2*f)}n=1;for(var S=this.description.Ba;n<S;n++){b=this.description.ld(n);var $=h.sa.Wa(b);b=h.sa.te(b),this.Aa[n].Nn(g*$,b,$*o,$*f)}for(this.nb.add(this.xa),f=p;f>=u+1;f--)g=this.nb.read(f-1),this.nb.write(f,g+o);for(this.mb.add(0),f=p-1;f>=u+1;f--)o=this.mb.read(f),o&=-5,this.mb.write(f+1,o);this.yf&&this.mb.write(u,1)},a.prototype.lG=function(n,o,u){var p=-1;if(0>n&&(n=this.ea()),n>this.ea()||p>this.Ka(n)||u>o.length)throw h.i.ga("index out of bounds");if(u!=0){n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(n)),this.oc();var f=this.xa;this.fm(this.xa+u),this.oc();for(var g=0,b=this.description.Ba;g<b;g++){var S=this.description.Fd(g),$=h.sa.Wa(S);this.Aa[g].Wt($*(this.Ca(n)+p+u),(f-this.Ca(n)-p)*$,this.Aa[g],$*(this.Ca(n)+p),!0,$),g==0?this.Aa[g].qC($*(this.Ca(n)+p),u,o,0,!0):this.Aa[g].Yj(h.sa.te(S),(this.Ca(n)+p)*$,u*$)}for(this.vm()&&(this.Se.Wt(this.Ca(n)+p+u,f-this.Ca(n)-p,this.Se,this.Ca(n)+p,!0,1),this.Nj.Wt(this.Ca(n)+p+u,f-this.Ca(n)-p,this.Nj,this.Ca(n)+p,!0,1),this.Se.Yj(1,this.Ca(n)+p,u),this.Nj.Yj(-1,this.Ca(n)+p,u)),n+=1,o=this.ea();n<=o;n++)this.nb.write(n,this.nb.read(n)+u)}},a.prototype.xf=function(n,o,u){var p=this.ea();if(0>n&&(n=this.ea()),n>=p||o>this.Ka(n))throw h.i.ga("index out of bounds");n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(n));var f=this.xa;this.fm(this.xa+1),this.oc();var g=this.Ca(n);this.Aa[0].xj(2*(g+o),u,2*f),u=1;for(var b=this.description.Ba;u<b;u++){var S=this.description.Fd(u),$=h.sa.Wa(S);this.Aa[u].Nn($*(g+o),h.sa.te(S),$,$*f)}for(n+=1;n<=p;n++)this.nb.write(n,this.nb.read(n)+1)},a.prototype.yB=function(n,o){var u=this.ea();if(0>n&&(n=u-1),n>=u||o>=this.Ka(n))throw h.i.ga("index out of bounds");this.oc();var p=this.Ca(n);0>o&&(o=this.Ka(n)-1),o=p+o,p=0;for(var f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var g=h.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(g*o,g,g*this.xa)}for(;u>=n+1;u--)o=this.nb.read(u),this.nb.write(u,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.pE=function(n,o,u,p){if(n=this.Ca(n)+o,(u=this.Ca(u)+p)<n||0>n||u>this.I()-1)throw h.i.O();o=0,(p=this.Ha()).Wb(n);do{for(;p.Ia()&&(n=p.ia(),p.xb()!=u);)o+=n=n.Rb();if(p.xb()==u)break}while(p.ab());return o},a.prototype.aO=function(n,o,u){if(o=this.Ca(n)+o,u=this.Ca(n)+u,0>o||u>this.I()-1)throw h.i.O();var p=this.Ha();if(o>u){if(!this.ec(n))throw h.i.O("cannot iterate across an open path");p.EB()}var f=n=0;p.Wb(o);do f+=n,n=p.ia().Rb();while(p.xb()!=u);return f},a.prototype.ng=function(){return h.si.im(this,null)},a.prototype.FS=function(n,o,u){for(var p=n;p<u-1;p++)if(this.ec(p))throw h.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var f=this.pE(n,o,u,void 0);if(f!=0)for(var g=1;g<p;g++){var b=this.description.ld(g);if(h.sa.gz(b)!=2)for(var S=h.sa.Wa(b),$=0;$<S;$++)this.HS(b,n,o,u,f,$)}}},a.prototype.ES=function(n,o,u){var p=this.description.Ba;if(p!=1){var f=this.aO(n,o,u);if(f!=0)for(var g=1;g<p;g++){var b=this.description.ld(g);if(h.sa.gz(b)!=2)for(var S=h.sa.Wa(b),$=0;$<S;$++)this.GS(b,n,o,u,f,$)}}},a.prototype.HS=function(n,o,u,p,f,g){var b=this.Ha(),S=this.Ca(o)+u;p=this.Ca(p)+void 0,o=this.Vc(n,S,g),u=this.Vc(n,p,g);var $=o,E=0;b.Wb(S);do if(b.Ia()){if(b.ia(),b.xb()==p)break;this.setAttribute(n,b.xb(),g,$),b.ni();do{if(S=b.ia(),b.kk()==p)return;E+=S=S.Rb(),$=h.mc.jq(o,u,E/f),b.Qn()||this.setAttribute(n,b.kk(),g,$)}while(b.Ia())}while(b.ab())},a.prototype.GS=function(n,o,u,p,f,g){var b=this.Ha(),S=this.Ca(o)+u;if((o=this.Ca(o)+p)!=S){p=this.Vc(n,S,g),u=this.Vc(n,o,g);var $=0;b.Wb(S),b.EB(),S=p;do{var E=b.ia();this.setAttribute(n,b.xb(),g,S),$+=S=E.Rb(),S=h.mc.jq(p,u,$/f)}while(b.kk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},a.prototype.Pc=function(n){n instanceof h.Ed?this.TD(n,-1):this.rN(n)},a.prototype.TD=function(n,o){if(!this.B()&&!n.isIdentity()){this.oc();var u=this.Aa[0],p=new h.h,f=new h.h;if(0>o){var g=this.vm(),b=0;o=this.xa}else g=this.Av(o),b=this.Ca(o),o=this.Wc(o);for(;b<o;b++){if(p.x=u.read(2*b),p.y=u.read(2*b+1),g){var S=this.Nj.read(b);if(0<=S)switch(7&this.Se.read(b)){case 2:f.x=this.Td.read(S),f.y=this.Td.read(S+1),n.Gh(f,f),this.Td.write(S,f.x),this.Td.write(S+1,f.y),f.x=this.Td.read(S+3),f.y=this.Td.read(S+4),n.Gh(f,f),this.Td.write(S+3,f.x),this.Td.write(S+4,f.y);break;case 4:throw h.i.Ra()}}n.Gh(p,p),u.write(2*b,p.x),u.write(2*b+1,p.y)}this.Qc(1993)}},a.prototype.rN=function(n){if(!this.B()){this.se(1),this.oc();for(var o=this.Aa[0],u=this.Aa[1],p=new h.Od,f=new h.Od,g=this.vm(),b=0;b<this.xa;b++){if(p.x=o.read(2*b),p.y=o.read(2*b+1),p.z=u.read(b),g){var S=this.Nj.read(b);if(0<=S)switch(7&this.Se.read(b)){case 2:f.x=this.Td.read(S),f.y=this.Td.read(S+1),f.z=this.Td.read(S+2),f=n.hp(f),this.Td.write(S,f.x),this.Td.write(S+1,f.y),this.Td.write(S+1,f.z),f.x=this.Td.read(S+3),f.y=this.Td.read(S+4),f.z=this.Td.read(S+5),f=n.hp(f),this.Td.write(S+3,f.x),this.Td.write(S+4,f.y),this.Td.write(S+5,f.z);break;case 4:throw h.i.Ra()}}p=n.hp(p),o.write(2*b,p.x),o.write(2*b+1,p.y),u.write(b,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.qp=function(n){n.Og=!1,n.vq=this.vq,n.zq=this.zq,n.nb=this.nb!=null?h.ja.Dn(this.nb):null,n.mb=this.mb!=null?h.rn.Dn(this.mb):null,n.Nj=this.Nj!=null?h.ja.Dn(this.Nj):null,n.Se=this.Se!=null?h.rn.Dn(this.Se):null,n.Td=this.Td!=null?h.ce.Dn(this.Td):null,n.uq=this.uq,n.tq=this.tq,n.Cj=this.ck(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var n=this.Ha(),o=new h.Ex(0);n.ab();)for(;n.Ia();)o.add(n.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&c.prototype.Nb.call(this,n)))return!1;var o=this.ea();return!(o!=n.ea()||this.nb!=null&&!this.nb.Nb(n.nb,0,o+1)||this.zq!=n.zq||this.mb!=null&&!this.mb.Nb(n.mb,0,o))&&c.prototype.Nb.call(this,n)},a.prototype.Ha=function(){return new h.TL(this)},a.prototype.dy=function(n){if(c.prototype.dy.call(this,n),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Ap=function(n,o){if(c.prototype.Ap.call(this,n,o),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(n){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(n)):(4&this.mb.read(n))!=0)},a.prototype.Kr=function(n){return this.yf?(this.zu(),this.Cj.read(n)):0},a.prototype.zu=function(){if(this.ck(1024)){var n=this.ea();this.Cj==null?this.Cj=new h.ce(n):this.Cj.size!=n&&this.Cj.resize(n),n=new h.Ex(0);for(var o=new h.Ex(0),u=new h.h,p=0,f=this.Ha();f.ab();){for(o.reset(),this.D(this.Ca(f.gb),u);f.Ia();)o.add(f.ia().Sx(u.x,u.y));n.add(o.tm());var g=p++;this.Cj.write(g,o.tm())}this.tq=n.tm(),this.Nf(1024,!1)}},a.prototype.AR=function(){if(this.yf){this.hm();for(var n=this.ea(),o=0;o<n;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.ck(8)){this.zu();var n=this.ea();(this.mb==null||this.mb.size<n)&&(this.mb=h.Zc.Or(n+1));for(var o=1,u=0;u<n;u++){var p=this.Cj.read(u);u==0&&(o=0<p?1:-1),0<p*o?this.mb.uJ(u,4):this.mb.FE(u,4)}this.Nf(8,!1)}},a.prototype.nz=function(n){var o=this.gb,u=this.ea();if(0<=o&&o<u){if(n<this.Wc(o)){if(n>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<u&&n>=this.Ca(o)&&n<this.Wc(o))return this.gb=o}if(5>u){for(o=0;o<u;o++)if(n<this.Wc(o))return this.gb=o;throw h.i.ga("corrupted geometry")}for(o=0,--u;u>o;){var p=o+(u-o>>1);if(n<this.Ca(p))u=p-1;else{if(!(n>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var n=this.I();if(!this.yf){n-=this.ea();for(var o=0,u=this.ea();o<u;o++)this.ec(o)&&n++}return n},a.prototype.tv=function(n){var o=this.Ka(n);return this.ec(n)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.LJ=function(n){this.nb=n,this.Qc(16777215)},a.prototype.QR=function(){return this.vx(),this.Se},a.prototype.ER=function(){return this.vx(),this.mb},a.prototype.KJ=function(n){this.mb=n,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(n){return this.nb.read(n+1)},a.prototype.Ka=function(n){return this.nb.read(n+1)-this.nb.read(n)},a.prototype.Ca=function(n){return this.nb.read(n)},a.prototype.nu=function(n,o){this.Cb==null&&(this.Cb=new h.Wk),o=h.Mx.kW(o);var u=this.Cb.Hk;if(u!=null){if(!(u.Kk<n||o>u.MR()))return!0;this.Cb.tD(null)}return u=h.Mx.create(this,n,o),this.Cb.tD(u),!0},a.prototype.dc=function(){var n=c.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Cn(n,0,o+1),this.mb!=null&&this.mb.Cn(n,0,o)}return n},a.prototype.UF=function(n){return this.Se!=null?this.Se.read(n):1},a.prototype.cc=function(n,o,u){var p=this.nz(n);if(n==this.Wc(p)-1&&!this.ec(p))throw h.i.ga("index out of bounds");this.oc();var f=this.Se,g=1;if(f!=null&&(g=7&f.read(n)),g!==1)throw h.i.Ra();if(o.Qr(),o=o.get(),u?o.Pf(h.fe.pg()):o.Pf(this.description),p=n==this.Wc(p)-1&&this.ec(p)?this.Ca(p):n+1,f=new h.h,this.D(n,f),o.Ec(f),this.D(p,f),o.Rc(f),!u)for(u=1,f=this.description.Ba;u<f;u++){g=this.description.Fd(u);for(var b=h.sa.Wa(g),S=0;S<b;S++){var $=this.Vc(g,n,S);o.TB(g,S,$),$=this.Vc(g,p,S),o.JB(g,S,$)}}},a.prototype.Tj=function(n,o){if(n>=this.ea())throw h.i.O();if(this.B())o.Pa();else{if(this.Av(n))throw h.i.ga("not implemented");var u=this.vb(0),p=new h.h,f=new h.l;f.Pa();var g=this.Ca(n);for(n=this.Wc(n);g<n;g++)u.uc(2*g,p),f.$b(p);o.L(f)}},a.prototype.hj=function(n){return this.Cb==null&&(this.Cb=new h.Wk),!(n==0||16>this.I())&&(n=h.ua.iE(this),this.Cb.RM(n),!0)},a.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new h.Wk),this.Cb.Bo==null){this.Cb.sD(null);var n=h.ua.TN(this);this.Cb.sD(n)}},a.prototype.$o=function(n){this.zq=n},a.prototype.Kn=function(){return this.zq},a.prototype.yD=function(n){if(this==n)throw h.i.ga("MultiPathImpl.add");for(var o=this.ea(),u=0;u<n.ea();u++)this.addPath(n,u,!0),this.xU(o),o++},a.prototype.fO=function(n){var o=this.nz(n),u=this.Ca(o);if(u!=n){if(n>=(o=this.Wc(o))||n<u)throw h.i.ga("change_ring_start_point");for(var p=0,f=this.description.Ba;p<f;p++){var g=this.description.ld(p);g=h.sa.Wa(g),this.Aa[p].rotate(u*g,n*g,o*g)}}},a}(h.Fx);h.Xk=w}(B||(B={})),function(h){var O=function(w){function c(a){var n=w.call(this)||this;if(a!==void 0){if(a==null)throw h.i.O();n.description=a}else n.description=h.fe.pg();return n.xa=0,n}return Re(c,w),c.prototype.Ja=function(){return new c(this.description)},c.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},c.prototype.Du=function(a,n){this.resize(this.xa+1);var o=new h.h;o.na(a,n),this.Db(this.xa-1,o)},c.prototype.Gd=function(a,n,o){if(o=0>o?a.I():o,0>n||n>a.I()||o<n)throw h.i.O();if(n!=o){this.Ll(a.description),o-=n;var u=this.xa;this.resize(this.xa+o),this.oc();for(var p=0,f=a.description.Ba;p<f;p++){var g=a.description.Fd(p),b=h.sa.Wa(g),S=this.vb(g);g=a.vb(g),S.On(u*b,g,n*b,o*b,!0,1,u*b)}}},c.prototype.CD=function(a,n){var o=a.length;if(n=0>n?o:n,0>o||0>n)throw h.i.O();if(n!=0){o=n-0,n=this.xa,this.resize(this.xa+o);for(var u=0;u<o;u++)this.Db(n+u,a[0+u])}},c.prototype.yB=function(a){if(0>a||a>=this.I())throw h.i.ga("index out of bounds");this.oc();for(var n=0,o=this.description.Ba;n<o;n++)if(this.Aa[n]!=null){var u=h.sa.Wa(this.description.Fd(n));this.Aa[n].Gn(u*a,u,u*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},c.prototype.resize=function(a){this.fm(a)},c.prototype.qp=function(){},c.prototype.Pa=function(){w.prototype.rD.call(this)},c.prototype.Pc=function(a){if(a instanceof h.Ed){if(this.B())return;this.oc();for(var n=this.Aa[0],o=new h.h,u=0;u<this.xa;u++)o.x=n.read(2*u),o.y=n.read(2*u+1),a.Gh(o,o),n.write(2*u,o.x),n.write(2*u+1,o.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),n=this.Aa[0],o=this.Aa[1];var p=new h.Od;for(u=0;u<this.xa;u++){p.x=n.read(2*u),p.y=n.read(2*u+1),p.z=o.read(u);var f=a.hp(p);n.write(2*u,f.x),n.write(2*u+1,f.y),o.write(u,f.z)}}this.Qc(1993)},c.prototype.Eb=function(){return 0},c.prototype.K=function(){return 550},c.prototype.He=function(){return 0},c.prototype.Rb=function(){return 0},c.prototype.Nb=function(a){return a==this||a instanceof c&&w.prototype.Nb.call(this,a)},c.prototype.gW=function(a,n){var o=this.xa;if(o=Math.min(o,n+1e3),0>n||n>=this.xa||o<n||a.length!=1e3)throw h.i.O();var u=o-n,p=[];for(this.vb(0).Xw(2*n,2*u,p,0,!0),n=0;n<u;n++)a[n]=h.h.construct(p[2*n],p[2*n+1]);return o},c.prototype.Zx=function(){},c.prototype.ey=function(){},c.prototype.nu=function(){return!1},c.prototype.hj=function(){return!1},c.prototype.ng=function(){return null},c}(h.Fx);h.ee=O}(B||(B={})),function(h){var O;(O=h.dL||(h.dL={}))[O.NotDetermined=0]="NotDetermined",O[O.Structure=1]="Structure",O[O.DegenerateSegments=2]="DegenerateSegments",O[O.Clustering=3]="Clustering",O[O.Cracking=4]="Cracking",O[O.CrossOver=5]="CrossOver",O[O.RingOrientation=6]="RingOrientation",O[O.RingOrder=7]="RingOrder",O[O.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",O[O.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",O[O.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function c(a,n,o){a===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=a,this.Lo=n,this.Mo=o)}return c.prototype.Yt=function(a){this.Lj=a.Lj,this.Lo=a.Lo,this.Mo=a.Mo},c}();h.Nd=w}(B||(B={})),function(h){h.P=function(){function O(){}return O.assert=function(w){if(w===!1)throw h.i.BK()},O.XJ=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},O.Hu=function(w){var c;c===void 0&&(c=0);for(var a=[],n=0;n<w;n++)a[n]=O.mg(2,c);return a},O.mg=function(w,c){c===void 0&&(c=0);for(var a=[],n=0;n<w;n++)a[n]=c;return a},O.bv=function(w,c){var a,n;for(a===void 0&&(a=0),n===void 0&&(n=w.length-1);a<=n;a++)w[a]=c},O.Tk=function(w,c,a){return w<c?c:w>a?a:w},O.Vh=function(w,c){var a=5381;return((a=((a=((a=c!==void 0?(c<<5)+c+(255&w):(a<<5)+a+(255&w))<<5)+a+(w>>8&255))<<5)+a+(w>>16&255))<<5)+a+(w>>24&255)&2147483647},O.wj=function(){throw Error("Not Implemented")},O.XA=function(w){return O.WT(w)+12345&2147483647},O.SG=function(w){var c=32,a=w%O.Px|0,n=w/O.Px|0;return(c&=63)==0?w:(32>c?(w=a>>>c|n<<32-c,c=n>>c):(w=n>>c-32,c=0<=n?0:-1),c*O.Px+(w>>>0))},O.WT=function(w){var c=1103515245,a=65535&c;return((c-a)*(w|=0)|0)+(a*w|0)|0},O.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},O.MAX_SAFE_INTEGER=Math.pow(2,53)-1,O.MIN_SAFE_INTEGER=-O.MAX_SAFE_INTEGER,O.QC=65536,O.Px=O.QC*O.QC,O}()}(B||(B={})),function(h){var O;(O=h.xL||(h.xL={}))[O.Project=0]="Project",O[O.Union=1]="Union",O[O.Difference=2]="Difference",O[O.Proximity2D=3]="Proximity2D",O[O.Relate=4]="Relate",O[O.Equals=5]="Equals",O[O.Disjoint=6]="Disjoint",O[O.Intersects=7]="Intersects",O[O.Within=8]="Within",O[O.Contains=9]="Contains",O[O.Crosses=10]="Crosses",O[O.Touches=11]="Touches",O[O.Overlaps=12]="Overlaps",O[O.Buffer=13]="Buffer",O[O.Distance=14]="Distance",O[O.Intersection=15]="Intersection",O[O.Clip=16]="Clip",O[O.Cut=17]="Cut",O[O.DensifyByLength=18]="DensifyByLength",O[O.DensifyByAngle=19]="DensifyByAngle",O[O.LabelPoint=20]="LabelPoint",O[O.GeodesicBuffer=21]="GeodesicBuffer",O[O.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",O[O.ShapePreservingDensify=23]="ShapePreservingDensify",O[O.GeodeticLength=24]="GeodeticLength",O[O.GeodeticArea=25]="GeodeticArea",O[O.Simplify=26]="Simplify",O[O.SimplifyOGC=27]="SimplifyOGC",O[O.Offset=28]="Offset",O[O.Generalize=29]="Generalize",O[O.SymmetricDifference=30]="SymmetricDifference",O[O.ConvexHull=31]="ConvexHull",O[O.Boundary=32]="Boundary",O[O.SimpleRelation=33]="SimpleRelation";var w=function(){function c(){}return c.prototype.K=function(){return null},c.prototype.yn=function(){},c.prototype.Ku=function(){return!1},c}();h.Ge=w}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 13},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(p=new h.$c(a),this.W(p,n,[o],!1,u).next()):u===!0?(o=new h.wC(a,n,o,!1,p),h.Ih.local().W(o,n,p)):new h.wC(a,n,o,!1,p)},c.instance=null,c}(h.Ge);h.vC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u){this.za=-1,this.Sd=c,this.Vz=a,this.Es=n,this.nT=new h.l,this.nT.Pa(),this.ho=-1,this.Vb=u}return w.prototype.next=function(){for(var c;(c=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(c,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.buffer=function(c,a){return h.CK.buffer(c,a,this.Vz,NaN,96,this.Vb)},w.prototype.re=function(){},w}();h.wC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 16},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.gL(a,n,o,u)},c.instance=null,c}(h.Ge);h.fL=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){if(this.za=-1,c==null)throw h.i.O();this.aa=a,this.Ak=c,this.ra=h.ua.Xd(n,a,!1)}return w.prototype.next=function(){var c;return(c=this.Ak.next())!=null?(this.za=this.Ak.Ma(),h.Vd.clip(c,this.aa,this.ra,0)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.gL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 31},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){return a instanceof h.ba?h.yC.mE(a):new h.yC(n,a,o)},c.instance=null,c}(h.Ge);h.xC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){if(this.pA=new h.au,this.za=-1,a==null)throw h.i.O();this.YG=c,this.Jc=!1,this.Ak=a,this.Vb=n}return w.prototype.next=function(){if(this.YG){if(!this.Jc){var c=this.ZN(this.Ak);return this.Jc=!0,c}return null}if(!this.Jc){if((c=this.Ak.next())!=null)return this.za=this.Ak.Ma(),w.mE(c);this.Jc=!0}return null},w.prototype.Ma=function(){return this.za},w.prototype.ZN=function(c){for(var a;(a=c.next())!=null;)this.pA.Ib(a);return this.pA.YQ()},w.prototype.re=function(){if(!this.Jc){if(!this.YG)throw h.i.ga("Invalid call for non merging convex hull.");var c=this.Ak.next();if(c==null)throw h.i.ga("Expects a non-null geometry.");this.pA.Ib(c)}},w.mE=function(c){if(w.QS(c))return c;var a=c.K();if(h.Xk.zd(a))return(a=new h.Ua(c.description)).pc(c,!0),a;if(a==550&&c.I()==2){var n=new h.Ta;return a=new h.Ua(c.description),c.we(0,n),a.nf(n),c.we(1,n),a.lineTo(n),a}return h.au.MO(c)},w.QS=function(c){if(c.B())return!0;var a=c.K();return a==33||a==197||!h.Xk.zd(a)&&(a==550?c.I()==1:a==1607?c.ea()==1&&2>=c.I():c.ea()==1&&(2>=c.I()||h.au.EG(c,0)))},w}();h.yC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 17},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return new h.iL(a,n,o,u,p)},c.instance=null,c}(h.Ge);h.hL=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u){if(this.Vf=null,a==null||n==null)throw h.i.ga("invalid argument");this.kT=c,this.iA=a,this.gH=n,c=h.ua.ov(a,n),this.ra=h.ua.Xd(o,c,!0),this.fH=-1,this.od=u}return w.prototype.Ma=function(){return 0},w.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},w.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},w.prototype.OQ=function(){var c=new h.Ua,a=new h.Ua,n=new h.Ua;this.Vf.push(c),this.Vf.push(a);var o=[];h.GK.EK(this.kT,this.iA,this.gH,this.ra,o,this.od);for(var u=0;u<o.length;u++){var p=o[u];if(p.ct==0)c.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Vf.push(p.Y);else{if(p.ct!=4)throw h.i.ga("internal");n.add(p.Y,!1)}}n.B()||c.B()&&a.B()&&!(3<=this.Vf.length)||this.Vf.push(n),c.B()&&a.B()&&3>this.Vf.length&&(this.Vf.length=0)},w.prototype.NQ=function(){var c=new h.ja(0),a=new h.hd,n=a.WE(),o=a.Ib(this.iA),u=a.Ib(this.gH),p=new h.Hg;try{p.Gt(a,this.ra,this.od),p.fl(n,o,u,c);var f=a.Ke(o),g=new h.Ea,b=new h.Ea;for(this.Vf.length=0,this.Vf.push(g),this.Vf.push(b),o=0;o<c.size;o++){var S=new h.hd,$=S.Ib(f),E=S.Ib(a.Ke(c.get(o)));p.fr(S,this.od);var C=p.Cv($,E),k=S.Ke(C);if(!k.B()){var L=a.FF(c.get(o),n);L==2?g.add(k,!1):L==1?b.add(k,!1):this.Vf.push(k);var N=new h.hd;$=N.Ib(f),E=N.Ib(a.Ke(c.get(o))),p.fr(N,this.od),f=N.Ke(p.km($,E))}}!f.B()&&0<c.size&&this.Vf.push(f),g.B()&&b.B()&&(this.Vf.length=0)}finally{p.Wg()}},w.prototype.re=function(){},w}();h.iL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){if(a instanceof h.ba)return a=new h.$c(a),this.W(a,n,o).next();if(0>=n)throw h.i.O();return new h.jL(a,n,o)},c.instance=null,c}(h.Ge);h.Zl=O}(B||(B={})),function(h){var O=function(){function w(c,a){this.za=-1,this.Sd=c,this.Rs=a}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){var c;return(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(c)):null},w.prototype.IP=function(c){if(c.B()||1>c.Eb())return c;var a=c.K();if(a==1736||a==1607)return this.Iy(c);if(h.ba.zd(a))return this.KP(c);if(a==197)return this.JP(c);throw h.i.Ra()},w.prototype.KP=function(c){if(c.Rb()<=this.Rs)return c;var a=new h.Ua(c.description);return a.pc(c,!0),this.Iy(a)},w.prototype.JP=function(c){var a=new h.Ea(c.description);a.bd(c,!1);var n=new h.l;return c.A(n),c=n.da(),n.S()<=this.Rs&&c<=this.Rs?a:this.Iy(a)},w.prototype.Iy=function(c){for(var a=c.Ja(),n=c.Ha();n.ab();)for(var o=!0;n.Ia();){var u=n.ia();if(u.K()!=322)throw h.i.ga("not implemented");var p=n.Qn(),f=u.Rb();if(f>this.Rs){var g=Math.ceil(f/this.Rs);f=new h.Ta(c.description),o&&(u.Vo(f),a.nf(f));var b=o=1/g,S=0;for(--g;S<g;S++)u.Vw(b,f),a.lineTo(f),b+=o;p?a.Cp():(u.Ro(f),a.lineTo(f))}else p?a.Cp():a.pc(u,o);o=!1}return a},w.prototype.re=function(){},w}();h.jL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.K=function(){return 2},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u).next()):new h.kL(a,n,o,u)},c.km=function(a,n,o,u){if(a.B()||n.B())return a;var p=a.Eb(),f=n.Eb();if(p>f)return a;var g=a.K(),b=n.K(),S=new h.l,$=new h.l,E=new h.l;a.A(S),n.A($),E.L(S),E.$b($);var C=(E=h.ua.Xd(o,E,!0))*Math.sqrt(2)*1.00001,k=new h.l;if(k.L(S),k.X(C,C),!k.isIntersecting($))return a;if(p==1&&f==2)return c.FV(a,n,b,o,u);if(g==33)switch(h.Xk.zd(b)?(o=new h.Ua(n.description),o.pc(n,!0)):o=n,b){case 1736:return c.SU(a,o,E);case 1607:return c.TU(a,o,E);case 550:return c.QU(a,o,E);case 197:return c.PU(a,o,E);case 33:return c.RU(a,o,E);default:throw h.i.O()}else if(g==550)switch(b){case 1736:return c.iU(a,n,E);case 197:return c.gU(a,n,E);case 33:return c.hU(a,n,E)}return h.Hg.km(a,n,o,u)},c.SU=function(a,n,o){return h.jd.FG(n,a,o)==0?a:a.Ja()},c.TU=function(a,n,o){var u=a.D();n=n.Ha();for(var p=o*Math.sqrt(2)*1.00001,f=p*p,g=new h.l;n.ab();)for(;n.Ia();){var b=n.ia();if(b.A(g),g.X(p,p),g.contains(u)){if(b.ss(u,o))return a.Ja();var S=b.bc();if(h.h.zc(u,S)<=f||(S=b.xc(),h.h.zc(u,S)<=f))return a.Ja()}}return a},c.QU=function(a,n,o){var u=n.vb(0);n=n.I();var p=a.D(),f=new h.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var g=0;g<n;g++)if(u.uc(2*g,f),h.h.zc(f,p)<=o)return a.Ja();return a},c.PU=function(a,n,o){var u=new h.l;return n.A(u),u.X(o,o),n=a.D(),u.contains(n)?a.Ja():a},c.RU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D();return n=n.D(),h.h.zc(u,n)<=o?a.Ja():a},c.iU=function(a,n,o){var u=new h.l;n.A(u),u.X(o,o);for(var p=a.I(),f=!1,g=[],b=0;b<p;b++)g[b]=!1;var S=new h.h;for(b=0;b<p;b++)a.D(b,S),u.contains(S)&&h.jd.Zd(n,S,o)!=0&&(f=!0,g[b]=!0);if(!f)return a;for(n=a.Ja(),b=0;b<p;b++)g[b]||n.Gd(a,b,b+1);return n},c.gU=function(a,n,o){var u=new h.l;n.A(u),u.X(o,o),n=a.I();var p=!1;o=[];for(var f=0;f<n;f++)o[f]=!1;var g=new h.h;for(f=0;f<n;f++)a.D(f,g),u.contains(g)&&(p=!0,o[f]=!0);if(!p)return a;for(u=a.Ja(),f=0;f<n;f++)o[f]||u.Gd(a,f,f+1);return u},c.hU=function(a,n,o){var u=a.vb(0),p=a.I(),f=n.D(),g=new h.h,b=!1;n=[];for(var S=0;S<p;S++)n[S]=!1;for(o=(S=o*Math.sqrt(2)*1.00001)*S,S=0;S<p;S++)u.uc(2*S,g),h.h.zc(g,f)<=o&&(b=!0,n[S]=!0);if(!b)return a;for(u=a.Ja(),S=0;S<p;S++)n[S]||u.Gd(a,S,S+1);return u},c.FV=function(a,n,o,u,p){var f=new h.Hh;a.dn(f);var g=new h.l;return n.A(g),f.$b(g),f.X(.1*f.S(),.1*f.da()),(g=new h.Ea).bd(f,!1),o==1736?g.add(n,!0):g.bd(n,!0),h.Zj.local().W(a,g,u,p)},c.instance=null,c}(h.Ge);h.mp=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){this.vs=a==null,this.za=-1,this.Sd=c,this.Vz=n,this.rT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.mp.km(c,this.rT,this.Vz,this.Vb)):null;var c},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.kL=O}(B||(B={})),function(h){var O=function(){function c(a){this.od=a,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return c.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},c.prototype.$P=function(a,n){if(this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(a.K())&&h.ba.Ic(n.K())?a.I()>n.I()?this.bE(a,n,o):(this.Pt(),a=this.bE(n,a,o),this.Pt(),a):a.K()==550&&h.ba.Ic(n.K())?(a=this.cE(n,a,o),this.Pt(),a):n.K()==550&&h.ba.Ic(a.K())?this.cE(a,n,o):a.K()==550&&n.K()==550?a.I()>n.I()?this.dE(a,n):(this.Pt(),a=this.dE(n,a),this.Pt(),a):0},c.prototype.bE=function(a,n,o){var u=a.Ha(),p=n.Ha(),f=new h.l,g=new h.l,b=17976931348623157e292;if(!o&&this.lY(a,n,u,p))return 0;for(;u.ab();)for(;u.Ia();)if((a=u.ia()).A(f),!(f.px(this.qh)>b)){for(;p.ab();)for(;p.Ia();)if((n=p.ia()).A(g),f.px(g)<b&&(n=a.ub(n,o),(n*=n)<b)){if(n==0)return 0;b=n}p.aj()}return Math.sqrt(b)},c.prototype.cE=function(a,n,o){var u=a.Ha(),p=new h.l,f=17976931348623157e292,g=new h.h,b=n.I();for(o=!o&&a.K()==1736;u.ab();)for(;u.Ia();){var S=u.ia();if(S.A(p),!(1<b&&p.px(this.qh)>f)){for(var $=0;$<b;$++){if(n.D($,g),o&&h.jd.Zd(a,g,0)!=0)return 0;var E=S.ge(g,!1);if(g.sub(S.ic(E)),(E=g.Uk())<f){if(E==0)return 0;f=E}}o=!1}}return Math.sqrt(f)},c.prototype.dE=function(a,n){for(var o,u=17976931348623157e292,p=new h.h,f=new h.h,g=a.I(),b=n.I(),S=0;S<g;S++)if(a.D(S,p),!(1<b&&this.qh.dK(p)>u)){for(var $=0;$<b;$++)if(n.D($,f),(o=h.h.zc(p,f))<u){if(o==0)return 0;u=o}}return Math.sqrt(u)},c.prototype.lY=function(a,n,o,u){if(a.K()==1736){for(;u.ab();)if(u.Ia()){var p=u.ia();if(h.jd.Zd(a,p.xc(),0)!=0)return!0}u.aj()}if(n.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),h.jd.Zd(n,a.xc(),0)!=0))return!0;o.aj()}return!1},c.prototype.im=function(a,n){return a.B()||n.B()?NaN:(a.A(this.Dj),n.A(this.qh),this.$P(a,n))},c}(),w=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Re(a,c),a.prototype.W=function(n,o,u){if(n==null||o==null)throw h.i.O();if(n.B()||o.B())return NaN;var p=n.K(),f=o.K();if(p==33){if(f==33)return h.h.ub(n.D(),o.D());if(f==197)return u=new h.l,o.A(u),u.ub(n.D());(p=new h.ee).add(n),n=p}else if(p==197){if(f==197)return f=new h.l,n.A(f),u=new h.l,o.A(u),u.ub(f);(p=new h.Ea).bd(n,!1),n=p}return f==33?((f=new h.ee).add(o),o=f):f==197&&((f=new h.Ea).bd(o,!1),o=f),new O(u).im(n,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(h.Ge);h.lL=w}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){this.uH=c,this.yH=a,this.od=o,this.VG=n}return w.prototype.next=function(){var c=this.uH.next();return c==null?null:this.uC(c)},w.prototype.Ma=function(){return this.uH.Ma()},w.prototype.uC=function(c){var a=c.K();if(h.ba.Tn(a))return c;if(a==197)return(a=new h.Ea(c.description)).bd(c,!1),this.uC(a);if(c.B())return c;if(c==null)throw h.i.Ra();a=c.Ja();for(var n=new h.zb,o=0,u=c.ea();o<u;o++)this.OK(c,o,a,n);return a},w.prototype.OK=function(c,a,n,o){if(!(2>c.Ka(a))){var u=c.Ca(a),p=c.Wc(a)-1,f=c.vb(0),g=c.ec(a),b=new h.ja(0);b.Jb(c.Ka(a)+1);var S=new h.ja(0);for(S.Jb(c.Ka(a)+1),b.add(g?u:p),b.add(u),u=new h.h;1<b.size;){var $=b.Gc();b.Jf();var E=b.Gc();c.D($,u),o.Ec(u),c.D(E,u),o.Rc(u),0<=(E=this.NK(o,u,f,$,E,p))?(b.add(E),b.add($)):S.add($)}if(g||S.add(b.get(0)),S.size==b.size)n.addPath(c,a,!0);else if(2<=S.size&&(!this.VG||S.size!=2||!(g||h.h.ub(c.Oa(S.get(0)),c.Oa(S.get(1)))<=this.yH))){for(a=new h.Ta,o=0,p=S.size;o<p;o++)c.we(S.get(o),a),o==0?n.nf(a):n.lineTo(a);g&&(this.VG||S.size!=2||n.lineTo(a),n.Cp())}}},w.prototype.NK=function(c,a,n,o,u,p){var f=u-1;for(u<=o&&(f=p),p=u=-1,o+=1;o<=f;o++){n.uc(2*o,a);var g=a.x,b=a.y;c.ic(c.ge(a,!1),a),a.x-=g,a.y-=b,(g=a.length())>this.yH&&g>p&&(u=o,p=g)}return u},w.prototype.re=function(){},w}();h.mL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 29},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.mL(a,n,o,u)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.zC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 21},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p,f,g,b){return a instanceof h.ba?(b=new h.$c(a),this.W(b,n,o,[u],p,f,!1,g).next()):g===!0?(o=new h.BC(a,n,o,u,p,!1,!1,b),h.Ih.local().W(o,n,b)):new h.BC(a,n,o,u,p,!1,!1,b)},c.instance=null,c}(h.Ge);h.AC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u,p,f,g){if(p)throw h.i.Fe();if(a==null)throw h.i.O();this.za=-1,this.Os=c,this.wg=a,this.Ae=n,this.Es=o,this.bo=u,this.ho=-1,this.Vb=g,this.oT=new h.l,this.oT.Pa()}return w.prototype.next=function(){for(var c;(c=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(c,this.Es[this.ho]);return null},w.prototype.Ma=function(){return this.za},w.prototype.VQ=function(c,a){return h.QK.buffer(c,this.wg,this.Ae,a,this.bo,this.Vb)},w.prototype.re=function(){},w}();h.BC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 24},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o){if(n==null)throw h.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw h.i.Fe();var u=h.cb.tc(n),p=h.cb.xv(u),f=h.cb.gv(u);p*=2-p;var g=u.Id().ci,b=a.K();if(b==1736||b==197)var S=a.ng();else h.ba.zd(b)?(S=new h.Ua(a.description)).pc(a,!0):S=a;if(u.Nb(n)==0){if(h.cb.Xc(n)){S=h.Jh.nj(S,n),b==1607&&S==a&&(S=h.ba.kg(a)),a=new h.Oc,h.cb.ih(n).en(a),b=0;for(var $=S.I();b<$;b++){var E=S.Oa(b);E.x=h.Jh.an(E.x,a),S.Db(b,E)}}a=S.Ja(),S=h.Jh.RI(n,u,S,a)?a:h.cb.Bh(S,n,u)}return this.cQ(S,o,f,p,g)},c.prototype.cQ=function(a,n,o,u,p){var f=new h.ha(0),g=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var b=a.ia(),S=b.bc();b=b.xc(),S.scale(p),b.scale(p),h.kb.xd(o,u,S.x,S.y,b.x,b.y,f,null,null,n),g+=f.u}return g},c.instance=null,c}(h.Ge);h.qL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 18},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u,p).next()):new h.oL(a,o,u,n,-1,-1,p)},c.instance=null,c}(h.Ge);h.nL=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u,p){if(0<p||n!=4&&0<u)throw h.i.Fe();if(a==null)throw h.i.O();this.za=-1,this.Os=c,this.wg=a,this.Ae=n,this.yT=o,this.xT=u}return w.prototype.next=function(){for(var c;(c=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(c);return null},w.prototype.Ma=function(){return this.za},w.prototype.Uy=function(c){return h.ej.Sr(c,this.wg,this.Ae,this.yT,this.xT,this.Vb)},w.prototype.re=function(){},w}();h.oL=O}(B||(B={})),function(h){(function(O){O[O.Unknown=0]="Unknown",O[O.Contains=1]="Contains",O[O.Within=2]="Within",O[O.Equals=3]="Equals",O[O.Disjoint=4]="Disjoint",O[O.Touches=8]="Touches",O[O.Crosses=16]="Crosses",O[O.Overlaps=32]="Overlaps",O[O.NoThisRelation=64]="NoThisRelation",O[O.Intersects=1073741824]="Intersects",O[O.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.YK||(h.YK={})),h.rL=function(){function O(){}return O.iW=function(w,c){var a=w.K(),n=c.K();if(h.ba.zj(a)){var o=w.Cb;if(o!=null&&(o=o.Hk)!=null){if(n==33){var u=c.D();o=o.Uo(u.x,u.y)}else u=new h.l,c.A(u),o=o.To(u);if(o==1)return 1;if(o==0)return 4}}if(h.ba.zj(n)&&(o=c.Cb)!=null&&(o=o.Hk)!=null){if(a==33?(w=w.D(),o=o.Uo(w.x,w.y)):(c=new h.l,w.A(c),o=o.To(c)),o==1)return 2;if(o==0)return 4}return 0},O}()}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.K=function(){return 15},c.prototype.W=function(a,n,o,u,p){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u,p===void 0?-1:p).next()):p===void 0?new h.CC(a,n,o,u,-1):new h.CC(a,n,o,u,p)},c.prototype.yn=function(a,n,o){this.Ku(a)&&(n=h.ua.mj(n,a,!1),a.hj(o)||a.nu(n,o))},c.prototype.Ku=function(a){return h.Mx.uE(a)},c.instance=null,c}(h.Ge);h.Zj=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u){if(this.vs=a==null,this.za=-1,this.Sd=c,this.wg=n,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=u,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return w.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var c=this.Bw.next();if(c!=null)return c;this.Bw=null}for(;(c=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?c=this.Fa(c):(this.Bw=this.KS(c),c=this.Bw.next()),c;return null},w.prototype.Ma=function(){return this.za},w.prototype.Fa=function(c){var a=this.uK(c);if(a!=null)return a;a=h.ua.ov(this.Pe,c);var n=h.ua.Xd(this.wg,a,!0);a=new h.l,this.Pe.A(a);var o=new h.l;return c.A(o),a.X(2*n,2*n),a.Fa(o),a.X(100*n,100*n),n=h.Vd.clip(this.Pe,a,0,0),c=h.Vd.clip(c,a,0,0),h.Hg.Cv(c,n,this.wg,this.Vb)},w.prototype.KI=function(c,a,n){var o=0;if((1&a)!=0)n[0]==null&&(n[0]=new h.ee(c)),o++;else for(var u=0;u<n.length-1;u++)n[u]=n[u+1];if((2&a)!=0)n[o]==null&&(n[o]=new h.Ua(c)),o++;else for(u=o;u<n.length-1;u++)n[u]=n[u+1];if((4&a)!=0)n[o]==null&&(n[o]=new h.Ea(c)),o++;else for(u=o;u<n.length-1;u++)n[u]=n[u+1];if(o!=3){for(c=[],u=0;u<o;u++)c[u]=n[u];return new h.$c(c)}return new h.$c(n)},w.prototype.KS=function(c){var a=this.uK(c);if(a!=null){var n=[null,null,null];return n[a.Eb()]=a,this.KI(c.description,this.Hi,n)}a=h.ua.ov(this.Pe,c),n=h.ua.Xd(this.wg,a,!0),a=new h.l,this.Pe.A(a),a.X(2*n,2*n);var o=new h.l;return c.A(o),a.Fa(o),a.X(100*n,100*n),n=h.Vd.clip(this.Pe,a,0,0),a=h.Vd.clip(c,a,0,0),n=h.Hg.Kz(a,n,this.wg,this.Vb),this.KI(c.description,this.Hi,n)},w.prototype.uK=function(c){var a=h.ua.ov(c,this.Pe),n=h.ua.Xd(this.wg,a,!0);a=c.K();var o=c.B(),u=this.Pe.B();if(!(u=o||u)){u=new h.l,c.A(u);var p=new h.l;this.Pe.A(p),p.X(2*n,2*n),u=!u.isIntersecting(p)}if(!u)if((p=h.rL.iW(this.Pe,c))==4)u=!0;else{if((2&p)!=0)return this.Pe;if((1&p)!=0)return c}if(u)return(n=h.ba.uf(a))<(u=h.ba.uf(this.Fj))?w.CB(c,o):n>u||n==0&&a==550&&this.Fj==33?this.iJ():w.CB(c,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return n=this.Pe,a=new h.l,c.A(a),o=new h.l,n.A(o),a.Fa(o),n=new h.Hh,c.copyTo(n),n.Zo(a),n;if(a==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(a)==0)return o=a==197?c:this.Pe,c=a==197?this.Pe:c,a=new h.l,o.A(a),h.Vd.clip(c,a,n,0);if(h.ba.uf(a)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(a)&&h.ba.uf(this.Fj)==0){if(n=h.ua.mj(this.wg,c,!1),a==550||a==33)return h.Hg.uG(c,this.Pe,n);if(this.Fj==550||this.Fj==33)return h.Hg.uG(this.Pe,c,n);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.rK(this.Pe,c):this.rK(c,this.Pe)},w.prototype.rK=function(c,a){var n=c,o=a,u=h.ua.mj(this.wg,a,!1),p=new h.l;o.A(p);var f=new h.l;n.A(f),f.X(2*u,2*u),p.Fa(f),p.X(10*u,10*u),n=c=h.Vd.clip(c,p,0,0),f=new h.ja(0);var g=-1,b=o.Cb;if(b!=null){var S=b.Hk;if(S!=null){g=0,f.Jb(n.I()+n.ea());for(var $=new h.l,E=n.Ha();E.ab();)for(;E.Ia();){E.ia().A($);var C=S.To($);C==1?f.add(1):C==0?f.add(0):(f.add(-1),g++)}}}if(5<a.I()&&(b=(o=a=h.Vd.clip(a,p,0,0)).Cb),0>g&&(g=n.sz()),p=n.I()+o.I(),g*o.I()>Math.log(p)*p*4)return null;p=null,g=o.Ha(),b!=null&&b.Gb!=null&&(p=b.Gb),p==null&&20<o.I()&&(p=h.ua.iE(o)),c=c.Ja(),o=null,b=n.Ha(),S=[0,0,0,0,0,0,0,0,0],$=new h.ce(0),E=new h.jg,C=-1;for(var k=0,L=0,N=0<f.size,U=-1;b.ab();){U=b.gb;var H=0;for(C=-1,k=0;b.Ia();){var j=N?h.P.truncate(f.get(L)):-1;L++;var K=b.ia();if(0>j){if(p!=null)for(o==null?o=p.qR(K,u):o.Wo(K,u),j=o.next();j!=-1;j=o.next()){g.Wb(p.ka(j)),j=g.ia();var se=K.Fa(j,null,S,null,u);for(j=0;j<se;j++)$.add(S[j])}else for(g.aj();g.ab();)for(;g.Ia();)for(j=g.ia(),se=K.Fa(j,null,S,null,u),j=0;j<se;j++)$.add(S[j]);if(0<$.size){$.Wd(0,$.size,function(Oe,Ce){return Oe-Ce});var ne=0;$.add(1),se=-1,j=0;for(var pe=$.size;j<pe;j++){var ce=$.get(j);if(ce!=ne){var _e=!1;if(ne!=0||ce!=1?(K.dh(ne,ce,E),ne=E.get()):(ne=K,_e=!0),2<=H){if(c.Fr(n,U,C,k,H==3),this.LD(a,ne.bc(),u)!=1&&this.MD(a,ne,u)!=1)return null;c.pc(ne,!1),H=1,k=0}else switch(se=this.MD(a,ne,u),se){case 1:_e?2>H?(C=b.xb()-n.Ca(U),k=1,H=H==0?3:2):k++:(c.pc(ne,H==0),H=1);break;case 0:H=0,C=-1,k=0;break;default:return null}ne=ce}}}else{if(0>(j=this.LD(a,K.bc(),u)))return null;j==1?(2>H&&(C=b.xb()-n.Ca(U),H=H==0?3:2),k++):(C=-1,k=0)}$.clear(!1)}else j!=0&&j==1&&(H==0?(H=3,C=b.xb()-n.Ca(U)):H==1?(H=2,C=b.xb()-n.Ca(U)):k++)}2<=H&&(c.Fr(n,U,C,k,H==3),C=-1)}return c},w.prototype.LD=function(c,a,n){return h.Fg.ym(c,a,n)},w.prototype.MD=function(c,a,n){var o=a.bc();a=a.xc();var u=h.Fg.ym(c,o,n),p=h.Fg.ym(c,a,n);return u==1&&p==0||u==0&&p==1?-1:u==0||p==0?0:u==1||p==1?1:((u=new h.h).add(o,a),u.scale(.5),(c=h.Fg.ym(c,u,n))==0?0:c==1?1:-1)},w.CB=function(c,a){return a?c:c.Ja()},w.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},w.prototype.re=function(){},w}();h.CC=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 28},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u,p,f,g){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u,p,f,g).next()):new h.sL(a,n,o,u,p,f,g)},c.instance=null,c}(h.Ge);h.DC=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o,u,p,f){this.za=-1,this.Sd=c,this.Oj=a,this.La=n,this.Mi=o,this.xA=u,this.pH=p,this.od=f}return w.prototype.next=function(){var c=this.Sd.next();return c!=null?(this.za=this.Sd.Ma(),this.eL(c)):null},w.prototype.Ma=function(){return this.za},w.prototype.eL=function(c){var a=0>=this.pH?h.ua.mj(this.Oj,c,!1):this.pH;return h.DK.W(c,this.La,this.Mi,this.xA,a,this.od)},w.prototype.re=function(){},w}();h.sL=O}(B||(B={})),function(h){var O;(O=h.IK||(h.IK={}))[O.clipToDomainOnly=1]="clipToDomainOnly",O[O.clipWithHorizon=2]="clipWithHorizon",O[O.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Re(a,c),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(n,o,u){return n instanceof h.ba?(n=new h.$c(n),this.W(n,o,u).next()):new h.tL(n,o,u)},a.prototype.transform=function(n,o,u,p){return h.du.transform(n,o,u,p,!0)},a.prototype.St=function(n,o,u,p){return h.du.St(n,o,u,p)},a.instance=null,a}(h.Ge);h.Gx=w}(B||(B={})),function(h){var O=function(){function w(c,a,n){this.za=-1,this.Sd=c,this.HT=a,this.od=n}return w.prototype.next=function(){var c=this.Sd.next();return c!=null?(this.za=this.Sd.Ma(),h.du.Bh(c,this.HT,this.od)):null},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.tL=O}(B||(B={})),function(h){var O=function(){function c(){}return c.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},c.prototype.vQ=function(a,n,o){for(a.Wb(n,o);a.Ia();){var u=a.ia();if((u=u.Rb())!=0)return a.xb()}for(a.Wb(n,o);a.zz();)if((u=(u=a.ni()).Rb())!=0)return a.xb();return-1},c.prototype.wQ=function(a,n){for(a.Wb(n,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},c.prototype.uQ=function(a,n){for(a.Wb(n,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},c.prototype.tQ=function(a,n,o,u){if(this.zk=this.vQ(n,o,u),this.zk!=-1){n.Wb(this.zk,-1);var p=n.ia(),f=p.ic(p.ge(a,!1));if(o=h.h.zc(f,a),(u=new h.h).N(f),u.sub(p.bc()),(f=new h.h).N(a),f.sub(p.bc()),this.mq=0>u.yi(f),this.rh=this.uQ(n,this.zk),this.rh!=-1){n.Wb(this.rh,-1);var g=(p=n.ia()).ge(a,!1);g=p.ic(g);var b=h.h.zc(g,a);b>o?this.rh=-1:(u.N(g),u.sub(p.bc()),f.N(a),f.sub(p.bc()),this.ws=0>u.yi(f))}this.rh==-1&&(this.rh=this.wQ(n,this.zk),this.rh!=-1&&(n.Wb(this.rh,-1),g=(p=n.ia()).ge(a,!1),g=p.ic(g),(b=h.h.zc(g,a))>o?this.rh=-1:(u.N(g),u.sub(p.bc()),f.N(a),f.sub(p.bc()),this.ws=0>u.yi(f),a=this.zk,this.zk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},c.prototype.YN=function(a,n,o,u,p){return o=o.Ha(),this.tQ(a,o,u,p),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.zk,-1),a=o.ia().lg(),o.Wb(this.rh,-1),n=o.ia().lg(),0<=a.yi(n)):n},c}(),w=function(c){function a(){return c!==null&&c.apply(this,arguments)||this}return Re(a,c),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(n,o,u){var p;if(p===void 0&&(p=!1),n.B())return new h.bm;o=o.D();var f=n,g=n.K();switch(g==197&&((f=new h.Ea).bd(n,!1),g=1736),g){case 33:return this.sI(f,o);case 550:return this.eI(f,o);case 1607:case 1736:return this.XT(f,o,u,p);default:throw h.i.ga("not implemented")}},a.prototype.jz=function(n,o){if(n.B())return new h.bm;o=o.D();var u=n,p=n.K();switch(p==197&&((u=new h.Ea).bd(n,!1),p=1736),p){case 33:return this.sI(u,o);case 550:case 1607:case 1736:return this.eI(u,o);default:throw h.i.ga("not implemented")}},a.prototype.kz=function(n,o,u,p){if(0>p)throw h.i.O();if(n.B())return[];o=o.D();var f=n,g=n.K();switch(g==197&&((f=new h.Ea).bd(n,!1),g=1736),g){case 33:return this.OU(f,o,u,p);case 550:case 1607:case 1736:return this.oU(f,o,u,p);default:throw h.i.ga("not implemented")}},a.prototype.XT=function(n,o,u,p){if(n.K()==1736&&u&&(u=new h.l,n.A(u),u=h.ua.Xd(null,u,!1),(p?h.jd.Zd(n,o,0):h.jd.Zd(n,o,u))!=0)){var f=new h.bm(o,0,0);return p&&f.RJ(!0),f}var g=n.Ha();f=new h.h;for(var b=u=-1,S=17976931348623157e292,$=0;g.ab();)for(;g.Ia();){var E=g.ia();E=E.ic(E.ge(o,!1));var C=h.h.zc(E,o);C<S?($=1,f=E,u=g.xb(),b=g.gb,S=C):C==S&&$++}return f=new h.bm(f,u,Math.sqrt(S)),p&&(g.Wb(u,b),E=g.ia(),p=0>h.h.Wq(o,E.bc(),E.xc()),1<$&&(($=new O).reset(),p=$.YN(o,p,n,u,b)),f.RJ(p)),f},a.prototype.sI=function(n,o){return n=n.D(),o=h.h.ub(n,o),new h.bm(n,0,o)},a.prototype.eI=function(n,o){for(var u=n.vb(0),p=n.I(),f=n=0,g=0,b=17976931348623157e292,S=0;S<p;S++){var $=new h.h;u.uc(2*S,$);var E=h.h.zc($,o);E<b&&(f=$.x,g=$.y,n=S,b=E)}return(o=new h.bm).by(f,g,n,Math.sqrt(b)),o},a.prototype.OU=function(n,o,u,p){return p==0?[]:(u*=u,n=n.D(),(o=h.h.zc(n,o))<=u?(u=[],(p=new h.bm).by(n.x,n.y,0,Math.sqrt(o)),u[0]=p):u=[],u)},a.prototype.oU=function(n,o,u,p){if(p==0)return[];var f=n.vb(0),g=n.I();n=[],u*=u;for(var b=0;b<g;b++){var S=f.read(2*b),$=f.read(2*b+1),E=o.x-S,C=o.y-$;(E=E*E+C*C)<=u&&((C=new h.bm).by(S,$,b,Math.sqrt(E)),n.push(C))}return o=n.length,n.sort(function(k,L){return k.La<L.La?-1:k.La==L.La?0:1}),p>=o||(n.length=p),n.slice(0)},a.instance=null,a}(h.Ge);h.Hx=w}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 4},c.prototype.W=function(a,n,o,u,p){return h.cm.tB(a,n,o,u,p)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Ku=function(a){return h.Xt.ry(a)},c.prototype.yn=function(a,n,o){h.Xt.xD(a,n,o)},c.instance=null,c}(h.Ge);h.uL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 33},c.prototype.W=function(a,n,o,u,p){return a===1073741824?!h.vd.uB(n,o,u,4,p):h.vd.uB(n,o,u,a,p)},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.Ku=function(a){return h.Xt.ry(a)},c.prototype.yn=function(a,n,o){h.Xt.xD(a,n,o)},c.instance=null,c}(h.Ge);h.fj=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){if(this.od=o,this.lT=n,this.za=-1,c==null)throw h.i.O();this.Ak=c,this.Oj=a}return w.prototype.next=function(){var c;if((c=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");return this.$B(c)}return null},w.prototype.Ma=function(){return this.za},w.prototype.$B=function(c){if(c==null)throw h.i.O();return h.Ix.YJ(c,this.Oj,this.lT,this.od)},w.prototype.re=function(){},w}();h.vL=O}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 26},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),this.W(a,n,o,u).next()):new h.vL(a,n,o,u)},c.prototype.ts=function(a,n,o,u,p){return 0<(u!==void 0?h.Ix.ts(a,n,o,u,p):h.Ix.ts(a,n,!1,null,o))},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.$l=O}(B||(B={})),function(h){var O=function(){function p(){this.Aq=0}return p.prototype.iX=function(f){this.Aq&=-2,this.Aq|=f?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.SF=function(){return this.Yp()?0:1},p}();h.tY=O;var w=function(){},c=function(p,f,g,b){this.x=p,this.y=f,this.Ci=g,this.zm=b},a=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,g,b){return f=f.ka(b),g=this.Ce.lf.read(2*g),0>(g-=f=this.Ce.lf.read(2*f))?-1:0<g?1:0},p}(),n=function(){function p(f){this.Ce=f}return p.prototype.compare=function(f,g,b){g=this.Ce.hb[g],f=this.Ce.hb[f.ka(b)];var S=g.Yp(),$=f.Yp();b=g.oe.Me(this.Ce.Oo,0);var E=f.oe.Me(this.Ce.Oo,0);return b==E&&((S=.5*((b=Math.min(S?g.oe.oa:g.oe.ma,$?f.oe.oa:f.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(S=b),b=g.oe.Me(S,0),E=f.oe.Me(S,0)),b<E?-1:b>E?1:0},p}(),o=function(){function p(f,g){this.TI=new h.h,this.parent=f,this.ZR=g}return p.prototype.qr=function(f,g,b){var S=this.parent,$=this.ZR;b.Wd(f,g,function(E,C){return S.Oh(E,C,$)})},p.prototype.bq=function(f){return f=this.parent.ii.get(f),this.parent.lf.uc(2*(f>>1),this.TI),this.TI.y+((1&f)!=0?this.parent.Qj:-this.parent.Qj)},p}(),u=function(){function p(f,g,b,S,$){this.iH=f.description,this.Y=f,this.Sg=g,this.Qj=h.ua.mj(this.Sg,f,!1),this.Do=h.ua.mj(this.Sg,f,!0),this.sA=b,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new h.lp,this.fb=new h.$j,this.le=new h.Nd,this.UG=this.sl=$}return p.prototype.$S=function(){return this.UG=!0,(!h.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?h.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},p.prototype.fC=function(f,g){var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var S=this.lf.read(2*g);g=this.lf.read(2*g+1);var $=!h.$t.Ev(b,f,S,g,this.Qj*this.Qj);return $||this.Y.Eb()!=0&&b==S&&f==g},p.prototype.BE=function(){for(var f=this.Y,g=f.yf?3:2,b=0,S=f.ea();b<S;b++)if(f.Ka(b)<g)return this.le=new h.Nd(1,b,0),!1;return!0},p.prototype.yE=function(f){var g=this.Y,b=g.Ha(),S=g.hasAttribute(1);for(g=S?h.ua.rE(this.Sg,g,!1):0;b.ab();)for(;b.Ia();){var $=b.ia();if(!($.Rb()>this.Qj)){if(f&&S){var E=$.yv(1,0);if($=$.yv(1,0),Math.abs($-E)>g)continue}return this.le=new h.Nd(2,b.xb(),-1),!1}}return!0},p.prototype.hO=function(){var f=this.Y,g=null;h.ba.Ic(this.Y.K())&&(g=this.Y);var b=(this.UG||this.sl)&&g!=null,S=f.I();this.lf=f.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*S),this.hi=new h.ja(0),this.hi.Jb(2*S),b&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(S));for(var $=f=0;$<S;$++)if(this.ii.add(2*$),this.ii.add(2*$+1),this.hi.add(2*$),this.hi.add(2*$+1),b){for(;$>=g.Wc(f);)f++;this.Hl.add(f)}for(new h.Zt().sort(this.hi,0,2*S,new o(this,b)),this.fb.clear(),this.fb.Xo(new a(this)),this.fb.Ee(S),g=0,S*=2;g<S;g++)if(b=this.hi.get(g),b=(f=this.ii.get(b))>>1,(1&f)==0){if(f=this.fb.addElement(b,-1),($=this.fb.xe(f))!=-1&&!this.fC(this.fb.ka($),b))return this.le=new h.Nd(3,b,this.fb.ka($)),!1;var E=this.fb.lb(f);if(E!=-1&&!this.fC(this.fb.ka(E),b))return this.le=new h.Nd(3,b,this.fb.ka(E)),!1}else if(f=this.fb.search(b,-1),$=this.fb.xe(f),E=this.fb.lb(f),this.fb.wd(f,-1),$!=-1&&E!=-1&&!this.fC(this.fb.ka($),this.fb.ka(E)))return this.le=new h.Nd(3,this.fb.ka($),this.fb.ka(E)),!1;return!0},p.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},p.prototype.jO=function(){var f=new h.hd;f.Ib(this.Y);var g=new h.Nd;return!h.bu.fI(!1,f,this.Qj,g,this.od)||(g.Lo=f.Va(g.Lo),g.Mo=f.Va(g.Mo),this.le.Yt(g),!1)},p.prototype.iO=function(){var f=this.Y,g=f.Ha();for(f=f.Ha();g.ab();)for(;g.Ia();){var b=g.ia();if(!g.Sn()||!g.VS()){f.wW(g);do for(;f.Ia();){var S=f.ia();if((S=b.Br(S,this.Qj,!0))!=0)return this.le=new h.Nd(S==2?5:4,g.xb(),f.xb()),!1}while(f.ab())}}return!0},p.prototype.nO=function(){var f=this.Y;this.hb.length=0,this.ro.length=0,this.ag=f.Ha(),this.ag.EB();var g=new h.ja(0);g.Jb(10);var b=NaN,S=0,$=0;for(f=2*f.I();$<f;$++){var E=this.hi.get($);if((1&(E=this.ii.get(E)))==0){E>>=1;var C=this.lf.read(2*E),k=this.lf.read(2*E+1);if(g.size!=0&&(C!=b||k!=S)){if(!this.LI(g))return!1;g!=null&&g.clear(!1)}g.add(E),b=C,S=k}}return!!this.LI(g)},p.prototype.mO=function(){for(var f=this.Y,g=Array(f.ea()),b=0,S=f.ea();b<S;b++)g[b]=f.Pn(b);S=new w;var $=new h.h;b=this.hi.get(0);var E=(b=this.ii.get(b))>>1;this.lf.uc(2*E,$);var C=g[b=this.Hl.get(E)],k=f.Ca(b),L=f.Wc(b)-1;S.gl=E==k||E==L,S.jy=this.sl?!C&&S.gl:S.gl,S.Ci=b,S.x=$.x,S.y=$.y,S.zm=E;for(var N=new w,U=1,H=this.hi.size;U<H;U++)if(b=this.hi.get(U),(1&(b=this.ii.get(b)))==0){E=b>>1,this.lf.uc(2*E,$),(b=this.Hl.get(E))!=S.Ci&&(C=g[b],k=f.Ca(b),L=f.Wc(b)-1);var j=E==k||E==L,K=this.sl?!C&&S.gl:S.gl;if(N.x=$.x,N.y=$.y,N.Ci=b,N.zm=E,N.jy=K,N.gl=j,N.x==S.x&&N.y==S.y){if(this.sl){if(!(N.jy&&S.jy||N.Ci==S.Ci&&(N.gl||S.gl)))return this.le=new h.Nd(8,N.zm,S.zm),!1}else if(!N.gl||!S.gl)return this.le=new h.Nd(5,N.zm,S.zm),!1}b=S,S=N,N=b}return!0},p.prototype.EE=function(){for(var f=this.Y,g=[],b=-1,S=!1,$=0,E=f.ea();$<E;$++)f.Gv($)&&(S=!1,b++,$<E-1&&(f.Gv($+1)||(S=!0))),g[$]=S?b:-1;S=new h.h,$=this.hi.get(0);var C=($=this.ii.get($))>>1;this.lf.uc(2*C,S),$=this.Hl.get(C),b=new c(S.x,S.y,$,C,g[$]),f=[];var k=1;for(E=this.hi.size;k<E;k++)if($=this.hi.get(k),(1&($=this.ii.get($)))==0){if(C=$>>1,this.lf.uc(2*C,S),$=this.Hl.get(C),($=new c(S.x,S.y,$,C,g[$])).x==b.x&&$.y==b.y){if($.Ci==b.Ci)return this.le=new h.Nd(9,$.zm,b.zm),!1;0<=g[$.Ci]&&g[$.Ci]==g[b.Ci]&&(f.length!=0&&f[f.length-1]==b||f.push(b),f.push($))}b=$}if(f.length==0)return!0;for($=new h.lp(!0),h.P.bv(g,-1),S=-1,(k=new h.h).Sc(),b=0,E=f.length;b<E;b++){(C=f[b]).x==k.x&&C.y==k.y||(S=$.Rh(0),k.x=C.x,k.y=C.y);var L=g[C.Ci];L==-1&&(L=$.Rh(2),g[C.Ci]=L),$.addElement(L,S),$.addElement(S,L)}for((E=new h.ja(0)).Jb(10),b=$.ke;b!=-1;b=$.lz(b))if((1&(f=$.KF(b)))==0&&(2&f)!=0){for(f=-1,E.add(b),E.add(-1);0<E.size;){if(S=E.Gc(),E.Jf(),k=E.Gc(),E.Jf(),(1&(C=$.KF(k)))!=0){f=(2&C)==0?S:k;break}for($.aX(k,1|C),C=$.sc(k);C!=-1;C=$.lb(C))(L=$.getData(C))!=S&&(E.add(L),E.add(k))}if(f!=-1){for($=-1,b=0,E=g.length;b<E;b++)if(g[b]==f){$=b;break}return this.le=new h.Nd(10,$,-1),!1}}return!0},p.prototype.oO=function(){var f=this.Y;if(0>=f.He())return this.le=new h.Nd(6,f.ea()==1?1:-1,-1),0;if(f.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=h.ja.rf(f.ea(),0),this.EA=h.ja.rf(f.ea(),-1);for(var g=-1,b=0,S=0,$=f.ea();S<$;S++){var E=f.Kr(S);if(this.vo.write(S,0>E?0:256),0<E)g=S,b=E;else{if(E==0)return this.le=new h.Nd(6,S,-1),0;if((0>g||b<Math.abs(E))&&(this.le=new h.Nd(7,S,-1),this.sl))return 0;this.EA.write(S,g)}}for(this.et=f.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),$=f.I(),this.Oo=NaN,(f=new h.ja(0)).Jb(10),this.Sq=h.ja.rf($,-1),this.Jw=h.ja.rf($,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new n(this)),g=0,$*=2;0<this.et&&g<$;g++)if(b=this.hi.get(g),(1&(b=this.ii.get(b)))==0){if(b>>=1,(S=this.lf.read(2*b+1))!=this.Oo&&f.size!=0){if(!this.vt(f))return 0;f!=null&&f.clear(!1)}f.add(b),this.Oo=S}return 0<this.et&&!this.vt(f)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},p.prototype.LI=function(f){if(f.size==1)return!0;for(var g=0,b=f.size;g<b;g++){var S=f.get(g);this.ag.Wb(S);var $=this.ag.ni();this.hb.push(this.Uu($,S,this.ag.gb,!0)),this.ag.ia(),$=this.ag.ia(),this.hb.push(this.Uu($,S,this.ag.gb,!1))}var E=this;for(this.hb.sort(function(L,N){return E.SP(L,N)}),(S=this.oh.ke)==-1&&(S=this.oh.Rh(0)),this.oh.hn(this.hb.length),g=0,b=this.hb.length;g<b;g++)this.oh.addElement(S,g);g=!0;for(var C=b=-1;g&&(g=!1,($=this.oh.sc(S))!=-1);)for(var k=this.oh.lb($);k!=-1;)if(b=this.oh.getData($),C=this.oh.getData(k),(b=this.hb[b].Ko)!=(C=this.hb[C].Ko))$=k,k=this.oh.lb($);else if(g=!0,this.oh.kd(S,$),$=this.oh.xe(k),(k=this.oh.kd(S,k))==-1||$==-1)break;if(g=this.oh.ds(S),this.oh.GE(S),0<g)return this.le=new h.Nd(5,b,C),!1;for(g=0,b=f.size;g<b;g++)this.qB(this.hb[g]);return this.hb.length=0,!0},p.prototype.vt=function(f){for(var g=0,b=f.size;g<b;g++){var S=f.get(g),$=this.Sq.read(S);if($!=-1){var E=this.fb.ka($);this.Bj.add(E),this.fb.wd($,-1),this.qB(this.hb[E]),this.hb[E]=null,this.Sq.write(S,-1)}($=this.Jw.read(S))!=-1&&(E=this.fb.ka($),this.Bj.add(E),this.fb.wd($,-1),this.qB(this.hb[E]),this.hb[E]=null,this.Jw.write(S,-1))}for(g=0,b=f.size;g<b;g++){if(S=f.get(g),this.ag.Wb(S),($=this.ag.ni()).oa>$.ma){var C=this.ag.xb(),k=this.Uu($,S,this.ag.gb,!0);0<this.Bj.size?(E=this.Bj.Gc(),this.Bj.Jf(),this.hb[E]=k):(E=this.hb.length,this.hb.push(k)),$=this.fb.addElement(E,-1),this.Sq.read(C)==-1?this.Sq.write(C,$):this.Jw.write(C,$),(3&this.vo.read(this.ag.gb))==0&&this.Qm.add($)}this.ag.ia(),($=this.ag.ia()).oa<$.ma&&(C=this.ag.kk(),k=this.Uu($,S,this.ag.gb,!1),0<this.Bj.size?(E=this.Bj.Gc(),this.Bj.Jf(),this.hb[E]=k):(E=this.hb.length,this.hb.push(k)),$=this.fb.addElement(E,-1),this.Sq.read(C)==-1?this.Sq.write(C,$):this.Jw.write(C,$),(3&this.vo.read(this.ag.gb))==0&&this.Qm.add($))}for(g=0,b=this.Qm.size;g<b&&0<this.et;g++)if($=this.Qm.get(g),(3&this.vo.read(this.hb[this.fb.ka($)].DA))==0){f=-1,S=this.fb.xe($);var L=$;k=null,E=-1;for(var N=0;S!=-1&&(E=this.fb.ka(S),E=(k=this.hb[E]).DA,(3&(N=this.vo.read(E)))==0);)L=S,S=this.fb.xe(S);S==-1?(C=1,S=L):(f=(3&N)==1?E:this.EA.read(E),C=k.SF()!=0?0:1,S=this.fb.lb(S));do{if(E=this.fb.ka(S),E=(k=this.hb[E]).DA,(3&(L=this.vo.read(E)))==0){if(C!=k.SF())return this.le=new h.Nd(6,E,-1),!1;if(L=252&L|(N=C==0||k.Yp()?2:1),this.vo.write(E,N),N==2&&this.le.Lj==0&&this.EA.read(E)!=f&&(this.le=new h.Nd(7,E,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&L)==1&&(f=E),L=S,S=this.fb.lb(S),C=C!=0?0:1}while(L!=$)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},p.prototype.Uu=function(f,g,b,S){if(f.K()!=322)throw h.i.Ra();return(f=this.nP(f)).Ko=g,f.DA=b,f.Aq=0,f.iX(S),f},p.prototype.nP=function(f){if(0<this.ro.length){var g=this.ro[this.ro.length-1];--this.ro.length,f.copyTo(g.oe)}else(g=new O).oe=h.NC.kg(f);return g},p.prototype.qB=function(f){f.oe.K()==322&&this.ro.push(f)},p.prototype.fU=function(){for(var f=this.Y.I(),g=new h.ja(0),b=0;b<f;b++)g.add(b);var S=this;for(g.Wd(0,f,function($,E){return S.Qu($,E)}),b=1;b<f;b++)if(this.Qu(g.get(b-1),g.get(b))==0)return this.le=new h.Nd(3,g.get(b-1),g.get(b)),0;return 2},p.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},p.prototype.jV=function(){return this.$S()},p.prototype.kU=function(){for(var f=this.Y.I(),g=new h.ja(0),b=0;b<f;b++)g.add(b);var S=this;g.Wd(0,f,function(L,N){return S.KO(L,N)});var $=Array(f);for(h.P.bv($,!1),$[g.get(0)]=!0,b=1;b<f;b++){var E=g.get(b-1),C=g.get(b);this.Qu(E,C)==0?$[C]=!1:$[C]=!0}g=this.Y.Ja(),E=this.Y,C=0;var k=1;for(b=0;b<f;b++)$[b]?k=b+1:(C<k&&g.Gd(E,C,k),C=b+1);return C<k&&g.Gd(E,C,k),g.Eh(2,this.Do),g},p.prototype.IV=function(){var f=this.Y,g=f.Ha(),b=f.Ha(),S=this.Y.Ja(),$=this.Y,E=f.hasAttribute(1),C=E?h.ua.rE(this.Sg,f,!0):0,k=new h.ja(0),L=new h.ja(0);for(k.Jb(h.P.truncate(f.I()/2+1)),L.Jb(h.P.truncate(f.I()/2+1));g.ab();)if(b.ab(),!(2>f.Ka(g.gb))){b.yW();for(var N,U,H=!0;g.Ia();){var j=g.ia(),K=b.ni();if(g.xb()>b.xb())break;H&&(k.add(g.xb()),L.add(b.kk()),H=!1),U=k.Gc();var se=g.kk();if(1<se-U){var ne=new h.h;ne.vc(f.Oa(U),f.Oa(se)),N=ne.length()}else N=j.Rb();U=L.Gc(),1<(se=b.xb())-U?((ne=new h.h).vc(f.Oa(U),f.Oa(se)),U=ne.length()):U=K.Rb(),N>this.Do?k.add(g.kk()):E&&(N=f.Vc(1,k.Gc(),0),j=j.jv(1,0),Math.abs(j-N)>C&&k.add(g.kk())),U>this.Do?L.add(b.xb()):E&&(N=f.Vc(1,L.Gc(),0),j=K.jv(1,0),Math.abs(j-N)>C&&L.add(b.xb()))}if(k.Gc()<L.Gc()?k.size>L.size?k.Jf():L.Jf():(k.Gc()!=L.Gc()&&L.Jf(),L.Jf()),2<=L.size+k.size){for(H=new h.Ta,K=0,j=k.size;K<j;K++)$.we(k.get(K),H),K==0?S.nf(H):S.lineTo(H);for(K=L.size-1;0<K;K--)$.we(L.get(K),H),S.lineTo(H);$.ec(g.gb)?S.Cp():0<L.size&&($.we(L.get(0),H),S.lineTo(H))}k!=null&&k.clear(!1),L!=null&&L.clear(!1)}return S.Eh(2,this.Do),S},p.prototype.mV=function(){return this.zX()},p.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?h.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&h.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},p.ts=function(f,g,b,S,$){if(S!=null&&(S.Lj=0,S.Lo=-1,S.Mo=-1),f.B())return 1;var E=f.K();if(E==33)return 1;var C=h.ua.mj(g,f,!1);if(E==197)return g=new h.l,f.A(g),g.Di(C)?(S!=null&&(S.Lj=2,S.Lo=-1,S.Mo=-1),0):1;if(h.ba.zd(E))return(C=new h.Ua(f.description)).pc(f,!0),p.ts(C,g,b,S,$);var k=f.qm(C);if((b=b?-1:k)!=-1)return b;if(g=new p(f,g,b,$,!1),E==550)b=g.fU();else if(E==1607)b=g.EV();else{if(E!=1736)throw h.i.Ra();b=g.jV()}return f.Eh(b,C),S!=null&&b==0&&S.Yt(g.le),b},p.YJ=function(f,g,b,S){if(f.B())return f;var $=f.K();if($==33)return f;var E=h.ua.mj(g,f,!1);if($==197)return g=new h.l,f.A(g),g.Di(E)?f.Ja():f;if(h.ba.zd($))return($=new h.Ua(f.description)).pc(f,!0),p.YJ($,g,b,S);if(E=f.qm(E),(b=b?-1:E)==2)return f;if(f=new p(f,g,b,S,!1),$==550)f=f.kU();else if($==1607)f=f.IV();else{if($!=1736)throw h.i.Ra();f=f.mV()}return f},p.prototype.Oh=function(f,g,b){if(f==g)return 0;f=this.ii.get(f);var S=this.ii.get(g);g=f>>1;var $=S>>1,E=new h.h,C=new h.h;return this.lf.uc(2*g,E),E.y+=(1&f)!=0?this.Qj:-this.Qj,this.lf.uc(2*$,C),C.y+=(1&S)!=0?this.Qj:-this.Qj,(f=E.compare(C))==0&&b?0>(b=this.Hl.get(g)-this.Hl.get($))?-1:0<b?1:0:f},p.prototype.Qu=function(f,g){if(f==g)return 0;var b=this.Y,S=b.Oa(f),$=b.Oa(g);if(S.x<$.x)return-1;if(S.x>$.x)return 1;if(S.y<$.y)return-1;if(S.y>$.y)return 1;for(S=1;S<this.jT;S++){$=this.iH.ld(S);for(var E=h.sa.Wa($),C=0;C<E;C++){var k=b.Vc($,f,C),L=b.Vc($,g,C);if(k<L)return-1;if(k>L)return 1}}return 0},p.prototype.KO=function(f,g){var b=this.Qu(f,g);return b==0?f<g?-1:1:b},p.prototype.SP=function(f,g){if(f===g)return 0;var b=f.oe.lg();f.Yp()&&b.Uq(),f=g.oe.lg(),g.Yp()&&f.Uq(),g=b.su();var S=f.su();return S==g?(g=b.yi(f),Math.abs(g)<=8881784197001252e-31*(Math.abs(f.x*b.y)+Math.abs(f.y*b.x))&&(g--,g++),0>g?1:0<g?-1:0):g<S?-1:1},p}();h.Ix=u}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 30},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.prototype.W=function(a,n,o,u){return a instanceof h.ba?(a=new h.$c(a),n=new h.$c(n),this.W(a,n,o,u).next()):new h.wL(a,n,o,u)},c.gp=function(a,n,o,u){var p=a.Eb(),f=n.Eb();if(a.B()&&n.B())return p>f?a:n;if(a.B())return n;if(n.B())return a;var g=new h.l,b=new h.l,S=new h.l;return a.A(g),n.A(b),S.L(g),S.$b(b),g=h.ua.Xd(o,S,!0),b=a.K(),S=n.K(),b==33&&S==33?c.WU(a,n,g):b!=S?0<p||0<f?p>f?a:n:b==550?c.dI(a,n,g):c.dI(n,a,g):h.Hg.gp(a,n,o,u)},c.WU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var u=a.D(),p=n.D(),f=new h.ee(a.description);return h.h.zc(u,p)>o&&(f.add(a),f.add(n)),f},c.dI=function(a,n,o){var u=a.vb(0),p=a.I(),f=n.D(),g=a.Ja();o=o*Math.sqrt(2)*1.00001;var b=new h.l;if(a.A(b),b.X(o,o),b.contains(f)){o*=o,b=!1;for(var S=[],$=0;$<p;$++)S[$]=!1;for($=0;$<p;$++){var E=u.read(2*$),C=u.read(2*$+1);(E-=f.x)*E+(C-=f.y)*C<=o&&(b=!0,S[$]=!0)}if(b)for($=0;$<p;$++)S[$]||g.Gd(a,$,$+1);else g.Gd(a,0,p),g.add(n)}else g.Gd(a,0,p),g.add(n);return g},c.instance=null,c}(h.Ge);h.Jx=O}(B||(B={})),function(h){var O=function(){function w(c,a,n,o){this.vs=a==null,this.za=-1,this.Sd=c,this.wg=n,this.IT=a.next(),this.Vb=o}return w.prototype.next=function(){return this.vs?null:(c=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.gp(c,this.IT,this.wg,this.Vb)):null;var c},w.prototype.Ma=function(){return this.za},w.prototype.re=function(){},w}();h.wL=O}(B||(B={})),function(h){var O=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},a}(),w=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.kN=function(n){this.Ir+=n.zx,this.rj.push(n)},a.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(n){return n===this},a}(),c=function(){function a(n,o,u){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=n,this.wg=o,this.Vb=u}return a.ZD=function(n){var o=[],u=0;for(n=Object.keys(n);u<n.length;u++)o.push(Number(n[u]));return o.sort(function(p,f){return p-f}),o},a.prototype.aG=function(n){var o=this.Fo[n],u=a.ZD(o)[0],p=o[u],f=p.iy().Vy;return p=p.iy().vK,delete o[u],p&&(f=h.$l.local().W(f,this.wg,!1,this.Vb),n==0&&f.K()==33&&(n=new h.ee(f.description),f.B()||n.add(f),f=n)),f},a.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw h.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},a.prototype.Ma=function(){return this.za},a.prototype.lK=function(){if(this.Jc)return!0;var n=null;if(this.Sd!=null&&(n=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.op.Bp(this.Vb),n!=null){var o=n.Eb();this.vH[o]=!0,o>=this.Bk&&!this.eA&&(this.HD(o,!1,n),o>this.Bk&&!this.eA&&this.uW(o))}if(0<this.kq)for(o=0;o<=this.Bk;o++)for(;1<this.wq[o]&&(n=this.AO(o)).length!=0;)n=h.Hg.QP(n,this.wg,this.Vb),this.HD(o,!0,n);return this.Jc},a.prototype.AO=function(n){for(var o=[],u=[],p=this.Fo[n],f=a.ZD(p),g=0;g<f.length;g++){var b=f[g],S=p[b];if(this.Jc||1e4<S.Ir&&1<S.rj.length){for(this.wq[n]-=S.rj.length,this.kq-=S.rj.length;0<S.rj.length;)o.push(S.iy().Vy),S.OV();u.push(b)}}for(g=0;g<u.length;g++)delete p[u[g]];return o},a.prototype.uW=function(n){for(var o=0;o<n;o++)this.Fo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.HD=function(n,o,u){var p=new O;if(p.Az(),p.Vy=u,u=a.$R(u),p.zx=u,u=a.YR(u),n+1>this.Fo.length)for(var f=0,g=Math.max(2,n+1);f<g;f++)this.Fo.push([]);(f=this.Fo[n][u])===void 0&&(f=new w,this.Fo[n][u]=f),p.vK=o,f.kN(p),this.wq[n]++,this.kq++,this.Bk=Math.max(this.Bk,n)},a.YR=function(n){return 0<n?h.P.truncate(Math.log(n)/Math.log(4)+.5):0},a.$R=function(n){var o=n.K();if(h.ba.zj(o))return n.I();if(o==33)return 1;if(o==197)return 4;if(h.ba.zd(o))return 2;throw h.i.Ra()},a.prototype.re=function(){this.lK()},a}();h.yL=c}(B||(B={})),function(h){var O=function(w){function c(){return w!==null&&w.apply(this,arguments)||this}return Re(c,w),c.prototype.K=function(){return 1},c.prototype.W=function(a,n,o,u){return u===void 0?new h.yL(a,n,o):this.bQ(a,n,o,u)},c.prototype.bQ=function(a,n,o,u){return a=new h.$c([a,n]),this.W(a,o,u).next()},c.local=function(){return c.instance===null&&(c.instance=new c),c.instance},c.instance=null,c}(h.Ge);h.Ih=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",O=function(){function c(a,n,o,u){this.Vs=new h.l,this.BT=a,this.CT=n,this.oq=u,this.wo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,u?this.wo=n.ea():this.td=n.Ha()),this.tl||(p=n.Cb)!=null&&(p=u?p.Bo:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,u?this.wo=a.ea():this.td=a.Ha()),this.tl||(this.ei=u?h.ua.hR(a,n,o,1<=a.qm(0),1<=n.qm(0)):h.ua.gR(a,n,o))}return c.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.sU();break;case 1:a=this.tU();break;case 2:a=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},c.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},c.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},c.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},c.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},c.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},c.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Wo(a,this.ra),this.Yb=2,!0},c.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},c}(),h.am=O}(B||(B={})),function(h){(h=h.JL||(h.JL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(B||(B={})),function(h){h.LC=function(){function O(){}return O.ub=function(w,c,a,n,o,u,p,f,g){var b=[0,0,0],S=[0,0,0],$=[0,0,0],E=[0,0,0,0],C=new h.ha(0),k=new h.ha(0),L=new h.ha(0);if(p!=null||f!=null||g!=null)if(h.s.vi(c))h.$g.ub(w,a,n,o,u,p,f,g);else{o=h.F.ca(o),a=h.F.ca(a);var N=h.F.ca(o-a);if(h.s.$(n,u)&&(h.s.$(a,o)||h.s.$(h.s.R(n),1.570796326794897)))p!=null&&(p.u=0),f!=null&&(f.u=0),g!=null&&(g.u=0);else{if(h.s.$(n,-u)){if(h.s.$(h.s.R(n),1.570796326794897))return p!=null&&(p.u=2*h.F.Ch(w,c)),f!=null&&(f.u=0<n?h.F.ca(3.141592653589793-h.F.ca(o)):h.F.ca(o)),void(g!=null&&(g.u=0<n?h.F.ca(o):h.F.ca(3.141592653589793-h.F.ca(o))));h.s.$(h.s.R(N),3.141592653589793)&&(p!=null&&(p.u=2*h.F.Ch(w,c)),f!=null&&(f.u=0),g!=null&&(g.u=0))}else if(h.s.$(h.s.R(n),1.570796326794897)||h.s.$(h.s.R(u),1.570796326794897)||h.s.$(a,o)||h.s.$(h.s.R(N),3.141592653589793)||h.s.Dd(n))return void h.Yk.ub(w,c,a,n,o,u,p,f,g);var U=Math.sqrt(1-c);o=h.F.ca(o-a),a=0,h.F.el(1,c,n,a,0,C,k,L),b[0]=C.u,b[1]=k.u,b[2]=L.u,h.F.el(1,c,u,o,0,C,k,L),S[0]=C.u,S[1]=k.u,S[2]=L.u,$[0]=0,$[1]=0,$[2]=-1*c*h.F.n(1,c,n)*Math.sin(n),0>o?h.F.Yq($,S,b,E,0):h.F.Yq($,b,S,E,0),k=[0,0,0],L=[0,0,0];var H=[0,0,0];b=[0,0,0],C=[0,0,0];var j=Math.acos(E[2]/1),K=1-c,se=Math.tan(j),ne=1+se*se/K,pe=2*$[2]*se/K;for(K=(-pe+(se=Math.sqrt(pe*pe-4*ne*($[2]*$[2]/K-1))))/(ne*=2),pe=(-pe-se)/ne,se=Math.tan(j),j=(K+pe)/2,$=((ne=se*K+$[2])+(se*pe+$[2]))/2,se=h.F.ip(K-j,ne-$),K=$/U*1.570796326794897,pe=0;100>pe&&(ne=(ne=h.F.w(c,K))*ne/Math.cos(K)*(Math.sin(K)-$*ne/(1-c)),!h.s.Dd(ne));pe++)K-=ne;$=h.F.n(1,c,K)*Math.cos(K),se=1-se/($=Math.sqrt(($-j)*($+j))),se*=2-se,ne=h.F.qn(k),j=h.F.qn(L),K=h.F.qn(H);var ce=h.F.Ut(H,k);pe=h.F.Ut(H,L),h.F.yx(H,k,b),h.F.yx(H,L,C),k=Math.acos(ce/(K*ne)),L=Math.acos(pe/(K*j)),L*=h.s.Mb(1,h.F.Ut(b,C)),(1.570796326794897<=h.s.R(k)&&1.570796326794897<=h.s.R(L)||3.141592653589793<h.s.R(k-L))&&(k=(3.141592653589793-h.s.R(k))*h.s.Mb(1,k),L=(3.141592653589793-h.s.R(L))*h.s.Mb(1,L)),b=h.F.Sj(se,L),C=h.F.q($,se,h.F.Sj(se,k)),b=h.F.q($,se,b),b=h.s.R(b-C)*w,k=new h.ha(0),L=new h.ha(0),H=E[1]/1,H*=-h.s.Mb(1,N),C=Math.acos(H)*h.s.Mb(1,N),O.sf(w,c,a,n,b,C,k,L),h.s.$(o,k.u)&&h.s.$(u,L.u)||(se=h.F.ip(h.F.ca(o-k.u),u-L.u),O.sf(w,c,a,n,b,h.F.ca(C+3.141592653589793),k,L),(ne=h.F.ip(h.F.ca(o-k.u),u-L.u))<se&&(C=h.F.ca(C+3.141592653589793))),k=[0,0,0,0],L=[0,0,0,0],se=[0,0,0],w=[0,0,0],a=[0,0,0],n=[0,0,0],H=[0,0,0],($=[0,0,0])[0]=0,$[1]=0,$[2]=U,se[0]=0,se[1]=0,se[2]=0,h.F.Yq(se,$,S,k,0),h.s.Dd(u)?(w[0]=S[0],w[1]=S[1],w[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(c=h.F.n(1,c,u)*Math.cos(u),w[0]=0,w[1]=0,S[2]+=Math.tan(1.570796326794897-h.s.R(u))*c*h.s.Mb(1,u),a[0]=c*Math.cos(o)-c*Math.sin(o),a[1]=c*Math.sin(o)+c*Math.cos(o)),a[2]=S[2],h.F.Yq(S,a,w,L,1),h.F.yx(L,k,n),h.F.yx(L,E,H),H=h.F.Ut(n,H)/(h.F.qn(n)*h.F.qn(H)),H*=h.s.Mb(1,N),o=Math.acos(H)*-h.s.Mb(1,N),(0<C&&0<o||0>C&&0>o)&&(o=h.F.ca(o+3.141592653589793)),p!=null&&(p.u=b),f!=null&&(f.u=C),g!=null&&(g.u=o)}}},O.sf=function(w,c,a,n,o,u,p,f){var g=[0,0,0],b=[0,0,0],S=[0,0,0],$=[0,0,0],E=[0,0,0],C=[0,0,0],k=[0,0,0],L=[0,0,0,0],N=new h.ha(0),U=new h.ha(0),H=new h.ha(0),j=new h.ha(0),K=new h.ha(0),se=new h.ha(0);if(p!=null&&f!=null)if(h.s.vi(c))h.$g.sf(w,a,n,o,u,p,f);else if(h.s.Dd(o))p!=null&&(p.u=a),f!=null&&(f.u=n);else if(u=h.F.ca(u),0>o&&(o=h.s.R(o),u=h.F.ca(u+3.141592653589793)),a=h.F.ca(a),n=h.F.ca(n),1.570796326794897<h.s.R(n)&&(a=h.F.ca(a+3.141592653589793),n=h.s.Mb(3.141592653589793,n)-n),h.s.$(h.s.R(n),1.570796326794897)||h.s.Dd(n)||h.s.Dd(u)||h.s.$(h.s.R(u),3.141592653589793))h.Yk.sf(w,c,a,n,o,u,p,f);else{var ne=Math.sqrt(1-c);for(w=o/w,h.F.el(1,c,n,0,0,j,K,se),g[0]=j.u,g[1]=K.u,g[2]=K.u,k[0]=0,k[1]=0,k[2]=-1*c*h.F.n(1,c,n)*Math.sin(n),j=h.F.n(1,c,n),K=h.F.ca(1.570796326794897-u),se=Math.sin(K),o=Math.cos(n),n=Math.sin(n),E[0]=j*o-n*se,E[1]=Math.cos(K),E[2]=(1-c)*j*n+o*se,0>u?h.F.Yq(k,E,g,L,0):h.F.Yq(k,g,E,L,0),g=Math.acos(L[2]/1),L=Math.atan2(-L[1],-L[0]),n=1-c,K=1+(E=Math.tan(g))*E/n,n=(-(j=2*k[2]*E/n)+(E=Math.sqrt(j*j-4*K*(k[2]*k[2]/n-1))))/(K*=2),j=(-j-E)/K,E=Math.tan(g),g=(n+j)/2,k=((K=E*n+k[2])+(E*j+k[2]))/2,E=h.F.ip(n-g,K-k),ne=k/ne*1.570796326794897,n=0;100>n&&(j=(j=h.F.w(c,ne))*j/Math.cos(ne)*(Math.sin(ne)-k*j/(1-c)),!h.s.Dd(j));n++)ne-=j;ne=h.F.n(1,c,ne)*Math.cos(ne),k=1-E/(ne=Math.sqrt((ne-g)*(ne+g))),k*=2-k,C=Math.acos(h.F.Ut(C,b)/(h.F.qn(C)*h.F.qn(b))),C*=h.s.Mb(1,b[0]),u=(h.F.q(ne,k,h.F.Sj(k,C))+w*h.s.Mb(1,u))/h.F.Ch(ne,k),u=h.F.ca(1.570796326794897*u),u=h.F.Tq(k,u),h.F.n(ne,k,u),E=h.F.ca(L+a),a=Math.cos(E),u=Math.sin(E),S[0]=$[0]*a+$[1]*-u,S[1]=$[0]*u+$[1]*a,S[2]=$[2],h.F.eO(c,S[0],S[1],S[2],H,U,N),p!=null&&(p.u=U.u),f!=null&&(f.u=H.u)}},O}()}(B||(B={})),function(h){var O=function(){function o(u){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=u}return o.prototype.compare=function(u,p,f){return this.g.Hc(p,this.xt),this.g.Hc(u.ka(f),this.yt),this.xt.compare(this.yt)},o}(),w=function(){function o(u){this.Cf=new h.h,this.Fk=new h.h,this.g=u}return o.prototype.Fh=function(u){this.Cf.N(u)},o.prototype.compare=function(u,p){return this.g.Hc(u.ka(p),this.Fk),this.Cf.compare(this.Fk)},o}(),c=function(o){function u(p){var f=o.call(this,p.g,p.ra,!1)||this;return f.ib=p,f}return Re(u,o),u.prototype.compare=function(p,f,g){if(this.sg)return-1;var b=this.ib.Rd.Ln(this.ib.Th(f));p=p.ka(g);var S=this.ib.Rd.Ln(this.ib.Th(p));return this.Fm=g,this.ME(f,b,p,S)},u}(h.PC),a=function(o){function u(p){var f=o.call(this,p.g,p.ra)||this;return f.ib=p,f}return Re(u,o),u.prototype.compare=function(p,f){return this.sg?-1:(p=this.ib.Rd.Ln(this.ib.Th(p.ka(f))),this.Fm=f,this.NE(f,p))},u}(h.WL),n=function(){function o(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new h.$j,this.Nc=new h.$j,this.ph=new h.ja(0),this.Ik=new h.OC,this.Gf=new h.ja(0),this.Ck=new h.ja(0),this.lo=new h.Ta}return o.prototype.LX=function(u,p){var f=new h.Ed;return f.VB(),u.Pc(f),this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,p=this.eC(),u.Pc(f),p||(this.lQ(),p||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},o.prototype.PX=function(u,p){this.gr(u),this.Yn=!1,this.ra=p,this.PA=p*p,this.Pg=!1,this.eC(),this.Pg||(this.Pg=u.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.qg=function(u,p){return this.hb.U(u,0+p)},o.prototype.GB=function(u,p,f){this.hb.T(u,0+p,f)},o.prototype.Th=function(u){return this.hb.U(u,2)},o.prototype.UW=function(u,p){this.hb.T(u,2,p)},o.prototype.MF=function(u,p){return this.hb.U(u,3+p)},o.prototype.Rp=function(u){return this.hb.U(u,7)},o.prototype.Rl=function(u,p){this.hb.T(u,7,p)},o.prototype.Tp=function(u,p){return this.hb.U(u,3+this.Qp(u,p))},o.prototype.hr=function(u,p,f){this.hb.T(u,3+this.Qp(u,p),f)},o.prototype.IR=function(u,p){return this.hb.U(u,5+this.Qp(u,p))},o.prototype.jr=function(u,p,f){this.hb.T(u,5+this.Qp(u,p),f)},o.prototype.Ur=function(u){return this.Ad.U(u,0)},o.prototype.PW=function(u,p){this.Ad.T(u,0,p)},o.prototype.$y=function(u){return this.Ad.U(u,4)},o.prototype.er=function(u,p){this.Ad.T(u,4,p)},o.prototype.kl=function(u){return this.Ad.U(u,1)},o.prototype.nn=function(u,p){this.Ad.T(u,1,p)},o.prototype.Zy=function(u){return this.Ad.U(u,3)},o.prototype.Ft=function(u,p){this.Ad.T(u,3,p)},o.prototype.$m=function(u){var p=this.Ad.De(),f=this.nh.Rh();return this.PW(p,f),u!=-1?(this.nh.addElement(f,u),this.g.Sa(u,this.zh,p),this.er(p,this.g.Va(u))):this.er(p,-1),p},o.prototype.CP=function(u){this.Ad.kd(u)},o.prototype.FD=function(u,p){this.nh.addElement(this.Ur(u),p),this.g.Sa(p,this.zh,u)},o.prototype.ot=function(u){var p=this.hb.De(),f=this.Rd.Rh();return this.UW(p,f),u!=-1&&this.Rd.addElement(f,u),p},o.prototype.GD=function(u,p){this.Rd.addElement(this.Th(u),p)},o.prototype.Wu=function(u){this.hb.kd(u),0<=(u=this.ph.gF(u))&&this.ph.NV(u)},o.prototype.jj=function(u,p){if(this.qg(u,0)==-1)this.GB(u,0,p);else{if(this.qg(u,1)!=-1)throw h.i.Ra();this.GB(u,1,p)}this.gy(u,p)},o.prototype.gy=function(u,p){var f=this.kl(p);if(f!=-1){var g=this.Tp(f,p);this.jr(g,p,u),this.hr(u,p,g),this.hr(f,p,u),this.jr(u,p,f)}else this.jr(u,p,u),this.hr(u,p,u),this.nn(p,u)},o.prototype.Qp=function(u,p){return this.qg(u,0)==p?0:1},o.prototype.Zm=function(u,p){var f,g=this.Zy(p);if(g!=-1&&(this.df.wd(g,-1),this.Ft(p,-1)),(g=this.kl(p))!=-1){var b=f=g;do{var S=!1,$=this.Qp(f,p),E=this.MF(f,$);if(this.qg(f,$+1&1)==u){if(this.Zu(f),this.Rd.eh(this.Th(f)),this.Wu(f),f==E){g=-1;break}g==f&&(g=this.kl(p),b=E,S=!0)}f=E}while(f!=b||S);if(g!=-1){do $=this.Qp(f,p),E=this.MF(f,$),this.GB(f,$,u),f=E;while(f!=b);(f=this.kl(u))!=-1?(b=this.Tp(f,u),S=this.Tp(g,u),b==f?(this.nn(u,g),this.gy(f,u),this.nn(u,f)):S==g&&this.gy(g,u),this.hr(g,u,b),this.jr(b,u,g),this.hr(f,u,S),this.jr(S,u,f)):this.nn(u,g)}}for(g=this.Ur(u),f=this.Ur(p),b=this.nh.sc(f);b!=-1;b=this.nh.lb(b))this.g.Sa(this.nh.ka(b),this.zh,u);this.nh.Cy(g,f),this.CP(p)},o.prototype.PT=function(u,p){var f=this.qg(u,0),g=this.qg(u,1),b=this.qg(p,0),S=this.qg(p,1);this.Rd.Cy(this.Th(u),this.Th(p)),p==this.kl(f)&&this.nn(f,u),p==this.kl(g)&&this.nn(g,u),this.Zu(p),this.Wu(p),f==b&&g==S||g==b&&f==S||(this.Jn(f,this.Ao),this.Jn(b,this.Ri),this.Ao.rb(this.Ri)?(f!=b&&this.Zm(f,b),g!=S&&this.Zm(g,S)):(g!=b&&this.Zm(g,b),f!=S&&this.Zm(f,S)))},o.prototype.Zu=function(u){var p=this.qg(u,1);this.ZE(u,this.qg(u,0)),this.ZE(u,p)},o.prototype.ZE=function(u,p){var f=this.Tp(u,p),g=this.IR(u,p),b=this.kl(p);f!=u?(this.hr(g,p,f),this.jr(f,p,g),b==u&&this.nn(p,f)):this.nn(p,-1)},o.prototype.RD=function(u,p,f){var g=this.Rd.sc(u),b=this.Rd.ka(g);u=this.Ie(b);var S=this.Ie(this.g.V(b));for(this.g.lr(b,p,f,!0),g=this.Rd.lb(g);g!=-1;g=this.Rd.lb(g)){b=this.Rd.ka(g);var $=this.Ie(b)==u;this.g.lr(b,p,f,$)}g=p.Xp(f,0).bc(),p=p.Xp(f,p.ql(f)-1).xc(),this.wK(u,g),this.wK(S,p)},o.prototype.UE=function(u,p,f){var g=this.Th(u),b=this.qg(u,0),S=this.qg(u,1),$=this.ot(-1);for(this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,b),u=1,p=p.ql(f);u<p;u++)f=this.$m(-1),this.Ck.add(f),this.Gf.add(f),this.jj($,f),$=this.ot(-1),this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,f);for(this.jj($,S),g=this.Rd.sc(g);g!=-1;g=this.Rd.lb(g))if(S=this.Rd.ka(g),this.Ie(S)==b){u=0;do 0<u&&($=this.Gf.get(u-1),this.FD($,S),this.$y($)==-1&&this.er($,this.g.Va(S))),$=this.Gf.get(u),u+=2,this.GD($,S),S=this.g.V(S);while(u<this.Gf.size)}else{u=this.Gf.size-1;do u<this.Gf.size-2&&($=this.Gf.get(u+1),this.FD($,S),0>this.$y($)&&this.er($,this.g.Va(S))),$=this.Gf.get(u),u-=2,this.GD($,S),S=this.g.V(S);while(0<=u)}this.Gf.clear(!1)},o.prototype.Ie=function(u){return this.g.Qa(u,this.zh)},o.prototype.NI=function(u,p,f){var g=this.qg(p,0),b=new h.h;this.Jn(g,b);var S=new h.h,$=this.qg(p,1);this.Jn($,S);var E=f.ql(u),C=f.Xp(u,0),k=new h.h;if(C.$p(k),!b.rb(k)){if(!this.Pg){var L=b.compare(this.xh);0>L*(k=k.compare(this.xh))&&(this.Pg=!0)}this.qF(g,this.Gf),this.Ck.add(g)}for(!this.Pg&&1<E&&(L=b.compare(S),C=C.xc(),(b.compare(C)!=L||C.compare(S)!=L||0>C.compare(this.xh))&&(this.Pg=!0)),u=(C=f.Xp(u,E-1)).xc(),S.rb(u)||(this.Pg||0>(L=S.compare(this.xh))*(k=u.compare(this.xh))&&(this.Pg=!0),this.qF($,this.Gf),this.Ck.add($)),this.Gf.add(p),S=0,$=this.Gf.size;S<$;S++)u=this.Gf.get(S),f=this.Rp(u),h.ad.GG(f)&&(this.Nc.wd(f,-1),this.Rl(u,-1)),u!=p&&this.Rp(u)!=-3&&(this.ph.add(u),this.Rl(u,-3));this.Gf.clear(!1)},o.prototype.gO=function(u,p){this.ae.compare(this.Nc,this.Nc.ka(u),p),this.ae.sg&&(this.ae.Mr(),this.jF(u,p))},o.prototype.jF=function(u,p){this.Yn=!0,u=this.Nc.ka(u),p=this.Nc.ka(p);var f=this.Rd.Ln(this.Th(u)),g=this.Rd.Ln(this.Th(p)),b=this.g.cc(f);b==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(f,this.je),b=this.je),(f=this.g.cc(g))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(g,this.Pm),f=this.Pm),this.Ik.Qo(b),this.Ik.Qo(f),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(u,p,-1,this.Ik),this.Ik.clear()},o.prototype.BQ=function(u,p){this.Yn=!0,p=this.Nc.ka(p);var f=this.Rd.Ln(this.Th(p)),g=this.g.cc(f);g==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(f,this.je),g=this.je),f=this.wF(u),this.Ik.Qo(g),this.g.Xi(f,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(p,-1,u,this.Ik),this.Ik.clear()},o.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var u=this.ph.Gc();this.ph.Jf(),this.Rl(u,-1),this.RS(u)!=-1&&this.rS(u),this.Xn=!1}},o.prototype.rS=function(u){if(this.Xn){var p=this.Nc.Bu(this.HH,this.BH,u,!0);this.Xn=!1}else p=this.Nc.ED(u);p==-1?this.PT(this.Nc.ka(this.Nc.AF()),u):(this.Rl(u,p),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,p)))},o.prototype.RS=function(u){var p=this.qg(u,0);if(u=this.qg(u,1),this.Jn(p,this.Ao),this.Jn(u,this.Ri),h.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var f=this.Ao.compare(this.xh),g=this.Ri.compare(this.xh);return 0>=f&&0<g?u:0>=g&&0<f?p:-1},o.prototype.jQ=function(){var u=new h.ja(0);u.Jb(this.g.gd);for(var p=this.g.$q(),f=p.next();f!=-1;f=p.next())this.g.Qa(f,this.zh)!=-1&&u.add(f);this.g.nx(u,u.size),this.kQ(u)},o.prototype.kQ=function(u){this.df.clear(),this.df.Ee(u.size),this.df.Xo(new O(this.g));var p=new h.h;p.Sc();for(var f=-1,g=new h.h,b=0,S=u.size;b<S;b++){var $=u.get(b);this.g.Hc($,g),g.rb(p)?($=this.g.Qa($,this.zh),this.Zm(f,$)):(f=this.Ie($),this.g.Hc($,p),$=this.df.zn($),this.Ft(f,$))}},o.prototype.lQ=function(){var u=new h.ja(0);u.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))u.add(this.df.ka(p));this.df.clear(),this.g.nx(u,u.size),p=0;for(var f=u.size;p<f;p++){var g=u.get(p),b=this.Ie(g);g=this.df.zn(g),this.Ft(b,g)}},o.prototype.qF=function(u,p){var f=this.kl(u);if(f!=-1){var g=f;do h.ad.GG(this.Rp(g))&&p.add(g),g=this.Tp(g,u);while(g!=f)}},o.prototype.wK=function(u,p){for(u=this.nh.sc(this.Ur(u));u!=-1;u=this.nh.lb(u))this.g.mf(this.nh.ka(u),p)},o.prototype.cK=function(u,p,f,g){this.Zu(u),p!=-1&&this.Zu(p),this.NI(0,u,g),p!=-1&&this.NI(1,p,g),f!=-1&&(g.Cf.D(this.Ao),this.Jn(f,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(f)),f=0;for(var b=this.Ck.size;f<b;f++){var S=this.Ck.get(f),$=this.Zy(S);$!=-1&&(this.df.wd($,-1),this.Ft(S,-1))}for(f=this.Th(u),b=p!=-1?this.Th(p):-1,this.RD(f,g,0),p!=-1&&this.RD(b,g,1),this.UE(u,g,0),p!=-1&&this.UE(p,g,1),this.Rd.eh(f),this.Wu(u),p!=-1&&(this.Rd.eh(b),this.Wu(p)),f=0,b=this.Ck.size;f<b;f++)(S=this.Ck.get(f))==this.Lq&&(this.Zv=!0),($=this.Zy(S))==-1&&(($=this.df.ED(this.wF(S)))==-1?(u=this.Ie(this.df.ka(this.df.AF())),this.Zm(u,S)):this.Ft(S,$));this.Ck.clear(!1)},o.prototype.Jn=function(u,p){this.g.ZF(this.$y(u),p)},o.prototype.wF=function(u){return this.nh.Ln(this.Ur(u))},o.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new c(this),this.Nc.ao=this.ae);var u=new h.ja(0),p=null,f=null;this.BH=this.HH=-1,this.Xn=!1;for(var g=this.df.sc(-1);g!=-1;){this.Xn=!1;var b=this.df.ka(g);this.Lq=this.Ie(b),this.g.Hc(b,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var S=this.kl(this.Lq),$=S==-1;if(!$){b=S;do{var E=this.Rp(b);E==-1?(this.ph.add(b),this.Rl(b,-3)):E!=-3&&u.add(E),b=this.Tp(b,this.Lq)}while(b!=S)}if(0<u.size){for(this.Xn=u.size==1&&this.ph.size==1,$=0,S=u.size;$<S;$++)b=this.Nc.ka(u.get($)),this.Rl(b,-2);var C=-2,k=-2;for($=0,S=u.size;$<S;$++){if(E=u.get($),C==-2){var L=this.Nc.xe(E);L!=-1?(b=this.Nc.ka(L),(b=this.Rp(b))!=-2&&(C=L)):C=-1}if(k==-2&&((E=this.Nc.lb(E))!=-1?(b=this.Nc.ka(E),(b=this.Rp(b))!=-2&&(k=E)):k=-1),C!=-2&&k!=-2)break}for($=0,S=u.size;$<S;$++)E=u.get($),b=this.Nc.ka(E),this.Nc.wd(E,-1),this.Rl(b,-1);u.clear(!1),this.HH=C!=-1?C:-1,this.BH=k!=-1?k:-1,C!=-1&&k!=-1?this.Xn||this.gO(C,k):C==-1&&k==-1&&(this.Xn=!1)}else $&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.pJ(p),p.sg&&(p.Mr(),this.BQ(this.Lq,p.Fm)));this.sS(),this.Zv?(this.Zv=!1,f==null&&(f=new w(this.g)),f.Fh(this.xh),g=this.df.pJ(f)):g=this.df.lb(g)}return this.Yn},o.prototype.gr=function(u){for(this.g=u,this.zh=this.g.Hd(),this.hb.Ee(u.gd+32),this.Ad.Ee(u.gd),this.nh.Bt(u.gd),this.nh.hn(u.gd),this.Rd.Bt(u.gd+32),this.Rd.hn(u.gd+32),u=this.g.md;u!=-1;u=this.g.ve(u))if(h.ba.Ic(this.g.jc(u)))for(E=this.g.Ob(u);E!=-1;E=this.g.Sb(E)){var p=this.g.Ka(E),f=this.g.Ya(E),g=this.$m(f),b=this.ot(f);for(this.jj(b,g),C=this.g.V(f),f=0,p-=2;f<p;f++){var S=this.g.V(C),$=this.$m(C);this.jj(b,$),b=this.ot(C),this.jj(b,$),C=S}this.g.ec(E)?($=this.$m(C),this.jj(b,$),b=this.ot(C),this.jj(b,$),this.jj(b,g)):($=this.$m(C),this.jj(b,$))}else for(var E=this.g.Ob(u);E!=-1;E=this.g.Sb(E)){var C=this.g.Ya(E);for(g=0,p=this.g.Ka(E);g<p;g++)this.$m(C),C=this.g.V(C)}this.jQ()},o}();h.MC=n}(B||(B={})),function(h){var O=function(w){function c(a,n,o){var u=w.call(this)||this;if(a!==void 0)if(o!==void 0){u.description=h.fe.pg();var p=new h.Od;p.L(a,n,o),u.ZB(p)}else if(n!==void 0)u.description=h.fe.pg(),u.Db(a,n);else if(a instanceof h.sa)u.description=a;else if(a instanceof h.h)u.description=h.fe.pg(),u.Db(a);else{if(!(a instanceof c))throw h.i.O();u.description=a.description,u.Db(a.Ng(),a.kh()),a.la!==null&&(u.la=a.la.slice(0))}else u.description=h.fe.pg();return u}return Re(c,w),c.prototype.D=function(a){if(a===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(a=new h.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},c.prototype.Db=function(a,n){typeof a=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=a,this.la[1]=n):(this.wc(),this.Db(a.x,a.y))},c.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var a=new h.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.dG()?this.la[2]:h.sa.te(1),a},c.prototype.ZB=function(a){this.wc();var n=this.hasAttribute(1);n||h.sa.yG(1,a.z)||(this.se(1),n=!0),this.la==null&&this.wn(),this.la[0]=a.x,this.la[1]=a.y,n&&(this.la[2]=a.z)},c.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},c.prototype.YB=function(a){this.setAttribute(0,0,a)},c.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},c.prototype.WJ=function(a){this.setAttribute(0,1,a)},c.prototype.XR=function(){return this.Vc(1,0)},c.prototype.sX=function(a){this.setAttribute(1,0,a)},c.prototype.uR=function(){return this.Vc(2,0)},c.prototype.cX=function(a){this.setAttribute(2,0,a)},c.prototype.Fc=function(){return this.tF(3,0)},c.prototype.GJ=function(a){this.setAttribute(3,0,a)},c.prototype.Vc=function(a,n){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+n]:h.sa.te(a)},c.prototype.tF=function(a,n){var o=this.description.Rf(a);return 0<=o?this.la[this.description.bk(o)+n]:h.sa.te(a)},c.prototype.setAttribute=function(a,n,o){this.wc();var u=this.description.Rf(a);0>u&&(this.se(a),u=this.description.Rf(a)),this.la==null&&this.wn(),this.la[this.description.bk(u)+n]=o},c.prototype.K=function(){return 33},c.prototype.Eb=function(){return 0},c.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},c.prototype.un=function(a){if(this.la!=null){for(var n=h.fe.Kw(a,this.description),o=[],u=0,p=0,f=a.Ba;p<f;p++){var g=a.ld(p),b=h.sa.Wa(g);if(n[p]==-1){var S=h.sa.te(g);for(g=0;g<b;g++)o[u]=S,u++}else for(S=this.description.bk(n[p]),g=0;g<b;g++)o[u]=this.la[S],u++,S++}this.la=o}this.description=a},c.prototype.wn=function(){this.gJ(this.description.Be.length),c.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},c.prototype.Pc=function(a){if(a instanceof h.Ed){if(!this.Bc()){var n=this.D();a.Gh(n,n),this.Db(n)}}else this.Bc()||(this.se(1),n=this.xz(),this.ZB(a.hp(n)))},c.prototype.copyTo=function(a){if(a.K()!=33)throw h.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.Pf(this.description)):(a.Pf(this.description),a.gJ(this.description.Be.length),c.YD(this.la,a.la,this.description.Be.length))},c.prototype.Ja=function(){return new c(this.description)},c.prototype.B=function(){return this.Bc()},c.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},c.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.Pf(this.description),a.$b(this)},c.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},c.prototype.So=function(a){if(this.Bc())a.Pa();else{var n=this.xz();a.v=n.x,a.G=n.y,a.Xe=n.z,a.C=n.x,a.H=n.y,a.Dg=n.z}},c.prototype.Vg=function(a,n){var o=new h.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,n),o.pa=a,o.wa=a,o)},c.prototype.gJ=function(a){if(this.la==null)this.la=h.P.mg(a);else if(this.la.length<a){for(var n=this.la.slice(0),o=this.la.length;o<a;o++)n[o]=0;this.la=n}},c.YD=function(a,n,o){if(0<o)for(o=0;o<a.length;o++)n[o]=a[o]},c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var n=0,o=this.description.Be.length;n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},c.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var n=0,o=this.description.Be.length;n<o;n++){var u=this.la[n];u=h.P.truncate(u^u>>>32),a=h.P.Vh(u,a)}return a},c.prototype.ng=function(){return null},c}(h.ba);h.Ta=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){c!==void 0&&(this.x=c,this.y=a,this.z=n)}return w.construct=function(c,a,n){var o=new w;return o.x=c,o.y=a,o.z=n,o},w.prototype.L=function(c,a,n){this.x=c,this.y=a,this.z=n},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var c=this.length();c==0&&(this.x/=c,this.y/=c,this.z/=c)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(c){return new w(this.x-c.x,this.y-c.y,this.z-c.z)},w.prototype.Bg=function(c){new w(this.x*c,this.y*c,this.z*c)},w.prototype.Sh=function(c){return this.x*c.x+this.y*c.y+this.z*c.z},w}();h.Od=O}(B||(B={})),function(h){var O=function(){function w(c,a,n){this.Iw=this.yA=null,this.Zf=a,this.AT=a.y-n,this.zT=a.y+n,this.Gw=0,this.Zz=c,this.ra=n,this.MT=n*n,this.$z=n!=0,this.Nv=!1}return w.prototype.result=function(){return this.Gw!=0?1:0},w.prototype.UM=function(c){return c=c.ic(c.ge(this.Zf,!1)),h.h.zc(c,this.Zf)<=this.MT},w.prototype.aF=function(c){if(!this.$z&&(this.Zz&&this.Zf.rb(c.bc())||this.Zf.rb(c.xc())))this.Nv=!0;else if(c.oa==this.Zf.y&&c.oa==c.ma){if(this.Zz&&!this.$z){var a=Math.max(c.ta,c.qa);this.Zf.x>Math.min(c.ta,c.qa)&&this.Zf.x<a&&(this.Nv=!0)}}else{var n=!1;if(a=Math.max(c.ta,c.qa),this.Zf.x>a?n=!0:this.Zf.x>=Math.min(c.ta,c.qa)&&(n=0<c.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),n){if(this.Zf.y==c.bc().y){if(this.Zf.y<c.xc().y)return}else if(this.Zf.y==c.xc().y&&this.Zf.y<c.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(c.bc().y>c.xc().y?1:-1)}}},w.prototype.MI=function(c){var a=c.Vg(0,1);if(a.pa>this.zT||a.wa<this.AT)return!1;if(this.$z&&this.UM(c))return!0;if(a.pa>this.Zf.y||a.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=c.$F()))for(c=0;c<a;c++){var n=this.yA[c].get();if(this.aF(n),this.Nv)return!0}else if(this.aF(c),this.Nv)return!0;return!1},w.KM=function(c,a,n){for(a=new w(c.Kn()==0,a,n),c=c.Ha();c.ab();)for(;c.Ia();)if(n=c.ia(),a.MI(n))return-1;return a.result()},w.LM=function(c,a,n,o){var u=new h.l;c.yc(u),u.X(o,o);var p=new w(c.Kn()==0,n,o);c=c.Ha();var f=new h.l;for(f.L(u),f.C=n.x+o,f.G=n.y-o,f.H=n.y+o,o=(n=a.HF(f,o)).next();o!=-1;o=n.next())if(c.Wb(a.ka(o)),c.Ia()&&(o=c.ia(),p.MI(o)))return-1;return p.result()},w.ym=function(c,a,n){if(c.B())return 0;var o=new h.l;if(c.yc(o),o.X(n,n),!o.contains(a))return 0;if((o=c.Cb)!=null){var u=o.Hk;if(u!=null){if((u=u.Uo(a.x,a.y))==1)return 1;if(u==0)return 0}if((o=o.Gb)!=null)return w.LM(c,o,a,n)}return w.KM(c,a,n)},w.XS=function(c,a,n){return a.B()?0:w.ym(c,a.D(),n)},w.Ol=function(c,a){return!(16>(c=c.I()))&&2*c+Math.log(c)/Math.log(2)*a<1*c*a},w}();h.Fg=O}(B||(B={})),function(h){var O=function(w){function c(a){return w.call(this,!0,a)||this}return Re(c,w),c.prototype.Ja=function(){return new c(this.description)},c.prototype.Eb=function(){return 2},c.prototype.K=function(){return 1736},c.prototype.sG=function(a,n,o){this.ES(a,n,o)},c.prototype.kR=function(){this.AR()},c}(h.Xk);h.Ea=O}(B||(B={})),function(h){(function(O){O[O.PiPOutside=0]="PiPOutside",O[O.PiPInside=1]="PiPInside",O[O.PiPBoundary=2]="PiPBoundary"})(h.ML||(h.ML={})),h.jd=function(){function O(){}return O.FG=function(w,c,a){return(w=h.Fg.XS(w,c,a))==0?0:w==1?1:2},O.Zd=function(w,c,a){return(w=h.Fg.ym(w,c,a))==0?0:w==1?1:2},O.SX=function(w,c,a,n,o){if(c.length<a||o.length<a)throw h.i.O();for(var u=0;u<a;u++)o[u]=O.Zd(w,c[u],n)},O.nK=function(w,c,a,n,o){if(w.K()==1736)O.SX(w,c,a,n,o);else{if(w.K()!=197)throw h.i.ga("invalid_call");var u=new h.l;w.A(u),O.VM(u,c,a,n,o)}},O.VM=function(w,c,a,n,o){if(c.length<a||o.length<a)throw h.i.O();if(w.B())for(n=0;n<a;n++)o[n]=0;else for(w.X(.5*-n,.5*-n),w.X(.5*n,.5*n),n=0;n<a;n++)w.contains(c[n])?o[n]=1:w.contains(c[n])?o[n]=2:o[n]=0},O.UX=function(w,c,a,n,o){for(var u=0;u<a;u++)o[u]=w.ss(c[u],n)?2:0},O.TX=function(w,c,a,n,o){var u=w.Cb,p=null;u!=null&&(p=u.Hk),u=a;for(var f=0;f<a;f++)if(o[f]=1,p!=null){var g=c[f];p.Uo(g.x,g.y)==0&&(o[f]=0,u--)}if(u!=0)for(w=w.Ha();w.ab()&&u!=0;)for(;w.Ia()&&u!=0;)for(p=w.ia(),f=0;f<a&&u!=0;f++)o[f]==1&&p.ss(c[f],n)&&(o[f]=2,u--);for(f=0;f<a;f++)o[f]==1&&(o[f]=0)},O.oK=function(w,c,a,n,o){var u=w.K();if(u==1607)O.TX(w,c,a,n,o);else{if(!h.ba.zd(u))throw h.i.ga("Invalid call.");O.UX(w,c,a,n,o)}},O}()}(B||(B={})),function(h){var O=function(w){function c(a,n){if(arguments.length==2){var o=w.call(this,!1,a.description)||this;o.nf(a),o.lineTo(n)}else o=w.call(this,!1,a)||this;return o}return Re(c,w),c.prototype.Ja=function(){return new c(this.description)},c.prototype.Eb=function(){return 1},c.prototype.K=function(){return 1607},c.prototype.sG=function(a,n,o){this.FS(a,n,o)},c}(h.Xk);h.Ua=O}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.progress=function(){return!0},w.Bp=function(c){if(c!=null&&!c.progress(-1,-1))throw h.i.RC()},w}();h.op=O}(B||(B={})),function(h){var O;(O=h.KK||(h.KK={}))[O.clipWithInputHorizon=1]="clipWithInputHorizon",O[O.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function n(){this.Mg=3,this.Xu=this.Lr=NaN}return n.prototype.KW=function(o){this.LB(1,o)},n.prototype.LW=function(o){this.LB(2,o)},n.prototype.cS=function(){return this.ks(1)},n.prototype.dS=function(){return this.ks(2)},n.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.prototype.Qf=function(){var o=new n;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},n}();h.tC=w,function(n){n[n.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",n[n.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.LK||(h.LK={}));var c=function(){function n(){this.Mg=0}return n.prototype.LB=function(o,u){this.Mg=u?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.kg=function(o){var u=new n;return u.Mg=o.Mg,u},n.prototype.hM=function(o){this.Mg=o.Mg},n}();h.wY=c;var a=function(){function n(o,u,p){this.ef=o,this.$f=u,this.Wf=new h.l,this.Wf.L(p),this.vT=o.dc()+u.dc()+this.Wf.dc().toString()}return n.prototype.dc=function(){return this.vT},n.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.$f.Nb(o.$f)&&this.Wf.Nb(o.Wf)},n}();h.BY=a,a=function(){function n(){this.$f=this.ef=null,this.mH=new w,this.nH=new c,this.yw=this.Yf=null,this.ow=this.Vn=!0}return n.Pr=function(o,u,p,f){var g;f===void 0&&(f=null),g===void 0&&(g=null);var b=new n;return b.sp(o,u,p,f,g),b},n.prototype.sp=function(o,u,p,f,g){if(o==null||u==null)throw h.i.ga("invalidArgument");if(this.ef=o,this.$f=u,this.ow=this.Vn=!1,f!=null&&(this.mH=f.Qf()),g!=null&&this.nH.hM(g),g=!1,u.Tb()==1&&f!=null&&(f=f.Lr,isNaN(f)||f==0||(g=!0)),o==u)this.Vn=!g,this.ow=!0;else{f=o.Tb();var b=u.Tb();if(f==0||b==0){if(p!=null)throw h.i.O();o.Id()!=null&&u.Id()!=null&&(this.Vn=o.Id().Nb(u.Id()))}else f==3||b==3?this.Vn=o.Nb(u):this.ef.fS(this.$f)?this.Vn=!g:this.Vn=!1,this.Yf=p,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},n.prototype.isIdentity=function(){return this.Vn},n.prototype.iR=function(){return this.mH.Qf()},n.prototype.Nb=function(o){return o==this||!!(o instanceof n&&this.ef.Nb(o.ef)&&this.$f.Nb(o.$f))&&(this.Yf==o.Yf||!(this.Yf==null||o.Yf==null||!this.Yf.Nb(o.Yf)))},n.prototype.kY=function(){this.yw=new h.du(this)},n}(),h.xr=a}(B||(B={})),function(h){var O=function(){function w(){}return w.Ep=function(c){return c*w.jW},w.mx=function(c,a){return w.bP(a-c)},w.cP=function(c){return-360<=c&&720>c?(0>c?c+=360:360<=c&&(c-=360),c):(0>(c=h.mc.MK(c))&&(c+=360),c)},w.bP=function(c){return 180<(c=w.cP(c))&&(c-=360),c},w.jW=57.29577951308232,w}();h.sr=O,h.Jh=function(){function w(){}return w.nj=function(c,a){var n=new h.l;c.A(n);var o=h.cb.ih(a),u=new h.l;return u.L(o),u.v=n.v,u.C=n.C,u.X(.01*u.da(),0),a=h.ua.Xd(a,n,!1),u.contains(n)?c:h.Vd.clip(c,u,a,0)},w.ms=function(c,a,n,o,u){if(!h.cb.Xc(a))throw h.i.O();var p=h.ua.mj(a,c,!1),f=h.cb.ih(a),g=h.cb.tc(a),b=g.Id().ci,S=h.cb.xv(g);g=h.cb.gv(g),S*=2-S;var $=new h.Oc;f.en($);var E=[[0,0],[0,0]];if(h.Gg.Tb(a)==2?o?(E[0][0]=w.an(u,$),E[0][1]=f.Lp(),h.cb.wt(),f=E[0][0]*b):(E[0][0]=f.ik(),E[0][1]=u,h.cb.wt(),f=E[0][1]*b):f=u*b,!o&&f!=0)throw h.i.O();var C=new h.ha,k=new h.hd;c=k.Ib(c);for(var L=[0],N=new h.h,U=new h.h,H=new h.h,j=new h.h,K=new h.h,se=new h.h,ne=k.Ob(c);ne!=-1;ne=k.Sb(ne)){var pe=k.Ya(ne);k.D(pe,H);for(var ce=!1,_e=pe=k.V(pe);_e!=-1;_e=k.V(_e)){if(_e==pe){if(ce)break;ce=!0}if(k.D(_e,j),o&&p<u-H.x&&j.x-u>p||p<u-j.x&&H.x-u>p||!o&&p<-H.y&&j.y>p||p<-j.y&&H.y>p)do if(!(Math.abs(H.x-j.x)>=.5*$.S())){if(h.Gg.Tb(a)==2?(E[0][0]=w.an(H.x,$),E[0][1]=H.y,E[1][0]=w.an(j.x,$),E[1][1]=j.y,h.cb.ZV(),K.x=E[0][0]*b,K.y=E[0][1]*b,se.x=E[1][0]*b,se.y=E[1][1]*b):(K.x=H.x*b,K.y=H.y*b,se.x=j.x*b,se.y=j.y*b),se.x=6.283185307179586*(j.x-H.x)/$.S()+K.x,o){if(U.x=f,U.y=w.Iz(g,S,K,se,f,n),isNaN(U.y))break}else{if(U.x=w.Gz(g,S,K,se,n),isNaN(U.x))break;U.y=0}h.kb.xd(g,S,K.x,K.y,se.x,se.y,C,null,null,n);var Oe=C.u;h.kb.xd(g,S,K.x,K.y,U.x,U.y,C,null,null,n);var Ce=C.u;h.Gg.Tb(a)==2?(E[0][0]=U.x/b,E[0][1]=U.y/b,h.cb.XQ(),o?(N.y=E[0][1],N.x=u):(N.x=w.qs(E[0][0],H.x,j.x,$),N.y=u)):o?(N.x=u,N.y=U.y/b):(N.x=w.qs(U.x/b,H.x,j.x,$),N.y=u),L[0]=0<Oe?h.P.Tk(Ce/Oe,0,1):.5,L[0]!=0&&L[0]!=1&&(Oe=k.Na(_e),k.Wl(Oe,L,1),k.Db(k.V(Oe),N.x,N.y))}while(0);H.N(j)}}return k.Ke(c)},w.Hn=function(c,a,n,o,u){if(c.B())return c;var p=h.cb.bf(a);return w.Jp(c,n-180*p,360*p,a,o,u,!0)},w.Iz=function(c,a,n,o,u,p){if(3.141592653589793<=Math.abs(n.x-o.x)||!w.Un(n.x,o.x,u))return NaN;if(n.x>o.x)var f=o;else f=n,n=o;o=new h.ha(0);var g=new h.ha(0),b=new h.ha(0);h.kb.xd(c,a,f.x,f.y,n.x,n.y,g,o,null,p);var S=g.u,$=0,E=1,C=new h.h;for(C.N(f);S*(E-$)>1e-12*c;){var k=.5*($+E);if(h.kb.qj(c,a,f.x,f.y,S*k,o.u,g,b,p),C.x=g.u,C.y=b.u,C.x==u)break;if(w.Un(f.x,C.x,u))E=k;else{if(!w.Un(n.x,C.x,u))return NaN;$=k}}return C.y},w.Un=function(c,a,n){return c=O.Ep(c),a=O.mx(c,O.Ep(a)),(n=O.mx(c,O.Ep(n)))==0||0<a&&0<n&&n<=a||0>a&&0>n&&n>=a},w.an=function(c,a){var n=a.wa-a.pa;return a.Kt(c-Math.floor((c-a.pa)/n)*n)},w.qs=function(c,a,n,o){var u=new h.Oc;for(u.L(a,n),n=o.S(),c=Math.floor((c-a)/n)*n+c,u=u.tf();Math.abs(c-u)>Math.abs(c+n-u);)c+=n;return c},w.Gz=function(c,a,n,o,u){if(n.y>o.y)var p=o;else p=n,n=o;if((o=new h.Oc).L(p.y,n.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-n.x))return NaN;if(p.x==n.x)return p.x;var f=new h.ha(0),g=new h.ha(0),b=new h.ha(0);h.kb.xd(c,a,p.x,p.y,n.x,n.y,g,f,null,u);var S=g.u,$=0,E=1,C=new h.h;for(C.N(p);S*(E-$)>1e-12*c;){var k=.5*($+E);if(h.kb.qj(c,a,p.x,p.y,S*k,f.u,g,b,u),C.x=g.u,C.y=b.u,o.L(p.y,C.y),C.y==0)break;if(o.contains(0))E=k;else{if(o.L(n.y,C.y),!o.contains(0))return NaN;$=k}}return C.x},w.Jp=function(c,a,n,o,u,p,f){var g=new h.l;if(c.A(g),g.B())return c;var b=new h.Oc;g.en(b);var S=new h.Oc;if(S.L(a,a+n),S.contains(b)&&S.wa!=b.wa)return c;var $=new h.l;$.L(g);var E=c.K();if(E==33)return((g=($=u?c:c.Qf()).Ng())<S.pa||g>=S.wa||f&&g==S.wa)&&(g+=Math.ceil((S.pa-g)/n)*n,g=S.Kt(g),$.YB(g)),$;if(E==550){for(o=($=u?c:c.Qf()).vb(0),E=2*$.I(),c=!1,u=0;u<E;u+=2)((g=o.read(u))<S.pa||g>=S.wa||f&&g==S.wa)&&(c=!0,g+=Math.ceil((S.pa-g)/n)*n,g=S.Kt(g),o.write(u,g));return c&&$.Qc(1993),$}if(S.contains(b))return c;if(E==197)return n=u?c:c.Qf(),g.Fa($),n.Zo(g),n;var C=.1*Math.max(g.da(),g.S());for($.X(0,C),f=c,S=o.Yd(0),c=h.Ih.local(),u=new h.Ed;;){var k=Math.floor((b.pa-a)/n),L=Math.ceil((b.wa-a)/n);if(!(3<L-k))break;k=Math.floor(.5*(L+k)),$.v=g.v-C,$.C=a+n*k;var N=h.Vd.clip(f,$,S,p);$.v=$.C,$.C=g.C+C;var U=h.Vd.clip(f,$,S,p);u.ig((k-L)*n,0),U.Pc(u),E==1736?f=c.W(N,U,o,null):(f=N).add(U,!1),f.A(g),g.en(b)}for($.v=a,$.C=a+n,(a=new h.l).L($),a.X(S,0),(a=Math.floor((g.v-$.v)/n)*n)!=0?($.move(a,0),u.ig(-a,0)):u.MB(),a=E==1607?new h.Ua(f.description):new h.Ea(f.description),p=new h.l,b=new h.l;g.C>$.v;)(C=h.Vd.clip(f,$,S,0)).A(b),(E==1607?!C.B()&&(b.S()>S||b.da()>S):!C.B()&&(E!=1736||b.S()>S))&&(C.Pc(u),C.A(b),a.A(p),p.X(S,S),p.isIntersecting(b)&&E==1736?a=c.W(a,C,o,null):a.add(C,!1)),$.move(n,0),u.shift(-n,0);return a},w.RI=function(c,a,n,o){var u=new h.ee(n.description);u.Gd(n,0,-1),u=h.cb.Bh(u,c,a);var p=n.I();if(o.Pa(),!h.cb.Xc(c)||p!=u.I())return!1;var f=new h.l;n.A(f);var g=new h.l;if(u.A(g),f=f.S(),g=g.S(),f!=0&&g!=0){if(g/=f,c=h.cb.ih(a).S()/h.cb.ih(c).S(),1e-10<Math.abs(g/c-1))return!1}else if(f!=0||g!=0)return!1;for(o.add(n,!1),n=0;n<p;n++)c=u.Oa(n),o.Db(n,c);return!0},w.Jz=function(){throw h.i.Fe()},w}()}(B||(B={})),function(h){var O,w,c;(w=O=h.ui||(h.ui={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(c=h.RK||(h.RK={})),h.Ab=function(){function a(){}return a.zv=function(n,o,u){if(u||0<o){for(n=n.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),o=[],u=0;u<n.length;u++)o[u]="a"<=n[u]&&"z">=n[u]?o[u]=n[u].toUpperCase():n[u];return o.join()}return n.toString(h.Tc.PE_STR_AUTH_TOP)},a.wr=function(n,o,u,p){var f=p.length,g=u.I();if(g!=0){var b=u.vb(0),S=Math.min(g,f),$=0,E=n.gh();isNaN(o)&&(o=0);for(var C=n.Xc(),k=179*(n=C?n.tc().Le().S():0)/360;0<g;){if(b.pB($<<1,S,p),h.gj.projToGeogCenter(E,S,p,o),C)for(var L=0;L<S;L++){var N=p[L][0]-o,U=h.mc.sign(N),H=b.read(2*($+L));0>U*h.mc.sign(H)&&Math.abs(N)>k&&(p[L][0]+=-U*n)}b.pC($<<1,S,p),$+=S,g-=S,S=Math.min(g,f)}u.Qc(1993)}},a.DL=function(n,o,u,p){var f=0,g=n.gh();isNaN(f)&&(f=0);var b=n.Xc(),S=n.bf();n=360*S,S*=179;for(var $=p.length,E=0;E<u;){for(var C=E;C<u&&o[C].isNaN();++C)E++;var k=Math.min($,u-E);if(0<k){C=1;for(var L=E+1;C<k;++C,++L)if(o[L].isNaN()){k=C;break}if(h.ua.Ey(p,o,E,k),h.gj.projToGeogCenter(g,k,p,f),b)for(C=0,L=E;C<k;++C,++L){var N=o[L].x,U=p[C][0]-f,H=h.mc.sign(U);0>H*h.mc.sign(N)&&Math.abs(U)>S&&(p[C][0]-=H*n)}h.ua.Dy(o,E,p,k),E+=k}}},a.Kx=function(n,o,u){var p=u.length,f=o.I();if(!(1>f)){var g=o.vb(0),b=Math.min(f,p),S=0,$=n.gh(),E=n.Xc(),C=E?n.Le().S():0,k=179*C/360,L=0;for(E&&(L=n.Bi());0<f;){if(g.pB(S<<1,b,u),h.gj.geogToProj($,b,u),E)for(n=0;n<b;n++){var N=u[n][0],U=h.mc.sign(N),H=g.read(2*(S+n))-L;0>U*h.mc.sign(H)&&Math.abs(N)>k&&(u[n][0]+=-U*C)}g.pC(S<<1,b,u),S+=b,f-=b,b=Math.min(f,p)}o.Qc(1993)}},a.CL=function(n,o,u,p){if(u!=0){var f=n.gh(),g=n.Xc(),b=g?n.Le().S():0,S=179*b/360,$=0;for(g&&($=n.Bi()),n=0;n<u;){for(var E=n;E<u&&o[E].isNaN();++E)n++;var C=Math.min(p.length,u-n);if(0<C){E=1;for(var k=n+1;E<C;++E,++k)if(o[k].isNaN()){C=E;break}if(h.ua.Ey(p,o,n,C),h.gj.geogToProj(f,C,p),g)for(E=0,k=n;E<C;E++){var L=p[E][0],N=h.mc.sign(L);0>N*h.mc.sign(o[k].x-$)&&Math.abs(L)>S&&(p[E][0]-=N*b)}h.ua.Dy(o,n,p,C),n+=C}}}},a.vr=function(n,o,u,p){var f=o.I();if(f!=0){var g=o.vb(0),b=n.ef,S=n.$f,$=b.tc().Sp(),E=S.tc().Sp(),C=b.bf(),k=S.bf();if((n=n.Yf)==null||n.count()==0){for(u=$/E,p=(b.Wp()-S.Wp())*k,E=-90*C,n=90*C,$=!1,k=1,b=2*f;k<b;)C=g.get(k),(S=h.P.Tk(C,E,n))!=C&&(g.set(k,S),$=!0),k+=2;if(p!=0||u!=1)for($=!0,E=new h.h,k=0;k<f;k++)g.uc(2*k,E),E.x*=u,E.x+=p,E.y*=u,g.Vt(2*k,E);$&&o.Qc(1993)}else{b=p.length,S=Math.min(f,b);var L=h.P.mg(S),N=null,U=0,H=NaN,j=NaN,K=360*k,se=k/C;u&&(j=90*k,H=89.9*C,N=h.P.mg(S));for(var ne=!0,pe=0;f!=0;){for(C=!1,g.pB(U<<1,S,p),k=0;k<S;k++)L[k]=p[k][0];if(u)for(k=0;k<S;k++){var ce=Math.abs(p[k][1])-H;0<ce&&(C=p[k][1],p[k][1]=h.mc.En(H,C),N[k]=h.mc.En(ce,C),C=!0)}for(k=p[0][0],n.transform(p,S,$,E),ne&&(pe=p[0][0]-se*k,ne=!1),k=0;k<S;k++)ce=p[k][0]-L[k]*se-pe,200<Math.abs(ce)&&(p[k][0]=0<ce?p[k][0]-K:p[k][0]+K);if(C){for(k=0;k<S;k++)N[k]!=0&&(p[k][1]+=se*N[k],p[k][1]>j?p[k][1]=j:p[k][1]<-j&&(p[k][1]=-j));for(C=0;C<S;C++)N[C]=0}g.pC(U<<1,S,p),U+=S,f-=S,S=Math.min(f,b)}o.Qc(1993)}}},a.BL=function(n,o,u,p){if(n.ow)p=90*n.ef.bf(),h.ua.ZJ(o,u,-p,p);else{var f=n.Yf,g=n.ef,b=n.$f;n=g.Zr();var S=b.Zr(),$=g.bf(),E=90*$,C=b.bf();if(f==null||f.count()==0){if(p=n/S,f=(g.Wp()-b.Wp())*C,h.ua.ZJ(o,u,-E,E),f!=0||p!=1)for(C=0;C<u;C++)o[C].x*=p,o[C].x+=f,o[C].y*=p}else{g=Math.min(u,p.length),E=h.P.mg(g),b=360*C,$=C/$;for(var k=!0,L=0,N=0;u!=0;){for(C=0;C<g;C++)E[C]=o[C+N].x;for(C=o[0].x,h.ua.Ey(p,o,N,g),f.transform(p,g,n,S),h.ua.Dy(o,N,p,g),k&&(L=o[0].x-$*C,k=!1),C=0;C<g;C++){var U=o[N+C].x-E[C]*$-L;200<Math.abs(U)&&(o[N+C].x=0<U?o[N+C].x-b:o[N+C].x+b)}N+=g,u-=g,g=Math.min(u,p.length)}}}},a.fv=function(n,o){return n=n.ih(),isNaN(o)||n.Lu(o,0),n},a.PQ=function(n,o,u,p,f,g,b,S){for(var $=a.fv(p,f),E=$.S(),C=E/360,k=a.kE*C,L=n.vb(0),N=o.Xc(),U=N?E/o.Le().S():0,H=!1,j=new h.Ea(u.description),K=0,se=u.ea();K<se;++K){var ne=N,pe=new h.Ua(u.description);if(pe.addPath(u,K,!0),b!=0){var ce=a.KD(!0,pe,$.H-S,$.H,b);(H=H||ce)&&(ne=!1)}var _e=-1;ne&&(_e=n.Ca(K));var Oe=pe.vb(0),Ce=pe.I(),st=0,qe=Oe.read(0),Et=0;ce=3*p.Yd(0);var xt=!1,et=new h.h;et.Sc();var xi=new h.h;xi.Sc();for(var nr=!1,Ei=1;Ei<Ce;++Ei){var ei=h.h.construct(Oe.gg(2*Ei),Oe.gg(2*Ei+1)),ti=ei.x,zt=ti+st,ki=zt-qe;if(ei.x=zt,Math.abs(ki)>k){if(ne){var jt=_e+(Ei+1<Ce?Ei:0),dr=L.read(2*(_e+Ei-1));jt=(L.read(2*jt)-dr)*U,Math.abs(ki-jt)>1*C&&(ne=!1)}ne||(zt=ti+(st-=h.mc.En(E,zt-qe)),++Et,nr=st!=0,ei.x=zt)}else xt||h.ua.vG(xi,et,ei,ce)&&(xt=!0);nr&&Oe.write(2*Ei,zt),qe=zt,xi.N(et),et.N(ei)}0<Et&&pe.Qc(1993),ne=pe.Oa(0),Ce=pe.Oa(Ce-1),pe=h.h.ub(ne,Ce)<ce?a.pQ(pe,p,f,g,xt):a.qQ(n,K,pe,p,f),j.add(pe,!1)}return f=p.Yd(0),u=$.S()/180,a.Lt(j,$,.1*f,!1),j=j!=(f=h.ti.clip(j,$,f,u,g)),n=n.He(),b=0,0<(S=f.He())&&0>n?b=1:0>=S&&0<n&&(S==0?(S=NaN,o.Tb()==2?S=o.ol().He():o.Tb()==1&&(S=o.Le().rF()),n>.99*S&&(b=-1)):b=-1),b!=0&&((o=new h.Ea(f.description)).vp($),(o=h.Zl.local().W(o,u,g)).add(f,!1),j=!0,f=o),j&&(f=h.$l.local().W(f,p,!1,g)),f},a.qQ=function(n,o,u,p,f){var g=u.I(),b=u.Oa(0),S=u.Oa(g-1);f=(p=a.fv(p,f)).S(),b=h.mc.sign(S.x-b.x);var $=new h.l;u.yc($);var E=p.ik();if(S=E-f,E+=f,0<=b){var C=Math.ceil((S-$.v)/f);for(C*=f;S>$.v+C;)C+=f;for(;S<$.C+C;)C-=f;var k=C;720<$.S()&&(E=S+360*Math.ceil($.S()/360))}else{for(C=Math.ceil((E-$.C)/f),C*=f;E<$.C+C;)C-=f;for(;E>$.v+C;)C+=f;k=C,720<$.S()&&(S=E-360*Math.ceil($.S()/360))}C=b*f;var L=h.l.construct($.v,$.G,$.C,$.H);L.move(k,0);var N=new h.Ed;N.ig(k,0),u.Pc(N),($=new h.Ua(u.description)).add(u,!1),k=u.Oa(g-1),f=0;for(var U=$.Oa(0).x;0<b?L.C<E:L.v>S;)L.move(C,0),N.Lb=C,u.Pc(N),U+=C,p.v<=U&&p.C>=U&&(f=$.I()-1),u.Db(0,k),k=u.Oa(g-1),$.Fr(u,0,0,g-1,!1);return u=new h.Ea($.description),g=0<n.Kr(o),u.add($,!1),n=$.Oa(0),S=$.Oa($.I()-1),o=u.ea()-1,(0>b?g:!g)?(b=h.h.construct(S.x,p.H),u.Ei(b),b=h.h.construct(p.ik(),p.H),u.Ei(b),p=h.h.construct(n.x,p.H)):(b=h.h.construct(S.x,p.G),u.Ei(b),b=h.h.construct(p.ik(),p.G),u.Ei(b),p=h.h.construct(n.x,p.G)),u.Ei(p),u.sG(0,o,0),u.fO(f),u},a.pQ=function(n,o,u,p,f){var g=new h.Ea(n.description);g.add(n,!1),g.yB(0,g.I()-1);var b=new h.l;g.yc(b);var S=(u=a.fv(o,u)).S(),$=Math.ceil((u.v-b.v)/S);for($*=S;u.v>b.v+$;)$+=S;for(;u.v<b.C+$;)$-=S;if(($+=S)!=0){b.move($,0);var E=new h.Ed;E.ig($,0),g.Pc(E)}if(u.v<=b.v&&u.C>b.C)return f&&(f=g.He(),o=(g=h.$l.local().W(g,o,!0,p)).He(),(o=h.mc.sign(f)!=h.mc.sign(o))&&g.jJ()),g;for((n=new h.Ea(n.description)).add(g,!1),f=f||b.S()>S-o.Yd(0);b.v<u.C;)b.move(S,0),(E=new h.Ed).ig(S,0),g.Pc(E),n.add(g,!1);return f&&(f=n.He(),n.$o(1),o=(n=h.$l.local().W(n,o,!0,p)).He(),(o=h.mc.sign(f)!=h.mc.sign(o))&&n.jJ()),n},a.KD=function(n,o,u,p,f){for(var g=o.vb(0),b=o.I(),S=!1,$=0;$<b;$++){var E=h.h.construct(g.gg(2*$),g.gg(2*$+1));if((1&f)!=0&&E.y>=u){S=!0;break}if((2&f)!=0&&E.y<=-u){S=!0;break}}if(!S)return!1;g=!1,n&&(g=o.Pn(0)),b=(n=new h.hd).Ib(o),S=n.Ob(b);var C=-1,k=!0,L=new h.h;L.Sc(),$=new h.Ta;for(var N=-1,U=n.Ya(S);U!=-1;U=n.V(U)){E=n.Oa(U);var H=(1&f)!=0&&90<=E.y?1:0;if(H|=(2&f)!=0&&E.y<=-u?2:0,0<C&&C!=H){if(L.x!=E.x){L.x=E.x,n.Xi(n.Na(U),$);var j=n.yj(S,U,$);n.mf(j,L)}if(g)for(N=N!=-1?n.V(N):n.Ya(S),j=n.Na(U);N!=j;)N=n.qd(N,!1);N=-1}0<H&&(E.y=h.mc.En(p,E.y),n.mf(U,E),k||C==H||(E.x!=L.x?(n.Xi(U,$),j=n.yj(S,U,$),n.Db(j,L.x,E.y),N=j):N=U)),C=H,L=E,k=!1}if(g){if(N!=-1)for(N=n.V(N);N!=-1;)N=n.qd(N,!1);u=n.Ya(S),n.hq(u,n.tj(S))||(n.Xi(u,$),n.yj(S,-1,$))}return n.Ke(b).copyTo(o),!0},a.Hz=function(n,o,u,p){var f=n;if(f.B()||u==O.DontClip)return f;var g=f.K();if(g==33)return f=[(p=f).D()],a.tG(f,1,o,u),f[0].isNaN()?p.Pa():p.Db(f[0]),n;var b=(n=o.tc()).bf(),S=90*b,$=180*b,E=360*b,C=o.Bi(),k=.5*b,L=new h.l;f.A(L);var N=o.Xr(),U=o.KQ(),H=N.K()==197;if(o=new h.l,N.A(o),u==O.PannableFold&&(u=n.Le().S(),o.v=C-.5*u,o.C=o.v+u),L.G<-S||L.H>S){if(new h.l().L(L.v-b,-S,L.C+b,S),(f=h.ti.Pu(f,o,n,NaN,0,p)).B())return f;f.A(L)}if(U&&(o.H<L.G||o.G>L.H))return f.Ja();if(L.S()>E&&(f=a.Jp(f,C-$,E,n,!0,0,!0,p)).A(L),(S=a.$N(L.v,L.C,o.v,o.C,E))!=0&&L.move(S,0),L.C>o.C||L.v<o.v){if(L.C>o.C)for(;L.v>=o.C;)L.move(-E,0),S-=E;for(;L.v<o.C-E;)L.move(E,0),S+=E}if(u=h.ua.Ju(n,N),S!=0&&((b=new h.Ed).ig(S,0),f.Pc(b)),U){if(H&&o.contains(L))return f;for(U=[null,null],S=0;2>S;S++){if(H?b=h.ba.Ic(g)?h.ti.clip(f,o,u,k,p):h.ti.clip(f,o,u,0,p):(b=h.Zj.local().W(f,N,n,p))==N&&(b=h.ba.kg(b)),o.v<=L.v&&o.C>=L.C||o.v>=L.v&&o.C<=L.C)return b;U[S]=b,S==0&&(L.move(-E,0),(b=new h.Ed).ig(-E,0),f.Pc(b))}if(g==550)U[0].Gd(U[1],0,-1);else if(h.ba.Ic(g))U[0].add(U[1],!1);else{if(g!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");U[0].B()&&(U[0]=U[1])}return U[0]}if(o.H<L.G||o.G>L.H)return f;for(g=0;!f.B()&&L.C>o.v;)g!=0&&((b=new h.Ed).ig(g,0),f.Pc(b)),h.fj.local().W(4,f,N,n,p)||N==(f=h.mp.local().W(f,N,n,p))&&(f=h.ba.kg(f)),g!=0&&((k=new h.Ed).ig(-g,0),f.Pc(k)),g-=E,L.move(-E,0);return f},a.tG=function(n,o,u,p){if(o!=0&&p!=O.DontClip)if(p==O.PannableFold){p=u.CR();for(var f=o,g=0;g<o;g++)(n[g].y>p.H||n[g].y<p.G)&&(n[g].Sc(),f--);f!=0&&a.cv(n,o,p.v,p.S())}else{var b=90*(p=u.bf()),S=180*p;for(p*=360,f=o,g=0;g<o;g++)(n[g].y>b||n[g].y<-b)&&(n[g].Sc(),f--);if(f!=0){(f=new h.l).bx(n,o),b=u.Xr();var $=u.kv();g=b.K()==197;var E=new h.l;if(b.A(E),!$||!(E.H<f.G||E.G>f.H))if($)if(a.cv(n,o,E.ik()-S,p),f=o,g)for(g=0;g<o;g++)E.contains(n[g])||(n[g].Sc(),f--);else for(u=h.ua.Ju(u.tc(),b),g=0;g<o;g++)(S=h.jd.Zd(b,n[g],u)!=0)||(n[g].Sc(),f--);else for(a.cv(n,o,-S,p),f=o,u=h.ua.Ju(u.tc(),b),g=0;g<o;g++)(S=n[g]).isNaN()&&f--,$=a.oE(S.x,E.v,E.C,p),S.x+=$,(S=h.jd.Zd(b,S,u)!=0)&&(n[g].Sc(),f--)}}},a.Jp=function(n,o,u,p,f,g,b,S){var $=n.K(),E=o+u;if($===33){var C=(p=f?n:n.Qf()).Ng();return(C<o||C>=E||b&&C==E)&&(C+=Math.ceil((o-C)/u)*u,C=h.P.Tk(C,o,E),p.YB(C)),p}if(n.B()||(C=new h.l,n.A(C),C.B()))return n;var k=new h.Oc;C.en(k);var L=new h.Oc;if(L.L(o,E),L.contains(k))return n;if((E=new h.l).L(C),$===550){for(S=(p=f?n:n.Qf()).vb(0),$=2*p.I(),E=!1,o=0;o<$;o+=2)((C=S.read(o))<L.pa||C>=L.wa||b&&C==L.wa)&&(E=!0,C+=Math.ceil((L.pa-C)/u)*u,C=L.Kt(C),S.write(o,C));return E&&p.Qc(1993),p}if($==197)return u=f?n:n.Qf(),C.Fa(E),u.Zo(C),u;var N=.1*Math.max(C.da(),C.S());for(E.X(0,N),b=n,L=p.Yd(0),n=h.Ih.local(),f=new h.Ed;;){var U=Math.floor((k.pa-o)/u),H=Math.ceil((k.wa-o)/u);if(!(3<H-U))break;U=Math.floor(.5*(H+U)),E.v=C.v-N,E.C=o+u*U;var j=h.ti.clip(b,E,L,g,S);E.v=E.C,E.C=C.C+N;var K=h.ti.clip(b,E,L,g,S);f.ig((U-H)*u,0),K.Pc(f),$==1736?b=n.W(j,K,p,null):(b=j).add(K,!1),b.A(C),C.en(k)}for(E.v=o,E.C=o+u,(o=new h.l).L(E),o.X(L,0),(o=Math.floor((C.v-E.v)/u)*u)!=0?(E.move(o,0),f.ig(-o,0)):f.MB(),o=$==1607?new h.Ua(b.description):new h.Ea(b.description),g=new h.l,k=new h.l;C.C>E.v;)(N=h.ti.clip(b,E,L,0,S)).A(k),($==1607?!N.B()&&(k.S()>L||k.da()>L):!N.B()&&($!=1736||k.S()>L))&&(N.Pc(f),N.A(k),o.A(g),g.X(L,L),g.isIntersecting(k)&&$==1736?o=n.W(o,N,p,null):o.add(N,!1)),E.move(u,0),f.shift(-u,0);return o},a.cv=function(n,o,u,p){for(var f=u+p,g=0;g<o;g++){var b=n[g].x;u<=b&&b<f||!(b<u||b>f||b==f)||(b+=Math.ceil((u-b)/p)*p,b=h.P.Tk(b,u,f),n[g].x=b)}},a.Hn=function(n,o,u,p,f,g){if(!o.Xc())throw h.i.ga("fold_into_360_degree_range");if(n.B())return n;if(o.Tb()==2){u=o.rv();var b=o.qv()-u}else{var S=o.bf();b=360*S,u-=180*S}return a.Jp(n,u,b,o,p,f,!0,g)},a.lF=function(n,o,u,p){if(u.Tb()==2)p=u.rv(),u=u.qv()-p;else{var f=u.bf();u=360*f,p-=180*f}a.cv(n,o,p,u)},a.nj=function(n,o){var u=o.Le();if(n.K()==33){var p=n.kh();return u.G<=p&&p<=u.H?n:n.Ja()}p=new h.l,n.A(p);var f=new h.l;return f.L(u),f.v=p.v,f.C=p.C,f.X(.01*f.da(),0),u=h.ua.py(o,p),f.contains(p)?n:h.ti.clip(n,f,u,0,null)},a.kr=function(n,o,u){return n>o.C&&n-o.C<u?o.C:n<o.v&&o.v-n<u?o.v:n},a.BX=function(n,o,u,p){p.x=a.kr(n.x,o,u),p.y=n.y},a.AX=function(n,o,u,p){for(var f=0;f<o;f++)n[f].y<u.G||n[f].y>u.H?n[f].Sc():n[f].x=a.kr(n[f].x,u,p)},a.Lt=function(n,o,u,p){if(!n.B()){var f=n.K();if(!p||f!=1736)if(h.ba.zj(f)){p=n.vb(0),f=0;for(var g=n.I();f<g;f++){var b=p.read(2*f),S=a.kr(b,o,u);S!=b&&p.write(2*f,S)}n.Qc(1993)}else if(f==197)p=new h.l,n.A(p),p.v=a.kr(p.v,o,u),p.C=a.kr(p.C,o,u),n.Zo(p);else{if(f!=33)throw h.i.ga("internal error");n.YB(a.kr(n.Ng(),o,u))}}},a.pS=function(n,o,u,p){var f=new h.hd,g=f.Ib(n);return n=h.ua.Ju(o,n),a.ms(f,g,o,n,u,!0,p),f.Ke(g)},a.ms=function(n,o,u,p,f,g,b){if(!u.Xc())throw h.i.O("invalid call");var S=u.Le(),$=u.tc(),E=$.gh().getDatum().getSpheroid();$=$.Id().ci;var C=E.getFlattening();E=E.getAxis(),C*=2-C;var k=new h.Oc;S.en(k);var L=null,N=[[0,0],[0,0]];if(u.Tb()==2?(L=u.gh(),g?(N[0][0]=a.an(b,k),N[0][1]=S.Lp(),h.gj.projToGeog(L,1,N),S=N[0][0]*$):(N[0][0]=S.ik(),N[0][1]=b,h.gj.projToGeog(L,1,N),S=N[0][1]*$)):S=b*$,!g&&S!=0&&f!=c.GreatElliptic)throw h.i.ga("invalid argument");var U=new h.ha,H=[0],j=new h.h,K=new h.h,se=new h.h,ne=[null,null],pe=new h.h,ce=new h.h,_e=new h.h,Oe=new h.h;for(o=n.Ob(o);o!=-1;o=n.Sb(o)){var Ce=n.Ya(o);n.D(Ce,pe);for(var st=!1,qe=Ce=n.V(Ce);qe!=-1;qe=n.V(qe)){if(qe==Ce){if(st)break;st=!0}if(n.D(qe,ce),g&&(p<b-pe.x&&ce.x-b>p||p<b-ce.x&&pe.x-b>p)||!g&&(b!=0||p<-pe.y&&ce.y>p||p<-ce.y&&pe.y>p))do if(!(Math.abs(pe.x-ce.x)>=.5*k.S())){if(u.Tb()==2?(N[0][0]=a.an(pe.x,k),N[0][1]=pe.y,N[1][0]=a.an(ce.x,k),N[1][1]=ce.y,h.gj.projToGeogCenter(L,2,N,0),_e.x=N[0][0]*$,_e.y=N[0][1]*$,Oe.y=N[1][1]*$):(_e.x=pe.x*$,_e.y=pe.y*$,Oe.y=ce.y*$),Oe.x=2*(ce.x-pe.x)*Math.PI/k.S()+_e.x,g){if(K.x=S,K.y=a.Iz(E,C,_e,Oe,S,f),isNaN(K.y))break;ne[0]=K;var Et=1}else if(f==c.GreatElliptic){var xt=[0,0];if((Et=h.Nx.Jz(C,_e,Oe,S,xt))==0)break;K.x=xt[0],K.y=S,ne[0]=K,Et==2&&(se.x=xt[1],se.y=S,ne[1]=se)}else{if(K.x=a.Gz(E,C,_e,Oe,f),isNaN(K.x))break;K.y=0,ne[0]=K,Et=1}var et=-1;for(xt=0;xt<Et;xt++){h.kb.xd(E,C,_e.x,_e.y,Oe.x,Oe.y,U,null,null,f);var xi=U.u;h.kb.xd(E,C,_e.x,_e.y,ne[xt].x,ne[xt].y,U,null,null,f);var nr=U.u;if(u.Tb()==2?(N[0][0]=ne[xt].x/$,N[0][1]=ne[xt].y/$,h.gj.geogToProj(L,1,N),g?(j.y=N[0][1],j.x=b):(j.x=a.qs(N[0][0],pe.x,ce.x,k),j.y=b)):g?(j.x=b,j.y=ne[xt].y/$):(j.x=a.qs(ne[xt].x/$,pe.x,ce.x,k),j.y=b),H[0]=0<xi?h.P.Tk(nr/xi,0,1):.5,H[0]==0||H[0]==1)break;et>H[0]||(et=n.Na(qe),n.Wl(et,H,1),n.Db(n.V(et),j.x,j.y),et=H[0])}}while(0);pe.N(ce)}}},a.an=function(n,o){var u=o.wa-o.pa;return o.Kt(n-Math.floor((n-o.pa)/u)*u)},a.qs=function(n,o,u,p){var f=new h.Oc;for(f.L(o,u),u=p.S(),n=Math.floor((n-o)/u)*u+n,f=f.tf();Math.abs(n-f)>Math.abs(n+u-f);)n+=u;return n},a.Un=function(n,o,u){return n=h.sr.Ep(n),o=h.sr.mx(n,h.sr.Ep(o)),(u=h.sr.mx(n,h.sr.Ep(u)))==0||0<o&&0<u&&u<=o||0>o&&0>u&&u>=o},a.Iz=function(n,o,u,p,f,g){if(g==c.GreatElliptic)return h.Nx.NS(o,u,p,f);if(Math.abs(u.x-p.x)>=Math.PI||!a.Un(u.x,p.x,f))return NaN;if(u.x>p.x)var b=p;else b=u,u=p;p=new h.ha;var S=new h.ha,$=new h.ha;h.kb.xd(n,o,b.x,b.y,u.x,u.y,S,p,null,g);var E=S.u,C=0,k=1,L=new h.h;for(L.N(b);E*(k-C)>1e-12*n;){var N=.5*(C+k);if(h.kb.qj(n,o,b.x,b.y,E*N,p.u,S,$,g),L.x=S.u,L.y=$.u,L.x==f)break;if(a.Un(b.x,L.x,f))k=N;else{if(!a.Un(u.x,L.x,f))return NaN;C=N}}return L.y},a.Gz=function(n,o,u,p,f){if(f==c.GreatElliptic)return n=[0,0],h.Nx.Jz(o,u,p,0,n),n[0];if(u.y>p.y)var g=p;else g=u,u=p;if((p=new h.Oc).L(g.y,u.y),!p.contains(0)||Math.abs(g.x-u.x)>=Math.PI)return NaN;if(g.x==u.x)return g.x;var b=new h.ha,S=new h.ha,$=new h.ha;h.kb.xd(n,o,g.x,g.y,u.x,u.y,S,b,null,f);var E=S.u,C=0,k=1,L=new h.h;for(L.N(g);E*(k-C)>1e-12*n;){var N=.5*(C+k);if(h.kb.qj(n,o,g.x,g.y,E*N,b.u,S,$,f),L.x=S.u,L.y=$.u,p.L(g.y,L.y),L.y==0)break;if(p.contains(0))k=N;else{if(p.L(u.y,L.y),!p.contains(0))return NaN;C=N}}return L.x},a.RI=function(n,o,u,p){if(!n.ef.Xc())return!1;var f=new h.ee(o.description);if(f.Gd(o,0,-1),p=h.Gx.local().W(f,n,p),f=o.I(),u.Pa(),f!=p.I())return!1;var g=new h.l;o.A(g);var b=new h.l;if(p.A(b),g=g.S(),b=b.S(),g!=0&&b!=0){if(b/=g,n=n.$f.ih().S()/n.ef.ih().S(),1e-10<Math.abs(b/n-1))return!1}else if(g!=0||b!=0)return!1;for(u.add(o,!1),o=new h.h,n=0;n<f;n++)p.D(n,o),u.Db(n,o);return!0},a.lN=function(n,o){return(n%=360*o)>=180*o&&(n-=360*o),n},a.OI=function(n,o,u,p){if(u==O.Clip){var f=o.ol();f.K()==197?(u=new h.l,f.A(u),f=h.ua.py(o,u),n=h.ti.clip(n,u,f,5e4*o.rm(),p)):h.fj.local().W(1,f,n,o,p)||(n=h.Zj.local().W(n,f,o,p))==f&&(n=h.Xk.kg(n))}else o.Xc()&&(p=new h.l,n.yc(p),o.Le().contains(p)||(a.Lt(n,o.Le(),o.Yd(0),!0),u==O.PannableFold&&(n=a.nj(n,o)),n=a.Hn(n,o,0,!0,1e5*o.rm(),null)));return n},a.SD=function(n,o,u){var p=o.Yr();if(p==null)return n;var f=(o=o.tc()).Le().S(),g=new h.l;n.yc(g);var b=new h.Oc;g.en(b),g=p.Ha(),p=null;for(var S=new h.Ed;g.ab();)for(;g.Ia();){var $=g.ia(),E=$.Vg(0,0),C=new h.Oc;for(C.L(E.pa,E.wa),E=0;C.wa>b.pa;)C.move(-f),--E;for(;C.pa<=b.wa;){if(C.isIntersecting(b)){p==null&&(p=new h.Ua);var k=h.zb.YO($.bc(),$.xc());E!=0&&(S.ig(E*f,0),k.Pc(S)),p.pc(k,!0)}C.move(f),++E}}return p!=null?(o=h.ua.bO(o,p),o=h.ua.Gr(o),h.bu.gP(n,p,o,u)):n},a.$N=function(n,o,u,p,f){return n>=u&&o<=p?0:a.oE(.5*(o+n),u,p,f)},a.oE=function(n,o,u,p){return h.mc.round((.5*(u+o)-n)/p)*p},a.QQ=function(n,o,u,p,f,g,b,S){var $=a.fv(p,f),E=$.S(),C=E/360,k=a.kE*C,L=n.vb(0),N=o.Xc(),U=N?E/o.Le().S():0;o=n.Ja();for(var H=0,j=u.ea();H<j;++H){var K=N,se=new h.Ua(u.description);se.addPath(u,H,!0);var ne=u.ec(H);b!=0&&(ne=a.KD(ne,se,$.H-S,$.H,b))&&(K=!1);var pe=-1;ne=se.I();var ce=!1;K&&(pe=n.Ca(H),ce=n.ec(H));var _e=se.vb(0),Oe=0,Ce=_e.read(0),st=0,qe=3*p.Yd(0),Et=!1,xt=new h.h;xt.Sc();var et=new h.h;et.Sc();for(var xi=!1,nr=1;nr<ne;++nr){var Ei=h.h.construct(_e.gg(2*nr),_e.gg(2*nr+1)),ei=Ei.x,ti=ei+Oe,zt=ti-Ce;if(Ei.x=ti,Math.abs(zt)>k){if(K){var ki=pe+nr-1,jt=pe;(!ce||nr+1<ne)&&(jt+=nr),ki=L.read(2*ki),jt=(L.read(2*jt)-ki)*U,Math.abs(zt-jt)>1*C&&(N=!1)}K||(ti=ei+(Oe-=h.mc.En(E,ti-Ce)),++st,xi=Oe!=0,Ei.x=ti)}else Et||h.ua.vG(xt,et,Ei,qe)&&(Et=!0);xi&&_e.write(2*nr,ti),Ce=ti,xt.N(et),et.N(Ei)}st!=0&&se.Qc(1993),K=se.Oa(0),ne=se.Oa(ne-1),h.h.ub(K,ne),se=a.rQ(se,p,isNaN(f)?0:f,g),o.add(se,!1)}return n=p.Yd(0),u=$.S()/180,a.Lt(o,$,.1*n,!1),h.ti.clip(o,$,n,u,g)},a.rQ=function(n,o,u,p){return a.Hn(n,o,u,!0,0,p)},a.JS=function(n,o,u,p){var f=n.K();if(f==1736)for(o=o!=null?o.Yd(0):0,f=0;f<p;f++)h.jd.Zd(n,u[f],o)!=1&&u[f].Sc();else{if(f!=197)throw h.i.O();for(f=0;f<p;f++)n.ZO(u[f])||u[f].Sc()}},a.bl=function(n,o,u,p){if(32>u)for(var f=new h.Ta,g=0;g<u;g++)f.Db(o[g]),n.bl(f,p).D(o[g]);else{var b=new h.ee;for(b.se(3),b.CD(o,u),f=b.vb(3),g=0;g<u;g++)f.write(g,g);for(g=n.bl(b,p),n=g.vb(0),f=g.vb(3),p=h.h.construct(NaN,NaN),b=0;b<u;b++)o[b]=p;for(u=g.I(),g=0;g<u;g++)p=f.read(g),n.uc(2*g,o[p])}},a.al=function(n,o,u,p){if(32>u)for(var f=new h.Ta,g=0;g<u;g++)f.Db(o[g]),n.al(f,p).D(o[g]);else{var b=new h.ee;for(b.se(3),b.CD(o,u),f=b.vb(3),g=0;g<u;g++)f.write(g,g);for(g=n.al(b,p),n=g.vb(0),f=g.vb(3),p=h.h.construct(NaN,NaN),b=0;b<u;b++)o[b]=p;for(u=g.I(),g=0;g<u;g++)p=f.read(g),n.uc(2*g,o[p])}},a.kE=210,a}()}(B||(B={})),function(h){var O;(O=h.PL||(h.PL={}))[O.rightSide=1]="rightSide";var w=function(){function c(a,n,o){this.Ds=new h.h,a===void 0?this.Ko=-1:(this.Ds.N(a),this.Ko=n,this.La=o,this.pw=0)}return c.prototype.RJ=function(a){this.pw=a?1|this.pw:-2&this.pw},c.prototype.B=function(){return 0>this.Ko},c.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},c.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Ko},c.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},c.prototype.Nz=function(){return(1&this.pw)!=0},c.prototype.by=function(a,n,o,u){this.Ds.x=a,this.Ds.y=n,this.Ko=o,this.La=u},c}();h.bm=w}(B||(B={})),function(h){var O=function(){function c(){}return c.prototype.Wo=function(a,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,a.yc(this.Gk),this.Gk.X(n,n),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(a.K()))?(this.OH=a.bc(),this.NH=a.xc(),this.ra=n):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},c.prototype.Zi=function(a,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(a),this.Gk.X(n,n),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},c.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var a=null,n=null,o=null,u=null;this.xs&&(a=new h.h,n=new h.h,o=new h.l);for(var p=!1;!p;){for(;this.vk!=-1;){var f=this.Gb.Xy(this.Gb.hv(this.vk));if(f.isIntersecting(this.Gk)){if(!this.xs){p=!0;break}if(a.N(this.OH),n.N(this.NH),o.L(f),o.X(this.ra,this.ra),0<o.uy(a,n)){p=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){f=this.vh.Gc();var g=this.Ki[this.Ki.length-1];for(u==null&&((u=[])[0]=new h.l,u[1]=new h.l,u[2]=new h.l,u[3]=new h.l),w.zJ(g,u),this.vh.Jf(),--this.Ki.length,g=0;4>g;g++){var b=this.Gb.Np(f,g);if(b!=-1&&0<this.Gb.RR(b)&&u[g].isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),n.N(this.NH),o.L(u[g]),o.X(this.ra,this.ra),0<o.uy(a,n)){var S=new h.l;S.L(u[g]),this.vh.add(b),this.Ki.push(S)}}else(S=new h.l).L(u[g]),this.vh.add(b),this.Ki.push(S)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},c.XO=function(a,n,o){var u=new c;return u.Gb=a,u.Gk=new h.l,u.vh=new h.ja(0),u.Ki=[],u.Wo(n,o),u},c.WO=function(a,n,o){var u=new c;return u.Gb=a,u.Gk=new h.l,u.vh=new h.ja(0),u.Ki=[],u.Zi(n,o),u},c.VO=function(a){var n=new c;return n.Gb=a,n.Gk=new h.l,n.vh=new h.ja(0),n.Ki=[],n},c}();h.CY=O;var w=function(){function c(a,n){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Pk(a,n)}return c.prototype.reset=function(a,n){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(a,n)},c.prototype.xj=function(a,n){return this.Bv(a,n,0,this.Da,this.kf,!1,-1)},c.prototype.Ez=function(a,n,o){o=o==-1?this.kf:this.RF(o);var u=this.da(o),p=this.jR(o);return this.Bv(a,n,u,p,o,!1,-1)},c.prototype.ka=function(a){return this.eR(a)},c.prototype.BF=function(a){return this.Xy(this.hv(a))},c.prototype.da=function(a){return this.lv(a)},c.prototype.jR=function(a){var n=new h.l;n.L(this.Da);var o=this.lv(a);a=this.LF(a);for(var u=0;u<2*o;u+=2){var p=h.P.truncate(3&a>>u);p==0?(n.v=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):p==1?(n.C=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):(p==2?n.C=.5*(n.v+n.C):n.v=.5*(n.v+n.C),n.H=.5*(n.G+n.H))}return n},c.prototype.RR=function(a){return this.vz(a)},c.prototype.qR=function(a,n){return O.XO(this,a,n)},c.prototype.HF=function(a,n){return O.WO(this,a,n)},c.prototype.getIterator=function(){return O.VO(this)},c.prototype.Pk=function(a,n){if(0>n||32<2*n)throw h.i.O("invalid height");this.wT=n,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},c.prototype.Bv=function(a,n,o,u,p,f,g){if(!u.contains(n))return o==0?-1:this.Bv(a,n,0,this.Da,this.kf,f,g);if(!f)for(var b=p;b!=-1;b=this.DR(b))this.jx(b,this.vz(b)+1);(b=new h.l).L(u),u=p;var S=[];for(S[0]=new h.l,S[1]=new h.l,S[2]=new h.l,S[3]=new h.l;o<this.wT&&this.dO(u);o++){c.zJ(b,S);for(var $=!1,E=0;4>E;E++)if(S[E].contains(n)){$=!0;var C=this.Np(u,E);C==-1&&(C=this.mP(u,E)),this.jx(C,this.vz(C)+1),u=C,b.L(S[E]);break}if(!$)break}return this.nS(a,n,o,b,u,f,p,g)},c.prototype.nS=function(a,n,o,u,p,f,g,b){var S=this.IF(p);if(f){if(p==g)return b;this.NP(b),f=b}else f=this.oP(),this.IB(f,a),this.FW(this.hv(f),n);return this.hX(f,p),S!=-1?(this.hx(f,S),this.ex(S,f)):this.BJ(p,f),this.NB(p,f),this.dx(p,this.nv(p)+1),this.cO(p)&&this.HQ(o,u,p),f},c.prototype.NP=function(a){var n=this.RF(a),o=this.IF(n),u=this.JR(a),p=this.pv(a);this.Wr(n)==a?(p!=-1?this.hx(p,-1):this.NB(n,-1),this.BJ(n,p)):o==a?(this.ex(u,-1),this.NB(n,u)):(this.hx(p,u),this.ex(u,p)),this.hx(a,-1),this.ex(a,-1),this.dx(n,this.nv(n)-1)},c.zJ=function(a,n){var o=.5*(a.v+a.C),u=.5*(a.G+a.H);n[0].L(o,u,a.C,a.H),n[1].L(a.v,u,o,a.H),n[2].L(a.v,a.G,o,u),n[3].L(o,a.G,a.C,u)},c.prototype.cO=function(a){return this.nv(a)==8&&!this.bG(a)},c.prototype.HQ=function(a,n,o){var u=this.Wr(o);do{var p=this.hv(u),f=this.ai.U(u,0);p=this.Xy(p),this.Bv(f,p,a,n,o,!0,u),u=f=this.pv(u)}while(u!=-1)},c.prototype.dO=function(a){return 8<=this.nv(a)||this.bG(a)},c.prototype.bG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},c.prototype.mP=function(a,n){var o=this.jf.De();return this.JW(a,n,o),this.jx(o,0),this.dx(o,0),this.Rk(o,a),this.FJ(o,this.lv(a)+1),this.IJ(o,n<<2*this.lv(a)|this.LF(a)),o},c.prototype.oP=function(){var a=this.ai.De();if(0<this.iw.size){var n=this.iw.Gc();this.iw.Jf()}else n=this.ys.length,this.ys.push(new h.l);return this.GW(a,n),a},c.prototype.Np=function(a,n){return this.jf.U(a,n)},c.prototype.JW=function(a,n,o){this.jf.T(a,n,o)},c.prototype.Wr=function(a){return this.jf.U(a,4)},c.prototype.BJ=function(a,n){this.jf.T(a,4,n)},c.prototype.IF=function(a){return this.jf.U(a,5)},c.prototype.NB=function(a,n){this.jf.T(a,5,n)},c.prototype.LF=function(a){return this.jf.U(a,6)},c.prototype.IJ=function(a,n){this.jf.T(a,6,n)},c.prototype.nv=function(a){return this.jf.U(a,7)},c.prototype.vz=function(a){return this.jf.U(a,8)},c.prototype.dx=function(a,n){this.jf.T(a,7,n)},c.prototype.jx=function(a,n){this.jf.T(a,8,n)},c.prototype.DR=function(a){return this.jf.U(a,9)},c.prototype.Rk=function(a,n){this.jf.T(a,9,n)},c.prototype.lv=function(a){return this.jf.U(a,10)},c.prototype.FJ=function(a,n){this.jf.T(a,10,n)},c.prototype.eR=function(a){return this.ai.U(a,0)},c.prototype.IB=function(a,n){this.ai.T(a,0,n)},c.prototype.JR=function(a){return this.ai.U(a,1)},c.prototype.pv=function(a){return this.ai.U(a,2)},c.prototype.hx=function(a,n){this.ai.T(a,1,n)},c.prototype.ex=function(a,n){this.ai.T(a,2,n)},c.prototype.RF=function(a){return this.ai.U(a,3)},c.prototype.hX=function(a,n){this.ai.T(a,3,n)},c.prototype.hv=function(a){return this.ai.U(a,4)},c.prototype.GW=function(a,n){this.ai.T(a,4,n)},c.prototype.Xy=function(a){return this.ys[a]},c.prototype.FW=function(a,n){this.ys[a].L(n)},c}();h.fu=w}(B||(B={})),function(h){var O;(O=h.WK||(h.WK={}))[O.Outside=0]="Outside",O[O.Inside=1]="Inside",O[O.Border=2]="Border";var w=function(){function a(n,o){this.KT=o,this.Xh=n}return a.prototype.ax=function(n,o){this.dH!=o&&n.flush(),this.dH=o},a.prototype.bF=function(n,o){for(var u=0;u<o;)for(var p=n[u++],f=n[u++],g=n[u++]*this.KT;p<f;p++)this.Xh[g+(p>>4)]|=this.dH<<2*(15&p)},a}();h.DY=w;var c=function(){function a(n,o,u){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(n,o,u)}return a.create=function(n,o,u){if(!a.uE(n))throw h.i.O();return a.rP(n,o,u)},a.kW=function(n){switch(n){case 0:n=1024;break;case 1:n=16384;break;case 2:n=262144;break;default:throw h.i.ga("Internal Error")}return n},a.uE=function(n){return!(n.B()||n.K()!=1607&&n.K()!=1736)},a.prototype.mQ=function(n,o){o=o.Ha();for(var u=new h.h,p=new h.h;o.ab();)for(;o.Ia();){var f=o.ia();if(f.K()!=322)throw h.i.ga("Internal Error");n.Gh(f.bc(),u),n.Gh(f.xc(),p),this.Ti.fy(u.x,u.y,p.x,p.y)}this.Ti.dJ(h.Ox.Bx)},a.prototype.nQ=function(){throw h.i.ga("Internal Error")},a.prototype.My=function(n,o){for(var u=1;4>u;u++)n.fy(o[u-1].x,o[u-1].y,o[u].x,o[u].y);n.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.dJ(h.Ox.Bx)},a.prototype.mK=function(n,o,u){for(var p=[null,null,null,null],f=0;f<p.length;f++)p[f]=new h.h;o=o.Ha(),u=this.Lk.$X(u)+1.5,f=new h.h;for(var g=new h.h,b=new h.h,S=new h.h,$=new h.h,E=new h.l,C=new h.h;o.ab();){var k=!1,L=!0;for(C.na(0,0);o.Ia();){var N=o.ia();if(S.x=N.ta,S.y=N.oa,$.x=N.qa,$.y=N.ma,E.Pa(),E.$b(S.x,S.y),E.Nk($.x,$.y),this.xl.CG(E)){this.Lk.Gh($,$),L?(this.Lk.Gh(S,S),C.N(S),L=!1):S.N(C),f.vc($,S);var U=.5>(N=f.length());N==0?f.na(1,0):(U||C.N($),f.scale(u/N),g.na(-f.y,f.x),b.na(f.y,-f.x),S.sub(f),$.add(f),p[0].add(S,g),p[1].add(S,b),p[2].add($,b),p[3].add($,g),U?k=!0:this.My(n,p))}else k&&(this.My(n,p),k=!1),L=!0}k&&this.My(n,p)}},a.prototype.nC=function(n){return h.P.truncate(n*this.lH+this.WH)},a.prototype.oC=function(n){return h.P.truncate(n*this.Gs+this.YH)},a.rP=function(n,o,u){return new a(n,o,u)},a.prototype.Az=function(n,o,u){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(u)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Kk=o,u=0;for(var p=this.Hf,f=this.Wm;8<=p;)u+=p*f,p=h.P.truncate(p/2),f=h.P.truncate((2*p+31)/32);this.Xh=h.P.mg(u,0),this.Ti=new h.Ox,u=new w(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,u),n.A(this.xl),this.xl.X(o,o),p=new h.l;var g=o*(f=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=f.da(),p.L(this.xl.tf(),Math.max(g,this.xl.S()),Math.max(o,this.xl.da())),this.NA=this.Kk,this.Lk=new h.Ed,this.Lk.kS(p,f),new h.Ed,n.K()){case 550:u.ax(this.Ti,2),this.nQ();break;case 1607:u.ax(this.Ti,2),this.mK(this.Ti,n,this.NA);break;case 1736:u.ax(this.Ti,1),this.mQ(this.Lk,n),u.ax(this.Ti,2),this.mK(this.Ti,n,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},a.prototype.SN=function(){this.Ti.flush();for(var n=0,o=this.Hf*this.Wm,u=this.Hf,p=h.P.truncate(this.Hf/2),f=this.Wm,g=h.P.truncate((2*p+31)/32);8<u;){for(u=0;u<p;u++)for(var b=2*u,S=2*u+1,$=0;$<p;$++){var E=2*$,C=2*$+1,k=E>>4;E=2*(15&E);var L=C>>4;C=2*(15&C);var N=this.Xh[n+f*b+k]>>E&3;N|=this.Xh[n+f*b+L]>>C&3,N|=this.Xh[n+f*S+k]>>E&3,N|=this.Xh[n+f*S+L]>>C&3,this.Xh[o+g*u+($>>4)]|=N<<2*(15&$)}u=p,f=g,n=o,p=h.P.truncate(u/2),g=h.P.truncate((2*p+31)/32),o=n+f*u}},a.prototype.Uo=function(n,o){return this.xl.contains(n,o)?(n=this.nC(n),o=this.oC(o),0>n||n>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(n>>4)]>>2*(15&n)&3)==0?0:o==1?1:2):0},a.prototype.To=function(n){if(!n.Fa(this.xl))return 0;var o=this.nC(n.v),u=this.nC(n.C),p=this.oC(n.G);if(n=this.oC(n.H),0>o&&(o=0),0>p&&(p=0),u>=this.Hf&&(u=this.Hf-1),n>=this.Hf&&(n=this.Hf-1),o>u||p>n)return 0;for(var f=Math.max(u-o,1)*Math.max(n-p,1),g=0,b=this.Wm,S=this.Hf,$=0;;){if(32>f||16>S){for(f=p;f<=n;f++)for(var E=o;E<=u;E++)if(1<($=this.Xh[g+b*f+(E>>4)]>>2*(15&E)&3))return 2;if($==0)return 0;if($==1)return 1}g+=b*S,S=h.P.truncate(S/2),b=h.P.truncate((2*S+31)/32),o=h.P.truncate(o/2),p=h.P.truncate(p/2),u=h.P.truncate(u/2),n=h.P.truncate(n/2),f=Math.max(u-o,1)*Math.max(n-p,1)}},a.prototype.MR=function(){return this.Hf*this.Wm},a}();h.Mx=c}(B||(B={})),function(h){var O;(O=h.QL||(h.QL={}))[O.contains=1]="contains",O[O.within=2]="within",O[O.equals=3]="equals",O[O.disjoint=4]="disjoint",O[O.touches=8]="touches",O[O.crosses=16]="crosses",O[O.overlaps=32]="overlaps",O[O.unknown=0]="unknown",O[O.intersects=1073741824]="intersects";var w=function(){function a(){}return a.construct=function(n,o,u,p,f,g,b,S){var $=new a;return $.rw=n,$.Om=o,$.Mj=u,$.Ui=p,$.wH=f,$.OY=g,$.PY=b,$.QY=S,$},a}();h.Xt=function(){function a(){}return a.xD=function(n,o,u){if(a.ry(n)){var p=h.ua.mj(o,n,!1);o=!1,h.Wk.xE(n)&&(o=o||n.nu(p,u)),(p=n.K())!=1736&&p!=1607||!h.Wk.vE(n)||u==0||(o=o||n.hj(u)),p!=1736&&p!=1607||!h.Wk.wE(n)||u==0||o||n.cM()}},a.ry=function(n){return h.Wk.xE(n)||h.Wk.vE(n)||h.Wk.wE(n)},a}();var c=function(){function a(){this.th=[]}return a.uB=function(n,o,u,p,f){var g=n.K(),b=o.K();if(g==197){if(b==197)return a.oW(n,o,u,p);if(b==33)return p==2?p=1:p==1&&(p=2),a.cJ(o,n,u,p)}else if(g==33){if(b==197)return a.cJ(n,o,u,p);if(b==33)return a.qW(n,o,u,p)}if(n.B()||o.B())return p==4;var S=new h.l;n.A(S);var $=new h.l;o.A($);var E=new h.l;if(E.L(S),E.$b($),u=h.ua.Xd(u,E,!1),a.fk(S,$,u))return p==4;switch(S=!1,h.Xk.zd(g)&&((g=new h.Ua(n.description)).pc(n,!0),n=g,g=1607),h.Xk.zd(b)&&((b=new h.Ua(o.description)).pc(o,!0),o=b,b=1607),g!=197&&b!=197?(n.Eb()<o.Eb()||g==33&&b==550)&&(p==2?p=1:p==1&&(p=2)):g!=1736&&b!=197&&(p==2?p=1:p==1&&(p=2)),g){case 1736:switch(b){case 1736:S=a.st(n,o,u,p,f);break;case 1607:S=a.bn(n,o,u,p,f);break;case 33:S=a.rt(n,o,u,p);break;case 550:S=a.qt(n,o,u,p,f);break;case 197:S=a.BI(n,o,u,p,f)}break;case 1607:switch(b){case 1736:S=a.bn(o,n,u,p,f);break;case 1607:S=a.bB(n,o,u,p,f);break;case 33:S=a.ut(n,o,u,p,f);break;case 550:S=a.tt(n,o,u,p,f);break;case 197:S=a.HI(n,o,u,p)}break;case 33:switch(b){case 1736:S=a.rt(o,n,u,p);break;case 1607:S=a.ut(o,n,u,p,f);break;case 550:S=a.mt(o,n,u,p)}break;case 550:switch(b){case 1736:S=a.qt(o,n,u,p,f);break;case 1607:S=a.tt(o,n,u,p,f);break;case 550:S=a.UA(n,o,u,p,f);break;case 33:S=a.mt(n,o,u,p);break;case 197:S=a.cI(n,o,u,p)}break;case 197:switch(b){case 1736:S=a.BI(o,n,u,p,f);break;case 1607:S=a.HI(o,n,u,p);break;case 550:S=a.cI(o,n,u,p)}}return S},a.oW=function(n,o,u,p){if(n.B()||o.B())return p==4;var f=new h.l,g=new h.l,b=new h.l;switch(n.A(f),o.A(g),b.L(f),b.$b(g),n=h.ua.Xd(u,b,!1),p){case 4:return a.fk(f,g,n);case 2:return a.eF(g,f,n);case 1:return a.eF(f,g,n);case 3:return a.gk(f,g,n);case 8:return a.YP(f,g,n);case 32:return a.XP(f,g,n);case 16:return a.WP(f,g,n)}return!1},a.cJ=function(n,o,u,p){if(n.B()||o.B())return p==4;n=n.D();var f=new h.l,g=new h.l;switch(o.A(f),g.L(n),g.$b(f),o=h.ua.Xd(u,g,!1),p){case 4:return a.Tw(n,f,o);case 2:return a.$A(n,f,o);case 1:return a.MU(n,f,o);case 3:return a.qI(n,f,o);case 8:return a.ZA(n,f,o)}return!1},a.qW=function(n,o,u,p){if(n.B()||o.B())return p==4;n=n.D(),o=o.D();var f=new h.l;switch(f.L(n),f.$b(o),u=h.ua.Xd(u,f,!1),p){case 4:return a.NU(n,o,u);case 2:return a.pI(o,n,u);case 1:return a.pI(n,o,u);case 3:return a.rI(n,o,u)}return!1},a.st=function(n,o,u,p,f){switch(p){case 4:return a.fV(n,o,u);case 2:return a.Uw(o,n,u,f);case 1:return a.Uw(n,o,u,f);case 3:return a.iV(n,o,u);case 8:return a.qV(n,o,u);case 32:return a.lV(n,o,u,f)}return!1},a.bn=function(n,o,u,p,f){switch(p){case 4:return a.gV(n,o,u);case 1:return a.aB(n,o,u,f);case 8:return a.rV(n,o,u,f);case 16:return a.bV(n,o,u)}return!1},a.rt=function(n,o,u,p){switch(p){case 4:return a.eV(n,o,u);case 1:return a.ZU(n,o,u);case 8:return a.pV(n,o,u)}return!1},a.qt=function(n,o,u,p){switch(p){case 4:return a.dV(n,o,u);case 1:return a.YU(n,o,u);case 8:return a.oV(n,o,u);case 16:return a.aV(n,o,u)}return!1},a.BI=function(n,o,u,p,f){if(a.cV(n,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.sV(n,o,u);case 1:return a.XU(n,o,u);case 3:return a.hV(n,o,u);case 8:return a.nV(n,o,u,f);case 32:return a.kV(n,o,u,f);case 16:return a.$U(n,o,u,f)}return!1},a.bB=function(n,o,u,p){switch(p){case 4:return a.BV(n,o,u);case 2:return a.FI(o,n,u);case 1:return a.FI(n,o,u);case 3:return a.DV(n,o,u);case 8:return a.II(n,o,u);case 32:return a.HV(n,o,u);case 16:return a.GI(n,o,u)}return!1},a.ut=function(n,o,u,p){switch(p){case 4:return a.AV(n,o,u);case 1:return a.vV(n,o,u);case 8:return a.LV(n,o,u)}return!1},a.tt=function(n,o,u,p){switch(p){case 4:return a.zV(n,o,u);case 1:return a.uV(n,o,u);case 8:return a.KV(n,o,u);case 16:return a.xV(n,o,u)}return!1},a.HI=function(n,o,u,p){if(a.yV(n,o,u))return p==4;if(p==4)return!1;switch(p){case 2:return a.MV(n,o,u);case 1:return a.tV(n,o,u);case 3:return a.CV(n,o,u);case 8:return a.JV(n,o,u);case 32:return a.GV(n,o,u);case 16:return a.wV(n,o,u)}return!1},a.UA=function(n,o,u,p){switch(p){case 4:return a.bU(n,o,u);case 2:return a.$H(o,n,u);case 1:return a.$H(n,o,u);case 3:return a.dU(n,o,u);case 32:return a.jU(n,o,u)}return!1},a.mt=function(n,o,u,p){switch(p){case 4:return a.aI(n,o,u);case 2:return a.nU(n,o,u);case 1:return a.ZT(n,o,u);case 3:return a.Pw(n,o,u)}return!1},a.cI=function(n,o,u,p){switch(p){case 4:return a.aU(n,o,u);case 2:return a.mU(n,o,u);case 1:return a.YT(n,o,u);case 3:return a.cU(n,o,u);case 8:return a.lU(n,o,u);case 16:return a.$T(n,o,u)}return!1},a.iV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.gk(p,f,u)&&(p=a.rc(n,o,!1))!=4&&p!=1&&p!=2&&(!!a.ZH(n,o,u)||(p=n.Rb(),f=o.Rb(),!(Math.abs(p-f)>4*Math.max(n.I(),o.I())*u)&&a.Rz(n,o,u,!0)))},a.fV=function(n,o,u){var p=a.rc(n,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.zI(n,o,u)},a.qV=function(n,o,u){var p=a.rc(n,o,!1);return p!=4&&p!=1&&p!=2&&a.DI(n,o,u,null)},a.lV=function(n,o,u,p){var f=a.rc(n,o,!1);return f!=4&&f!=1&&f!=2&&a.AI(n,o,u,p)},a.Uw=function(n,o,u,p){var f=new h.l,g=new h.l;return n.A(f),o.A(g),!!a.Ac(f,g,u)&&(f=a.rc(n,o,!1))!=4&&f!=2&&(f==1||a.wI(n,o,u,p))},a.gV=function(n,o,u){var p=a.rc(n,o,!0);return p==4||p!=1&&p!=1073741824&&a.zI(n,o,u)},a.rV=function(n,o,u,p){var f=a.rc(n,o,!1);return f!=4&&f!=1&&a.EI(n,o,u,p)},a.bV=function(n,o,u){var p=a.rc(n,o,!1);return p!=4&&p!=1&&a.yI(n,o,u,null)},a.aB=function(n,o,u,p){var f=new h.l,g=new h.l;return n.A(f),o.A(g),!!a.Ac(f,g,u)&&(f=a.rc(n,o,!1))!=4&&(f==1||a.xI(n,o,u,p))},a.eV=function(n,o,u){return h.jd.FG(n,o,u)==0},a.pV=function(n,o,u){return o=o.D(),a.CI(n,o,u)},a.ZU=function(n,o,u){return o=o.D(),a.vI(n,o,u)},a.dV=function(n,o,u){var p=a.rc(n,o,!1);if(p==4)return!0;if(p==1)return!1;p=new h.l,n.A(p),p.X(u,u);for(var f=new h.h,g=0;g<o.I();g++)if(o.D(g,f),p.contains(f)){var b=h.jd.Zd(n,f,u);if(b==1||b==2)return!1}return!0},a.oV=function(n,o,u){var p=this.rc(n,o,!1);if(p==4||p==1)return!1;p=new h.l,n.A(p),p.X(u,u);for(var f=!1,g=n,b=!1,S=0;S<o.I();S++){var $=o.Oa(S);if(p.contains($)){if(($=h.jd.Zd(g,$,u))==2)f=!0;else if($==1)return!1}b||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?g=n:(g=new h.Ea,n.copyTo(g),g.hj(1)),b=!0)}return!!f},a.aV=function(n,o,u){var p=this.rc(n,o,!1);if(p==4||p==1)return!1;var f=new h.l;p=new h.l;var g=new h.l;n.A(f),o.A(g),p.L(f),p.X(u,u),g=f=!1;for(var b=n,S=!1,$=0;$<o.I();$++){var E=o.Oa($);if(p.contains(E)?(E=h.jd.Zd(b,E,u))==0?g=!0:E==1&&(f=!0):g=!0,f&&g)return!0;S||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(b=new h.Ea,n.copyTo(b),b.hj(1)),S=!0)}return!1},a.YU=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),!this.Ac(p,f,u)||(f=this.rc(n,o,!1))==4)return!1;if(f==1)return!0;f=!1;for(var g=n,b=!1,S=0;S<o.I();S++){var $=o.Oa(S);if(!p.contains($))return!1;if(($=h.jd.Zd(g,$,u))==1)f=!0;else if($==0)return!1;b||(!h.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?g=n:(g=new h.Ea,n.copyTo(g),g.hj(1)),b=!0)}return f},a.hV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.gk(p,f,u)&&((p=new h.Ea).bd(o,!1),a.Rz(n,p,u,!0))},a.cV=function(n,o,u){var p=a.rc(n,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var f=new h.l;if(p=new h.l,n.A(f),o.A(p),a.Ac(p,f,u)||(f=new h.h,p.fn(f),(o=h.jd.Zd(n,f,u))!=0)||(p.VI(f),(o=h.jd.Zd(n,f,u))!=0)||(p.gn(f),(o=h.jd.Zd(n,f,u))!=0)||(p.YI(f),(o=h.jd.Zd(n,f,u))!=0))return!1;o=n.vb(0),(f=new h.l).L(p),f.X(u,u);for(var g=0,b=n.I();g<b;g++){var S=o.read(2*g),$=o.read(2*g+1);if(f.contains(S,$))return!1}return!a.NG(n,p,u)},a.nV=function(n,o,u,p){var f=a.rc(n,o,!1);if(f==4||f==1||f==2)return!1;f=new h.l;var g=new h.l;return n.A(f),o.A(g),!a.Ac(g,f,u)&&(g.S()<=u&&g.da()<=u?(o=o.Kp(),a.CI(n,o,u)):g.S()<=u||g.da()<=u?(f=new h.Ua,g=new h.Ta,o.If(0,g),f.nf(g),o.If(2,g),f.lineTo(g),a.EI(n,f,u,p)):((f=new h.Ea).bd(o,!1),a.DI(n,f,u,p)))},a.kV=function(n,o,u,p){var f=a.rc(n,o,!1);if(f==4||f==1||f==2)return!1;f=new h.l;var g=new h.l;return n.A(f),o.A(g),!(a.Ac(g,f,u)||g.S()<=u||g.da()<=u)&&((f=new h.Ea).bd(o,!1),a.AI(n,f,u,p))},a.sV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),a.Ac(f,p,u)},a.XU=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.Ac(p,f,u)&&(p=a.rc(n,o,!1))!=4&&p!=2&&(p==1||(f.S()<=u&&f.da()<=u?(o=o.Kp(),a.vI(n,o,u)):f.S()<=u||f.da()<=u?(f=new h.Ua,p=new h.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.xI(n,f,u,null)):((f=new h.Ea).bd(o,!1),a.wI(n,f,u,null))))},a.$U=function(n,o,u,p){var f=new h.l,g=new h.l;return n.A(f),o.A(g),!(a.Ac(g,f,u)||g.da()>u&&g.S()>u||g.da()<=u&&g.S()<=u)&&(f=new h.Ua,g=new h.Ta,o.If(0,g),f.nf(g),o.If(2,g),f.lineTo(g),a.yI(n,f,u,p))},a.DV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.gk(p,f,u)||a.rc(n,o,!1)==4)&&(!!a.ZH(n,o,u)||a.Rz(n,o,u,!1))},a.BV=function(n,o,u){return this.rc(n,o,!1)==4||!!new h.am(n,o,u,!0).next()&&!this.OG(n,o,u)},a.II=function(n,o,u){if(a.rc(n,o,!1)==4)return!1;var p=new h.ce(0);if(a.Sz(n,o,u,p)!=0)return!1;for(var f=new h.ee,g=0;g<p.size;g+=2){var b=p.read(g),S=p.read(g+1);f.Du(b,S)}return n=n.ng(),o=o.ng(),n.Gd(o,0,o.I()),a.Ow(n,f,u)},a.GI=function(n,o,u){if(a.rc(n,o,!1)==4)return!1;var p=new h.ce(0);if(a.Sz(n,o,u,p)!=0)return!1;for(var f=new h.ee,g=0;g<p.size;g+=2){var b=p.read(g),S=p.read(g+1);f.Du(b,S)}return n=n.ng(),o=o.ng(),n.Gd(o,0,o.I()),!a.Ow(n,f,u)},a.HV=function(n,o,u){return a.rc(n,o,!1)!=4&&a.QG(n,o,u)},a.FI=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.Ac(p,f,u)||a.rc(n,o,!1)==4)&&a.Am(o,n,u,!1)},a.AV=function(n,o,u){return a.rc(n,o,!1)==4||(o=o.D(),!a.Tz(n,o,u))},a.LV=function(n,o,u){return a.rc(n,o,!1)!=4&&(o=o.D(),a.Uz(n,o,u))},a.vV=function(n,o,u){return a.rc(n,o,!1)!=4&&(o=o.D(),a.MG(n,o,u))},a.zV=function(n,o,u){return a.rc(n,o,!1)==4||!a.PG(n,o,u,!1)},a.KV=function(n,o,u){if(this.rc(n,o,!1)==4)return!1;var p=n.Ha(),f=new h.l,g=new h.l,b=new h.l;n.A(f),o.A(g),f.X(u,u),g.X(u,u),b.L(f),b.Fa(g),f=null;var S=n.Cb;if(S!=null){var $=S.Gb;f=S.Bo,$==null&&($=S=h.ua.lj(n,b))}else $=S=h.ua.lj(n,b);var E=$.getIterator(),C=null;f!=null&&(C=f.getIterator());var k=new h.h,L=new h.h,N=!1,U=u*u;for(f=new h.rn(o.I()),S=0;S<o.I();S++)f.write(S,0);for(S=0;S<o.I();S++)if(o.D(S,k),b.contains(k)){if(g.L(k.x,k.y,k.x,k.y),C!=null&&(C.Zi(g,u),C.next()==-1))continue;E.Zi(g,u);for(var H=E.next();H!=-1;H=E.next())if(p.Wb($.ka(H)),(H=p.ia()).ic(H.ge(k,!1),L),h.h.zc(k,L)<=U){f.write(S,1),N=!0;break}}if(!N)return!1;for(n=n.ng(),p=new h.ee,g=new h.h,S=0;S<o.I();S++)f.read(S)!=0&&(o.D(S,g),p.Du(g.x,g.y));return this.Ow(n,p,u)},a.xV=function(n,o,u){if(this.rc(n,o,!1)==4)return!1;var p=n.Ha(),f=new h.l,g=new h.l,b=new h.l;n.A(f),o.A(g),f.X(u,u),g.X(u,u),b.L(f),b.Fa(g),f=null;var S=n.Cb;if(S!=null){var $=S.Gb;f=S.Bo,$==null&&($=S=h.ua.lj(n,b))}else $=S=h.ua.lj(n,b);var E=$.getIterator(),C=null;f!=null&&(C=f.getIterator());var k=new h.h,L=new h.h,N=!1,U=!1,H=u*u;for(f=new h.rn(o.I()),S=0;S<o.I();S++)f.write(S,0);for(S=0;S<o.I();S++)if(o.D(S,k),b.contains(k)){if(g.L(k.x,k.y,k.x,k.y),C!=null&&(C.Zi(g,u),C.next()==-1)){U=!0;continue}E.Zi(g,u);for(var j=!1,K=E.next();K!=-1;K=E.next())if(p.Wb($.ka(K)),(K=p.ia()).ic(K.ge(k,!1),L),h.h.zc(k,L)<=H){f.write(S,1),j=N=!0;break}j||(U=!0)}else U=!0;if(!N||!U)return!1;for(n=n.ng(),p=new h.ee,g=new h.h,S=0;S<o.I();S++)f.read(S)!=0&&(o.D(S,g),p.Du(g.x,g.y));return!this.Ow(n,p,u)},a.uV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.Ac(p,f,u)||a.rc(n,o,!1)==4||!a.PG(n,o,u,!0))&&(n=n.ng(),!a.bI(n,o,u))},a.CV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(f.da()>u&&f.S()>u)&&a.gk(p,f,u)},a.yV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!a.Ac(f,p,u)&&!a.NG(n,f,u)},a.JV=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),f.da()<=u&&f.S()<=u)return f=o.Kp(),a.Uz(n,f,u);if(f.da()<=u||f.S()<=u)return f=new h.Ua,p=new h.Ta,o.If(0,p),f.nf(p),o.If(2,p),f.lineTo(p),a.II(n,f,u);n=n.Ha(),o=new h.l,p=new h.l,o.L(f),p.L(f),o.X(-u,-u),p.X(u,u),f=!1;for(var g=new h.l,b=new h.l;n.ab();)for(;n.Ia();){if(n.ia().A(g),b.L(o),b.Fa(g),!b.B()&&(b.da()>u||b.S()>u))return!1;b.L(p),b.Fa(g),b.B()||(f=!0)}return f},a.GV=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(a.Ac(p,f,u)||a.Ac(f,p,u)||a.Ac(f,p,u)||f.da()>u&&f.S()>u||f.da()<=u&&f.S()<=u)&&(p=new h.Ua,f=new h.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.QG(n,p,u))},a.MV=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),!a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return a.Ac(f,p,u);n=n.Ha(),(o=new h.l).L(f),o.X(-u,-u),f=!1,p=new h.l;for(var g=new h.l;n.ab();)for(;n.Ia();)n.ia().A(p),o.jm(p)?f=!0:(g.L(o),g.Fa(p),!g.B()&&(g.da()>u||g.S()>u)&&(f=!0));return f},a.tV=function(n,o,u){var p=new h.l,f=new h.l;return o.A(f),n.A(p),!(!a.Ac(p,f,u)||f.da()>u&&f.S()>u)&&(f.da()<=u&&f.S()<=u?(o=o.Kp(),a.MG(n,o,u)):(p=new h.Ua,f=new h.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.Am(p,n,u,!1)))},a.wV=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u)return p=new h.Ua,f=new h.Ta,o.If(0,f),p.nf(f),o.If(2,f),p.lineTo(f),a.GI(n,p,u);n=n.Ha(),o=new h.l,(p=new h.l).L(f),o.L(f),p.X(-u,-u),o.X(u,u);for(var g=f=!1,b=new h.l,S=new h.l;n.ab();)for(;n.Ia();)if(n.ia().A(b),g||o.contains(b)||(g=!0),f||(S.L(p),S.Fa(b),!S.B()&&(S.da()>u||S.S()>u)&&(f=!0)),f&&g)return!0;return!1},a.dU=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.gk(p,f,u)&&(!!a.eU(n,o,u)||a.TA(n,o,u,!1,!0,!1))},a.bU=function(n,o,u){return!a.bI(n,o,u)},a.jU=function(n,o,u){return a.TA(n,o,u,!1,!1,!0)},a.$H=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!!a.Ac(p,f,u)&&a.TA(o,n,u,!0,!1,!1)},a.Ow=function(n,o,u){u*=u;for(var p=new h.h,f=new h.h,g=0;g<o.I();g++){o.D(g,f);for(var b=!1,S=0;S<n.I();S++)if(n.D(S,p),h.h.zc(p,f)<=u){b=!0;break}if(!b)return!1}return!0},a.Pw=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),a.gk(p,f,u)},a.aI=function(n,o,u){return o=o.D(),a.lt(n,o,u)},a.nU=function(n,o,u){return a.Pw(n,o,u)},a.ZT=function(n,o,u){return!a.aI(n,o,u)},a.cU=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(f.da()>u||f.S()>u)&&a.gk(p,f,u)},a.aU=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),a.Ac(f,p,u))return!1;for((o=new h.l).L(f),o.X(u,u),u=new h.h,f=0;f<n.I();f++)if(n.D(f,u),o.contains(u))return!1;return!0},a.lU=function(n,o,u){var p=new h.l,f=new h.l,g=new h.l;if(o.A(p),p.da()<=u&&p.S()<=u)return!1;if(p.da()<=u||p.S()<=u){o=new h.h;var b=!1;f.L(p),g.L(p),f.X(u,u),p.da()>u?g.X(0,-u):g.X(-u,0);for(var S=0;S<n.I();S++)if(n.D(S,o),f.contains(o)){if(p.da()>u){if(o.y>g.G&&o.y<g.H)return!1}else if(o.x>g.v&&o.x<g.C)return!1;b=!0}return b}for(f.L(p),g.L(p),f.X(u,u),g.X(-u,-u),o=new h.h,b=!1,S=0;S<n.I();S++)if(n.D(S,o),f.contains(o)){if(g.jm(o))return!1;b=!0}return b},a.mU=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),!a.Ac(f,p,u))return!1;if(f.da()<=u&&f.S()<=u)return a.gk(p,f,u);if(f.da()<=u||f.S()<=u){o=!1,p=new h.l;var g=new h.l;p.L(f),g.L(f),f.da()>u?p.X(0,-u):p.X(-u,0),g.X(u,u);for(var b=new h.h,S=0;S<n.I();S++){if(n.D(S,b),!g.contains(b))return!1;f.da()>u?b.y>p.G&&b.y<p.H&&(o=!0):b.x>p.v&&b.x<p.C&&(o=!0)}return o}for(o=!1,p=new h.l,g=new h.l,p.L(f),g.L(f),p.X(-u,-u),g.X(u,u),b=new h.h,S=0;S<n.I();S++){if(n.D(S,b),!g.contains(b))return!1;p.jm(b)&&(o=!0)}return o},a.YT=function(n,o,u){var p=new h.l,f=new h.l;return n.A(p),o.A(f),!(!a.Ac(p,f,u)||f.da()>u||f.S()>u)&&(o=o.Kp(),!a.lt(n,o,u))},a.$T=function(n,o,u){var p=new h.l,f=new h.l;if(n.A(p),o.A(f),a.Ac(f,p,u)||f.da()<=u&&f.S()<=u)return!1;if(f.da()<=u||f.S()<=u){o=new h.l,p=new h.l,o.L(f),f.da()>u?o.X(0,-u):o.X(-u,0),p.L(f),p.X(u,u);for(var g=new h.h,b=!1,S=!1,$=0;$<n.I();$++)if(n.D($,g),b||(f.da()>u?g.y>o.G&&g.y<o.H&&(b=!0):g.x>o.v&&g.x<o.C&&(b=!0)),S||p.contains(g)||(S=!0),b&&S)return!0;return!1}for(o=new h.l,p=new h.l,o.L(f),o.X(-u,-u),p.L(f),p.X(u,u),g=new h.h,S=b=!1,$=0;$<n.I();$++)if(n.D($,g),!b&&o.jm(g)&&(b=!0),S||p.contains(g)||(S=!0),b&&S)return!0;return!1},a.rI=function(n,o,u){return h.h.zc(n,o)<=u*u},a.NU=function(n,o,u){return h.h.zc(n,o)>u*u},a.pI=function(n,o,u){return a.rI(n,o,u)},a.qI=function(n,o,u){var p=new h.l;return p.L(n),a.gk(p,o,u)},a.Tw=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),!p.contains(n)},a.ZA=function(n,o,u){if(o.da()<=u&&o.S()<=u)return!1;var p=new h.l,f=new h.l;if(p.L(o),p.X(u,u),!p.contains(n))return!1;if(o.da()<=u||o.S()<=u){if(f.L(o),o.da()>u?f.X(0,-u):f.X(-u,0),o.da()>u){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;return!0}return f.L(o),f.X(-u,-u),!f.jm(n)},a.$A=function(n,o,u){if(o.da()<=u&&o.S()<=u)return!0;if(o.da()<=u||o.S()<=u){var p=new h.l;p.L(o),o.da()>u?p.X(0,-u):p.X(-u,0);var f=!1;return o.da()>u?n.y>p.G&&n.y<p.H&&(f=!0):n.x>p.v&&n.x<p.C&&(f=!0),f}return(p=new h.l).L(o),p.X(-u,-u),p.jm(n)},a.MU=function(n,o,u){return a.qI(n,o,u)},a.gk=function(n,o,u){return a.Ac(n,o,u)&&a.Ac(o,n,u)},a.fk=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),!n.isIntersecting(p)},a.YP=function(n,o,u){if(n.da()<=u&&n.S()<=u){var p=n.tf();return a.ZA(p,o,u)}if(o.da()<=u&&o.S()<=u)return p=o.tf(),a.ZA(p,n,u);if(n.da()>u&&n.S()>u&&(o.da()<=u||o.S()<=u)?p=o:(p=n,n=o),p.da()<=u||p.S()<=u){if(n.da()<=u||n.S()<=u){o=new h.zb;var f=new h.zb,g=[0,0],b=[0,0],S=new h.h;return p.fn(S),o.Ec(S),p.gn(S),o.Rc(S),n.fn(S),f.Ec(S),n.gn(S),f.Rc(S),o.Fa(f,null,g,b,u),o.Fa(f,null,null,null,u)==1&&(g[0]==0||g[1]==1||b[0]==0||b[1]==1)}return o=new h.l,f=new h.l,o.L(n),o.X(-u,-u),f.L(o),f.Fa(p),!(!f.B()&&(f.da()>u||f.S()>u))}return n.X(u,u),(f=new h.l).L(p),f.Fa(n),!(f.B()||!f.B()&&f.da()>u&&f.S()>u)},a.XP=function(n,o,u){if(a.Ac(n,o,u)||a.Ac(o,n,u)||n.da()<=u&&n.S()<=u||o.da()<=u&&o.S()<=u)return!1;if(n.da()<=u||n.S()<=u){if(o.da()>u&&o.S()>u)return!1;var p=new h.zb,f=new h.zb,g=[0,0],b=[0,0],S=new h.h;return n.fn(S),p.Ec(S),n.gn(S),p.Rc(S),o.fn(S),f.Ec(S),o.gn(S),f.Rc(S),p.Fa(f,null,g,b,u),p.Fa(f,null,null,null,u)==2&&(0<g[0]||1>g[1])&&(0<b[0]||1>b[1])}return!(o.da()<=u||o.S()<=u)&&((p=new h.l).L(n),p.Fa(o),!(p.B()||p.da()<=u||p.S()<=u))},a.eF=function(n,o,u){if(!a.Ac(n,o,u))return!1;if(n.da()<=u&&n.S()<=u)return n=n.tf(),a.$A(n,o,u);if(o.da()<=u&&o.S()<=u)return o=o.tf(),a.$A(o,n,u);if(n.da()<=u||n.S()<=u)return a.Ac(n,o,u);if(o.da()<=u||o.S()<=u){var p=new h.l;return p.L(n),p.X(-u,-u),p.jm(o)?!0:((n=new h.l).L(p),n.Fa(o),!(n.B()||n.da()<=u&&n.S()<=u))}return a.Ac(n,o,u)},a.WP=function(n,o,u){if(a.Ac(n,o,u)||a.Ac(o,n,u)||n.da()<=u&&n.S()<=u||o.da()<=u&&o.S()<=u||o.da()>u&&o.S()>u&&n.da()>u&&n.S()>u)return!1;if(n.da()>u&&n.S()>u)var p=o;else p=n,n=o;if(n.da()>u&&n.S()>u){o=new h.l;var f=new h.l;return f.L(n),f.X(-u,-u),o.L(f),o.Fa(p),!(o.B()||o.da()<=u&&o.S()<=u)}o=new h.zb,f=new h.zb;var g=[0,0],b=[0,0],S=new h.h;return p.fn(S),o.Ec(S),p.gn(S),o.Rc(S),n.fn(S),f.Ec(S),n.gn(S),f.Rc(S),o.Fa(f,null,g,b,u),o.Fa(f,null,null,null,u)==1&&0<g[0]&&1>g[1]&&0<b[0]&&1>b[1]},a.zI=function(n,o,u){var p=new h.l,f=new h.l,g=new h.am(n,o,u,!0);if(!g.next())return!0;if(this.OG(n,o,u))return!1;var b=n,S=null;o.K()==1736&&(S=o);var $=!1,E=!1;do{var C=g.pl(),k=g.jl();if(k=o.Oa(o.Ca(k)),p.L(g.oz()),p.X(u,u),p.contains(k)&&(k=h.jd.Zd(b,k,0))!=0||o.K()==1736&&(C=n.Oa(n.Ca(C)),f.L(g.Wy()),f.X(u,u),f.contains(C)&&(k=h.jd.Zd(S,C,0))!=0))return!1;$||(!h.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(b=new h.Ea,n.copyTo(b),b.hj(1)),$=!0),o.K()!=1736||E||(E=o,!h.Fg.Ol(E,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?S=o:(S=new h.Ea,E.copyTo(S),S.hj(1)),E=!0)}while(g.next());return!0},a.Ac=function(n,o,u){var p=new h.l;return p.L(n),p.X(u,u),p.contains(o)},a.ns=function(n,o,u){var p=new h.l;return p.L(o),p.X(u,u),o=new h.h,n.fn(o),!p.contains(o)||(n.VI(o),!p.contains(o)||(n.YI(o),!p.contains(o)||(n.gn(o),!p.contains(o))))},a.ZH=function(n,o,u){if(n.ea()!=o.ea()||n.I()!=o.I())return!1;var p=new h.h,f=new h.h,g=!0;u*=u;for(var b=0;b<n.ea();b++){if(n.Wc(b)!=o.Wc(b)){g=!1;break}for(var S=n.Ca(b);S<o.Wc(b);S++)if(n.D(S,p),o.D(S,f),h.h.zc(p,f)>u){g=!1;break}if(!g)break}return!!g},a.eU=function(n,o,u){if(n.I()!=o.I())return!1;var p=new h.h,f=new h.h,g=!0;u*=u;for(var b=0;b<n.I();b++)if(n.D(b,p),o.D(b,f),h.h.zc(p,f)>u){g=!1;break}return!!g},a.TA=function(n,o,u,p,f,g){var b=!1;if(n.I()>o.I()){p&&(p=!1,b=!0);var S=o}else S=n,n=o;if(o=null,f||g||b){o=new h.rn(n.I());for(var $=0;$<n.I();$++)o.write($,0)}$=new h.l;var E=new h.l,C=new h.l;S.A($),n.A(E),$.X(u,u),E.X(u,u),C.L($),C.Fa(E),E=new h.h;for(var k=new h.h,L=!0,N=h.ua.jE(n,C),U=N.getIterator(),H=u*u,j=0;j<S.I();j++)if(S.D(j,E),C.contains(E)){var K=!1;$.L(E.x,E.y,E.x,E.y),U.Zi($,u);for(var se=U.next();se!=-1&&(se=N.ka(se),n.D(se,k),!(h.h.zc(E,k)<=H&&((f||g||b)&&o.write(se,1),K=!0,p)));se=U.next());if(!K&&(L=!1,f||p))return!1}else{if(f||p)return!1;L=!1}if(g&&L)return!1;if(p)return!0;for($=0;$<n.I();$++)if(o.read($)==1){if(g)return!0}else if(f||b)return!1;return!g},a.bI=function(n,o,u){if(n.I()>o.I())var p=o;else p=n,n=o;o=new h.l;var f=new h.l,g=new h.l;p.A(o),n.A(f),o.X(u,u),f.X(u,u),g.L(o),g.Fa(f),f=new h.h;for(var b=new h.h,S=u*u,$=h.ua.jE(n,g),E=$.getIterator(),C=0;C<p.I();C++)if(p.D(C,f),g.contains(f)){o.L(f.x,f.y,f.x,f.y),E.Zi(o,u);for(var k=E.next();k!=-1;k=E.next())if(n.D($.ka(k),b),h.h.zc(f,b)<=S)return!0}return!1},a.Rz=function(n,o,u,p){return a.Am(n,o,u,p)&&a.Am(o,n,u,p)},a.Am=function(n,o,u,p){function f(st,qe){return k.LE(st,qe)}var g,b=!0,S=[0,0],$=[0,0],E=0,C=new h.ja(0),k=new a,L=new h.l,N=new h.l,U=new h.l;n.A(L),o.A(N),L.X(u,u),N.X(u,u),U.L(L),U.Fa(N),n=n.Ha(),N=o.Ha();var H=null,j=H=null,K=o.Cb;for(K!=null?(H=K.Gb,j=K.Bo,H==null&&(H=h.ua.lj(o,U))):H=h.ua.lj(o,U),o=H.getIterator(),K=null,j!=null&&(K=j.getIterator());n.ab();)for(;n.Ia();){var se=!1,ne=n.ia();if(ne.A(L),!L.isIntersecting(U)||K!=null&&(K.Zi(L,u),K.next()==-1))return!1;for(j=ne.Rb(),o.Wo(ne,u),g=o.next();g!=-1;g=o.next()){N.Wb(H.ka(g)),g=N.ia();var pe=ne.Fa(g,null,S,$,u);if(pe==2&&(!p||$[0]<=$[1])){pe=S[0];var ce=S[1],_e=$[0],Oe=$[1];if(pe*j<=u&&(1-ce)*j<=u){se=!0,E=0,C.resize(0),k.th.length=0;var Ce=n.xb();for(_e=!0;_e;){if(n.Ia()){if(j=(ne=n.ia()).Rb(),(pe=ne.Fa(g,null,S,$,u))==2&&(!p||$[0]<=$[1])&&(pe=S[0],ce=S[1],pe*j<=u&&(1-ce)*j<=u)){Ce=n.xb();continue}if(N.Ia()&&(g=N.ia(),(pe=ne.Fa(g,null,S,$,u))==2&&(!p||$[0]<=$[1])&&(pe=S[0],ce=S[1],pe*j<=u&&(1-ce)*j<=u))){Ce=n.xb();continue}}_e=!1}Ce!=n.xb()&&(n.Wb(Ce),n.ia());break}Ce=n.xb(),g=w.construct(Ce,n.gb,pe,ce,N.xb(),N.gb,_e,Oe),k.th.push(g),C.add(C.size)}}if(!se){if(E==k.th.length)return!1;for(1<C.size-E&&C.Wd(E,C.size,f),se=0;E<k.th.length;E++)if(!((g=k.th[C.get(E)]).Mj<se&&g.Ui<se)){if(j*(g.Mj-se)>u)return!1;if(j*(1-(se=g.Ui))<=u||se==1)break}if(j*(1-se)>u)return!1;E=0,C.resize(0),k.th.length=0}}return b},a.QG=function(n,o,u){if(1>a.Sz(n,o,u,null))return!1;var p=new h.l,f=new h.l;n.A(p),o.A(f);var g=a.ns(p,f,u);return p=a.ns(f,p,u),!(!g||!p)||(g&&!p?!a.Am(o,n,u,!1):p&&!g?!a.Am(n,o,u,!1):!a.Am(n,o,u,!1)&&!a.Am(o,n,u,!1))},a.Sz=function(n,o,u,p){function f(et,xi){return L.LE(et,xi)}if(n.sz()>o.sz())var g=o,b=n;else g=n,b=o;n=g.Ha(),o=b.Ha();var S=[0,0],$=[0,0],E=-1,C=0,k=new h.ja(0),L=new a,N=new h.l,U=new h.l,H=new h.l;g.A(N),b.A(U),N.X(u,u),U.X(u,u),H.L(N),H.Fa(U),g=null,p!=null&&(g=new h.h);var j=U=U=null,K=b.Cb;for(K!=null?(U=K.Gb,j=K.Bo,U==null&&(U=h.ua.lj(b,H))):U=h.ua.lj(b,H),b=U.getIterator(),K=null,j!=null&&(K=j.getIterator());n.ab();)for(j=0;n.Ia();){var se=n.ia();if(se.A(N),N.isIntersecting(H)){if(K!=null&&(K.Zi(N,u),K.next()==-1))continue;var ne=se.Rb();b.Wo(se,u);for(var pe=b.next();pe!=-1;pe=b.next()){var ce=U.ka(pe);o.Wb(ce);var _e=o.ia(),Oe=_e.Rb(),Ce=se.Fa(_e,null,S,$,u);if(0<Ce){pe=S[0],E=$[0];var st=Ce==2?S[1]:NaN,qe=Ce==2?$[1]:NaN;if(Ce==2){if(ne*(st-pe)>u)return 1;var Et=ne*(st-pe);if(o.Ia()){if(_e=o.ia(),(Ce=se.Fa(_e,null,S,null,u))==2){Ce=S[0];var xt=S[1];if(Et+(Ce=ne*(xt-Ce))>u)return 1}o.Wb(ce),o.ia()}if(!o.xm()){if(o.ni(),_e=o.ni(),(Ce=se.Fa(_e,null,S,null,u))==2&&(Ce=S[0],Et+(Ce=ne*((xt=S[1])-Ce))>u))return 1;o.Wb(ce),o.ia()}if(n.Ia()){if(ce=n.xb(),(Ce=(se=n.ia()).Fa(_e,null,S,null,u))==2&&(Ce=S[0],Et+(Ce=ne*((xt=S[1])-Ce))>u))return 1;n.Wb(ce),n.ia()}if(!n.xm()){if(ce=n.xb(),n.ni(),(Ce=(se=n.ni()).Fa(_e,null,S,null,u))==2&&(Ce=S[0],Et+(Ce=Oe*((xt=S[1])-Ce))>u))return 1;n.Wb(ce),n.ia()}_e=w.construct(n.xb(),n.gb,pe,st,o.xb(),o.gb,E,qe),L.th.push(_e),k.add(k.size)}E=0,p!=null&&(se.ic(pe,g),p.add(g.x),p.add(g.y))}}if(C<L.th.length){for(k.Wd(C,k.size,f),se=0,pe=L.th[k.get(C)].Om;C<L.th.length;C++)if(!((_e=L.th[k.get(C)]).Mj<se&&_e.Ui<se))if(ne*(_e.Mj-se)>u)j=ne*(_e.Ui-_e.Mj),se=_e.Ui,pe=_e.Om;else{if(_e.Om!=pe?(j=ne*(_e.Ui-_e.Mj),pe=_e.Om):j+=ne*(_e.Ui-_e.Mj),j>u)return 1;if((se=_e.Ui)==1)break}ne*(1-se)>u&&(j=0),C=0,k.resize(0),L.th.length=0}}}return E},a.OG=function(n,o,u){var p=n.Ha(),f=o.Ha();for(n=new h.am(n,o,u,!1);n.next();){o=n.pl();var g=n.jl();if(p.Wb(o),f.Wb(g),o=p.ia(),0<f.ia().Fa(o,null,null,null,u))return!0}return!1},a.PG=function(n,o,u,p){var f=n.Ha(),g=new h.l,b=new h.l,S=new h.l;n.A(g),o.A(b),g.X(u,u),g.contains(b),b.X(u,u),S.L(g),S.Fa(b),(g=n.Cb)!=null?(g=g.Gb)==null&&(g=h.ua.lj(n,S)):g=h.ua.lj(n,S),n=g.getIterator();for(var $=new h.h,E=new h.h,C=u*u,k=0;k<o.I();k++)if(o.D(k,$),S.contains($)){b.L($.x,$.y,$.x,$.y),n.Zi(b,u);for(var L=!1,N=n.next();N!=-1;N=n.next())if(f.Wb(g.ka(N)),(N=f.ia()).ic(N.ge($,!1),E),h.h.zc(E,$)<=C){L=!0;break}if(p){if(!L)return!1}else if(L)return!0}return!!p},a.Tz=function(n,o,u){var p=new h.h,f=u*u,g=n.Ha();if((n=n.Cb)!=null&&(n=n.Gb)!=null){var b=new h.l;for(b.L(o),b=(u=n.HF(b,u)).next();b!=-1;b=u.next())if(g.Wb(n.ka(b)),g.Ia()){var S=(b=g.ia()).ge(o,!1);if(b.ic(S,p),h.h.zc(o,p)<=f)return!0}return!1}for(n=new h.l;g.ab();)for(;g.Ia();)if((b=g.ia()).A(n),n.X(u,u),n.contains(o)&&(S=b.ge(o,!1),b.ic(S,p),h.h.zc(o,p)<=f))return!0;return!1},a.MG=function(n,o,u){return a.Tz(n,o,u)&&!a.Uz(n,o,u)},a.Uz=function(n,o,u){return n=n.ng(),!a.lt(n,o,u)},a.NG=function(n,o,u){if(n.vm()){var p=new h.zb(o.v,o.G,o.v,o.H),f=new h.zb(o.v,o.H,o.C,o.H),g=new h.zb(o.C,o.H,o.C,o.G);for(o=new h.zb(o.C,o.G,o.v,o.G),n=n.Ha();n.ab();)for(;n.Ia();){var b=n.ia();if(b.isIntersecting(p,u)||b.isIntersecting(f,u)||b.isIntersecting(g,u)||b.isIntersecting(o,u))return!0}}else{(p=new h.l).L(o),p.X(u,u),u=n.vb(0),f=new h.h,g=new h.h,o=new h.h,b=new h.h;for(var S=0,$=n.ea();S<$;S++)for(var E=!0,C=n.Ca(S),k=n.Wc(S);C<k;C++)if(E)u.uc(2*C,g),E=!1;else{if(u.uc(2*C,f),o.N(g),b.N(f),p.uy(o,b)!=0)return!0;g.N(f)}}return!1},a.rc=function(n,o,u){var p=n.K(),f=o.K();if(h.ba.zj(p)){var g=n.Cb;if(g!=null&&(g=g.Hk)!=null)if(f==33){var b=o.D();if((b=g.Uo(b.x,b.y))==1)return 1;if(b==0)return 4}else{if(b=new h.l,o.A(b),(b=g.To(b))==1)return 1;if(b==0)return 4;if(u&&h.ba.zj(f)&&a.CE(o,g))return 1073741824}}if(h.ba.zj(f)&&(g=o.Cb)!=null&&(g=g.Hk)!=null)if(p==33){if(n=n.D(),(b=g.Uo(n.x,n.y))==1)return 2;if(b==0)return 4}else{if(o=new h.l,n.A(o),(b=g.To(o))==1)return 2;if(b==0)return 4;if(u&&h.ba.zj(p)&&a.CE(n,g))return 1073741824}return 0},a.CE=function(n,o){for(var u=n.I(),p=new h.h,f=0;f<u;f++)if(n.D(f,p),o.Uo(p.x,p.y)==1)return!0;return!1},a.DI=function(n,o,u,p){for(var f=1<=n.qm(0)&&1<=o.qm(0),g=n.Ha(),b=o.Ha(),S=[0,0],$=[0,0],E=new h.am(n,o,u,!1),C=!1;E.next();){var k=E.pl(),L=E.jl();if(g.Wb(k),b.Wb(L),k=g.ia(),(L=b.ia().Fa(k,null,$,S,u))==2){if(C=S[0],L=S[1],k=k.Rb(),f&&(L-C)*k>u)return!1;C=!0}else if(L!=0){if(C=S[0],k=$[0],0<C&&1>C&&0<k&&1>k)return!1;C=!0}}return!!C&&(g=new h.l,b=new h.l,f=new h.l,n.A(g),o.A(b),g.X(1e3*u,1e3*u),b.X(1e3*u,1e3*u),f.L(g),f.Fa(b),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,f,u,0),o.B()))&&h.cm.st(n,o,u,"F********",p))},a.AI=function(n,o,u,p){var f=1<=n.qm(0)&&1<=o.qm(0),g=new h.l,b=new h.l,S=new h.l;n.A(g),o.A(b);for(var $=!1,E=a.ns(g,b,u),C=a.ns(b,g,u),k=n.Ha(),L=o.Ha(),N=[0,0],U=[0,0],H=new h.am(n,o,u,!1);H.next();){var j=H.pl(),K=H.jl();if(k.Wb(j),L.Wb(K),K=k.ia(),(j=L.ia().Fa(K,null,U,N,u))==2){j=N[0];var se=N[1];if(K=K.Rb(),f&&(se-j)*K>u&&($=!0,E&&C))return!0}else if(j!=0&&(j=N[0],K=U[0],0<j&&1>j&&0<K&&1>K))return!0}if(f=new h.l,k=new h.l,f.L(g),f.X(1e3*u,1e3*u),k.L(b),k.X(1e3*u,1e3*u),S.L(f),S.Fa(k),g="",g=$?g+"**":g+"T*",E){if(10<o.I()&&(o=h.Vd.clip(o,S,u,0)).B())return!1;g+="****"}else g+="T***";if(C){if(10<n.I()&&(n=h.Vd.clip(n,S,u,0)).B())return!1;g+="***"}else g+="T**";return h.cm.st(n,o,u,g.toString(),p)},a.wI=function(n,o,u,p){var f=[!1],g=a.uI(n,o,u,f);return f[0]?g:(f=new h.l,o.A(f),f.X(1e3*u,1e3*u),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B()))&&h.cm.Uw(n,o,u,p))},a.uI=function(n,o,u,p){p[0]=!1;for(var f=n.Ha(),g=o.Ha(),b=[0,0],S=[0,0],$=new h.am(n,o,u,!1),E=!1;$.next();){var C=$.pl(),k=$.jl();if(f.Wb(C,-1),g.Wb(k,-1),C=f.ia(),(C=g.ia().Fa(C,null,S,b,u))!=0&&(E=!0,C==1&&(C=b[0],k=S[0],0<C&&1>C&&0<k&&1>k)))return p[0]=!0,!1}if(!E){for(p[0]=!0,b=new h.l,n.A(b),b.X(u,u),$=n,E=!1,S=new h.l,p=0,f=o.ea();p<f;p++)if(0<o.Ka(p)){if(o.Tj(p,S),!b.isIntersecting(S)||(g=o.Oa(o.Ca(p)),(g=h.Fg.ym($,g,0))==0))return!1;E||(!h.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?$=n:(g=new h.Ea,n.copyTo(g),g.hj(1),$=g),E=!0)}if(n.ea()==1||o.K()==1607)return!0;for(b=new h.l,o.A(b),b.X(u,u),S=o,$=!1,u=new h.l,p=0,f=n.ea();p<f;p++)if(0<n.Ka(p)){if(n.Tj(p,u),b.isIntersecting(u)&&(g=n.Oa(n.Ca(p)),(g=h.Fg.ym(S,g,0))==1))return!1;$||(!h.Fg.Ol(o,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?S=o:(g=new h.Ea,o.copyTo(g),g.hj(1),S=g),$=!0)}return!0}return!1},a.EI=function(n,o,u,p){for(var f=n.Ha(),g=o.Ha(),b=[0,0],S=[0,0],$=new h.am(n,o,u,!1),E=!1;$.next();){var C=$.pl(),k=$.jl();if(f.Wb(C),g.Wb(k),C=f.ia(),(C=g.ia().Fa(C,null,S,b,u))==2)E=!0;else if(C!=0){if(E=b[0],C=S[0],0<E&&1>E&&0<C&&1>C)return!1;E=!0}}return!!E&&(g=new h.l,b=new h.l,f=new h.l,n.A(g),o.A(b),g.X(1e3*u,1e3*u),b.X(1e3*u,1e3*u),f.L(g),f.Fa(b),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,f,u,0),o.B()))&&h.cm.bn(n,o,u,"F********",p))},a.yI=function(n,o,u,p){for(var f=n.Ha(),g=o.Ha(),b=[0,0],S=[0,0],$=new h.am(n,o,u,!1),E=!1;$.next();){var C=$.pl(),k=$.jl();if(f.Wb(C),g.Wb(k),C=f.ia(),(C=g.ia().Fa(C,null,S,b,u))==2)E=!0;else if(C!=0){if(E=b[0],C=S[0],0<E&&1>E&&0<C&&1>C)return!0;E=!0}}return!!E&&(g=new h.l,b=new h.l,S=new h.l,$=new h.l,f=new h.l,n.A(g),o.A(b),a.ns(b,g,u)?(S.L(g),S.X(1e3*u,1e3*u),$.L(b),$.X(1e3*u,1e3*u),f.L(S),f.Fa($),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B())||10<o.I()&&(o=h.Vd.clip(o,f,u,0),o.B()))&&(u=h.cm.bn(n,o,u,"T********",p))):u=h.cm.bn(n,o,u,"T*****T**",p))},a.xI=function(n,o,u,p){var f=[!1],g=a.uI(n,o,u,f);return f[0]?g:(f=new h.l,o.A(f),f.X(1e3*u,1e3*u),!(10<n.I()&&(n=h.Vd.clip(n,f,u,0),n.B()))&&h.cm.aB(n,o,u,p))},a.vI=function(n,o,u){return h.jd.Zd(n,o,u)==1},a.CI=function(n,o,u){return h.jd.Zd(n,o,u)==2},a.lt=function(n,o,u){var p=new h.h;u*=u;for(var f=0;f<n.I();f++)if(n.D(f,p),h.h.zc(p,o)<=u)return!1;return!0},a.prototype.LE=function(n,o){return n=this.th[n],o=this.th[o],n.Om<o.Om||n.Om==o.Om&&(n.rw<o.rw||n.rw==o.rw&&(n.Mj<o.Mj||n.Mj==o.Mj&&(n.Ui<o.Ui||n.Ui==o.Ui&&n.wH<o.wH)))?-1:1},a}();h.vd=c}(B||(B={})),function(h){var O,w,c;(w=O||(O={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(c||(c={})),O=function(){function a(){this.me=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.tB=function(n,o,u,p,f){if(p.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var g=0;9>g;g++){var b=p.charAt(g);if(b!="*"&&b!="T"&&b!="F"&&b!="0"&&b!="1"&&b!="2")throw h.i.ga("relation string")}if((g=this.HR(p,n.Eb(),o.Eb()))!=0)return h.vd.uB(n,o,u,g,f);g=new h.l,n.A(g),b=new h.l,o.A(b);var S=new h.l;if(S.L(g),S.$b(b),u=h.ua.Xd(u,S,!1),n=this.RE(n,u),o=this.RE(o,u),n.B()||o.B())return this.pW(n,o,p);switch(g=o.K(),b=!1,n.K()){case 1736:switch(g){case 1736:b=this.st(n,o,u,p,f);break;case 1607:b=this.bn(n,o,u,p,f);break;case 33:b=this.rt(n,o,u,p);break;case 550:b=this.qt(n,o,u,p,f)}break;case 1607:switch(g){case 1736:b=this.bn(o,n,u,this.aq(p),f);break;case 1607:b=this.bB(n,o,u,p,f);break;case 33:b=this.ut(n,o,u,p,f);break;case 550:b=this.tt(n,o,u,p,f)}break;case 33:switch(g){case 1736:b=this.rt(o,n,u,this.aq(p));break;case 1607:b=this.ut(o,n,u,this.aq(p),f);break;case 33:b=this.VU(n,o,u,p);break;case 550:b=this.mt(o,n,u,this.aq(p))}break;case 550:switch(g){case 1736:b=this.qt(o,n,u,this.aq(p),f);break;case 1607:b=this.tt(o,n,u,this.aq(p),f);break;case 550:b=this.UA(n,o,u,p,f);break;case 33:b=this.mt(n,o,u,p)}break;default:b=!1}return b},a.st=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.sJ();var b=new h.l,S=new h.l;return n.A(b),o.A(S),p=!1,h.vd.fk(b,S,u)&&(g.Eu(n,o),p=!0),p||((b=h.vd.rc(n,o,!1))==4?(g.Eu(n,o),p=!0):b==1?(g.hy(o),p=!0):b==2&&(g.UD(n),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,f),g.Dp(n,o),g.j.Wg()),a.hg(g.J,g.Yc)},a.Uw=function(n,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.sJ();var g=new h.l,b=new h.l;n.A(g),o.A(b);var S=!1;return h.vd.fk(g,b,u)&&(f.Eu(n,o),S=!0),S||((g=h.vd.rc(n,o,!1))==4?(f.Eu(n,o),S=!0):g==1?(f.hy(o),S=!0):g==2&&(f.UD(n),S=!0)),S?this.hg(f.J,f.Yc):(n=(S=new h.hd).Ib(n),g=S.Ib(o),h.Vk.W(S,u,p,!1),u=S.Ke(g).ng(),S.Ip(0,!0,!0),h.tn.W(S,n,-1,!1,p),S.I(n)!=0&&(h.tn.W(S,g,-1,!1,p),f.gr(S,p),(o=S.I(g)==0)||(f.Dp(n,g),f.j.Wg(),g=this.hg(f.J,f.Yc))?(n=S.Ke(n),n=(S=new h.hd).Ib(n),g=S.Ib(u),f.gr(S,p),f.me=0,f.$i(),f.dj(o?"T*****F**":"******F**"),f.DB(),f.Dp(n,g),f.j.Wg(),this.hg(f.J,f.Yc)):g))},a.bn=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.DB();var b=new h.l,S=new h.l;return n.A(b),o.A(S),p=!1,h.vd.fk(b,S,u)&&(g.Fu(n,o),p=!0),p||((b=h.vd.rc(n,o,!1))==4?(g.Fu(n,o),p=!0):b==1&&(g.VD(o),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,f),g.mh=g.j.Fp(),a.Lw(o,g.j,g.mh),g.Dp(n,o),g.j.Gp(g.mh),g.j.Wg()),a.hg(g.J,g.Yc)},a.aB=function(n,o,u,p){var f=new a;f.$i(),f.dj("T*****F**"),f.DB();var g=new h.l,b=new h.l;n.A(g),o.A(b);var S=!1;return h.vd.fk(g,b,u)&&(f.Fu(n,o),S=!0),S||((g=h.vd.rc(n,o,!1))==4?(f.Fu(n,o),S=!0):g==1&&(f.VD(o),S=!0)),S?this.hg(f.J,f.Yc):(n=(S=new h.hd).Ib(n),o=S.Ib(o),f.Yo(S,u,p),S.I(n)!=0&&(f.Dp(n,o),f.j.Wg(),this.hg(f.J,f.Yc)))},a.qt=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.tJ();var b=new h.l,S=new h.l;return n.A(b),o.A(S),p=!1,h.vd.fk(b,S,u)&&(g.Gu(n),p=!0),p||((b=h.vd.rc(n,o,!1))==4?(g.Gu(n),p=!0):b==1&&(g.uN(),p=!0)),p||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,f),g.By(n,o),g.j.Wg()),a.hg(g.J,g.Yc)},a.bB=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.$W(),p=new h.l;var b=new h.l;n.A(p),o.A(b);var S=!1;return h.vd.fk(p,b,u)&&(g.KG(n,o),S=!0),S||h.vd.rc(n,o,!1)!=4||(g.KG(n,o),S=!0),S||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,f),g.$h=g.j.Fp(),g.mh=g.j.Fp(),a.Lw(n,g.j,g.$h),a.Lw(o,g.j,g.mh),g.Dp(n,o),g.j.Gp(g.$h),g.j.Gp(g.mh),g.j.Wg()),a.hg(g.J,g.Yc)},a.tt=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.HJ(),p=new h.l;var b=new h.l;n.A(p),o.A(b);var S=!1;return h.vd.fk(p,b,u)&&(g.Qz(n),S=!0),S||h.vd.rc(n,o,!1)!=4||(g.Qz(n),S=!0),S||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,f),g.$h=g.j.Fp(),a.Lw(n,g.j,g.$h),g.By(n,o),g.j.Gp(g.$h),g.j.Wg()),a.hg(g.J,g.Yc)},a.UA=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.MJ(),p=new h.l;var b=new h.l;n.A(p),o.A(b);var S=!1;return h.vd.fk(p,b,u)&&(g.tI(),S=!0),S||(n=(p=new h.hd).Ib(n),o=p.Ib(o),g.Yo(p,u,f),g.By(n,o),g.j.Wg()),a.hg(g.J,g.Yc)},a.rt=function(n,o,u,p){var f=new a;f.$i(),f.dj(p),f.tJ();var g=new h.l;n.A(g),o=o.D();var b=!1;return h.vd.Tw(o,g,u)&&(f.Gu(n),b=!0),b||((u=h.jd.Zd(n,o,u))==1?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):u==2?(f.J[6]=-1,n.He()!=0?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=-1,f.J[5]=-1,u=new h.l,n.A(u),f.J[2]=u.da()==0&&u.S()==0?-1:1)):f.Gu(n)),this.hg(f.J,p)},a.ut=function(n,o,u,p,f){var g=new a;g.$i(),g.dj(p),g.HJ();var b=new h.l;n.A(b),p=o.D();var S=!1;if(h.vd.Tw(p,b,u)&&(g.Qz(n),S=!0),!S){b=null;var $=S=!1;(g.fa[0]||g.fa[6])&&(h.vd.Tz(n,p,u)?(g.fa[0]&&(b=h.si.im(n,f),$=!h.vd.lt(b,p,u),S=!0,g.J[0]=$?-1:0),g.J[6]=-1):(g.J[0]=-1,g.J[6]=0)),g.fa[3]&&(b!=null&&b.B()?g.J[3]=-1:(S||(b==null&&(b=h.si.im(n,f)),$=!h.vd.lt(b,p,u),S=!0),g.J[3]=$?0:-1)),g.fa[5]&&(b!=null&&b.B()?g.J[5]=-1:S&&!$?g.J[5]=0:(b==null&&(b=h.si.im(n,f)),f=h.vd.Pw(b,o,u),g.J[5]=f?-1:0)),g.fa[2]&&(n.Rb()!=0?g.J[2]=1:((f=new h.ee(n.description)).Gd(n,0,n.I()),n=h.vd.Pw(f,o,u),g.J[2]=n?-1:0))}return this.hg(g.J,g.Yc)},a.mt=function(n,o,u,p){var f=new a;f.$i(),f.dj(p),f.MJ();var g=new h.l;n.A(g),o=o.D();var b=!1;if(h.vd.Tw(o,g,u)&&(f.tI(),b=!0),!b){g=!1,b=!0,u*=u;for(var S=0;S<n.I();S++){var $=n.Oa(S);if(h.h.zc($,o)<=u?g=!0:b=!1,g&&!b)break}g?(f.J[0]=0,f.J[2]=b?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=0,f.J[6]=0)}return a.hg(f.J,p)},a.VU=function(n,o,u,p){n=n.D(),o=o.D();for(var f=[],g=0;9>g;g++)f[g]=-1;return h.h.zc(n,o)<=u*u?f[0]=0:(f[2]=0,f[6]=0),f[8]=2,a.hg(f,p)},a.hg=function(n,o){for(var u=0;9>u;u++)switch(o.charAt(u)){case"T":if(n[u]==-1)return!1;break;case"F":if(n[u]!=-1)return!1;break;case"0":if(n[u]!=0)return!1;break;case"1":if(n[u]!=1)return!1;break;case"2":if(n[u]!=2)return!1}return!0},a.pW=function(n,o,u){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(n.B()&&o.B()){for(var f=0;9>f;f++)p[f]=-1;return this.hg(p,u)}return f=!1,n.B()&&(n=o,f=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=n.K(),h.ba.Ic(o)?o==1736?n.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new h.l,n.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=n.Rb()!=0,p[2]=o?1:0,p[5]=h.si.cq(n)?0:-1):(p[2]=0,p[5]=-1),f&&this.qK(p),this.hg(p,u)},a.HR=function(n,o,u){return a.ZP(n)?3:a.PP(n)?4:a.ZX(n,o,u)?8:a.xP(n,o,u)?16:a.$O(n)?1:a.zU(n,o,u)?32:0},a.ZP=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="F"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="F"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.PP=function(n){return n.charAt(0)=="F"&&n.charAt(1)=="F"&&n.charAt(2)=="*"&&n.charAt(3)=="F"&&n.charAt(4)=="F"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.ZX=function(n,o,u){return(o!=0||u!=0)&&((o!=2||u!=2)&&(n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="T"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"||o==1&&u==1&&n.charAt(0)=="F"&&n.charAt(1)=="T"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")||u!=0&&n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="T"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")},a.xP=function(n,o,u){return o>u?n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*":o==1&&u==1&&n.charAt(0)=="0"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.$O=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.zU=function(n,o,u){if(o==u){if(o!=1)return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*";if(n.charAt(0)=="1"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*")return!0}return!1},a.Lw=function(n,o,u){n=o.Ma(n);for(var p=o.Oe;p!=-1;p=o.Tf(p))if((o.yd(p)&n)!=0){var f=o.Je(p);if(f==-1)o.pn(p,u,0);else{var g=f,b=0;do(o.fh(g)&n)!=0&&b++,g=o.kc(o.ya(g));while(g!=f);o.pn(p,u,b)}}},a.aq=function(n){var o=""+n.charAt(0);return o+=n.charAt(3),o+=n.charAt(6),o+=n.charAt(1),o+=n.charAt(4),o+=n.charAt(7),o+=n.charAt(2),(o+=n.charAt(5))+n.charAt(8)},a.prototype.$i=function(){for(var n=0;9>n;n++)this.J[n]=-2,this.$a[n]=-2},a.qK=function(n){var o=n[1],u=n[2],p=n[5];n[1]=n[3],n[2]=n[6],n[5]=n[7],n[3]=o,n[6]=u,n[7]=p},a.prototype.dj=function(n){for(this.Yc=n,n=0;9>n;n++)this.Yc.charAt(n)!="*"?(this.fa[n]=!0,this.me++):this.fa[n]=!1},a.prototype.PJ=function(){for(var n=0;9>n;n++)this.fa[n]&&this.J[n]==-2&&(this.J[n]=-1,this.fa[n]=!1)},a.prototype.qc=function(n){return this.J[n]!=-2&&(this.J[n]==-1?(this.fa[n]=!1,this.me--,!0):this.Yc.charAt(n)!="T"&&this.Yc.charAt(n)!="F"?!(this.J[n]<this.$a[n])&&(this.fa[n]=!1,this.me--,!0):(this.fa[n]=!1,this.me--,!0))},a.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},a.prototype.sN=function(n,o,u){var p=!0;return this.fa[0]&&(this.xS(n,o,u),p=p&&this.qc(0)),this.fa[1]&&(this.nG(n,o,1),p=p&&this.qc(1)),this.fa[2]&&(this.oG(n,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.nG(n,u,3),p=p&&this.qc(3)),this.fa[4]&&(this.wN(n,o,u),p=p&&this.qc(4)),this.fa[5]&&(this.$D(n,u,5),p=p&&this.qc(5)),this.fa[6]&&(this.oG(n,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.$D(n,o,7),p=p&&this.qc(7)),p},a.prototype.Eu=function(n,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(n,o,u,p,f){o==-1&&p==-1||((u!="T"&&u!="F"&&o!=-1||f!="T"&&f!="F"&&p!=-1)&&n.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(u=new h.l,n.A(u),this.J[o]=u.da()==0&&u.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(n){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(n,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.UD=function(n){this.hy(n),a.qK(this.J)},a.prototype.Fu=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var u=this.Yc.charAt(6);u=u=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0}this.fa[7]&&(o=h.si.cq(o),this.J[7]=o?0:-1),this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.VD=function(n){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||n.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(n=h.si.cq(n),this.J[1]=n?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(n){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.KG=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var u=this.Yc.charAt(2);u=u=="T"||u=="F"||n.Rb()!=0,this.J[2]=u?1:0}this.fa[5]&&(n=h.si.cq(n),this.J[5]=n?0:-1),this.fa[6]&&(u=(u=this.Yc.charAt(6))=="T"||u=="F"||o.Rb()!=0,this.J[6]=u?1:0),this.fa[7]&&(o=h.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(n){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||n.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(n=h.si.cq(n),this.J[5]=n?0:-1),this.J[6]=0},a.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.tN=function(n,o,u){var p=!0;return this.fa[0]&&(this.yS(n,o),p=p&&this.qc(0)),this.fa[1]&&(this.uS(n,o,u,this.mh),p=p&&this.qc(1)),this.fa[2]&&(this.vS(n,o),p=p&&this.qc(2)),this.fa[3]&&(this.AN(n,o,u,this.mh),p=p&&this.qc(3)),this.fa[4]&&(this.xN(n,o,u,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.yN(n,o,u),p=p&&this.qc(5)),this.fa[6]&&(this.gQ(n,o),p=p&&this.qc(6)),this.fa[7]&&(this.fQ(n,o,u,this.mh),p=p&&this.qc(7)),p},a.prototype.hT=function(n,o,u){var p=!0;return this.fa[0]&&(this.BS(n,o,u,this.$h,this.mh),p=p&&this.qc(0)),this.fa[1]&&(this.pG(n,o,u,this.$h,this.mh,1),p=p&&this.qc(1)),this.fa[2]&&(this.qG(n,o,u,2),p=p&&this.qc(2)),this.fa[3]&&(this.pG(n,u,o,this.mh,this.$h,3),p=p&&this.qc(3)),this.fa[4]&&(this.CN(n,o,u,this.$h,this.mh),p=p&&this.qc(4)),this.fa[5]&&(this.aE(n,u,this.$h,5),p=p&&this.qc(5)),this.fa[6]&&(this.qG(n,u,o,6),p=p&&this.qc(6)),this.fa[7]&&(this.aE(n,o,this.mh,7),p=p&&this.qc(7)),p},a.prototype.WD=function(n,o,u){var p=!0;return this.fa[0]&&(this.zS(n,o),p=p&&this.qc(0)),this.fa[2]&&(this.wS(n,o),p=p&&this.qc(2)),this.fa[3]&&(this.BN(n,o,u),p=p&&this.qc(3)),this.fa[5]&&(this.zN(n,o),p=p&&this.qc(5)),this.fa[6]&&(this.hQ(n,o),p=p&&this.qc(6)),p},a.prototype.LG=function(n,o,u){var p=!0;return this.fa[0]&&(this.CS(n,o,u,this.$h),p=p&&this.qc(0)),this.fa[2]&&(this.AS(n,u),p=p&&this.qc(2)),this.fa[3]&&(this.EN(n,o,u,this.$h),p=p&&this.qc(3)),this.fa[5]&&(this.DN(n,o,u,this.$h),p=p&&this.qc(5)),this.fa[6]&&(this.iQ(n,o,u),p=p&&this.qc(6)),p},a.prototype.UU=function(n,o,u){var p=!0;return this.fa[0]&&(this.DS(n,o,u),p=p&&this.qc(0)),this.fa[2]&&(this.rG(n,o,u,2),p=p&&this.qc(2)),this.fa[6]&&(this.rG(n,u,o,6),p=p&&this.qc(6)),p},a.prototype.xS=function(n,o,u){this.J[0]!=2&&((n=this.j.af(n))&o)!=0&&(n&u)!=0&&(this.J[0]=2)},a.prototype.nG=function(n,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(p&o)!=0&&(this.J[u]=1)}},a.prototype.oG=function(n,o,u,p){this.J[p]!=2&&((n=this.j.af(n))&o)!=0&&(n&u)==0&&(this.J[p]=2)},a.prototype.wN=function(n,o,u){if(this.J[4]!=1){var p=this.j.fh(n);(p&o)!=0&&(p&u)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&((n=this.j.yd(this.j.vf(n)))&o)!=0&&(n&u)!=0&&(this.J[4]=0)}},a.prototype.$D=function(n,o,u){if(this.J[u]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(p&o)==0&&(this.J[u]=1)}},a.prototype.yS=function(n,o){if(this.J[0]!=1){var u=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(u&o)!=0&&(this.J[0]=1)}},a.prototype.uS=function(n,o,u,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var f=this.j.vf(n),g=this.j.yd(f);(g&o)==0&&(this.j.af(n)&o)!=0&&(n=this.j.og(f,p),(g&u)!=0&&n%2!=0&&(this.J[1]=0))}},a.prototype.vS=function(n,o){this.J[2]!=2&&(this.j.fh(n)&o)!=0&&(this.J[2]=2)},a.prototype.AN=function(n,o,u,p){if(this.J[3]!=1){var f=this.j.fh(n);(f&o)!=0&&(f&u)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(f=this.j.vf(n),((n=this.j.yd(f))&o)!=0&&(o=this.j.og(f,p),(n&u)!=0&&o%2==0&&(this.J[3]=0)))}},a.prototype.xN=function(n,o,u,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var f=this.j.vf(n);((n=this.j.yd(f))&o)!=0&&(o=this.j.og(f,p),(n&u)!=0&&o%2!=0&&(this.J[4]=0))}},a.prototype.yN=function(n,o,u){this.J[5]!=1&&((n=this.j.fh(n))&o)!=0&&(n&u)==0&&(this.J[5]=1)},a.prototype.gQ=function(n,o){if(this.J[6]!=1){var u=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(u&o)==0&&(this.J[6]=1)}},a.prototype.fQ=function(n,o,u,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var f=this.j.vf(n),g=this.j.yd(f);(g&o)==0&&(this.j.af(n)&o)==0&&(n=this.j.og(f,p),(g&u)!=0&&n%2!=0&&(this.J[7]=0))}},a.prototype.BS=function(n,o,u,p,f){if(this.J[0]!=1){var g=this.j.fh(n);(g&o)!=0&&(g&u)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),((g=this.j.yd(n))&o)!=0&&(g&u)!=0&&(o=this.j.og(n,p),f=this.j.og(n,f),o%2==0&&f%2==0&&(this.J[0]=0)))}},a.prototype.pG=function(n,o,u,p,f,g){if(this.J[g]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var b=this.j.yd(n);(b&o)!=0&&(b&u)!=0&&(o=this.j.og(n,p),f=this.j.og(n,f),o%2==0&&f%2!=0&&(this.J[g]=0))}},a.prototype.qG=function(n,o,u,p){this.J[p]!=1&&((n=this.j.fh(n))&o)!=0&&(n&u)==0&&(this.J[p]=1)},a.prototype.CN=function(n,o,u,p,f){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var g=this.j.yd(n);(g&o)!=0&&(g&u)!=0&&(o=this.j.og(n,p),f=this.j.og(n,f),o%2!=0&&f%2!=0&&(this.J[4]=0))}},a.prototype.aE=function(n,o,u,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),(this.j.yd(n)&o)==0&&this.j.og(n,u)%2!=0&&(this.J[p]=0))},a.prototype.zS=function(n,o){this.J[0]!=0&&(this.j.yd(n)&o)==0&&(this.j.jk(this.j.Yy(n))&o)!=0&&(this.J[0]=0)},a.prototype.wS=function(n,o){this.J[2]!=2&&(this.j.yd(n)&o)!=0&&(this.J[2]=2)},a.prototype.BN=function(n,o,u){this.J[3]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)!=0&&(this.J[3]=0)},a.prototype.zN=function(n,o){this.J[5]!=1&&(this.j.yd(n)&o)!=0&&(this.J[5]=1)},a.prototype.hQ=function(n,o){this.J[6]!=0&&(this.j.yd(n)&o)==0&&(this.j.jk(this.j.Yy(n))&o)==0&&(this.J[6]=0)},a.prototype.CS=function(n,o,u,p){if(this.J[0]!=0){var f=this.j.yd(n);(f&o)!=0&&(f&u)!=0&&this.j.og(n,p)%2==0&&(this.J[0]=0)}},a.prototype.AS=function(n,o){this.J[2]!=1&&(this.j.Je(n)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(n)&o)==0&&(this.J[2]=0))},a.prototype.EN=function(n,o,u,p){if(this.J[3]!=0){var f=this.j.yd(n);(f&o)!=0&&(f&u)!=0&&this.j.og(n,p)%2!=0&&(this.J[3]=0)}},a.prototype.DN=function(n,o,u,p){if(this.J[5]!=0){var f=this.j.yd(n);(f&o)!=0&&(f&u)==0&&this.j.og(n,p)%2!=0&&(this.J[5]=0)}},a.prototype.iQ=function(n,o,u){this.J[6]!=0&&((n=this.j.yd(n))&o)==0&&(n&u)!=0&&(this.J[6]=0)},a.prototype.DS=function(n,o,u){this.J[0]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)!=0&&(this.J[0]=0)},a.prototype.rG=function(n,o,u,p){this.J[p]!=0&&((n=this.j.yd(n))&o)!=0&&(n&u)==0&&(this.J[p]=0)},a.prototype.Dp=function(n,o){var u=!1;n=this.j.Ma(n),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){var f=this.j.Je(p);if(f==-1){if(this.Um!=-1)switch(this.Um){case 3:u=this.WD(p,n,o);break;case 4:u=this.LG(p,n,o);break;default:throw h.i.ga("internal error")}}else{var g=f;do{var b=g;if(this.j.Bb(b,this.Wi)!=1)do{switch(this.xw){case 0:u=this.sN(b,n,o);break;case 1:u=this.tN(b,n,o);break;case 2:u=this.hT(b,n,o);break;default:throw h.i.ga("internal error")}if(u)break;this.j.Kb(b,this.Wi,1),b=this.j.kc(b)}while(b!=g&&!u);if(u)break;g=this.j.kc(this.j.ya(b))}while(g!=f);if(u)break}}u||this.PJ(),this.j.Lg(this.Wi)},a.prototype.By=function(n,o){var u=!1;n=this.j.Ma(n),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Tf(p)){switch(this.Um){case 3:u=this.WD(p,n,o);break;case 4:u=this.LG(p,n,o);break;case 5:u=this.UU(p,n,o);break;default:throw h.i.Ra()}if(u)break}u||this.PJ()},a.prototype.gr=function(n,o){this.j.fr(n,o)},a.prototype.Yo=function(n,o,u){this.TP(n,o,u),this.gr(n,u)},a.prototype.TP=function(n,o,u){for(h.Vk.W(n,o,u,!1),n.Ip(0,!0,!0),o=n.md;o!=-1;o=n.ve(o))n.jc(o)==1736&&h.tn.W(n,o,-1,!1,u)},a.RE=function(n,o){var u=n.K();return h.ba.zd(u)?((o=new h.Ua(n.description)).pc(n,!0),o):u==197?(u=new h.l,n.A(u),u.da()<=o&&u.S()<=o?(o=new h.Ta(n.description),n.tf(o),o):u.da()<=o||u.S()<=o?(o=new h.Ua(n.description),u=new h.Ta,n.If(0,u),o.nf(u),n.If(2,u),o.lineTo(u),o):((o=new h.Ea(n.description)).bd(n,!1),o)):n},a}(),h.cm=O}(B||(B={})),function(h){var O=function(){function a(n){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=n,this.Js=-1}return a.prototype.cc=function(n){return this.g.cc(this.uz(n))},a.prototype.Dv=function(n){var o=this.dz(n);if(n=this.CF(n),this.g.Na(o)==n){var u=o;o=n,n=u}return this.g.Hc(o,this.xt),this.g.Hc(n,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(n){var o=this.dz(n);return n=this.CF(n),this.g.V(o)==n?o:n},a.prototype.dz=function(n){return this.Gm.get(n)},a.prototype.CF=function(n){return this.fw.get(n)},a.prototype.mF=function(n){this.Gm.set(n,this.Js),this.Js=n},a.prototype.iI=function(n){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,n),this.fw.set(o,this.g.V(n)),o}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),o=this.Gm.size,this.Gm.add(n),this.fw.add(this.g.V(n)),o},a.prototype.mz=function(n){return this.g.cd(this.dz(n))},a}();h.uY=O;var w=function(){function a(n){this.Ce=n,this.je=new h.zb,this.Pm=new h.zb,this.xH=0,this.Co=null,this.tA=-1}return a.prototype.compare=function(n,o,u){u=n.ka(u);var p=this.Ce.hb;if(this.tA==o)var f=this.xH;else this.Co=p.cc(o),this.Co==null?((n=p.g).fd(p.uz(o),this.je),this.Co=this.je,f=this.je.Me(this.Ce.Ah,0)):f=this.Co.Me(this.Ce.Ah,0),this.xH=f,this.tA=o;if((n=p.cc(u))==null){(n=p.g).fd(p.uz(u),this.Pm),n=this.Pm;var g=this.Pm.Me(this.Ce.Ah,0)}else g=n.Me(this.Ce.Ah,0);return f==g&&(o=p.Dv(o),u=p.Dv(u),(o=.5*((u=Math.min(o?this.Co.ma:this.Co.oa,u?n.ma:n.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=u),f=this.Co.Me(o,0),g=n.Me(o,0)),f<g?-1:f>g?1:0},a.prototype.reset=function(){this.tA=-1},a}(),c=function(){function a(){this.Ym=this.Il=null,this.fb=new h.$j,this.fb.MP(),this.ae=new w(this),this.fb.Xo(this.ae)}return a.prototype.CQ=function(){var n=!1;if(this.hw&&(n=this.DQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return n=this.g.qz(o),this.g.KB(o,!0),0>n&&(n=this.g.Ya(o),this.g.kJ(n),this.g.Yg(o,this.g.Na(n)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.yo,-1);o=new h.ja(0),this.Ah=NaN;var u=new h.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.ke);p!=-1;p=this.Il.lb(p)){var f=this.Il.getData(p);if(this.g.Hc(f,u),u.y!=this.Ah&&o.size!=0&&(n=this.vt(o)||n,this.ae.reset(),o.clear(!1)),o.add(f),this.Ah=u.y,this.ft==0)break}for(0<this.ft&&(n=this.vt(o)||n,o.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.KB(o,!0),u=o,o=this.g.uj(o,this.yo);o!=-1;)p=this.g.uj(o,this.yo),this.g.UT(this.Y,this.g.Sb(u),o),u=o,o=p;o=this.g.Sb(u)}else this.g.KB(o,!1),o=this.g.Sb(o);return this.g.xB(this.Gl),this.g.xB(this.yo),n},a.prototype.vt=function(n){return this.VV(n)},a.prototype.VV=function(n){var o=!1;this.hb==null&&(this.hb=new O(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(n);for(var u=0,p=n.size;u<p;u++){var f=n.get(u);f!=-1&&this.jG(f,-1)}for(u=0;u<this.Ym.size&&0<this.ft;u++)if(n=this.Ym.get(u),f=this.hb.mz(this.fb.ka(n)),p=-1,this.g.uj(f,this.Gl)==0){f=this.fb.xe(n);for(var g,b=n;f!=-1;){var S=this.fb.ka(f),$=this.hb.mz(S),E=this.g.uj($,this.Gl);if(E!=0){p=$;break}b=f,f=this.fb.xe(f)}f==-1?(g=!0,f=b):(S=this.fb.ka(f),g=this.hb.Dv(S),f=this.fb.lb(f),g=!g);do{if(S=this.fb.ka(f),$=this.hb.mz(S),(E=this.g.uj($,this.Gl))==0&&(g!=this.hb.Dv(S)&&(o=this.g.Ya($),this.g.kJ(o),this.g.Yg($,this.g.Na(o)),o=!0),this.g.ir($,this.Gl,g?3:2),g||(b=this.g.uj(p,this.yo),this.g.ir(p,this.yo,$),this.g.ir($,this.yo,b)),this.ft--,this.ft==0))return o;p=$,b=f,f=this.fb.lb(f),g=!g}while(b!=n)}return o},a.prototype.UV=function(n){for(var o=0,u=n.size;o<u;o++){var p=n.get(o),f=this.g.Qa(p,this.to),g=this.g.Qa(p,this.Ts);if(f!=-1){var b=this.fb.ka(f);this.hb.mF(b),this.g.Sa(p,this.to,-1)}g!=-1&&(b=this.fb.ka(g),this.hb.mF(b),this.g.Sa(p,this.Ts,-1)),b=-1,f!=-1&&g!=-1?(this.fb.wd(f,-1),this.fb.wd(g,-1),n.set(o,-1)):b=f!=-1?f:g,b!=-1&&(this.jG(p,b)||this.fb.wd(b,-1),n.set(o,-1))}},a.prototype.jG=function(n,o){var u=new h.h,p=new h.h;this.g.Hc(n,u);var f=this.g.V(n);this.g.Hc(f,p);var g=!1;if(u.y<p.y){g=!0;var b=this.hb.iI(n);if(o==-1)var S=this.fb.addElement(b,-1);else S=o,this.fb.Uj(S,b);(b=this.g.Qa(f,this.to))==-1?this.g.Sa(f,this.to,S):this.g.Sa(f,this.Ts,S),f=this.g.cd(n),this.g.uj(f,this.Gl)==0&&this.Ym.add(S)}return f=this.g.Na(n),this.g.Hc(f,p),u.y<p.y&&(g=!0,b=this.hb.iI(f),o==-1?S=this.fb.addElement(b,-1):(S=o,this.fb.Uj(S,b)),(b=this.g.Qa(f,this.to))==-1?this.g.Sa(f,this.to,S):this.g.Sa(f,this.Ts,S),f=this.g.cd(n),this.g.uj(f,this.Gl)==0&&this.Ym.add(S)),g},a.W=function(n,o,u,p){var f=new a;return f.g=n,f.Y=o,f.Il=u,f.hw=p,f.CQ()},a.prototype.DQ=function(){var n=new h.ja(0),o=new h.ja(0),u=-1,p=-1,f=new h.h;f.Sc();for(var g=-1,b=-1,S=-1,$=new h.h,E=this.Il.sc(this.Il.ke);E!=-1;E=this.Il.lb(E)){var C=this.Il.getData(E);this.g.Hc(C,$);var k=this.g.cd(C);f.rb($)&&b==k?(p==-1&&(u=this.g.Fy(),p=this.g.Hd()),S==-1&&(S=o.size,this.g.Sa(g,p,S),o.add(1),this.g.uj(k,u)==-1&&(this.g.ir(k,u,g),n.add(k))),this.g.Sa(C,p,S),o.XW(o.Gc()+1)):(S=-1,f.N($)),g=C,b=k}if(n.size==0)return!1;for(f=new h.ja(0),g=new h.ja(0),b=0,S=n.size;b<S;b++){k=n.get(b);var L=this.g.uj(k,u);for(C=this.g.Qa(L,p),f.clear(!1),g.clear(!1),f.add(L),g.add(C),C=this.g.V(L);C!=L;C=this.g.V(C)){var N=C;if(($=this.g.Qa(N,p))!=-1)if(g.size==0)g.add($),f.add(N);else if(g.Gc()==$){E=f.Gc();var U=this.g.V(E);L=this.g.V(N),this.g.Cc(E,L),this.g.Dc(L,E),this.g.Cc(N,U),this.g.Dc(U,N),N=[!1],U=this.g.iG(this.Y,U,this.g.Ya(k),N),this.g.Sa(C,p,-1),N[0]&&this.g.Kf(k,L),C=this.g.Ka(k),C-=L=this.g.Ka(U),this.g.Xj(k,C),o.set($,o.get($)-1),o.get($)==1&&(o.set($,0),g.Jf(),f.Jf()),C=L=E}else f.add(C),g.add($)}}return this.g.xB(u),this.g.Ud(p),!0},a}();h.RL=c}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.jg=function(){this.KA=this.tb=null},w.prototype.get=function(){return this.KA},w.prototype.set=function(c){if(this.KA=c,c!=null)throw c.K()==322&&(this.tb=c),h.i.Ra()},w.prototype.create=function(c){if(c!=322)throw h.i.ga("Not Implemented");this.Qr()},w.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.KA=this.tb},w}();h.jg=O}(B||(B={})),function(h){(h=h.SL||(h.SL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(B||(B={})),function(h){var O=function(c){this.bj=c,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},w=function(){function c(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return c.prototype.rB=function(a){if(a!=null){for(var n=0,o=a.length;n<o;n++)this.mW(a[n]);a.length=0}},c.prototype.mW=function(a){a.bj=null,this.Kq.push(a)},c.prototype.Qw=function(a){if(this.Kq.length===0)var n=new O(a);else(n=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return n},c.prototype.NR=function(a,n){return a==0?this.bt[n]:this.Aw[n]},c.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new h.jg);var a=this.HA[this.Ew];return this.Ew++,a},c.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},c.prototype.Qo=function(a){this.oo.push(this.Qw(a))},c.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},c.prototype.Xp=function(a,n){return this.NR(a,n).bj},c.prototype.Fa=function(a,n){if(this.oo.length!=2)throw h.i.Ra();this.ra=a;var o=h.mc.ox(.01*a),u=!1,p=this.oo[0],f=this.oo[1];if(n||(5&p.bj.Br(f.bj,a,!0))!=0){if(p.bj.K()==322){var g=p.bj;if(f.bj.K()==322){n=f.bj;var b=h.zb.Yx(g,n,null,this.Hq,this.Dk,a);if(b==0)throw h.zb.Yx(g,n,null,this.Hq,this.Dk,a),h.i.Ra();a=Array(9),h.P.bv(a,null);for(var S=0;S<b;S++){var $=this.Hq[S],E=this.Dk[S],C=p.nB,k=1;$==0?(C=p.oB,k=p.mC):$==1&&(C=p.mB,k=p.lC);var L=f.nB,N=1;E==0?(L=f.oB,N=f.mC):E==1&&(L=f.mB,N=f.lC);var U=new h.h;C==L?(C=new h.h,g.ic($,C),$=new h.h,n.ic(E,$),N/=E=k+N,h.mc.JG(C,$,N,U),h.h.zc(U,C)+h.h.zc(U,$)>o&&(u=!0)):C>L?(g.ic($,U),$=new h.h,n.ic(E,$),h.h.zc(U,$)>o&&(u=!0)):(n.ic(E,U),C=new h.h,g.ic($,C),h.h.zc(U,C)>o&&(u=!0)),a[S]=U}for(p=0,f=-1,S=0;S<=b;S++)(N=S<b?this.Hq[S]:1)!=p&&(o=this.WA(),g.dh(p,N,o),f!=-1&&o.get().Ec(a[f]),S!=b&&o.get().Rc(a[S]),p=N,this.bt.push(this.Qw(o.get()))),f=S;for(g=[0,0,0,0,0,0,0,0,0],S=0;S<b;S++)g[S]=S;for(1<b&&this.Dk[0]>this.Dk[1]&&(N=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=N,S=g[0],g[0]=g[1],g[1]=S),p=0,f=-1,S=0;S<=b;S++)(N=S<b?this.Dk[S]:1)!=p&&(o=this.WA(),n.dh(p,N,o),f!=-1&&(p=g[f],o.get().Ec(a[p])),S!=b&&(p=g[S],o.get().Rc(a[p])),p=N,this.Aw.push(this.Qw(o.get()))),f=S;return u}}throw h.i.Ra()}return!1},c.prototype.Fz=function(a,n,o){if(n.copyTo(this.Cf),this.oo.length!=1)throw h.i.Ra();this.ra=a;var u=this.oo[0];if(o||u.bj.tu(n.D(),a,!0)){if(u.bj.K()!=322)throw h.i.Ra();var p=(a=u.bj).ge(n.D(),!1);this.Hq[0]=p;var f=u.nB;for(o=1,p==0?(f=u.oB,o=u.mC):p==1&&(f=u.mB,o=u.lC),u=new h.h,f==0?(f=new h.h,a.ic(p,f),n=n.D(),h.mc.JG(f,n,1/(o+1),u)):0<f?(u=new h.h,a.ic(p,u)):u=n.D(),o=0,p=-1,f=0;1>=f;f++){if((n=1>f?this.Hq[f]:1)!=o){var g=this.WA();a.dh(o,n,g),p!=-1&&g.get().Ec(u),f!=1&&g.get().Rc(u),o=n,this.bt.push(this.Qw(g.get()))}p=f}this.Cf.Db(u)}},c}();h.OC=w}(B||(B={})),function(h){var O=function(){function w(c){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=c,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new h.h}return w.prototype.wW=function(c){if(this.ib!=c.ib)throw h.i.Hb();this.Af=c.Af,this.Kd=c.Kd,this.gb=c.gb,this.El=c.El,this.cg=c.cg,this.Bm=c.Bm,this.tk=null},w.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw h.i.de();this.Kd++}return this.tk},w.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw h.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},w.prototype.xW=function(){this.Af=-1,this.Kd=0},w.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},w.prototype.Wb=function(c,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var n=this.DM();if(c>=n&&c<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=c-n)}a=0<=a&&a<this.ib.ea()&&c>=this.ib.Ca(a)&&c<this.ib.Wc(a)?a:this.ib.nz(c),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=c-this.ib.Ca(a),this.cg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},w.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},w.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},w.prototype.Vx=function(c){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(c)&&(a=0),this.ib.Ka(c)-a},w.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},w.prototype.EB=function(){this.Bm=!0},w.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},w.prototype.DM=function(){return this.ib.Ca(this.gb)},w.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},w.prototype.xm=function(){return this.Af==0},w.prototype.Sn=function(){return this.Af==this.cg-1},w.prototype.Ia=function(){return this.Kd<this.cg},w.prototype.zz=function(){return 0<this.Kd},w.prototype.Qf=function(){var c=new w(this.ib);return c.Af=this.Af,c.Kd=this.Kd,c.cg=this.cg,c.gb=this.gb,c.El=this.El,c.ib=this.ib,c.Bm=this.Bm,c},w.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw h.i.de();this.Af=this.Kd;var c=this.xb();this.ib.oc();var a=this.ib.Se,n=1;switch(a!=null&&(n=7&a.read(c)),a=this.ib.description,n){case 1:this.tb==null&&(this.tb=new h.zb),this.tk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.tk.Pf(a),n=this.kk(),this.ib.Hc(c,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(n,this.Fs),this.tk.Rc(this.Fs);for(var o=1,u=a.Ba;o<u;o++)for(var p=a.ld(o),f=h.sa.Wa(p),g=0;g<f;g++){var b=this.ib.Vc(p,c,g);this.tk.TB(p,g,b),b=this.ib.Vc(p,n,g),this.tk.JB(p,g,b)}},w.prototype.VS=function(){return this.gb==this.ib.ea()-1},w.prototype.Rn=function(){var c=this.ib.QR();return c!=null&&(7&c.read(this.Af))!=1},w}();h.TL=O}(B||(B={})),function(h){var O=function(){function w(c){c instanceof h.ba?(this.sH=c,this.za=-1,this.Gi=1):(this.qT=c.slice(0),this.za=-1,this.Gi=c.length)}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},w.prototype.re=function(){},w}();h.$c=O}(B||(B={})),function(h){var O=function(){this.next=null},w=function(){function c(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return c.prototype.wX=function(a,n,o){this.ri=a,this.rl=n,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=h.P.mg(384,0)),this.iK()},c.prototype.S=function(){return this.ri},c.prototype.da=function(){return this.rl},c.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},c.prototype.iK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var n=this.Yl[a];n!=null;){var o=n;n=n.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},c.prototype.dJ=function(a){for(this.fF=a==c.Bx,a=this.Nw;a<=this.Mw;a++)this.nN(),this.gN(a),this.UP();this.iK()},c.prototype.fy=function(a,n,o,u){if(n!=u){var p=1;if(n>u&&(p=a,a=o,o=p,p=n,n=u,u=p,p=-1),!(0>u||n>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var f=(o-a)/(u-n);u>this.rl&&(o=f*((u=this.rl)-n)+a),0>n&&(a=f*(0-n)+a,n=0);var g=Math.max(this.ri+1,8388607);-8388607>a?(n=(0-a)/f+n,a=0):a>g&&(n=(this.ri-a)/f+n,a=this.ri),-8388607>o?u=(0-a)/f+n:o>g&&(u=(this.ri-a)/f+n),(n=h.P.truncate(n))!=(u=h.P.truncate(u))&&((o=new O).x=h.P.truncate(4294967296*a),o.y=n,o.H=u,o.RP=h.P.truncate(4294967296*f),o.dir=p,this.Yl==null&&(this.Yl=h.P.mg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},c.prototype.nN=function(){if(this.Lh!=null){for(var a=!1,n=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var u=o;o=o.next,n!=null?n.next=o:this.Lh=o,u.next=null}else o.x+=o.RP,n!=null&&n.x>o.x&&(a=!0),n=o,o=o.next;a&&(this.Lh=this.aK(this.Lh))}},c.prototype.gN=function(a){if(!(a>=this.rl)){var n=this.Yl[a];if(n!=null){this.Yl[a]=null,n=this.aK(n),this.Vq-=this.bK,a=this.Lh;for(var o=!0,u=n,p=null;a!=null&&u!=null;)a.x>u.x?(o&&(this.Lh=u),o=u.next,u.next=a,p!=null&&(p.next=u),p=u,u=o):(o=a.next,a.next=u,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=n)}}},c.$J=function(a,n){return 0>a?0:a>n?n:a},c.prototype.UP=function(){if(this.Lh!=null){for(var a=0,n=this.Lh,o=h.P.truncate(h.P.SG(n.x)),u=n.next;u!=null;u=u.next)if(a=this.fF?1^a:a+u.dir,u.x>n.x){var p=h.P.truncate(h.P.SG(u.x));a!=0&&(n=c.$J(o,this.ri),(o=c.$J(p,this.ri))>n&&n<this.ri&&(this.jn[this.Ql++]=n,this.jn[this.Ql++]=o,this.jn[this.Ql++]=u.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),n=u,o=p}}},c.prototype.aK=function(a){for(var n=0,o=a;o!=null;o=o.next)n++;if(this.bK=n,n==1)return a;this.Lf==null?this.Lf=h.P.mg(Math.max(n,16),null):this.Lf.length<n&&(this.Lf=h.P.mg(Math.max(n,2*this.Lf.length),null));var u=0;for(o=a;o!=null;o=o.next)this.Lf[u++]=o;for(n==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):c.vN(this.Lf,n,function(p,f){return p==f?0:p.x<f.x?-1:p.x>f.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,u=1;u<n;u++)o.next=this.Lf[u],o=this.Lf[u],this.Lf[u]=null;return o.next=null,a},c.vN=function(a,n,o){if(n==a.length)a.sort(o);else{var u=a.slice(0,0),p=a.slice(n);n=a.slice(0,n).sort(o),a.length=0,a.push.apply(a,u.concat(n).concat(p))}},c.Bx=0,c}();h.Ox=w}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.wi=function(c,a){var n=this.g.Qa(c,this.Rq);if(this.Fl==n&&(this.Fl=this.pe.lb(this.Fl)),this.jo==n&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,n),this.dk(c),a&&(a=this.g.cd(c))!=-1&&this.g.Ya(a)==c){var o=this.g.V(c);if(o!=c){if((n=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(c))!=c&&(n=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},w.prototype.kD=function(){for(var c=!1,a=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var n=this.jo,o=0,u=!0;n!=this.Fl;){var p=this.pe.getData(n),f=new h.h;this.g.Hc(p,f),u&&(this.g.Hc(p,a),u=!1),f=this.g.Na(p);var g=this.g.V(p);this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(g,this.Ag)!=-559038737&&(this.Yh.add(g),this.g.Sa(g,this.Ag,-559038737),this.Bs.add(p),this.ye.add(o++)),n=this.pe.lb(n)}if(2>this.Yh.size)break;var b=this;for(this.ye.Wd(0,this.ye.size,function(S,$){return b.kM(S,$)}),n=0,o=this.ye.size;n<o;n++)u=this.ye.get(n),u=this.Yh.get(u),this.g.Sa(u,this.Ag,n),f=new h.h,this.g.Hc(u,f);for(f=this.OM(a),n=0,o=this.ye.size;n<o;n++)(u=this.ye.get(n))!=-1&&(u=this.Yh.get(u),this.g.Sa(u,this.Ag,-1));if(!f)break;c=!0}return c},w.prototype.OM=function(c){for(var a=!1,n=!0;n;){n=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++){var g=this.ye.get(o);u=this.ye.get(u),g=this.Yh.get(g),u=this.Yh.get(u);var b=this.g.V(g);this.g.Fv(b,c)||(b=this.g.Na(g));var S=this.g.V(u);this.g.Fv(S,c)||(S=this.g.Na(u));var $=this.ru(b,g),E=this.ru(S,u),C=$?this.g.Na(b):this.g.V(b),k=E?this.g.Na(S):this.g.V(S),L=!1;(this.up(b)||this.up(S)||this.up(g)||this.up(u)||this.up(C)||this.up(k))&&(L=!0),!L&&this.g.hq(g,u)&&(L=!0,this.oD($,E,b,g,S,u)),!L&&this.g.hq(C,k)&&(L=!0,this.oD(!$,!E,b,C,S,k)),L&&(a=!0),n=n||L,o=this.em(o),u=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),u=this.em(o),p=0,f=this.ye.size;p<f&&o!=-1&&u!=-1&&o!=u;p++)g=this.ye.get(o),u=this.ye.get(u),g=this.Yh.get(g),u=this.Yh.get(u),b=this.g.V(g),this.g.Fv(b,c)||(b=this.g.Na(g)),S=this.g.V(u),this.g.Fv(S,c)||(S=this.g.Na(u)),$=this.ru(b,g),E=this.ru(S,u),C=$?this.g.Na(b):this.g.V(b),k=E?this.g.Na(S):this.g.V(S),this.yM($,E,g,b,C,u,S,k)&&(a=!0),o=this.em(o),u=this.em(o);return a},w.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new h.Hg().HU(this.hw,this.g,this.Y,this.od);var c=!1,a=!0;this.Ag=this.Rq=-1;var n=this.g.I(this.Y),o=new h.ja(0);o.Jb(n);for(var u=this.g.Ob(this.Y);u!=-1;u=this.g.Sb(u))for(var p=this.g.Ya(u),f=0,g=this.g.Ka(u);f<g;f++)o.add(p),p=this.g.V(p);var b=this.g.ud.o,S=this.g.ud.Mf;this.g.wb.oc();var $=this.g.wb.Aa[0].o;for(o.Wd(0,n,function(C,k){var L=b[S*C],N=b[S*k],U=$[2*L];L=$[2*L+1];var H=$[2*N];return(U=L<(N=$[2*N+1])?-1:L>N?1:U<H?-1:U>H?1:0)==0&&(U=(C=b[S*C+3])<(k=b[S*k+3])?-1:C==k?0:1),U}),this.Rq=this.g.Hd(),this.pe=new h.lp,this.MA=this.pe.Rh(0),this.pe.hn(n),u=0;u<n;u++)p=o.get(u),f=this.pe.addElement(this.MA,p),this.g.Sa(p,this.Rq,f);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(c=!0);a;){a=!1,n=0,o=!1;do{o=!1,this.jo=-1,g=0,u=new h.h,f=new h.h;for(var E=this.pe.sc(this.MA);E!=-1;)p=this.pe.getData(E),this.jo!=-1?(this.g.Hc(p,f),u.rb(f)?g++:(u.N(f),this.Fl=E,0<g&&(p=this.kD())&&(o=!0,this.Fl!=-1&&(p=this.pe.getData(this.Fl),this.g.Hc(p,u))),this.jo=E=this.Fl,g=0)):(this.jo=E,this.g.Hc(this.pe.getData(E),u),g=0),E!=-1&&(E=this.pe.lb(E));if(this.Fl=-1,0<g&&(p=this.kD())&&(o=!0),10<n++)throw h.i.Ra();o&&this.BM(),this.YC()&&(o=!0),a=a||o&&!1,c=c||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),h.RL.W(this.g,this.Y,this.pe,this.hw)||c},w.prototype.ru=function(c,a){return this.g.V(a)!=c},w.prototype.yM=function(c,a,n,o,u,p,f,g){if(o==f)return this.dk(n),this.dk(p),!1;var b=this.g.Qa(n,this.Ag),S=this.g.Qa(u,this.Ag),$=this.g.Qa(p,this.Ag),E=this.g.Qa(g,this.Ag),C=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,C[0]=b,n[1]=0,C[1]=S,n[2]=1,C[2]=$,n[3]=1,C[3]=E,b=1;4>b;b++){for(S=C[b],$=n[b],E=b-1;0<=E&&C[E]>S;)C[E+1]=C[E],n[E+1]=n[E],E--;C[E+1]=S,n[E+1]=$}return C=0,n[0]!=0&&(C|=1),n[1]!=0&&(C|=2),n[2]!=0&&(C|=4),n[3]!=0&&(C|=8),(C==5||C==10)&&(c==a?c?(this.g.Cc(g,o),this.g.Dc(o,g),this.g.Cc(u,f),this.g.Dc(f,u)):(this.g.Dc(g,o),this.g.Cc(o,g),this.g.Dc(u,f),this.g.Cc(f,u)):c?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(f,u),this.g.Cc(u,f)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(f,u),this.g.Dc(u,f)),!0)},w.prototype.oD=function(c,a,n,o,u,p){this.IY?this.QM():this.PM(c,a,n,o,u,p)},w.prototype.QM=function(){throw h.i.ga("not implemented.")},w.prototype.PM=function(c,a,n,o,u,p){if(c!=a)c?(this.g.Cc(n,u),this.g.Dc(u,n),this.g.Cc(p,o),this.g.Dc(o,p),this.xn(u,n),this.wi(u,!0),this.g.oi(u,!0),this.dk(n),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(u,n),this.g.Dc(n,u),this.g.Cc(o,p),this.g.Dc(p,o),this.xn(u,n),this.wi(u,!0),this.g.oi(u,!1),this.dk(n),this.xn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.dk(o);else{var f=c?n:o,g=a?u:p;for(c=c?o:n,a=a?p:u,u=!1,this.g.Cc(f,g),this.g.Cc(g,f),this.g.Dc(c,a),this.g.Dc(a,c),p=a;p!=g;)n=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,n),u=u||p==f,p=o;u||(n=this.g.Na(g),o=this.g.V(g),this.g.Dc(g,o),this.g.Cc(g,n)),this.xn(g,f),this.wi(g,!0),this.g.oi(g,!1),this.dk(f),this.xn(a,c),this.wi(a,!0),this.g.oi(a,!1),this.dk(c)}},w.prototype.YC=function(){for(var c=!1,a=this.g.Ob(this.Y);a!=-1;){for(var n=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u&&1<u;){var p=this.g.Na(n),f=this.g.V(n);this.g.hq(p,f)?(c=!0,this.wi(n,!1),this.g.qd(n,!0),this.wi(f,!1),this.g.qd(f,!0),n=p,o=0,u=this.g.Ka(a)):(n=f,o++)}if(2>this.g.Ka(a)){for(c=this.g.Ya(a),o=0,u=this.g.Ka(a);o<u;o++)this.wi(c,!1),c=this.g.V(c);a=this.g.ar(a),c=!0}else a=this.g.Sb(a)}return c},w.prototype.up=function(c){for(var a=!1;;){var n=this.g.V(c),o=this.g.Na(c);if(n==c)return this.wi(c,!0),this.g.oi(c,!1),!0;if(!this.g.hq(n,o)||(a=!0,this.dk(o),this.dk(n),this.wi(c,!0),this.g.oi(c,!1),this.xn(n,o),this.wi(n,!0),this.g.oi(n,!0),n==o))break;c=o}return a},w.prototype.BM=function(){for(var c=0,a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a)){var n=this.pe.getData(a);this.g.cj(n,-1)}for(var o=0,u=this.g.Ob(this.Y);u!=-1;)if((a=this.g.Ya(u))==-1||this.g.cd(a)!=-1)n=u,u=this.g.Sb(u),this.g.br(n);else{this.g.cj(a,u);var p=1;for(n=this.g.V(a);n!=a;n=this.g.V(n))this.g.cj(n,u),p++;this.g.fp(u,!1),this.g.Xj(u,p),this.g.Yg(u,this.g.Na(a)),o+=p,c++,u=this.g.Sb(u)}for(a=this.pe.sc(this.pe.ke);a!=-1;a=this.pe.lb(a))n=this.pe.getData(a),this.g.cd(n)==-1&&(u=this.g.iG(this.Y,n,n,null),o+=this.g.Ka(u),c++);for(this.g.Tl(this.Y,c),this.g.Vj(this.Y,o),c=0,o=this.g.md;o!=-1;o=this.g.ve(o))c+=this.g.I(o);this.g.XB(c)},w.prototype.em=function(c){for(var a=0,n=this.ye.size-1;a<n;a++)if(c=(c+1)%this.ye.size,this.ye.get(c)!=-1)return c;return-1},w.prototype.xn=function(c,a){var n=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.Ag);this.g.gC(c,a),this.g.Sa(a,this.Rq,n),this.g.Sa(a,this.Ag,o)},w.prototype.dk=function(c){var a=this.g.Qa(c,this.Ag);a!=-1&&(this.ye.set(a,-1),this.g.Sa(c,this.Ag,-1))},w.W=function(c,a,n,o,u){var p=new w;return p.g=c,p.Y=a,p.sA=n,p.hw=o,p.od=u,p.SM()},w.prototype.kM=function(c,a){var n=this.Yh.get(c),o=new h.h;this.g.Hc(n,o),n=new h.h;var u=this.Yh.get(a);return this.g.Hc(u,n),o.rb(n)?0:(u=this.Bs.get(c),c=new h.h,this.g.Hc(u,c),u=this.Bs.get(a),a=new h.h,this.g.Hc(u,a),(u=new h.h).vc(o,c),(o=new h.h).vc(n,a),h.h.pu(u,o))},w}();h.tn=O}(B||(B={})),function(h){var O;(O=h.VL||(h.VL={}))[O.Local=0]="Local",O[O.Geographic=1]="Geographic",O[O.Projected=2]="Projected",O[O.Image=3]="Image",O[O.Unknown=4]="Unknown",function(c){c[c.Integer32=0]="Integer32",c[c.Integer64=1]="Integer64",c[c.FloatingPoint=2]="FloatingPoint"}(h.OL||(h.OL={}));var w=function(){function c(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return c.prototype.Fc=function(){return this.fg},c.prototype.QF=function(){return 1},c.prototype.QW=function(a){this.hA=a},c.prototype.Yd=function(){if(this.hA!==null)return this.hA;var a=.001;return this.fg!=0?a=h.yr.xQ(this.fg):this.yh!=null&&(a=h.SC.yQ(this.yh)),a},c.prototype.wz=function(){return this.yh},c.prototype.Id=function(){return this.fg!=0?h.Uc.ah(h.yr.Ny(this.fg)):this.yh!=null?h.SC.zQ(this.yh):void 0},c.Tb=function(a){if(a.fg!=0){if(h.yr.US(a.fg)===!0)return 1;if(h.yr.WS(a.fg)===!0)return 2}return 4},c.prototype.cs=function(){var a=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=h.yr.AK(a),this.Jo!=-1?this.Jo:a)},c.create=function(a){if(0>=a)throw h.i.O("Invalid or unsupported wkid: "+a);var n=new c;return n.fg=a,n},c.lP=function(a){if(a==null||a.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var n=new c;return n.yh=a,n},c.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.fg==a.fg&&(this.fg!=0||this.yh===a.yh)},c.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},c.prototype.dc=function(){if(this.rp!=="")return this.rp;var a=this.toString();if(Array.prototype.reduce)return this.rp="S"+a.split("").reduce(function(u,p){return(u=(u<<5)-u+p.charCodeAt(0))&u},0);var n=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)n=(n<<5)-n+a.charCodeAt(o),n&=n;return this.rp="S"+n},c.prototype.Mn=function(){return this.Yd(0)},c.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.tP(this)},c.UN=2147483645,c.VN=9007199254740990,c}();h.Gg=w}(B||(B={})),function(h){var O=function(w){function c(){var a=w!==null&&w.apply(this,arguments)||this;return a.Li=null,a.NT=null,a.Jq=new h.UL,a.Go=null,a.lw=null,a}return Re(c,w),c.tP=function(a){var n=new c;if(n.fg=a.fg,n.Jo=a.Jo,n.UH=a.UH,n.yh=a.yh,n.yh!==""&&n.yh!==null){a=c.fM(n.yh);var o=c.dM(n.yh);n.Jq.Wx(a,o,h.ju.Integer64),n.ay(a),n.cy(o),n.fg=a.cs()}else a=c.eM(n.fg),n.ay(a),n.cy(null),n.Jq.Wx(a,null,h.ju.Integer64);return n},c.prototype.Yd=function(a){return this.Jq.Mn(a)},c.dM=function(a){if(0>=a.length)throw h.i.O();var n=null;try{n=h.IC.fromString(a)}catch{n=null}return n==null?null:c.XC(n,!0)},c.prototype.ay=function(a){this.Ld=a,this.Go=this.Ld.Id()},c.prototype.cy=function(a){this.FH=a,this.NT=this.FH!=null?this.FH.Go:null},c.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},c.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},c.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},c.prototype.rm=function(){return this.Ld.rm()},c.prototype.bf=function(){return this.Ld.bf()},c.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},c.prototype.Wp=function(){return this.Ld.Wp()},c.prototype.Yr=function(){return this.Ld.Yr()},c.prototype.mk=function(){return this.Ld.mk()},c.prototype.fS=function(a){return h.JC.Ky(this.Ld,a.Ld)},c.prototype.ol=function(){return this.Ld.ol()},c.prototype.Xr=function(){return this.Ld.Xr()},c.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},c.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var a=new h.l;return this.Ld.ih(a),a},c.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.uo},c.prototype.CR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var a=new h.l;return this.Ld.BR(a),a},c.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},c.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},c.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},c.prototype.KQ=function(){return this.Ld.kv()},c.prototype.Sp=function(){return this.Go.getUnitFactor()},c.prototype.pz=function(a){return this.Jq.pz(a)},c.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.hk().tc();if(a==0||a===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=c.XE(a,this.Jq.QF())},c.XE=function(a,n){if(a==null)throw h.i.O("null pointer.");var o=new c;return a=c.ou(a,!0),o.Jq.Wx(a,null,n),o.ay(a),o.cy(null),o.fg=a.cs(),o},c.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},c.prototype.kv=function(){return this.Ld.kv()},c.ou=function(a,n){var o=a.getCode();if(0>=o&&0<(o=h.qf.getCode(a))){if((a=h.qf.coordsys(o))==null)throw h.i.O("Text to wkid mapping had failed: "+o);return c.ou(a,n)}if(n&&0<o&&(n=c.qx[o]))return n;n=h.Ab.zv(a,o,!1);var u=c.gK[n];return u||(a=0>=o?a:h.qf.coordsys(o),a=new h.JC(a),c.gK[n]=a,0<o&&(c.qx[o]=a),a)},c.eM=function(a){if(0>=a)throw h.i.O("Invalid or unsupported wkid: "+a);var n=c.qx[a];if(n!=null)return n;if((n=h.qf.coordsys(a))==null)throw h.i.O("Invalid or unsupported wkid: "+a);return(n=c.ou(n,!1)).cs()!=a&&(c.qx[a]=n),n},c.fM=function(a){if(a==null||a===void 0||a.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var n=null;try{n=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw h.i.O("Cannot create SpatialReference from text. "+o.message)}if(n===null)throw h.i.O("Cannot create SpatialReference from text. ");return c.ou(n,!0)},c.XC=function(a,n){var o,u=a.getCode();if(0>=u&&0<(u=h.qf.getCode(a))){if((u=h.qf.vertcs(u))===null)throw h.i.O();return c.XC(u,n)}if(n&&0<u&&(n=c.fK[u])||(a=h.Ab.zv(a,u,!1),n=c.hK[a]))return n;if(0>=u||(o=h.qf.vertcs(u)),o===null)throw h.i.O();return o=new h.KL(o),c.hK[a]=o,0<u&&(c.fK[u]=o),o},c.nI=function(a,n){if(n===null||n.B())return null;var o=new h.l;if(n!==null&&a.Tb()!=1){var u=a.tc(),p=u.gh();a=h.xr.Pr(a,u,null,null),(n=h.Gx.local().W(n,a,null)).A(o)}else p=a.gh(),n.A(o);return n=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new h.GC(o.v,o.G,o.C,o.H,n,p)},c.gD=function(a){var n={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var u=a[o],p={HY:!1,VY:"",UY:-1,geogtran:null};u.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var f=u.getGeogtran().getCode();-1<f?p.wkid=f:p.wkt=u.getGeogtran().toString(),n.steps.push(p)}return n},c.SR=function(a,n,o,u){return o===void 0&&(o=null),o=c.nI(u,o),a=h.np.getGTlist(a.gh(),n.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,o,1),n=null,a&&0<a.length&&(n=this.gD(a[0]),h.Lx.destroy(a)),o!==null&&o.destroy(),n},c.TR=function(a,n,o,u){var p;if(o===void 0&&(o=null),u===void 0&&(u=null),p===void 0&&(p=30),o=c.nI(u,o),a=h.np.getGTlist(a.gh(),n.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,o,p),n=[],a&&0<a.length){for(p=0;p<a.length;p++)n.push(this.gD(a[p]));h.Lx.destroy(a)}return o!==null&&o.destroy(),n},c.qx={},c.gK={},c.fK={},c.hK={},c}(h.Gg);h.iu=O}(B||(B={})),function(h){var O,w;(w=O=h.ju||(h.ju={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var c=function(){function a(){this.sp()}return a.prototype.assign=function(n){this.Hm=n.Hm,this.Im=n.Im,this.Rj=n.Rj,this.nA=n.nA,this.Ho=n.Ho,this.mA=n.mA,this.Kk=n.Kk,this.Oq=n.Oq,this.Nq=n.Nq,this.Tm=n.Tm},a.prototype.QF=function(){return this.Tm},a.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=O.FloatingPoint},a.prototype.Wx=function(n,o,u){if(this.sp(),this.Tm=u,u!=O.FloatingPoint){var p=new h.l;n.cR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=n.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(p=(u==O.Integer64?1e-9:1/18e5)*n.bf(),this.Rj=1/p):p==h.Tc.PE_TYPE_PROJCS&&(p=(u==O.Integer64?1e-4:.001)*n.rm(),this.Rj=1/p),o!=null?(p=(u==O.Integer32?.001:1e-4)*o.DH,this.Ho=1/p):this.Ho=1e4,this.TM(),this.Kk=n.uw,this.Oq=o!=null?.001*o.DH:.001,this.Nq=2220446049250313e-29},a.prototype.TM=function(){if(this.Tm!=O.FloatingPoint){var n=this.Tm==O.Integer64?h.Gg.VN:h.Gg.UN,o=n/this.Rj,u=this.Hm+o,p=h.P.truncate((u-this.Hm)*this.Rj);p>n&&(this.Rj=n/(u-this.Hm)),o=this.Im+o,(p=h.P.truncate((o-this.Im)*this.Rj))>n&&(this.Rj=n/(o-this.Im))}},a.prototype.WB=function(n){switch(n){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Mn=function(n){switch(n){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(n){if(this.Tm==O.FloatingPoint)return 0;switch(n){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},a.prototype.toString=function(){var n="SRPD [m_toleranceXY: "+this.Kk.toString();return(n=(n=(n=(n=(n=(n=(n=(n=(n=n+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();h.UL=c}(B||(B={})),function(h){function O(u,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*u,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function w(u,p,f){return u=u/6378137*57.29577951308232,f?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function c(u,p,f){var g=u.Qf();if(u.K()===33)p=p(g.Ng(),g.kh()),g.Db(p[0],p[1]);else if(u.K()===197){var b=p(u.gs(),u.js(),f);p=p(u.fs(),u.hs(),f),g.L(b[0],b[1],p[0],p[1])}else for(b=new h.h,u=0;u<g.I();u++){g.D(u,b);var S=p(b.x,b.y,f);b.na(S[0],S[1]),g.Db(u,b)}return g}function a(u){return c(u,w,!0)}function n(u){return c(u,O,!0)}var o=Math.PI/180;h.PK=function(){function u(){}return u.xu=function(p){var f=Math.sqrt(.006694379990197414),g=Math.sin(p.y*o);return h.h.construct(6378137*p.x*o,3.1677196636462314e6*(g/(1-.006694379990197414*g*g)-1/(2*f)*Math.log((1-f*g)/(1+f*g))))},u.Ux=function(p,f,g,b){var S=1/298.257223563,$=Math.sin(g);g=Math.cos(g);var E=(1-S)*Math.tan(p),C=E*(p=1/Math.sqrt(1+E*E)),k=Math.atan2(E,g),L=(E=p*$)*E,N=1-L,U=27233160610754688e-5*N/4040829998466145e-2,H=1+U/16384*(4096+U*(U*(320-175*U)-768)),j=U/1024*(256+U*(U*(74-47*U)-128));U=b/(635675231424518e-8*H);for(var K,se,ne,pe=2*Math.PI;1e-12<Math.abs(U-pe);)ne=Math.cos(2*k+U),pe=U,U=b/(635675231424518e-8*H)+j*(K=Math.sin(U))*(ne+j/4*((se=Math.cos(U))*(2*ne*ne-1)-j/6*ne*(4*K*K-3)*(4*ne*ne-3)));return b=C*K-p*se*g,N=S/16*N*(4+S*(4-3*N)),h.h.construct((f+(Math.atan2(K*$,p*se-C*K*g)-(1-N)*S*E*(U+N*K*(ne+N*se*(2*ne*ne-1)))))/o,Math.atan2(C*se+p*K*g,(1-S)*Math.sqrt(L+b*b))/o)},u.HM=function(p,f,g,b){var S=1/298.257223563,$=b-f,E=Math.atan((1-S)*Math.tan(p)),C=Math.atan((1-S)*Math.tan(g)),k=Math.sin(E);E=Math.cos(E);var L=Math.sin(C);C=Math.cos(C);var N=$,U=1e3;do{var H=Math.sin(N),j=Math.cos(N),K=Math.sqrt(C*H*C*H+(E*L-k*C*j)*(E*L-k*C*j));if(K===0)return 0;j=k*L+E*C*j;var se=Math.atan2(K,j),ne=E*C*H/K,pe=1-ne*ne;H=j-2*k*L/pe,isNaN(H)&&(H=0);var ce=S/16*pe*(4+S*(4-3*pe)),_e=N;N=$+(1-ce)*S*ne*(se+ce*K*(H+ce*j*(2*H*H-1)))}while(1e-12<Math.abs(N-_e)&&0<--U);return U===0?(k=b-f,{azimuth:Math.atan2(Math.sin(k)*Math.cos(g),Math.cos(p)*Math.sin(g)-Math.sin(p)*Math.cos(g)*Math.cos(k)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos(b-f))}):(f=(p=27233160610754688e-5*pe/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(C*Math.sin(N),E*L-k*C*Math.cos(N)),TQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(se-f*K*(H+f/4*(j*(2*H*H-1)-f/6*H*(4*K*K-3)*(4*H*H-3)))),TY:Math.atan2(E*Math.sin(N),E*L*Math.cos(N)-k*C)})},u.eQ=function(p){var f=p.hasAttribute(1),g=p.hasAttribute(2),b=[],S=p.ea(),$=null,E=null;f&&($=p.vb(1)),g&&(E=p.vb(2));for(var C=new h.h,k=0;k<S;k++){for(var L=p.Ca(k),N=p.Ka(k),U=0,H=0,j=NaN,K=NaN,se=NaN,ne=NaN,pe=p.ec(k),ce=[],_e=L;_e<L+N;_e++){p.D(_e,C),ne=se=NaN;var Oe=[C.x,C.y];f&&(se=$.get(_e),Oe.push(se)),g&&(S=E.get(_e),Oe.push(ne)),_e==L&&pe&&(U=C.x,H=C.y,j=se,K=ne),ce.push(Oe)}!pe||U==C.x&&H==C.y&&(!f||isNaN(j)&&isNaN(se)||j==se)&&(!g||isNaN(K)&&isNaN(ne)||K==ne)||ce.push(ce[0].slice(0)),b.push(ce)}return b},u.Ry=function(p,f){p=u.eQ(p),637.100877141506>f&&(f=637.100877141506);for(var g,b=[],S=0;S<p.length;S++){var $,E,C=p[S];b.push(g=[]),g.push([C[0][0],C[0][1]]);var k=C[0][0]*o,L=C[0][1]*o;for($=0;$<C.length-1;$++){var N=C[$+1][0]*o,U=C[$+1][1]*o;if(k!==N||L!==U){N=(U=u.HM(L,k,U,N)).azimuth;var H=(U=U.TQ)/f;if(1<H){for(E=1;E<=H-1;E++){var j=u.Ux(L,k,N,E*f);g.push([j.x,j.y])}E=u.Ux(L,k,N,(U+Math.floor(H-1)*f)/2),g.push([E.x,E.y])}L=u.Ux(L,k,N,U),g.push([L.x,L.y]),k=L.x*o,L=L.y*o}}}return{lJ:b}},u.SQ=function(p){for(var f=[],g=0;g<p.length;g++){var b=p[g];b=u.Ry(b,1e4),f.push(b)}p=[];for(var S=0;S<f.length;S++){b=f[S];var $=0;for(g=0;g<b.lJ.length;g++){var E,C=b.lJ[g],k=u.xu(h.h.construct(C[0][0],C[0][1])),L=u.xu(h.h.construct(C[C.length-1][0],C[C.length-1][1])),N=L.x*k.y-k.x*L.y;for(E=0;E<C.length-1;E++)k=u.xu(h.h.construct(C[E+1][0],C[E+1][1])),N+=(L=u.xu(h.h.construct(C[E][0],C[E][1]))).x*k.y-k.x*L.y;$+=N}$/=1,p.push($/-2)}return p},u}(),h.cb=function(){function u(){}return u.sB=function(p,f,g,b,S,$,E){u.bD[p.dc()]=f,isNaN(g)==0&&(u.hD[p.dc()]=g),isNaN(b)==0&&(u.uD[p.dc()]=b),isNaN(S)==0&&(u.WC[p.dc()]=S),u.iD[p.dc()]=$,E!==null&&(u.jD[p.dc()]=E)},u.Yw=function(p,f,g){u.nD[p.dc()+"-"+f.dc()]=g},u.tc=function(p){if((p=u.bD[p.dc()])==null)throw h.i.Fe();return p},u.bf=function(p){if((p=u.hD[p.dc()])==null)throw h.i.Fe();return p},u.xv=function(p){if((p=u.uD[p.dc()])==null)throw h.i.Fe();return p},u.gv=function(p){if((p=u.WC[p.dc()])==null)throw h.i.Fe();return p},u.ih=function(p){if((p=u.jD[p.dc()])==null)throw h.i.Fe();return h.l.construct(p[0],p[1],p[2],p[3])},u.Xc=function(p){if((p=u.iD[p.dc()])==null)throw h.i.Fe();return p},u.Bh=function(p,f,g){if(f.Nb(g))return p;var b=u.nD[f.dc()+"-"+g.dc()];if(b!==void 0)return b(p,f,g);throw h.i.Fe()},u.wt=function(){throw h.i.Fe()},u.XQ=function(){throw h.i.Fe()},u.ZV=function(){throw h.i.Fe()},u.ol=function(){throw h.i.Fe()},u.nW=function(){var p=h.Gg.create(102100),f=h.Gg.create(3857),g=h.Gg.create(4326);h.cb.sB(p,g,NaN,NaN,NaN,!1,null),h.cb.sB(g,g,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.sB(f,g,NaN,NaN,NaN,!1,null),h.cb.Yw(p,g,a),h.cb.Yw(g,p,n),h.cb.Yw(f,g,a),h.cb.Yw(g,f,n)},u.bD=[],u.hD=[],u.uD=[],u.WC=[],u.iD=[],u.jD=[],u.nD=[],u}()}(B||(B={})),B.cb.nW(),function(h){var O=function(){function w(c){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=c}return w.prototype.kd=function(c){c<this.Dl?(this.o[c*this.Mf]=this.ko,this.ko=c):this.Dl--,this.size--},w.prototype.U=function(c,a){return this.o[c*this.Mf+a]},w.prototype.T=function(c,a,n){this.o[c*this.Mf+a]=n},w.prototype.De=function(){var c=this.ko;if(c==-1){if(this.Dl==this.Jg){if(2147483647<(c=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(c=2147483647),c==this.Jg)throw h.i.de();this.yz(c)}c=this.Dl,this.Dl++}else this.ko=this.o[c*this.Mf];this.size++;for(var a=c*this.Mf;a<c*this.Mf+this.Mf;a++)this.o[a]=-1;return c},w.prototype.Nl=function(c){var a=this.ko;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw h.i.de();this.yz(a)}a=this.Dl,this.Dl++}else this.ko=this.o[a*this.Mf];this.size++;for(var n=a*this.Mf,o=0;o<c.length;o++)this.o[n+o]=c[o];return a},w.prototype.oj=function(c){this.ko=-1,this.size=this.Dl=0,c&&(this.o=null,this.Jg=0)},w.prototype.Ee=function(c){c>this.Jg&&this.yz(c)},w.prototype.sx=function(c,a){c*=this.Mf,a*=this.Mf;for(var n=0;n<this.Mf;n++){var o=this.o[a+n];this.o[a+n]=this.o[c+n],this.o[c+n]=o}},w.prototype.bC=function(c,a,n){var o=this.o[this.Mf*a+n];this.o[this.Mf*a+n]=this.o[this.Mf*c+n],this.o[this.Mf*c+n]=o},w.GG=function(c){return 0<=c},w.prototype.yz=function(c){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*c);a.set(this.o,0),this.o=a,this.Jg=c},w}();h.ad=O}(B||(B={})),function(h){var O,w;(w=O||(O={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var c=function(){function n(o){this.Ce=o,this.Ah=NaN,this.$G=new h.jg,this.aH=new h.jg,this.os=new h.Oc,this.ps=new h.Oc}return n.prototype.compare=function(o,u,p){if(o=o.ka(p),this.Ce.kB(u,this.$G),this.Ce.kB(o,this.aH),u=this.$G.get(),o=this.aH.get(),this.os.L(u.ta,u.qa),this.ps.L(o.ta,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=u.oa==u.ma;var f=o.oa==o.ma;if(p||f){if(p&&f)return 0;if(u.oa==o.oa&&u.ta==o.ta)return p?1:-1;if(u.ma==o.ma&&u.qa==o.qa)return p?-1:1}return(p=u.Me(this.Ah,this.os.pa))==(f=o.Me(this.Ah,this.ps.pa))&&((f=.5*((p=Math.min(u.ma,o.ma))+this.Ah))==this.Ah&&(f=p),p=u.Me(f,this.os.pa),f=o.Me(f,this.ps.pa)),p<f?-1:p>f?1:0},n.prototype.WJ=function(o){this.Ah=o},n}(),a=function(){function n(o){this.ib=o,this.RH=new h.jg,this.Cf=new h.h,this.rA=new h.Oc}return n.prototype.fX=function(o){this.Cf.N(o)},n.prototype.compare=function(o,u){return this.ib.kB(o.ka(u),this.RH),o=this.RH.get(),this.rA.L(o.ta,o.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},n}();O=function(){function n(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new h.Nd,this.XN=2147483647,this.WN=h.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return n.prototype.ty=function(o){this.gA=o},n.prototype.$m=function(){this.he==null&&(this.he=new h.ad(8));var o=this.he.De();return this.he.T(o,1,0),o},n.prototype.qU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var u=this.Lc.De();return this.Lc.T(u,2,0),this.Lc.T(u,3,0),this.EJ(o,u),this.EJ(u,o),o},n.prototype.hI=function(){this.ze==null&&(this.ze=new h.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},n.prototype.OW=function(o,u){this.he.T(o,7,u)},n.prototype.on=function(o,u){this.he.T(o,2,u)},n.prototype.NW=function(o,u){this.he.T(o,1,u)},n.prototype.gX=function(o,u){this.he.T(o,3,u)},n.prototype.dX=function(o,u){this.he.T(o,4,u)},n.prototype.er=function(o,u){this.he.T(o,5,u)},n.prototype.$Q=function(o){return this.he.U(o,5)},n.prototype.MW=function(o,u){this.he.T(o,6,u)},n.prototype.YM=function(o,u){this.MW(u,o)},n.prototype.DJ=function(o,u){this.Lc.T(o,1,u)},n.prototype.EJ=function(o,u){this.Lc.T(o,4,u)},n.prototype.Vl=function(o,u){this.Lc.T(o,5,u)},n.prototype.Ul=function(o,u){this.Lc.T(o,6,u)},n.prototype.VW=function(o,u){this.Lc.T(o,2,u)},n.prototype.cx=function(o,u){this.Lc.T(o,3,u)},n.prototype.GF=function(o){return this.Lc.U(o,3)},n.prototype.Ht=function(o,u){this.Lc.T(o,7,u)},n.prototype.zK=function(o,u){if(this.om(o)!=-1)for(u=u?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,u)},n.prototype.xx=function(o,u){o!=-1&&(this.zK(o,u),this.zK(this.ya(o),u))},n.prototype.Et=function(o,u){this.ze.T(o,1,u)},n.prototype.Xg=function(o,u){this.ze.T(o,2,u)},n.prototype.ln=function(o,u){this.ze.T(o,3,u),this.IW(o,this.ZQ(u)),this.HW(u,o)},n.prototype.HW=function(o,u){this.ze.T(o,4,u)},n.prototype.IW=function(o,u){this.ze.T(o,5,u)},n.prototype.yJ=function(o,u){this.ze.T(o,6,u)},n.prototype.wJ=function(o,u){this.ze.T(o,7,u)},n.prototype.vJ=function(o,u){this.$n.write(o,u)},n.prototype.xJ=function(o,u){this.fA.write(o,u)},n.prototype.gY=function(o){var u=0,p=0,f=this.vF(o),g=new h.h,b=new h.h,S=new h.h;this.$r(f,g),b.N(g);var $=f;do this.nm($,S),p+=h.h.ub(b,S),this.$e(this.ya($))!=o&&(u+=(S.x-g.x-(b.x-g.x))*(S.y-g.y+(b.y-g.y))*.5),b.N(S),$=this.kc($);while($!=f);this.$n.write(o,u),this.fA.write(o,p)},n.prototype.KU=function(o,u){var p=new c(this),f=new h.$j;f.Ee(h.P.truncate(this.xa/2)),f.Xo(p);for(var g=new h.ja(0),b=this.bh(),S=null,$=0,E=new h.h,C=this.Oe;C!=-1;C=this.Tf(C)){if((255&++$)==0&&u!=null&&!u.progress(-1,-1))throw h.i.RC();var k=this.Je(C);if(k!=-1){if(g.Dh(0),!this.cY(f,b,g,k)){this.D(C,E),p.WJ(E.y);var L=k;do{var N=this.Bb(L,b);N!=-1&&(f.wd(N,-1),this.Kb(L,b,-2)),L=this.kc(this.ya(L))}while(k!=L);L=k;do(N=this.Bb(L,b))==-1&&(N=f.addElement(L,-1),g.add(N)),L=this.kc(this.ya(L));while(k!=L)}for(k=g.size-1;0<=k;k--)N=g.get(k),L=f.ka(N),this.Kb(this.ya(L),b,N),this.JU(f,N,o)}else this.Yy(C)==-1&&(S==null&&(S=new a(this)),this.D(C,E),S.fX(E),L=f.DW(S),k=this.Jl,L!=-1&&(N=f.ka(L),this.$e(N)==this.$e(this.ya(N))&&(N=this.JF(f,L)),N!=-1&&(k=this.$e(N))),this.YM(k,C))}this.Lg(b)},n.prototype.JU=function(o,u,p){var f=o.ka(u),g=this.$e(f);if(this.In(g)==-1){var b=this.JF(o,u),S=this.ya(f),$=this.$e(S);this.Mp(g),this.Mp($);var E=this.In(g),C=this.In($);if(b==-1&&E==-1&&($==g?(this.ln($,this.Jl),E=C=this.Jl):(C==-1&&(this.ln($,this.Jl),C=this.Jl),this.ln(g,$),E=$)),b!=-1){var k=this.$e(b);C==-1&&(0>=this.Mp(k)?(C=this.In(k),this.ln($,C)):(this.ln($,k),C=k),$==g&&(E=C))}E==-1&&this.dY(g,$),p==0?this.eW(o,u,f,b,g,$):p==5?this.fW(o,u,f,S,g,$):p==4&&this.dW(f,b,g,$)}},n.prototype.eW=function(o,u,p,f,g,b){var S=this.jk(g);if(f!=-1){var $=this.jk(b),E=this.jk(this.$e(f));f=S&$&E,E^=E&this.fh(p),(E|=f)!=0&&(this.Xg(b,$|E),this.Xg(g,E|S),S=S||E)}for(u=o.lb(u);u!=-1&&(f=o.ka(u),p=this.$e(this.ya(f)),g=this.jk(p),b=this.fh(f),$=this.$e(f),f=g&(E=this.jk($))&S,S^=S&b,(S|=f)!=0);u=o.lb(u))this.Xg(p,g|S),this.Xg($,E|S)},n.prototype.fW=function(o,u,p,f,g,b){if(g!=b){p=this.Bb(p,this.eg),p+=this.Bb(f,this.eg),f=0;var S=new h.ja(0),$=new h.ja(0);$.add(0);for(var E=o.sc(-1);E!=u;E=o.lb(E)){var C=o.ka(E),k=this.ya(C),L=this.$e(C),N=this.$e(k);if(L!=N){if(C=this.Bb(C,this.eg),f+=C+=this.Bb(k,this.eg),k=!1,S.size!=0&&S.Gc()==N&&($.Jf(),S.Jf(),k=!0),this.In(N)==-1)throw h.i.Ra();k&&this.In(N)==L||($.add(f),S.add(L))}}f+=p,S.size!=0&&S.Gc()==b&&($.Jf(),S.Jf()),f!=0?$.Gc()==0&&(o=this.g.md,o=this.Ma(o),this.Xg(g,o)):$.Gc()!=0&&(o=this.g.md,o=this.Ma(o),this.Xg(g,o))}},n.prototype.dW=function(o,u,p,f){var g=this.Ma(this.g.md);if(u==-1)this.Xg(f,this.Io),(1&(o=this.Bb(o,this.yg)))!=0?this.Xg(p,g):this.Xg(p,this.Io);else{var b=this.jk(f);b==0?(b=this.jk(this.$e(u)),this.Xg(f,b),(1&(o=this.Bb(o,this.yg)))!=0?this.Xg(p,b==g?this.Io:g):this.Xg(p,b)):(1&(o=this.Bb(o,this.yg)))!=0?this.Xg(p,b==g?this.Io:g):this.Xg(p,b)}},n.prototype.cY=function(o,u,p,f){var g=f,b=-1,S=-1,$=0;do{if($==2)return!1;var E=this.Bb(g,u);if(E!=-1){if(b!=-1)return!1;b=E}else{if(S!=-1)return!1;S=g}$++,g=this.kc(this.ya(g))}while(f!=g);return S!=-1&&b!=-1&&(this.Kb(o.ka(b),u,-2),o.Uj(b,S),p.add(b),!0)},n.prototype.dY=function(o,u){var p=this.Mp(o);if(p!=0){var f=this.Mp(u);0<p&&0>f||0>p&&0<f?this.ln(o,u):(u=this.In(u))!=-1&&this.ln(o,u)}},n.prototype.qP=function(o,u){this.Eq=this.g.Hd();for(var p=0,f=u.size;p<f;p++){var g=u.get(p),b=this.g.Qa(g,this.Em),S=this.g.Sf(this.g.cd(g)),$=this.g.jc(S);if(h.ba.Ic($)){var E=this.g.V(g);if(E!=-1){var C=this.g.Qa(E,this.Em);if(b!=C){var k=this.qU(),L=this.ya(k),N=this.lh.De();this.lh.T(N,0,g),this.lh.T(N,1,-1),this.Ht(k,N),this.DJ(k,b),(N=this.Je(b))==-1?(this.on(b,k),this.Vl(k,L),this.Ul(L,k)):(b=this.ue(N),this.Vl(N,L),this.Ul(L,N),this.Ul(b,k),this.Vl(k,b)),this.DJ(L,C),(b=this.Je(C))==-1?(this.on(C,L),this.Ul(k,L),this.Vl(L,k)):(C=this.ue(b),this.Vl(b,k),this.Ul(k,b),this.Ul(C,L),this.Vl(L,C)),S=this.Ma(S),o==0?(this.Kb(L,this.be,0),this.Kb(k,this.be,$==1736?S:0)):o==5?(C=new h.h,this.g.D(g,C),g=new h.h,this.g.D(E,g),b=E=0,0>C.compare(g)?E=1:b=-1,this.Kb(L,this.be,0),this.Kb(k,this.be,0),this.Kb(k,this.eg,E),this.Kb(L,this.eg,b)):o==7?(this.Kb(L,this.be,this.Io),this.Kb(k,this.be,$==1736?S:0)):o==4&&(this.Kb(L,this.be,0),this.Kb(k,this.be,0),this.Kb(k,this.yg,1),this.Kb(L,this.yg,1)),$=$==1736?this.WN:0,this.cx(k,S|$),this.cx(L,S|$)}}}}},n.prototype.QT=function(o,u){var p=this.om(u);if(p!=-1){var f=this.om(o);this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1)}o=this.ya(o),u=this.ya(u),(p=this.om(u))!=-1&&(f=this.om(o),this.lh.T(p,1,f),this.Ht(o,p),this.Ht(u,-1))},n.prototype.EX=function(o){function u(se,ne){return f.CO(se,ne)}var p=new h.ja(0);p.Jb(10);for(var f=this,g=this.Oe;g!=-1;g=this.Tf(g)){p.clear(!1);var b=this.Je(g);if(b!=-1){var S=b;do p.add(S),S=this.kc(this.ya(S));while(S!=b);if(1<p.size){if(S=!0,2<p.size)p.Wd(0,p.size,u),p.add(p.get(0));else if(0<this.BO(p.get(0),p.get(1))){var $=p.get(0);p.set(0,p.get(1)),p.set(1,$)}else S=!1;for(var E=$=p.get(0),C=this.vf(E),k=this.ya(E),L=-1,N=1,U=p.size;N<U;N++){var H=p.get(N),j=this.ya(H),K=this.lk(j);if(K==C&&H!=E){if(o==0)L=this.GF(E)|this.GF(H),this.cx(E,L),this.cx(k,L),this.Kb(E,this.be,this.Bb(E,this.be)|this.Bb(H,this.be)),this.Kb(k,this.be,this.Bb(k,this.be)|this.Bb(j,this.be));else if(this.eg!=-1)L=this.Bb(E,this.eg)+this.Bb(H,this.eg),j=this.Bb(k,this.eg)+this.Bb(j,this.eg),this.Kb(E,this.eg,L),this.Kb(k,this.eg,j);else{if(o==7)return void(this.Pi=new h.Nd(5,g,-1));this.yg!=-1&&(L=this.Bb(E,this.yg)+this.Bb(H,this.yg),j=this.Bb(k,this.yg)+this.Bb(j,this.yg),this.Kb(E,this.yg,L),this.Kb(k,this.yg,j))}this.QT(E,H),this.Gy(H),L=E,p.set(N,-1),H==$&&(p.set(0,-1),$=-1)}else this.xx(L,!1),L=-1,E=H,C=K,k=j}if(this.xx(L,!1),L=-1,S){for($=-1,N=0,U=p.size;N<U;N++)if((H=p.get(N))!=-1){if($==-1)E=$=H,C=this.vf(E),k=this.ya(E);else if(H!=E&&(j=this.ya(H),K=this.lk(j),this.Ul(k,H),this.Vl(H,k),E=H,C=K,k=j,o==7&&(this.Bb(H,this.be)|this.Bb(this.ue(H),this.be))==(1|this.Io)))return void(this.Pi=new h.Nd(5,g,-1))}this.on(g,$)}else{for($=-1,N=0,U=p.size;N<U;N++)if((H=p.get(N))!=-1){$=H;break}b!=$&&this.on(g,$)}}}}},n.prototype.RN=function(){for(var o=-1,u=this.bh(),p=this.Oe;p!=-1;p=this.Tf(p)){var f=this.Je(p);if(f!=-1){var g=f;do{if(this.Bb(g,u)!=1){var b=this.hI();this.Et(b,g),this.wJ(b,o),o!=-1&&this.yJ(o,b),o=b;var S=0,$=g;do S|=this.Bb($,this.be),this.VW($,b),this.Kb($,u,1),$=this.kc($);while($!=g);this.Xg(b,S)}g=this.kc(this.ya(g))}while(g!=f)}}b=this.hI(),this.Et(b,-1),this.wJ(b,o),o!=-1&&this.yJ(o,b),this.Jl=b,this.$n=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(u)},n.prototype.mR=function(o,u,p){if((u=u!=-1?u:this.Je(o))==-1)return-1;for(o=u;;){if(this.Bb(u,p)!=1)return u;if((u=this.kc(this.ya(u)))==o)return-1}},n.prototype.tW=function(){for(var o=this.bh(),u=this.Oe;u!=-1;u=this.Tf(u))for(var p=-1;;){var f=this.mR(u,p,o);if(f==-1)break;p=this.kc(this.ya(f));for(var g=f;;){var b=this.kc(g),S=this.ue(g),$=this.ya(g);if(S==$){if(this.DP(g),p!=g&&p!=$||(p=-1),g==f||S==f){if(g==(f=b)||S==f)break;g=b;continue}}else this.Kb(g,o,1);if((g=b)==f)break}}this.Lg(o)},n.prototype.HB=function(o,u,p,f,g){this.Wg(),this.bH=g,this.g=o,this.Dq=this.g.WE(),(o=new h.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var b=0,S=1,$=p!=null?p.get(0):this.g.md;for(g=1;$!=-1;){this.g.CJ($,this.Dq,S),S<<=1;for(var E=this.g.Ob($);E!=-1;E=this.g.Sb(E))for(var C=this.g.Ya(E),k=0,L=this.g.Ka(E);k<L;k++)o.add(C),C=this.g.V(C);h.ba.Tn(this.g.jc($))||(b+=this.g.ea($)),p!=null?($=g<p.size?p.get(g):-1,g++):$=this.g.ve($)}for(this.Io=S,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.he=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.op.Bp(f),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,b)),this.Em=this.g.Hd(),p=new h.h,g=0,b=new h.h,p.Sc(),S=0;S<=this.xa;S++)if(S<this.xa?(C=o.get(S),this.g.D(C,b)):b.Sc(),!p.rb(b)){if(g<S){for(C=this.$m(),L=k=-1;g<S;g++)L=o.get(g),this.g.Sa(L,this.Em,C),$=this.lh.De(),this.lh.T($,0,L),this.lh.T($,1,k),k=$,E=this.g.cd(L),$=this.g.Sf(E),$=this.Ma($),this.NW(C,this.yd(C)|$);this.OW(C,k),this.er(C,this.g.Va(L)),this.Qs!=-1&&this.dX(this.Qs,C),this.gX(C,this.Qs),this.Qs=C,this.Oe==-1&&(this.Oe=C)}g=S,p.N(b)}h.op.Bp(f),this.be=this.bh(),u==5&&(this.eg=this.bh()),u==4&&(this.yg=this.bh()),this.qP(u,o),this.Pi.Lj==0&&(this.EX(u),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(u,f))):this.kA=!0))},n.prototype.Gy=function(o){var u=this.kc(o),p=this.ue(o),f=this.ya(o),g=this.kc(f),b=this.ue(f);u!=f&&(this.Ul(b,u),this.Vl(u,b)),p!=f&&(this.Ul(p,g),this.Vl(g,p)),p=this.lk(o),this.Je(p)==o&&(g!=o?this.on(p,g):this.on(p,-1)),g=this.lk(f),this.Je(g)==f&&(u!=f?this.on(g,u):this.on(g,-1)),this.Lc.kd(o),this.Lc.kd(f)},n.prototype.JF=function(o,u){for(;;){if((u=o.xe(u))==-1)return-1;var p=o.ka(u);if(this.$e(p)!=this.$e(this.ya(p)))return p}},n.prototype.fr=function(o,u){var p;p===void 0&&(p=!0),this.HB(o,0,null,u,p)},n.prototype.qJ=function(o,u,p){var f=new h.ja(0);f.add(u),this.HB(o,4,f,p,o.jc(u)==1736)},n.prototype.rJ=function(o,u,p){var f=new h.ja(0);f.add(u),this.HB(o,5,f,p,!0)},n.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},n.prototype.Je=function(o){return this.he.U(o,2)},n.prototype.D=function(o,u){this.g.ZF(this.$Q(o),u)},n.prototype.yd=function(o){return this.he.U(o,1)},n.prototype.Tf=function(o){return this.he.U(o,4)},n.prototype.Yy=function(o){return this.he.U(o,6)},n.prototype.mm=function(o){return this.he.U(o,7)},n.prototype.ls=function(o){return this.lh.U(o,1)},n.prototype.vj=function(o){return this.lh.U(o,0)},n.prototype.og=function(o,u){return(u=this.Fi[u]).size<=o?-1:u.read(o)},n.prototype.pn=function(o,u,p){(u=this.Fi[u]).size<=o&&u.resize(this.he.size,-1),u.write(o,p)},n.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=h.ja.rf(this.he.Jg,-1),u=0,p=this.Fi.length;u<p;u++)if(this.Fi[u]==null)return this.Fi[u]=o,u;return this.Fi.push(o),this.Fi.length-1},n.prototype.Gp=function(o){this.Fi[o]=null},n.prototype.lk=function(o){return this.Lc.U(o,1)},n.prototype.vf=function(o){return this.lk(this.ya(o))},n.prototype.ya=function(o){return this.Lc.U(o,4)},n.prototype.ue=function(o){return this.Lc.U(o,5)},n.prototype.kc=function(o){return this.Lc.U(o,6)},n.prototype.$e=function(o){return this.Lc.U(o,2)},n.prototype.af=function(o){return this.jk(this.Lc.U(o,2))},n.prototype.om=function(o){return this.Lc.U(o,7)},n.prototype.$r=function(o,u){this.D(this.lk(o),u)},n.prototype.nm=function(o,u){this.D(this.vf(o),u)},n.prototype.fh=function(o){return this.Lc.U(o,3)&this.XN},n.prototype.Bb=function(o,u){return(u=this.Ii[u]).size<=o?-1:u.read(o)},n.prototype.Kb=function(o,u,p){(u=this.Ii[u]).size<=o&&u.resize(this.Lc.size,-1),u.write(o,p)},n.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=h.ja.rf(this.Lc.Jg,-1),u=0,p=this.Ii.length;u<p;u++)if(this.Ii[u]==null)return this.Ii[u]=o,u;return this.Ii.push(o),this.Ii.length-1},n.prototype.Lg=function(o){this.Ii[o]=null},n.prototype.DP=function(o){var u=this.$e(o),p=this.ya(o),f=this.kc(o);f==p&&(f=this.kc(f))==o&&(f=-1);var g=this.vF(u);g!==o&&g!=p||this.Et(u,f),p=this.$n.read(u),isNaN(p)||(this.vJ(u,NaN),this.xJ(u,NaN)),this.xx(o,!0),this.Gy(o)},n.prototype.EP=function(o){for(var u=0,p=o.size;u<p;u++){var f=o.get(u),g=this.$e(this.ya(f));this.Et(this.$e(f),-1),this.Et(g,-1),this.xx(f,!0),this.Gy(f)}},n.prototype.vF=function(o){return this.ze.U(o,1)},n.prototype.jk=function(o){return this.ze.U(o,2)},n.prototype.In=function(o){return this.ze.U(o,3)},n.prototype.ZQ=function(o){return this.ze.U(o,4)},n.prototype.Mp=function(o){var u=this.$n.read(o);return isNaN(u)&&(this.gY(o),u=this.$n.read(o)),u},n.prototype.Ma=function(o){return this.g.FF(o,this.Dq)},n.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},n.prototype.oR=function(o){return this.g.Qa(o,this.Eq)},n.prototype.nR=function(o,u){var p=this.Je(o);if(p==-1)return-1;var f=p,g=-1,b=-1;do{if(this.vf(f)==u)return f;if(g==-1){if((g=this.Je(u))==-1)break;b=g}if(this.vf(b)==o)return this.ya(b);f=this.kc(this.ya(f)),b=this.kc(this.ya(b))}while(f!=p&&b!=g);return-1},n.prototype.kB=function(o,u){u.Qr(),u=u.get();var p=new h.h;this.$r(o,p),u.Ec(p),this.nm(o,p),u.Rc(p)},n.prototype.CO=function(o,u){if(o==u)return 0;var p=new h.h;this.nm(o,p);var f=new h.h;return this.nm(u,f),p.rb(f)?0:(u=new h.h,this.$r(o,u),(o=new h.h).vc(p,u),(p=new h.h).vc(f,u),h.h.pu(o,p))},n.prototype.BO=function(o,u){if(o==u)return 0;var p=new h.h;this.nm(o,p);var f=new h.h;return this.nm(u,f),p.rb(f)?0:(u=new h.h,this.$r(o,u),(o=new h.h).vc(p,u),(p=new h.h).vc(f,u),0<=p.y&&0<o.y?h.h.pu(o,p):0)},n.prototype.sO=function(){for(var o=h.mc.ox(this.gA),u=new h.h,p=new h.h,f=new h.h,g=new h.h,b=new h.h,S=this.Oe;S!=-1;S=this.Tf(S)){var $=this.Je(S);if($!=-1){var E=$;this.$r(E,u),this.nm(E,p),b.vc(p,u);var C=b.Uk();do{var k=E;if((E=this.kc(this.ya(E)))!=k){this.nm(E,f),g.vc(f,u),k=g.Uk();var L=g.yi(b);if(L*L/(k*C)*Math.min(k,C)<=o)return!1;b.N(g),C=k,p.N(f)}}while(E!=$)}}return!0},n}(),h.ku=O}(B||(B={})),function(h){var O=function(){function w(){this.j=null,this.jH=new h.h,this.kH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return w.prototype.cf=function(c){return c<this.Ij.length&&this.Ij[c]},w.prototype.fl=function(c,a,n,o){var u=h.ba.uf(this.j.g.jc(n));if(h.ba.uf(this.j.g.jc(a))!=2||u!=1)throw h.i.Ra();this.AP(c,a,n,o)},w.prototype.fr=function(c,a){this.j==null&&(this.j=new h.ku),this.j.fr(c,a)},w.prototype.Gt=function(c,a,n){for(h.Vk.W(c,a,n,!0),a=c.md;a!=-1;a=c.ve(a))c.jc(a)==1736&&h.tn.W(c,a,-1,this.Ov,n);this.fr(c,n)},w.prototype.HE=function(c,a,n,o,u){var p=this.j.g;if(p.jc(c)==1736)for(c=p.Ob(c);c!=-1;c=p.Sb(c)){var f=p.Ya(c);this.j.Ie(f),this.j.Ie(p.V(f));var g=this.j.oR(f);if(g!=-1){var b=this.j.Bb(g,n);if(b!=1&&b!=2)if(this.cf(this.j.af(g))){this.j.Kb(g,n,1),b=p.wf(a,-1);var S=g,$=this.j.Ie(f),E=1;do{var C=this.um(f,u);p.kj(b,C),o!=-1&&this.j.pn($,o,1),this.j.Kb(S,n,1),S=this.j.kc(S);do var k=(C=E==1?p.V(f):p.Na(f))!=-1?this.j.Ie(C):-1;while(k==$);var L=this.j.lk(S);if(L!=k){do k=(C=E==1?p.Na(f):p.V(f))!=-1?this.j.Ie(C):-1;while(k==$);L!=k?(k=L,C=this.j.vj(this.j.mm(k))):E=-E}$=k,f=C}while(S!=g);p.mn(b,!0)}else this.j.Kb(g,n,2)}}},w.prototype.$E=function(){for(var c=this.j.bh(),a=new h.ja(0),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var o=this.j.Je(n),u=o;if(o!=-1)do{if(this.j.Bb(u,c)!=1){var p=this.j.ya(u);this.j.Kb(p,c,1),this.j.Kb(u,c,1),this.cf(this.j.af(u))&&this.cf(this.j.af(p))&&a.add(u)}u=this.j.kc(this.j.ya(u))}while(u!=o)}this.j.Lg(c),this.j.EP(a)},w.prototype.um=function(c,a){return a==-1?c:this.WR(c,a)},w.prototype.WR=function(c,a){var n=this.j.g,o=this.j.mm(this.j.Ie(c));do{var u=this.j.vj(o);if(n.Sf(n.cd(u))==a)return u;o=this.j.ls(o)}while(o!=-1);return c},w.prototype.Qt=function(c,a,n){this.$E();var o=this.j.g,u=o.Kg(1736),p=this.j.bh();return this.pK(c,a,u,n,p,-1),this.j.Lg(p),h.tn.W(o,u,1,this.Ov,null),u},w.prototype.pK=function(c,a,n,o,u,p){for(this.HE(c,n,u,p,o),a!=-1&&this.HE(a,n,u,p,o),c=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Tf(a)){var f=this.j.Je(a);if(f!=-1){var g=f;do{var b=this.j.Bb(g,u);if(b!=1&&b!=2)if(this.cf(this.j.af(g))){b=c.wf(n,-1);var S=g;do{var $=this.j.om(S);$!=-1?$=this.j.vj($):($=this.j.vj(this.j.om(this.j.ya(S))),$=this.j.g.V($)),$=this.um($,o),c.kj(b,$),this.j.Kb(S,u,1),p!=-1&&($=this.j.Ie($),this.j.pn($,p,1)),S=this.j.kc(S)}while(S!=g);c.mn(b,!0)}else this.j.Kb(g,u,2);g=this.j.kc(this.j.ya(g))}while(g!=f)}}},w.prototype.XX=function(c,a,n){var o=this.j.g,u=o.Kg(1736),p=o.Kg(1607),f=o.Kg(550);this.$E();var g=-1,b=this.j.bh(),S=this.j.Fp();for(this.pK(c,a,u,n,b,S),c=this.j.Oe;c!=-1;c=this.j.Tf(c))if((a=this.j.Je(c))!=-1){var $=a;do{var E=this.j.Bb($,b),C=this.j.Bb(this.j.ya($),b);if((E|=C)==2)if(E=this.j.fh($),this.cf(E)){var k=o.wf(p,-1),L=$;E=this.$w(c,o),E=this.um(E,n),o.kj(k,E),this.j.pn(c,S,1);do{if(E=this.j.vf(L),C=this.$w(E,o),C=this.um(C,n),o.kj(k,C),this.j.Kb(L,b,1),this.j.Kb(this.j.ya(L),b,1),this.j.pn(E,S,1),L=this.j.kc(L),E=this.j.Bb(L,b),(E|=C=this.j.Bb(this.j.ya(L),b))!=2)break;if(E=this.j.fh(L),!this.cf(E)){this.j.Kb(L,b,1),this.j.Kb(this.j.ya(L),b,1);break}}while(L!=$)}else this.j.Kb($,b,1),this.j.Kb(this.j.ya($),b,1);$=this.j.kc(this.j.ya($))}while($!=a)}for(c=this.j.Oe;c!=-1;c=this.j.Tf(c))(E=this.j.og(c,S))!=1&&(E=this.j.yd(c),this.cf(E)&&(g==-1&&(g=o.wf(f,-1)),(a=this.j.mm(c))!=-1&&(a=this.j.vj(a),E=this.um(a,n),o.kj(g,E))));return this.j.Gp(S),this.j.Lg(b),h.tn.W(o,u,1,this.Ov,null),(n=[])[0]=f,n[1]=p,n[2]=u,n},w.prototype.$w=function(c,a){var n=-1;for(c=this.j.mm(c);c!=-1;c=this.j.ls(c)){var o=this.j.vj(c);n==-1&&(n=o);var u=this.j.Ma(a.Sf(a.cd(o)));if(this.cf(u)){n=o;break}}return n},w.prototype.gB=function(c,a){for(var n=this.ll(a),o=this.j.lk(a),u=this.j.vf(a),p=0,f=0,g=this.j.mm(o);g!=-1;g=this.j.ls(g)){var b=this.j.vj(g),S=c.cd(b),$=this.j.Ma(c.Sf(S));S=c.Ya(S),($=($&n)!=0)&&S==b&&(this.vl=a);var E=c.V(b);E!=-1&&this.j.Ie(E)==u?(p++,$&&(this.vl===-1&&S==E&&(b=this.j.kc(a),this.cf(this.ll(b))&&(this.vl=b)),f++)):(b=c.Na(b))!=-1&&this.j.Ie(b)==u&&(p--,$&&(this.vl===-1&&S===b&&(b=this.j.kc(a),this.cf(this.ll(b))&&(this.vl=b)),f--))}return this.j.D(o,this.jH),this.j.D(u,this.kH),(f!=0?f:p)*(c=h.h.ub(this.jH,this.kH))},w.prototype.ll=function(c){return this.j.fh(c)|this.j.af(c)|this.j.af(this.j.ya(c))},w.prototype.sK=function(c){for(var a=this.j.ya(this.j.ue(c)),n=-1;a!=c;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.ue(a))}return n!=-1?this.j.ya(n):-1},w.prototype.tK=function(c){for(var a=this.j.ya(this.j.kc(c)),n=-1;a!=c;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.kc(a))}return n!=-1?this.j.ya(n):-1},w.prototype.hJ=function(c,a,n,o,u){var p=this.j.g,f=c,g=this.j.ya(f);this.j.Kb(f,n,1),this.j.Kb(g,n,1),this.vl=-1;for(var b=this.gB(p,f),S=f,$=-1,E=!1,C=1;;){var k=this.j.ue(f);if(k==g)break;if(g=this.j.kc(g),this.j.ya(k)!=g){if((f=this.sK(f))==-1){E=!0;break}g=this.j.ya(f)}else f=k;if(f==c){$=c;break}if(k=this.ll(f),!this.cf(k))break;this.j.Kb(f,n,1),this.j.Kb(g,n,1),S=f,b+=this.gB(p,f),C++}if($==-1)for(f=c,g=this.j.ya(f),$=f;(c=this.j.kc(f))!=g;){if(g=this.j.ue(g),this.j.ya(c)!=g){if((f=this.tK(f))==-1){E=!0;break}g=this.j.ya(f)}else f=c;if(k=this.ll(f),!this.cf(k))break;this.j.Kb(f,n,1),this.j.Kb(g,n,1),$=f,b+=this.gB(p,f),C++}else if(this.vl!=-1&&(S=this.vl,$=this.j.ue(this.vl),this.j.ya($)!=this.j.kc(this.j.ya(S))&&($=this.sK(S))==-1))throw h.i.Ra();for(0<=b||(f=$,$=this.j.ya(S),S=this.j.ya(f)),n=p.wf(a,-1),f=S,S=this.j.lk(S),E=this.j.vf($)==S&&E,b=this.$w(S,p),b=this.um(b,u),p.kj(n,b),o!=-1&&this.j.pn(S,o,1),S=0,C=E?h.P.truncate((C+1)/2):-1;c=this.j.vf(f),b=this.$w(c,p),b=this.um(b,u),p.kj(n,b),S++,o!=-1&&this.j.pn(c,o,1),E&&S==C&&(n=p.wf(a,-1),p.kj(n,b)),f!=$;)if(c=this.j.kc(f),this.j.ue(this.j.ya(f))!=this.j.ya(c)){if((f=this.tK(f))==-1)throw h.i.Ra()}else f=c},w.prototype.Rt=function(c){for(var a=this.j.g.Kg(1607),n=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var u=this.j.Je(o),p=u;do this.j.Bb(p,n)!=1&&this.cf(this.ll(p))&&this.hJ(p,a,n,-1,c),p=this.j.kc(this.j.ya(p));while(p!=u)}return this.j.Lg(n),a},w.prototype.YX=function(c){for(var a=this.j.g,n=a.Kg(1607),o=a.Kg(550),u=this.j.bh(),p=this.j.Fp(),f=-1,g=this.j.Oe;g!=-1;g=this.j.Tf(g)){var b=this.j.Je(g),S=b;do{var $=this.j.Bb(S,u);$!=1&&($=this.ll(S),this.cf($)&&this.hJ(S,n,u,p,c)),S=this.j.kc(this.j.ya(S))}while(S!=b)}for(g=this.j.Oe;g!=-1;g=this.j.Tf(g))($=this.j.og(g,p))!=1&&($=this.j.yd(g),this.cf($)&&(f==-1&&(f=a.wf(o,-1)),(b=this.j.mm(g))!=-1&&(b=this.j.vj(b),b=this.um(b,c),a.kj(f,b))));return this.j.Lg(u),this.j.Gp(p),(c=[])[0]=o,c[1]=n,c},w.prototype.pr=function(){for(var c=this.j.g,a=c.Kg(550),n=c.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Tf(o))if(this.cf(this.j.yd(o))){for(var u=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var f=this.j.vj(p);u==-1&&(u=f);var g=this.j.Ma(c.Sf(c.cd(f)));if(this.cf(g)){u=f;break}}c.kj(n,u)}return a},w.prototype.eq=function(c){this.Ij=[];for(var a=0;a<c;a++)this.Ij[a]=!1},w.WV=function(c,a,n){var o=c.Ja(),u=Array(1e3);h.P.bv(u,null);var p=h.P.mg(1e3,0),f=c.I(),g=!0,b=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw h.i.Ra();for(var S=0;S<f;){var $=h.P.truncate(c.gW(u,S)-S);b?h.jd.nK(a,u,$,n,p):h.jd.oK(a,u,$,n,p);for(var E=0,C=0;C<$;C++)p[C]==0&&(g&&(g=!1,o.Gd(c,0,S)),E!=C&&o.Gd(c,S+E,S+C),E=C+1);g||E==$||o.Gd(c,S+E,S+$),S+=$}return g?c:o},w.uG=function(c,a,n){return c instanceof h.ee?w.WV(c,a,n):a instanceof h.Ta?c.B()||a.B()?c.Ja():h.Vk.uU(n,c,a)?h.Vk.xO(c,a):c.Ja():w.XV(c,a,n)},w.Cv=function(c,a,n,o){var u=new h.l;c.A(u);var p=new h.l;a.A(p);var f=new h.l;if(f.L(u),f.$b(p),n=h.ua.Xd(n,f,!0),(f=new h.l).L(p),p=h.ua.Gr(n),f.X(p,p),!u.isIntersecting(f)){if(c.Eb()<=a.Eb())return w.mi(w.Ue(c.Ja()),c,"&");if(c.Eb()>a.Eb())return w.mi(w.Ue(a.Ja()),c,"&")}return p=new w,f=(u=new h.hd).Ib(w.Ue(c)),a=u.Ib(w.Ue(a)),p.Gt(u,n,o),o=p.Cv(f,a),c=w.mi(u.Ke(o),c,"&"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},w.XV=function(c,a,n){if(c.B()||a.B())return c.Ja();var o=[null],u=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw h.i.Ra();return o[0]=c.D(),p?h.jd.nK(a,o,1,n,u):h.jd.oK(a,o,1,n,u),u[0]==0?c.Ja():c},w.prototype.GU=function(c,a,n,o,u){if(c.B())return c;var p=new h.hd;return c=p.Ib(c),this.Ok(p,c,a,n,o,u)},w.prototype.IU=function(c,a,n,o,u,p){if(u&&c.jc(a)!=550){var f=new h.MC;f.PX(c,n),f.Pg?(h.Vk.W(c,n,p,!0),u=!1):this.j.ty(n)}else h.Vk.W(c,n,p,!0),u=!1;if(o&&c.jc(a)!=550?this.j.rJ(c,a,p):this.j.qJ(c,a,p),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(c,a,n,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,c.jc(a)==1736||o&&c.jc(a)!=550)return c.$o(a,0),a=this.Qt(a,-1,-1),(c=c.Ke(a)).$o(0),u?c.Eh(1,0):(c.Eh(2,n),c.hm()),c;if(c.jc(a)==1607)return a=this.Rt(-1),c=c.Ke(a),u||c.Eh(2,n),c;if(c.jc(a)==550)return a=this.pr(),c=c.Ke(a),u||c.Eh(2,n),c;throw h.i.Ra()},w.prototype.Ok=function(c,a,n,o,u,p){this.j=new h.ku;try{return this.IU(c,a,n,o,u,p)}finally{this.j.Wg()}},w.Ok=function(c,a,n,o,u){return new w().GU(c,a,n,o,u)},w.prototype.HU=function(c,a,n,o){this.Ov=c,this.j=new h.ku,c=a.Kn(n);var u=a.jc(n);if(c!=1||u==550?this.j.qJ(a,n,o):this.j.rJ(a,n,o),!this.j.kA)if(this.j.ty(NaN),o=this.j.Ma(n),this.eq(o+1),this.Ij[o]=!0,a.jc(n)==1736||c==1&&a.jc(n)!=550)a.$o(n,0),o=this.Qt(n,-1,-1),a.cC(o,n),a.wB(o);else if(a.jc(n)==1607)o=this.Rt(-1),a.cC(o,n),a.wB(o);else{if(a.jc(n)!=550)throw h.i.ga("internal error");o=this.pr(),a.cC(o,n),a.wB(o)}},w.prototype.km=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a));if(n>o)return c;var u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)]=!0,n==2&&o==2)return this.Qt(c,a,-1);if(n==1&&o==2||n==1&&o==1)return this.Rt(-1);if(n==0)return this.pr();throw h.i.Ra()},w.prototype.Cv=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=c),n==2&&o==2)return this.Qt(c,a,u);if(n==1&&0<o||o==1&&0<n)return this.Rt(u);if(n==0||o==0)return this.pr();throw h.i.Ra()},w.prototype.Kz=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0,u=-1,1<this.j.g.it.Ba&&(u=c),n==2&&o==2)return this.XX(c,a,u);if(n==1&&0<o||o==1&&0<n)return this.YX(u);if(n==0||o==0)return(c=[])[0]=this.pr(),c;throw h.i.Ra()},w.prototype.gp=function(c,a){var n=h.ba.uf(this.j.g.jc(c)),o=h.ba.uf(this.j.g.jc(a)),u=this.j.Ma(c),p=this.j.Ma(a);if(this.eq(1+(u|p)),this.Ij[this.j.Ma(c)]=!0,this.Ij[this.j.Ma(a)]=!0,n==2&&o==2)return this.Qt(c,a,-1);if(n==1&&o==1)return this.Rt(-1);if(n==0&&o==0)return this.pr();throw h.i.Ra()},w.Ue=function(c){var a=c.K();return a==197?(a=new h.Ea(c.description),c.B()||a.bd(c,!1),a):a==33?(a=new h.ee(c.description),c.B()||a.add(c),a):a==322?(a=new h.Ua(c.description),c.B()||a.pc(c,!0),a):c},w.mi=function(c,a,n){var o=c.K();return o==197?(a=new h.Ea(c.description),c.B()||a.bd(c,!1),a):o!=33||n!="|"&&n!="^"?o==322?(a=new h.Ua(c.description),c.B()||a.pc(c,!0),a):o==33&&n=="-"&&a.K()==33||o==550&&n=="&"&&a.K()==33?(a=new h.Ta(c.description),c.B()||c.we(0,a),a):c:(a=new h.ee(c.description),c.B()||a.add(c),a)},w.km=function(c,a,n,o){if(c.B()||a.B()||c.Eb()>a.Eb())return w.mi(w.Ue(c),c,"-");var u=new h.l;c.A(u);var p=new h.l;if(a.A(p),!u.isIntersecting(p))return w.mi(w.Ue(c),c,"-");var f=new h.l;return f.L(u),f.$b(p),n=h.ua.Xd(n,f,!0),p=new w,f=(u=new h.hd).Ib(w.Ue(c)),a=u.Ib(w.Ue(a)),p.Gt(u,n,o),o=p.km(f,a),o=u.Ke(o),c=w.mi(o,c,"-"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},w.QP=function(c,a,n){if(2>c.length)throw h.i.O("not enough geometries to dissolve");for(var o=0,u=0,p=c.length;u<p;u++)o=Math.max(c[u].Eb(),o);var f=new h.l;f.Pa();var g=new h.hd,b=-1,S=0,$=-1;for(u=0,p=c.length;u<p;u++)if(c[u].Eb()==o)if(c[u].B())$==-1&&($=u);else{$=u,b==-1?b=g.Ib(w.Ue(c[u])):g.pN(b,w.Ue(c[u]));var E=new h.l;c[u].yc(E),f.$b(E),S++}return 2>S?w.Ue(c[$]):(c=o==2,a=h.ua.Xd(o==0?a:null,f,!0),new w().Ok(g,b,a,c,!0,n))},w.Kz=function(c,a,n,o){var u=[null,null,null],p=new h.l;c.A(p);var f=new h.l;a.A(f);var g=new h.l;if(g.L(p),g.$b(f),n=h.ua.Xd(n,g,!0),(g=new h.l).L(f),f=h.ua.Gr(n),g.X(f,f),!p.isIntersecting(g)){if(c.Eb()<=a.Eb())return u[(c=w.mi(w.Ue(c.Ja()),c,"&")).Eb()]=c,u;if(c.Eb()>a.Eb())return u[(c=w.mi(w.Ue(a.Ja()),c,"&")).Eb()]=c,u}for(f=new w,g=(p=new h.hd).Ib(w.Ue(c)),a=p.Ib(w.Ue(a)),f.Gt(p,n,o),o=f.Kz(g,a),a=0;a<o.length;a++)f=w.mi(p.Ke(o[a]),c,"&"),h.ba.Ic(f.K())&&(f.Eh(2,n),f.K()==1736&&f.hm()),u[f.Eb()]=f;return u},w.gp=function(c,a,n,o){if(c.Eb()>a.Eb())return w.mi(w.Ue(c),c,"^");if(c.Eb()<a.Eb()||c.B())return w.mi(w.Ue(a),c,"^");if(a.B())return w.mi(w.Ue(c),c,"^");var u=new h.l;c.A(u);var p=new h.l;a.A(p);var f=new h.l;return f.L(u),f.$b(p),n=h.ua.Xd(n,f,!0),p=new w,f=(u=new h.hd).Ib(w.Ue(c)),a=u.Ib(w.Ue(a)),p.Gt(u,n,o),o=p.gp(f,a),c=w.mi(u.Ke(o),c,"^"),h.ba.Ic(c.K())&&(c.Eh(2,n),c.K()==1736&&c.hm()),c},w.prototype.GQ=function(c,a){var n=this.j.g;c=n.wf(c,-1);for(var o=a.size,u=0;u<o;u++){var p=a.get(u);n.kj(c,p)}n.mn(c,!0)},w.prototype.WW=function(c,a){for(var n=this.j.g,o=n.md;o!=-1;o=n.ve(o))if(o==a)for(var u=n.Ob(o);u!=-1;u=n.Sb(u)){var p=n.Ya(u);if(p!=-1)for(var f=n.V(p);f!=-1;){p=this.j.Ie(p);var g=this.j.Ie(f);(p=this.j.nR(p,g))!=-1&&(g=this.j.ya(p),this.j.Kb(p,c,1),this.j.Kb(g,c,2)),p=f,f=n.V(p)}}},w.prototype.YV=function(c,a,n,o){n=this.j.Ma(n),o=this.j.Ma(o);var u=new h.ja(0);u.Jb(256);for(var p=this.j.g,f=this.j.bh(),g=this.j.Oe;g!=-1;g=this.j.Tf(g)){var b=this.j.Je(g);if(b!=-1){var S=b;do{if(this.j.Bb(S,f)!=1){var $=S,E=S,C=!1,k=0;do{if(this.j.Kb($,f,1),!C){var L=this.j.fh($);(L&o)!=0&&(this.j.af($)&n)!=0&&(E=$,C=!0)}C&&(u.add(this.j.vj(this.j.mm(this.j.lk($)))),c!=-1&&((L=this.j.fh($))&o)!=0&&(k|=L=this.j.Bb($,c))),$=this.j.kc($)}while($!=E);C&&0<this.j.Mp(this.j.$e(E))&&($=p.Kg(1736),this.GQ($,u),a!=-1&&p.CJ($,a,k)),u.clear(!1)}S=this.j.kc(this.j.ya(S))}while(S!=b)}}this.j.Lg(f)},w.prototype.AP=function(c,a,n,o){this.j.tW();var u=-1;c!=-1&&(u=this.j.bh(),this.WW(u,n)),this.YV(u,c,a,n),u!=-1&&(this.j.Lg(u),u=-1);var p=this.j.g;for(c=0,u=p.md;u!=-1;u=p.ve(u))u!=a&&u!=n&&(o.add(u),c++);o.Wd(0,c,function(f,g){return(f=p.qz(p.Ob(f)))<(g=p.qz(p.Ob(g)))?-1:f==g?0:1})},w.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},w}();h.Hg=O}(B||(B={})),function(h){var O=function(){function w(c){c!==void 0?this.Jt(c):this.MB()}return w.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},w.prototype.Nb=function(c){return this==c||c instanceof w&&this.eb==c.eb&&this.jb==c.jb&&this.Lb==c.Lb&&this.qb==c.qb&&this.bb==c.bb&&this.Qb==c.Qb},w.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},w.prototype.Gh=function(c,a){var n=this.qb*c.x+this.bb*c.y+this.Qb;a.x=this.eb*c.x+this.jb*c.y+this.Lb,a.y=n},w.prototype.aY=function(c,a,n){for(var o=0;o<a;o++){var u=c[o].x,p=c[o].y,f=this.eb*u+this.jb*p+this.Lb;u=this.qb*u+this.bb*p+this.Qb,n[o]!=null?n[o].na(f,u):n[o]=h.h.construct(f,u)}},w.prototype.multiply=function(c){w.multiply(this,c,this)},w.multiply=function(c,a,n){var o=c.eb*a.eb+c.qb*a.jb,u=c.jb*a.eb+c.bb*a.jb,p=c.Lb*a.eb+c.Qb*a.jb+a.Lb,f=c.eb*a.qb+c.qb*a.bb,g=c.jb*a.qb+c.bb*a.bb;c=c.Lb*a.qb+c.Qb*a.bb+a.Qb,n.eb=o,n.jb=u,n.Lb=p,n.qb=f,n.bb=g,n.Qb=c},w.prototype.Qf=function(){var c=new w;return c.eb=this.eb,c.jb=this.jb,c.Lb=this.Lb,c.qb=this.qb,c.bb=this.bb,c.Qb=this.Qb,c},w.prototype.hC=function(c){if(!c.B()){for(var a=[],n=0;4>n;n++)a[n]=new h.h;c.iB(a),this.bY(a,a),c.bx(a,4)}},w.prototype.bY=function(c,a){for(var n=0;n<c.length;n++){var o=new h.h,u=c[n];o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.Qb,a[n]=o}},w.prototype.kS=function(c,a){c.B()||a.B()||c.S()==0||c.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/c.S(),this.bb=a.da()/c.da(),this.Lb=a.v-c.v*this.eb,this.Qb=a.G-c.G*this.bb)},w.prototype.$X=function(c){var a=new h.h,n=new h.h;a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.sub(a);var o=.5*a.Uk();return a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.add(n),c*(o>(a=.5*a.Uk())?Math.sqrt(o):Math.sqrt(a))},w.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},w.prototype.isIdentity=function(c){if(c!==void 0){var a=h.h.construct(0,1);return this.Gh(a,a),a.sub(h.h.construct(0,1)),a.Uk()>c*c?!1:(a.na(0,0),this.Gh(a,a),!(a.Uk()>c*c)&&(a.na(1,0),this.Gh(a,a),a.sub(h.h.construct(1,0)),a.Uk()<=c*c))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},w.prototype.Di=function(c){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*c*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},w.prototype.ig=function(c,a){this.eb=1,this.jb=0,this.Lb=c,this.qb=0,this.bb=1,this.Qb=a},w.prototype.Jt=function(c,a){a!==void 0?(this.eb=c,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(c,c)},w.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},w.prototype.kX=function(c){this.lX(Math.cos(c),Math.sin(c))},w.prototype.lX=function(c,a){this.eb=c,this.jb=-a,this.Lb=0,this.qb=a,this.bb=c,this.Qb=0},w.prototype.shift=function(c,a){this.Lb+=c,this.Qb+=a},w.prototype.scale=function(c,a){this.eb*=c,this.jb*=c,this.Lb*=c,this.qb*=a,this.bb*=a,this.Qb*=a},w.prototype.flipX=function(c,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=c+a-this.Lb},w.prototype.flipY=function(c,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=c+a-this.Qb},w.prototype.rotate=function(c){var a=new w;a.kX(c),this.multiply(a)},w.prototype.inverse=function(c){if(c!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?c.lx():(a=1/a,c.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,c.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,c.eb=this.bb*a,c.jb=-this.jb*a,c.qb=-this.qb*a,c.bb=this.eb*a)}else this.inverse(this)},w}();h.Ed=O}(B||(B={})),function(h){var O=function(){function w(){}return w.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},w.prototype.Jt=function(c,a){this.eb=c,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},w.prototype.translate=function(c,a,n){this.Lb+=c,this.Qb+=a,this.Cg+=n},w.prototype.hC=function(c){if(!c.B()){for(var a=new h.Od[8],n=0;8>n;n++)a[n]=new h.Od;c.iB(a),this.transform(a,8,a),c.bx(a)}},w.prototype.transform=function(c,a,n){for(var o=0;o<a;o++){var u=new h.Od,p=c[o];u.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,u.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,u.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,n[o]=u}},w.prototype.hp=function(c){var a=new h.Od;return a.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,a.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,a.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,a},w.prototype.Bg=function(c){w.multiply(this,c,this)},w.multiply=function(c,a,n){var o=c.eb*a.eb+c.qb*a.jb+c.pf*a.Ve,u=c.eb*a.qb+c.qb*a.bb+c.pf*a.We,p=c.eb*a.pf+c.qb*a.Ye+c.pf*a.Ze,f=c.jb*a.eb+c.bb*a.jb+c.Ye*a.Ve,g=c.jb*a.qb+c.bb*a.bb+c.Ye*a.We,b=c.jb*a.pf+c.bb*a.Ye+c.Ye*a.Ze,S=c.Ve*a.eb+c.We*a.jb+c.Ze*a.Ve,$=c.Ve*a.qb+c.We*a.bb+c.Ze*a.We,E=c.Ve*a.pf+c.We*a.Ye+c.Ze*a.Ze,C=c.Lb*a.eb+c.Qb*a.jb+c.Cg*a.Ve+a.Lb,k=c.Lb*a.qb+c.Qb*a.bb+c.Cg*a.We+a.Qb;c=c.Lb*a.pf+c.Qb*a.Ye+c.Cg*a.Ze+a.Cg,n.eb=o,n.qb=u,n.pf=p,n.jb=f,n.bb=g,n.Ye=b,n.Ve=S,n.We=$,n.Ze=E,n.Lb=C,n.Qb=k,n.Cg=c},w.inverse=function(c,a){var n=c.eb*(c.bb*c.Ze-c.Ye*c.We)-c.qb*(c.jb*c.Ze-c.Ye*c.Ve)+c.pf*(c.jb*c.We-c.bb*c.Ve);if(n==0)throw h.i.ga("math singularity");var o=1/n;n=(c.bb*c.Ze-c.Ye*c.We)*o;var u=-(c.jb*c.Ze-c.Ye*c.Ve)*o,p=(c.jb*c.We-c.bb*c.Ve)*o,f=-(c.qb*c.Ze-c.We*c.pf)*o,g=(c.eb*c.Ze-c.pf*c.Ve)*o,b=-(c.eb*c.We-c.qb*c.Ve)*o,S=(c.qb*c.Ye-c.pf*c.bb)*o,$=-(c.eb*c.Ye-c.pf*c.jb)*o;o*=c.eb*c.bb-c.qb*c.jb;var E=-(c.Lb*n+c.Qb*u+c.Cg*p),C=-(c.Lb*f+c.Qb*g+c.Cg*b);c=-(c.Lb*S+c.Qb*$+c.Cg*o),a.eb=n,a.qb=f,a.pf=S,a.jb=u,a.bb=g,a.Ye=$,a.Ve=p,a.We=b,a.Ze=o,a.Lb=E,a.Qb=C,a.Cg=c},w.prototype.Qf=function(){var c=new w;return c.eb=this.eb,c.qb=this.qb,c.pf=this.pf,c.jb=this.jb,c.bb=this.bb,c.Ye=this.Ye,c.Ve=this.Ve,c.We=this.We,c.Ze=this.Ze,c.Lb=this.Lb,c.Qb=this.Qb,c.Cg=this.Cg,c},w}();h.FY=O}(B||(B={})),function(h){var O=function(c){function a(n){if(n!==void 0)n=c.call(this,n.dc(),n)||this;else{(n=c.call(this)||this).dg=[],n.dg[0]=0,n.Ba=1,n.wh=[];for(var o=0;10>o;o++)n.wh[o]=-1;n.wh[n.dg[0]]=0}return n.lq=!0,n}return Re(a,c),a.prototype.se=function(n){this.hasAttribute(n)||(this.wh[n]=0,this.eD())},a.prototype.removeAttribute=function(n){if(n==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(n)&&(this.wh[n]=-1,this.eD())},a.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var n=0;n<this.wh.length;n++)this.wh[n]=-1;this.wh[this.dg[0]]=0,this.lq=!0},a.prototype.zF=function(){return w.fz().add(this)},a.pg=function(){return w.fz().VR()},a.prototype.oM=function(){var n=this.dc();return new h.sa(n,this)},a.prototype.eD=function(){for(var n=this.Ba=0,o=0;10>n;n++)0<=this.wh[n]&&(this.dg[o]=n,this.wh[n]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},a.prototype.Nb=function(n){if(n==null)return!1;if(n==this)return!0;if(!(n instanceof a)||n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=n.dg[o])return!1;return this.lq==n.lq},a.prototype.BG=function(n){if(n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.dg[o]!=n.dg[o])return!1;return!0},a.Kw=function(n,o){for(var u=[],p=0;p<n.Ba;p++)u[p]=-1;p=0;for(var f=n.Ba;p<f;p++)u[p]=o.Rf(n.ld(p));return u},a.wR=function(n,o){return(n=new a(n)).se(o),n.zF()},a.xR=function(n,o){for(var u=null,p=0;10>p;p++)!n.hasAttribute(p)&&o.hasAttribute(p)&&(u==null&&(u=new a(n)),u.se(p));return u!=null?u.zF():n},a}(h.sa);h.fe=O;var w=function(){function c(){this.map=[];var a=new O;this.add(a),(a=new O).se(1),this.add(a)}return c.fz=function(){return c.XK},c.prototype.VR=function(){return c.gt},c.prototype.add=function(a){var n=a.dc();if(c.gt!=null&&c.gt.dc()==n&&a.BG(c.gt))return c.gt;if(c.Fw!=null&&c.Fw.dc()==n&&a.BG(c.Fw))return c.Fw;var o=null;return this.map[n]!==void 0&&(o=this.map[n]),o==null&&((o=a.oM()).Ba==1?c.gt=o:o.Ba==2&&o.ld(1)==1?c.Fw=o:this.map[n]=o),o},c.XK=new c,c}()}(B||(B={}));var Nt={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},$i={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Xt=new(function(){function h(){this.MM=50,this.pp=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.pp.clear()},h.prototype.delete=function(O){return!!this.pp.delete(O)&&(this.ij.splice(this.ij.indexOf(O),1),!0)},h.prototype.get=function(O){var w=this.pp.get(O);if(w!==void 0)return this.ij[0]!==O&&(this.ij.splice(this.ij.indexOf(O),1),this.ij.unshift(O)),w},h.prototype.has=function(O){return this.pp.has(O)},h.prototype.set=function(O,w){return this.get(O)!==void 0&&this.delete(O),this.ij.unshift(O),this.pp.set(O,w),this.jM(),this},h.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var O=this.ij.pop();this.pp.delete(O)}},h}()),Fe=((ke={}).convertJSONToGeometry=function(h){return B.ac.aP(h)},ke.hasM=function(h){return h.hasAttribute(B.Kh.M)},ke.hasZ=function(h){return h.hasAttribute(B.Kh.Z)},ke.getPointX=function(h){return h.Ng()},ke.getPointY=function(h){return h.kh()},ke.getPointZ=function(h){return h.XR()},ke.getPointM=function(h){return h.uR()},ke.getXMin=function(h){return h.gs()},ke.getYMin=function(h){return h.js()},ke.getXMax=function(h){return h.fs()},ke.getYMax=function(h){return h.hs()},ke.getZExtent=function(h){return h.Vg(B.Kh.Z,0)},ke.getMExtent=function(h){return h.Vg(B.Kh.M,0)},ke.exportPaths=function(h){var O=[],w=h.ea(),c=null,a=null,n=h.hasAttribute(B.Kh.Z),o=h.hasAttribute(B.Kh.M);n&&(c=h.vb(B.Kh.Z)),o&&(a=h.vb(B.Kh.M));for(var u=new B.h,p=0;p<w;p++){for(var f=h.Ca(p),g=h.Ka(p),b=0,S=0,$=NaN,E=NaN,C=NaN,k=NaN,L=h.ec(p),N=[],U=f;U<f+g;U++){h.D(U,u),k=C=NaN;var H=[u.x,u.y];n&&(C=c.get(U),H.push(C)),o&&(k=a.get(U),H.push(k)),U==f&&L&&(b=u.x,S=u.y,$=C,E=k),N.push(H)}!L||b==u.x&&S==u.y&&(!n||isNaN($)&&isNaN(C)||$==C)&&(!o||isNaN(E)&&isNaN(k)||E==k)||N.push(N[0].slice(0)),O.push(N)}return O},ke.exportPathsFlat=function(){},ke.exportPoints=function(h){var O=h.hasAttribute(B.Kh.Z),w=h.hasAttribute(B.Kh.M),c=null,a=null;O&&(c=h.vb(B.Kh.Z)),w&&(a=h.vb(B.Kh.M));for(var n=new B.h,o=h.I(),u=[],p=0;p<o;p++){h.D(p,n);var f=[n.x,n.y];O&&f.push(c.get(p)),w&&f.push(a.get(p)),u.push(f)}return u},ke.exportPointsFlat=function(){},ke),xr=new Map;return function(){function h(){}return h.buffer=Dt,h.clip=A,h.contains=F,h.convexHull=xe,h.crosses=V,h.cut=R,h.densify=pr,h.difference=$e,h.disjoint=re,h.distance=z,h.equals=W,h.extendedSpatialReferenceInfo=T,h.generalize=_i,h.geodesicArea=We,h.geodesicBuffer=ft,h.geodesicDensify=Rr,h.geodesicLength=yt,h.intersect=it,h.intersects=Z,h.isSimple=be,h.nearestCoordinate=Ct,h.nearestVertex=Oi,h.nearestVertices=Ui,h.offset=Lt,h.overlaps=ie,h.planarArea=Ne,h.planarLength=ct,h.relate=he,h.simplify=we,h.symmetricDifference=je,h.touches=Q,h.union=Ye,h.within=ee,h.rotate=B.Dx.rotate,h.flipHorizontal=B.Dx.EQ,h.flipVertical=B.Dx.FQ,h.intersectLinesToPoints=Ge,h.ExtendedParams=B.tC,h.clearDefaultSpatialReferenceTolerance=Ee,h.changeDefaultSpatialReferenceTolerance=ye,h._enableProjection=ni,h._project=Ft,h._getTransformation=si,h._getTransformationBySuitability=Rt,h}()}var r=i();r!==void 0&&(e.exports=r)})(OI);const Jt=OI.exports,i6e=t6e({__proto__:null,default:Jt},[OI.exports]);var r6e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",G:Jt,g:i6e});const yi={convertToGEGeometry:n6e,exportPoint:s6e,exportPolygon:o6e,exportPolyline:a6e,exportMultipoint:l6e,exportExtent:u6e};function n6e(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function s6e(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new dt({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(l.z=e.getPointZ(t)),s&&(l.m=e.getPointM(t)),l.cache._geVersion=t,l}function o6e(e,t,i){const r=new jn({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function a6e(e,t,i){const r=new Kr({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function l6e(e,t,i){const r=new Xy({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function u6e(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new ai({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const y=e.getZExtent(t);l.zmin=y.vmin,l.zmax=y.vmax}if(s){const y=e.getMExtent(t);l.mmin=y.vmin,l.mmax=y.vmax}return l.cache._geVersion=t,l}var c6e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",hydratedAdapter:yi});function wi(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function h6e(e){return Jt.extendedSpatialReferenceInfo(e)}function p6e(e,t){return Jt.clip(yi,wi(e),e,t)}function d6e(e,t){return Jt.cut(yi,wi(e),e,t)}function f6e(e,t){return Jt.contains(yi,wi(e),e,t)}function y6e(e,t){return Jt.crosses(yi,wi(e),e,t)}function g6e(e,t,i){return Jt.distance(yi,wi(e),e,t,i)}function m6e(e,t){return Jt.equals(yi,wi(e),e,t)}function v6e(e,t){return Jt.intersects(yi,wi(e),e,t)}function b6e(e,t){return Jt.touches(yi,wi(e),e,t)}function w6e(e,t){return Jt.within(yi,wi(e),e,t)}function _6e(e,t){return Jt.disjoint(yi,wi(e),e,t)}function x6e(e,t){return Jt.overlaps(yi,wi(e),e,t)}function S6e(e,t,i){return Jt.relate(yi,wi(e),e,t,i)}function M6e(e){return Jt.isSimple(yi,wi(e),e)}function $6e(e){return Jt.simplify(yi,wi(e),e)}function E6e(e,t=!1){return Jt.convexHull(yi,wi(e),e,t)}function I6e(e,t){return Jt.difference(yi,wi(e),e,t)}function T6e(e,t){return Jt.symmetricDifference(yi,wi(e),e,t)}function C6e(e,t){return Jt.intersect(yi,wi(e),e,t)}function A6e(e,t=null){return Jt.union(yi,wi(e),e,t)}function P6e(e,t,i,r,s,l){return Jt.offset(yi,wi(e),e,t,i,r,s,l)}function O6e(e,t,i,r=!1){return Jt.buffer(yi,wi(e),e,t,i,r)}function k6e(e,t,i,r,s,l){return Jt.geodesicBuffer(yi,wi(e),e,t,i,r,s,l)}function R6e(e,t,i=!0){return Jt.nearestCoordinate(yi,wi(e),e,t,i)}function F6e(e,t){return Jt.nearestVertex(yi,wi(e),e,t)}function L6e(e,t,i,r){return Jt.nearestVertices(yi,wi(e),e,t,i,r)}function kI(e){var t,i;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e&&(i=(t=e.extent)==null?void 0:t.center)!=null?i:null}function N6e(e,t,i){if(e==null)throw new ty;const r=e.spatialReference;if((i=i!=null?i:kI(e))==null)throw new ty;const s=e.constructor.fromJSON(Jt.rotate(e,t,i));return s.spatialReference=r,s}function j6e(e,t){if(e==null)throw new ty;const i=e.spatialReference;if((t=t!=null?t:kI(e))==null)throw new ty;const r=e.constructor.fromJSON(Jt.flipHorizontal(e,t));return r.spatialReference=i,r}function D6e(e,t){if(e==null)throw new ty;const i=e.spatialReference;if((t=t!=null?t:kI(e))==null)throw new ty;const r=e.constructor.fromJSON(Jt.flipVertical(e,t));return r.spatialReference=i,r}function V6e(e,t,i,r){return Jt.generalize(yi,wi(e),e,t,i,r)}function z6e(e,t,i){return Jt.densify(yi,wi(e),e,t,i)}function G6e(e,t,i,r=0){return Jt.geodesicDensify(yi,wi(e),e,t,i,r)}function q6e(e,t){return Jt.planarArea(yi,wi(e),e,t)}function U6e(e,t){return Jt.planarLength(yi,wi(e),e,t)}function B6e(e,t,i){return Jt.geodesicArea(yi,wi(e),e,t,i)}function H6e(e,t,i){return Jt.geodesicLength(yi,wi(e),e,t,i)}function W6e(e,t){return Jt.intersectLinesToPoints(yi,wi(e),e,t)}function J6e(e,t){Jt.changeDefaultSpatialReferenceTolerance(e,t)}function Z6e(e){Jt.clearDefaultSpatialReferenceTolerance(e)}class ty extends Error{constructor(){super("Illegal Argument Exception")}}var nAe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",buffer:O6e,changeDefaultSpatialReferenceTolerance:J6e,clearDefaultSpatialReferenceTolerance:Z6e,clip:p6e,contains:f6e,convexHull:E6e,crosses:y6e,cut:d6e,densify:z6e,difference:I6e,disjoint:_6e,distance:g6e,equals:m6e,extendedSpatialReferenceInfo:h6e,flipHorizontal:j6e,flipVertical:D6e,generalize:V6e,geodesicArea:B6e,geodesicBuffer:k6e,geodesicDensify:G6e,geodesicLength:H6e,intersect:C6e,intersectLinesToPoints:W6e,intersects:v6e,isSimple:M6e,nearestCoordinate:R6e,nearestVertex:F6e,nearestVertices:L6e,offset:P6e,overlaps:x6e,planarArea:q6e,planarLength:U6e,relate:S6e,rotate:N6e,simplify:$6e,symmetricDifference:T6e,touches:b6e,union:A6e,within:w6e});let ja=class extends ot{constructor(){super(...arguments),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}};m([x({type:At})],ja.prototype,"outSpatialReference",void 0),m([x({type:ai})],ja.prototype,"processExtent",void 0),m([x({type:At})],ja.prototype,"processSpatialReference",void 0),m([x({nonNullable:!0})],ja.prototype,"returnFeatureCollection",void 0),m([x({nonNullable:!0})],ja.prototype,"returnM",void 0),m([x({nonNullable:!0})],ja.prototype,"returnZ",void 0),ja=m([Y("esri.rest.geoprocessor.GPOptions")],ja),ja.from=Ai(ja);const K6e=ja;let Da=class extends Ie{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};m([x({type:ai})],Da.prototype,"extent",void 0),m([x()],Da.prototype,"height",void 0),m([x()],Da.prototype,"href",void 0),m([x()],Da.prototype,"opacity",void 0),m([x()],Da.prototype,"rotation",void 0),m([x()],Da.prototype,"scale",void 0),m([x()],Da.prototype,"visible",void 0),m([x()],Da.prototype,"width",void 0),Da=m([Y("esri.layer.support.MapImage")],Da);const ZW=Da;let Wv=class extends Ie{constructor(e){super(e),this.itemId=null,this.url=null}};m([x({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],Wv.prototype,"itemId",void 0),m([x({type:String,json:{write:!0}})],Wv.prototype,"url",void 0),Wv=m([Y("esri.rest.support.DataFile")],Wv);const RI=Wv,KW=new bt({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});let Jv=class extends Ie{constructor(e){super(e),this.distance=0,this.units=null}};m([x({json:{write:!0}})],Jv.prototype,"distance",void 0),m([x({json:{read:KW.read,write:KW.write}})],Jv.prototype,"units",void 0),Jv=m([Y("esri.rest.support.LinearUnit")],Jv);const YW=Jv,XW=new bt({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});let Zv=class extends Ie{constructor(e){super(e),this.dataType=null,this.value=null}};m([x({json:{read:XW.read,write:XW.write}})],Zv.prototype,"dataType",void 0),m([x()],Zv.prototype,"value",void 0),Zv=m([Y("esri.rest.support.ParameterValue")],Zv);const Y6e=Zv;let iy=class extends Ie{constructor(e){super(e),this.format=null,this.itemId=null,this.url=null}};m([x()],iy.prototype,"format",void 0),m([x({json:{read:{source:"itemID"},write:{target:"itemID"}}})],iy.prototype,"itemId",void 0),m([x()],iy.prototype,"url",void 0),iy=m([Y("esri.rest.support.RasterData")],iy);const QW=iy;function eJ(e){const t=e.dataType,i=Y6e.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return i;case"GPDate":i.value=new Date(i.value);break;case"GPDataFile":i.value=RI.fromJSON(i.value);break;case"GPLinearUnit":i.value=YW.fromJSON(i.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":{const r=e.value.url;i.value=r?RI.fromJSON(i.value):mh.fromJSON(i.value);break}case"GPRasterData":case"GPRasterDataLayer":{const r=e.value.mapImage;i.value=r?ZW.fromJSON(r):QW.fromJSON(i.value);break}case"GPField":i.value=G0.fromJSON(i.value);break;case"GPMultiValue:GPDate":{const r=i.value;i.value=r.map(s=>new Date(s));break}case"GPMultiValue:GPDataFile":i.value=i.value.map(r=>RI.fromJSON(r));break;case"GPMultiValue:GPLinearUnit":i.value=i.value.map(r=>YW.fromJSON(r));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":i.value=i.value.map(r=>mh.fromJSON(r));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":i.value=i.value.map(r=>r?ZW.fromJSON(r):QW.fromJSON(i.value));break;case"GPMultiValue:GPField":i.value=i.value.map(r=>G0.fromJSON(r))}return i}function FI(e,t,i){for(const r in e){const s=e[r];Array.isArray(s)?e[r]=JSON.stringify(s.map(l=>FI({item:l},!0).item)):s instanceof Date&&(e[r]=s.getTime())}return P$(e,t,i)}const tJ=new bt({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let Kv=class extends Ie{constructor(e){super(e),this.description=null,this.type=null}};m([x({type:String,json:{write:!0}})],Kv.prototype,"description",void 0),m([x({type:String,json:{read:tJ.read,write:tJ.write}})],Kv.prototype,"type",void 0),Kv=m([Y("esri.rest.support.GPMessage")],Kv);const X6e=Kv;var Ux;const Q6e=new bt({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});let Qd=Ux=class extends Ie{constructor(e){super(e),this.jobId=null,this.jobStatus=null,this.messages=null,this.requestOptions=null,this.sourceUrl=null,this._timer=null}cancelJob(e){const{jobId:t,sourceUrl:i}=this,{path:r}=Vr(i),s=De(te(te({},this.requestOptions),e),{query:{f:"json"}});return this._clearTimer(),li(`${r}/jobs/${t}/cancel`,s).then(l=>{const y=Ux.fromJSON(l.data);return this.messages=y.messages,this.jobStatus=y.jobStatus,this})}destroy(){clearInterval(this._timer)}checkJobStatus(e){const{path:t}=Vr(this.sourceUrl),i=De(te(te({},this.requestOptions),e),{query:{f:"json"}}),r=`${t}/jobs/${this.jobId}`;return li(r,i).then(({data:s})=>{const l=Ux.fromJSON(s);return this.messages=l.messages,this.jobStatus=l.jobStatus,this})}fetchResultData(e,t,i){t=K6e.from(t||{});const{returnFeatureCollection:r,returnM:s,returnZ:l,outSpatialReference:y}=t,{path:d}=Vr(this.sourceUrl),v=FI({returnFeatureCollection:r,returnM:s,returnZ:l,outSR:y,returnType:"data",f:"json"},null),_=De(te(te({},this.requestOptions),i),{query:v}),M=`${d}/jobs/${this.jobId}/results/${e}`;return li(M,_).then(T=>eJ(T.data))}fetchResultImage(e,t,i){const{path:r}=Vr(this.sourceUrl),s=De(te({},t.toJSON()),{f:"json"}),l=FI(s),y=De(te(te({},this.requestOptions),i),{query:l}),d=`${r}/jobs/${this.jobId}/results/${e}`;return li(d,y).then(v=>eJ(v.data))}async fetchResultMapImageLayer(){const{path:e}=Vr(this.sourceUrl),t=e.indexOf("/GPServer/"),i=`${e.substring(0,t)}/MapServer/jobs/${this.jobId}`;return new(await Promise.resolve().then(function(){return aMe})).default({url:i})}async waitForJobCompletion(e={}){const{interval:t=1e3,signal:i,statusCallback:r}=e;return new Promise((s,l)=>{Io(i,()=>{this._clearTimer(),l(zi())}),this._clearTimer();const y=setInterval(()=>{this._timer||l(zi()),this.checkJobStatus(this.requestOptions).then(d=>{const{jobStatus:v}=d;switch(this.jobStatus=v,v){case"job-succeeded":this._clearTimer(),s(this);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":r&&r(this);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":this._clearTimer(),l(this)}})},t);this._timer=y})}_clearTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}};m([x()],Qd.prototype,"jobId",void 0),m([x({json:{read:Q6e.read}})],Qd.prototype,"jobStatus",void 0),m([x({type:[X6e]})],Qd.prototype,"messages",void 0),m([x()],Qd.prototype,"requestOptions",void 0),m([x({json:{write:!0}})],Qd.prototype,"sourceUrl",void 0),Qd=Ux=m([Y("esri.rest.support.JobInfo")],Qd);class Bx{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new fe(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new Bx(this.major,this.minor,this._context)}static parse(t,i=""){const[r,s]=t.split("."),l=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(l))throw new fe((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(l))throw new fe((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const y=parseInt(r,10),d=parseInt(s,10);return new Bx(y,d,i)}}const eMe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesPromise=null,this._allLayersAndTablesMap=null}readCapabilities(i,r){var Z,Q;const s=r.capabilities&&r.capabilities.split(",").map(ee=>ee.toLowerCase().trim());if(!s)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const l=this.type,y=s.includes("data"),d=s.includes("query"),v=s.includes("map"),_=!!r.exportTilesAllowed,M=s.includes("tilemap"),T=l!=="tile"&&!!r.supportsDynamicLayers,A=l!=="tile"&&(!r.tileInfo||T),R=l!=="tile"&&(!r.tileInfo||T),F=l!=="tile",V=r.cimVersion&&Bx.parse(r.cimVersion),z=(Z=V==null?void 0:V.since(1,4))!=null?Z:!1,W=(Q=V==null?void 0:V.since(2,0))!=null?Q:!1;return{operations:{supportsExportMap:v,supportsExportTiles:_,supportsIdentify:d,supportsQuery:y,supportsTileMap:M},exportMap:v?{supportsArcadeExpressionForLabeling:z,supportsSublayersChanges:F,supportsDynamicLayers:T,supportsSublayerVisibility:A,supportsSublayerDefinitionExpression:R,supportsCIMSymbols:W}:null,exportTiles:_?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),s}async fetchSublayerInfo(i,r){var s;return await this.fetchAllLayersAndTables(r),(s=this._allLayersAndTablesMap)==null?void 0:s.get(i)}async fetchAllLayersAndTables(i){await this.load(i),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=li(yn(this.url).path+"/layers",{responseType:"json",query:De(te({f:"json"},this.customParameters),{token:this.apiKey})}).then(s=>{this._allLayersAndTablesMap=new Map;for(const l of s.data.layers)this._allLayersAndTablesMap.set(l.id,l);return{result:s.data}},s=>({error:s})));const r=await this._allLayersAndTablesPromise;if(fr(i),"result"in r)return r.result;throw r.error}};return m([x({readOnly:!0})],t.prototype,"capabilities",void 0),m([Be("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),m([x({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),m([x({type:ai})],t.prototype,"fullExtent",void 0),m([x(Xz)],t.prototype,"id",void 0),m([x({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),m([x($_)],t.prototype,"popupEnabled",void 0),m([x({type:At})],t.prototype,"spatialReference",void 0),m([x({readOnly:!0})],t.prototype,"version",void 0),m([Be("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=m([Y("esri.layers.mixins.ArcGISMapService")],t),t};var Hx;function LI(e){return e&&e.type==="esriSMS"}function NI(e,t,i){var s;const r=this.originIdOf(t)>=xs(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&((s=i.layer)==null?void 0:s.type)==="map-image"&&(i.writeSublayerStructure||r)}}function iJ(e,t,i){var r;return{enabled:!!i&&((r=i.layer)==null?void 0:r.type)==="tile"&&this._isOverridden(t)}}function Qo(e,t,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function Wx(e,t,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(t)>=xs(i.origin))}}let tMe=0;const ef=new Set;ef.add("layer"),ef.add("parent"),ef.add("loaded"),ef.add("loadStatus"),ef.add("loadError"),ef.add("loadWarnings");let kt=Hx=class extends ba(g_(e0(ul))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var i,r;if(!this.layer&&!this.url)throw new fe("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let t=null;if(!this.layer||this.originIdOf("url")>nt.SERVICE||((i=this.source)==null?void 0:i.type)==="data-layer")t=(await li(this.url,te({responseType:"json",query:{f:"json"}},e))).data;else{let s=this.id;((r=this.source)==null?void 0:r.type)==="map-layer"&&(s=this.source.mapLayerId),t=await this.layer.fetchSublayerInfo(s,e)}t&&(this.sourceJSON=t,this.read({layerDefinition:t},{origin:"service"}))})()),this}readCapabilities(e,t){const i=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(l=>l.trim()):[],r=this.url?Td(this.url):null,s=i.includes(q(r)&&r.serverType==="MapServer"?"data":"query");return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:s}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new RG(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){const e=this._get("id");return e!=null?e:tMe++}set id(e){this._get("id")!==e&&(this.get("layer.capabilities.exportMap.supportsDynamicLayers")!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,i,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(s=>s.write({},r))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const i=t.layerDefinition;return 1-.01*(i.transparency!=null?i.transparency:i.drawingInfo.transparency)}writeOpacity(e,t,i,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Wb(this.parent.id):t.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e){for(const t of e.getSymbols())if(Bp(t)){Ae.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new xu({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Ai(gt.ofType(Hx),e)}writeSublayers(e,t,i){this.get("sublayers.length")&&(t[i]=this.sublayers.map(r=>r.id).toArray().reverse())}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){var r,s;const e=(s=(r=this.layer)==null?void 0:r.parsedUrl)!=null?s:this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,(t==null?void 0:t.type)==="map-layer")return`${e.path}/${t.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${l0(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,i,r){t[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Lr(this),t=new Hx;return Lr(t).store=e.clone(ef),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return DG(this,e)}createQuery(){return new Bn({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var i,r;if(this.hasOwnProperty("sublayers"))return null;const e=(i=this.layer)==null?void 0:i.parsedUrl,t=new(await Promise.resolve().then(function(){return qwe})).default({url:e.path});return e&&this.source&&(this.source.type==="map-layer"?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),this.layer.refreshInterval!=null&&(t.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.floorInfo&&(t.floorInfo=me(this.floorInfo)),this.originIdOf("labelingInfo")>nt.SERVICE&&(t.labelingInfo=me(this.labelingInfo)),this.originIdOf("labelsVisible")>nt.DEFAULTS&&(t.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>nt.DEFAULTS&&(t.legendEnabled=this.legendEnabled),this.originIdOf("visible")>nt.DEFAULTS&&(t.visible=this.visible),this.originIdOf("minScale")>nt.DEFAULTS&&(t.minScale=this.minScale),this.originIdOf("maxScale")>nt.DEFAULTS&&(t.maxScale=this.maxScale),this.originIdOf("opacity")>nt.DEFAULTS&&(t.opacity=this.opacity),this.originIdOf("popupTemplate")>nt.DEFAULTS&&(t.popupTemplate=me(this.popupTemplate)),this.originIdOf("renderer")>nt.SERVICE&&(t.renderer=me(this.renderer)),((r=this.source)==null?void 0:r.type)==="data-layer"&&(t.dynamicDataSource=this.source.clone()),this.originIdOf("title")>nt.DEFAULTS&&(t.title=this.title),this.layer.type==="map-image"&&this.layer.originIdOf("customParameters")>nt.DEFAULTS&&(t.customParameters=this.layer.customParameters),this.layer.type==="tile"&&this.layer.originIdOf("customParameters")>nt.DEFAULTS&&(t.customParameters=this.layer.customParameters),t}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i.some(l=>{const{id:y}=l;return y!=null&&(y.toString()===r.toString()&&(s=l),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),t){var y,d,v,_,M,T;if(await this.load(),!((d=(y=this.capabilities)==null?void 0:y.operations)==null?void 0:d.supportsQuery))throw new fe("Sublayer.queryFeatures","this layer doesn't support queries.");const[{executeQuery:i},{default:r}]=await Promise.all([Promise.resolve().then(function(){return tge}),Promise.resolve().then(function(){return ige})]),s=await i(this.url,Bn.from(e),(_=(v=this.layer)==null?void 0:v.spatialReference)!=null?_:null,De(te({},t),{query:De(te({},(M=this.layer)==null?void 0:M.customParameters),{token:(T=this.layer)==null?void 0:T.apiKey})})),l=r.fromJSON(s.data);if(l==null?void 0:l.features)for(const A of l.features)A.sourceLayer=this;return l}toExportImageJSON(e){var l;const t={id:this.id,source:((l=this.source)==null?void 0:l.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=m_(e,this.definitionExpression);q(i)&&(t.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((y,d)=>(y[d]=this.originIdOf(d),y),{});if(Object.keys(r).some(y=>r[y]>nt.SERVICE)){const y=t.drawingInfo={};if(r.renderer>nt.SERVICE&&(y.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>nt.SERVICE&&(y.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>nt.SERVICE){!this.loaded&&this.labelingInfo.some(v=>!v.labelPlacement)&&Ae.getLogger(this.declaredClass).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let d=this.labelingInfo;q(this.geometryType)&&(d=Iwe(this.labelingInfo,Rw.toJSON(this.geometryType))),y.labelingInfo=d.filter(v=>v.labelPlacement).map(v=>v.toJSON({origin:"service",layer:this.layer})),y.showLabels=!0}r.opacity>nt.SERVICE&&(y.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(y.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const i="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const r of i)LI(r.symbol)&&t(r.symbol);"symbol"in e&&LI(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&LI(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const i=this.layer,r=this._get(e);let s,l;switch(e){case"definitionExpression":case"floorInfo":s="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":s="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":s="supportsDynamicLayers",l="supportsModification"}const y=Lr(this).getDefaultOrigin();if(y!=="service"){if(s&&this.get(`layer.capabilities.exportMap.${s}`)===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${s}'`);if(l&&this.get(`capabilities.exportMap.${l}`)===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${l}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),y!=="service"&&r!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{const r=this.get("layer.capabilities.exportMap.supportsSublayersChanges");r==null||r||(Ae.getLogger(this.declaredClass).error(new fe("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,t){Ae.getLogger(this.declaredClass).error(new fe("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};kt.test={isMapImageLayerOverridePolicy:e=>e===Qo||e===NI,isTileImageLayerOverridePolicy:e=>e===iJ},m([x({readOnly:!0})],kt.prototype,"capabilities",void 0),m([Be("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],kt.prototype,"readCapabilities",null),m([x({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:NI}}})],kt.prototype,"definitionExpression",null),m([x({type:[G0],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],kt.prototype,"fields",void 0),m([x({readOnly:!0})],kt.prototype,"fieldsIndex",null),m([x({type:nG,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:NI},origins:{"web-scene":{read:!1,write:!1}}}})],kt.prototype,"floorInfo",null),m([x({type:ai,json:{read:{source:"layerDefinition.extent"}}})],kt.prototype,"fullExtent",void 0),m([x({type:Rw.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:Rw.read}}}}})],kt.prototype,"geometryType",void 0),m([x({type:String})],kt.prototype,"globalIdField",void 0),m([Be("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],kt.prototype,"readGlobalIdFieldFromService",null),m([x({type:hi,json:{write:{ignoreOrigin:!0}}})],kt.prototype,"id",null),m([x({value:null,type:[iv],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:Qo}}})],kt.prototype,"labelingInfo",null),m([Ke("labelingInfo")],kt.prototype,"writeLabelingInfo",null),m([x({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Qo}}})],kt.prototype,"labelsVisible",null),m([x({value:null})],kt.prototype,"layer",null),m([x({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Wx}}})],kt.prototype,"legendEnabled",void 0),m([x({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],kt.prototype,"listMode",null),m([x({type:Number,value:0,json:{write:{overridePolicy:Qo}}})],kt.prototype,"minScale",null),m([Be("minScale",["minScale","layerDefinition.minScale"])],kt.prototype,"readMinScale",null),m([x({type:Number,value:0,json:{write:{overridePolicy:Qo}}})],kt.prototype,"maxScale",null),m([Be("maxScale",["maxScale","layerDefinition.maxScale"])],kt.prototype,"readMaxScale",null),m([x({readOnly:!0})],kt.prototype,"effectiveScaleRange",null),m([x({type:String})],kt.prototype,"objectIdField",void 0),m([Be("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],kt.prototype,"readObjectIdFieldFromService",null),m([x({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Qo}}})],kt.prototype,"opacity",null),m([Be("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],kt.prototype,"readOpacity",null),m([Ke("opacity")],kt.prototype,"writeOpacity",null),m([x({json:{type:hi,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:Qo}}})],kt.prototype,"parent",void 0),m([Ke("parent")],kt.prototype,"writeParent",null),m([x({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:Wx,writer(e,t,i){t[i]=!e}}}})],kt.prototype,"popupEnabled",void 0),m([x({type:i0,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Wx}}})],kt.prototype,"popupTemplate",void 0),m([x({readOnly:!0})],kt.prototype,"defaultPopupTemplate",null),m([x({types:Jm,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Qo},origins:{"web-scene":{types:gz,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Qo}}}}})],kt.prototype,"renderer",null),m([x({types:{key:"type",base:null,typeMap:{"data-layer":lo,"map-layer":xu}},cast(e){if(e){if("mapLayerId"in e)return Rf(xu,e);if("dataSource"in e)return Rf(lo,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:Qo}}})],kt.prototype,"source",null),m([x()],kt.prototype,"sourceJSON",void 0),m([x({value:null,json:{type:[hi],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Qo}}})],kt.prototype,"sublayers",null),m([ri("sublayers")],kt.prototype,"castSublayers",null),m([Ke("sublayers")],kt.prototype,"writeSublayers",null),m([x({type:String,json:{name:"name",write:{overridePolicy:Wx}}})],kt.prototype,"title",void 0),m([x({type:String})],kt.prototype,"typeIdField",void 0),m([Be("typeIdField",["layerDefinition.typeIdField"])],kt.prototype,"readTypeIdField",null),m([x({type:[q8],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],kt.prototype,"types",void 0),m([x({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:iJ}}})],kt.prototype,"url",null),m([x({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Qo}}})],kt.prototype,"visible",null),m([Ke("visible")],kt.prototype,"writeVisible",null),kt=Hx=m([Y("esri.layers.support.Sublayer")],kt);const Jx=kt,iMe=Ae.getLogger("esri.layers.TileLayer");function rMe(e,t){const i=[],r={};return e&&e.forEach(s=>{const l=new Jx;if(l.read(s,t),r[l.id]=l,s.parentLayerId!=null&&s.parentLayerId!==-1){const y=r[s.parentLayerId];y.sublayers||(y.sublayers=[]),y.sublayers.unshift(l)}else i.unshift(l)}),i}const jI=gt.ofType(Jx);function rJ(e,t){e&&e.forEach(i=>{t(i),i.sublayers&&i.sublayers.length&&rJ(i.sublayers,t)})}const nMe=e=>{let t=class extends e{constructor(...i){super(...i),this.allSublayers=new w0({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[nt.SERVICE]:{},[nt.PORTAL_ITEM]:{},[nt.WEB_SCENE]:{},[nt.WEB_MAP]:{}},this.addHandles(Ve(()=>this.sublayers,(r,s)=>this._handleSublayersChange(r,s),ml))}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:s}=this,l=xs(r.origin);if(l<nt.SERVICE||(s[l]={context:r,visibleLayers:i.visibleLayers||s[l].visibleLayers,layers:i.layers||s[l].layers},l>nt.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:y,origin:d}=this.createSublayersForOrigin("web-document"),v=Lr(this);v.setDefaultOrigin(d),this._set("sublayers",new jI(y)),v.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=xs(i==="web-document"?"web-map":i);let s=nt.SERVICE,l=this.sublayersSourceJSON[nt.SERVICE].layers,y=this.sublayersSourceJSON[nt.SERVICE].context,d=null;const v=[nt.PORTAL_ITEM,nt.WEB_SCENE,nt.WEB_MAP].filter(F=>F<=r);for(const F of v){const V=this.sublayersSourceJSON[F];t9e(V.layers)&&(s=F,l=V.layers,y=V.context,V.visibleLayers&&(d={visibleLayers:V.visibleLayers,context:V.context}))}const _=[nt.PORTAL_ITEM,nt.WEB_SCENE,nt.WEB_MAP].filter(F=>F>s&&F<=r);let M=null;for(const F of _){const{layers:V,visibleLayers:z,context:W}=this.sublayersSourceJSON[F];V&&(M={layers:V,context:W}),z&&(d={visibleLayers:z,context:W})}const T=rMe(l,y),A=new Map,R=new Set;if(M)for(const F of M.layers)A.set(F.id,F);if(d)for(const F of d.visibleLayers)R.add(F);return rJ(T,F=>{M&&F.read(A.get(F.id),M.context),d&&F.read({defaultVisibility:R.has(F.id)},d.context)}),{origin:Gy(s),sublayers:new jI({items:T})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(s=>{s.parent=null,s.layer=null}),this.handles.remove("sublayers-owner")),i&&(i.forEach(s=>{s.parent=this,s.layer=this}),this.handles.add([i.on("after-add",({item:s})=>{s.parent=this,s.layer=this}),i.on("after-remove",({item:s})=>{s.parent=null,s.layer=null})],"sublayers-owner"),this.type==="tile"&&this.handles.add(i.on("before-changes",s=>{iMe.error(new fe("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),s.preventDefault()}),"sublayers-owner"))}};return m([x({readOnly:!0})],t.prototype,"allSublayers",void 0),m([x({readOnly:!0,type:gt.ofType(Jx)})],t.prototype,"serviceSublayers",void 0),m([x({value:null,type:jI,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),m([x({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=m([Y("esri.layers.mixins.SublayersOwner")],t),t},sMe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let bo=class extends ba(ot){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const i=bx(this.floors,t);return t.toExportImageJSON(i)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&UB(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(sMe[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){var i;const e=!!((i=this.floors)==null?void 0:i.length),t=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return t.length?JSON.stringify(t.reduce((r,s)=>{const l=bx(this.floors,s),y=m_(l,s.definitionExpression);return q(y)&&(r[s.id]=y),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,i=s=>{const l=this.scale,y=l===0,d=s.minScale===0||l<=s.minScale,v=s.maxScale===0||l>=s.maxScale;s.visible&&(y||d&&v)&&(s.sublayers?s.sublayers.forEach(i):e.unshift(s))};t&&t.forEach(i);const r=this._get("visibleSublayers");return!r||r.length!==e.length||r.some((s,l)=>e[l]!==s)?e:r}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=De(te({},t),{layers:this.layers,layerDefs:this.layerDefs}),t}};m([x({readOnly:!0})],bo.prototype,"dynamicLayers",null),m([x()],bo.prototype,"floors",void 0),m([x({readOnly:!0})],bo.prototype,"hasDynamicLayers",null),m([x()],bo.prototype,"layer",null),m([x({readOnly:!0})],bo.prototype,"layers",null),m([x({readOnly:!0})],bo.prototype,"layerDefs",null),m([x({type:Number})],bo.prototype,"scale",void 0),m([x(Hve)],bo.prototype,"timeExtent",void 0),m([x({readOnly:!0})],bo.prototype,"version",null),m([x({readOnly:!0})],bo.prototype,"visibleSublayers",null),bo=m([Y("esri.layers.mixins.ExportImageParameters")],bo);let kr=class extends c8(AG(j8(nMe(eMe(Nz(SG($G(g_(TG(Oz(Dz(ba(_0))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?te({url:e},t):e}load(e){const t=q(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(Lf).then(()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(e,t){const i=t.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(e,t,i,r){if(!this.loaded||!e)return;const s=e.slice().reverse().flatten(({sublayers:_})=>_&&_.toArray().reverse()).toArray();let l=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const _=xs(r.origin);if(_===nt.PORTAL_ITEM){const M=this.createSublayersForOrigin("service").sublayers;l=qB(s,M,nt.SERVICE)}else if(_>nt.PORTAL_ITEM){const M=this.createSublayersForOrigin("portal-item");l=qB(s,M.sublayers,xs(M.origin))}}const y=[],d=te({writeSublayerStructure:l},r);let v=l;s.forEach(_=>{const M=_.write({},d);y.push(M),v=v||_.originOf("visible")==="user"}),y.some(_=>Object.keys(_).length>1)&&(t.layers=y),v&&(t.visibleLayers=s.filter(_=>_.visible).map(_=>_.id))}createExportImageParameters(e,t,i,r){const s=r&&r.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const l=new bo({layer:this,floors:r==null?void 0:r.floors,scale:zB({extent:e,width:t})*s}),y=l.toJSON();l.destroy();const d=!r||!r.rotation||this.version<10.3?{}:{rotation:-r.rotation},v=e&&e.spatialReference,_=v.wkid||JSON.stringify(v.toJSON());y.dpi*=s;const M={};if(r==null?void 0:r.timeExtent){const{start:T,end:A}=r.timeExtent.toJSON();M.time=T&&A&&T===A?""+T:`${T!=null?T:"null"},${A!=null?A:"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(M.time="null,null");return te(te(te({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:_,imageSR:_,size:t+","+i},y),d),M)}async fetchImage(e,t,i,r){return this._fetchImage("image",e,t,i,r)}async fetchImageBitmap(e,t,i,r){const s=await this._fetchImage("blob",e,t,i,r);return createImageBitmap(s)}async fetchRecomputedExtents(e={}){const t=De(te({},e),{query:De(te({returnUpdates:!0,f:"json"},this.customParameters),{token:this.apiKey})}),{data:i}=await li(this.url,t),{extent:r,fullExtent:s,timeExtent:l}=i,y=r||s;return{fullExtent:y&&ai.fromJSON(y),timeExtent:l&&zo.fromJSON({start:l[0],end:l[1]})}}loadAll(){return z6(this,e=>{e(this.allSublayers)})}serviceSupportsSpatialReference(e){return jG(this,e)}async _fetchImage(e,t,i,r,s){var d;const l={responseType:e,signal:(d=s==null?void 0:s.signal)!=null?d:null,query:De(te(te(De(te(te({},this.parsedUrl.query),this.createExportImageParameters(t,i,r,s)),{f:"image"}),this.refreshParameters),this.customParameters),{token:this.apiKey})},y=this.parsedUrl.path+"/export";if(l.query.dynamicLayers!=null&&!this.capabilities.exportMap.supportsDynamicLayers)throw new fe("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:l.query});try{const{data:v}=await li(y,l);return v}catch(v){throw Zs(v)?v:new fe("mapimagelayer:image-fetch-error",`Unable to load image: ${y}`,{error:v})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:i}=await li(this.parsedUrl.path,{query:De(te(te({f:"json"},this.parsedUrl.query),this.customParameters),{token:this.apiKey}),signal:e});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};m([x({type:Boolean})],kr.prototype,"datesInUnknownTimezone",void 0),m([x()],kr.prototype,"dpi",void 0),m([x()],kr.prototype,"gdbVersion",void 0),m([x()],kr.prototype,"imageFormat",void 0),m([Be("imageFormat",["supportedImageFormatTypes"])],kr.prototype,"readImageFormat",null),m([x({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],kr.prototype,"imageMaxHeight",void 0),m([x({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],kr.prototype,"imageMaxWidth",void 0),m([x()],kr.prototype,"imageTransparency",void 0),m([x({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],kr.prototype,"isReference",void 0),m([x({json:{read:!1,write:!1}})],kr.prototype,"labelsVisible",void 0),m([x({type:["ArcGISMapServiceLayer"]})],kr.prototype,"operationalLayerType",void 0),m([x({json:{read:!1,write:!1}})],kr.prototype,"popupEnabled",void 0),m([x()],kr.prototype,"sourceJSON",void 0),m([x({json:{write:{ignoreOrigin:!0}}})],kr.prototype,"sublayers",void 0),m([Ke("sublayers",{layers:{type:[Jx]},visibleLayers:{type:[hi]}})],kr.prototype,"writeSublayers",null),m([x({type:["show","hide","hide-children"]})],kr.prototype,"listMode",void 0),m([x({json:{read:!1},readOnly:!0,value:"map-image"})],kr.prototype,"type",void 0),m([x(Yz)],kr.prototype,"url",void 0),kr=m([Y("esri.layers.MapImageLayer")],kr);const oMe=kr;var aMe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oMe});new bt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new bt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let tf=class extends Ie{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};m([x({type:String,json:{write:!0}})],tf.prototype,"deviationUnit",void 0),m([x({json:{read:{reader:e=>e?e.map(t=>dn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],tf.prototype,"geometries",void 0),m([x({type:Number,json:{write:!0}})],tf.prototype,"maxDeviation",void 0),tf=m([Y("esri.rest.support.GeneralizeParameters")],tf),tf.from=Ai(tf);new bt({preserveShape:"preserve-shape"});let Hh=class extends Ie{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};m([x({type:String,json:{write:!0}})],Hh.prototype,"calculationType",void 0),m([x({type:Boolean,json:{write:!0}})],Hh.prototype,"geodesic",void 0),m([x({json:{write:!0}})],Hh.prototype,"lengthUnit",void 0),m([x({type:[Kr],json:{read:{reader:e=>e?e.map(t=>dn(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],Hh.prototype,"polylines",void 0),Hh=m([Y("esri.rest.support.LengthsParameters")],Hh),Hh.from=Ai(Hh);new bt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new bt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let ic=class extends Ie{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};m([x({type:Number,json:{write:!0}})],ic.prototype,"bevelRatio",void 0),m([x({json:{read:{reader:e=>e?e.map(t=>dn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],ic.prototype,"geometries",void 0),m([x({type:Number,json:{write:!0}})],ic.prototype,"offsetDistance",void 0),m([x({type:String,json:{write:!0}})],ic.prototype,"offsetHow",void 0),m([x({type:String,json:{write:!0}})],ic.prototype,"offsetUnit",void 0),ic=m([Y("esri.rest.support.OffsetParameters")],ic),ic.from=Ai(ic);let rf=class extends Ie{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:su(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};m([x()],rf.prototype,"geometries",void 0),m([x({json:{read:{source:"outSR"}}})],rf.prototype,"outSpatialReference",void 0),m([x()],rf.prototype,"transformation",void 0),m([x()],rf.prototype,"transformForward",void 0),rf=m([Y("esri.rest.support.ProjectParameters")],rf);const lMe=rf,uMe=Ai(lMe);async function sAe(e,t,i){t=uMe(t);const r=Vr(e),s=te(De(te({},r.query),{f:"json"}),t.toJSON()),l=t.outSpatialReference,y=su(t.geometries[0]),d=_D(s,i);return li(r.path+"/project",d).then(({data:{geometries:v}})=>SD(v,y,l))}new bt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Wh=class extends Ie{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};m([x({json:{read:{reader:e=>e?e.map(t=>dn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries1=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],Wh.prototype,"geometries1",void 0),m([x({json:{read:{reader:e=>e?e.map(t=>dn(t)).filter(q):null},write:{writer:(e,t)=>{var i;t.geometries2=(i=e==null?void 0:e.map(r=>r.toJSON()))!=null?i:null}}}})],Wh.prototype,"geometries2",void 0),m([x({type:String,json:{write:!0}})],Wh.prototype,"relation",void 0),m([x({type:String,json:{write:!0}})],Wh.prototype,"relationParameter",void 0),Wh=m([Y("esri.rest.support.RelationParameters")],Wh),Wh.from=Ai(Wh);new bt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let nf=class extends Ie{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};m([x({type:String,json:{write:!0}})],nf.prototype,"extendHow",void 0),m([x({type:[Kr],json:{read:{reader:e=>e?e.map(t=>dn(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(i=>i.toJSON())}}}})],nf.prototype,"polylines",void 0),m([x({json:{read:{reader:e=>e?dn(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],nf.prototype,"trimExtendTo",void 0),nf=m([Y("esri.rest.support.TrimExtendParameters")],nf),nf.from=Ai(nf);const cMe=new bt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let rc=class extends Ie{constructor(e){super(e),this.bufferSpatialReference=null,this.distances=null,this.geodesic=!1,this.geometries=null,this.outSpatialReference=null,this.unionResults=!1,this.unit=null}toJSON(){const e={unit:cMe.toJSON(this.unit),unionResults:this.unionResults,geodesic:this.geodesic},t=this.distances,i=this.outSpatialReference,r=this.bufferSpatialReference,s=this.geometries;if(s&&s.length>0){const l=s.map(d=>(d=d.type==="extent"?jn.fromExtent(d):d).toJSON()),y=s[0].type==="extent"?"esriGeometryPolygon":su(s[0]);e.geometries=JSON.stringify({geometryType:y,geometries:l}),e.inSR=s[0].spatialReference.wkid?s[0].spatialReference.wkid:JSON.stringify(s[0].spatialReference.toJSON())}return t&&(e.distances=t.join(",")),i&&(e.outSR=i.wkid?i.wkid:JSON.stringify(i.toJSON())),r&&(e.bufferSR=r.wkid?r.wkid:JSON.stringify(r.toJSON())),e}};m([x({type:At,json:{write:!0}})],rc.prototype,"bufferSpatialReference",void 0),m([x({type:[Number],json:{write:!0}})],rc.prototype,"distances",void 0),m([x({type:Boolean,json:{write:!0}})],rc.prototype,"geodesic",void 0),m([x({types:[ou],json:{write:!0}})],rc.prototype,"geometries",void 0),m([x({type:At,json:{write:!0}})],rc.prototype,"outSpatialReference",void 0),m([x({type:Boolean,json:{write:!0}})],rc.prototype,"unionResults",void 0),m([x({type:String,json:{write:!0}})],rc.prototype,"unit",void 0),rc=m([Y("esri.rest.support.BufferParameters")],rc);let ms=class extends Ie{constructor(e){super(e),this.contains=!0,this.dynamicLayerInfos=null,this.gdbVersion=null,this.geometryPrecision=null,this.layerDefinitions=null,this.layerIds=null,this.maxAllowableOffset=null,this.outSpatialReference=null,this.returnGeometry=!1,this.searchFields=null,this.searchText=null}};m([x({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],ms.prototype,"contains",void 0),m([x({type:[Object],json:{read:{source:"dynamicLayers"},write:{target:"dynamicLayers"}}})],ms.prototype,"dynamicLayerInfos",void 0),m([x({type:String,json:{write:!0}})],ms.prototype,"gdbVersion",void 0),m([x({type:Number,json:{write:!0}})],ms.prototype,"geometryPrecision",void 0),m([x({type:[Object],json:{write:!0}})],ms.prototype,"layerDefinitions",void 0),m([x({type:[Number],json:{write:!0}})],ms.prototype,"layerIds",void 0),m([x({type:Number,json:{write:!0}})],ms.prototype,"maxAllowableOffset",void 0),m([x({type:At,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ms.prototype,"outSpatialReference",void 0),m([x({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],ms.prototype,"returnGeometry",void 0),m([x({type:[String],json:{write:!0}})],ms.prototype,"searchFields",void 0),m([x({type:String,json:{write:!0}})],ms.prototype,"searchText",void 0),ms=m([Y("esri.rest.support.FindParameters")],ms),ms.from=Ai(ms);let Vl=class extends Ie{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.foundFieldName=null,this.layerId=null,this.layerName=null,this.value=void 0}readFeature(e,t){const i={attributes:{}};return t.attributes&&(i.attributes=t.attributes),t.geometry&&(i.geometry=t.geometry),jr.fromJSON(i)}writeFeature(e,t){if(!e)return;const{attributes:i,geometry:r}=e;i&&(t.attributes=te({},i)),q(r)&&(t.geometry=r.toJSON(),t.geometryType=Fw.toJSON(r.type))}};m([x({type:String,json:{write:!0}})],Vl.prototype,"displayFieldName",void 0),m([x({type:jr})],Vl.prototype,"feature",void 0),m([Be("feature",["attributes","geometry"])],Vl.prototype,"readFeature",null),m([Ke("feature")],Vl.prototype,"writeFeature",null),m([x({type:String,json:{write:!0}})],Vl.prototype,"foundFieldName",void 0),m([x({type:Number,json:{write:!0}})],Vl.prototype,"layerId",void 0),m([x({type:String,json:{write:!0}})],Vl.prototype,"layerName",void 0),m([x({json:{write:!0}})],Vl.prototype,"value",void 0),Vl=m([Y("esri.rest.support.FindResult")],Vl);const Zx=new bt({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"});Zx.fromJSON.bind(Zx);Zx.toJSON.bind(Zx);const Kx=new bt({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"});Kx.fromJSON.bind(Kx);Kx.toJSON.bind(Kx);let wo=class extends ot{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.label=null,this.layout="map-only",this.layoutItem=null,this.layoutOptions=null,this.outScale=0,this.scalePreserved=!0,this.showLabels=!0}};m([x()],wo.prototype,"attributionVisible",void 0),m([x()],wo.prototype,"exportOptions",void 0),m([x()],wo.prototype,"forceFeatureAttributes",void 0),m([x()],wo.prototype,"format",void 0),m([x()],wo.prototype,"label",void 0),m([x()],wo.prototype,"layout",void 0),m([x({type:Xg})],wo.prototype,"layoutItem",void 0),m([x()],wo.prototype,"layoutOptions",void 0),m([x()],wo.prototype,"outScale",void 0),m([x()],wo.prototype,"scalePreserved",void 0),m([x()],wo.prototype,"showLabels",void 0),wo=m([Y("esri.rest.support.PrintTemplate")],wo);new bt({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"});new bt({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"});let Jh=class extends ot{constructor(e){super(e),this.extent=null,this.extraParameters=null,this.outSpatialReference=null,this.template=null,this.updateDelay=1e3,this.view=null}};m([x()],Jh.prototype,"extent",void 0),m([x()],Jh.prototype,"extraParameters",void 0),m([x()],Jh.prototype,"outSpatialReference",void 0),m([x()],Jh.prototype,"template",void 0),m([x()],Jh.prototype,"updateDelay",void 0),m([x()],Jh.prototype,"view",void 0),Jh=m([Y("esri.rest.support.PrintParameters")],Jh);function DI(e){switch(e){case Ci.SUPPORTED:break;case Ci.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Ci.GEOMETRY_MISSING:return"no geometry";case Ci.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Ci.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Ci.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Ci;(function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Ci||(Ci={}));function hMe(e){var t;if(((t=e.layer)==null?void 0:t.type)!=="graphics")return Ci.GRAPHICS_LAYER_MISSING;if(ae(e.geometry))return Ci.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return Ci.GEOMETRY_TYPE_UNSUPPORTED}return _x(e)!=="on-the-ground"&&nI(e)?Ci.ELEVATION_MODE_UNSUPPORTED:Ci.SUPPORTED}function nJ(e){if(!e)return null;if(Ew(e)&&e.wkid){const t=zhe[e.wkid];if(t)return t}if(e.wkt){const t=pMe(e.wkt);if(t)return t}return null}function pMe(e){const t=Dhe.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function Yx(e){const t=nJ(e!=null?e:At.WGS84);if(dMe(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function dMe(e){return e!=null&&"b"in e&&"eSq"in e&&"radius"in e}function Xx(e,t,i){const{a:r,eSq:s}=Yx(i),l=Math.sqrt(s),y=Math.sin(t[1]*Os),d=r*t[0]*Os;let v;return s>0?v=r*((1-s)*(y/(1-s*(y*y))-1/(2*l)*Math.log((1-l*y)/(1+l*y))))*.5:v=r*y,e[0]=d,e[1]=v,e}function VI(e){return nJ(e)!==null}function oAe(e,t="square-meters"){if(e.some(y=>!VI(y.spatialReference)))throw new fe("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let y=0;y<e.length;y++){const d=e[y],v=d.spatialReference,{radius:_,densificationRatio:M}=Yx(v),T=_*M;i.push(fMe(d,T))}const r=[],s=[0,0],l=[0,0];for(let y=0;y<i.length;y++){const{rings:d,spatialReference:v}=i[y];let _=0;for(let M=0;M<d.length;M++){const T=d[M];Xx(s,T[0],v),Xx(l,T[T.length-1],v);let A=l[0]*s[1]-s[0]*l[1];for(let R=0;R<T.length-1;R++)Xx(s,T[R+1],v),Xx(l,T[R],v),A+=l[0]*s[1]-s[0]*l[1];_+=A}_=vi(_,"square-meters",t),r.push(_/-2)}return r}function aAe(e,t="meters"){if(!e)throw new fe("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!VI(r.spatialReference)))throw new fe("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const s=e[r],{spatialReference:l}=s,y=s.type==="polyline"?s.paths:s.rings;let d=0;for(let v=0;v<y.length;v++){const _=y[v];let M=0;for(let T=1;T<_.length;T++){const A=_[T-1][0],R=_[T][0],F=_[T-1][1],V=_[T][1];if(F!==V||A!==R){const z=new sJ;oJ(z,[A,F],[R,V],l),M+=z.distance}}d+=M}d=vi(d,"meters",t),i.push(d)}return i}function fMe(e,t){if(e.type!=="polyline"&&e.type!=="polygon")throw new fe("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!VI(i))throw new fe("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=e.type==="polyline"?e.paths:e.rings,s=[],l=[0,0],y=new sJ;for(const d of r){const v=[];s.push(v),v.push([d[0][0],d[0][1]]);let _,M,T=d[0][0],A=d[0][1];for(let R=0;R<d.length-1;R++){if(_=d[R+1][0],M=d[R+1][1],T===_&&A===M)continue;const F=[T,A];oJ(y,[T,A],[_,M],i);const{azimuth:V,distance:z}=y,W=z/t;if(W>1){for(let Z=1;Z<=W-1;Z++)Qx(l,F,V,Z*t,i),v.push(l.slice(0));Qx(l,F,V,(z+Math.floor(W-1)*t)/2,i),v.push(l.slice(0))}Qx(l,F,V,z,i),v.push(l.slice(0)),T=l[0],A=l[1]}}return e.type==="polyline"?new Kr({paths:s,spatialReference:i}):new jn({rings:s,spatialReference:i})}class sJ{constructor(t=0,i,r){this.distance=t,this.azimuth=i,this.reverseAzimuth=r}}function Qx(e,t,i,r,s){const l=t[0],y=t[1],d=l*Os,v=y*Os,_=(i!=null?i:0)*Os,{a:M,b:T,f:A}=Yx(s),R=Math.sin(_),F=Math.cos(_),V=(1-A)*Math.tan(v),z=1/Math.sqrt(1+V*V),W=V*z,Z=Math.atan2(V,F),Q=z*R,ee=Q*Q,re=1-ee,ie=re*(M*M-T*T)/(T*T),he=1+ie/16384*(4096+ie*(ie*(320-175*ie)-768)),be=ie/1024*(256+ie*(ie*(74-47*ie)-128));let we,xe,$e,je,it=r/(T*he),Ye=2*Math.PI;for(;Math.abs(it-Ye)>1e-12;)$e=Math.cos(2*Z+it),we=Math.sin(it),xe=Math.cos(it),je=be*we*($e+be/4*(xe*(2*$e*$e-1)-be/6*$e*(4*we*we-3)*(4*$e*$e-3))),Ye=it,it=r/(T*he)+je;const Lt=W*we-z*xe*F,Dt=Math.atan2(W*xe+z*we*F,(1-A)*Math.sqrt(ee+Lt*Lt)),ft=Math.atan2(we*R,z*xe-W*we*F),Ze=A/16*re*(4+A*(4-3*re)),Ct=Dt/Os,Oi=(d+(ft-(1-Ze)*A*Q*(it+Ze*we*($e+Ze*xe*(2*$e*$e-1)))))/Os;return e[0]=Oi,e[1]=Ct,e}function oJ(e,t,i,r){const s=t[0]*Os,l=t[1]*Os,y=i[0]*Os,d=i[1]*Os,{a:v,b:_,f:M,radius:T}=Yx(r),A=y-s,R=Math.atan((1-M)*Math.tan(l)),F=Math.atan((1-M)*Math.tan(d)),V=Math.sin(R),z=Math.cos(R),W=Math.sin(F),Z=Math.cos(F);let Q,ee,re,ie,he,be,we,xe,$e,je,it=1e3,Ye=A;do{if(we=Math.sin(Ye),xe=Math.cos(Ye),re=Math.sqrt(Z*we*(Z*we)+(z*W-V*Z*xe)*(z*W-V*Z*xe)),re===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;he=V*W+z*Z*xe,be=Math.atan2(re,he),$e=z*Z*we/re,ee=1-$e*$e,ie=he-2*V*W/ee,isNaN(ie)&&(ie=0),je=M/16*ee*(4+M*(4-3*ee)),Q=Ye,Ye=A+(1-je)*M*$e*(be+je*re*(ie+je*he*(2*ie*ie-1)))}while(Math.abs(Ye-Q)>1e-12&&--it>0);if(it===0){const Oi=T,Ui=Math.acos(Math.sin(l)*Math.sin(d)+Math.cos(l)*Math.cos(d)*Math.cos(y-s))*Oi,_i=y-s,pr=Math.sin(_i)*Math.cos(d),Rr=Math.cos(l)*Math.sin(d)-Math.sin(l)*Math.cos(d)*Math.cos(_i),Ne=Math.atan2(pr,Rr);return e.azimuth=Ne/Os,e.distance=Ui,e.reverseAzimuth=void 0,e}const Lt=ee*(v*v-_*_)/(_*_),Dt=Lt/1024*(256+Lt*(Lt*(74-47*Lt)-128)),ft=_*(1+Lt/16384*(4096+Lt*(Lt*(320-175*Lt)-768)))*(be-Dt*re*(ie+Dt/4*(he*(2*ie*ie-1)-Dt/6*ie*(4*re*re-3)*(4*ie*ie-3)))),Ze=Math.atan2(Z*Math.sin(Ye),z*W-V*Z*Math.cos(Ye)),Ct=Math.atan2(z*Math.sin(Ye),z*W*Math.cos(Ye)-V*Z);return e.azimuth=Ze/Os,e.distance=ft,e.reverseAzimuth=Ct/Os,e}var zI;let Zh=zI=class extends jn{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let i;if(e&&e.center)i=e;else{if(e&&e.rings)return super.normalizeCtorArgs(e,t);i={center:e}}return te(te(te({},super.normalizeCtorArgs()),i),t)}initialize(){var y;const e=this.center,t=this.numberOfPoints;if(this.hasZ=(y=e==null?void 0:e.hasZ)!=null?y:!1,this.rings.length!==0||!e)return;const i=vi(this.radius,this.radiusUnit,"meters"),r=e.spatialReference;let s,l="geographic";if(r.isWebMercator?l="webMercator":((r.wkid&&X[r.wkid])!=null||r.wkt&&r.wkt.indexOf("PROJCS")===0)&&(l="projected"),this.geodesic){let d;switch(l){case"webMercator":d=Gf(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":d=e}s=this._createGeodesicCircle(d,i,t),l==="webMercator"&&(s=ru(s))}else{let d;l==="webMercator"||l==="projected"?d=i/this._convert2Meters(1,e.spatialReference):l==="geographic"&&(d=mL(i,"meters",oM(e.spatialReference).radius)),s=this._createPlanarCircle(e,d,t)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s}=this;return new zI({center:e==null?void 0:e.clone(),numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s})}_createGeodesicCircle(e,t,i){let r=0;const s=[];for(;r<360;){const l=[0,0],y=[e.x,e.y];Qx(l,y,r,t),this.hasZ&&l.push(e.z),s.push(l),r+=360/i}return s.push(s[0]),new jn(s)}_createPlanarCircle(e,t,i){const r=[],s=2*Math.PI/i;for(let l=0;l<i;++l){const y=s*l,d=[e.x+Math.cos(-y)*t,e.y+Math.sin(-y)*t];this.hasZ&&d.push(e.z),r.push(d)}return r.push(r[0]),new jn({spatialReference:e.spatialReference,rings:[r]})}_convert2Meters(e,t){let i;if(t.wkid&&X[t.wkid]!=null)i=X.values[X[t.wkid]];else{const r=t.wkt,s=r.lastIndexOf(",")+1,l=r.lastIndexOf("]]");i=parseFloat(r.substring(s,l))}return e*i}};m([x({type:dt})],Zh.prototype,"center",void 0),m([x()],Zh.prototype,"geodesic",void 0),m([x()],Zh.prototype,"numberOfPoints",void 0),m([x()],Zh.prototype,"radius",void 0),m([x()],Zh.prototype,"radiusUnit",void 0),Zh=zI=m([Y("esri.geometry.Circle")],Zh);const yMe=Zh;function e5(e){return aJ(e).result}function lAe(e){return aJ(e).geometry}function aJ(e){var t;return((t=e.layer)==null?void 0:t.type)!=="graphics"?{result:Ci.GRAPHICS_LAYER_MISSING,geometry:null}:ae(e.geometry)?{result:Ci.GEOMETRY_MISSING,geometry:null}:_x(e)!=="on-the-ground"&&nI(e)?{result:Ci.ELEVATION_MODE_UNSUPPORTED,geometry:null}:e.geometry.type!=="point"&&e.geometry.type!=="polyline"&&(e.geometry.type!=="polygon"||e.geometry instanceof yMe)?{result:Ci.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:Ci.SUPPORTED,geometry:e.geometry}}function gMe(e){var i;if(((i=e.layer)==null?void 0:i.type)!=="graphics")return Ci.GRAPHICS_LAYER_MISSING;if(ae(e.geometry))return Ci.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Ci.SUPPORTED;default:return Ci.GEOMETRY_TYPE_UNSUPPORTED}const t=q(e.symbol)&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return t&&t.length>0&&t.some(r=>r.type==="object")?_x(e)!=="on-the-ground"&&nI(e)?Ci.ELEVATION_MODE_UNSUPPORTED:Ci.SUPPORTED:Ci.SYMBOL_TYPE_UNSUPPORTED}function lJ(e,t,i){if(!t||!e||!e.map)return;const{map:r}=e,s=r.layers.find(l=>l===t);s||r.add(t,i),i!=null&&r.layers.reorder(s,i)}function uAe(e,t){return e.allLayerViews.find(i=>{const r=i.layer;return r===t||"sublayers"in r&&q(r.sublayers)&&r.sublayers.includes(t)})}function mMe(e,t){const i=uJ[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function vMe(e,t){const i=uJ[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const uJ={min:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.min.apply(Math,e[0])},max:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.max.apply(Math,e[0])},avg:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:cJ(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:bMe(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sqrt(hJ(e[0]))},count:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:hJ(e[0])}};function cJ(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}function bMe(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}function hJ(e){const t=cJ(e),i=e.length;let r=0;for(const s of e)r+=(s-t)**2;return i>1?r/(i-1):0}class vs{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(t){if(t.precision!==null||t.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(t){const i=new vs;return i.second=t/1e3,i}static createFromValueAndQualifer(t,i,r){let s=null;const l=new vs;if(l.op=r==="-"?"-":"+",i.type==="interval-period"){vs._fixDefaults(i);const y=new RegExp("^[0-9]{1,}$");if(i.period==="year"||i.period==="month")throw new Error("Year-Month Intervals not supported");if(!y.test(t))throw new Error("Illegal Interval");l[i.period]=parseFloat(t)}else{if(vs._fixDefaults(i.start),vs._fixDefaults(i.end),i.start.period==="year"||i.start.period==="month")throw new Error("Year-Month Intervals not supported");if(i.end.period==="year"||i.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(i.start.period){case"day":switch(i.end.period){case"hour":if(s=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");l[i.start.period]=parseFloat(t.split(" ")[0]),l[i.end.period]=parseFloat(t.split(" ")[1]);break;case"minute":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");{l[i.start.period]=parseFloat(t.split(" ")[0]);const y=t.split(" ")[1].split(":");l.hour=parseFloat(y[0]),l.minute=parseFloat(y[1])}break;case"second":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{l[i.start.period]=parseFloat(t.split(" ")[0]);const y=t.split(" ")[1].split(":");l.hour=parseFloat(y[0]),l.minute=parseFloat(y[1]),l.second=parseFloat(y[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(i.end.period){case"minute":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");l.hour=parseFloat(t.split(":")[0]),l.minute=parseFloat(t.split(":")[1]);break;case"second":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const y=t.split(":");l.hour=parseFloat(y[0]),l.minute=parseFloat(y[1]),l.second=parseFloat(y[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(i.end.period!=="second")throw new Error("Invalid Interval.");if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const y=t.split(":");l.minute=parseFloat(y[0]),l.second=parseFloat(y[1])}break;default:throw new Error("Invalid Interval.")}}return l}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function pJ(e,t){const i=dJ[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function wMe(e,t){const i=dJ[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const dJ={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(t==null)return null;if(t instanceof Date)switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(e.length===2){const[t,i]=e;return t==null||i==null?null:t.toString().substring(i-1)}if(e.length===3){const[t,i,r]=e;return t==null||i==null||r==null?null:r<=0?"":t.toString().substring(i-1,i+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>e==null||t==null?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=e.length===3,i=t?e[1]:" ",r=t?e[2]:e[1];if(i==null||r==null)return null;const s=`(${zie(i)})`;switch(e[0]){case"BOTH":return r.replace(new RegExp(`^${s}*|${s}*$`,"g"),"");case"LEADING":return r.replace(new RegExp(`^${s}*`,"g"),"");case"TRAILING":return r.replace(new RegExp(`${s}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0]>0?1:e[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],i=e.length===2?10**e[1]:1;return t==null?null:Math.round(t*i)/i}},truncate:{minParams:1,maxParams:2,evaluate:e=>e[0]==null?null:e.length===1?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>typeof e[0]=="string"||e[0]instanceof String?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let i=0;i<e.length;i++){if(e[i]==null)return null;t+=e[i].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toUpperCase()}};var fJ,yJ,gJ={exports:{}};yJ=function(){function e(s,l){function y(){this.constructor=s}y.prototype=l.prototype,s.prototype=new y}function t(s,l,y,d){var v=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(v,t.prototype),v.expected=l,v.found=y,v.location=d,v.name="SyntaxError",v}function i(s,l,y){return y=y||" ",s.length>l?s:(l-=s.length,s+(y+=y.repeat(l)).slice(0,l))}function r(s,l){var y,d={},v=(l=l!==void 0?l:{}).grammarSource,_={start:bT},M=bT,T="!",A="=",R=">=",F=">",V="<=",z="<>",W="<",Z="!=",Q="+",ee="-",re="*",ie="/",he="@",be="'",we="N'",xe="''",$e=".",je="null",it="true",Ye="false",Lt="in",Dt="is",ft="like",Ze="escape",Ct="not",Oi="and",Ui="or",_i="between",pr="from",Rr="for",Ne="substring",ct="extract",We="trim",yt="position",ni="timestamp",si="date",Rt="leading",Ft="trailing",ue="both",ye="to",Ee="interval",Ge="year",ke="month",B="day",Je="hour",He="minute",Re="second",Le="case",ht="end",ut="when",pt="then",St="else",Nt=",",$i="(",Xt=")",Fe="`",xr=/^[A-Za-z_\x80-\uFFFF]/,h=/^[A-Za-z0-9_]/,O=/^[A-Za-z0-9_.\x80-\uFFFF]/,w=/^[^']/,c=/^[0-9]/,a=/^[eE]/,n=/^[+\-]/,o=/^[ \t\n\r]/,u=/^[^`]/,p=Mt("!",!1),f=Mt("=",!1),g=Mt(">=",!1),b=Mt(">",!1),S=Mt("<=",!1),$=Mt("<>",!1),E=Mt("<",!1),C=Mt("!=",!1),k=Mt("+",!1),L=Mt("-",!1),N=Mt("*",!1),U=Mt("/",!1),H=Gl([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),j=Gl([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),K=Gl([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),se=Mt("@",!1),ne=Mt("'",!1),pe=Mt("N'",!1),ce=Mt("''",!1),_e=Gl(["'"],!0,!1),Oe=Mt(".",!1),Ce=Gl([["0","9"]],!1,!1),st=Gl(["e","E"],!1,!1),qe=Gl(["+","-"],!1,!1),Et=Mt("NULL",!0),xt=Mt("TRUE",!0),et=Mt("FALSE",!0),xi=Mt("IN",!0),nr=Mt("IS",!0),Ei=Mt("LIKE",!0),ei=Mt("ESCAPE",!0),ti=Mt("NOT",!0),zt=Mt("AND",!0),ki=Mt("OR",!0),jt=Mt("BETWEEN",!0),dr=Mt("FROM",!0),Ut=Mt("FOR",!0),Br=Mt("SUBSTRING",!0),ui=Mt("EXTRACT",!0),pc=Mt("TRIM",!0),dc=Mt("POSITION",!0),fc=Mt("TIMESTAMP",!0),un=Mt("DATE",!0),g5=Mt("LEADING",!0),m5=Mt("TRAILING",!0),le=Mt("BOTH",!0),Pe=Mt("TO",!0),Ue=Mt("INTERVAL",!0),qt=Mt("YEAR",!0),Hr=Mt("MONTH",!0),Yi=Mt("DAY",!0),bs=Mt("HOUR",!0),df=Mt("MINUTE",!0),kZ=Mt("SECOND",!0),RZ=Mt("CASE",!0),FZ=Mt("END",!0),LZ=Mt("WHEN",!0),NZ=Mt("THEN",!0),jZ=Mt("ELSE",!0),DZ=Mt(",",!1),VZ=Mt("(",!1),zZ=Mt(")",!1),GZ=Gl([" ","	",`
`,"\r"],!1,!1),fT=Mt("`",!1),yT=Gl(["`"],!0,!1),qZ=function(P){return P},UZ=function(P,G){var J={type:"expression-list"},oe=GX(P,G);return J.value=oe,J},BZ=function(P,G){return yy(P,G)},HZ=function(P,G){return yy(P,G)},WZ=function(P){return VX("NOT",P)},JZ=function(P,G){return G==""||G==null||G==null?P:G.type=="arithmetic"?yy(P,G.tail):WT(G.op,P,G.right,G.escape)},ZZ=function(P){return{type:"arithmetic",tail:P}},KZ=function(P,G){return{op:P+"NOT",right:G}},YZ=function(P,G){return{op:P,right:G}},XZ=function(P,G,J){return{op:"NOT"+P,right:{type:"expression-list",value:[G,J]}}},QZ=function(P,G,J){return{op:P,right:{type:"expression-list",value:[G,J]}}},eK=function(P){return P[0]+" "+P[2]},tK=function(P){return P[0]+" "+P[2]},iK=function(P,G,J){return{op:P,right:G,escape:J.value}},rK=function(P,G){return{op:P,right:G,escape:""}},nK=function(P,G){return{op:P,right:G}},sK=function(P){return{op:P,right:{type:"expression-list",value:[]}}},oK=function(P,G){return{op:P,right:G}},aK=function(P,G){return yy(P,G)},lK=function(P,G){return yy(P,G)},uK=function(P){return P.paren=!0,P},cK=function(P){return/^CURRENT_DATE$/i.test(P)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(P)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:P}},hK=function(P){return P},pK=function(P,G){return P+G.join("")},dK=function(P,G){return P+G.join("")},fK=function(P){return{type:"parameter",value:P[1]}},yK=function(P,G){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:P},G]}}},gK=function(P,G,J){return{type:"function",name:"substring",args:{type:"expression-list",value:J?[P,G,J[2]]:[P,G]}}},mK=function(P,G,J){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:P!=null?P:"BOTH"},G,J]}}},vK=function(P,G){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:P!=null?P:"BOTH"},G]}}},bK=function(P,G){return{type:"function",name:"position",args:{type:"expression-list",value:[P,G]}}},wK=function(P,G){return{type:"function",name:P,args:G||{type:"expression-list",value:[]}}},_K=function(P){return{type:"timestamp",value:P.value}},xK=function(P,G,J){return{type:"interval",value:G,qualifier:J,op:P}},SK=function(P,G){return{type:"interval",value:P,qualifier:G,op:""}},MK=function(P,G){return{type:"interval-qualifier",start:P,end:G}},$K=function(P,G){return{type:"interval-period",period:P.value,precision:G,secondary:null}},EK=function(P){return{type:"interval-period",period:P.value,precision:null,secondary:null}},IK=function(P){return{type:"interval-period",period:P.value,precision:null,secondary:null}},TK=function(P,G){return{type:"interval-period",period:"second",precision:P,secondary:G}},CK=function(P){return{type:"interval-period",period:"second",precision:P,secondary:null}},AK=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},PK=function(P,G){return{type:"interval-period",period:P.value,precision:G,secondary:null}},OK=function(P){return{type:"interval-period",period:P.value,precision:null,secondary:null}},kK=function(P,G){return{type:"interval-period",period:"second",precision:P,secondary:G}},RK=function(P){return{type:"interval-period",period:"second",precision:P,secondary:null}},FK=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},LK=function(){return{type:"string",value:"day"}},NK=function(){return{type:"string",value:"hour"}},jK=function(){return{type:"string",value:"minute"}},DK=function(){return{type:"string",value:"month"}},VK=function(){return{type:"string",value:"year"}},zK=function(P){return parseFloat(P)},GK=function(P){return parseFloat(P)},qK=function(P){return{type:"date",value:P.value}},UK=function(){return{type:"null",value:null}},BK=function(){return{type:"boolean",value:!0}},HK=function(){return{type:"boolean",value:!1}},gT=function(){return"'"},WK=function(P){return{type:"string",value:P.join("")}},JK=function(P,G){return{type:"case-expression",format:"simple",operand:P,clauses:G,else:null}},ZK=function(P,G,J){return{type:"case-expression",format:"simple",operand:P,clauses:G,else:J.value}},KK=function(P){return{type:"case-expression",format:"searched",clauses:P,else:null}},YK=function(P,G){return{type:"case-expression",format:"searched",clauses:P,else:G.value}},XK=function(P,G){return{type:"when-clause",operand:P,value:G}},QK=function(P,G){return{type:"when-clause",operand:P,value:G}},eY=function(P){return{type:"else-clause",value:P}},tY=function(P){return{type:"number",value:P}},iY=function(P,G,J){return parseFloat(P+G+J)},rY=function(P,G){return parseFloat(P+G)},nY=function(P,G){return parseFloat(P+G)},sY=function(P){return parseFloat(P)},oY=function(P,G){return P[0]+G},aY=function(P){return"."+(P!=null?P:"")},lY=function(P,G){return P+G},uY=function(P){return P.join("")},cY=function(P,G){return"e"+(G===null?"":G)},hY=function(){return"IN"},pY=function(){return"IS"},dY=function(){return"LIKE"},fY=function(){return"ESCAPE"},yY=function(){return"NOT"},gY=function(){return"AND"},mY=function(){return"OR"},vY=function(){return"BETWEEN"},bY=function(){return"FROM"},wY=function(){return"FOR"},_Y=function(){return"SUBSTRING"},xY=function(){return"EXTRACT"},SY=function(){return"TRIM"},MY=function(){return"POSITION"},$Y=function(){return"TIMESTAMP"},EY=function(){return"DATE"},IY=function(){return"LEADING"},TY=function(){return"TRAILING"},CY=function(){return"BOTH"},AY=function(){return"TO"},PY=function(){return"INTERVAL"},OY=function(){return"YEAR"},kY=function(){return"MONTH"},RY=function(){return"DAY"},FY=function(){return"HOUR"},LY=function(){return"MINUTE"},NY=function(){return"SECOND"},jY=function(){return"CASE"},DY=function(){return"END"},VY=function(){return"WHEN"},zY=function(){return"THEN"},GY=function(){return"ELSE"},qY=function(P){return P},UY=function(P){return P.join("")},D=0,rb=[{line:1,column:1}],Ga=0,v5=[],Se=0;if("startRule"in l){if(!(l.startRule in _))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');M=_[l.startRule]}function Mt(P,G){return{type:"literal",text:P,ignoreCase:G}}function Gl(P,G,J){return{type:"class",parts:P,inverted:G,ignoreCase:J}}function BY(){return{type:"end"}}function mT(P){var G,J=rb[P];if(J)return J;for(G=P-1;!rb[G];)G--;for(J={line:(J=rb[G]).line,column:J.column};G<P;)s.charCodeAt(G)===10?(J.line++,J.column=1):J.column++,G++;return rb[P]=J,J}function vT(P,G){var J=mT(P),oe=mT(G);return{source:v,start:{offset:P,line:J.line,column:J.column},end:{offset:G,line:oe.line,column:oe.column}}}function at(P){D<Ga||(D>Ga&&(Ga=D,v5=[]),v5.push(P))}function HY(P,G,J){return new t(t.buildMessage(P,G),P,G,J)}function bT(){var P,G;return P=D,Te(),(G=Ir())!==d?(Te(),P=qZ(G)):(D=P,P=d),P}function wT(){var P,G,J,oe,lt,ci,ji,sr;if(P=D,(G=Ir())!==d){for(J=[],oe=D,lt=Te(),(ci=db())!==d?(ji=Te(),(sr=Ir())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);oe!==d;)J.push(oe),oe=D,lt=Te(),(ci=db())!==d?(ji=Te(),(sr=Ir())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);P=UZ(G,J)}else D=P,P=d;return P}function Ir(){var P,G,J,oe,lt,ci,ji,sr;if(P=D,(G=b5())!==d){for(J=[],oe=D,lt=Te(),(ci=FT())!==d?(ji=Te(),(sr=b5())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);oe!==d;)J.push(oe),oe=D,lt=Te(),(ci=FT())!==d?(ji=Te(),(sr=b5())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);P=BZ(G,J)}else D=P,P=d;return P}function b5(){var P,G,J,oe,lt,ci,ji,sr;if(P=D,(G=nb())!==d){for(J=[],oe=D,lt=Te(),(ci=cb())!==d?(ji=Te(),(sr=nb())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);oe!==d;)J.push(oe),oe=D,lt=Te(),(ci=cb())!==d?(ji=Te(),(sr=nb())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);P=HZ(G,J)}else D=P,P=d;return P}function nb(){var P,G,J,oe,lt;return P=D,(G=fy())===d&&(G=D,s.charCodeAt(D)===33?(J=T,D++):(J=d,Se===0&&at(p)),J!==d?(oe=D,Se++,s.charCodeAt(D)===61?(lt=A,D++):(lt=d,Se===0&&at(f)),Se--,lt===d?oe=void 0:(D=oe,oe=d),oe!==d?G=J=[J,oe]:(D=G,G=d)):(D=G,G=d)),G!==d?(J=Te(),(oe=nb())!==d?P=WZ(oe):(D=P,P=d)):(D=P,P=d),P===d&&(P=WY()),P}function WY(){var P,G,J;return P=D,(G=ql())!==d?(Te(),(J=JY())===d&&(J=null),P=JZ(G,J)):(D=P,P=d),P}function JY(){var P;return(P=ZY())===d&&(P=QY())===d&&(P=YY())===d&&(P=KY())===d&&(P=XY()),P}function ZY(){var P,G,J,oe,lt,ci;if(P=[],G=D,J=Te(),(oe=_T())!==d?(lt=Te(),(ci=ql())!==d?G=J=[J,oe,lt,ci]:(D=G,G=d)):(D=G,G=d),G!==d)for(;G!==d;)P.push(G),G=D,J=Te(),(oe=_T())!==d?(lt=Te(),(ci=ql())!==d?G=J=[J,oe,lt,ci]:(D=G,G=d)):(D=G,G=d);else P=d;return P!==d&&(P=ZZ(P)),P}function _T(){var P;return s.substr(D,2)===R?(P=R,D+=2):(P=d,Se===0&&at(g)),P===d&&(s.charCodeAt(D)===62?(P=F,D++):(P=d,Se===0&&at(b)),P===d&&(s.substr(D,2)===V?(P=V,D+=2):(P=d,Se===0&&at(S)),P===d&&(s.substr(D,2)===z?(P=z,D+=2):(P=d,Se===0&&at($)),P===d&&(s.charCodeAt(D)===60?(P=W,D++):(P=d,Se===0&&at(E)),P===d&&(s.charCodeAt(D)===61?(P=A,D++):(P=d,Se===0&&at(f)),P===d&&(s.substr(D,2)===Z?(P=Z,D+=2):(P=d,Se===0&&at(C)))))))),P}function KY(){var P,G,J,oe;return P=D,(G=kT())!==d?(Te(),(J=fy())!==d?(Te(),(oe=ql())!==d?P=KZ(G,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=kT())!==d?(Te(),(J=ql())!==d?P=YZ(G,J):(D=P,P=d)):(D=P,P=d)),P}function YY(){var P,G,J,oe,lt,ci;return P=D,(G=fy())!==d?(Te(),(J=LT())!==d?(Te(),(oe=ql())!==d?(Te(),(lt=cb())!==d?(Te(),(ci=ql())!==d?P=XZ(J,oe,ci):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=LT())!==d?(Te(),(J=ql())!==d?(Te(),(oe=cb())!==d?(Te(),(lt=ql())!==d?P=QZ(G,J,lt):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)),P}function xT(){var P,G,J,oe,lt;return P=D,G=D,(J=fy())!==d?(oe=Te(),(lt=RT())!==d?G=J=[J,oe,lt]:(D=G,G=d)):(D=G,G=d),G!==d&&(G=eK(G)),(P=G)===d&&(P=RT()),P}function w5(){var P,G,J,oe,lt;return P=D,G=D,(J=fy())!==d?(oe=Te(),(lt=E5())!==d?G=J=[J,oe,lt]:(D=G,G=d)):(D=G,G=d),G!==d&&(G=tK(G)),(P=G)===d&&(P=E5()),P}function XY(){var P,G,J,oe;return P=D,(G=xT())!==d?(Te(),(J=ff())!==d?(Te(),IX()!==d?(Te(),(oe=$5())!==d?P=iK(G,J,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=xT())!==d?(Te(),(J=ff())!==d?P=rK(G,J):(D=P,P=d)):(D=P,P=d)),P}function QY(){var P,G,J,oe;return P=D,(G=w5())!==d?(Te(),(J=Xn())!==d?(Te(),(oe=wT())!==d?(Te(),Qn()!==d?P=nK(G,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=w5())!==d?(Te(),(J=Xn())!==d?(Te(),(oe=Qn())!==d?P=sK(G):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=w5())!==d?(Te(),(J=M5())!==d?P=oK(G,J):(D=P,P=d)):(D=P,P=d))),P}function ql(){var P,G,J,oe,lt,ci,ji,sr;if(P=D,(G=_5())!==d){for(J=[],oe=D,lt=Te(),(ci=ST())!==d?(ji=Te(),(sr=_5())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);oe!==d;)J.push(oe),oe=D,lt=Te(),(ci=ST())!==d?(ji=Te(),(sr=_5())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);P=aK(G,J)}else D=P,P=d;return P}function ST(){var P;return s.charCodeAt(D)===43?(P=Q,D++):(P=d,Se===0&&at(k)),P===d&&(s.charCodeAt(D)===45?(P=ee,D++):(P=d,Se===0&&at(L))),P}function _5(){var P,G,J,oe,lt,ci,ji,sr;if(P=D,(G=x5())!==d){for(J=[],oe=D,lt=Te(),(ci=MT())!==d?(ji=Te(),(sr=x5())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);oe!==d;)J.push(oe),oe=D,lt=Te(),(ci=MT())!==d?(ji=Te(),(sr=x5())!==d?oe=lt=[lt,ci,ji,sr]:(D=oe,oe=d)):(D=oe,oe=d);P=lK(G,J)}else D=P,P=d;return P}function MT(){var P;return s.charCodeAt(D)===42?(P=re,D++):(P=d,Se===0&&at(N)),P===d&&(s.charCodeAt(D)===47?(P=ie,D++):(P=d,Se===0&&at(U))),P}function x5(){var P,G;return(P=uX())===d&&(P=rX())===d&&(P=nX())===d&&(P=sX())===d&&(P=oX())===d&&(P=aX())===d&&(P=vX())===d&&(P=eX())===d&&(P=M5())===d&&(P=D,Xn()!==d?(Te(),(G=Ir())!==d?(Te(),Qn()!==d?P=uK(G):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)),P}function eX(){var P;return(P=tX())!==d&&(P=cK(P)),P}function tX(){var P;return(P=iX())!==d&&(P=hK(P)),P}function iX(){var P,G,J,oe;if(P=D,(G=S5())!==d){for(J=[],oe=ET();oe!==d;)J.push(oe),oe=ET();P=pK(G,J)}else D=P,P=d;return P}function $T(){var P,G,J,oe;if(P=D,(G=S5())!==d){for(J=[],oe=ii();oe!==d;)J.push(oe),oe=ii();P=dK(G,J)}else D=P,P=d;return P}function S5(){var P;return xr.test(s.charAt(D))?(P=s.charAt(D),D++):(P=d,Se===0&&at(H)),P}function ii(){var P;return h.test(s.charAt(D))?(P=s.charAt(D),D++):(P=d,Se===0&&at(j)),P}function ET(){var P;return O.test(s.charAt(D))?(P=s.charAt(D),D++):(P=d,Se===0&&at(K)),P}function M5(){var P,G,J;return P=D,s.charCodeAt(D)===64?(G=he,D++):(G=d,Se===0&&at(se)),G!==d&&(J=$T())!==d?P=G=[G,J]:(D=P,P=d),P!==d&&(P=fK(P)),P}function rX(){var P,G,J;return P=D,AX()!==d?(Te(),Xn()!==d?(Te(),(G=lX())!==d?(Te(),I5()!==d?(Te(),(J=Ir())!==d?(Te(),Qn()!==d?P=yK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P}function nX(){var P,G,J,oe,lt,ci,ji;return P=D,CX()!==d?(Te(),Xn()!==d?(Te(),(G=Ir())!==d?(Te(),I5()!==d?(Te(),(J=Ir())!==d?(Te(),oe=D,(lt=TX())!==d?(ci=Te(),(ji=Ir())!==d?oe=lt=[lt,ci,ji,Te()]:(D=oe,oe=d)):(D=oe,oe=d),oe===d&&(oe=null),(lt=Qn())!==d?P=gK(G,J,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P}function sX(){var P,G,J,oe;return P=D,NT()!==d?(Te(),Xn()!==d?(Te(),(G=IT())===d&&(G=null),Te(),(J=Ir())!==d?(Te(),I5()!==d?(Te(),(oe=Ir())!==d?(Te(),Qn()!==d?P=mK(G,J,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,NT()!==d?(Te(),Xn()!==d?(Te(),(G=IT())===d&&(G=null),Te(),(J=Ir())!==d?(Te(),Qn()!==d?P=vK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)),P}function IT(){var P;return(P=RX())===d&&(P=FX())===d&&(P=LX()),P}function oX(){var P,G,J;return P=D,PX()!==d?(Te(),Xn()!==d?(Te(),(G=Ir())!==d?(Te(),E5()!==d?(Te(),(J=Ir())!==d?(Te(),Qn()!==d?P=bK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P}function aX(){var P,G,J;return P=D,(G=DX())!==d?(Te(),Xn()!==d?(Te(),(J=wT())===d&&(J=null),Te(),Qn()!==d?P=wK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P}function lX(){var P;return(P=DT())===d&&(P=VT())===d&&(P=zT())===d&&(P=GT())===d&&(P=qT())===d&&(P=Qh()),P}function uX(){var P;return(P=$5())===d&&(P=_X())===d&&(P=mX())===d&&(P=gX())===d&&(P=yX())===d&&(P=cX())===d&&(P=hX()),P}function cX(){var P,G;return P=D,OX()!==d?(Te(),(G=ff())!==d?P=_K(G):(D=P,P=d)):(D=P,P=d),P}function hX(){var P,G,J,oe;return P=D,jT()!==d?(Te(),s.charCodeAt(D)===45?(G=ee,D++):(G=d,Se===0&&at(L)),G===d&&(s.charCodeAt(D)===43?(G=Q,D++):(G=d,Se===0&&at(k))),G!==d?(Te(),(J=ff())!==d?(Te(),(oe=TT())!==d?P=xK(G,J,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,jT()!==d?(Te(),(G=ff())!==d?(Te(),(J=TT())!==d?P=SK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)),P}function TT(){var P,G,J;return P=D,(G=pX())!==d?(Te(),NX()!==d?(Te(),(J=dX())!==d?P=MK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=fX()),P}function pX(){var P,G,J;return P=D,(G=dy())!==d?(Te(),Xn()!==d?(Te(),(J=ob())!==d?(Te(),Qn()!==d?P=$K(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=dy())!==d&&(G=EK(G)),P=G),P}function dX(){var P,G,J,oe;return P=D,(G=dy())!==d&&(G=IK(G)),(P=G)===d&&(P=D,(G=Qh())!==d?(Te(),Xn()!==d?(Te(),(J=ob())!==d?(Te(),db()!==d?(Te(),(oe=sb())!==d?(Te(),Qn()!==d?P=TK(J,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=Qh())!==d?(Te(),Xn()!==d?(Te(),(J=ob())!==d?(Te(),Qn()!==d?P=CK(J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=Qh())!==d&&(G=AK()),P=G))),P}function fX(){var P,G,J,oe;return P=D,(G=dy())!==d?(Te(),Xn()!==d?(Te(),(J=sb())!==d?(Te(),Qn()!==d?P=PK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=dy())!==d&&(G=OK(G)),(P=G)===d&&(P=D,(G=Qh())!==d?(Te(),Xn()!==d?(Te(),(J=ob())!==d?(Te(),db()!==d?(Te(),(oe=sb())!==d?(Te(),Qn()!==d?P=kK(J,oe):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=Qh())!==d?(Te(),Xn()!==d?(Te(),(J=sb())!==d?(Te(),Qn()!==d?P=RK(J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P===d&&(P=D,(G=Qh())!==d&&(G=FK()),P=G)))),P}function dy(){var P,G;return P=D,(G=zT())!==d&&(G=LK()),(P=G)===d&&(P=D,(G=GT())!==d&&(G=NK()),(P=G)===d&&(P=D,(G=qT())!==d&&(G=jK()),(P=G)===d&&(P=D,(G=VT())!==d&&(G=DK()),(P=G)===d&&(P=D,(G=DT())!==d&&(G=VK()),P=G)))),P}function sb(){var P;return(P=yf())!==d&&(P=zK(P)),P}function ob(){var P;return(P=yf())!==d&&(P=GK(P)),P}function yX(){var P,G;return P=D,kX()!==d?(Te(),(G=ff())!==d?P=qK(G):(D=P,P=d)):(D=P,P=d),P}function gX(){var P;return(P=MX())!==d&&(P=UK()),P}function mX(){var P,G;return P=D,(G=$X())!==d&&(G=BK()),(P=G)===d&&(P=D,(G=EX())!==d&&(G=HK()),P=G),P}function ff(){var P;return(P=$5())===d&&(P=M5()),P}function $5(){var P,G,J,oe,lt;if(P=D,s.charCodeAt(D)===39?(G=be,D++):(G=d,Se===0&&at(ne)),G===d&&(s.substr(D,2)===we?(G=we,D+=2):(G=d,Se===0&&at(pe))),G!==d){for(J=[],oe=D,s.substr(D,2)===xe?(lt=xe,D+=2):(lt=d,Se===0&&at(ce)),lt!==d&&(lt=gT()),(oe=lt)===d&&(w.test(s.charAt(D))?(oe=s.charAt(D),D++):(oe=d,Se===0&&at(_e)));oe!==d;)J.push(oe),oe=D,s.substr(D,2)===xe?(lt=xe,D+=2):(lt=d,Se===0&&at(ce)),lt!==d&&(lt=gT()),(oe=lt)===d&&(w.test(s.charAt(D))?(oe=s.charAt(D),D++):(oe=d,Se===0&&at(_e)));s.charCodeAt(D)===39?(oe=be,D++):(oe=d,Se===0&&at(ne)),oe!==d?P=WK(J):(D=P,P=d)}else D=P,P=d;return P}function vX(){var P;return(P=bX())===d&&(P=wX()),P}function bX(){var P,G,J,oe,lt;if(P=D,hb()!==d)if(Te(),(G=Ir())!==d){for(Te(),J=[],oe=lb();oe!==d;)J.push(oe),oe=lb();oe=Te(),(lt=pb())!==d?P=JK(G,J):(D=P,P=d)}else D=P,P=d;else D=P,P=d;if(P===d)if(P=D,hb()!==d)if(Te(),(G=Ir())!==d){for(Te(),J=[],oe=lb();oe!==d;)J.push(oe),oe=lb();oe=Te(),(lt=CT())!==d?(Te(),pb()!==d?P=ZK(G,J,lt):(D=P,P=d)):(D=P,P=d)}else D=P,P=d;else D=P,P=d;return P}function wX(){var P,G,J,oe;if(P=D,hb()!==d){for(Te(),G=[],J=ab();J!==d;)G.push(J),J=ab();J=Te(),(oe=pb())!==d?P=KK(G):(D=P,P=d)}else D=P,P=d;if(P===d)if(P=D,hb()!==d){for(Te(),G=[],J=ab();J!==d;)G.push(J),J=ab();J=Te(),(oe=CT())!==d?(Te(),pb()!==d?P=YK(G,oe):(D=P,P=d)):(D=P,P=d)}else D=P,P=d;return P}function ab(){var P,G,J;return P=D,UT()!==d?(Te(),(G=Ir())!==d?(Te(),BT()!==d?(Te(),(J=Ir())!==d?P=XK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P}function lb(){var P,G,J;return P=D,UT()!==d?(Te(),(G=Ir())!==d?(Te(),BT()!==d?(Te(),(J=Ir())!==d?P=QK(G,J):(D=P,P=d)):(D=P,P=d)):(D=P,P=d)):(D=P,P=d),P}function CT(){var P,G;return P=D,jX()!==d?(Te(),(G=Ir())!==d?P=eY(G):(D=P,P=d)):(D=P,P=d),P}function _X(){var P,G,J,oe;return P=D,(G=xX())!==d?(J=D,Se++,oe=S5(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=tY(G):(D=P,P=d)):(D=P,P=d),P}function xX(){var P,G,J,oe;return P=D,(G=ub())!==d&&(J=AT())!==d&&(oe=PT())!==d?P=iY(G,J,oe):(D=P,P=d),P===d&&(P=D,(G=ub())!==d&&(J=AT())!==d?P=rY(G,J):(D=P,P=d),P===d&&(P=D,(G=ub())!==d&&(J=PT())!==d?P=nY(G,J):(D=P,P=d),P===d&&(P=D,(G=ub())!==d&&(G=sY(G)),P=G))),P}function ub(){var P,G,J;return(P=yf())===d&&(P=D,s.charCodeAt(D)===45?(G=ee,D++):(G=d,Se===0&&at(L)),G===d&&(s.charCodeAt(D)===43?(G=Q,D++):(G=d,Se===0&&at(k))),G!==d&&(J=yf())!==d?P=oY(G,J):(D=P,P=d)),P}function AT(){var P,G,J;return P=D,s.charCodeAt(D)===46?(G=$e,D++):(G=d,Se===0&&at(Oe)),G!==d?((J=yf())===d&&(J=null),P=aY(J)):(D=P,P=d),P}function PT(){var P,G,J;return P=D,(G=SX())!==d&&(J=yf())!==d?P=lY(G,J):(D=P,P=d),P}function yf(){var P,G;if(P=[],(G=OT())!==d)for(;G!==d;)P.push(G),G=OT();else P=d;return P!==d&&(P=uY(P)),P}function OT(){var P;return c.test(s.charAt(D))?(P=s.charAt(D),D++):(P=d,Se===0&&at(Ce)),P}function SX(){var P,G,J;return P=D,a.test(s.charAt(D))?(G=s.charAt(D),D++):(G=d,Se===0&&at(st)),G!==d?(n.test(s.charAt(D))?(J=s.charAt(D),D++):(J=d,Se===0&&at(qe)),J===d&&(J=null),P=cY(G,J)):(D=P,P=d),P}function MX(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===je?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(Et)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=G=[G,J]:(D=P,P=d)):(D=P,P=d),P}function $X(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===it?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(xt)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=G=[G,J]:(D=P,P=d)):(D=P,P=d),P}function EX(){var P,G,J,oe;return P=D,s.substr(D,5).toLowerCase()===Ye?(G=s.substr(D,5),D+=5):(G=d,Se===0&&at(et)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=G=[G,J]:(D=P,P=d)):(D=P,P=d),P}function E5(){var P,G,J,oe;return P=D,s.substr(D,2).toLowerCase()===Lt?(G=s.substr(D,2),D+=2):(G=d,Se===0&&at(xi)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=hY():(D=P,P=d)):(D=P,P=d),P}function kT(){var P,G,J,oe;return P=D,s.substr(D,2).toLowerCase()===Dt?(G=s.substr(D,2),D+=2):(G=d,Se===0&&at(nr)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=pY():(D=P,P=d)):(D=P,P=d),P}function RT(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===ft?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(Ei)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=dY():(D=P,P=d)):(D=P,P=d),P}function IX(){var P,G,J,oe;return P=D,s.substr(D,6).toLowerCase()===Ze?(G=s.substr(D,6),D+=6):(G=d,Se===0&&at(ei)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=fY():(D=P,P=d)):(D=P,P=d),P}function fy(){var P,G,J,oe;return P=D,s.substr(D,3).toLowerCase()===Ct?(G=s.substr(D,3),D+=3):(G=d,Se===0&&at(ti)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=yY():(D=P,P=d)):(D=P,P=d),P}function cb(){var P,G,J,oe;return P=D,s.substr(D,3).toLowerCase()===Oi?(G=s.substr(D,3),D+=3):(G=d,Se===0&&at(zt)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=gY():(D=P,P=d)):(D=P,P=d),P}function FT(){var P,G,J,oe;return P=D,s.substr(D,2).toLowerCase()===Ui?(G=s.substr(D,2),D+=2):(G=d,Se===0&&at(ki)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=mY():(D=P,P=d)):(D=P,P=d),P}function LT(){var P,G,J,oe;return P=D,s.substr(D,7).toLowerCase()===_i?(G=s.substr(D,7),D+=7):(G=d,Se===0&&at(jt)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=vY():(D=P,P=d)):(D=P,P=d),P}function I5(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===pr?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(dr)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=bY():(D=P,P=d)):(D=P,P=d),P}function TX(){var P,G,J,oe;return P=D,s.substr(D,3).toLowerCase()===Rr?(G=s.substr(D,3),D+=3):(G=d,Se===0&&at(Ut)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=wY():(D=P,P=d)):(D=P,P=d),P}function CX(){var P,G,J,oe;return P=D,s.substr(D,9).toLowerCase()===Ne?(G=s.substr(D,9),D+=9):(G=d,Se===0&&at(Br)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=_Y():(D=P,P=d)):(D=P,P=d),P}function AX(){var P,G,J,oe;return P=D,s.substr(D,7).toLowerCase()===ct?(G=s.substr(D,7),D+=7):(G=d,Se===0&&at(ui)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=xY():(D=P,P=d)):(D=P,P=d),P}function NT(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===We?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(pc)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=SY():(D=P,P=d)):(D=P,P=d),P}function PX(){var P,G,J,oe;return P=D,s.substr(D,8).toLowerCase()===yt?(G=s.substr(D,8),D+=8):(G=d,Se===0&&at(dc)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=MY():(D=P,P=d)):(D=P,P=d),P}function OX(){var P,G,J,oe;return P=D,s.substr(D,9).toLowerCase()===ni?(G=s.substr(D,9),D+=9):(G=d,Se===0&&at(fc)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=$Y():(D=P,P=d)):(D=P,P=d),P}function kX(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===si?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(un)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=EY():(D=P,P=d)):(D=P,P=d),P}function RX(){var P,G,J,oe;return P=D,s.substr(D,7).toLowerCase()===Rt?(G=s.substr(D,7),D+=7):(G=d,Se===0&&at(g5)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=IY():(D=P,P=d)):(D=P,P=d),P}function FX(){var P,G,J,oe;return P=D,s.substr(D,8).toLowerCase()===Ft?(G=s.substr(D,8),D+=8):(G=d,Se===0&&at(m5)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=TY():(D=P,P=d)):(D=P,P=d),P}function LX(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===ue?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(le)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=CY():(D=P,P=d)):(D=P,P=d),P}function NX(){var P,G,J,oe;return P=D,s.substr(D,2).toLowerCase()===ye?(G=s.substr(D,2),D+=2):(G=d,Se===0&&at(Pe)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=AY():(D=P,P=d)):(D=P,P=d),P}function jT(){var P,G,J,oe;return P=D,s.substr(D,8).toLowerCase()===Ee?(G=s.substr(D,8),D+=8):(G=d,Se===0&&at(Ue)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=PY():(D=P,P=d)):(D=P,P=d),P}function DT(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===Ge?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(qt)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=OY():(D=P,P=d)):(D=P,P=d),P}function VT(){var P,G,J,oe;return P=D,s.substr(D,5).toLowerCase()===ke?(G=s.substr(D,5),D+=5):(G=d,Se===0&&at(Hr)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=kY():(D=P,P=d)):(D=P,P=d),P}function zT(){var P,G,J,oe;return P=D,s.substr(D,3).toLowerCase()===B?(G=s.substr(D,3),D+=3):(G=d,Se===0&&at(Yi)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=RY():(D=P,P=d)):(D=P,P=d),P}function GT(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===Je?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(bs)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=FY():(D=P,P=d)):(D=P,P=d),P}function qT(){var P,G,J,oe;return P=D,s.substr(D,6).toLowerCase()===He?(G=s.substr(D,6),D+=6):(G=d,Se===0&&at(df)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=LY():(D=P,P=d)):(D=P,P=d),P}function Qh(){var P,G,J,oe;return P=D,s.substr(D,6).toLowerCase()===Re?(G=s.substr(D,6),D+=6):(G=d,Se===0&&at(kZ)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=NY():(D=P,P=d)):(D=P,P=d),P}function hb(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===Le?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(RZ)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=jY():(D=P,P=d)):(D=P,P=d),P}function pb(){var P,G,J,oe;return P=D,s.substr(D,3).toLowerCase()===ht?(G=s.substr(D,3),D+=3):(G=d,Se===0&&at(FZ)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=DY():(D=P,P=d)):(D=P,P=d),P}function UT(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===ut?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(LZ)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=VY():(D=P,P=d)):(D=P,P=d),P}function BT(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===pt?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(NZ)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=zY():(D=P,P=d)):(D=P,P=d),P}function jX(){var P,G,J,oe;return P=D,s.substr(D,4).toLowerCase()===St?(G=s.substr(D,4),D+=4):(G=d,Se===0&&at(jZ)),G!==d?(J=D,Se++,oe=ii(),Se--,oe===d?J=void 0:(D=J,J=d),J!==d?P=GY():(D=P,P=d)):(D=P,P=d),P}function db(){var P;return s.charCodeAt(D)===44?(P=Nt,D++):(P=d,Se===0&&at(DZ)),P}function Xn(){var P;return s.charCodeAt(D)===40?(P=$i,D++):(P=d,Se===0&&at(VZ)),P}function Qn(){var P;return s.charCodeAt(D)===41?(P=Xt,D++):(P=d,Se===0&&at(zZ)),P}function Te(){var P,G;for(P=[],G=HT();G!==d;)P.push(G),G=HT();return P}function HT(){var P;return o.test(s.charAt(D))?(P=s.charAt(D),D++):(P=d,Se===0&&at(GZ)),P}function DX(){var P,G,J,oe;if(P=D,(G=$T())!==d&&(G=qY(G)),(P=G)===d)if(P=D,s.charCodeAt(D)===96?(G=Fe,D++):(G=d,Se===0&&at(fT)),G!==d){if(J=[],u.test(s.charAt(D))?(oe=s.charAt(D),D++):(oe=d,Se===0&&at(yT)),oe!==d)for(;oe!==d;)J.push(oe),u.test(s.charAt(D))?(oe=s.charAt(D),D++):(oe=d,Se===0&&at(yT));else J=d;J!==d?(s.charCodeAt(D)===96?(oe=Fe,D++):(oe=d,Se===0&&at(fT)),oe!==d?P=UY(J):(D=P,P=d)):(D=P,P=d)}else D=P,P=d;return P}function VX(P,G){return{type:"unary-expression",operator:P,expr:G}}function WT(P,G,J,oe){var lt={type:"binary-expression",operator:P,left:G,right:J};return oe!==void 0&&(lt.escape=oe),lt}function zX(P,G){for(var J=[P],oe=0;oe<G.length;oe++)J.push(G[oe][3]);return J}function GX(P,G,J){return zX(P,G)}function yy(P,G){for(var J=P,oe=0;oe<G.length;oe++)J=WT(G[oe][1],J,G[oe][3]);return J}if((y=M())!==d&&D===s.length)return y;throw y!==d&&D<s.length&&at(BY()),HY(v5,Ga<s.length?s.charAt(Ga):null,Ga<s.length?vT(Ga,Ga+1):vT(Ga,Ga))}return e(t,Error),t.prototype.format=function(s){var l="Error: "+this.message;if(this.location){var y,d=null;for(y=0;y<s.length;y++)if(s[y].source===this.location.source){d=s[y].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,_=this.location.source+":"+v.line+":"+v.column;if(d){var M=this.location.end,T=i("",v.line.toString().length," "),A=d[v.line-1],R=(v.line===M.line?M.column:A.length+1)-v.column||1;l+=`
 --> `+_+`
`+T+` |
`+v.line+" | "+A+`
`+T+" | "+i("",v.column-1," ")+i("",R,"^")}else l+=`
 at `+_}return l},t.buildMessage=function(s,l){var y={literal:function(R){return'"'+v(R.text)+'"'},class:function(R){var F=R.parts.map(function(V){return Array.isArray(V)?_(V[0])+"-"+_(V[1]):_(V)});return"["+(R.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function d(R){return R.charCodeAt(0).toString(16).toUpperCase()}function v(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function _(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+d(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+d(F)})}function M(R){return y[R.type](R)}function T(R){var F,V,z=R.map(M);if(z.sort(),z.length>0){for(F=1,V=1;F<z.length;F++)z[F-1]!==z[F]&&(z[V]=z[F],V++);z.length=V}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function A(R){return R?'"'+v(R)+'"':"end of input"}return"Expected "+T(s)+" but "+A(l)+" found."},{SyntaxError:t,parse:r}},(fJ=gJ).exports&&(fJ.exports=yJ());class _Me{static parse(t){return gJ.exports.parse(t)}}const mJ=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,xMe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,SMe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,MMe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,$Me=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,EMe=new Set(["current_timestamp","current_date","current_time"]);function sf(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function Yv(e,t,i="0",r="0",s="0",l="0",y="",d="0",v="0"){if(y==="+"||y==="-"){const _=`${sf(parseInt(e,10),4)}-${sf(parseInt(t,10),2)}-${sf(parseInt(i,10),2)}`;let M="";parseFloat(l)<10&&(M="0");const T=`${sf(parseInt(r,10),2)}:${sf(parseInt(s,10),2)}:${M+parseFloat(l).toString()}`,A=`${y}${sf(parseInt(d,10),2)}:${sf(parseInt(v,10),2)}`;return new Date(_+"T"+T+A)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(i,10),parseInt(r,10),parseInt(s,10),parseFloat(l))}class IMe{static makeBool(t){return bJ(t)}static featureValue(t,i,r,s){return $J(t,i,r,s)}static equalsNull(t){return t===null}static applyLike(t,i,r){return BI(t,i,r)}static ensureArray(t){return qI(t)}static applyIn(t,i){return UI(t,i)}static currentDate(){const t=new Date;return t.setHours(0,0,0,0),t}static makeSqlInterval(t,i,r){return vs.createFromValueAndQualifer(t,i,r)}static convertInterval(t){return t instanceof vs?t.valueInMilliseconds():t}static currentTimestamp(){return new Date}static compare(t,i,r){return SJ(t,i,r)}static calculate(t,i,r){return MJ(t,i,r)}static makeComparable(t){return nc(t)}static evaluateFunction(t,i){return pJ(t,i)}static lookup(t,i){const r=i[t];return r===void 0?null:r}static between(t,i){return t==null||i[0]==null||i[1]==null?null:t>=i[0]&&t<=i[1]}static notbetween(t,i){return t==null||i[0]==null||i[1]==null?null:t<i[0]||t>i[1]}static ternaryNot(t){return i5(t)}static ternaryAnd(t,i){return wJ(t,i)}static ternaryOr(t,i){return _J(t,i)}}class t5{constructor(t,i){this.fieldsIndex=i,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=_Me.parse(t);const{isStandardized:r,isAggregate:s,referencedFieldNames:l}=this._extractExpressionInfo(i);this._referencedFieldNames=l,this.isStandardized=r,this.isAggregate=s}static create(t,i){return new t5(t,i)}get fieldNames(){return this._referencedFieldNames}testSet(t,i=af){const r={};for(const s of this.fieldNames)r[s]=t.map(l=>i.getAttribute(l,s));return!!this._evaluateNode(this.parseTree,{attributes:r},af)}calculateValue(t,i=af){const r=this._evaluateNode(this.parseTree,t,i);return r instanceof vs?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(t,i=af){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(t,this.parameters,i,this._datefields):Me("esri-csp-restrictions")?this.calculateValue(t,i):(this._compileMe(),this.parseTree._compiledVersion(t,this.parameters,i,this._datefields))}testFeature(t,i=af){return!!this._evaluateNode(this.parseTree,t,i)}testFeatureCompiled(t,i=af){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(t,this.parameters,i,this._datefields):Me("esri-csp-restrictions")?this.testFeature(t,i):(this._compileMe(),!!this.parseTree._compiledVersion(t,this.parameters,i,this._datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,t=>{t.type==="current-time"?this._hasDateFunctions=!0:t.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||EMe.has(t.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="function"&&t.add(i.name.toLowerCase())}),Array.from(t)}getExpressions(){const t=new Map;return this._visitAll(this.parseTree,i=>{if(i.type==="function"){const r=i.name.toLowerCase(),s=i.args.value[0];if(s.type==="column-reference"){const l=s.column,y=`${r}-${l}`;t.has(y)||t.set(y,{aggregateType:r,field:l})}}}),[...t.values()]}getVariables(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="parameter"&&t.add(i.value.toLowerCase())}),Array.from(t)}_compileMe(){const t="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",t).bind(IMe)}_extractExpressionInfo(t){const i=[],r=new Set;let s=!0,l=!0;return this._visitAll(this.parseTree,y=>{var d;switch(y.type){case"column-reference":{const v=t==null?void 0:t.get(y.column);let _,M;v?_=M=(d=v.name)!=null?d:"":(M=y.column,_=M.toLowerCase()),v&&v.name&&(v.type==="date"||v.type==="esriFieldTypeDate")&&(this._datefields[v.name]=1),r.has(_)||(r.add(_),i.push(M)),y.column=M;break}case"function":{const{name:v,args:_}=y,M=_.value.length;s&&(s=wMe(v,M)),l&&(l=vMe(v,M));break}}}),{referencedFieldNames:Array.from(i),isStandardized:s,isAggregate:l}}_visitAll(t,i){if(t!=null)switch(i(t),t.type){case"when-clause":this._visitAll(t.operand,i),this._visitAll(t.value,i);break;case"case-expression":for(const r of t.clauses)this._visitAll(r,i);t.format==="simple"&&this._visitAll(t.operand,i),t.else!==null&&this._visitAll(t.else,i);break;case"expression-list":for(const r of t.value)this._visitAll(r,i);break;case"unary-expression":this._visitAll(t.expr,i);break;case"binary-expression":this._visitAll(t.left,i),this._visitAll(t.right,i);break;case"function":this._visitAll(t.args,i)}}evaluateNodeToJavaScript(t){switch(t.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(t.value)+", "+JSON.stringify(t.qualifier)+","+JSON.stringify(t.op)+")";case"case-expression":{let i="";if(t.format==="simple"){const r="this.makeComparable("+this.evaluateNodeToJavaScript(t.operand)+")";i="( ";for(let s=0;s<t.clauses.length;s++)i+=" ("+r+" === this.makeComparable("+this.evaluateNodeToJavaScript(t.clauses[s].operand)+")) ? ("+this.evaluateNodeToJavaScript(t.clauses[s].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}else{i="( ";for(let r=0;r<t.clauses.length;r++)i+=" this.makeBool("+this.evaluateNodeToJavaScript(t.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(t.clauses[r].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}return i}case"parameter":return"this.lookup("+JSON.stringify(t.value.toLowerCase())+",lookups)";case"expression-list":{let i="[";for(const r of t.value)i!=="["&&(i+=","),i+=this.evaluateNodeToJavaScript(r);return i+="]",i}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(t.expr)+")";case"binary-expression":switch(t.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")";case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")"}throw new Error("Not Supported Operator "+t.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(t.value);case"date":return"(new Date("+vJ(t.value).getTime().toString()+"))";case"timestamp":return"(new Date("+GI(t.value).getTime().toString()+"))";case"current-time":return t.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(t.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(t.name)+","+this.evaluateNodeToJavaScript(t.args)+")"}throw new Error("Unsupported sql syntax "+t.type)}_evaluateNode(t,i,r){switch(t.type){case"interval":{const s=this._evaluateNode(t.value,i,r);return vs.createFromValueAndQualifer(s,t.qualifier,t.op)}case"case-expression":if(t.format==="simple"){const s=nc(this._evaluateNode(t.operand,i,r));for(let l=0;l<t.clauses.length;l++)if(s===nc(this._evaluateNode(t.clauses[l].operand,i,r)))return this._evaluateNode(t.clauses[l].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}else{for(let s=0;s<t.clauses.length;s++)if(bJ(this._evaluateNode(t.clauses[s].operand,i,r)))return this._evaluateNode(t.clauses[s].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}return null;case"parameter":return this.parameters[t.value.toLowerCase()];case"expression-list":{const s=[];for(const l of t.value)s.push(this._evaluateNode(l,i,r));return s}case"unary-expression":return i5(this._evaluateNode(t.expr,i,r));case"binary-expression":switch(t.operator){case"AND":return wJ(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"OR":return _J(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)===null;case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)!==null;case"IN":{const s=qI(this._evaluateNode(t.right,i,r));return UI(this._evaluateNode(t.left,i,r),s)}case"NOT IN":{const s=qI(this._evaluateNode(t.right,i,r));return i5(UI(this._evaluateNode(t.left,i,r),s))}case"BETWEEN":{const s=this._evaluateNode(t.left,i,r),l=this._evaluateNode(t.right,i,r);return s==null||l[0]==null||l[1]==null?null:s>=nc(l[0])&&s<=nc(l[1])}case"NOTBETWEEN":{const s=this._evaluateNode(t.left,i,r),l=this._evaluateNode(t.right,i,r);return s==null||l[0]==null||l[1]==null?null:s<nc(l[0])||s>nc(l[1])}case"LIKE":return BI(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape);case"NOT LIKE":return i5(BI(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return SJ(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"-":case"+":case"*":case"/":return MJ(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r))}case"null":case"boolean":case"string":case"number":return t.value;case"date":return vJ(t.value);case"timestamp":return GI(t.value);case"current-time":{const s=new Date;return t.mode==="date"&&s.setHours(0,0,0,0),s}case"column-reference":return $J(i,t.column,this._datefields,r);case"function":{const s=this._evaluateNode(t.args,i,r);return this.isAggregate?mMe(t.name,s):pJ(t.name,s)}}throw new Error("Unsupported sql syntax "+t.type)}}function GI(e){let t=xMe.exec(e);if(t!==null){const[,i,r,s,l,y,d]=t;return Yv(i,r,s,l,y,d)}if(t=SMe.exec(e),t!==null){const[,i,r,s,l,y,d,v,_,M]=t;return Yv(i,r,s,l,y,d,v,_,M)}if(t=MMe.exec(e),t!==null){const[,i,r,s,l,y,d,v,_]=t;return Yv(i,r,s,l,y,"0",d,v,_)}if(t=$Me.exec(e),t!==null){const[,i,r,s,l,y]=t;return Yv(i,r,s,l,y)}if(t=mJ.exec(e),t!==null){const[,i,r,s]=t;return Yv(i,r,s)}throw new Error("SQL Invalid Timestamp")}function vJ(e){const t=mJ.exec(e);if(t===null)try{return GI(e)}catch{throw new Error("SQL Invalid Date")}const[,i,r,s]=t;return new Date(parseInt(i,10),parseInt(r,10)-1,parseInt(s,10))}function bJ(e){return e===!0}function qI(e){return Array.isArray(e)?e:[e]}function i5(e){return e!==null?e!==!0:null}function wJ(e,t){return e!=null&&t!=null?e===!0&&t===!0:e!==!1&&t!==!1&&null}function _J(e,t){return e!=null&&t!=null?e===!0||t===!0:e===!0||t===!0||null}function UI(e,t){if(e==null)return null;let i=!1;for(const r of t)if(r==null)i=null;else if(e===r){i=!0;break}return i}const xJ="-[]/{}()*+?.\\^$|";var of;function TMe(e,t){const i=t;let r="",s=of.Normal;for(let l=0;l<e.length;l++){const y=e.charAt(l);switch(s){case of.Normal:y===i?s=of.Escaped:xJ.includes(y)?r+="\\"+y:r+=y==="%"?".*":y==="_"?".":y;break;case of.Escaped:xJ.includes(y)?r+="\\"+y:r+=y,s=of.Normal}}return new RegExp("^"+r+"$","m")}function BI(e,t,i){return e==null?null:TMe(t,i).test(e)}function nc(e){return e instanceof Date?e.valueOf():e}function SJ(e,t,i){if(t==null||i==null)return null;const r=nc(t),s=nc(i);switch(e){case"<>":return r!==s;case"=":return r===s;case">":return r>s;case"<":return r<s;case">=":return r>=s;case"<=":return r<=s}}function MJ(e,t,i){if(t instanceof vs)if(i instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+i.getTime());case"-":return t.valueInMilliseconds()-i.getTime();case"*":return t.valueInMilliseconds()*i.getTime();case"/":return t.valueInMilliseconds()/i.getTime()}else if(i instanceof vs)switch(e){case"+":return vs.createFromMilliseconds(t.valueInMilliseconds()+i.valueInMilliseconds());case"-":return vs.createFromMilliseconds(t.valueInMilliseconds()-i.valueInMilliseconds());case"*":return t.valueInMilliseconds()*i.valueInMilliseconds();case"/":return t.valueInMilliseconds()/i.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(i instanceof vs)if(t instanceof Date)switch(e){case"+":return new Date(i.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-i.valueInMilliseconds());case"*":return t.getTime()*i.valueInMilliseconds();case"/":return t.getTime()/i.valueInMilliseconds()}else i=i.valueInMilliseconds();else if(t instanceof Date&&typeof i=="number")switch(i=24*i*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}else if(i instanceof Date&&typeof t=="number")switch(t=24*t*60*60*1e3,i=i.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i}}function CMe(e){return e&&typeof e.attributes=="object"}function $J(e,t,i,r){const s=r.getAttribute(e,t);return s!=null&&i[t]===1?new Date(s):s}(function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"})(of||(of={}));const af={getAttribute:(e,t)=>(CMe(e)?e.attributes:e)[t]};var EJ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",WhereClause:t5,defaultAttributeAdapter:af});class AMe{constructor(t,i){this._cache=new d$(t),this._invalidCache=new d$(i)}get(t,i){const r=`${i.uid}:${t}`,s=this._cache.get(r);if(s)return s;if(this._invalidCache.get(r)!==void 0)return null;try{const l=t5.create(t,i);return this._cache.put(r,l),l}catch{return this._invalidCache.put(r,null),null}}}const HI=new AMe(50,500),Kh="feature-store:unsupported-query",IJ=" as ",PMe=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function cAe(e,t){if(!t)return!0;const i=HI.get(t,e);if(!i)throw new fe(Kh,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new fe(Kh,"where clause is not standard",{where:t});return WI(e,i.fieldNames,"where clause contains missing fields"),!0}function hAe(e,t,i){if(!t)return!0;const r=HI.get(t,e);if(!r)throw new fe(Kh,"invalid SQL expression",{having:t});if(!r.isAggregate)throw new fe(Kh,"having does not contain a valid aggregate function",{having:t});const s=r.fieldNames;if(WI(e,s,"having contains missing fields"),!r.getExpressions().every(l=>{const{aggregateType:y,field:d}=l,v=e.has(d)&&e.get(d).name;return i.some(_=>{const{onStatisticField:M,statisticType:T}=_;return(e.has(M)&&e.get(M).name)===v&&T.toLowerCase().trim()===y})}))throw new fe(Kh,"expressions in having should also exist in outStatistics",{having:t});return!0}function Xv(e,t){return e?HI.get(e,t):null}function WI(e,t,i,r=!0){const s=[];for(const l of t)if(l!=="*"&&!e.has(l))if(r){const y=TJ(l);try{const d=Xv(y,e);if(!d)throw new fe(Kh,"invalid SQL expression",{where:y});if(!d.isStandardized)throw new fe(Kh,"expression is not standard",{clause:d});WI(e,d.fieldNames,"expression contains missing fields")}catch(d){const v=d&&d.details;if(v&&(v.clause||v.where))throw d;v&&v.missingFields?s.push(...v.missingFields):s.push(l)}}else s.push(l);if(s.length)throw new fe(Kh,i,{missingFields:s})}function TJ(e){return e.split(IJ)[0]}function OMe(e){return e.split(IJ)[1]}function pAe(e,t){const i=t.get(e);return!!i&&!PMe.has(i.type)}const CJ=new bt({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let ry=class extends Ie{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};m([x({type:ls,json:{write:!0}})],ry.prototype,"baseSymbol",void 0),m([x({types:MV,json:{read:{reader:$V},write:!0}})],ry.prototype,"colorRamp",void 0),m([x({json:{read:CJ.read,write:CJ.write}})],ry.prototype,"type",void 0),ry=m([Y("esri.rest.support.ClassificationDefinition")],ry);const kMe=ry,AJ=new bt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),PJ=new bt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Va=class extends kMe{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};m([x({json:{write:!0}})],Va.prototype,"breakCount",void 0),m([x({json:{write:!0}})],Va.prototype,"classificationField",void 0),m([x({type:String,json:{read:AJ.read,write:AJ.write}})],Va.prototype,"classificationMethod",void 0),m([x({json:{write:!0}})],Va.prototype,"normalizationField",void 0),m([x({json:{read:PJ.read,write:PJ.write}})],Va.prototype,"normalizationType",void 0),m([x({value:null,json:{write:!0}})],Va.prototype,"standardDeviationInterval",null),m([x({value:null,json:{write:!0}})],Va.prototype,"definedInterval",null),m([x()],Va.prototype,"type",void 0),Va=m([Y("esri.rest.support.ClassBreaksDefinition")],Va);const RMe=Va,FMe=Ae.getLogger("esri.rest.support.generateRendererUtils");function ny(e,t){return Number(e.toFixed(t))}function LMe(e){const{normalizationTotal:t}=e;return{classBreaks:NMe(e),normalizationTotal:t}}function NMe(e){const t=e.definition,{classificationMethod:i,breakCount:r,normalizationType:s,definedInterval:l}=t,y=[];let d=e.values;if(d.length===0)return[];d=d.sort((M,T)=>M-T);const v=d[0],_=d[d.length-1];if(i==="equal-interval")if(d.length>=r){const M=(_-v)/r;let T=v;for(let A=1;A<r;A++){const R=ny(v+A*M,6);y.push({minValue:T,maxValue:R,label:Us(T,R,s)}),T=R}y.push({minValue:T,maxValue:_,label:Us(T,_,s)})}else d.forEach(M=>{y.push({minValue:M,maxValue:M,label:Us(M,M,s)})});else if(i==="natural-breaks"){const M=jMe(d),T=e.valueFrequency||M.valueFrequency,A=DMe(M.uniqueValues,T,r);let R=v;for(let F=1;F<r;F++)if(M.uniqueValues.length>F){const V=ny(M.uniqueValues[A[F]],6);y.push({minValue:R,maxValue:V,label:Us(R,V,s)}),R=V}y.push({minValue:R,maxValue:_,label:Us(R,_,s)})}else if(i==="quantile")if(d.length>=r&&v!==_){let M=v,T=Math.ceil(d.length/r),A=0;for(let R=1;R<r;R++){let F=T+A-1;F>d.length&&(F=d.length-1),F<0&&(F=0),y.push({minValue:M,maxValue:d[F],label:Us(M,d[F],s)}),M=d[F],A+=T,T=Math.ceil((d.length-A)/(r-R))}y.push({minValue:M,maxValue:_,label:Us(M,_,s)})}else{let M=-1;for(let T=0;T<d.length;T++){const A=d[T];A!==M&&(M=A,y.push({minValue:M,maxValue:A,label:Us(M,A,s)}),M=A)}}else if(i==="standard-deviation"){const M=GMe(d),T=qMe(d,M);if(T===0)y.push({minValue:d[0],maxValue:d[0],label:Us(d[0],d[0],s)});else{const A=zMe(v,_,r,M,T)*T;let R=0,F=v;for(let z=r;z>=1;z--){const W=ny(M-(z-.5)*A,6);y.push({minValue:F,maxValue:W,label:Us(F,W,s)}),F=W,R++}let V=ny(M+.5*A,6);y.push({minValue:F,maxValue:V,label:Us(F,V,s)}),F=V,R++;for(let z=1;z<=r;z++)V=R===2*r?_:ny(M+(z+.5)*A,6),y.push({minValue:F,maxValue:V,label:Us(F,V,s)}),F=V,R++}}else if(i==="defined-interval"){if(!l)return y;const M=d[0],T=d[d.length-1],A=Math.ceil((T-M)/l);let R=M;for(let F=1;F<A;F++){const V=ny(M+F*l,6);y.push({minValue:R,maxValue:V,label:Us(R,V,s)}),R=V}y.push({minValue:R,maxValue:T,label:Us(R,T,s)})}return y}function Us(e,t,i){let r=null;return r=e===t?i&&i==="percent-of-total"?e+"%":e.toString():i&&i==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function jMe(e){const t=[],i=[];let r=Number.MIN_VALUE,s=1,l=-1;for(let y=0;y<e.length;y++){const d=e[y];d===r?(s++,i[l]=s):d!==null&&(t.push(d),r=d,s=1,i.push(s),l++)}return{uniqueValues:t,valueFrequency:i}}function DMe(e,t,i){const r=e.length,s=[];i>r&&(i=r);for(let y=0;y<i;y++)s.push(Math.round(y*r/i-1));s.push(r-1);let l=OJ(s,e,t,i);return VMe(l.mean,l.sdcm,s,e,t,i)&&(l=OJ(s,e,t,i)),s}function OJ(e,t,i,r){let s=[],l=[],y=[],d=0;const v=[],_=[];for(let R=0;R<r;R++){const F=sy(R,e,t,i);v.push(F.sbMean),_.push(F.sbSdcm),d+=_[R]}let M,T=d,A=!0;for(;A||d<T;){A=!1,s=[];for(let R=0;R<r;R++)s.push(e[R]);for(let R=0;R<r;R++)for(let F=e[R]+1;F<=e[R+1];F++)if(M=t[F],R>0&&F!==e[R+1]&&Math.abs(M-v[R])>Math.abs(M-v[R-1]))e[R]=F;else if(R<r-1&&e[R]!==F-1&&Math.abs(M-v[R])>Math.abs(M-v[R+1])){e[R+1]=F-1;break}T=d,d=0,l=[],y=[];for(let R=0;R<r;R++){l.push(v[R]),y.push(_[R]);const F=sy(R,e,t,i);v[R]=F.sbMean,_[R]=F.sbSdcm,d+=_[R]}}if(d>T){for(let R=0;R<r;R++)e[R]=s[R],v[R]=l[R],_[R]=y[R];d=T}return{mean:v,sdcm:_}}function VMe(e,t,i,r,s,l){let y=0,d=0,v=0,_=0,M=!0;for(let T=0;T<2&&M;T++){T===0&&(M=!1);for(let A=0;A<l-1;A++)for(;i[A+1]+1!==i[A+2];){i[A+1]=i[A+1]+1;const R=sy(A,i,r,s);v=R.sbMean,y=R.sbSdcm;const F=sy(A+1,i,r,s);if(_=F.sbMean,d=F.sbSdcm,!(y+d<t[A]+t[A+1])){i[A+1]=i[A+1]-1;break}t[A]=y,t[A+1]=d,e[A]=v,e[A+1]=_,M=!0}for(let A=l-1;A>0;A--)for(;i[A]!==i[A-1]+1;){i[A]=i[A]-1;const R=sy(A-1,i,r,s);v=R.sbMean,y=R.sbSdcm;const F=sy(A,i,r,s);if(_=F.sbMean,d=F.sbSdcm,!(y+d<t[A-1]+t[A])){i[A]=i[A]+1;break}t[A-1]=y,t[A]=d,e[A-1]=v,e[A]=_,M=!0}}return M}function zMe(e,t,i,r,s){let l=Math.max(r-e,t-r)/s/i;return l=l>=1?1:l>=.5?.5:.25,l}function GMe(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/=e.length,t}function qMe(e,t){let i=0;for(let r=0;r<e.length;r++){const s=e[r];i+=(s-t)*(s-t)}return i/=e.length,Math.sqrt(i)}function sy(e,t,i,r){let s=0,l=0;for(let v=t[e]+1;v<=t[e+1];v++){const _=r[v];s+=i[v]*_,l+=_}l<=0&&FMe.warn("Exception in Natural Breaks calculation");const y=s/l;let d=0;for(let v=t[e]+1;v<=t[e+1];v++)d+=r[v]*(i[v]-y)**2;return{sbMean:y,sbSdcm:d}}const UMe="<Null>",BMe="equal-interval",HMe=1,WMe=5,JMe=10,ZMe=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,kJ=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),KMe=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function Yh(e){return e==null||typeof e=="string"&&!e?UMe:e}function RJ(e){const t=e.normalizationField!=null||e.normalizationType!=null,i=e.minValue!=null||e.maxValue!=null,r=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!i&&!r}function FJ(e){const t=e.returnDistinct?[...new Set(e.values)]:e.values,i=t.filter(s=>s!=null).length,r={count:i};return e.supportsNullCount&&(r.nullcount=t.length-i),e.percentileParams&&(r.median=ZI(t,e.percentileParams)),r}function JI(e){const{values:t,useSampleStdDev:i,supportsNullCount:r}=e;let s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,y=null,d=null,v=null,_=null,M=0;const T=e.minValue==null?-1/0:e.minValue,A=e.maxValue==null?1/0:e.maxValue;for(const F of t)Number.isFinite(F)?F>=T&&F<=A&&(y+=F,s=Math.min(s,F),l=Math.max(l,F),M++):typeof F=="string"&&M++;if(M&&y!=null){d=y/M;let F=0;for(const V of t)Number.isFinite(V)&&V>=T&&V<=A&&(F+=(V-d)**2);_=i?M>1?F/(M-1):0:M>0?F/M:0,v=Math.sqrt(_)}else s=null,l=null;const R={avg:d,count:M,max:l,min:s,stddev:v,sum:y,variance:_};return r&&(R.nullcount=t.length-M),e.percentileParams&&(R.median=ZI(t,e.percentileParams)),R}function ZI(e,t){const{fieldType:i,value:r,orderBy:s,isDiscrete:l}=t,y=LJ(i,s==="desc");if((e=[...e].filter(R=>R!=null).sort((R,F)=>y(R,F))).length===0)return null;if(r<=0)return e[0];if(r>=1)return e[e.length-1];const d=(e.length-1)*r,v=Math.floor(d),_=v+1,M=d%1,T=e[v],A=e[_];return _>=e.length||l||typeof T=="string"||typeof A=="string"?T:T*(1-M)+A*M}function LJ(e,t){const i=t?1:-1,r=YMe(t),s=NJ(t);if(!(!!e&&["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...kJ].includes(e)))return(l,y)=>typeof l=="number"&&typeof y=="number"?r(l,y):typeof l=="string"&&typeof y=="string"?s(l,y):i;if(e==="esriFieldTypeDate")return(l,y)=>{const d=new Date(l).getTime(),v=new Date(y).getTime();return isNaN(d)||isNaN(v)?i:r(d,v)};if(kJ.has(e))return(l,y)=>r(l,y);if(e==="esriFieldTypeString")return(l,y)=>s(l,y);if(e==="esriFieldTypeGUID"||e==="esriFieldTypeGlobalID"){const l=NJ(t);return(y,d)=>l(jJ(y),jJ(d))}return t?(l,y)=>1:(l,y)=>-1}function NJ(e){return e?(t,i)=>(t=t==null?void 0:t.toUpperCase(),i=i==null?void 0:i.toUpperCase(),t>i?-1:t<i?1:0):(t,i)=>(t=t==null?void 0:t.toUpperCase(),i=i==null?void 0:i.toUpperCase(),t<i?-1:t>i?1:0)}function YMe(e){return e?(t,i)=>i-t:(t,i)=>t-i}function jJ(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function XMe(e,t){let i;for(i in e)KMe.includes(i)&&(Number.isFinite(e[i])||(e[i]=null));return t&&["avg","stddev","variance"].forEach(r=>{e[r]!=null&&(e[r]=Math.ceil(e[r]))}),e}function QMe(e){const t={};for(let i of e)(i==null||typeof i=="string"&&i.trim()==="")&&(i=null),t[i]==null?t[i]={count:1,data:i}:t[i].count++;return{count:t}}function KI(e){return(e==null?void 0:e.type)!=="coded-value"?[]:e.codedValues.map(t=>t.code)}function e$e(e,t,i,r){const s=e.count,l=[];if(i&&t){const y=[],d=KI(t[0]);for(const v of d)if(t[1]){const _=KI(t[1]);for(const M of _)if(t[2]){const T=KI(t[2]);for(const A of T)y.push(`${Yh(v)}${r}${Yh(M)}${r}${Yh(A)}`)}else y.push(`${Yh(v)}${r}${Yh(M)}`)}else y.push(v);for(const v of y)s.hasOwnProperty(v)||(s[v]={data:v,count:0})}for(const y in s){const d=s[y];l.push({value:d.data,count:d.count,label:d.label})}return{uniqueValueInfos:l}}function t$e(e,t,i,r){let s=null;switch(t){case"log":e!==0&&(s=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&r!==0&&(s=e/r*100);break;case"field":Number.isFinite(i)&&i!==0&&(s=e/i);break;case"natural-log":e>0&&(s=Math.log(e));break;case"square-root":e>0&&(s=e**.5)}return s}function DJ(e,t){const i=r$e({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||WMe});return e=i$e(e,t.minValue,t.maxValue),LMe({definition:i,values:e,normalizationTotal:t.normalizationTotal})}function i$e(e,t,i){return t=t!=null?t:-1/0,i=i!=null?i:1/0,e.filter(r=>Number.isFinite(r)&&r>=t&&r<=i)}function r$e(e){const t=e.field,i=e.classificationMethod||BMe,r=e.normalizationType,s=e.normalizationField,l=new RMe;return l.classificationField=t,l.breakCount=e.breakCount,l.classificationMethod=i,l.standardDeviationInterval=i==="standard-deviation"?e.standardDeviationInterval||HMe:void 0,l.normalizationType=r,l.normalizationField=r==="field"?s:void 0,l}function n$e(e,t){let i=e.classBreaks;const r=i.length,s=i[0].minValue,l=i[r-1].maxValue,y=t==="standard-deviation",d=ZMe;return i=i.map(v=>{const _=v.label,M={minValue:v.minValue,maxValue:v.maxValue,label:_};if(y&&_){const T=_.match(d).map(A=>+A.trim());T.length===2?(M.minStdDev=T[0],M.maxStdDev=T[1],T[0]<0&&T[1]>0&&(M.hasAvg=!0)):T.length===1&&(_.includes("<")?(M.minStdDev=null,M.maxStdDev=T[0]):_.includes(">")&&(M.minStdDev=T[0],M.maxStdDev=null))}return M}),{minValue:s,maxValue:l,classBreakInfos:i,normalizationTotal:e.normalizationTotal}}function s$e(e,t){const{min:i,max:r,intervals:s}=o$e(e,t),l=s.map((y,d)=>({minValue:s[d][0],maxValue:s[d][1],count:0}));for(const y of e)if(y!=null&&y>=i&&y<=r){const d=a$e(s,y);d>-1&&l[d].count++}return{bins:l,minValue:i,maxValue:r,normalizationTotal:t.normalizationTotal}}function o$e(e,t){const{field:i,classificationMethod:r,standardDeviationInterval:s,normalizationType:l,normalizationField:y,normalizationTotal:d,minValue:v,maxValue:_}=t,M=t.numBins||JMe;let T=null,A=null,R=null;if((!r||r==="equal-interval")&&!l){if(v!=null&&_!=null)T=v,A=_;else{const F=JI({values:e,minValue:v,maxValue:_,useSampleStdDev:!l,supportsNullCount:RJ({normalizationType:l,normalizationField:y,minValue:v,maxValue:_})});T=F.min,A=F.max}R=l$e(T,A,M)}else{const{classBreaks:F}=DJ(e,{field:i,normalizationType:l,normalizationField:y,normalizationTotal:d,classificationMethod:r,standardDeviationInterval:s,minValue:v,maxValue:_,numClasses:M});T=F[0].minValue,A=F[F.length-1].maxValue,R=F.map(V=>[V.minValue,V.maxValue])}return{min:T,max:A,intervals:R}}function a$e(e,t){let i=-1;for(let r=e.length-1;r>=0;r--)if(t>=e[r][0]){i=r;break}return i}function l$e(e,t,i){const r=(t-e)/i,s=[];let l,y=e;for(let d=1;d<=i;d++)l=y+r,l=Number(l.toFixed(16)),s.push([y,d===i?t:l]),y=l;return s}class r5{constructor(t,i,r){var l;this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=(l=t.returnDistinctValues)!=null?l:!1,this.fieldsIndex=r,this.featureAdapter=i;const s=t.outFields;if(s&&!s.includes("*")){this.outFields=s;let y=0;for(const d of s){const v=TJ(d),_=this.fieldsIndex.get(v),M=_?null:Xv(v,r),T=_?_.name:OMe(d)||"FIELD_EXP_"+y++;this._fieldDataCache.set(d,{alias:T,clause:M})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):t.length}getAttributes(t){const i=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(i)}getFieldValue(t,i,r){const s=r?r.name:i;let l=null;return this._fieldDataCache.has(s)?l=this._fieldDataCache.get(s).clause:r||(l=Xv(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:l})),r?this.featureAdapter.getAttribute(t,s):l.calculateValue(t,this.featureAdapter)}getDataValue(t,i){const r=i.normalizationType,s=i.normalizationTotal;let l=this.getFieldValue(t,i.field,this.fieldsIndex.get(i.field));if(i.field2&&(l=`${Yh(l)}${i.fieldDelimiter}${Yh(this.getFieldValue(t,i.field2,this.fieldsIndex.get(i.field2)))}`,i.field3&&(l=`${l}${i.fieldDelimiter}${Yh(this.getFieldValue(t,i.field3,this.fieldsIndex.get(i.field3)))}`)),r&&Number.isFinite(l)){const y=r==="field"&&i.normalizationField?this.getFieldValue(t,i.normalizationField,this.fieldsIndex.get(i.normalizationField)):null;l=t$e(l,r,y,s)}return l}getExpressionValue(t,i,r,s){const l={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},y=s.createExecContext(l,r);return s.executeFunction(i,y)}getExpressionValues(t,i,r,s){const l={fields:this.fieldsIndex.fields};return t.map(y=>{const d={attributes:this.featureAdapter.getAttributes(y),layer:l},v=s.createExecContext(d,r);return s.executeFunction(i,v)})}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:Xv(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testFeature(t,this.featureAdapter)}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:Xv(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(t);const r={};for(const s of i){const{alias:l,clause:y}=this._fieldDataCache.get(s);r[l]=y?y.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,l)}return r}_processAttributesForDistinctValues(t){if(ae(t)||!this.returnDistinctValues)return t;const i=this.outFields,r=[];if(i)for(const y of i){const{alias:d}=this._fieldDataCache.get(y);r.push(t[d])}else for(const y in t)r.push(t[y]);const s=`${(i||["*"]).join(",")}=${r.join(",")}`;let l=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++l),l>1?null:t}}const VJ={convertToGEGeometry:u$e,exportPoint:h$e,exportPolygon:d$e,exportPolyline:y$e,exportMultipoint:m$e,exportExtent:b$e};function u$e(e,t){return t==null?null:e.convertJSONToGeometry(t)}class c$e{constructor(t,i,r){this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}}function h$e(e,t,i){const r=new c$e(e.getPointX(t),e.getPointY(t),i),s=e.hasZ(t),l=e.hasM(t);return s&&(r.z=e.getPointZ(t)),l&&(r.m=e.getPointM(t)),r}class p$e{constructor(t,i,r,s){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function d$e(e,t,i){return new p$e(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class f$e{constructor(t,i,r,s){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function y$e(e,t,i){return new f$e(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class g$e{constructor(t,i,r,s){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function m$e(e,t,i){return new g$e(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))}class v$e{constructor(t,i,r,s,l){this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=s,this.spatialReference=l,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function b$e(e,t,i){const r=e.hasZ(t),s=e.hasM(t),l=new v$e(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){const y=e.getZExtent(t);l.zmin=y.vmin,l.zmax=y.vmax}if(s){const y=e.getMExtent(t);l.mmin=y.vmin,l.mmax=y.vmax}return l}const YI=[0,0];function zJ(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,YI),t.z!=null&&(i.z=t.z),t.m!=null&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,YI),[i.xmax,i.ymax]=e(t.xmax,t.ymax,YI),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:GJ(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:GJ(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:qJ(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function GJ(e,t){const i=[];for(const r of e)i.push(qJ(r,t));return i}function qJ(e,t){const i=[];for(const r of e){const s=t(r[0],r[1],[0,0]);i.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return i}async function UJ(e,t){if(!e||!t)return;const i=Array.isArray(e)?e.map(r=>q(r.geometry)?r.geometry.spatialReference:null).filter(q):[e];await LL(i.map(r=>({source:r,dest:t})))}const BJ=zJ.bind(null,gp),HJ=zJ.bind(null,zf);function n5(e,t,i,r){if(!e||(i||(i=t,t=e.spatialReference),!Cr(t)||!Cr(i)||Xi(t,i)))return e;if(Vf(t,i)){const s=Ka(i)?BJ(e):HJ(e);return s.spatialReference=i,s}return s3(VJ,[e],t,i,null,r)[0]}class w$e{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,i,r){if(!t||!t.length||!i||!r||Xi(i,r))return t;const s={geometries:t,inSpatialReference:i,outSpatialReference:r,resolve:null};return this._jobs.push(s),new Promise(l=>{s.resolve=l,this._timer===null&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:i,inSpatialReference:r,outSpatialReference:s,resolve:l}=t;Vf(r,s)?Ka(s)?l(i.map(BJ)):l(i.map(HJ)):l(s3(VJ,i,r,s,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const _$e=new w$e;function dAe(e,t,i){return _$e.push(e,t,i)}function x$e(e,t,i){return{objectId:e,target:t,distance:i,type:"vertex"}}function S$e(e,t,i,r,s,l=!1){return{objectId:e,target:t,distance:i,type:"edge",start:r,end:s,draped:l}}const M$e=new bt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),WJ=Object.freeze({}),JJ=new vn,$$e=new vn,XI=new vn,sc={esriGeometryPoint:z$,esriGeometryPolyline:W$,esriGeometryPolygon:J$,esriGeometryMultipoint:H$};function ZJ(e,t,i,r=e.hasZ,s=e.hasM){if(ae(t))return null;const l=e.hasZ&&r,y=e.hasM&&s;if(i){const d=Rm(XI,t,e.hasZ,e.hasM,"esriGeometryPoint",i,r,s);return z$(d,l,y)}return z$(t,l,y)}function QI(e,t,i,r,s,l,y=t,d=i){var T,A,R,F,V,z;const v=t&&y,_=i&&d,M=q(r)?"coords"in r?r:r.geometry:null;if(ae(M))return null;if(s){let W=Sge($$e,M,t,i,e,s,y,d);return l&&(W=Rm(XI,W,v,_,e,l)),(A=(T=sc[e])==null?void 0:T.call(sc,W,v,_))!=null?A:null}if(l){const W=Rm(XI,M,t,i,e,l,y,d);return(F=(R=sc[e])==null?void 0:R.call(sc,W,v,_))!=null?F:null}return $ge(JJ,M,t,i,y,d),(z=(V=sc[e])==null?void 0:V.call(sc,JJ,v,_))!=null?z:null}async function fAe(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:l,outStatistics:y}=e;if(r)for(let d=0;d<r.length;d++)r[d]=r[d].trim();if(s)for(let d=0;d<s.length;d++)s[d]=s[d].trim();if(l)for(let d=0;d<l.length;d++)l[d]=l[d].trim();if(y)for(let d=0;d<y.length;d++)y[d].onStatisticField&&(y[d].onStatisticField=y[d].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),E$e(e,t,i)}async function E$e(e,t,i){var l;if(!e)return null;let{where:r}=e;if(e.where=r=r&&r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await T$e(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:y}=e.geometry;s=g4(s),s.spatialReference=y}if(s){await UJ(s.spatialReference,i),s=I$e(s,i);const y=(await Pm(dn(s)))[0];if(ae(y))throw WJ;const d="quantizationParameters"in e&&((l=e.quantizationParameters)==null?void 0:l.tolerance)||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,v=d&&KJ(s,i)?{densificationStep:8*d}:void 0,_=y.toJSON(),M=await n5(_,_.spatialReference,i,v);if(!M)throw WJ;M.spatialReference=i,e.geometry=M}return e}function KJ(e,t){if(!e)return!1;const i=e.spatialReference;return(Qy(e)||nu(e)||eg(e))&&!Xi(i,t)&&!wl(i,t)}function I$e(e,t){const i=e.spatialReference;return KJ(e,t)&&Qy(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function T$e(e){const{distance:t,units:i}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const s=r.spatialReference,l=i?M$e.fromJSON(i):om(s),y=s&&(Ew(s)||Ka(s))?r:await UJ(s,s4).then(()=>n5(r,s4));return(await C$e())(y.spatialReference,y,t,l)}async function C$e(){return(await import("./geometryEngineJSON.73d941f4.js")).geodesicBuffer}function eT(e){return e&&YJ in e?JSON.parse(JSON.stringify(e,A$e)):e}const YJ="_geVersion",A$e=(e,t)=>e!==YJ?t:void 0;class yAe{constructor(t,i,r){this.items=t,this.query=i,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.fieldsIndex=r.fieldsIndex,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.featureAdapter=r.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const t=new r5(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:r,outStatistics:s}=this.query;if(!(i==null?void 0:i.length))return 1;const y=new Map,d=new Map,v=new Set;for(const _ of s){const{statisticType:M}=_,T=M!=="exceedslimit"?_.onStatisticField:void 0;if(!d.has(T)){const R=[];for(const F of i){const V=this._getAttributeValues(t,F,y);R.push(V)}d.set(T,this._calculateUniqueValues(R,t.returnDistinctValues))}const A=d.get(T);for(const R in A){const{data:F,items:V}=A[R],z=F.join(",");r&&!t.validateItems(V,r)||v.add(z)}}return v.size}async createQueryResponse(){let t;return this.query.outStatistics?t=this.query.outStatistics.some(i=>i.statisticType==="exceedslimit")?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):t=this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry&&(Cr(this.query.outSR)&&!Xi(this.query.geometry.spatialReference,this.query.outSR)?t.queryGeometry=eT(te({spatialReference:this.query.outSR},n5(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR))):t.queryGeometry=eT(te({spatialReference:this.query.outSR},this.query.geometry))),t}createSnappingResponse(t,i){const r=this.featureAdapter,s=XJ(this.hasZ,this.hasM),{point:l}=t,y=typeof t.distance=="number"?t.distance:t.distance.x,d=typeof t.distance=="number"?t.distance:t.distance.y,v={candidates:[]},_=this.geometryType==="esriGeometryPolygon",M=l.z!=null,T=l.m!=null,A=this._getPointCreator(l,M,T,this.spatialReference,i),R=new QJ(null,0),F=new QJ(null,0),V={x:0,y:0,z:0};for(const z of this.items){const W=r.getGeometry(z);if(ae(W))continue;const{coords:Z,lengths:Q}=W;if(R.coords=Z,F.coords=Z,t.types&oy.EDGE){let ee=0;for(let re=0;re<Q.length;re++){const ie=Q[re];for(let he=0;he<ie;he++,ee+=s){const be=R;if(be.coordsIndex=ee,he!==ie-1){const we=F;we.coordsIndex=ee+s;const xe=V;P$e(V,l,be,we);const $e=(l.x-xe.x)/y,je=(l.y-xe.y)/d,it=$e*$e+je*je;it<=1&&v.candidates.push(S$e(r.getObjectId(z),A(xe),Math.sqrt(it),A(be),A(we)))}}}}if(t.types&oy.VERTEX){const ee=_?Z.length-s:Z.length;for(let re=0;re<ee;re+=s){const ie=R;ie.coordsIndex=re;const he=(l.x-ie.x)/y,be=(l.y-ie.y)/d,we=he*he+be*be;we<=1&&v.candidates.push(x$e(r.getObjectId(z),A(ie),Math.sqrt(we)))}}}return v.candidates.sort((z,W)=>z.distance-W.distance),v}_getPointCreator(t,i,r,s,l){const y=q(l)&&!Xi(s,l)?M=>n5(M,s,l):M=>M,{hasZ:d}=this,v=0,_=t.m;return i&&r?d?({x:M,y:T,z:A})=>y({x:M,y:T,z:A,m:_}):({x:M,y:T})=>y({x:M,y:T,z:v,m:_}):i?d?({x:M,y:T,z:A})=>y({x:M,y:T,z:A}):({x:M,y:T})=>y({x:M,y:T,z:v}):r?({x:M,y:T})=>y({x:M,y:T,m:_}):({x:M,y:T})=>y({x:M,y:T})}async createSummaryStatisticsResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:y,minValue:d,maxValue:v,scale:_}=t,M=this.fieldsIndex.isDateField(i),T=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:y,scale:_}),A=RJ({normalizationType:l,normalizationField:s,minValue:d,maxValue:v}),R=this.fieldsIndex.get(i),F={value:.5,fieldType:R==null?void 0:R.type},V=fk(R)?FJ({values:T,supportsNullCount:A,percentileParams:F}):JI({values:T,minValue:d,maxValue:v,useSampleStdDev:!l,supportsNullCount:A,percentileParams:F});return XMe(V,M)}async createUniqueValuesResponse(t){const{field:i,valueExpression:r,domains:s,returnAllCodedValues:l,scale:y}=t,d=await this._getDataValues({field:i,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:r,scale:y}),v=QMe(d);return e$e(v,s,l,t.fieldDelimiter)}async createClassBreaksResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:y,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numClasses:T,scale:A}=t,R=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:y,scale:A}),F=DJ(R,{field:i,normalizationField:s,normalizationType:l,normalizationTotal:y,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numClasses:T});return n$e(F,d)}async createHistogramResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:y,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numBins:T,scale:A}=t,R=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:l,normalizationTotal:y,scale:A});return s$e(R,{field:i,normalizationField:s,normalizationType:l,normalizationTotal:y,classificationMethod:d,standardDeviationInterval:v,minValue:_,maxValue:M,numBins:T})}_sortFeatures(t,i,r){if(t.length>1&&i&&i.length)for(const s of i.reverse()){const l=s.split(" "),y=l[0],d=this.fieldsIndex.get(y),v=l[1]&&l[1].toLowerCase()==="desc",_=LJ(d==null?void 0:d.type,v);t.sort((M,T)=>{const A=r(M,y,d),R=r(T,y,d);return _(A,R)})}}_createFeatureQueryResponse(t){const i=this.items,{geometryType:r,hasM:s,hasZ:l,objectIdField:y,spatialReference:d}=this,{outFields:v,outSR:_,quantizationParameters:M,resultRecordCount:T,resultOffset:A,returnZ:R,returnM:F}=t,V=T!=null&&i.length>(A||0)+T,z=v&&(v.includes("*")?[...this.fieldsIndex.fields]:v.map(W=>this.fieldsIndex.get(W)));return{exceededTransferLimit:V,features:this._createFeatures(t,i),fields:z,geometryType:r,hasM:s&&F,hasZ:l&&R,objectIdFieldName:y,spatialReference:eT(_||d),transform:M&&JB(M)||null}}_createFeatures(t,i){const r=new r5(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:l}=this,{orderByFields:y,quantizationParameters:d,returnGeometry:v,returnCentroid:_,maxAllowableOffset:M,resultOffset:T,resultRecordCount:A,returnZ:R=!1,returnM:F=!1}=t,V=l&&R,z=s&&F;let W=[],Z=0;const Q=[...i];if(this._sortFeatures(Q,y,(re,ie,he)=>r.getFieldValue(re,ie,he)),v||_){const re=JB(d);if(v&&!_)for(const ie of Q)W[Z++]={attributes:r.getAttributes(ie),geometry:QI(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ie),M,re,V,z)};else if(!v&&_)for(const ie of Q)W[Z++]={attributes:r.getAttributes(ie),centroid:ZJ(this,this.featureAdapter.getCentroid(ie,this),re)};else for(const ie of Q)W[Z++]={attributes:r.getAttributes(ie),centroid:ZJ(this,this.featureAdapter.getCentroid(ie,this),re),geometry:QI(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ie),M,re,V,z)}}else for(const re of Q){const ie=r.getAttributes(re);ie&&(W[Z++]={attributes:ie})}const ee=T||0;if(A!=null){const re=ee+A;W=W.slice(ee,Math.min(W.length,re))}return W}_createExceedsLimitQueryResponse(t){let i=!1,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(const y of t.outStatistics)if(y.statisticType==="exceedslimit"){r=y.maxPointCount!=null?y.maxPointCount:Number.POSITIVE_INFINITY,s=y.maxRecordCount!=null?y.maxRecordCount:Number.POSITIVE_INFINITY,l=y.maxVertexCount!=null?y.maxVertexCount:Number.POSITIVE_INFINITY;break}if(this.geometryType==="esriGeometryPoint")i=this.items.length>r;else if(this.items.length>s)i=!0;else{const y=XJ(this.hasZ,this.hasM),d=this.featureAdapter;i=this.items.reduce((v,_)=>{const M=d.getGeometry(_);return v+(q(M)&&M.coords.length||0)},0)/y>l}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}async _createStatisticsQueryResponse(t){const i={attributes:{}},r=[],s=new Map,l=new Map,y=new Map,d=new Map,v=new r5(t,this.featureAdapter,this.fieldsIndex),_=t.outStatistics,{groupByFieldsForStatistics:M,having:T,orderByFields:A}=t,R=M&&M.length,F=!!R,V=F&&M[0],z=F&&!this.fieldsIndex.get(V);for(const Z of _){const{outStatisticFieldName:Q,statisticType:ee}=Z,re=Z,ie=ee!=="exceedslimit"?Z.onStatisticField:void 0,he=ee==="percentile_disc"||ee==="percentile_cont",be=ee==="EnvelopeAggregate"||ee==="CentroidAggregate"||ee==="ConvexHullAggregate",we=F&&R===1&&(ie===V||z)&&ee==="count";if(F){if(!y.has(ie)){const $e=[];for(const je of M){const it=this._getAttributeValues(v,je,s);$e.push(it)}y.set(ie,this._calculateUniqueValues($e,!be&&v.returnDistinctValues))}const xe=y.get(ie);for(const $e in xe){const{count:je,data:it,items:Ye,itemPositions:Lt}=xe[$e],Dt=it.join(",");if(!T||v.validateItems(Ye,T)){const ft=d.get(Dt)||{attributes:{}};if(be){ft.aggregateGeometries||(ft.aggregateGeometries={});const{aggregateGeometries:Ct,outStatisticFieldName:Oi}=await this._getAggregateGeometry(re,Ye);ft.aggregateGeometries[Oi]=Ct}else{let Ct=null;if(we)Ct=je;else{const Oi=this._getAttributeValues(v,ie,s),Ui=Lt.map(_i=>Oi[_i]);Ct=he&&"statisticParameters"in re?this._getPercentileValue(re,Ui):this._getStatisticValue(re,Ui,null,v.returnDistinctValues)}ft.attributes[Q]=Ct}let Ze=0;M.forEach((Ct,Oi)=>ft.attributes[this.fieldsIndex.get(Ct)?Ct:"EXPR_"+ ++Ze]=it[Oi]),d.set(Dt,ft)}}}else if(be){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:xe,outStatisticFieldName:$e}=await this._getAggregateGeometry(re,this.items);i.aggregateGeometries[$e]=xe}else{const xe=this._getAttributeValues(v,ie,s);i.attributes[Q]=he&&"statisticParameters"in re?this._getPercentileValue(re,xe):this._getStatisticValue(re,xe,l,v.returnDistinctValues)}r.push({name:Q,alias:Q,type:"esriFieldTypeDouble"})}const W=F?Array.from(d.values()):[i];return this._sortFeatures(W,A,(Z,Q)=>Z.attributes[Q]),{fields:r,features:W}}async _getAggregateGeometry(t,i){const r=await import("./geometryEngineJSON.73d941f4.js"),{statisticType:s,outStatisticFieldName:l}=t,{featureAdapter:y,spatialReference:d,geometryType:v,hasZ:_,hasM:M}=this,T=i.map(F=>QI(v,_,M,y.getGeometry(F))),A=r.convexHull(d,T,!0)[0],R={aggregateGeometries:null,outStatisticFieldName:null};if(s==="EnvelopeAggregate"){const F=A?m4(A):g4(r.union(d,T));R.aggregateGeometries=De(te({},F),{spatialReference:d}),R.outStatisticFieldName=l||"extent"}else if(s==="CentroidAggregate"){const F=A?qO(A):ise(g4(r.union(d,T)));R.aggregateGeometries={x:F[0],y:F[1],spatialReference:d},R.outStatisticFieldName=l||"centroid"}else s==="ConvexHullAggregate"&&(R.aggregateGeometries=A,R.outStatisticFieldName=l||"convexHull");return R}_getStatisticValue(t,i,r,s){const{onStatisticField:l,statisticType:y}=t;let d=null;return d=(r==null?void 0:r.has(l))?r.get(l):fk(this.fieldsIndex.get(l))?FJ({values:i,returnDistinct:s}):JI({values:i,minValue:null,maxValue:null,useSampleStdDev:!0}),r&&r.set(l,d),d[y==="var"?"variance":y]}_getPercentileValue(t,i){const{onStatisticField:r,statisticParameters:s,statisticType:l}=t,{value:y,orderBy:d}=s,v=this.fieldsIndex.get(r);return ZI(i,{value:y,orderBy:d,fieldType:v==null?void 0:v.type,isDiscrete:l==="percentile_disc"})}_getAttributeValues(t,i,r){if(r.has(i))return r.get(i);const s=this.fieldsIndex.get(i),l=this.items.map(y=>t.getFieldValue(y,i,s));return r.set(i,l),l}_getAttributeDataValues(t,i){return this.items.map(r=>t.getDataValue(r,{field:i.field,field2:i.field2,field3:i.field3,fieldDelimiter:i.fieldDelimiter,normalizationField:i.normalizationField,normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}async _getAttributeExpressionValues(t,i,r){const{arcadeUtils:s}=await el(),l=s.createFunction(i),y=r&&s.getViewInfo(r);return t.getExpressionValues(this.items,l,y,s)}_calculateUniqueValues(t,i){const r={},s=this.items,l=s.length;for(let y=0;y<l;y++){const d=s[y],v=[];for(const M of t)v.push(M[y]);const _=v.join(",");i?r[_]==null&&(r[_]={count:1,data:v,items:[d],itemPositions:[y]}):r[_]==null?r[_]={count:1,data:v,items:[d],itemPositions:[y]}:(r[_].count++,r[_].items.push(d),r[_].itemPositions.push(y))}return r}async _getDataValues(t){const i=new r5(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:s,normalizationField:l,normalizationType:y,normalizationTotal:d,scale:v}=t,_=r?{viewingMode:"map",scale:v,spatialReference:this.query.outSR||this.spatialReference}:null;return r?this._getAttributeExpressionValues(i,r,_):this._getAttributeDataValues(i,{field:s,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:l,normalizationType:y,normalizationTotal:d})}}function P$e(e,t,i,r){const s=r.x-i.x,l=r.y-i.y,y=s*s+l*l,d=(t.x-i.x)*s+(t.y-i.y)*l,v=Math.min(1,Math.max(0,d/y));e.x=i.x+s*v,e.y=i.y+l*v}function XJ(e,t){return e?t?4:3:t?3:2}var oy;(function(e){e[e.NONE=0]="NONE",e[e.EDGE=1]="EDGE",e[e.VERTEX=2]="VERTEX"})(oy||(oy={}));class QJ{constructor(t,i){this.coords=t,this.coordsIndex=i}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}function tT({start:e,end:t,type:i},r,s){const l=[],y=r,d=ur(oc,t,e),v=ur(ac,e,y),_=Fh(d),M=2*Vu(d,v),T=M*M-4*_*(Fh(v)-s*s);if(T===0){const A=-M/(2*_);(i===za.PLANE||A>=0)&&l.push(Oa(Ar(0,0,r[2]),e,d,A))}else if(T>0){const A=Math.sqrt(T),R=(-M+A)/(2*_);(i===za.PLANE||R>=0)&&l.push(Oa(Ar(0,0,r[2]),e,d,R));const F=(-M-A)/(2*_);(i===za.PLANE||F>=0)&&l.push(Oa(Ar(0,0,r[2]),e,d,F))}return l}function iT(e,t){const i=e.start,r=e.end,s=ur(oc,r,i),l=Nr(ac,-s[1],s[0],0),y=t.start,d=t.end,v=In(eb,d,y),_=pi(v,l),M=Nr(sZ,i[0],i[1],0),T=In(oZ,M,y),A=pi(T,l);if(Math.abs(_)<Rn)return[];const R=Tp(aZ,y,v,A/_);if(t.type===hr.RAY){const F=In(s5,R,y);if(pi(F,v)<-Rn)return[]}if(e.type===za.HALF_PLANE){const F=Y_(s5,R,i);if(Vu(F,s)<-Rn)return[]}return[jc(R)]}function rT(e,t){return sT(Qv(o5,t[2],e),t)}function eZ(e,t){const i=0,r=nZ(Qv(o5,i,e),Qv(F$e,i,t)),s=[];for(const l of r)s.push(mU(l));return s}function tZ(e,t){return nT(e,Qv(o5,e[2],t))}function O$e(e,t){return iZ(Qv(o5,e[2],t),e)}function k$e(e,t,i){const r=Nr(oc,e[0],e[1],t[2]),s=Xr(ac,r,t),l=i/Oo(s);return Tp(Qe(),t,s,l)}function nT(e,{start:t,end:i,type:r}){const s=In(oc,e,t),l=In(ac,i,t),y=pi(s,l)/pi(l,l);return Tp(Qe(),t,l,r===hr.RAY?Math.max(y,0):y)}function iZ({start:e,end:t,type:i},r){const s=In(oc,r,e),l=In(ac,t,e);if(i===hr.RAY&&pi(l,s)<-Rn)return r0(e,r);const y=Qr(eb,l,s);return i2(y)/i2(l)}function rZ({start:e,end:t,type:i},r,s){const l=[];if(rl(e[2],r[2],Rn)&&rl(t[2],r[2],Rn)){const y=e,d=r,v=ur(oc,t,y),_=ur(ac,y,d),M=Fh(v),T=2*Vu(v,_),A=T*T-4*M*(Fh(_)-s*s);if(A===0){const R=-T/(2*M);(i===hr.LINE||R>=0)&&l.push(Oa(Ar(0,0,r[2]),y,v,R))}else if(A>0){const R=Math.sqrt(A),F=(-T+R)/(2*M);(i===hr.LINE||F>=0)&&l.push(Oa(Ar(0,0,r[2]),y,v,F));const V=(-T-R)/(2*M);(i===hr.LINE||V>=0)&&l.push(Oa(Ar(0,0,r[2]),y,v,V))}}else{const y=In(oc,t,e);if(rl(y[2],0,Rn))return l;const d=(r[2]-e[2])/y[2],v=Tp(ac,e,y,d);if(i===hr.RAY){const _=In(eb,v,e);if(pi(y,_)<-Rn)return l}for(const _ of oT(r,s,v))l.push(_)}return l}function nZ(e,t){const i=e.start,r=e.end,s=t.start,l=t.end,y=In(oc,r,i),d=In(ac,l,s),v=In(eb,s,i),_=Qr(sZ,y,d),M=pi(v,_);if(!rl(M,0,Rn))return[];const T=r2(_);if(rl(T,0,Rn))return[];const A=Qr(oZ,v,d),R=pi(A,_)/T,F=Tp(aZ,i,y,R);if(e.type===hr.RAY){const V=In(s5,F,i);if(pi(y,V)<-Rn)return[]}if(t.type===hr.RAY){const V=In(s5,F,s);if(pi(d,V)<-Rn)return[]}return[jc(F)]}function sT({start:e,end:t,type:i},r){const s=In(oc,r,e),l=In(ac,t,e),y=Qr(eb,l,s);if(r2(y)/r2(l)<Rn)switch(i){case hr.LINE:return[jc(r)];case hr.RAY:return pi(l,s)<-Rn?[]:[jc(r)]}return[]}function oT(e,t,i){return rl(e[2],i[2],Rn)&&rl(Dc(i,e),t*t,Rn)?[jc(i)]:[]}function Qv(e,t,{start:i,end:r,type:s}){return Nr(e.start,i[0],i[1],t),Nr(e.end,r[0],r[1],t),e.type=R$e[s],e}var za;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(za||(za={}));const R$e={[za.PLANE]:hr.LINE,[za.HALF_PLANE]:hr.RAY},Rn=1e-6,oc=Qe(),ac=Qe(),eb=Qe(),sZ=Qe(),oZ=Qe(),aZ=Qe(),s5=Qe(),o5={start:Qe(),end:Qe(),type:hr.LINE},F$e={start:Qe(),end:Qe(),type:hr.LINE};class lf{constructor(t){this.coordinateHelper=t}intersect(t){return D$e(this,t)}}class L$e extends lf{constructor(t,i){super(t),this.point=i,this.pointXYZ=t.toXYZ(i)}equals(t){return ay(t)&&Yn(this.point,t.point)}check(t){const i=this.coordinateHelper.toXYZ(t,lc);return Dc(i,this.pointXYZ)<go.pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}}class lZ extends lf{constructor(t,i,r,s){super(t),this.start=i,this.end=r,this.type=s,this.startXYZ=t.toXYZ(i),this.endXYZ=t.toXYZ(r),this.lineLike={start:this.startXYZ,end:this.endXYZ,type:this.type}}equals(t){return uf(t)&&this.type===t.type&&Yn(this.start,t.start)&&Yn(this.end,t.end)}check(t){const i=this.coordinateHelper.toXYZ(t,lc);return iZ(this.lineLike,i)<go.pointOnLineThreshold}closestTo(t){const i=this.coordinateHelper,r=i.toXYZ(t,lc),s=nT(r,this.lineLike);return i.fromXYZ(s)}}class N$e extends lZ{constructor(t,i,r){super(t,i,r,hr.LINE)}}class a5 extends lf{constructor(t,i,r,s){super(t),this.intersection=i,this.first=r,this.second=s}equals(t){return t instanceof a5&&this.first.equals(t.first)&&this.second.equals(t.second)}check(){return!1}closestTo(){return this.coordinateHelper.clone(this.intersection)}}class aT extends lf{constructor(t,i,r,s){super(t),this.basePoint=i,this.first=r,this.second=s}equals(t){return t instanceof aT&&this.first.equals(t.first)&&this.second.equals(t.second)}check(){return!1}closestTo(t){const i=this.basePoint,r=this.coordinateHelper,s=r.toXYZ(t,lc),l=Nr(z$e,i[0],i[1],s[2]);return r.fromXYZ(l)}}class uZ extends lf{constructor(t,i,r){super(t),this.center=i,this.radius=r,this.centerXYZ=t.toXYZ(i)}equals(t){return ly(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}check(){return!1}closestTo(t){const i=this.coordinateHelper,r=i.toXYZ(t,lc),s=k$e(r,this.centerXYZ,this.radius);return s[2]=i.getZ(t,this.centerXYZ[2]),i.fromXYZ(s)}}class lT extends lf{constructor(t,i,r,s){super(t),this.start=i,this.end=r,this.type=s,this.planeLike={start:i,end:r,type:s}}equals(t){return cf(t)&&this.type===t.type&&Yn(this.start,t.start)&&Yn(this.end,t.end)}check(t){const i=this.coordinateHelper.toXYZ(t,lc);return O$e(i,this.planeLike)<go.pointOnLineThreshold}closestTo(t){const i=this.coordinateHelper,r=i.toXYZ(t,lc),s=tZ(r,this.planeLike);return i.fromXYZ(s)}closestEndTo(t){const{start:i,end:r}=this;return Math.sign(Vu(ur(G$e,r,i),ur(q$e,t,i)))>0?r:i}}class cZ extends lT{constructor(t,i,r){super(t,i,r,za.HALF_PLANE)}}class hZ extends lT{constructor(t,i,r){super(t,i,r,za.PLANE)}}class j$e extends lf{constructor(t,i,r,s){super(t),this.start=i,this.end=r,this.getZ=s,this.planeLike={start:i,end:r,type:za.HALF_PLANE}}equals(t){return hf(t)&&Yn(this.start,t.start)&&Yn(this.end,t.end)&&this.getZ===t.getZ}check(t){const i=this.coordinateHelper.toXYZ(t,lc),r=pZ(this,i);return Dc(i,r)<go.pointThreshold}closestTo(t){const i=this.coordinateHelper,r=pZ(this,i.toXYZ(t,lc));return i.fromXYZ(r)}addIfOnTheGround(t,i){for(const r of i){const s=this.getZ(r[0],r[1],r[2]);q(s)&&Math.abs(r[2]-s)<Rn&&(r[2]=s,t.push(r))}}}function pZ(e,t){const i=tZ(t,e.planeLike),r=e.getZ(t[0],t[1],t[2]);return q(r)&&(i[2]=r),i}function D$e(e,t){let i=[];if(ay(e)){const{pointXYZ:r}=e;uf(t)?i=sT(t.lineLike,r):ly(t)?i=oT(t.centerXYZ,t.radius,r):cf(t)?i=rT(t.planeLike,r):hf(t)&&(i=tb(t,e))}else if(uf(e)){const{lineLike:r}=e;ay(t)?i=sT(r,t.pointXYZ):uf(t)?i=nZ(r,t.lineLike):ly(t)?i=rZ(r,t.centerXYZ,t.radius):cf(t)?i=iT(t.planeLike,r):hf(t)&&(i=tb(t,e))}else if(ly(e)){const{centerXYZ:r,radius:s}=e;uf(t)?i=rZ(t.lineLike,r,s):ay(t)?i=oT(r,s,t.pointXYZ):cf(t)?i=tT(t.planeLike,r,s):hf(t)&&(i=tb(t,e))}else if(cf(e)){const{planeLike:r,coordinateHelper:s}=e;if(cf(t))return eZ(r,t.planeLike).map(l=>new aT(s,s.fromXYZ(l),e,t));ay(t)?i=rT(r,t.pointXYZ):uf(t)?i=iT(r,t.lineLike):ly(t)?i=tT(r,t.centerXYZ,t.radius):hf(t)&&(i=tb(t,e))}else hf(e)&&(i=tb(e,t));return V$e(i,e,t)}function tb(e,t){const{planeLike:i,getZ:r}=e,s=[];if(ay(t))e.addIfOnTheGround(s,rT(i,t.pointXYZ));else if(uf(t))e.addIfOnTheGround(s,iT(i,t.lineLike));else if(ly(t))e.addIfOnTheGround(s,tT(i,t.centerXYZ,t.radius));else if(cf(t)||hf(t))for(const[l,y]of eZ(i,t.planeLike)){const d=r(l,y,0);q(d)&&s.push(Ar(l,y,d))}return s}function V$e(e,t,i){const r=t.coordinateHelper;return e.map(s=>new a5(r,r.fromXYZ(s),t,i))}function ay(e){return e instanceof L$e}function uf(e){return e instanceof lZ}function ly(e){return e instanceof uZ}function cf(e){return e instanceof lT}function hf(e){return e instanceof j$e}const lc=Qe(),z$e=Qe(),G$e=Ht(),q$e=Ht();class uy{constructor(t,i,r,s,l){this.coordinateHelper=t,this.targetPoint=i,this.constraint=r,this.elevationInfo=s,this.domain=l}}class dZ extends uy{constructor({coordinateHelper:t,targetPoint:i,objectId:r,constraint:s,elevationInfo:l}){super(t,i,s,l,xn.FEATURE),this.objectId=r}}class U$e extends dZ{constructor(t){super(De(te({},t),{constraint:new N$e(t.coordinateHelper,t.edgeStart,t.edgeEnd)}))}get hints(){return[new Yo(Na.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo,this.domain)]}}class fZ extends uy{constructor({coordinateHelper:t,targetPoint:i,constraint:r,previousVertex:s,otherVertex:l,otherVertexType:y,objectId:d,elevationInfo:v}){super(t,i,r,v,xn.SELF),this.previousVertex=s,this.otherVertex=l,this.otherVertexType=y,this.objectId=d}get hints(){const t=this.previousVertex,i=this.otherVertexType===cy.CENTER?this.otherVertex:this.targetPoint,r=this.otherVertexType===cy.CENTER?this.targetPoint:this.otherVertex,s=this.elevationInfo;return[new Yo(Na.TARGET,i,r,s,this.domain),new Yo(Na.REFERENCE,t,i,s,this.domain),new Fv(this.previousVertex,i,r,s,this.domain)]}}var cy;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(cy||(cy={}));function yZ(e,t,i,r,s=Qe()){const l=t.toXYZ(e);return l[2]=G1(r,l,t.spatialReference,i)||0,r.renderCoordsHelper.toRenderCoords(l,t.spatialReference,s),s}function B$e(e,t,i,r,s=Qe()){const l=$s(cT,e);return l[2]=G1(r,l,t,i)||0,r.renderCoordsHelper.toRenderCoords(l,t,s),s}function Bs(e,t,i,r){return uT(t.toXYZ(e),t.spatialReference,i,r)}function uT(e,t,i,r){return r.type==="2d"?(l5.x=e[0],l5.y=e[1],l5.spatialReference=t,r.toScreen(l5)):(B$e(e,t,i,r,cT),r.state.camera.projectToScreen(cT,hT),Cn(hT[0],hT[1]))}function gAe(e,t,i,r,s,l,y){if(r.mode==="absolute-height")return yZ(e,i,r,s,l),void yZ(t,i,r,s,y);const d=i.toXYZ(e),v=i.toXYZ(t),_=G1(s,d,i.spatialReference,r),M=G1(s,v,i.spatialReference,r),T=(_==null?M:M==null?_:Math.min(_,M))||0;d[2]=T,v[2]=T,s.renderCoordsHelper.toRenderCoords(d,i.spatialReference,l),s.renderCoordsHelper.toRenderCoords(v,i.spatialReference,y)}const l5=new dt,cT=Qe(),hT=Sg();let Xh=class extends ld{constructor(e){super(e),this.options=null,this._domain=xn.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}get updating(){return ky(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,t=new Map;if(q(this.options)&&q(this.options.featureSources))for(const i of this.options.featureSources.items){const r=i.layer.uid,s=e.get(r);if(s){e.delete(r),t.set(r,s);continue}if(!i.layer.loaded){this.updatingHandles.addPromise(i.layer.load());continue}const l=this._createSourceInfo(i);q(l)&&t.set(r,l)}for(const[,i]of e)i.destroy();return t}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),ml),q(this.view)&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,t){for(const[,i]of this.snappingSources)i.snappingSource.layerSource.layer===e&&(i.layerView=t)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,i,r){if(!(t&this._domain)||ae(this.options)||!this.options.effectiveFeatureEnabled)return[];const s=[],l=this._computeScreeenSizeDistanceParameters(e,i),y={distance:l,point:e,coordinateHelper:i.coordinateHelper,types:this._types};for(const[,{snappingSource:v,layerView:_}]of this.snappingSources)!v.layerSource.enabled||q(_)&&_.suspended||s.push(v.fetchCandidates(y,r).then(M=>M.filter(T=>!this._candidateIsExcluded(v,T,i.excludeFeature))));const d=(await cO(s)).flat();return this._addRightAngleCandidates(d,e,l,i),fr(r),lI(e,d,i.coordinateHelper),d}_addRightAngleCandidates(e,t,i,r){var M,T,A,R,F,V,z,W;const s=q(r.vertexHandle)?(T=(M=r.vertexHandle.rightEdge)==null?void 0:M.rightVertex)==null?void 0:T.pos:q(r.editGeometryOperations)&&r.editGeometryOperations.data.type==="polygon"?(R=Wt((A=r.editGeometryOperations.data.components[0])==null?void 0:A.getFirstVertex()))==null?void 0:R.pos:null,l=q(r.vertexHandle)?(V=(F=r.vertexHandle.leftEdge)==null?void 0:F.leftVertex)==null?void 0:V.pos:q(r.editGeometryOperations)?(W=Wt((z=r.editGeometryOperations.data.components[0])==null?void 0:z.getLastVertex()))==null?void 0:W.pos:null,{view:y}=this,d=Er(s,y,r),v=Er(l,y,r),_=e.length;for(let Z=0;Z<_;Z++)this._addRightAngleCandidate(e[Z],v,t,i,r,e),this._addRightAngleCandidate(e[Z],d,t,i,r,e)}_addRightAngleCandidate(e,t,i,r,s,l){const y=e instanceof U$e,d=y&&gE(e.constraint.start,e.constraint.end);if(ae(t)||!y||d)return;const v=e.constraint.closestTo(t),_=(v[0]-i[0])/r.x,M=(v[1]-i[1])/r.y;if(_*_+M*M<=1){const T=s.coordinateHelper,A=new fZ({coordinateHelper:T,targetPoint:v,otherVertex:t,otherVertexType:cy.NEXT,previousVertex:e.constraint.start,constraint:new cZ(T,t,v),objectId:e.objectId,elevationInfo:e.elevationInfo});l.push(A)}}_computeScreeenSizeDistanceParameters(e,t){let i=q(this.options)?this.options.distance*(t.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return ae(this.view)?{x:i,y:i,z:i,distance:i}:this.view.type==="2d"?(i*=this.view.resolution,{x:i,y:i,z:i,distance:i}):this._computeScreenSizeDistanceParameters3D(e,i,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,i,r){const{coordinateHelper:s,elevationInfo:l}=r,{spatialReference:y}=s,d=s.hasZ()?Ki:l,v=s.toXYZ(e,W$e);v[2]=G1(i,v,y,d,Ki),i.renderCoordsHelper.toRenderCoords(v,y,gZ);const _=i.state.camera.computeScreenPixelSizeAt(gZ),M=_*i.renderCoordsHelper.unitInMeters/i.mapCoordsHelper.unitInMeters,T=t*M,A=uT(v,y,Ki,i),R=pT(A,v,M,0,0,i,r),F=pT(A,v,0,M,0,i,r),V=pT(A,v,0,0,M,i,r);return{x:R===0?0:T/R,y:F===0?0:T/F,z:V===0?0:T/V,distance:_*t}}get _types(){return oy.EDGE|oy.VERTEX}_candidateIsExcluded(e,t,i){if(ae(i))return!1;const r=this._getCandidateObjectId(t);if(ae(r))return!1;const s=e.layerSource.layer;return s.type==="graphics"?i.uid===r:i.sourceLayer===s&&!(!i.attributes||!("objectIdField"in s))&&i.attributes[s.objectIdField]===r}_getCandidateObjectId(e){return e instanceof dZ?e.objectId:null}_createSourceInfo(e){const t=this._createFeatureSnappingSourceType(e);if(ae(t))return null;if("loading"in t)return this.updatingHandles.addPromise(t.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const i=q(this.view)?this.view.allLayerViews.find(r=>r.layer===e.layer):null;return new H$e(t.source,i)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(ae(t)||t.type!=="3d")return null;const i=this._getSourceModule("scene");return q(i.module)?{source:new i.module.SceneLayerSnappingSource({layerSource:e,view:t})}:{loading:i.loader}}_createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source.type){case"feature-layer":case"oriented-imagery":{const t=this._getSourceModule("featureService");return q(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const t=this._getSourceModule("featureCollection");return q(t.module)?{source:new t.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:t.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const t=this._getSourceModule("graphics");return q(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const t=this._getSourceModule("notes");return q(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>q(e.layer.sublayers)?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_getSourceModule(e){const t=this._sourceModules[e];if(ae(t.loader)){const i=this._loadSourceModule(e).then(r=>{t.module=r});return t.loader=i,{module:t.module,loader:i}}return{module:t.module,loader:t.loader}}_loadSourceModule(e){const t=this.updatingHandles;switch(e){case"featureService":return t.addPromise(import("./FeatureServiceSnappingSource.1b007cc8.js"));case"featureCollection":return t.addPromise(import("./FeatureCollectionSnappingSource.929fadd1.js"));case"graphics":case"notes":return t.addPromise(import("./GraphicsSnappingSource.047a0fea.js"));case"scene":return t.addPromise(import("./SceneLayerSnappingSource.de56b3d1.js"))}return null}};m([x({constructOnly:!0})],Xh.prototype,"spatialReference",void 0),m([x({constructOnly:!0})],Xh.prototype,"view",void 0),m([x()],Xh.prototype,"options",void 0),m([x({readOnly:!0})],Xh.prototype,"updating",null),m([x({readOnly:!0})],Xh.prototype,"snappingSources",null),Xh=m([Y("esri.views.interactive.snapping.FeatureSnappingEngine")],Xh);class H$e{constructor(t,i){this.snappingSource=t,this.layerView=i,this.handles=new Jr;const r=this.snappingSource.layerSource.layer;if("refresh"in r){const s=r;this.handles.add(s.on("refresh",()=>t.refresh()))}this.handles.add([Ve(()=>t.updating,s=>t.layerSource.updating=s,As),Ve(()=>t.availability,s=>t.layerSource.availability=s,As)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}function pT(e,t,i,r,s,l,{coordinateHelper:y}){const d=$s(J$e,t);d[0]+=i,d[1]+=r,d[2]+=s;const v=uT(d,y.spatialReference,Ki,l);return A9e(v,e)}const W$e=Qe(),gZ=Qe(),J$e=Qe();class u5{constructor(t,i){this.view=t,this.options=i,this.squaredShortLineThreshold=go.shortLineThreshold*go.shortLineThreshold}snap(t,i){return q(i.vertexHandle)?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(t,i):this.snapNewVertex(t,i)}edgeExceedsShortLineThreshold(t,i){return this.exceedsShortLineThreshold(t.leftVertex.pos,t.rightVertex.pos,i)}exceedsShortLineThreshold(t,i,{elevationInfo:r,editGeometryOperations:s}){const l=s.data.coordinateHelper;return this.squaredShortLineThreshold===0||Zd(Bs(i,l,r,this.view),Bs(t,l,r,this.view))>this.squaredShortLineThreshold}squaredProximityThreshold(t){return t==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:i}=this.options,r=t*i;return r*r}}class Z$e extends uy{constructor({coordinateHelper:t,lineStart:i,lineEnd:r,targetPoint:s,elevationInfo:l}){super(t,s,new hZ(t,i,r),l,xn.SELF),this._referenceLineHint=new Yo(Na.REFERENCE_EXTENSION,i,r,l,this.domain)}get hints(){return[this._referenceLineHint,new Yo(Na.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}class K$e extends u5{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,l=[];if(s<1)return l;const y=i.coordinateHelper,d=Bs(t,y,Ki,this.view),{view:v}=this,_=r.edges[s-1];let M=_;do{if(this.edgeExceedsShortLineThreshold(M,i)){const T=Fl(M,v,i);this._processCandidateProposal(T.left,T.right,t,d,i,l)}M=M.leftVertex.leftEdge}while(M&&M!==_);return l}snapExistingVertex(t,i){const r=[],s=Wt(i.vertexHandle),l=s.component;if(l.edges.length<2)return r;const{view:y}=this,{coordinateHelper:d}=i,v=Bs(t,d,Ki,y),_=s.leftEdge,M=s.rightEdge;_&&M&&this.edgeExceedsShortLineThreshold(_,i)&&this.edgeExceedsShortLineThreshold(M,i)&&this._processCandidateProposal(Er(_.leftVertex.pos,y,i),Er(M.rightVertex.pos,y,i),t,v,i,r);const T=l.edges[0];let A=T;do{if(A!==s.leftEdge&&A!==s.rightEdge&&this.edgeExceedsShortLineThreshold(A,i)){const R=Fl(A,y,i);this._processCandidateProposal(R.left,R.right,t,v,i,r)}A=A.rightVertex.rightEdge}while(A&&A!==T);return r}_processCandidateProposal(t,i,r,s,l,y){const{coordinateHelper:d,pointer:v}=l;d.toXYZ(t,mZ),d.toXYZ(i,vZ);const _=d.toXYZ(r,X$e),M=nT(_,Y$e),T=d.fromXYZ(M);Zd(s,Bs(T,d,Ki,this.view))<this.squaredProximityThreshold(v)&&y.push(new Z$e({coordinateHelper:d,lineStart:t,lineEnd:i,targetPoint:T,elevationInfo:d.hasZ()?Ki:null}))}}const mZ=Qe(),vZ=Qe(),Y$e={start:mZ,end:vZ,type:hr.LINE},X$e=Qe();class Q$e extends uy{constructor({coordinateHelper:t,referenceLine:i,lineStart:r,targetPoint:s,elevationInfo:l}){const y=t.toXYZ(r,e7e),d=t.toXYZ(i.left,t7e),v=t.toXYZ(i.right,i7e);Xr(y,Xs(y,y,v),d),super(t,s,new hZ(t,r,t.fromXYZ(y)),l,xn.SELF),this._referenceLines=[{edge:i,fadeLeft:!0,fadeRight:!0}]}get hints(){const t=this.elevationInfo;return[new Yo(Na.TARGET,this.constraint.start,this.targetPoint,t,this.domain),new Sx(this.constraint.start,this.targetPoint,t,this.domain),...this._referenceLines.map(i=>new Yo(Na.REFERENCE,i.edge.left,i.edge.right,t,this.domain,i.fadeLeft,i.fadeRight))]}addReferenceLine(t){const i={edge:t,fadeLeft:!0,fadeRight:!0},{coordinateHelper:r}=this;this._referenceLines.forEach(s=>{r.equals(t.right,s.edge.left)&&(s.fadeLeft=!1,i.fadeRight=!1),r.equals(t.right,s.edge.right)&&(s.fadeRight=!1,i.fadeRight=!1),r.equals(t.left,s.edge.right)&&(s.fadeRight=!1,i.fadeLeft=!1),r.equals(t.left,s.edge.left)&&(s.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}}const e7e=Qe(),t7e=Qe(),i7e=Qe();class r7e extends u5{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,l=r.vertices.length,y=[];if(s<2)return y;const{view:d}=this,v=Bs(t,i.coordinateHelper,Ki,d),_=Er(r.vertices[l-1].pos,d,i),M=Er(r.vertices[0].pos,d,i),T=r.edges[s-1];let A=T;do{if(this.edgeExceedsShortLineThreshold(A,i)){const R=Fl(A,d,i);this._checkEdgeForParalleLines(R,_,t,v,i,y),this._checkEdgeForParalleLines(R,M,t,v,i,y)}A=A.leftVertex.leftEdge}while(A&&A!==T);return y}snapExistingVertex(t,i){const r=[],s=Wt(i.vertexHandle),l=s.component;if(l.edges.length<3)return r;const{view:y}=this,d=Bs(t,i.coordinateHelper,Ki,y),v=s.leftEdge,_=s.rightEdge,M=l.vertices[0],T=Er(M.pos,y,i),A=l.vertices.length,R=l.vertices[A-1],F=Er(R.pos,y,i),V=l.edges[0];let z=V;do{if(z!==v&&z!==_&&this.edgeExceedsShortLineThreshold(z,i)){const W=Fl(z,y,i);v&&this._checkEdgeForParalleLines(W,Er(v.leftVertex.pos,y,i),t,d,i,r),_&&this._checkEdgeForParalleLines(W,Er(_.rightVertex.pos,y,i),t,d,i,r),s===M?this._checkEdgeForParalleLines(W,F,t,d,i,r):s===R&&this._checkEdgeForParalleLines(W,T,t,d,i,r)}z=z.rightVertex.rightEdge}while(z&&z!==V);return r}_checkEdgeForParalleLines(t,i,r,s,l,y){const d=t.left,v=t.right;if(bI(hy,i,d,v),S1(hy,i)<go.parallelLineThreshold)return;bI(hy,r,d,v,i);const{coordinateHelper:_,pointer:M}=l,T=_.fromXYZ(hy,_.getZ(r,0));if(Zd(s,Bs(T,_,Ki,this.view))<this.squaredProximityThreshold(M)){if(this._parallelToPreviousCandidate(t,y))return;y.push(new Q$e({coordinateHelper:_,referenceLine:t,lineStart:i,targetPoint:T,elevationInfo:_.hasZ()?Ki:null}))}}_parallelToPreviousCandidate(t,i){const r=t.left,s=t.right;for(const l of i)if(bI(hy,s,l.constraint.start,l.constraint.end,r),S1(hy,s)<go.parallelLineThreshold)return l.addReferenceLine(t),!0;return!1}}const hy=Ht();class n7e extends u5{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.vertices.length,l=[];if(s<2)return l;const{view:y}=this,d=Bs(t,i.coordinateHelper,Ki,y),v=r.vertices[s-1];if(this.edgeExceedsShortLineThreshold(v.leftEdge,i)){const M=Er(v.pos,y,i),T=Fl(v.leftEdge,y,i);this._checkForSnappingCandidate(l,T,M,t,T.left,M,i,t,d)}const _=r.vertices[0];if(this.edgeExceedsShortLineThreshold(_.rightEdge,i)){const M=Er(_.pos,y,i),T=Fl(_.rightEdge,y,i);this._checkForSnappingCandidate(l,T,M,t,T.right,M,i,t,d)}return l}snapExistingVertex(t,i){const r=[],s=Wt(i.vertexHandle),l=s.component,y=l.vertices.length;if(y<3)return r;const{view:d}=this,v=Bs(t,i.coordinateHelper,Ki,d),_=s.leftEdge,M=s.rightEdge,T=l.vertices[0],A=l.vertices[y-1];if(!_){const R=T.rightEdge.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(R,i)){const F=Fl(R,d,i),V=Er(T.rightEdge.rightVertex.pos,d,i);this._checkForSnappingCandidate(r,F,V,t,F.right,V,i,t,v)}return r}if(!M){const R=A.leftEdge.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(R,i)){const F=Fl(R,d,i),V=Er(A.leftEdge.leftVertex.pos,d,i);this._checkForSnappingCandidate(r,F,V,t,F.left,V,i,t,v)}return r}if(_&&_.leftVertex.leftEdge){const R=_.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(R,i)){const F=Fl(R,d,i),V=Er(_.leftVertex.pos,d,i);this._checkForSnappingCandidate(r,F,V,t,F.left,V,i,t,v)}}if(M&&M.rightVertex.rightEdge){const R=M.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(R,i)){const F=Fl(R,d,i),V=Er(M.rightVertex.pos,d,i);this._checkForSnappingCandidate(r,F,V,t,F.right,V,i,t,v)}}return r}_checkForSnappingCandidate(t,i,r,s,l,y,d,v,_){const{coordinateHelper:M,pointer:T}=d;ur(ib,i.right,i.left);const A=Nr(a7e,ib[1],-ib[0],0),R=Vu(A,ur(ib,s,r))/Fh(A),F=M.fromXYZ(Oa(ib,y,A,R),M.getZ(v,0));if(Zd(_,Bs(F,M,Ki,this.view))<this.squaredProximityThreshold(T)){const V=M.toXYZ(y,s7e),z=Tp(o7e,V,A,Math.sign(R)),W=M.fromXYZ(z);t.push(new fZ({coordinateHelper:M,targetPoint:F,constraint:new cZ(M,y,W),previousVertex:l,otherVertex:y,otherVertexType:cy.CENTER,elevationInfo:M.hasZ()?Ki:null}))}}}const ib=Ht(),s7e=Qe(),o7e=Qe(),a7e=Qe();class l7e extends uy{constructor({coordinateHelper:t,targetPoint:i,point1:r,point2:s,elevationInfo:l}){super(t,i,new uZ(t,t.arrayToVector(K_(u7e,r,s,.5)),.5*Du(r,s)),l,xn.SELF),this._p1=r,this._p2=s}get hints(){const t=this.elevationInfo;return[new Yo(Na.REFERENCE,this.targetPoint,this._p1,t,this.domain),new Yo(Na.REFERENCE,this.targetPoint,this._p2,t,this.domain),new Fv(this._p1,this.targetPoint,this._p2,t,this.domain)]}}const u7e=Ht();class c7e extends u5{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=[],l=r.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||l<2)return s;const{view:y}=this,d=r.vertices[0],v=r.vertices[l-1],_=Er(d.pos,y,i),M=Er(v.pos,y,i);return this._processCandidateProposal(_,M,t,i,s),s}snapExistingVertex(t,i){const r=[],s=Wt(i.vertexHandle),l=s.component;if(l.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(s.index===0||s.index===l.vertices.length-1))return r;const{view:y}=this,d=Er(s.leftEdge.leftVertex.pos,y,i),v=Er(s.rightEdge.rightVertex.pos,y,i);return this._processCandidateProposal(d,v,t,i,r),r}_processCandidateProposal(t,i,r,s,l){if(!this.exceedsShortLineThreshold(t,i,s))return;const y=K_(h7e,t,i,.5),d=.5*Du(t,i),v=F4e(p7e,r,y,d),{coordinateHelper:_,pointer:M}=s,T=_.fromXYZ(v,_.getZ(r,0)),A=Bs(r,_,Ki,this.view);Zd(A,Bs(T,_,Ki,this.view))<this.squaredProximityThreshold(M)&&l.push(new l7e({coordinateHelper:_,targetPoint:T,point1:t,point2:i,elevationInfo:_.hasZ()?Ki:null}))}}const h7e=Ht(),p7e=Ht();let py=class extends ot{constructor(e){super(e),this.updating=!1,this._snappers=new gt,this._domain=xn.SELF}initialize(){this._snappers.push(new r7e(this.view,this.options),new K$e(this.view,this.options),new n7e(this.view,this.options),new c7e(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t,i){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];const r=[];for(const s of this._snappers.items)for(const l of s.snap(e,i))r.push(l);return lI(e,r,i.coordinateHelper),r}};m([x({readOnly:!0})],py.prototype,"updating",void 0),m([x({constructOnly:!0})],py.prototype,"view",void 0),m([x()],py.prototype,"options",null),py=m([Y("esri.views.interactive.snapping.SelfSnappingEngine")],py);function d7e(e,t){return[new py({view:e,options:t}),new Xh({view:e,options:t,spatialReference:e.spatialReference})]}let pf=class extends ot{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};m([x({constructOnly:!0})],pf.prototype,"layer",void 0),m([x()],pf.prototype,"enabled",void 0),m([x()],pf.prototype,"updating",void 0),m([x()],pf.prototype,"availability",void 0),pf=m([Y("esri.views.interactive.snapping.FeatureSnappingLayerSource")],pf);const f7e=pf;let _o=class extends ot{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new gt,this.distance=go.distance,this.touchSensitivityMultiplier=go.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};m([x()],_o.prototype,"enabled",void 0),m([x()],_o.prototype,"enabledToggled",void 0),m([x()],_o.prototype,"selfEnabled",void 0),m([x()],_o.prototype,"featureEnabled",void 0),m([x({type:gt.ofType(f7e)})],_o.prototype,"featureSources",void 0),m([x()],_o.prototype,"distance",void 0),m([x()],_o.prototype,"touchSensitivityMultiplier",void 0),m([x({readOnly:!0})],_o.prototype,"effectiveEnabled",null),m([x({readOnly:!0})],_o.prototype,"effectiveSelfEnabled",null),m([x({readOnly:!0})],_o.prototype,"effectiveFeatureEnabled",null),_o=m([Y("esri.views.interactive.snapping.SnappingOptions")],_o);const dT=_o;class c5 extends uy{constructor(t,i,r,s,l){super(t,i,new a5(t,i,r.constraint,s.constraint),l,xn.ALL),this.first=r,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new xx(this.targetPoint,this.elevationInfo,this.domain)]}}let zl=class extends fn.EventedMixin(ld){constructor(e){super(e),this.options=new dT,this.snappingEnginesFactory=d7e,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=uc.MAIN}initialize(){this.handles.add([Ve(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}},()=>{this.doneSnapping(),this.emit("changed")},ml),Ve(()=>this.options,e=>{for(const t of this._engines)t.options=e},ml),Ve(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t),As)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;const{view:i,options:r}=this;this._engines=t(i,r)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}async snap(e){return y7e(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:i}=e;this._removeVisualization();const r=this._currentMainCandidate;if(ae(r))return t;const s=this._selectUpdateInput(e);if(ae(s))return t;const{coordinateHelper:{spatialReference:l}}=i,y=Do(this._convertPointElevation(s,i),l);if(ae(y))return t;const{view:d}=this,{coordinateHelper:v,elevationInfo:_,visualizer:M}=i,T=[],A=v.pointToVector(y),R=r.constraint.closestTo(A);if(!this._arePointsWithinScreenThreshold(A,R,i))return this._resetSnappingState(),t;r.targetPoint=R,T.push(...r.hints);for(const V of this._currentOtherActiveCandidates)V.targetPoint=R,T.push(...V.hints);q(M)&&this.handles.add(M.draw(T,{coordinateHelper:v,elevationInfo:bZ(i),view:d,selfSnappingZ:i.selfSnappingZ}),h5);const F=v.vectorToDehydratedPoint(R);return this._convertPointElevation(F,i,Ki,_)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case uc.MAIN:return e;case uc.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=uc.MAIN}_removeVisualization(){this.handles.remove(h5)}async _snapSinglePoint({point:e,context:t,signal:i}){const{coordinateHelper:r}=t,{view:s}=this,l=this._convertPointElevation(e,t),y=r.pointToVector(l),d=await this._fetchCandidates(y,xn.ALL,t,i);return this._createSnapResult(y,uc.MAIN,d,s,t,i)}async _snapMultiPoint({point:e,scenePoint:t,context:i,signal:r}){const{view:s}=this,{coordinateHelper:l}=i,{spatialReference:y}=l;await LL(t.spatialReference,y);const d=Do(this._convertPointElevation(t,i),y),v=l.pointToVector(d),_=await this._fetchCandidates(v,xn.FEATURE,i,r);if(_.length>0){const R=await this._fetchCandidates(v,xn.SELF,i,r);return this._createSnapResult(v,uc.SCENE,[..._,...R],s,i,r)}const M=this._convertPointElevation(e,i),T=l.pointToVector(M),A=await this._fetchCandidates(T,xn.SELF,i,r);return this._createSnapResult(T,uc.MAIN,A,s,i,r)}async _fetchCandidates(e,t,i,r){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(e,t,i,r)))).flat()}_createSnapResult(e,t,i,r,s,l){return{get valid(){return!Eo(l)},apply:()=>{const{elevationInfo:y,coordinateHelper:d}=s,{snappedPoint:v,hints:_}=this._processCandidates(e,t,i,s);return this._removeVisualization(),q(s.visualizer)&&this.handles.add(s.visualizer.draw(_,{coordinateHelper:d,elevationInfo:bZ(s),view:r,selfSnappingZ:s.selfSnappingZ}),h5),this._convertPointElevation(v,s,Ki,y)}}}_processCandidates(e,t,i,r){const{coordinateHelper:s}=r;if(i.length<1)return this.doneSnapping(),{snappedPoint:s.vectorToDehydratedPoint(e),hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),lI(e,i,s);const l=this._currentMainCandidate;if(q(l)){const y=this._findOldConstraintInNewCandidates(l,i);if(y>=0){if(!(i[y]instanceof c5))return this._intersectWithOtherCandidates(y,i,e,t,r);if(this._arePointsWithinScreenThreshold(e,l.targetPoint,r))return this._updateSnappingCandidate(l,t,i,r)}}return this._intersectWithOtherCandidates(0,i,e,t,r)}_findOldConstraintInNewCandidates(e,t){return e instanceof c5?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}_intersectWithOtherCandidates(e,t,i,r,s){const{coordinateHelper:l}=s,y=t[e],d=[];for(let v=0;v<t.length;++v){if(v===e)continue;const _=t[v];for(const M of y.constraint.intersect(_.constraint)){const T=l.fromXYZ(M.closestTo(y.targetPoint),y.targetPoint[2]);d.push([new c5(l,T,y,_,_.elevationInfo),this._squaredScreenDistance(i,T,l)])}}return d.length>0&&(d.sort((v,_)=>v[1]-_[1]),d[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(d[0][0],r,t,s):this._updateSnappingCandidate(y,r,t,s)}_updateSnappingCandidate(e,t,i,r){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const s=this._currentMainCandidate.targetPoint,l=[];l.push(...e.hints);for(const y of i){if(e instanceof c5){if(y.constraint.equals(e.first.constraint)||y.constraint.equals(e.second.constraint))continue}else if(y.constraint.equals(e.constraint))continue;y.constraint.check(s)&&(y.targetPoint=s,this._currentOtherActiveCandidates.push(y),l.push(...y.hints))}return{snappedPoint:r.coordinateHelper.vectorToDehydratedPoint(s),hints:l}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,t,i){return this._squaredScreenDistance(e,t,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(e,t,i){return Zd(this._toScreen(e,i),this._toScreen(t,i))}_toScreen(e,t){return Bs(e,t,Ki,this.view)}_findOldCandidateIndex(e,t){let i=-1;for(let r=0;r<e.length;++r)if(t.constraint.equals(e[r].constraint)){i=r;break}return i}_convertPointElevation(e,t,i=t.elevationInfo,r=Ki){const{view:s}=this;if(!(q(e)&&t.coordinateHelper.hasZ()&&q(s)&&s.type==="3d"))return e;const l=me(e);return l.z=aI(s,l,i,r),l}get test(){return{visualizationsActive:this.handles.has(h5),engines:this._engines}}};var uc;m([x({constructOnly:!0})],zl.prototype,"view",void 0),m([x()],zl.prototype,"options",void 0),m([x({readOnly:!0})],zl.prototype,"updating",null),m([x()],zl.prototype,"snappingEnginesFactory",void 0),m([x()],zl.prototype,"_engines",void 0),m([x()],zl.prototype,"_squaredMouseProximityTreshold",null),m([x()],zl.prototype,"_squaredTouchProximityThreshold",null),zl=m([Y("esri.views.interactive.snapping.SnappingManager")],zl),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(uc||(uc={}));const h5="visualization-handle";function y7e(e){return q(e.scenePoint)}function bZ({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?Ki:t}function g7e(e){return q(e)&&e.type==="graphic"}function m7e(e){var t;return(t=e.find(g7e))!=null?t:null}let Fn=class extends fn.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:DF(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};m([x()],Fn.prototype,"activeComponent",void 0),m([x()],Fn.prototype,"cancelled",void 0),m([x()],Fn.prototype,"history",void 0),m([x()],Fn.prototype,"tool",null),m([x()],Fn.prototype,"type",void 0),m([x()],Fn.prototype,"canUndo",null),m([x()],Fn.prototype,"canRedo",null),m([x()],Fn.prototype,"onEnd",void 0),m([x()],Fn.prototype,"undo",null),m([x()],Fn.prototype,"redo",null),m([x()],Fn.prototype,"toggleTool",void 0),m([x()],Fn.prototype,"addToSelection",void 0),m([x()],Fn.prototype,"removeFromSelection",void 0),Fn=m([Y("esri.widgets.Sketch.support.OperationHandle")],Fn);let p5=class extends Fn{};m([x()],p5.prototype,"activeComponent",void 0),p5=m([Y("esri.widgets.Sketch.support.CreateOperationHandle")],p5);let cc=class extends Fn{};m([x()],cc.prototype,"activeComponent",void 0),cc=m([Y("esri.widgets.Sketch.support.UpdateOperationHandle")],cc);const wZ={defaultZ:0},d5={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let Ni=class extends fn.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._handles=new Jr,this._internalGraphicsLayer=new WB({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new Jr,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new jx,this.layer=null,this.pointSymbol=new ro({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new pl({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new us({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new Dx,this.updateGraphics=new gt,this.updateOnGraphicClick=!0,this.updatePointSymbol=new ro({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new pl({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new us({color:[12,207,255],width:2}),this.vertexSymbol=new ro({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=wZ,this.defaultUpdateOptions=d5,this.snappingOptions=new dT}initialize(){this._handles.add([hs(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),hs(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(q(this._operationHandle))for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),Ve(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.elevationInfo)!=null?t:null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},As),Ve(()=>this.view,e=>{oi(this._snappingManager),e&&(this._snappingManager=new zl({view:e,options:this.snappingOptions}),e.type==="2d"?import("./editingTools.27b47fed.js"):e.type==="3d"&&(import("./editingTools.7d749583.js").then(function(t){return t.e}),import("./GraphicsLayerView3D.38130c7e.js").then(function(t){return t.G})))},As),Ve(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})])}destroy(){this.cancel(),this._handles=oi(this._handles),this._viewHandles=oi(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=oi(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return this.view.type==="3d"?"move":"transform"}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return!q(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):Wt(this.activeComponent.graphic)}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",te(te({},wZ),e))}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",De(te(te({},d5),e),{reshapeOptions:te(te({},d5.reshapeOptions),e==null?void 0:e.reshapeOptions)}))}set snappingOptions(e){q(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var i;const e=!(!((i=this.view)==null?void 0:i.ready)||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:r,map:s}=t;r&&(t.cursor=null),s&&s.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const i="view-ready";this._handles.remove(i),e&&this._handles.add(no(()=>e.ready,r=>{this._viewHandles.removeAll(),r&&this._viewHandles.add(this._generateViewHandles(e))},As),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Wa(this._moduleLoaderAbortController),this._viewReadyAbortController=Wa(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){const{activeTool:i,layer:r}=this,s=t.toArray();r.removeMany(s),this.cancel(),this._emitDeleteEvent({graphics:s,tool:i})}}async create(e,t){if(this.cancel(),await this._waitViewReady(),this.state==="disabled")throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),zi();if(q(this.view.activeTool)&&(this.view.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");lJ(this.view,this._internalGraphicsLayer);const i=await this._setupCreateOperation(e,t);if(ae(i)||this.destroyed)return void this.view.map.remove(this._internalGraphicsLayer);const r=()=>{if(i===this._operationHandle){const s=this.createGraphic,l=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||s==null||this.layer.add(s),this.emit("create",{graphic:s,state:l?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};i.on("complete",r),this._operationHandle=i,this.view.ready&&this.view.focus()}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:s}=this;if(s==="disabled")throw r||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),i||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),zi();q(this.view.activeTool)&&(this.view.activeTool=null);const l=Array.isArray(e)?e:[e];if(e==null||!l||!l.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(l.some(d=>d.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!ae(d.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const y=await this._setupUpdateOperation(l,t);this.destroyed||ae(y)||Ur(y)||(lJ(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(y,t),this.emit("update",{graphics:l,state:"start",aborted:!1,tool:y.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const t of e)q(t.geometry)&&t.geometry.type!=="mesh"&&!Xi(t.geometry.spatialReference,this.view.spatialReference)&&(wl(t.geometry.spatialReference,this.view.spatialReference)||sh()||await oh(),t.geometry=Do(t.geometry,this.view.spatialReference));this._endAsyncOperation()}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=this.view;if(t.type==="2d"){const s=[];this.view.map.allLayers.forEach(y=>{y.type!=="vector-tile"&&y.type!=="imagery"||s.push(y)});const l=await this.view.hitTest(e,{exclude:s});return m7e(l.results)}const i=[this.view.map.ground];t.map.allLayers.forEach(s=>{s.type==="integrated-mesh"&&i.push(s)});const r=await t.hitTest(e,{exclude:i});if(r.results.length>0){const s=r.results[0];if(q(s)&&s.type==="graphic"&&s.graphic&&(!r.ground.mapPoint||t.map.ground.opacity<1||r.ground.distance-hn(s.distance,0)>-Math.min(3*r.ground.distance,t.viewingMode==="global"?oM(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return s}return null}_generateViewHandles(e){return[e.on("immediate-click",async t=>{const i=this.state==="active"&&this._operationHandle.type==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const r=await t.async(()=>this._getFirstHit(Li(t)));let s=null;if(q(r)){const l=r.graphic;this.updateGraphics.includes(l)||l.layer===this.layer?(t.stopPropagation(),s=l):e.type!=="2d"||this._isComponentGraphic(l)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();q(s)&&!this.updateGraphics.includes(s)&&await this.update([s],De(te({},this.defaultUpdateOptions),{reshapeOptions:te({},this.defaultUpdateOptions.reshapeOptions)})),this._endAsyncOperation()},rt.WIDGET)]}async _setupCreateOperation(e,t){const i=te(te({hasZ:this.view.type==="3d"},this.defaultCreateOptions),t),r=await this._setupDrawGraphicTool(e,this.view,i);return ae(r)?null:(this.view.tools.add(r),this.view.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(e,t,i){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const r=e!=="rectangle",s=e!=="rectangle";this.snappingOptions.enabledToggled=!1;const l=De(te({view:t,mode:e==="rectangle"||e==="circle"?"hybrid":"click"},i),{snapToScene:!1,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),snappingManager:this._snappingManager,forceUniformSize:s,centered:r});return this.view.type==="2d"?this._makeDrawGraphicTool2D(l):this._makeDrawGraphicTool3D(l)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(import("./editingTools.27b47fed.js"));return Ur(t)||this.destroyed?null:new t.module.DrawGraphicTool2D(De(te({},e),{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:v7e(e.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions}))}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(import("./editingTools.7d749583.js").then(function(r){return r.e}));if(Ur(t)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new t.module.DrawGraphicTool3D(De(te({},e),{elevationInfo:i,snapToScene:!q(i)||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions}))}_setupCreateOperationHandle(e){let t=null;const i=e.forceUniformSize,r=e.centered,s=[this.view.on("key-down",y=>{if(y.key===It.pan)y.stopPropagation(),y.repeat||(e.enabled=!1);else if(y.key===It.complete)y.stopPropagation(),e.completeCreateOperation();else if(y.key!==It.vertexAdd||y.repeat)y.key===It.undo?(y.stopPropagation(),l.undo()):y.key===It.redo?(y.stopPropagation(),l.redo()):y.key!==It.snappingToggle||e.geometryType==="rectangle"||e.geometryType==="circle"||y.repeat?y.key!==It.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||y.repeat?y.key===It.center&&(y.repeat||(e.centered=!r,y.stopPropagation())):(e.forceUniformSize=!i,y.stopPropagation()):(this.snappingOptions.enabledToggled=!0,y.stopPropagation());else{const d=e.drawOperation.geometryType;d!=="polyline"&&d!=="polygon"&&d!=="multipoint"||(y.stopPropagation(),e.drawOperation.commitStagedVertex())}},rt.WIDGET),this.view.on("key-up",y=>{y.key===It.pan?e.enabled=!0:y.key===It.snappingToggle&&e.geometryType!=="rectangle"&&e.geometryType!=="circle"?(this.snappingOptions.enabledToggled=!1,y.stopPropagation()):y.key!==It.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?y.key===It.center&&(e.centered=r,y.stopPropagation()):(e.forceUniformSize=i,y.stopPropagation())},rt.WIDGET),e.on("vertex-add",y=>{switch(t=ae(t)?"start":"active",y.operation){case"apply":this.emit("create",{graphic:Wt(e.graphic),state:t,tool:this.activeTool,toolEventInfo:y,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[Wt(e.graphic)],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[Wt(e.graphic)],tool:e.geometryType})}}),e.on("cursor-update",y=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:Wt(e.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:y.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",y=>{switch(y.operation){case"apply":this.emit("create",{graphic:Wt(e.graphic),state:"active",tool:this.activeTool,toolEventInfo:y,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[Wt(e.graphic)],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[Wt(e.graphic)],tool:e.geometryType})}}),e.on("complete",y=>{this._set("createGraphic",Wt(y.graphic)),t="complete",y.aborted?l&&l.cancel():l&&l.complete()}),Ve(()=>this._getGraphicSymbolFromTool(e.geometryType),y=>{e.graphicSymbol=y})],l=new p5({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var y;s.forEach(d=>d.remove()),s.length=0,(y=this.view.tools)==null||y.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return l}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;default:return null}}async _setupUpdateOperation(e,t){const{layer:i,view:r}=this,s=De(te(te({tool:this._defaultUpdateTool},this.defaultUpdateOptions),t),{reshapeOptions:te(te({},this.defaultUpdateOptions.reshapeOptions),t==null?void 0:t.reshapeOptions)});let l=s.tool;for(const y of e)i.remove(y),i.add(y);if(r.type==="3d"){if(e.length===0)return null;switch(l){case"move":return this._setupMove3DOperation(e,s,r,l);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const y=e5(e[0]);return y===Ci.SUPPORTED?this._setupReshape3DOperation(e[0],s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${DI(y)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,s,r)}}switch(l){case"move":return this._setupMove2DOperation(e,s,r);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const y=e5(e[0]);return y===Ci.SUPPORTED?this._setupTransformOrReshape2DOperation(e,l,s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${DI(y)}).`),null)}case"transform":if(e.length===1){const y=Hb(e[0].geometry,"type");y!=="point"&&y!=="multipoint"||(l="reshape")}return this._setupTransformOrReshape2DOperation(e,l,s,r)}}async _setupMove3DOperation(e,t,i,r,s=!1){for(const _ of e){const M=hMe(_);if(M!==Ci.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${DI(M)}).`),null}const l=await this._requireModule(import("./editingTools.7d749583.js").then(function(_){return _.e}));if(Ur(l))return l;const y=new l.module.GraphicMoveTool({view:i,enableZ:t.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(y),y.graphics.addMany(e),s||this.updateGraphics.addMany(e);const d=[],v=new cc({activeComponent:y,tool:r,type:"update",onEnd:()=>{var _;d.forEach(M=>M.remove()),d.length=0,(_=this.view.tools)==null||_.remove(y),y.destroyed||y.destroy()},undo:()=>{f5(v,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{y5(v,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:_=>{this.updateGraphics.push(_),y.graphics.push(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[_],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:_=>{const M=this.updateGraphics.indexOf(_);v.history.undo.forEach(T=>T.updates.splice(M,1)),v.history.redo.forEach(T=>T.updates.splice(M,1)),this.updateGraphics.remove(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[_],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?y.graphics.remove(_):v.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||r!=="transform")return;const _=this.updateGraphics.getItemAt(0);if(e5(_)!==Ci.SUPPORTED)return;const M=await this._setupReshape3DOperation(_,t,i,!0);Ur(M)||(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(M,t))}});return d.push(...this._getHandlesForComponent(v,t),this.view.on("immediate-click",_=>this._getCommonUpdateOperationClickHandlers(v,_,t),rt.WIDGET),i.on("key-down",_=>{this._getCommonUpdateOperationKeyDownHandlers(v,_),_.key===It.snappingToggle&&(this.snappingOptions.enabledToggled=!0,_.stopPropagation())},rt.WIDGET),i.on("key-up",_=>{_.key===It.snappingToggle&&(this.snappingOptions.enabledToggled=!1,_.stopPropagation())},rt.WIDGET)),v}_setupGraphicTransform3DOperation(e,t,i,r=!1){if(e.length===1&&gMe(e[0])===Ci.SUPPORTED){const s=e[0],l=s.geometry;if(q(l)&&(l.type==="point"||l.type==="mesh"))return this._setupPointTransform3DOperation(s,t,i);if(q(l)&&(l.type==="polygon"||l.type==="polyline"))return this._setupPolyTransform3DOperation(s,t,i,r)}return this._setupMove3DOperation(e,t,i,"transform",r)}async _setupPointTransform3DOperation(e,t,i){const r="transform",{enableRotation:s,enableScaling:l,enableZ:y}=t,d=await this._requireModule(import("./editingTools.7d749583.js").then(function(T){return T.e}));if(Ur(d))return d;const v=new d.module.GraphicTransformTool({graphic:e,view:i,enableRotation:s,enableScaling:l,enableZ:y,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(v),this.updateGraphics.add(e);const _=[],M=new cc({activeComponent:v,tool:r,type:"update",onEnd:()=>{var T;_.forEach(A=>A.remove()),_.length=0,(T=this.view.tools)==null||T.remove(v),v.destroyed||v.destroy()},undo:()=>{f5(M,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{y5(M,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async T=>{this.updateGraphics.add(T),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[T],removed:[],type:"selection-change"},type:"update"});const A=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);Ur(A)||(M.onEnd(),M.destroy(),this._setUpdateOperationHandle(A,t))},removeFromSelection:T=>{this.updateGraphics.remove(T),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[T],type:"selection-change"},type:"update"}),M.complete()},toggleTool:()=>{}});return _.push(...this._getHandlesForComponent(M,t),this.view.on("immediate-click",T=>this._getCommonUpdateOperationClickHandlers(M,T,t),rt.WIDGET),i.on("key-down",T=>{this._getCommonUpdateOperationKeyDownHandlers(M,T),T.key===It.snappingToggle&&(this.snappingOptions.enabledToggled=!0,T.stopPropagation())},rt.WIDGET),i.on("key-up",T=>{T.key===It.snappingToggle&&(this.snappingOptions.enabledToggled=!1,T.stopPropagation())},rt.WIDGET)),M}async _setupPolyTransform3DOperation(e,t,i,r=!1){const s="transform",{enableRotation:l,enableScaling:y,enableZ:d,preserveAspectRatio:v}=t,_=await this._requireModule(import("./editingTools.7d749583.js").then(function(R){return R.e}));if(Ur(_))return _;const M=new _.module.ExtentTransformTool({graphic:e,view:i,enableRotation:l,enableScaling:y,enableZ:d,preserveAspectRatio:v,tooltipOptions:this.tooltipOptions});this.view.tools.add(M),r||this.updateGraphics.add(e);const T=[],A=new cc({activeComponent:M,tool:s,type:"update",onEnd:()=>{var R;T.forEach(F=>F.remove()),T.length=0,(R=this.view.tools)==null||R.remove(M),M.destroyed||M.destroy()},canUndo:()=>M.canUndo,undo:()=>{M.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>M.canRedo,redo:()=>{M.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async R=>{this.updateGraphics.add(R),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[R],removed:[],type:"selection-change"},type:"update"});const F=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);Ur(F)||(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(F,t))},removeFromSelection:R=>{this.updateGraphics.remove(R),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[R],type:"selection-change"},type:"update"}),A.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;const R=this.updateGraphics.getItemAt(0);if(e5(R)!==Ci.SUPPORTED)return;const F=await this._setupReshape3DOperation(R,t,i,!0);Ur(F)||(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(F,t))}});return T.push(...this._getHandlesForComponent(A,t),this.view.on("immediate-click",R=>this._getCommonUpdateOperationClickHandlers(A,R,t),rt.WIDGET),this.view.on("key-down",R=>this._getCommonUpdateOperationKeyDownHandlers(A,R),rt.WIDGET),this.view.on("key-down",R=>{R.key!==It.constraint||R.repeat||(M.preserveAspectRatio=!M.preserveAspectRatio,R.stopPropagation())},rt.WIDGET),this.view.on("key-up",R=>{R.key===It.constraint&&(M.preserveAspectRatio=!M.preserveAspectRatio,R.stopPropagation())},rt.WIDGET)),A}async _setupMove2DOperation(e,t,i){const r="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=await this._getGraphicMover(e,t,i);if(Ur(s))return s;const l=new cc({activeComponent:s,tool:r,type:"update",onEnd:()=>{var _;this._displayDefaultCursor(),v.forEach(M=>M.remove()),d.forEach(M=>M.remove()),v=[],d=[],s.destroy(),(_=this._internalGraphicsLayer)==null||_.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const _=this.updateGraphics.toArray();f5(l,_),l.refreshComponent(),this._emitUndoEvent({graphics:_,tool:r})},redo:()=>{const _=this.updateGraphics.toArray();y5(l,_),l.refreshComponent(),this._emitRedoEvent({graphics:_,tool:r})},addToSelection:async _=>{await this._updateSpatialReference(_),this.updateGraphics.push(_),s.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[_],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:_=>{const M=this.updateGraphics.indexOf(_);l.history.undo.forEach(A=>A.updates.splice(M,1)),l.history.redo.forEach(A=>A.updates.splice(M,1)),this.updateGraphics.remove(_);const T=this.updateGraphics.toArray();this.emit("update",{graphics:T,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[_],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?s.graphics=T:l.complete()}});let y=!1,d=[i.on("immediate-click",_=>this._getCommonUpdateOperationClickHandlers(l,_,t),rt.WIDGET),i.on("key-down",_=>{this._getCommonUpdateOperationKeyDownHandlers(l,_),_.key!==It.constraint||_.repeat||(y=!0,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},rt.WIDGET),i.on("key-up",_=>{_.key===It.constraint&&y&&(y=!1,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},rt.WIDGET)],v=this._getHandlesForComponent(l,t);return l}async _setupReshape3DOperation(e,t,i,r=!1){const s="reshape",l=await this._requireModule(import("./editingTools.7d749583.js").then(function(_){return _.e}));if(Ur(l))return l;this.snappingOptions.enabledToggled=!1;const y=new l.module.GraphicReshapeTool({view:i,graphic:e,enableZVertex:t.enableZ&&t.reshapeOptions.vertexOperation==="move",enableZShape:t.enableZ&&t.reshapeOptions.shapeOperation==="move",enableMoveGraphic:t.reshapeOptions.shapeOperation==="move"||t.reshapeOptions.shapeOperation==="move-xy",enableMidpoints:t.reshapeOptions.edgeOperation==="split",enableEdgeOffset:t.reshapeOptions.edgeOperation==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(y),r||this.updateGraphics.add(e);const d=[],v=new cc({activeComponent:y,tool:s,type:"update",onEnd:()=>{var _;d.forEach(M=>M.remove()),d.length=0,(_=this.view.tools)==null||_.remove(y),y.destroyed||y.destroy()},canUndo:()=>y.canUndo,undo:()=>{y.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>y.canRedo,redo:()=>{y.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async _=>{this.updateGraphics.add(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[_],removed:[],type:"selection-change"},type:"update"});const M=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);Ur(M)||(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(M,t))},removeFromSelection:_=>{this.updateGraphics.remove(_),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[_],type:"selection-change"},type:"update"}),v.complete()},toggleTool:async()=>{if(t.toggleToolOnClick===!1)return;const _=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);Ur(_)||(v.onEnd(),v.destroy(),this._setUpdateOperationHandle(_,t))}});return d.push(...this._getHandlesForComponent(v,t),i.on("immediate-click",_=>this._getCommonUpdateOperationClickHandlers(v,_,t),rt.WIDGET),i.on("key-down",_=>{this._getCommonUpdateOperationKeyDownHandlers(v,_),_.key===It.snappingToggle&&(this.snappingOptions.enabledToggled=!0,_.stopPropagation())},rt.WIDGET),i.on("key-up",_=>{_.key===It.snappingToggle&&(this.snappingOptions.enabledToggled=!1,_.stopPropagation())},rt.WIDGET)),v}async _setupTransformOrReshape2DOperation(e,t,i,r){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=t==="transform"?await this._getBox(e,i,r):await this._getReshape(e,i,r);if(Ur(s))return s;const l=new cc({activeComponent:s,type:"update",onEnd:()=>{d.forEach(v=>v.remove()),y.forEach(v=>v.remove()),d=[],y=[],l.activeComponent&&!l.activeComponent.destroyed&&l.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{f5(l,this.updateGraphics.toArray()),l.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:l.tool})},redo:()=>{y5(l,this.updateGraphics.toArray()),l.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:l.tool})},addToSelection:async v=>{let _=l.activeComponent;if(_.type==="reshape"){const M=[...this.updateGraphics,v];this.updateGraphics.removeAll();const T=await this._setupMove2DOperation(M,i,r);if(Ur(T))return;l.onEnd(),l.destroy(),this._setUpdateOperationHandle(T,i)}else this.updateGraphics.add(v),_.graphics=this.updateGraphics.toArray(),_.refresh(),l.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[v],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async v=>{const _=this.updateGraphics.indexOf(v);l.history.undo.forEach(T=>T.updates.splice(_,1)),l.history.redo.forEach(T=>T.updates.splice(_,1)),this.updateGraphics.remove(v);const M=this.updateGraphics.toArray();if(M.length===0)l.complete();else{const T=M[0].geometry;M.length!==1||!q(T)||T.type!=="point"&&T.type!=="multipoint"?l.activeComponent.graphics=M:l.toggleTool()}this.emit("update",{graphics:M,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[v],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const v=this.updateGraphics.getItemAt(0),_=v.geometry;if(q(_)&&(l.tool==="reshape"&&(_.type==="point"||_.type==="multipoint")||l.tool==="transform"&&_.type==="extent"))return;let M=null;l.tool==="transform"?M=await this._getReshape([v],i,r):l.tool==="reshape"&&(M=await this._getBox([v],i,r)),Ur(M)||(l.activeComponent.destroy(),l.activeComponent=M,l.activeComponent&&(d.forEach(T=>T.remove()),d=this._getHandlesForComponent(l,i)))}});let y=[r.on("immediate-click",v=>this._getCommonUpdateOperationClickHandlers(l,v,i),rt.WIDGET),r.on("key-down",v=>{if(this._getCommonUpdateOperationKeyDownHandlers(l,v),v.key!==It.snappingToggle||v.repeat||(this.snappingOptions.enabledToggled=!0,v.stopPropagation()),v.key===It.constraint&&!v.repeat&&l){const _=l.activeComponent;_&&_.type==="box"&&(_.preserveAspectRatio=!_.preserveAspectRatio)}},rt.WIDGET),r.on("key-up",v=>{var _;if(v.key===It.snappingToggle&&((_=l==null?void 0:l.activeComponent)==null?void 0:_.type)==="reshape"&&(this.snappingOptions.enabledToggled=!1,v.stopPropagation()),v.key===It.constraint&&l){const M=l.activeComponent;M&&M.type==="box"&&(M.preserveAspectRatio=!M.preserveAspectRatio)}},rt.WIDGET)],d=this._getHandlesForComponent(l,i);return l}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:r}=t,s=await this._requireModule(import("./GraphicMover.2331eb09.js").then(function(l){return l.G}));return Ur(s)?s:new s.module.default({enableMoveAllGraphics:r,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:l,dy:y,graphic:d})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:y,mover:d,type:"move-start"},type:"update"})},onGraphicMove:({dx:l,dy:y,graphic:d})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:y,mover:d,type:"move"},type:"update"}),onGraphicMoveStop:({dx:l,dy:y,graphic:d})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:y,mover:d,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,i){const{enableRotation:r,enableScaling:s,preserveAspectRatio:l}=t,y=await this._requireModule(import("./Box.cf6f21d5.js"));return Ur(y)?y:new y.module.default({graphics:e,enableRotation:r,enableScaling:s,preserveAspectRatio:l,layer:this._internalGraphicsLayer,view:i,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onMove:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onMoveStop:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onScaleStart:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onScale:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onScaleStop:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onRotateStart:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onRotate:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"}),onRotateStop:d=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},d),type:"update"})}})}async _getReshape(e,t,i){var y,d;const r=((y=t.reshapeOptions)==null?void 0:y.edgeOperation)==="split",s=((d=t.reshapeOptions)==null?void 0:d.shapeOperation)==="move",l=await this._requireModule(import("./Reshape.8f35180d.js"));return Ur(l)?l:new l.module.default({enableMidpoints:r,enableMovement:s,graphic:e[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:i,callbacks:{onReshapeStart:v=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},v),type:"update"}),onReshape:v=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:te({},v),type:"update"}),onReshapeStop:({mover:v,type:_})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:v,type:_},type:"update"}),onMoveStart:({dx:v,dy:_,mover:M,type:T})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:_,mover:M,type:T},type:"update"}),onMove:({dx:v,dy:_,mover:M,type:T})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:_,mover:M,type:T},type:"update"}),onMoveStop:({dx:v,dy:_,mover:M,type:T})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:_,mover:M,type:T},type:"update"}),onVertexAdd:({added:v,type:_,vertices:M})=>{const T=v.map(A=>Bf(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:T,vertices:M,type:_},type:"update"})},onVertexRemove:({removed:v,type:_,vertices:M})=>{const T=v.map(A=>Bf(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:T,vertices:M,type:_},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:r,viewEvent:s})=>{var l;((l=s.native)==null?void 0:l.shiftKey)&&(s.stopPropagation(),e.removeFromSelection(r))}),i.on("graphic-move-start",r=>e.addToHistory(hc(r.allGraphics)))];case"box":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(hc(r.graphics))),i.on("rotate-start",r=>e.addToHistory(hc(r.graphics))),i.on("scale-start",r=>e.addToHistory(hc(r.graphics)))];case"reshape":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(hc([r.mover]))),i.on("reshape-start",r=>e.addToHistory(hc([r.graphic]))),i.on("vertex-add",r=>e.addToHistory(hc([r.oldGraphic]))),i.on("vertex-remove",r=>e.addToHistory(hc([r.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",r=>{e.addToHistory(hc(r.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r.dx,dy:r.dy,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:r})=>{e.addToHistory({updates:[r]})}),i.on("graphic-translate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[i.on("reshape",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-add",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-remove",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];default:return}}_onTransformOrReshape2DGraphicClick(e,t,i){var l;const{graphic:r,viewEvent:s}=i;return((l=s.native)==null?void 0:l.shiftKey)&&r.layer===this.layer?(s.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(s.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;const i=this.view.map;this._disablePopup(t);const r=()=>{if(e===this._operationHandle){const s=this.updateGraphics.toArray(),l=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:s,state:"complete",aborted:e.cancelled,tool:l,toolEventInfo:null,type:"update"})}};e.on("complete",r)}async _getCommonUpdateOperationClickHandlers(e,t,i){const r=Li(t),s=await t.async(()=>this._getFirstHit(r));if(ae(s))return void e.complete();if(t.native.shiftKey&&this._toggleSelection([s.graphic],e,i))return void t.stopPropagation();this.updateGraphics.includes(s.graphic)?t.stopPropagation():e.complete()}_toggleSelection(e,t,i){const r=!!i.multipleSelectionEnabled;return e.some(s=>s!=null&&!(!r||s.layer!==this.layer)&&(this.updateGraphics.includes(s)?t.removeFromSelection(s):t.addToSelection(s),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===It.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):i===It.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):i===It.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&It.delete.includes(i)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;const t=this.activeComponent,i=this.updateGraphics.toArray();ae(t)||t.type==="reshape-3d"||(t.type!=="reshape"||i.length===1&&Hb(i[0].geometry,"type")==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=oi(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||ae(t))&&(e.attributes&&e.attributes.esriSketchTool||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,i){Ae.getLogger(this.declaredClass).error(new fe(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",De(te({},e),{type:"undo"}))}_emitRedoEvent(e){this.emit("redo",De(te({},e),{type:"redo"}))}_emitDeleteEvent(e){this.emit("delete",De(te({},e),{type:"delete"}))}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:d5}}wait(){return em(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return((t=this.view)==null?void 0:t.type)!=="3d"||this.updateOnGraphicClick||q(e)&&e.toggleToolOnClick}_disablePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&ae(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}_restorePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&q(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const e=this.view;e&&(Wa(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await uO(em(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal))}};function v7e(e){return e==="polygon"||e==="rectangle"||e==="circle"}function f5(e,t){_Z("undo",e.history.undo,e.history.redo,t)}function y5(e,t){_Z("redo",e.history.redo,e.history.undo,t)}function _Z(e,t,i,r){const s=t.pop().updates,l=[];r.forEach((y,d)=>{const v=s[d];v!=null&&("geometry"in v&&q(v.geometry)&&(l.push({geometry:y.geometry}),y.geometry=v.geometry),"symbol"in v&&q(v.symbol)&&(l.push({symbol:y.symbol}),y.symbol=v.symbol),"undo"in v&&(l.push(v),v[e](y)))}),i.push({updates:l})}function hc(e){return{updates:e.map(t=>({geometry:t.geometry}))}}function Ur(e){return"requireError"in e&&e.requireError==="aborted"}m([x()],Ni.prototype,"updating",null),m([x()],Ni.prototype,"_operationHandle",void 0),m([x({readOnly:!0})],Ni.prototype,"activeTool",null),m([x()],Ni.prototype,"activeFillSymbol",void 0),m([x()],Ni.prototype,"activeLineSymbol",void 0),m([x()],Ni.prototype,"activeVertexSymbol",void 0),m([x()],Ni.prototype,"allowDeleteKey",void 0),m([x({readOnly:!0})],Ni.prototype,"createGraphic",null),m([x()],Ni.prototype,"defaultCreateOptions",null),m([x()],Ni.prototype,"defaultUpdateOptions",null),m([x({type:jx,nonNullable:!0})],Ni.prototype,"labelOptions",void 0),m([x()],Ni.prototype,"layer",void 0),m([x({types:Ts})],Ni.prototype,"pointSymbol",void 0),m([x({types:Ts})],Ni.prototype,"polygonSymbol",void 0),m([x({types:Ts})],Ni.prototype,"polylineSymbol",void 0),m([x({type:dT,nonNullable:!0})],Ni.prototype,"snappingOptions",null),m([x()],Ni.prototype,"_snappingManager",void 0),m([x({readOnly:!0})],Ni.prototype,"state",null),m([x({type:Dx,nonNullable:!0})],Ni.prototype,"tooltipOptions",void 0),m([x({readOnly:!0})],Ni.prototype,"updateGraphics",void 0),m([x()],Ni.prototype,"updateOnGraphicClick",void 0),m([x({types:Ts})],Ni.prototype,"updatePointSymbol",void 0),m([x({types:Ts})],Ni.prototype,"updatePolygonSymbol",void 0),m([x({types:Ts})],Ni.prototype,"updatePolylineSymbol",void 0),m([x({types:Ts})],Ni.prototype,"vertexSymbol",void 0),m([x({value:null})],Ni.prototype,"view",null),Ni=m([Y("esri.widgets.Sketch.SketchViewModel")],Ni);var xZ=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},SZ={exports:{}};(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var i=function(r){var s=/\blang(?:uage)?-([\w-]+)\b/i,l=0,y={},d={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function Z(Q){return Q instanceof v?new v(Q.type,Z(Q.content),Q.alias):Array.isArray(Q)?Q.map(Z):Q.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(Z){return Object.prototype.toString.call(Z).slice(8,-1)},objId:function(Z){return Z.__id||Object.defineProperty(Z,"__id",{value:++l}),Z.__id},clone:function Z(Q,ee){ee=ee||{};var re,ie;switch(d.util.type(Q)){case"Object":if(ie=d.util.objId(Q),ee[ie])return ee[ie];re={},ee[ie]=re;for(var he in Q)Q.hasOwnProperty(he)&&(re[he]=Z(Q[he],ee));return re;case"Array":return ie=d.util.objId(Q),ee[ie]?ee[ie]:(re=[],ee[ie]=re,Q.forEach(function(be,we){re[we]=Z(be,ee)}),re);default:return Q}},getLanguage:function(Z){for(;Z&&!s.test(Z.className);)Z=Z.parentElement;return Z?(Z.className.match(s)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(re){var Z=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(re.stack)||[])[1];if(Z){var Q=document.getElementsByTagName("script");for(var ee in Q)if(Q[ee].src==Z)return Q[ee]}return null}},isActive:function(Z,Q,ee){for(var re="no-"+Q;Z;){var ie=Z.classList;if(ie.contains(Q))return!0;if(ie.contains(re))return!1;Z=Z.parentElement}return!!ee}},languages:{plain:y,plaintext:y,text:y,txt:y,extend:function(Z,Q){var ee=d.util.clone(d.languages[Z]);for(var re in Q)ee[re]=Q[re];return ee},insertBefore:function(Z,Q,ee,re){re=re||d.languages;var ie=re[Z],he={};for(var be in ie)if(ie.hasOwnProperty(be)){if(be==Q)for(var we in ee)ee.hasOwnProperty(we)&&(he[we]=ee[we]);ee.hasOwnProperty(be)||(he[be]=ie[be])}var xe=re[Z];return re[Z]=he,d.languages.DFS(d.languages,function($e,je){je===xe&&$e!=Z&&(this[$e]=he)}),he},DFS:function Z(Q,ee,re,ie){ie=ie||{};var he=d.util.objId;for(var be in Q)if(Q.hasOwnProperty(be)){ee.call(Q,be,Q[be],re||be);var we=Q[be],xe=d.util.type(we);xe==="Object"&&!ie[he(we)]?(ie[he(we)]=!0,Z(we,ee,null,ie)):xe==="Array"&&!ie[he(we)]&&(ie[he(we)]=!0,Z(we,ee,be,ie))}}},plugins:{},highlightAll:function(Z,Q){d.highlightAllUnder(document,Z,Q)},highlightAllUnder:function(Z,Q,ee){var re={callback:ee,container:Z,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",re),re.elements=Array.prototype.slice.apply(re.container.querySelectorAll(re.selector)),d.hooks.run("before-all-elements-highlight",re);for(var ie=0,he;he=re.elements[ie++];)d.highlightElement(he,Q===!0,re.callback)},highlightElement:function(Z,Q,ee){var re=d.util.getLanguage(Z),ie=d.languages[re];Z.className=Z.className.replace(s,"").replace(/\s+/g," ")+" language-"+re;var he=Z.parentElement;he&&he.nodeName.toLowerCase()==="pre"&&(he.className=he.className.replace(s,"").replace(/\s+/g," ")+" language-"+re);var be=Z.textContent,we={element:Z,language:re,grammar:ie,code:be};function xe(je){we.highlightedCode=je,d.hooks.run("before-insert",we),we.element.innerHTML=we.highlightedCode,d.hooks.run("after-highlight",we),d.hooks.run("complete",we),ee&&ee.call(we.element)}if(d.hooks.run("before-sanity-check",we),he=we.element.parentElement,he&&he.nodeName.toLowerCase()==="pre"&&!he.hasAttribute("tabindex")&&he.setAttribute("tabindex","0"),!we.code){d.hooks.run("complete",we),ee&&ee.call(we.element);return}if(d.hooks.run("before-highlight",we),!we.grammar){xe(d.util.encode(we.code));return}if(Q&&r.Worker){var $e=new Worker(d.filename);$e.onmessage=function(je){xe(je.data)},$e.postMessage(JSON.stringify({language:we.language,code:we.code,immediateClose:!0}))}else xe(d.highlight(we.code,we.grammar,we.language))},highlight:function(Z,Q,ee){var re={code:Z,grammar:Q,language:ee};return d.hooks.run("before-tokenize",re),re.tokens=d.tokenize(re.code,re.grammar),d.hooks.run("after-tokenize",re),v.stringify(d.util.encode(re.tokens),re.language)},tokenize:function(Z,Q){var ee=Q.rest;if(ee){for(var re in ee)Q[re]=ee[re];delete Q.rest}var ie=new T;return A(ie,ie.head,Z),M(Z,ie,Q,ie.head,0),F(ie)},hooks:{all:{},add:function(Z,Q){var ee=d.hooks.all;ee[Z]=ee[Z]||[],ee[Z].push(Q)},run:function(Z,Q){var ee=d.hooks.all[Z];if(!(!ee||!ee.length))for(var re=0,ie;ie=ee[re++];)ie(Q)}},Token:v};r.Prism=d;function v(Z,Q,ee,re){this.type=Z,this.content=Q,this.alias=ee,this.length=(re||"").length|0}v.stringify=function Z(Q,ee){if(typeof Q=="string")return Q;if(Array.isArray(Q)){var re="";return Q.forEach(function(xe){re+=Z(xe,ee)}),re}var ie={type:Q.type,content:Z(Q.content,ee),tag:"span",classes:["token",Q.type],attributes:{},language:ee},he=Q.alias;he&&(Array.isArray(he)?Array.prototype.push.apply(ie.classes,he):ie.classes.push(he)),d.hooks.run("wrap",ie);var be="";for(var we in ie.attributes)be+=" "+we+'="'+(ie.attributes[we]||"").replace(/"/g,"&quot;")+'"';return"<"+ie.tag+' class="'+ie.classes.join(" ")+'"'+be+">"+ie.content+"</"+ie.tag+">"};function _(Z,Q,ee,re){Z.lastIndex=Q;var ie=Z.exec(ee);if(ie&&re&&ie[1]){var he=ie[1].length;ie.index+=he,ie[0]=ie[0].slice(he)}return ie}function M(Z,Q,ee,re,ie,he){for(var be in ee)if(!(!ee.hasOwnProperty(be)||!ee[be])){var we=ee[be];we=Array.isArray(we)?we:[we];for(var xe=0;xe<we.length;++xe){if(he&&he.cause==be+","+xe)return;var $e=we[xe],je=$e.inside,it=!!$e.lookbehind,Ye=!!$e.greedy,Lt=$e.alias;if(Ye&&!$e.pattern.global){var Dt=$e.pattern.toString().match(/[imsuy]*$/)[0];$e.pattern=RegExp($e.pattern.source,Dt+"g")}for(var ft=$e.pattern||$e,Ze=re.next,Ct=ie;Ze!==Q.tail&&!(he&&Ct>=he.reach);Ct+=Ze.value.length,Ze=Ze.next){var Oi=Ze.value;if(Q.length>Z.length)return;if(!(Oi instanceof v)){var Ui=1,_i;if(Ye){if(_i=_(ft,Ct,Z,it),!_i)break;var ct=_i.index,pr=_i.index+_i[0].length,Rr=Ct;for(Rr+=Ze.value.length;ct>=Rr;)Ze=Ze.next,Rr+=Ze.value.length;if(Rr-=Ze.value.length,Ct=Rr,Ze.value instanceof v)continue;for(var Ne=Ze;Ne!==Q.tail&&(Rr<pr||typeof Ne.value=="string");Ne=Ne.next)Ui++,Rr+=Ne.value.length;Ui--,Oi=Z.slice(Ct,Rr),_i.index-=Ct}else if(_i=_(ft,0,Oi,it),!_i)continue;var ct=_i.index,We=_i[0],yt=Oi.slice(0,ct),ni=Oi.slice(ct+We.length),si=Ct+Oi.length;he&&si>he.reach&&(he.reach=si);var Rt=Ze.prev;yt&&(Rt=A(Q,Rt,yt),Ct+=yt.length),R(Q,Rt,Ui);var Ft=new v(be,je?d.tokenize(We,je):We,Lt,We);if(Ze=A(Q,Rt,Ft),ni&&A(Q,Ze,ni),Ui>1){var ue={cause:be+","+xe,reach:si};M(Z,Q,ee,Ze.prev,Ct,ue),he&&ue.reach>he.reach&&(he.reach=ue.reach)}}}}}}function T(){var Z={value:null,prev:null,next:null},Q={value:null,prev:Z,next:null};Z.next=Q,this.head=Z,this.tail=Q,this.length=0}function A(Z,Q,ee){var re=Q.next,ie={value:ee,prev:Q,next:re};return Q.next=ie,re.prev=ie,Z.length++,ie}function R(Z,Q,ee){for(var re=Q.next,ie=0;ie<ee&&re!==Z.tail;ie++)re=re.next;Q.next=re,re.prev=Q,Z.length-=ie}function F(Z){for(var Q=[],ee=Z.head.next;ee!==Z.tail;)Q.push(ee.value),ee=ee.next;return Q}if(!r.document)return r.addEventListener&&(d.disableWorkerMessageHandler||r.addEventListener("message",function(Z){var Q=JSON.parse(Z.data),ee=Q.language,re=Q.code,ie=Q.immediateClose;r.postMessage(d.highlight(re,d.languages[ee],ee)),ie&&r.close()},!1)),d;var V=d.util.currentScript();V&&(d.filename=V.src,V.hasAttribute("data-manual")&&(d.manual=!0));function z(){d.manual||d.highlightAll()}if(!d.manual){var W=document.readyState;W==="loading"||W==="interactive"&&V&&V.defer?document.addEventListener("DOMContentLoaded",z):window.requestAnimationFrame?window.requestAnimationFrame(z):window.setTimeout(z,16)}return d}(t);e.exports&&(e.exports=i),typeof xZ!="undefined"&&(xZ.Prism=i),i.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},i.languages.markup.tag.inside["attr-value"].inside.entity=i.languages.markup.entity,i.languages.markup.doctype.inside["internal-subset"].inside=i.languages.markup,i.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(i.languages.markup.tag,"addInlined",{value:function(s,l){var y={};y["language-"+l]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:i.languages[l]},y.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:y}};d["language-"+l]={pattern:/[\s\S]+/,inside:i.languages[l]};var v={};v[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:d},i.languages.insertBefore("markup","cdata",v)}}),Object.defineProperty(i.languages.markup.tag,"addAttribute",{value:function(r,s){i.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:i.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.xml=i.languages.extend("markup",{}),i.languages.ssml=i.languages.xml,i.languages.atom=i.languages.xml,i.languages.rss=i.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var l=r.languages.markup;l&&(l.tag.addInlined("style","css"),l.tag.addAttribute("style","css"))}(i),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{"class-name":[i.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),i.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,i.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:i.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:i.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:i.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:i.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:i.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),i.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&(i.languages.markup.tag.addInlined("script","javascript"),i.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),i.languages.js=i.languages.javascript,function(){if(typeof i=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading\u2026",s=function(V,z){return"\u2716 Error "+V+" while fetching file: "+z},l="\u2716 Error: File does not exist or is empty",y={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",v="loading",_="loaded",M="failed",T="pre[data-src]:not(["+d+'="'+_+'"]):not(['+d+'="'+v+'"])',A=/\blang(?:uage)?-([\w-]+)\b/i;function R(V,z){var W=V.className;W=W.replace(A," ")+" language-"+z,V.className=W.replace(/\s+/g," ").trim()}i.hooks.add("before-highlightall",function(V){V.selector+=", "+T}),i.hooks.add("before-sanity-check",function(V){var z=V.element;if(z.matches(T)){V.code="",z.setAttribute(d,v);var W=z.appendChild(document.createElement("CODE"));W.textContent=r;var Z=z.getAttribute("data-src"),Q=V.language;if(Q==="none"){var ee=(/\.(\w+)$/.exec(Z)||[,"none"])[1];Q=y[ee]||ee}R(W,Q),R(z,Q);var re=i.plugins.autoloader;re&&re.loadLanguages(Q);var ie=new XMLHttpRequest;ie.open("GET",Z,!0),ie.onreadystatechange=function(){ie.readyState==4&&(ie.status<400&&ie.responseText?(z.setAttribute(d,_),W.textContent=ie.responseText,i.highlightElement(W)):(z.setAttribute(d,M),ie.status>=400?W.textContent=s(ie.status,ie.statusText):W.textContent=l))},ie.send(null)}}),i.plugins.fileHighlight={highlight:function(z){for(var W=(z||document).querySelectorAll(T),Z=0,Q;Q=W[Z++];)i.highlightElement(Q)}};var F=!1;i.fileHighlight=function(){F||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),F=!0),i.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(SZ);var mAe=SZ.exports;export{dR as $,q as A,Oie as B,Rie as C,j7e as D,ae as E,So as F,O7e as G,L7e as H,Me as I,fe as J,_8e as K,ace as L,Wt as M,J9 as N,pd as O,mAe as P,Io as Q,zi as R,uH as S,Sr as T,li as U,JU as V,fr as W,Zs as X,gi as Y,_n as Z,WTe as _,x7e as a,Sge as a$,GU as a0,hO as a1,Z9 as a2,Qe as a3,Q_ as a4,Nr as a5,D_e as a6,N_e as a7,VU as a8,TE as a9,X_ as aA,Sg as aB,Ar as aC,TU as aD,fE as aE,AU as aF,Ht as aG,u_e as aH,DTe as aI,w_e as aJ,_1 as aK,VTe as aL,Jr as aM,AF as aN,bEe as aO,Ks as aP,Ro as aQ,jn as aR,su as aS,QIe as aT,vn as aU,nu as aV,qO as aW,m9e as aX,G8e as aY,YTe as aZ,nV as a_,zu as aa,pS as ab,fn as ac,pB as ad,jf as ae,pw as af,Ve as ag,fi as ah,BTe as ai,qTe as aj,Tn as ak,sn as al,e_ as am,ba as an,ot as ao,A0 as ap,m as aq,x as ar,Y as as,rt as at,Cn as au,Oo as av,Qs as aw,gl as ax,dt as ay,no as az,oA as b,fq as b$,Rm as b0,W$ as b1,lx as b2,JIe as b3,q8e as b4,P8e as b5,o8e as b6,e0 as b7,E5e as b8,kae as b9,ra as bA,QB as bB,eH as bC,Jl as bD,hn as bE,fw as bF,SH as bG,vH as bH,bH as bI,RH as bJ,wH as bK,EH as bL,zH as bM,rH as bN,GH as bO,ta as bP,qH as bQ,GO as bR,d4 as bS,rse as bT,Zne as bU,c4 as bV,UO as bW,e8e as bX,UH as bY,s8e as bZ,mq as b_,Rae as ba,At as bb,Lf as bc,eg as bd,Qy as be,UJ as bf,n5 as bg,r8e as bh,Nw as bi,Lw as bj,ATe as bk,PTe as bl,CTe as bm,DU as bn,IE as bo,$1 as bp,$Ie as bq,x8e as br,PIe as bs,me as bt,rD as bu,b1e as bv,w1e as bw,hTe as bx,mt as by,is as bz,S7e as c,Vbe as c$,gq as c0,Ol as c1,hv as c2,V_ as c3,_2e as c4,O8e as c5,LIe as c6,NIe as c7,qIe as c8,ko as c9,C9 as cA,tH as cB,OIe as cC,TIe as cD,hD as cE,W1e as cF,AIe as cG,tg as cH,Ka as cI,U3 as cJ,xD as cK,Qne as cL,hd as cM,qs as cN,lTe as cO,tTe as cP,di as cQ,rE as cR,eve as cS,bTe as cT,tve as cU,mTe as cV,Es as cW,yn as cX,u0 as cY,vTe as cZ,Dbe as c_,tI as ca,iI as cb,DIe as cc,jIe as cd,VIe as ce,zIe as cf,uD as cg,cD as ch,fH as ci,sH as cj,oH as ck,aH as cl,IH as cm,kIe as cn,XH as co,tW as cp,yH as cq,QH as cr,J1e as cs,RIe as ct,FIe as cu,F8e as cv,GIe as cw,u8e as cx,B1e as cy,H1e as cz,$7e as d,mh as d$,zbe as d0,Eo as d1,$me as d2,Zme as d3,m_ as d4,Iwe as d5,OTe as d6,swe as d7,lV as d8,dn as d9,DR as dA,ri as dB,Ie as dC,Gn as dD,zn as dE,ge as dF,vl as dG,g3 as dH,Zl as dI,Xj as dJ,gr as dK,lP as dL,a0 as dM,Lg as dN,kR as dO,gEe as dP,l0 as dQ,Lle as dR,ua as dS,b2 as dT,Of as dU,Fo as dV,t6 as dW,SEe as dX,lo as dY,WCe as dZ,cge as d_,aV as da,rTe as db,eTe as dc,Nye as dd,aTe as de,K$ as df,R7e as dg,F7e as dh,RG as di,i_e as dj,j_e as dk,_ge as dl,oV as dm,XTe as dn,tCe as dp,eCe as dq,QTe as dr,jU as ds,M2e as dt,Oy as du,Jp as dv,q2 as dw,mi as dx,bt as dy,Pp as dz,_s as e,x0 as e$,uO as e0,ZCe as e1,KCe as e2,YCe as e3,gd as e4,XCe as e5,QCe as e6,JCe as e7,eAe as e8,tAe as e9,Eve as eA,vEe as eB,zc as eC,ro as eD,rr as eE,HCe as eF,k9e as eG,oi as eH,Xy as eI,xie as eJ,zO as eK,n8e as eL,Cr as eM,$6e as eN,Kr as eO,Mc as eP,UW as eQ,Hk as eR,ese as eS,g6e as eT,yMe as eU,On as eV,jx as eW,Dx as eX,WB as eY,NSe as eZ,aI as e_,iAe as ea,rAe as eb,Bn as ec,ul as ed,yw as ee,wve as ef,ai as eg,zo as eh,BSe as ei,Lz as ej,Uc as ek,Nn as el,jr as em,Fbe as en,Lbe as eo,Nbe as ep,U6 as eq,N7e as er,UG as es,Ss as et,CEe as eu,Xg as ev,Td as ew,Gf as ex,LL as ey,Do as ez,Eee as f,K_ as f$,As as f0,aM as f1,vi as f2,xIe as f3,SIe as f4,L0 as f5,pIe as f6,gIe as f7,I3 as f8,dIe as f9,VEe as fA,LEe as fB,Tp as fC,E4e as fD,$Ce as fE,dS as fF,Xo as fG,RCe as fH,oAe as fI,B6e as fJ,zEe as fK,K9e as fL,jc as fM,Xr as fN,Qr as fO,Xs as fP,pi as fQ,$s as fR,Sn as fS,Dc as fT,FF as fU,hs as fV,t2 as fW,S1 as fX,sW as fY,Z_ as fZ,x1 as f_,mIe as fa,fIe as fb,vIe as fc,yIe as fd,bIe as fe,wIe as ff,_Ie as fg,NEe as fh,Po as fi,Sl as fj,wl as fk,OEe as fl,aL as fm,Nce as fn,Ew as fo,VI as fp,Xi as fq,FEe as fr,REe as fs,BEe as ft,r0 as fu,oJ as fv,H6e as fw,HEe as fx,sJ as fy,aAe as fz,Cee as g,DEe as g$,B$e as g0,rhe as g1,dW as g2,Tx as g3,oR as g4,Wk as g5,En as g6,rae as g7,$W as g8,i1 as g9,kTe as gA,tE as gB,y2 as gC,wx as gD,Vae as gE,Jk as gF,vu as gG,Kz as gH,Q8e as gI,nEe as gJ,rI as gK,Ly as gL,aSe as gM,oSe as gN,$9e as gO,bae as gP,Kq as gQ,I8e as gR,CP as gS,II as gT,J4e as gU,A8e as gV,DF as gW,P_e as gX,joe as gY,CCe as gZ,T8e as g_,yI as ga,ju as gb,k7e as gc,mCe as gd,Qce as ge,Mx as gf,bCe as gg,e2 as gh,nR as gi,n2 as gj,fS as gk,ur as gl,Ia as gm,w8e as gn,K8e as go,voe as gp,IL as gq,nhe as gr,O9e as gs,W7e as gt,go as gu,yZ as gv,gAe as gw,Na as gx,xn as gy,YV as gz,C7e as h,wCe as h$,z8e as h0,Zq as h1,eh as h2,EL as h3,oM as h4,_M as h5,GL as h6,X2 as h7,hW as h8,r_e as h9,gt as hA,nSe as hB,hMe as hC,Ci as hD,zCe as hE,GCe as hF,Fx as hG,zv as hH,Rx as hI,e4e as hJ,_I as hK,gS as hL,ld as hM,Yu as hN,Tr as hO,rSe as hP,BIe as hQ,t4e as hR,$ie as hS,Bq as hT,kCe as hU,lAe as hV,e5 as hW,ml as hX,AEe as hY,wS as hZ,she as h_,o4e as ha,ehe as hb,B4e as hc,hCe as hd,H7e as he,sEe as hf,xR as hg,UEe as hh,C8e as hi,yCe as hj,oI as hk,X1 as hl,_Ce as hm,K4e as hn,tSe as ho,TI as hp,BCe as hq,VCe as hr,UCe as hs,phe as ht,TL as hu,uhe as hv,Hoe as hw,ohe as hx,LTe as hy,qCe as hz,A7e as i,_oe as i$,wie as i0,yr as i1,iP as i2,qF as i3,$o as i4,xCe as i5,whe as i6,zW as i7,gCe as i8,hI as i9,qk as iA,Pg as iB,Og as iC,kg as iD,JEe as iE,el as iF,Dve as iG,MTe as iH,Iie as iI,npe as iJ,Q3e as iK,U8e as iL,LS as iM,_he as iN,gu as iO,Z3e as iP,In as iQ,r2 as iR,Woe as iS,tR as iT,Nv as iU,S8e as iV,$he as iW,Mhe as iX,_S as iY,yU as iZ,vCe as i_,dI as ia,xI as ib,SI as ic,zoe as id,mE as ie,Vu as ig,D3e as ih,V3e as ii,Ll as ij,lhe as ik,Hy as il,Q9e as im,SCe as io,p4e as ip,hp as iq,Ome as ir,Z1 as is,kme as it,q4e as iu,i8e as iv,t8e as iw,Pme as ix,Lk as iy,ahe as iz,FC as j,qbe as j$,Bi as j0,Z7e as j1,yh as j2,p$ as j3,ky as j4,Yt as j5,Kre as j6,Uq as j7,Zue as j8,oEe as j9,_x as jA,TTe as jB,FW as jC,LW as jD,cSe as jE,wEe as jF,RP as jG,i6 as jH,Ng as jI,jg as jJ,xs as jK,to as jL,Ele as jM,ew as jN,Ile as jO,Lde as jP,_Ee as jQ,C3e as jR,em as jS,jTe as jT,cCe as jU,fme as jV,xme as jW,Gm as jX,Gp as jY,Gbe as jZ,O2 as j_,aEe as ja,F3 as jb,w2 as jc,G7e as jd,Cie as je,jle as jf,eu as jg,Rhe as jh,yS as ji,gSe as jj,H1 as jk,U_e as jl,Cx as jm,TCe as jn,MW as jo,ACe as jp,PCe as jq,A4e as jr,ECe as js,Xu as jt,s4e as ju,OCe as jv,vW as jw,Ex as jx,Qu as jy,v4e as jz,E7e as k,Ql as k$,Kg as k0,Ube as k1,R2 as k2,Rg as k3,hG as k4,Sae as k5,ITe as k6,lCe as k7,$l as k8,cEe as k9,xEe as kA,qEe as kB,k_e as kC,Z8e as kD,MCe as kE,R_e as kF,h4e as kG,X8e as kH,dEe as kI,eEe as kJ,pEe as kK,Uk as kL,Ms as kM,mU as kN,U3e as kO,bv as kP,M8e as kQ,VS as kR,vU as kS,I4e as kT,Lae as kU,Qk as kV,sP as kW,uEe as kX,L2e as kY,gv as kZ,U7e as k_,rEe as ka,Wa as kb,Sie as kc,$Ee as kd,tEe as ke,IEe as kf,EEe as kg,Dae as kh,zae as ki,aCe as kj,WEe as kk,cIe as kl,sCe as km,Mue as kn,W8e as ko,Y8e as kp,N8e as kq,lEe as kr,Hb as ks,x$e as kt,S$e as ku,B_e as kv,iEe as kw,J8e as kx,HIe as ky,j2 as kz,RQ as l,Cwe as l$,y_ as l0,oCe as l1,DL as l2,rCe as l3,A2 as l4,g0 as l5,FCe as l6,Up as l7,_0 as l8,Wm as l9,UTe as lA,Rf as lB,Y7e as lC,Iw as lD,Tw as lE,X7e as lF,exe as lG,yEe as lH,che as lI,bP as lJ,cO as lK,uAe as lL,Sq as lM,lJ as lN,Li as lO,LCe as lP,us as lQ,pl as lR,uCe as lS,Bf as lT,Oc as lU,NCe as lV,jCe as lW,DCe as lX,PEe as lY,Yne as lZ,It as l_,Nf as la,hEe as lb,j8e as lc,L8e as ld,Fae as le,V8e as lf,ICe as lg,D8e as lh,NTe as li,Aw as lj,M2 as lk,lMe as ll,sAe as lm,Fr as ln,E9 as lo,t5e as lp,rP as lq,lxe as lr,uxe as ls,nxe as lt,Bx as lu,Yfe as lv,Bk as lw,Op as lx,Ke as ly,Be as lz,_7e as m,wt as m$,_Te as m0,R8e as m1,k8e as m2,$9 as m3,vpe as m4,bxe as m5,zTe as m6,GTe as m7,Ec as m8,Fp as m9,YR as mA,Nd as mB,sh as mC,oh as mD,cM as mE,er as mF,uM as mG,pM as mH,i3 as mI,Jhe as mJ,v_e as mK,B7e as mL,eF as mM,Vr as mN,$R as mO,a8e as mP,bo as mQ,KTe as mR,JTe as mS,e9e as mT,bx as mU,jEe as mV,F_e as mW,FO as mX,w0 as mY,$n as mZ,Ts as m_,$2 as ma,Xl as mb,Lce as mc,T1 as md,Rve as me,kve as mf,Hve as mg,uk as mh,c8e as mi,ZTe as mj,g8e as mk,h8e as ml,d8e as mm,p8e as mn,f8e as mo,ig as mp,Ys as mq,Yse as mr,_G as ms,xG as mt,awe as mu,y8e as mv,bpe as mw,i0 as mx,wTe as my,r1 as mz,T7e as n,V7e as n$,rxe as n0,Jme as n1,FTe as n2,RTe as n3,Vd as n4,STe as n5,Pve as n6,Pm as n7,uTe as n8,ble as n9,Jt as nA,VJ as nB,Dse as nC,gp as nD,s3 as nE,s4 as nF,oTe as nG,aD as nH,IIe as nI,eT as nJ,WJ as nK,yAe as nL,oy as nM,fAe as nN,Xv as nO,dAe as nP,QI as nQ,WI as nR,cAe as nS,hAe as nT,pAe as nU,Dne as nV,Hne as nW,Ow as nX,Q7e as nY,na as nZ,zie as n_,Bp as na,Ug as nb,$6 as nc,Nz as nd,SG as ne,$G as nf,g_ as ng,Qm as nh,Yz as ni,D7e as nj,ym as nk,K7e as nl,Mne as nm,Yh as nn,t$e as no,fTe as np,Gme as nq,RJ as nr,FJ as ns,JI as nt,XMe as nu,QMe as nv,e$e as nw,DJ as nx,n$e as ny,s$e as nz,Mee as o,nIe as o$,z7e as o0,vhe as o1,khe as o2,Ohe as o3,TEe as o4,qD as o5,DD as o6,KIe as o7,nTe as o8,jD as o9,D$ as oA,YIe as oB,ZIe as oC,o5e as oD,iTe as oE,B3 as oF,hi as oG,K0 as oH,o1e as oI,rh as oJ,MV as oK,$V as oL,S4e as oM,Tre as oN,J7e as oO,fle as oP,YS as oQ,Rw as oR,ns as oS,QEe as oT,tIe as oU,zN as oV,ZEe as oW,YEe as oX,iIe as oY,lIe as oZ,XEe as o_,GD as oa,hIe as ob,E0 as oc,CG as od,Sye as oe,XIe as of,Ase as og,T4 as oh,fk as oi,m8e as oj,v8e as ok,b8e as ol,$8e as om,nCe as on,gM as oo,G0 as op,iCe as oq,ege as or,Jye as os,OD as ot,VD as ou,JB as ov,sTe as ow,mce as ox,yTe as oy,j$ as oz,NC as p,qve as p$,Wde as p0,uIe as p1,sIe as p2,eIe as p3,rIe as p4,KEe as p5,Ffe as p6,xh as p7,aIe as p8,oIe as p9,NF as pA,z6 as pB,Lr as pC,TG as pD,bz as pE,$Te as pF,DG as pG,gz as pH,$_ as pI,Swe as pJ,rs as pK,Tue as pL,fR as pM,Oz as pN,ETe as pO,Uve as pP,Xz as pQ,Ive as pR,u8 as pS,Cve as pT,Ave as pU,Pie as pV,kie as pW,Zy as pX,nk as pY,Whe as pZ,Ky as p_,d0 as pa,MM as pb,G_ as pc,pCe as pd,d3e as pe,Ki as pf,dZ as pg,j$e as ph,Yo as pi,U$e as pj,L$e as pk,uI as pl,fCe as pm,dCe as pn,lI as po,WIe as pp,f4e as pq,EIe as pr,d$ as ps,E$e as pt,ZS as pu,c8 as pv,j8 as pw,oce as px,sce as py,tce as pz,M7e as q,Eu as q$,ls as q0,F2 as q1,dwe as q2,Dz as q3,uwe as q4,Fve as q5,AG as q6,ok as q7,lk as q8,m8 as q9,GEe as qA,Ai as qB,q7e as qC,H8e as qD,B8e as qE,SR as qF,Fw as qG,al as qH,Ja as qI,Ck as qJ,zR as qK,X6e as qL,P7e as qM,Zm as qN,Ove as qO,gTe as qP,nt as qQ,Ih as qR,mG as qS,nG as qT,Mg as qU,Jve as qV,Wve as qW,$c as qX,N2 as qY,w$ as qZ,bve as q_,iv as qa,NG as qb,E_ as qc,Jm as qd,Gve as qe,G8 as qf,q8 as qg,n_ as qh,P$ as qi,_D as qj,ou as qk,L$ as ql,lre as qm,jG as qn,Q0 as qo,d7 as qp,PV as qq,cye as qr,yme as qs,hye as qt,NV as qu,WV as qv,l_ as qw,SV as qx,Bm as qy,Tve as qz,by as r,_be as r0,obe as r1,abe as r2,lbe as r3,vbe as r4,ube as r5,cbe as r6,hbe as r7,pbe as r8,dbe as r9,dTe as rA,pTe as rB,$8 as rC,l8e as rD,lu as rE,D4 as rF,uG as rG,t5 as rH,wG as rI,f1 as rJ,KD as rK,TSe as rL,n4e as rM,i4e as rN,mSe as rO,mEe as rP,E8e as rQ,Qle as rR,$7 as rS,cTe as rT,qwe as rU,nAe as rV,aMe as rW,EJ as rX,fbe as ra,ybe as rb,gbe as rc,mbe as rd,nMe as re,eMe as rf,Jx as rg,Aie as rh,ca as ri,fEe as rj,MEe as rk,WR as rl,$oe as rm,Bve as rn,zB as ro,xTe as rp,lle as rq,vne as rr,pO as rs,X as rt,kEe as ru,MIe as rv,UIe as rw,c0 as rx,Z1e as ry,CIe as rz,HTe as s,w7e as t,_y as u,I7e as v,VQ as w,Ae as x,Or as y,_ie as z};
