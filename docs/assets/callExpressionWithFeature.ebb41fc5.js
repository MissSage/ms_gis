var y=Object.defineProperty,g=Object.defineProperties;var f=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var m=(t,e,r)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u=(t,e)=>{for(var r in e||(e={}))v.call(e,r)&&m(t,r,e[r]);if(d)for(var r of d(e))w.call(e,r)&&m(t,r,e[r]);return t},i=(t,e)=>g(t,f(e));import{U as h,K as l,Y as G,dB as D,dC as M,dD as P,dE as b}from"./vendor.ad8aa1ba.js";function O(t,e,r,n,a){if(h(t))return null;const s=t.referencesGeometry()&&a?B(e,n,a):e,o=t.repurposeFeature(s);try{return t.evaluate(i(u({},r),{$feature:o}))}catch(p){return l.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",p),null}}const c=new Map;function B(t,e,r){const{transform:n,hasZ:a,hasM:s}=r;c.has(e)||c.set(e,C(e));const o=c.get(e)(t.geometry,n,a,s);return i(u({},t),{geometry:o})}function C(t){const e={};switch(t){case"esriGeometryPoint":return(r,n,a,s)=>b(n,e,r,a,s);case"esriGeometryPolygon":return(r,n,a,s)=>P(n,e,r,a,s);case"esriGeometryPolyline":return(r,n,a,s)=>M(n,e,r,a,s);case"esriGeometryMultipoint":return(r,n,a,s)=>D(n,e,r,a,s);default:return l.getLogger("esri.views.2d.support.arcadeOnDemand").error(new G("mapview-arcade",`Unable to handle geometryType: ${t}`)),r=>r}}export{O as i};
