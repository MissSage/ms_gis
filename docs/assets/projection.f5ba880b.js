import{K as b,gT as C,fy as F,lP as N,lQ as Y,lR as k,iR as _,h8 as M,kP as O,h9 as R,lS as x,gj as U,ag as h,gf as W,hl as w,U as g,kI as v,lT as S}from"./vendor.1bde3be2.js";import{i as s,T as c}from"./BufferView.a124dc0f.js";import{t as z,r as V,o as B}from"./vec33.eeba1728.js";const m=b.getLogger("esri.geometry.support.meshUtils.normalProjection");function Z(r,e,o,a,t){return l(a)?(p(u.TO_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert spatial reference to PCPF"),t)}function q(r,e,o,a,t){return l(a)?(p(u.FROM_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert to spatial reference from PCPF"),t)}function D(r,e,o){return C(r,e,0,o,F(e),0,r.length/3),o}function H(r,e,o){return C(r,F(o),0,e,o,0,r.length/3),e}function J(r,e,o){if(g(r))return e;const a=c.fromTypedArray(r),t=c.fromTypedArray(e);return z(t,a,o),e}function X(r,e,o){if(g(r))return e;v(n,o);const a=s.fromTypedArray(r),t=s.fromTypedArray(e);return V(t,a,n),S(n)||B(t,t),e}function $(r,e,o){if(g(r))return e;v(n,o);const a=s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),t=s.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(V(t,a,n),S(n)||B(t,t),r!==e)for(let f=3;f<r.length;f+=4)e[f]=r[f];return e}function rr(r,e,o,a,t){if(!l(a))return m.error("Cannot convert spatial reference to PCPF"),t;p(u.TO_PCPF,s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function er(r,e,o,a,t){if(!l(a))return m.error("Cannot convert to spatial reference from PCPF"),t;p(u.FROM_PCPF,s.fromTypedArray(r,16),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,16));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function p(r,e,o,a,t,f){if(!e)return;const E=o.count,T=F(t);if(j(t))for(let y=0;y<E;y++)a.getVec(y,A),e.getVec(y,i),_(T,A,d,T),M(n,d),r===u.FROM_PCPF&&O(n,n),R(i,i,n),f.setVec(y,i);else for(let y=0;y<E;y++){a.getVec(y,A),e.getVec(y,i),_(T,A,d,T),M(n,d);const L=x(o.get(y,1));let P=Math.cos(L);r===u.TO_PCPF&&(P=1/P),n[0]*=P,n[1]*=P,n[2]*=P,n[3]*=P,n[4]*=P,n[5]*=P,r===u.FROM_PCPF&&O(n,n),R(i,i,n),U(i,i),f.setVec(y,i)}return f}function l(r){return j(r)||G(r)}function j(r){return r.isWGS84||N(r)||Y(r)||k(r)}function G(r){return r.isWebMercator}var u;(function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"})(u||(u={}));const A=h(),i=h(),d=W(),n=w();export{er as L,D as M,H as O,J as R,$ as V,q as h,Z as j,rr as k,X as v};
