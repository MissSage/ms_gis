import{aA as c,aB as h,aD as s,aE as l,aF as b}from"./vendor.ad8aa1ba.js";const v={visible:"visibleSublayers"};let a=class extends c(h){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",r=>this.notifyChange(v[r.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,t=e==null?void 0:e.sublayers,i=[],o=n=>{const{minScale:y,maxScale:p,sublayers:u,visible:m}=n;m&&(r===0||(y===0||r<=y)&&(p===0||r>=p))&&(u?u.forEach(o):i.push(n))};return t==null||t.forEach(o),i}toJSON(){const{layer:e,layers:r}=this,{imageFormat:t,imageTransparency:i,version:o}=e;return{format:t,request:"GetMap",service:"WMS",styles:"",transparent:i?"TRUE":"FALSE",version:o,layers:r}}};s([l()],a.prototype,"layer",null),s([l({readOnly:!0})],a.prototype,"layers",null),s([l({type:Number})],a.prototype,"scale",void 0),s([l({readOnly:!0})],a.prototype,"version",null),s([l({readOnly:!0})],a.prototype,"visibleSublayers",null),a=s([b("esri.layers.support.ExportWMSImageParameters")],a);export{a as l};
