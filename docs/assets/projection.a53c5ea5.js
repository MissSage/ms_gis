import{S as j,gZ as C,fE as d,lV as N,lW as b,lX as W,iX as _,he as O,kV as M,hf as h,lY as k,gp as x,am as R,gl as Z,hr as w,$ as E,kO as V,lZ as v}from"./vendor.faf54504.js";import{i as s,T as c}from"./BufferView.4f86b08f.js";import{t as U,r as S,o as B}from"./vec33.ab880470.js";const m=j.getLogger("esri.geometry.support.meshUtils.normalProjection");function q(r,e,o,a,t){return l(a)?(p(u.TO_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert spatial reference to PCPF"),t)}function D(r,e,o,a,t){return l(a)?(p(u.FROM_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert to spatial reference from PCPF"),t)}function H(r,e,o){return C(r,e,0,o,d(e),0,r.length/3),o}function I(r,e,o){return C(r,d(o),0,e,o,0,r.length/3),e}function J(r,e,o){if(E(r))return e;const a=c.fromTypedArray(r),t=c.fromTypedArray(e);return U(t,a,o),e}function K(r,e,o){if(E(r))return e;V(f,o);const a=s.fromTypedArray(r),t=s.fromTypedArray(e);return S(t,a,f),v(f)||B(t,t),e}function Q(r,e,o){if(E(r))return e;V(f,o);const a=s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),t=s.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(S(t,a,f),v(f)||B(t,t),r!==e)for(let n=3;n<r.length;n+=4)e[n]=r[n];return e}function rr(r,e,o,a,t){if(!l(a))return m.error("Cannot convert spatial reference to PCPF"),t;p(u.TO_PCPF,s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT));for(let n=3;n<r.length;n+=4)t[n]=r[n];return t}function er(r,e,o,a,t){if(!l(a))return m.error("Cannot convert to spatial reference from PCPF"),t;p(u.FROM_PCPF,s.fromTypedArray(r,16),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,16));for(let n=3;n<r.length;n+=4)t[n]=r[n];return t}function p(r,e,o,a,t,n){if(!e)return;const g=o.count,T=d(t);if(L(t))for(let y=0;y<g;y++)a.getVec(y,A),e.getVec(y,i),_(T,A,F,T),O(f,F),r===u.FROM_PCPF&&M(f,f),h(i,i,f),n.setVec(y,i);else for(let y=0;y<g;y++){a.getVec(y,A),e.getVec(y,i),_(T,A,F,T),O(f,F);const Y=k(o.get(y,1));let P=Math.cos(Y);r===u.TO_PCPF&&(P=1/P),f[0]*=P,f[1]*=P,f[2]*=P,f[3]*=P,f[4]*=P,f[5]*=P,r===u.FROM_PCPF&&M(f,f),h(i,i,f),x(i,i),n.setVec(y,i)}return n}function l(r){return L(r)||X(r)}function L(r){return r.isWGS84||N(r)||b(r)||W(r)}function X(r){return r.isWebMercator}var u;(function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"})(u||(u={}));const A=R(),i=R(),F=Z(),f=w();export{er as L,H as M,I as O,J as R,Q as V,D as h,q as j,rr as k,K as v};
