var h=Object.defineProperty,b=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var d=(s,e,t)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,l=(s,e)=>{for(var t in e||(e={}))m.call(e,t)&&d(s,t,e[t]);if(c)for(var t of c(e))R.call(e,t)&&d(s,t,e[t]);return s},p=(s,e)=>b(s,u(e));import{o as g}from"./WGLContainer.36a5457c.js";import{L as F}from"./enums.2d9e6f64.js";class _ extends g{constructor(){super(...arguments),this.requiresDedicatedFBO=!1}dispose(){}doRender(e){const t=this.createRenderParams(e),{context:r,painter:o,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const a=this._getFbo(t),f=o.getRenderTarget();r.bindFramebuffer(a),o.setRenderTarget(a),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const n of this.children)n.beforeRender(e);for(const n of this.children)n.processRender(t);for(const n of this.children)n.afterRender(e);o.setRenderTarget(f),o.releaseFbo(a),r.bindFramebuffer(this._prevFBO),o.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),o.blitTexture(r,a.colorTexture,F.NEAREST),o.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return p(l({},super.createRenderParams(e)),{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1})}_getFbo(e){const{context:t,painter:r}=e,{width:o,height:i}=t.getViewport();return r.acquireFbo(o,i)}}export{_ as r};
