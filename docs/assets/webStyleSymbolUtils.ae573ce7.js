import{db as g,dc as $,nr as S,de as c,ns as w,d9 as F,bS as M,a3 as N,W as U,dd as j,df as v,dg as R,nt as T,nu as D,nv as O,da as k}from"./vendor.faf54504.js";import{c as q,a as P}from"./devEnvironmentUtils.d8d0484c.js";function G(e,t,a,n){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?A(e,t,n):F(e,t,n).then(r=>z(M(r),e.name,t,a,n)):Promise.reject(new N("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function z(e,t,a,n,r){var p,f,h;const y=e.data,m=a&&U(a.portal)?a.portal:j.getDefault(),d={portal:m,url:c(e.baseUrl),origin:"portal-item"},o=y.items.find(l=>l.name===t);if(!o){const l=`The symbol name '${t}' could not be found`;return Promise.reject(new N("symbolstyleutils:symbol-name-not-found",l,{symbolName:t}))}let i=v(R(o,n),d),u=(f=(p=o.thumbnail)==null?void 0:p.href)!=null?f:null;const b=o.thumbnail&&o.thumbnail.imageData;q()&&(i=(h=P(i))!=null?h:"",u=P(u));const E={portal:m,url:c(w(i)),origin:"portal-item"};return g(i,r).then(l=>{const W=n==="cimRef"?$(l.data):l.data,s=S(W,E);if(s&&T(s)){if(u){const x=v(u,d);s.thumbnail=new D({url:x})}else b&&(s.thumbnail=new D({url:`data:image/png;base64,${b}`}));e.styleUrl?s.styleOrigin=new O({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new O({portal:a.portal,styleName:e.styleName,name:t}))}return s})}function A(e,t,a){const n=k.replace(/\{SymbolName\}/gi,e.name),r=U(t.portal)?t.portal:j.getDefault();return g(n,a).then(y=>{const m=$(y.data);return S(m,{portal:r,url:c(w(n)),origin:"portal-item"})})}export{z as fetchSymbolFromStyle,G as resolveWebStyleSymbol};
