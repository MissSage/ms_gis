import{K as j,gC as E,fh as d,lM as Y,lN as b,lO as U,iC as _,gU as M,kJ as O,gV as R,lP as k,g2 as x,ag as h,f_ as W,h5 as w,U as C,kC as V,lQ as v}from"./vendor.ad8aa1ba.js";import{i as s,T as c}from"./BufferView.9753ca35.js";import{t as z,r as B,o as S}from"./vec33.8a4fcb5c.js";const m=j.getLogger("esri.geometry.support.meshUtils.normalProjection");function Z(r,e,o,a,t){return l(a)?(p(u.TO_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert spatial reference to PCPF"),t)}function q(r,e,o,a,t){return l(a)?(p(u.FROM_PCPF,s.fromTypedArray(r),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t)),t):(m.error("Cannot convert to spatial reference from PCPF"),t)}function D(r,e,o){return E(r,e,0,o,d(e),0,r.length/3),o}function H(r,e,o){return E(r,d(o),0,e,o,0,r.length/3),e}function I(r,e,o){if(C(r))return e;const a=c.fromTypedArray(r),t=c.fromTypedArray(e);return z(t,a,o),e}function X(r,e,o){if(C(r))return e;V(n,o);const a=s.fromTypedArray(r),t=s.fromTypedArray(e);return B(t,a,n),v(n)||S(t,t),e}function $(r,e,o){if(C(r))return e;V(n,o);const a=s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),t=s.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if(B(t,a,n),v(n)||S(t,t),r!==e)for(let f=3;f<r.length;f+=4)e[f]=r[f];return e}function rr(r,e,o,a,t){if(!l(a))return m.error("Cannot convert spatial reference to PCPF"),t;p(u.TO_PCPF,s.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function er(r,e,o,a,t){if(!l(a))return m.error("Cannot convert to spatial reference from PCPF"),t;p(u.FROM_PCPF,s.fromTypedArray(r,16),c.fromTypedArray(e),c.fromTypedArray(o),a,s.fromTypedArray(t,16));for(let f=3;f<r.length;f+=4)t[f]=r[f];return t}function p(r,e,o,a,t,f){if(!e)return;const g=o.count,T=d(t);if(L(t))for(let y=0;y<g;y++)a.getVec(y,A),e.getVec(y,i),_(T,A,F,T),M(n,F),r===u.FROM_PCPF&&O(n,n),R(i,i,n),f.setVec(y,i);else for(let y=0;y<g;y++){a.getVec(y,A),e.getVec(y,i),_(T,A,F,T),M(n,F);const N=k(o.get(y,1));let P=Math.cos(N);r===u.TO_PCPF&&(P=1/P),n[0]*=P,n[1]*=P,n[2]*=P,n[3]*=P,n[4]*=P,n[5]*=P,r===u.FROM_PCPF&&O(n,n),R(i,i,n),x(i,i),f.setVec(y,i)}return f}function l(r){return L(r)||G(r)}function L(r){return r.isWGS84||Y(r)||b(r)||U(r)}function G(r){return r.isWebMercator}var u;(function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"})(u||(u={}));const A=h(),i=h(),F=W(),n=w();export{er as L,D as M,H as O,I as R,$ as V,q as h,Z as j,rr as k,X as v};
