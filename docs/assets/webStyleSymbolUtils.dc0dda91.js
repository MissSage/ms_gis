import{cU as $,cV as g,n8 as S,cX as u,n9 as w,cS as x,bz as z,J as N,A as U,cW as j,cY as D,cZ as A,na as F,nb as v,nc as O,cT as J}from"./vendor.150443b7.js";import{c as M,a as P}from"./devEnvironmentUtils.d8d0484c.js";function Z(e,t,a,n){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?V(e,t,n):x(e,t,n).then(r=>R(z(r),e.name,t,a,n)):Promise.reject(new N("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function R(e,t,a,n,r){var d,f,h;const y=e.data,m=a&&U(a.portal)?a.portal:j.getDefault(),b={portal:m,url:u(e.baseUrl),origin:"portal-item"},o=y.items.find(l=>l.name===t);if(!o){const l=`The symbol name '${t}' could not be found`;return Promise.reject(new N("symbolstyleutils:symbol-name-not-found",l,{symbolName:t}))}let i=D(A(o,n),b),c=(f=(d=o.thumbnail)==null?void 0:d.href)!=null?f:null;const p=o.thumbnail&&o.thumbnail.imageData;M()&&(i=(h=P(i))!=null?h:"",c=P(c));const E={portal:m,url:u(w(i)),origin:"portal-item"};return $(i,r).then(l=>{const T=n==="cimRef"?g(l.data):l.data,s=S(T,E);if(s&&F(s)){if(c){const W=D(c,b);s.thumbnail=new v({url:W})}else p&&(s.thumbnail=new v({url:`data:image/png;base64,${p}`}));e.styleUrl?s.styleOrigin=new O({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new O({portal:a.portal,styleName:e.styleName,name:t}))}return s})}function V(e,t,a){const n=J.replace(/\{SymbolName\}/gi,e.name),r=U(t.portal)?t.portal:j.getDefault();return $(n,a).then(y=>{const m=g(y.data);return S(m,{portal:r,url:u(w(n)),origin:"portal-item"})})}export{R as fetchSymbolFromStyle,Z as resolveWebStyleSymbol};
