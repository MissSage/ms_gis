import{z as a}from"./workerHelper.2d33c03b.js";import{A as d,f,u as c,h as l,a as p,m as g}from"./edgeProcessing.a4751821.js";import"./BufferView.8b09f266.js";import"./vendor.150443b7.js";import"./InterleavedLayout.b9f1279a.js";import"./types.44c7402c.js";import"./deduplicate.e7a51a71.js";import"./VertexAttribute.42396f25.js";import"./glUtil.b02793dc.js";import"./enums.2d9e6f64.js";import"./VertexElementDescriptor.1fdca6da.js";class B{async extract(e){const t=o(e),i=f(t),r=[t.data.buffer];return{result:m(i,r),transferList:r}}async extractComponentsEdgeLocations(e){const t=o(e),i=c(t.data,t.skipDeduplicate,t.indices,t.indicesLength),r=l(i,b,u),n=[];return{result:a(r.regular.instancesData,n),transferList:n}}async extractEdgeLocations(e){const t=o(e),i=c(t.data,t.skipDeduplicate,t.indices,t.indicesLength),r=l(i,L,u),n=[];return{result:a(r.regular.instancesData,n),transferList:n}}}function o(s){return{data:d.createView(s.dataBuffer),indices:s.indicesType==="Uint32Array"?new Uint32Array(s.indices):s.indicesType==="Uint16Array"?new Uint16Array(s.indices):s.indices,indicesLength:s.indicesLength,writerSettings:s.writerSettings,skipDeduplicate:s.skipDeduplicate}}function m(s,e){return e.push(s.regular.lodInfo.lengths.buffer),e.push(s.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:a(s.regular.instancesData,e),lodInfo:{lengths:s.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:a(s.silhouette.instancesData,e),lodInfo:{lengths:s.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:s.averageEdgeLength}}class h{allocate(e){return p.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,i){e.position0.setVec(t,i.position0),e.position1.setVec(t,i.position1)}}class w{allocate(e){return g.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,i){e.position0.setVec(t,i.position0),e.position1.setVec(t,i.position1),e.componentIndex.set(t,i.componentIndex)}}const L=new h,b=new w,u={allocate:()=>null,write:()=>{},trim:()=>null};export{B as default};
